{"version":3,"sources":["../src/dat/color/toString.js","../src/dat/utils/common.js","../src/dat/color/interpret.js","../src/dat/color/math.js","../src/dat/color/Color.js","../src/dat/controllers/Controller.js","../src/dat/dom/dom.js","../src/dat/controllers/BooleanController.js","../src/dat/controllers/OptionController.js","../src/dat/controllers/StringController.js","../src/dat/controllers/NumberController.js","../src/dat/controllers/NumberControllerBox.js","../src/dat/controllers/NumberControllerSlider.js","../src/dat/controllers/FunctionController.js","../src/dat/controllers/ColorController.js","../src/dat/utils/css.js","../src/dat/gui/saveDialogue.html.js","../src/dat/controllers/ControllerFactory.js","../src/dat/utils/requestAnimationFrame.js","../src/dat/dom/CenteredDiv.js","../src/dat/gui/GUI.js","../src/dat/index.js","node_modules/three/build/three.module.js","node_modules/postprocessing/build/postprocessing.esm.js","node_modules/three/examples/jsm/postprocessing/Pass.js","node_modules/three/examples/jsm/shaders/CopyShader.js","node_modules/three/examples/jsm/shaders/LuminosityHighPassShader.js","patched/UnreallBloomPassPatched.js","node_modules/three/examples/jsm/shaders/FilmShader.js","node_modules/three/examples/jsm/postprocessing/FilmPass.js","three-base.js","node_modules/three/examples/jsm/controls/OrbitControls.js","node_modules/three/examples/jsm/nodes/core/Node.js","node_modules/three/examples/jsm/nodes/core/TempNode.js","node_modules/three/examples/jsm/nodes/core/InputNode.js","node_modules/three/examples/jsm/nodes/core/ConstNode.js","node_modules/three/examples/jsm/nodes/core/VarNode.js","node_modules/three/examples/jsm/nodes/core/StructNode.js","node_modules/three/examples/jsm/nodes/core/AttributeNode.js","node_modules/three/examples/jsm/nodes/core/NodeLib.js","node_modules/three/examples/jsm/nodes/core/FunctionNode.js","node_modules/three/examples/jsm/nodes/core/ExpressionNode.js","node_modules/three/examples/jsm/nodes/core/FunctionCallNode.js","node_modules/three/examples/jsm/nodes/core/NodeUtils.js","node_modules/three/examples/jsm/nodes/core/NodeFrame.js","node_modules/three/examples/jsm/nodes/core/NodeUniform.js","node_modules/three/examples/jsm/nodes/inputs/Vector2Node.js","node_modules/three/examples/jsm/nodes/inputs/Vector3Node.js","node_modules/three/examples/jsm/nodes/inputs/Vector4Node.js","node_modules/three/examples/jsm/nodes/accessors/UVNode.js","node_modules/three/examples/jsm/nodes/inputs/FloatNode.js","node_modules/three/examples/jsm/nodes/utils/ColorSpaceNode.js","node_modules/three/examples/jsm/nodes/inputs/TextureNode.js","node_modules/three/examples/jsm/nodes/accessors/PositionNode.js","node_modules/three/examples/jsm/nodes/accessors/NormalNode.js","node_modules/three/examples/jsm/nodes/accessors/ReflectNode.js","node_modules/three/examples/jsm/nodes/inputs/CubeTextureNode.js","node_modules/three/examples/jsm/nodes/math/OperatorNode.js","node_modules/three/examples/jsm/nodes/math/MathNode.js","node_modules/three/examples/jsm/nodes/misc/TextureCubeUVNode.js","node_modules/three/examples/jsm/nodes/misc/TextureCubeNode.js","node_modules/three/examples/jsm/nodes/core/NodeBuilder.js","node_modules/three/examples/jsm/nodes/inputs/BoolNode.js","node_modules/three/examples/jsm/nodes/inputs/IntNode.js","node_modules/three/examples/jsm/nodes/inputs/ColorNode.js","node_modules/three/examples/jsm/nodes/inputs/Matrix3Node.js","node_modules/three/examples/jsm/nodes/inputs/Matrix4Node.js","node_modules/three/examples/jsm/nodes/inputs/ScreenNode.js","node_modules/three/examples/jsm/nodes/inputs/ReflectorNode.js","node_modules/three/examples/jsm/nodes/inputs/PropertyNode.js","node_modules/three/examples/jsm/nodes/materials/nodes/RawNode.js","node_modules/three/examples/jsm/nodes/materials/NodeMaterial.js","node_modules/three/examples/jsm/nodes/inputs/RTTNode.js","node_modules/three/examples/jsm/nodes/accessors/ColorsNode.js","node_modules/three/examples/jsm/nodes/accessors/CameraNode.js","node_modules/three/examples/jsm/nodes/accessors/LightNode.js","node_modules/three/examples/jsm/nodes/accessors/ResolutionNode.js","node_modules/three/examples/jsm/nodes/accessors/ScreenUVNode.js","node_modules/three/examples/jsm/nodes/math/CondNode.js","node_modules/three/examples/jsm/nodes/procedural/NoiseNode.js","node_modules/three/examples/jsm/nodes/procedural/CheckerNode.js","node_modules/three/examples/jsm/nodes/misc/NormalMapNode.js","node_modules/three/examples/jsm/nodes/misc/BumpMapNode.js","node_modules/three/examples/jsm/nodes/utils/BypassNode.js","node_modules/three/examples/jsm/nodes/utils/JoinNode.js","node_modules/three/examples/jsm/nodes/utils/SwitchNode.js","node_modules/three/examples/jsm/nodes/utils/TimerNode.js","node_modules/three/examples/jsm/nodes/utils/VelocityNode.js","node_modules/three/examples/jsm/nodes/utils/UVTransformNode.js","node_modules/three/examples/jsm/nodes/utils/MaxMIPLevelNode.js","node_modules/three/examples/jsm/nodes/utils/SpecularMIPLevelNode.js","node_modules/three/examples/jsm/nodes/utils/SubSlotNode.js","node_modules/three/examples/jsm/nodes/effects/BlurNode.js","node_modules/three/examples/jsm/nodes/effects/LuminanceNode.js","node_modules/three/examples/jsm/nodes/effects/ColorAdjustmentNode.js","node_modules/three/examples/jsm/nodes/materials/nodes/SpriteNode.js","node_modules/three/examples/jsm/nodes/materials/nodes/PhongNode.js","node_modules/three/examples/jsm/nodes/materials/nodes/StandardNode.js","node_modules/three/examples/jsm/nodes/materials/nodes/MeshStandardNode.js","node_modules/three/examples/jsm/nodes/materials/SpriteNodeMaterial.js","node_modules/three/examples/jsm/nodes/materials/PhongNodeMaterial.js","node_modules/three/examples/jsm/nodes/materials/StandardNodeMaterial.js","node_modules/three/examples/jsm/nodes/materials/MeshStandardNodeMaterial.js","node_modules/three/examples/jsm/nodes/postprocessing/NodePostProcessing.js","node_modules/three/examples/jsm/nodes/Nodes.js","proto-planet.js"],"names":["color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","a","h","s","toFixed","v","str","hex","length","ARR_EACH","Array","prototype","forEach","ARR_SLICE","slice","Common","target","each","call","arguments","obj","keys","isObject","Object","key","isUndefined","bind","toCall","args","i","apply","itr","scope","l","BREAK","fnc","func","threshold","callImmediately","timeout","delayed","callNow","setTimeout","toArray","undefined","isNaN","isArray","constructor","Function","INTERPRETATIONS","common","isString","original","test","match","parseInt","parseFloat","isNumber","result","toReturn","interpret","family","litmus","conversions","conversion","read","tmpComponent","ColorMath","hi","floor","f","p","q","t","c","min","max","delta","NaN","hex_with_component","componentIndex","value","Color","Error","colorToString","write","defineRGBComponent","component","componentHexIndex","defineProperty","space","recalculateRGB","defineHSVComponent","recalculateHSV","math","component_from_hex","extend","hsv_to_rgb","rgb_to_hsv","COMPONENTS","rgb_to_hex","Controller","object","property","initialValue","domElement","document","createElement","__onChange","__onFinishChange","newValue","updateDisplay","getValue","EVENT_MAP","EVENT_MAP_INV","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","isNull","dom","elem","selectable","style","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","hor","vert","vertical","horizontal","position","left","right","top","bottom","eventType","pars","aux","params","className","evt","createEvent","clientX","x","clientY","y","initMouseEvent","bubbles","cancelable","window","clickCount","init","initKeyboardEvent","initKeyEvent","defaults","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","removeEventListener","detachEvent","classes","split","indexOf","push","join","replace","removeAttribute","index","splice","RegExp","getComputedStyle","width","height","el","offset","offsetParent","offsetLeft","offsetTop","activeElement","type","href","BooleanController","_this","__prev","__checkbox","setAttribute","onChange","setValue","appendChild","checked","OptionController","opts","options","__select","map","element","opt","innerHTML","desiredValue","selectedIndex","isActive","StringController","__input","onBlur","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","roundToDecimal","decimals","tenTo","NumberControllerBox","__truncationSuspended","prevY","attempted","onFinish","onMouseDrag","diff","onMouseUp","unbind","onMouseDown","i1","i2","o1","o2","NumberControllerSlider","__background","__foreground","onTouchStart","addClass","preventDefault","bgRect","getBoundingClientRect","touches","onTouchMove","onTouchEnd","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","makeSelectable","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","removeClass","valueField","fieldDown","fieldDownH","setSV","fieldUpSV","setH","fieldUpH","toOriginal","fieldRect","mismatch","flip","_flip","toHexString","marginTop","vendors","linearGradient","background","vendor","cssText","hueGradient","css","url","indoc","doc","link","rel","getElementsByTagName","cssContent","injected","head","saveDialogContents","ControllerFactory","isFunction","isBoolean","requestAnimationFrame","callback","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","CenteredDiv","backgroundElement","makeFullscreen","body","hide","display","opacity","webkitTransform","layout","defer","innerWidth","getWidth","innerHeight","getHeight","inject","styleSheet","CSS_NAMESPACE","HIDE_KEY_CODE","CLOSE_BUTTON_HEIGHT","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","DEFAULT_WIDTH","autoPlace","load","preset","parent","hideable","resizable","scrollable","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","defineProperties","closeOnTop","getRoot","revert","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","onClickTitle","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","stringify","getSaveObject","saveToLocalStorageIfPossible","resetWidth","root","toggleHide","gui","CLASS_CONTROLLER_ROW","CLASS_TOO_TALL","CLASS_DRAG","_keydownHandler","which","add","controller","removeChild","__li","subfolder","removeFolder","newGuiParams","folders","li","folder","parentElement","getOffset","node","__save_row","__resize_handle","offsetHeight","debounce","saveDialogueContents","remembered","getCurrentPreset","presetName","newDom","liBefore","removeListeners","markPresetModified","modified","__preset_select","augmentController","__gui","nextSibling","nextElementSibling","remove","firstElementChild","listen","box","method","pc","pb","returned","oldName","wasListening","newController","compose","fakeEvent","stopPropagation","borderLeftColor","isModified","recallSavedValue","matchedIndex","controllerMap","presetMap","factoryArgs","concat","before","container","location","addPresetOption","setSelected","showHideExplain","explain","addSaveMenu","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","show","focus","save","prompt","saveAs","addResizeHandle","pmouseX","drag","dragStop","dragStart","setWidth","w","useInitialValues","savedValues","setPresetSelectIndex","updateDisplays","controllerArray","controllers","domImport","GUIImport","Number","EPSILON","isInteger","isFinite","sign","get","assign","TypeError","output","source","nextKey","hasOwnProperty","REVISION","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping","CustomToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","NormalAnimationBlendMode","AdditiveAnimationBlendMode","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","EventDispatcher","listener","_listeners","listeners","hasEventListener","listenerArray","array","_lut","MathUtils","DEG2RAD","PI","RAD2DEG","generateUUID","d0","random","d1","d2","d3","uuid","toUpperCase","clamp","euclideanModulo","n","m","mapLinear","a1","a2","b1","b2","lerp","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","ceil","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","order","cos","sin","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","set","console","warn","Vector2","isVector2","setScalar","scalar","setX","setY","setComponent","getComponent","clone","copy","addVectors","addScalar","addScaledVector","sub","subVectors","subScalar","multiply","multiplyScalar","divide","divideScalar","applyMatrix3","elements","clampScalar","minVal","maxVal","clampLength","roundToZero","negate","dot","cross","lengthSq","sqrt","manhattanLength","normalize","angle","atan2","distanceTo","distanceToSquared","dx","dy","manhattanDistanceTo","setLength","alpha","lerpVectors","v1","v2","equals","fromArray","fromBufferAttribute","attribute","getX","getY","rotateAround","center","Matrix3","error","isMatrix3","n11","n12","n13","n21","n22","n23","n31","n32","n33","te","identity","me","extractBasis","xAxis","yAxis","zAxis","setFromMatrix3Column","setFromMatrix4","multiplyMatrices","premultiply","ae","be","a11","a12","a13","a21","a22","a23","a31","a32","a33","b11","b12","b13","b21","b22","b23","b31","b32","b33","determinant","d","getInverse","matrix","throwOnDegenerate","t11","t12","t13","det","detInv","transpose","tmp","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","tx","ty","sx","sy","rotation","cx","cy","scale","rotate","theta","translate","_canvas","ImageUtils","getDataURL","image","src","HTMLCanvasElement","canvas","createElementNS","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","matrixAutoUpdate","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","version","onUpdate","create","isTexture","updateMatrix","toJSON","meta","isRootObject","textures","metadata","generator","wrap","images","dispose","transformUv","uv","Vector4","z","isVector4","setZ","setW","applyMatrix4","setAxisAngleFromQuaternion","acos","setAxisAngleFromRotationMatrix","epsilon","epsilon2","m11","m12","m13","m21","m22","m23","m31","m32","m33","xx","yy","zz","xy","xz","yz","getZ","getW","WebGLRenderTarget","scissor","scissorTest","viewport","texture","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","setSize","WebGLMultisampleRenderTarget","samples","isWebGLMultisampleRenderTarget","Quaternion","_y","_z","_w","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","len","tDir","multiplyQuaternionsFlat","_onChangeCallback","isQuaternion","quaternion","setFromEuler","euler","update","isEuler","c1","c3","s1","s3","setFromAxisAngle","axis","halfAngle","setFromRotationMatrix","trace","setFromUnitVectors","vFrom","vTo","EPS","angleTo","rotateTowards","inverse","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","_onChange","_vector","Vector3","_quaternion","isVector3","multiplyVectors","applyEuler","applyQuaternion","applyAxisAngle","applyNormalMatrix","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","dz","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","setFromMatrixColumn","sz","_v1","_m1","Matrix4","_zero","_one","isMatrix4","n14","n24","n34","n41","n42","n43","n44","copyPosition","makeBasis","extractRotation","scaleX","scaleY","scaleZ","makeRotationFromEuler","af","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","lookAt","eye","up","a14","a24","a34","a41","a42","a43","a44","b14","b24","b34","b41","b42","b43","b44","setPosition","t14","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","makeScale","makeShear","x2","y2","z2","wx","wy","wz","decompose","invSX","invSY","invSZ","makePerspective","near","far","makeOrthographic","_matrix","_quaternion$1","Euler","DefaultOrder","_order","RotationOrders","asin","setFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","Layers","mask","channel","enable","enableAll","toggle","disable","disableAll","layers","_object3DId","_v1$1","_q1","_m1$1","_target","_position","_scale","_quaternion$2","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","children","DefaultUp","onRotationChange","onQuaternionChange","configurable","enumerable","modelViewMatrix","normalMatrix","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","updateWorldMatrix","isCamera","isLight","attach","getObjectById","id","getObjectByProperty","getObjectByName","child","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","force","updateParents","updateChildren","geometries","materials","shapes","isInstancedMesh","count","instanceMatrix","serialize","library","isMesh","isLine","isPoints","geometry","parameters","shape","material","uuids","extractFromCache","cache","values","data","recursive","Scene","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","_points","_vector$1","_box","Box3","_v0","_v1$2","_v2","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","Infinity","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","setFromPoints","points","makeEmpty","il","expandByPoint","setFromCenterAndSize","size","halfSize","setFromObject","expandByObject","isEmpty","getCenter","getSize","point","expandByVector","expandByScalar","boundingBox","computeBoundingBox","union","containsPoint","containsBox","getParameter","intersectsBox","intersectsSphere","sphere","clampPoint","intersectsPlane","plane","constant","intersectsTriangle","triangle","axes","satForAxes","distanceToPoint","clampedPoint","getBoundingSphere","intersect","v0","extents","j","p0","p1","p2","_box$1","Sphere","optionalCenter","maxRadiusSq","radiusSum","deltaLengthSq","getBoundingBox","_vector$2","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","direction","ray","at","recast","closestPointToPoint","directionDistance","distanceSqToPoint","distanceSqToSegment","optionalPointOnRay","optionalPointOnSegment","segExtent","a01","b0","s0","sqrDist","extDet","invDet","intersectSphere","tca","radius2","thc","t0","t1","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","start","intersectsLine","startSign","endSign","end","coplanarPoint","optionalNormalMatrix","referencePoint","_v0$1","_v1$3","_v2$1","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","u","getUV","p3","uv1","uv2","uv3","isFrontFacing","setFromPointsAndIndices","i0","getArea","getMidpoint","getPlane","d4","vc","d5","d6","vb","va","_colorKeywords","_hslA","_hslB","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","isColor","setHex","setStyle","setHSL","handleAlpha","string","exec","components","charAt","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","normalized","NAMES","Face3","materialIndex","vertexNormals","vertexColors","materialId","Material","blending","side","flatShading","transparent","blendSrc","blendDst","blendEquation","blendSrcAlpha","blendDstAlpha","blendEquationAlpha","depthFunc","depthTest","depthWrite","stencilWriteMask","stencilFunc","stencilRef","stencilFuncMask","stencilFail","stencilZFail","stencilZPass","stencilWrite","clippingPlanes","clipIntersection","clipShadows","shadowSide","colorWrite","precision","polygonOffset","polygonOffsetFactor","polygonOffsetUnits","dithering","alphaTest","premultipliedAlpha","toneMapped","isMaterial","onBeforeCompile","customProgramCacheKey","setValues","currentValue","isRoot","roughness","metalness","sheen","emissive","emissiveIntensity","specular","shininess","clearcoat","clearcoatRoughness","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","clearcoatNormalScale","matcap","alphaMap","lightMap","aoMap","aoMapIntensity","bumpMap","bumpScale","normalMap","normalMapType","normalScale","displacementMap","displacementScale","displacementBias","roughnessMap","metalnessMap","emissiveMap","specularMap","envMap","reflectivity","refractionRatio","combine","envMapIntensity","gradientMap","sizeAttenuation","linewidth","dashSize","gapSize","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","morphTargets","morphNormals","skinning","srcPlanes","dstPlanes","MeshBasicMaterial","lightMapIntensity","isMeshBasicMaterial","_vector$3","_vector2$1","BufferAttribute","itemSize","usage","updateRange","isBufferAttribute","onUploadCallback","setUsage","copyAt","index1","index2","copyArray","copyColorsArray","colors","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXY","setXYZ","setXYZW","onUpload","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8Array","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","DirectGeometry","vertices","normals","uvs","uvs2","groups","skinWeights","skinIndices","boundingSphere","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","computeGroups","group","faces","face","fromGeometry","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsPosition","morphNormalsLength","morphTargetsNormal","hasSkinIndices","hasSkinWeights","vertexUvs","morphTarget","morphNormal","arrayMax","_bufferGeometryId","_m1$2","_obj","_offset","_box$2","_boxMorphTargets","_vector$4","BufferGeometry","attributes","morphAttributes","morphTargetsRelative","drawRange","isBufferGeometry","getIndex","setIndex","getAttribute","deleteAttribute","addGroup","clearGroups","setDrawRange","needsUpdate","tangent","computeBoundingSphere","positions","lineDistances","isGeometry","updateFromObject","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","morphAttribute","jl","computeFaceNormals","computeVertexNormals","positionAttribute","normalAttribute","pA","pB","pC","nA","nB","nC","cb","ab","vA","vB","vC","normalizeNormals","merge","attribute1","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","indices","array2","geometry2","newAttribute","morphArray","attributeData","hasMorphAttributes","attributeArray","_inverseMatrix","_ray","_sphere","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","morphTargetInfluences","morphTargetDictionary","ml","String","raycaster","intersects","intersection","morphPosition","groupMaterial","checkBufferGeometryIntersection","faceIndex","isMultiMaterial","fl","faceMaterial","fvA","fvB","fvC","checkIntersection","uvs_f","morphInfluences","influence","isSkinnedMesh","boneTransform","_geometryId","_m1$3","_obj$1","_offset$1","Geometry","vertex","fromBufferGeometry","addFace","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","kl","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precisionPoints","faceIndicesToRemove","idx","sortFacesByMaterialIndex","_id","materialIndexSort","sort","uvs1","newUvs1","newUvs2","normalsHash","colorsHash","uvsHash","hasMaterial","hasFaceUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","enabled","hash","srcVertexNormal","destVertexNormal","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","cloneUniforms","mergeUniforms","uniforms","merged","UniformsUtils","default_vertex","default_fragment","ShaderMaterial","defines","vertexShader","fragmentShader","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","uniform","Camera","PerspectiveCamera","fov","aspect","zoom","view","filmGauge","filmOffset","updateProjectionMatrix","isPerspectiveCamera","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","offsetX","offsetY","clearViewOffset","skew","CubeCamera","renderTarget","isWebGLCubeRenderTarget","cameraPX","cameraNX","cameraPY","cameraNY","cameraPZ","cameraNZ","renderer","scene","currentXrEnabled","xr","currentRenderTarget","getRenderTarget","setRenderTarget","render","clear","stencil","WebGLCubeRenderTarget","dummy","fromEquirectangularTexture","shader","tEquirect","DataTexture","isDataTexture","_sphere$1","_vector$5","Frustum","p4","p5","planes","frustum","setFromProjectionMatrix","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","intersectsObject","intersectsSprite","sprite","negRadius","UniformsLib","diffuse","uvTransform","uv2Transform","specularmap","envmap","flipEnvMap","maxMipLevel","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","fogDensity","fogNear","fogFar","fogColor","ambientLightColor","lightProbe","directionalLights","properties","directionalLightShadows","shadowBias","shadowNormalBias","shadowRadius","shadowMapSize","directionalShadowMap","directionalShadowMatrix","spotLights","coneCos","penumbraCos","decay","spotLightShadows","spotShadowMap","spotShadowMatrix","pointLights","pointLightShadows","shadowCameraNear","shadowCameraFar","pointShadowMap","pointShadowMatrix","hemisphereLights","skyColor","groundColor","rectAreaLights","WebGLAnimation","isAnimating","animationLoop","requestId","onAnimationFrame","time","frame","stop","cancelAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","createBuffer","bufferType","buffer","bindBuffer","bufferData","bytesPerElement","BYTES_PER_ELEMENT","updateBuffer","bufferSubData","subarray","isInterleavedBufferAttribute","deleteBuffer","delete","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","envmap_physical_pars_fragment","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","ShaderChunk","ShaderLib","basic","lambert","phong","standard","toon","dashed","totalSize","t2D","cube","equirect","distanceRGBA","referencePosition","nearDistance","farDistance","shadow","physical","transparency","WebGLBackground","state","objects","clearColor","clearAlpha","planeMesh","boxMesh","currentBackground","currentBackgroundVersion","currentTonemapping","renderList","forceClear","session","getSession","environmentBlendMode","setClear","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","toneMapping","unshift","getClearColor","setClearColor","getClearAlpha","setClearAlpha","WebGLBindingStates","maxVertexAttributes","extension","vaoAvailable","bindingStates","defaultState","createBindingState","currentState","setup","program","updateBuffers","getBindingState","bindVertexArrayObject","saveCache","setupVertexAttributes","createVertexArrayObject","createVertexArray","createVertexArrayOES","vao","bindVertexArray","bindVertexArrayOES","deleteVertexArrayObject","deleteVertexArray","deleteVertexArrayOES","programMap","stateMap","newAttributes","enabledAttributes","attributeDivisors","cachedAttributes","geometryAttributes","cachedAttribute","geometryAttribute","initAttributes","enableAttribute","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","disableUnusedAttributes","disableVertexAttribArray","vertexAttribPointer","stride","vertexAttribIPointer","isInstancedBufferGeometry","programAttributes","getAttributes","materialDefaultAttributeValues","programAttribute","isInstancedInterleavedBuffer","_maxInstanceCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","reset","geometryId","programId","releaseStatesOfGeometry","releaseStatesOfProgram","resetDefaultState","WebGLBufferRenderer","info","mode","setMode","drawArrays","renderInstances","primcount","methodName","WebGLCapabilities","maxAnisotropy","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","getMaxPrecision","getShaderPrecisionFormat","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","maxVertexTextures","maxTextureSize","maxCubemapSize","maxAttributes","maxVertexUniforms","maxVaryings","maxFragmentUniforms","vertexTextures","floatFragmentTextures","floatVertexTextures","maxSamples","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","viewNormalMatrix","numPlanes","numIntersection","enableLocalClipping","projectPlanes","beginShadows","endShadows","resetGlobalState","setState","fromCache","nGlobal","lGlobal","dstArray","clippingState","skipTransform","nPlanes","flatSize","viewMatrix","i4","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","_bufferGeometry","updateWireframeAttribute","geometryIndex","geometryPosition","previousAttribute","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","instanceCount","programs","autoReset","numericalSort","absNumericalSort","WebGLMorphtargets","influencesList","workInfluences","objectInfluences","influences","MAX_SAFE_INTEGER","morphInfluencesSum","morphBaseInfluence","getUniforms","WebGLObjects","updateMap","CubeTexture","DataTexture2DArray","wrapR","isDataTexture2DArray","DataTexture3D","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","getSingularSetter","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","getPureArraySetter","SingleUniform","activeInfo","PureArrayUniform","updateCache","StructuredUniform","seq","RePathPart","addUniform","uniformObject","parseUniform","path","pathLength","lastIndex","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","getActiveUniform","getUniformLocation","setOptional","upload","seqWithValue","WebGLShader","createShader","shaderSource","compileShader","programIdCount","addLineNumbers","getEncodingComponents","getShaderErrors","status","getShaderParameter","getShaderInfoLog","trim","getShaderSource","getTexelDecodingFunction","functionName","getTexelEncodingFunction","getToneMappingFunction","toneMappingName","generateExtensions","chunks","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","filterEmptyLine","generateDefines","fetchAttributeLocations","getActiveAttrib","getAttribLocation","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","generatePrecision","precisionstring","generateShadowMapTypeDefine","shadowMapTypeDefine","shadowMapType","generateEnvMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapModeDefine","envMapModeDefine","generateEnvMapBlendingDefine","envMapBlendingDefine","WebGLProgram","cacheKey","gammaFactorDefine","customExtensions","customDefines","createProgram","prefixVertex","prefixFragment","isRawShaderMaterial","shaderName","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","vertexTangents","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","physicallyCorrectLights","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","outputEncoding","depthPacking","isGLSL3ShaderMaterial","versionRegex","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","vertexErrors","fragmentErrors","getError","diagnostics","prefix","deleteShader","cachedUniforms","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getShaderObject","shaderobject","allocateBones","skeleton","bones","nVertexUniforms","nVertexMatrices","getTextureEncodingFromMap","getParameters","shadows","nClipPlanes","nClipIntersection","isMeshStandardMaterial","isFogExp2","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","shadowMap","getProgramCacheKey","acquireProgram","pl","preexistingProgram","releaseProgram","pop","WebGLProperties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","defaultProgram","getNextRenderItem","renderItem","customOpaqueSort","customTransparentSort","finish","WebGLRenderLists","lists","onSceneDispose","cameras","list","UniformsCache","light","halfWidth","halfHeight","ShadowUniformsCache","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","spotShadow","pointShadow","vector3","matrix42","intensity","isAmbientLight","isLightProbe","sh","coefficients","isDirectionalLight","shadowUniforms","bias","normalBias","mapSize","isSpotLight","penumbra","isRectAreaLight","isPointLight","isHemisphereLight","WebGLRenderState","lightsArray","shadowsArray","pushLight","pushShadow","shadowLight","setupLights","WebGLRenderStates","renderStates","renderState","has","isMeshDepthMaterial","isMeshDistanceMaterial","vsm_frag","vsm_vert","WebGLShadowMap","_renderer","_objects","_frustum","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","isPointLightShadow","mapPass","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","renderObject","VSMPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","keyA","keyB","materialsForVariant","cachedMaterial","shadowCamera","depthMaterial","WebGLState","ColorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","DepthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","depthMask","setFunc","clearDepth","StencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","stencilMask","setOp","stencilOp","clearStencil","colorBuffer","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","lineWidthAvailable","glVersion","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","texImage2D","emptyTextures","setFlipSided","setCullFace","useProgram","equationToGL","MIN_EXT","MAX_EXT","factorToGL","blendFuncSeparate","blendFunc","blendEquationSeparate","setMaterial","frontFaceCW","setPolygonOffset","frontFace","cullFace","setLineWidth","lineWidth","factor","activeTexture","webglSlot","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","textureProperties","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","filterFallback","onTextureDispose","deallocateTexture","isVideoTexture","onRenderTargetDispose","deallocateRenderTarget","__webglInit","deleteTexture","__webglTexture","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","textureUnits","resetTextureUnits","textureUnit","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","isCompressed","isCompressedTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","filterToGL","textureType","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","isDepthTexture","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","setupDepthTexture","isCube","webglDepthTexture","setupDepthRenderbuffer","createRenderbuffer","setupRenderTarget","createFramebuffer","updateRenderTargetMipmap","updateMultisampleRenderTarget","blitFramebuffer","warnedTexture2D","warnedTextureCube","WebGLUtils","HALF_FLOAT_OES","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","Group","isGroup","WebXRController","_targetRay","_grip","getTargetRaySpace","getGripSpace","disconnect","inputSource","referenceSpace","inputPose","gripPose","targetRay","grip","getPose","targetRaySpace","transform","gripSpace","WebXRManager","framebufferScaleFactor","referenceSpaceType","pose","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","isPresenting","getController","getControllerGrip","onSessionEvent","onSessionEnd","setFramebuffer","animation","onRequestReferenceSpace","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","xrCompatible","makeXRCompatible","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","then","updateInputSources","inputSources","removed","added","cameraLPos","cameraRPos","setProjectionFromUnion","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","updateCamera","getCamera","depthNear","depthFar","onAnimationFrameCallback","getViewerPose","views","cameraVRNeedsUpdate","WebGLMaterials","refreshFogUniforms","isFog","density","refreshMaterialUniforms","pixelRatio","refreshUniformsCommon","isMeshLambertMaterial","refreshUniformsLambert","isMeshToonMaterial","refreshUniformsToon","isMeshPhongMaterial","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsPhysical","refreshUniformsStandard","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","refreshUniformsLine","isLineDashedMaterial","refreshUniformsDash","isPointsMaterial","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","isShadowMaterial","uvScaleMap","uv2ScaleMap","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","sortObjects","toneMappingExposure","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","_emptyScene","getTargetPixelRatio","contextNames","contextAttributes","contextName","onContextLost","onContextRestore","isWebGL1Renderer","shift","message","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","initGLContext","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","updateStyle","setViewport","getDrawingBufferSize","setDrawingBufferSize","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","setTransparentSort","bits","onMaterialDispose","deallocateMaterial","releaseMaterialProgramReference","programInfo","renderObjectImmediate","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","positionArray","normalArray","uvArray","colorArray","setProgram","rangeFactor","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","compiled","material2","initMaterial","projectObject","opaqueObjects","transparentObjects","renderObjects","isLOD","isImmediateRenderObject","camera2","materialProperties","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","needsLights","materialNeedsLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isOrthographicCamera","boneTexture","boneMatrices","boneTextureSize","markUniformsLightsNeedsUpdate","ltc_1","LTC_1","ltc_2","LTC_2","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","checkFramebufferStatus","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","compressedTexSubImage2D","WebGL1Renderer","FogExp2","Fog","InterleavedBuffer","isInterleavedBuffer","arrayBuffers","_uuid","ib","_vector$6","InterleavedBufferAttribute","interleavedBuffer","interleavedBuffers","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","_vA$1","_vB$1","_vC$1","_uvA$1","_uvB$1","_uvC$1","Sprite","float32Array","transformVertex","vertexPosition","mvPosition","_v1$4","_v2$2","LOD","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","calculateInverses","normalizeSkinWeights","skinWeight","basePosition","skinIndex","weight","boneIndex","boneInverses","_offsetMatrix","_identityMatrix","Skeleton","bone","isBone","getBoneByName","Bone","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","getMatrixAt","raycastTimes","instanceId","setMatrixAt","linecap","linejoin","_start","_end","_inverseMatrix$1","_ray$1","_sphere$2","Line","computeLineDistances","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","distSq","nbVertices","_start$1","_end$1","LineSegments","LineLoop","_inverseMatrix$2","_ray$2","_sphere$3","_position$1","Points","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","VideoTexture","video","readyState","HAVE_CURRENT_DATA","CompressedTexture","CanvasTexture","isCanvasTexture","DepthTexture","WireframeGeometry","edge","edges","edge1","edge2","o","ol","ParametricGeometry","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","PolyhedronGeometry","PolyhedronBufferGeometry","vertexBuffer","uvBuffer","subdivide","applyRadius","generateUVs","getVertexByIndex","subdivideFace","cols","aj","bj","rows","pushVertex","azimuth","inclination","correctUVs","correctSeam","centroid","uvA","uvB","uvC","azi","correctUV","TetrahedronGeometry","TetrahedronBufferGeometry","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","tubularSegments","radialSegments","taper","bufferGeometry","TubeBufferGeometry","tangents","binormals","frames","computeFrenetFrames","P","generateBufferData","generateSegment","generateIndices","getPointAt","N","B","TorusKnotGeometry","tube","heightScale","TorusKnotBufferGeometry","P1","P2","T","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","Earcut","triangulate","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","prev","invSize","eliminateHoles","earcutLinked","clockwise","last","signedArea","insertNode","removeNode","filterPoints","again","steiner","area","ear","pass","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","zOrder","prevZ","nextZ","locallyInside","isValidDiagonal","splitPolygon","queue","getLeftmost","compareX","eliminateHole","hole","findHoleBridge","hx","hy","mx","my","tanMin","sectorContainsSector","sortLinked","tail","numMerges","pSize","qSize","inSize","leftmost","px","py","intersectsPolygon","middleInside","q1","q2","o3","o4","onSegment","num","inside","Node","an","bp","sum","ShapeUtils","contour","isClockWise","pts","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","extrudeByPath","splineTube","binormal","position2","getSpacedPoints","shapePoints","extractPoints","reverse","hl","ahole","scalePt2","pt","vec","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","ptNextShift_x","ptNextShift_y","sf","v_trans_lensq","direction_eq","contourMovements","holesMovements","oneHoleMovements","verticesMovements","bs","buildLidFaces","buildSideFaces","layer","f3","layeroffset","sidewalls","sl","slen1","slen2","f4","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","TextGeometry","TextBufferGeometry","font","isFont","generateShapes","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","uOffset","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","radiusStep","segment","thetaSegmentLevel","LatheGeometry","segments","LatheBufferGeometry","inverseSegments","base","n1","n2","ShapeGeometry","ShapeBufferGeometry","toJSON$1","indexOffset","shapeVertices","shapeHoles","shapeHole","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","CylinderGeometry","radiusTop","radiusBottom","openEnded","CylinderBufferGeometry","indexArray","generateTorso","generateCap","slope","indexRow","sinTheta","cosTheta","centerIndexStart","centerIndexEnd","ConeGeometry","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","Geometries","freeze","__proto__","RawShaderMaterial","Materials","AnimationUtils","arraySlice","from","to","isTypedArray","convertArray","forceClone","ArrayBuffer","isView","DataView","getKeyframeOrder","times","compareTime","sortedArray","nValues","srcOffset","flattenJSON","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","fps","clip","tracks","track","valueSize","getValueSize","minStartTime","resetDuration","makeClipAdditive","targetClip","referenceFrame","referenceClip","numTracks","referenceTime","referenceTrack","referenceTrackType","ValueTypeName","targetTrack","find","referenceValue","startIndex","interpolant","createInterpolant","evaluate","resultBuffer","referenceQuat","numTimes","valueStart","blendMode","Interpolant","parameterPositions","sampleValues","sampleSize","_cachedIndex","pp","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o0","oP","oN","wP","wN","ppp","sP","sN","LinearInterpolant","offset1","offset0","weight1","weight0","DiscreteInterpolant","KeyframeTrack","interpolation","TimeBufferType","ValueBufferType","setInterpolation","DefaultInterpolation","trackType","json","getInterpolation","InterpolantFactoryMethodDiscrete","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","factoryMethod","timeOffset","timeScale","startTime","endTime","nKeys","validate","valid","prevTime","currTime","optimize","smoothInterpolation","writeIndex","keep","timeNext","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","BooleanKeyframeTrack","ColorKeyframeTrack","NumberKeyframeTrack","QuaternionLinearInterpolant","QuaternionKeyframeTrack","StringKeyframeTrack","VectorKeyframeTrack","AnimationClip","duration","getTrackTypeForValueTypeName","typeName","toLowerCase","parseKeyframeTrack","jsonTracks","frameTime","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","findByName","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","trackName","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","Cache","files","file","LoadingManager","onLoad","onProgress","onError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","itemStart","itemEnd","itemError","resolveURL","setURLModifier","addHandler","regex","loader","removeHandler","getHandler","global","DefaultLoadingManager","Loader","manager","crossOrigin","resourcePath","requestHeader","loadAsync","Promise","resolve","reject","setCrossOrigin","setPath","setResourcePath","setRequestHeader","loading","FileLoader","cached","dataUriRegex","dataUriRegexResult","request","mimeType","isBase64","decodeURIComponent","atob","response","responseType","charCodeAt","Blob","parser","DOMParser","parseFromString","XMLHttpRequest","open","callbacks","withCredentials","overrideMimeType","header","send","setResponseType","setWithCredentials","setMimeType","AnimationLoader","CompressedTextureLoader","loaded","loadTexture","texDatas","mipmapCount","isCubemap","DataTextureLoader","texData","ImageLoader","onImageLoad","onImageError","substr","CubeTextureLoader","urls","TextureLoader","isJPEG","search","Curve","arcLengthDivisions","getPoint","optionalTarget","getUtoTmapping","getPoints","divisions","getLength","lengths","getLengths","cacheArcLengths","current","updateArcLengths","arcLengths","targetArcLength","comparison","lengthBefore","lengthAfter","segmentLength","segmentFraction","getTangent","t2","pt1","pt2","getTangentAt","mat","MAX_VALUE","tz","fromJSON","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","twoPi","deltaAngle","samePoints","ArcCurve","aRadius","isArcCurve","CubicPoly","c0","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","t3","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","CatmullRom","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","QuadraticBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","CubicBezier","CubicBezierCurve","v3","isCubicBezierCurve","CubicBezierCurve3","isCubicBezierCurve3","LineCurve","isLineCurve","LineCurve3","isLineCurve3","QuadraticBezierCurve","isQuadraticBezierCurve","QuadraticBezierCurve3","isQuadraticBezierCurve3","SplineCurve","isSplineCurve","Curves","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","lens","cacheLengths","sums","Path","currentPoint","moveTo","lineTo","quadraticCurveTo","aCPx","aCPy","bezierCurveTo","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","Shape","getPointsHoles","holesPts","Light","HemisphereLight","LightShadow","_frameExtents","_viewportCount","_viewports","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","SpotLightShadow","isSpotLightShadow","SpotLight","power","PointLightShadow","_cubeDirections","_cubeUps","PointLight","OrthographicCamera","scaleW","scaleH","DirectionalLightShadow","isDirectionalLightShadow","DirectionalLight","AmbientLight","RectAreaLight","SphericalHarmonics3","isSphericalHarmonics3","zero","getAt","coeff","getIrradianceAt","addScaledSH","getBasisAt","shBasis","LightProbe","MaterialLoader","getTexture","shading","setTextures","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","escape","extractUrlBase","lastIndexOf","InstancedBufferGeometry","InstancedBufferAttribute","BufferGeometryLoader","interleavedBufferMap","arrayBufferMap","getInterleavedBuffer","getArrayBuffer","TYPED_ARRAYS","arrayBuffer","typedArray","bufferAttribute","bufferAttributeConstr","drawcalls","offsets","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","geometryShapes","bufferGeometryLoader","details","loadImage","currentUrl","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","ImageBitmapLoader","createImageBitmap","fetch","isImageBitmapLoader","setOptions","res","blob","imageBitmap","catch","ShapePath","subPaths","currentPath","toShapes","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","betterShapeHoles","newShapes","newShapeHoles","mainIdx","tmpPoints","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","tmpHoles","Font","paths","createPaths","chars","line_height","yMax","yMin","underlineThickness","char","ret","createPath","glyph","glyphs","familyName","cpx","cpy","cpx1","cpy1","cpx2","cpy2","outline","_cachedOutline","action","ha","FontLoader","substring","AudioContext","webkitAudioContext","AudioLoader","bufferCopy","decodeAudioData","audioBuffer","HemisphereLightProbe","sky","ground","isHemisphereLightProbe","AmbientLightProbe","isAmbientLightProbe","_eyeRight","_eyeLeft","StereoCamera","eyeSep","_cache","eyeSepHalf","eyeSepOnProjection","ymax","xmin","xmax","Clock","autoStart","oldTime","elapsedTime","running","performance","Date","now","getElapsedTime","getDelta","newTime","_position$2","_quaternion$3","_scale$1","_orientation","AudioListener","gain","createGain","connect","destination","timeDelta","_clock","getInput","removeFilter","getFilter","setFilter","getMasterVolume","setMasterVolume","setTargetAtTime","currentTime","positionX","linearRampToValueAtTime","positionY","positionZ","forwardX","forwardY","forwardZ","upX","upY","upZ","setOrientation","Audio","autoplay","detune","loop","loopStart","loopEnd","playbackRate","isPlaying","hasPlaybackControl","sourceType","_startedAt","_progress","filters","getOutput","setNodeSource","audioNode","setMediaElementSource","mediaElement","createMediaElementSource","setMediaStreamSource","mediaStream","createMediaStreamSource","setBuffer","play","delay","createBufferSource","onended","onEnded","setDetune","setPlaybackRate","pause","getFilters","setFilters","getDetune","getPlaybackRate","getLoop","setLoop","setLoopStart","setLoopEnd","getVolume","setVolume","_position$3","_quaternion$4","_scale$2","_orientation$1","PositionalAudio","panner","createPanner","panningModel","getRefDistance","refDistance","setRefDistance","getRolloffFactor","rolloffFactor","setRolloffFactor","getDistanceModel","distanceModel","setDistanceModel","getMaxDistance","maxDistance","setMaxDistance","setDirectionalCone","coneInnerAngle","coneOuterAngle","coneOuterGain","orientationX","orientationY","orientationZ","AudioAnalyser","audio","fftSize","analyser","createAnalyser","frequencyBinCount","getFrequencyData","getByteFrequencyData","getAverageFrequency","PropertyMixer","binding","mixFunction","mixFunctionAdditive","setIdentity","_slerp","_slerpAdditive","_setAdditiveIdentityQuaternion","_workIndex","_select","_setAdditiveIdentityOther","_lerp","_lerpAdditive","_setAdditiveIdentityNumeric","_mixBufferRegion","_mixBufferRegionAdditive","_setIdentity","_origIndex","_addIndex","cumulativeWeight","cumulativeWeightAdditive","useCount","referenceCount","accumulate","accuIndex","currentWeight","mix","accumulateAdditive","weightAdditive","originalValueOffset","saveOriginalState","restoreOriginalState","endIndex","targetIndex","workOffset","_RESERVED_CHARS_RE","_reservedRe","_wordChar","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parsedPath","PropertyBinding","parseTrackName","_targetGroup","_bindings","subscribe_","firstValidIndex","nCachedObjects_","bindings","rootNode","findNode","nodeName","isAnimationObjectGroup","sanitizeNodeName","matches","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","getValue_direct","getValue_array","resolvedProperty","getValue_arrayElement","getValue_toArray","SetterByBindingTypeAndVersioning","setValue_direct","targetObject","setValue_direct_setNeedsUpdate","setValue_direct_setMatrixWorldNeedsUpdate","setValue_array","dest","setValue_array_setNeedsUpdate","setValue_array_setMatrixWorldNeedsUpdate","setValue_arrayElement","setValue_arrayElement_setNeedsUpdate","setValue_arrayElement_setMatrixWorldNeedsUpdate","setValue_fromArray","setValue_fromArray_setNeedsUpdate","setValue_fromArray_setMatrixWorldNeedsUpdate","getValue_unbound","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","AnimationObjectGroup","_indicesByUUID","_paths","_parsedPaths","_bindingsIndicesByPath","stats","total","inUse","bindingsPerObject","indicesByUUID","parsedPaths","nBindings","knownObject","nObjects","nCachedObjects","firstActiveIndex","lastCachedObject","bindingsForPath","lastCached","lastCachedIndex","firstActiveObject","firstActive","uncache","lastObject","indicesByPath","unsubscribe_","lastBindingsIndex","lastBindings","lastBindingsPath","AnimationAction","mixer","localRoot","_mixer","_clip","_localRoot","nTracks","interpolants","interpolantSettings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","_loopCount","_startTime","_effectiveTimeScale","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setEffectiveWeight","getEffectiveWeight","fadeIn","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","halt","startTimeScale","endTimeScale","_lendControlInterpolant","timeScaleInterpolant","getMixer","getClip","_root","_update","deltaTime","timeDirection","_updateWeight","timeRunning","_updateTimeScale","clipTime","_updateTime","propertyMixers","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","AnimationMixer","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","_addInactiveBinding","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","lastInactiveBinding","firstInactiveBinding","lastActiveBinding","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","existingAction","newAction","stopAllAction","nActions","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Uniform","InstancedInterleavedBuffer","Raycaster","PointCloud","ascSort","intersectObject","setFromCamera","coords","intersectObjects","Spherical","other","makeSafe","setFromCartesianCoords","Cylindrical","_vector$7","Box2","_startP","_startEnd","Line3","distanceSq","closestPointToPointParameter","clampToLine","startEnd2","startEnd_startP","ImmediateRenderObject","_vector$8","SpotLightHelper","cone","coneLength","coneWidth","_vector$9","_boneMatrix","_matrixWorldInv","getBoneList","boneList","SkeletonHelper","isSkeletonHelper","PointLightHelper","sphereSize","_vector$a","_color1","_color2","HemisphereLightHelper","GridHelper","PolarGridHelper","radials","circles","_v1$5","_v2$3","_v3$1","DirectionalLightHelper","lightPlane","targetLine","_vector$b","_camera","CameraHelper","pointMap","colorFrustum","colorCone","colorUp","colorTarget","colorCross","addLine","addPoint","setPoint","_box$3","BoxHelper","Box3Helper","PlaneHelper","positions2","_axis","_lineGeometry","_coneGeometry","ArrowHelper","headLength","headWidth","setDirection","setColor","AxesHelper","LOD_MIN","LOD_MAX","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","MAX_SAMPLES","ENCODINGS","_flatCamera","_lodPlanes","_sizeLods","_sigmas","_createPlanes","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_pingPongRenderTarget","_blurMaterial","_getBlurShader","_equirectShader","_cubemapShader","_compileMaterial","fromScene","sigma","cubeUVRenderTarget","_allocateTargets","_sceneToCubeUV","_blur","_applyPMREM","_cleanup","fromEquirectangular","equirectangular","_fromTexture","fromCubemap","cubemap","compileCubemapShader","_getCubemapShader","compileEquirectangularShader","_getEquirectShader","outputTarget","_setViewport","_textureToCubeUV","_isLDR","_createRenderTarget","tmpMesh","cubeCamera","upSign","forwardSign","maxComponent","fExp","log2","col","poleAxis","lodIn","lodOut","pingPongRenderTarget","_halfBlur","targetIn","targetOut","sigmaRadians","blurMaterial","STANDARD_DEVIATIONS","blurMesh","blurUniforms","pixels","radiansPerPixel","sigmaPixels","weights","exp","outputSize","lod","sizeLod","texelSize","cubeFaces","positionSize","uvSize","faceIndexSize","coordinates","fill","shaderMaterial","_getCommonVertexShader","_getEncodings","Face4","LineStrip","LinePieces","NoColors","FaceColors","VertexColors","MeshFaceMaterial","MultiMaterial","Particle","ParticleSystem","PointCloudMaterial","ParticleBasicMaterial","ParticleSystemMaterial","Vertex","DynamicBufferAttribute","Int8Attribute","Uint8Attribute","Uint8ClampedAttribute","Int16Attribute","Uint16Attribute","Int32Attribute","Uint32Attribute","Float32Attribute","Float64Attribute","construct","createPointsGeometry","createGeometry","createSpacedPointsGeometry","fromPoints","ClosedSplineCurve3","SplineCurve3","Spline","initFromArray","getControlPointsArray","reparametrizeByArcLength","AxisHelper","BoundingBoxHelper","EdgesHelper","setColors","WireframeHelper","Handlers","XHRLoader","BinaryTextureLoader","setTexturePath","empty","isIntersectionBox","isIntersectionSphere","setFromMatrix","random16","nearestPowerOfTwo","nextPowerOfTwo","flattenToArrayOffset","multiplyVector3","multiplyVector3Array","applyToBufferAttribute","applyToVector3Array","extractPosition","getPosition","multiplyToArray","multiplyVector4","rotateAxis","crossVector","rotateByAxis","makeFrustum","isIntersectionLine","isIntersectionPlane","barycoordFromPoint","midpoint","extractAllPoints","extrude","makeGeometry","fromAttribute","distanceToManhattan","lengthManhattan","setEulerFromRotationMatrix","setEulerFromQuaternion","getPositionFromMatrix","getScaleFromMatrix","getColumnFromMatrix","applyProjection","computeTangents","applyMatrix","getChildByName","renderDepth","getWorldRotation","eulerOrder","useQuaternion","setDrawMode","drawMode","initBones","setLens","onlyShadow","shadowCameraFov","shadowCameraLeft","shadowCameraRight","shadowCameraTop","shadowCameraBottom","shadowCameraVisible","shadowDarkness","shadowMapWidth","shadowMapHeight","dynamic","setDynamic","copyIndicesArray","setArray","addIndex","addAttribute","addDrawCall","clearDrawCalls","computeOffsets","maxInstancedCount","linePrecision","getArrays","addShapeList","wrapAround","overdraw","wrapRGB","metal","clearTarget","animate","getCurrentRenderTarget","getPrecision","resetGLState","supportsFloatTextures","supportsHalfFloatTextures","supportsStandardDerivatives","supportsCompressedTextureS3TC","supportsCompressedTexturePVRTC","supportsBlendMinMax","supportsInstancedArrays","enableScissorTest","addPrePlugin","addPostPlugin","updateShadowMap","setFaceCulling","allocTextureUnit","setTexture","getActiveMipMapLevel","shadowMapCullFace","vr","gammaInput","gammaOutput","toneMappingWhitePoint","renderReverseSided","renderSingleSided","WebGLRenderTargetCube","audioLoader","getData","updateCubeMap","GeometryUtils","geometry1","loadTextureCube","loadCompressedTexture","loadCompressedTextureCube","CanvasRenderer","JSONLoader","SceneUtils","createMultiMaterialObject","detach","LensFlare","revision","ColorChannel","RED","GREEN","BLUE","ALPHA","Disposable","AdaptiveLuminanceMaterial","MIP_LEVEL_1X1","previousLuminanceBuffer","currentLuminanceBuffer","minLuminance","tau","fragmentShader$1","BokehMaterial","foreground","PASS","kernel64","kernel16","inputBuffer","cocBuffer","Vector2$1","FOREGROUND","generateKernel","GOLDEN_ANGLE","points64","points16","i64","i16","setTexelSize","fragmentShader$2","CircleOfConfusionMaterial","DEPTH_PACKING","focusDistance","cameraNear","cameraFar","adoptCameraSettings","PERSPECTIVE_CAMERA","fragmentShaderColor","vertexShader$1","ColorEdgesMaterial","LOCAL_CONTRAST_ADAPTATION_FACTOR","EDGE_THRESHOLD","setLocalContrastAdaptationFactor","setEdgeDetectionThreshold","fragmentShader$3","vertexShader$2","ConvolutionMaterial","halfTexelSize","kernel","kernelSize","KernelSize","LARGE","getKernel","kernelPresets","VERY_SMALL","SMALL","MEDIUM","VERY_LARGE","HUGE","fragmentShader$4","CopyMaterial","fragmentShader$5","vertexShader$3","DepthComparisonMaterial","fragmentShader$6","vertexShader$4","DepthDownsamplingMaterial","normalBuffer","fragmentShader$7","DepthMaskMaterial","DEPTH_PACKING_0","DEPTH_PACKING_1","depthBuffer0","depthBuffer1","fragmentShaderDepth","fragmentShaderLuma","EdgeDetectionMaterial","EdgeDetectionMode","COLOR","DEPTH_THRESHOLD","setEdgeDetectionMode","DEPTH","LUMA","EDGE_DETECTION_MODE","fragmentTemplate","vertexTemplate","EffectMaterial","shaderParts","ENCODE_OUTPUT","setShaderParts","setDefines","setUniforms","Section","FRAGMENT_HEAD","FRAGMENT_MAIN_UV","FRAGMENT_MAIN_IMAGE","VERTEX_HEAD","VERTEX_MAIN_SUPPORT","entry","entries","fragmentShader$8","GodRaysMaterial","lightPosition","SAMPLES_INT","SAMPLES_FLOAT","exposure","clampMax","fragmentShader$9","LuminanceMaterial","colorOutput","luminanceRange","useRange","smoothing","useThreshold","THRESHOLD","setColorOutputEnabled","RANGE","setLuminanceRangeEnabled","fragmentShader$a","MaskMaterial","maskTexture","strength","colorChannel","maskFunction","MaskFunction","DISCARD","COLOR_CHANNEL","MASK_FUNCTION","inverted","INVERTED","MULTIPLY","MULTIPLY_RGB_SET_ALPHA","fragmentShader$b","vertexShader$5","OutlineMaterial","OutlineEdgesMaterial","fragmentShader$c","vertexShader$6","SMAAWeightsMaterial","MAX_SEARCH_STEPS_INT","MAX_SEARCH_STEPS_FLOAT","MAX_SEARCH_STEPS_DIAG_INT","MAX_SEARCH_STEPS_DIAG_FLOAT","CORNER_ROUNDING","CORNER_ROUNDING_NORM","AREATEX_MAX_DISTANCE","AREATEX_MAX_DISTANCE_DIAG","AREATEX_PIXEL_SIZE","AREATEX_SUBTEX_SIZE","SEARCHTEX_SIZE","SEARCHTEX_PACKED_SIZE","areaTexture","searchTexture","setOrthogonalSearchSteps","setDiagonalSearchSteps","setCornerRounding","rounding","diagonalDetection","DISABLE_DIAG_DETECTION","cornerRounding","DISABLE_CORNER_DETECTION","fragmentShader$d","vertexShader$7","SSAOMaterial","SPIRAL_TURNS","RADIUS","RADIUS_SQ","DISTANCE_SCALING","normalDepthBuffer","noiseTexture","inverseProjectionMatrix","distanceCutoff","proximityCutoff","noiseScale","minRadiusScale","fade","AUTO_SIZE","Resizer","dummyCamera","getFullscreenTriangle","Pass","screen","rtt","needsSwap","needsDepthTexture","renderToScreen","getFullscreenMaterial","setFullscreenMaterial","getDepthTexture","setDepthTexture","outputBuffer","initialize","frameBufferType","BlurPass","resolutionScale","renderTargetA","renderTargetB","convolutionMaterial","ditheredConvolutionMaterial","getResolutionScale","setResolutionScale","lastRT","destRT","ClearMaskPass","ClearPass","overrideClearColor","overrideClearAlpha","hasOverrideClearColor","hasOverrideClearAlpha","workaroundEnabled","OverrideMaterialManager","originalMaterials","materialInstanced","materialSkinning","disposeMaterials","meshCount","RenderPass","clearPass","overrideMaterialManager","getClearPass","DepthPass","renderPass","DepthDownsamplingPass","DOWNSAMPLE_NORMALS","BlendFunction","SKIP","ADD","AVERAGE","COLOR_BURN","COLOR_DODGE","DARKEN","DIFFERENCE","EXCLUSION","LIGHTEN","DIVIDE","NEGATION","NORMAL","OVERLAY","REFLECT","SCREEN","SOFT_LIGHT","SUBTRACT","addBlendFunction","alphaBlendFunction","averageBlendFunction","colorBurnBlendFunction","colorDodgeBlendFunction","darkenBlendFunction","differenceBlendFunction","exclusionBlendFunction","lightenBlendFunction","multiplyBlendFunction","divideBlendFunction","negationBlendFunction","normalBlendFunction","overlayBlendFunction","reflectBlendFunction","screenBlendFunction","softLightBlendFunction","subtractBlendFunction","blendFunctions","BlendMode","blendFunction","getShaderCode","Effect","EffectAttribute","NONE","CONVOLUTION","WebGLExtension","DERIVATIVES","FRAG_DEPTH","DRAW_BUFFERS","SHADER_TEXTURE_LOD","findSubstrings","regExp","substrings","prefixSubstrings","strings","prefixed","integrateEffect","effect","blendModes","functionRegExp","varyingRegExp","shaders","mainImageExists","mainUvExists","varyings","names","transformedUv","readDepth","blendOpacity","EffectPass","effects","skipRendering","minTime","maxTime","encodeOutput","updateMaterial","blendRegExp","Set","recompile","MaskPass","writeValue","clearValue","REPLACE","ALWAYS","EQUAL","KEEP","NormalPass","SavePass","resize","ShaderPass","input","setInput","EffectComposer","multisampling","enableExtensions","copyPass","passes","autoRenderToScreen","getRenderer","replaceRenderer","updateDOM","oldRenderer","oldSize","newSize","parentNode","createDepthTexture","addPass","drawingBufferSize","removePass","reducer","depthTextureRequired","reduce","NOTEQUAL","Initializable","Resizable","Selection","iterable","currentLayer","setVisible","fragmentShader$e","BloomEffect","luminanceThreshold","luminanceSmoothing","blurPass","luminancePass","luminanceMaterial","distinction","fragmentShader$f","BokehEffect","dof","aperture","maxBlur","fragmentShader$g","BrightnessContrastEffect","brightness","contrast","fragmentShader$h","ColorAverageEffect","fragmentShader$i","ColorDepthEffect","setBitDepth","getBitDepth","fragmentShader$j","vertexShader$8","ChromaticAberrationEffect","fragmentShader$k","DepthEffect","fragmentShader$l","DepthOfFieldEffect","bokehScale","renderTargetMasked","renderTargetNear","renderTargetFar","renderTargetCoC","renderTargetCoCBlurred","cocPass","cocMaterial","circleOfConfusionMaterial","maskPass","maskMaterial","bokehNearBasePass","bokehNearFillPass","bokehFarBasePass","bokehFarFillPass","calculateFocusDistance","viewDistance","farBaseUniforms","farFillUniforms","nearBaseUniforms","nearFillUniforms","resizables","initializables","fragmentShader$m","DotScreenEffect","setAngle","fragmentShader$n","GammaCorrectionEffect","gamma","getNoise","channels","NoiseTexture","imageData","createImageData","RawImageData","toCanvas","workerProgram","generate","disableCache","workerURL","URL","createObjectURL","worker","Worker","searchImageData","areaImageData","revokeObjectURL","postMessage","SMAAImageLoader","externalManager","internalManager","cachedURLs","promise","Image","ORTHOGONAL_SIZE","DIAGONAL_SIZE","DIAGONAL_SAMPLES","SMOOTH_MAX_DISTANCE","orthogonalSubsamplingOffsets","diagonalSubsamplingOffsets","orthogonalEdges","diagonalEdges","saturate","smoothArea","b1X","b1Y","b2X","b2Y","calculateOrthogonalArea","dX","dY","trunc","calculateOrthogonalAreaForPattern","isInsideArea","xm","ym","calculateDiagonalAreaForPixel","pX","pY","calculateDiagonalArea","e1","e2","calculateDiagonalAreaForPattern","generatePatterns","patterns","orthogonal","assemble","dstData","dstWidth","srcData","srcWidth","SMAAAreaImageData","orthogonalPatternSize","diagonalPatternSize","orthogonalPatterns","diagonalPatterns","bilinear","lerp$1","deltaLeft","deltaRight","SMAASearchImageData","croppedWidth","croppedHeight","croppedData","fragmentShader$o","tag","randomFloat","GlitchEffect","chromaticAberrationOffset","columns","ratio","perturbationMap","dtSize","setPerturbationMap","generatePerturbationMap","breakPoint","seed","distortion","GlitchMode","SPORADIC","active","getPerturbationMap","currentMap","trigger","DISABLED","CONSTANT_WILD","CONSTANT_MILD","fragmentShader$p","GodRaysEffect","lightSource","lightScene","screenPosition","renderTargetLight","renderPassLight","depthMaskPass","godRaysPass","godRaysMaterial","fragmentShader$q","GridEffect","getScale","setScale","getLineWidth","fragmentShader$r","HueSaturationEffect","setHue","fragmentShader$s","NoiseEffect","fragmentShader$t","vertexShader$9","OutlineEffect","patternTexture","edgeStrength","pulseSpeed","visibleEdgeColor","hiddenEdgeColor","xRay","Proxy","setPatternTexture","renderTargetMask","renderTargetOutline","renderTargetBlurredOutline","depthPass","outlinePass","selection","selectionLayer","setSelection","clearSelection","selectObject","deselectObject","pulse","fragmentShader$u","PixelationEffect","granularity","getGranularity","setGranularity","fragmentShader$v","RealisticBokehEffect","fStop","luminanceGain","fringe","rings","showFocus","manualDoF","pentagon","fragmentShader$w","ScanlineEffect","getDensity","setDensity","fragmentShader$x","vertexShader$a","HALF_PI","v$1","ShockWaveEffect","epicenter","speed","maxRadius","waveSize","amplitude","explode","uniformActive","SelectiveBloomEffect","blackoutPass","backgroundPass","backgroundScene","renderTargetSelection","ignoreBackground","fragmentShader$y","SepiaEffect","searchImageDataURL","areaImageDataURL","fragmentShader$z","vertexShader$b","SMAAEffect","searchImage","areaImage","SMAAPreset","HIGH","edgeDetectionMode","renderTargetEdges","renderTargetWeights","edgeDetectionPass","weightsPass","applyPreset","edgeDetectionMaterial","colorEdgesMaterial","weightsMaterial","LOW","ULTRA","fragmentShader$A","SSAOEffect","distanceScaling","depthAwareUpsampling","distanceThreshold","distanceFalloff","rangeThreshold","rangeFalloff","luminanceInfluence","renderTargetAO","ssaoPass","NORMAL_DEPTH","setDistanceCutoff","setProximityCutoff","ssaoMaterial","falloff","fragmentShader$B","vertexShader$c","TextureEffect","aspectCorrection","setTextureSwizzleRGBA","rgba","swizzle","fragmentShader$C","ToneMappingEffect","adaptive","middleGrey","maxLuminance","averageLuminance","adaptationRate","renderTargetLuminance","renderTargetAdapted","renderTargetPrevious","savePass","adaptiveLuminancePass","exponent","fragmentShader$D","VignetteEffect","eskil","darkness","FullScreenQuad","CopyShader","LuminosityHighPassShader","UnrealBloomPass","THREE","renderTargetsHorizontal","renderTargetsVertical","nMips","resx","resy","renderTargetBright","renderTargetHorizonal","renderTargetVertical","highPassShader","highPassUniforms","materialHighPassFilter","separableBlurMaterials","kernelSizeArray","getSeperableBlurMaterial","compositeMaterial","getCompositeMaterial","bloomFactors","bloomTintColors","copyShader","copyUniforms","materialCopy","oldClearColor","oldClearAlpha","fsQuad","writeBuffer","readBuffer","maskActive","oldAutoClear","inputRenderTarget","BlurDirectionX","BlurDirectionY","kernelRadius","FilmShader","FilmPass","noiseIntensity","scanlinesIntensity","scanlinesCount","grayscale","nIntensity","sIntensity","sCount","renderer_patch_postprocessing","originalRender","renderer_fullscreen_dpi","DPI","devicePixelRatio","renderer_shadow_vsm","tweakable_obj_to_folder","onchange","_skip","gui_folder","dat","addFolder","endsWith","startsWith","addColor","onFinishChange","renderer_tone_mapping","base_config","gui_root","toneMappingOptions","Linear","Reinhard","Cineon","ACESFilmic","Custom","config","aces_exposure","three","unpatched","apply_config","tweakable","OrbitControls","minDistance","minZoom","maxZoom","minPolarAngle","maxPolarAngle","minAzimuthAngle","maxAzimuthAngle","enableDamping","dampingFactor","enableZoom","zoomSpeed","enableRotate","rotateSpeed","enablePan","panSpeed","screenSpacePanning","keyPanSpeed","autoRotate","autoRotateSpeed","enableKeys","UP","BOTTOM","mouseButtons","ONE","TWO","target0","position0","zoom0","getPolarAngle","spherical","getAzimuthalAngle","saveState","changeEvent","STATE","quat","quatInverse","lastPosition","lastQuaternion","twoPI","rotateLeft","getAutoRotationAngle","sphericalDelta","panOffset","zoomChanged","onContextMenu","onMouseWheel","ownerDocument","onMouseMove","onKeyDown","startEvent","endEvent","TOUCH_ROTATE","TOUCH_PAN","TOUCH_DOLLY_PAN","TOUCH_DOLLY_ROTATE","rotateStart","rotateEnd","rotateDelta","panStart","panEnd","panDelta","dollyStart","dollyEnd","dollyDelta","getZoomScale","rotateUp","panLeft","objectMatrix","panUp","pan","deltaX","deltaY","targetDistance","clientHeight","clientWidth","dollyOut","dollyScale","dollyIn","handleMouseDownRotate","handleMouseDownDolly","handleMouseDownPan","handleMouseMoveRotate","handleMouseMoveDolly","handleMouseMovePan","handleMouseUp","handleMouseWheel","handleKeyDown","handleTouchStartRotate","pageX","pageY","handleTouchStartPan","handleTouchStartDolly","handleTouchStartDollyPan","handleTouchStartDollyRotate","handleTouchMoveRotate","handleTouchMovePan","handleTouchMoveDolly","handleTouchMoveDollyPan","handleTouchMoveDollyRotate","handleTouchEnd","mouseAction","tabIndex","MapControls","isNode","analyze","builder","analyzing","build","addFlow","clearVertexNodeCode","clearFragmentNodeCode","removeFlow","analyzeAndFlow","flow","code","clearNodeCode","extra","getType","getNodeData","appendDepsNode","nodes","updateFrame","updaters","deps","outputLen","getTypeLength","outputMax","setName","getName","getJSONNode","createJSONNode","nodeType","TempNode","shared","ns","getShared","isUnique","getUnique","getUuid","getLabel","ignoreCache","getTemp","addNodeCode","setLabel","label","tempVar","getVars","getTempVar","InputNode","readonly","setReadonly","getReadonly","generateReadonly","isShader","createVertexUniform","fragment","createFragmentUniform","declarationRegexp","ConstNode","useDefine","PI2","RECIPROCAL_PI","RECIPROCAL_PI2","LOG2","getTypeByFormat","VarNode","varying","getVar","propertiesRegexp","StructNode","getInputByName","inputs","declaration","AttributeNode","getAttributeType","getConstructorFromLength","NodeLib","keywords","addKeyword","removeKeyword","getKeyword","getKeywordData","contains","containsKeyword","FunctionNode","includes","isMethod","isInterface","useKeywords","getIncludeByName","ext","prop","isGlobal","reference","keyword","qualifier","ExpressionNode","FunctionCallNode","setFunction","getFunction","inpt","param","NodeUtils","addShortcuts","applyShortcut","proxy","subProperty","proto","shortcuts","NodeFrame","setRenderer","setRenderTexture","renderTexture","updateNode","frameId","NodeUniform","Vector2Node","Vector3Node","Vector4Node","UVNode","requires","uvIndex","FloatNode","ColorSpaceNode","LINEAR_TO_LINEAR","Nodes","LinearToLinear","GammaToLinear","LinearToGamma","sRGBToLinear","LinearTosRGB","RGBEToLinear","LinearToRGBE","RGBMToLinear","LinearToRGBM","RGBDToLinear","LinearToRGBD","cLogLuvM","LinearToLogLuv","cLogLuvInverseM","LogLuvToLinear","GAMMA_TO_LINEAR","LINEAR_TO_GAMMA","SRGB_TO_LINEAR","LINEAR_TO_SRGB","RGBE_TO_LINEAR","LINEAR_TO_RGBE","RGBM_TO_LINEAR","LINEAR_TO_RGBM","RGBD_TO_LINEAR","LINEAR_TO_RGBD","LINEAR_TO_LOG_LUV","LOG_LUV_TO_LINEAR","outputType","methodNode","fromEncoding","fromDecoding","TextureNode","tex","addContext","colorSpace","removeContext","PositionNode","LOCAL","WORLD","VIEW","PROJECTION","worldPosition","NormalNode","contextNormal","worldNormal","ReflectNode","CUBE","SPHERE","VECTOR","viewNormal","viewNormalNode","roughnessNode","viewPosition","reflectVec","CubeTextureNode","cubetex","OperatorNode","op","SUB","MUL","DIV","isTypeMatrix","MathNode","bOrMethod","cOrMethod","RAD","DEG","EXP","EXP2","LOG","SQRT","INV_SQRT","FLOOR","CEIL","NORMALIZE","FRACT","SATURATE","SIN","COS","TAN","ASIN","ACOS","ARCTAN","ABS","SIGN","LENGTH","NEGATE","INVERT","MIN","MAX","MOD","STEP","DISTANCE","DOT","CROSS","POW","MIX","CLAMP","REFRACT","SMOOTHSTEP","FACEFORWARD","getNumInputs","getInputType","al","bl","cl","inputType","numInputs","TextureCubeUVNode","TextureCubeUVData","cubeUV_maxMipLevel","cubeUV_minMipLevel","cubeUV_maxTileSize","cubeUV_minTileSize","getFace","bilinearCubeUV","r0","m0","r1","m1","r4","v4","m4","r5","v5","m5","r6","v6","m6","roughnessToMip","mipInt","colorSpaceTL","colorSpaceTR","colorSpaceBL","colorSpaceBR","colorSpaceTLExp","colorSpaceTRExp","colorSpaceBLExp","colorSpaceBRExp","mipV","mip","mipF","color0","color1Mix","TextureCubeNode","radianceNode","irradianceNode","require","scopeNode","constructors","convertFormatToType","float","vec2","vec3","vec4","mat4","int","convertTypeToFormat","tc","m3","NodeBuilder","slots","caches","contexts","nodeData","consts","functions","structs","prefixCode","parsCode","nodeCode","resultCode","finalCode","vars","buildShader","addVaryCode","addVertexParsCode","addVertexFinalCode","setShader","mergeDefines","addSlot","addCache","removeSlot","removeCache","addVertexCode","addCode","addFragmentCode","addVertexNodeCode","addFragmentNodeCode","addFinalCode","addFragmentFinalCode","addParsCode","addFragmentParsCode","isCache","isSlot","define","isDefined","getCode","getVarListCode","getIncludesCode","nVar","formatType","getFormatByType","createUniform","includesStruct","included","colorToVectorProperties","colorToVector","getIncludes","sortByPosition","getTypeFromLength","nodeCandidate","typeToType","getElementByIndex","getIndexByElement","elm","mergeUniform","BoolNode","Boolean","IntNode","ColorNode","Matrix3Node","Matrix4Node","ScreenNode","ReflectorNode","mirror","setMirror","textureMatrix","localPosition","uvResult","tDiffuse","PropertyNode","RawNode","NodeMaterial","needsCompile","isNodeMaterial","RTTNode","quad","rttBuilder","updateFramesaveTo","saveTo","saveToCurrent","saveToMaterial","saveToScene","vertexDict","fragmentDict","ColorsNode","CameraNode","setScope","POSITION","setCamera","depthColor","TO_VERTEX","onUpdateFrame","number","LightNode","TOTAL","ResolutionNode","ScreenUVNode","CondNode","ifNode","elseNode","NOT_EQUAL","GREATER","GREATER_EQUAL","LESS","LESS_EQUAL","ifType","elseType","getCondType","condType","ifCode","elseCode","NoiseNode","snoise","CheckerNode","checker","NormalMapNode","perturbNormal2Arb","BumpMapNode","toNormalMap","dHdxy_fwd","perturbNormalArb","bumpToNormal","derivativeHeight","derivativeHeightCode","BypassNode","JoinNode","getNumElements","outputs","SwitchNode","inputLength","outputLength","TimerNode","GLOBAL","DELTA","VelocityNode","velocity","setTarget","setParams","moment","springVelocity","lastVelocity","oldPosition","updateFrameVelocity","deltaFps","spring","damping","UVTransformNode","MaxMIPLevelNode","maxMIPLevel","SpecularMIPLevelNode","getSpecularMIPLevel","SubSlotNode","BlurNode","blurX","blurY","blurCode","LuminanceNode","rgb","luminance","ColorAdjustmentNode","adjustment","SATURATION","vibrance","HUE","VIBRANCE","BRIGHTNESS","CONTRAST","SpriteNode","PhongNode","ao","environmentAlpha","StandardNode","useClearcoat","clearCoatNormal","specularRoughness","contextEnvironment","contextGammaOnly","contextClearcoatEnvironment","clearcoatNormal","irradiance","radiance","clearcoatEnv","MeshStandardNode","props","SpriteNodeMaterial","PhongNodeMaterial","StandardNodeMaterial","MeshStandardNodeMaterial","NodePostProcessing","post","cube_target","clock","cube_cam","threeB","grp","grp2","dl","dirLight","planegeo","planemat","fxMat","fxTest","fxMesh","fxMat2","cam_target","composer","ubloomPass","ubloomPass2","film","toneMappingEffect","fxPass"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAae,SAAA,aAAA,CAASA,KAAT,EAAgBC,WAAhB,EAA6B;MACpCC,WAAAA,GAAcF,KAAAA,CAAMG,OAANH,CAAcI,cAAdJ,CAA6BK,QAA7BL;;MAEdM,CAAAA,GAAIC,IAAAA,CAAKC,KAALD,CAAWP,KAAAA,CAAMM,CAAjBC;MACJE,CAAAA,GAAIF,IAAAA,CAAKC,KAALD,CAAWP,KAAAA,CAAMS,CAAjBF;MACJG,CAAAA,GAAIH,IAAAA,CAAKC,KAALD,CAAWP,KAAAA,CAAMU,CAAjBH;MACJI,CAAAA,GAAIX,KAAAA,CAAMW;MACVC,CAAAA,GAAIL,IAAAA,CAAKC,KAALD,CAAWP,KAAAA,CAAMY,CAAjBL;MACJM,CAAAA,GAAIb,KAAAA,CAAMa,CAANb,CAAQc,OAARd,CAAgB,CAAhBA;MACJe,CAAAA,GAAIf,KAAAA,CAAMe,CAANf,CAAQc,OAARd,CAAgB,CAAhBA;;MAENC,WAAAA,IAAgBC,WAAAA,KAAgB,gBAAhCD,IAAsDC,WAAAA,KAAgB,gBAAiB;QACrFc,GAAAA,GAAMhB,KAAAA,CAAMiB,GAANjB,CAAUK,QAAVL,CAAmB,EAAnBA;;WACHgB,GAAAA,CAAIE,MAAJF,GAAa,GAAG;YACf,MAAMA;;;WAEP,MAAMA;AALf,SAMO,IAAId,WAAAA,KAAgB,SAApB,EAA+B;WAC7B,SAASI,CAAT,GAAa,GAAb,GAAmBG,CAAnB,GAAuB,GAAvB,GAA6BC,CAA7B,GAAiC;AADnC,GAAA,MAEA,IAAIR,WAAAA,KAAgB,UAApB,EAAgC;WAC9B,UAAUI,CAAV,GAAc,GAAd,GAAoBG,CAApB,GAAwB,GAAxB,GAA8BC,CAA9B,GAAkC,GAAlC,GAAwCC,CAAxC,GAA4C;AAD9C,GAAA,MAEA,IAAIT,WAAAA,KAAgB,KAApB,EAA2B;WACzB,OAAOF,KAAAA,CAAMiB,GAANjB,CAAUK,QAAVL,CAAmB,EAAnBA;AADT,GAAA,MAEA,IAAIE,WAAAA,KAAgB,WAApB,EAAiC;WAC/B,MAAMI,CAAN,GAAU,GAAV,GAAgBG,CAAhB,GAAoB,GAApB,GAA0BC,CAA1B,GAA8B;AADhC,GAAA,MAEA,IAAIR,WAAAA,KAAgB,YAApB,EAAkC;WAChC,MAAMI,CAAN,GAAU,GAAV,GAAgBG,CAAhB,GAAoB,GAApB,GAA0BC,CAA1B,GAA8B,GAA9B,GAAoCC,CAApC,GAAwC;AAD1C,GAAA,MAEA,IAAIT,WAAAA,KAAgB,SAApB,EAA+B;WAC7B,QAAQI,CAAR,GAAY,KAAZ,GAAoBG,CAApB,GAAwB,KAAxB,GAAgCC,CAAhC,GAAoC;AADtC,GAAA,MAEA,IAAIR,WAAAA,KAAgB,UAApB,EAAgC;WAC9B,QAAQI,CAAR,GAAY,KAAZ,GAAoBG,CAApB,GAAwB,KAAxB,GAAgCC,CAAhC,GAAoC,KAApC,GAA4CC,CAA5C,GAAgD;AADlD,GAAA,MAEA,IAAIT,WAAAA,KAAgB,SAApB,EAA+B;WAC7B,QAAQU,CAAR,GAAY,KAAZ,GAAoBC,CAApB,GAAwB,KAAxB,GAAgCE,CAAhC,GAAoC;AADtC,GAAA,MAEA,IAAIb,WAAAA,KAAgB,UAApB,EAAgC;WAC9B,QAAQU,CAAR,GAAY,KAAZ,GAAoBC,CAApB,GAAwB,KAAxB,GAAgCE,CAAhC,GAAoC,KAApC,GAA4CJ,CAA5C,GAAgD;;;SAGlD;;;ACrCT,IAAMQ,QAAAA,GAAWC,KAAAA,CAAMC,SAAND,CAAgBE,OAAjC;AACA,IAAMC,SAAAA,GAAYH,KAAAA,CAAMC,SAAND,CAAgBI,KAAlC;AAQA,IAAMC,MAAAA,GAAS;SACN,EADM;UAGL,SAAA,MAAA,CAASC,MAAT,EAAiB;SAClBC,KAAKJ,SAAAA,CAAUK,IAAVL,CAAeM,SAAfN,EAA0B,CAA1BA,GAA8B,UAASO,GAAT,EAAc;UAC9CC,IAAAA,GAAO,KAAKC,QAAL,CAAcF,GAAd,IAAqBG,MAAAA,CAAOF,IAAPE,CAAYH,GAAZG,CAArB,GAAwC;WAChDX,QAAQ,UAASY,GAAT,EAAc;YACrB,CAAC,KAAKC,WAAL,CAAiBL,GAAAA,CAAII,GAAJJ,CAAjB,GAA4B;iBACxBI,OAAOJ,GAAAA,CAAII,GAAJJ;;AAFL,OAAA,CAIXM,IAJW,CAIN,IAJM;AAFf,OAOG;WAEIV;AAbI,GAAA;YAgBH,SAAA,QAAA,CAASA,MAAT,EAAiB;SACpBC,KAAKJ,SAAAA,CAAUK,IAAVL,CAAeM,SAAfN,EAA0B,CAA1BA,GAA8B,UAASO,GAAT,EAAc;UAC9CC,IAAAA,GAAO,KAAKC,QAAL,CAAcF,GAAd,IAAqBG,MAAAA,CAAOF,IAAPE,CAAYH,GAAZG,CAArB,GAAwC;WAChDX,QAAQ,UAASY,GAAT,EAAc;YACrB,KAAKC,WAAL,CAAiBT,MAAAA,CAAOQ,GAAPR,CAAjB,GAA+B;iBAC1BQ,OAAOJ,GAAAA,CAAII,GAAJJ;;AAFL,OAAA,CAIXM,IAJW,CAIN,IAJM;AAFf,OAOG;WAEIV;AA1BI,GAAA;WA6BJ,SAAA,OAAA,GAAW;QACZW,MAAAA,GAASd,SAAAA,CAAUK,IAAVL,CAAeM,SAAfN;WACR,YAAW;UACZe,IAAAA,GAAOf,SAAAA,CAAUK,IAAVL,CAAeM,SAAfN;;WACN,IAAIgB,CAAAA,GAAIF,MAAAA,CAAOnB,MAAPmB,GAAgB,GAAGE,CAAAA,IAAK,GAAGA,CAAAA,IAAK;eACpC,CAACF,MAAAA,CAAOE,CAAPF,CAAAA,CAAUG,KAAVH,CAAgB,IAAhBA,EAAsBC,IAAtBD,CAAD;;;aAEFC,IAAAA,CAAK,CAALA;AALT;AA/BW,GAAA;QAwCP,SAAA,IAAA,CAASR,GAAT,EAAcW,GAAd,EAAmBC,KAAnB,EAA0B;QAC1B,CAACZ,KAAK;;;;QAINX,QAAAA,IAAYW,GAAAA,CAAIR,OAAhBH,IAA2BW,GAAAA,CAAIR,OAAJQ,KAAgBX,UAAU;UACnDG,QAAQmB,KAAKC;AADnB,WAEO,IAAIZ,GAAAA,CAAIZ,MAAJY,KAAeA,GAAAA,CAAIZ,MAAJY,GAAa,CAAhC,EAAmC;UACpCI,GAAAA,GAAAA,KAAAA;UACAS,CAAAA,GAAAA,KAAAA;;WACCT,GAAAA,GAAM,CAANA,EAASS,CAAAA,GAAIb,GAAAA,CAAIZ,QAAQgB,GAAAA,GAAMS,GAAGT,GAAAA,IAAO;YACxCA,GAAAA,IAAOJ,GAAPI,IAAcO,GAAAA,CAAIb,IAAJa,CAASC,KAATD,EAAgBX,GAAAA,CAAII,GAAJJ,CAAhBW,EAA0BP,GAA1BO,MAAmC,KAAKG,OAAO;;;;AAJ9D,KAAA,MAQA;WACA,IAAMV,QAAOJ,KAAK;YACjBW,GAAAA,CAAIb,IAAJa,CAASC,KAATD,EAAgBX,GAAAA,CAAII,IAAJJ,CAAhBW,EAA0BP,IAA1BO,MAAmC,KAAKG,OAAO;;;;;AAzD5C,GAAA;SAgEN,SAAA,KAAA,CAASC,GAAT,EAAc;eACRA,KAAK;AAjEL,GAAA;YAqEH,SAAA,QAAA,CAASC,IAAT,EAAeC,SAAf,EAA0BC,eAA1B,EAA2C;QAC/CC,OAAAA,GAAAA,KAAAA;WAEG,YAAW;UACVnB,GAAAA,GAAM;UACNQ,IAAAA,GAAOT;;eACJqB,UAAU;kBACP;YACN,CAACF,iBAAiBF,IAAAA,CAAKN,KAALM,CAAWhB,GAAXgB,EAAgBR,IAAhBQ;;;UAGlBK,OAAAA,GAAUH,eAAAA,IAAmB,CAACC;mBAEvBA;gBACHG,UAAAA,CAAWF,OAAXE,EAAoBL,SAApBK;;UAEND,SAAS;aACNX,MAAMV,KAAKQ;;AAdpB;AAxEW,GAAA;WA2FJ,SAAA,OAAA,CAASR,GAAT,EAAc;QACjBA,GAAAA,CAAIuB,SAAS,OAAOvB,GAAAA,CAAIuB,OAAJvB,EAAP;WACVP,SAAAA,CAAUK,IAAVL,CAAeO,GAAfP;AA7FI,GAAA;eAgGA,SAAA,WAAA,CAASO,GAAT,EAAc;WAClBA,GAAAA,KAAQwB;AAjGJ,GAAA;UAoGL,SAAA,MAAA,CAASxB,GAAT,EAAc;WACbA,GAAAA,KAAQ;AArGJ,GAAA;;;;;;;;;;;IAwGN,UAASA,GAAT,EAAc;WACZyB,KAAAA,CAAMzB,GAANyB;AADT,IAxGa;WA4GJnC,KAAAA,CAAMoC,OAANpC,IAAiB,UAASU,GAAT,EAAc;WAC/BA,GAAAA,CAAI2B,WAAJ3B,KAAoBV;AA7GhB,GAAA;YAgHH,SAAA,QAAA,CAASU,GAAT,EAAc;WACfA,GAAAA,KAAQG,MAAAA,CAAOH,GAAPG;AAjHJ,GAAA;YAoHH,SAAA,QAAA,CAASH,GAAT,EAAc;WACfA,GAAAA,KAAQA,GAAAA,GAAM;AArHV,GAAA;YAwHH,SAAA,QAAA,CAASA,GAAT,EAAc;WACfA,GAAAA,KAAQA,GAAAA,GAAM;AAzHV,GAAA;aA4HF,SAAA,SAAA,CAASA,GAAT,EAAc;WAChBA,GAAAA,KAAQ,KAARA,IAAiBA,GAAAA,KAAQ;AA7HrB,GAAA;cAgID,SAAA,UAAA,CAASA,GAAT,EAAc;WACjBA,GAAAA,YAAe4B;;AAjIX,CAAf;ACNA,IAAMC,eAAAA,GAAkB,CAEtB;UACUC,MAAAA,CAAOC,QADjB;eAEe;oBACK;YACR,SAAA,IAAA,CAASC,QAAT,EAAmB;YACjBC,IAAAA,GAAOD,QAAAA,CAASE,KAATF,CAAe,oCAAfA;;YACTC,IAAAA,KAAS,MAAM;iBACV;;;eAGF;iBACE,KADF;eAEAE,QAAAA,CACH,OACAF,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EADA,GACqBA,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EADrB,GAEAA,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EAFA,GAEqBA,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EAFrB,GAGAA,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EAHA,GAGqBA,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EAJlBE,EAIsC,CAJtCA;AAFA;AAPK,OAAA;aAiBP5D;AAjBO,KADL;kBAqBG;YACN,SAAA,IAAA,CAASyD,QAAT,EAAmB;YACjBC,IAAAA,GAAOD,QAAAA,CAASE,KAATF,CAAe,mBAAfA;;YACTC,IAAAA,KAAS,MAAM;iBACV;;;eAGF;iBACE,KADF;eAEAE,QAAAA,CAAS,OAAOF,IAAAA,CAAK,CAALA,CAAAA,CAAQ1D,QAAR0D,EAAhBE,EAAoC,CAApCA;AAFA;AAPG,OAAA;aAaL5D;AAbK,KArBH;aAqCF;YACD,SAAA,IAAA,CAASyD,QAAT,EAAmB;YACjBC,IAAAA,GAAOD,QAAAA,CAASE,KAATF,CAAe,0CAAfA;;YACTC,IAAAA,KAAS,MAAM;iBACV;;;eAGF;iBACE,KADF;aAEFG,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG,CAFE;aAGFA,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG,CAHE;aAIFA,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG;AAJE;AAPF,OAAA;aAeA7D;AAfA,KArCE;cAuDD;YACF,SAAA,IAAA,CAASyD,QAAT,EAAmB;YACjBC,IAAAA,GAAOD,QAAAA,CAASE,KAATF,CAAe,sDAAfA;;YACTC,IAAAA,KAAS,MAAM;iBACV;;;eAGF;iBACE,KADF;aAEFG,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG,CAFE;aAGFA,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG,CAHE;aAIFA,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG,CAJE;aAKFA,UAAAA,CAAWH,IAAAA,CAAK,CAALA,CAAXG;AALE;AAPD,OAAA;aAgBD7D;AAhBC;AAvDC;AAFf,CAFsB,EAiFtB;UACUuD,MAAAA,CAAOO,QADjB;eAGe;SAEN;YACG,SAAA,IAAA,CAASL,QAAT,EAAmB;eAChB;iBACE,KADF;eAEAA,QAFA;0BAGW;AAHX;AAFN,OAAA;aASI,SAAA,KAAA,CAAS9D,KAAT,EAAgB;eACdA,KAAAA,CAAMiB;;AAVZ;AAFM;AAHf,CAjFsB,EAyGtB;UACU2C,MAAAA,CAAOJ,OADjB;eAEe;eACA;YACH,SAAA,IAAA,CAASM,QAAT,EAAmB;YACnBA,QAAAA,CAAS5C,MAAT4C,KAAoB,GAAG;iBAClB;;;eAGF;iBACE,KADF;aAEFA,QAAAA,CAAS,CAATA,CAFE;aAGFA,QAAAA,CAAS,CAATA,CAHE;aAIFA,QAAAA,CAAS,CAATA;AAJE;AANA,OAAA;aAcF,SAAA,KAAA,CAAS9D,KAAT,EAAgB;eACd,CAACA,KAAAA,CAAMM,CAAP,EAAUN,KAAAA,CAAMS,CAAhB,EAAmBT,KAAAA,CAAMU,CAAzB;;AAfA,KADA;gBAoBC;YACJ,SAAA,IAAA,CAASoD,QAAT,EAAmB;YACnBA,QAAAA,CAAS5C,MAAT4C,KAAoB,GAAG,OAAO,KAAP;eACpB;iBACE,KADF;aAEFA,QAAAA,CAAS,CAATA,CAFE;aAGFA,QAAAA,CAAS,CAATA,CAHE;aAIFA,QAAAA,CAAS,CAATA,CAJE;aAKFA,QAAAA,CAAS,CAATA;AALE;AAHC,OAAA;aAYH,SAAA,KAAA,CAAS9D,KAAT,EAAgB;eACd,CAACA,KAAAA,CAAMM,CAAP,EAAUN,KAAAA,CAAMS,CAAhB,EAAmBT,KAAAA,CAAMU,CAAzB,EAA4BV,KAAAA,CAAMW,CAAlC;;AAbC;AApBD;AAFf,CAzGsB,EAmJtB;UACUiD,MAAAA,CAAO5B,QADjB;eAEe;cAED;YACF,SAAA,IAAA,CAAS8B,QAAT,EAAmB;YACnBF,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASxD,CAAzBsD,KACFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASrD,CAAzBmD,CADEA,IAEFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASpD,CAAzBkD,CAFEA,IAGFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASnD,CAAzBiD,GAA6B;iBACtB;mBACE,KADF;eAEFE,QAAAA,CAASxD,CAFP;eAGFwD,QAAAA,CAASrD,CAHP;eAIFqD,QAAAA,CAASpD,CAJP;eAKFoD,QAAAA,CAASnD;AALP;;;eAQF;AAdD,OAAA;aAiBD,SAAA,KAAA,CAASX,KAAT,EAAgB;eACd;aACFA,KAAAA,CAAMM,CADJ;aAEFN,KAAAA,CAAMS,CAFJ;aAGFT,KAAAA,CAAMU,CAHJ;aAIFV,KAAAA,CAAMW;AAJJ;;AAlBD,KAFC;aA6BF;YACD,SAAA,IAAA,CAASmD,QAAT,EAAmB;YACnBF,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASxD,CAAzBsD,KACFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASrD,CAAzBmD,CADEA,IAEFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASpD,CAAzBkD,GAA6B;iBACtB;mBACE,KADF;eAEFE,QAAAA,CAASxD,CAFP;eAGFwD,QAAAA,CAASrD,CAHP;eAIFqD,QAAAA,CAASpD;AAJP;;;eAOF;AAZF,OAAA;aAeA,SAAA,KAAA,CAASV,KAAT,EAAgB;eACd;aACFA,KAAAA,CAAMM,CADJ;aAEFN,KAAAA,CAAMS,CAFJ;aAGFT,KAAAA,CAAMU;AAHJ;;AAhBF,KA7BE;cAqDD;YACF,SAAA,IAAA,CAASoD,QAAT,EAAmB;YACnBF,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASlD,CAAzBgD,KACFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASjD,CAAzB+C,CADEA,IAEFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAAS/C,CAAzB6C,CAFEA,IAGFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASnD,CAAzBiD,GAA6B;iBACtB;mBACE,KADF;eAEFE,QAAAA,CAASlD,CAFP;eAGFkD,QAAAA,CAASjD,CAHP;eAIFiD,QAAAA,CAAS/C,CAJP;eAKF+C,QAAAA,CAASnD;AALP;;;eAQF;AAdD,OAAA;aAiBD,SAAA,KAAA,CAASX,KAAT,EAAgB;eACd;aACFA,KAAAA,CAAMY,CADJ;aAEFZ,KAAAA,CAAMa,CAFJ;aAGFb,KAAAA,CAAMe,CAHJ;aAIFf,KAAAA,CAAMW;AAJJ;;AAlBD,KArDC;aAgFF;YACD,SAAA,IAAA,CAASmD,QAAT,EAAmB;YACnBF,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASlD,CAAzBgD,KACFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAASjD,CAAzB+C,CADEA,IAEFA,MAAAA,CAAOO,QAAPP,CAAgBE,QAAAA,CAAS/C,CAAzB6C,GAA6B;iBACtB;mBACE,KADF;eAEFE,QAAAA,CAASlD,CAFP;eAGFkD,QAAAA,CAASjD,CAHP;eAIFiD,QAAAA,CAAS/C;AAJP;;;eAOF;AAZF,OAAA;aAeA,SAAA,KAAA,CAASf,KAAT,EAAgB;eACd;aACFA,KAAAA,CAAMY,CADJ;aAEFZ,KAAAA,CAAMa,CAFJ;aAGFb,KAAAA,CAAMe;AAHJ;;AAhBF;AAhFE;AAFf,CAnJsB,CAAxB;AAgQA,IAAIqD,MAAAA,GAAAA,KAAAA,CAAJ;AACA,IAAIC,QAAAA,GAAAA,KAAAA,CAAJ;;AAEA,IAAMC,SAAAA,GAAY,SAAZA,SAAY,GAAW;aAChB;MAELR,QAAAA,GAAWjC,SAAAA,CAAUX,MAAVW,GAAmB,CAAnBA,GAAuB+B,MAAAA,CAAOP,OAAPO,CAAe/B,SAAf+B,CAAvB/B,GAAmDA,SAAAA,CAAU,CAAVA;SAC7DF,KAAKgC,iBAAiB,UAASY,MAAT,EAAiB;QACxCA,MAAAA,CAAOC,MAAPD,CAAcT,QAAdS,GAAyB;aACpB5C,KAAK4C,MAAAA,CAAOE,aAAa,UAASC,UAAT,EAAqBtE,cAArB,EAAqC;iBAC1DsE,UAAAA,CAAWC,IAAXD,CAAgBZ,QAAhBY;;YAELL,QAAAA,KAAa,KAAbA,IAAsBD,MAAAA,KAAW,OAAO;qBAC/BA;iBACJhE,iBAAiBA;iBACjBsE,aAAaA;iBACbd,MAAAA,CAAOhB;;AAPlB;aAWOgB,MAAAA,CAAOhB;;AAblB;SAiBOyB;AArBT,CAAA;;ACtQA,IAAIO,YAAAA,GAAAA,KAAAA,CAAJ;AAEA,IAAMC,SAAAA,GAAY;cACJ,SAAA,UAAA,CAASjE,CAAT,EAAYC,CAAZ,EAAeE,CAAf,EAAkB;QACtB+D,EAAAA,GAAKvE,IAAAA,CAAKwE,KAALxE,CAAWK,CAAAA,GAAI,EAAfL,IAAqB;QAE1ByE,CAAAA,GAAIpE,CAAAA,GAAI,EAAJA,GAASL,IAAAA,CAAKwE,KAALxE,CAAWK,CAAAA,GAAI,EAAfL;QACb0E,CAAAA,GAAIlE,CAAAA,IAAK,MAAMF,CAAXE;QACJmE,CAAAA,GAAInE,CAAAA,IAAK,MAAOiE,CAAAA,GAAInE,CAAhBE;QACJoE,CAAAA,GAAIpE,CAAAA,IAAK,MAAO,CAAC,MAAMiE,CAAP,IAAYnE,CAAxBE;QAEJqE,CAAAA,GAAI,CACR,CAACrE,CAAD,EAAIoE,CAAJ,EAAOF,CAAP,CADQ,EAER,CAACC,CAAD,EAAInE,CAAJ,EAAOkE,CAAP,CAFQ,EAGR,CAACA,CAAD,EAAIlE,CAAJ,EAAOoE,CAAP,CAHQ,EAIR,CAACF,CAAD,EAAIC,CAAJ,EAAOnE,CAAP,CAJQ,EAKR,CAACoE,CAAD,EAAIF,CAAJ,EAAOlE,CAAP,CALQ,EAMR,CAACA,CAAD,EAAIkE,CAAJ,EAAOC,CAAP,CANQ,EAORJ,EAPQ;WASH;SACFM,CAAAA,CAAE,CAAFA,CAAAA,GAAO,GADL;SAEFA,CAAAA,CAAE,CAAFA,CAAAA,GAAO,GAFL;SAGFA,CAAAA,CAAE,CAAFA,CAAAA,GAAO;AAHL;AAlBO,GAAA;cAyBJ,SAAA,UAAA,CAAS9E,CAAT,EAAYG,CAAZ,EAAeC,CAAf,EAAkB;QACtB2E,GAAAA,GAAM9E,IAAAA,CAAK8E,GAAL9E,CAASD,CAATC,EAAYE,CAAZF,EAAeG,CAAfH;QACN+E,GAAAA,GAAM/E,IAAAA,CAAK+E,GAAL/E,CAASD,CAATC,EAAYE,CAAZF,EAAeG,CAAfH;QACNgF,KAAAA,GAAQD,GAAAA,GAAMD;QAChBzE,CAAAA,GAAAA,KAAAA;QACAC,CAAAA,GAAAA,KAAAA;;QAEAyE,GAAAA,KAAQ,GAAG;UACTC,KAAAA,GAAQD;AADd,WAEO;aACE;WACFE,GADE;WAEF,CAFE;WAGF;AAHE;;;QAOLlF,CAAAA,KAAMgF,KAAK;UACT,CAAC7E,CAAAA,GAAIC,CAAL,IAAU6E;AADhB,WAEO,IAAI9E,CAAAA,KAAM6E,GAAV,EAAe;UAChB,IAAI,CAAC5E,CAAAA,GAAIJ,CAAL,IAAUiF;AADb,KAAA,MAEA;UACD,IAAI,CAACjF,CAAAA,GAAIG,CAAL,IAAU8E;;;SAEf;;QACD3E,CAAAA,GAAI,GAAG;WACJ;;;WAGA;SACFA,CAAAA,GAAI,GADF;SAEFC,CAFE;SAGFyE,GAAAA,GAAM;AAHJ;AAtDO,GAAA;cA6DJ,SAAA,UAAA,CAAShF,CAAT,EAAYG,CAAZ,EAAeC,CAAf,EAAkB;QACxBO,GAAAA,GAAM,KAAKwE,kBAAL,CAAwB,CAAxB,EAA2B,CAA3B,EAA8BnF,CAA9B;UACJ,KAAKmF,kBAAL,CAAwBxE,GAAxB,EAA6B,CAA7B,EAAgCR,CAAhC;UACA,KAAKgF,kBAAL,CAAwBxE,GAAxB,EAA6B,CAA7B,EAAgCP,CAAhC;WACCO;AAjEO,GAAA;sBAoEI,SAAA,kBAAA,CAASA,GAAT,EAAcyE,cAAd,EAA8B;WACxCzE,GAAAA,IAAQyE,cAAAA,GAAiB,CAAzBzE,GAA+B;AArEzB,GAAA;sBAwEI,SAAA,kBAAA,CAASA,GAAT,EAAcyE,cAAd,EAA8BC,KAA9B,EAAqC;WAChDA,KAAAA,KAAUf,YAAAA,GAAec,cAAAA,GAAiB,CAA1CC,CAAAA,GAAgD1E,GAAAA,GAAM,EAAE,QAAQ2D,YAAV;;AAzE/C,CAAlB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ICGMgB,KAAAA,GAAAA,YAAAA;mBACU;;SACPzF,UAAUmE,SAAAA,CAAU9B,KAAV8B,CAAgB,IAAhBA,EAAsBzC,SAAtByC;;QAEX,KAAKnE,OAAL,KAAiB,OAAO;YACpB,IAAI0F,KAAJ,CAAU,qCAAV;;;SAGH1F,QAAQQ,IAAI,KAAKR,OAAL,CAAaQ,CAAb,IAAkB;;;;;+BAG1B;aACFmF,aAAAA,CAAc,IAAdA;;;;kCAGK;aACLA,aAAAA,CAAc,IAAdA,EAAoB,IAApBA;;;;iCAGI;aACJ,KAAK3F,OAAL,CAAauE,UAAb,CAAwBqB,KAAxB,CAA8B,IAA9B;;;;CApBLH;;AAwBN,SAASI,kBAAT,CAA4BtE,MAA5B,EAAoCuE,SAApC,EAA+CC,iBAA/C,EAAkE;SACzDC,eAAezE,QAAQuE,WAAW;SAClC,SAAA,MAAA,GAAW;UACV,KAAK9F,OAAL,CAAaiG,KAAb,KAAuB,OAAO;eACzB,KAAKjG,OAAL,CAAa8F,SAAb;;;YAGHI,eAAe,MAAMJ,WAAWC;aAE/B,KAAK/F,OAAL,CAAa8F,SAAb;AAR8B,KAAA;SAWlC,SAAA,MAAA,CAASlF,CAAT,EAAY;UACX,KAAKZ,OAAL,CAAaiG,KAAb,KAAuB,OAAO;cAC1BC,eAAe,MAAMJ,WAAWC;aACjC/F,QAAQiG,QAAQ;;;WAGlBjG,QAAQ8F,aAAalF;;AAjBW;;;AAsB3C,SAASuF,kBAAT,CAA4B5E,MAA5B,EAAoCuE,SAApC,EAA+C;SACtCE,eAAezE,QAAQuE,WAAW;SAClC,SAAA,MAAA,GAAW;UACV,KAAK9F,OAAL,CAAaiG,KAAb,KAAuB,OAAO;eACzB,KAAKjG,OAAL,CAAa8F,SAAb;;;YAGHM,eAAe;aAEd,KAAKpG,OAAL,CAAa8F,SAAb;AAR8B,KAAA;SAWlC,SAAA,MAAA,CAASlF,CAAT,EAAY;UACX,KAAKZ,OAAL,CAAaiG,KAAb,KAAuB,OAAO;cAC1BG,eAAe;aAChBpG,QAAQiG,QAAQ;;;WAGlBjG,QAAQ8F,aAAalF;;AAjBW;;;AAuB3C6E,KAAAA,CAAMS,cAANT,GAAuB,UAAS5F,KAAT,EAAgBiG,SAAhB,EAA2BC,iBAA3B,EAA8C;MAC/DlG,KAAAA,CAAMG,OAANH,CAAcoG,KAAdpG,KAAwB,OAAO;UAC3BG,QAAQ8F,aAAaO,SAAAA,CAAKC,kBAALD,CAAwBxG,KAAAA,CAAMG,OAANH,CAAciB,GAAtCuF,EAA2CN,iBAA3CM;AAD7B,SAEO,IAAIxG,KAAAA,CAAMG,OAANH,CAAcoG,KAAdpG,KAAwB,KAA5B,EAAmC;WACjC0G,OAAO1G,KAAAA,CAAMG,SAASqG,SAAAA,CAAKG,UAALH,CAAgBxG,KAAAA,CAAMG,OAANH,CAAcY,CAA9B4F,EAAiCxG,KAAAA,CAAMG,OAANH,CAAca,CAA/C2F,EAAkDxG,KAAAA,CAAMG,OAANH,CAAce,CAAhEyF;AADxB,GAAA,MAEA;UACC,IAAIX,KAAJ,CAAU,uBAAV;;AANV,CAAAD;;AAUAA,KAAAA,CAAMW,cAANX,GAAuB,UAAS5F,KAAT,EAAgB;MAC/BoE,MAAAA,GAASoC,SAAAA,CAAKI,UAALJ,CAAgBxG,KAAAA,CAAMM,CAAtBkG,EAAyBxG,KAAAA,CAAMS,CAA/B+F,EAAkCxG,KAAAA,CAAMU,CAAxC8F;SAERE,OAAO1G,KAAAA,CAAMG,SAClB;OACKiE,MAAAA,CAAOvD,CADZ;OAEKuD,MAAAA,CAAOrD;AAFZ;;MAME,CAAC6C,MAAAA,CAAOL,KAAPK,CAAaQ,MAAAA,CAAOxD,CAApBgD,GAAwB;UACrBzD,QAAQS,IAAIwD,MAAAA,CAAOxD;AAD3B,SAEO,IAAIgD,MAAAA,CAAOzB,WAAPyB,CAAmB5D,KAAAA,CAAMG,OAANH,CAAcY,CAAjCgD,CAAJ,EAAyC;UACxCzD,QAAQS,IAAI;;AAbtB,CAAAgF;;AAiBAA,KAAAA,CAAMiB,UAANjB,GAAmB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,KAA/B,EAAsC,GAAtC,CAAnBA;AAEAI,kBAAAA,CAAmBJ,KAAAA,CAAMvE,SAAzB2E,EAAoC,GAApCA,EAAyC,CAAzCA,CAAAA;AACAA,kBAAAA,CAAmBJ,KAAAA,CAAMvE,SAAzB2E,EAAoC,GAApCA,EAAyC,CAAzCA,CAAAA;AACAA,kBAAAA,CAAmBJ,KAAAA,CAAMvE,SAAzB2E,EAAoC,GAApCA,EAAyC,CAAzCA,CAAAA;AAEAM,kBAAAA,CAAmBV,KAAAA,CAAMvE,SAAzBiF,EAAoC,GAApCA,CAAAA;AACAA,kBAAAA,CAAmBV,KAAAA,CAAMvE,SAAzBiF,EAAoC,GAApCA,CAAAA;AACAA,kBAAAA,CAAmBV,KAAAA,CAAMvE,SAAzBiF,EAAoC,GAApCA,CAAAA;AAEArE,MAAAA,CAAOkE,cAAPlE,CAAsB2D,KAAAA,CAAMvE,SAA5BY,EAAuC,GAAvCA,EAA4C;OACrC,SAAA,MAAA,GAAW;WACP,KAAK9B,OAAL,CAAaQ;AAFoB,GAAA;OAKrC,SAAA,MAAA,CAASI,CAAT,EAAY;SACVZ,QAAQQ,IAAII;;AANuB,CAA5CkB;AAUAA,MAAAA,CAAOkE,cAAPlE,CAAsB2D,KAAAA,CAAMvE,SAA5BY,EAAuC,KAAvCA,EAA8C;OACvC,SAAA,MAAA,GAAW;QACV,KAAK9B,OAAL,CAAaiG,KAAb,KAAuB,OAAO;WAC3BjG,QAAQc,MAAMuF,SAAAA,CAAKM,UAALN,CAAgB,KAAKlG,CAArBkG,EAAwB,KAAK/F,CAA7B+F,EAAgC,KAAK9F,CAArC8F;WACdrG,QAAQiG,QAAQ;;;WAGhB,KAAKjG,OAAL,CAAac;AAPsB,GAAA;OAUvC,SAAA,MAAA,CAASF,CAAT,EAAY;SACVZ,QAAQiG,QAAQ;SAChBjG,QAAQc,MAAMF;;AAZuB,CAA9CkB;;ICrHM8E,UAAAA,GAAAA,YAAAA;sBACQC,QAAQC,UAAU;;SACvBC,eAAeF,MAAAA,CAAOC,QAAPD;SAMfG,aAAaC,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;SAMbJ,SAASA;SAMTC,WAAWA;SAOXK,aAAahE;SAObiE,mBAAmBjE;;;;;6BAWjBT,KAAK;WACPyE,aAAazE;aACX;;;;mCAYMA,KAAK;WACb0E,mBAAmB1E;aACjB;;;;6BAQA2E,UAAU;WACZR,OAAO,KAAKC,YAAYO;;UACzB,KAAKF,YAAY;aACdA,WAAW1F,KAAK,MAAM4F;;;WAGxBC;aACE;;;;+BAQE;aACF,KAAKT,MAAL,CAAY,KAAKC,QAAjB;;;;oCAQO;aACP;;;;iCAMI;aACJ,KAAKC,YAAL,KAAsB,KAAKQ,QAAL;;;;CArG3BX;;ACJN,IAAMY,SAAAA,GAAY;cACJ,CAAC,QAAD,CADI;eAEH,CAAC,OAAD,EAAU,WAAV,EAAuB,WAAvB,EAAoC,SAApC,EAA+C,WAA/C,CAFG;kBAGA,CAAC,SAAD;AAHA,CAAlB;AAMA,IAAMC,aAAAA,GAAgB,EAAtB;AACAhE,MAAAA,CAAOjC,IAAPiC,CAAY+D,SAAZ/D,EAAuB,UAAS7C,CAAT,EAAY8G,CAAZ,EAAe;SAC7BlG,KAAKZ,GAAG,UAAS+G,CAAT,EAAY;kBACXA,KAAKD;AADrB;AADF,CAAAjE;AAMA,IAAMmE,gBAAAA,GAAmB,iBAAzB;;AAEA,SAASC,gBAAT,CAA0BC,GAA1B,EAA+B;MACzBA,GAAAA,KAAQ,GAARA,IAAerE,MAAAA,CAAOzB,WAAPyB,CAAmBqE,GAAnBrE,GAAyB;WACnC;;;MAGHI,KAAAA,GAAQiE,GAAAA,CAAIjE,KAAJiE,CAAUF,gBAAVE;;MAEV,CAACrE,MAAAA,CAAOsE,MAAPtE,CAAcI,KAAdJ,GAAsB;WAClBM,UAAAA,CAAWF,KAAAA,CAAM,CAANA,CAAXE;;;SAKF;;;AAOT,IAAMiE,GAAAA,GAAM;kBAOM,SAAA,cAAA,CAASC,IAAT,EAAeC,UAAf,EAA2B;QACrCD,IAAAA,KAAS9E,SAAT8E,IAAsBA,IAAAA,CAAKE,KAALF,KAAe9E,WAAW;SAE/CiF,gBAAgBF,UAAAA,GAAa,YAAW;aACpC;AADY,KAAAA,GAEjB,YAAW,CAFf;SAKKC,MAAME,gBAAgBH,UAAAA,GAAa,MAAbA,GAAsB;SAC5CC,MAAMG,kBAAkBJ,UAAAA,GAAa,MAAbA,GAAsB;SAC9CK,eAAeL,UAAAA,GAAa,IAAbA,GAAoB;AAjBhC,GAAA;kBA0BM,SAAA,cAAA,CAASD,IAAT,EAAeO,GAAf,EAAoBC,IAApB,EAA0B;QACpCC,QAAAA,GAAWD;QACXE,UAAAA,GAAaH;;QAEb/E,MAAAA,CAAOzB,WAAPyB,CAAmBkF,UAAnBlF,GAAgC;mBACrB;;;QAGXA,MAAAA,CAAOzB,WAAPyB,CAAmBiF,QAAnBjF,GAA8B;iBACrB;;;SAGR0E,MAAMS,WAAW;;QAElBD,YAAY;WACTR,MAAMU,OAAO;WACbV,MAAMW,QAAQ;;;QAEjBJ,UAAU;WACPP,MAAMY,MAAM;WACZZ,MAAMa,SAAS;;AA9Cd,GAAA;aAwDC,SAAA,SAAA,CAASf,IAAT,EAAegB,SAAf,EAA0BC,IAA1B,EAAgCC,GAAhC,EAAqC;QACxCC,MAAAA,GAASF,IAAAA,IAAQ;QACjBG,SAAAA,GAAY5B,aAAAA,CAAcwB,SAAdxB;;QACd,CAAC4B,WAAW;YACR,IAAI3D,KAAJ,CAAU,gBAAgBuD,SAAhB,GAA4B,iBAAtC;;;QAEFK,GAAAA,GAAMrC,QAAAA,CAASsC,WAATtC,CAAqBoC,SAArBpC;;YACJoC;WACD;;cAEKG,OAAAA,GAAUJ,MAAAA,CAAOK,CAAPL,IAAYA,MAAAA,CAAOI,OAAnBJ,IAA8B;cACxCM,OAAAA,GAAUN,MAAAA,CAAOO,CAAPP,IAAYA,MAAAA,CAAOM,OAAnBN,IAA8B;cAC1CQ,eAAeX,WAAWG,MAAAA,CAAOS,OAAPT,IAAkB,OAC9CA,MAAAA,CAAOU,UAAPV,IAAqB,MAAMW,QAAQX,MAAAA,CAAOY,UAAPZ,IAAqB,GACxD,+BAIO,OAAO,OAAO,OAAO,GAAG;;;;WAGhC;;cAEKa,IAAAA,GAAOX,GAAAA,CAAIY,iBAAJZ,IAAyBA,GAAAA,CAAIa;iBACnCC,SAAShB,QAAQ;wBACV,IADU;qBAEb,KAFa;oBAGd,KAHc;sBAIZ,KAJY;qBAKb,KALa;qBAMbjG,SANa;sBAOZA;AAPY;eASnB8F,WAAWG,MAAAA,CAAOS,OAAPT,IAAkB,OAChCA,MAAAA,CAAOU,YAAYC,QACnBX,MAAAA,CAAOiB,SAASjB,MAAAA,CAAOkB,QACvBlB,MAAAA,CAAOmB,UAAUnB,MAAAA,CAAOoB,SACxBpB,MAAAA,CAAOqB,SAASrB,MAAAA,CAAOsB;;;;;;cAKrBC,UAAU1B,WAAWG,MAAAA,CAAOS,OAAPT,IAAkB,OAAOA,MAAAA,CAAOU,UAAPV,IAAqB;;;;;WAItEgB,SAASd,KAAKH;SAChByB,cAActB;AAvGX,GAAA;QAiHJ,SAAA,IAAA,CAASrB,IAAT,EAAe4C,KAAf,EAAsBlI,IAAtB,EAA4BmI,OAA5B,EAAqC;QACnCC,IAAAA,GAAOD,OAAAA,IAAW;;QACpB7C,IAAAA,CAAK+C,kBAAkB;WACpBA,iBAAiBH,OAAOlI,MAAMoI;AADrC,WAEO,IAAI9C,IAAAA,CAAKgD,WAAT,EAAsB;WACtBA,YAAY,OAAOJ,OAAOlI;;;WAE1BqF;AAxHC,GAAA;UAkIF,SAAA,MAAA,CAASC,IAAT,EAAe4C,KAAf,EAAsBlI,IAAtB,EAA4BmI,OAA5B,EAAqC;QACrCC,IAAAA,GAAOD,OAAAA,IAAW;;QACpB7C,IAAAA,CAAKiD,qBAAqB;WACvBA,oBAAoBL,OAAOlI,MAAMoI;AADxC,WAEO,IAAI9C,IAAAA,CAAKkD,WAAT,EAAsB;WACtBA,YAAY,OAAON,OAAOlI;;;WAE1BqF;AAzIC,GAAA;YAiJA,SAAA,QAAA,CAASC,IAAT,EAAeoB,SAAf,EAA0B;QAC9BpB,IAAAA,CAAKoB,SAALpB,KAAmB9E,WAAW;WAC3BkG,YAAYA;AADnB,WAEO,IAAIpB,IAAAA,CAAKoB,SAALpB,KAAmBoB,SAAvB,EAAkC;UACjC+B,OAAAA,GAAUnD,IAAAA,CAAKoB,SAALpB,CAAeoD,KAAfpD,CAAqB,IAArBA;;UACZmD,OAAAA,CAAQE,OAARF,CAAgB/B,SAAhB+B,MAA+B,CAAC,GAAG;gBAC7BG,KAAKlC;aACRA,YAAY+B,OAAAA,CAAQI,IAARJ,CAAa,GAAbA,EAAkBK,OAAlBL,CAA0B,MAA1BA,EAAkC,EAAlCA,EAAsCK,OAAtCL,CAA8C,MAA9CA,EAAsD,EAAtDA;;;;WAGdpD;AA3JC,GAAA;eAmKG,SAAA,WAAA,CAASC,IAAT,EAAeoB,SAAf,EAA0B;QACjCA,WAAW;UACTpB,IAAAA,CAAKoB,SAALpB,KAAmBoB,WAAW;aAC3BqC,gBAAgB;AADvB,aAEO;YACCN,OAAAA,GAAUnD,IAAAA,CAAKoB,SAALpB,CAAeoD,KAAfpD,CAAqB,IAArBA;YACV0D,KAAAA,GAAQP,OAAAA,CAAQE,OAARF,CAAgB/B,SAAhB+B;;YACVO,KAAAA,KAAU,CAAC,GAAG;kBACRC,OAAOD,OAAO;eACjBtC,YAAY+B,OAAAA,CAAQI,IAARJ,CAAa,GAAbA;;;AARvB,WAWO;WACA/B,YAAYlG;;;WAEZ6E;AAlLC,GAAA;YAqLA,SAAA,QAAA,CAASC,IAAT,EAAeoB,SAAf,EAA0B;WAC3B,IAAIwC,MAAJ,CAAW,eAAexC,SAAf,GAA2B,YAAtC,EAAoDzF,IAApD,CAAyDqE,IAAAA,CAAKoB,SAA9D,KAA4E;AAtL3E,GAAA;YA6LA,SAAA,QAAA,CAASpB,IAAT,EAAe;QACjBE,KAAAA,GAAQ2D,gBAAAA,CAAiB7D,IAAjB6D;WAEPjE,gBAAAA,CAAiBM,KAAAA,CAAM,mBAANA,CAAjBN,CAAAA,GACLA,gBAAAA,CAAiBM,KAAAA,CAAM,oBAANA,CAAjBN,CADKA,GAELA,gBAAAA,CAAiBM,KAAAA,CAAM,cAANA,CAAjBN,CAFKA,GAGLA,gBAAAA,CAAiBM,KAAAA,CAAM,eAANA,CAAjBN,CAHKA,GAILA,gBAAAA,CAAiBM,KAAAA,CAAM4D,KAAvBlE;AApMM,GAAA;aA2MC,SAAA,SAAA,CAASI,IAAT,EAAe;QAClBE,KAAAA,GAAQ2D,gBAAAA,CAAiB7D,IAAjB6D;WAEPjE,gBAAAA,CAAiBM,KAAAA,CAAM,kBAANA,CAAjBN,CAAAA,GACLA,gBAAAA,CAAiBM,KAAAA,CAAM,qBAANA,CAAjBN,CADKA,GAELA,gBAAAA,CAAiBM,KAAAA,CAAM,aAANA,CAAjBN,CAFKA,GAGLA,gBAAAA,CAAiBM,KAAAA,CAAM,gBAANA,CAAjBN,CAHKA,GAILA,gBAAAA,CAAiBM,KAAAA,CAAM6D,MAAvBnE;AAlNM,GAAA;aAyNC,SAAA,SAAA,CAASoE,EAAT,EAAa;QAClBhE,IAAAA,GAAOgE;QACLC,MAAAA,GAAS;AAAErD,MAAAA,IAAAA,EAAM,CAAR;AAAWE,MAAAA,GAAAA,EAAK;AAAhB;;QACXd,IAAAA,CAAKkE,cAAc;SAClB;eACMtD,QAAQZ,IAAAA,CAAKmE;eACbrD,OAAOd,IAAAA,CAAKoE;eACZpE,IAAAA,CAAKkE;AAHd,eAISlE;;;WAEJiE;AAnOC,GAAA;YA2OA,SAAA,QAAA,CAASjE,IAAT,EAAe;WAChBA,IAAAA,KAAShB,QAAAA,CAASqF,aAAlBrE,KAAoCA,IAAAA,CAAKsE,IAALtE,IAAaA,IAAAA,CAAKuE,IAAtDvE;;AA5OC,CAAZ;;IC1BMwE,iBAAAA,GAAAA,UAAAA,WAAAA,EAAAA;;;6BACQ5F,QAAQC,UAAU;;;sIACtBD,QAAQC;;QAER4F,KAAAA,GAAAA;WACDC,SAAS,MAAA,CAAKpF,QAAL;WAETqF,aAAa3F,QAAAA,CAASC,aAATD,CAAuB,OAAvBA;;WACb2F,WAAWC,aAAa,QAAQ;;aAE5BC,WAAW;YACZC,SAAS,CAACL,KAAAA,CAAMC;;;QAGpB1K,KAAK,MAAA,CAAK2K,YAAY,UAAUE,UAAU;;WAEzC9F,WAAWgG,YAAY,MAAA,CAAKJ;;WAG5BtF;;;;;;;6BAGE1G,GAAG;UACJsD,QAAAA,GAAAA,GAAAA,CAAAA,iBAAAA,CAAAA,SAAAA,CAAAA,SAAAA,IAAAA,MAAAA,CAAAA,cAAAA,CAAAA,iBAAAA,CAAAA,SAAAA,CAAAA,EAAAA,UAAAA,EAAAA,IAAAA,CAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAA0BtD,CAA1BsD;;UACF,KAAKkD,kBAAkB;aACpBA,iBAAiB3F,KAAK,MAAM,KAAK8F,QAAL;;;WAE9BoF,SAAS,KAAKpF,QAAL;aACPrD;;;;oCAGO;UACV,KAAKqD,QAAL,OAAoB,MAAM;aACvBqF,WAAWC,aAAa,WAAW;;aACnCD,WAAWK,UAAU;aACrBN,SAAS;AAHhB,aAIO;aACAC,WAAWK,UAAU;aACrBN,SAAS;;;;;;;CAtCdF,CAA0B7F,UAA1B6F;;ICIAS,gBAAAA,GAAAA,UAAAA,WAAAA,EAAAA;;;4BACQrG,QAAQC,UAAUqG,MAAM;;;oIAC5BtG,QAAQC;;QAEVsG,OAAAA,GAAUD;QAERT,KAAAA,GAAAA;WAMDW,WAAWpG,QAAAA,CAASC,aAATD,CAAuB,QAAvBA;;QAEZxD,MAAAA,CAAOJ,OAAPI,CAAe2J,OAAf3J,GAAyB;UACrB6J,GAAAA,GAAM;aACL9L,KAAK4L,SAAS,UAASG,OAAT,EAAkB;YACjCA,WAAWA;AADjB;gBAGUD;;;WAGL9L,KAAK4L,SAAS,UAAS5H,KAAT,EAAgBzD,GAAhB,EAAqB;UAClCyL,GAAAA,GAAMvG,QAAAA,CAASC,aAATD,CAAuB,QAAvBA;UACRwG,YAAY1L;UACZ8K,aAAa,SAASrH;;YACpB6H,SAASL,YAAYQ;AAJ7B;;WAQKlG;;QAEDrF,KAAK,MAAA,CAAKoL,UAAU,UAAU,YAAW;UACrCK,YAAAA,GAAe,KAAKN,OAAL,CAAa,KAAKO,aAAlB,EAAiCnI;;YAChDuH,SAASW;AAFjB;;WAKK1G,WAAWgG,YAAY,MAAA,CAAKK;;;;;;;6BAG1BzM,GAAG;UACJsD,QAAAA,GAAAA,GAAAA,CAAAA,gBAAAA,CAAAA,SAAAA,CAAAA,SAAAA,IAAAA,MAAAA,CAAAA,cAAAA,CAAAA,gBAAAA,CAAAA,SAAAA,CAAAA,EAAAA,UAAAA,EAAAA,IAAAA,CAAAA,CAAAA,IAAAA,CAAAA,IAAAA,EAA0BtD,CAA1BsD;;UAEF,KAAKkD,kBAAkB;aACpBA,iBAAiB3F,KAAK,MAAM,KAAK8F,QAAL;;;aAE5BrD;;;;oCAGO;UACV8D,GAAAA,CAAI4F,QAAJ5F,CAAa,KAAKqF,QAAlBrF,GAA6B,OAAO,IAAP;WAC5BqF,SAAS7H,QAAQ,KAAK+B,QAAL;;;;;CAnDpB2F,CAAyBtG,UAAzBsG;;ICJAW,gBAAAA,GAAAA,UAAAA,WAAAA,EAAAA;;;4BACQhH,QAAQC,UAAU;;;oIACtBD,QAAQC;;QAER4F,KAAAA,GAAAA;;aAEGI,WAAW;YACZC,SAASL,KAAAA,CAAMoB,OAANpB,CAAclH;;;aAGtBuI,SAAS;UACZrB,KAAAA,CAAMtF,kBAAkB;cACpBA,iBAAiB3F,KAAKiL,OAAOA,KAAAA,CAAMnF,QAANmF;;;;WAIlCoB,UAAU7G,QAAAA,CAASC,aAATD,CAAuB,OAAvBA;;WACV6G,QAAQjB,aAAa,QAAQ;;QAE9B5K,KAAK,MAAA,CAAK6L,SAAS,SAAShB;QAC5B7K,KAAK,MAAA,CAAK6L,SAAS,UAAUhB;QAC7B7K,KAAK,MAAA,CAAK6L,SAAS,QAAQC;QAC3B9L,KAAK,MAAA,CAAK6L,SAAS,WAAW,UAASnG,CAAT,EAAY;UACxCA,CAAAA,CAAE8C,OAAF9C,KAAc,IAAI;aACfqG;;AAFT;;WAMK1G;;WAEAN,WAAWgG,YAAY,MAAA,CAAKc;;;;;;;oCAGnB;UAGV,CAAC9F,GAAAA,CAAI4F,QAAJ5F,CAAa,KAAK8F,OAAlB9F,GAA4B;aAC1B8F,QAAQtI,QAAQ,KAAK+B,QAAL;;;;;;;CArCrBsG,CAAyBjH,UAAzBiH;;ACRN,SAASI,WAAT,CAAqBxE,CAArB,EAAwB;MAChByE,EAAAA,GAAKzE,CAAAA,CAAEvJ,QAAFuJ;;MACPyE,EAAAA,CAAG5C,OAAH4C,CAAW,GAAXA,IAAkB,CAAC,GAAG;WACjBA,EAAAA,CAAGnN,MAAHmN,GAAYA,EAAAA,CAAG5C,OAAH4C,CAAW,GAAXA,CAAZA,GAA8B;;;SAGhC;;;IAeHC,gBAAAA,GAAAA,UAAAA,WAAAA,EAAAA;;;4BACQtH,QAAQC,UAAUsC,QAAQ;;;mIAC9BvC,QAAQC;;QAERsH,OAAAA,GAAUhF,MAAAA,IAAU;;UAErBiF,QAAQD,OAAAA,CAAQlJ;UAChBoJ,QAAQF,OAAAA,CAAQjJ;UAChBoJ,SAASH,OAAAA,CAAQI;;QAElB/K,MAAAA,CAAOzB,WAAPyB,CAAmB,KAAA,CAAK8K,MAAxB9K,GAAiC;UAC/B,KAAA,CAAKsD,YAAL,KAAsB,GAAG;cACtB0H,gBAAgB;AADvB,aAEO;cAEAA,gBAAgBrO,IAAAA,CAAKsO,GAALtO,CAAS,EAATA,EAAaA,IAAAA,CAAKwE,KAALxE,CAAWA,IAAAA,CAAKuO,GAALvO,CAASA,IAAAA,CAAKwO,GAALxO,CAAS,KAAA,CAAK2G,YAAd3G,CAATA,IAAwCA,IAAAA,CAAKyO,IAAxDzO,CAAbA,IAA8E;;AALvG,WAOO;YACAqO,gBAAgB,KAAA,CAAKF;;;UAGvBO,cAAcb,WAAAA,CAAY,KAAA,CAAKQ,aAAjBR;;;;;;6BAGZrN,GAAG;UACNmO,EAAAA,GAAKnO;;UAEL,KAAKyN,KAAL,KAAelL,SAAf,IAA4B4L,EAAAA,GAAK,KAAKV,OAAO;aAC1C,KAAKA;AADZ,aAEO,IAAI,KAAKC,KAAL,KAAenL,SAAf,IAA4B4L,EAAAA,GAAK,KAAKT,KAA1C,EAAiD;aACjD,KAAKA;;;UAGR,KAAKC,MAAL,KAAgBpL,SAAhB,IAA6B4L,EAAAA,GAAK,KAAKR,MAAVQ,KAAqB,GAAG;aAClD3O,IAAAA,CAAKC,KAALD,CAAW2O,EAAAA,GAAK,KAAKR,MAArBnO,IAA+B,KAAKmO;;;yIAGrBQ;;;;wBAUpBC,UAAU;WACPX,QAAQW;aACN;;;;wBAULC,UAAU;WACPX,QAAQW;aACN;;;;yBAaJC,WAAW;WACTX,SAASW;WACTT,gBAAgBS;WAChBJ,cAAcb,WAAAA,CAAYiB,SAAZjB;aACZ;;;;CA9ELE,CAAyBvH,UAAzBuH;;ACpBN,SAASgB,cAAT,CAAwB3J,KAAxB,EAA+B4J,QAA/B,EAAyC;MACjCC,KAAAA,GAAQjP,IAAAA,CAAKsO,GAALtO,CAAS,EAATA,EAAagP,QAAbhP;SACPA,IAAAA,CAAKC,KAALD,CAAWoF,KAAAA,GAAQ6J,KAAnBjP,IAA4BiP;;;IAiB/BC,mBAAAA,GAAAA,UAAAA,iBAAAA,EAAAA;;;+BACQzI,QAAQC,UAAUsC,QAAQ;;;0IAC9BvC,QAAQC,UAAUsC;;WAEnBmG,wBAAwB;QAEvB7C,KAAAA,GAAAA;QAMF8C,KAAAA,GAAAA,KAAAA;;aAEK1C,WAAW;UACZ2C,SAAAA,GAAY1L,UAAAA,CAAW2I,KAAAA,CAAMoB,OAANpB,CAAclH,KAAzBzB;;UACd,CAACN,MAAAA,CAAOL,KAAPK,CAAagM,SAAbhM,GAAyB;cACtBsJ,SAAS0C;;;;aAIVC,WAAW;UACdhD,KAAAA,CAAMtF,kBAAkB;cACpBA,iBAAiB3F,KAAKiL,OAAOA,KAAAA,CAAMnF,QAANmF;;;;aAI9BqB,SAAS;;;;aAIT4B,YAAYhI,GAAG;UAChBiI,IAAAA,GAAOJ,KAAAA,GAAQ7H,CAAAA,CAAE+B;;YACjBqD,SAASL,KAAAA,CAAMnF,QAANmF,KAAmBkD,IAAAA,GAAOlD,KAAAA,CAAM+B;;cAEvC9G,CAAAA,CAAE+B;;;aAGHmG,YAAY;UACfC,OAAO/F,QAAQ,aAAa4F;UAC5BG,OAAO/F,QAAQ,WAAW8F;;;;aAIvBE,YAAYpI,GAAG;UAClB1F,KAAK8H,QAAQ,aAAa4F;UAC1B1N,KAAK8H,QAAQ,WAAW8F;cACpBlI,CAAAA,CAAE+B;;;WAGPoE,UAAU7G,QAAAA,CAASC,aAATD,CAAuB,OAAvBA;;WACV6G,QAAQjB,aAAa,QAAQ;;QAI9B5K,KAAK,MAAA,CAAK6L,SAAS,UAAUhB;QAC7B7K,KAAK,MAAA,CAAK6L,SAAS,QAAQC;QAC3B9L,KAAK,MAAA,CAAK6L,SAAS,aAAaiC;QAChC9N,KAAK,MAAA,CAAK6L,SAAS,WAAW,UAASnG,CAAT,EAAY;UAExCA,CAAAA,CAAE8C,OAAF9C,KAAc,IAAI;cACd4H,wBAAwB;aACzBvB;cACCuB,wBAAwB;;;AALlC;;WAUKjI;;WAEAN,WAAWgG,YAAY,MAAA,CAAKc;;;;;;;oCAGnB;WACTA,QAAQtI,QAAQ,KAAK+J,qBAAL,GAA6B,KAAKhI,QAAL,EAA7B,GAA+C4H,cAAAA,CAAe,KAAK5H,QAAL,EAAf4H,EAAgC,KAAKL,WAArCK;;;;;CA1ElEG,CAA4BnB,gBAA5BmB;;ACpBN,SAAShC,GAAT,CAAa1M,CAAb,EAAgBoP,EAAhB,EAAoBC,EAApB,EAAwBC,EAAxB,EAA4BC,EAA5B,EAAgC;SACvBD,EAAAA,GAAK,CAACC,EAAAA,GAAKD,EAAN,KAAa,CAACtP,CAAAA,GAAIoP,EAAL,KAAYC,EAAAA,GAAKD,EAAjB,CAAb;;;IAmBRI,sBAAAA,GAAAA,UAAAA,iBAAAA,EAAAA;;;kCACQvJ,QAAQC,UAAU5B,KAAKC,KAAKqJ,MAAM;;;gJACtC3H,QAAQC,UAAU;AAAE5B,MAAAA,GAAAA,EAAKA,GAAP;AAAYC,MAAAA,GAAAA,EAAKA,GAAjB;AAAsBqJ,MAAAA,IAAAA,EAAMA;AAA5B;;QAElB9B,KAAAA,GAAAA;WAED2D,eAAepJ,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACfqJ,eAAerJ,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;QAEhBhF,KAAK,MAAA,CAAKoO,cAAc,aAAaN;QACrC9N,KAAK,MAAA,CAAKoO,cAAc,cAAcE;QAEtCC,SAAS,MAAA,CAAKH,cAAc;QAC5BG,SAAS,MAAA,CAAKF,cAAc;;aAEvBP,YAAYpI,GAAG;eACb2E,cAAc0B;UAEnB/L,KAAK8H,QAAQ,aAAa4F;UAC1B1N,KAAK8H,QAAQ,WAAW8F;kBAEhBlI;;;aAGLgI,YAAYhI,GAAG;QACpB8I;;UAEIC,MAAAA,GAAShE,KAAAA,CAAM2D,YAAN3D,CAAmBiE,qBAAnBjE;;YAETK,SACJO,GAAAA,CAAI3F,CAAAA,CAAE6B,OAAN8D,EAAeoD,MAAAA,CAAO7H,IAAtByE,EAA4BoD,MAAAA,CAAO5H,KAAnCwE,EAA0CZ,KAAAA,CAAM2B,KAAhDf,EAAuDZ,KAAAA,CAAM4B,KAA7DhB;;aAGK;;;aAGAuC,YAAY;UACfC,OAAO/F,QAAQ,aAAa4F;UAC5BG,OAAO/F,QAAQ,WAAW8F;;UAC1BnD,KAAAA,CAAMtF,kBAAkB;cACpBA,iBAAiB3F,KAAKiL,OAAOA,KAAAA,CAAMnF,QAANmF;;;;aAI9B6D,aAAa5I,GAAG;UACnBA,CAAAA,CAAEiJ,OAAFjJ,CAAU5G,MAAV4G,KAAqB,GAAG;;;;UACxB1F,KAAK8H,QAAQ,aAAa8G;UAC1B5O,KAAK8H,QAAQ,YAAY+G;kBACjBnJ;;;aAGLkJ,YAAYlJ,GAAG;UAChB6B,OAAAA,GAAU7B,CAAAA,CAAEiJ,OAAFjJ,CAAU,CAAVA,EAAa6B;;UACvBkH,MAAAA,GAAShE,KAAAA,CAAM2D,YAAN3D,CAAmBiE,qBAAnBjE;;YAETK,SACJO,GAAAA,CAAI9D,OAAJ8D,EAAaoD,MAAAA,CAAO7H,IAApByE,EAA0BoD,MAAAA,CAAO5H,KAAjCwE,EAAwCZ,KAAAA,CAAM2B,KAA9Cf,EAAqDZ,KAAAA,CAAM4B,KAA3DhB;;;aAIKwD,aAAa;UAChBhB,OAAO/F,QAAQ,aAAa8G;UAC5Bf,OAAO/F,QAAQ,YAAY+G;;UAC3BpE,KAAAA,CAAMtF,kBAAkB;cACpBA,iBAAiB3F,KAAKiL,OAAOA,KAAAA,CAAMnF,QAANmF;;;;WAIlCpF;;WAEA+I,aAAarD,YAAY,MAAA,CAAKsD;;WAC9BtJ,WAAWgG,YAAY,MAAA,CAAKqD;;;;;;;oCAGnB;UACRU,GAAAA,GAAM,CAAC,KAAKxJ,QAAL,KAAkB,KAAK8G,KAAxB,KAAkC,KAAKC,KAAL,GAAa,KAAKD,KAApD;;WACPiC,aAAanI,MAAM4D,QAAQgF,GAAAA,GAAM,GAANA,GAAY;;;;;CA5E1CX,CAA+BjC,gBAA/BiC;;ICZAY,kBAAAA,GAAAA,UAAAA,WAAAA,EAAAA;;;8BACQnK,QAAQC,UAAUmK,MAAM;;;wIAC5BpK,QAAQC;;QAER4F,KAAAA,GAAAA;WAEDwE,WAAWjK,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACXiK,SAASzD,YAAYwD,IAAAA,KAAS9N,SAAT8N,GAAqB,MAArBA,GAA8BA;QAEpDhP,KAAK,MAAA,CAAKiP,UAAU,SAAS,UAASvJ,CAAT,EAAY;QACzC8I;;YACIU;;aACC;AAHT;QAMIX,SAAS,MAAA,CAAKU,UAAU;;WAEvBlK,WAAWgG,YAAY,MAAA,CAAKkE;;;;;;;2BAG5B;UACD,KAAK/J,YAAY;aACdA,WAAW1F,KAAK;;;WAElB8F,WAAW9F,KAAK,KAAKoF;;UACtB,KAAKO,kBAAkB;aACpBA,iBAAiB3F,KAAK,MAAM,KAAK8F,QAAL;;;;;CA1BjCyJ,CAA2BpK,UAA3BoK;;ICAAI,eAAAA,GAAAA,UAAAA,WAAAA,EAAAA;;;2BACQvK,QAAQC,UAAU;;;kIACtBD,QAAQC;;WAETuK,UAAU,IAAI5L,KAAJ,CAAU,MAAA,CAAK8B,QAAL,EAAV;WACV+J,SAAS,IAAI7L,KAAJ,CAAU,CAAV;QAERiH,KAAAA,GAAAA;WAED1F,aAAaC,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;QAEdsK,eAAe,MAAA,CAAKvK,YAAY;WAE/BwK,aAAavK,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACbuK,WAAWnI,YAAY;WAEvBoI,qBAAqBxK,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACrBwK,mBAAmBpI,YAAY;WAE/BqI,eAAezK,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACfyK,aAAarI,YAAY;WACzBsI,sBAAsB;WAEtBC,aAAa3K,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACb2K,WAAWvI,YAAY;WAEvBwI,cAAc5K,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACd4K,YAAYxI,YAAY;WAExByE,UAAU7G,QAAAA,CAASC,aAATD,CAAuB,OAAvBA;WACV6G,QAAQvB,OAAO;WACfuF,qBAAqB;QAEtB7P,KAAK,MAAA,CAAK6L,SAAS,WAAW,UAASnG,CAAT,EAAY;UACxCA,CAAAA,CAAE8C,OAAF9C,KAAc,IAAI;eACblG,KAAK;;AAFhB;QAMIQ,KAAK,MAAA,CAAK6L,SAAS,QAAQC;QAE3B9L,KAAK,MAAA,CAAKuP,YAAY,aAAa,YAAkB;UAEpDhB,SAAS,MAAM,QACfvO,KAAK8H,QAAQ,WAAW,YAAkB;YACrCgI,YAAYrF,KAAAA,CAAM8E,YAAY;AAHtC;AADF;QAQIvP,KAAK,MAAA,CAAKuP,YAAY,cAAc,YAAkB;UAErDhB,SAAS,MAAM,QACfvO,KAAK8H,QAAQ,YAAY,YAAkB;YACtCgI,YAAYrF,KAAAA,CAAM8E,YAAY;AAHtC;AADF;QAQMQ,UAAAA,GAAa/K,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WAEZV,OAAO,MAAA,CAAKiL,UAAL,CAAgBrJ,OAAO;aAC5B,OAD4B;cAE3B,OAF2B;eAG1B,KAH0B;uBAIlB,MAJkB;iBAKxB;AALwB;WAQ9B5B,OAAO,MAAA,CAAKmL,YAAL,CAAkBvJ,OAAO;gBAC3B,UAD2B;aAE9B,MAF8B;cAG7B,MAH6B;cAI7B,MAAA,CAAKwJ,mBAAL,IAA4B,MAAA,CAAKN,OAAL,CAAazQ,CAAb,GAAiB,GAAjB,GAAuB,MAAvB,GAAgC,MAA5D,CAJ6B;iBAK1B,6BAL0B;oBAMvB,MANuB;cAO7B;AAP6B;WAUhC2F,OAAO,MAAA,CAAKqL,UAAL,CAAgBzJ,OAAO;gBACzB,UADyB;aAE5B,MAF4B;cAG3B,KAH2B;mBAItB,gBAJsB;cAK3B;AAL2B;WAQ9B5B,OAAO,MAAA,CAAKkL,kBAAL,CAAwBtJ,OAAO;aACpC,OADoC;cAEnC,OAFmC;cAGnC,gBAHmC;mBAI9B,KAJ8B;eAKlC,cALkC;cAMnC;AANmC;WAStC5B,OAAOyL,UAAAA,CAAW7J,OAAO;aACvB,MADuB;cAEtB,MAFsB;kBAGlB;AAHkB;mBAMjB6J,YAAY,OAAO,iBAAiB;WAE5CzL,OAAO,MAAA,CAAKsL,WAAL,CAAiB1J,OAAO;aAC7B,MAD6B;cAE5B,OAF4B;cAG5B,gBAH4B;cAI5B,WAJ4B;gBAK1B,UAL0B;WAM/B,KAN+B;aAO7B;AAP6B;gBAU1B,MAAA,CAAK0J;WAEVtL,OAAO,MAAA,CAAKuH,OAAL,CAAa3F,OAAO;eACvB,MADuB;iBAGrB,QAHqB;aAMzB,MANyB;cAOxB,CAPwB;kBAQpB,MARoB;kBASpB,MAAA,CAAK2J,kBAAL,GAA0B;AATN;QAY9B7P,KAAK,MAAA,CAAKwP,oBAAoB,aAAaQ;QAC3ChQ,KAAK,MAAA,CAAKwP,oBAAoB,cAAcQ;QAE5ChQ,KAAK,MAAA,CAAKyP,cAAc,aAAaO;QACrChQ,KAAK,MAAA,CAAKyP,cAAc,cAAcO;QAEtChQ,KAAK,MAAA,CAAK4P,aAAa,aAAaK;QACpCjQ,KAAK,MAAA,CAAK4P,aAAa,cAAcK;;aAEhCD,UAAUtK,GAAG;YACdA;UACF1F,KAAK8H,QAAQ,aAAaoI;UAC1BlQ,KAAK8H,QAAQ,aAAaoI;UAC1BlQ,KAAK8H,QAAQ,WAAWqI;UACxBnQ,KAAK8H,QAAQ,YAAYqI;;;aAGtBF,WAAWvK,GAAG;WAChBA;UACD1F,KAAK8H,QAAQ,aAAasI;UAC1BpQ,KAAK8H,QAAQ,aAAasI;UAC1BpQ,KAAK8H,QAAQ,WAAWuI;UACxBrQ,KAAK8H,QAAQ,YAAYuI;;;aAGtBF,YAAY;UACftC,OAAO/F,QAAQ,aAAaoI;UAC5BrC,OAAO/F,QAAQ,aAAaoI;UAC5BrC,OAAO/F,QAAQ,WAAWqI;UAC1BtC,OAAO/F,QAAQ,YAAYqI;;;;aAIxBE,WAAW;UACdxC,OAAO/F,QAAQ,aAAasI;UAC5BvC,OAAO/F,QAAQ,aAAasI;UAC5BvC,OAAO/F,QAAQ,WAAWuI;UAC1BxC,OAAO/F,QAAQ,YAAYuI;;;;aAIxBvE,SAAS;UACV3L,CAAAA,GAAI+B,SAAAA,CAAU,KAAKqB,KAAfrB;;UACN/B,CAAAA,KAAM,OAAO;cACTiP,QAAQrR,UAAUoC;;cAClB2K,SAASL,KAAAA,CAAM2E,OAAN3E,CAAc6F,UAAd7F;AAFjB,aAGO;aACAlH,QAAQkH,KAAAA,CAAM2E,OAAN3E,CAAcxM,QAAdwM;;;;aAIRgD,WAAW;UACdhD,KAAAA,CAAMtF,kBAAkB;cACpBA,iBAAiB3F,KAAKiL,OAAOA,KAAAA,CAAM2E,OAAN3E,CAAc6F,UAAd7F;;;;WAIlC+E,mBAAmBzE,YAAYgF;;WAC/BR,WAAWxE,YAAY,MAAA,CAAK0E;;WAC5BF,WAAWxE,YAAY,MAAA,CAAKyE;;WAC5BD,WAAWxE,YAAY,MAAA,CAAK6E;;WAC5BA,YAAY7E,YAAY,MAAA,CAAK4E;;WAE7B5K,WAAWgG,YAAY,MAAA,CAAKc;;WAC5B9G,WAAWgG,YAAY,MAAA,CAAKwE;;WAE5BlK;;aAEI6K,MAAMxK,GAAG;UACZA,CAAAA,CAAE4E,IAAF5E,CAAO2D,OAAP3D,CAAe,OAAfA,MAA4B,CAAC,GAAG;UAAI8I;;;UAElC+B,SAAAA,GAAY9F,KAAAA,CAAM+E,kBAAN/E,CAAyBiE,qBAAzBjE;;iBACY/E,CAAAA,CAAEiJ,OAAFjJ,IAAaA,CAAAA,CAAEiJ,OAAFjJ,CAAU,CAAVA,CAAbA,IAA8BA;UAApD6B,OAJQ,GAAA,IAAA,CAIRA;UAASE,OAJD,GAAA,IAAA,CAICA;;UACbhJ,CAAAA,GAAI,CAAC8I,OAAAA,GAAUgJ,SAAAA,CAAU3J,IAArB,KAA8B2J,SAAAA,CAAU1J,KAAV0J,GAAkBA,SAAAA,CAAU3J,IAA1D;UACJjI,CAAAA,GAAI,IAAI,CAAC8I,OAAAA,GAAU8I,SAAAA,CAAUzJ,GAArB,KAA6ByJ,SAAAA,CAAUxJ,MAAVwJ,GAAmBA,SAAAA,CAAUzJ,GAA1D;;UAERnI,CAAAA,GAAI,GAAG;YACL;AADN,aAEO,IAAIA,CAAAA,GAAI,CAAR,EAAW;YACZ;;;UAGFF,CAAAA,GAAI,GAAG;YACL;AADN,aAEO,IAAIA,CAAAA,GAAI,CAAR,EAAW;YACZ;;;YAGA2Q,QAAQzQ,IAAIA;YACZyQ,QAAQ3Q,IAAIA;;YAEZqM,SAASL,KAAAA,CAAM2E,OAAN3E,CAAc6F,UAAd7F;;aAGR;;;aAGA2F,KAAK1K,GAAG;UACXA,CAAAA,CAAE4E,IAAF5E,CAAO2D,OAAP3D,CAAe,OAAfA,MAA4B,CAAC,GAAG;UAAI8I;;;UAElC+B,SAAAA,GAAY9F,KAAAA,CAAMmF,WAANnF,CAAkBiE,qBAAlBjE;;kBACG/E,CAAAA,CAAEiJ,OAAFjJ,IAAaA,CAAAA,CAAEiJ,OAAFjJ,CAAU,CAAVA,CAAbA,IAA8BA;UAA3C+B,OAJO,GAAA,KAAA,CAIPA;;UACJjJ,CAAAA,GAAI,IAAI,CAACiJ,OAAAA,GAAU8I,SAAAA,CAAUzJ,GAArB,KAA6ByJ,SAAAA,CAAUxJ,MAAVwJ,GAAmBA,SAAAA,CAAUzJ,GAA1D;;UAERtI,CAAAA,GAAI,GAAG;YACL;AADN,aAEO,IAAIA,CAAAA,GAAI,CAAR,EAAW;YACZ;;;YAGA4Q,QAAQ5Q,IAAIA,CAAAA,GAAI;;YAEhBsM,SAASL,KAAAA,CAAM2E,OAAN3E,CAAc6F,UAAd7F;;aAER;;;;;;;;oCAIK;UACRtK,CAAAA,GAAI+B,SAAAA,CAAU,KAAKoD,QAAL,EAAVpD;;UAEN/B,CAAAA,KAAM,OAAO;YACXqQ,QAAAA,GAAW;eAIRjR,KAAKiE,KAAAA,CAAMiB,YAAY,UAASZ,SAAT,EAAoB;cAC5C,CAACrC,MAAAA,CAAOzB,WAAPyB,CAAmBrB,CAAAA,CAAE0D,SAAF1D,CAAnBqB,CAAD,IAAqC,CAACA,MAAAA,CAAOzB,WAAPyB,CAAmB,KAAK4N,OAAL,CAAarR,OAAb,CAAqB8F,SAArB,CAAnBrC,CAAtC,IACFrB,CAAAA,CAAE0D,SAAF1D,CAAAA,KAAiB,KAAKiP,OAAL,CAAarR,OAAb,CAAqB8F,SAArB,GAAiC;uBACvC;mBACJ;;AAJX,WAMG;;YAIC2M,UAAU;iBACLlM,OAAO,KAAK8K,OAAL,CAAarR,SAASoC;;;;aAIjCmE,OAAO,KAAK+K,MAAL,CAAYtR,SAAS,KAAKqR,OAAL,CAAarR;WAE3CsR,OAAO9Q,IAAI;UAEVkS,IAAAA,GAAQ,KAAKrB,OAAL,CAAazQ,CAAb,GAAiB,GAAjB,IAAwB,KAAKyQ,OAAL,CAAa3Q,CAAb,GAAiB,GAAzC,GAAgD,GAAhD,GAAsD;;UAC9DiS,KAAAA,GAAQ,MAAMD;;aAEbnM,OAAO,KAAKmL,YAAL,CAAkBvJ,OAAO;oBACzB,MAAM,KAAKkJ,OAAL,CAAa3Q,CAAnB,GAAuB,CAAvB,GAA2B,IADF;mBAE1B,OAAO,IAAI,KAAK2Q,OAAL,CAAazQ,CAAxB,IAA6B,CAA7B,GAAiC,IAFP;yBAGpB,KAAK0Q,MAAL,CAAYsB,WAAZ,EAHoB;gBAI7B,KAAKjB,mBAAL,GAA2B,MAA3B,GAAoCe,IAApC,GAA2C,GAA3C,GAAiDA,IAAjD,GAAwD,GAAxD,GAA8DA,IAA9D,GAAqE;AAJxC;WAOlCd,WAAWzJ,MAAM0K,YAAY,CAAC,IAAI,KAAKxB,OAAL,CAAa5Q,CAAb,GAAiB,GAAtB,IAA6B,GAA7B,GAAmC;WAEhE6Q,OAAO5Q,IAAI;WACX4Q,OAAO1Q,IAAI;qBAED,KAAK6Q,oBAAoB,QAAQ,QAAQ,KAAKH,MAAL,CAAYsB,WAAZ;WAEnD9E,QAAQtI,QAAQ,KAAK6L,OAAL,CAAanR,QAAb;aAEdqG,OAAO,KAAKuH,OAAL,CAAa3F,OAAO;yBACf,KAAKkJ,OAAL,CAAauB,WAAb,EADe;eAEzB,SAASF,IAAT,GAAgB,GAAhB,GAAsBA,IAAtB,GAA6B,GAA7B,GAAmCA,IAAnC,GAA0C,GAFjB;oBAGpB,KAAKZ,kBAAL,GAA0B,OAA1B,GAAoCa,KAApC,GAA4C,GAA5C,GAAkDA,KAAlD,GAA0D,GAA1D,GAAgEA,KAAhE,GAAwE;AAHpD;;;;CAlShCvB,CAAwBxK,UAAxBwK;;AA0SN,IAAM0B,OAAAA,GAAU,CAAC,OAAD,EAAU,KAAV,EAAiB,UAAjB,EAA6B,MAA7B,EAAqC,EAArC,CAAhB;;AAEA,SAASC,cAAT,CAAwB9K,IAAxB,EAA8BwB,CAA9B,EAAiCjJ,CAAjC,EAAoCD,CAApC,EAAuC;OAChC4H,MAAM6K,aAAa;SACjBxR,KAAKsR,SAAS,UAASG,MAAT,EAAiB;SAC/B9K,MAAM+K,WAAW,iBAAiBD,MAAjB,GAA0B,kBAA1B,GAA+CxJ,CAA/C,GAAmD,IAAnD,GAA0DjJ,CAA1D,GAA8D,OAA9D,GAAwED,CAAxE,GAA4E;AADpG;;;AAKF,SAAS4S,WAAT,CAAqBlL,IAArB,EAA2B;OACpBE,MAAM6K,aAAa;OACnB7K,MAAM+K,WAAW;OACjB/K,MAAM+K,WAAW;OACjB/K,MAAM+K,WAAW;OACjB/K,MAAM+K,WAAW;OACjB/K,MAAM+K,WAAW;;;ACpUxB,IAAME,GAAAA,GAAM;QACJ,SAAA,IAAA,CAASC,GAAT,EAAcC,KAAd,EAAqB;QACnBC,GAAAA,GAAMD,KAAAA,IAASrM;QACfuM,IAAAA,GAAOD,GAAAA,CAAIrM,aAAJqM,CAAkB,MAAlBA;SACRhH,OAAO;SACPkH,MAAM;SACNjH,OAAO6G;QACRK,qBAAqB,QAAQ,GAAG1G,YAAYwG;AAPxC,GAAA;UAUF,SAAA,MAAA,CAASG,UAAT,EAAqBL,KAArB,EAA4B;QAC5BC,GAAAA,GAAMD,KAAAA,IAASrM;QACf2M,QAAAA,GAAW3M,QAAAA,CAASC,aAATD,CAAuB,OAAvBA;aACRsF,OAAO;aACPkB,YAAYkG;QACfE,IAAAA,GAAON,GAAAA,CAAIG,oBAAJH,CAAyB,MAAzBA,EAAiC,CAAjCA;;QACT;WACGvG,YAAY4G;AADnB,MAEE,OAAOjM,CAAP,EAAU;;AAlBJ,CAAZ;ACbA,IAAMmM,kBAAAA,GAAAA,sqBAAN;;ACqBA,IAAMC,iBAAAA,GAAoB,SAApBA,iBAAoB,CAASlN,MAAT,EAAiBC,QAAjB,EAA2B;MAC7CC,YAAAA,GAAeF,MAAAA,CAAOC,QAAPD;;MAGjBpD,MAAAA,CAAOJ,OAAPI,CAAe/B,SAAAA,CAAU,CAAVA,CAAf+B,KAAgCA,MAAAA,CAAO5B,QAAP4B,CAAgB/B,SAAAA,CAAU,CAAVA,CAAhB+B,GAA+B;WAC1D,IAAIyJ,gBAAJ,CAAqBrG,MAArB,EAA6BC,QAA7B,EAAuCpF,SAAAA,CAAU,CAAVA,CAAvC;;;MAIL+B,MAAAA,CAAOO,QAAPP,CAAgBsD,YAAhBtD,GAA+B;QAE7BA,MAAAA,CAAOO,QAAPP,CAAgB/B,SAAAA,CAAU,CAAVA,CAAhB+B,KAAiCA,MAAAA,CAAOO,QAAPP,CAAgB/B,SAAAA,CAAU,CAAVA,CAAhB+B,GAA+B;UAE9DA,MAAAA,CAAOO,QAAPP,CAAgB/B,SAAAA,CAAU,CAAVA,CAAhB+B,GAA+B;eAC1B,IAAI2M,sBAAJ,CAA2BvJ,MAA3B,EAAmCC,QAAnC,EACSpF,SAAAA,CAAU,CAAVA,CADT,EACuBA,SAAAA,CAAU,CAAVA,CADvB,EACqCA,SAAAA,CAAU,CAAVA,CADrC;;;aAIF,IAAI0O,sBAAJ,CAA2BvJ,MAA3B,EAAmCC,QAAnC,EAA6CpF,SAAAA,CAAU,CAAVA,CAA7C,EAA2DA,SAAAA,CAAU,CAAVA,CAA3D;;;QAIL+B,MAAAA,CAAOO,QAAPP,CAAgB/B,SAAAA,CAAU,CAAVA,CAAhB+B,GAA+B;aAC1B,IAAI6L,mBAAJ,CAAwBzI,MAAxB,EAAgCC,QAAhC,EACW;AAAE5B,QAAAA,GAAAA,EAAKxD,SAAAA,CAAU,CAAVA,CAAP;AAAqByD,QAAAA,GAAAA,EAAKzD,SAAAA,CAAU,CAAVA,CAA1B;AAAwC8M,QAAAA,IAAAA,EAAM9M,SAAAA,CAAU,CAAVA;AAA9C,OADX;;;WAGF,IAAI4N,mBAAJ,CAAwBzI,MAAxB,EAAgCC,QAAhC,EAA0C;AAAE5B,MAAAA,GAAAA,EAAKxD,SAAAA,CAAU,CAAVA,CAAP;AAAqByD,MAAAA,GAAAA,EAAKzD,SAAAA,CAAU,CAAVA;AAA1B,KAA1C;;;MAGL+B,MAAAA,CAAOC,QAAPD,CAAgBsD,YAAhBtD,GAA+B;WAC1B,IAAIoK,gBAAJ,CAAqBhH,MAArB,EAA6BC,QAA7B;;;MAGLrD,MAAAA,CAAOuQ,UAAPvQ,CAAkBsD,YAAlBtD,GAAiC;WAC5B,IAAIuN,kBAAJ,CAAuBnK,MAAvB,EAA+BC,QAA/B,EAAyC,EAAzC;;;MAGLrD,MAAAA,CAAOwQ,SAAPxQ,CAAiBsD,YAAjBtD,GAAgC;WAC3B,IAAIgJ,iBAAJ,CAAsB5F,MAAtB,EAA8BC,QAA9B;;;SAGF;AAzCT,CAAA;;ACRA,SAASoN,qBAAT,CAA+BC,QAA/B,EAAyC;aAC5BA,UAAU,OAAO;;;AAG9B,IAAA,uBAAA,GAAepK,MAAAA,CAAOmK,qBAAPnK,IACXA,MAAAA,CAAOqK,2BADIrK,IAEXA,MAAAA,CAAOsK,wBAFItK,IAGXA,MAAAA,CAAOuK,sBAHIvK,IAIXA,MAAAA,CAAOwK,uBAJIxK,IAKXmK,qBALJ;;ICDMM,WAAAA,GAAAA,YAAAA;yBACU;;SACPC,oBAAoBxN,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WAClBV,OAAO,KAAKkO,iBAAL,CAAuBtM,OAAO;uBACzB,iBADyB;WAErC,CAFqC;YAGpC,CAHoC;eAIjC,MAJiC;cAKlC,MALkC;eAMjC,CANiC;wBAOxB,qBAPwB;kBAQ9B;AAR8B;QAWxCuM,eAAe,KAAKD;SACnBA,kBAAkBtM,MAAMS,WAAW;SAEnC5B,aAAaC,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;WACXV,OAAO,KAAKS,UAAL,CAAgBmB,OAAO;gBACzB,OADyB;eAE1B,MAF0B;cAG3B,MAH2B;eAI1B,CAJ0B;wBAKjB,sDALiB;kBAMvB;AANuB;aAU5BwM,KAAK3H,YAAY,KAAKyH;aACtBE,KAAK3H,YAAY,KAAKhG;;QAEzB0F,KAAAA,GAAQ;;QACVzK,KAAK,KAAKwS,mBAAmB,SAAS,YAAW;YAC7CG;AADR;;;;;2BAKK;UACClI,KAAAA,GAAQ;;WAET+H,kBAAkBtM,MAAM0M,UAAU;WAElC7N,WAAWmB,MAAM0M,UAAU;WAC3B7N,WAAWmB,MAAM2M,UAAU;WAE3B9N,WAAWmB,MAAM4M,kBAAkB;WAEnCC;aAEEC,MAAM,YAAW;cAChBR,kBAAkBtM,MAAM2M,UAAU;cAClC9N,WAAWmB,MAAM2M,UAAU;cAC3B9N,WAAWmB,MAAM4M,kBAAkB;AAH3C;;;;2BAUK;UACCrI,KAAAA,GAAQ;;UAERkI,IAAAA,GAAO,SAAPA,IAAO,GAAW;cAChB5N,WAAWmB,MAAM0M,UAAU;cAC3BJ,kBAAkBtM,MAAM0M,UAAU;YAEpC/E,OAAOpD,KAAAA,CAAM1F,YAAY,uBAAuB4N;YAChD9E,OAAOpD,KAAAA,CAAM1F,YAAY,iBAAiB4N;YAC1C9E,OAAOpD,KAAAA,CAAM1F,YAAY,kBAAkB4N;AANjD;;UASI3S,KAAK,KAAK+E,YAAY,uBAAuB4N;UAC7C3S,KAAK,KAAK+E,YAAY,iBAAiB4N;UACvC3S,KAAK,KAAK+E,YAAY,kBAAkB4N;WAEvCH,kBAAkBtM,MAAM2M,UAAU;WAElC9N,WAAWmB,MAAM2M,UAAU;WAC3B9N,WAAWmB,MAAM4M,kBAAkB;;;;6BAGjC;WACF/N,WAAWmB,MAAMU,OAAOkB,MAAAA,CAAOmL,UAAPnL,GAAoB,CAApBA,GAAwB/B,GAAAA,CAAImN,QAAJnN,CAAa,KAAKhB,UAAlBgB,IAAgC,CAAxD+B,GAA4D;WACpF/C,WAAWmB,MAAMY,MAAMgB,MAAAA,CAAOqL,WAAPrL,GAAqB,CAArBA,GAAyB/B,GAAAA,CAAIqN,SAAJrN,CAAc,KAAKhB,UAAnBgB,IAAiC,CAA1D+B,GAA8D;;;;CAnFxFyK;;;;ACaNpB,GAAAA,CAAIkC,MAAJlC,CAAWmC,UAAXnC;AAGA,IAAMoC,aAAAA,GAAgB,IAAtB;AAEA,IAAMC,aAAAA,GAAgB,EAAtB;AAGA,IAAMC,mBAAAA,GAAsB,EAA5B;AAEA,IAAMC,2BAAAA,GAA8B,SAApC;;AAEA,IAAMC,sBAAAA,GAA0B,YAAW;MACrC;WACK,CAAC,CAAC7L,MAAAA,CAAO8L;AADlB,IAEE,OAAOlO,CAAP,EAAU;WACH;;AAJqB,CAAA,EAAhC;;AAQA,IAAImO,aAAAA,GAAAA,KAAAA,CAAJ;AAGA,IAAIC,eAAAA,GAAkB,IAAtB;AAGA,IAAIC,kBAAAA,GAAAA,KAAAA,CAAJ;AAGA,IAAIpB,IAAAA,GAAO,KAAX;AAGA,IAAMqB,YAAAA,GAAe,EAArB;;AA2BA,IAAMC,GAAAA,GAAM,SAANA,GAAM,CAAShN,IAAT,EAAe;MACnBwD,KAAAA,GAAQ;;MAEVtD,MAAAA,GAASF,IAAAA,IAAQ;OAMhBlC,aAAaC,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;OACbkP,OAAOlP,QAAAA,CAASC,aAATD,CAAuB,IAAvBA;OACPD,WAAWgG,YAAY,KAAKmJ;MAE7B3F,SAAS,KAAKxJ,YAAYwO;OAMzBY,YAAY;OAEZC,gBAAgB;OAMhBC,sBAAsB;OAoBtBC,yCAAyC;OAEzCC,cAAc;WAGV/S,MAAAA,CAAO2G,QAAP3G,CAAgB2F,MAAhB3F,EAAwB;gBACnB,KADmB;eAEpB,IAFoB;WAGxByS,GAAAA,CAAIO;AAHoB,GAAxBhT;WAMAA,MAAAA,CAAO2G,QAAP3G,CAAgB2F,MAAhB3F,EAAwB;eACpB2F,MAAAA,CAAOsN,SADa;cAErBtN,MAAAA,CAAOsN;AAFc,GAAxBjT;;MAKL,CAACA,MAAAA,CAAOzB,WAAPyB,CAAmB2F,MAAAA,CAAOuN,IAA1BlT,GAAiC;QAEhC2F,MAAAA,CAAOwN,QAAQ;aACVD,KAAKC,SAASxN,MAAAA,CAAOwN;;AAHhC,SAKO;WACED,OAAO;AAAEC,MAAAA,MAAAA,EAAQjB;AAAV;;;MAGZlS,MAAAA,CAAOzB,WAAPyB,CAAmB2F,MAAAA,CAAOyN,MAA1BpT,KAAqC2F,MAAAA,CAAO0N,UAAU;iBAC3CvL,KAAK;;;SAIbwL,YAAYtT,MAAAA,CAAOzB,WAAPyB,CAAmB2F,MAAAA,CAAOyN,MAA1BpT,KAAqC2F,MAAAA,CAAO2N;;MAE3D3N,MAAAA,CAAOsN,SAAPtN,IAAoB3F,MAAAA,CAAOzB,WAAPyB,CAAmB2F,MAAAA,CAAO4N,UAA1BvT,GAAuC;WACtDuT,aAAa;;;MAMlBC,eAAAA,GACFrB,sBAAAA,IACAC,YAAAA,CAAaqB,OAAbrB,CAAqBsB,mBAAAA,CAAoB,IAApBA,EAA0B,SAA1BA,CAArBtB,MAA+D;MAE7DuB,kBAAAA,GAAAA,KAAAA;MACAC,QAAAA,GAAAA,KAAAA;SAEGC,iBAAiB;YAOZ;WACD,SAAA,MAAA,GAAW;eACPlO,MAAAA,CAAOyN;;AAFV;gBAMI;WACL,SAAA,MAAA,GAAW;eACPzN,MAAAA,CAAO4N;;AAFN;eAUD;WACJ,SAAA,MAAA,GAAW;eACP5N,MAAAA,CAAOsN;;AAFP;gBAUC;WACL,SAAA,MAAA,GAAW;eACPtN,MAAAA,CAAOmO;;AAFN;YAUJ;WACD,SAAA,MAAA,GAAW;YACV7K,KAAAA,CAAMmK,QAAQ;iBACTnK,KAAAA,CAAM8K,OAAN9K,GAAgBkK;;;eAGlBxN,MAAAA,CAAOuN,IAAPvN,CAAYwN;AANf,OAAA;WASD,SAAA,MAAA,CAAShW,CAAT,EAAY;YACX8L,KAAAA,CAAMmK,QAAQ;gBACVW,UAAUZ,SAAShW;AAD3B,eAEO;iBACE+V,KAAKC,SAAShW;;;6BAEF;;cACf6W;;AAhBF;WAwBD;WACA,SAAA,MAAA,GAAW;eACPrO,MAAAA,CAAO2C;AAFX,OAAA;WAIA,SAAA,MAAA,CAASnL,CAAT,EAAY;eACRmL,QAAQnL;iBACN8L,OAAO9L;;AANb;UAeD;WACC,SAAA,MAAA,GAAW;eACPwI,MAAAA,CAAOsO;AAFZ,OAAA;WAIC,SAAA,MAAA,CAAS9W,CAAT,EAAY;eAER8W,OAAO9W;;YACVyW,UAAU;mBACH5J,YAAYrE,MAAAA,CAAOsO;;;AAR5B;YAiBE;WACD,SAAA,MAAA,GAAW;eACPtO,MAAAA,CAAOuO;AAFV,OAAA;WAID,SAAA,MAAA,CAAS/W,CAAT,EAAY;eACR+W,SAAS/W;;YACZwI,MAAAA,CAAOuO,QAAQ;cACbnH,SAAS9D,KAAAA,CAAMyJ,MAAMD,GAAAA,CAAI0B;AAD/B,eAEO;cACD7F,YAAYrF,KAAAA,CAAMyJ,MAAMD,GAAAA,CAAI0B;;;aAK7BC;;YAEDnL,KAAAA,CAAMoL,eAAe;gBACjBA,cAAcrK,YAAY7M,CAAAA,GAAIsV,GAAAA,CAAI6B,SAARnX,GAAoBsV,GAAAA,CAAI8B;;;AAjBtD;UA0BF;WACC,SAAA,MAAA,GAAW;eACP5O,MAAAA,CAAOuN;;AAFZ;qBAWW;WAEV,SAAA,MAAA,GAAW;eACPM;AAHM,OAAA;WAKV,SAAA,MAAA,CAASlM,IAAT,EAAe;YACd6K,wBAAwB;4BACR7K;;cACdA,MAAM;gBACJ9I,KAAK8H,QAAQ,UAAUqN;AAD7B,iBAEO;gBACDtH,OAAO/F,QAAQ,UAAUqN;;;uBAElBa,QAAQd,mBAAAA,CAAoBzK,KAApByK,EAA2B,SAA3BA,GAAuCpM;;;AAbjD;;;MAoBjBtH,MAAAA,CAAOzB,WAAPyB,CAAmB2F,MAAAA,CAAOyN,MAA1BpT,GAAmC;SAChCkU,SAASvO,MAAAA,CAAOuO,MAAPvO,IAAiB;QAE3BoH,SAAS,KAAKxJ,YAAYkP,GAAAA,CAAIgC;QAC9B3G,eAAe,KAAKvK,YAAY;;QAGhC4O,wBAAwB;UACtBqB,iBAAiB;cACbA,kBAAkB;YAElBkB,QAAAA,GAAWtC,YAAAA,CAAaqB,OAAbrB,CAAqBsB,mBAAAA,CAAoB,IAApBA,EAA0B,KAA1BA,CAArBtB;;YAEbsC,UAAU;iBACLxB,OAAOyB,IAAAA,CAAKC,KAALD,CAAWD,QAAXC;;;;;SAKfN,gBAAgB7Q,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;SAChB6Q,cAAcrK,YAAYyI,GAAAA,CAAI8B;QAC/BxH,SAAS,KAAKsH,eAAe5B,GAAAA,CAAIoC;;QACjClP,MAAAA,CAAOmO,YAAY;UACjB/G,SAAS,KAAKsH,eAAe5B,GAAAA,CAAIqC;WAChCvR,WAAWwR,aAAa,KAAKV,eAAe,KAAK9Q,UAAL,CAAgByR,UAAhB,CAA2B,CAA3B;AAFnD,WAGO;UACDjI,SAAS,KAAKsH,eAAe5B,GAAAA,CAAIwC;WAChC1R,WAAWgG,YAAY,KAAK8K;;;QAG/B7V,KAAK,KAAK6V,eAAe,SAAS,YAAW;YACzCH,SAAS,CAACjL,KAAAA,CAAMiL;AADxB;AA9BF,SAkCO;QACDvO,MAAAA,CAAOuO,MAAPvO,KAAkBjG,WAAW;aACxBwU,SAAS;;;QAGZgB,YAAAA,GAAe1R,QAAAA,CAAS2R,cAAT3R,CAAwBmC,MAAAA,CAAOsO,IAA/BzQ;QACjBuJ,SAASmI,cAAc;eAEhBE,MAAAA,CAAOnM,KAAPmM,EAAcF,YAAdE;;QAELC,YAAAA,GAAe,SAAfA,YAAe,CAASnR,CAAT,EAAY;QAC7B8I;YACIkH,SAAS,CAACjL,KAAAA,CAAMiL;aACf;AAHT;;QAMInH,SAAS,KAAK2F,MAAMD,GAAAA,CAAI0B;QAExBpH,SAAS6G,UAAU;QACnBpV,KAAKoV,UAAU,SAASyB;;QAExB,CAAC1P,MAAAA,CAAOuO,QAAQ;WACbA,SAAS;;;;MAIdvO,MAAAA,CAAOsN,WAAW;QAChBjT,MAAAA,CAAOzB,WAAPyB,CAAmB2F,MAAAA,CAAOyN,MAA1BpT,GAAmC;UACjCsS,iBAAiB;6BACE9O,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;YACjBuJ,SAASwF,oBAAoBR;YAC7BhF,SAASwF,oBAAoBE,GAAAA,CAAI6C;iBAC5BpE,KAAK3H,YAAYgJ;0BACR;;;yBAIDhJ,YAAY,KAAKhG;UAGhCwJ,SAAS,KAAKxJ,YAAYkP,GAAAA,CAAI8C;;;QAKhC,CAAC,KAAKnC,QAAQ;eACPnK,OAAOtD,MAAAA,CAAO2C;;;;OAItBkN,kBAAkB,YAAW;UAC1BC;AADR;;MAIIjX,KAAK8H,QAAQ,UAAU,KAAKkP;MAC5BhX,KAAK,KAAKkU,MAAM,uBAAuB,KAAK8C;MAC5ChX,KAAK,KAAKkU,MAAM,iBAAiB,KAAK8C;MACtChX,KAAK,KAAKkU,MAAM,kBAAkB,KAAK8C;OACtCpB;;MAEDzO,MAAAA,CAAO2N,WAAW;oBACJ;;;uBAGG,SAAA,kBAAA,GAAW;QAC1BnB,sBAAAA,IAA0BC,YAAAA,CAAaqB,OAAbrB,CAAqBsB,mBAAAA,CAAoBzK,KAApByK,EAA2B,SAA3BA,CAArBtB,MAAgE,QAAQ;mBACvFoC,QAAQd,mBAAAA,CAAoBzK,KAApByK,EAA2B,KAA3BA,GAAmCiB,IAAAA,CAAKe,SAALf,CAAe1L,KAAAA,CAAM0M,aAAN1M,EAAf0L;;AAF5D;;OAOKiB,+BAA+BjC;;WAE3BkC,aAAa;QACdC,IAAAA,GAAO7M,KAAAA,CAAM8K,OAAN9K;;SACRX,SAAS;WACPkJ,MAAM,YAAW;WACjBlJ,SAAS;AADhB;;;MAKE,CAAC3C,MAAAA,CAAOyN,QAAQ;;;AA5WtB,CAAA;;AAiXAX,GAAAA,CAAIsD,UAAJtD,GAAiB,YAAW;SACnB,CAACtB;SACDpT,KAAKyU,cAAc,UAASwD,GAAT,EAAc;QAClCzS,WAAWmB,MAAM0M,UAAUD,IAAAA,GAAO,MAAPA,GAAgB;AADjD;AAFF,CAAAsB;;AAOAA,GAAAA,CAAI8C,gBAAJ9C,GAAuB,GAAvBA;AACAA,GAAAA,CAAI6C,0BAAJ7C,GAAiC,IAAjCA;AACAA,GAAAA,CAAIgC,UAAJhC,GAAiB,MAAjBA;AACAA,GAAAA,CAAIwD,oBAAJxD,GAA2B,IAA3BA;AACAA,GAAAA,CAAIyD,cAAJzD,GAAqB,oBAArBA;AACAA,GAAAA,CAAI0B,YAAJ1B,GAAmB,QAAnBA;AACAA,GAAAA,CAAIoC,kBAAJpC,GAAyB,cAAzBA;AACAA,GAAAA,CAAIqC,eAAJrC,GAAsB,WAAtBA;AACAA,GAAAA,CAAIwC,kBAAJxC,GAAyB,cAAzBA;AACAA,GAAAA,CAAI0D,UAAJ1D,GAAiB,MAAjBA;AAEAA,GAAAA,CAAIO,aAAJP,GAAoB,GAApBA;AACAA,GAAAA,CAAI8B,WAAJ9B,GAAkB,gBAAlBA;AACAA,GAAAA,CAAI6B,SAAJ7B,GAAgB,eAAhBA;;AAEAA,GAAAA,CAAI2D,eAAJ3D,GAAsB,UAASvO,CAAT,EAAY;MAC5BV,QAAAA,CAASqF,aAATrF,CAAuBsF,IAAvBtF,KAAgC,MAAhCA,KACDU,CAAAA,CAAEmS,KAAFnS,KAAY8N,aAAZ9N,IAA6BA,CAAAA,CAAE8C,OAAF9C,KAAc8N,aAD1CxO,GAC0D;QACxDuS;;AAHR,CAAAtD;;AAMAlO,GAAAA,CAAI/F,IAAJ+F,CAAS+B,MAAT/B,EAAiB,SAAjBA,EAA4BkO,GAAAA,CAAI2D,eAAhC7R,EAAiD,KAAjDA;AAEAvE,MAAAA,CAAO8C,MAAP9C,CACEyS,GAAAA,CAAIhV,SADNuC,EAIE;OAyBO,SAAA,GAAA,CAASoD,MAAT,EAAiBC,QAAjB,EAA2B;WACvBiT,IAAAA,CACL,IADKA,EAELlT,MAFKkT,EAGLjT,QAHKiT,EAIL;mBACe9Y,KAAAA,CAAMC,SAAND,CAAgBI,KAAhBJ,CAAsBQ,IAAtBR,CAA2BS,SAA3BT,EAAsC,CAAtCA;AADf,KAJK8Y;AA1BX,GAAA;YAwDY,SAAA,QAAA,CAASlT,MAAT,EAAiBC,QAAjB,EAA2B;WAC5BiT,IAAAA,CACL,IADKA,EAELlT,MAFKkT,EAGLjT,QAHKiT,EAIL;aACS;AADT,KAJKA;AAzDX,GAAA;UAwEU,SAAA,MAAA,CAASC,UAAT,EAAqB;SAEtB7D,KAAK8D,YAAYD,UAAAA,CAAWE;;SAC5B7D,cAAczK,OAAO,KAAKyK,aAAL,CAAmB/K,OAAnB,CAA2B0O,UAA3B,GAAwC;;QAC5DtN,KAAAA,GAAQ;;WACPuI,MAAM,YAAW;YAChB4C;AADR;AA7EJ,GAAA;WAuFW,SAAA,OAAA,GAAW;QACd,KAAKhB,QAAQ;YACT,IAAInR,KAAJ,CACJ,0DACA,uDAFI;;;QAMJ,KAAKgR,WAAW;yBACCuD,YAAY,KAAKjT;;;QAGhC0F,KAAAA,GAAQ;;WACPlL,KAAK,KAAK4U,WAAW,UAAS+D,SAAT,EAAoB;YACxCC,aAAaD;AADrB;QAIIrK,OAAO/F,QAAQ,WAAWmM,GAAAA,CAAI2D,iBAAiB;oBAEnC;AA1GpB,GAAA;aAqHa,SAAA,SAAA,CAASnC,IAAT,EAAe;QAGpB,KAAKtB,SAAL,CAAesB,IAAf,MAAyBvU,WAAW;YAChC,IAAIuC,KAAJ,CAAU,iDACd,SADc,GACFgS,IADE,GACK,GADf;;;QAIF2C,YAAAA,GAAe;AAAE3C,MAAAA,IAAAA,EAAMA,IAAR;AAAcb,MAAAA,MAAAA,EAAQ;AAAtB;iBAKRH,YAAY,KAAKA;;QAG1B,KAAKC,IAAL,SACGA,KAAK2D,OADR,SAEG3D,KAAK2D,QAAQ5C,OAAO;mBAEZC,SAAS,KAAKhB,IAAL,CAAU2D,OAAV,CAAkB5C,IAAlB,EAAwBC;mBAGjChB,OAAO,KAAKA,IAAL,CAAU2D,OAAV,CAAkB5C,IAAlB;;;QAGhB+B,GAAAA,GAAM,IAAIvD,GAAJ,CAAQmE,YAAR;SACPjE,UAAUsB,QAAQ+B;QAEjBc,EAAAA,GAAK1B,MAAAA,CAAO,IAAPA,EAAaY,GAAAA,CAAIzS,UAAjB6R;QACPrI,SAAS+J,IAAI;WACVd;AApJX,GAAA;gBA4JgB,SAAA,YAAA,CAASe,MAAT,EAAiB;SACxBrE,KAAK8D,YAAYO,MAAAA,CAAOxT,UAAPwT,CAAkBC;;WAEjC,KAAKrE,SAAL,CAAeoE,MAAAA,CAAO9C,IAAtB;;QAGH,KAAKf,IAAL,SACGA,KAAK2D,OADR,SAEG3D,KAAK2D,QAAQE,MAAAA,CAAO9C,OAAO;aACzB,KAAKf,IAAL,CAAU2D,OAAV,CAAkBE,MAAAA,CAAO9C,IAAzB;;;oBAGO8C;;QAEV9N,KAAAA,GAAQ;;WAEPlL,KAAKgZ,MAAAA,CAAOpE,WAAW,UAAS+D,SAAT,EAAoB;aACzCC,aAAaD;AADtB;WAIOlF,MAAM,YAAW;YAChB4C;AADR;AAhLJ,GAAA;QAwLQ,SAAA,IAAA,GAAW;SACVF,SAAS;AAzLlB,GAAA;SA+LS,SAAA,KAAA,GAAW;SACXA,SAAS;AAhMlB,GAAA;QAsMQ,SAAA,IAAA,GAAW;SACV3Q,WAAWmB,MAAM0M,UAAU;AAvMpC,GAAA;QA6MQ,SAAA,IAAA,GAAW;SACV7N,WAAWmB,MAAM0M,UAAU;AA9MpC,GAAA;YAkNY,SAAA,QAAA,GAAW;QAEb0E,IAAAA,GAAO,KAAK/B,OAAL;;QACT+B,IAAAA,CAAKvC,YAAY;UACbjO,GAAAA,GAAMf,GAAAA,CAAI0S,SAAJ1S,CAAcuR,IAAAA,CAAKpD,IAAnBnO,EAAyBe;UACjCtI,CAAAA,GAAI;aAEDe,KAAK+X,IAAAA,CAAKpD,IAALoD,CAAUd,YAAY,UAASkC,IAAT,EAAe;YAC3C,EAAEpB,IAAAA,CAAK7C,SAAL6C,IAAkBoB,IAAAA,KAASpB,IAAAA,CAAKqB,UAAlC,GAA+C;eAC5C5S,GAAAA,CAAIqN,SAAJrN,CAAc2S,IAAd3S;;AAFT;;UAMI+B,MAAAA,CAAOqL,WAAPrL,GAAqBhB,GAArBgB,GAA2B2L,mBAA3B3L,GAAiDtJ,GAAG;YAClD+P,SAAS+I,IAAAA,CAAKvS,YAAYkP,GAAAA,CAAIyD;aAC7BxD,KAAKhO,MAAM6D,SAASjC,MAAAA,CAAOqL,WAAPrL,GAAqBhB,GAArBgB,GAA2B2L,mBAA3B3L,GAAiD;AAF5E,aAGO;YACDgI,YAAYwH,IAAAA,CAAKvS,YAAYkP,GAAAA,CAAIyD;aAChCxD,KAAKhO,MAAM6D,SAAS;;;;QAIzBuN,IAAAA,CAAKsB,iBAAiB;aACjB5F,MAAM,YAAW;aACjB4F,gBAAgB1S,MAAM6D,SAASuN,IAAAA,CAAKpD,IAALoD,CAAUuB,YAAVvB,GAAyB;AAD/D;;;QAKEA,IAAAA,CAAKzB,eAAe;WACjBA,cAAc3P,MAAM4D,QAAQwN,IAAAA,CAAKxN,KAALwN,GAAa;;AA/OpD,GAAA;qBAmPqB9V,MAAAA,CAAOsX,QAAPtX,CAAgB,YAAW;SAAOoU;AAAlC,GAAApU,EAAiD,EAAjDA,CAnPrB;YA+PY,SAAA,QAAA,GAAW;QACfA,MAAAA,CAAOzB,WAAPyB,CAAmBqS,aAAnBrS,GAAmC;sBACrB,IAAI+Q,WAAJ;oBACFxN,WAAWyG,YAAYuN;;;QAGnC,KAAKnE,QAAQ;YACT,IAAInR,KAAJ,CAAU,gDAAV;;;QAGFgH,KAAAA,GAAQ;;WAEPlL,KAAKP,KAAAA,CAAMC,SAAND,CAAgBI,KAAhBJ,CAAsBQ,IAAtBR,CAA2BS,SAA3BT,GAAuC,UAAS4F,MAAT,EAAiB;UAC9D6F,KAAAA,CAAM4J,mBAAN5J,CAA0B3L,MAA1B2L,KAAqC,GAAG;oBAC9BA;;;UAEVA,KAAAA,CAAM4J,mBAAN5J,CAA0BpB,OAA1BoB,CAAkC7F,MAAlC6F,MAA8C,CAAC,GAAG;cAC9C4J,oBAAoB/K,KAAK1E;;AALnC;;QASI,KAAK6P,WAAW;eAET,MAAM,KAAK3K;;AAtR1B,GAAA;WA8RW,SAAA,OAAA,GAAW;QACd0N,GAAAA,GAAM;;WACHA,GAAAA,CAAI5C,QAAQ;YACX4C,GAAAA,CAAI5C;;;WAEL4C;AAnSX,GAAA;iBA2SiB,SAAA,aAAA,GAAW;QAClBvV,QAAAA,GAAW,KAAKyS;aACbgB,SAAS,KAAKA;;QAGnB,KAAKrB,mBAAL,CAAyBvV,MAAzB,GAAkC,GAAG;eAC9B6V,SAAS,KAAKA;;UAEnB,CAAC1S,QAAAA,CAAS+W,YAAY;iBACfA,aAAa;;;eAGfA,WAAW,KAAKrE,UAAUsE,gBAAAA,CAAiB,IAAjBA;;;aAG5BZ,UAAU;WACZ9Y,KAAK,KAAK4U,WAAW,UAAS7I,OAAT,EAAkBxL,GAAlB,EAAuB;eACxCuY,QAAQvY,OAAOwL,OAAAA,CAAQ6L,aAAR7L;AAD1B;WAIOrJ;AA/TX,GAAA;QAkUQ,SAAA,IAAA,GAAW;QACX,CAAC,KAAKyS,IAAL,CAAUsE,YAAY;WACpBtE,KAAKsE,aAAa;;;SAGpBtE,KAAKsE,WAAW,KAAKrE,UAAUsE,gBAAAA,CAAiB,IAAjBA;uBACjB,MAAM;SACpB7B;AAzUT,GAAA;UA4UU,SAAA,MAAA,CAAS8B,UAAT,EAAqB;QACvB,CAAC,KAAKxE,IAAL,CAAUsE,YAAY;WAEpBtE,KAAKsE,aAAa;WAClBtE,KAAKsE,WAAWtF,+BAA+BuF,gBAAAA,CAAiB,IAAjBA,EAAuB,IAAvBA;;;SAGjDvE,KAAKsE,WAAWE,cAAcD,gBAAAA,CAAiB,IAAjBA;SAC9BtE,SAASuE;oBACE,MAAMA,YAAY;SAC7B9B;AAtVT,GAAA;UAyVU,SAAA,MAAA,CAASI,GAAT,EAAc;WACbjY,KAAK,KAAK6U,eAAe,UAAS2D,UAAT,EAAqB;UAE/C,CAAC,KAAKxC,OAAL,GAAeb,IAAf,CAAoBsE,YAAY;mBACxBlO,SAASiN,UAAAA,CAAWjT;AADjC,aAEO;yBACY0S,GAAAA,IAAO,KAAKjC,OAAL,IAAgBwC;;;UAItCA,UAAAA,CAAW5S,kBAAkB;mBACpBA,iBAAiB3F,KAAKuY,YAAYA,UAAAA,CAAWzS,QAAXyS;;AAVjD,OAYG;WAEIxY,KAAK,KAAK4U,WAAW,UAASoE,MAAT,EAAiB;aACpC/C,OAAO+C;AADhB;;QAII,CAACf,KAAK;yBACW,KAAKjC,OAAL,IAAgB;;AA7WzC,GAAA;UAiXU,SAAA,MAAA,CAASwC,UAAT,EAAqB;QACrB/P,IAAAA,GAAO,KAAKuM,WAAL,CAAiBzV,MAAjB,KAA4B;;SACpCyV,YAAYjL,KAAKyO;;QAClB/P,MAAM;qBACO,KAAKuM;;AArX1B,GAAA;iBAyXiB,SAAA,aAAA,GAAW;WACjBhV,KAAK,KAAK6U,eAAe,UAAS2D,UAAT,EAAqB;iBACxC1S;AADb;WAGO9F,KAAK,KAAK4U,WAAW,UAASoE,MAAT,EAAiB;aACpClT;AADT;;AA7XJ,CAJF7D;;AAiZA,SAASoV,MAAT,CAAgBY,GAAhB,EAAqB2B,MAArB,EAA6BC,QAA7B,EAAuC;MAC/Bd,EAAAA,GAAKtT,QAAAA,CAASC,aAATD,CAAuB,IAAvBA;;MACPmU,QAAQ;OACPpO,YAAYoO;;;MAGbC,UAAU;QACRlF,KAAKqC,aAAa+B,IAAIc;AAD5B,SAEO;QACDlF,KAAKnJ,YAAYuN;;;MAEnB1C;SACG0C;;;AAGT,SAASe,eAAT,CAAyB7B,GAAzB,EAA8B;MACxB3J,OAAO/F,QAAQ,UAAU0P,GAAAA,CAAIR;;MAE7BQ,GAAAA,CAAIJ,8BAA8B;QAChCvJ,OAAO/F,QAAQ,UAAU0P,GAAAA,CAAIJ;;;;AAIrC,SAASkC,kBAAT,CAA4B9B,GAA5B,EAAiC+B,QAAjC,EAA2C;MACnChO,GAAAA,GAAMiM,GAAAA,CAAIgC,eAAJhC,CAAoBA,GAAAA,CAAIgC,eAAJhC,CAAoB9L,aAAxC8L;;MAER+B,UAAU;QACR/N,YAAYD,GAAAA,CAAIhI,KAAJgI,GAAY;AAD9B,SAEO;QACDC,YAAYD,GAAAA,CAAIhI;;;;AAIxB,SAASkW,iBAAT,CAA2BjC,GAA3B,EAAgCc,EAAhC,EAAoCP,UAApC,EAAgD;aACnCE,OAAOK;aACPoB,QAAQlC;SAEZlT,OAAOyT,YAA+C;aAKlD,SAAA,OAAA,CAAS5M,QAAT,EAAkB;UACrB1L,SAAAA,CAAUX,MAAVW,GAAmB,GAAG;YAClBka,WAAAA,GAAc5B,UAAAA,CAAWE,IAAXF,CAAgB6B;mBACzBC;eAEJ/B,IAAAA,CACLN,GADKM,EAELC,UAAAA,CAAWnT,MAFNkT,EAGLC,UAAAA,CAAWlT,QAHNiT,EAIL;kBACU6B,WADV;uBAEe,CAACnY,MAAAA,CAAOP,OAAPO,CAAe/B,SAAf+B,CAAD;AAFf,SAJKsW;;;UAWLtW,MAAAA,CAAOJ,OAAPI,CAAe2J,QAAf3J,KAA2BA,MAAAA,CAAO5B,QAAP4B,CAAgB2J,QAAhB3J,GAA0B;YACjDmY,YAAAA,GAAc5B,UAAAA,CAAWE,IAAXF,CAAgB6B;mBACzBC;eAEJ/B,IAAAA,CACLN,GADKM,EAELC,UAAAA,CAAWnT,MAFNkT,EAGLC,UAAAA,CAAWlT,QAHNiT,EAIL;kBACU6B,YADV;uBAEe,CAACxO,QAAD;AAFf,SAJK2M;;AAzBgD,KAAA;UA0CrD,SAAA,IAAA,CAASrC,KAAT,EAAe;iBACRwC,KAAK6B,kBAAkBA,kBAAkBtO,YAAYiK;aACzDsC;AA5CkD,KAAA;YAmDnD,SAAA,MAAA,GAAW;iBACN2B,MAAMK,OAAOhC;;aACjBA;AArDkD,KAAA;YA4DnD,SAAA,MAAA,GAAW;iBACN2B,MAAMG,OAAO9B;;aACjBA;;AA9DkD;;MAmEzDA,UAAAA,YAAsB5J,wBAAwB;QAC1C6L,GAAAA,GAAM,IAAI3M,mBAAJ,CAAwB0K,UAAAA,CAAWnT,MAAnC,EAA2CmT,UAAAA,CAAWlT,QAAtD,EACV;AAAE5B,MAAAA,GAAAA,EAAK8U,UAAAA,CAAW3L,KAAlB;AAAyBlJ,MAAAA,GAAAA,EAAK6U,UAAAA,CAAW1L,KAAzC;AAAgDE,MAAAA,IAAAA,EAAMwL,UAAAA,CAAWzL;AAAjE,KADU;WAGL/M,KAAK,CAAC,eAAD,EAAkB,UAAlB,EAA8B,gBAA9B,EAAgD,MAAhD,EAAwD,KAAxD,EAA+D,KAA/D,GAAuE,UAAS0a,MAAT,EAAiB;UAC5FC,EAAAA,GAAKnC,UAAAA,CAAWkC,MAAXlC;UACLoC,EAAAA,GAAKH,GAAAA,CAAIC,MAAJD;;iBACAC,UAAUD,GAAAA,CAAIC,MAAJD,CAAAA,GAAc,YAAW;YACtC9Z,IAAAA,GAAOlB,KAAAA,CAAMC,SAAND,CAAgBI,KAAhBJ,CAAsBQ,IAAtBR,CAA2BS,SAA3BT;WACVoB,MAAM4Z,KAAK9Z;eACPga,EAAAA,CAAG9Z,KAAH8Z,CAASnC,UAATmC,EAAqBha,IAArBga;AAHT;AAHF;QAUI3L,SAAS+J,IAAI;eACNvT,WAAWwR,aAAayD,GAAAA,CAAIjV,YAAYgT,UAAAA,CAAWhT,UAAXgT,CAAsB+B;AAf3E,SAgBO,IAAI/B,UAAAA,YAAsB1K,mBAA1B,EAA+C;QAC9CnP,CAAAA,GAAI,SAAJA,CAAI,CAASkc,QAAT,EAAmB;UAEvB5Y,MAAAA,CAAOO,QAAPP,CAAgBuW,UAAAA,CAAW3L,KAA3B5K,KAAqCA,MAAAA,CAAOO,QAAPP,CAAgBuW,UAAAA,CAAW1L,KAA3B7K,GAAmC;YAIpE6Y,OAAAA,GAAUtC,UAAAA,CAAWE,IAAXF,CAAgB+B,iBAAhB/B,CAAkC+B,iBAAlC/B,CAAoDvM;YAC9D8O,YAAAA,GAAevC,UAAAA,CAAW2B,KAAX3B,CAAiBxD,WAAjBwD,CAA6B1O,OAA7B0O,CAAqCA,UAArCA,IAAmD,CAAC;mBAE9D8B;;YACLU,aAAAA,GAAgBzC,IAAAA,CACpBN,GADoBM,EAEpBC,UAAAA,CAAWnT,MAFSkT,EAGpBC,UAAAA,CAAWlT,QAHSiT,EAIpB;kBACUC,UAAAA,CAAWE,IAAXF,CAAgB6B,kBAD1B;uBAEe,CAAC7B,UAAAA,CAAW3L,KAAZ,EAAmB2L,UAAAA,CAAW1L,KAA9B,EAAqC0L,UAAAA,CAAWzL,MAAhD;AAFf,SAJoBwL;;sBASRrC,KAAK4E;YACfC,cAAcC,aAAAA,CAAcR,MAAdQ;eAEXA;;;aAGFH;AAzBT;;eA4BWnX,MAAMzB,MAAAA,CAAOgZ,OAAPhZ,CAAetD,CAAfsD,EAAkBuW,UAAAA,CAAW9U,GAA7BzB;eACN0B,MAAM1B,MAAAA,CAAOgZ,OAAPhZ,CAAetD,CAAfsD,EAAkBuW,UAAAA,CAAW7U,GAA7B1B;AA9BZ,GAAA,MA+BA,IAAIuW,UAAAA,YAAsBvN,iBAA1B,EAA6C;QAC9CxK,KAAKsY,IAAI,SAAS,YAAW;UAC3BmC,UAAU1C,UAAAA,CAAWpN,YAAY;AADvC;QAII3K,KAAK+X,UAAAA,CAAWpN,YAAY,SAAS,UAASjF,CAAT,EAAY;QACjDgV;AADJ;AALK,GAAA,MAQA,IAAI3C,UAAAA,YAAsBhJ,kBAA1B,EAA8C;QAC/C/O,KAAKsY,IAAI,SAAS,YAAW;UAC3BmC,UAAU1C,UAAAA,CAAW9I,UAAU;AADrC;QAIIjP,KAAKsY,IAAI,aAAa,YAAW;UAC/B/J,SAASwJ,UAAAA,CAAW9I,UAAU;AADpC;QAIIjP,KAAKsY,IAAI,YAAY,YAAW;UAC9BxI,YAAYiI,UAAAA,CAAW9I,UAAU;AADvC;AATK,GAAA,MAYA,IAAI8I,UAAAA,YAAsB5I,eAA1B,EAA2C;QAC5CZ,SAAS+J,IAAI;eACNjT,gBAAgB7D,MAAAA,CAAOgZ,OAAPhZ,CAAe,UAASqE,GAAT,EAAc;SACnDK,MAAMyU,kBAAkB5C,UAAAA,CAAW3I,OAAX2I,CAAmB9Z,QAAnB8Z;aACpBlS;AAFkB,KAAArE,EAGxBuW,UAAAA,CAAW1S,aAHa7D;eAKhB6D;;;aAGFyF,WAAWtJ,MAAAA,CAAOgZ,OAAPhZ,CAAe,UAASqE,GAAT,EAAc;QAC7C2R,GAAAA,CAAIjC,OAAJiC,GAAcgC,eAAdhC,IAAiCO,UAAAA,CAAW6C,UAAX7C,IAAyB;yBACzCP,GAAAA,CAAIjC,OAAJiC,IAAe;;;WAG7B3R;AALa,GAAArE,EAMnBuW,UAAAA,CAAWjN,QANQtJ;;;AASxB,SAASqZ,gBAAT,CAA0BrD,GAA1B,EAA+BO,UAA/B,EAA2C;MAEnCT,IAAAA,GAAOE,GAAAA,CAAIjC,OAAJiC;;MAIPsD,YAAAA,GAAexD,IAAAA,CAAKjD,mBAALiD,CAAyBjO,OAAzBiO,CAAiCS,UAAAA,CAAWnT,MAA5C0S;;MAGjBwD,YAAAA,KAAiB,CAAC,GAAG;QAEnBC,aAAAA,GAAgBzD,IAAAA,CAAKhD,sCAALgD,CAA4CwD,YAA5CxD;;QAIhByD,aAAAA,KAAkB7Z,WAAW;sBACf;WACXoT,uCAAuCwG,gBAC1CC;;;kBAIUhD,UAAAA,CAAWlT,YAAYkT;;QAGjCT,IAAAA,CAAK5C,IAAL4C,IAAaA,IAAAA,CAAK5C,IAAL4C,CAAU0B,YAAY;UAC/BgC,SAAAA,GAAY1D,IAAAA,CAAK5C,IAAL4C,CAAU0B;UAGxBrE,MAAAA,GAAAA,KAAAA;;UAEAqG,SAAAA,CAAUxD,GAAAA,CAAI7C,MAAdqG,GAAuB;iBAChBA,SAAAA,CAAUxD,GAAAA,CAAI7C,MAAdqG;AADX,aAEO,IAAIA,SAAAA,CAAUtH,2BAAVsH,CAAJ,EAA4C;iBAExCA,SAAAA,CAAUtH,2BAAVsH;AAFJ,OAAA,MAGA;;;;UAMHrG,MAAAA,CAAOmG,YAAPnG,CAAAA,IAAwBA,MAAAA,CAAOmG,YAAPnG,CAAAA,CAAqBoD,UAAAA,CAAWlT,QAAhC8P,MAA8CzT,WAAW;YAE7EqC,KAAAA,GAAQoR,MAAAA,CAAOmG,YAAPnG,CAAAA,CAAqBoD,UAAAA,CAAWlT,QAAhC8P;mBAGH7P,eAAevB;mBACfuH,SAASvH;;;;;;AAM5B,SAASuU,IAAT,CAAaN,GAAb,EAAkB5S,MAAlB,EAA0BC,QAA1B,EAAoCsC,MAApC,EAA4C;MACtCvC,MAAAA,CAAOC,QAAPD,CAAAA,KAAqB1D,WAAW;UAC5B,IAAIuC,KAAJ,CAAA,aAAqBmB,MAArB,GAAA,qBAAA,GAAiDC,QAAjD,GAAA,GAAA;;;MAGJkT,UAAAA,GAAAA,KAAAA;;MAEA5Q,MAAAA,CAAOvJ,OAAO;iBACH,IAAIuR,eAAJ,CAAoBvK,MAApB,EAA4BC,QAA5B;AADf,SAEO;QACCoW,WAAAA,GAAc,CAACrW,MAAD,EAASC,QAAT,EAAmBqW,MAAnB,CAA0B/T,MAAAA,CAAO8T,WAAjC;iBACPnJ,iBAAAA,CAAkB1R,KAAlB0R,CAAwB0F,GAAxB1F,EAA6BmJ,WAA7BnJ;;;MAGX3K,MAAAA,CAAOgU,MAAPhU,YAAyBxC,YAAY;WAChCwW,SAAShU,MAAAA,CAAOgU,MAAPhU,CAAc8Q;;;mBAGfT,KAAKO;MAElBxJ,SAASwJ,UAAAA,CAAWhT,YAAY;MAE9B0Q,IAAAA,GAAOzQ,QAAAA,CAASC,aAATD,CAAuB,MAAvBA;MACTuJ,SAASkH,MAAM;OACdjK,YAAYuM,UAAAA,CAAWlT;MAEtBuW,SAAAA,GAAYpW,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;YACR+F,YAAY0K;YACZ1K,YAAYgN,UAAAA,CAAWhT;MAE3BuT,EAAAA,GAAK1B,MAAAA,CAAOY,GAAPZ,EAAYwE,SAAZxE,EAAuBzP,MAAAA,CAAOgU,MAA9BvE;MAEPrI,SAAS+J,IAAIrE,GAAAA,CAAIwD;;MACjBM,UAAAA,YAAsB5I,iBAAiB;QACrCZ,SAAS+J,IAAI;AADnB,SAEO;QACD/J,SAAS+J,IAAb,OAAA,CAAwBP,UAAAA,CAAWzS,QAAXyS,EAAxB;;;oBAGgBP,KAAKc,IAAIP;;MAEvB3D,cAAc9K,KAAKyO;;SAEhBA;;;AAGT,SAAS7C,mBAAT,CAA6BsC,GAA7B,EAAkC1X,GAAlC,EAAuC;SAE9BkF,QAAAA,CAASqW,QAATrW,CAAkBuF,IAAlBvF,GAAyB,GAAzBA,GAA+BlF;;;AAGxC,SAASwb,eAAT,CAAyB9D,GAAzB,EAA8B/B,IAA9B,EAAoC8F,WAApC,EAAiD;MACzChQ,GAAAA,GAAMvG,QAAAA,CAASC,aAATD,CAAuB,QAAvBA;MACRwG,YAAYiK;MACZlS,QAAQkS;;MACR+D,gBAAgBzO,YAAYQ;;MAC5BgQ,aAAa;QACX/B,gBAAgB9N,gBAAgB8L,GAAAA,CAAIgC,eAAJhC,CAAoB1Y,MAApB0Y,GAA6B;;;;AAIrE,SAASgE,eAAT,CAAyBhE,GAAzB,EAA8BiE,OAA9B,EAAuC;UAC7BvV,MAAM0M,UAAU4E,GAAAA,CAAIxC,eAAJwC,GAAsB,OAAtBA,GAAgC;;;AAG1D,SAASkE,WAAT,CAAqBlE,GAArB,EAA0B;MAClBmE,GAAAA,GAAMnE,GAAAA,CAAImB,UAAJnB,GAAiBxS,QAAAA,CAASC,aAATD,CAAuB,IAAvBA;MAEzBuJ,SAASiJ,GAAAA,CAAIzS,YAAY;;MAEzBmP,KAAKqC,aAAaoF,KAAKnE,GAAAA,CAAItD,IAAJsD,CAASoE;;MAEhCrN,SAASoN,KAAK;MAEZE,KAAAA,GAAQ7W,QAAAA,CAASC,aAATD,CAAuB,MAAvBA;QACRwG,YAAY;MACd+C,SAASsN,OAAO;MAGdC,MAAAA,GAAS9W,QAAAA,CAASC,aAATD,CAAuB,MAAvBA;SACRwG,YAAY;MACf+C,SAASuN,QAAQ;MACjBvN,SAASuN,QAAQ;MAEfC,OAAAA,GAAU/W,QAAAA,CAASC,aAATD,CAAuB,MAAvBA;UACRwG,YAAY;MAChB+C,SAASwN,SAAS;MAClBxN,SAASwN,SAAS;MAEhBC,OAAAA,GAAUhX,QAAAA,CAASC,aAATD,CAAuB,MAAvBA;UACRwG,YAAY;MAChB+C,SAASyN,SAAS;MAClBzN,SAASyN,SAAS;MAEhBC,MAAAA,GAASzE,GAAAA,CAAIgC,eAAJhC,GAAsBxS,QAAAA,CAASC,aAATD,CAAuB,QAAvBA;;MAEjCwS,GAAAA,CAAI9C,IAAJ8C,IAAYA,GAAAA,CAAI9C,IAAJ8C,CAASwB,YAAY;WAC5BzZ,KAAKiY,GAAAA,CAAI9C,IAAJ8C,CAASwB,YAAY,UAASzV,KAAT,EAAgBzD,GAAhB,EAAqB;sBACpC0X,KAAK1X,KAAKA,GAAAA,KAAQ0X,GAAAA,CAAI7C;AADxC;AADF,SAIO;oBACW6C,KAAK9D,6BAA6B;;;MAGhD1T,KAAKic,QAAQ,UAAU,YAAW;SAC/B,IAAIvS,KAAAA,GAAQ,GAAGA,KAAAA,GAAQ8N,GAAAA,CAAIgC,eAAJhC,CAAoB1Y,QAAQ4K,KAAAA,IAAS;UAC3D8P,gBAAgB9P,OAAO8B,YAAYgM,GAAAA,CAAIgC,eAAJhC,CAAoB9N,KAApB8N,EAA2BjU;;;QAGhEoR,SAAS,KAAKpR;AALpB;MAQIwH,YAAYkR;MACZlR,YAAY8Q;MACZ9Q,YAAY+Q;MACZ/Q,YAAYgR;MACZhR,YAAYiR;;MAEZrI,wBAAwB;QACpB8H,OAAAA,GAAUzW,QAAAA,CAASkX,cAATlX,CAAwB,kBAAxBA;QACVmX,oBAAAA,GAAuBnX,QAAAA,CAASkX,cAATlX,CAAwB,kBAAxBA;QACvBoX,WAAAA,GAAcpX,QAAAA,CAASkX,cAATlX,CAAwB,iBAAxBA;gBAERkB,MAAM0M,UAAU;;QAExBgB,YAAAA,CAAaqB,OAAbrB,CAAqBsB,mBAAAA,CAAoBsC,GAApBtC,EAAyB,SAAzBA,CAArBtB,MAA8D,QAAQ;2BACnDhJ,aAAa,WAAW;;;oBAG/B4M,KAAKiE;QAGjBzb,KAAKmc,sBAAsB,UAAU,YAAW;UAC9CnH,kBAAkB,CAACwC,GAAAA,CAAIxC;sBACXwC,KAAKiE;AAFvB;;;MAMIY,sBAAAA,GAAyBrX,QAAAA,CAASkX,cAATlX,CAAwB,oBAAxBA;MAE3BhF,KAAKqc,wBAAwB,WAAW,UAAS3W,CAAT,EAAY;QAClDA,CAAAA,CAAE6C,OAAF7C,KAAcA,CAAAA,CAAEmS,KAAFnS,KAAY,EAAZA,IAAkBA,CAAAA,CAAE8C,OAAF9C,KAAc,EAA9CA,GAAmD;oBACvCiN;;AAFlB;MAMI3S,KAAK6b,OAAO,SAAS,YAAW;2BACXrQ,YAAY2K,IAAAA,CAAKe,SAALf,CAAeqB,GAAAA,CAAIL,aAAJK,EAAfrB,EAAoCjV,SAApCiV,EAA+C,CAA/CA;kBACrBmG;2BACSC;2BACAN;AAJzB;MAOIjc,KAAK8b,QAAQ,SAAS,YAAW;QAC/BU;AADN;MAIIxc,KAAK+b,SAAS,SAAS,YAAW;QAC9B7C,UAAAA,GAAauD,MAAAA,CAAO,0BAAPA;;QACfvD,YAAY;UACVwD,OAAOxD;;AAHf;MAOIlZ,KAAKgc,SAAS,SAAS,YAAW;QAChCxG;AADN;;;AAOF,SAASmH,eAAT,CAAyBnF,GAAzB,EAA8B;MACxBoF,OAAAA,GAAAA,KAAAA;MAEAhE,kBAAkB5T,QAAAA,CAASC,aAATD,CAAuB,KAAvBA;SAEfV,OAAOkT,GAAAA,CAAIoB,eAAJpB,CAAoBtR,OAAO;WAEhC,KAFgC;gBAG3B,MAH2B;YAI/B,OAJ+B;YAK/B,WAL+B;cAM7B;AAN6B;;WAWhC2W,KAAKnX,GAAG;MACb8I;QAEE1E,SAAS8S,OAAAA,GAAUlX,CAAAA,CAAE6B;QACrBqO;cACMlQ,CAAAA,CAAE6B;WAEL;;;WAGAuV,WAAW;QACdhN,YAAY0H,GAAAA,CAAI3B,eAAe5B,GAAAA,CAAI0D;QACnC9J,OAAO/F,QAAQ,aAAa+U;QAC5BhP,OAAO/F,QAAQ,WAAWgV;;;WAGvBC,UAAUrX,GAAG;MAClB8I;cAEQ9I,CAAAA,CAAE6B;QAERgH,SAASiJ,GAAAA,CAAI3B,eAAe5B,GAAAA,CAAI0D;QAChC3X,KAAK8H,QAAQ,aAAa+U;QAC1B7c,KAAK8H,QAAQ,WAAWgV;WAErB;;;MAGL9c,KAAKwX,GAAAA,CAAIoB,iBAAiB,aAAamE;MACvC/c,KAAKwX,GAAAA,CAAI3B,eAAe,aAAakH;MAErChY,WAAWwR,aAAaiB,GAAAA,CAAIoB,iBAAiBpB,GAAAA,CAAIzS,UAAJyS,CAAesC;;;AAGlE,SAASkD,QAAT,CAAkBxF,GAAlB,EAAuByF,CAAvB,EAA0B;MACpBlY,WAAWmB,MAAM4D,QAAQmT,CAAAA,GAAI;;MAG7BzF,GAAAA,CAAImB,UAAJnB,IAAkBA,GAAAA,CAAI/C,WAAW;QAC/BkE,WAAWzS,MAAM4D,QAAQmT,CAAAA,GAAI;;;MAE/BzF,GAAAA,CAAI3B,eAAe;QACjBA,cAAc3P,MAAM4D,QAAQmT,CAAAA,GAAI;;;;AAIxC,SAAShE,gBAAT,CAA0BzB,GAA1B,EAA+B0F,gBAA/B,EAAiD;MACzCjb,QAAAA,GAAW;SAGV1C,KAAKiY,GAAAA,CAAInD,qBAAqB,UAASxO,GAAT,EAAc6D,KAAd,EAAqB;QAClDyT,WAAAA,GAAc;QAGdpC,aAAAA,GACJvD,GAAAA,CAAIlD,sCAAJkD,CAA2C9N,KAA3C8N;WAGKjY,KAAKwb,eAAe,UAAShD,UAAT,EAAqBlT,QAArB,EAA+B;kBAC5CA,YAAYqY,gBAAAA,GAAmBnF,UAAAA,CAAWjT,YAA9BoY,GAA6CnF,UAAAA,CAAWzS,QAAXyS;AADvE;aAKSrO,SAASyT;AAbpB;SAgBOlb;;;AAGT,SAASmb,oBAAT,CAA8B5F,GAA9B,EAAmC;OAC5B,IAAI9N,KAAAA,GAAQ,GAAGA,KAAAA,GAAQ8N,GAAAA,CAAIgC,eAAJhC,CAAoB1Y,QAAQ4K,KAAAA,IAAS;QAC3D8N,GAAAA,CAAIgC,eAAJhC,CAAoB9N,KAApB8N,EAA2BjU,KAA3BiU,KAAqCA,GAAAA,CAAI7C,QAAQ;UAC/C6E,gBAAgB9N,gBAAgBhC;;;;;AAK1C,SAAS2T,cAAT,CAAwBC,eAAxB,EAAyC;MACnCA,eAAAA,CAAgBxe,MAAhBwe,KAA2B,GAAG;4BACV9d,KAAKsI,QAAQ,YAAW;qBAC7BwV;AADjB;;;SAKK/d,KAAK+d,iBAAiB,UAASta,CAAT,EAAY;MACrCqC;AADJ;;;AC71CK,IAAMzH,KAAAA,GAAQ;SACZ4F,KADY;QAEbY,SAFa;aAGRlC;AAHQ,CAAd;;AAMP,IAAaqb,WAAAA,GAAc;cACb5Y,UADa;qBAEN6F,iBAFM;oBAGPS,gBAHO;oBAIPW,gBAJO;oBAKPM,gBALO;uBAMJmB,mBANI;0BAODc,sBAPC;sBAQLY,kBARK;mBASRI;AATQ,CAA3B;;AAYA,IAAapJ,KAAAA,GAAM;AAAEA,EAAAA,GAAAA,EAAKyX;AAAP,CAAnB;;AAEA,IAAahG,GAAAA,GAAM;AAAEvD,EAAAA,GAAAA,EAAKwJ;AAAP,CAAnB;;AAEA,IAAaxJ,KAAAA,GAAMwJ,GAAnB;;AAEA,IAAA,KAAA,GAAe;cAAA;0BAAA;YAAA;UAAA;;AAAA,CAAf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtDA;AAEA,IAAKC,MAAM,CAACC,OAAP,KAAmBzc,SAAxB,EAAoC;AAEnCwc,EAAAA,MAAM,CAACC,OAAP,GAAiBxf,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAa,CAAE,EAAf,CAAjB;AAEA;;AAED,IAAKiR,MAAM,CAACE,SAAP,KAAqB1c,SAA1B,EAAsC;AAErC;AACA;AAEAwc,EAAAA,MAAM,CAACE,SAAP,GAAmB,UAAWra,KAAX,EAAmB;AAErC,WAAO,OAAOA,KAAP,KAAiB,QAAjB,IAA6Bsa,QAAQ,CAAEta,KAAF,CAArC,IAAkDpF,IAAI,CAACwE,KAAL,CAAYY,KAAZ,MAAwBA,KAAjF;AAEA,GAJD;AAMA,EAED;;;AAEA,IAAKpF,IAAI,CAAC2f,IAAL,KAAc5c,SAAnB,EAA+B;AAE9B;AAEA/C,EAAAA,IAAI,CAAC2f,IAAL,GAAY,UAAWtW,CAAX,EAAe;AAE1B,WAASA,CAAC,GAAG,CAAN,GAAY,CAAE,CAAd,GAAoBA,CAAC,GAAG,CAAN,GAAY,CAAZ,GAAgB,CAAEA,CAA3C;AAEA,GAJD;AAMA;;AAED,IAAK,UAAUlG,QAAQ,CAACrC,SAAnB,KAAiC,KAAtC,EAA8C;AAE7C;AACA;AAEAY,EAAAA,MAAM,CAACkE,cAAP,CAAuBzC,QAAQ,CAACrC,SAAhC,EAA2C,MAA3C,EAAmD;AAElD8e,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK9f,QAAL,GAAgB2D,KAAhB,CAAuB,2BAAvB,EAAsD,CAAtD,CAAP;AAEA;AANiD,GAAnD;AAUA;;AAED,IAAK/B,MAAM,CAACme,MAAP,KAAkB9c,SAAvB,EAAmC;AAElC;AACA;AAEArB,EAAAA,MAAM,CAACme,MAAP,GAAgB,UAAW1e,MAAX,EAAoB;AAEnC,QAAKA,MAAM,KAAK4B,SAAX,IAAwB5B,MAAM,KAAK,IAAxC,EAA+C;AAE9C,YAAM,IAAI2e,SAAJ,CAAe,4CAAf,CAAN;AAEA;;AAED,UAAMC,MAAM,GAAGre,MAAM,CAAEP,MAAF,CAArB;;AAEA,SAAM,IAAIoK,KAAK,GAAG,CAAlB,EAAqBA,KAAK,GAAGjK,SAAS,CAACX,MAAvC,EAA+C4K,KAAK,EAApD,EAA0D;AAEzD,YAAMyU,MAAM,GAAG1e,SAAS,CAAEiK,KAAF,CAAxB;;AAEA,UAAKyU,MAAM,KAAKjd,SAAX,IAAwBid,MAAM,KAAK,IAAxC,EAA+C;AAE9C,aAAM,MAAMC,OAAZ,IAAuBD,MAAvB,EAAgC;AAE/B,cAAKte,MAAM,CAACZ,SAAP,CAAiBof,cAAjB,CAAgC7e,IAAhC,CAAsC2e,MAAtC,EAA8CC,OAA9C,CAAL,EAA+D;AAE9DF,YAAAA,MAAM,CAAEE,OAAF,CAAN,GAAoBD,MAAM,CAAEC,OAAF,CAA1B;AAEA;AAED;AAED;AAED;;AAED,WAAOF,MAAP;AAEA,GAhCD;AAkCA;;AAED,MAAMI,QAAQ,GAAG,KAAjB;;AACA,MAAMC,KAAK,GAAG;AAAEC,EAAAA,IAAI,EAAE,CAAR;AAAWC,EAAAA,MAAM,EAAE,CAAnB;AAAsBC,EAAAA,KAAK,EAAE,CAA7B;AAAgCC,EAAAA,MAAM,EAAE,CAAxC;AAA2CC,EAAAA,KAAK,EAAE,CAAlD;AAAqDC,EAAAA,GAAG,EAAE;AAA1D,CAAd;;AACA,MAAMC,KAAK,GAAG;AAAEH,EAAAA,MAAM,EAAE,CAAV;AAAaE,EAAAA,GAAG,EAAE,CAAlB;AAAqBE,EAAAA,SAAS,EAAE,CAAhC;AAAmCC,EAAAA,YAAY,EAAE;AAAjD,CAAd;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,aAAa,GAAG,CAAtB;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AACA,MAAMC,oBAAoB,GAAG,CAA7B;;AACA,MAAMC,qBAAqB,GAAG,CAA9B;;AACA,MAAMC,cAAc,GAAG,CAAvB;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,gBAAgB,GAAG,CAAzB;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,SAAS,GAAG,CAAlB;;AACA,MAAMC,QAAQ,GAAG,CAAjB;;AACA,MAAMC,UAAU,GAAG,CAAnB;;AACA,MAAMC,WAAW,GAAG,CAApB;;AACA,MAAMC,aAAa,GAAG,CAAtB;;AACA,MAAMC,UAAU,GAAG,CAAnB;;AACA,MAAMC,cAAc,GAAG,CAAvB;;AACA,MAAMC,gBAAgB,GAAG,CAAzB;;AACA,MAAMC,mBAAmB,GAAG,CAA5B;;AACA,MAAMC,gBAAgB,GAAG,CAAzB;;AACA,MAAMC,cAAc,GAAG,CAAvB;;AACA,MAAMC,WAAW,GAAG,GAApB;;AACA,MAAMC,gBAAgB,GAAG,GAAzB;;AACA,MAAMC,uBAAuB,GAAG,GAAhC;;AACA,MAAMC,WAAW,GAAG,GAApB;;AACA,MAAMC,WAAW,GAAG,GAApB;;AACA,MAAMC,UAAU,GAAG,GAAnB;;AACA,MAAMC,SAAS,GAAG,GAAlB;;AACA,MAAMC,cAAc,GAAG,GAAvB;;AACA,MAAMC,sBAAsB,GAAG,GAA/B;;AACA,MAAMC,cAAc,GAAG,GAAvB;;AACA,MAAMC,sBAAsB,GAAG,GAA/B;;AACA,MAAMC,cAAc,GAAG,GAAvB;;AACA,MAAMC,sBAAsB,GAAG,GAA/B;;AACA,MAAMC,cAAc,GAAG,GAAvB;;AACA,MAAMC,sBAAsB,GAAG,GAA/B;;AACA,MAAMC,sBAAsB,GAAG,GAA/B;;AACA,MAAMC,UAAU,GAAG,CAAnB;;AACA,MAAMC,WAAW,GAAG,CAApB;;AACA,MAAMC,SAAS,GAAG,CAAlB;;AACA,MAAMC,cAAc,GAAG,CAAvB;;AACA,MAAMC,UAAU,GAAG,CAAnB;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,aAAa,GAAG,CAAtB;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,YAAY,GAAG,CAArB;;AACA,MAAMC,aAAa,GAAG,CAAtB;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AACA,MAAMC,mBAAmB,GAAG,CAA5B;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AACA,MAAMC,qBAAqB,GAAG,CAA9B;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AAEA,MAAMC,SAAS,GAAG,GAAlB;;AACA,MAAMC,qBAAqB,GAAG,GAA9B;;AACA,MAAMC,qBAAqB,GAAG,GAA9B;;AACA,MAAMC,gCAAgC,GAAG,GAAzC;;AACA,MAAMC,gCAAgC,GAAG,GAAzC;;AACA,MAAMC,uBAAuB,GAAG,GAAhC;;AACA,MAAMC,uBAAuB,GAAG,GAAhC;;AACA,MAAMC,cAAc,GAAG,IAAvB;;AACA,MAAMC,mBAAmB,GAAG,IAA5B;;AACA,MAAMC,sBAAsB,GAAG,IAA/B;;AACA,MAAMC,aAAa,GAAG,IAAtB;;AACA,MAAMC,0BAA0B,GAAG,IAAnC;;AACA,MAAMC,0BAA0B,GAAG,IAAnC;;AACA,MAAMC,yBAAyB,GAAG,IAAlC;;AACA,MAAMC,yBAAyB,GAAG,IAAlC;;AACA,MAAMC,YAAY,GAAG,IAArB;;AACA,MAAMC,yBAAyB,GAAG,IAAlC;;AACA,MAAMC,yBAAyB,GAAG,IAAlC;;AACA,MAAMC,wBAAwB,GAAG,IAAjC;;AACA,MAAMC,wBAAwB,GAAG,IAAjC;;AACA,MAAMC,gBAAgB,GAAG,IAAzB;;AACA,MAAMC,QAAQ,GAAG,IAAjB;;AACA,MAAMC,SAAS,GAAG,IAAlB;;AACA,MAAMC,iBAAiB,GAAG,IAA1B;;AACA,MAAMC,OAAO,GAAG,IAAhB;;AACA,MAAMC,eAAe,GAAG,IAAxB;;AACA,MAAMC,SAAS,GAAG,IAAlB;;AACA,MAAMC,aAAa,GAAG,IAAtB;;AACA,MAAMC,qBAAqB,GAAG,IAA9B;;AACA,MAAMC,qBAAqB,GAAG,IAA9B;;AACA,MAAMC,oBAAoB,GAAG,IAA7B;;AACA,MAAMC,kBAAkB,GAAG,IAA3B;;AACA,MAAMC,WAAW,GAAG,IAApB;;AACA,MAAMC,SAAS,GAAG,IAAlB;;AACA,MAAMC,UAAU,GAAG,IAAnB;;AACA,MAAMC,eAAe,GAAG,IAAxB;;AACA,MAAMC,oBAAoB,GAAG,IAA7B;;AACA,MAAMC,UAAU,GAAGH,UAAnB;;AACA,MAAMI,WAAW,GAAG,IAApB;;AACA,MAAMC,kBAAkB,GAAG,IAA3B;;AACA,MAAMC,SAAS,GAAG,IAAlB;;AACA,MAAMC,gBAAgB,GAAG,IAAzB;;AACA,MAAMC,QAAQ,GAAG,IAAjB;;AACA,MAAMC,eAAe,GAAG,IAAxB;;AACA,MAAMC,gBAAgB,GAAG,IAAzB;;AACA,MAAMC,iBAAiB,GAAG,IAA1B;;AAEA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,qBAAqB,GAAG,KAA9B;;AACA,MAAMC,qBAAqB,GAAG,KAA9B;;AACA,MAAMC,qBAAqB,GAAG,KAA9B;;AACA,MAAMC,uBAAuB,GAAG,KAAhC;;AACA,MAAMC,uBAAuB,GAAG,KAAhC;;AACA,MAAMC,wBAAwB,GAAG,KAAjC;;AACA,MAAMC,wBAAwB,GAAG,KAAjC;;AACA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,oBAAoB,GAAG,KAA7B;;AACA,MAAMC,qBAAqB,GAAG,KAA9B;;AACA,MAAMC,qBAAqB,GAAG,KAA9B;;AACA,MAAMC,qBAAqB,GAAG,KAA9B;;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AACA,MAAMC,gBAAgB,GAAG,KAAzB;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,4BAA4B,GAAG,KAArC;;AACA,MAAMC,6BAA6B,GAAG,KAAtC;;AACA,MAAMC,6BAA6B,GAAG,KAAtC;;AACA,MAAMC,6BAA6B,GAAG,KAAtC;;AACA,MAAMC,8BAA8B,GAAG,KAAvC;;AACA,MAAMC,8BAA8B,GAAG,KAAvC;;AACA,MAAMC,8BAA8B,GAAG,KAAvC;;AACA,MAAMC,QAAQ,GAAG,IAAjB;;AACA,MAAMC,UAAU,GAAG,IAAnB;;AACA,MAAMC,YAAY,GAAG,IAArB;;AACA,MAAMC,mBAAmB,GAAG,IAA5B;;AACA,MAAMC,iBAAiB,GAAG,IAA1B;;AACA,MAAMC,iBAAiB,GAAG,IAA1B;;AACA,MAAMC,mBAAmB,GAAG,IAA5B;;AACA,MAAMC,eAAe,GAAG,IAAxB;;AACA,MAAMC,gBAAgB,GAAG,IAAzB;;AACA,MAAMC,wBAAwB,GAAG,IAAjC;;AACA,MAAMC,0BAA0B,GAAG,IAAnC;;AACA,MAAMC,iBAAiB,GAAG,CAA1B;;AACA,MAAMC,qBAAqB,GAAG,CAA9B;;AACA,MAAMC,mBAAmB,GAAG,CAA5B;;AACA,MAAMC,cAAc,GAAG,IAAvB;;AACA,MAAMC,YAAY,GAAG,IAArB;;AACA,MAAMC,aAAa,GAAG,IAAtB;;AACA,MAAMC,YAAY,GAAG,IAArB;;AACA,MAAMC,cAAc,GAAG,IAAvB;;AACA,MAAMC,aAAa,GAAG,IAAtB;;AACA,MAAMC,cAAc,GAAG,IAAvB;;AACA,MAAMC,YAAY,GAAG,IAArB;;AACA,MAAMC,iBAAiB,GAAG,IAA1B;;AACA,MAAMC,gBAAgB,GAAG,IAAzB;;AACA,MAAMC,qBAAqB,GAAG,CAA9B;;AACA,MAAMC,oBAAoB,GAAG,CAA7B;;AAEA,MAAMC,aAAa,GAAG,CAAtB;;AACA,MAAMC,aAAa,GAAG,IAAtB;;AACA,MAAMC,gBAAgB,GAAG,IAAzB;;AACA,MAAMC,kBAAkB,GAAG,IAA3B;;AACA,MAAMC,kBAAkB,GAAG,IAA3B;;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AACA,MAAMC,sBAAsB,GAAG,KAA/B;;AACA,MAAMC,eAAe,GAAG,IAAxB;;AAEA,MAAMC,gBAAgB,GAAG,GAAzB;;AACA,MAAMC,eAAe,GAAG,GAAxB;;AACA,MAAMC,gBAAgB,GAAG,GAAzB;;AACA,MAAMC,oBAAoB,GAAG,GAA7B;;AACA,MAAMC,kBAAkB,GAAG,GAA3B;;AACA,MAAMC,mBAAmB,GAAG,GAA5B;;AACA,MAAMC,uBAAuB,GAAG,GAAhC;;AACA,MAAMC,iBAAiB,GAAG,GAA1B;;AAEA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,gBAAgB,GAAG,KAAzB;;AACA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,gBAAgB,GAAG,KAAzB;;AACA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,eAAe,GAAG,KAAxB;;AACA,MAAMC,gBAAgB,GAAG,KAAzB;;AACA,MAAMC,eAAe,GAAG,KAAxB;AAEA;;;;;;AAIA,SAASC,eAAT,GAA2B,CAAE;;AAE7BnrB,MAAM,CAACme,MAAP,CAAegN,eAAe,CAAC/rB,SAA/B,EAA0C;AAEzC8J,EAAAA,gBAAgB,EAAE,UAAWuB,IAAX,EAAiB2gB,QAAjB,EAA4B;AAE7C,QAAK,KAAKC,UAAL,KAAoBhqB,SAAzB,EAAqC,KAAKgqB,UAAL,GAAkB,EAAlB;AAErC,UAAMC,SAAS,GAAG,KAAKD,UAAvB;;AAEA,QAAKC,SAAS,CAAE7gB,IAAF,CAAT,KAAsBpJ,SAA3B,EAAuC;AAEtCiqB,MAAAA,SAAS,CAAE7gB,IAAF,CAAT,GAAoB,EAApB;AAEA;;AAED,QAAK6gB,SAAS,CAAE7gB,IAAF,CAAT,CAAkBjB,OAAlB,CAA2B4hB,QAA3B,MAA0C,CAAE,CAAjD,EAAqD;AAEpDE,MAAAA,SAAS,CAAE7gB,IAAF,CAAT,CAAkBhB,IAAlB,CAAwB2hB,QAAxB;AAEA;AAED,GApBwC;AAsBzCG,EAAAA,gBAAgB,EAAE,UAAW9gB,IAAX,EAAiB2gB,QAAjB,EAA4B;AAE7C,QAAK,KAAKC,UAAL,KAAoBhqB,SAAzB,EAAqC,OAAO,KAAP;AAErC,UAAMiqB,SAAS,GAAG,KAAKD,UAAvB;AAEA,WAAOC,SAAS,CAAE7gB,IAAF,CAAT,KAAsBpJ,SAAtB,IAAmCiqB,SAAS,CAAE7gB,IAAF,CAAT,CAAkBjB,OAAlB,CAA2B4hB,QAA3B,MAA0C,CAAE,CAAtF;AAEA,GA9BwC;AAgCzChiB,EAAAA,mBAAmB,EAAE,UAAWqB,IAAX,EAAiB2gB,QAAjB,EAA4B;AAEhD,QAAK,KAAKC,UAAL,KAAoBhqB,SAAzB,EAAqC;AAErC,UAAMiqB,SAAS,GAAG,KAAKD,UAAvB;AACA,UAAMG,aAAa,GAAGF,SAAS,CAAE7gB,IAAF,CAA/B;;AAEA,QAAK+gB,aAAa,KAAKnqB,SAAvB,EAAmC;AAElC,YAAMwI,KAAK,GAAG2hB,aAAa,CAAChiB,OAAd,CAAuB4hB,QAAvB,CAAd;;AAEA,UAAKvhB,KAAK,KAAK,CAAE,CAAjB,EAAqB;AAEpB2hB,QAAAA,aAAa,CAAC1hB,MAAd,CAAsBD,KAAtB,EAA6B,CAA7B;AAEA;AAED;AAED,GAnDwC;AAqDzCf,EAAAA,aAAa,EAAE,UAAWC,KAAX,EAAmB;AAEjC,QAAK,KAAKsiB,UAAL,KAAoBhqB,SAAzB,EAAqC;AAErC,UAAMiqB,SAAS,GAAG,KAAKD,UAAvB;AACA,UAAMG,aAAa,GAAGF,SAAS,CAAEviB,KAAK,CAAC0B,IAAR,CAA/B;;AAEA,QAAK+gB,aAAa,KAAKnqB,SAAvB,EAAmC;AAElC0H,MAAAA,KAAK,CAACtJ,MAAN,GAAe,IAAf,CAFkC,CAIlC;;AACA,YAAMgsB,KAAK,GAAGD,aAAa,CAACjsB,KAAd,CAAqB,CAArB,CAAd;;AAEA,WAAM,IAAIe,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+qB,KAAK,CAACxsB,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhDmrB,QAAAA,KAAK,CAAEnrB,CAAF,CAAL,CAAWX,IAAX,CAAiB,IAAjB,EAAuBoJ,KAAvB;AAEA;AAED;AAED;AA3EwC,CAA1C;AA+EA;;;;;;;AAOA,MAAM2iB,IAAI,GAAG,EAAb;;AAEA,KAAM,IAAIprB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,GAArB,EAA0BA,CAAC,EAA3B,EAAiC;AAEhCorB,EAAAA,IAAI,CAAEprB,CAAF,CAAJ,GAAY,CAAEA,CAAC,GAAG,EAAJ,GAAS,GAAT,GAAe,EAAjB,IAA0BA,CAAF,CAAMlC,QAAN,CAAgB,EAAhB,CAApC;AAEA;;AAED,MAAMutB,SAAS,GAAG;AAEjBC,EAAAA,OAAO,EAAEttB,IAAI,CAACutB,EAAL,GAAU,GAFF;AAGjBC,EAAAA,OAAO,EAAE,MAAMxtB,IAAI,CAACutB,EAHH;AAKjBE,EAAAA,YAAY,EAAE,YAAY;AAEzB;AAEA,UAAMC,EAAE,GAAG1tB,IAAI,CAAC2tB,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,UAAMC,EAAE,GAAG5tB,IAAI,CAAC2tB,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,UAAME,EAAE,GAAG7tB,IAAI,CAAC2tB,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,UAAMG,EAAE,GAAG9tB,IAAI,CAAC2tB,MAAL,KAAgB,UAAhB,GAA6B,CAAxC;AACA,UAAMI,IAAI,GAAGX,IAAI,CAAEM,EAAE,GAAG,IAAP,CAAJ,GAAoBN,IAAI,CAAEM,EAAE,IAAI,CAAN,GAAU,IAAZ,CAAxB,GAA6CN,IAAI,CAAEM,EAAE,IAAI,EAAN,GAAW,IAAb,CAAjD,GAAuEN,IAAI,CAAEM,EAAE,IAAI,EAAN,GAAW,IAAb,CAA3E,GAAiG,GAAjG,GACZN,IAAI,CAAEQ,EAAE,GAAG,IAAP,CADQ,GACQR,IAAI,CAAEQ,EAAE,IAAI,CAAN,GAAU,IAAZ,CADZ,GACiC,GADjC,GACuCR,IAAI,CAAEQ,EAAE,IAAI,EAAN,GAAW,IAAX,GAAkB,IAApB,CAD3C,GACwER,IAAI,CAAEQ,EAAE,IAAI,EAAN,GAAW,IAAb,CAD5E,GACkG,GADlG,GAEZR,IAAI,CAAES,EAAE,GAAG,IAAL,GAAY,IAAd,CAFQ,GAEeT,IAAI,CAAES,EAAE,IAAI,CAAN,GAAU,IAAZ,CAFnB,GAEwC,GAFxC,GAE8CT,IAAI,CAAES,EAAE,IAAI,EAAN,GAAW,IAAb,CAFlD,GAEwET,IAAI,CAAES,EAAE,IAAI,EAAN,GAAW,IAAb,CAF5E,GAGZT,IAAI,CAAEU,EAAE,GAAG,IAAP,CAHQ,GAGQV,IAAI,CAAEU,EAAE,IAAI,CAAN,GAAU,IAAZ,CAHZ,GAGiCV,IAAI,CAAEU,EAAE,IAAI,EAAN,GAAW,IAAb,CAHrC,GAG2DV,IAAI,CAAEU,EAAE,IAAI,EAAN,GAAW,IAAb,CAH5E,CARyB,CAazB;;AACA,WAAOC,IAAI,CAACC,WAAL,EAAP;AAEA,GArBgB;AAuBjBC,EAAAA,KAAK,EAAE,UAAW7oB,KAAX,EAAkBN,GAAlB,EAAuBC,GAAvB,EAA6B;AAEnC,WAAO/E,IAAI,CAAC+E,GAAL,CAAUD,GAAV,EAAe9E,IAAI,CAAC8E,GAAL,CAAUC,GAAV,EAAeK,KAAf,CAAf,CAAP;AAEA,GA3BgB;AA6BjB;AACA;AAEA8oB,EAAAA,eAAe,EAAE,UAAWC,CAAX,EAAcC,CAAd,EAAkB;AAElC,WAAO,CAAID,CAAC,GAAGC,CAAN,GAAYA,CAAd,IAAoBA,CAA3B;AAEA,GApCgB;AAsCjB;AAEAC,EAAAA,SAAS,EAAE,UAAWhlB,CAAX,EAAcilB,EAAd,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA+B;AAEzC,WAAOD,EAAE,GAAG,CAAEnlB,CAAC,GAAGilB,EAAN,KAAeG,EAAE,GAAGD,EAApB,KAA6BD,EAAE,GAAGD,EAAlC,CAAZ;AAEA,GA5CgB;AA8CjB;AAEAI,EAAAA,IAAI,EAAE,UAAWrlB,CAAX,EAAcE,CAAd,EAAiB3E,CAAjB,EAAqB;AAE1B,WAAO,CAAE,IAAIA,CAAN,IAAYyE,CAAZ,GAAgBzE,CAAC,GAAG2E,CAA3B;AAEA,GApDgB;AAsDjB;AAEAolB,EAAAA,UAAU,EAAE,UAAWtlB,CAAX,EAAcvE,GAAd,EAAmBC,GAAnB,EAAyB;AAEpC,QAAKsE,CAAC,IAAIvE,GAAV,EAAgB,OAAO,CAAP;AAChB,QAAKuE,CAAC,IAAItE,GAAV,EAAgB,OAAO,CAAP;AAEhBsE,IAAAA,CAAC,GAAG,CAAEA,CAAC,GAAGvE,GAAN,KAAgBC,GAAG,GAAGD,GAAtB,CAAJ;AAEA,WAAOuE,CAAC,GAAGA,CAAJ,IAAU,IAAI,IAAIA,CAAlB,CAAP;AAEA,GAjEgB;AAmEjBulB,EAAAA,YAAY,EAAE,UAAWvlB,CAAX,EAAcvE,GAAd,EAAmBC,GAAnB,EAAyB;AAEtC,QAAKsE,CAAC,IAAIvE,GAAV,EAAgB,OAAO,CAAP;AAChB,QAAKuE,CAAC,IAAItE,GAAV,EAAgB,OAAO,CAAP;AAEhBsE,IAAAA,CAAC,GAAG,CAAEA,CAAC,GAAGvE,GAAN,KAAgBC,GAAG,GAAGD,GAAtB,CAAJ;AAEA,WAAOuE,CAAC,GAAGA,CAAJ,GAAQA,CAAR,IAAcA,CAAC,IAAKA,CAAC,GAAG,CAAJ,GAAQ,EAAb,CAAD,GAAqB,EAAnC,CAAP;AAEA,GA5EgB;AA8EjB;AAEAwlB,EAAAA,OAAO,EAAE,UAAWC,GAAX,EAAgBC,IAAhB,EAAuB;AAE/B,WAAOD,GAAG,GAAG9uB,IAAI,CAACwE,KAAL,CAAYxE,IAAI,CAAC2tB,MAAL,MAAkBoB,IAAI,GAAGD,GAAP,GAAa,CAA/B,CAAZ,CAAb;AAEA,GApFgB;AAsFjB;AAEAE,EAAAA,SAAS,EAAE,UAAWF,GAAX,EAAgBC,IAAhB,EAAuB;AAEjC,WAAOD,GAAG,GAAG9uB,IAAI,CAAC2tB,MAAL,MAAkBoB,IAAI,GAAGD,GAAzB,CAAb;AAEA,GA5FgB;AA8FjB;AAEAG,EAAAA,eAAe,EAAE,UAAWC,KAAX,EAAmB;AAEnC,WAAOA,KAAK,IAAK,MAAMlvB,IAAI,CAAC2tB,MAAL,EAAX,CAAZ;AAEA,GApGgB;AAsGjBwB,EAAAA,QAAQ,EAAE,UAAWC,OAAX,EAAqB;AAE9B,WAAOA,OAAO,GAAG/B,SAAS,CAACC,OAA3B;AAEA,GA1GgB;AA4GjB+B,EAAAA,QAAQ,EAAE,UAAWC,OAAX,EAAqB;AAE9B,WAAOA,OAAO,GAAGjC,SAAS,CAACG,OAA3B;AAEA,GAhHgB;AAkHjB+B,EAAAA,YAAY,EAAE,UAAWnqB,KAAX,EAAmB;AAEhC,WAAO,CAAEA,KAAK,GAAKA,KAAK,GAAG,CAApB,MAA8B,CAA9B,IAAmCA,KAAK,KAAK,CAApD;AAEA,GAtHgB;AAwHjBoqB,EAAAA,cAAc,EAAE,UAAWpqB,KAAX,EAAmB;AAElC,WAAOpF,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAatO,IAAI,CAACyvB,IAAL,CAAWzvB,IAAI,CAACuO,GAAL,CAAUnJ,KAAV,IAAoBpF,IAAI,CAAC0vB,GAApC,CAAb,CAAP;AAEA,GA5HgB;AA8HjBC,EAAAA,eAAe,EAAE,UAAWvqB,KAAX,EAAmB;AAEnC,WAAOpF,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAatO,IAAI,CAACwE,KAAL,CAAYxE,IAAI,CAACuO,GAAL,CAAUnJ,KAAV,IAAoBpF,IAAI,CAAC0vB,GAArC,CAAb,CAAP;AAEA,GAlIgB;AAoIjBE,EAAAA,4BAA4B,EAAE,UAAWjrB,CAAX,EAAcvE,CAAd,EAAiBD,CAAjB,EAAoB0E,CAApB,EAAuBgrB,KAAvB,EAA+B;AAE5D;AAEA;AACA;AACA;AAEA,UAAMC,GAAG,GAAG9vB,IAAI,CAAC8vB,GAAjB;AACA,UAAMC,GAAG,GAAG/vB,IAAI,CAAC+vB,GAAjB;AAEA,UAAMC,EAAE,GAAGF,GAAG,CAAE3vB,CAAC,GAAG,CAAN,CAAd;AACA,UAAM8vB,EAAE,GAAGF,GAAG,CAAE5vB,CAAC,GAAG,CAAN,CAAd;AAEA,UAAM+vB,GAAG,GAAGJ,GAAG,CAAE,CAAE1vB,CAAC,GAAGyE,CAAN,IAAY,CAAd,CAAf;AACA,UAAMsrB,GAAG,GAAGJ,GAAG,CAAE,CAAE3vB,CAAC,GAAGyE,CAAN,IAAY,CAAd,CAAf;AAEA,UAAMurB,IAAI,GAAGN,GAAG,CAAE,CAAE1vB,CAAC,GAAGyE,CAAN,IAAY,CAAd,CAAhB;AACA,UAAMwrB,IAAI,GAAGN,GAAG,CAAE,CAAE3vB,CAAC,GAAGyE,CAAN,IAAY,CAAd,CAAhB;AAEA,UAAMyrB,IAAI,GAAGR,GAAG,CAAE,CAAEjrB,CAAC,GAAGzE,CAAN,IAAY,CAAd,CAAhB;AACA,UAAMmwB,IAAI,GAAGR,GAAG,CAAE,CAAElrB,CAAC,GAAGzE,CAAN,IAAY,CAAd,CAAhB;;AAEA,YAASyvB,KAAT;AAEC,WAAK,KAAL;AACClrB,QAAAA,CAAC,CAAC6rB,GAAF,CAAOR,EAAE,GAAGG,GAAZ,EAAiBF,EAAE,GAAGG,IAAtB,EAA4BH,EAAE,GAAGI,IAAjC,EAAuCL,EAAE,GAAGE,GAA5C;AACA;;AAED,WAAK,KAAL;AACCvrB,QAAAA,CAAC,CAAC6rB,GAAF,CAAOP,EAAE,GAAGI,IAAZ,EAAkBL,EAAE,GAAGG,GAAvB,EAA4BF,EAAE,GAAGG,IAAjC,EAAuCJ,EAAE,GAAGE,GAA5C;AACA;;AAED,WAAK,KAAL;AACCvrB,QAAAA,CAAC,CAAC6rB,GAAF,CAAOP,EAAE,GAAGG,IAAZ,EAAkBH,EAAE,GAAGI,IAAvB,EAA6BL,EAAE,GAAGG,GAAlC,EAAuCH,EAAE,GAAGE,GAA5C;AACA;;AAED,WAAK,KAAL;AACCvrB,QAAAA,CAAC,CAAC6rB,GAAF,CAAOR,EAAE,GAAGG,GAAZ,EAAiBF,EAAE,GAAGM,IAAtB,EAA4BN,EAAE,GAAGK,IAAjC,EAAuCN,EAAE,GAAGE,GAA5C;AACA;;AAED,WAAK,KAAL;AACCvrB,QAAAA,CAAC,CAAC6rB,GAAF,CAAOP,EAAE,GAAGK,IAAZ,EAAkBN,EAAE,GAAGG,GAAvB,EAA4BF,EAAE,GAAGM,IAAjC,EAAuCP,EAAE,GAAGE,GAA5C;AACA;;AAED,WAAK,KAAL;AACCvrB,QAAAA,CAAC,CAAC6rB,GAAF,CAAOP,EAAE,GAAGM,IAAZ,EAAkBN,EAAE,GAAGK,IAAvB,EAA6BN,EAAE,GAAGG,GAAlC,EAAuCH,EAAE,GAAGE,GAA5C;AACA;;AAED;AACCO,QAAAA,OAAO,CAACC,IAAR,CAAc,oFAAoFb,KAAlG;AA3BF;AA+BA;AA1LgB,CAAlB;AA8LA;;;;;;;;;AAOA,SAASc,OAAT,CAAkBtnB,CAAC,GAAG,CAAtB,EAAyBE,CAAC,GAAG,CAA7B,EAAiC;AAEhC,OAAKF,CAAL,GAASA,CAAT;AACA,OAAKE,CAAL,GAASA,CAAT;AAEA;;AAED7H,MAAM,CAACwV,gBAAP,CAAyByZ,OAAO,CAAC7vB,SAAjC,EAA4C;AAE3C,WAAS;AAER8e,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKvW,CAAZ;AAEA,KANO;AAQRmnB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKiE,CAAL,GAASjE,KAAT;AAEA;AAZO,GAFkC;AAkB3C,YAAU;AAETwa,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKrW,CAAZ;AAEA,KANQ;AAQTinB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKmE,CAAL,GAASnE,KAAT;AAEA;AAZQ;AAlBiC,CAA5C;AAoCA1D,MAAM,CAACme,MAAP,CAAe8Q,OAAO,CAAC7vB,SAAvB,EAAkC;AAEjC8vB,EAAAA,SAAS,EAAE,IAFsB;AAIjCJ,EAAAA,GAAG,EAAE,UAAWnnB,CAAX,EAAcE,CAAd,EAAkB;AAEtB,SAAKF,CAAL,GAASA,CAAT;AACA,SAAKE,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAXgC;AAajCsnB,EAAAA,SAAS,EAAE,UAAWC,MAAX,EAAoB;AAE9B,SAAKznB,CAAL,GAASynB,MAAT;AACA,SAAKvnB,CAAL,GAASunB,MAAT;AAEA,WAAO,IAAP;AAEA,GApBgC;AAsBjCC,EAAAA,IAAI,EAAE,UAAW1nB,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GA5BgC;AA8BjC2nB,EAAAA,IAAI,EAAE,UAAWznB,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GApCgC;AAsCjC0nB,EAAAA,YAAY,EAAE,UAAW1lB,KAAX,EAAkBnG,KAAlB,EAA0B;AAEvC,YAASmG,KAAT;AAEC,WAAK,CAAL;AAAQ,aAAKlC,CAAL,GAASjE,KAAT;AAAgB;;AACxB,WAAK,CAAL;AAAQ,aAAKmE,CAAL,GAASnE,KAAT;AAAgB;;AACxB;AAAS,cAAM,IAAIE,KAAJ,CAAW,4BAA4BiG,KAAvC,CAAN;AAJV;;AAQA,WAAO,IAAP;AAEA,GAlDgC;AAoDjC2lB,EAAAA,YAAY,EAAE,UAAW3lB,KAAX,EAAmB;AAEhC,YAASA,KAAT;AAEC,WAAK,CAAL;AAAQ,eAAO,KAAKlC,CAAZ;;AACR,WAAK,CAAL;AAAQ,eAAO,KAAKE,CAAZ;;AACR;AAAS,cAAM,IAAIjE,KAAJ,CAAW,4BAA4BiG,KAAvC,CAAN;AAJV;AAQA,GA9DgC;AAgEjC4lB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAKmG,CAA3B,EAA8B,KAAKE,CAAnC,CAAP;AAEA,GApEgC;AAsEjC6nB,EAAAA,IAAI,EAAE,UAAW5wB,CAAX,EAAe;AAEpB,SAAK6I,CAAL,GAAS7I,CAAC,CAAC6I,CAAX;AACA,SAAKE,CAAL,GAAS/I,CAAC,CAAC+I,CAAX;AAEA,WAAO,IAAP;AAEA,GA7EgC;AA+EjCoQ,EAAAA,GAAG,EAAE,UAAWnZ,CAAX,EAAcse,CAAd,EAAkB;AAEtB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKW,UAAL,CAAiB7wB,CAAjB,EAAoBse,CAApB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AAEA,WAAO,IAAP;AAEA,GA7FgC;AA+FjC+nB,EAAAA,SAAS,EAAE,UAAWhxB,CAAX,EAAe;AAEzB,SAAK+I,CAAL,IAAU/I,CAAV;AACA,SAAKiJ,CAAL,IAAUjJ,CAAV;AAEA,WAAO,IAAP;AAEA,GAtGgC;AAwGjC+wB,EAAAA,UAAU,EAAE,UAAWjxB,CAAX,EAAcD,CAAd,EAAkB;AAE7B,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AAEA,WAAO,IAAP;AAEA,GA/GgC;AAiHjCgoB,EAAAA,eAAe,EAAE,UAAW/wB,CAAX,EAAcF,CAAd,EAAkB;AAElC,SAAK+I,CAAL,IAAU7I,CAAC,CAAC6I,CAAF,GAAM/I,CAAhB;AACA,SAAKiJ,CAAL,IAAU/I,CAAC,CAAC+I,CAAF,GAAMjJ,CAAhB;AAEA,WAAO,IAAP;AAEA,GAxHgC;AA0HjCkxB,EAAAA,GAAG,EAAE,UAAWhxB,CAAX,EAAcse,CAAd,EAAkB;AAEtB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKe,UAAL,CAAiBjxB,CAAjB,EAAoBse,CAApB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AAEA,WAAO,IAAP;AAEA,GAxIgC;AA0IjCmoB,EAAAA,SAAS,EAAE,UAAWpxB,CAAX,EAAe;AAEzB,SAAK+I,CAAL,IAAU/I,CAAV;AACA,SAAKiJ,CAAL,IAAUjJ,CAAV;AAEA,WAAO,IAAP;AAEA,GAjJgC;AAmJjCmxB,EAAAA,UAAU,EAAE,UAAWrxB,CAAX,EAAcD,CAAd,EAAkB;AAE7B,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AAEA,WAAO,IAAP;AAEA,GA1JgC;AA4JjCooB,EAAAA,QAAQ,EAAE,UAAWnxB,CAAX,EAAe;AAExB,SAAK6I,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AAEA,WAAO,IAAP;AAEA,GAnKgC;AAqKjCqoB,EAAAA,cAAc,EAAE,UAAWd,MAAX,EAAoB;AAEnC,SAAKznB,CAAL,IAAUynB,MAAV;AACA,SAAKvnB,CAAL,IAAUunB,MAAV;AAEA,WAAO,IAAP;AAEA,GA5KgC;AA8KjCe,EAAAA,MAAM,EAAE,UAAWrxB,CAAX,EAAe;AAEtB,SAAK6I,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AAEA,WAAO,IAAP;AAEA,GArLgC;AAuLjCuoB,EAAAA,YAAY,EAAE,UAAWhB,MAAX,EAAoB;AAEjC,WAAO,KAAKc,cAAL,CAAqB,IAAId,MAAzB,CAAP;AAEA,GA3LgC;AA6LjCiB,EAAAA,YAAY,EAAE,UAAW3D,CAAX,EAAe;AAE5B,UAAM/kB,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBE,CAAC,GAAG,KAAKA,CAA3B;AACA,UAAMhC,CAAC,GAAG6mB,CAAC,CAAC4D,QAAZ;AAEA,SAAK3oB,CAAL,GAAS9B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAApC;AACA,SAAKgC,CAAL,GAAShC,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAApC;AAEA,WAAO,IAAP;AAEA,GAvMgC;AAyMjCzC,EAAAA,GAAG,EAAE,UAAWtE,CAAX,EAAe;AAEnB,SAAK6I,CAAL,GAASrJ,IAAI,CAAC8E,GAAL,CAAU,KAAKuE,CAAf,EAAkB7I,CAAC,CAAC6I,CAApB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC8E,GAAL,CAAU,KAAKyE,CAAf,EAAkB/I,CAAC,CAAC+I,CAApB,CAAT;AAEA,WAAO,IAAP;AAEA,GAhNgC;AAkNjCxE,EAAAA,GAAG,EAAE,UAAWvE,CAAX,EAAe;AAEnB,SAAK6I,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAU,KAAKsE,CAAf,EAAkB7I,CAAC,CAAC6I,CAApB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAU,KAAKwE,CAAf,EAAkB/I,CAAC,CAAC+I,CAApB,CAAT;AAEA,WAAO,IAAP;AAEA,GAzNgC;AA2NjC0kB,EAAAA,KAAK,EAAE,UAAWnpB,GAAX,EAAgBC,GAAhB,EAAsB;AAE5B;AAEA,SAAKsE,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACuE,CAAd,EAAiBrJ,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAACsE,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACyE,CAAd,EAAiBvJ,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAACwE,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GApOgC;AAsOjC0oB,EAAAA,WAAW,EAAE,UAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAExC,SAAK9oB,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAK9oB,CAAvB,CAAlB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAK5oB,CAAvB,CAAlB,CAAT;AAEA,WAAO,IAAP;AAEA,GA7OgC;AA+OjC6oB,EAAAA,WAAW,EAAE,UAAWttB,GAAX,EAAgBC,GAAhB,EAAsB;AAElC,UAAMpE,MAAM,GAAG,KAAKA,MAAL,EAAf;AAEA,WAAO,KAAKmxB,YAAL,CAAmBnxB,MAAM,IAAI,CAA7B,EAAiCixB,cAAjC,CAAiD5xB,IAAI,CAAC+E,GAAL,CAAUD,GAAV,EAAe9E,IAAI,CAAC8E,GAAL,CAAUC,GAAV,EAAepE,MAAf,CAAf,CAAjD,CAAP;AAEA,GArPgC;AAuPjC6D,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAK6E,CAAL,GAASrJ,IAAI,CAACwE,KAAL,CAAY,KAAK6E,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACwE,KAAL,CAAY,KAAK+E,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GA9PgC;AAgQjCkmB,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAKpmB,CAAL,GAASrJ,IAAI,CAACyvB,IAAL,CAAW,KAAKpmB,CAAhB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACyvB,IAAL,CAAW,KAAKlmB,CAAhB,CAAT;AAEA,WAAO,IAAP;AAEA,GAvQgC;AAyQjCtJ,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAKoJ,CAAL,GAASrJ,IAAI,CAACC,KAAL,CAAY,KAAKoJ,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACC,KAAL,CAAY,KAAKsJ,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GAhRgC;AAkRjC8oB,EAAAA,WAAW,EAAE,YAAY;AAExB,SAAKhpB,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBrJ,IAAI,CAACyvB,IAAL,CAAW,KAAKpmB,CAAhB,CAAjB,GAAuCrJ,IAAI,CAACwE,KAAL,CAAY,KAAK6E,CAAjB,CAAhD;AACA,SAAKE,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBvJ,IAAI,CAACyvB,IAAL,CAAW,KAAKlmB,CAAhB,CAAjB,GAAuCvJ,IAAI,CAACwE,KAAL,CAAY,KAAK+E,CAAjB,CAAhD;AAEA,WAAO,IAAP;AAEA,GAzRgC;AA2RjC+oB,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKjpB,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,SAAKE,CAAL,GAAS,CAAE,KAAKA,CAAhB;AAEA,WAAO,IAAP;AAEA,GAlSgC;AAoSjCgpB,EAAAA,GAAG,EAAE,UAAW/xB,CAAX,EAAe;AAEnB,WAAO,KAAK6I,CAAL,GAAS7I,CAAC,CAAC6I,CAAX,GAAe,KAAKE,CAAL,GAAS/I,CAAC,CAAC+I,CAAjC;AAEA,GAxSgC;AA0SjCipB,EAAAA,KAAK,EAAE,UAAWhyB,CAAX,EAAe;AAErB,WAAO,KAAK6I,CAAL,GAAS7I,CAAC,CAAC+I,CAAX,GAAe,KAAKA,CAAL,GAAS/I,CAAC,CAAC6I,CAAjC;AAEA,GA9SgC;AAgTjCopB,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKppB,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAAvC;AAEA,GApTgC;AAsTjC5I,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAOX,IAAI,CAAC0yB,IAAL,CAAW,KAAKrpB,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAA3C,CAAP;AAEA,GA1TgC;AA4TjCopB,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO3yB,IAAI,CAACwO,GAAL,CAAU,KAAKnF,CAAf,IAAqBrJ,IAAI,CAACwO,GAAL,CAAU,KAAKjF,CAAf,CAA5B;AAEA,GAhUgC;AAkUjCqpB,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKd,YAAL,CAAmB,KAAKnxB,MAAL,MAAiB,CAApC,CAAP;AAEA,GAtUgC;AAwUjCkyB,EAAAA,KAAK,EAAE,YAAY;AAElB;AAEA,UAAMA,KAAK,GAAG7yB,IAAI,CAAC8yB,KAAL,CAAY,CAAE,KAAKvpB,CAAnB,EAAsB,CAAE,KAAKF,CAA7B,IAAmCrJ,IAAI,CAACutB,EAAtD;AAEA,WAAOsF,KAAP;AAEA,GAhVgC;AAkVjCE,EAAAA,UAAU,EAAE,UAAWvyB,CAAX,EAAe;AAE1B,WAAOR,IAAI,CAAC0yB,IAAL,CAAW,KAAKM,iBAAL,CAAwBxyB,CAAxB,CAAX,CAAP;AAEA,GAtVgC;AAwVjCwyB,EAAAA,iBAAiB,EAAE,UAAWxyB,CAAX,EAAe;AAEjC,UAAMyyB,EAAE,GAAG,KAAK5pB,CAAL,GAAS7I,CAAC,CAAC6I,CAAtB;AAAA,UAAyB6pB,EAAE,GAAG,KAAK3pB,CAAL,GAAS/I,CAAC,CAAC+I,CAAzC;AACA,WAAO0pB,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAtB;AAEA,GA7VgC;AA+VjCC,EAAAA,mBAAmB,EAAE,UAAW3yB,CAAX,EAAe;AAEnC,WAAOR,IAAI,CAACwO,GAAL,CAAU,KAAKnF,CAAL,GAAS7I,CAAC,CAAC6I,CAArB,IAA2BrJ,IAAI,CAACwO,GAAL,CAAU,KAAKjF,CAAL,GAAS/I,CAAC,CAAC+I,CAArB,CAAlC;AAEA,GAnWgC;AAqWjC6pB,EAAAA,SAAS,EAAE,UAAWzyB,MAAX,EAAoB;AAE9B,WAAO,KAAKiyB,SAAL,GAAiBhB,cAAjB,CAAiCjxB,MAAjC,CAAP;AAEA,GAzWgC;AA2WjC+tB,EAAAA,IAAI,EAAE,UAAWluB,CAAX,EAAc6yB,KAAd,EAAsB;AAE3B,SAAKhqB,CAAL,IAAU,CAAE7I,CAAC,CAAC6I,CAAF,GAAM,KAAKA,CAAb,IAAmBgqB,KAA7B;AACA,SAAK9pB,CAAL,IAAU,CAAE/I,CAAC,CAAC+I,CAAF,GAAM,KAAKA,CAAb,IAAmB8pB,KAA7B;AAEA,WAAO,IAAP;AAEA,GAlXgC;AAoXjCC,EAAAA,WAAW,EAAE,UAAWC,EAAX,EAAeC,EAAf,EAAmBH,KAAnB,EAA2B;AAEvC,SAAKhqB,CAAL,GAASkqB,EAAE,CAAClqB,CAAH,GAAO,CAAEmqB,EAAE,CAACnqB,CAAH,GAAOkqB,EAAE,CAAClqB,CAAZ,IAAkBgqB,KAAlC;AACA,SAAK9pB,CAAL,GAASgqB,EAAE,CAAChqB,CAAH,GAAO,CAAEiqB,EAAE,CAACjqB,CAAH,GAAOgqB,EAAE,CAAChqB,CAAZ,IAAkB8pB,KAAlC;AAEA,WAAO,IAAP;AAEA,GA3XgC;AA6XjCI,EAAAA,MAAM,EAAE,UAAWjzB,CAAX,EAAe;AAEtB,WAAWA,CAAC,CAAC6I,CAAF,KAAQ,KAAKA,CAAf,IAAwB7I,CAAC,CAAC+I,CAAF,KAAQ,KAAKA,CAA9C;AAEA,GAjYgC;AAmYjCmqB,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAKzC,CAAL,GAAS8jB,KAAK,CAAErhB,MAAF,CAAd;AACA,SAAKvC,CAAL,GAAS4jB,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AAEA,WAAO,IAAP;AAEA,GA5YgC;AA8YjChJ,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5BqhB,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB,KAAKzC,CAAvB;AACA8jB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKvC,CAA3B;AAEA,WAAO4jB,KAAP;AAEA,GAxZgC;AA0ZjCwG,EAAAA,mBAAmB,EAAE,UAAWC,SAAX,EAAsBroB,KAAtB,EAA6BO,MAA7B,EAAsC;AAE1D,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,qEAAd;AAEA;;AAED,SAAKrnB,CAAL,GAASuqB,SAAS,CAACC,IAAV,CAAgBtoB,KAAhB,CAAT;AACA,SAAKhC,CAAL,GAASqqB,SAAS,CAACE,IAAV,CAAgBvoB,KAAhB,CAAT;AAEA,WAAO,IAAP;AAEA,GAvagC;AAyajCwoB,EAAAA,YAAY,EAAE,UAAWC,MAAX,EAAmBnB,KAAnB,EAA2B;AAExC,UAAMhuB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAU+C,KAAV,CAAV;AAAA,UAA6BvyB,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAU8C,KAAV,CAAjC;AAEA,UAAMxpB,CAAC,GAAG,KAAKA,CAAL,GAAS2qB,MAAM,CAAC3qB,CAA1B;AACA,UAAME,CAAC,GAAG,KAAKA,CAAL,GAASyqB,MAAM,CAACzqB,CAA1B;AAEA,SAAKF,CAAL,GAASA,CAAC,GAAGxE,CAAJ,GAAQ0E,CAAC,GAAGjJ,CAAZ,GAAgB0zB,MAAM,CAAC3qB,CAAhC;AACA,SAAKE,CAAL,GAASF,CAAC,GAAG/I,CAAJ,GAAQiJ,CAAC,GAAG1E,CAAZ,GAAgBmvB,MAAM,CAACzqB,CAAhC;AAEA,WAAO,IAAP;AAEA,GArbgC;AAubjCokB,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKtkB,CAAL,GAASrJ,IAAI,CAAC2tB,MAAL,EAAT;AACA,SAAKpkB,CAAL,GAASvJ,IAAI,CAAC2tB,MAAL,EAAT;AAEA,WAAO,IAAP;AAEA;AA9bgC,CAAlC;AAkcA;;;;;;;AAOA,SAASsG,OAAT,GAAmB;AAElB,OAAKjC,QAAL,GAAgB,CAEf,CAFe,EAEZ,CAFY,EAET,CAFS,EAGf,CAHe,EAGZ,CAHY,EAGT,CAHS,EAIf,CAJe,EAIZ,CAJY,EAIT,CAJS,CAAhB;;AAQA,MAAK1wB,SAAS,CAACX,MAAV,GAAmB,CAAxB,EAA4B;AAE3B8vB,IAAAA,OAAO,CAACyD,KAAR,CAAe,+EAAf;AAEA;AAED;;AAEDxyB,MAAM,CAACme,MAAP,CAAeoU,OAAO,CAACnzB,SAAvB,EAAkC;AAEjCqzB,EAAAA,SAAS,EAAE,IAFsB;AAIjC3D,EAAAA,GAAG,EAAE,UAAW4D,GAAX,EAAgBC,GAAhB,EAAqBC,GAArB,EAA0BC,GAA1B,EAA+BC,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDC,GAAnD,EAAyD;AAE7D,UAAMC,EAAE,GAAG,KAAK7C,QAAhB;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUT,GAAV;AAAeS,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUN,GAAV;AAAeM,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUH,GAAV;AAC9BG,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUR,GAAV;AAAeQ,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUL,GAAV;AAAeK,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUF,GAAV;AAC9BE,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUP,GAAV;AAAeO,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUJ,GAAV;AAAeI,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUD,GAAV;AAE9B,WAAO,IAAP;AAEA,GAdgC;AAgBjCE,EAAAA,QAAQ,EAAE,YAAY;AAErB,SAAKtE,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP;AAQA,WAAO,IAAP;AAEA,GA5BgC;AA8BjCW,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBwwB,SAAvB,CAAkC,KAAK1B,QAAvC,CAAP;AAEA,GAlCgC;AAoCjCZ,EAAAA,IAAI,EAAE,UAAWhD,CAAX,EAAe;AAEpB,UAAMyG,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM+C,EAAE,GAAG3G,CAAC,CAAC4D,QAAb;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACtCF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACtCF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAEtC,WAAO,IAAP;AAEA,GA/CgC;AAiDjCC,EAAAA,YAAY,EAAE,UAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAiC;AAE9CF,IAAAA,KAAK,CAACG,oBAAN,CAA4B,IAA5B,EAAkC,CAAlC;AACAF,IAAAA,KAAK,CAACE,oBAAN,CAA4B,IAA5B,EAAkC,CAAlC;AACAD,IAAAA,KAAK,CAACC,oBAAN,CAA4B,IAA5B,EAAkC,CAAlC;AAEA,WAAO,IAAP;AAEA,GAzDgC;AA2DjCC,EAAAA,cAAc,EAAE,UAAWjH,CAAX,EAAe;AAE9B,UAAM2G,EAAE,GAAG3G,CAAC,CAAC4D,QAAb;AAEA,SAAKxB,GAAL,CAECuE,EAAE,CAAE,CAAF,CAFH,EAEUA,EAAE,CAAE,CAAF,CAFZ,EAEmBA,EAAE,CAAE,CAAF,CAFrB,EAGCA,EAAE,CAAE,CAAF,CAHH,EAGUA,EAAE,CAAE,CAAF,CAHZ,EAGmBA,EAAE,CAAE,CAAF,CAHrB,EAICA,EAAE,CAAE,CAAF,CAJH,EAIUA,EAAE,CAAE,CAAF,CAJZ,EAImBA,EAAE,CAAE,EAAF,CAJrB;AAQA,WAAO,IAAP;AAEA,GAzEgC;AA2EjCpD,EAAAA,QAAQ,EAAE,UAAWvD,CAAX,EAAe;AAExB,WAAO,KAAKkH,gBAAL,CAAuB,IAAvB,EAA6BlH,CAA7B,CAAP;AAEA,GA/EgC;AAiFjCmH,EAAAA,WAAW,EAAE,UAAWnH,CAAX,EAAe;AAE3B,WAAO,KAAKkH,gBAAL,CAAuBlH,CAAvB,EAA0B,IAA1B,CAAP;AAEA,GArFgC;AAuFjCkH,EAAAA,gBAAgB,EAAE,UAAWl1B,CAAX,EAAcD,CAAd,EAAkB;AAEnC,UAAMq1B,EAAE,GAAGp1B,CAAC,CAAC4xB,QAAb;AACA,UAAMyD,EAAE,GAAGt1B,CAAC,CAAC6xB,QAAb;AACA,UAAM6C,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM0D,GAAG,GAAGF,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBG,GAAG,GAAGH,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCI,GAAG,GAAGJ,EAAE,CAAE,CAAF,CAA5C;AACA,UAAMK,GAAG,GAAGL,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBM,GAAG,GAAGN,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCO,GAAG,GAAGP,EAAE,CAAE,CAAF,CAA5C;AACA,UAAMQ,GAAG,GAAGR,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBS,GAAG,GAAGT,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCU,GAAG,GAAGV,EAAE,CAAE,CAAF,CAA5C;AAEA,UAAMW,GAAG,GAAGV,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBW,GAAG,GAAGX,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCY,GAAG,GAAGZ,EAAE,CAAE,CAAF,CAA5C;AACA,UAAMa,GAAG,GAAGb,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBc,GAAG,GAAGd,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCe,GAAG,GAAGf,EAAE,CAAE,CAAF,CAA5C;AACA,UAAMgB,GAAG,GAAGhB,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBiB,GAAG,GAAGjB,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCkB,GAAG,GAAGlB,EAAE,CAAE,CAAF,CAA5C;AAEAZ,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGS,GAAN,GAAYR,GAAG,GAAGW,GAAlB,GAAwBV,GAAG,GAAGa,GAAxC;AACA5B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGU,GAAN,GAAYT,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGc,GAAxC;AACA7B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGW,GAAN,GAAYV,GAAG,GAAGa,GAAlB,GAAwBZ,GAAG,GAAGe,GAAxC;AAEA9B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGM,GAAN,GAAYL,GAAG,GAAGQ,GAAlB,GAAwBP,GAAG,GAAGU,GAAxC;AACA5B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGO,GAAN,GAAYN,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGW,GAAxC;AACA7B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGQ,GAAN,GAAYP,GAAG,GAAGU,GAAlB,GAAwBT,GAAG,GAAGY,GAAxC;AAEA9B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGG,GAAN,GAAYF,GAAG,GAAGK,GAAlB,GAAwBJ,GAAG,GAAGO,GAAxC;AACA5B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGM,GAAlB,GAAwBL,GAAG,GAAGQ,GAAxC;AACA7B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGO,GAAlB,GAAwBN,GAAG,GAAGS,GAAxC;AAEA,WAAO,IAAP;AAEA,GAnHgC;AAqHjC/E,EAAAA,cAAc,EAAE,UAAWtxB,CAAX,EAAe;AAE9B,UAAMu0B,EAAE,GAAG,KAAK7C,QAAhB;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAC5Bu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAC5Bu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAE5B,WAAO,IAAP;AAEA,GA/HgC;AAiIjCs2B,EAAAA,WAAW,EAAE,YAAY;AAExB,UAAM/B,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM5xB,CAAC,GAAGy0B,EAAE,CAAE,CAAF,CAAZ;AAAA,UAAmB10B,CAAC,GAAG00B,EAAE,CAAE,CAAF,CAAzB;AAAA,UAAgChwB,CAAC,GAAGgwB,EAAE,CAAE,CAAF,CAAtC;AAAA,UACCgC,CAAC,GAAGhC,EAAE,CAAE,CAAF,CADP;AAAA,UACcttB,CAAC,GAAGstB,EAAE,CAAE,CAAF,CADpB;AAAA,UAC2BpwB,CAAC,GAAGowB,EAAE,CAAE,CAAF,CADjC;AAAA,UAEC30B,CAAC,GAAG20B,EAAE,CAAE,CAAF,CAFP;AAAA,UAEcx0B,CAAC,GAAGw0B,EAAE,CAAE,CAAF,CAFpB;AAAA,UAE2B7yB,CAAC,GAAG6yB,EAAE,CAAE,CAAF,CAFjC;AAIA,WAAOz0B,CAAC,GAAGmH,CAAJ,GAAQvF,CAAR,GAAY5B,CAAC,GAAGqE,CAAJ,GAAQpE,CAApB,GAAwBF,CAAC,GAAG02B,CAAJ,GAAQ70B,CAAhC,GAAoC7B,CAAC,GAAGsE,CAAJ,GAAQvE,CAA5C,GAAgD2E,CAAC,GAAGgyB,CAAJ,GAAQx2B,CAAxD,GAA4DwE,CAAC,GAAG0C,CAAJ,GAAQrH,CAA3E;AAEA,GA3IgC;AA6IjC42B,EAAAA,UAAU,EAAE,UAAWC,MAAX,EAAmBC,iBAAnB,EAAuC;AAElD,QAAKA,iBAAiB,KAAKj0B,SAA3B,EAAuC;AAEtC0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,kFAAd;AAEA;;AAED,UAAMqE,EAAE,GAAGgC,MAAM,CAAC/E,QAAlB;AAAA,UACC6C,EAAE,GAAG,KAAK7C,QADX;AAAA,UAGCoC,GAAG,GAAGW,EAAE,CAAE,CAAF,CAHT;AAAA,UAGgBR,GAAG,GAAGQ,EAAE,CAAE,CAAF,CAHxB;AAAA,UAG+BL,GAAG,GAAGK,EAAE,CAAE,CAAF,CAHvC;AAAA,UAICV,GAAG,GAAGU,EAAE,CAAE,CAAF,CAJT;AAAA,UAIgBP,GAAG,GAAGO,EAAE,CAAE,CAAF,CAJxB;AAAA,UAI+BJ,GAAG,GAAGI,EAAE,CAAE,CAAF,CAJvC;AAAA,UAKCT,GAAG,GAAGS,EAAE,CAAE,CAAF,CALT;AAAA,UAKgBN,GAAG,GAAGM,EAAE,CAAE,CAAF,CALxB;AAAA,UAK+BH,GAAG,GAAGG,EAAE,CAAE,CAAF,CALvC;AAAA,UAOCkC,GAAG,GAAGrC,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GAPzB;AAAA,UAQCyC,GAAG,GAAGvC,GAAG,GAAGL,GAAN,GAAYM,GAAG,GAAGP,GARzB;AAAA,UASC8C,GAAG,GAAG1C,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GATzB;AAAA,UAWC8C,GAAG,GAAGhD,GAAG,GAAG6C,GAAN,GAAY1C,GAAG,GAAG2C,GAAlB,GAAwBxC,GAAG,GAAGyC,GAXrC;AAaA,QAAKC,GAAG,KAAK,CAAb,EAAiB,OAAO,KAAK5G,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,CAAP;AAEjB,UAAM6G,MAAM,GAAG,IAAID,GAAnB;AAEAvC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUoC,GAAG,GAAGI,MAAhB;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEH,GAAG,GAAGD,GAAN,GAAYG,GAAG,GAAGL,GAApB,IAA4B8C,MAAtC;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEF,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GAApB,IAA4B6C,MAAtC;AAEAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUqC,GAAG,GAAGG,MAAhB;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAED,GAAG,GAAGR,GAAN,GAAYM,GAAG,GAAGJ,GAApB,IAA4B+C,MAAtC;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEH,GAAG,GAAGL,GAAN,GAAYM,GAAG,GAAGP,GAApB,IAA4BiD,MAAtC;AAEAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsC,GAAG,GAAGE,MAAhB;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEN,GAAG,GAAGD,GAAN,GAAYG,GAAG,GAAGL,GAApB,IAA4BiD,MAAtC;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEL,GAAG,GAAGJ,GAAN,GAAYG,GAAG,GAAGF,GAApB,IAA4BgD,MAAtC;AAEA,WAAO,IAAP;AAEA,GApLgC;AAsLjCC,EAAAA,SAAS,EAAE,YAAY;AAEtB,QAAIC,GAAJ;AACA,UAAMnJ,CAAC,GAAG,KAAK4D,QAAf;AAEAuF,IAAAA,GAAG,GAAGnJ,CAAC,CAAE,CAAF,CAAP;AAAcA,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASA,CAAC,CAAE,CAAF,CAAV;AAAiBA,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASmJ,GAAT;AAC/BA,IAAAA,GAAG,GAAGnJ,CAAC,CAAE,CAAF,CAAP;AAAcA,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASA,CAAC,CAAE,CAAF,CAAV;AAAiBA,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASmJ,GAAT;AAC/BA,IAAAA,GAAG,GAAGnJ,CAAC,CAAE,CAAF,CAAP;AAAcA,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASA,CAAC,CAAE,CAAF,CAAV;AAAiBA,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASmJ,GAAT;AAE/B,WAAO,IAAP;AAEA,GAjMgC;AAmMjCC,EAAAA,eAAe,EAAE,UAAWC,OAAX,EAAqB;AAErC,WAAO,KAAKpC,cAAL,CAAqBoC,OAArB,EAA+BX,UAA/B,CAA2C,IAA3C,EAAkDQ,SAAlD,EAAP;AAEA,GAvMgC;AAyMjCI,EAAAA,kBAAkB,EAAE,UAAW33B,CAAX,EAAe;AAElC,UAAMquB,CAAC,GAAG,KAAK4D,QAAf;AAEAjyB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AACAruB,IAAAA,CAAC,CAAE,CAAF,CAAD,GAASquB,CAAC,CAAE,CAAF,CAAV;AAEA,WAAO,IAAP;AAEA,GAzNgC;AA2NjCuJ,EAAAA,cAAc,EAAE,UAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBC,EAAvB,EAA2BC,QAA3B,EAAqCC,EAArC,EAAyCC,EAAzC,EAA8C;AAE7D,UAAMrzB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAUkI,QAAV,CAAV;AACA,UAAM13B,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAUiI,QAAV,CAAV;AAEA,SAAKxH,GAAL,CACCsH,EAAE,GAAGjzB,CADN,EACSizB,EAAE,GAAGx3B,CADd,EACiB,CAAEw3B,EAAF,IAASjzB,CAAC,GAAGozB,EAAJ,GAAS33B,CAAC,GAAG43B,EAAtB,IAA6BD,EAA7B,GAAkCL,EADnD,EAEC,CAAEG,EAAF,GAAOz3B,CAFR,EAEWy3B,EAAE,GAAGlzB,CAFhB,EAEmB,CAAEkzB,EAAF,IAAS,CAAEz3B,CAAF,GAAM23B,EAAN,GAAWpzB,CAAC,GAAGqzB,EAAxB,IAA+BA,EAA/B,GAAoCL,EAFvD,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP;AAMA,GAtOgC;AAwOjCM,EAAAA,KAAK,EAAE,UAAWL,EAAX,EAAeC,EAAf,EAAoB;AAE1B,UAAMlD,EAAE,GAAG,KAAK7C,QAAhB;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWiD,EAAX;AAAejD,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWiD,EAAX;AAAejD,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWiD,EAAX;AAC9BjD,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWkD,EAAX;AAAelD,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWkD,EAAX;AAAelD,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWkD,EAAX;AAE9B,WAAO,IAAP;AAEA,GAjPgC;AAmPjCK,EAAAA,MAAM,EAAE,UAAWC,KAAX,EAAmB;AAE1B,UAAMxzB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAV;AACA,UAAM/3B,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAV;AAEA,UAAMxD,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM0D,GAAG,GAAGb,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBc,GAAG,GAAGd,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCe,GAAG,GAAGf,EAAE,CAAE,CAAF,CAA5C;AACA,UAAMgB,GAAG,GAAGhB,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBiB,GAAG,GAAGjB,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCkB,GAAG,GAAGlB,EAAE,CAAE,CAAF,CAA5C;AAEAA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG6wB,GAAJ,GAAUp1B,CAAC,GAAGu1B,GAAxB;AACAhB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG8wB,GAAJ,GAAUr1B,CAAC,GAAGw1B,GAAxB;AACAjB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG+wB,GAAJ,GAAUt1B,CAAC,GAAGy1B,GAAxB;AAEAlB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEv0B,CAAF,GAAMo1B,GAAN,GAAY7wB,CAAC,GAAGgxB,GAA1B;AACAhB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEv0B,CAAF,GAAMq1B,GAAN,GAAY9wB,CAAC,GAAGixB,GAA1B;AACAjB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEv0B,CAAF,GAAMs1B,GAAN,GAAY/wB,CAAC,GAAGkxB,GAA1B;AAEA,WAAO,IAAP;AAEA,GAvQgC;AAyQjCuC,EAAAA,SAAS,EAAE,UAAWV,EAAX,EAAeC,EAAf,EAAoB;AAE9B,UAAMhD,EAAE,GAAG,KAAK7C,QAAhB;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAW+C,EAAE,GAAG/C,EAAE,CAAE,CAAF,CAAlB;AAAyBA,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAW+C,EAAE,GAAG/C,EAAE,CAAE,CAAF,CAAlB;AAAyBA,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAW+C,EAAE,GAAG/C,EAAE,CAAE,CAAF,CAAlB;AAClDA,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWgD,EAAE,GAAGhD,EAAE,CAAE,CAAF,CAAlB;AAAyBA,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWgD,EAAE,GAAGhD,EAAE,CAAE,CAAF,CAAlB;AAAyBA,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWgD,EAAE,GAAGhD,EAAE,CAAE,CAAF,CAAlB;AAElD,WAAO,IAAP;AAEA,GAlRgC;AAoRjCpB,EAAAA,MAAM,EAAE,UAAWsD,MAAX,EAAoB;AAE3B,UAAMlC,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM+C,EAAE,GAAGgC,MAAM,CAAC/E,QAAlB;;AAEA,SAAM,IAAIhwB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,UAAK6yB,EAAE,CAAE7yB,CAAF,CAAF,KAAY+yB,EAAE,CAAE/yB,CAAF,CAAnB,EAA2B,OAAO,KAAP;AAE3B;;AAED,WAAO,IAAP;AAEA,GAjSgC;AAmSjC0xB,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;;AAE5B,SAAM,IAAI9J,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKgwB,QAAL,CAAehwB,CAAf,IAAqBmrB,KAAK,CAAEnrB,CAAC,GAAG8J,MAAN,CAA1B;AAEA;;AAED,WAAO,IAAP;AAEA,GA/SgC;AAiTjChJ,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,UAAM+oB,EAAE,GAAG,KAAK7C,QAAhB;AAEA7E,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB+oB,EAAE,CAAE,CAAF,CAApB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AAEA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AAEA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AAEA,WAAO1H,KAAP;AAEA;AAtUgC,CAAlC;AA0UA;;;;;;AAMA,IAAIoL,OAAJ;;AAEA,MAAMC,UAAU,GAAG;AAElBC,EAAAA,UAAU,EAAE,UAAWC,KAAX,EAAmB;AAE9B,QAAK,UAAUl1B,IAAV,CAAgBk1B,KAAK,CAACC,GAAtB,CAAL,EAAmC;AAElC,aAAOD,KAAK,CAACC,GAAb;AAEA;;AAED,QAAK,OAAOC,iBAAP,IAA4B,WAAjC,EAA+C;AAE9C,aAAOF,KAAK,CAACC,GAAb;AAEA;;AAED,QAAIE,MAAJ;;AAEA,QAAKH,KAAK,YAAYE,iBAAtB,EAA0C;AAEzCC,MAAAA,MAAM,GAAGH,KAAT;AAEA,KAJD,MAIO;AAEN,UAAKH,OAAO,KAAKx1B,SAAjB,EAA6Bw1B,OAAO,GAAG1xB,QAAQ,CAACiyB,eAAT,CAA0B,8BAA1B,EAA0D,QAA1D,CAAV;AAE7BP,MAAAA,OAAO,CAAC5sB,KAAR,GAAgB+sB,KAAK,CAAC/sB,KAAtB;AACA4sB,MAAAA,OAAO,CAAC3sB,MAAR,GAAiB8sB,KAAK,CAAC9sB,MAAvB;;AAEA,YAAMmtB,OAAO,GAAGR,OAAO,CAACS,UAAR,CAAoB,IAApB,CAAhB;;AAEA,UAAKN,KAAK,YAAYO,SAAtB,EAAkC;AAEjCF,QAAAA,OAAO,CAACG,YAAR,CAAsBR,KAAtB,EAA6B,CAA7B,EAAgC,CAAhC;AAEA,OAJD,MAIO;AAENK,QAAAA,OAAO,CAACI,SAAR,CAAmBT,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgCA,KAAK,CAAC/sB,KAAtC,EAA6C+sB,KAAK,CAAC9sB,MAAnD;AAEA;;AAEDitB,MAAAA,MAAM,GAAGN,OAAT;AAEA;;AAED,QAAKM,MAAM,CAACltB,KAAP,GAAe,IAAf,IAAuBktB,MAAM,CAACjtB,MAAP,GAAgB,IAA5C,EAAmD;AAElD,aAAOitB,MAAM,CAACO,SAAP,CAAkB,YAAlB,EAAgC,GAAhC,CAAP;AAEA,KAJD,MAIO;AAEN,aAAOP,MAAM,CAACO,SAAP,CAAkB,WAAlB,CAAP;AAEA;AAED;AAvDiB,CAAnB;AA2DA;;;;;;;AAMA,IAAIC,SAAS,GAAG,CAAhB;;AAEA,SAASC,OAAT,CAAkBZ,KAAlB,EAAyBa,OAAzB,EAAkCC,KAAlC,EAAyCC,KAAzC,EAAgDC,SAAhD,EAA2DC,SAA3D,EAAsEC,MAAtE,EAA8EztB,IAA9E,EAAoF0tB,UAApF,EAAgGC,QAAhG,EAA2G;AAE1Gp4B,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAER,IAAAA,KAAK,EAAEi0B,SAAS;AAAlB,GAAnC;AAEA,OAAKtL,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA,OAAKnW,IAAL,GAAY,EAAZ;AAEA,OAAKohB,KAAL,GAAaA,KAAK,KAAK31B,SAAV,GAAsB21B,KAAtB,GAA8BY,OAAO,CAACS,aAAnD;AACA,OAAKC,OAAL,GAAe,EAAf;AAEA,OAAKT,OAAL,GAAeA,OAAO,KAAKx2B,SAAZ,GAAwBw2B,OAAxB,GAAkCD,OAAO,CAACW,eAAzD;AAEA,OAAKT,KAAL,GAAaA,KAAK,KAAKz2B,SAAV,GAAsBy2B,KAAtB,GAA8B5U,mBAA3C;AACA,OAAK6U,KAAL,GAAaA,KAAK,KAAK12B,SAAV,GAAsB02B,KAAtB,GAA8B7U,mBAA3C;AAEA,OAAK8U,SAAL,GAAiBA,SAAS,KAAK32B,SAAd,GAA0B22B,SAA1B,GAAsCvU,YAAvD;AACA,OAAKwU,SAAL,GAAiBA,SAAS,KAAK52B,SAAd,GAA0B42B,SAA1B,GAAsCrU,wBAAvD;AAEA,OAAKuU,UAAL,GAAkBA,UAAU,KAAK92B,SAAf,GAA2B82B,UAA3B,GAAwC,CAA1D;AAEA,OAAKD,MAAL,GAAcA,MAAM,KAAK72B,SAAX,GAAuB62B,MAAvB,GAAgCtT,UAA9C;AACA,OAAK4T,cAAL,GAAsB,IAAtB;AACA,OAAK/tB,IAAL,GAAYA,IAAI,KAAKpJ,SAAT,GAAqBoJ,IAArB,GAA4BqZ,gBAAxC;AAEA,OAAK1Z,MAAL,GAAc,IAAI6kB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAd;AACA,OAAKwJ,MAAL,GAAc,IAAIxJ,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAd;AACA,OAAKqD,MAAL,GAAc,IAAIrD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAd;AACA,OAAKqH,QAAL,GAAgB,CAAhB;AAEA,OAAKoC,gBAAL,GAAwB,IAAxB;AACA,OAAKrD,MAAL,GAAc,IAAI9C,OAAJ,EAAd;AAEA,OAAKoG,eAAL,GAAuB,IAAvB;AACA,OAAKC,gBAAL,GAAwB,KAAxB;AACA,OAAKC,KAAL,GAAa,IAAb;AACA,OAAKC,eAAL,GAAuB,CAAvB,CApC0G,CAoChF;AAE1B;AACA;AACA;AACA;;AACA,OAAKV,QAAL,GAAgBA,QAAQ,KAAK/2B,SAAb,GAAyB+2B,QAAzB,GAAoCtP,cAApD;AAEA,OAAKiQ,OAAL,GAAe,CAAf;AACA,OAAKC,QAAL,GAAgB,IAAhB;AAEA;;AAEDpB,OAAO,CAACS,aAAR,GAAwBh3B,SAAxB;AACAu2B,OAAO,CAACW,eAAR,GAA0B7V,SAA1B;AAEAkV,OAAO,CAACx4B,SAAR,GAAoBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAE9EoC,EAAAA,WAAW,EAAEo2B,OAFiE;AAI9EsB,EAAAA,SAAS,EAAE,IAJmE;AAM9EC,EAAAA,YAAY,EAAE,YAAY;AAEzB,SAAK9D,MAAL,CAAYY,cAAZ,CAA4B,KAAK7rB,MAAL,CAAYzC,CAAxC,EAA2C,KAAKyC,MAAL,CAAYvC,CAAvD,EAA0D,KAAK4wB,MAAL,CAAY9wB,CAAtE,EAAyE,KAAK8wB,MAAL,CAAY5wB,CAArF,EAAwF,KAAKyuB,QAA7F,EAAuG,KAAKhE,MAAL,CAAY3qB,CAAnH,EAAsH,KAAK2qB,MAAL,CAAYzqB,CAAlI;AAEA,GAV6E;AAY9E4nB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAhB6E;AAkB9EA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAK1I,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB;AAEA,SAAKohB,KAAL,GAAa1Y,MAAM,CAAC0Y,KAApB;AACA,SAAKsB,OAAL,GAAeha,MAAM,CAACga,OAAP,CAAe/4B,KAAf,CAAsB,CAAtB,CAAf;AAEA,SAAKs4B,OAAL,GAAevZ,MAAM,CAACuZ,OAAtB;AAEA,SAAKC,KAAL,GAAaxZ,MAAM,CAACwZ,KAApB;AACA,SAAKC,KAAL,GAAazZ,MAAM,CAACyZ,KAApB;AAEA,SAAKC,SAAL,GAAiB1Z,MAAM,CAAC0Z,SAAxB;AACA,SAAKC,SAAL,GAAiB3Z,MAAM,CAAC2Z,SAAxB;AAEA,SAAKE,UAAL,GAAkB7Z,MAAM,CAAC6Z,UAAzB;AAEA,SAAKD,MAAL,GAAc5Z,MAAM,CAAC4Z,MAArB;AACA,SAAKM,cAAL,GAAsBla,MAAM,CAACka,cAA7B;AACA,SAAK/tB,IAAL,GAAY6T,MAAM,CAAC7T,IAAnB;AAEA,SAAKL,MAAL,CAAYslB,IAAZ,CAAkBpR,MAAM,CAAClU,MAAzB;AACA,SAAKquB,MAAL,CAAY/I,IAAZ,CAAkBpR,MAAM,CAACma,MAAzB;AACA,SAAKnG,MAAL,CAAY5C,IAAZ,CAAkBpR,MAAM,CAACgU,MAAzB;AACA,SAAKgE,QAAL,GAAgBhY,MAAM,CAACgY,QAAvB;AAEA,SAAKoC,gBAAL,GAAwBpa,MAAM,CAACoa,gBAA/B;AACA,SAAKrD,MAAL,CAAY3F,IAAZ,CAAkBpR,MAAM,CAAC+W,MAAzB;AAEA,SAAKsD,eAAL,GAAuBra,MAAM,CAACqa,eAA9B;AACA,SAAKC,gBAAL,GAAwBta,MAAM,CAACsa,gBAA/B;AACA,SAAKC,KAAL,GAAava,MAAM,CAACua,KAApB;AACA,SAAKC,eAAL,GAAuBxa,MAAM,CAACwa,eAA9B;AACA,SAAKV,QAAL,GAAgB9Z,MAAM,CAAC8Z,QAAvB;AAEA,WAAO,IAAP;AAEA,GAvD6E;AAyD9EgB,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMC,YAAY,GAAKD,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAA7D;;AAEA,QAAK,CAAEC,YAAF,IAAkBD,IAAI,CAACE,QAAL,CAAe,KAAKlN,IAApB,MAA+BhrB,SAAtD,EAAkE;AAEjE,aAAOg4B,IAAI,CAACE,QAAL,CAAe,KAAKlN,IAApB,CAAP;AAEA;;AAED,UAAMhO,MAAM,GAAG;AAEdmb,MAAAA,QAAQ,EAAE;AACTT,QAAAA,OAAO,EAAE,GADA;AAETtuB,QAAAA,IAAI,EAAE,SAFG;AAGTgvB,QAAAA,SAAS,EAAE;AAHF,OAFI;AAQdpN,MAAAA,IAAI,EAAE,KAAKA,IARG;AASdzW,MAAAA,IAAI,EAAE,KAAKA,IATG;AAWdiiB,MAAAA,OAAO,EAAE,KAAKA,OAXA;AAadY,MAAAA,MAAM,EAAE,CAAE,KAAKA,MAAL,CAAY9wB,CAAd,EAAiB,KAAK8wB,MAAL,CAAY5wB,CAA7B,CAbM;AAcduC,MAAAA,MAAM,EAAE,CAAE,KAAKA,MAAL,CAAYzC,CAAd,EAAiB,KAAKyC,MAAL,CAAYvC,CAA7B,CAdM;AAedyqB,MAAAA,MAAM,EAAE,CAAE,KAAKA,MAAL,CAAY3qB,CAAd,EAAiB,KAAK2qB,MAAL,CAAYzqB,CAA7B,CAfM;AAgBdyuB,MAAAA,QAAQ,EAAE,KAAKA,QAhBD;AAkBdoD,MAAAA,IAAI,EAAE,CAAE,KAAK5B,KAAP,EAAc,KAAKC,KAAnB,CAlBQ;AAoBdG,MAAAA,MAAM,EAAE,KAAKA,MApBC;AAqBdztB,MAAAA,IAAI,EAAE,KAAKA,IArBG;AAsBd2tB,MAAAA,QAAQ,EAAE,KAAKA,QAtBD;AAwBdH,MAAAA,SAAS,EAAE,KAAKA,SAxBF;AAyBdD,MAAAA,SAAS,EAAE,KAAKA,SAzBF;AA0BdG,MAAAA,UAAU,EAAE,KAAKA,UA1BH;AA4BdU,MAAAA,KAAK,EAAE,KAAKA,KA5BE;AA8BdD,MAAAA,gBAAgB,EAAE,KAAKA,gBA9BT;AA+BdE,MAAAA,eAAe,EAAE,KAAKA;AA/BR,KAAf;;AAmCA,QAAK,KAAK9B,KAAL,KAAe31B,SAApB,EAAgC;AAE/B;AAEA,YAAM21B,KAAK,GAAG,KAAKA,KAAnB;;AAEA,UAAKA,KAAK,CAAC3K,IAAN,KAAehrB,SAApB,EAAgC;AAE/B21B,QAAAA,KAAK,CAAC3K,IAAN,GAAaV,SAAS,CAACI,YAAV,EAAb,CAF+B,CAEQ;AAEvC;;AAED,UAAK,CAAEuN,YAAF,IAAkBD,IAAI,CAACM,MAAL,CAAa3C,KAAK,CAAC3K,IAAnB,MAA8BhrB,SAArD,EAAiE;AAEhE,YAAIkQ,GAAJ;;AAEA,YAAKpS,KAAK,CAACoC,OAAN,CAAey1B,KAAf,CAAL,EAA8B;AAE7B;AAEAzlB,UAAAA,GAAG,GAAG,EAAN;;AAEA,eAAM,IAAIjR,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGs2B,KAAK,CAAC/3B,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhDiR,YAAAA,GAAG,CAAC9H,IAAJ,CAAUqtB,UAAU,CAACC,UAAX,CAAuBC,KAAK,CAAE12B,CAAF,CAA5B,CAAV;AAEA;AAED,SAZD,MAYO;AAEN;AAEAiR,UAAAA,GAAG,GAAGulB,UAAU,CAACC,UAAX,CAAuBC,KAAvB,CAAN;AAEA;;AAEDqC,QAAAA,IAAI,CAACM,MAAL,CAAa3C,KAAK,CAAC3K,IAAnB,IAA4B;AAC3BA,UAAAA,IAAI,EAAE2K,KAAK,CAAC3K,IADe;AAE3B9a,UAAAA,GAAG,EAAEA;AAFsB,SAA5B;AAKA;;AAED8M,MAAAA,MAAM,CAAC2Y,KAAP,GAAeA,KAAK,CAAC3K,IAArB;AAEA;;AAED,QAAK,CAAEiN,YAAP,EAAsB;AAErBD,MAAAA,IAAI,CAACE,QAAL,CAAe,KAAKlN,IAApB,IAA6BhO,MAA7B;AAEA;;AAED,WAAOA,MAAP;AAEA,GA7J6E;AA+J9Eub,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAK9wB,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAApB;AAEA,GAnK6E;AAqK9EovB,EAAAA,WAAW,EAAE,UAAWC,EAAX,EAAgB;AAE5B,QAAK,KAAKjC,OAAL,KAAiBnV,SAAtB,EAAkC,OAAOoX,EAAP;AAElCA,IAAAA,EAAE,CAACzJ,YAAH,CAAiB,KAAKgF,MAAtB;;AAEA,QAAKyE,EAAE,CAACnyB,CAAH,GAAO,CAAP,IAAYmyB,EAAE,CAACnyB,CAAH,GAAO,CAAxB,EAA4B;AAE3B,cAAS,KAAKmwB,KAAd;AAEC,aAAK7U,cAAL;AAEC6W,UAAAA,EAAE,CAACnyB,CAAH,GAAOmyB,EAAE,CAACnyB,CAAH,GAAOrJ,IAAI,CAACwE,KAAL,CAAYg3B,EAAE,CAACnyB,CAAf,CAAd;AACA;;AAED,aAAKub,mBAAL;AAEC4W,UAAAA,EAAE,CAACnyB,CAAH,GAAOmyB,EAAE,CAACnyB,CAAH,GAAO,CAAP,GAAW,CAAX,GAAe,CAAtB;AACA;;AAED,aAAKwb,sBAAL;AAEC,cAAK7kB,IAAI,CAACwO,GAAL,CAAUxO,IAAI,CAACwE,KAAL,CAAYg3B,EAAE,CAACnyB,CAAf,IAAqB,CAA/B,MAAuC,CAA5C,EAAgD;AAE/CmyB,YAAAA,EAAE,CAACnyB,CAAH,GAAOrJ,IAAI,CAACyvB,IAAL,CAAW+L,EAAE,CAACnyB,CAAd,IAAoBmyB,EAAE,CAACnyB,CAA9B;AAEA,WAJD,MAIO;AAENmyB,YAAAA,EAAE,CAACnyB,CAAH,GAAOmyB,EAAE,CAACnyB,CAAH,GAAOrJ,IAAI,CAACwE,KAAL,CAAYg3B,EAAE,CAACnyB,CAAf,CAAd;AAEA;;AAED;AAxBF;AA4BA;;AAED,QAAKmyB,EAAE,CAACjyB,CAAH,GAAO,CAAP,IAAYiyB,EAAE,CAACjyB,CAAH,GAAO,CAAxB,EAA4B;AAE3B,cAAS,KAAKkwB,KAAd;AAEC,aAAK9U,cAAL;AAEC6W,UAAAA,EAAE,CAACjyB,CAAH,GAAOiyB,EAAE,CAACjyB,CAAH,GAAOvJ,IAAI,CAACwE,KAAL,CAAYg3B,EAAE,CAACjyB,CAAf,CAAd;AACA;;AAED,aAAKqb,mBAAL;AAEC4W,UAAAA,EAAE,CAACjyB,CAAH,GAAOiyB,EAAE,CAACjyB,CAAH,GAAO,CAAP,GAAW,CAAX,GAAe,CAAtB;AACA;;AAED,aAAKsb,sBAAL;AAEC,cAAK7kB,IAAI,CAACwO,GAAL,CAAUxO,IAAI,CAACwE,KAAL,CAAYg3B,EAAE,CAACjyB,CAAf,IAAqB,CAA/B,MAAuC,CAA5C,EAAgD;AAE/CiyB,YAAAA,EAAE,CAACjyB,CAAH,GAAOvJ,IAAI,CAACyvB,IAAL,CAAW+L,EAAE,CAACjyB,CAAd,IAAoBiyB,EAAE,CAACjyB,CAA9B;AAEA,WAJD,MAIO;AAENiyB,YAAAA,EAAE,CAACjyB,CAAH,GAAOiyB,EAAE,CAACjyB,CAAH,GAAOvJ,IAAI,CAACwE,KAAL,CAAYg3B,EAAE,CAACjyB,CAAf,CAAd;AAEA;;AAED;AAxBF;AA4BA;;AAED,QAAK,KAAKgxB,KAAV,EAAkB;AAEjBiB,MAAAA,EAAE,CAACjyB,CAAH,GAAO,IAAIiyB,EAAE,CAACjyB,CAAd;AAEA;;AAED,WAAOiyB,EAAP;AAEA;AAnP6E,CAA3D,CAApB;AAuPA95B,MAAM,CAACkE,cAAP,CAAuB0zB,OAAO,CAACx4B,SAA/B,EAA0C,aAA1C,EAAyD;AAExD0vB,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,QAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKq1B,OAAL;AAEtB;AANuD,CAAzD;AAUA;;;;;;;;AAQA,SAASgB,OAAT,CAAkBpyB,CAAC,GAAG,CAAtB,EAAyBE,CAAC,GAAG,CAA7B,EAAgCmyB,CAAC,GAAG,CAApC,EAAuC5c,CAAC,GAAG,CAA3C,EAA+C;AAE9C,OAAKzV,CAAL,GAASA,CAAT;AACA,OAAKE,CAAL,GAASA,CAAT;AACA,OAAKmyB,CAAL,GAASA,CAAT;AACA,OAAK5c,CAAL,GAASA,CAAT;AAEA;;AAEDpd,MAAM,CAACwV,gBAAP,CAAyBukB,OAAO,CAAC36B,SAAjC,EAA4C;AAE3C,WAAS;AAER8e,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK8b,CAAZ;AAEA,KANO;AAQRlL,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKs2B,CAAL,GAASt2B,KAAT;AAEA;AAZO,GAFkC;AAkB3C,YAAU;AAETwa,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKd,CAAZ;AAEA,KANQ;AAQT0R,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAK0Z,CAAL,GAAS1Z,KAAT;AAEA;AAZQ;AAlBiC,CAA5C;AAoCA1D,MAAM,CAACme,MAAP,CAAe4b,OAAO,CAAC36B,SAAvB,EAAkC;AAEjC66B,EAAAA,SAAS,EAAE,IAFsB;AAIjCnL,EAAAA,GAAG,EAAE,UAAWnnB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAoB5c,CAApB,EAAwB;AAE5B,SAAKzV,CAAL,GAASA,CAAT;AACA,SAAKE,CAAL,GAASA,CAAT;AACA,SAAKmyB,CAAL,GAASA,CAAT;AACA,SAAK5c,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAbgC;AAejC+R,EAAAA,SAAS,EAAE,UAAWC,MAAX,EAAoB;AAE9B,SAAKznB,CAAL,GAASynB,MAAT;AACA,SAAKvnB,CAAL,GAASunB,MAAT;AACA,SAAK4K,CAAL,GAAS5K,MAAT;AACA,SAAKhS,CAAL,GAASgS,MAAT;AAEA,WAAO,IAAP;AAEA,GAxBgC;AA0BjCC,EAAAA,IAAI,EAAE,UAAW1nB,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAhCgC;AAkCjC2nB,EAAAA,IAAI,EAAE,UAAWznB,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAxCgC;AA0CjCqyB,EAAAA,IAAI,EAAE,UAAWF,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAhDgC;AAkDjCG,EAAAA,IAAI,EAAE,UAAW/c,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAxDgC;AA0DjCmS,EAAAA,YAAY,EAAE,UAAW1lB,KAAX,EAAkBnG,KAAlB,EAA0B;AAEvC,YAASmG,KAAT;AAEC,WAAK,CAAL;AAAQ,aAAKlC,CAAL,GAASjE,KAAT;AAAgB;;AACxB,WAAK,CAAL;AAAQ,aAAKmE,CAAL,GAASnE,KAAT;AAAgB;;AACxB,WAAK,CAAL;AAAQ,aAAKs2B,CAAL,GAASt2B,KAAT;AAAgB;;AACxB,WAAK,CAAL;AAAQ,aAAK0Z,CAAL,GAAS1Z,KAAT;AAAgB;;AACxB;AAAS,cAAM,IAAIE,KAAJ,CAAW,4BAA4BiG,KAAvC,CAAN;AANV;;AAUA,WAAO,IAAP;AAEA,GAxEgC;AA0EjC2lB,EAAAA,YAAY,EAAE,UAAW3lB,KAAX,EAAmB;AAEhC,YAASA,KAAT;AAEC,WAAK,CAAL;AAAQ,eAAO,KAAKlC,CAAZ;;AACR,WAAK,CAAL;AAAQ,eAAO,KAAKE,CAAZ;;AACR,WAAK,CAAL;AAAQ,eAAO,KAAKmyB,CAAZ;;AACR,WAAK,CAAL;AAAQ,eAAO,KAAK5c,CAAZ;;AACR;AAAS,cAAM,IAAIxZ,KAAJ,CAAW,4BAA4BiG,KAAvC,CAAN;AANV;AAUA,GAtFgC;AAwFjC4lB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAKmG,CAA3B,EAA8B,KAAKE,CAAnC,EAAsC,KAAKmyB,CAA3C,EAA8C,KAAK5c,CAAnD,CAAP;AAEA,GA5FgC;AA8FjCsS,EAAAA,IAAI,EAAE,UAAW5wB,CAAX,EAAe;AAEpB,SAAK6I,CAAL,GAAS7I,CAAC,CAAC6I,CAAX;AACA,SAAKE,CAAL,GAAS/I,CAAC,CAAC+I,CAAX;AACA,SAAKmyB,CAAL,GAASl7B,CAAC,CAACk7B,CAAX;AACA,SAAK5c,CAAL,GAAWte,CAAC,CAACse,CAAF,KAAQ/b,SAAV,GAAwBvC,CAAC,CAACse,CAA1B,GAA8B,CAAvC;AAEA,WAAO,IAAP;AAEA,GAvGgC;AAyGjCnF,EAAAA,GAAG,EAAE,UAAWnZ,CAAX,EAAcse,CAAd,EAAkB;AAEtB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKW,UAAL,CAAiB7wB,CAAjB,EAAoBse,CAApB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AACA,SAAKmyB,CAAL,IAAUl7B,CAAC,CAACk7B,CAAZ;AACA,SAAK5c,CAAL,IAAUte,CAAC,CAACse,CAAZ;AAEA,WAAO,IAAP;AAEA,GAzHgC;AA2HjCwS,EAAAA,SAAS,EAAE,UAAWhxB,CAAX,EAAe;AAEzB,SAAK+I,CAAL,IAAU/I,CAAV;AACA,SAAKiJ,CAAL,IAAUjJ,CAAV;AACA,SAAKo7B,CAAL,IAAUp7B,CAAV;AACA,SAAKwe,CAAL,IAAUxe,CAAV;AAEA,WAAO,IAAP;AAEA,GApIgC;AAsIjC+wB,EAAAA,UAAU,EAAE,UAAWjxB,CAAX,EAAcD,CAAd,EAAkB;AAE7B,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AACA,SAAKmyB,CAAL,GAASt7B,CAAC,CAACs7B,CAAF,GAAMv7B,CAAC,CAACu7B,CAAjB;AACA,SAAK5c,CAAL,GAAS1e,CAAC,CAAC0e,CAAF,GAAM3e,CAAC,CAAC2e,CAAjB;AAEA,WAAO,IAAP;AAEA,GA/IgC;AAiJjCyS,EAAAA,eAAe,EAAE,UAAW/wB,CAAX,EAAcF,CAAd,EAAkB;AAElC,SAAK+I,CAAL,IAAU7I,CAAC,CAAC6I,CAAF,GAAM/I,CAAhB;AACA,SAAKiJ,CAAL,IAAU/I,CAAC,CAAC+I,CAAF,GAAMjJ,CAAhB;AACA,SAAKo7B,CAAL,IAAUl7B,CAAC,CAACk7B,CAAF,GAAMp7B,CAAhB;AACA,SAAKwe,CAAL,IAAUte,CAAC,CAACse,CAAF,GAAMxe,CAAhB;AAEA,WAAO,IAAP;AAEA,GA1JgC;AA4JjCkxB,EAAAA,GAAG,EAAE,UAAWhxB,CAAX,EAAcse,CAAd,EAAkB;AAEtB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKe,UAAL,CAAiBjxB,CAAjB,EAAoBse,CAApB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AACA,SAAKmyB,CAAL,IAAUl7B,CAAC,CAACk7B,CAAZ;AACA,SAAK5c,CAAL,IAAUte,CAAC,CAACse,CAAZ;AAEA,WAAO,IAAP;AAEA,GA5KgC;AA8KjC4S,EAAAA,SAAS,EAAE,UAAWpxB,CAAX,EAAe;AAEzB,SAAK+I,CAAL,IAAU/I,CAAV;AACA,SAAKiJ,CAAL,IAAUjJ,CAAV;AACA,SAAKo7B,CAAL,IAAUp7B,CAAV;AACA,SAAKwe,CAAL,IAAUxe,CAAV;AAEA,WAAO,IAAP;AAEA,GAvLgC;AAyLjCmxB,EAAAA,UAAU,EAAE,UAAWrxB,CAAX,EAAcD,CAAd,EAAkB;AAE7B,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AACA,SAAKmyB,CAAL,GAASt7B,CAAC,CAACs7B,CAAF,GAAMv7B,CAAC,CAACu7B,CAAjB;AACA,SAAK5c,CAAL,GAAS1e,CAAC,CAAC0e,CAAF,GAAM3e,CAAC,CAAC2e,CAAjB;AAEA,WAAO,IAAP;AAEA,GAlMgC;AAoMjC8S,EAAAA,cAAc,EAAE,UAAWd,MAAX,EAAoB;AAEnC,SAAKznB,CAAL,IAAUynB,MAAV;AACA,SAAKvnB,CAAL,IAAUunB,MAAV;AACA,SAAK4K,CAAL,IAAU5K,MAAV;AACA,SAAKhS,CAAL,IAAUgS,MAAV;AAEA,WAAO,IAAP;AAEA,GA7MgC;AA+MjCgL,EAAAA,YAAY,EAAE,UAAW1N,CAAX,EAAe;AAE5B,UAAM/kB,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBE,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8BmyB,CAAC,GAAG,KAAKA,CAAvC;AAAA,UAA0C5c,CAAC,GAAG,KAAKA,CAAnD;AACA,UAAMvX,CAAC,GAAG6mB,CAAC,CAAC4D,QAAZ;AAEA,SAAK3oB,CAAL,GAAS9B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAAnC,GAAuCn0B,CAAC,CAAE,EAAF,CAAD,GAAUuX,CAA1D;AACA,SAAKvV,CAAL,GAAShC,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAAnC,GAAuCn0B,CAAC,CAAE,EAAF,CAAD,GAAUuX,CAA1D;AACA,SAAK4c,CAAL,GAASn0B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,EAAF,CAAD,GAAUm0B,CAApC,GAAwCn0B,CAAC,CAAE,EAAF,CAAD,GAAUuX,CAA3D;AACA,SAAKA,CAAL,GAASvX,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,EAAF,CAAD,GAAUm0B,CAApC,GAAwCn0B,CAAC,CAAE,EAAF,CAAD,GAAUuX,CAA3D;AAEA,WAAO,IAAP;AAEA,GA3NgC;AA6NjCgT,EAAAA,YAAY,EAAE,UAAWhB,MAAX,EAAoB;AAEjC,WAAO,KAAKc,cAAL,CAAqB,IAAId,MAAzB,CAAP;AAEA,GAjOgC;AAmOjCiL,EAAAA,0BAA0B,EAAE,UAAWp3B,CAAX,EAAe;AAE1C;AAEA;AAEA,SAAKma,CAAL,GAAS,IAAI9e,IAAI,CAACg8B,IAAL,CAAWr3B,CAAC,CAACma,CAAb,CAAb;AAEA,UAAMxe,CAAC,GAAGN,IAAI,CAAC0yB,IAAL,CAAW,IAAI/tB,CAAC,CAACma,CAAF,GAAMna,CAAC,CAACma,CAAvB,CAAV;;AAEA,QAAKxe,CAAC,GAAG,MAAT,EAAkB;AAEjB,WAAK+I,CAAL,GAAS,CAAT;AACA,WAAKE,CAAL,GAAS,CAAT;AACA,WAAKmyB,CAAL,GAAS,CAAT;AAEA,KAND,MAMO;AAEN,WAAKryB,CAAL,GAAS1E,CAAC,CAAC0E,CAAF,GAAM/I,CAAf;AACA,WAAKiJ,CAAL,GAAS5E,CAAC,CAAC4E,CAAF,GAAMjJ,CAAf;AACA,WAAKo7B,CAAL,GAAS/2B,CAAC,CAAC+2B,CAAF,GAAMp7B,CAAf;AAEA;;AAED,WAAO,IAAP;AAEA,GA7PgC;AA+PjC27B,EAAAA,8BAA8B,EAAE,UAAW7N,CAAX,EAAe;AAE9C;AAEA;AAEA,QAAIyE,KAAJ,EAAWxpB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,CAN8C,CAM1B;;AACpB,UAAMQ,OAAO,GAAG,IAAhB;AAAA,UAAuB;AACtBC,IAAAA,QAAQ,GAAG,GADZ;AAAA,UACkB;AAEjBtH,IAAAA,EAAE,GAAGzG,CAAC,CAAC4D,QAHR;AAAA,UAKCoK,GAAG,GAAGvH,EAAE,CAAE,CAAF,CALT;AAAA,UAKgBwH,GAAG,GAAGxH,EAAE,CAAE,CAAF,CALxB;AAAA,UAK+ByH,GAAG,GAAGzH,EAAE,CAAE,CAAF,CALvC;AAAA,UAMC0H,GAAG,GAAG1H,EAAE,CAAE,CAAF,CANT;AAAA,UAMgB2H,GAAG,GAAG3H,EAAE,CAAE,CAAF,CANxB;AAAA,UAM+B4H,GAAG,GAAG5H,EAAE,CAAE,CAAF,CANvC;AAAA,UAOC6H,GAAG,GAAG7H,EAAE,CAAE,CAAF,CAPT;AAAA,UAOgB8H,GAAG,GAAG9H,EAAE,CAAE,CAAF,CAPxB;AAAA,UAO+B+H,GAAG,GAAG/H,EAAE,CAAE,EAAF,CAPvC;;AASA,QAAO70B,IAAI,CAACwO,GAAL,CAAU6tB,GAAG,GAAGE,GAAhB,IAAwBL,OAA1B,IACEl8B,IAAI,CAACwO,GAAL,CAAU8tB,GAAG,GAAGI,GAAhB,IAAwBR,OAD1B,IAEEl8B,IAAI,CAACwO,GAAL,CAAUiuB,GAAG,GAAGE,GAAhB,IAAwBT,OAF/B,EAE2C;AAE1C;AACA;AACA;AAEA,UAAOl8B,IAAI,CAACwO,GAAL,CAAU6tB,GAAG,GAAGE,GAAhB,IAAwBJ,QAA1B,IACEn8B,IAAI,CAACwO,GAAL,CAAU8tB,GAAG,GAAGI,GAAhB,IAAwBP,QAD1B,IAEEn8B,IAAI,CAACwO,GAAL,CAAUiuB,GAAG,GAAGE,GAAhB,IAAwBR,QAF1B,IAGEn8B,IAAI,CAACwO,GAAL,CAAU4tB,GAAG,GAAGI,GAAN,GAAYI,GAAZ,GAAkB,CAA5B,IAAkCT,QAHzC,EAGsD;AAErD;AAEA,aAAK3L,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;AAEA,eAAO,IAAP,CANqD,CAMxC;AAEb,OAjByC,CAmB1C;;;AAEAqC,MAAAA,KAAK,GAAG7yB,IAAI,CAACutB,EAAb;AAEA,YAAMsP,EAAE,GAAG,CAAET,GAAG,GAAG,CAAR,IAAc,CAAzB;AACA,YAAMU,EAAE,GAAG,CAAEN,GAAG,GAAG,CAAR,IAAc,CAAzB;AACA,YAAMO,EAAE,GAAG,CAAEH,GAAG,GAAG,CAAR,IAAc,CAAzB;AACA,YAAMI,EAAE,GAAG,CAAEX,GAAG,GAAGE,GAAR,IAAgB,CAA3B;AACA,YAAMU,EAAE,GAAG,CAAEX,GAAG,GAAGI,GAAR,IAAgB,CAA3B;AACA,YAAMQ,EAAE,GAAG,CAAET,GAAG,GAAGE,GAAR,IAAgB,CAA3B;;AAEA,UAAOE,EAAE,GAAGC,EAAP,IAAiBD,EAAE,GAAGE,EAA3B,EAAkC;AAEjC;AAEA,YAAKF,EAAE,GAAGX,OAAV,EAAoB;AAEnB7yB,UAAAA,CAAC,GAAG,CAAJ;AACAE,UAAAA,CAAC,GAAG,WAAJ;AACAmyB,UAAAA,CAAC,GAAG,WAAJ;AAEA,SAND,MAMO;AAENryB,UAAAA,CAAC,GAAGrJ,IAAI,CAAC0yB,IAAL,CAAWmK,EAAX,CAAJ;AACAtzB,UAAAA,CAAC,GAAGyzB,EAAE,GAAG3zB,CAAT;AACAqyB,UAAAA,CAAC,GAAGuB,EAAE,GAAG5zB,CAAT;AAEA;AAED,OAlBD,MAkBO,IAAKyzB,EAAE,GAAGC,EAAV,EAAe;AAErB;AAEA,YAAKD,EAAE,GAAGZ,OAAV,EAAoB;AAEnB7yB,UAAAA,CAAC,GAAG,WAAJ;AACAE,UAAAA,CAAC,GAAG,CAAJ;AACAmyB,UAAAA,CAAC,GAAG,WAAJ;AAEA,SAND,MAMO;AAENnyB,UAAAA,CAAC,GAAGvJ,IAAI,CAAC0yB,IAAL,CAAWoK,EAAX,CAAJ;AACAzzB,UAAAA,CAAC,GAAG2zB,EAAE,GAAGzzB,CAAT;AACAmyB,UAAAA,CAAC,GAAGwB,EAAE,GAAG3zB,CAAT;AAEA;AAED,OAlBM,MAkBA;AAEN;AAEA,YAAKwzB,EAAE,GAAGb,OAAV,EAAoB;AAEnB7yB,UAAAA,CAAC,GAAG,WAAJ;AACAE,UAAAA,CAAC,GAAG,WAAJ;AACAmyB,UAAAA,CAAC,GAAG,CAAJ;AAEA,SAND,MAMO;AAENA,UAAAA,CAAC,GAAG17B,IAAI,CAAC0yB,IAAL,CAAWqK,EAAX,CAAJ;AACA1zB,UAAAA,CAAC,GAAG4zB,EAAE,GAAGvB,CAAT;AACAnyB,UAAAA,CAAC,GAAG2zB,EAAE,GAAGxB,CAAT;AAEA;AAED;;AAED,WAAKlL,GAAL,CAAUnnB,CAAV,EAAaE,CAAb,EAAgBmyB,CAAhB,EAAmB7I,KAAnB;AAEA,aAAO,IAAP,CAxF0C,CAwF7B;AAEb,KA5G6C,CA8G9C;;;AAEA,QAAIvyB,CAAC,GAAGN,IAAI,CAAC0yB,IAAL,CAAW,CAAEiK,GAAG,GAAGF,GAAR,KAAkBE,GAAG,GAAGF,GAAxB,IAClB,CAAEH,GAAG,GAAGI,GAAR,KAAkBJ,GAAG,GAAGI,GAAxB,CADkB,GAElB,CAAEH,GAAG,GAAGF,GAAR,KAAkBE,GAAG,GAAGF,GAAxB,CAFO,CAAR,CAhH8C,CAkHZ;;AAElC,QAAKr8B,IAAI,CAACwO,GAAL,CAAUlO,CAAV,IAAgB,KAArB,EAA6BA,CAAC,GAAG,CAAJ,CApHiB,CAsH9C;AACA;;AAEA,SAAK+I,CAAL,GAAS,CAAEszB,GAAG,GAAGF,GAAR,IAAgBn8B,CAAzB;AACA,SAAKiJ,CAAL,GAAS,CAAE+yB,GAAG,GAAGI,GAAR,IAAgBp8B,CAAzB;AACA,SAAKo7B,CAAL,GAAS,CAAEa,GAAG,GAAGF,GAAR,IAAgB/7B,CAAzB;AACA,SAAKwe,CAAL,GAAS9e,IAAI,CAACg8B,IAAL,CAAW,CAAEI,GAAG,GAAGI,GAAN,GAAYI,GAAZ,GAAkB,CAApB,IAA0B,CAArC,CAAT;AAEA,WAAO,IAAP;AAEA,GA/XgC;AAiYjC93B,EAAAA,GAAG,EAAE,UAAWtE,CAAX,EAAe;AAEnB,SAAK6I,CAAL,GAASrJ,IAAI,CAAC8E,GAAL,CAAU,KAAKuE,CAAf,EAAkB7I,CAAC,CAAC6I,CAApB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC8E,GAAL,CAAU,KAAKyE,CAAf,EAAkB/I,CAAC,CAAC+I,CAApB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC8E,GAAL,CAAU,KAAK42B,CAAf,EAAkBl7B,CAAC,CAACk7B,CAApB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAAC8E,GAAL,CAAU,KAAKga,CAAf,EAAkBte,CAAC,CAACse,CAApB,CAAT;AAEA,WAAO,IAAP;AAEA,GA1YgC;AA4YjC/Z,EAAAA,GAAG,EAAE,UAAWvE,CAAX,EAAe;AAEnB,SAAK6I,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAU,KAAKsE,CAAf,EAAkB7I,CAAC,CAAC6I,CAApB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAU,KAAKwE,CAAf,EAAkB/I,CAAC,CAAC+I,CAApB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC+E,GAAL,CAAU,KAAK22B,CAAf,EAAkBl7B,CAAC,CAACk7B,CAApB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAAC+E,GAAL,CAAU,KAAK+Z,CAAf,EAAkBte,CAAC,CAACse,CAApB,CAAT;AAEA,WAAO,IAAP;AAEA,GArZgC;AAuZjCmP,EAAAA,KAAK,EAAE,UAAWnpB,GAAX,EAAgBC,GAAhB,EAAsB;AAE5B;AAEA,SAAKsE,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACuE,CAAd,EAAiBrJ,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAACsE,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACyE,CAAd,EAAiBvJ,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAACwE,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAAC42B,CAAd,EAAiB17B,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAAC22B,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACga,CAAd,EAAiB9e,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAAC+Z,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GAlagC;AAoajCmT,EAAAA,WAAW,EAAE,UAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAExC,SAAK9oB,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAK9oB,CAAvB,CAAlB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAK5oB,CAAvB,CAAlB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAKuJ,CAAvB,CAAlB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAKrT,CAAvB,CAAlB,CAAT;AAEA,WAAO,IAAP;AAEA,GA7agC;AA+ajCsT,EAAAA,WAAW,EAAE,UAAWttB,GAAX,EAAgBC,GAAhB,EAAsB;AAElC,UAAMpE,MAAM,GAAG,KAAKA,MAAL,EAAf;AAEA,WAAO,KAAKmxB,YAAL,CAAmBnxB,MAAM,IAAI,CAA7B,EAAiCixB,cAAjC,CAAiD5xB,IAAI,CAAC+E,GAAL,CAAUD,GAAV,EAAe9E,IAAI,CAAC8E,GAAL,CAAUC,GAAV,EAAepE,MAAf,CAAf,CAAjD,CAAP;AAEA,GArbgC;AAubjC6D,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAK6E,CAAL,GAASrJ,IAAI,CAACwE,KAAL,CAAY,KAAK6E,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACwE,KAAL,CAAY,KAAK+E,CAAjB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAACwE,KAAL,CAAY,KAAKk3B,CAAjB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAACwE,KAAL,CAAY,KAAKsa,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GAhcgC;AAkcjC2Q,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAKpmB,CAAL,GAASrJ,IAAI,CAACyvB,IAAL,CAAW,KAAKpmB,CAAhB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACyvB,IAAL,CAAW,KAAKlmB,CAAhB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAACyvB,IAAL,CAAW,KAAKiM,CAAhB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAACyvB,IAAL,CAAW,KAAK3Q,CAAhB,CAAT;AAEA,WAAO,IAAP;AAEA,GA3cgC;AA6cjC7e,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAKoJ,CAAL,GAASrJ,IAAI,CAACC,KAAL,CAAY,KAAKoJ,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACC,KAAL,CAAY,KAAKsJ,CAAjB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAACC,KAAL,CAAY,KAAKy7B,CAAjB,CAAT;AACA,SAAK5c,CAAL,GAAS9e,IAAI,CAACC,KAAL,CAAY,KAAK6e,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GAtdgC;AAwdjCuT,EAAAA,WAAW,EAAE,YAAY;AAExB,SAAKhpB,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBrJ,IAAI,CAACyvB,IAAL,CAAW,KAAKpmB,CAAhB,CAAjB,GAAuCrJ,IAAI,CAACwE,KAAL,CAAY,KAAK6E,CAAjB,CAAhD;AACA,SAAKE,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBvJ,IAAI,CAACyvB,IAAL,CAAW,KAAKlmB,CAAhB,CAAjB,GAAuCvJ,IAAI,CAACwE,KAAL,CAAY,KAAK+E,CAAjB,CAAhD;AACA,SAAKmyB,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB17B,IAAI,CAACyvB,IAAL,CAAW,KAAKiM,CAAhB,CAAjB,GAAuC17B,IAAI,CAACwE,KAAL,CAAY,KAAKk3B,CAAjB,CAAhD;AACA,SAAK5c,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB9e,IAAI,CAACyvB,IAAL,CAAW,KAAK3Q,CAAhB,CAAjB,GAAuC9e,IAAI,CAACwE,KAAL,CAAY,KAAKsa,CAAjB,CAAhD;AAEA,WAAO,IAAP;AAEA,GAjegC;AAmejCwT,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKjpB,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,SAAKE,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,SAAKmyB,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,SAAK5c,CAAL,GAAS,CAAE,KAAKA,CAAhB;AAEA,WAAO,IAAP;AAEA,GA5egC;AA8ejCyT,EAAAA,GAAG,EAAE,UAAW/xB,CAAX,EAAe;AAEnB,WAAO,KAAK6I,CAAL,GAAS7I,CAAC,CAAC6I,CAAX,GAAe,KAAKE,CAAL,GAAS/I,CAAC,CAAC+I,CAA1B,GAA8B,KAAKmyB,CAAL,GAASl7B,CAAC,CAACk7B,CAAzC,GAA6C,KAAK5c,CAAL,GAASte,CAAC,CAACse,CAA/D;AAEA,GAlfgC;AAofjC2T,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKppB,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmyB,CAAL,GAAS,KAAKA,CAAlD,GAAsD,KAAK5c,CAAL,GAAS,KAAKA,CAA3E;AAEA,GAxfgC;AA0fjCne,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAOX,IAAI,CAAC0yB,IAAL,CAAW,KAAKrpB,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmyB,CAAL,GAAS,KAAKA,CAAlD,GAAsD,KAAK5c,CAAL,GAAS,KAAKA,CAA/E,CAAP;AAEA,GA9fgC;AAggBjC6T,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO3yB,IAAI,CAACwO,GAAL,CAAU,KAAKnF,CAAf,IAAqBrJ,IAAI,CAACwO,GAAL,CAAU,KAAKjF,CAAf,CAArB,GAA0CvJ,IAAI,CAACwO,GAAL,CAAU,KAAKktB,CAAf,CAA1C,GAA+D17B,IAAI,CAACwO,GAAL,CAAU,KAAKsQ,CAAf,CAAtE;AAEA,GApgBgC;AAsgBjC8T,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKd,YAAL,CAAmB,KAAKnxB,MAAL,MAAiB,CAApC,CAAP;AAEA,GA1gBgC;AA4gBjCyyB,EAAAA,SAAS,EAAE,UAAWzyB,MAAX,EAAoB;AAE9B,WAAO,KAAKiyB,SAAL,GAAiBhB,cAAjB,CAAiCjxB,MAAjC,CAAP;AAEA,GAhhBgC;AAkhBjC+tB,EAAAA,IAAI,EAAE,UAAWluB,CAAX,EAAc6yB,KAAd,EAAsB;AAE3B,SAAKhqB,CAAL,IAAU,CAAE7I,CAAC,CAAC6I,CAAF,GAAM,KAAKA,CAAb,IAAmBgqB,KAA7B;AACA,SAAK9pB,CAAL,IAAU,CAAE/I,CAAC,CAAC+I,CAAF,GAAM,KAAKA,CAAb,IAAmB8pB,KAA7B;AACA,SAAKqI,CAAL,IAAU,CAAEl7B,CAAC,CAACk7B,CAAF,GAAM,KAAKA,CAAb,IAAmBrI,KAA7B;AACA,SAAKvU,CAAL,IAAU,CAAEte,CAAC,CAACse,CAAF,GAAM,KAAKA,CAAb,IAAmBuU,KAA7B;AAEA,WAAO,IAAP;AAEA,GA3hBgC;AA6hBjCC,EAAAA,WAAW,EAAE,UAAWC,EAAX,EAAeC,EAAf,EAAmBH,KAAnB,EAA2B;AAEvC,SAAKhqB,CAAL,GAASkqB,EAAE,CAAClqB,CAAH,GAAO,CAAEmqB,EAAE,CAACnqB,CAAH,GAAOkqB,EAAE,CAAClqB,CAAZ,IAAkBgqB,KAAlC;AACA,SAAK9pB,CAAL,GAASgqB,EAAE,CAAChqB,CAAH,GAAO,CAAEiqB,EAAE,CAACjqB,CAAH,GAAOgqB,EAAE,CAAChqB,CAAZ,IAAkB8pB,KAAlC;AACA,SAAKqI,CAAL,GAASnI,EAAE,CAACmI,CAAH,GAAO,CAAElI,EAAE,CAACkI,CAAH,GAAOnI,EAAE,CAACmI,CAAZ,IAAkBrI,KAAlC;AACA,SAAKvU,CAAL,GAASyU,EAAE,CAACzU,CAAH,GAAO,CAAE0U,EAAE,CAAC1U,CAAH,GAAOyU,EAAE,CAACzU,CAAZ,IAAkBuU,KAAlC;AAEA,WAAO,IAAP;AAEA,GAtiBgC;AAwiBjCI,EAAAA,MAAM,EAAE,UAAWjzB,CAAX,EAAe;AAEtB,WAAWA,CAAC,CAAC6I,CAAF,KAAQ,KAAKA,CAAf,IAAwB7I,CAAC,CAAC+I,CAAF,KAAQ,KAAKA,CAArC,IAA8C/I,CAAC,CAACk7B,CAAF,KAAQ,KAAKA,CAA3D,IAAoEl7B,CAAC,CAACse,CAAF,KAAQ,KAAKA,CAA1F;AAEA,GA5iBgC;AA8iBjC4U,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAKzC,CAAL,GAAS8jB,KAAK,CAAErhB,MAAF,CAAd;AACA,SAAKvC,CAAL,GAAS4jB,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AACA,SAAK4vB,CAAL,GAASvO,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AACA,SAAKgT,CAAL,GAASqO,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AAEA,WAAO,IAAP;AAEA,GAzjBgC;AA2jBjChJ,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5BqhB,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB,KAAKzC,CAAvB;AACA8jB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKvC,CAA3B;AACA4jB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAK4vB,CAA3B;AACAvO,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKgT,CAA3B;AAEA,WAAOqO,KAAP;AAEA,GAvkBgC;AAykBjCwG,EAAAA,mBAAmB,EAAE,UAAWC,SAAX,EAAsBroB,KAAtB,EAA6BO,MAA7B,EAAsC;AAE1D,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,qEAAd;AAEA;;AAED,SAAKrnB,CAAL,GAASuqB,SAAS,CAACC,IAAV,CAAgBtoB,KAAhB,CAAT;AACA,SAAKhC,CAAL,GAASqqB,SAAS,CAACE,IAAV,CAAgBvoB,KAAhB,CAAT;AACA,SAAKmwB,CAAL,GAAS9H,SAAS,CAACuJ,IAAV,CAAgB5xB,KAAhB,CAAT;AACA,SAAKuT,CAAL,GAAS8U,SAAS,CAACwJ,IAAV,CAAgB7xB,KAAhB,CAAT;AAEA,WAAO,IAAP;AAEA,GAxlBgC;AA0lBjCoiB,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKtkB,CAAL,GAASrJ,IAAI,CAAC2tB,MAAL,EAAT;AACA,SAAKpkB,CAAL,GAASvJ,IAAI,CAAC2tB,MAAL,EAAT;AACA,SAAK+N,CAAL,GAAS17B,IAAI,CAAC2tB,MAAL,EAAT;AACA,SAAK7O,CAAL,GAAS9e,IAAI,CAAC2tB,MAAL,EAAT;AAEA,WAAO,IAAP;AAEA;AAnmBgC,CAAlC;AAumBA;;;;;;AAMA;;;;;;AAKA,SAAS0P,iBAAT,CAA4B1xB,KAA5B,EAAmCC,MAAnC,EAA2CoB,OAA3C,EAAqD;AAEpD,OAAKrB,KAAL,GAAaA,KAAb;AACA,OAAKC,MAAL,GAAcA,MAAd;AAEA,OAAK0xB,OAAL,GAAe,IAAI7B,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB9vB,KAAnB,EAA0BC,MAA1B,CAAf;AACA,OAAK2xB,WAAL,GAAmB,KAAnB;AAEA,OAAKC,QAAL,GAAgB,IAAI/B,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB9vB,KAAnB,EAA0BC,MAA1B,CAAhB;AAEAoB,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,OAAKywB,OAAL,GAAe,IAAInE,OAAJ,CAAav2B,SAAb,EAAwBiK,OAAO,CAACusB,OAAhC,EAAyCvsB,OAAO,CAACwsB,KAAjD,EAAwDxsB,OAAO,CAACysB,KAAhE,EAAuEzsB,OAAO,CAAC0sB,SAA/E,EAA0F1sB,OAAO,CAAC2sB,SAAlG,EAA6G3sB,OAAO,CAAC4sB,MAArH,EAA6H5sB,OAAO,CAACb,IAArI,EAA2Ia,OAAO,CAAC6sB,UAAnJ,EAA+J7sB,OAAO,CAAC8sB,QAAvK,CAAf;AAEA,OAAK2D,OAAL,CAAa/E,KAAb,GAAqB,EAArB;AACA,OAAK+E,OAAL,CAAa/E,KAAb,CAAmB/sB,KAAnB,GAA2BA,KAA3B;AACA,OAAK8xB,OAAL,CAAa/E,KAAb,CAAmB9sB,MAAnB,GAA4BA,MAA5B;AAEA,OAAK6xB,OAAL,CAAapD,eAAb,GAA+BrtB,OAAO,CAACqtB,eAAR,KAA4Bt3B,SAA5B,GAAwCiK,OAAO,CAACqtB,eAAhD,GAAkE,KAAjG;AACA,OAAKoD,OAAL,CAAa9D,SAAb,GAAyB3sB,OAAO,CAAC2sB,SAAR,KAAsB52B,SAAtB,GAAkCiK,OAAO,CAAC2sB,SAA1C,GAAsDxU,YAA/E;AAEA,OAAKuY,WAAL,GAAmB1wB,OAAO,CAAC0wB,WAAR,KAAwB36B,SAAxB,GAAoCiK,OAAO,CAAC0wB,WAA5C,GAA0D,IAA7E;AACA,OAAKC,aAAL,GAAqB3wB,OAAO,CAAC2wB,aAAR,KAA0B56B,SAA1B,GAAsCiK,OAAO,CAAC2wB,aAA9C,GAA8D,IAAnF;AACA,OAAKC,YAAL,GAAoB5wB,OAAO,CAAC4wB,YAAR,KAAyB76B,SAAzB,GAAqCiK,OAAO,CAAC4wB,YAA7C,GAA4D,IAAhF;AAEA;;AAEDP,iBAAiB,CAACv8B,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAExFoC,EAAAA,WAAW,EAAEm6B,iBAF2E;AAIxFQ,EAAAA,mBAAmB,EAAE,IAJmE;AAMxFC,EAAAA,OAAO,EAAE,UAAWnyB,KAAX,EAAkBC,MAAlB,EAA2B;AAEnC,QAAK,KAAKD,KAAL,KAAeA,KAAf,IAAwB,KAAKC,MAAL,KAAgBA,MAA7C,EAAsD;AAErD,WAAKD,KAAL,GAAaA,KAAb;AACA,WAAKC,MAAL,GAAcA,MAAd;AAEA,WAAK6xB,OAAL,CAAa/E,KAAb,CAAmB/sB,KAAnB,GAA2BA,KAA3B;AACA,WAAK8xB,OAAL,CAAa/E,KAAb,CAAmB9sB,MAAnB,GAA4BA,MAA5B;AAEA,WAAK0vB,OAAL;AAEA;;AAED,SAAKkC,QAAL,CAAchN,GAAd,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB7kB,KAAzB,EAAgCC,MAAhC;AACA,SAAK0xB,OAAL,CAAa9M,GAAb,CAAkB,CAAlB,EAAqB,CAArB,EAAwB7kB,KAAxB,EAA+BC,MAA/B;AAEA,GAvBuF;AAyBxFulB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GA7BuF;AA+BxFA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAKrU,KAAL,GAAaqU,MAAM,CAACrU,KAApB;AACA,SAAKC,MAAL,GAAcoU,MAAM,CAACpU,MAArB;AAEA,SAAK4xB,QAAL,CAAcpM,IAAd,CAAoBpR,MAAM,CAACwd,QAA3B;AAEA,SAAKC,OAAL,GAAezd,MAAM,CAACyd,OAAP,CAAetM,KAAf,EAAf;AAEA,SAAKuM,WAAL,GAAmB1d,MAAM,CAAC0d,WAA1B;AACA,SAAKC,aAAL,GAAqB3d,MAAM,CAAC2d,aAA5B;AACA,SAAKC,YAAL,GAAoB5d,MAAM,CAAC4d,YAA3B;AAEA,WAAO,IAAP;AAEA,GA9CuF;AAgDxFtC,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAK9wB,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAApB;AAEA;AApDuF,CAA3D,CAA9B;AAwDA;;;;;AAKA,SAAS4xB,4BAAT,CAAuCpyB,KAAvC,EAA8CC,MAA9C,EAAsDoB,OAAtD,EAAgE;AAE/DqwB,EAAAA,iBAAiB,CAACh8B,IAAlB,CAAwB,IAAxB,EAA8BsK,KAA9B,EAAqCC,MAArC,EAA6CoB,OAA7C;AAEA,OAAKgxB,OAAL,GAAe,CAAf;AAEA;;AAEDD,4BAA4B,CAACj9B,SAA7B,GAAyCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0C,iBAAiB,CAACv8B,SAAjC,CAAf,EAA6D;AAErGoC,EAAAA,WAAW,EAAE66B,4BAFwF;AAIrGE,EAAAA,8BAA8B,EAAE,IAJqE;AAMrG7M,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBqd,IAAAA,iBAAiB,CAACv8B,SAAlB,CAA4BswB,IAA5B,CAAiC/vB,IAAjC,CAAuC,IAAvC,EAA6C2e,MAA7C;AAEA,SAAKge,OAAL,GAAehe,MAAM,CAACge,OAAtB;AAEA,WAAO,IAAP;AAEA;AAdoG,CAA7D,CAAzC;AAkBA;;;;;;;AAOA,SAASE,UAAT,CAAqB70B,CAAC,GAAG,CAAzB,EAA4BE,CAAC,GAAG,CAAhC,EAAmCmyB,CAAC,GAAG,CAAvC,EAA0C5c,CAAC,GAAG,CAA9C,EAAkD;AAEjD,OAAKhR,EAAL,GAAUzE,CAAV;AACA,OAAK80B,EAAL,GAAU50B,CAAV;AACA,OAAK60B,EAAL,GAAU1C,CAAV;AACA,OAAK2C,EAAL,GAAUvf,CAAV;AAEA;;AAEDpd,MAAM,CAACme,MAAP,CAAeqe,UAAf,EAA2B;AAE1BI,EAAAA,KAAK,EAAE,UAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuB75B,CAAvB,EAA2B;AAEjC,WAAO65B,EAAE,CAACrN,IAAH,CAASmN,EAAT,EAAcD,KAAd,CAAqBE,EAArB,EAAyB55B,CAAzB,CAAP;AAEA,GANyB;AAQ1B85B,EAAAA,SAAS,EAAE,UAAWC,GAAX,EAAgBC,SAAhB,EAA2BC,IAA3B,EAAiCC,UAAjC,EAA6CC,IAA7C,EAAmDC,UAAnD,EAA+Dp6B,CAA/D,EAAmE;AAE7E;AAEA,QAAIq6B,EAAE,GAAGJ,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAb;AAAA,QACCI,EAAE,GAAGL,IAAI,CAAEC,UAAU,GAAG,CAAf,CADV;AAAA,QAECK,EAAE,GAAGN,IAAI,CAAEC,UAAU,GAAG,CAAf,CAFV;AAAA,QAGCM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CAHV;AAKA,UAAMO,EAAE,GAAGN,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AAAA,UACCM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CADV;AAAA,UAECO,EAAE,GAAGR,IAAI,CAAEC,UAAU,GAAG,CAAf,CAFV;AAAA,UAGCQ,EAAE,GAAGT,IAAI,CAAEC,UAAU,GAAG,CAAf,CAHV;;AAKA,QAAKI,EAAE,KAAKI,EAAP,IAAaP,EAAE,KAAKI,EAApB,IAA0BH,EAAE,KAAKI,EAAjC,IAAuCH,EAAE,KAAKI,EAAnD,EAAwD;AAEvD,UAAIj/B,CAAC,GAAG,IAAIsE,CAAZ;AAAA,UAECkrB,GAAG,GAAGmP,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGI,EAAf,GAAoBH,EAAE,GAAGI,EAAzB,GAA8BH,EAAE,GAAGI,EAF1C;AAAA,UAICC,GAAG,GAAK3P,GAAG,IAAI,CAAP,GAAW,CAAX,GAAe,CAAE,CAJ1B;AAAA,UAKC4P,MAAM,GAAG,IAAI5P,GAAG,GAAGA,GALpB,CAFuD,CASvD;;AACA,UAAK4P,MAAM,GAAGngB,MAAM,CAACC,OAArB,EAA+B;AAE9B,cAAMuQ,GAAG,GAAG/vB,IAAI,CAAC0yB,IAAL,CAAWgN,MAAX,CAAZ;AAAA,cACCC,GAAG,GAAG3/B,IAAI,CAAC8yB,KAAL,CAAY/C,GAAZ,EAAiBD,GAAG,GAAG2P,GAAvB,CADP;AAGAn/B,QAAAA,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAUzvB,CAAC,GAAGq/B,GAAd,IAAsB5P,GAA1B;AACAnrB,QAAAA,CAAC,GAAG5E,IAAI,CAAC+vB,GAAL,CAAUnrB,CAAC,GAAG+6B,GAAd,IAAsB5P,GAA1B;AAEA;;AAED,YAAM6P,IAAI,GAAGh7B,CAAC,GAAG66B,GAAjB;AAEAR,MAAAA,EAAE,GAAGA,EAAE,GAAG3+B,CAAL,GAAS++B,EAAE,GAAGO,IAAnB;AACAV,MAAAA,EAAE,GAAGA,EAAE,GAAG5+B,CAAL,GAASg/B,EAAE,GAAGM,IAAnB;AACAT,MAAAA,EAAE,GAAGA,EAAE,GAAG7+B,CAAL,GAASi/B,EAAE,GAAGK,IAAnB;AACAR,MAAAA,EAAE,GAAGA,EAAE,GAAG9+B,CAAL,GAASk/B,EAAE,GAAGI,IAAnB,CAzBuD,CA2BvD;;AACA,UAAKt/B,CAAC,KAAK,IAAIsE,CAAf,EAAmB;AAElB,cAAMH,CAAC,GAAG,IAAIzE,IAAI,CAAC0yB,IAAL,CAAWuM,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAf,GAAoBC,EAAE,GAAGA,EAAzB,GAA8BC,EAAE,GAAGA,EAA9C,CAAd;AAEAH,QAAAA,EAAE,IAAIx6B,CAAN;AACAy6B,QAAAA,EAAE,IAAIz6B,CAAN;AACA06B,QAAAA,EAAE,IAAI16B,CAAN;AACA26B,QAAAA,EAAE,IAAI36B,CAAN;AAEA;AAED;;AAEDk6B,IAAAA,GAAG,CAAEC,SAAF,CAAH,GAAmBK,EAAnB;AACAN,IAAAA,GAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBM,EAAvB;AACAP,IAAAA,GAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBO,EAAvB;AACAR,IAAAA,GAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBQ,EAAvB;AAEA,GApEyB;AAsE1BS,EAAAA,uBAAuB,EAAE,UAAWlB,GAAX,EAAgBC,SAAhB,EAA2BC,IAA3B,EAAiCC,UAAjC,EAA6CC,IAA7C,EAAmDC,UAAnD,EAAgE;AAExF,UAAMC,EAAE,GAAGJ,IAAI,CAAEC,UAAF,CAAf;AACA,UAAMI,EAAE,GAAGL,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,UAAMK,EAAE,GAAGN,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,UAAMM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AAEA,UAAMO,EAAE,GAAGN,IAAI,CAAEC,UAAF,CAAf;AACA,UAAMM,EAAE,GAAGP,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,UAAMO,EAAE,GAAGR,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AACA,UAAMQ,EAAE,GAAGT,IAAI,CAAEC,UAAU,GAAG,CAAf,CAAf;AAEAL,IAAAA,GAAG,CAAEC,SAAF,CAAH,GAAmBK,EAAE,GAAGO,EAAL,GAAUJ,EAAE,GAAGC,EAAf,GAAoBH,EAAE,GAAGK,EAAzB,GAA8BJ,EAAE,GAAGG,EAAtD;AACAX,IAAAA,GAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBM,EAAE,GAAGM,EAAL,GAAUJ,EAAE,GAAGE,EAAf,GAAoBH,EAAE,GAAGE,EAAzB,GAA8BJ,EAAE,GAAGM,EAA1D;AACAZ,IAAAA,GAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBO,EAAE,GAAGK,EAAL,GAAUJ,EAAE,GAAGG,EAAf,GAAoBN,EAAE,GAAGK,EAAzB,GAA8BJ,EAAE,GAAGG,EAA1D;AACAV,IAAAA,GAAG,CAAEC,SAAS,GAAG,CAAd,CAAH,GAAuBQ,EAAE,GAAGI,EAAL,GAAUP,EAAE,GAAGI,EAAf,GAAoBH,EAAE,GAAGI,EAAzB,GAA8BH,EAAE,GAAGI,EAA1D;AAEA,WAAOZ,GAAP;AAEA;AAzFyB,CAA3B;AA6FAj9B,MAAM,CAACwV,gBAAP,CAAyBgnB,UAAU,CAACp9B,SAApC,EAA+C;AAE9CuI,EAAAA,CAAC,EAAE;AAEFuW,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK9R,EAAZ;AAEA,KANC;AAQF0iB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAK0I,EAAL,GAAU1I,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC,GAF2C;AAmB9Cv2B,EAAAA,CAAC,EAAE;AAEFqW,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKue,EAAZ;AAEA,KANC;AAQF3N,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAK+4B,EAAL,GAAU/4B,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC,GAnB2C;AAoC9CpE,EAAAA,CAAC,EAAE;AAEF9b,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKwe,EAAZ;AAEA,KANC;AAQF5N,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKg5B,EAAL,GAAUh5B,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC,GApC2C;AAqD9ChhB,EAAAA,CAAC,EAAE;AAEFc,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKye,EAAZ;AAEA,KANC;AAQF7N,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKi5B,EAAL,GAAUj5B,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC;AArD2C,CAA/C;AAwEAp+B,MAAM,CAACme,MAAP,CAAeqe,UAAU,CAACp9B,SAA1B,EAAqC;AAEpCi/B,EAAAA,YAAY,EAAE,IAFsB;AAIpCvP,EAAAA,GAAG,EAAE,UAAWnnB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAoB5c,CAApB,EAAwB;AAE5B,SAAKhR,EAAL,GAAUzE,CAAV;AACA,SAAK80B,EAAL,GAAU50B,CAAV;AACA,SAAK60B,EAAL,GAAU1C,CAAV;AACA,SAAK2C,EAAL,GAAUvf,CAAV;;AAEA,SAAKghB,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAfmC;AAiBpC3O,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAK4K,EAA3B,EAA+B,KAAKqwB,EAApC,EAAwC,KAAKC,EAA7C,EAAiD,KAAKC,EAAtD,CAAP;AAEA,GArBmC;AAuBpCjN,EAAAA,IAAI,EAAE,UAAW4O,UAAX,EAAwB;AAE7B,SAAKlyB,EAAL,GAAUkyB,UAAU,CAAC32B,CAArB;AACA,SAAK80B,EAAL,GAAU6B,UAAU,CAACz2B,CAArB;AACA,SAAK60B,EAAL,GAAU4B,UAAU,CAACtE,CAArB;AACA,SAAK2C,EAAL,GAAU2B,UAAU,CAAClhB,CAArB;;AAEA,SAAKghB,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAlCmC;AAoCpCG,EAAAA,YAAY,EAAE,UAAWC,KAAX,EAAkBC,MAAlB,EAA2B;AAExC,QAAK,EAAID,KAAK,IAAIA,KAAK,CAACE,OAAnB,CAAL,EAAoC;AAEnC,YAAM,IAAI96B,KAAJ,CAAW,kGAAX,CAAN;AAEA;;AAED,UAAM+D,CAAC,GAAG62B,KAAK,CAACpyB,EAAhB;AAAA,UAAoBvE,CAAC,GAAG22B,KAAK,CAAC/B,EAA9B;AAAA,UAAkCzC,CAAC,GAAGwE,KAAK,CAAC9B,EAA5C;AAAA,UAAgDvO,KAAK,GAAGqQ,KAAK,CAACrQ,KAA9D,CARwC,CAUxC;AACA;AACA;;AAEA,UAAMC,GAAG,GAAG9vB,IAAI,CAAC8vB,GAAjB;AACA,UAAMC,GAAG,GAAG/vB,IAAI,CAAC+vB,GAAjB;AAEA,UAAMsQ,EAAE,GAAGvQ,GAAG,CAAEzmB,CAAC,GAAG,CAAN,CAAd;AACA,UAAM2mB,EAAE,GAAGF,GAAG,CAAEvmB,CAAC,GAAG,CAAN,CAAd;AACA,UAAM+2B,EAAE,GAAGxQ,GAAG,CAAE4L,CAAC,GAAG,CAAN,CAAd;AAEA,UAAM6E,EAAE,GAAGxQ,GAAG,CAAE1mB,CAAC,GAAG,CAAN,CAAd;AACA,UAAM4mB,EAAE,GAAGF,GAAG,CAAExmB,CAAC,GAAG,CAAN,CAAd;AACA,UAAMi3B,EAAE,GAAGzQ,GAAG,CAAE2L,CAAC,GAAG,CAAN,CAAd;;AAEA,YAAS7L,KAAT;AAEC,WAAK,KAAL;AACC,aAAK/hB,EAAL,GAAUyyB,EAAE,GAAGvQ,EAAL,GAAUsQ,EAAV,GAAeD,EAAE,GAAGpQ,EAAL,GAAUuQ,EAAnC;AACA,aAAKrC,EAAL,GAAUkC,EAAE,GAAGpQ,EAAL,GAAUqQ,EAAV,GAAeC,EAAE,GAAGvQ,EAAL,GAAUwQ,EAAnC;AACA,aAAKpC,EAAL,GAAUiC,EAAE,GAAGrQ,EAAL,GAAUwQ,EAAV,GAAeD,EAAE,GAAGtQ,EAAL,GAAUqQ,EAAnC;AACA,aAAKjC,EAAL,GAAUgC,EAAE,GAAGrQ,EAAL,GAAUsQ,EAAV,GAAeC,EAAE,GAAGtQ,EAAL,GAAUuQ,EAAnC;AACA;;AAED,WAAK,KAAL;AACC,aAAK1yB,EAAL,GAAUyyB,EAAE,GAAGvQ,EAAL,GAAUsQ,EAAV,GAAeD,EAAE,GAAGpQ,EAAL,GAAUuQ,EAAnC;AACA,aAAKrC,EAAL,GAAUkC,EAAE,GAAGpQ,EAAL,GAAUqQ,EAAV,GAAeC,EAAE,GAAGvQ,EAAL,GAAUwQ,EAAnC;AACA,aAAKpC,EAAL,GAAUiC,EAAE,GAAGrQ,EAAL,GAAUwQ,EAAV,GAAeD,EAAE,GAAGtQ,EAAL,GAAUqQ,EAAnC;AACA,aAAKjC,EAAL,GAAUgC,EAAE,GAAGrQ,EAAL,GAAUsQ,EAAV,GAAeC,EAAE,GAAGtQ,EAAL,GAAUuQ,EAAnC;AACA;;AAED,WAAK,KAAL;AACC,aAAK1yB,EAAL,GAAUyyB,EAAE,GAAGvQ,EAAL,GAAUsQ,EAAV,GAAeD,EAAE,GAAGpQ,EAAL,GAAUuQ,EAAnC;AACA,aAAKrC,EAAL,GAAUkC,EAAE,GAAGpQ,EAAL,GAAUqQ,EAAV,GAAeC,EAAE,GAAGvQ,EAAL,GAAUwQ,EAAnC;AACA,aAAKpC,EAAL,GAAUiC,EAAE,GAAGrQ,EAAL,GAAUwQ,EAAV,GAAeD,EAAE,GAAGtQ,EAAL,GAAUqQ,EAAnC;AACA,aAAKjC,EAAL,GAAUgC,EAAE,GAAGrQ,EAAL,GAAUsQ,EAAV,GAAeC,EAAE,GAAGtQ,EAAL,GAAUuQ,EAAnC;AACA;;AAED,WAAK,KAAL;AACC,aAAK1yB,EAAL,GAAUyyB,EAAE,GAAGvQ,EAAL,GAAUsQ,EAAV,GAAeD,EAAE,GAAGpQ,EAAL,GAAUuQ,EAAnC;AACA,aAAKrC,EAAL,GAAUkC,EAAE,GAAGpQ,EAAL,GAAUqQ,EAAV,GAAeC,EAAE,GAAGvQ,EAAL,GAAUwQ,EAAnC;AACA,aAAKpC,EAAL,GAAUiC,EAAE,GAAGrQ,EAAL,GAAUwQ,EAAV,GAAeD,EAAE,GAAGtQ,EAAL,GAAUqQ,EAAnC;AACA,aAAKjC,EAAL,GAAUgC,EAAE,GAAGrQ,EAAL,GAAUsQ,EAAV,GAAeC,EAAE,GAAGtQ,EAAL,GAAUuQ,EAAnC;AACA;;AAED,WAAK,KAAL;AACC,aAAK1yB,EAAL,GAAUyyB,EAAE,GAAGvQ,EAAL,GAAUsQ,EAAV,GAAeD,EAAE,GAAGpQ,EAAL,GAAUuQ,EAAnC;AACA,aAAKrC,EAAL,GAAUkC,EAAE,GAAGpQ,EAAL,GAAUqQ,EAAV,GAAeC,EAAE,GAAGvQ,EAAL,GAAUwQ,EAAnC;AACA,aAAKpC,EAAL,GAAUiC,EAAE,GAAGrQ,EAAL,GAAUwQ,EAAV,GAAeD,EAAE,GAAGtQ,EAAL,GAAUqQ,EAAnC;AACA,aAAKjC,EAAL,GAAUgC,EAAE,GAAGrQ,EAAL,GAAUsQ,EAAV,GAAeC,EAAE,GAAGtQ,EAAL,GAAUuQ,EAAnC;AACA;;AAED,WAAK,KAAL;AACC,aAAK1yB,EAAL,GAAUyyB,EAAE,GAAGvQ,EAAL,GAAUsQ,EAAV,GAAeD,EAAE,GAAGpQ,EAAL,GAAUuQ,EAAnC;AACA,aAAKrC,EAAL,GAAUkC,EAAE,GAAGpQ,EAAL,GAAUqQ,EAAV,GAAeC,EAAE,GAAGvQ,EAAL,GAAUwQ,EAAnC;AACA,aAAKpC,EAAL,GAAUiC,EAAE,GAAGrQ,EAAL,GAAUwQ,EAAV,GAAeD,EAAE,GAAGtQ,EAAL,GAAUqQ,EAAnC;AACA,aAAKjC,EAAL,GAAUgC,EAAE,GAAGrQ,EAAL,GAAUsQ,EAAV,GAAeC,EAAE,GAAGtQ,EAAL,GAAUuQ,EAAnC;AACA;;AAED;AACC/P,QAAAA,OAAO,CAACC,IAAR,CAAc,qEAAqEb,KAAnF;AA7CF;;AAiDA,QAAKsQ,MAAM,KAAK,KAAhB,EAAwB,KAAKL,iBAAL;AAExB,WAAO,IAAP;AAEA,GAlHmC;AAoHpCW,EAAAA,gBAAgB,EAAE,UAAWC,IAAX,EAAiB7N,KAAjB,EAAyB;AAE1C;AAEA;AAEA,UAAM8N,SAAS,GAAG9N,KAAK,GAAG,CAA1B;AAAA,UAA6BvyB,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAU4Q,SAAV,CAAjC;AAEA,SAAK7yB,EAAL,GAAU4yB,IAAI,CAACr3B,CAAL,GAAS/I,CAAnB;AACA,SAAK69B,EAAL,GAAUuC,IAAI,CAACn3B,CAAL,GAASjJ,CAAnB;AACA,SAAK89B,EAAL,GAAUsC,IAAI,CAAChF,CAAL,GAASp7B,CAAnB;AACA,SAAK+9B,EAAL,GAAUr+B,IAAI,CAAC8vB,GAAL,CAAU6Q,SAAV,CAAV;;AAEA,SAAKb,iBAAL;;AAEA,WAAO,IAAP;AAEA,GArImC;AAuIpCc,EAAAA,qBAAqB,EAAE,UAAWxS,CAAX,EAAe;AAErC;AAEA;AAEA,UAAMyG,EAAE,GAAGzG,CAAC,CAAC4D,QAAb;AAAA,UAECoK,GAAG,GAAGvH,EAAE,CAAE,CAAF,CAFT;AAAA,UAEgBwH,GAAG,GAAGxH,EAAE,CAAE,CAAF,CAFxB;AAAA,UAE+ByH,GAAG,GAAGzH,EAAE,CAAE,CAAF,CAFvC;AAAA,UAGC0H,GAAG,GAAG1H,EAAE,CAAE,CAAF,CAHT;AAAA,UAGgB2H,GAAG,GAAG3H,EAAE,CAAE,CAAF,CAHxB;AAAA,UAG+B4H,GAAG,GAAG5H,EAAE,CAAE,CAAF,CAHvC;AAAA,UAIC6H,GAAG,GAAG7H,EAAE,CAAE,CAAF,CAJT;AAAA,UAIgB8H,GAAG,GAAG9H,EAAE,CAAE,CAAF,CAJxB;AAAA,UAI+B+H,GAAG,GAAG/H,EAAE,CAAE,EAAF,CAJvC;AAAA,UAMCgM,KAAK,GAAGzE,GAAG,GAAGI,GAAN,GAAYI,GANrB;;AAQA,QAAKiE,KAAK,GAAG,CAAb,EAAiB;AAEhB,YAAMvgC,CAAC,GAAG,MAAMN,IAAI,CAAC0yB,IAAL,CAAWmO,KAAK,GAAG,GAAnB,CAAhB;AAEA,WAAKxC,EAAL,GAAU,OAAO/9B,CAAjB;AACA,WAAKwN,EAAL,GAAU,CAAE6uB,GAAG,GAAGF,GAAR,IAAgBn8B,CAA1B;AACA,WAAK69B,EAAL,GAAU,CAAE7B,GAAG,GAAGI,GAAR,IAAgBp8B,CAA1B;AACA,WAAK89B,EAAL,GAAU,CAAE7B,GAAG,GAAGF,GAAR,IAAgB/7B,CAA1B;AAEA,KATD,MASO,IAAK87B,GAAG,GAAGI,GAAN,IAAaJ,GAAG,GAAGQ,GAAxB,EAA8B;AAEpC,YAAMt8B,CAAC,GAAG,MAAMN,IAAI,CAAC0yB,IAAL,CAAW,MAAM0J,GAAN,GAAYI,GAAZ,GAAkBI,GAA7B,CAAhB;AAEA,WAAKyB,EAAL,GAAU,CAAE1B,GAAG,GAAGF,GAAR,IAAgBn8B,CAA1B;AACA,WAAKwN,EAAL,GAAU,OAAOxN,CAAjB;AACA,WAAK69B,EAAL,GAAU,CAAE9B,GAAG,GAAGE,GAAR,IAAgBj8B,CAA1B;AACA,WAAK89B,EAAL,GAAU,CAAE9B,GAAG,GAAGI,GAAR,IAAgBp8B,CAA1B;AAEA,KATM,MASA,IAAKk8B,GAAG,GAAGI,GAAX,EAAiB;AAEvB,YAAMt8B,CAAC,GAAG,MAAMN,IAAI,CAAC0yB,IAAL,CAAW,MAAM8J,GAAN,GAAYJ,GAAZ,GAAkBQ,GAA7B,CAAhB;AAEA,WAAKyB,EAAL,GAAU,CAAE/B,GAAG,GAAGI,GAAR,IAAgBp8B,CAA1B;AACA,WAAKwN,EAAL,GAAU,CAAEuuB,GAAG,GAAGE,GAAR,IAAgBj8B,CAA1B;AACA,WAAK69B,EAAL,GAAU,OAAO79B,CAAjB;AACA,WAAK89B,EAAL,GAAU,CAAE3B,GAAG,GAAGE,GAAR,IAAgBr8B,CAA1B;AAEA,KATM,MASA;AAEN,YAAMA,CAAC,GAAG,MAAMN,IAAI,CAAC0yB,IAAL,CAAW,MAAMkK,GAAN,GAAYR,GAAZ,GAAkBI,GAA7B,CAAhB;AAEA,WAAK6B,EAAL,GAAU,CAAE9B,GAAG,GAAGF,GAAR,IAAgB/7B,CAA1B;AACA,WAAKwN,EAAL,GAAU,CAAEwuB,GAAG,GAAGI,GAAR,IAAgBp8B,CAA1B;AACA,WAAK69B,EAAL,GAAU,CAAE1B,GAAG,GAAGE,GAAR,IAAgBr8B,CAA1B;AACA,WAAK89B,EAAL,GAAU,OAAO99B,CAAjB;AAEA;;AAED,SAAKw/B,iBAAL;;AAEA,WAAO,IAAP;AAEA,GA/LmC;AAiMpCgB,EAAAA,kBAAkB,EAAE,UAAWC,KAAX,EAAkBC,GAAlB,EAAwB;AAE3C;AAEA,UAAMC,GAAG,GAAG,QAAZ;AAEA,QAAIlhC,CAAC,GAAGghC,KAAK,CAACxO,GAAN,CAAWyO,GAAX,IAAmB,CAA3B;;AAEA,QAAKjhC,CAAC,GAAGkhC,GAAT,EAAe;AAEdlhC,MAAAA,CAAC,GAAG,CAAJ;;AAEA,UAAKC,IAAI,CAACwO,GAAL,CAAUuyB,KAAK,CAAC13B,CAAhB,IAAsBrJ,IAAI,CAACwO,GAAL,CAAUuyB,KAAK,CAACrF,CAAhB,CAA3B,EAAiD;AAEhD,aAAK5tB,EAAL,GAAU,CAAEizB,KAAK,CAACx3B,CAAlB;AACA,aAAK40B,EAAL,GAAU4C,KAAK,CAAC13B,CAAhB;AACA,aAAK+0B,EAAL,GAAU,CAAV;AACA,aAAKC,EAAL,GAAUt+B,CAAV;AAEA,OAPD,MAOO;AAEN,aAAK+N,EAAL,GAAU,CAAV;AACA,aAAKqwB,EAAL,GAAU,CAAE4C,KAAK,CAACrF,CAAlB;AACA,aAAK0C,EAAL,GAAU2C,KAAK,CAACx3B,CAAhB;AACA,aAAK80B,EAAL,GAAUt+B,CAAV;AAEA;AAED,KApBD,MAoBO;AAEN;AAEA,WAAK+N,EAAL,GAAUizB,KAAK,CAACx3B,CAAN,GAAUy3B,GAAG,CAACtF,CAAd,GAAkBqF,KAAK,CAACrF,CAAN,GAAUsF,GAAG,CAACz3B,CAA1C;AACA,WAAK40B,EAAL,GAAU4C,KAAK,CAACrF,CAAN,GAAUsF,GAAG,CAAC33B,CAAd,GAAkB03B,KAAK,CAAC13B,CAAN,GAAU23B,GAAG,CAACtF,CAA1C;AACA,WAAK0C,EAAL,GAAU2C,KAAK,CAAC13B,CAAN,GAAU23B,GAAG,CAACz3B,CAAd,GAAkBw3B,KAAK,CAACx3B,CAAN,GAAUy3B,GAAG,CAAC33B,CAA1C;AACA,WAAKg1B,EAAL,GAAUt+B,CAAV;AAEA;;AAED,WAAO,KAAK6yB,SAAL,EAAP;AAEA,GA1OmC;AA4OpCsO,EAAAA,OAAO,EAAE,UAAWv8B,CAAX,EAAe;AAEvB,WAAO,IAAI3E,IAAI,CAACg8B,IAAL,CAAWh8B,IAAI,CAACwO,GAAL,CAAU6e,SAAS,CAACY,KAAV,CAAiB,KAAKsE,GAAL,CAAU5tB,CAAV,CAAjB,EAAgC,CAAE,CAAlC,EAAqC,CAArC,CAAV,CAAX,CAAX;AAEA,GAhPmC;AAkPpCw8B,EAAAA,aAAa,EAAE,UAAWx8B,CAAX,EAAcyJ,IAAd,EAAqB;AAEnC,UAAMykB,KAAK,GAAG,KAAKqO,OAAL,CAAcv8B,CAAd,CAAd;AAEA,QAAKkuB,KAAK,KAAK,CAAf,EAAmB,OAAO,IAAP;AAEnB,UAAMjuB,CAAC,GAAG5E,IAAI,CAAC8E,GAAL,CAAU,CAAV,EAAasJ,IAAI,GAAGykB,KAApB,CAAV;AAEA,SAAKyL,KAAL,CAAY35B,CAAZ,EAAeC,CAAf;AAEA,WAAO,IAAP;AAEA,GA9PmC;AAgQpCw8B,EAAAA,OAAO,EAAE,YAAY;AAEpB;AAEA,WAAO,KAAKC,SAAL,EAAP;AAEA,GAtQmC;AAwQpCA,EAAAA,SAAS,EAAE,YAAY;AAEtB,SAAKvzB,EAAL,IAAW,CAAE,CAAb;AACA,SAAKqwB,EAAL,IAAW,CAAE,CAAb;AACA,SAAKC,EAAL,IAAW,CAAE,CAAb;;AAEA,SAAK0B,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAlRmC;AAoRpCvN,EAAAA,GAAG,EAAE,UAAW/xB,CAAX,EAAe;AAEnB,WAAO,KAAKsN,EAAL,GAAUtN,CAAC,CAACsN,EAAZ,GAAiB,KAAKqwB,EAAL,GAAU39B,CAAC,CAAC29B,EAA7B,GAAkC,KAAKC,EAAL,GAAU59B,CAAC,CAAC49B,EAA9C,GAAmD,KAAKC,EAAL,GAAU79B,CAAC,CAAC69B,EAAtE;AAEA,GAxRmC;AA0RpC5L,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAK3kB,EAAL,GAAU,KAAKA,EAAf,GAAoB,KAAKqwB,EAAL,GAAU,KAAKA,EAAnC,GAAwC,KAAKC,EAAL,GAAU,KAAKA,EAAvD,GAA4D,KAAKC,EAAL,GAAU,KAAKA,EAAlF;AAEA,GA9RmC;AAgSpC19B,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAOX,IAAI,CAAC0yB,IAAL,CAAW,KAAK5kB,EAAL,GAAU,KAAKA,EAAf,GAAoB,KAAKqwB,EAAL,GAAU,KAAKA,EAAnC,GAAwC,KAAKC,EAAL,GAAU,KAAKA,EAAvD,GAA4D,KAAKC,EAAL,GAAU,KAAKA,EAAtF,CAAP;AAEA,GApSmC;AAsSpCzL,EAAAA,SAAS,EAAE,YAAY;AAEtB,QAAIxwB,CAAC,GAAG,KAAKzB,MAAL,EAAR;;AAEA,QAAKyB,CAAC,KAAK,CAAX,EAAe;AAEd,WAAK0L,EAAL,GAAU,CAAV;AACA,WAAKqwB,EAAL,GAAU,CAAV;AACA,WAAKC,EAAL,GAAU,CAAV;AACA,WAAKC,EAAL,GAAU,CAAV;AAEA,KAPD,MAOO;AAENj8B,MAAAA,CAAC,GAAG,IAAIA,CAAR;AAEA,WAAK0L,EAAL,GAAU,KAAKA,EAAL,GAAU1L,CAApB;AACA,WAAK+7B,EAAL,GAAU,KAAKA,EAAL,GAAU/7B,CAApB;AACA,WAAKg8B,EAAL,GAAU,KAAKA,EAAL,GAAUh8B,CAApB;AACA,WAAKi8B,EAAL,GAAU,KAAKA,EAAL,GAAUj8B,CAApB;AAEA;;AAED,SAAK09B,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAhUmC;AAkUpCnO,EAAAA,QAAQ,EAAE,UAAWhtB,CAAX,EAAcD,CAAd,EAAkB;AAE3B,QAAKA,CAAC,KAAK3B,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,wGAAd;AACA,aAAO,KAAK4Q,mBAAL,CAA0B38B,CAA1B,EAA6BD,CAA7B,CAAP;AAEA;;AAED,WAAO,KAAK48B,mBAAL,CAA0B,IAA1B,EAAgC38B,CAAhC,CAAP;AAEA,GA7UmC;AA+UpC4wB,EAAAA,WAAW,EAAE,UAAW5wB,CAAX,EAAe;AAE3B,WAAO,KAAK28B,mBAAL,CAA0B38B,CAA1B,EAA6B,IAA7B,CAAP;AAEA,GAnVmC;AAqVpC28B,EAAAA,mBAAmB,EAAE,UAAWlhC,CAAX,EAAcD,CAAd,EAAkB;AAEtC;AAEA,UAAMohC,GAAG,GAAGnhC,CAAC,CAAC0N,EAAd;AAAA,UAAkB0zB,GAAG,GAAGphC,CAAC,CAAC+9B,EAA1B;AAAA,UAA8BsD,GAAG,GAAGrhC,CAAC,CAACg+B,EAAtC;AAAA,UAA0CsD,GAAG,GAAGthC,CAAC,CAACi+B,EAAlD;AACA,UAAMsD,GAAG,GAAGxhC,CAAC,CAAC2N,EAAd;AAAA,UAAkB8zB,GAAG,GAAGzhC,CAAC,CAACg+B,EAA1B;AAAA,UAA8B0D,GAAG,GAAG1hC,CAAC,CAACi+B,EAAtC;AAAA,UAA0C0D,GAAG,GAAG3hC,CAAC,CAACk+B,EAAlD;AAEA,SAAKvwB,EAAL,GAAUyzB,GAAG,GAAGO,GAAN,GAAYJ,GAAG,GAAGC,GAAlB,GAAwBH,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAApD;AACA,SAAKzD,EAAL,GAAUqD,GAAG,GAAGM,GAAN,GAAYJ,GAAG,GAAGE,GAAlB,GAAwBH,GAAG,GAAGE,GAA9B,GAAoCJ,GAAG,GAAGM,GAApD;AACA,SAAKzD,EAAL,GAAUqD,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGG,GAAlB,GAAwBN,GAAG,GAAGK,GAA9B,GAAoCJ,GAAG,GAAGG,GAApD;AACA,SAAKtD,EAAL,GAAUqD,GAAG,GAAGI,GAAN,GAAYP,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGI,GAApD;;AAEA,SAAK/B,iBAAL;;AAEA,WAAO,IAAP;AAEA,GArWmC;AAuWpCxB,EAAAA,KAAK,EAAE,UAAWE,EAAX,EAAe55B,CAAf,EAAmB;AAEzB,QAAKA,CAAC,KAAK,CAAX,EAAe,OAAO,IAAP;AACf,QAAKA,CAAC,KAAK,CAAX,EAAe,OAAO,KAAKwsB,IAAL,CAAWoN,EAAX,CAAP;AAEf,UAAMn1B,CAAC,GAAG,KAAKyE,EAAf;AAAA,UAAmBvE,CAAC,GAAG,KAAK40B,EAA5B;AAAA,UAAgCzC,CAAC,GAAG,KAAK0C,EAAzC;AAAA,UAA6Ctf,CAAC,GAAG,KAAKuf,EAAtD,CALyB,CAOzB;;AAEA,QAAI0D,YAAY,GAAGjjB,CAAC,GAAG0f,EAAE,CAACH,EAAP,GAAYh1B,CAAC,GAAGm1B,EAAE,CAAC1wB,EAAnB,GAAwBvE,CAAC,GAAGi1B,EAAE,CAACL,EAA/B,GAAoCzC,CAAC,GAAG8C,EAAE,CAACJ,EAA9D;;AAEA,QAAK2D,YAAY,GAAG,CAApB,EAAwB;AAEvB,WAAK1D,EAAL,GAAU,CAAEG,EAAE,CAACH,EAAf;AACA,WAAKvwB,EAAL,GAAU,CAAE0wB,EAAE,CAAC1wB,EAAf;AACA,WAAKqwB,EAAL,GAAU,CAAEK,EAAE,CAACL,EAAf;AACA,WAAKC,EAAL,GAAU,CAAEI,EAAE,CAACJ,EAAf;AAEA2D,MAAAA,YAAY,GAAG,CAAEA,YAAjB;AAEA,KATD,MASO;AAEN,WAAK3Q,IAAL,CAAWoN,EAAX;AAEA;;AAED,QAAKuD,YAAY,IAAI,GAArB,EAA2B;AAE1B,WAAK1D,EAAL,GAAUvf,CAAV;AACA,WAAKhR,EAAL,GAAUzE,CAAV;AACA,WAAK80B,EAAL,GAAU50B,CAAV;AACA,WAAK60B,EAAL,GAAU1C,CAAV;AAEA,aAAO,IAAP;AAEA;;AAED,UAAMsG,eAAe,GAAG,MAAMD,YAAY,GAAGA,YAA7C;;AAEA,QAAKC,eAAe,IAAIziB,MAAM,CAACC,OAA/B,EAAyC;AAExC,YAAMlf,CAAC,GAAG,IAAIsE,CAAd;AACA,WAAKy5B,EAAL,GAAU/9B,CAAC,GAAGwe,CAAJ,GAAQla,CAAC,GAAG,KAAKy5B,EAA3B;AACA,WAAKvwB,EAAL,GAAUxN,CAAC,GAAG+I,CAAJ,GAAQzE,CAAC,GAAG,KAAKkJ,EAA3B;AACA,WAAKqwB,EAAL,GAAU79B,CAAC,GAAGiJ,CAAJ,GAAQ3E,CAAC,GAAG,KAAKu5B,EAA3B;AACA,WAAKC,EAAL,GAAU99B,CAAC,GAAGo7B,CAAJ,GAAQ92B,CAAC,GAAG,KAAKw5B,EAA3B;AAEA,WAAKxL,SAAL;;AACA,WAAKkN,iBAAL;;AAEA,aAAO,IAAP;AAEA;;AAED,UAAMmC,YAAY,GAAGjiC,IAAI,CAAC0yB,IAAL,CAAWsP,eAAX,CAArB;AACA,UAAME,SAAS,GAAGliC,IAAI,CAAC8yB,KAAL,CAAYmP,YAAZ,EAA0BF,YAA1B,CAAlB;AACA,UAAMI,MAAM,GAAGniC,IAAI,CAAC+vB,GAAL,CAAU,CAAE,IAAInrB,CAAN,IAAYs9B,SAAtB,IAAoCD,YAAnD;AAAA,UACCG,MAAM,GAAGpiC,IAAI,CAAC+vB,GAAL,CAAUnrB,CAAC,GAAGs9B,SAAd,IAA4BD,YADtC;AAGA,SAAK5D,EAAL,GAAYvf,CAAC,GAAGqjB,MAAJ,GAAa,KAAK9D,EAAL,GAAU+D,MAAnC;AACA,SAAKt0B,EAAL,GAAYzE,CAAC,GAAG84B,MAAJ,GAAa,KAAKr0B,EAAL,GAAUs0B,MAAnC;AACA,SAAKjE,EAAL,GAAY50B,CAAC,GAAG44B,MAAJ,GAAa,KAAKhE,EAAL,GAAUiE,MAAnC;AACA,SAAKhE,EAAL,GAAY1C,CAAC,GAAGyG,MAAJ,GAAa,KAAK/D,EAAL,GAAUgE,MAAnC;;AAEA,SAAKtC,iBAAL;;AAEA,WAAO,IAAP;AAEA,GA3amC;AA6apCrM,EAAAA,MAAM,EAAE,UAAWuM,UAAX,EAAwB;AAE/B,WAASA,UAAU,CAAClyB,EAAX,KAAkB,KAAKA,EAAzB,IAAmCkyB,UAAU,CAAC7B,EAAX,KAAkB,KAAKA,EAA1D,IAAoE6B,UAAU,CAAC5B,EAAX,KAAkB,KAAKA,EAA3F,IAAqG4B,UAAU,CAAC3B,EAAX,KAAkB,KAAKA,EAAnI;AAEA,GAjbmC;AAmbpC3K,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAKgC,EAAL,GAAUqf,KAAK,CAAErhB,MAAF,CAAf;AACA,SAAKqyB,EAAL,GAAUhR,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAf;AACA,SAAKsyB,EAAL,GAAUjR,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAf;AACA,SAAKuyB,EAAL,GAAUlR,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAf;;AAEA,SAAKg0B,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAhcmC;AAkcpCh9B,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5BqhB,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB,KAAKgC,EAAvB;AACAqf,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKqyB,EAA3B;AACAhR,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKsyB,EAA3B;AACAjR,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKuyB,EAA3B;AAEA,WAAOlR,KAAP;AAEA,GA9cmC;AAgdpCwG,EAAAA,mBAAmB,EAAE,UAAWC,SAAX,EAAsBroB,KAAtB,EAA8B;AAElD,SAAKuC,EAAL,GAAU8lB,SAAS,CAACC,IAAV,CAAgBtoB,KAAhB,CAAV;AACA,SAAK4yB,EAAL,GAAUvK,SAAS,CAACE,IAAV,CAAgBvoB,KAAhB,CAAV;AACA,SAAK6yB,EAAL,GAAUxK,SAAS,CAACuJ,IAAV,CAAgB5xB,KAAhB,CAAV;AACA,SAAK8yB,EAAL,GAAUzK,SAAS,CAACwJ,IAAV,CAAgB7xB,KAAhB,CAAV;AAEA,WAAO,IAAP;AAEA,GAzdmC;AA2dpC82B,EAAAA,SAAS,EAAE,UAAWtuB,QAAX,EAAsB;AAEhC,SAAK+rB,iBAAL,GAAyB/rB,QAAzB;AAEA,WAAO,IAAP;AAEA,GAjemC;AAmepC+rB,EAAAA,iBAAiB,EAAE,YAAY,CAAE;AAneG,CAArC;AAueA;;;;;;;;;AASA,MAAMwC,OAAO,GAAG,IAAIC,OAAJ,EAAhB;;AACA,MAAMC,WAAW,GAAG,IAAItE,UAAJ,EAApB;;AAEA,SAASqE,OAAT,CAAkBl5B,CAAC,GAAG,CAAtB,EAAyBE,CAAC,GAAG,CAA7B,EAAgCmyB,CAAC,GAAG,CAApC,EAAwC;AAEvC,OAAKryB,CAAL,GAASA,CAAT;AACA,OAAKE,CAAL,GAASA,CAAT;AACA,OAAKmyB,CAAL,GAASA,CAAT;AAEA;;AAEDh6B,MAAM,CAACme,MAAP,CAAe0iB,OAAO,CAACzhC,SAAvB,EAAkC;AAEjC2hC,EAAAA,SAAS,EAAE,IAFsB;AAIjCjS,EAAAA,GAAG,EAAE,UAAWnnB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAEzB,SAAKryB,CAAL,GAASA,CAAT;AACA,SAAKE,CAAL,GAASA,CAAT;AACA,SAAKmyB,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAZgC;AAcjC7K,EAAAA,SAAS,EAAE,UAAWC,MAAX,EAAoB;AAE9B,SAAKznB,CAAL,GAASynB,MAAT;AACA,SAAKvnB,CAAL,GAASunB,MAAT;AACA,SAAK4K,CAAL,GAAS5K,MAAT;AAEA,WAAO,IAAP;AAEA,GAtBgC;AAwBjCC,EAAAA,IAAI,EAAE,UAAW1nB,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GA9BgC;AAgCjC2nB,EAAAA,IAAI,EAAE,UAAWznB,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAtCgC;AAwCjCqyB,EAAAA,IAAI,EAAE,UAAWF,CAAX,EAAe;AAEpB,SAAKA,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GA9CgC;AAgDjCzK,EAAAA,YAAY,EAAE,UAAW1lB,KAAX,EAAkBnG,KAAlB,EAA0B;AAEvC,YAASmG,KAAT;AAEC,WAAK,CAAL;AAAQ,aAAKlC,CAAL,GAASjE,KAAT;AAAgB;;AACxB,WAAK,CAAL;AAAQ,aAAKmE,CAAL,GAASnE,KAAT;AAAgB;;AACxB,WAAK,CAAL;AAAQ,aAAKs2B,CAAL,GAASt2B,KAAT;AAAgB;;AACxB;AAAS,cAAM,IAAIE,KAAJ,CAAW,4BAA4BiG,KAAvC,CAAN;AALV;;AASA,WAAO,IAAP;AAEA,GA7DgC;AA+DjC2lB,EAAAA,YAAY,EAAE,UAAW3lB,KAAX,EAAmB;AAEhC,YAASA,KAAT;AAEC,WAAK,CAAL;AAAQ,eAAO,KAAKlC,CAAZ;;AACR,WAAK,CAAL;AAAQ,eAAO,KAAKE,CAAZ;;AACR,WAAK,CAAL;AAAQ,eAAO,KAAKmyB,CAAZ;;AACR;AAAS,cAAM,IAAIp2B,KAAJ,CAAW,4BAA4BiG,KAAvC,CAAN;AALV;AASA,GA1EgC;AA4EjC4lB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAKmG,CAA3B,EAA8B,KAAKE,CAAnC,EAAsC,KAAKmyB,CAA3C,CAAP;AAEA,GAhFgC;AAkFjCtK,EAAAA,IAAI,EAAE,UAAW5wB,CAAX,EAAe;AAEpB,SAAK6I,CAAL,GAAS7I,CAAC,CAAC6I,CAAX;AACA,SAAKE,CAAL,GAAS/I,CAAC,CAAC+I,CAAX;AACA,SAAKmyB,CAAL,GAASl7B,CAAC,CAACk7B,CAAX;AAEA,WAAO,IAAP;AAEA,GA1FgC;AA4FjC/hB,EAAAA,GAAG,EAAE,UAAWnZ,CAAX,EAAcse,CAAd,EAAkB;AAEtB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKW,UAAL,CAAiB7wB,CAAjB,EAAoBse,CAApB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AACA,SAAKmyB,CAAL,IAAUl7B,CAAC,CAACk7B,CAAZ;AAEA,WAAO,IAAP;AAEA,GA3GgC;AA6GjCpK,EAAAA,SAAS,EAAE,UAAWhxB,CAAX,EAAe;AAEzB,SAAK+I,CAAL,IAAU/I,CAAV;AACA,SAAKiJ,CAAL,IAAUjJ,CAAV;AACA,SAAKo7B,CAAL,IAAUp7B,CAAV;AAEA,WAAO,IAAP;AAEA,GArHgC;AAuHjC+wB,EAAAA,UAAU,EAAE,UAAWjxB,CAAX,EAAcD,CAAd,EAAkB;AAE7B,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AACA,SAAKmyB,CAAL,GAASt7B,CAAC,CAACs7B,CAAF,GAAMv7B,CAAC,CAACu7B,CAAjB;AAEA,WAAO,IAAP;AAEA,GA/HgC;AAiIjCnK,EAAAA,eAAe,EAAE,UAAW/wB,CAAX,EAAcF,CAAd,EAAkB;AAElC,SAAK+I,CAAL,IAAU7I,CAAC,CAAC6I,CAAF,GAAM/I,CAAhB;AACA,SAAKiJ,CAAL,IAAU/I,CAAC,CAAC+I,CAAF,GAAMjJ,CAAhB;AACA,SAAKo7B,CAAL,IAAUl7B,CAAC,CAACk7B,CAAF,GAAMp7B,CAAhB;AAEA,WAAO,IAAP;AAEA,GAzIgC;AA2IjCkxB,EAAAA,GAAG,EAAE,UAAWhxB,CAAX,EAAcse,CAAd,EAAkB;AAEtB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKe,UAAL,CAAiBjxB,CAAjB,EAAoBse,CAApB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AACA,SAAKmyB,CAAL,IAAUl7B,CAAC,CAACk7B,CAAZ;AAEA,WAAO,IAAP;AAEA,GA1JgC;AA4JjChK,EAAAA,SAAS,EAAE,UAAWpxB,CAAX,EAAe;AAEzB,SAAK+I,CAAL,IAAU/I,CAAV;AACA,SAAKiJ,CAAL,IAAUjJ,CAAV;AACA,SAAKo7B,CAAL,IAAUp7B,CAAV;AAEA,WAAO,IAAP;AAEA,GApKgC;AAsKjCmxB,EAAAA,UAAU,EAAE,UAAWrxB,CAAX,EAAcD,CAAd,EAAkB;AAE7B,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AACA,SAAKmyB,CAAL,GAASt7B,CAAC,CAACs7B,CAAF,GAAMv7B,CAAC,CAACu7B,CAAjB;AAEA,WAAO,IAAP;AAEA,GA9KgC;AAgLjC/J,EAAAA,QAAQ,EAAE,UAAWnxB,CAAX,EAAcse,CAAd,EAAkB;AAE3B,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,iGAAd;AACA,aAAO,KAAKgS,eAAL,CAAsBliC,CAAtB,EAAyBse,CAAzB,CAAP;AAEA;;AAED,SAAKzV,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AACA,SAAKmyB,CAAL,IAAUl7B,CAAC,CAACk7B,CAAZ;AAEA,WAAO,IAAP;AAEA,GA/LgC;AAiMjC9J,EAAAA,cAAc,EAAE,UAAWd,MAAX,EAAoB;AAEnC,SAAKznB,CAAL,IAAUynB,MAAV;AACA,SAAKvnB,CAAL,IAAUunB,MAAV;AACA,SAAK4K,CAAL,IAAU5K,MAAV;AAEA,WAAO,IAAP;AAEA,GAzMgC;AA2MjC4R,EAAAA,eAAe,EAAE,UAAWtiC,CAAX,EAAcD,CAAd,EAAkB;AAElC,SAAKkJ,CAAL,GAASjJ,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAjB;AACA,SAAKE,CAAL,GAASnJ,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAjB;AACA,SAAKmyB,CAAL,GAASt7B,CAAC,CAACs7B,CAAF,GAAMv7B,CAAC,CAACu7B,CAAjB;AAEA,WAAO,IAAP;AAEA,GAnNgC;AAqNjCiH,EAAAA,UAAU,EAAE,UAAWzC,KAAX,EAAmB;AAE9B,QAAK,EAAIA,KAAK,IAAIA,KAAK,CAACE,OAAnB,CAAL,EAAoC;AAEnC3P,MAAAA,OAAO,CAACyD,KAAR,CAAe,6FAAf;AAEA;;AAED,WAAO,KAAK0O,eAAL,CAAsBJ,WAAW,CAACvC,YAAZ,CAA0BC,KAA1B,CAAtB,CAAP;AAEA,GA/NgC;AAiOjC2C,EAAAA,cAAc,EAAE,UAAWnC,IAAX,EAAiB7N,KAAjB,EAAyB;AAExC,WAAO,KAAK+P,eAAL,CAAsBJ,WAAW,CAAC/B,gBAAZ,CAA8BC,IAA9B,EAAoC7N,KAApC,CAAtB,CAAP;AAEA,GArOgC;AAuOjCd,EAAAA,YAAY,EAAE,UAAW3D,CAAX,EAAe;AAE5B,UAAM/kB,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBE,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8BmyB,CAAC,GAAG,KAAKA,CAAvC;AACA,UAAMn0B,CAAC,GAAG6mB,CAAC,CAAC4D,QAAZ;AAEA,SAAK3oB,CAAL,GAAS9B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAA5C;AACA,SAAKnyB,CAAL,GAAShC,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAA5C;AACA,SAAKA,CAAL,GAASn0B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAA5C;AAEA,WAAO,IAAP;AAEA,GAlPgC;AAoPjCoH,EAAAA,iBAAiB,EAAE,UAAW1U,CAAX,EAAe;AAEjC,WAAO,KAAK2D,YAAL,CAAmB3D,CAAnB,EAAuBwE,SAAvB,EAAP;AAEA,GAxPgC;AA0PjCkJ,EAAAA,YAAY,EAAE,UAAW1N,CAAX,EAAe;AAE5B,UAAM/kB,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBE,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8BmyB,CAAC,GAAG,KAAKA,CAAvC;AACA,UAAMn0B,CAAC,GAAG6mB,CAAC,CAAC4D,QAAZ;AAEA,UAAMlT,CAAC,GAAG,KAAMvX,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,EAAF,CAAD,GAAUm0B,CAApC,GAAwCn0B,CAAC,CAAE,EAAF,CAA/C,CAAV;AAEA,SAAK8B,CAAL,GAAS,CAAE9B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAAnC,GAAuCn0B,CAAC,CAAE,EAAF,CAA1C,IAAqDuX,CAA9D;AACA,SAAKvV,CAAL,GAAS,CAAEhC,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAAnC,GAAuCn0B,CAAC,CAAE,EAAF,CAA1C,IAAqDuX,CAA9D;AACA,SAAK4c,CAAL,GAAS,CAAEn0B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,EAAF,CAAD,GAAUm0B,CAApC,GAAwCn0B,CAAC,CAAE,EAAF,CAA3C,IAAsDuX,CAA/D;AAEA,WAAO,IAAP;AAEA,GAvQgC;AAyQjC8jB,EAAAA,eAAe,EAAE,UAAWj+B,CAAX,EAAe;AAE/B,UAAM0E,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBE,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8BmyB,CAAC,GAAG,KAAKA,CAAvC;AACA,UAAMqH,EAAE,GAAGp+B,CAAC,CAAC0E,CAAb;AAAA,UAAgB25B,EAAE,GAAGr+B,CAAC,CAAC4E,CAAvB;AAAA,UAA0B05B,EAAE,GAAGt+B,CAAC,CAAC+2B,CAAjC;AAAA,UAAoCwH,EAAE,GAAGv+B,CAAC,CAACma,CAA3C,CAH+B,CAK/B;;AAEA,UAAMqkB,EAAE,GAAGD,EAAE,GAAG75B,CAAL,GAAS25B,EAAE,GAAGtH,CAAd,GAAkBuH,EAAE,GAAG15B,CAAlC;AACA,UAAM65B,EAAE,GAAGF,EAAE,GAAG35B,CAAL,GAAS05B,EAAE,GAAG55B,CAAd,GAAkB05B,EAAE,GAAGrH,CAAlC;AACA,UAAM2H,EAAE,GAAGH,EAAE,GAAGxH,CAAL,GAASqH,EAAE,GAAGx5B,CAAd,GAAkBy5B,EAAE,GAAG35B,CAAlC;AACA,UAAMi6B,EAAE,GAAG,CAAEP,EAAF,GAAO15B,CAAP,GAAW25B,EAAE,GAAGz5B,CAAhB,GAAoB05B,EAAE,GAAGvH,CAApC,CAV+B,CAY/B;;AAEA,SAAKryB,CAAL,GAAS85B,EAAE,GAAGD,EAAL,GAAUI,EAAE,GAAG,CAAEP,EAAjB,GAAsBK,EAAE,GAAG,CAAEH,EAA7B,GAAkCI,EAAE,GAAG,CAAEL,EAAlD;AACA,SAAKz5B,CAAL,GAAS65B,EAAE,GAAGF,EAAL,GAAUI,EAAE,GAAG,CAAEN,EAAjB,GAAsBK,EAAE,GAAG,CAAEN,EAA7B,GAAkCI,EAAE,GAAG,CAAEF,EAAlD;AACA,SAAKvH,CAAL,GAAS2H,EAAE,GAAGH,EAAL,GAAUI,EAAE,GAAG,CAAEL,EAAjB,GAAsBE,EAAE,GAAG,CAAEH,EAA7B,GAAkCI,EAAE,GAAG,CAAEL,EAAlD;AAEA,WAAO,IAAP;AAEA,GA7RgC;AA+RjCQ,EAAAA,OAAO,EAAE,UAAWC,MAAX,EAAoB;AAE5B,WAAO,KAAK1H,YAAL,CAAmB0H,MAAM,CAACC,kBAA1B,EAA+C3H,YAA/C,CAA6D0H,MAAM,CAACE,gBAApE,CAAP;AAEA,GAnSgC;AAqSjCC,EAAAA,SAAS,EAAE,UAAWH,MAAX,EAAoB;AAE9B,WAAO,KAAK1H,YAAL,CAAmB0H,MAAM,CAACI,uBAA1B,EAAoD9H,YAApD,CAAkE0H,MAAM,CAACK,WAAzE,CAAP;AAEA,GAzSgC;AA2SjCC,EAAAA,kBAAkB,EAAE,UAAW1V,CAAX,EAAe;AAElC;AACA;AAEA,UAAM/kB,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBE,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8BmyB,CAAC,GAAG,KAAKA,CAAvC;AACA,UAAMn0B,CAAC,GAAG6mB,CAAC,CAAC4D,QAAZ;AAEA,SAAK3oB,CAAL,GAAS9B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAA5C;AACA,SAAKnyB,CAAL,GAAShC,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,CAAF,CAAD,GAASm0B,CAA5C;AACA,SAAKA,CAAL,GAASn0B,CAAC,CAAE,CAAF,CAAD,GAAS8B,CAAT,GAAa9B,CAAC,CAAE,CAAF,CAAD,GAASgC,CAAtB,GAA0BhC,CAAC,CAAE,EAAF,CAAD,GAAUm0B,CAA7C;AAEA,WAAO,KAAK9I,SAAL,EAAP;AAEA,GAzTgC;AA2TjCf,EAAAA,MAAM,EAAE,UAAWrxB,CAAX,EAAe;AAEtB,SAAK6I,CAAL,IAAU7I,CAAC,CAAC6I,CAAZ;AACA,SAAKE,CAAL,IAAU/I,CAAC,CAAC+I,CAAZ;AACA,SAAKmyB,CAAL,IAAUl7B,CAAC,CAACk7B,CAAZ;AAEA,WAAO,IAAP;AAEA,GAnUgC;AAqUjC5J,EAAAA,YAAY,EAAE,UAAWhB,MAAX,EAAoB;AAEjC,WAAO,KAAKc,cAAL,CAAqB,IAAId,MAAzB,CAAP;AAEA,GAzUgC;AA2UjChsB,EAAAA,GAAG,EAAE,UAAWtE,CAAX,EAAe;AAEnB,SAAK6I,CAAL,GAASrJ,IAAI,CAAC8E,GAAL,CAAU,KAAKuE,CAAf,EAAkB7I,CAAC,CAAC6I,CAApB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC8E,GAAL,CAAU,KAAKyE,CAAf,EAAkB/I,CAAC,CAAC+I,CAApB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC8E,GAAL,CAAU,KAAK42B,CAAf,EAAkBl7B,CAAC,CAACk7B,CAApB,CAAT;AAEA,WAAO,IAAP;AAEA,GAnVgC;AAqVjC32B,EAAAA,GAAG,EAAE,UAAWvE,CAAX,EAAe;AAEnB,SAAK6I,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAU,KAAKsE,CAAf,EAAkB7I,CAAC,CAAC6I,CAApB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAU,KAAKwE,CAAf,EAAkB/I,CAAC,CAAC+I,CAApB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC+E,GAAL,CAAU,KAAK22B,CAAf,EAAkBl7B,CAAC,CAACk7B,CAApB,CAAT;AAEA,WAAO,IAAP;AAEA,GA7VgC;AA+VjCzN,EAAAA,KAAK,EAAE,UAAWnpB,GAAX,EAAgBC,GAAhB,EAAsB;AAE5B;AAEA,SAAKsE,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACuE,CAAd,EAAiBrJ,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAACsE,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAACyE,CAAd,EAAiBvJ,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAACwE,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC+E,GAAL,CAAUD,GAAG,CAAC42B,CAAd,EAAiB17B,IAAI,CAAC8E,GAAL,CAAUC,GAAG,CAAC22B,CAAd,EAAiB,KAAKA,CAAtB,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GAzWgC;AA2WjCzJ,EAAAA,WAAW,EAAE,UAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAExC,SAAK9oB,CAAL,GAASrJ,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAK9oB,CAAvB,CAAlB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAK5oB,CAAvB,CAAlB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAAC+E,GAAL,CAAUmtB,MAAV,EAAkBlyB,IAAI,CAAC8E,GAAL,CAAUqtB,MAAV,EAAkB,KAAKuJ,CAAvB,CAAlB,CAAT;AAEA,WAAO,IAAP;AAEA,GAnXgC;AAqXjCtJ,EAAAA,WAAW,EAAE,UAAWttB,GAAX,EAAgBC,GAAhB,EAAsB;AAElC,UAAMpE,MAAM,GAAG,KAAKA,MAAL,EAAf;AAEA,WAAO,KAAKmxB,YAAL,CAAmBnxB,MAAM,IAAI,CAA7B,EAAiCixB,cAAjC,CAAiD5xB,IAAI,CAAC+E,GAAL,CAAUD,GAAV,EAAe9E,IAAI,CAAC8E,GAAL,CAAUC,GAAV,EAAepE,MAAf,CAAf,CAAjD,CAAP;AAEA,GA3XgC;AA6XjC6D,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAK6E,CAAL,GAASrJ,IAAI,CAACwE,KAAL,CAAY,KAAK6E,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACwE,KAAL,CAAY,KAAK+E,CAAjB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAACwE,KAAL,CAAY,KAAKk3B,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GArYgC;AAuYjCjM,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAKpmB,CAAL,GAASrJ,IAAI,CAACyvB,IAAL,CAAW,KAAKpmB,CAAhB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACyvB,IAAL,CAAW,KAAKlmB,CAAhB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAACyvB,IAAL,CAAW,KAAKiM,CAAhB,CAAT;AAEA,WAAO,IAAP;AAEA,GA/YgC;AAiZjCz7B,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAKoJ,CAAL,GAASrJ,IAAI,CAACC,KAAL,CAAY,KAAKoJ,CAAjB,CAAT;AACA,SAAKE,CAAL,GAASvJ,IAAI,CAACC,KAAL,CAAY,KAAKsJ,CAAjB,CAAT;AACA,SAAKmyB,CAAL,GAAS17B,IAAI,CAACC,KAAL,CAAY,KAAKy7B,CAAjB,CAAT;AAEA,WAAO,IAAP;AAEA,GAzZgC;AA2ZjCrJ,EAAAA,WAAW,EAAE,YAAY;AAExB,SAAKhpB,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBrJ,IAAI,CAACyvB,IAAL,CAAW,KAAKpmB,CAAhB,CAAjB,GAAuCrJ,IAAI,CAACwE,KAAL,CAAY,KAAK6E,CAAjB,CAAhD;AACA,SAAKE,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiBvJ,IAAI,CAACyvB,IAAL,CAAW,KAAKlmB,CAAhB,CAAjB,GAAuCvJ,IAAI,CAACwE,KAAL,CAAY,KAAK+E,CAAjB,CAAhD;AACA,SAAKmyB,CAAL,GAAW,KAAKA,CAAL,GAAS,CAAX,GAAiB17B,IAAI,CAACyvB,IAAL,CAAW,KAAKiM,CAAhB,CAAjB,GAAuC17B,IAAI,CAACwE,KAAL,CAAY,KAAKk3B,CAAjB,CAAhD;AAEA,WAAO,IAAP;AAEA,GAnagC;AAqajCpJ,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKjpB,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,SAAKE,CAAL,GAAS,CAAE,KAAKA,CAAhB;AACA,SAAKmyB,CAAL,GAAS,CAAE,KAAKA,CAAhB;AAEA,WAAO,IAAP;AAEA,GA7agC;AA+ajCnJ,EAAAA,GAAG,EAAE,UAAW/xB,CAAX,EAAe;AAEnB,WAAO,KAAK6I,CAAL,GAAS7I,CAAC,CAAC6I,CAAX,GAAe,KAAKE,CAAL,GAAS/I,CAAC,CAAC+I,CAA1B,GAA8B,KAAKmyB,CAAL,GAASl7B,CAAC,CAACk7B,CAAhD;AAEA,GAnbgC;AAqbjC;AAEAjJ,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKppB,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmyB,CAAL,GAAS,KAAKA,CAAzD;AAEA,GA3bgC;AA6bjC/6B,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAOX,IAAI,CAAC0yB,IAAL,CAAW,KAAKrpB,CAAL,GAAS,KAAKA,CAAd,GAAkB,KAAKE,CAAL,GAAS,KAAKA,CAAhC,GAAoC,KAAKmyB,CAAL,GAAS,KAAKA,CAA7D,CAAP;AAEA,GAjcgC;AAmcjC/I,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO3yB,IAAI,CAACwO,GAAL,CAAU,KAAKnF,CAAf,IAAqBrJ,IAAI,CAACwO,GAAL,CAAU,KAAKjF,CAAf,CAArB,GAA0CvJ,IAAI,CAACwO,GAAL,CAAU,KAAKktB,CAAf,CAAjD;AAEA,GAvcgC;AAycjC9I,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKd,YAAL,CAAmB,KAAKnxB,MAAL,MAAiB,CAApC,CAAP;AAEA,GA7cgC;AA+cjCyyB,EAAAA,SAAS,EAAE,UAAWzyB,MAAX,EAAoB;AAE9B,WAAO,KAAKiyB,SAAL,GAAiBhB,cAAjB,CAAiCjxB,MAAjC,CAAP;AAEA,GAndgC;AAqdjC+tB,EAAAA,IAAI,EAAE,UAAWluB,CAAX,EAAc6yB,KAAd,EAAsB;AAE3B,SAAKhqB,CAAL,IAAU,CAAE7I,CAAC,CAAC6I,CAAF,GAAM,KAAKA,CAAb,IAAmBgqB,KAA7B;AACA,SAAK9pB,CAAL,IAAU,CAAE/I,CAAC,CAAC+I,CAAF,GAAM,KAAKA,CAAb,IAAmB8pB,KAA7B;AACA,SAAKqI,CAAL,IAAU,CAAEl7B,CAAC,CAACk7B,CAAF,GAAM,KAAKA,CAAb,IAAmBrI,KAA7B;AAEA,WAAO,IAAP;AAEA,GA7dgC;AA+djCC,EAAAA,WAAW,EAAE,UAAWC,EAAX,EAAeC,EAAf,EAAmBH,KAAnB,EAA2B;AAEvC,SAAKhqB,CAAL,GAASkqB,EAAE,CAAClqB,CAAH,GAAO,CAAEmqB,EAAE,CAACnqB,CAAH,GAAOkqB,EAAE,CAAClqB,CAAZ,IAAkBgqB,KAAlC;AACA,SAAK9pB,CAAL,GAASgqB,EAAE,CAAChqB,CAAH,GAAO,CAAEiqB,EAAE,CAACjqB,CAAH,GAAOgqB,EAAE,CAAChqB,CAAZ,IAAkB8pB,KAAlC;AACA,SAAKqI,CAAL,GAASnI,EAAE,CAACmI,CAAH,GAAO,CAAElI,EAAE,CAACkI,CAAH,GAAOnI,EAAE,CAACmI,CAAZ,IAAkBrI,KAAlC;AAEA,WAAO,IAAP;AAEA,GAvegC;AAyejCb,EAAAA,KAAK,EAAE,UAAWhyB,CAAX,EAAcse,CAAd,EAAkB;AAExB,QAAKA,CAAC,KAAK/b,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,2FAAd;AACA,aAAO,KAAKqT,YAAL,CAAmBvjC,CAAnB,EAAsBse,CAAtB,CAAP;AAEA;;AAED,WAAO,KAAKilB,YAAL,CAAmB,IAAnB,EAAyBvjC,CAAzB,CAAP;AAEA,GApfgC;AAsfjCujC,EAAAA,YAAY,EAAE,UAAW3jC,CAAX,EAAcD,CAAd,EAAkB;AAE/B,UAAM6jC,EAAE,GAAG5jC,CAAC,CAACiJ,CAAb;AAAA,UAAgB46B,EAAE,GAAG7jC,CAAC,CAACmJ,CAAvB;AAAA,UAA0B26B,EAAE,GAAG9jC,CAAC,CAACs7B,CAAjC;AACA,UAAMyI,EAAE,GAAGhkC,CAAC,CAACkJ,CAAb;AAAA,UAAgB+6B,EAAE,GAAGjkC,CAAC,CAACoJ,CAAvB;AAAA,UAA0B86B,EAAE,GAAGlkC,CAAC,CAACu7B,CAAjC;AAEA,SAAKryB,CAAL,GAAS46B,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGE,EAAxB;AACA,SAAK76B,CAAL,GAAS26B,EAAE,GAAGC,EAAL,GAAUH,EAAE,GAAGK,EAAxB;AACA,SAAK3I,CAAL,GAASsI,EAAE,GAAGI,EAAL,GAAUH,EAAE,GAAGE,EAAxB;AAEA,WAAO,IAAP;AAEA,GAjgBgC;AAmgBjCG,EAAAA,eAAe,EAAE,UAAW9jC,CAAX,EAAe;AAE/B,UAAM+jC,WAAW,GAAG/jC,CAAC,CAACiyB,QAAF,EAApB;AAEA,QAAK8R,WAAW,KAAK,CAArB,EAAyB,OAAO,KAAK/T,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAP;AAEzB,UAAMM,MAAM,GAAGtwB,CAAC,CAAC+xB,GAAF,CAAO,IAAP,IAAgBgS,WAA/B;AAEA,WAAO,KAAKnT,IAAL,CAAW5wB,CAAX,EAAeoxB,cAAf,CAA+Bd,MAA/B,CAAP;AAEA,GA7gBgC;AA+gBjC0T,EAAAA,cAAc,EAAE,UAAWC,WAAX,EAAyB;AAExCnC,IAAAA,OAAO,CAAClR,IAAR,CAAc,IAAd,EAAqBkT,eAArB,CAAsCG,WAAtC;;AAEA,WAAO,KAAKjT,GAAL,CAAU8Q,OAAV,CAAP;AAEA,GArhBgC;AAuhBjCoC,EAAAA,OAAO,EAAE,UAAWC,MAAX,EAAoB;AAE5B;AACA;AAEA,WAAO,KAAKnT,GAAL,CAAU8Q,OAAO,CAAClR,IAAR,CAAcuT,MAAd,EAAuB/S,cAAvB,CAAuC,IAAI,KAAKW,GAAL,CAAUoS,MAAV,CAA3C,CAAV,CAAP;AAEA,GA9hBgC;AAgiBjCzD,EAAAA,OAAO,EAAE,UAAW1gC,CAAX,EAAe;AAEvB,UAAM+jC,WAAW,GAAGvkC,IAAI,CAAC0yB,IAAL,CAAW,KAAKD,QAAL,KAAkBjyB,CAAC,CAACiyB,QAAF,EAA7B,CAApB;AAEA,QAAK8R,WAAW,KAAK,CAArB,EAAyB,OAAOvkC,IAAI,CAACutB,EAAL,GAAU,CAAjB;AAEzB,UAAM8K,KAAK,GAAG,KAAK9F,GAAL,CAAU/xB,CAAV,IAAgB+jC,WAA9B,CANuB,CAQvB;;AAEA,WAAOvkC,IAAI,CAACg8B,IAAL,CAAW3O,SAAS,CAACY,KAAV,CAAiBoK,KAAjB,EAAwB,CAAE,CAA1B,EAA6B,CAA7B,CAAX,CAAP;AAEA,GA5iBgC;AA8iBjCtF,EAAAA,UAAU,EAAE,UAAWvyB,CAAX,EAAe;AAE1B,WAAOR,IAAI,CAAC0yB,IAAL,CAAW,KAAKM,iBAAL,CAAwBxyB,CAAxB,CAAX,CAAP;AAEA,GAljBgC;AAojBjCwyB,EAAAA,iBAAiB,EAAE,UAAWxyB,CAAX,EAAe;AAEjC,UAAMyyB,EAAE,GAAG,KAAK5pB,CAAL,GAAS7I,CAAC,CAAC6I,CAAtB;AAAA,UAAyB6pB,EAAE,GAAG,KAAK3pB,CAAL,GAAS/I,CAAC,CAAC+I,CAAzC;AAAA,UAA4Cq7B,EAAE,GAAG,KAAKlJ,CAAL,GAASl7B,CAAC,CAACk7B,CAA5D;AAEA,WAAOzI,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAf,GAAoB0R,EAAE,GAAGA,EAAhC;AAEA,GA1jBgC;AA4jBjCzR,EAAAA,mBAAmB,EAAE,UAAW3yB,CAAX,EAAe;AAEnC,WAAOR,IAAI,CAACwO,GAAL,CAAU,KAAKnF,CAAL,GAAS7I,CAAC,CAAC6I,CAArB,IAA2BrJ,IAAI,CAACwO,GAAL,CAAU,KAAKjF,CAAL,GAAS/I,CAAC,CAAC+I,CAArB,CAA3B,GAAsDvJ,IAAI,CAACwO,GAAL,CAAU,KAAKktB,CAAL,GAASl7B,CAAC,CAACk7B,CAArB,CAA7D;AAEA,GAhkBgC;AAkkBjCmJ,EAAAA,gBAAgB,EAAE,UAAWvkC,CAAX,EAAe;AAEhC,WAAO,KAAKwkC,sBAAL,CAA6BxkC,CAAC,CAACykC,MAA/B,EAAuCzkC,CAAC,CAAC0kC,GAAzC,EAA8C1kC,CAAC,CAAC+3B,KAAhD,CAAP;AAEA,GAtkBgC;AAwkBjCyM,EAAAA,sBAAsB,EAAE,UAAWC,MAAX,EAAmBC,GAAnB,EAAwB3M,KAAxB,EAAgC;AAEvD,UAAM4M,YAAY,GAAGjlC,IAAI,CAAC+vB,GAAL,CAAUiV,GAAV,IAAkBD,MAAvC;AAEA,SAAK17B,CAAL,GAAS47B,YAAY,GAAGjlC,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAxB;AACA,SAAK9uB,CAAL,GAASvJ,IAAI,CAAC8vB,GAAL,CAAUkV,GAAV,IAAkBD,MAA3B;AACA,SAAKrJ,CAAL,GAASuJ,YAAY,GAAGjlC,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAxB;AAEA,WAAO,IAAP;AAEA,GAllBgC;AAolBjC6M,EAAAA,kBAAkB,EAAE,UAAWrgC,CAAX,EAAe;AAElC,WAAO,KAAKsgC,wBAAL,CAA+BtgC,CAAC,CAACkgC,MAAjC,EAAyClgC,CAAC,CAACwzB,KAA3C,EAAkDxzB,CAAC,CAAC0E,CAApD,CAAP;AAEA,GAxlBgC;AA0lBjC47B,EAAAA,wBAAwB,EAAE,UAAWJ,MAAX,EAAmB1M,KAAnB,EAA0B9uB,CAA1B,EAA8B;AAEvD,SAAKF,CAAL,GAAS07B,MAAM,GAAG/kC,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAlB;AACA,SAAK9uB,CAAL,GAASA,CAAT;AACA,SAAKmyB,CAAL,GAASqJ,MAAM,GAAG/kC,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAlB;AAEA,WAAO,IAAP;AAEA,GAlmBgC;AAomBjC+M,EAAAA,qBAAqB,EAAE,UAAWhX,CAAX,EAAe;AAErC,UAAM7mB,CAAC,GAAG6mB,CAAC,CAAC4D,QAAZ;AAEA,SAAK3oB,CAAL,GAAS9B,CAAC,CAAE,EAAF,CAAV;AACA,SAAKgC,CAAL,GAAShC,CAAC,CAAE,EAAF,CAAV;AACA,SAAKm0B,CAAL,GAASn0B,CAAC,CAAE,EAAF,CAAV;AAEA,WAAO,IAAP;AAEA,GA9mBgC;AAgnBjC89B,EAAAA,kBAAkB,EAAE,UAAWjX,CAAX,EAAe;AAElC,UAAM0J,EAAE,GAAG,KAAKwN,mBAAL,CAA0BlX,CAA1B,EAA6B,CAA7B,EAAiCztB,MAAjC,EAAX;AACA,UAAMo3B,EAAE,GAAG,KAAKuN,mBAAL,CAA0BlX,CAA1B,EAA6B,CAA7B,EAAiCztB,MAAjC,EAAX;AACA,UAAM4kC,EAAE,GAAG,KAAKD,mBAAL,CAA0BlX,CAA1B,EAA6B,CAA7B,EAAiCztB,MAAjC,EAAX;AAEA,SAAK0I,CAAL,GAASyuB,EAAT;AACA,SAAKvuB,CAAL,GAASwuB,EAAT;AACA,SAAK2D,CAAL,GAAS6J,EAAT;AAEA,WAAO,IAAP;AAEA,GA5nBgC;AA8nBjCD,EAAAA,mBAAmB,EAAE,UAAWlX,CAAX,EAAc7iB,KAAd,EAAsB;AAE1C,WAAO,KAAKmoB,SAAL,CAAgBtF,CAAC,CAAC4D,QAAlB,EAA4BzmB,KAAK,GAAG,CAApC,CAAP;AAEA,GAloBgC;AAooBjC6pB,EAAAA,oBAAoB,EAAE,UAAWhH,CAAX,EAAc7iB,KAAd,EAAsB;AAE3C,WAAO,KAAKmoB,SAAL,CAAgBtF,CAAC,CAAC4D,QAAlB,EAA4BzmB,KAAK,GAAG,CAApC,CAAP;AAEA,GAxoBgC;AA0oBjCkoB,EAAAA,MAAM,EAAE,UAAWjzB,CAAX,EAAe;AAEtB,WAAWA,CAAC,CAAC6I,CAAF,KAAQ,KAAKA,CAAf,IAAwB7I,CAAC,CAAC+I,CAAF,KAAQ,KAAKA,CAArC,IAA8C/I,CAAC,CAACk7B,CAAF,KAAQ,KAAKA,CAApE;AAEA,GA9oBgC;AAgpBjChI,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAKzC,CAAL,GAAS8jB,KAAK,CAAErhB,MAAF,CAAd;AACA,SAAKvC,CAAL,GAAS4jB,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AACA,SAAK4vB,CAAL,GAASvO,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AAEA,WAAO,IAAP;AAEA,GA1pBgC;AA4pBjChJ,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5BqhB,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB,KAAKzC,CAAvB;AACA8jB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKvC,CAA3B;AACA4jB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAK4vB,CAA3B;AAEA,WAAOvO,KAAP;AAEA,GAvqBgC;AAyqBjCwG,EAAAA,mBAAmB,EAAE,UAAWC,SAAX,EAAsBroB,KAAtB,EAA6BO,MAA7B,EAAsC;AAE1D,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,qEAAd;AAEA;;AAED,SAAKrnB,CAAL,GAASuqB,SAAS,CAACC,IAAV,CAAgBtoB,KAAhB,CAAT;AACA,SAAKhC,CAAL,GAASqqB,SAAS,CAACE,IAAV,CAAgBvoB,KAAhB,CAAT;AACA,SAAKmwB,CAAL,GAAS9H,SAAS,CAACuJ,IAAV,CAAgB5xB,KAAhB,CAAT;AAEA,WAAO,IAAP;AAEA,GAvrBgC;AAyrBjCoiB,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKtkB,CAAL,GAASrJ,IAAI,CAAC2tB,MAAL,EAAT;AACA,SAAKpkB,CAAL,GAASvJ,IAAI,CAAC2tB,MAAL,EAAT;AACA,SAAK+N,CAAL,GAAS17B,IAAI,CAAC2tB,MAAL,EAAT;AAEA,WAAO,IAAP;AAEA;AAjsBgC,CAAlC;;AAqsBA,MAAM6X,GAAG,GAAG,IAAIjD,OAAJ,EAAZ;;AACA,MAAMkD,GAAG,GAAG,IAAIC,OAAJ,EAAZ;;AACA,MAAMC,KAAK,GAAG,IAAIpD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAd;;AACA,MAAMqD,IAAI,GAAG,IAAIrD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAb;;AACA,MAAMz0B,EAAE,GAAG,IAAIy0B,OAAJ,EAAX;;AACA,MAAMpE,EAAE,GAAG,IAAIoE,OAAJ,EAAX;;AACA,MAAMnE,EAAE,GAAG,IAAImE,OAAJ,EAAX;AAEA;;;;;;;;;;;;;;AAaA,SAASmD,OAAT,GAAmB;AAElB,OAAK1T,QAAL,GAAgB,CAEf,CAFe,EAEZ,CAFY,EAET,CAFS,EAEN,CAFM,EAGf,CAHe,EAGZ,CAHY,EAGT,CAHS,EAGN,CAHM,EAIf,CAJe,EAIZ,CAJY,EAIT,CAJS,EAIN,CAJM,EAKf,CALe,EAKZ,CALY,EAKT,CALS,EAKN,CALM,CAAhB;;AASA,MAAK1wB,SAAS,CAACX,MAAV,GAAmB,CAAxB,EAA4B;AAE3B8vB,IAAAA,OAAO,CAACyD,KAAR,CAAe,+EAAf;AAEA;AAED;;AAEDxyB,MAAM,CAACme,MAAP,CAAe6lB,OAAO,CAAC5kC,SAAvB,EAAkC;AAEjC+kC,EAAAA,SAAS,EAAE,IAFsB;AAIjCrV,EAAAA,GAAG,EAAE,UAAW4D,GAAX,EAAgBC,GAAhB,EAAqBC,GAArB,EAA0BwR,GAA1B,EAA+BvR,GAA/B,EAAoCC,GAApC,EAAyCC,GAAzC,EAA8CsR,GAA9C,EAAmDrR,GAAnD,EAAwDC,GAAxD,EAA6DC,GAA7D,EAAkEoR,GAAlE,EAAuEC,GAAvE,EAA4EC,GAA5E,EAAiFC,GAAjF,EAAsFC,GAAtF,EAA4F;AAEhG,UAAMvR,EAAE,GAAG,KAAK7C,QAAhB;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUT,GAAV;AAAeS,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUR,GAAV;AAAeQ,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUP,GAAV;AAAeO,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWiR,GAAX;AAC7CjR,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUN,GAAV;AAAeM,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUL,GAAV;AAAeK,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUJ,GAAV;AAAeI,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWkR,GAAX;AAC7ClR,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUH,GAAV;AAAeG,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUF,GAAV;AAAeE,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWD,GAAX;AAAgBC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWmR,GAAX;AAC9CnR,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUoR,GAAV;AAAepR,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUqR,GAAV;AAAerR,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWsR,GAAX;AAAgBtR,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWuR,GAAX;AAE9C,WAAO,IAAP;AAEA,GAfgC;AAiBjCtR,EAAAA,QAAQ,EAAE,YAAY;AAErB,SAAKtE,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP,EAGU,CAHV,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,WAAO,IAAP;AAEA,GA9BgC;AAgCjCW,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAIuU,OAAJ,GAAchS,SAAd,CAAyB,KAAK1B,QAA9B,CAAP;AAEA,GApCgC;AAsCjCZ,EAAAA,IAAI,EAAE,UAAWhD,CAAX,EAAe;AAEpB,UAAMyG,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM+C,EAAE,GAAG3G,CAAC,CAAC4D,QAAb;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACzDF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AACzDF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAZ;AAAmBF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAC3DF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAAqBF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAE/D,WAAO,IAAP;AAEA,GAlDgC;AAoDjCsR,EAAAA,YAAY,EAAE,UAAWjY,CAAX,EAAe;AAE5B,UAAMyG,EAAE,GAAG,KAAK7C,QAAhB;AAAA,UAA0B+C,EAAE,GAAG3G,CAAC,CAAC4D,QAAjC;AAEA6C,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AACAF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AACAF,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAb;AAEA,WAAO,IAAP;AAEA,GA9DgC;AAgEjCC,EAAAA,YAAY,EAAE,UAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAiC;AAE9CF,IAAAA,KAAK,CAACqQ,mBAAN,CAA2B,IAA3B,EAAiC,CAAjC;AACApQ,IAAAA,KAAK,CAACoQ,mBAAN,CAA2B,IAA3B,EAAiC,CAAjC;AACAnQ,IAAAA,KAAK,CAACmQ,mBAAN,CAA2B,IAA3B,EAAiC,CAAjC;AAEA,WAAO,IAAP;AAEA,GAxEgC;AA0EjCgB,EAAAA,SAAS,EAAE,UAAWrR,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAiC;AAE3C,SAAK3E,GAAL,CACCyE,KAAK,CAAC5rB,CADP,EACU6rB,KAAK,CAAC7rB,CADhB,EACmB8rB,KAAK,CAAC9rB,CADzB,EAC4B,CAD5B,EAEC4rB,KAAK,CAAC1rB,CAFP,EAEU2rB,KAAK,CAAC3rB,CAFhB,EAEmB4rB,KAAK,CAAC5rB,CAFzB,EAE4B,CAF5B,EAGC0rB,KAAK,CAACyG,CAHP,EAGUxG,KAAK,CAACwG,CAHhB,EAGmBvG,KAAK,CAACuG,CAHzB,EAG4B,CAH5B,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV;AAOA,WAAO,IAAP;AAEA,GArFgC;AAuFjC6K,EAAAA,eAAe,EAAE,UAAWnY,CAAX,EAAe;AAE/B;AAEA,UAAMyG,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM+C,EAAE,GAAG3G,CAAC,CAAC4D,QAAb;;AAEA,UAAMwU,MAAM,GAAG,IAAIhB,GAAG,CAACF,mBAAJ,CAAyBlX,CAAzB,EAA4B,CAA5B,EAAgCztB,MAAhC,EAAnB;;AACA,UAAM8lC,MAAM,GAAG,IAAIjB,GAAG,CAACF,mBAAJ,CAAyBlX,CAAzB,EAA4B,CAA5B,EAAgCztB,MAAhC,EAAnB;;AACA,UAAM+lC,MAAM,GAAG,IAAIlB,GAAG,CAACF,mBAAJ,CAAyBlX,CAAzB,EAA4B,CAA5B,EAAgCztB,MAAhC,EAAnB;;AAEAk0B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUyR,MAApB;AACA3R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUyR,MAApB;AACA3R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAUyR,MAApB;AACA3R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU0R,MAApB;AACA5R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU0R,MAApB;AACA5R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU0R,MAApB;AACA5R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU2R,MAApB;AACA7R,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUE,EAAE,CAAE,CAAF,CAAF,GAAU2R,MAApB;AACA7R,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWE,EAAE,CAAE,EAAF,CAAF,GAAW2R,MAAtB;AACA7R,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEA,WAAO,IAAP;AAEA,GAxHgC;AA0HjC8R,EAAAA,qBAAqB,EAAE,UAAWzG,KAAX,EAAmB;AAEzC,QAAK,EAAIA,KAAK,IAAIA,KAAK,CAACE,OAAnB,CAAL,EAAoC;AAEnC3P,MAAAA,OAAO,CAACyD,KAAR,CAAe,uGAAf;AAEA;;AAED,UAAMW,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM3oB,CAAC,GAAG62B,KAAK,CAAC72B,CAAhB;AAAA,UAAmBE,CAAC,GAAG22B,KAAK,CAAC32B,CAA7B;AAAA,UAAgCmyB,CAAC,GAAGwE,KAAK,CAACxE,CAA1C;AACA,UAAMt7B,CAAC,GAAGJ,IAAI,CAAC8vB,GAAL,CAAUzmB,CAAV,CAAV;AAAA,UAAyBlJ,CAAC,GAAGH,IAAI,CAAC+vB,GAAL,CAAU1mB,CAAV,CAA7B;AACA,UAAMxE,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAUvmB,CAAV,CAAV;AAAA,UAAyBstB,CAAC,GAAG72B,IAAI,CAAC+vB,GAAL,CAAUxmB,CAAV,CAA7B;AACA,UAAMhC,CAAC,GAAGvH,IAAI,CAAC8vB,GAAL,CAAU4L,CAAV,CAAV;AAAA,UAAyBj3B,CAAC,GAAGzE,IAAI,CAAC+vB,GAAL,CAAU2L,CAAV,CAA7B;;AAEA,QAAKwE,KAAK,CAACrQ,KAAN,KAAgB,KAArB,EAA6B;AAE5B,YAAM2F,EAAE,GAAGp1B,CAAC,GAAGmH,CAAf;AAAA,YAAkBq/B,EAAE,GAAGxmC,CAAC,GAAGqE,CAA3B;AAAA,YAA8BgxB,EAAE,GAAGt1B,CAAC,GAAGoH,CAAvC;AAAA,YAA0Cs/B,EAAE,GAAG1mC,CAAC,GAAGsE,CAAnD;AAEAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG0C,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEhwB,CAAF,GAAMJ,CAAhB;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgC,CAAV;AAEAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU+R,EAAE,GAAGnR,EAAE,GAAGoB,CAApB;AACAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUW,EAAE,GAAGqR,EAAE,GAAGhQ,CAApB;AACAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAE10B,CAAF,GAAM0E,CAAhB;AAEAgwB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgS,EAAE,GAAGrR,EAAE,GAAGqB,CAApB;AACAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUY,EAAE,GAAGmR,EAAE,GAAG/P,CAApB;AACAhC,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWz0B,CAAC,GAAGyE,CAAf;AAEA,KAhBD,MAgBO,IAAKq7B,KAAK,CAACrQ,KAAN,KAAgB,KAArB,EAA6B;AAEnC,YAAMiX,EAAE,GAAGjiC,CAAC,GAAG0C,CAAf;AAAA,YAAkBw/B,EAAE,GAAGliC,CAAC,GAAGJ,CAA3B;AAAA,YAA8BuiC,EAAE,GAAGnQ,CAAC,GAAGtvB,CAAvC;AAAA,YAA0C0/B,EAAE,GAAGpQ,CAAC,GAAGpyB,CAAnD;AAEAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUiS,EAAE,GAAGG,EAAE,GAAG9mC,CAApB;AACA00B,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmS,EAAE,GAAG7mC,CAAL,GAAS4mC,EAAnB;AACAlS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAC,GAAGy2B,CAAd;AAEAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAC,GAAGqE,CAAd;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAC,GAAGmH,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAE10B,CAAZ;AAEA00B,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUkS,EAAE,GAAG5mC,CAAL,GAAS6mC,EAAnB;AACAnS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUoS,EAAE,GAAGH,EAAE,GAAG3mC,CAApB;AACA00B,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWz0B,CAAC,GAAGyE,CAAf;AAEA,KAhBM,MAgBA,IAAKq7B,KAAK,CAACrQ,KAAN,KAAgB,KAArB,EAA6B;AAEnC,YAAMiX,EAAE,GAAGjiC,CAAC,GAAG0C,CAAf;AAAA,YAAkBw/B,EAAE,GAAGliC,CAAC,GAAGJ,CAA3B;AAAA,YAA8BuiC,EAAE,GAAGnQ,CAAC,GAAGtvB,CAAvC;AAAA,YAA0C0/B,EAAE,GAAGpQ,CAAC,GAAGpyB,CAAnD;AAEAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUiS,EAAE,GAAGG,EAAE,GAAG9mC,CAApB;AACA00B,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEz0B,CAAF,GAAMqE,CAAhB;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmS,EAAE,GAAGD,EAAE,GAAG5mC,CAApB;AAEA00B,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUkS,EAAE,GAAGC,EAAE,GAAG7mC,CAApB;AACA00B,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAC,GAAGmH,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUoS,EAAE,GAAGH,EAAE,GAAG3mC,CAApB;AAEA00B,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEz0B,CAAF,GAAMy2B,CAAhB;AACAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU10B,CAAV;AACA00B,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWz0B,CAAC,GAAGyE,CAAf;AAEA,KAhBM,MAgBA,IAAKq7B,KAAK,CAACrQ,KAAN,KAAgB,KAArB,EAA6B;AAEnC,YAAM2F,EAAE,GAAGp1B,CAAC,GAAGmH,CAAf;AAAA,YAAkBq/B,EAAE,GAAGxmC,CAAC,GAAGqE,CAA3B;AAAA,YAA8BgxB,EAAE,GAAGt1B,CAAC,GAAGoH,CAAvC;AAAA,YAA0Cs/B,EAAE,GAAG1mC,CAAC,GAAGsE,CAAnD;AAEAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG0C,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUY,EAAE,GAAGoB,CAAL,GAAS+P,EAAnB;AACA/R,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUW,EAAE,GAAGqB,CAAL,GAASgQ,EAAnB;AAEAhS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAGJ,CAAd;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgS,EAAE,GAAGhQ,CAAL,GAASrB,EAAnB;AACAX,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU+R,EAAE,GAAG/P,CAAL,GAASpB,EAAnB;AAEAZ,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEgC,CAAZ;AACAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU10B,CAAC,GAAG0E,CAAd;AACAgwB,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWz0B,CAAC,GAAGyE,CAAf;AAEA,KAhBM,MAgBA,IAAKq7B,KAAK,CAACrQ,KAAN,KAAgB,KAArB,EAA6B;AAEnC,YAAMqX,EAAE,GAAG9mC,CAAC,GAAGyE,CAAf;AAAA,YAAkBsiC,EAAE,GAAG/mC,CAAC,GAAGy2B,CAA3B;AAAA,YAA8BuQ,EAAE,GAAGjnC,CAAC,GAAG0E,CAAvC;AAAA,YAA0CwiC,EAAE,GAAGlnC,CAAC,GAAG02B,CAAnD;AAEAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG0C,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUwS,EAAE,GAAGH,EAAE,GAAGziC,CAApB;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUuS,EAAE,GAAG3iC,CAAL,GAAS0iC,EAAnB;AAEAtS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUpwB,CAAV;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAC,GAAGmH,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAE10B,CAAF,GAAMoH,CAAhB;AAEAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEgC,CAAF,GAAMtvB,CAAhB;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsS,EAAE,GAAG1iC,CAAL,GAAS2iC,EAAnB;AACAvS,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWqS,EAAE,GAAGG,EAAE,GAAG5iC,CAArB;AAEA,KAhBM,MAgBA,IAAKy7B,KAAK,CAACrQ,KAAN,KAAgB,KAArB,EAA6B;AAEnC,YAAMqX,EAAE,GAAG9mC,CAAC,GAAGyE,CAAf;AAAA,YAAkBsiC,EAAE,GAAG/mC,CAAC,GAAGy2B,CAA3B;AAAA,YAA8BuQ,EAAE,GAAGjnC,CAAC,GAAG0E,CAAvC;AAAA,YAA0CwiC,EAAE,GAAGlnC,CAAC,GAAG02B,CAAnD;AAEAhC,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUhwB,CAAC,GAAG0C,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEpwB,CAAZ;AACAowB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgC,CAAC,GAAGtvB,CAAd;AAEAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUqS,EAAE,GAAGziC,CAAL,GAAS4iC,EAAnB;AACAxS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAC,GAAGmH,CAAd;AACAstB,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsS,EAAE,GAAG1iC,CAAL,GAAS2iC,EAAnB;AAEAvS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAUuS,EAAE,GAAG3iC,CAAL,GAAS0iC,EAAnB;AACAtS,MAAAA,EAAE,CAAE,CAAF,CAAF,GAAU10B,CAAC,GAAGoH,CAAd;AACAstB,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWwS,EAAE,GAAG5iC,CAAL,GAASyiC,EAApB;AAEA,KA/GwC,CAiHzC;;;AACArS,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AACAA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX,CApHyC,CAsHzC;;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEA,WAAO,IAAP;AAEA,GAxPgC;AA0PjCyS,EAAAA,0BAA0B,EAAE,UAAW3iC,CAAX,EAAe;AAE1C,WAAO,KAAK0X,OAAL,CAAcspB,KAAd,EAAqBhhC,CAArB,EAAwBihC,IAAxB,CAAP;AAEA,GA9PgC;AAgQjC2B,EAAAA,MAAM,EAAE,UAAWC,GAAX,EAAgBrmC,MAAhB,EAAwBsmC,EAAxB,EAA6B;AAEpC,UAAM5S,EAAE,GAAG,KAAK7C,QAAhB;;AAEAoM,IAAAA,EAAE,CAAC3M,UAAH,CAAe+V,GAAf,EAAoBrmC,MAApB;;AAEA,QAAKi9B,EAAE,CAAC3L,QAAH,OAAkB,CAAvB,EAA2B;AAE1B;AAEA2L,MAAAA,EAAE,CAAC1C,CAAH,GAAO,CAAP;AAEA;;AAED0C,IAAAA,EAAE,CAACxL,SAAH;;AACA9kB,IAAAA,EAAE,CAACi2B,YAAH,CAAiB0D,EAAjB,EAAqBrJ,EAArB;;AAEA,QAAKtwB,EAAE,CAAC2kB,QAAH,OAAkB,CAAvB,EAA2B;AAE1B;AAEA,UAAKzyB,IAAI,CAACwO,GAAL,CAAUi5B,EAAE,CAAC/L,CAAb,MAAqB,CAA1B,EAA8B;AAE7B0C,QAAAA,EAAE,CAAC/0B,CAAH,IAAQ,MAAR;AAEA,OAJD,MAIO;AAEN+0B,QAAAA,EAAE,CAAC1C,CAAH,IAAQ,MAAR;AAEA;;AAED0C,MAAAA,EAAE,CAACxL,SAAH;;AACA9kB,MAAAA,EAAE,CAACi2B,YAAH,CAAiB0D,EAAjB,EAAqBrJ,EAArB;AAEA;;AAEDtwB,IAAAA,EAAE,CAAC8kB,SAAH;;AACAuL,IAAAA,EAAE,CAAC4F,YAAH,CAAiB3F,EAAjB,EAAqBtwB,EAArB;;AAEA+mB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU/mB,EAAE,CAACzE,CAAb;AAAgBwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsJ,EAAE,CAAC90B,CAAb;AAAgBwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUuJ,EAAE,CAAC/0B,CAAb;AAChCwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU/mB,EAAE,CAACvE,CAAb;AAAgBsrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsJ,EAAE,CAAC50B,CAAb;AAAgBsrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUuJ,EAAE,CAAC70B,CAAb;AAChCsrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU/mB,EAAE,CAAC4tB,CAAb;AAAgB7G,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsJ,EAAE,CAACzC,CAAb;AAAgB7G,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWuJ,EAAE,CAAC1C,CAAd;AAEhC,WAAO,IAAP;AAEA,GA7SgC;AA+SjC/J,EAAAA,QAAQ,EAAE,UAAWvD,CAAX,EAAcD,CAAd,EAAkB;AAE3B,QAAKA,CAAC,KAAKprB,SAAX,EAAuB;AAEtB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,kGAAd;AACA,aAAO,KAAK4E,gBAAL,CAAuBlH,CAAvB,EAA0BD,CAA1B,CAAP;AAEA;;AAED,WAAO,KAAKmH,gBAAL,CAAuB,IAAvB,EAA6BlH,CAA7B,CAAP;AAEA,GA1TgC;AA4TjCmH,EAAAA,WAAW,EAAE,UAAWnH,CAAX,EAAe;AAE3B,WAAO,KAAKkH,gBAAL,CAAuBlH,CAAvB,EAA0B,IAA1B,CAAP;AAEA,GAhUgC;AAkUjCkH,EAAAA,gBAAgB,EAAE,UAAWl1B,CAAX,EAAcD,CAAd,EAAkB;AAEnC,UAAMq1B,EAAE,GAAGp1B,CAAC,CAAC4xB,QAAb;AACA,UAAMyD,EAAE,GAAGt1B,CAAC,CAAC6xB,QAAb;AACA,UAAM6C,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM0D,GAAG,GAAGF,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBG,GAAG,GAAGH,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCI,GAAG,GAAGJ,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmDkS,GAAG,GAAGlS,EAAE,CAAE,EAAF,CAA3D;AACA,UAAMK,GAAG,GAAGL,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBM,GAAG,GAAGN,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCO,GAAG,GAAGP,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmDmS,GAAG,GAAGnS,EAAE,CAAE,EAAF,CAA3D;AACA,UAAMQ,GAAG,GAAGR,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBS,GAAG,GAAGT,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCU,GAAG,GAAGV,EAAE,CAAE,EAAF,CAA5C;AAAA,UAAoDoS,GAAG,GAAGpS,EAAE,CAAE,EAAF,CAA5D;AACA,UAAMqS,GAAG,GAAGrS,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBsS,GAAG,GAAGtS,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCuS,GAAG,GAAGvS,EAAE,CAAE,EAAF,CAA5C;AAAA,UAAoDwS,GAAG,GAAGxS,EAAE,CAAE,EAAF,CAA5D;AAEA,UAAMW,GAAG,GAAGV,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBW,GAAG,GAAGX,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCY,GAAG,GAAGZ,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmDwS,GAAG,GAAGxS,EAAE,CAAE,EAAF,CAA3D;AACA,UAAMa,GAAG,GAAGb,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBc,GAAG,GAAGd,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCe,GAAG,GAAGf,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmDyS,GAAG,GAAGzS,EAAE,CAAE,EAAF,CAA3D;AACA,UAAMgB,GAAG,GAAGhB,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBiB,GAAG,GAAGjB,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCkB,GAAG,GAAGlB,EAAE,CAAE,EAAF,CAA5C;AAAA,UAAoD0S,GAAG,GAAG1S,EAAE,CAAE,EAAF,CAA5D;AACA,UAAM2S,GAAG,GAAG3S,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqB4S,GAAG,GAAG5S,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoC6S,GAAG,GAAG7S,EAAE,CAAE,EAAF,CAA5C;AAAA,UAAoD8S,GAAG,GAAG9S,EAAE,CAAE,EAAF,CAA5D;AAEAZ,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGS,GAAN,GAAYR,GAAG,GAAGW,GAAlB,GAAwBV,GAAG,GAAGa,GAA9B,GAAoCiR,GAAG,GAAGU,GAApD;AACAvT,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGU,GAAN,GAAYT,GAAG,GAAGY,GAAlB,GAAwBX,GAAG,GAAGc,GAA9B,GAAoCgR,GAAG,GAAGW,GAApD;AACAxT,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUa,GAAG,GAAGW,GAAN,GAAYV,GAAG,GAAGa,GAAlB,GAAwBZ,GAAG,GAAGe,GAA9B,GAAoC+Q,GAAG,GAAGY,GAApD;AACAzT,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWa,GAAG,GAAGuS,GAAN,GAAYtS,GAAG,GAAGuS,GAAlB,GAAwBtS,GAAG,GAAGuS,GAA9B,GAAoCT,GAAG,GAAGa,GAArD;AAEA1T,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGM,GAAN,GAAYL,GAAG,GAAGQ,GAAlB,GAAwBP,GAAG,GAAGU,GAA9B,GAAoCkR,GAAG,GAAGS,GAApD;AACAvT,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGO,GAAN,GAAYN,GAAG,GAAGS,GAAlB,GAAwBR,GAAG,GAAGW,GAA9B,GAAoCiR,GAAG,GAAGU,GAApD;AACAxT,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgB,GAAG,GAAGQ,GAAN,GAAYP,GAAG,GAAGU,GAAlB,GAAwBT,GAAG,GAAGY,GAA9B,GAAoCgR,GAAG,GAAGW,GAApD;AACAzT,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWgB,GAAG,GAAGoS,GAAN,GAAYnS,GAAG,GAAGoS,GAAlB,GAAwBnS,GAAG,GAAGoS,GAA9B,GAAoCR,GAAG,GAAGY,GAArD;AAEA1T,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGG,GAAN,GAAYF,GAAG,GAAGK,GAAlB,GAAwBJ,GAAG,GAAGO,GAA9B,GAAoCmR,GAAG,GAAGQ,GAApD;AACAvT,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUmB,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGM,GAAlB,GAAwBL,GAAG,GAAGQ,GAA9B,GAAoCkR,GAAG,GAAGS,GAApD;AACAxT,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWmB,GAAG,GAAGK,GAAN,GAAYJ,GAAG,GAAGO,GAAlB,GAAwBN,GAAG,GAAGS,GAA9B,GAAoCiR,GAAG,GAAGU,GAArD;AACAzT,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWmB,GAAG,GAAGiS,GAAN,GAAYhS,GAAG,GAAGiS,GAAlB,GAAwBhS,GAAG,GAAGiS,GAA9B,GAAoCP,GAAG,GAAGW,GAArD;AAEA1T,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgT,GAAG,GAAG1R,GAAN,GAAY2R,GAAG,GAAGxR,GAAlB,GAAwByR,GAAG,GAAGtR,GAA9B,GAAoCuR,GAAG,GAAGI,GAApD;AACAvT,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUgT,GAAG,GAAGzR,GAAN,GAAY0R,GAAG,GAAGvR,GAAlB,GAAwBwR,GAAG,GAAGrR,GAA9B,GAAoCsR,GAAG,GAAGK,GAApD;AACAxT,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWgT,GAAG,GAAGxR,GAAN,GAAYyR,GAAG,GAAGtR,GAAlB,GAAwBuR,GAAG,GAAGpR,GAA9B,GAAoCqR,GAAG,GAAGM,GAArD;AACAzT,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWgT,GAAG,GAAGI,GAAN,GAAYH,GAAG,GAAGI,GAAlB,GAAwBH,GAAG,GAAGI,GAA9B,GAAoCH,GAAG,GAAGO,GAArD;AAEA,WAAO,IAAP;AAEA,GAxWgC;AA0WjC3W,EAAAA,cAAc,EAAE,UAAWtxB,CAAX,EAAe;AAE9B,UAAMu0B,EAAE,GAAG,KAAK7C,QAAhB;AAEA6C,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAYv0B,CAAZ;AAC1Cu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAYv0B,CAAZ;AAC1Cu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAYv0B,CAAZ;AAAeu0B,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAYv0B,CAAZ;AAC3Cu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWv0B,CAAX;AAAcu0B,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAYv0B,CAAZ;AAAeu0B,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAYv0B,CAAZ;AAE3C,WAAO,IAAP;AAEA,GArXgC;AAuXjCs2B,EAAAA,WAAW,EAAE,YAAY;AAExB,UAAM/B,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAMoC,GAAG,GAAGS,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBR,GAAG,GAAGQ,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCP,GAAG,GAAGO,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmDiR,GAAG,GAAGjR,EAAE,CAAE,EAAF,CAA3D;AACA,UAAMN,GAAG,GAAGM,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBL,GAAG,GAAGK,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCJ,GAAG,GAAGI,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmDkR,GAAG,GAAGlR,EAAE,CAAE,EAAF,CAA3D;AACA,UAAMH,GAAG,GAAGG,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBF,GAAG,GAAGE,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCD,GAAG,GAAGC,EAAE,CAAE,EAAF,CAA5C;AAAA,UAAoDmR,GAAG,GAAGnR,EAAE,CAAE,EAAF,CAA5D;AACA,UAAMoR,GAAG,GAAGpR,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBqR,GAAG,GAAGrR,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCsR,GAAG,GAAGtR,EAAE,CAAE,EAAF,CAA5C;AAAA,UAAoDuR,GAAG,GAAGvR,EAAE,CAAE,EAAF,CAA5D,CAPwB,CASxB;AACA;;AAEA,WACCoR,GAAG,IACF,CAAEH,GAAF,GAAQrR,GAAR,GAAcE,GAAd,GACGL,GAAG,GAAGyR,GAAN,GAAYpR,GADf,GAEGmR,GAAG,GAAGtR,GAAN,GAAYI,GAFf,GAGGP,GAAG,GAAG0R,GAAN,GAAYnR,GAHf,GAIGN,GAAG,GAAGE,GAAN,GAAYwR,GAJf,GAKG3R,GAAG,GAAGI,GAAN,GAAYuR,GANb,CAAH,GAQAE,GAAG,IACF,CAAE9R,GAAF,GAAQK,GAAR,GAAcuR,GAAd,GACG5R,GAAG,GAAG2R,GAAN,GAAYnR,GADf,GAEGkR,GAAG,GAAGvR,GAAN,GAAYK,GAFf,GAGGN,GAAG,GAAGC,GAAN,GAAYyR,GAHf,GAIG1R,GAAG,GAAGyR,GAAN,GAAYrR,GAJf,GAKGoR,GAAG,GAAGrR,GAAN,GAAYC,GANb,CARH,GAgBAyR,GAAG,IACF,CAAE/R,GAAF,GAAQ2R,GAAR,GAAcpR,GAAd,GACGP,GAAG,GAAGI,GAAN,GAAYwR,GADf,GAEGF,GAAG,GAAGvR,GAAN,GAAYI,GAFf,GAGGN,GAAG,GAAGE,GAAN,GAAYyR,GAHf,GAIGF,GAAG,GAAGtR,GAAN,GAAYE,GAJf,GAKGL,GAAG,GAAG0R,GAAN,GAAYrR,GANb,CAhBH,GAwBA0R,GAAG,IACF,CAAE9R,GAAF,GAAQE,GAAR,GAAcE,GAAd,GACGN,GAAG,GAAGK,GAAN,GAAYE,GADf,GAEGP,GAAG,GAAGI,GAAN,GAAYI,GAFf,GAGGN,GAAG,GAAGC,GAAN,GAAYI,GAHf,GAIGN,GAAG,GAAGE,GAAN,GAAYK,GAJf,GAKGP,GAAG,GAAGI,GAAN,GAAYC,GANb,CAzBJ;AAoCA,GAvagC;AAyajC4C,EAAAA,SAAS,EAAE,YAAY;AAEtB,UAAMzC,EAAE,GAAG,KAAK7C,QAAhB;AACA,QAAIuF,GAAJ;AAEAA,IAAAA,GAAG,GAAG1C,EAAE,CAAE,CAAF,CAAR;AAAeA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ;AAAmBA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU0C,GAAV;AAClCA,IAAAA,GAAG,GAAG1C,EAAE,CAAE,CAAF,CAAR;AAAeA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ;AAAmBA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU0C,GAAV;AAClCA,IAAAA,GAAG,GAAG1C,EAAE,CAAE,CAAF,CAAR;AAAeA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ;AAAmBA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU0C,GAAV;AAElCA,IAAAA,GAAG,GAAG1C,EAAE,CAAE,CAAF,CAAR;AAAeA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,EAAF,CAAZ;AAAoBA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW0C,GAAX;AACnCA,IAAAA,GAAG,GAAG1C,EAAE,CAAE,CAAF,CAAR;AAAeA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,EAAF,CAAZ;AAAoBA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW0C,GAAX;AACnCA,IAAAA,GAAG,GAAG1C,EAAE,CAAE,EAAF,CAAR;AAAgBA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWA,EAAE,CAAE,EAAF,CAAb;AAAqBA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW0C,GAAX;AAErC,WAAO,IAAP;AAEA,GAxbgC;AA0bjCiR,EAAAA,WAAW,EAAE,UAAWn/B,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAEjC,UAAM7G,EAAE,GAAG,KAAK7C,QAAhB;;AAEA,QAAK3oB,CAAC,CAACo5B,SAAP,EAAmB;AAElB5N,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWxrB,CAAC,CAACA,CAAb;AACAwrB,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWxrB,CAAC,CAACE,CAAb;AACAsrB,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWxrB,CAAC,CAACqyB,CAAb;AAEA,KAND,MAMO;AAEN7G,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWxrB,CAAX;AACAwrB,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAWtrB,CAAX;AACAsrB,MAAAA,EAAE,CAAE,EAAF,CAAF,GAAW6G,CAAX;AAEA;;AAED,WAAO,IAAP;AAEA,GA9cgC;AAgdjC5E,EAAAA,UAAU,EAAE,UAAW1I,CAAX,EAAc4I,iBAAd,EAAkC;AAE7C,QAAKA,iBAAiB,KAAKj0B,SAA3B,EAAuC;AAEtC0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,kFAAd;AAEA,KAN4C,CAQ7C;;;AACA,UAAMmE,EAAE,GAAG,KAAK7C,QAAhB;AAAA,UACC+C,EAAE,GAAG3G,CAAC,CAAC4D,QADR;AAAA,UAGCoC,GAAG,GAAGW,EAAE,CAAE,CAAF,CAHT;AAAA,UAGgBR,GAAG,GAAGQ,EAAE,CAAE,CAAF,CAHxB;AAAA,UAG+BL,GAAG,GAAGK,EAAE,CAAE,CAAF,CAHvC;AAAA,UAG8CkR,GAAG,GAAGlR,EAAE,CAAE,CAAF,CAHtD;AAAA,UAICV,GAAG,GAAGU,EAAE,CAAE,CAAF,CAJT;AAAA,UAIgBP,GAAG,GAAGO,EAAE,CAAE,CAAF,CAJxB;AAAA,UAI+BJ,GAAG,GAAGI,EAAE,CAAE,CAAF,CAJvC;AAAA,UAI8CmR,GAAG,GAAGnR,EAAE,CAAE,CAAF,CAJtD;AAAA,UAKCT,GAAG,GAAGS,EAAE,CAAE,CAAF,CALT;AAAA,UAKgBN,GAAG,GAAGM,EAAE,CAAE,CAAF,CALxB;AAAA,UAK+BH,GAAG,GAAGG,EAAE,CAAE,EAAF,CALvC;AAAA,UAK+CoR,GAAG,GAAGpR,EAAE,CAAE,EAAF,CALvD;AAAA,UAMC+Q,GAAG,GAAG/Q,EAAE,CAAE,EAAF,CANT;AAAA,UAMiBgR,GAAG,GAAGhR,EAAE,CAAE,EAAF,CANzB;AAAA,UAMiCiR,GAAG,GAAGjR,EAAE,CAAE,EAAF,CANzC;AAAA,UAMiDqR,GAAG,GAAGrR,EAAE,CAAE,EAAF,CANzD;AAAA,UAQCkC,GAAG,GAAGxC,GAAG,GAAGuR,GAAN,GAAYE,GAAZ,GAAkBH,GAAG,GAAGnR,GAAN,GAAYsR,GAA9B,GAAoCH,GAAG,GAAGpR,GAAN,GAAYwR,GAAhD,GAAsD3R,GAAG,GAAGwR,GAAN,GAAYG,GAAlE,GAAwE1R,GAAG,GAAGE,GAAN,GAAYyR,GAApF,GAA0F5R,GAAG,GAAGI,GAAN,GAAYwR,GAR7G;AAAA,UASClP,GAAG,GAAG4O,GAAG,GAAGlR,GAAN,GAAYsR,GAAZ,GAAkB5R,GAAG,GAAG0R,GAAN,GAAYE,GAA9B,GAAoCJ,GAAG,GAAGnR,GAAN,GAAYwR,GAAhD,GAAsD9R,GAAG,GAAG2R,GAAN,GAAYG,GAAlE,GAAwE7R,GAAG,GAAGK,GAAN,GAAYyR,GAApF,GAA0F/R,GAAG,GAAGO,GAAN,GAAYwR,GAT7G;AAAA,UAUCjP,GAAG,GAAG7C,GAAG,GAAGyR,GAAN,GAAYG,GAAZ,GAAkBJ,GAAG,GAAGrR,GAAN,GAAYyR,GAA9B,GAAoCJ,GAAG,GAAGtR,GAAN,GAAY2R,GAAhD,GAAsD9R,GAAG,GAAG0R,GAAN,GAAYI,GAAlE,GAAwE7R,GAAG,GAAGE,GAAN,GAAY4R,GAApF,GAA0F/R,GAAG,GAAGI,GAAN,GAAY2R,GAV7G;AAAA,UAWCqC,GAAG,GAAG3C,GAAG,GAAGrR,GAAN,GAAYE,GAAZ,GAAkBL,GAAG,GAAGyR,GAAN,GAAYpR,GAA9B,GAAoCmR,GAAG,GAAGtR,GAAN,GAAYI,GAAhD,GAAsDP,GAAG,GAAG0R,GAAN,GAAYnR,GAAlE,GAAwEN,GAAG,GAAGE,GAAN,GAAYwR,GAApF,GAA0F3R,GAAG,GAAGI,GAAN,GAAYuR,GAX7G;AAaA,UAAM5O,GAAG,GAAGhD,GAAG,GAAG6C,GAAN,GAAY1C,GAAG,GAAG2C,GAAlB,GAAwBxC,GAAG,GAAGyC,GAA9B,GAAoC8O,GAAG,GAAGwC,GAAtD;AAEA,QAAKrR,GAAG,KAAK,CAAb,EAAiB,OAAO,KAAK5G,GAAL,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAApD,EAAuD,CAAvD,CAAP;AAEjB,UAAM6G,MAAM,GAAG,IAAID,GAAnB;AAEAvC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUoC,GAAG,GAAGI,MAAhB;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEkR,GAAG,GAAGnR,GAAN,GAAYqR,GAAZ,GAAkBxR,GAAG,GAAGuR,GAAN,GAAYC,GAA9B,GAAoCF,GAAG,GAAGrR,GAAN,GAAYyR,GAAhD,GAAsD5R,GAAG,GAAGyR,GAAN,GAAYG,GAAlE,GAAwE1R,GAAG,GAAGC,GAAN,GAAY0R,GAApF,GAA0F7R,GAAG,GAAGK,GAAN,GAAYwR,GAAxG,IAAgH/O,MAA1H;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEL,GAAG,GAAGwR,GAAN,GAAYC,GAAZ,GAAkBF,GAAG,GAAGpR,GAAN,GAAYsR,GAA9B,GAAoCF,GAAG,GAAGrR,GAAN,GAAYwR,GAAhD,GAAsD3R,GAAG,GAAGyR,GAAN,GAAYE,GAAlE,GAAwE1R,GAAG,GAAGE,GAAN,GAAY0R,GAApF,GAA0F7R,GAAG,GAAGI,GAAN,GAAYyR,GAAxG,IAAgH/O,MAA1H;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEJ,GAAG,GAAGE,GAAN,GAAYsR,GAAZ,GAAkBzR,GAAG,GAAGI,GAAN,GAAYqR,GAA9B,GAAoCxR,GAAG,GAAGC,GAAN,GAAYwR,GAAhD,GAAsD3R,GAAG,GAAGK,GAAN,GAAYsR,GAAlE,GAAwE1R,GAAG,GAAGE,GAAN,GAAYyR,GAApF,GAA0F5R,GAAG,GAAGI,GAAN,GAAYwR,GAAxG,IAAgH9O,MAA1H;AAEAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUqC,GAAG,GAAGG,MAAhB;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEP,GAAG,GAAG0R,GAAN,GAAYC,GAAZ,GAAkBH,GAAG,GAAGlR,GAAN,GAAYqR,GAA9B,GAAoCH,GAAG,GAAGpR,GAAN,GAAYyR,GAAhD,GAAsD/R,GAAG,GAAG4R,GAAN,GAAYG,GAAlE,GAAwE7R,GAAG,GAAGI,GAAN,GAAY0R,GAApF,GAA0FhS,GAAG,GAAGQ,GAAN,GAAYwR,GAAxG,IAAgH/O,MAA1H;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEiR,GAAG,GAAGnR,GAAN,GAAYsR,GAAZ,GAAkB5R,GAAG,GAAG2R,GAAN,GAAYC,GAA9B,GAAoCH,GAAG,GAAGpR,GAAN,GAAYwR,GAAhD,GAAsD9R,GAAG,GAAG4R,GAAN,GAAYE,GAAlE,GAAwE7R,GAAG,GAAGK,GAAN,GAAY0R,GAApF,GAA0FhS,GAAG,GAAGO,GAAN,GAAYyR,GAAxG,IAAgH/O,MAA1H;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAER,GAAG,GAAGO,GAAN,GAAYqR,GAAZ,GAAkB3R,GAAG,GAAGK,GAAN,GAAYsR,GAA9B,GAAoC3R,GAAG,GAAGI,GAAN,GAAYwR,GAAhD,GAAsD9R,GAAG,GAAGQ,GAAN,GAAYsR,GAAlE,GAAwE7R,GAAG,GAAGK,GAAN,GAAYyR,GAApF,GAA0F/R,GAAG,GAAGO,GAAN,GAAYwR,GAAxG,IAAgH9O,MAA1H;AAEAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUsC,GAAG,GAAGE,MAAhB;AACAxC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEiR,GAAG,GAAGrR,GAAN,GAAYwR,GAAZ,GAAkB3R,GAAG,GAAGyR,GAAN,GAAYE,GAA9B,GAAoCH,GAAG,GAAGvR,GAAN,GAAY4R,GAAhD,GAAsD/R,GAAG,GAAG2R,GAAN,GAAYI,GAAlE,GAAwE7R,GAAG,GAAGC,GAAN,GAAY6R,GAApF,GAA0FhS,GAAG,GAAGK,GAAN,GAAY2R,GAAxG,IAAgH/O,MAA1H;AACAxC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAER,GAAG,GAAG0R,GAAN,GAAYE,GAAZ,GAAkBH,GAAG,GAAGtR,GAAN,GAAYyR,GAA9B,GAAoCH,GAAG,GAAGvR,GAAN,GAAY2R,GAAhD,GAAsD9R,GAAG,GAAG2R,GAAN,GAAYG,GAAlE,GAAwE7R,GAAG,GAAGE,GAAN,GAAY6R,GAApF,GAA0FhS,GAAG,GAAGI,GAAN,GAAY4R,GAAxG,IAAgH/O,MAA3H;AACAxC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAEP,GAAG,GAAGE,GAAN,GAAYyR,GAAZ,GAAkB5R,GAAG,GAAGI,GAAN,GAAYwR,GAA9B,GAAoC3R,GAAG,GAAGC,GAAN,GAAY2R,GAAhD,GAAsD9R,GAAG,GAAGK,GAAN,GAAYyR,GAAlE,GAAwE7R,GAAG,GAAGE,GAAN,GAAY4R,GAApF,GAA0F/R,GAAG,GAAGI,GAAN,GAAY2R,GAAxG,IAAgH9O,MAA3H;AAEAxC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW4T,GAAG,GAAGpR,MAAjB;AACAxC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAEP,GAAG,GAAGyR,GAAN,GAAYrR,GAAZ,GAAkBoR,GAAG,GAAGrR,GAAN,GAAYC,GAA9B,GAAoCoR,GAAG,GAAGvR,GAAN,GAAYK,GAAhD,GAAsDR,GAAG,GAAG2R,GAAN,GAAYnR,GAAlE,GAAwEN,GAAG,GAAGC,GAAN,GAAYyR,GAApF,GAA0F5R,GAAG,GAAGK,GAAN,GAAYuR,GAAxG,IAAgH3O,MAA3H;AACAxC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAEiR,GAAG,GAAGtR,GAAN,GAAYE,GAAZ,GAAkBL,GAAG,GAAG0R,GAAN,GAAYrR,GAA9B,GAAoCoR,GAAG,GAAGvR,GAAN,GAAYI,GAAhD,GAAsDP,GAAG,GAAG2R,GAAN,GAAYpR,GAAlE,GAAwEN,GAAG,GAAGE,GAAN,GAAYyR,GAApF,GAA0F5R,GAAG,GAAGI,GAAN,GAAYwR,GAAxG,IAAgH3O,MAA3H;AACAxC,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAER,GAAG,GAAGI,GAAN,GAAYC,GAAZ,GAAkBJ,GAAG,GAAGE,GAAN,GAAYE,GAA9B,GAAoCJ,GAAG,GAAGC,GAAN,GAAYI,GAAhD,GAAsDP,GAAG,GAAGK,GAAN,GAAYE,GAAlE,GAAwEN,GAAG,GAAGE,GAAN,GAAYK,GAApF,GAA0FR,GAAG,GAAGI,GAAN,GAAYI,GAAxG,IAAgHyC,MAA3H;AAEA,WAAO,IAAP;AAEA,GAlgBgC;AAogBjCc,EAAAA,KAAK,EAAE,UAAW33B,CAAX,EAAe;AAErB,UAAMq0B,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM3oB,CAAC,GAAG7I,CAAC,CAAC6I,CAAZ;AAAA,UAAeE,CAAC,GAAG/I,CAAC,CAAC+I,CAArB;AAAA,UAAwBmyB,CAAC,GAAGl7B,CAAC,CAACk7B,CAA9B;AAEA7G,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWxrB,CAAX;AAAcwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWtrB,CAAX;AAAcsrB,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAW6G,CAAX;AAC5B7G,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWxrB,CAAX;AAAcwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWtrB,CAAX;AAAcsrB,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAW6G,CAAX;AAC5B7G,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWxrB,CAAX;AAAcwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWtrB,CAAX;AAAcsrB,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAY6G,CAAZ;AAC5B7G,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWxrB,CAAX;AAAcwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,IAAWtrB,CAAX;AAAcsrB,IAAAA,EAAE,CAAE,EAAF,CAAF,IAAY6G,CAAZ;AAE5B,WAAO,IAAP;AAEA,GAhhBgC;AAkhBjCgN,EAAAA,iBAAiB,EAAE,YAAY;AAE9B,UAAM7T,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM2W,QAAQ,GAAG9T,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ,GAAoBA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAhC,GAAwCA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAArE;AACA,UAAM+T,QAAQ,GAAG/T,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ,GAAoBA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAhC,GAAwCA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAArE;AACA,UAAMgU,QAAQ,GAAGhU,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAZ,GAAoBA,EAAE,CAAE,CAAF,CAAF,GAAUA,EAAE,CAAE,CAAF,CAAhC,GAAwCA,EAAE,CAAE,EAAF,CAAF,GAAWA,EAAE,CAAE,EAAF,CAAtE;AAEA,WAAO70B,IAAI,CAAC0yB,IAAL,CAAW1yB,IAAI,CAAC+E,GAAL,CAAU4jC,QAAV,EAAoBC,QAApB,EAA8BC,QAA9B,CAAX,CAAP;AAEA,GA5hBgC;AA8hBjCC,EAAAA,eAAe,EAAE,UAAWz/B,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAErC,SAAKlL,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEUnnB,CAFV,EAGC,CAHD,EAGI,CAHJ,EAGO,CAHP,EAGUE,CAHV,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIUmyB,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,WAAO,IAAP;AAEA,GA3iBgC;AA6iBjCqN,EAAAA,aAAa,EAAE,UAAW1Q,KAAX,EAAmB;AAEjC,UAAMxzB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAV;AAAA,UAA6B/3B,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAjC;AAEA,SAAK7H,GAAL,CAEC,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGC,CAHD,EAGI3rB,CAHJ,EAGO,CAAEvE,CAHT,EAGY,CAHZ,EAIC,CAJD,EAIIA,CAJJ,EAIOuE,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,WAAO,IAAP;AAEA,GA5jBgC;AA8jBjCmkC,EAAAA,aAAa,EAAE,UAAW3Q,KAAX,EAAmB;AAEjC,UAAMxzB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAV;AAAA,UAA6B/3B,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAjC;AAEA,SAAK7H,GAAL,CAEE3rB,CAFF,EAEK,CAFL,EAEQvE,CAFR,EAEW,CAFX,EAGE,CAHF,EAGK,CAHL,EAGQ,CAHR,EAGW,CAHX,EAIC,CAAEA,CAJH,EAIM,CAJN,EAISuE,CAJT,EAIY,CAJZ,EAKE,CALF,EAKK,CALL,EAKQ,CALR,EAKW,CALX;AASA,WAAO,IAAP;AAEA,GA7kBgC;AA+kBjCokC,EAAAA,aAAa,EAAE,UAAW5Q,KAAX,EAAmB;AAEjC,UAAMxzB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAV;AAAA,UAA6B/3B,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAjC;AAEA,SAAK7H,GAAL,CAEC3rB,CAFD,EAEI,CAAEvE,CAFN,EAES,CAFT,EAEY,CAFZ,EAGCA,CAHD,EAGIuE,CAHJ,EAGO,CAHP,EAGU,CAHV,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,WAAO,IAAP;AAEA,GA9lBgC;AAgmBjCqkC,EAAAA,gBAAgB,EAAE,UAAWxI,IAAX,EAAiB7N,KAAjB,EAAyB;AAE1C;AAEA,UAAMhuB,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAAU+C,KAAV,CAAV;AACA,UAAMvyB,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAAU8C,KAAV,CAAV;AACA,UAAMjuB,CAAC,GAAG,IAAIC,CAAd;AACA,UAAMwE,CAAC,GAAGq3B,IAAI,CAACr3B,CAAf;AAAA,UAAkBE,CAAC,GAAGm3B,IAAI,CAACn3B,CAA3B;AAAA,UAA8BmyB,CAAC,GAAGgF,IAAI,CAAChF,CAAvC;AACA,UAAM9D,EAAE,GAAGhzB,CAAC,GAAGyE,CAAf;AAAA,UAAkBwuB,EAAE,GAAGjzB,CAAC,GAAG2E,CAA3B;AAEA,SAAKinB,GAAL,CAECoH,EAAE,GAAGvuB,CAAL,GAASxE,CAFV,EAEa+yB,EAAE,GAAGruB,CAAL,GAASjJ,CAAC,GAAGo7B,CAF1B,EAE6B9D,EAAE,GAAG8D,CAAL,GAASp7B,CAAC,GAAGiJ,CAF1C,EAE6C,CAF7C,EAGCquB,EAAE,GAAGruB,CAAL,GAASjJ,CAAC,GAAGo7B,CAHd,EAGiB7D,EAAE,GAAGtuB,CAAL,GAAS1E,CAH1B,EAG6BgzB,EAAE,GAAG6D,CAAL,GAASp7B,CAAC,GAAG+I,CAH1C,EAG6C,CAH7C,EAICuuB,EAAE,GAAG8D,CAAL,GAASp7B,CAAC,GAAGiJ,CAJd,EAIiBsuB,EAAE,GAAG6D,CAAL,GAASp7B,CAAC,GAAG+I,CAJ9B,EAIiCzE,CAAC,GAAG82B,CAAJ,GAAQA,CAAR,GAAY72B,CAJ7C,EAIgD,CAJhD,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASC,WAAO,IAAP;AAED,GArnBgC;AAunBjCskC,EAAAA,SAAS,EAAE,UAAW9/B,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE/B,SAAKlL,GAAL,CAECnnB,CAFD,EAEI,CAFJ,EAEO,CAFP,EAEU,CAFV,EAGC,CAHD,EAGIE,CAHJ,EAGO,CAHP,EAGU,CAHV,EAIC,CAJD,EAII,CAJJ,EAIOmyB,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,WAAO,IAAP;AAEA,GApoBgC;AAsoBjC0N,EAAAA,SAAS,EAAE,UAAW//B,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE/B,SAAKlL,GAAL,CAEC,CAFD,EAEIjnB,CAFJ,EAEOmyB,CAFP,EAEU,CAFV,EAGCryB,CAHD,EAGI,CAHJ,EAGOqyB,CAHP,EAGU,CAHV,EAICryB,CAJD,EAIIE,CAJJ,EAIO,CAJP,EAIU,CAJV,EAKC,CALD,EAKI,CALJ,EAKO,CALP,EAKU,CALV;AASA,WAAO,IAAP;AAEA,GAnpBgC;AAqpBjC8S,EAAAA,OAAO,EAAE,UAAW7T,QAAX,EAAqBw3B,UAArB,EAAiC7H,KAAjC,EAAyC;AAEjD,UAAMtD,EAAE,GAAG,KAAK7C,QAAhB;AAEA,UAAM3oB,CAAC,GAAG22B,UAAU,CAAClyB,EAArB;AAAA,UAAyBvE,CAAC,GAAGy2B,UAAU,CAAC7B,EAAxC;AAAA,UAA4CzC,CAAC,GAAGsE,UAAU,CAAC5B,EAA3D;AAAA,UAA+Dtf,CAAC,GAAGkhB,UAAU,CAAC3B,EAA9E;AACA,UAAMgL,EAAE,GAAGhgC,CAAC,GAAGA,CAAf;AAAA,UAAkBigC,EAAE,GAAG//B,CAAC,GAAGA,CAA3B;AAAA,UAA8BggC,EAAE,GAAG7N,CAAC,GAAGA,CAAvC;AACA,UAAMmB,EAAE,GAAGxzB,CAAC,GAAGggC,EAAf;AAAA,UAAmBrM,EAAE,GAAG3zB,CAAC,GAAGigC,EAA5B;AAAA,UAAgCrM,EAAE,GAAG5zB,CAAC,GAAGkgC,EAAzC;AACA,UAAMzM,EAAE,GAAGvzB,CAAC,GAAG+/B,EAAf;AAAA,UAAmBpM,EAAE,GAAG3zB,CAAC,GAAGggC,EAA5B;AAAA,UAAgCxM,EAAE,GAAGrB,CAAC,GAAG6N,EAAzC;AACA,UAAMC,EAAE,GAAG1qB,CAAC,GAAGuqB,EAAf;AAAA,UAAmBI,EAAE,GAAG3qB,CAAC,GAAGwqB,EAA5B;AAAA,UAAgCI,EAAE,GAAG5qB,CAAC,GAAGyqB,EAAzC;AAEA,UAAMzR,EAAE,GAAGK,KAAK,CAAC9uB,CAAjB;AAAA,UAAoB0uB,EAAE,GAAGI,KAAK,CAAC5uB,CAA/B;AAAA,UAAkCg8B,EAAE,GAAGpN,KAAK,CAACuD,CAA7C;AAEA7G,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAE,KAAMiI,EAAE,GAAGC,EAAX,CAAF,IAAsBjF,EAAhC;AACAjD,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEmI,EAAE,GAAG0M,EAAP,IAAc5R,EAAxB;AACAjD,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEoI,EAAE,GAAGwM,EAAP,IAAc3R,EAAxB;AACAjD,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEmI,EAAE,GAAG0M,EAAP,IAAc3R,EAAxB;AACAlD,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAE,KAAMgI,EAAE,GAAGE,EAAX,CAAF,IAAsBhF,EAAhC;AACAlD,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEqI,EAAE,GAAGsM,EAAP,IAAczR,EAAxB;AACAlD,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAEAA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEoI,EAAE,GAAGwM,EAAP,IAAclE,EAAxB;AACA1Q,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAEqI,EAAE,GAAGsM,EAAP,IAAcjE,EAAxB;AACA1Q,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAE,KAAMgI,EAAE,GAAGC,EAAX,CAAF,IAAsByI,EAAjC;AACA1Q,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEAA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWrsB,QAAQ,CAACa,CAApB;AACAwrB,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWrsB,QAAQ,CAACe,CAApB;AACAsrB,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWrsB,QAAQ,CAACkzB,CAApB;AACA7G,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAEA,WAAO,IAAP;AAEA,GAvrBgC;AAyrBjC8U,EAAAA,SAAS,EAAE,UAAWnhC,QAAX,EAAqBw3B,UAArB,EAAiC7H,KAAjC,EAAyC;AAEnD,UAAMtD,EAAE,GAAG,KAAK7C,QAAhB;;AAEA,QAAI8F,EAAE,GAAG0N,GAAG,CAAChV,GAAJ,CAASqE,EAAE,CAAE,CAAF,CAAX,EAAkBA,EAAE,CAAE,CAAF,CAApB,EAA2BA,EAAE,CAAE,CAAF,CAA7B,EAAqCl0B,MAArC,EAAT;;AACA,QAAIo3B,EAAE,GAAGyN,GAAG,CAAChV,GAAJ,CAASqE,EAAE,CAAE,CAAF,CAAX,EAAkBA,EAAE,CAAE,CAAF,CAApB,EAA2BA,EAAE,CAAE,CAAF,CAA7B,EAAqCl0B,MAArC,EAAT;;AACA,QAAI4kC,EAAE,GAAGC,GAAG,CAAChV,GAAJ,CAASqE,EAAE,CAAE,CAAF,CAAX,EAAkBA,EAAE,CAAE,CAAF,CAApB,EAA2BA,EAAE,CAAE,EAAF,CAA7B,EAAsCl0B,MAAtC,EAAT,CANmD,CAQnD;;;AACA,UAAMy2B,GAAG,GAAG,KAAKR,WAAL,EAAZ;AACA,QAAKQ,GAAG,GAAG,CAAX,EAAeU,EAAE,GAAG,CAAEA,EAAP;AAEftvB,IAAAA,QAAQ,CAACa,CAAT,GAAawrB,EAAE,CAAE,EAAF,CAAf;AACArsB,IAAAA,QAAQ,CAACe,CAAT,GAAasrB,EAAE,CAAE,EAAF,CAAf;AACArsB,IAAAA,QAAQ,CAACkzB,CAAT,GAAa7G,EAAE,CAAE,EAAF,CAAf,CAdmD,CAgBnD;;AACA4Q,IAAAA,GAAG,CAACrU,IAAJ,CAAU,IAAV;;AAEA,UAAMwY,KAAK,GAAG,IAAI9R,EAAlB;AACA,UAAM+R,KAAK,GAAG,IAAI9R,EAAlB;AACA,UAAM+R,KAAK,GAAG,IAAIvE,EAAlB;AAEAE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB4X,KAArB;AACAnE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB4X,KAArB;AACAnE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB4X,KAArB;AAEAnE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB6X,KAArB;AACApE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB6X,KAArB;AACApE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB6X,KAArB;AAEApE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB8X,KAArB;AACArE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,CAAd,KAAqB8X,KAArB;AACArE,IAAAA,GAAG,CAACzT,QAAJ,CAAc,EAAd,KAAsB8X,KAAtB;AAEA9J,IAAAA,UAAU,CAACY,qBAAX,CAAkC6E,GAAlC;AAEAtN,IAAAA,KAAK,CAAC9uB,CAAN,GAAUyuB,EAAV;AACAK,IAAAA,KAAK,CAAC5uB,CAAN,GAAUwuB,EAAV;AACAI,IAAAA,KAAK,CAACuD,CAAN,GAAU6J,EAAV;AAEA,WAAO,IAAP;AAEA,GApuBgC;AAsuBjCwE,EAAAA,eAAe,EAAE,UAAWthC,IAAX,EAAiBC,KAAjB,EAAwBC,GAAxB,EAA6BC,MAA7B,EAAqCohC,IAArC,EAA2CC,GAA3C,EAAiD;AAEjE,QAAKA,GAAG,KAAKlnC,SAAb,EAAyB;AAExB0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,sGAAd;AAEA;;AAED,UAAMmE,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM3oB,CAAC,GAAG,IAAI2gC,IAAJ,IAAathC,KAAK,GAAGD,IAArB,CAAV;AACA,UAAMc,CAAC,GAAG,IAAIygC,IAAJ,IAAarhC,GAAG,GAAGC,MAAnB,CAAV;AAEA,UAAMxI,CAAC,GAAG,CAAEsI,KAAK,GAAGD,IAAV,KAAqBC,KAAK,GAAGD,IAA7B,CAAV;AACA,UAAMtI,CAAC,GAAG,CAAEwI,GAAG,GAAGC,MAAR,KAAqBD,GAAG,GAAGC,MAA3B,CAAV;AACA,UAAM/D,CAAC,GAAG,EAAIolC,GAAG,GAAGD,IAAV,KAAqBC,GAAG,GAAGD,IAA3B,CAAV;AACA,UAAMnT,CAAC,GAAG,CAAE,CAAF,GAAMoT,GAAN,GAAYD,IAAZ,IAAqBC,GAAG,GAAGD,IAA3B,CAAV;AAEAnV,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUxrB,CAAV;AAAawrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUz0B,CAAV;AAAay0B,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACvCA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAUtrB,CAAV;AAAasrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU10B,CAAV;AAAa00B,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AACvCA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWhwB,CAAX;AAAcgwB,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAWgC,CAAX;AACxChC,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAE,CAAb;AAAgBA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAE1C,WAAO,IAAP;AAEA,GA9vBgC;AAgwBjCqV,EAAAA,gBAAgB,EAAE,UAAWzhC,IAAX,EAAiBC,KAAjB,EAAwBC,GAAxB,EAA6BC,MAA7B,EAAqCohC,IAArC,EAA2CC,GAA3C,EAAiD;AAElE,UAAMpV,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAMlT,CAAC,GAAG,OAAQpW,KAAK,GAAGD,IAAhB,CAAV;AACA,UAAMpI,CAAC,GAAG,OAAQsI,GAAG,GAAGC,MAAd,CAAV;AACA,UAAMlE,CAAC,GAAG,OAAQulC,GAAG,GAAGD,IAAd,CAAV;AAEA,UAAM3gC,CAAC,GAAG,CAAEX,KAAK,GAAGD,IAAV,IAAmBqW,CAA7B;AACA,UAAMvV,CAAC,GAAG,CAAEZ,GAAG,GAAGC,MAAR,IAAmBvI,CAA7B;AACA,UAAMq7B,CAAC,GAAG,CAAEuO,GAAG,GAAGD,IAAR,IAAiBtlC,CAA3B;AAEAmwB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,IAAI/V,CAAd;AAAiB+V,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAExrB,CAAb;AAC3CwrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,IAAIx0B,CAAd;AAAiBw0B,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAEtrB,CAAb;AAC3CsrB,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAE,CAAF,GAAMnwB,CAAjB;AAAoBmwB,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAE6G,CAAb;AAC9C7G,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,CAAF,CAAF,GAAU,CAAV;AAAaA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAAcA,IAAAA,EAAE,CAAE,EAAF,CAAF,GAAW,CAAX;AAExC,WAAO,IAAP;AAEA,GAlxBgC;AAoxBjCpB,EAAAA,MAAM,EAAE,UAAWsD,MAAX,EAAoB;AAE3B,UAAMlC,EAAE,GAAG,KAAK7C,QAAhB;AACA,UAAM+C,EAAE,GAAGgC,MAAM,CAAC/E,QAAlB;;AAEA,SAAM,IAAIhwB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,EAArB,EAAyBA,CAAC,EAA1B,EAAgC;AAE/B,UAAK6yB,EAAE,CAAE7yB,CAAF,CAAF,KAAY+yB,EAAE,CAAE/yB,CAAF,CAAnB,EAA2B,OAAO,KAAP;AAE3B;;AAED,WAAO,IAAP;AAEA,GAjyBgC;AAmyBjC0xB,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;;AAE5B,SAAM,IAAI9J,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,EAArB,EAAyBA,CAAC,EAA1B,EAAgC;AAE/B,WAAKgwB,QAAL,CAAehwB,CAAf,IAAqBmrB,KAAK,CAAEnrB,CAAC,GAAG8J,MAAN,CAA1B;AAEA;;AAED,WAAO,IAAP;AAEA,GA/yBgC;AAizBjChJ,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,UAAM+oB,EAAE,GAAG,KAAK7C,QAAhB;AAEA7E,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB+oB,EAAE,CAAE,CAAF,CAApB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AAEA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AAEA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB+oB,EAAE,CAAE,CAAF,CAAxB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,EAAX,CAAL,GAAuB+oB,EAAE,CAAE,EAAF,CAAzB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,EAAX,CAAL,GAAuB+oB,EAAE,CAAE,EAAF,CAAzB;AAEA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,EAAX,CAAL,GAAuB+oB,EAAE,CAAE,EAAF,CAAzB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,EAAX,CAAL,GAAuB+oB,EAAE,CAAE,EAAF,CAAzB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,EAAX,CAAL,GAAuB+oB,EAAE,CAAE,EAAF,CAAzB;AACA1H,IAAAA,KAAK,CAAErhB,MAAM,GAAG,EAAX,CAAL,GAAuB+oB,EAAE,CAAE,EAAF,CAAzB;AAEA,WAAO1H,KAAP;AAEA;AA90BgC,CAAlC;AAk1BA;;;;;;AAMA,MAAMgd,OAAO,GAAG,IAAIzE,OAAJ,EAAhB;;AACA,MAAM0E,aAAa,GAAG,IAAIlM,UAAJ,EAAtB;;AAEA,SAASmM,KAAT,CAAgBhhC,CAAC,GAAG,CAApB,EAAuBE,CAAC,GAAG,CAA3B,EAA8BmyB,CAAC,GAAG,CAAlC,EAAqC7L,KAAK,GAAGwa,KAAK,CAACC,YAAnD,EAAkE;AAEjE,OAAKx8B,EAAL,GAAUzE,CAAV;AACA,OAAK80B,EAAL,GAAU50B,CAAV;AACA,OAAK60B,EAAL,GAAU1C,CAAV;AACA,OAAK6O,MAAL,GAAc1a,KAAd;AAEA;;AAEDwa,KAAK,CAACG,cAAN,GAAuB,CAAE,KAAF,EAAS,KAAT,EAAgB,KAAhB,EAAuB,KAAvB,EAA8B,KAA9B,EAAqC,KAArC,CAAvB;AAEAH,KAAK,CAACC,YAAN,GAAqB,KAArB;AAEA5oC,MAAM,CAACwV,gBAAP,CAAyBmzB,KAAK,CAACvpC,SAA/B,EAA0C;AAEzCuI,EAAAA,CAAC,EAAE;AAEFuW,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK9R,EAAZ;AAEA,KANC;AAQF0iB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAK0I,EAAL,GAAU1I,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC,GAFsC;AAmBzCv2B,EAAAA,CAAC,EAAE;AAEFqW,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKue,EAAZ;AAEA,KANC;AAQF3N,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAK+4B,EAAL,GAAU/4B,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC,GAnBsC;AAoCzCpE,EAAAA,CAAC,EAAE;AAEF9b,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKwe,EAAZ;AAEA,KANC;AAQF5N,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKg5B,EAAL,GAAUh5B,KAAV;;AACA,WAAK06B,iBAAL;AAEA;AAbC,GApCsC;AAqDzCjQ,EAAAA,KAAK,EAAE;AAENjQ,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK2qB,MAAZ;AAEA,KANK;AAQN/Z,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAKmlC,MAAL,GAAcnlC,KAAd;;AACA,WAAK06B,iBAAL;AAEA;AAbK;AArDkC,CAA1C;AAwEAp+B,MAAM,CAACme,MAAP,CAAewqB,KAAK,CAACvpC,SAArB,EAAgC;AAE/Bs/B,EAAAA,OAAO,EAAE,IAFsB;AAI/B5P,EAAAA,GAAG,EAAE,UAAWnnB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAoB7L,KAApB,EAA4B;AAEhC,SAAK/hB,EAAL,GAAUzE,CAAV;AACA,SAAK80B,EAAL,GAAU50B,CAAV;AACA,SAAK60B,EAAL,GAAU1C,CAAV;AACA,SAAK6O,MAAL,GAAc1a,KAAK,IAAI,KAAK0a,MAA5B;;AAEA,SAAKzK,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAf8B;AAiB/B3O,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAK4K,EAA3B,EAA+B,KAAKqwB,EAApC,EAAwC,KAAKC,EAA7C,EAAiD,KAAKmM,MAAtD,CAAP;AAEA,GArB8B;AAuB/BnZ,EAAAA,IAAI,EAAE,UAAW8O,KAAX,EAAmB;AAExB,SAAKpyB,EAAL,GAAUoyB,KAAK,CAACpyB,EAAhB;AACA,SAAKqwB,EAAL,GAAU+B,KAAK,CAAC/B,EAAhB;AACA,SAAKC,EAAL,GAAU8B,KAAK,CAAC9B,EAAhB;AACA,SAAKmM,MAAL,GAAcrK,KAAK,CAACqK,MAApB;;AAEA,SAAKzK,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAlC8B;AAoC/Bc,EAAAA,qBAAqB,EAAE,UAAWxS,CAAX,EAAcyB,KAAd,EAAqBsQ,MAArB,EAA8B;AAEpD,UAAMlS,KAAK,GAAGZ,SAAS,CAACY,KAAxB,CAFoD,CAIpD;;AAEA,UAAM4G,EAAE,GAAGzG,CAAC,CAAC4D,QAAb;AACA,UAAMoK,GAAG,GAAGvH,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBwH,GAAG,GAAGxH,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCyH,GAAG,GAAGzH,EAAE,CAAE,CAAF,CAA5C;AACA,UAAM0H,GAAG,GAAG1H,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqB2H,GAAG,GAAG3H,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoC4H,GAAG,GAAG5H,EAAE,CAAE,CAAF,CAA5C;AACA,UAAM6H,GAAG,GAAG7H,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqB8H,GAAG,GAAG9H,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoC+H,GAAG,GAAG/H,EAAE,CAAE,EAAF,CAA5C;AAEAhF,IAAAA,KAAK,GAAGA,KAAK,IAAI,KAAK0a,MAAtB;;AAEA,YAAS1a,KAAT;AAEC,WAAK,KAAL;AAEC,aAAKsO,EAAL,GAAUn+B,IAAI,CAACyqC,IAAL,CAAWxc,KAAK,CAAEqO,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAhB,CAAV;;AAEA,YAAKt8B,IAAI,CAACwO,GAAL,CAAU8tB,GAAV,IAAkB,SAAvB,EAAmC;AAElC,eAAKxuB,EAAL,GAAU9N,IAAI,CAAC8yB,KAAL,CAAY,CAAE2J,GAAd,EAAmBG,GAAnB,CAAV;AACA,eAAKwB,EAAL,GAAUp+B,IAAI,CAAC8yB,KAAL,CAAY,CAAEuJ,GAAd,EAAmBD,GAAnB,CAAV;AAEA,SALD,MAKO;AAEN,eAAKtuB,EAAL,GAAU9N,IAAI,CAAC8yB,KAAL,CAAY6J,GAAZ,EAAiBH,GAAjB,CAAV;AACA,eAAK4B,EAAL,GAAU,CAAV;AAEA;;AAED;;AAED,WAAK,KAAL;AAEC,aAAKtwB,EAAL,GAAU9N,IAAI,CAACyqC,IAAL,CAAW,CAAExc,KAAK,CAAEwO,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAlB,CAAV;;AAEA,YAAKz8B,IAAI,CAACwO,GAAL,CAAUiuB,GAAV,IAAkB,SAAvB,EAAmC;AAElC,eAAK0B,EAAL,GAAUn+B,IAAI,CAAC8yB,KAAL,CAAYwJ,GAAZ,EAAiBM,GAAjB,CAAV;AACA,eAAKwB,EAAL,GAAUp+B,IAAI,CAAC8yB,KAAL,CAAYyJ,GAAZ,EAAiBC,GAAjB,CAAV;AAEA,SALD,MAKO;AAEN,eAAK2B,EAAL,GAAUn+B,IAAI,CAAC8yB,KAAL,CAAY,CAAE4J,GAAd,EAAmBN,GAAnB,CAAV;AACA,eAAKgC,EAAL,GAAU,CAAV;AAEA;;AAED;;AAED,WAAK,KAAL;AAEC,aAAKtwB,EAAL,GAAU9N,IAAI,CAACyqC,IAAL,CAAWxc,KAAK,CAAE0O,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAhB,CAAV;;AAEA,YAAK38B,IAAI,CAACwO,GAAL,CAAUmuB,GAAV,IAAkB,SAAvB,EAAmC;AAElC,eAAKwB,EAAL,GAAUn+B,IAAI,CAAC8yB,KAAL,CAAY,CAAE4J,GAAd,EAAmBE,GAAnB,CAAV;AACA,eAAKwB,EAAL,GAAUp+B,IAAI,CAAC8yB,KAAL,CAAY,CAAEuJ,GAAd,EAAmBG,GAAnB,CAAV;AAEA,SALD,MAKO;AAEN,eAAK2B,EAAL,GAAU,CAAV;AACA,eAAKC,EAAL,GAAUp+B,IAAI,CAAC8yB,KAAL,CAAYyJ,GAAZ,EAAiBH,GAAjB,CAAV;AAEA;;AAED;;AAED,WAAK,KAAL;AAEC,aAAK+B,EAAL,GAAUn+B,IAAI,CAACyqC,IAAL,CAAW,CAAExc,KAAK,CAAEyO,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAlB,CAAV;;AAEA,YAAK18B,IAAI,CAACwO,GAAL,CAAUkuB,GAAV,IAAkB,SAAvB,EAAmC;AAElC,eAAK5uB,EAAL,GAAU9N,IAAI,CAAC8yB,KAAL,CAAY6J,GAAZ,EAAiBC,GAAjB,CAAV;AACA,eAAKwB,EAAL,GAAUp+B,IAAI,CAAC8yB,KAAL,CAAYyJ,GAAZ,EAAiBH,GAAjB,CAAV;AAEA,SALD,MAKO;AAEN,eAAKtuB,EAAL,GAAU,CAAV;AACA,eAAKswB,EAAL,GAAUp+B,IAAI,CAAC8yB,KAAL,CAAY,CAAEuJ,GAAd,EAAmBG,GAAnB,CAAV;AAEA;;AAED;;AAED,WAAK,KAAL;AAEC,aAAK4B,EAAL,GAAUp+B,IAAI,CAACyqC,IAAL,CAAWxc,KAAK,CAAEsO,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAhB,CAAV;;AAEA,YAAKv8B,IAAI,CAACwO,GAAL,CAAU+tB,GAAV,IAAkB,SAAvB,EAAmC;AAElC,eAAKzuB,EAAL,GAAU9N,IAAI,CAAC8yB,KAAL,CAAY,CAAE2J,GAAd,EAAmBD,GAAnB,CAAV;AACA,eAAK2B,EAAL,GAAUn+B,IAAI,CAAC8yB,KAAL,CAAY,CAAE4J,GAAd,EAAmBN,GAAnB,CAAV;AAEA,SALD,MAKO;AAEN,eAAKtuB,EAAL,GAAU,CAAV;AACA,eAAKqwB,EAAL,GAAUn+B,IAAI,CAAC8yB,KAAL,CAAYwJ,GAAZ,EAAiBM,GAAjB,CAAV;AAEA;;AAED;;AAED,WAAK,KAAL;AAEC,aAAKwB,EAAL,GAAUp+B,IAAI,CAACyqC,IAAL,CAAW,CAAExc,KAAK,CAAEoO,GAAF,EAAO,CAAE,CAAT,EAAY,CAAZ,CAAlB,CAAV;;AAEA,YAAKr8B,IAAI,CAACwO,GAAL,CAAU6tB,GAAV,IAAkB,SAAvB,EAAmC;AAElC,eAAKvuB,EAAL,GAAU9N,IAAI,CAAC8yB,KAAL,CAAY6J,GAAZ,EAAiBH,GAAjB,CAAV;AACA,eAAK2B,EAAL,GAAUn+B,IAAI,CAAC8yB,KAAL,CAAYwJ,GAAZ,EAAiBF,GAAjB,CAAV;AAEA,SALD,MAKO;AAEN,eAAKtuB,EAAL,GAAU9N,IAAI,CAAC8yB,KAAL,CAAY,CAAE2J,GAAd,EAAmBG,GAAnB,CAAV;AACA,eAAKuB,EAAL,GAAU,CAAV;AAEA;;AAED;;AAED;AAEC1N,QAAAA,OAAO,CAACC,IAAR,CAAc,yEAAyEb,KAAvF;AAhHF;;AAoHA,SAAK0a,MAAL,GAAc1a,KAAd;AAEA,QAAKsQ,MAAM,KAAK,KAAhB,EAAwB,KAAKL,iBAAL;AAExB,WAAO,IAAP;AAEA,GA3K8B;AA6K/B4K,EAAAA,iBAAiB,EAAE,UAAW/lC,CAAX,EAAckrB,KAAd,EAAqBsQ,MAArB,EAA8B;AAEhDgK,IAAAA,OAAO,CAAC7C,0BAAR,CAAoC3iC,CAApC;;AAEA,WAAO,KAAKi8B,qBAAL,CAA4BuJ,OAA5B,EAAqCta,KAArC,EAA4CsQ,MAA5C,CAAP;AAEA,GAnL8B;AAqL/BwK,EAAAA,cAAc,EAAE,UAAWnqC,CAAX,EAAcqvB,KAAd,EAAsB;AAErC,WAAO,KAAKW,GAAL,CAAUhwB,CAAC,CAAC6I,CAAZ,EAAe7I,CAAC,CAAC+I,CAAjB,EAAoB/I,CAAC,CAACk7B,CAAtB,EAAyB7L,KAAK,IAAI,KAAK0a,MAAvC,CAAP;AAEA,GAzL8B;AA2L/BK,EAAAA,OAAO,EAAE,UAAWC,QAAX,EAAsB;AAE9B;AAEAT,IAAAA,aAAa,CAACnK,YAAd,CAA4B,IAA5B;;AAEA,WAAO,KAAKyK,iBAAL,CAAwBN,aAAxB,EAAuCS,QAAvC,CAAP;AAEA,GAnM8B;AAqM/BpX,EAAAA,MAAM,EAAE,UAAWyM,KAAX,EAAmB;AAE1B,WAASA,KAAK,CAACpyB,EAAN,KAAa,KAAKA,EAApB,IAA8BoyB,KAAK,CAAC/B,EAAN,KAAa,KAAKA,EAAhD,IAA0D+B,KAAK,CAAC9B,EAAN,KAAa,KAAKA,EAA5E,IAAsF8B,KAAK,CAACqK,MAAN,KAAiB,KAAKA,MAAnH;AAEA,GAzM8B;AA2M/B7W,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAmB;AAE7B,SAAKrf,EAAL,GAAUqf,KAAK,CAAE,CAAF,CAAf;AACA,SAAKgR,EAAL,GAAUhR,KAAK,CAAE,CAAF,CAAf;AACA,SAAKiR,EAAL,GAAUjR,KAAK,CAAE,CAAF,CAAf;AACA,QAAKA,KAAK,CAAE,CAAF,CAAL,KAAepqB,SAApB,EAAgC,KAAKwnC,MAAL,GAAcpd,KAAK,CAAE,CAAF,CAAnB;;AAEhC,SAAK2S,iBAAL;;AAEA,WAAO,IAAP;AAEA,GAtN8B;AAwN/Bh9B,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5BqhB,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB,KAAKgC,EAAvB;AACAqf,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKqyB,EAA3B;AACAhR,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKsyB,EAA3B;AACAjR,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAKy+B,MAA3B;AAEA,WAAOpd,KAAP;AAEA,GApO8B;AAsO/B2d,EAAAA,SAAS,EAAE,UAAWC,cAAX,EAA4B;AAEtC,QAAKA,cAAL,EAAsB;AAErB,aAAOA,cAAc,CAACva,GAAf,CAAoB,KAAK1iB,EAAzB,EAA6B,KAAKqwB,EAAlC,EAAsC,KAAKC,EAA3C,CAAP;AAEA,KAJD,MAIO;AAEN,aAAO,IAAImE,OAAJ,CAAa,KAAKz0B,EAAlB,EAAsB,KAAKqwB,EAA3B,EAA+B,KAAKC,EAApC,CAAP;AAEA;AAED,GAlP8B;AAoP/BiE,EAAAA,SAAS,EAAE,UAAWtuB,QAAX,EAAsB;AAEhC,SAAK+rB,iBAAL,GAAyB/rB,QAAzB;AAEA,WAAO,IAAP;AAEA,GA1P8B;AA4P/B+rB,EAAAA,iBAAiB,EAAE,YAAY,CAAE;AA5PF,CAAhC;AAgQA;;;;AAIA,SAASkL,MAAT,GAAkB;AAEjB,OAAKC,IAAL,GAAY,IAAI,CAAhB;AAEA;;AAEDvpC,MAAM,CAACme,MAAP,CAAemrB,MAAM,CAAClqC,SAAtB,EAAiC;AAEhC0vB,EAAAA,GAAG,EAAE,UAAW0a,OAAX,EAAqB;AAEzB,SAAKD,IAAL,GAAY,KAAKC,OAAL,GAAe,CAA3B;AAEA,GAN+B;AAQhCC,EAAAA,MAAM,EAAE,UAAWD,OAAX,EAAqB;AAE5B,SAAKD,IAAL,IAAa,KAAKC,OAAL,GAAe,CAA5B;AAEA,GAZ+B;AAchCE,EAAAA,SAAS,EAAE,YAAY;AAEtB,SAAKH,IAAL,GAAY,aAAa,CAAzB;AAEA,GAlB+B;AAoBhCI,EAAAA,MAAM,EAAE,UAAWH,OAAX,EAAqB;AAE5B,SAAKD,IAAL,IAAa,KAAKC,OAAL,GAAe,CAA5B;AAEA,GAxB+B;AA0BhCI,EAAAA,OAAO,EAAE,UAAWJ,OAAX,EAAqB;AAE7B,SAAKD,IAAL,IAAa,EAAI,KAAKC,OAAL,GAAe,CAAnB,CAAb;AAEA,GA9B+B;AAgChCK,EAAAA,UAAU,EAAE,YAAY;AAEvB,SAAKN,IAAL,GAAY,CAAZ;AAEA,GApC+B;AAsChCznC,EAAAA,IAAI,EAAE,UAAWgoC,MAAX,EAAoB;AAEzB,WAAO,CAAE,KAAKP,IAAL,GAAYO,MAAM,CAACP,IAArB,MAAgC,CAAvC;AAEA;AA1C+B,CAAjC;AA8CA,IAAIQ,WAAW,GAAG,CAAlB;;AAEA,MAAMC,KAAK,GAAG,IAAInJ,OAAJ,EAAd;;AACA,MAAMoJ,GAAG,GAAG,IAAIzN,UAAJ,EAAZ;;AACA,MAAM0N,KAAK,GAAG,IAAIlG,OAAJ,EAAd;;AACA,MAAMmG,OAAO,GAAG,IAAItJ,OAAJ,EAAhB;;AAEA,MAAMuJ,SAAS,GAAG,IAAIvJ,OAAJ,EAAlB;;AACA,MAAMwJ,MAAM,GAAG,IAAIxJ,OAAJ,EAAf;;AACA,MAAMyJ,aAAa,GAAG,IAAI9N,UAAJ,EAAtB;;AAEA,MAAM+N,MAAM,GAAG,IAAI1J,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;;AACA,MAAM2J,MAAM,GAAG,IAAI3J,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;;AACA,MAAM4J,MAAM,GAAG,IAAI5J,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;;AAEA,MAAM6J,WAAW,GAAG;AAAEjgC,EAAAA,IAAI,EAAE;AAAR,CAApB;AACA,MAAMkgC,aAAa,GAAG;AAAElgC,EAAAA,IAAI,EAAE;AAAR,CAAtB;AAEA;;;;;;;;AAQA,SAASmgC,QAAT,GAAoB;AAEnB5qC,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAER,IAAAA,KAAK,EAAEqmC,WAAW;AAApB,GAAnC;AAEA,OAAK1d,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA,OAAKnW,IAAL,GAAY,EAAZ;AACA,OAAKnL,IAAL,GAAY,UAAZ;AAEA,OAAKsK,MAAL,GAAc,IAAd;AACA,OAAK81B,QAAL,GAAgB,EAAhB;AAEA,OAAK9E,EAAL,GAAU6E,QAAQ,CAACE,SAAT,CAAmBrb,KAAnB,EAAV;AAEA,QAAM3oB,QAAQ,GAAG,IAAI+5B,OAAJ,EAAjB;AACA,QAAMvK,QAAQ,GAAG,IAAIqS,KAAJ,EAAjB;AACA,QAAMrK,UAAU,GAAG,IAAI9B,UAAJ,EAAnB;AACA,QAAM/F,KAAK,GAAG,IAAIoK,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAd;;AAEA,WAASkK,gBAAT,GAA4B;AAE3BzM,IAAAA,UAAU,CAACC,YAAX,CAAyBjI,QAAzB,EAAmC,KAAnC;AAEA;;AAED,WAAS0U,kBAAT,GAA8B;AAE7B1U,IAAAA,QAAQ,CAAC0S,iBAAT,CAA4B1K,UAA5B,EAAwCj9B,SAAxC,EAAmD,KAAnD;AAEA;;AAEDi1B,EAAAA,QAAQ,CAACqK,SAAT,CAAoBoK,gBAApB;;AACAzM,EAAAA,UAAU,CAACqC,SAAX,CAAsBqK,kBAAtB;;AAEAhrC,EAAAA,MAAM,CAACwV,gBAAP,CAAyB,IAAzB,EAA+B;AAC9B1O,IAAAA,QAAQ,EAAE;AACTmkC,MAAAA,YAAY,EAAE,IADL;AAETC,MAAAA,UAAU,EAAE,IAFH;AAGTxnC,MAAAA,KAAK,EAAEoD;AAHE,KADoB;AAM9BwvB,IAAAA,QAAQ,EAAE;AACT2U,MAAAA,YAAY,EAAE,IADL;AAETC,MAAAA,UAAU,EAAE,IAFH;AAGTxnC,MAAAA,KAAK,EAAE4yB;AAHE,KANoB;AAW9BgI,IAAAA,UAAU,EAAE;AACX2M,MAAAA,YAAY,EAAE,IADH;AAEXC,MAAAA,UAAU,EAAE,IAFD;AAGXxnC,MAAAA,KAAK,EAAE46B;AAHI,KAXkB;AAgB9B7H,IAAAA,KAAK,EAAE;AACNwU,MAAAA,YAAY,EAAE,IADR;AAENC,MAAAA,UAAU,EAAE,IAFN;AAGNxnC,MAAAA,KAAK,EAAE+yB;AAHD,KAhBuB;AAqB9B0U,IAAAA,eAAe,EAAE;AAChBznC,MAAAA,KAAK,EAAE,IAAIsgC,OAAJ;AADS,KArBa;AAwB9BoH,IAAAA,YAAY,EAAE;AACb1nC,MAAAA,KAAK,EAAE,IAAI6uB,OAAJ;AADM;AAxBgB,GAA/B;AA6BA,OAAK8C,MAAL,GAAc,IAAI2O,OAAJ,EAAd;AACA,OAAK7B,WAAL,GAAmB,IAAI6B,OAAJ,EAAnB;AAEA,OAAKtL,gBAAL,GAAwBkS,QAAQ,CAACS,uBAAjC;AACA,OAAKC,sBAAL,GAA8B,KAA9B;AAEA,OAAKxB,MAAL,GAAc,IAAIR,MAAJ,EAAd;AACA,OAAKiC,OAAL,GAAe,IAAf;AAEA,OAAKC,UAAL,GAAkB,KAAlB;AACA,OAAKC,aAAL,GAAqB,KAArB;AAEA,OAAKC,aAAL,GAAqB,IAArB;AACA,OAAKC,WAAL,GAAmB,CAAnB;AAEA,OAAKC,QAAL,GAAgB,EAAhB;AAEA;;AAEDhB,QAAQ,CAACE,SAAT,GAAqB,IAAIjK,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAArB;AACA+J,QAAQ,CAACS,uBAAT,GAAmC,IAAnC;AAEAT,QAAQ,CAACxrC,SAAT,GAAqBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAE/EoC,EAAAA,WAAW,EAAEopC,QAFkE;AAI/EiB,EAAAA,UAAU,EAAE,IAJmE;AAM/EC,EAAAA,cAAc,EAAE,YAAY,CAAE,CANiD;AAO/EC,EAAAA,aAAa,EAAE,YAAY,CAAE,CAPkD;AAS/E3R,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAoB;AAEjC,QAAK,KAAKqD,gBAAV,EAA6B,KAAKS,YAAL;AAE7B,SAAK9D,MAAL,CAAYxB,WAAZ,CAAyBwB,MAAzB;AAEA,SAAKA,MAAL,CAAY4S,SAAZ,CAAuB,KAAKnhC,QAA5B,EAAsC,KAAKw3B,UAA3C,EAAuD,KAAK7H,KAA5D;AAEA,GAjB8E;AAmB/EyK,EAAAA,eAAe,EAAE,UAAWj+B,CAAX,EAAe;AAE/B,SAAKq7B,UAAL,CAAgBzK,WAAhB,CAA6B5wB,CAA7B;AAEA,WAAO,IAAP;AAEA,GAzB8E;AA2B/E+oC,EAAAA,wBAAwB,EAAE,UAAWhN,IAAX,EAAiB7N,KAAjB,EAAyB;AAElD;AAEA,SAAKmN,UAAL,CAAgBS,gBAAhB,CAAkCC,IAAlC,EAAwC7N,KAAxC;AAEA,GAjC8E;AAmC/E8a,EAAAA,oBAAoB,EAAE,UAAWzN,KAAX,EAAmB;AAExC,SAAKF,UAAL,CAAgBC,YAAhB,CAA8BC,KAA9B,EAAqC,IAArC;AAEA,GAvC8E;AAyC/E0N,EAAAA,qBAAqB,EAAE,UAAWxf,CAAX,EAAe;AAErC;AAEA,SAAK4R,UAAL,CAAgBY,qBAAhB,CAAuCxS,CAAvC;AAEA,GA/C8E;AAiD/Eyf,EAAAA,yBAAyB,EAAE,UAAWlpC,CAAX,EAAe;AAEzC;AAEA,SAAKq7B,UAAL,CAAgB5O,IAAhB,CAAsBzsB,CAAtB;AAEA,GAvD8E;AAyD/EmpC,EAAAA,YAAY,EAAE,UAAWpN,IAAX,EAAiB7N,KAAjB,EAAyB;AAEtC;AACA;AAEA8Y,IAAAA,GAAG,CAAClL,gBAAJ,CAAsBC,IAAtB,EAA4B7N,KAA5B;;AAEA,SAAKmN,UAAL,CAAgBrO,QAAhB,CAA0Bga,GAA1B;AAEA,WAAO,IAAP;AAEA,GApE8E;AAsE/EoC,EAAAA,iBAAiB,EAAE,UAAWrN,IAAX,EAAiB7N,KAAjB,EAAyB;AAE3C;AACA;AACA;AAEA8Y,IAAAA,GAAG,CAAClL,gBAAJ,CAAsBC,IAAtB,EAA4B7N,KAA5B;;AAEA,SAAKmN,UAAL,CAAgBzK,WAAhB,CAA6BoW,GAA7B;AAEA,WAAO,IAAP;AAEA,GAlF8E;AAoF/EqC,EAAAA,OAAO,EAAE,UAAWnb,KAAX,EAAmB;AAE3B,WAAO,KAAKib,YAAL,CAAmB7B,MAAnB,EAA2BpZ,KAA3B,CAAP;AAEA,GAxF8E;AA0F/Eob,EAAAA,OAAO,EAAE,UAAWpb,KAAX,EAAmB;AAE3B,WAAO,KAAKib,YAAL,CAAmB5B,MAAnB,EAA2BrZ,KAA3B,CAAP;AAEA,GA9F8E;AAgG/Eqb,EAAAA,OAAO,EAAE,UAAWrb,KAAX,EAAmB;AAE3B,WAAO,KAAKib,YAAL,CAAmB3B,MAAnB,EAA2BtZ,KAA3B,CAAP;AAEA,GApG8E;AAsG/Esb,EAAAA,eAAe,EAAE,UAAWzN,IAAX,EAAiB0N,QAAjB,EAA4B;AAE5C;AACA;AAEA1C,IAAAA,KAAK,CAACta,IAAN,CAAYsP,IAAZ,EAAmBkC,eAAnB,CAAoC,KAAK5C,UAAzC;;AAEA,SAAKx3B,QAAL,CAAcmR,GAAd,CAAmB+xB,KAAK,CAAC9Z,cAAN,CAAsBwc,QAAtB,CAAnB;AAEA,WAAO,IAAP;AAEA,GAjH8E;AAmH/EC,EAAAA,UAAU,EAAE,UAAWD,QAAX,EAAsB;AAEjC,WAAO,KAAKD,eAAL,CAAsBlC,MAAtB,EAA8BmC,QAA9B,CAAP;AAEA,GAvH8E;AAyH/EE,EAAAA,UAAU,EAAE,UAAWF,QAAX,EAAsB;AAEjC,WAAO,KAAKD,eAAL,CAAsBjC,MAAtB,EAA8BkC,QAA9B,CAAP;AAEA,GA7H8E;AA+H/EG,EAAAA,UAAU,EAAE,UAAWH,QAAX,EAAsB;AAEjC,WAAO,KAAKD,eAAL,CAAsBhC,MAAtB,EAA8BiC,QAA9B,CAAP;AAEA,GAnI8E;AAqI/EI,EAAAA,YAAY,EAAE,UAAWC,MAAX,EAAoB;AAEjC,WAAOA,MAAM,CAAC3S,YAAP,CAAqB,KAAK+H,WAA1B,CAAP;AAEA,GAzI8E;AA2I/E6K,EAAAA,YAAY,EAAE,UAAWD,MAAX,EAAoB;AAEjC,WAAOA,MAAM,CAAC3S,YAAP,CAAqB8P,KAAK,CAAC9U,UAAN,CAAkB,KAAK+M,WAAvB,CAArB,CAAP;AAEA,GA/I8E;AAiJ/E0D,EAAAA,MAAM,EAAE,UAAWl+B,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE5B;AAEA,QAAKryB,CAAC,CAACo5B,SAAP,EAAmB;AAElBoJ,MAAAA,OAAO,CAACza,IAAR,CAAc/nB,CAAd;AAEA,KAJD,MAIO;AAENwiC,MAAAA,OAAO,CAACrb,GAAR,CAAannB,CAAb,EAAgBE,CAAhB,EAAmBmyB,CAAnB;AAEA;;AAED,UAAMjlB,MAAM,GAAG,KAAKA,MAApB;AAEA,SAAKk4B,iBAAL,CAAwB,IAAxB,EAA8B,KAA9B;;AAEA7C,IAAAA,SAAS,CAAC1G,qBAAV,CAAiC,KAAKvB,WAAtC;;AAEA,QAAK,KAAK+K,QAAL,IAAiB,KAAKC,OAA3B,EAAqC;AAEpCjD,MAAAA,KAAK,CAACrE,MAAN,CAAcuE,SAAd,EAAyBD,OAAzB,EAAkC,KAAKpE,EAAvC;AAEA,KAJD,MAIO;AAENmE,MAAAA,KAAK,CAACrE,MAAN,CAAcsE,OAAd,EAAuBC,SAAvB,EAAkC,KAAKrE,EAAvC;AAEA;;AAED,SAAKzH,UAAL,CAAgBY,qBAAhB,CAAuCgL,KAAvC;;AAEA,QAAKn1B,MAAL,EAAc;AAEbm1B,MAAAA,KAAK,CAACrF,eAAN,CAAuB9vB,MAAM,CAACotB,WAA9B;;AACA8H,MAAAA,GAAG,CAAC/K,qBAAJ,CAA2BgL,KAA3B;;AACA,WAAK5L,UAAL,CAAgBzK,WAAhB,CAA6BoW,GAAG,CAACvK,OAAJ,EAA7B;AAEA;AAED,GAzL8E;AA2L/EznB,EAAAA,GAAG,EAAE,UAAWlT,MAAX,EAAoB;AAExB,QAAKnF,SAAS,CAACX,MAAV,GAAmB,CAAxB,EAA4B;AAE3B,WAAM,IAAIqB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGV,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,EAAxC,EAA8C;AAE7C,aAAK2X,GAAL,CAAUrY,SAAS,CAAEU,CAAF,CAAnB;AAEA;;AAED,aAAO,IAAP;AAEA;;AAED,QAAKyE,MAAM,KAAK,IAAhB,EAAuB;AAEtBgqB,MAAAA,OAAO,CAACyD,KAAR,CAAe,iEAAf,EAAkFztB,MAAlF;AACA,aAAO,IAAP;AAEA;;AAED,QAAOA,MAAM,IAAIA,MAAM,CAAC8mC,UAAxB,EAAuC;AAEtC,UAAK9mC,MAAM,CAACgQ,MAAP,KAAkB,IAAvB,EAA8B;AAE7BhQ,QAAAA,MAAM,CAACgQ,MAAP,CAAciF,MAAd,CAAsBjV,MAAtB;AAEA;;AAEDA,MAAAA,MAAM,CAACgQ,MAAP,GAAgB,IAAhB;AACA,WAAK81B,QAAL,CAAcphC,IAAd,CAAoB1E,MAApB;AAEAA,MAAAA,MAAM,CAAC+D,aAAP,CAAsB4hC,WAAtB;AAEA,KAbD,MAaO;AAEN3b,MAAAA,OAAO,CAACyD,KAAR,CAAe,+DAAf,EAAgFztB,MAAhF;AAEA;;AAED,WAAO,IAAP;AAEA,GArO8E;AAuO/EiV,EAAAA,MAAM,EAAE,UAAWjV,MAAX,EAAoB;AAE3B,QAAKnF,SAAS,CAACX,MAAV,GAAmB,CAAxB,EAA4B;AAE3B,WAAM,IAAIqB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGV,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,EAAxC,EAA8C;AAE7C,aAAK0Z,MAAL,CAAapa,SAAS,CAAEU,CAAF,CAAtB;AAEA;;AAED,aAAO,IAAP;AAEA;;AAED,UAAMuJ,KAAK,GAAG,KAAKghC,QAAL,CAAcrhC,OAAd,CAAuBzE,MAAvB,CAAd;;AAEA,QAAK8E,KAAK,KAAK,CAAE,CAAjB,EAAqB;AAEpB9E,MAAAA,MAAM,CAACgQ,MAAP,GAAgB,IAAhB;AACA,WAAK81B,QAAL,CAAc/gC,MAAd,CAAsBD,KAAtB,EAA6B,CAA7B;AAEA9E,MAAAA,MAAM,CAAC+D,aAAP,CAAsB6hC,aAAtB;AAEA;;AAED,WAAO,IAAP;AAEA,GAlQ8E;AAoQ/EyC,EAAAA,MAAM,EAAE,UAAWroC,MAAX,EAAoB;AAE3B;AAEA,SAAKkoC,iBAAL,CAAwB,IAAxB,EAA8B,KAA9B;;AAEA/C,IAAAA,KAAK,CAAC9U,UAAN,CAAkB,KAAK+M,WAAvB;;AAEA,QAAKp9B,MAAM,CAACgQ,MAAP,KAAkB,IAAvB,EAA8B;AAE7BhQ,MAAAA,MAAM,CAACgQ,MAAP,CAAck4B,iBAAd,CAAiC,IAAjC,EAAuC,KAAvC;;AAEA/C,MAAAA,KAAK,CAACja,QAAN,CAAgBlrB,MAAM,CAACgQ,MAAP,CAAcotB,WAA9B;AAEA;;AAEDp9B,IAAAA,MAAM,CAACq1B,YAAP,CAAqB8P,KAArB;AAEAnlC,IAAAA,MAAM,CAACkoC,iBAAP,CAA0B,KAA1B,EAAiC,KAAjC;AAEA,SAAKh1B,GAAL,CAAUlT,MAAV;AAEA,WAAO,IAAP;AAEA,GA5R8E;AA8R/EsoC,EAAAA,aAAa,EAAE,UAAWC,EAAX,EAAgB;AAE9B,WAAO,KAAKC,mBAAL,CAA0B,IAA1B,EAAgCD,EAAhC,CAAP;AAEA,GAlS8E;AAoS/EE,EAAAA,eAAe,EAAE,UAAW53B,IAAX,EAAkB;AAElC,WAAO,KAAK23B,mBAAL,CAA0B,MAA1B,EAAkC33B,IAAlC,CAAP;AAEA,GAxS8E;AA0S/E23B,EAAAA,mBAAmB,EAAE,UAAW33B,IAAX,EAAiBlS,KAAjB,EAAyB;AAE7C,QAAK,KAAMkS,IAAN,MAAiBlS,KAAtB,EAA8B,OAAO,IAAP;;AAE9B,SAAM,IAAIpD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKmqC,QAAL,CAAc5rC,MAAnC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD,YAAMmtC,KAAK,GAAG,KAAK5C,QAAL,CAAevqC,CAAf,CAAd;AACA,YAAMyE,MAAM,GAAG0oC,KAAK,CAACF,mBAAN,CAA2B33B,IAA3B,EAAiClS,KAAjC,CAAf;;AAEA,UAAKqB,MAAM,KAAK1D,SAAhB,EAA4B;AAE3B,eAAO0D,MAAP;AAEA;AAED;;AAED,WAAO1D,SAAP;AAEA,GA7T8E;AA+T/EqsC,EAAAA,gBAAgB,EAAE,UAAWjuC,MAAX,EAAoB;AAErC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,SAAK8M,iBAAL,CAAwB,IAAxB;AAEA,WAAOluC,MAAM,CAACikC,qBAAP,CAA8B,KAAKvB,WAAnC,CAAP;AAEA,GA5U8E;AA8U/EyL,EAAAA,kBAAkB,EAAE,UAAWnuC,MAAX,EAAoB;AAEvC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,8DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAI+8B,UAAJ,EAAT;AAEA;;AAED,SAAKmR,iBAAL,CAAwB,IAAxB;AAEA,SAAKxL,WAAL,CAAiB8F,SAAjB,CAA4BmC,SAA5B,EAAuC3qC,MAAvC,EAA+C4qC,MAA/C;AAEA,WAAO5qC,MAAP;AAEA,GA7V8E;AA+V/EouC,EAAAA,aAAa,EAAE,UAAWpuC,MAAX,EAAoB;AAElC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,yDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,SAAK8M,iBAAL,CAAwB,IAAxB;AAEA,SAAKxL,WAAL,CAAiB8F,SAAjB,CAA4BmC,SAA5B,EAAuCE,aAAvC,EAAsD7qC,MAAtD;AAEA,WAAOA,MAAP;AAEA,GA9W8E;AAgX/EquC,EAAAA,iBAAiB,EAAE,UAAWruC,MAAX,EAAoB;AAEtC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,SAAK8M,iBAAL,CAAwB,IAAxB;AAEA,UAAM9nC,CAAC,GAAG,KAAKs8B,WAAL,CAAiB7R,QAA3B;AAEA,WAAO7wB,MAAM,CAACqvB,GAAP,CAAYjpB,CAAC,CAAE,CAAF,CAAb,EAAoBA,CAAC,CAAE,CAAF,CAArB,EAA4BA,CAAC,CAAE,EAAF,CAA7B,EAAsCqrB,SAAtC,EAAP;AAEA,GA/X8E;AAiY/E6c,EAAAA,OAAO,EAAE,YAAY,CAAE,CAjYwD;AAmY/EC,EAAAA,QAAQ,EAAE,UAAW37B,QAAX,EAAsB;AAE/BA,IAAAA,QAAQ,CAAE,IAAF,CAAR;AAEA,UAAMw4B,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDuqC,MAAAA,QAAQ,CAAEvqC,CAAF,CAAR,CAAc0tC,QAAd,CAAwB37B,QAAxB;AAEA;AAED,GA/Y8E;AAiZ/E47B,EAAAA,eAAe,EAAE,UAAW57B,QAAX,EAAsB;AAEtC,QAAK,KAAKk5B,OAAL,KAAiB,KAAtB,EAA8B;AAE9Bl5B,IAAAA,QAAQ,CAAE,IAAF,CAAR;AAEA,UAAMw4B,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDuqC,MAAAA,QAAQ,CAAEvqC,CAAF,CAAR,CAAc2tC,eAAd,CAA+B57B,QAA/B;AAEA;AAED,GA/Z8E;AAia/E67B,EAAAA,iBAAiB,EAAE,UAAW77B,QAAX,EAAsB;AAExC,UAAM0C,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKA,MAAM,KAAK,IAAhB,EAAuB;AAEtB1C,MAAAA,QAAQ,CAAE0C,MAAF,CAAR;AAEAA,MAAAA,MAAM,CAACm5B,iBAAP,CAA0B77B,QAA1B;AAEA;AAED,GA7a8E;AA+a/E8mB,EAAAA,YAAY,EAAE,YAAY;AAEzB,SAAK9D,MAAL,CAAY1a,OAAZ,CAAqB,KAAK7T,QAA1B,EAAoC,KAAKw3B,UAAzC,EAAqD,KAAK7H,KAA1D;AAEA,SAAK6U,sBAAL,GAA8B,IAA9B;AAEA,GArb8E;AAub/EqC,EAAAA,iBAAiB,EAAE,UAAWQ,KAAX,EAAmB;AAErC,QAAK,KAAKzV,gBAAV,EAA6B,KAAKS,YAAL;;AAE7B,QAAK,KAAKmS,sBAAL,IAA+B6C,KAApC,EAA4C;AAE3C,UAAK,KAAKp5B,MAAL,KAAgB,IAArB,EAA4B;AAE3B,aAAKotB,WAAL,CAAiBzS,IAAjB,CAAuB,KAAK2F,MAA5B;AAEA,OAJD,MAIO;AAEN,aAAK8M,WAAL,CAAiBvO,gBAAjB,CAAmC,KAAK7e,MAAL,CAAYotB,WAA/C,EAA4D,KAAK9M,MAAjE;AAEA;;AAED,WAAKiW,sBAAL,GAA8B,KAA9B;AAEA6C,MAAAA,KAAK,GAAG,IAAR;AAEA,KApBoC,CAsBrC;;;AAEA,UAAMtD,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDuqC,MAAAA,QAAQ,CAAEvqC,CAAF,CAAR,CAAcqtC,iBAAd,CAAiCQ,KAAjC;AAEA;AAED,GAvd8E;AAyd/ElB,EAAAA,iBAAiB,EAAE,UAAWmB,aAAX,EAA0BC,cAA1B,EAA2C;AAE7D,UAAMt5B,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKq5B,aAAa,KAAK,IAAlB,IAA0Br5B,MAAM,KAAK,IAA1C,EAAiD;AAEhDA,MAAAA,MAAM,CAACk4B,iBAAP,CAA0B,IAA1B,EAAgC,KAAhC;AAEA;;AAED,QAAK,KAAKvU,gBAAV,EAA6B,KAAKS,YAAL;;AAE7B,QAAK,KAAKpkB,MAAL,KAAgB,IAArB,EAA4B;AAE3B,WAAKotB,WAAL,CAAiBzS,IAAjB,CAAuB,KAAK2F,MAA5B;AAEA,KAJD,MAIO;AAEN,WAAK8M,WAAL,CAAiBvO,gBAAjB,CAAmC,KAAK7e,MAAL,CAAYotB,WAA/C,EAA4D,KAAK9M,MAAjE;AAEA,KApB4D,CAsB7D;;;AAEA,QAAKgZ,cAAc,KAAK,IAAxB,EAA+B;AAE9B,YAAMxD,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,WAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDuqC,QAAAA,QAAQ,CAAEvqC,CAAF,CAAR,CAAc2sC,iBAAd,CAAiC,KAAjC,EAAwC,IAAxC;AAEA;AAED;AAED,GA7f8E;AA+f/E7T,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB;AACA,UAAMC,YAAY,GAAKD,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAA7D;AAEA,UAAMhb,MAAM,GAAG,EAAf,CALyB,CAOzB;AACA;AACA;;AACA,QAAKib,YAAL,EAAoB;AAEnB;AACAD,MAAAA,IAAI,GAAG;AACNiV,QAAAA,UAAU,EAAE,EADN;AAENC,QAAAA,SAAS,EAAE,EAFL;AAGNhV,QAAAA,QAAQ,EAAE,EAHJ;AAINI,QAAAA,MAAM,EAAE,EAJF;AAKN6U,QAAAA,MAAM,EAAE;AALF,OAAP;AAQAnwB,MAAAA,MAAM,CAACmb,QAAP,GAAkB;AACjBT,QAAAA,OAAO,EAAE,GADQ;AAEjBtuB,QAAAA,IAAI,EAAE,QAFW;AAGjBgvB,QAAAA,SAAS,EAAE;AAHM,OAAlB;AAMA,KA3BwB,CA6BzB;;;AAEA,UAAM10B,MAAM,GAAG,EAAf;AAEAA,IAAAA,MAAM,CAACsnB,IAAP,GAAc,KAAKA,IAAnB;AACAtnB,IAAAA,MAAM,CAAC0F,IAAP,GAAc,KAAKA,IAAnB;AAEA,QAAK,KAAKmL,IAAL,KAAc,EAAnB,EAAwB7Q,MAAM,CAAC6Q,IAAP,GAAc,KAAKA,IAAnB;AACxB,QAAK,KAAK41B,UAAL,KAAoB,IAAzB,EAAgCzmC,MAAM,CAACymC,UAAP,GAAoB,IAApB;AAChC,QAAK,KAAKC,aAAL,KAAuB,IAA5B,EAAmC1mC,MAAM,CAAC0mC,aAAP,GAAuB,IAAvB;AACnC,QAAK,KAAKF,OAAL,KAAiB,KAAtB,EAA8BxmC,MAAM,CAACwmC,OAAP,GAAiB,KAAjB;AAC9B,QAAK,KAAKG,aAAL,KAAuB,KAA5B,EAAoC3mC,MAAM,CAAC2mC,aAAP,GAAuB,KAAvB;AACpC,QAAK,KAAKC,WAAL,KAAqB,CAA1B,EAA8B5mC,MAAM,CAAC4mC,WAAP,GAAqB,KAAKA,WAA1B;AAC9B,QAAKr1B,IAAI,CAACe,SAAL,CAAgB,KAAKu0B,QAArB,MAAoC,IAAzC,EAAgD7mC,MAAM,CAAC6mC,QAAP,GAAkB,KAAKA,QAAvB;AAEhD7mC,IAAAA,MAAM,CAAC+kC,MAAP,GAAgB,KAAKA,MAAL,CAAYP,IAA5B;AACAxkC,IAAAA,MAAM,CAACswB,MAAP,GAAgB,KAAKA,MAAL,CAAYj0B,OAAZ,EAAhB;AAEA,QAAK,KAAKs3B,gBAAL,KAA0B,KAA/B,EAAuC3zB,MAAM,CAAC2zB,gBAAP,GAA0B,KAA1B,CA/Cd,CAiDzB;;AAEA,QAAK,KAAK+V,eAAV,EAA4B;AAE3B1pC,MAAAA,MAAM,CAAC0F,IAAP,GAAc,eAAd;AACA1F,MAAAA,MAAM,CAAC2pC,KAAP,GAAe,KAAKA,KAApB;AACA3pC,MAAAA,MAAM,CAAC4pC,cAAP,GAAwB,KAAKA,cAAL,CAAoBvV,MAApB,EAAxB;AAEA,KAzDwB,CA2DzB;;;AAEA,aAASwV,SAAT,CAAoBC,OAApB,EAA6BpjC,OAA7B,EAAuC;AAEtC,UAAKojC,OAAO,CAAEpjC,OAAO,CAAC4gB,IAAV,CAAP,KAA4BhrB,SAAjC,EAA6C;AAE5CwtC,QAAAA,OAAO,CAAEpjC,OAAO,CAAC4gB,IAAV,CAAP,GAA0B5gB,OAAO,CAAC2tB,MAAR,CAAgBC,IAAhB,CAA1B;AAEA;;AAED,aAAO5tB,OAAO,CAAC4gB,IAAf;AAEA;;AAED,QAAK,KAAKyiB,MAAL,IAAe,KAAKC,MAApB,IAA8B,KAAKC,QAAxC,EAAmD;AAElDjqC,MAAAA,MAAM,CAACkqC,QAAP,GAAkBL,SAAS,CAAEvV,IAAI,CAACiV,UAAP,EAAmB,KAAKW,QAAxB,CAA3B;AAEA,YAAMC,UAAU,GAAG,KAAKD,QAAL,CAAcC,UAAjC;;AAEA,UAAKA,UAAU,KAAK7tC,SAAf,IAA4B6tC,UAAU,CAACV,MAAX,KAAsBntC,SAAvD,EAAmE;AAElE,cAAMmtC,MAAM,GAAGU,UAAU,CAACV,MAA1B;;AAEA,YAAKrvC,KAAK,CAACoC,OAAN,CAAeitC,MAAf,CAAL,EAA+B;AAE9B,eAAM,IAAIluC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8tC,MAAM,CAACvvC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,kBAAM6uC,KAAK,GAAGX,MAAM,CAAEluC,CAAF,CAApB;AAEAsuC,YAAAA,SAAS,CAAEvV,IAAI,CAACmV,MAAP,EAAeW,KAAf,CAAT;AAEA;AAED,SAVD,MAUO;AAENP,UAAAA,SAAS,CAAEvV,IAAI,CAACmV,MAAP,EAAeA,MAAf,CAAT;AAEA;AAED;AAED;;AAED,QAAK,KAAKY,QAAL,KAAkB/tC,SAAvB,EAAmC;AAElC,UAAKlC,KAAK,CAACoC,OAAN,CAAe,KAAK6tC,QAApB,CAAL,EAAsC;AAErC,cAAMC,KAAK,GAAG,EAAd;;AAEA,aAAM,IAAI/uC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAK0uC,QAAL,CAAcnwC,MAAnC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD+uC,UAAAA,KAAK,CAAC5lC,IAAN,CAAYmlC,SAAS,CAAEvV,IAAI,CAACkV,SAAP,EAAkB,KAAKa,QAAL,CAAe9uC,CAAf,CAAlB,CAArB;AAEA;;AAEDyE,QAAAA,MAAM,CAACqqC,QAAP,GAAkBC,KAAlB;AAEA,OAZD,MAYO;AAENtqC,QAAAA,MAAM,CAACqqC,QAAP,GAAkBR,SAAS,CAAEvV,IAAI,CAACkV,SAAP,EAAkB,KAAKa,QAAvB,CAA3B;AAEA;AAED,KA3HwB,CA6HzB;;;AAEA,QAAK,KAAKvE,QAAL,CAAc5rC,MAAd,GAAuB,CAA5B,EAAgC;AAE/B8F,MAAAA,MAAM,CAAC8lC,QAAP,GAAkB,EAAlB;;AAEA,WAAM,IAAIvqC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKuqC,QAAL,CAAc5rC,MAAnC,EAA2CqB,CAAC,EAA5C,EAAkD;AAEjDyE,QAAAA,MAAM,CAAC8lC,QAAP,CAAgBphC,IAAhB,CAAsB,KAAKohC,QAAL,CAAevqC,CAAf,EAAmB84B,MAAnB,CAA2BC,IAA3B,EAAkCt0B,MAAxD;AAEA;AAED;;AAED,QAAKu0B,YAAL,EAAoB;AAEnB,YAAMgV,UAAU,GAAGgB,gBAAgB,CAAEjW,IAAI,CAACiV,UAAP,CAAnC;AACA,YAAMC,SAAS,GAAGe,gBAAgB,CAAEjW,IAAI,CAACkV,SAAP,CAAlC;AACA,YAAMhV,QAAQ,GAAG+V,gBAAgB,CAAEjW,IAAI,CAACE,QAAP,CAAjC;AACA,YAAMI,MAAM,GAAG2V,gBAAgB,CAAEjW,IAAI,CAACM,MAAP,CAA/B;AACA,YAAM6U,MAAM,GAAGc,gBAAgB,CAAEjW,IAAI,CAACmV,MAAP,CAA/B;AAEA,UAAKF,UAAU,CAACrvC,MAAX,GAAoB,CAAzB,EAA6Bof,MAAM,CAACiwB,UAAP,GAAoBA,UAApB;AAC7B,UAAKC,SAAS,CAACtvC,MAAV,GAAmB,CAAxB,EAA4Bof,MAAM,CAACkwB,SAAP,GAAmBA,SAAnB;AAC5B,UAAKhV,QAAQ,CAACt6B,MAAT,GAAkB,CAAvB,EAA2Bof,MAAM,CAACkb,QAAP,GAAkBA,QAAlB;AAC3B,UAAKI,MAAM,CAAC16B,MAAP,GAAgB,CAArB,EAAyBof,MAAM,CAACsb,MAAP,GAAgBA,MAAhB;AACzB,UAAK6U,MAAM,CAACvvC,MAAP,GAAgB,CAArB,EAAyBof,MAAM,CAACmwB,MAAP,GAAgBA,MAAhB;AAEzB;;AAEDnwB,IAAAA,MAAM,CAACtZ,MAAP,GAAgBA,MAAhB;AAEA,WAAOsZ,MAAP,CA7JyB,CA+JzB;AACA;AACA;;AACA,aAASixB,gBAAT,CAA2BC,KAA3B,EAAmC;AAElC,YAAMC,MAAM,GAAG,EAAf;;AACA,WAAM,MAAMvvC,GAAZ,IAAmBsvC,KAAnB,EAA2B;AAE1B,cAAME,IAAI,GAAGF,KAAK,CAAEtvC,GAAF,CAAlB;AACA,eAAOwvC,IAAI,CAACjW,QAAZ;AACAgW,QAAAA,MAAM,CAAC/lC,IAAP,CAAagmC,IAAb;AAEA;;AAED,aAAOD,MAAP;AAEA;AAED,GAhrB8E;AAkrB/E/f,EAAAA,KAAK,EAAE,UAAWigB,SAAX,EAAuB;AAE7B,WAAO,IAAI,KAAKluC,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,EAAmCggB,SAAnC,CAAP;AAEA,GAtrB8E;AAwrB/EhgB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAmBoxB,SAAnB,EAA+B;AAEpC,QAAKA,SAAS,KAAKruC,SAAnB,EAA+BquC,SAAS,GAAG,IAAZ;AAE/B,SAAK95B,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB;AAEA,SAAKmwB,EAAL,CAAQrW,IAAR,CAAcpR,MAAM,CAACynB,EAArB;AAEA,SAAKj/B,QAAL,CAAc4oB,IAAd,CAAoBpR,MAAM,CAACxX,QAA3B;AACA,SAAKw3B,UAAL,CAAgB5O,IAAhB,CAAsBpR,MAAM,CAACggB,UAA7B;AACA,SAAK7H,KAAL,CAAW/G,IAAX,CAAiBpR,MAAM,CAACmY,KAAxB;AAEA,SAAKpB,MAAL,CAAY3F,IAAZ,CAAkBpR,MAAM,CAAC+W,MAAzB;AACA,SAAK8M,WAAL,CAAiBzS,IAAjB,CAAuBpR,MAAM,CAAC6jB,WAA9B;AAEA,SAAKzJ,gBAAL,GAAwBpa,MAAM,CAACoa,gBAA/B;AACA,SAAK4S,sBAAL,GAA8BhtB,MAAM,CAACgtB,sBAArC;AAEA,SAAKxB,MAAL,CAAYP,IAAZ,GAAmBjrB,MAAM,CAACwrB,MAAP,CAAcP,IAAjC;AACA,SAAKgC,OAAL,GAAejtB,MAAM,CAACitB,OAAtB;AAEA,SAAKC,UAAL,GAAkBltB,MAAM,CAACktB,UAAzB;AACA,SAAKC,aAAL,GAAqBntB,MAAM,CAACmtB,aAA5B;AAEA,SAAKC,aAAL,GAAqBptB,MAAM,CAACotB,aAA5B;AACA,SAAKC,WAAL,GAAmBrtB,MAAM,CAACqtB,WAA1B;AAEA,SAAKC,QAAL,GAAgBt1B,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgBiH,MAAM,CAACstB,QAAvB,CAAZ,CAAhB;;AAEA,QAAK8D,SAAS,KAAK,IAAnB,EAA0B;AAEzB,WAAM,IAAIpvC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGge,MAAM,CAACusB,QAAP,CAAgB5rC,MAArC,EAA6CqB,CAAC,EAA9C,EAAoD;AAEnD,cAAMmtC,KAAK,GAAGnvB,MAAM,CAACusB,QAAP,CAAiBvqC,CAAjB,CAAd;AACA,aAAK2X,GAAL,CAAUw1B,KAAK,CAAChe,KAAN,EAAV;AAEA;AAED;;AAED,WAAO,IAAP;AAEA;AAluB8E,CAA3D,CAArB;AAsuBA;;;;AAIA,SAASkgB,KAAT,GAAiB;AAEhB/E,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,OAAZ;AAEA,OAAKyG,UAAL,GAAkB,IAAlB;AACA,OAAK0+B,WAAL,GAAmB,IAAnB;AACA,OAAKC,GAAL,GAAW,IAAX;AAEA,OAAKC,gBAAL,GAAwB,IAAxB;AAEA,OAAKC,UAAL,GAAkB,IAAlB,CAZgB,CAYQ;;AAExB,MAAK,OAAOC,kBAAP,KAA8B,WAAnC,EAAiD;AAEhDA,IAAAA,kBAAkB,CAAClnC,aAAnB,CAAkC,IAAImnC,WAAJ,CAAiB,SAAjB,EAA4B;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAA5B,CAAlC,EAFgD,CAEoC;;AAEpF;AAED;;AAEDP,KAAK,CAACvwC,SAAN,GAAkBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAErEoC,EAAAA,WAAW,EAAEmuC,KAFwD;AAIrEQ,EAAAA,OAAO,EAAE,IAJ4D;AAMrEzgB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAmBoxB,SAAnB,EAA+B;AAEpC9E,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC,EAA4CoxB,SAA5C;AAEA,QAAKpxB,MAAM,CAACpN,UAAP,KAAsB,IAA3B,EAAkC,KAAKA,UAAL,GAAkBoN,MAAM,CAACpN,UAAP,CAAkBue,KAAlB,EAAlB;AAClC,QAAKnR,MAAM,CAACsxB,WAAP,KAAuB,IAA5B,EAAmC,KAAKA,WAAL,GAAmBtxB,MAAM,CAACsxB,WAAP,CAAmBngB,KAAnB,EAAnB;AACnC,QAAKnR,MAAM,CAACuxB,GAAP,KAAe,IAApB,EAA2B,KAAKA,GAAL,GAAWvxB,MAAM,CAACuxB,GAAP,CAAWpgB,KAAX,EAAX;AAE3B,QAAKnR,MAAM,CAACwxB,gBAAP,KAA4B,IAAjC,EAAwC,KAAKA,gBAAL,GAAwBxxB,MAAM,CAACwxB,gBAAP,CAAwBrgB,KAAxB,EAAxB;AAExC,SAAKsgB,UAAL,GAAkBzxB,MAAM,CAACyxB,UAAzB;AACA,SAAKrX,gBAAL,GAAwBpa,MAAM,CAACoa,gBAA/B;AAEA,WAAO,IAAP;AAEA,GArBoE;AAuBrEU,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAG7E,QAAQ,CAACxrC,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,EAAsC05B,IAAtC,CAAb;AAEA,QAAK,KAAKnoB,UAAL,KAAoB,IAAzB,EAAgCu+B,IAAI,CAAC1qC,MAAL,CAAYmM,UAAZ,GAAyB,KAAKA,UAAL,CAAgBkoB,MAAhB,CAAwBC,IAAxB,CAAzB;AAChC,QAAK,KAAKuW,WAAL,KAAqB,IAA1B,EAAiCH,IAAI,CAAC1qC,MAAL,CAAY6qC,WAAZ,GAA0B,KAAKA,WAAL,CAAiBxW,MAAjB,CAAyBC,IAAzB,CAA1B;AACjC,QAAK,KAAKwW,GAAL,KAAa,IAAlB,EAAyBJ,IAAI,CAAC1qC,MAAL,CAAY8qC,GAAZ,GAAkB,KAAKA,GAAL,CAASzW,MAAT,EAAlB;AAEzB,WAAOqW,IAAP;AAEA,GAjCoE;AAmCrE7V,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAK9wB,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAApB;AAEA;AAvCoE,CAApD,CAAlB;AA2CA,MAAM2lC,OAAO,GAAG,CACf,IAAIvP,OAAJ,EADe,EAEf,IAAIA,OAAJ,EAFe,EAGf,IAAIA,OAAJ,EAHe,EAIf,IAAIA,OAAJ,EAJe,EAKf,IAAIA,OAAJ,EALe,EAMf,IAAIA,OAAJ,EANe,EAOf,IAAIA,OAAJ,EAPe,EAQf,IAAIA,OAAJ,EARe,CAAhB;;AAWA,MAAMwP,SAAS,GAAG,IAAIxP,OAAJ,EAAlB;;AAEA,MAAMyP,IAAI,GAAG,IAAIC,IAAJ,EAAb,EAEA;;;AAEA,MAAMC,GAAG,GAAG,IAAI3P,OAAJ,EAAZ;;AACA,MAAM4P,KAAK,GAAG,IAAI5P,OAAJ,EAAd;;AACA,MAAM6P,GAAG,GAAG,IAAI7P,OAAJ,EAAZ,EAEA;;;AAEA,MAAM8P,GAAG,GAAG,IAAI9P,OAAJ,EAAZ;;AACA,MAAM+P,GAAG,GAAG,IAAI/P,OAAJ,EAAZ;;AACA,MAAMgQ,GAAG,GAAG,IAAIhQ,OAAJ,EAAZ;;AAEA,MAAMiQ,OAAO,GAAG,IAAIjQ,OAAJ,EAAhB;;AACA,MAAMkQ,QAAQ,GAAG,IAAIlQ,OAAJ,EAAjB;;AACA,MAAMmQ,eAAe,GAAG,IAAInQ,OAAJ,EAAxB;;AACA,MAAMoQ,SAAS,GAAG,IAAIpQ,OAAJ,EAAlB;AAEA;;;;;;AAKA,SAAS0P,IAAT,CAAentC,GAAf,EAAoBC,GAApB,EAA0B;AAEzB,OAAKD,GAAL,GAAaA,GAAG,KAAK/B,SAAV,GAAwB+B,GAAxB,GAA8B,IAAIy9B,OAAJ,CAAa,CAAEqQ,QAAf,EAAyB,CAAEA,QAA3B,EAAqC,CAAEA,QAAvC,CAAzC;AACA,OAAK7tC,GAAL,GAAaA,GAAG,KAAKhC,SAAV,GAAwBgC,GAAxB,GAA8B,IAAIw9B,OAAJ,CAAa,CAAEqQ,QAAf,EAAyB,CAAEA,QAA3B,EAAqC,CAAEA,QAAvC,CAAzC;AAEA;;AAGDlxC,MAAM,CAACme,MAAP,CAAeoyB,IAAI,CAACnxC,SAApB,EAA+B;AAE9B+xC,EAAAA,MAAM,EAAE,IAFsB;AAI9BriB,EAAAA,GAAG,EAAE,UAAW1rB,GAAX,EAAgBC,GAAhB,EAAsB;AAE1B,SAAKD,GAAL,CAASssB,IAAT,CAAetsB,GAAf;AACA,SAAKC,GAAL,CAASqsB,IAAT,CAAersB,GAAf;AAEA,WAAO,IAAP;AAEA,GAX6B;AAa9B+tC,EAAAA,YAAY,EAAE,UAAW3lB,KAAX,EAAmB;AAEhC,QAAI4lB,IAAI,GAAG,CAAEH,QAAb;AACA,QAAII,IAAI,GAAG,CAAEJ,QAAb;AACA,QAAIK,IAAI,GAAG,CAAEL,QAAb;AAEA,QAAIM,IAAI,GAAG,CAAEN,QAAb;AACA,QAAIO,IAAI,GAAG,CAAEP,QAAb;AACA,QAAIQ,IAAI,GAAG,CAAER,QAAb;;AAEA,SAAM,IAAI5wC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+qB,KAAK,CAACxsB,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,IAAI,CAA/C,EAAmD;AAElD,YAAMqH,CAAC,GAAG8jB,KAAK,CAAEnrB,CAAF,CAAf;AACA,YAAMuH,CAAC,GAAG4jB,KAAK,CAAEnrB,CAAC,GAAG,CAAN,CAAf;AACA,YAAM05B,CAAC,GAAGvO,KAAK,CAAEnrB,CAAC,GAAG,CAAN,CAAf;AAEA,UAAKqH,CAAC,GAAG0pC,IAAT,EAAgBA,IAAI,GAAG1pC,CAAP;AAChB,UAAKE,CAAC,GAAGypC,IAAT,EAAgBA,IAAI,GAAGzpC,CAAP;AAChB,UAAKmyB,CAAC,GAAGuX,IAAT,EAAgBA,IAAI,GAAGvX,CAAP;AAEhB,UAAKryB,CAAC,GAAG6pC,IAAT,EAAgBA,IAAI,GAAG7pC,CAAP;AAChB,UAAKE,CAAC,GAAG4pC,IAAT,EAAgBA,IAAI,GAAG5pC,CAAP;AAChB,UAAKmyB,CAAC,GAAG0X,IAAT,EAAgBA,IAAI,GAAG1X,CAAP;AAEhB;;AAED,SAAK52B,GAAL,CAAS0rB,GAAT,CAAcuiB,IAAd,EAAoBC,IAApB,EAA0BC,IAA1B;AACA,SAAKluC,GAAL,CAASyrB,GAAT,CAAc0iB,IAAd,EAAoBC,IAApB,EAA0BC,IAA1B;AAEA,WAAO,IAAP;AAEA,GA5C6B;AA8C9BC,EAAAA,sBAAsB,EAAE,UAAWzf,SAAX,EAAuB;AAE9C,QAAImf,IAAI,GAAG,CAAEH,QAAb;AACA,QAAII,IAAI,GAAG,CAAEJ,QAAb;AACA,QAAIK,IAAI,GAAG,CAAEL,QAAb;AAEA,QAAIM,IAAI,GAAG,CAAEN,QAAb;AACA,QAAIO,IAAI,GAAG,CAAEP,QAAb;AACA,QAAIQ,IAAI,GAAG,CAAER,QAAb;;AAEA,SAAM,IAAI5wC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGwxB,SAAS,CAACwc,KAA/B,EAAsCpuC,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnD,YAAMqH,CAAC,GAAGuqB,SAAS,CAACC,IAAV,CAAgB7xB,CAAhB,CAAV;AACA,YAAMuH,CAAC,GAAGqqB,SAAS,CAACE,IAAV,CAAgB9xB,CAAhB,CAAV;AACA,YAAM05B,CAAC,GAAG9H,SAAS,CAACuJ,IAAV,CAAgBn7B,CAAhB,CAAV;AAEA,UAAKqH,CAAC,GAAG0pC,IAAT,EAAgBA,IAAI,GAAG1pC,CAAP;AAChB,UAAKE,CAAC,GAAGypC,IAAT,EAAgBA,IAAI,GAAGzpC,CAAP;AAChB,UAAKmyB,CAAC,GAAGuX,IAAT,EAAgBA,IAAI,GAAGvX,CAAP;AAEhB,UAAKryB,CAAC,GAAG6pC,IAAT,EAAgBA,IAAI,GAAG7pC,CAAP;AAChB,UAAKE,CAAC,GAAG4pC,IAAT,EAAgBA,IAAI,GAAG5pC,CAAP;AAChB,UAAKmyB,CAAC,GAAG0X,IAAT,EAAgBA,IAAI,GAAG1X,CAAP;AAEhB;;AAED,SAAK52B,GAAL,CAAS0rB,GAAT,CAAcuiB,IAAd,EAAoBC,IAApB,EAA0BC,IAA1B;AACA,SAAKluC,GAAL,CAASyrB,GAAT,CAAc0iB,IAAd,EAAoBC,IAApB,EAA0BC,IAA1B;AAEA,WAAO,IAAP;AAEA,GA7E6B;AA+E9BE,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAoB;AAElC,SAAKC,SAAL;;AAEA,SAAM,IAAIxxC,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGF,MAAM,CAAC5yC,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,WAAK0xC,aAAL,CAAoBH,MAAM,CAAEvxC,CAAF,CAA1B;AAEA;;AAED,WAAO,IAAP;AAEA,GA3F6B;AA6F9B2xC,EAAAA,oBAAoB,EAAE,UAAW3f,MAAX,EAAmB4f,IAAnB,EAA0B;AAE/C,UAAMC,QAAQ,GAAG9B,SAAS,CAAC3gB,IAAV,CAAgBwiB,IAAhB,EAAuBhiB,cAAvB,CAAuC,GAAvC,CAAjB;;AAEA,SAAK9sB,GAAL,CAASssB,IAAT,CAAe4C,MAAf,EAAwBxC,GAAxB,CAA6BqiB,QAA7B;AACA,SAAK9uC,GAAL,CAASqsB,IAAT,CAAe4C,MAAf,EAAwBra,GAAxB,CAA6Bk6B,QAA7B;AAEA,WAAO,IAAP;AAEA,GAtG6B;AAwG9BC,EAAAA,aAAa,EAAE,UAAWrtC,MAAX,EAAoB;AAElC,SAAK+sC,SAAL;AAEA,WAAO,KAAKO,cAAL,CAAqBttC,MAArB,CAAP;AAEA,GA9G6B;AAgH9B0qB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GApH6B;AAsH9BA,EAAAA,IAAI,EAAE,UAAWvV,GAAX,EAAiB;AAEtB,SAAK/W,GAAL,CAASssB,IAAT,CAAevV,GAAG,CAAC/W,GAAnB;AACA,SAAKC,GAAL,CAASqsB,IAAT,CAAevV,GAAG,CAAC9W,GAAnB;AAEA,WAAO,IAAP;AAEA,GA7H6B;AA+H9ByuC,EAAAA,SAAS,EAAE,YAAY;AAEtB,SAAK1uC,GAAL,CAASuE,CAAT,GAAa,KAAKvE,GAAL,CAASyE,CAAT,GAAa,KAAKzE,GAAL,CAAS42B,CAAT,GAAa,CAAEkX,QAAzC;AACA,SAAK7tC,GAAL,CAASsE,CAAT,GAAa,KAAKtE,GAAL,CAASwE,CAAT,GAAa,KAAKxE,GAAL,CAAS22B,CAAT,GAAa,CAAEkX,QAAzC;AAEA,WAAO,IAAP;AAEA,GAtI6B;AAwI9BoB,EAAAA,OAAO,EAAE,YAAY;AAEpB;AAEA,WAAS,KAAKjvC,GAAL,CAASsE,CAAT,GAAa,KAAKvE,GAAL,CAASuE,CAAxB,IAAiC,KAAKtE,GAAL,CAASwE,CAAT,GAAa,KAAKzE,GAAL,CAASyE,CAAvD,IAAgE,KAAKxE,GAAL,CAAS22B,CAAT,GAAa,KAAK52B,GAAL,CAAS42B,CAA7F;AAEA,GA9I6B;AAgJ9BuY,EAAAA,SAAS,EAAE,UAAW9yC,MAAX,EAAoB;AAE9B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,iDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAO,KAAKyR,OAAL,KAAiB7yC,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB,GAAyCrvB,MAAM,CAACkwB,UAAP,CAAmB,KAAKvsB,GAAxB,EAA6B,KAAKC,GAAlC,EAAwC6sB,cAAxC,CAAwD,GAAxD,CAAhD;AAEA,GA3J6B;AA6J9BsiB,EAAAA,OAAO,EAAE,UAAW/yC,MAAX,EAAoB;AAE5B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAO,KAAKyR,OAAL,KAAiB7yC,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAjB,GAAyCrvB,MAAM,CAACswB,UAAP,CAAmB,KAAK1sB,GAAxB,EAA6B,KAAKD,GAAlC,CAAhD;AAEA,GAxK6B;AA0K9B4uC,EAAAA,aAAa,EAAE,UAAWS,KAAX,EAAmB;AAEjC,SAAKrvC,GAAL,CAASA,GAAT,CAAcqvC,KAAd;AACA,SAAKpvC,GAAL,CAASA,GAAT,CAAcovC,KAAd;AAEA,WAAO,IAAP;AAEA,GAjL6B;AAmL9BC,EAAAA,cAAc,EAAE,UAAW3F,MAAX,EAAoB;AAEnC,SAAK3pC,GAAL,CAAS0sB,GAAT,CAAcid,MAAd;AACA,SAAK1pC,GAAL,CAAS4U,GAAT,CAAc80B,MAAd;AAEA,WAAO,IAAP;AAEA,GA1L6B;AA4L9B4F,EAAAA,cAAc,EAAE,UAAWvjB,MAAX,EAAoB;AAEnC,SAAKhsB,GAAL,CAASwsB,SAAT,CAAoB,CAAER,MAAtB;AACA,SAAK/rB,GAAL,CAASusB,SAAT,CAAoBR,MAApB;AAEA,WAAO,IAAP;AAEA,GAnM6B;AAqM9BijB,EAAAA,cAAc,EAAE,UAAWttC,MAAX,EAAoB;AAEnC;AACA;AAEAA,IAAAA,MAAM,CAACkoC,iBAAP,CAA0B,KAA1B,EAAiC,KAAjC;AAEA,UAAMgC,QAAQ,GAAGlqC,MAAM,CAACkqC,QAAxB;;AAEA,QAAKA,QAAQ,KAAK5tC,SAAlB,EAA8B;AAE7B,UAAK4tC,QAAQ,CAAC2D,WAAT,KAAyB,IAA9B,EAAqC;AAEpC3D,QAAAA,QAAQ,CAAC4D,kBAAT;AAEA;;AAEDvC,MAAAA,IAAI,CAAC5gB,IAAL,CAAWuf,QAAQ,CAAC2D,WAApB;;AACAtC,MAAAA,IAAI,CAAClW,YAAL,CAAmBr1B,MAAM,CAACo9B,WAA1B;;AAEA,WAAK2Q,KAAL,CAAYxC,IAAZ;AAEA;;AAED,UAAMzF,QAAQ,GAAG9lC,MAAM,CAAC8lC,QAAxB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnD,WAAK+xC,cAAL,CAAqBxH,QAAQ,CAAEvqC,CAAF,CAA7B;AAEA;;AAED,WAAO,IAAP;AAEA,GAvO6B;AAyO9ByyC,EAAAA,aAAa,EAAE,UAAWN,KAAX,EAAmB;AAEjC,WAAOA,KAAK,CAAC9qC,CAAN,GAAU,KAAKvE,GAAL,CAASuE,CAAnB,IAAwB8qC,KAAK,CAAC9qC,CAAN,GAAU,KAAKtE,GAAL,CAASsE,CAA3C,IACN8qC,KAAK,CAAC5qC,CAAN,GAAU,KAAKzE,GAAL,CAASyE,CADb,IACkB4qC,KAAK,CAAC5qC,CAAN,GAAU,KAAKxE,GAAL,CAASwE,CADrC,IAEN4qC,KAAK,CAACzY,CAAN,GAAU,KAAK52B,GAAL,CAAS42B,CAFb,IAEkByY,KAAK,CAACzY,CAAN,GAAU,KAAK32B,GAAL,CAAS22B,CAFrC,GAEyC,KAFzC,GAEiD,IAFxD;AAIA,GA/O6B;AAiP9BgZ,EAAAA,WAAW,EAAE,UAAW74B,GAAX,EAAiB;AAE7B,WAAO,KAAK/W,GAAL,CAASuE,CAAT,IAAcwS,GAAG,CAAC/W,GAAJ,CAAQuE,CAAtB,IAA2BwS,GAAG,CAAC9W,GAAJ,CAAQsE,CAAR,IAAa,KAAKtE,GAAL,CAASsE,CAAjD,IACN,KAAKvE,GAAL,CAASyE,CAAT,IAAcsS,GAAG,CAAC/W,GAAJ,CAAQyE,CADhB,IACqBsS,GAAG,CAAC9W,GAAJ,CAAQwE,CAAR,IAAa,KAAKxE,GAAL,CAASwE,CAD3C,IAEN,KAAKzE,GAAL,CAAS42B,CAAT,IAAc7f,GAAG,CAAC/W,GAAJ,CAAQ42B,CAFhB,IAEqB7f,GAAG,CAAC9W,GAAJ,CAAQ22B,CAAR,IAAa,KAAK32B,GAAL,CAAS22B,CAFlD;AAIA,GAvP6B;AAyP9BiZ,EAAAA,YAAY,EAAE,UAAWR,KAAX,EAAkBhzC,MAAlB,EAA2B;AAExC;AACA;AAEA,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACqvB,GAAP,CACN,CAAE2jB,KAAK,CAAC9qC,CAAN,GAAU,KAAKvE,GAAL,CAASuE,CAArB,KAA6B,KAAKtE,GAAL,CAASsE,CAAT,GAAa,KAAKvE,GAAL,CAASuE,CAAnD,CADM,EAEN,CAAE8qC,KAAK,CAAC5qC,CAAN,GAAU,KAAKzE,GAAL,CAASyE,CAArB,KAA6B,KAAKxE,GAAL,CAASwE,CAAT,GAAa,KAAKzE,GAAL,CAASyE,CAAnD,CAFM,EAGN,CAAE4qC,KAAK,CAACzY,CAAN,GAAU,KAAK52B,GAAL,CAAS42B,CAArB,KAA6B,KAAK32B,GAAL,CAAS22B,CAAT,GAAa,KAAK52B,GAAL,CAAS42B,CAAnD,CAHM,CAAP;AAMA,GA3Q6B;AA6Q9BkZ,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B;AACA,WAAOA,GAAG,CAAC9W,GAAJ,CAAQsE,CAAR,GAAY,KAAKvE,GAAL,CAASuE,CAArB,IAA0BwS,GAAG,CAAC/W,GAAJ,CAAQuE,CAAR,GAAY,KAAKtE,GAAL,CAASsE,CAA/C,IACNwS,GAAG,CAAC9W,GAAJ,CAAQwE,CAAR,GAAY,KAAKzE,GAAL,CAASyE,CADf,IACoBsS,GAAG,CAAC/W,GAAJ,CAAQyE,CAAR,GAAY,KAAKxE,GAAL,CAASwE,CADzC,IAENsS,GAAG,CAAC9W,GAAJ,CAAQ22B,CAAR,GAAY,KAAK52B,GAAL,CAAS42B,CAFf,IAEoB7f,GAAG,CAAC/W,GAAJ,CAAQ42B,CAAR,GAAY,KAAK32B,GAAL,CAAS22B,CAFzC,GAE6C,KAF7C,GAEqD,IAF5D;AAIA,GApR6B;AAsR9BmZ,EAAAA,gBAAgB,EAAE,UAAWC,MAAX,EAAoB;AAErC;AACA,SAAKC,UAAL,CAAiBD,MAAM,CAAC9gB,MAAxB,EAAgC+d,SAAhC,EAHqC,CAKrC;;AACA,WAAOA,SAAS,CAAC/e,iBAAV,CAA6B8hB,MAAM,CAAC9gB,MAApC,KAAkD8gB,MAAM,CAAC/P,MAAP,GAAgB+P,MAAM,CAAC/P,MAAhF;AAEA,GA9R6B;AAgS9BiQ,EAAAA,eAAe,EAAE,UAAWC,KAAX,EAAmB;AAEnC;AACA;AAEA,QAAInwC,GAAJ,EAASC,GAAT;;AAEA,QAAKkwC,KAAK,CAACtQ,MAAN,CAAat7B,CAAb,GAAiB,CAAtB,EAA0B;AAEzBvE,MAAAA,GAAG,GAAGmwC,KAAK,CAACtQ,MAAN,CAAat7B,CAAb,GAAiB,KAAKvE,GAAL,CAASuE,CAAhC;AACAtE,MAAAA,GAAG,GAAGkwC,KAAK,CAACtQ,MAAN,CAAat7B,CAAb,GAAiB,KAAKtE,GAAL,CAASsE,CAAhC;AAEA,KALD,MAKO;AAENvE,MAAAA,GAAG,GAAGmwC,KAAK,CAACtQ,MAAN,CAAat7B,CAAb,GAAiB,KAAKtE,GAAL,CAASsE,CAAhC;AACAtE,MAAAA,GAAG,GAAGkwC,KAAK,CAACtQ,MAAN,CAAat7B,CAAb,GAAiB,KAAKvE,GAAL,CAASuE,CAAhC;AAEA;;AAED,QAAK4rC,KAAK,CAACtQ,MAAN,CAAap7B,CAAb,GAAiB,CAAtB,EAA0B;AAEzBzE,MAAAA,GAAG,IAAImwC,KAAK,CAACtQ,MAAN,CAAap7B,CAAb,GAAiB,KAAKzE,GAAL,CAASyE,CAAjC;AACAxE,MAAAA,GAAG,IAAIkwC,KAAK,CAACtQ,MAAN,CAAap7B,CAAb,GAAiB,KAAKxE,GAAL,CAASwE,CAAjC;AAEA,KALD,MAKO;AAENzE,MAAAA,GAAG,IAAImwC,KAAK,CAACtQ,MAAN,CAAap7B,CAAb,GAAiB,KAAKxE,GAAL,CAASwE,CAAjC;AACAxE,MAAAA,GAAG,IAAIkwC,KAAK,CAACtQ,MAAN,CAAap7B,CAAb,GAAiB,KAAKzE,GAAL,CAASyE,CAAjC;AAEA;;AAED,QAAK0rC,KAAK,CAACtQ,MAAN,CAAajJ,CAAb,GAAiB,CAAtB,EAA0B;AAEzB52B,MAAAA,GAAG,IAAImwC,KAAK,CAACtQ,MAAN,CAAajJ,CAAb,GAAiB,KAAK52B,GAAL,CAAS42B,CAAjC;AACA32B,MAAAA,GAAG,IAAIkwC,KAAK,CAACtQ,MAAN,CAAajJ,CAAb,GAAiB,KAAK32B,GAAL,CAAS22B,CAAjC;AAEA,KALD,MAKO;AAEN52B,MAAAA,GAAG,IAAImwC,KAAK,CAACtQ,MAAN,CAAajJ,CAAb,GAAiB,KAAK32B,GAAL,CAAS22B,CAAjC;AACA32B,MAAAA,GAAG,IAAIkwC,KAAK,CAACtQ,MAAN,CAAajJ,CAAb,GAAiB,KAAK52B,GAAL,CAAS42B,CAAjC;AAEA;;AAED,WAAS52B,GAAG,IAAI,CAAEmwC,KAAK,CAACC,QAAf,IAA2BnwC,GAAG,IAAI,CAAEkwC,KAAK,CAACC,QAAnD;AAEA,GA7U6B;AA+U9BC,EAAAA,kBAAkB,EAAE,UAAWC,QAAX,EAAsB;AAEzC,QAAK,KAAKpB,OAAL,EAAL,EAAsB;AAErB,aAAO,KAAP;AAEA,KANwC,CAQzC;;;AACA,SAAKC,SAAL,CAAgBzB,OAAhB;;AACAC,IAAAA,QAAQ,CAAChhB,UAAT,CAAqB,KAAK1sB,GAA1B,EAA+BytC,OAA/B,EAVyC,CAYzC;;;AACAN,IAAAA,GAAG,CAACzgB,UAAJ,CAAgB2jB,QAAQ,CAACh1C,CAAzB,EAA4BoyC,OAA5B;;AACAL,IAAAA,KAAK,CAAC1gB,UAAN,CAAkB2jB,QAAQ,CAACj1C,CAA3B,EAA8BqyC,OAA9B;;AACAJ,IAAAA,GAAG,CAAC3gB,UAAJ,CAAgB2jB,QAAQ,CAACvwC,CAAzB,EAA4B2tC,OAA5B,EAfyC,CAiBzC;;;AACAH,IAAAA,GAAG,CAAC5gB,UAAJ,CAAgB0gB,KAAhB,EAAuBD,GAAvB;;AACAI,IAAAA,GAAG,CAAC7gB,UAAJ,CAAgB2gB,GAAhB,EAAqBD,KAArB;;AACAI,IAAAA,GAAG,CAAC9gB,UAAJ,CAAgBygB,GAAhB,EAAqBE,GAArB,EApByC,CAsBzC;AACA;AACA;;;AACA,QAAIiD,IAAI,GAAG,CACV,CADU,EACP,CAAEhD,GAAG,CAAC3W,CADC,EACE2W,GAAG,CAAC9oC,CADN,EACS,CADT,EACY,CAAE+oC,GAAG,CAAC5W,CADlB,EACqB4W,GAAG,CAAC/oC,CADzB,EAC4B,CAD5B,EAC+B,CAAEgpC,GAAG,CAAC7W,CADrC,EACwC6W,GAAG,CAAChpC,CAD5C,EAEV8oC,GAAG,CAAC3W,CAFM,EAEH,CAFG,EAEA,CAAE2W,GAAG,CAAChpC,CAFN,EAESipC,GAAG,CAAC5W,CAFb,EAEgB,CAFhB,EAEmB,CAAE4W,GAAG,CAACjpC,CAFzB,EAE4BkpC,GAAG,CAAC7W,CAFhC,EAEmC,CAFnC,EAEsC,CAAE6W,GAAG,CAAClpC,CAF5C,EAGV,CAAEgpC,GAAG,CAAC9oC,CAHI,EAGD8oC,GAAG,CAAChpC,CAHH,EAGM,CAHN,EAGS,CAAEipC,GAAG,CAAC/oC,CAHf,EAGkB+oC,GAAG,CAACjpC,CAHtB,EAGyB,CAHzB,EAG4B,CAAEkpC,GAAG,CAAChpC,CAHlC,EAGqCgpC,GAAG,CAAClpC,CAHzC,EAG4C,CAH5C,CAAX;;AAKA,QAAK,CAAEisC,UAAU,CAAED,IAAF,EAAQnD,GAAR,EAAaC,KAAb,EAAoBC,GAApB,EAAyBK,QAAzB,CAAjB,EAAuD;AAEtD,aAAO,KAAP;AAEA,KAlCwC,CAoCzC;;;AACA4C,IAAAA,IAAI,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,CAAP;;AACA,QAAK,CAAEC,UAAU,CAAED,IAAF,EAAQnD,GAAR,EAAaC,KAAb,EAAoBC,GAApB,EAAyBK,QAAzB,CAAjB,EAAuD;AAEtD,aAAO,KAAP;AAEA,KA1CwC,CA4CzC;AACA;;;AACAC,IAAAA,eAAe,CAAC3O,YAAhB,CAA8BsO,GAA9B,EAAmCC,GAAnC;;AACA+C,IAAAA,IAAI,GAAG,CAAE3C,eAAe,CAACrpC,CAAlB,EAAqBqpC,eAAe,CAACnpC,CAArC,EAAwCmpC,eAAe,CAAChX,CAAxD,CAAP;AAEA,WAAO4Z,UAAU,CAAED,IAAF,EAAQnD,GAAR,EAAaC,KAAb,EAAoBC,GAApB,EAAyBK,QAAzB,CAAjB;AAEA,GAlY6B;AAoY9BsC,EAAAA,UAAU,EAAE,UAAWZ,KAAX,EAAkBhzC,MAAlB,EAA2B;AAEtC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACiwB,IAAP,CAAa+iB,KAAb,EAAqBlmB,KAArB,CAA4B,KAAKnpB,GAAjC,EAAsC,KAAKC,GAA3C,CAAP;AAEA,GA/Y6B;AAiZ9BwwC,EAAAA,eAAe,EAAE,UAAWpB,KAAX,EAAmB;AAEnC,UAAMqB,YAAY,GAAGzD,SAAS,CAAC3gB,IAAV,CAAgB+iB,KAAhB,EAAwBlmB,KAAxB,CAA+B,KAAKnpB,GAApC,EAAyC,KAAKC,GAA9C,CAArB;;AAEA,WAAOywC,YAAY,CAAChkB,GAAb,CAAkB2iB,KAAlB,EAA0BxzC,MAA1B,EAAP;AAEA,GAvZ6B;AAyZ9B80C,EAAAA,iBAAiB,EAAE,UAAWt0C,MAAX,EAAoB;AAEtC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACyD,KAAR,CAAe,yDAAf,EAF2B,CAG3B;AAEA;;AAED,SAAK+f,SAAL,CAAgB9yC,MAAM,CAAC6yB,MAAvB;AAEA7yB,IAAAA,MAAM,CAAC4jC,MAAP,GAAgB,KAAKmP,OAAL,CAAcnC,SAAd,EAA0BpxC,MAA1B,KAAqC,GAArD;AAEA,WAAOQ,MAAP;AAEA,GAxa6B;AA0a9Bu0C,EAAAA,SAAS,EAAE,UAAW75B,GAAX,EAAiB;AAE3B,SAAK/W,GAAL,CAASC,GAAT,CAAc8W,GAAG,CAAC/W,GAAlB;AACA,SAAKC,GAAL,CAASD,GAAT,CAAc+W,GAAG,CAAC9W,GAAlB,EAH2B,CAK3B;;AACA,QAAK,KAAKivC,OAAL,EAAL,EAAsB,KAAKR,SAAL;AAEtB,WAAO,IAAP;AAEA,GApb6B;AAsb9BgB,EAAAA,KAAK,EAAE,UAAW34B,GAAX,EAAiB;AAEvB,SAAK/W,GAAL,CAASA,GAAT,CAAc+W,GAAG,CAAC/W,GAAlB;AACA,SAAKC,GAAL,CAASA,GAAT,CAAc8W,GAAG,CAAC9W,GAAlB;AAEA,WAAO,IAAP;AAEA,GA7b6B;AA+b9B+2B,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAoB;AAEjC;AACA,QAAK,KAAKid,OAAL,EAAL,EAAsB,OAAO,IAAP,CAHW,CAKjC;;AACAlC,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAK1rB,GAAL,CAASuE,CAA3B,EAA8B,KAAKvE,GAAL,CAASyE,CAAvC,EAA0C,KAAKzE,GAAL,CAAS42B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EANiC,CAM8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAK1rB,GAAL,CAASuE,CAA3B,EAA8B,KAAKvE,GAAL,CAASyE,CAAvC,EAA0C,KAAKxE,GAAL,CAAS22B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EAPiC,CAO8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAK1rB,GAAL,CAASuE,CAA3B,EAA8B,KAAKtE,GAAL,CAASwE,CAAvC,EAA0C,KAAKzE,GAAL,CAAS42B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EARiC,CAQ8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAK1rB,GAAL,CAASuE,CAA3B,EAA8B,KAAKtE,GAAL,CAASwE,CAAvC,EAA0C,KAAKxE,GAAL,CAAS22B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EATiC,CAS8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAKzrB,GAAL,CAASsE,CAA3B,EAA8B,KAAKvE,GAAL,CAASyE,CAAvC,EAA0C,KAAKzE,GAAL,CAAS42B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EAViC,CAU8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAKzrB,GAAL,CAASsE,CAA3B,EAA8B,KAAKvE,GAAL,CAASyE,CAAvC,EAA0C,KAAKxE,GAAL,CAAS22B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EAXiC,CAW8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAKzrB,GAAL,CAASsE,CAA3B,EAA8B,KAAKtE,GAAL,CAASwE,CAAvC,EAA0C,KAAKzE,GAAL,CAAS42B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EAZiC,CAY8C;;;AAC/E+a,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAathB,GAAb,CAAkB,KAAKzrB,GAAL,CAASsE,CAA3B,EAA8B,KAAKtE,GAAL,CAASwE,CAAvC,EAA0C,KAAKxE,GAAL,CAAS22B,CAAnD,EAAuDI,YAAvD,CAAqE/E,MAArE,EAbiC,CAa8C;;;AAE/E,SAAKuc,aAAL,CAAoBxB,OAApB;AAEA,WAAO,IAAP;AAEA,GAld6B;AAod9BxZ,EAAAA,SAAS,EAAE,UAAWxsB,MAAX,EAAoB;AAE9B,SAAKhH,GAAL,CAAS6U,GAAT,CAAc7N,MAAd;AACA,SAAK/G,GAAL,CAAS4U,GAAT,CAAc7N,MAAd;AAEA,WAAO,IAAP;AAEA,GA3d6B;AA6d9B2nB,EAAAA,MAAM,EAAE,UAAW5X,GAAX,EAAiB;AAExB,WAAOA,GAAG,CAAC/W,GAAJ,CAAQ2uB,MAAR,CAAgB,KAAK3uB,GAArB,KAA8B+W,GAAG,CAAC9W,GAAJ,CAAQ0uB,MAAR,CAAgB,KAAK1uB,GAArB,CAArC;AAEA;AAje6B,CAA/B;;AAqeA,SAASuwC,UAAT,CAAqBD,IAArB,EAA2BM,EAA3B,EAA+BpiB,EAA/B,EAAmCC,EAAnC,EAAuCoiB,OAAvC,EAAiD;AAEhD,OAAM,IAAI5zC,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAGR,IAAI,CAAC10C,MAAL,GAAc,CAAnC,EAAsCqB,CAAC,IAAI6zC,CAA3C,EAA8C7zC,CAAC,IAAI,CAAnD,EAAuD;AAEtD2wC,IAAAA,SAAS,CAACjf,SAAV,CAAqB2hB,IAArB,EAA2BrzC,CAA3B,EAFsD,CAGtD;;;AACA,UAAMjC,CAAC,GAAG61C,OAAO,CAACvsC,CAAR,GAAYrJ,IAAI,CAACwO,GAAL,CAAUmkC,SAAS,CAACtpC,CAApB,CAAZ,GAAsCusC,OAAO,CAACrsC,CAAR,GAAYvJ,IAAI,CAACwO,GAAL,CAAUmkC,SAAS,CAACppC,CAApB,CAAlD,GAA4EqsC,OAAO,CAACla,CAAR,GAAY17B,IAAI,CAACwO,GAAL,CAAUmkC,SAAS,CAACjX,CAApB,CAAlG,CAJsD,CAKtD;;AACA,UAAMoa,EAAE,GAAGH,EAAE,CAACpjB,GAAH,CAAQogB,SAAR,CAAX;AACA,UAAMoD,EAAE,GAAGxiB,EAAE,CAAChB,GAAH,CAAQogB,SAAR,CAAX;AACA,UAAMqD,EAAE,GAAGxiB,EAAE,CAACjB,GAAH,CAAQogB,SAAR,CAAX,CARsD,CAStD;;AACA,QAAK3yC,IAAI,CAAC+E,GAAL,CAAU,CAAE/E,IAAI,CAAC+E,GAAL,CAAU+wC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,CAAZ,EAAoCh2C,IAAI,CAAC8E,GAAL,CAAUgxC,EAAV,EAAcC,EAAd,EAAkBC,EAAlB,CAApC,IAA+Dj2C,CAApE,EAAwE;AAEvE;AACA;AACA,aAAO,KAAP;AAEA;AAED;;AAED,SAAO,IAAP;AAEA;;AAED,MAAMk2C,MAAM,GAAG,IAAIhE,IAAJ,EAAf;AAEA;;;;;;AAKA,SAASiE,MAAT,CAAiBliB,MAAjB,EAAyB+Q,MAAzB,EAAkC;AAEjC,OAAK/Q,MAAL,GAAgBA,MAAM,KAAKjxB,SAAb,GAA2BixB,MAA3B,GAAoC,IAAIuO,OAAJ,EAAlD;AACA,OAAKwC,MAAL,GAAgBA,MAAM,KAAKhiC,SAAb,GAA2BgiC,MAA3B,GAAoC,CAAE,CAApD;AAEA;;AAEDrjC,MAAM,CAACme,MAAP,CAAeq2B,MAAM,CAACp1C,SAAtB,EAAiC;AAEhC0vB,EAAAA,GAAG,EAAE,UAAWwD,MAAX,EAAmB+Q,MAAnB,EAA4B;AAEhC,SAAK/Q,MAAL,CAAY5C,IAAZ,CAAkB4C,MAAlB;AACA,SAAK+Q,MAAL,GAAcA,MAAd;AAEA,WAAO,IAAP;AAEA,GAT+B;AAWhCuO,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAmB4C,cAAnB,EAAoC;AAElD,UAAMniB,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKmiB,cAAc,KAAKpzC,SAAxB,EAAoC;AAEnCixB,MAAAA,MAAM,CAAC5C,IAAP,CAAa+kB,cAAb;AAEA,KAJD,MAIO;AAENF,MAAAA,MAAM,CAAC3C,aAAP,CAAsBC,MAAtB,EAA+BU,SAA/B,CAA0CjgB,MAA1C;AAEA;;AAED,QAAIoiB,WAAW,GAAG,CAAlB;;AAEA,SAAM,IAAIp0C,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGF,MAAM,CAAC5yC,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnDo0C,MAAAA,WAAW,GAAGp2C,IAAI,CAAC+E,GAAL,CAAUqxC,WAAV,EAAuBpiB,MAAM,CAAChB,iBAAP,CAA0BugB,MAAM,CAAEvxC,CAAF,CAAhC,CAAvB,CAAd;AAEA;;AAED,SAAK+iC,MAAL,GAAc/kC,IAAI,CAAC0yB,IAAL,CAAW0jB,WAAX,CAAd;AAEA,WAAO,IAAP;AAEA,GArC+B;AAuChCjlB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GA3C+B;AA6ChCA,EAAAA,IAAI,EAAE,UAAW0jB,MAAX,EAAoB;AAEzB,SAAK9gB,MAAL,CAAY5C,IAAZ,CAAkB0jB,MAAM,CAAC9gB,MAAzB;AACA,SAAK+Q,MAAL,GAAc+P,MAAM,CAAC/P,MAArB;AAEA,WAAO,IAAP;AAEA,GApD+B;AAsDhCiP,EAAAA,OAAO,EAAE,YAAY;AAEpB,WAAS,KAAKjP,MAAL,GAAc,CAAvB;AAEA,GA1D+B;AA4DhCyO,EAAAA,SAAS,EAAE,YAAY;AAEtB,SAAKxf,MAAL,CAAYxD,GAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB;AACA,SAAKuU,MAAL,GAAc,CAAE,CAAhB;AAEA,WAAO,IAAP;AAEA,GAnE+B;AAqEhC0P,EAAAA,aAAa,EAAE,UAAWN,KAAX,EAAmB;AAEjC,WAASA,KAAK,CAACnhB,iBAAN,CAAyB,KAAKgB,MAA9B,KAA4C,KAAK+Q,MAAL,GAAc,KAAKA,MAAxE;AAEA,GAzE+B;AA2EhCwQ,EAAAA,eAAe,EAAE,UAAWpB,KAAX,EAAmB;AAEnC,WAASA,KAAK,CAACphB,UAAN,CAAkB,KAAKiB,MAAvB,IAAkC,KAAK+Q,MAAhD;AAEA,GA/E+B;AAiFhC8P,EAAAA,gBAAgB,EAAE,UAAWC,MAAX,EAAoB;AAErC,UAAMuB,SAAS,GAAG,KAAKtR,MAAL,GAAc+P,MAAM,CAAC/P,MAAvC;AAEA,WAAO+P,MAAM,CAAC9gB,MAAP,CAAchB,iBAAd,CAAiC,KAAKgB,MAAtC,KAAoDqiB,SAAS,GAAGA,SAAvE;AAEA,GAvF+B;AAyFhCzB,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B,WAAOA,GAAG,CAACg5B,gBAAJ,CAAsB,IAAtB,CAAP;AAEA,GA7F+B;AA+FhCG,EAAAA,eAAe,EAAE,UAAWC,KAAX,EAAmB;AAEnC,WAAOj1C,IAAI,CAACwO,GAAL,CAAUymC,KAAK,CAACM,eAAN,CAAuB,KAAKvhB,MAA5B,CAAV,KAAoD,KAAK+Q,MAAhE;AAEA,GAnG+B;AAqGhCgQ,EAAAA,UAAU,EAAE,UAAWZ,KAAX,EAAkBhzC,MAAlB,EAA2B;AAEtC,UAAMm1C,aAAa,GAAG,KAAKtiB,MAAL,CAAYhB,iBAAZ,CAA+BmhB,KAA/B,CAAtB;;AAEA,QAAKhzC,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAEDphC,IAAAA,MAAM,CAACiwB,IAAP,CAAa+iB,KAAb;;AAEA,QAAKmC,aAAa,GAAK,KAAKvR,MAAL,GAAc,KAAKA,MAA1C,EAAqD;AAEpD5jC,MAAAA,MAAM,CAACqwB,GAAP,CAAY,KAAKwC,MAAjB,EAA0BpB,SAA1B;AACAzxB,MAAAA,MAAM,CAACywB,cAAP,CAAuB,KAAKmT,MAA5B,EAAqCprB,GAArC,CAA0C,KAAKqa,MAA/C;AAEA;;AAED,WAAO7yB,MAAP;AAEA,GA3H+B;AA6HhCo1C,EAAAA,cAAc,EAAE,UAAWp1C,MAAX,EAAoB;AAEnC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAI8wC,IAAJ,EAAT;AAEA;;AAED,QAAK,KAAK+B,OAAL,EAAL,EAAsB;AAErB;AACA7yC,MAAAA,MAAM,CAACqyC,SAAP;AACA,aAAOryC,MAAP;AAEA;;AAEDA,IAAAA,MAAM,CAACqvB,GAAP,CAAY,KAAKwD,MAAjB,EAAyB,KAAKA,MAA9B;AACA7yB,IAAAA,MAAM,CAACkzC,cAAP,CAAuB,KAAKtP,MAA5B;AAEA,WAAO5jC,MAAP;AAEA,GAnJ+B;AAqJhC26B,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAoB;AAEjC,SAAK/C,MAAL,CAAY8H,YAAZ,CAA0B/E,MAA1B;AACA,SAAKgO,MAAL,GAAc,KAAKA,MAAL,GAAchO,MAAM,CAAC2R,iBAAP,EAA5B;AAEA,WAAO,IAAP;AAEA,GA5J+B;AA8JhCpQ,EAAAA,SAAS,EAAE,UAAWxsB,MAAX,EAAoB;AAE9B,SAAKkoB,MAAL,CAAYra,GAAZ,CAAiB7N,MAAjB;AAEA,WAAO,IAAP;AAEA,GApK+B;AAsKhC2nB,EAAAA,MAAM,EAAE,UAAWqhB,MAAX,EAAoB;AAE3B,WAAOA,MAAM,CAAC9gB,MAAP,CAAcP,MAAd,CAAsB,KAAKO,MAA3B,KAAyC8gB,MAAM,CAAC/P,MAAP,KAAkB,KAAKA,MAAvE;AAEA;AA1K+B,CAAjC;;AA8KA,MAAMyR,SAAS,GAAG,IAAIjU,OAAJ,EAAlB;;AACA,MAAMkU,UAAU,GAAG,IAAIlU,OAAJ,EAAnB;;AACA,MAAMmU,OAAO,GAAG,IAAInU,OAAJ,EAAhB;;AACA,MAAMoU,KAAK,GAAG,IAAIpU,OAAJ,EAAd;;AAEA,MAAMqU,MAAM,GAAG,IAAIrU,OAAJ,EAAf;;AACA,MAAMsU,MAAM,GAAG,IAAItU,OAAJ,EAAf;;AACA,MAAMuU,OAAO,GAAG,IAAIvU,OAAJ,EAAhB;AAEA;;;;;AAIA,SAASwU,GAAT,CAAcC,MAAd,EAAsBC,SAAtB,EAAkC;AAEjC,OAAKD,MAAL,GAAgBA,MAAM,KAAKj0C,SAAb,GAA2Bi0C,MAA3B,GAAoC,IAAIzU,OAAJ,EAAlD;AACA,OAAK0U,SAAL,GAAmBA,SAAS,KAAKl0C,SAAhB,GAA8Bk0C,SAA9B,GAA0C,IAAI1U,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAA3D;AAEA;;AAED7gC,MAAM,CAACme,MAAP,CAAek3B,GAAG,CAACj2C,SAAnB,EAA8B;AAE7B0vB,EAAAA,GAAG,EAAE,UAAWwmB,MAAX,EAAmBC,SAAnB,EAA+B;AAEnC,SAAKD,MAAL,CAAY5lB,IAAZ,CAAkB4lB,MAAlB;AACA,SAAKC,SAAL,CAAe7lB,IAAf,CAAqB6lB,SAArB;AAEA,WAAO,IAAP;AAEA,GAT4B;AAW7B9lB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAf4B;AAiB7BA,EAAAA,IAAI,EAAE,UAAW8lB,GAAX,EAAiB;AAEtB,SAAKF,MAAL,CAAY5lB,IAAZ,CAAkB8lB,GAAG,CAACF,MAAtB;AACA,SAAKC,SAAL,CAAe7lB,IAAf,CAAqB8lB,GAAG,CAACD,SAAzB;AAEA,WAAO,IAAP;AAEA,GAxB4B;AA0B7BE,EAAAA,EAAE,EAAE,UAAWvyC,CAAX,EAAczD,MAAd,EAAuB;AAE1B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,yCAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACiwB,IAAP,CAAa,KAAK6lB,SAAlB,EAA8BrlB,cAA9B,CAA8ChtB,CAA9C,EAAkD+U,GAAlD,CAAuD,KAAKq9B,MAA5D,CAAP;AAEA,GArC4B;AAuC7BzP,EAAAA,MAAM,EAAE,UAAW/mC,CAAX,EAAe;AAEtB,SAAKy2C,SAAL,CAAe7lB,IAAf,CAAqB5wB,CAArB,EAAyBgxB,GAAzB,CAA8B,KAAKwlB,MAAnC,EAA4CpkB,SAA5C;AAEA,WAAO,IAAP;AAEA,GA7C4B;AA+C7BwkB,EAAAA,MAAM,EAAE,UAAWxyC,CAAX,EAAe;AAEtB,SAAKoyC,MAAL,CAAY5lB,IAAZ,CAAkB,KAAK+lB,EAAL,CAASvyC,CAAT,EAAY4xC,SAAZ,CAAlB;AAEA,WAAO,IAAP;AAEA,GArD4B;AAuD7Ba,EAAAA,mBAAmB,EAAE,UAAWlD,KAAX,EAAkBhzC,MAAlB,EAA2B;AAE/C,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAEDphC,IAAAA,MAAM,CAACswB,UAAP,CAAmB0iB,KAAnB,EAA0B,KAAK6C,MAA/B;AAEA,UAAMM,iBAAiB,GAAGn2C,MAAM,CAACoxB,GAAP,CAAY,KAAK0kB,SAAjB,CAA1B;;AAEA,QAAKK,iBAAiB,GAAG,CAAzB,EAA6B;AAE5B,aAAOn2C,MAAM,CAACiwB,IAAP,CAAa,KAAK4lB,MAAlB,CAAP;AAEA;;AAED,WAAO71C,MAAM,CAACiwB,IAAP,CAAa,KAAK6lB,SAAlB,EAA8BrlB,cAA9B,CAA8C0lB,iBAA9C,EAAkE39B,GAAlE,CAAuE,KAAKq9B,MAA5E,CAAP;AAEA,GA5E4B;AA8E7BzB,EAAAA,eAAe,EAAE,UAAWpB,KAAX,EAAmB;AAEnC,WAAOn0C,IAAI,CAAC0yB,IAAL,CAAW,KAAK6kB,iBAAL,CAAwBpD,KAAxB,CAAX,CAAP;AAEA,GAlF4B;AAoF7BoD,EAAAA,iBAAiB,EAAE,UAAWpD,KAAX,EAAmB;AAErC,UAAMmD,iBAAiB,GAAGd,SAAS,CAAC/kB,UAAV,CAAsB0iB,KAAtB,EAA6B,KAAK6C,MAAlC,EAA2CzkB,GAA3C,CAAgD,KAAK0kB,SAArD,CAA1B,CAFqC,CAIrC;;;AAEA,QAAKK,iBAAiB,GAAG,CAAzB,EAA6B;AAE5B,aAAO,KAAKN,MAAL,CAAYhkB,iBAAZ,CAA+BmhB,KAA/B,CAAP;AAEA;;AAEDqC,IAAAA,SAAS,CAACplB,IAAV,CAAgB,KAAK6lB,SAArB,EAAiCrlB,cAAjC,CAAiD0lB,iBAAjD,EAAqE39B,GAArE,CAA0E,KAAKq9B,MAA/E;;AAEA,WAAOR,SAAS,CAACxjB,iBAAV,CAA6BmhB,KAA7B,CAAP;AAEA,GApG4B;AAsG7BqD,EAAAA,mBAAmB,EAAE,UAAW7B,EAAX,EAAepiB,EAAf,EAAmBkkB,kBAAnB,EAAuCC,sBAAvC,EAAgE;AAEpF;AACA;AACA;AACA;AACA;AACA;AAEAjB,IAAAA,UAAU,CAACrlB,IAAX,CAAiBukB,EAAjB,EAAsBh8B,GAAtB,CAA2B4Z,EAA3B,EAAgC3B,cAAhC,CAAgD,GAAhD;;AACA8kB,IAAAA,OAAO,CAACtlB,IAAR,CAAcmC,EAAd,EAAmB/B,GAAnB,CAAwBmkB,EAAxB,EAA6B/iB,SAA7B;;AACA+jB,IAAAA,KAAK,CAACvlB,IAAN,CAAY,KAAK4lB,MAAjB,EAA0BxlB,GAA1B,CAA+BilB,UAA/B;;AAEA,UAAMkB,SAAS,GAAGhC,EAAE,CAAC5iB,UAAH,CAAeQ,EAAf,IAAsB,GAAxC;AACA,UAAMqkB,GAAG,GAAG,CAAE,KAAKX,SAAL,CAAe1kB,GAAf,CAAoBmkB,OAApB,CAAd;;AACA,UAAMmB,EAAE,GAAGlB,KAAK,CAACpkB,GAAN,CAAW,KAAK0kB,SAAhB,CAAX;;AACA,UAAMzoB,EAAE,GAAG,CAAEmoB,KAAK,CAACpkB,GAAN,CAAWmkB,OAAX,CAAb;;AACA,UAAM7xC,CAAC,GAAG8xC,KAAK,CAAClkB,QAAN,EAAV;;AACA,UAAM2E,GAAG,GAAGp3B,IAAI,CAACwO,GAAL,CAAU,IAAIopC,GAAG,GAAGA,GAApB,CAAZ;AACA,QAAIE,EAAJ,EAAQvX,EAAR,EAAYwX,OAAZ,EAAqBC,MAArB;;AAEA,QAAK5gB,GAAG,GAAG,CAAX,EAAe;AAEd;AAEA0gB,MAAAA,EAAE,GAAGF,GAAG,GAAGppB,EAAN,GAAWqpB,EAAhB;AACAtX,MAAAA,EAAE,GAAGqX,GAAG,GAAGC,EAAN,GAAWrpB,EAAhB;AACAwpB,MAAAA,MAAM,GAAGL,SAAS,GAAGvgB,GAArB;;AAEA,UAAK0gB,EAAE,IAAI,CAAX,EAAe;AAEd,YAAKvX,EAAE,IAAI,CAAEyX,MAAb,EAAsB;AAErB,cAAKzX,EAAE,IAAIyX,MAAX,EAAoB;AAEnB;AACA;AAEA,kBAAMC,MAAM,GAAG,IAAI7gB,GAAnB;AACA0gB,YAAAA,EAAE,IAAIG,MAAN;AACA1X,YAAAA,EAAE,IAAI0X,MAAN;AACAF,YAAAA,OAAO,GAAGD,EAAE,IAAKA,EAAE,GAAGF,GAAG,GAAGrX,EAAX,GAAgB,IAAIsX,EAAzB,CAAF,GAAkCtX,EAAE,IAAKqX,GAAG,GAAGE,EAAN,GAAWvX,EAAX,GAAgB,IAAI/R,EAAzB,CAApC,GAAoE3pB,CAA9E;AAEA,WAVD,MAUO;AAEN;AAEA07B,YAAAA,EAAE,GAAGoX,SAAL;AACAG,YAAAA,EAAE,GAAG93C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,EAAI6yC,GAAG,GAAGrX,EAAN,GAAWsX,EAAf,CAAb,CAAL;AACAE,YAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAYvX,EAAE,IAAKA,EAAE,GAAG,IAAI/R,EAAd,CAAd,GAAmC3pB,CAA7C;AAEA;AAED,SAtBD,MAsBO;AAEN;AAEA07B,UAAAA,EAAE,GAAG,CAAEoX,SAAP;AACAG,UAAAA,EAAE,GAAG93C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,EAAI6yC,GAAG,GAAGrX,EAAN,GAAWsX,EAAf,CAAb,CAAL;AACAE,UAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAYvX,EAAE,IAAKA,EAAE,GAAG,IAAI/R,EAAd,CAAd,GAAmC3pB,CAA7C;AAEA;AAED,OAlCD,MAkCO;AAEN,YAAK07B,EAAE,IAAI,CAAEyX,MAAb,EAAsB;AAErB;AAEAF,UAAAA,EAAE,GAAG93C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,EAAI,CAAE6yC,GAAF,GAAQD,SAAR,GAAoBE,EAAxB,CAAb,CAAL;AACAtX,UAAAA,EAAE,GAAKuX,EAAE,GAAG,CAAP,GAAa,CAAEH,SAAf,GAA2B33C,IAAI,CAAC8E,GAAL,CAAU9E,IAAI,CAAC+E,GAAL,CAAU,CAAE4yC,SAAZ,EAAuB,CAAEnpB,EAAzB,CAAV,EAAyCmpB,SAAzC,CAAhC;AACAI,UAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAYvX,EAAE,IAAKA,EAAE,GAAG,IAAI/R,EAAd,CAAd,GAAmC3pB,CAA7C;AAEA,SARD,MAQO,IAAK07B,EAAE,IAAIyX,MAAX,EAAoB;AAE1B;AAEAF,UAAAA,EAAE,GAAG,CAAL;AACAvX,UAAAA,EAAE,GAAGvgC,IAAI,CAAC8E,GAAL,CAAU9E,IAAI,CAAC+E,GAAL,CAAU,CAAE4yC,SAAZ,EAAuB,CAAEnpB,EAAzB,CAAV,EAAyCmpB,SAAzC,CAAL;AACAI,UAAAA,OAAO,GAAGxX,EAAE,IAAKA,EAAE,GAAG,IAAI/R,EAAd,CAAF,GAAuB3pB,CAAjC;AAEA,SARM,MAQA;AAEN;AAEAizC,UAAAA,EAAE,GAAG93C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,EAAI6yC,GAAG,GAAGD,SAAN,GAAkBE,EAAtB,CAAb,CAAL;AACAtX,UAAAA,EAAE,GAAKuX,EAAE,GAAG,CAAP,GAAaH,SAAb,GAAyB33C,IAAI,CAAC8E,GAAL,CAAU9E,IAAI,CAAC+E,GAAL,CAAU,CAAE4yC,SAAZ,EAAuB,CAAEnpB,EAAzB,CAAV,EAAyCmpB,SAAzC,CAA9B;AACAI,UAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAYvX,EAAE,IAAKA,EAAE,GAAG,IAAI/R,EAAd,CAAd,GAAmC3pB,CAA7C;AAEA;AAED;AAED,KAxED,MAwEO;AAEN;AAEA07B,MAAAA,EAAE,GAAKqX,GAAG,GAAG,CAAR,GAAc,CAAED,SAAhB,GAA4BA,SAAjC;AACAG,MAAAA,EAAE,GAAG93C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,EAAI6yC,GAAG,GAAGrX,EAAN,GAAWsX,EAAf,CAAb,CAAL;AACAE,MAAAA,OAAO,GAAG,CAAED,EAAF,GAAOA,EAAP,GAAYvX,EAAE,IAAKA,EAAE,GAAG,IAAI/R,EAAd,CAAd,GAAmC3pB,CAA7C;AAEA;;AAED,QAAK4yC,kBAAL,EAA0B;AAEzBA,MAAAA,kBAAkB,CAACrmB,IAAnB,CAAyB,KAAK6lB,SAA9B,EAA0CrlB,cAA1C,CAA0DkmB,EAA1D,EAA+Dn+B,GAA/D,CAAoE,KAAKq9B,MAAzE;AAEA;;AAED,QAAKU,sBAAL,EAA8B;AAE7BA,MAAAA,sBAAsB,CAACtmB,IAAvB,CAA6BslB,OAA7B,EAAuC9kB,cAAvC,CAAuD2O,EAAvD,EAA4D5mB,GAA5D,CAAiE88B,UAAjE;AAEA;;AAED,WAAOsB,OAAP;AAEA,GA3N4B;AA6N7BG,EAAAA,eAAe,EAAE,UAAWpD,MAAX,EAAmB3zC,MAAnB,EAA4B;AAE5Cq1C,IAAAA,SAAS,CAAC/kB,UAAV,CAAsBqjB,MAAM,CAAC9gB,MAA7B,EAAqC,KAAKgjB,MAA1C;;AACA,UAAMmB,GAAG,GAAG3B,SAAS,CAACjkB,GAAV,CAAe,KAAK0kB,SAApB,CAAZ;;AACA,UAAMppB,EAAE,GAAG2oB,SAAS,CAACjkB,GAAV,CAAeikB,SAAf,IAA6B2B,GAAG,GAAGA,GAA9C;AACA,UAAMC,OAAO,GAAGtD,MAAM,CAAC/P,MAAP,GAAgB+P,MAAM,CAAC/P,MAAvC;AAEA,QAAKlX,EAAE,GAAGuqB,OAAV,EAAoB,OAAO,IAAP;AAEpB,UAAMC,GAAG,GAAGr4C,IAAI,CAAC0yB,IAAL,CAAW0lB,OAAO,GAAGvqB,EAArB,CAAZ,CAT4C,CAW5C;;AACA,UAAMyqB,EAAE,GAAGH,GAAG,GAAGE,GAAjB,CAZ4C,CAc5C;;AACA,UAAME,EAAE,GAAGJ,GAAG,GAAGE,GAAjB,CAf4C,CAiB5C;;AACA,QAAKC,EAAE,GAAG,CAAL,IAAUC,EAAE,GAAG,CAApB,EAAwB,OAAO,IAAP,CAlBoB,CAoB5C;AACA;AACA;;AACA,QAAKD,EAAE,GAAG,CAAV,EAAc,OAAO,KAAKnB,EAAL,CAASoB,EAAT,EAAap3C,MAAb,CAAP,CAvB8B,CAyB5C;;AACA,WAAO,KAAKg2C,EAAL,CAASmB,EAAT,EAAan3C,MAAb,CAAP;AAEA,GAzP4B;AA2P7B0zC,EAAAA,gBAAgB,EAAE,UAAWC,MAAX,EAAoB;AAErC,WAAO,KAAKyC,iBAAL,CAAwBzC,MAAM,CAAC9gB,MAA/B,KAA6C8gB,MAAM,CAAC/P,MAAP,GAAgB+P,MAAM,CAAC/P,MAA3E;AAEA,GA/P4B;AAiQ7ByT,EAAAA,eAAe,EAAE,UAAWvD,KAAX,EAAmB;AAEnC,UAAM1Q,WAAW,GAAG0Q,KAAK,CAACtQ,MAAN,CAAapS,GAAb,CAAkB,KAAK0kB,SAAvB,CAApB;;AAEA,QAAK1S,WAAW,KAAK,CAArB,EAAyB;AAExB;AACA,UAAK0Q,KAAK,CAACM,eAAN,CAAuB,KAAKyB,MAA5B,MAAyC,CAA9C,EAAkD;AAEjD,eAAO,CAAP;AAEA,OAPuB,CASxB;;;AAEA,aAAO,IAAP;AAEA;;AAED,UAAMpyC,CAAC,GAAG,EAAI,KAAKoyC,MAAL,CAAYzkB,GAAZ,CAAiB0iB,KAAK,CAACtQ,MAAvB,IAAkCsQ,KAAK,CAACC,QAA5C,IAAyD3Q,WAAnE,CAnBmC,CAqBnC;;AAEA,WAAO3/B,CAAC,IAAI,CAAL,GAASA,CAAT,GAAa,IAApB;AAEA,GA1R4B;AA4R7B6zC,EAAAA,cAAc,EAAE,UAAWxD,KAAX,EAAkB9zC,MAAlB,EAA2B;AAE1C,UAAMyD,CAAC,GAAG,KAAK4zC,eAAL,CAAsBvD,KAAtB,CAAV;;AAEA,QAAKrwC,CAAC,KAAK,IAAX,EAAkB;AAEjB,aAAO,IAAP;AAEA;;AAED,WAAO,KAAKuyC,EAAL,CAASvyC,CAAT,EAAYzD,MAAZ,CAAP;AAEA,GAxS4B;AA0S7B6zC,EAAAA,eAAe,EAAE,UAAWC,KAAX,EAAmB;AAEnC;AAEA,UAAMyD,WAAW,GAAGzD,KAAK,CAACM,eAAN,CAAuB,KAAKyB,MAA5B,CAApB;;AAEA,QAAK0B,WAAW,KAAK,CAArB,EAAyB;AAExB,aAAO,IAAP;AAEA;;AAED,UAAMnU,WAAW,GAAG0Q,KAAK,CAACtQ,MAAN,CAAapS,GAAb,CAAkB,KAAK0kB,SAAvB,CAApB;;AAEA,QAAK1S,WAAW,GAAGmU,WAAd,GAA4B,CAAjC,EAAqC;AAEpC,aAAO,IAAP;AAEA,KAlBkC,CAoBnC;;;AAEA,WAAO,KAAP;AAEA,GAlU4B;AAoU7BC,EAAAA,YAAY,EAAE,UAAW98B,GAAX,EAAgB1a,MAAhB,EAAyB;AAEtC,QAAIy3C,IAAJ,EAAUC,IAAV,EAAgBC,KAAhB,EAAuBC,KAAvB,EAA8BC,KAA9B,EAAqCC,KAArC;AAEA,UAAMC,OAAO,GAAG,IAAI,KAAKjC,SAAL,CAAe5tC,CAAnC;AAAA,UACC8vC,OAAO,GAAG,IAAI,KAAKlC,SAAL,CAAe1tC,CAD9B;AAAA,UAEC6vC,OAAO,GAAG,IAAI,KAAKnC,SAAL,CAAevb,CAF9B;AAIA,UAAMsb,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKkC,OAAO,IAAI,CAAhB,EAAoB;AAEnBN,MAAAA,IAAI,GAAG,CAAE/8B,GAAG,CAAC/W,GAAJ,CAAQuE,CAAR,GAAY2tC,MAAM,CAAC3tC,CAArB,IAA2B6vC,OAAlC;AACAL,MAAAA,IAAI,GAAG,CAAEh9B,GAAG,CAAC9W,GAAJ,CAAQsE,CAAR,GAAY2tC,MAAM,CAAC3tC,CAArB,IAA2B6vC,OAAlC;AAEA,KALD,MAKO;AAENN,MAAAA,IAAI,GAAG,CAAE/8B,GAAG,CAAC9W,GAAJ,CAAQsE,CAAR,GAAY2tC,MAAM,CAAC3tC,CAArB,IAA2B6vC,OAAlC;AACAL,MAAAA,IAAI,GAAG,CAAEh9B,GAAG,CAAC/W,GAAJ,CAAQuE,CAAR,GAAY2tC,MAAM,CAAC3tC,CAArB,IAA2B6vC,OAAlC;AAEA;;AAED,QAAKC,OAAO,IAAI,CAAhB,EAAoB;AAEnBL,MAAAA,KAAK,GAAG,CAAEj9B,GAAG,CAAC/W,GAAJ,CAAQyE,CAAR,GAAYytC,MAAM,CAACztC,CAArB,IAA2B4vC,OAAnC;AACAJ,MAAAA,KAAK,GAAG,CAAEl9B,GAAG,CAAC9W,GAAJ,CAAQwE,CAAR,GAAYytC,MAAM,CAACztC,CAArB,IAA2B4vC,OAAnC;AAEA,KALD,MAKO;AAENL,MAAAA,KAAK,GAAG,CAAEj9B,GAAG,CAAC9W,GAAJ,CAAQwE,CAAR,GAAYytC,MAAM,CAACztC,CAArB,IAA2B4vC,OAAnC;AACAJ,MAAAA,KAAK,GAAG,CAAEl9B,GAAG,CAAC/W,GAAJ,CAAQyE,CAAR,GAAYytC,MAAM,CAACztC,CAArB,IAA2B4vC,OAAnC;AAEA;;AAED,QAAOP,IAAI,GAAGG,KAAT,IAAsBD,KAAK,GAAGD,IAAnC,EAA4C,OAAO,IAAP,CAlCN,CAoCtC;AACA;;AAEA,QAAKC,KAAK,GAAGF,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGE,KAAP;AAErC,QAAKC,KAAK,GAAGF,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGE,KAAP;;AAErC,QAAKK,OAAO,IAAI,CAAhB,EAAoB;AAEnBJ,MAAAA,KAAK,GAAG,CAAEn9B,GAAG,CAAC/W,GAAJ,CAAQ42B,CAAR,GAAYsb,MAAM,CAACtb,CAArB,IAA2B0d,OAAnC;AACAH,MAAAA,KAAK,GAAG,CAAEp9B,GAAG,CAAC9W,GAAJ,CAAQ22B,CAAR,GAAYsb,MAAM,CAACtb,CAArB,IAA2B0d,OAAnC;AAEA,KALD,MAKO;AAENJ,MAAAA,KAAK,GAAG,CAAEn9B,GAAG,CAAC9W,GAAJ,CAAQ22B,CAAR,GAAYsb,MAAM,CAACtb,CAArB,IAA2B0d,OAAnC;AACAH,MAAAA,KAAK,GAAG,CAAEp9B,GAAG,CAAC/W,GAAJ,CAAQ42B,CAAR,GAAYsb,MAAM,CAACtb,CAArB,IAA2B0d,OAAnC;AAEA;;AAED,QAAOR,IAAI,GAAGK,KAAT,IAAsBD,KAAK,GAAGH,IAAnC,EAA4C,OAAO,IAAP;AAE5C,QAAKG,KAAK,GAAGJ,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGI,KAAP;AAErC,QAAKC,KAAK,GAAGJ,IAAR,IAAgBA,IAAI,KAAKA,IAA9B,EAAqCA,IAAI,GAAGI,KAAP,CA3DC,CA6DtC;;AAEA,QAAKJ,IAAI,GAAG,CAAZ,EAAgB,OAAO,IAAP;AAEhB,WAAO,KAAK1B,EAAL,CAASyB,IAAI,IAAI,CAAR,GAAYA,IAAZ,GAAmBC,IAA5B,EAAkC13C,MAAlC,CAAP;AAEA,GAvY4B;AAyY7ByzC,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B,WAAO,KAAK88B,YAAL,CAAmB98B,GAAnB,EAAwB26B,SAAxB,MAAwC,IAA/C;AAEA,GA7Y4B;AA+Y7B6C,EAAAA,iBAAiB,EAAE,UAAWj5C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAoBy0C,eAApB,EAAqCn4C,MAArC,EAA8C;AAEhE;AAEA;AAEAy1C,IAAAA,MAAM,CAACnlB,UAAP,CAAmBtxB,CAAnB,EAAsBC,CAAtB;;AACAy2C,IAAAA,MAAM,CAACplB,UAAP,CAAmB5sB,CAAnB,EAAsBzE,CAAtB;;AACA02C,IAAAA,OAAO,CAAC/S,YAAR,CAAsB6S,MAAtB,EAA8BC,MAA9B,EARgE,CAUhE;AACA;AACA;AACA;AACA;;;AACA,QAAI0C,GAAG,GAAG,KAAKtC,SAAL,CAAe1kB,GAAf,CAAoBukB,OAApB,CAAV;AACA,QAAIn3B,IAAJ;;AAEA,QAAK45B,GAAG,GAAG,CAAX,EAAe;AAEd,UAAKD,eAAL,EAAuB,OAAO,IAAP;AACvB35B,MAAAA,IAAI,GAAG,CAAP;AAEA,KALD,MAKO,IAAK45B,GAAG,GAAG,CAAX,EAAe;AAErB55B,MAAAA,IAAI,GAAG,CAAE,CAAT;AACA45B,MAAAA,GAAG,GAAG,CAAEA,GAAR;AAEA,KALM,MAKA;AAEN,aAAO,IAAP;AAEA;;AAED5C,IAAAA,KAAK,CAACllB,UAAN,CAAkB,KAAKulB,MAAvB,EAA+B52C,CAA/B;;AACA,UAAMo5C,MAAM,GAAG75B,IAAI,GAAG,KAAKs3B,SAAL,CAAe1kB,GAAf,CAAoBskB,MAAM,CAAC9S,YAAP,CAAqB4S,KAArB,EAA4BE,MAA5B,CAApB,CAAtB,CAnCgE,CAqChE;;AACA,QAAK2C,MAAM,GAAG,CAAd,EAAkB;AAEjB,aAAO,IAAP;AAEA;;AAED,UAAMC,MAAM,GAAG95B,IAAI,GAAG,KAAKs3B,SAAL,CAAe1kB,GAAf,CAAoBqkB,MAAM,CAACpkB,KAAP,CAAcmkB,KAAd,CAApB,CAAtB,CA5CgE,CA8ChE;;AACA,QAAK8C,MAAM,GAAG,CAAd,EAAkB;AAEjB,aAAO,IAAP;AAEA,KAnD+D,CAqDhE;;;AACA,QAAKD,MAAM,GAAGC,MAAT,GAAkBF,GAAvB,EAA6B;AAE5B,aAAO,IAAP;AAEA,KA1D+D,CA4DhE;;;AACA,UAAMG,GAAG,GAAG,CAAE/5B,IAAF,GAASg3B,KAAK,CAACpkB,GAAN,CAAWukB,OAAX,CAArB,CA7DgE,CA+DhE;;;AACA,QAAK4C,GAAG,GAAG,CAAX,EAAe;AAEd,aAAO,IAAP;AAEA,KApE+D,CAsEhE;;;AACA,WAAO,KAAKvC,EAAL,CAASuC,GAAG,GAAGH,GAAf,EAAoBp4C,MAApB,CAAP;AAEA,GAxd4B;AA0d7B26B,EAAAA,YAAY,EAAE,UAAWrE,OAAX,EAAqB;AAElC,SAAKuf,MAAL,CAAYlb,YAAZ,CAA0BrE,OAA1B;AACA,SAAKwf,SAAL,CAAenT,kBAAf,CAAmCrM,OAAnC;AAEA,WAAO,IAAP;AAEA,GAje4B;AAme7BhE,EAAAA,MAAM,EAAE,UAAWyjB,GAAX,EAAiB;AAExB,WAAOA,GAAG,CAACF,MAAJ,CAAWvjB,MAAX,CAAmB,KAAKujB,MAAxB,KAAoCE,GAAG,CAACD,SAAJ,CAAcxjB,MAAd,CAAsB,KAAKwjB,SAA3B,CAA3C;AAEA;AAve4B,CAA9B;AA2eA;;;;AAIA,MAAM0C,QAAQ,GAAG,IAAIpX,OAAJ,EAAjB;;AACA,MAAMqX,QAAQ,GAAG,IAAIrX,OAAJ,EAAjB;;AACA,MAAMsX,aAAa,GAAG,IAAI5lB,OAAJ,EAAtB;;AAEA,SAAS6lB,KAAT,CAAgBnV,MAAhB,EAAwBuQ,QAAxB,EAAmC;AAElC;AAEA,OAAKvQ,MAAL,GAAgBA,MAAM,KAAK5hC,SAAb,GAA2B4hC,MAA3B,GAAoC,IAAIpC,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAlD;AACA,OAAK2S,QAAL,GAAkBA,QAAQ,KAAKnyC,SAAf,GAA6BmyC,QAA7B,GAAwC,CAAxD;AAEA;;AAEDxzC,MAAM,CAACme,MAAP,CAAei6B,KAAK,CAACh5C,SAArB,EAAgC;AAE/Bi5C,EAAAA,OAAO,EAAE,IAFsB;AAI/BvpB,EAAAA,GAAG,EAAE,UAAWmU,MAAX,EAAmBuQ,QAAnB,EAA8B;AAElC,SAAKvQ,MAAL,CAAYvT,IAAZ,CAAkBuT,MAAlB;AACA,SAAKuQ,QAAL,GAAgBA,QAAhB;AAEA,WAAO,IAAP;AAEA,GAX8B;AAa/B8E,EAAAA,aAAa,EAAE,UAAW3wC,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAoB5c,CAApB,EAAwB;AAEtC,SAAK6lB,MAAL,CAAYnU,GAAZ,CAAiBnnB,CAAjB,EAAoBE,CAApB,EAAuBmyB,CAAvB;AACA,SAAKwZ,QAAL,GAAgBp2B,CAAhB;AAEA,WAAO,IAAP;AAEA,GApB8B;AAsB/Bm7B,EAAAA,6BAA6B,EAAE,UAAWtV,MAAX,EAAmBwP,KAAnB,EAA2B;AAEzD,SAAKxP,MAAL,CAAYvT,IAAZ,CAAkBuT,MAAlB;AACA,SAAKuQ,QAAL,GAAgB,CAAEf,KAAK,CAAC5hB,GAAN,CAAW,KAAKoS,MAAhB,CAAlB;AAEA,WAAO,IAAP;AAEA,GA7B8B;AA+B/BuV,EAAAA,qBAAqB,EAAE,UAAW95C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAqB;AAE3C,UAAM8/B,MAAM,GAAGgV,QAAQ,CAACloB,UAAT,CAAqB5sB,CAArB,EAAwB1E,CAAxB,EAA4BqyB,KAA5B,CAAmConB,QAAQ,CAACnoB,UAAT,CAAqBrxB,CAArB,EAAwBD,CAAxB,CAAnC,EAAiEyyB,SAAjE,EAAf,CAF2C,CAI3C;;;AAEA,SAAKqnB,6BAAL,CAAoCtV,MAApC,EAA4CvkC,CAA5C;AAEA,WAAO,IAAP;AAEA,GAzC8B;AA2C/B+wB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GA/C8B;AAiD/BA,EAAAA,IAAI,EAAE,UAAW6jB,KAAX,EAAmB;AAExB,SAAKtQ,MAAL,CAAYvT,IAAZ,CAAkB6jB,KAAK,CAACtQ,MAAxB;AACA,SAAKuQ,QAAL,GAAgBD,KAAK,CAACC,QAAtB;AAEA,WAAO,IAAP;AAEA,GAxD8B;AA0D/BtiB,EAAAA,SAAS,EAAE,YAAY;AAEtB;AAEA,UAAMunB,mBAAmB,GAAG,MAAM,KAAKxV,MAAL,CAAYhkC,MAAZ,EAAlC;AACA,SAAKgkC,MAAL,CAAY/S,cAAZ,CAA4BuoB,mBAA5B;AACA,SAAKjF,QAAL,IAAiBiF,mBAAjB;AAEA,WAAO,IAAP;AAEA,GApE8B;AAsE/B7nB,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAK4iB,QAAL,IAAiB,CAAE,CAAnB;AACA,SAAKvQ,MAAL,CAAYrS,MAAZ;AAEA,WAAO,IAAP;AAEA,GA7E8B;AA+E/BijB,EAAAA,eAAe,EAAE,UAAWpB,KAAX,EAAmB;AAEnC,WAAO,KAAKxP,MAAL,CAAYpS,GAAZ,CAAiB4hB,KAAjB,IAA2B,KAAKe,QAAvC;AAEA,GAnF8B;AAqF/BkF,EAAAA,gBAAgB,EAAE,UAAWtF,MAAX,EAAoB;AAErC,WAAO,KAAKS,eAAL,CAAsBT,MAAM,CAAC9gB,MAA7B,IAAwC8gB,MAAM,CAAC/P,MAAtD;AAEA,GAzF8B;AA2F/BsV,EAAAA,YAAY,EAAE,UAAWlG,KAAX,EAAkBhzC,MAAlB,EAA2B;AAExC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACiwB,IAAP,CAAa,KAAKuT,MAAlB,EAA2B/S,cAA3B,CAA2C,CAAE,KAAK2jB,eAAL,CAAsBpB,KAAtB,CAA7C,EAA6Ex6B,GAA7E,CAAkFw6B,KAAlF,CAAP;AAEA,GAtG8B;AAwG/BmG,EAAAA,aAAa,EAAE,UAAWC,IAAX,EAAiBp5C,MAAjB,EAA0B;AAExC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,UAAM0U,SAAS,GAAGsD,IAAI,CAACv1C,KAAL,CAAY20C,QAAZ,CAAlB;AAEA,UAAMpV,WAAW,GAAG,KAAKI,MAAL,CAAYpS,GAAZ,CAAiB0kB,SAAjB,CAApB;;AAEA,QAAK1S,WAAW,KAAK,CAArB,EAAyB;AAExB;AACA,UAAK,KAAKgR,eAAL,CAAsBgF,IAAI,CAACC,KAA3B,MAAuC,CAA5C,EAAgD;AAE/C,eAAOr5C,MAAM,CAACiwB,IAAP,CAAampB,IAAI,CAACC,KAAlB,CAAP;AAEA,OAPuB,CASxB;;;AACA,aAAOz3C,SAAP;AAEA;;AAED,UAAM6B,CAAC,GAAG,EAAI21C,IAAI,CAACC,KAAL,CAAWjoB,GAAX,CAAgB,KAAKoS,MAArB,IAAgC,KAAKuQ,QAAzC,IAAsD3Q,WAAhE;;AAEA,QAAK3/B,CAAC,GAAG,CAAJ,IAASA,CAAC,GAAG,CAAlB,EAAsB;AAErB,aAAO7B,SAAP;AAEA;;AAED,WAAO5B,MAAM,CAACiwB,IAAP,CAAa6lB,SAAb,EAAyBrlB,cAAzB,CAAyChtB,CAAzC,EAA6C+U,GAA7C,CAAkD4gC,IAAI,CAACC,KAAvD,CAAP;AAEA,GA7I8B;AA+I/BC,EAAAA,cAAc,EAAE,UAAWF,IAAX,EAAkB;AAEjC;AAEA,UAAMG,SAAS,GAAG,KAAKnF,eAAL,CAAsBgF,IAAI,CAACC,KAA3B,CAAlB;AACA,UAAMG,OAAO,GAAG,KAAKpF,eAAL,CAAsBgF,IAAI,CAACK,GAA3B,CAAhB;AAEA,WAASF,SAAS,GAAG,CAAZ,IAAiBC,OAAO,GAAG,CAA7B,IAAsCA,OAAO,GAAG,CAAV,IAAeD,SAAS,GAAG,CAAxE;AAEA,GAxJ8B;AA0J/B9F,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B,WAAOA,GAAG,CAACm5B,eAAJ,CAAqB,IAArB,CAAP;AAEA,GA9J8B;AAgK/BH,EAAAA,gBAAgB,EAAE,UAAWC,MAAX,EAAoB;AAErC,WAAOA,MAAM,CAACE,eAAP,CAAwB,IAAxB,CAAP;AAEA,GApK8B;AAsK/B6F,EAAAA,aAAa,EAAE,UAAW15C,MAAX,EAAoB;AAElC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACiwB,IAAP,CAAa,KAAKuT,MAAlB,EAA2B/S,cAA3B,CAA2C,CAAE,KAAKsjB,QAAlD,CAAP;AAEA,GAjL8B;AAmL/BpZ,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAmB+jB,oBAAnB,EAA0C;AAEvD,UAAMhO,YAAY,GAAGgO,oBAAoB,IAAIjB,aAAa,CAACriB,eAAd,CAA+BT,MAA/B,CAA7C;;AAEA,UAAMgkB,cAAc,GAAG,KAAKF,aAAL,CAAoBlB,QAApB,EAA+B7d,YAA/B,CAA6C/E,MAA7C,CAAvB;AAEA,UAAM4N,MAAM,GAAG,KAAKA,MAAL,CAAY5S,YAAZ,CAA0B+a,YAA1B,EAAyCla,SAAzC,EAAf;AAEA,SAAKsiB,QAAL,GAAgB,CAAE6F,cAAc,CAACxoB,GAAf,CAAoBoS,MAApB,CAAlB;AAEA,WAAO,IAAP;AAEA,GA/L8B;AAiM/BrM,EAAAA,SAAS,EAAE,UAAWxsB,MAAX,EAAoB;AAE9B,SAAKopC,QAAL,IAAiBppC,MAAM,CAACymB,GAAP,CAAY,KAAKoS,MAAjB,CAAjB;AAEA,WAAO,IAAP;AAEA,GAvM8B;AAyM/BlR,EAAAA,MAAM,EAAE,UAAWwhB,KAAX,EAAmB;AAE1B,WAAOA,KAAK,CAACtQ,MAAN,CAAalR,MAAb,CAAqB,KAAKkR,MAA1B,KAAwCsQ,KAAK,CAACC,QAAN,KAAmB,KAAKA,QAAvE;AAEA;AA7M8B,CAAhC;AAiNA;;;;;AAKA,MAAM8F,KAAK,GAAG,IAAIzY,OAAJ,EAAd;;AACA,MAAM0Y,KAAK,GAAG,IAAI1Y,OAAJ,EAAd;;AACA,MAAM2Y,KAAK,GAAG,IAAI3Y,OAAJ,EAAd;;AACA,MAAM4Y,GAAG,GAAG,IAAI5Y,OAAJ,EAAZ;;AAEA,MAAM6Y,IAAI,GAAG,IAAI7Y,OAAJ,EAAb;;AACA,MAAM8Y,IAAI,GAAG,IAAI9Y,OAAJ,EAAb;;AACA,MAAM+Y,IAAI,GAAG,IAAI/Y,OAAJ,EAAb;;AACA,MAAMgZ,IAAI,GAAG,IAAIhZ,OAAJ,EAAb;;AACA,MAAMiZ,IAAI,GAAG,IAAIjZ,OAAJ,EAAb;;AACA,MAAMkZ,IAAI,GAAG,IAAIlZ,OAAJ,EAAb;;AAEA,SAASmZ,QAAT,CAAmBt7C,CAAnB,EAAsBD,CAAtB,EAAyB0E,CAAzB,EAA6B;AAE5B,OAAKzE,CAAL,GAAWA,CAAC,KAAK2C,SAAR,GAAsB3C,CAAtB,GAA0B,IAAImiC,OAAJ,EAAnC;AACA,OAAKpiC,CAAL,GAAWA,CAAC,KAAK4C,SAAR,GAAsB5C,CAAtB,GAA0B,IAAIoiC,OAAJ,EAAnC;AACA,OAAK19B,CAAL,GAAWA,CAAC,KAAK9B,SAAR,GAAsB8B,CAAtB,GAA0B,IAAI09B,OAAJ,EAAnC;AAEA;;AAED7gC,MAAM,CAACme,MAAP,CAAe67B,QAAf,EAAyB;AAExBC,EAAAA,SAAS,EAAE,UAAWv7C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAoB1D,MAApB,EAA6B;AAEvC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAEDphC,IAAAA,MAAM,CAACswB,UAAP,CAAmB5sB,CAAnB,EAAsB1E,CAAtB;;AACA66C,IAAAA,KAAK,CAACvpB,UAAN,CAAkBrxB,CAAlB,EAAqBD,CAArB;;AACAgB,IAAAA,MAAM,CAACqxB,KAAP,CAAcwoB,KAAd;AAEA,UAAMY,cAAc,GAAGz6C,MAAM,CAACsxB,QAAP,EAAvB;;AACA,QAAKmpB,cAAc,GAAG,CAAtB,EAA0B;AAEzB,aAAOz6C,MAAM,CAACywB,cAAP,CAAuB,IAAI5xB,IAAI,CAAC0yB,IAAL,CAAWkpB,cAAX,CAA3B,CAAP;AAEA;;AAED,WAAOz6C,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,CAAP;AAEA,GAxBuB;AA0BxB;AACA;AACAqrB,EAAAA,YAAY,EAAE,UAAW1H,KAAX,EAAkB/zC,CAAlB,EAAqBD,CAArB,EAAwB0E,CAAxB,EAA2B1D,MAA3B,EAAoC;AAEjD65C,IAAAA,KAAK,CAACvpB,UAAN,CAAkB5sB,CAAlB,EAAqBzE,CAArB;;AACA66C,IAAAA,KAAK,CAACxpB,UAAN,CAAkBtxB,CAAlB,EAAqBC,CAArB;;AACA86C,IAAAA,KAAK,CAACzpB,UAAN,CAAkB0iB,KAAlB,EAAyB/zC,CAAzB;;AAEA,UAAM07C,KAAK,GAAGd,KAAK,CAACzoB,GAAN,CAAWyoB,KAAX,CAAd;;AACA,UAAMe,KAAK,GAAGf,KAAK,CAACzoB,GAAN,CAAW0oB,KAAX,CAAd;;AACA,UAAMe,KAAK,GAAGhB,KAAK,CAACzoB,GAAN,CAAW2oB,KAAX,CAAd;;AACA,UAAMe,KAAK,GAAGhB,KAAK,CAAC1oB,GAAN,CAAW0oB,KAAX,CAAd;;AACA,UAAMiB,KAAK,GAAGjB,KAAK,CAAC1oB,GAAN,CAAW2oB,KAAX,CAAd;;AAEA,UAAMiB,KAAK,GAAKL,KAAK,GAAGG,KAAR,GAAgBF,KAAK,GAAGA,KAAxC;;AAEA,QAAK56C,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA,KAnBgD,CAqBjD;;;AACA,QAAK4Z,KAAK,KAAK,CAAf,EAAmB;AAElB;AACA;AACA,aAAOh7C,MAAM,CAACqvB,GAAP,CAAY,CAAE,CAAd,EAAiB,CAAE,CAAnB,EAAsB,CAAE,CAAxB,CAAP;AAEA;;AAED,UAAM4rB,QAAQ,GAAG,IAAID,KAArB;AACA,UAAME,CAAC,GAAG,CAAEJ,KAAK,GAAGD,KAAR,GAAgBD,KAAK,GAAGG,KAA1B,IAAoCE,QAA9C;AACA,UAAM57C,CAAC,GAAG,CAAEs7C,KAAK,GAAGI,KAAR,GAAgBH,KAAK,GAAGC,KAA1B,IAAoCI,QAA9C,CAhCiD,CAkCjD;;AACA,WAAOj7C,MAAM,CAACqvB,GAAP,CAAY,IAAI6rB,CAAJ,GAAQ77C,CAApB,EAAuBA,CAAvB,EAA0B67C,CAA1B,CAAP;AAEA,GAjEuB;AAmExB5H,EAAAA,aAAa,EAAE,UAAWN,KAAX,EAAkB/zC,CAAlB,EAAqBD,CAArB,EAAwB0E,CAAxB,EAA4B;AAE1C62C,IAAAA,QAAQ,CAACG,YAAT,CAAuB1H,KAAvB,EAA8B/zC,CAA9B,EAAiCD,CAAjC,EAAoC0E,CAApC,EAAuCs2C,GAAvC;AAEA,WAASA,GAAG,CAAC9xC,CAAJ,IAAS,CAAX,IAAoB8xC,GAAG,CAAC5xC,CAAJ,IAAS,CAA7B,IAAwC4xC,GAAG,CAAC9xC,CAAJ,GAAQ8xC,GAAG,CAAC5xC,CAAd,IAAqB,CAAlE;AAEA,GAzEuB;AA2ExB+yC,EAAAA,KAAK,EAAE,UAAWnI,KAAX,EAAkB4B,EAAlB,EAAsBC,EAAtB,EAA0BuG,EAA1B,EAA8BC,GAA9B,EAAmCC,GAAnC,EAAwCC,GAAxC,EAA6Cv7C,MAA7C,EAAsD;AAE5D,SAAK06C,YAAL,CAAmB1H,KAAnB,EAA0B4B,EAA1B,EAA8BC,EAA9B,EAAkCuG,EAAlC,EAAsCpB,GAAtC;AAEAh6C,IAAAA,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf;AACArvB,IAAAA,MAAM,CAACowB,eAAP,CAAwBirB,GAAxB,EAA6BrB,GAAG,CAAC9xC,CAAjC;AACAlI,IAAAA,MAAM,CAACowB,eAAP,CAAwBkrB,GAAxB,EAA6BtB,GAAG,CAAC5xC,CAAjC;AACApI,IAAAA,MAAM,CAACowB,eAAP,CAAwBmrB,GAAxB,EAA6BvB,GAAG,CAACzf,CAAjC;AAEA,WAAOv6B,MAAP;AAEA,GAtFuB;AAwFxBw7C,EAAAA,aAAa,EAAE,UAAWv8C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAoBoyC,SAApB,EAAgC;AAE9C+D,IAAAA,KAAK,CAACvpB,UAAN,CAAkB5sB,CAAlB,EAAqB1E,CAArB;;AACA86C,IAAAA,KAAK,CAACxpB,UAAN,CAAkBrxB,CAAlB,EAAqBD,CAArB,EAH8C,CAK9C;;;AACA,WAAS66C,KAAK,CAACxoB,KAAN,CAAayoB,KAAb,EAAqB1oB,GAArB,CAA0B0kB,SAA1B,IAAwC,CAA1C,GAAgD,IAAhD,GAAuD,KAA9D;AAEA;AAhGuB,CAAzB;AAoGAv1C,MAAM,CAACme,MAAP,CAAe67B,QAAQ,CAAC56C,SAAxB,EAAmC;AAElC0vB,EAAAA,GAAG,EAAE,UAAWpwB,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAqB;AAEzB,SAAKzE,CAAL,CAAOgxB,IAAP,CAAahxB,CAAb;AACA,SAAKD,CAAL,CAAOixB,IAAP,CAAajxB,CAAb;AACA,SAAK0E,CAAL,CAAOusB,IAAP,CAAavsB,CAAb;AAEA,WAAO,IAAP;AAEA,GAViC;AAYlC+3C,EAAAA,uBAAuB,EAAE,UAAWrJ,MAAX,EAAmBsJ,EAAnB,EAAuBjtC,EAAvB,EAA2BC,EAA3B,EAAgC;AAExD,SAAKzP,CAAL,CAAOgxB,IAAP,CAAamiB,MAAM,CAAEsJ,EAAF,CAAnB;AACA,SAAK18C,CAAL,CAAOixB,IAAP,CAAamiB,MAAM,CAAE3jC,EAAF,CAAnB;AACA,SAAK/K,CAAL,CAAOusB,IAAP,CAAamiB,MAAM,CAAE1jC,EAAF,CAAnB;AAEA,WAAO,IAAP;AAEA,GApBiC;AAsBlCshB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GA1BiC;AA4BlCA,EAAAA,IAAI,EAAE,UAAWgkB,QAAX,EAAsB;AAE3B,SAAKh1C,CAAL,CAAOgxB,IAAP,CAAagkB,QAAQ,CAACh1C,CAAtB;AACA,SAAKD,CAAL,CAAOixB,IAAP,CAAagkB,QAAQ,CAACj1C,CAAtB;AACA,SAAK0E,CAAL,CAAOusB,IAAP,CAAagkB,QAAQ,CAACvwC,CAAtB;AAEA,WAAO,IAAP;AAEA,GApCiC;AAsClCi4C,EAAAA,OAAO,EAAE,YAAY;AAEpB9B,IAAAA,KAAK,CAACvpB,UAAN,CAAkB,KAAK5sB,CAAvB,EAA0B,KAAK1E,CAA/B;;AACA86C,IAAAA,KAAK,CAACxpB,UAAN,CAAkB,KAAKrxB,CAAvB,EAA0B,KAAKD,CAA/B;;AAEA,WAAO66C,KAAK,CAACxoB,KAAN,CAAayoB,KAAb,EAAqBt6C,MAArB,KAAgC,GAAvC;AAEA,GA7CiC;AA+ClCo8C,EAAAA,WAAW,EAAE,UAAW57C,MAAX,EAAoB;AAEhC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,uDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACkwB,UAAP,CAAmB,KAAKjxB,CAAxB,EAA2B,KAAKD,CAAhC,EAAoCwZ,GAApC,CAAyC,KAAK9U,CAA9C,EAAkD+sB,cAAlD,CAAkE,IAAI,CAAtE,CAAP;AAEA,GA1DiC;AA4DlC+pB,EAAAA,SAAS,EAAE,UAAWx6C,MAAX,EAAoB;AAE9B,WAAOu6C,QAAQ,CAACC,SAAT,CAAoB,KAAKv7C,CAAzB,EAA4B,KAAKD,CAAjC,EAAoC,KAAK0E,CAAzC,EAA4C1D,MAA5C,CAAP;AAEA,GAhEiC;AAkElC67C,EAAAA,QAAQ,EAAE,UAAW77C,MAAX,EAAoB;AAE7B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAI24C,KAAJ,EAAT;AAEA;;AAED,WAAO34C,MAAM,CAAC+4C,qBAAP,CAA8B,KAAK95C,CAAnC,EAAsC,KAAKD,CAA3C,EAA8C,KAAK0E,CAAnD,CAAP;AAEA,GA7EiC;AA+ElCg3C,EAAAA,YAAY,EAAE,UAAW1H,KAAX,EAAkBhzC,MAAlB,EAA2B;AAExC,WAAOu6C,QAAQ,CAACG,YAAT,CAAuB1H,KAAvB,EAA8B,KAAK/zC,CAAnC,EAAsC,KAAKD,CAA3C,EAA8C,KAAK0E,CAAnD,EAAsD1D,MAAtD,CAAP;AAEA,GAnFiC;AAqFlCm7C,EAAAA,KAAK,EAAE,UAAWnI,KAAX,EAAkBqI,GAAlB,EAAuBC,GAAvB,EAA4BC,GAA5B,EAAiCv7C,MAAjC,EAA0C;AAEhD,WAAOu6C,QAAQ,CAACY,KAAT,CAAgBnI,KAAhB,EAAuB,KAAK/zC,CAA5B,EAA+B,KAAKD,CAApC,EAAuC,KAAK0E,CAA5C,EAA+C23C,GAA/C,EAAoDC,GAApD,EAAyDC,GAAzD,EAA8Dv7C,MAA9D,CAAP;AAEA,GAzFiC;AA2FlCszC,EAAAA,aAAa,EAAE,UAAWN,KAAX,EAAmB;AAEjC,WAAOuH,QAAQ,CAACjH,aAAT,CAAwBN,KAAxB,EAA+B,KAAK/zC,CAApC,EAAuC,KAAKD,CAA5C,EAA+C,KAAK0E,CAApD,CAAP;AAEA,GA/FiC;AAiGlC83C,EAAAA,aAAa,EAAE,UAAW1F,SAAX,EAAuB;AAErC,WAAOyE,QAAQ,CAACiB,aAAT,CAAwB,KAAKv8C,CAA7B,EAAgC,KAAKD,CAArC,EAAwC,KAAK0E,CAA7C,EAAgDoyC,SAAhD,CAAP;AAEA,GArGiC;AAuGlCrC,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B,WAAOA,GAAG,CAACs5B,kBAAJ,CAAwB,IAAxB,CAAP;AAEA,GA3GiC;AA6GlCkC,EAAAA,mBAAmB,EAAE,UAAW3yC,CAAX,EAAcvD,MAAd,EAAuB;AAE3C,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,+DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,UAAMniC,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBD,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8B0E,CAAC,GAAG,KAAKA,CAAvC;AACA,QAAIrE,CAAJ,EAAOse,CAAP,CAV2C,CAY3C;AACA;AACA;AACA;AACA;;AAEAs8B,IAAAA,IAAI,CAAC3pB,UAAL,CAAiBtxB,CAAjB,EAAoBC,CAApB;;AACAi7C,IAAAA,IAAI,CAAC5pB,UAAL,CAAiB5sB,CAAjB,EAAoBzE,CAApB;;AACAm7C,IAAAA,IAAI,CAAC9pB,UAAL,CAAiB/sB,CAAjB,EAAoBtE,CAApB;;AACA,UAAMwtB,EAAE,GAAGwtB,IAAI,CAAC7oB,GAAL,CAAUgpB,IAAV,CAAX;;AACA,UAAM1tB,EAAE,GAAGwtB,IAAI,CAAC9oB,GAAL,CAAUgpB,IAAV,CAAX;;AACA,QAAK3tB,EAAE,IAAI,CAAN,IAAWC,EAAE,IAAI,CAAtB,EAA0B;AAEzB;AACA,aAAO1sB,MAAM,CAACiwB,IAAP,CAAahxB,CAAb,CAAP;AAEA;;AAEDo7C,IAAAA,IAAI,CAAC/pB,UAAL,CAAiB/sB,CAAjB,EAAoBvE,CAApB;;AACA,UAAM2tB,EAAE,GAAGstB,IAAI,CAAC7oB,GAAL,CAAUipB,IAAV,CAAX;;AACA,UAAMyB,EAAE,GAAG5B,IAAI,CAAC9oB,GAAL,CAAUipB,IAAV,CAAX;;AACA,QAAK1tB,EAAE,IAAI,CAAN,IAAWmvB,EAAE,IAAInvB,EAAtB,EAA2B;AAE1B;AACA,aAAO3sB,MAAM,CAACiwB,IAAP,CAAajxB,CAAb,CAAP;AAEA;;AAED,UAAM+8C,EAAE,GAAGtvB,EAAE,GAAGqvB,EAAL,GAAUnvB,EAAE,GAAGD,EAA1B;;AACA,QAAKqvB,EAAE,IAAI,CAAN,IAAWtvB,EAAE,IAAI,CAAjB,IAAsBE,EAAE,IAAI,CAAjC,EAAqC;AAEpCttB,MAAAA,CAAC,GAAGotB,EAAE,IAAKA,EAAE,GAAGE,EAAV,CAAN,CAFoC,CAGpC;;AACA,aAAO3sB,MAAM,CAACiwB,IAAP,CAAahxB,CAAb,EAAiBmxB,eAAjB,CAAkC6pB,IAAlC,EAAwC56C,CAAxC,CAAP;AAEA;;AAEDi7C,IAAAA,IAAI,CAAChqB,UAAL,CAAiB/sB,CAAjB,EAAoBG,CAApB;;AACA,UAAMs4C,EAAE,GAAG/B,IAAI,CAAC7oB,GAAL,CAAUkpB,IAAV,CAAX;;AACA,UAAM2B,EAAE,GAAG/B,IAAI,CAAC9oB,GAAL,CAAUkpB,IAAV,CAAX;;AACA,QAAK2B,EAAE,IAAI,CAAN,IAAWD,EAAE,IAAIC,EAAtB,EAA2B;AAE1B;AACA,aAAOj8C,MAAM,CAACiwB,IAAP,CAAavsB,CAAb,CAAP;AAEA;;AAED,UAAMw4C,EAAE,GAAGF,EAAE,GAAGtvB,EAAL,GAAUD,EAAE,GAAGwvB,EAA1B;;AACA,QAAKC,EAAE,IAAI,CAAN,IAAWxvB,EAAE,IAAI,CAAjB,IAAsBuvB,EAAE,IAAI,CAAjC,EAAqC;AAEpCt+B,MAAAA,CAAC,GAAG+O,EAAE,IAAKA,EAAE,GAAGuvB,EAAV,CAAN,CAFoC,CAGpC;;AACA,aAAOj8C,MAAM,CAACiwB,IAAP,CAAahxB,CAAb,EAAiBmxB,eAAjB,CAAkC8pB,IAAlC,EAAwCv8B,CAAxC,CAAP;AAEA;;AAED,UAAMw+B,EAAE,GAAGxvB,EAAE,GAAGsvB,EAAL,GAAUD,EAAE,GAAGF,EAA1B;;AACA,QAAKK,EAAE,IAAI,CAAN,IAAaL,EAAE,GAAGnvB,EAAP,IAAe,CAA1B,IAAiCqvB,EAAE,GAAGC,EAAP,IAAe,CAAnD,EAAuD;AAEtD9B,MAAAA,IAAI,CAAC7pB,UAAL,CAAiB5sB,CAAjB,EAAoB1E,CAApB;;AACA2e,MAAAA,CAAC,GAAG,CAAEm+B,EAAE,GAAGnvB,EAAP,KAAkBmvB,EAAE,GAAGnvB,EAAP,IAAgBqvB,EAAE,GAAGC,EAArB,CAAhB,CAAJ,CAHsD,CAItD;;AACA,aAAOj8C,MAAM,CAACiwB,IAAP,CAAajxB,CAAb,EAAiBoxB,eAAjB,CAAkC+pB,IAAlC,EAAwCx8B,CAAxC,CAAP,CALsD,CAKF;AAEpD,KA5E0C,CA8E3C;;;AACA,UAAMq9B,KAAK,GAAG,KAAMmB,EAAE,GAAGD,EAAL,GAAUH,EAAhB,CAAd,CA/E2C,CAgF3C;;AACA18C,IAAAA,CAAC,GAAG68C,EAAE,GAAGlB,KAAT;AACAr9B,IAAAA,CAAC,GAAGo+B,EAAE,GAAGf,KAAT;AAEA,WAAOh7C,MAAM,CAACiwB,IAAP,CAAahxB,CAAb,EAAiBmxB,eAAjB,CAAkC6pB,IAAlC,EAAwC56C,CAAxC,EAA4C+wB,eAA5C,CAA6D8pB,IAA7D,EAAmEv8B,CAAnE,CAAP;AAEA,GAnMiC;AAqMlC2U,EAAAA,MAAM,EAAE,UAAW2hB,QAAX,EAAsB;AAE7B,WAAOA,QAAQ,CAACh1C,CAAT,CAAWqzB,MAAX,CAAmB,KAAKrzB,CAAxB,KAA+Bg1C,QAAQ,CAACj1C,CAAT,CAAWszB,MAAX,CAAmB,KAAKtzB,CAAxB,CAA/B,IAA8Di1C,QAAQ,CAACvwC,CAAT,CAAW4uB,MAAX,CAAmB,KAAK5uB,CAAxB,CAArE;AAEA;AAzMiC,CAAnC;AA6MA;;;;AAIA,MAAM04C,cAAc,GAAG;AAAE,eAAa,QAAf;AAAyB,kBAAgB,QAAzC;AAAmD,UAAQ,QAA3D;AAAqE,gBAAc,QAAnF;AAA6F,WAAS,QAAtG;AACtB,WAAS,QADa;AACH,YAAU,QADP;AACiB,WAAS,QAD1B;AACoC,oBAAkB,QADtD;AACgE,UAAQ,QADxE;AACkF,gBAAc,QADhG;AAEtB,WAAS,QAFa;AAEH,eAAa,QAFV;AAEoB,eAAa,QAFjC;AAE2C,gBAAc,QAFzD;AAEmE,eAAa,QAFhF;AAE0F,WAAS,QAFnG;AAGtB,oBAAkB,QAHI;AAGM,cAAY,QAHlB;AAG4B,aAAW,QAHvC;AAGiD,UAAQ,QAHzD;AAGmE,cAAY,QAH/E;AAGyF,cAAY,QAHrG;AAItB,mBAAiB,QAJK;AAIK,cAAY,QAJjB;AAI2B,eAAa,QAJxC;AAIkD,cAAY,QAJ9D;AAIwE,eAAa,QAJrF;AAI+F,iBAAe,QAJ9G;AAKtB,oBAAkB,QALI;AAKM,gBAAc,QALpB;AAK8B,gBAAc,QAL5C;AAKsD,aAAW,QALjE;AAK2E,gBAAc,QALzF;AAKmG,kBAAgB,QALnH;AAMtB,mBAAiB,QANK;AAMK,mBAAiB,QANtB;AAMgC,mBAAiB,QANjD;AAM2D,mBAAiB,QAN5E;AAMsF,gBAAc,QANpG;AAOtB,cAAY,QAPU;AAOA,iBAAe,QAPf;AAOyB,aAAW,QAPpC;AAO8C,aAAW,QAPzD;AAOmE,gBAAc,QAPjF;AAO2F,eAAa,QAPxG;AAQtB,iBAAe,QARO;AAQG,iBAAe,QARlB;AAQ4B,aAAW,QARvC;AAQiD,eAAa,QAR9D;AAQwE,gBAAc,QARtF;AAQgG,UAAQ,QARxG;AAStB,eAAa,QATS;AASC,UAAQ,QATT;AASmB,WAAS,QAT5B;AASsC,iBAAe,QATrD;AAS+D,UAAQ,QATvE;AASiF,cAAY,QAT7F;AASuG,aAAW,QATlH;AAUtB,eAAa,QAVS;AAUC,YAAU,QAVX;AAUqB,WAAS,QAV9B;AAUwC,WAAS,QAVjD;AAU2D,cAAY,QAVvE;AAUiF,mBAAiB,QAVlG;AAU4G,eAAa,QAVzH;AAWtB,kBAAgB,QAXM;AAWI,eAAa,QAXjB;AAW2B,gBAAc,QAXzC;AAWmD,eAAa,QAXhE;AAW0E,0BAAwB,QAXlG;AAW4G,eAAa,QAXzH;AAYtB,gBAAc,QAZQ;AAYE,eAAa,QAZf;AAYyB,eAAa,QAZtC;AAYgD,iBAAe,QAZ/D;AAYyE,mBAAiB,QAZ1F;AAYoG,kBAAgB,QAZpH;AAatB,oBAAkB,QAbI;AAaM,oBAAkB,QAbxB;AAakC,oBAAkB,QAbpD;AAa8D,iBAAe,QAb7E;AAauF,UAAQ,QAb/F;AAayG,eAAa,QAbtH;AActB,WAAS,QAda;AAcH,aAAW,QAdR;AAckB,YAAU,QAd5B;AAcsC,sBAAoB,QAd1D;AAcoE,gBAAc,QAdlF;AAc4F,kBAAgB,QAd5G;AAetB,kBAAgB,QAfM;AAeI,oBAAkB,QAftB;AAegC,qBAAmB,QAfnD;AAe6D,uBAAqB,QAflF;AAe4F,qBAAmB,QAf/G;AAgBtB,qBAAmB,QAhBG;AAgBO,kBAAgB,QAhBvB;AAgBiC,eAAa,QAhB9C;AAgBwD,eAAa,QAhBrE;AAgB+E,cAAY,QAhB3F;AAgBqG,iBAAe,QAhBpH;AAiBtB,UAAQ,QAjBc;AAiBJ,aAAW,QAjBP;AAiBiB,WAAS,QAjB1B;AAiBoC,eAAa,QAjBjD;AAiB2D,YAAU,QAjBrE;AAiB+E,eAAa,QAjB5F;AAiBsG,YAAU,QAjBhH;AAkBtB,mBAAiB,QAlBK;AAkBK,eAAa,QAlBlB;AAkB4B,mBAAiB,QAlB7C;AAkBuD,mBAAiB,QAlBxE;AAkBkF,gBAAc,QAlBhG;AAkB0G,eAAa,QAlBvH;AAmBtB,UAAQ,QAnBc;AAmBJ,UAAQ,QAnBJ;AAmBc,UAAQ,QAnBtB;AAmBgC,gBAAc,QAnB9C;AAmBwD,YAAU,QAnBlE;AAmB4E,mBAAiB,QAnB7F;AAmBuG,SAAO,QAnB9G;AAmBwH,eAAa,QAnBrI;AAoBtB,eAAa,QApBS;AAoBC,iBAAe,QApBhB;AAoB0B,YAAU,QApBpC;AAoB8C,gBAAc,QApB5D;AAoBsE,cAAY,QApBlF;AAoB4F,cAAY,QApBxG;AAqBtB,YAAU,QArBY;AAqBF,YAAU,QArBR;AAqBkB,aAAW,QArB7B;AAqBuC,eAAa,QArBpD;AAqB8D,eAAa,QArB3E;AAqBqF,eAAa,QArBlG;AAqB4G,UAAQ,QArBpH;AAsBtB,iBAAe,QAtBO;AAsBG,eAAa,QAtBhB;AAsB0B,SAAO,QAtBjC;AAsB2C,UAAQ,QAtBnD;AAsB6D,aAAW,QAtBxE;AAsBkF,YAAU,QAtB5F;AAsBsG,eAAa,QAtBnH;AAuBtB,YAAU,QAvBY;AAuBF,WAAS,QAvBP;AAuBiB,WAAS,QAvB1B;AAuBoC,gBAAc,QAvBlD;AAuB4D,YAAU,QAvBtE;AAuBgF,iBAAe;AAvB/F,CAAvB;AAyBA,MAAMC,KAAK,GAAG;AAAEn9C,EAAAA,CAAC,EAAE,CAAL;AAAQC,EAAAA,CAAC,EAAE,CAAX;AAAc8B,EAAAA,CAAC,EAAE;AAAjB,CAAd;AACA,MAAMq7C,KAAK,GAAG;AAAEp9C,EAAAA,CAAC,EAAE,CAAL;AAAQC,EAAAA,CAAC,EAAE,CAAX;AAAc8B,EAAAA,CAAC,EAAE;AAAjB,CAAd;;AAEA,SAASiD,KAAT,CAAgBtF,CAAhB,EAAmBG,CAAnB,EAAsBC,CAAtB,EAA0B;AAEzB,MAAKD,CAAC,KAAK6C,SAAN,IAAmB5C,CAAC,KAAK4C,SAA9B,EAA0C;AAEzC;AACA,WAAO,KAAKytB,GAAL,CAAUzwB,CAAV,CAAP;AAEA;;AAED,SAAO,KAAK29C,MAAL,CAAa39C,CAAb,EAAgBG,CAAhB,EAAmBC,CAAnB,CAAP;AAEA;;AAED,SAASw9C,OAAT,CAAkBj5C,CAAlB,EAAqBC,CAArB,EAAwBC,CAAxB,EAA4B;AAE3B,MAAKA,CAAC,GAAG,CAAT,EAAaA,CAAC,IAAI,CAAL;AACb,MAAKA,CAAC,GAAG,CAAT,EAAaA,CAAC,IAAI,CAAL;AACb,MAAKA,CAAC,GAAG,IAAI,CAAb,EAAiB,OAAOF,CAAC,GAAG,CAAEC,CAAC,GAAGD,CAAN,IAAY,CAAZ,GAAgBE,CAA3B;AACjB,MAAKA,CAAC,GAAG,IAAI,CAAb,EAAiB,OAAOD,CAAP;AACjB,MAAKC,CAAC,GAAG,IAAI,CAAb,EAAiB,OAAOF,CAAC,GAAG,CAAEC,CAAC,GAAGD,CAAN,IAAY,CAAZ,IAAkB,IAAI,CAAJ,GAAQE,CAA1B,CAAX;AACjB,SAAOF,CAAP;AAEA;;AAED,SAASk5C,YAAT,CAAuB/4C,CAAvB,EAA2B;AAE1B,SAASA,CAAC,GAAG,OAAN,GAAkBA,CAAC,GAAG,YAAtB,GAAqC7E,IAAI,CAACsO,GAAL,CAAUzJ,CAAC,GAAG,YAAJ,GAAmB,YAA7B,EAA2C,GAA3C,CAA5C;AAEA;;AAED,SAASg5C,YAAT,CAAuBh5C,CAAvB,EAA2B;AAE1B,SAASA,CAAC,GAAG,SAAN,GAAoBA,CAAC,GAAG,KAAxB,GAAgC,QAAU7E,IAAI,CAACsO,GAAL,CAAUzJ,CAAV,EAAa,OAAb,CAAV,GAAqC,KAA5E;AAEA;;AAEDnD,MAAM,CAACme,MAAP,CAAexa,KAAK,CAACvE,SAArB,EAAgC;AAE/Bg9C,EAAAA,OAAO,EAAE,IAFsB;AAI/B/9C,EAAAA,CAAC,EAAE,CAJ4B;AAIzBG,EAAAA,CAAC,EAAE,CAJsB;AAInBC,EAAAA,CAAC,EAAE,CAJgB;AAM/BqwB,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,QAAKA,KAAK,IAAIA,KAAK,CAAC04C,OAApB,EAA8B;AAE7B,WAAK1sB,IAAL,CAAWhsB,KAAX;AAEA,KAJD,MAIO,IAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;AAEvC,WAAK24C,MAAL,CAAa34C,KAAb;AAEA,KAJM,MAIA,IAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;AAEvC,WAAK44C,QAAL,CAAe54C,KAAf;AAEA;;AAED,WAAO,IAAP;AAEA,GAxB8B;AA0B/ByrB,EAAAA,SAAS,EAAE,UAAWC,MAAX,EAAoB;AAE9B,SAAK/wB,CAAL,GAAS+wB,MAAT;AACA,SAAK5wB,CAAL,GAAS4wB,MAAT;AACA,SAAK3wB,CAAL,GAAS2wB,MAAT;AAEA,WAAO,IAAP;AAEA,GAlC8B;AAoC/BitB,EAAAA,MAAM,EAAE,UAAWr9C,GAAX,EAAiB;AAExBA,IAAAA,GAAG,GAAGV,IAAI,CAACwE,KAAL,CAAY9D,GAAZ,CAAN;AAEA,SAAKX,CAAL,GAAS,CAAEW,GAAG,IAAI,EAAP,GAAY,GAAd,IAAsB,GAA/B;AACA,SAAKR,CAAL,GAAS,CAAEQ,GAAG,IAAI,CAAP,GAAW,GAAb,IAAqB,GAA9B;AACA,SAAKP,CAAL,GAAS,CAAEO,GAAG,GAAG,GAAR,IAAgB,GAAzB;AAEA,WAAO,IAAP;AAEA,GA9C8B;AAgD/Bg9C,EAAAA,MAAM,EAAE,UAAW39C,CAAX,EAAcG,CAAd,EAAiBC,CAAjB,EAAqB;AAE5B,SAAKJ,CAAL,GAASA,CAAT;AACA,SAAKG,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAxD8B;AA0D/B89C,EAAAA,MAAM,EAAE,UAAW59C,CAAX,EAAcC,CAAd,EAAiB8B,CAAjB,EAAqB;AAE5B;AACA/B,IAAAA,CAAC,GAAGgtB,SAAS,CAACa,eAAV,CAA2B7tB,CAA3B,EAA8B,CAA9B,CAAJ;AACAC,IAAAA,CAAC,GAAG+sB,SAAS,CAACY,KAAV,CAAiB3tB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAJ;AACA8B,IAAAA,CAAC,GAAGirB,SAAS,CAACY,KAAV,CAAiB7rB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAJ;;AAEA,QAAK9B,CAAC,KAAK,CAAX,EAAe;AAEd,WAAKP,CAAL,GAAS,KAAKG,CAAL,GAAS,KAAKC,CAAL,GAASiC,CAA3B;AAEA,KAJD,MAIO;AAEN,YAAMsC,CAAC,GAAGtC,CAAC,IAAI,GAAL,GAAWA,CAAC,IAAK,IAAI9B,CAAT,CAAZ,GAA2B8B,CAAC,GAAG9B,CAAJ,GAAU8B,CAAC,GAAG9B,CAAnD;AACA,YAAMqE,CAAC,GAAK,IAAIvC,CAAN,GAAYsC,CAAtB;AAEA,WAAK3E,CAAL,GAAS49C,OAAO,CAAEh5C,CAAF,EAAKD,CAAL,EAAQrE,CAAC,GAAG,IAAI,CAAhB,CAAhB;AACA,WAAKH,CAAL,GAASy9C,OAAO,CAAEh5C,CAAF,EAAKD,CAAL,EAAQrE,CAAR,CAAhB;AACA,WAAKF,CAAL,GAASw9C,OAAO,CAAEh5C,CAAF,EAAKD,CAAL,EAAQrE,CAAC,GAAG,IAAI,CAAhB,CAAhB;AAEA;;AAED,WAAO,IAAP;AAEA,GAlF8B;AAoF/B29C,EAAAA,QAAQ,EAAE,UAAWj2C,KAAX,EAAmB;AAE5B,aAASm2C,WAAT,CAAsBC,MAAtB,EAA+B;AAE9B,UAAKA,MAAM,KAAKp7C,SAAhB,EAA4B;;AAE5B,UAAKY,UAAU,CAAEw6C,MAAF,CAAV,GAAuB,CAA5B,EAAgC;AAE/B1tB,QAAAA,OAAO,CAACC,IAAR,CAAc,qCAAqC3oB,KAArC,GAA6C,mBAA3D;AAEA;AAED;;AAGD,QAAIqmB,CAAJ;;AAEA,QAAKA,CAAC,GAAG,kCAAkCgwB,IAAlC,CAAwCr2C,KAAxC,CAAT,EAA2D;AAE1D;AAEA,UAAItI,KAAJ;AACA,YAAM6X,IAAI,GAAG8W,CAAC,CAAE,CAAF,CAAd;AACA,YAAMiwB,UAAU,GAAGjwB,CAAC,CAAE,CAAF,CAApB;;AAEA,cAAS9W,IAAT;AAEC,aAAK,KAAL;AACA,aAAK,MAAL;AAEC,cAAK7X,KAAK,GAAG,gEAAgE2+C,IAAhE,CAAsEC,UAAtE,CAAb,EAAkG;AAEjG;AACA,iBAAKt+C,CAAL,GAASC,IAAI,CAAC8E,GAAL,CAAU,GAAV,EAAepB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,iBAAKS,CAAL,GAASF,IAAI,CAAC8E,GAAL,CAAU,GAAV,EAAepB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,iBAAKU,CAAL,GAASH,IAAI,CAAC8E,GAAL,CAAU,GAAV,EAAepB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AAEAy+C,YAAAA,WAAW,CAAEz+C,KAAK,CAAE,CAAF,CAAP,CAAX;AAEA,mBAAO,IAAP;AAEA;;AAED,cAAKA,KAAK,GAAG,sEAAsE2+C,IAAtE,CAA4EC,UAA5E,CAAb,EAAwG;AAEvG;AACA,iBAAKt+C,CAAL,GAASC,IAAI,CAAC8E,GAAL,CAAU,GAAV,EAAepB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,iBAAKS,CAAL,GAASF,IAAI,CAAC8E,GAAL,CAAU,GAAV,EAAepB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AACA,iBAAKU,CAAL,GAASH,IAAI,CAAC8E,GAAL,CAAU,GAAV,EAAepB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAvB,IAA8C,GAAvD;AAEAy+C,YAAAA,WAAW,CAAEz+C,KAAK,CAAE,CAAF,CAAP,CAAX;AAEA,mBAAO,IAAP;AAEA;;AAED;;AAED,aAAK,KAAL;AACA,aAAK,MAAL;AAEC,cAAKA,KAAK,GAAG,gFAAgF2+C,IAAhF,CAAsFC,UAAtF,CAAb,EAAkH;AAEjH;AACA,kBAAMh+C,CAAC,GAAGsD,UAAU,CAAElE,KAAK,CAAE,CAAF,CAAP,CAAV,GAA2B,GAArC;AACA,kBAAMa,CAAC,GAAGoD,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAR,GAA6B,GAAvC;AACA,kBAAM2C,CAAC,GAAGsB,QAAQ,CAAEjE,KAAK,CAAE,CAAF,CAAP,EAAc,EAAd,CAAR,GAA6B,GAAvC;AAEAy+C,YAAAA,WAAW,CAAEz+C,KAAK,CAAE,CAAF,CAAP,CAAX;AAEA,mBAAO,KAAKw+C,MAAL,CAAa59C,CAAb,EAAgBC,CAAhB,EAAmB8B,CAAnB,CAAP;AAEA;;AAED;AAjDF;AAqDA,KA7DD,MA6DO,IAAKgsB,CAAC,GAAG,qBAAqBgwB,IAArB,CAA2Br2C,KAA3B,CAAT,EAA8C;AAEpD;AAEA,YAAMrH,GAAG,GAAG0tB,CAAC,CAAE,CAAF,CAAb;AACA,YAAMwlB,IAAI,GAAGlzC,GAAG,CAACC,MAAjB;;AAEA,UAAKizC,IAAI,KAAK,CAAd,EAAkB;AAEjB;AACA,aAAK7zC,CAAL,GAAS2D,QAAQ,CAAEhD,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,IAAkB59C,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,aAAKp+C,CAAL,GAASwD,QAAQ,CAAEhD,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,IAAkB59C,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,aAAKn+C,CAAL,GAASuD,QAAQ,CAAEhD,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,IAAkB59C,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AAEA,eAAO,IAAP;AAEA,OATD,MASO,IAAK1K,IAAI,KAAK,CAAd,EAAkB;AAExB;AACA,aAAK7zC,CAAL,GAAS2D,QAAQ,CAAEhD,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,IAAkB59C,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,aAAKp+C,CAAL,GAASwD,QAAQ,CAAEhD,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,IAAkB59C,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AACA,aAAKn+C,CAAL,GAASuD,QAAQ,CAAEhD,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,IAAkB59C,GAAG,CAAC49C,MAAJ,CAAY,CAAZ,CAApB,EAAqC,EAArC,CAAR,GAAoD,GAA7D;AAEA,eAAO,IAAP;AAEA;AAED;;AAED,QAAKv2C,KAAK,IAAIA,KAAK,CAACpH,MAAN,GAAe,CAA7B,EAAiC;AAEhC,aAAO,KAAK49C,YAAL,CAAmBx2C,KAAnB,CAAP;AAEA;;AAED,WAAO,IAAP;AAEA,GAvM8B;AAyM/Bw2C,EAAAA,YAAY,EAAE,UAAWx2C,KAAX,EAAmB;AAEhC;AACA,UAAMrH,GAAG,GAAG68C,cAAc,CAAEx1C,KAAF,CAA1B;;AAEA,QAAKrH,GAAG,KAAKqC,SAAb,EAAyB;AAExB;AACA,WAAKg7C,MAAL,CAAar9C,GAAb;AAEA,KALD,MAKO;AAEN;AACA+vB,MAAAA,OAAO,CAACC,IAAR,CAAc,gCAAgC3oB,KAA9C;AAEA;;AAED,WAAO,IAAP;AAEA,GA5N8B;AA8N/BopB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAKnD,CAA3B,EAA8B,KAAKG,CAAnC,EAAsC,KAAKC,CAA3C,CAAP;AAEA,GAlO8B;AAoO/BixB,EAAAA,IAAI,EAAE,UAAW3xB,KAAX,EAAmB;AAExB,SAAKM,CAAL,GAASN,KAAK,CAACM,CAAf;AACA,SAAKG,CAAL,GAAST,KAAK,CAACS,CAAf;AACA,SAAKC,CAAL,GAASV,KAAK,CAACU,CAAf;AAEA,WAAO,IAAP;AAEA,GA5O8B;AA8O/Bq+C,EAAAA,iBAAiB,EAAE,UAAW/+C,KAAX,EAAkBg/C,WAAlB,EAAgC;AAElD,QAAKA,WAAW,KAAK17C,SAArB,EAAiC07C,WAAW,GAAG,GAAd;AAEjC,SAAK1+C,CAAL,GAASC,IAAI,CAACsO,GAAL,CAAU7O,KAAK,CAACM,CAAhB,EAAmB0+C,WAAnB,CAAT;AACA,SAAKv+C,CAAL,GAASF,IAAI,CAACsO,GAAL,CAAU7O,KAAK,CAACS,CAAhB,EAAmBu+C,WAAnB,CAAT;AACA,SAAKt+C,CAAL,GAASH,IAAI,CAACsO,GAAL,CAAU7O,KAAK,CAACU,CAAhB,EAAmBs+C,WAAnB,CAAT;AAEA,WAAO,IAAP;AAEA,GAxP8B;AA0P/BC,EAAAA,iBAAiB,EAAE,UAAWj/C,KAAX,EAAkBg/C,WAAlB,EAAgC;AAElD,QAAKA,WAAW,KAAK17C,SAArB,EAAiC07C,WAAW,GAAG,GAAd;AAEjC,UAAME,WAAW,GAAKF,WAAW,GAAG,CAAhB,GAAwB,MAAMA,WAA9B,GAA8C,GAAlE;AAEA,SAAK1+C,CAAL,GAASC,IAAI,CAACsO,GAAL,CAAU7O,KAAK,CAACM,CAAhB,EAAmB4+C,WAAnB,CAAT;AACA,SAAKz+C,CAAL,GAASF,IAAI,CAACsO,GAAL,CAAU7O,KAAK,CAACS,CAAhB,EAAmBy+C,WAAnB,CAAT;AACA,SAAKx+C,CAAL,GAASH,IAAI,CAACsO,GAAL,CAAU7O,KAAK,CAACU,CAAhB,EAAmBw+C,WAAnB,CAAT;AAEA,WAAO,IAAP;AAEA,GAtQ8B;AAwQ/BC,EAAAA,oBAAoB,EAAE,UAAWH,WAAX,EAAyB;AAE9C,SAAKD,iBAAL,CAAwB,IAAxB,EAA8BC,WAA9B;AAEA,WAAO,IAAP;AAEA,GA9Q8B;AAgR/BI,EAAAA,oBAAoB,EAAE,UAAWJ,WAAX,EAAyB;AAE9C,SAAKC,iBAAL,CAAwB,IAAxB,EAA8BD,WAA9B;AAEA,WAAO,IAAP;AAEA,GAtR8B;AAwR/BK,EAAAA,gBAAgB,EAAE,UAAWr/C,KAAX,EAAmB;AAEpC,SAAKM,CAAL,GAAS69C,YAAY,CAAEn+C,KAAK,CAACM,CAAR,CAArB;AACA,SAAKG,CAAL,GAAS09C,YAAY,CAAEn+C,KAAK,CAACS,CAAR,CAArB;AACA,SAAKC,CAAL,GAASy9C,YAAY,CAAEn+C,KAAK,CAACU,CAAR,CAArB;AAEA,WAAO,IAAP;AAEA,GAhS8B;AAkS/B4+C,EAAAA,gBAAgB,EAAE,UAAWt/C,KAAX,EAAmB;AAEpC,SAAKM,CAAL,GAAS89C,YAAY,CAAEp+C,KAAK,CAACM,CAAR,CAArB;AACA,SAAKG,CAAL,GAAS29C,YAAY,CAAEp+C,KAAK,CAACS,CAAR,CAArB;AACA,SAAKC,CAAL,GAAS09C,YAAY,CAAEp+C,KAAK,CAACU,CAAR,CAArB;AAEA,WAAO,IAAP;AAEA,GA1S8B;AA4S/B6+C,EAAAA,mBAAmB,EAAE,YAAY;AAEhC,SAAKF,gBAAL,CAAuB,IAAvB;AAEA,WAAO,IAAP;AAEA,GAlT8B;AAoT/BG,EAAAA,mBAAmB,EAAE,YAAY;AAEhC,SAAKF,gBAAL,CAAuB,IAAvB;AAEA,WAAO,IAAP;AAEA,GA1T8B;AA4T/BG,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAS,KAAKn/C,CAAL,GAAS,GAAX,IAAoB,EAApB,GAA2B,KAAKG,CAAL,GAAS,GAAX,IAAoB,CAA7C,GAAmD,KAAKC,CAAL,GAAS,GAAX,IAAoB,CAA5E;AAEA,GAhU8B;AAkU/Bg/C,EAAAA,YAAY,EAAE,YAAY;AAEzB,WAAO,CAAE,WAAW,KAAKD,MAAL,GAAcp/C,QAAd,CAAwB,EAAxB,CAAb,EAA4CmB,KAA5C,CAAmD,CAAE,CAArD,CAAP;AAEA,GAtU8B;AAwU/Bm+C,EAAAA,MAAM,EAAE,UAAWj+C,MAAX,EAAoB;AAE3B;AAEA,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAAd;AACAvvB,MAAAA,MAAM,GAAG;AAAEd,QAAAA,CAAC,EAAE,CAAL;AAAQC,QAAAA,CAAC,EAAE,CAAX;AAAc8B,QAAAA,CAAC,EAAE;AAAjB,OAAT;AAEA;;AAED,UAAMrC,CAAC,GAAG,KAAKA,CAAf;AAAA,UAAkBG,CAAC,GAAG,KAAKA,CAA3B;AAAA,UAA8BC,CAAC,GAAG,KAAKA,CAAvC;AAEA,UAAM4E,GAAG,GAAG/E,IAAI,CAAC+E,GAAL,CAAUhF,CAAV,EAAaG,CAAb,EAAgBC,CAAhB,CAAZ;AACA,UAAM2E,GAAG,GAAG9E,IAAI,CAAC8E,GAAL,CAAU/E,CAAV,EAAaG,CAAb,EAAgBC,CAAhB,CAAZ;AAEA,QAAIk/C,GAAJ,EAASC,UAAT;AACA,UAAMC,SAAS,GAAG,CAAEz6C,GAAG,GAAGC,GAAR,IAAgB,GAAlC;;AAEA,QAAKD,GAAG,KAAKC,GAAb,EAAmB;AAElBs6C,MAAAA,GAAG,GAAG,CAAN;AACAC,MAAAA,UAAU,GAAG,CAAb;AAEA,KALD,MAKO;AAEN,YAAMt6C,KAAK,GAAGD,GAAG,GAAGD,GAApB;AAEAw6C,MAAAA,UAAU,GAAGC,SAAS,IAAI,GAAb,GAAmBv6C,KAAK,IAAKD,GAAG,GAAGD,GAAX,CAAxB,GAA2CE,KAAK,IAAK,IAAID,GAAJ,GAAUD,GAAf,CAA7D;;AAEA,cAASC,GAAT;AAEC,aAAKhF,CAAL;AAAQs/C,UAAAA,GAAG,GAAG,CAAEn/C,CAAC,GAAGC,CAAN,IAAY6E,KAAZ,IAAsB9E,CAAC,GAAGC,CAAJ,GAAQ,CAAR,GAAY,CAAlC,CAAN;AAA6C;;AACrD,aAAKD,CAAL;AAAQm/C,UAAAA,GAAG,GAAG,CAAEl/C,CAAC,GAAGJ,CAAN,IAAYiF,KAAZ,GAAoB,CAA1B;AAA6B;;AACrC,aAAK7E,CAAL;AAAQk/C,UAAAA,GAAG,GAAG,CAAEt/C,CAAC,GAAGG,CAAN,IAAY8E,KAAZ,GAAoB,CAA1B;AAA6B;AAJtC;;AAQAq6C,MAAAA,GAAG,IAAI,CAAP;AAEA;;AAEDl+C,IAAAA,MAAM,CAACd,CAAP,GAAWg/C,GAAX;AACAl+C,IAAAA,MAAM,CAACb,CAAP,GAAWg/C,UAAX;AACAn+C,IAAAA,MAAM,CAACiB,CAAP,GAAWm9C,SAAX;AAEA,WAAOp+C,MAAP;AAEA,GAxX8B;AA0X/Bq+C,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,UAAa,KAAKz/C,CAAL,GAAS,GAAX,GAAmB,CAA9B,IAAoC,GAApC,IAA8C,KAAKG,CAAL,GAAS,GAAX,GAAmB,CAA/D,IAAqE,GAArE,IAA+E,KAAKC,CAAL,GAAS,GAAX,GAAmB,CAAhG,IAAsG,GAA7G;AAEA,GA9X8B;AAgY/Bs/C,EAAAA,SAAS,EAAE,UAAWp/C,CAAX,EAAcC,CAAd,EAAiB8B,CAAjB,EAAqB;AAE/B,SAAKg9C,MAAL,CAAa5B,KAAb;AAEAA,IAAAA,KAAK,CAACn9C,CAAN,IAAWA,CAAX;AAAcm9C,IAAAA,KAAK,CAACl9C,CAAN,IAAWA,CAAX;AAAck9C,IAAAA,KAAK,CAACp7C,CAAN,IAAWA,CAAX;AAE5B,SAAK67C,MAAL,CAAaT,KAAK,CAACn9C,CAAnB,EAAsBm9C,KAAK,CAACl9C,CAA5B,EAA+Bk9C,KAAK,CAACp7C,CAArC;AAEA,WAAO,IAAP;AAEA,GA1Y8B;AA4Y/BuX,EAAAA,GAAG,EAAE,UAAWla,KAAX,EAAmB;AAEvB,SAAKM,CAAL,IAAUN,KAAK,CAACM,CAAhB;AACA,SAAKG,CAAL,IAAUT,KAAK,CAACS,CAAhB;AACA,SAAKC,CAAL,IAAUV,KAAK,CAACU,CAAhB;AAEA,WAAO,IAAP;AAEA,GApZ8B;AAsZ/Bu/C,EAAAA,SAAS,EAAE,UAAWC,MAAX,EAAmBC,MAAnB,EAA4B;AAEtC,SAAK7/C,CAAL,GAAS4/C,MAAM,CAAC5/C,CAAP,GAAW6/C,MAAM,CAAC7/C,CAA3B;AACA,SAAKG,CAAL,GAASy/C,MAAM,CAACz/C,CAAP,GAAW0/C,MAAM,CAAC1/C,CAA3B;AACA,SAAKC,CAAL,GAASw/C,MAAM,CAACx/C,CAAP,GAAWy/C,MAAM,CAACz/C,CAA3B;AAEA,WAAO,IAAP;AAEA,GA9Z8B;AAga/BmxB,EAAAA,SAAS,EAAE,UAAWhxB,CAAX,EAAe;AAEzB,SAAKP,CAAL,IAAUO,CAAV;AACA,SAAKJ,CAAL,IAAUI,CAAV;AACA,SAAKH,CAAL,IAAUG,CAAV;AAEA,WAAO,IAAP;AAEA,GAxa8B;AA0a/BkxB,EAAAA,GAAG,EAAE,UAAW/xB,KAAX,EAAmB;AAEvB,SAAKM,CAAL,GAASC,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,KAAKhF,CAAL,GAASN,KAAK,CAACM,CAA5B,CAAT;AACA,SAAKG,CAAL,GAASF,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,KAAK7E,CAAL,GAAST,KAAK,CAACS,CAA5B,CAAT;AACA,SAAKC,CAAL,GAASH,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa,KAAK5E,CAAL,GAASV,KAAK,CAACU,CAA5B,CAAT;AAEA,WAAO,IAAP;AAEA,GAlb8B;AAob/BwxB,EAAAA,QAAQ,EAAE,UAAWlyB,KAAX,EAAmB;AAE5B,SAAKM,CAAL,IAAUN,KAAK,CAACM,CAAhB;AACA,SAAKG,CAAL,IAAUT,KAAK,CAACS,CAAhB;AACA,SAAKC,CAAL,IAAUV,KAAK,CAACU,CAAhB;AAEA,WAAO,IAAP;AAEA,GA5b8B;AA8b/ByxB,EAAAA,cAAc,EAAE,UAAWtxB,CAAX,EAAe;AAE9B,SAAKP,CAAL,IAAUO,CAAV;AACA,SAAKJ,CAAL,IAAUI,CAAV;AACA,SAAKH,CAAL,IAAUG,CAAV;AAEA,WAAO,IAAP;AAEA,GAtc8B;AAwc/BouB,EAAAA,IAAI,EAAE,UAAWjvB,KAAX,EAAkB4zB,KAAlB,EAA0B;AAE/B,SAAKtzB,CAAL,IAAU,CAAEN,KAAK,CAACM,CAAN,GAAU,KAAKA,CAAjB,IAAuBszB,KAAjC;AACA,SAAKnzB,CAAL,IAAU,CAAET,KAAK,CAACS,CAAN,GAAU,KAAKA,CAAjB,IAAuBmzB,KAAjC;AACA,SAAKlzB,CAAL,IAAU,CAAEV,KAAK,CAACU,CAAN,GAAU,KAAKA,CAAjB,IAAuBkzB,KAAjC;AAEA,WAAO,IAAP;AAEA,GAhd8B;AAkd/BwsB,EAAAA,OAAO,EAAE,UAAWpgD,KAAX,EAAkB4zB,KAAlB,EAA0B;AAElC,SAAK+rB,MAAL,CAAa5B,KAAb;AACA/9C,IAAAA,KAAK,CAAC2/C,MAAN,CAAc3B,KAAd;AAEA,UAAMp9C,CAAC,GAAGgtB,SAAS,CAACqB,IAAV,CAAgB8uB,KAAK,CAACn9C,CAAtB,EAAyBo9C,KAAK,CAACp9C,CAA/B,EAAkCgzB,KAAlC,CAAV;AACA,UAAM/yB,CAAC,GAAG+sB,SAAS,CAACqB,IAAV,CAAgB8uB,KAAK,CAACl9C,CAAtB,EAAyBm9C,KAAK,CAACn9C,CAA/B,EAAkC+yB,KAAlC,CAAV;AACA,UAAMjxB,CAAC,GAAGirB,SAAS,CAACqB,IAAV,CAAgB8uB,KAAK,CAACp7C,CAAtB,EAAyBq7C,KAAK,CAACr7C,CAA/B,EAAkCixB,KAAlC,CAAV;AAEA,SAAK4qB,MAAL,CAAa59C,CAAb,EAAgBC,CAAhB,EAAmB8B,CAAnB;AAEA,WAAO,IAAP;AAEA,GA/d8B;AAie/BqxB,EAAAA,MAAM,EAAE,UAAW5uB,CAAX,EAAe;AAEtB,WAASA,CAAC,CAAC9E,CAAF,KAAQ,KAAKA,CAAf,IAAwB8E,CAAC,CAAC3E,CAAF,KAAQ,KAAKA,CAArC,IAA8C2E,CAAC,CAAC1E,CAAF,KAAQ,KAAKA,CAAlE;AAEA,GAre8B;AAue/BuzB,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAK/L,CAAL,GAASotB,KAAK,CAAErhB,MAAF,CAAd;AACA,SAAK5L,CAAL,GAASitB,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AACA,SAAK3L,CAAL,GAASgtB,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAd;AAEA,WAAO,IAAP;AAEA,GAjf8B;AAmf/BhJ,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5BqhB,IAAAA,KAAK,CAAErhB,MAAF,CAAL,GAAkB,KAAK/L,CAAvB;AACAotB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAK5L,CAA3B;AACAitB,IAAAA,KAAK,CAAErhB,MAAM,GAAG,CAAX,CAAL,GAAsB,KAAK3L,CAA3B;AAEA,WAAOgtB,KAAP;AAEA,GA9f8B;AAggB/BwG,EAAAA,mBAAmB,EAAE,UAAWC,SAAX,EAAsBroB,KAAtB,EAA8B;AAElD,SAAKxL,CAAL,GAAS6zB,SAAS,CAACC,IAAV,CAAgBtoB,KAAhB,CAAT;AACA,SAAKrL,CAAL,GAAS0zB,SAAS,CAACE,IAAV,CAAgBvoB,KAAhB,CAAT;AACA,SAAKpL,CAAL,GAASyzB,SAAS,CAACuJ,IAAV,CAAgB5xB,KAAhB,CAAT;;AAEA,QAAKqoB,SAAS,CAACksB,UAAV,KAAyB,IAA9B,EAAqC;AAEpC;AAEA,WAAK//C,CAAL,IAAU,GAAV;AACA,WAAKG,CAAL,IAAU,GAAV;AACA,WAAKC,CAAL,IAAU,GAAV;AAEA;;AAED,WAAO,IAAP;AAEA,GAlhB8B;AAohB/B26B,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAO,KAAKokB,MAAL,EAAP;AAEA;AAxhB8B,CAAhC;AA4hBA75C,KAAK,CAAC06C,KAAN,GAAcxC,cAAd;AAEA;;;;;AAKA,SAASyC,KAAT,CAAgB5/C,CAAhB,EAAmBD,CAAnB,EAAsB0E,CAAtB,EAAyB8/B,MAAzB,EAAiCllC,KAAjC,EAAwCwgD,aAAxC,EAAwD;AAEvD,OAAK7/C,CAAL,GAASA,CAAT;AACA,OAAKD,CAAL,GAASA,CAAT;AACA,OAAK0E,CAAL,GAASA,CAAT;AAEA,OAAK8/B,MAAL,GAAgBA,MAAM,IAAIA,MAAM,CAAClC,SAAnB,GAAiCkC,MAAjC,GAA0C,IAAIpC,OAAJ,EAAxD;AACA,OAAK2d,aAAL,GAAqBr/C,KAAK,CAACoC,OAAN,CAAe0hC,MAAf,IAA0BA,MAA1B,GAAmC,EAAxD;AAEA,OAAKllC,KAAL,GAAeA,KAAK,IAAIA,KAAK,CAACq+C,OAAjB,GAA6Br+C,KAA7B,GAAqC,IAAI4F,KAAJ,EAAlD;AACA,OAAK86C,YAAL,GAAoBt/C,KAAK,CAACoC,OAAN,CAAexD,KAAf,IAAyBA,KAAzB,GAAiC,EAArD;AAEA,OAAKwgD,aAAL,GAAqBA,aAAa,KAAKl9C,SAAlB,GAA8Bk9C,aAA9B,GAA8C,CAAnE;AAEA;;AAEDv+C,MAAM,CAACme,MAAP,CAAemgC,KAAK,CAACl/C,SAArB,EAAgC;AAE/BqwB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAN8B;AAQ/BA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAK5f,CAAL,GAAS4f,MAAM,CAAC5f,CAAhB;AACA,SAAKD,CAAL,GAAS6f,MAAM,CAAC7f,CAAhB;AACA,SAAK0E,CAAL,GAASmb,MAAM,CAACnb,CAAhB;AAEA,SAAK8/B,MAAL,CAAYvT,IAAZ,CAAkBpR,MAAM,CAAC2kB,MAAzB;AACA,SAAKllC,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,SAAKwgD,aAAL,GAAqBjgC,MAAM,CAACigC,aAA5B;;AAEA,SAAM,IAAIj+C,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGzzB,MAAM,CAACkgC,aAAP,CAAqBv/C,MAA3C,EAAmDqB,CAAC,GAAGyxC,EAAvD,EAA2DzxC,CAAC,EAA5D,EAAkE;AAEjE,WAAKk+C,aAAL,CAAoBl+C,CAApB,IAA0Bge,MAAM,CAACkgC,aAAP,CAAsBl+C,CAAtB,EAA0BmvB,KAA1B,EAA1B;AAEA;;AAED,SAAM,IAAInvB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGzzB,MAAM,CAACmgC,YAAP,CAAoBx/C,MAA1C,EAAkDqB,CAAC,GAAGyxC,EAAtD,EAA0DzxC,CAAC,EAA3D,EAAiE;AAEhE,WAAKm+C,YAAL,CAAmBn+C,CAAnB,IAAyBge,MAAM,CAACmgC,YAAP,CAAqBn+C,CAArB,EAAyBmvB,KAAzB,EAAzB;AAEA;;AAED,WAAO,IAAP;AAEA;AAjC8B,CAAhC;AAqCA;;;;;AAKA,IAAIivB,UAAU,GAAG,CAAjB;;AAEA,SAASC,QAAT,GAAoB;AAEnB3+C,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAER,IAAAA,KAAK,EAAEg7C,UAAU;AAAnB,GAAnC;AAEA,OAAKryB,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA,OAAKnW,IAAL,GAAY,EAAZ;AACA,OAAKnL,IAAL,GAAY,UAAZ;AAEA,OAAKolC,GAAL,GAAW,IAAX;AAEA,OAAK+O,QAAL,GAAgBx+B,cAAhB;AACA,OAAKy+B,IAAL,GAAY/+B,SAAZ;AACA,OAAKg/B,WAAL,GAAmB,KAAnB;AACA,OAAKL,YAAL,GAAoB,KAApB;AAEA,OAAKzrC,OAAL,GAAe,CAAf;AACA,OAAK+rC,WAAL,GAAmB,KAAnB;AAEA,OAAKC,QAAL,GAAgB99B,cAAhB;AACA,OAAK+9B,QAAL,GAAgB99B,sBAAhB;AACA,OAAK+9B,aAAL,GAAqBz+B,WAArB;AACA,OAAK0+B,aAAL,GAAqB,IAArB;AACA,OAAKC,aAAL,GAAqB,IAArB;AACA,OAAKC,kBAAL,GAA0B,IAA1B;AAEA,OAAKC,SAAL,GAAiB19B,cAAjB;AACA,OAAK29B,SAAL,GAAiB,IAAjB;AACA,OAAKC,UAAL,GAAkB,IAAlB;AAEA,OAAKC,gBAAL,GAAwB,IAAxB;AACA,OAAKC,WAAL,GAAmBj1B,iBAAnB;AACA,OAAKk1B,UAAL,GAAkB,CAAlB;AACA,OAAKC,eAAL,GAAuB,IAAvB;AACA,OAAKC,WAAL,GAAmBl2B,aAAnB;AACA,OAAKm2B,YAAL,GAAoBn2B,aAApB;AACA,OAAKo2B,YAAL,GAAoBp2B,aAApB;AACA,OAAKq2B,YAAL,GAAoB,KAApB;AAEA,OAAKC,cAAL,GAAsB,IAAtB;AACA,OAAKC,gBAAL,GAAwB,KAAxB;AACA,OAAKC,WAAL,GAAmB,KAAnB;AAEA,OAAKC,UAAL,GAAkB,IAAlB;AAEA,OAAKC,UAAL,GAAkB,IAAlB;AAEA,OAAKC,SAAL,GAAiB,IAAjB,CA/CmB,CA+CI;;AAEvB,OAAKC,aAAL,GAAqB,KAArB;AACA,OAAKC,mBAAL,GAA2B,CAA3B;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AAEA,OAAKC,SAAL,GAAiB,KAAjB;AAEA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAKC,kBAAL,GAA0B,KAA1B;AAEA,OAAKrV,OAAL,GAAe,IAAf;AAEA,OAAKsV,UAAL,GAAkB,IAAlB;AAEA,OAAKjV,QAAL,GAAgB,EAAhB;AAEA,OAAK7S,OAAL,GAAe,CAAf;AAEA;;AAED4lB,QAAQ,CAACv/C,SAAT,GAAqBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAE/EoC,EAAAA,WAAW,EAAEm9C,QAFkE;AAI/EmC,EAAAA,UAAU,EAAE,IAJmE;AAM/EC,EAAAA,eAAe,EAAE;AAAW;AAA+B,GAAE,CANkB;AAQ/EC,EAAAA,qBAAqB,EAAE,YAAY;AAElC,WAAO,KAAKD,eAAL,CAAqB3iD,QAArB,EAAP;AAEA,GAZ8E;AAc/E6iD,EAAAA,SAAS,EAAE,UAAWzR,MAAX,EAAoB;AAE9B,QAAKA,MAAM,KAAKnuC,SAAhB,EAA4B;;AAE5B,SAAM,MAAMpB,GAAZ,IAAmBuvC,MAAnB,EAA4B;AAE3B,YAAMjqC,QAAQ,GAAGiqC,MAAM,CAAEvvC,GAAF,CAAvB;;AAEA,UAAKsF,QAAQ,KAAKlE,SAAlB,EAA8B;AAE7B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,sBAAsB/uB,GAAtB,GAA4B,2BAA1C;AACA;AAEA,OAT0B,CAW3B;;;AACA,UAAKA,GAAG,KAAK,SAAb,EAAyB;AAExB8uB,QAAAA,OAAO,CAACC,IAAR,CAAc,WAAW,KAAKvkB,IAAhB,GAAuB,oEAArC;AACA,aAAKq0C,WAAL,GAAqBv5C,QAAQ,KAAK0a,WAAf,GAA+B,IAA/B,GAAsC,KAAzD;AACA;AAEA;;AAED,YAAMihC,YAAY,GAAG,KAAMjhD,GAAN,CAArB;;AAEA,UAAKihD,YAAY,KAAK7/C,SAAtB,EAAkC;AAEjC0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,WAAW,KAAKvkB,IAAhB,GAAuB,KAAvB,GAA+BxK,GAA/B,GAAqC,uCAAnD;AACA;AAEA;;AAED,UAAKihD,YAAY,IAAIA,YAAY,CAAC9E,OAAlC,EAA4C;AAE3C8E,QAAAA,YAAY,CAACpyB,GAAb,CAAkBvpB,QAAlB;AAEA,OAJD,MAIO,IAAO27C,YAAY,IAAIA,YAAY,CAACngB,SAA/B,IAAgDx7B,QAAQ,IAAIA,QAAQ,CAACw7B,SAA1E,EAAwF;AAE9FmgB,QAAAA,YAAY,CAACxxB,IAAb,CAAmBnqB,QAAnB;AAEA,OAJM,MAIA;AAEN,aAAMtF,GAAN,IAAcsF,QAAd;AAEA;AAED;AAED,GA/D8E;AAiE/E6zB,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAM8nB,MAAM,GAAK9nB,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAAvD;;AAEA,QAAK8nB,MAAL,EAAc;AAEb9nB,MAAAA,IAAI,GAAG;AACNE,QAAAA,QAAQ,EAAE,EADJ;AAENI,QAAAA,MAAM,EAAE;AAFF,OAAP;AAKA;;AAED,UAAM8V,IAAI,GAAG;AACZjW,MAAAA,QAAQ,EAAE;AACTT,QAAAA,OAAO,EAAE,GADA;AAETtuB,QAAAA,IAAI,EAAE,UAFG;AAGTgvB,QAAAA,SAAS,EAAE;AAHF;AADE,KAAb,CAbyB,CAqBzB;;AACAgW,IAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AAEA,QAAK,KAAKmL,IAAL,KAAc,EAAnB,EAAwB65B,IAAI,CAAC75B,IAAL,GAAY,KAAKA,IAAjB;AAExB,QAAK,KAAK7X,KAAL,IAAc,KAAKA,KAAL,CAAWq+C,OAA9B,EAAwC3M,IAAI,CAAC1xC,KAAL,GAAa,KAAKA,KAAL,CAAWy/C,MAAX,EAAb;AAExC,QAAK,KAAK4D,SAAL,KAAmB//C,SAAxB,EAAoCouC,IAAI,CAAC2R,SAAL,GAAiB,KAAKA,SAAtB;AACpC,QAAK,KAAKC,SAAL,KAAmBhgD,SAAxB,EAAoCouC,IAAI,CAAC4R,SAAL,GAAiB,KAAKA,SAAtB;AAEpC,QAAK,KAAKC,KAAL,IAAc,KAAKA,KAAL,CAAWlF,OAA9B,EAAwC3M,IAAI,CAAC6R,KAAL,GAAa,KAAKA,KAAL,CAAW9D,MAAX,EAAb;AACxC,QAAK,KAAK+D,QAAL,IAAiB,KAAKA,QAAL,CAAcnF,OAApC,EAA8C3M,IAAI,CAAC8R,QAAL,GAAgB,KAAKA,QAAL,CAAc/D,MAAd,EAAhB;AAC9C,QAAK,KAAKgE,iBAAL,IAA0B,KAAKA,iBAAL,KAA2B,CAA1D,EAA8D/R,IAAI,CAAC+R,iBAAL,GAAyB,KAAKA,iBAA9B;AAE9D,QAAK,KAAKC,QAAL,IAAiB,KAAKA,QAAL,CAAcrF,OAApC,EAA8C3M,IAAI,CAACgS,QAAL,GAAgB,KAAKA,QAAL,CAAcjE,MAAd,EAAhB;AAC9C,QAAK,KAAKkE,SAAL,KAAmBrgD,SAAxB,EAAoCouC,IAAI,CAACiS,SAAL,GAAiB,KAAKA,SAAtB;AACpC,QAAK,KAAKC,SAAL,KAAmBtgD,SAAxB,EAAoCouC,IAAI,CAACkS,SAAL,GAAiB,KAAKA,SAAtB;AACpC,QAAK,KAAKC,kBAAL,KAA4BvgD,SAAjC,EAA6CouC,IAAI,CAACmS,kBAAL,GAA0B,KAAKA,kBAA/B;;AAE7C,QAAK,KAAKC,YAAL,IAAqB,KAAKA,YAAL,CAAkB3oB,SAA5C,EAAwD;AAEvDuW,MAAAA,IAAI,CAACoS,YAAL,GAAoB,KAAKA,YAAL,CAAkBzoB,MAAlB,CAA0BC,IAA1B,EAAiChN,IAArD;AAEA;;AAED,QAAK,KAAKy1B,qBAAL,IAA8B,KAAKA,qBAAL,CAA2B5oB,SAA9D,EAA0E;AAEzEuW,MAAAA,IAAI,CAACqS,qBAAL,GAA6B,KAAKA,qBAAL,CAA2B1oB,MAA3B,CAAmCC,IAAnC,EAA0ChN,IAAvE;AAEA;;AAED,QAAK,KAAK01B,kBAAL,IAA2B,KAAKA,kBAAL,CAAwB7oB,SAAxD,EAAoE;AAEnEuW,MAAAA,IAAI,CAACsS,kBAAL,GAA0B,KAAKA,kBAAL,CAAwB3oB,MAAxB,CAAgCC,IAAhC,EAAuChN,IAAjE;AACAojB,MAAAA,IAAI,CAACuS,oBAAL,GAA4B,KAAKA,oBAAL,CAA0B5gD,OAA1B,EAA5B;AAEA;;AAED,QAAK,KAAKoK,GAAL,IAAY,KAAKA,GAAL,CAAS0tB,SAA1B,EAAsCuW,IAAI,CAACjkC,GAAL,GAAW,KAAKA,GAAL,CAAS4tB,MAAT,CAAiBC,IAAjB,EAAwBhN,IAAnC;AACtC,QAAK,KAAK41B,MAAL,IAAe,KAAKA,MAAL,CAAY/oB,SAAhC,EAA4CuW,IAAI,CAACwS,MAAL,GAAc,KAAKA,MAAL,CAAY7oB,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAC5C,QAAK,KAAK61B,QAAL,IAAiB,KAAKA,QAAL,CAAchpB,SAApC,EAAgDuW,IAAI,CAACyS,QAAL,GAAgB,KAAKA,QAAL,CAAc9oB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AAChD,QAAK,KAAK81B,QAAL,IAAiB,KAAKA,QAAL,CAAcjpB,SAApC,EAAgDuW,IAAI,CAAC0S,QAAL,GAAgB,KAAKA,QAAL,CAAc/oB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;;AAEhD,QAAK,KAAK+1B,KAAL,IAAc,KAAKA,KAAL,CAAWlpB,SAA9B,EAA0C;AAEzCuW,MAAAA,IAAI,CAAC2S,KAAL,GAAa,KAAKA,KAAL,CAAWhpB,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,MAAAA,IAAI,CAAC4S,cAAL,GAAsB,KAAKA,cAA3B;AAEA;;AAED,QAAK,KAAKC,OAAL,IAAgB,KAAKA,OAAL,CAAappB,SAAlC,EAA8C;AAE7CuW,MAAAA,IAAI,CAAC6S,OAAL,GAAe,KAAKA,OAAL,CAAalpB,MAAb,CAAqBC,IAArB,EAA4BhN,IAA3C;AACAojB,MAAAA,IAAI,CAAC8S,SAAL,GAAiB,KAAKA,SAAtB;AAEA;;AAED,QAAK,KAAKC,SAAL,IAAkB,KAAKA,SAAL,CAAetpB,SAAtC,EAAkD;AAEjDuW,MAAAA,IAAI,CAAC+S,SAAL,GAAiB,KAAKA,SAAL,CAAeppB,MAAf,CAAuBC,IAAvB,EAA8BhN,IAA/C;AACAojB,MAAAA,IAAI,CAACgT,aAAL,GAAqB,KAAKA,aAA1B;AACAhT,MAAAA,IAAI,CAACiT,WAAL,GAAmB,KAAKA,WAAL,CAAiBthD,OAAjB,EAAnB;AAEA;;AAED,QAAK,KAAKuhD,eAAL,IAAwB,KAAKA,eAAL,CAAqBzpB,SAAlD,EAA8D;AAE7DuW,MAAAA,IAAI,CAACkT,eAAL,GAAuB,KAAKA,eAAL,CAAqBvpB,MAArB,CAA6BC,IAA7B,EAAoChN,IAA3D;AACAojB,MAAAA,IAAI,CAACmT,iBAAL,GAAyB,KAAKA,iBAA9B;AACAnT,MAAAA,IAAI,CAACoT,gBAAL,GAAwB,KAAKA,gBAA7B;AAEA;;AAED,QAAK,KAAKC,YAAL,IAAqB,KAAKA,YAAL,CAAkB5pB,SAA5C,EAAwDuW,IAAI,CAACqT,YAAL,GAAoB,KAAKA,YAAL,CAAkB1pB,MAAlB,CAA0BC,IAA1B,EAAiChN,IAArD;AACxD,QAAK,KAAK02B,YAAL,IAAqB,KAAKA,YAAL,CAAkB7pB,SAA5C,EAAwDuW,IAAI,CAACsT,YAAL,GAAoB,KAAKA,YAAL,CAAkB3pB,MAAlB,CAA0BC,IAA1B,EAAiChN,IAArD;AAExD,QAAK,KAAK22B,WAAL,IAAoB,KAAKA,WAAL,CAAiB9pB,SAA1C,EAAsDuW,IAAI,CAACuT,WAAL,GAAmB,KAAKA,WAAL,CAAiB5pB,MAAjB,CAAyBC,IAAzB,EAAgChN,IAAnD;AACtD,QAAK,KAAK42B,WAAL,IAAoB,KAAKA,WAAL,CAAiB/pB,SAA1C,EAAsDuW,IAAI,CAACwT,WAAL,GAAmB,KAAKA,WAAL,CAAiB7pB,MAAjB,CAAyBC,IAAzB,EAAgChN,IAAnD;;AAEtD,QAAK,KAAK62B,MAAL,IAAe,KAAKA,MAAL,CAAYhqB,SAAhC,EAA4C;AAE3CuW,MAAAA,IAAI,CAACyT,MAAL,GAAc,KAAKA,MAAL,CAAY9pB,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AACAojB,MAAAA,IAAI,CAAC0T,YAAL,GAAoB,KAAKA,YAAzB,CAH2C,CAGJ;;AACvC1T,MAAAA,IAAI,CAAC2T,eAAL,GAAuB,KAAKA,eAA5B;AAEA,UAAK,KAAKC,OAAL,KAAiBhiD,SAAtB,EAAkCouC,IAAI,CAAC4T,OAAL,GAAe,KAAKA,OAApB;AAClC,UAAK,KAAKC,eAAL,KAAyBjiD,SAA9B,EAA0CouC,IAAI,CAAC6T,eAAL,GAAuB,KAAKA,eAA5B;AAE1C;;AAED,QAAK,KAAKC,WAAL,IAAoB,KAAKA,WAAL,CAAiBrqB,SAA1C,EAAsD;AAErDuW,MAAAA,IAAI,CAAC8T,WAAL,GAAmB,KAAKA,WAAL,CAAiBnqB,MAAjB,CAAyBC,IAAzB,EAAgChN,IAAnD;AAEA;;AAED,QAAK,KAAK6lB,IAAL,KAAc7wC,SAAnB,EAA+BouC,IAAI,CAACyC,IAAL,GAAY,KAAKA,IAAjB;AAC/B,QAAK,KAAKsR,eAAL,KAAyBniD,SAA9B,EAA0CouC,IAAI,CAAC+T,eAAL,GAAuB,KAAKA,eAA5B;AAE1C,QAAK,KAAK5E,QAAL,KAAkBx+B,cAAvB,EAAwCqvB,IAAI,CAACmP,QAAL,GAAgB,KAAKA,QAArB;AACxC,QAAK,KAAKE,WAAL,KAAqB,IAA1B,EAAiCrP,IAAI,CAACqP,WAAL,GAAmB,KAAKA,WAAxB;AACjC,QAAK,KAAKD,IAAL,KAAc/+B,SAAnB,EAA+B2vB,IAAI,CAACoP,IAAL,GAAY,KAAKA,IAAjB;AAC/B,QAAK,KAAKJ,YAAV,EAAyBhP,IAAI,CAACgP,YAAL,GAAoB,IAApB;AAEzB,QAAK,KAAKzrC,OAAL,GAAe,CAApB,EAAwBy8B,IAAI,CAACz8B,OAAL,GAAe,KAAKA,OAApB;AACxB,QAAK,KAAK+rC,WAAL,KAAqB,IAA1B,EAAiCtP,IAAI,CAACsP,WAAL,GAAmB,KAAKA,WAAxB;AAEjCtP,IAAAA,IAAI,CAAC6P,SAAL,GAAiB,KAAKA,SAAtB;AACA7P,IAAAA,IAAI,CAAC8P,SAAL,GAAiB,KAAKA,SAAtB;AACA9P,IAAAA,IAAI,CAAC+P,UAAL,GAAkB,KAAKA,UAAvB;AAEA/P,IAAAA,IAAI,CAACuQ,YAAL,GAAoB,KAAKA,YAAzB;AACAvQ,IAAAA,IAAI,CAACgQ,gBAAL,GAAwB,KAAKA,gBAA7B;AACAhQ,IAAAA,IAAI,CAACiQ,WAAL,GAAmB,KAAKA,WAAxB;AACAjQ,IAAAA,IAAI,CAACkQ,UAAL,GAAkB,KAAKA,UAAvB;AACAlQ,IAAAA,IAAI,CAACmQ,eAAL,GAAuB,KAAKA,eAA5B;AACAnQ,IAAAA,IAAI,CAACoQ,WAAL,GAAmB,KAAKA,WAAxB;AACApQ,IAAAA,IAAI,CAACqQ,YAAL,GAAoB,KAAKA,YAAzB;AACArQ,IAAAA,IAAI,CAACsQ,YAAL,GAAoB,KAAKA,YAAzB,CA5IyB,CA8IzB;;AACA,QAAK,KAAKzpB,QAAL,IAAiB,KAAKA,QAAL,KAAkB,CAAxC,EAA4CmZ,IAAI,CAACnZ,QAAL,GAAgB,KAAKA,QAArB;AAE5C,QAAK,KAAKiqB,aAAL,KAAuB,IAA5B,EAAmC9Q,IAAI,CAAC8Q,aAAL,GAAqB,IAArB;AACnC,QAAK,KAAKC,mBAAL,KAA6B,CAAlC,EAAsC/Q,IAAI,CAAC+Q,mBAAL,GAA2B,KAAKA,mBAAhC;AACtC,QAAK,KAAKC,kBAAL,KAA4B,CAAjC,EAAqChR,IAAI,CAACgR,kBAAL,GAA0B,KAAKA,kBAA/B;AAErC,QAAK,KAAKgD,SAAL,IAAkB,KAAKA,SAAL,KAAmB,CAA1C,EAA8ChU,IAAI,CAACgU,SAAL,GAAiB,KAAKA,SAAtB;AAC9C,QAAK,KAAKC,QAAL,KAAkBriD,SAAvB,EAAmCouC,IAAI,CAACiU,QAAL,GAAgB,KAAKA,QAArB;AACnC,QAAK,KAAKC,OAAL,KAAiBtiD,SAAtB,EAAkCouC,IAAI,CAACkU,OAAL,GAAe,KAAKA,OAApB;AAClC,QAAK,KAAKltB,KAAL,KAAep1B,SAApB,EAAgCouC,IAAI,CAAChZ,KAAL,GAAa,KAAKA,KAAlB;AAEhC,QAAK,KAAKiqB,SAAL,KAAmB,IAAxB,EAA+BjR,IAAI,CAACiR,SAAL,GAAiB,IAAjB;AAE/B,QAAK,KAAKC,SAAL,GAAiB,CAAtB,EAA0BlR,IAAI,CAACkR,SAAL,GAAiB,KAAKA,SAAtB;AAC1B,QAAK,KAAKC,kBAAL,KAA4B,IAAjC,EAAwCnR,IAAI,CAACmR,kBAAL,GAA0B,KAAKA,kBAA/B;AAExC,QAAK,KAAKgD,SAAL,KAAmB,IAAxB,EAA+BnU,IAAI,CAACmU,SAAL,GAAiB,KAAKA,SAAtB;AAC/B,QAAK,KAAKC,kBAAL,GAA0B,CAA/B,EAAmCpU,IAAI,CAACoU,kBAAL,GAA0B,KAAKA,kBAA/B;AACnC,QAAK,KAAKC,gBAAL,KAA0B,OAA/B,EAAyCrU,IAAI,CAACqU,gBAAL,GAAwB,KAAKA,gBAA7B;AACzC,QAAK,KAAKC,iBAAL,KAA2B,OAAhC,EAA0CtU,IAAI,CAACsU,iBAAL,GAAyB,KAAKA,iBAA9B;AAE1C,QAAK,KAAKC,YAAL,KAAsB,IAA3B,EAAkCvU,IAAI,CAACuU,YAAL,GAAoB,IAApB;AAClC,QAAK,KAAKC,YAAL,KAAsB,IAA3B,EAAkCxU,IAAI,CAACwU,YAAL,GAAoB,IAApB;AAClC,QAAK,KAAKC,QAAL,KAAkB,IAAvB,EAA8BzU,IAAI,CAACyU,QAAL,GAAgB,IAAhB;AAE9B,QAAK,KAAK3Y,OAAL,KAAiB,KAAtB,EAA8BkE,IAAI,CAAClE,OAAL,GAAe,KAAf;AAE9B,QAAK,KAAKsV,UAAL,KAAoB,KAAzB,EAAiCpR,IAAI,CAACoR,UAAL,GAAkB,KAAlB;AAEjC,QAAKvqC,IAAI,CAACe,SAAL,CAAgB,KAAKu0B,QAArB,MAAoC,IAAzC,EAAgD6D,IAAI,CAAC7D,QAAL,GAAgB,KAAKA,QAArB,CA5KvB,CA8KzB;;AAEA,aAAS0D,gBAAT,CAA2BC,KAA3B,EAAmC;AAElC,YAAMC,MAAM,GAAG,EAAf;;AAEA,WAAM,MAAMvvC,GAAZ,IAAmBsvC,KAAnB,EAA2B;AAE1B,cAAME,IAAI,GAAGF,KAAK,CAAEtvC,GAAF,CAAlB;AACA,eAAOwvC,IAAI,CAACjW,QAAZ;AACAgW,QAAAA,MAAM,CAAC/lC,IAAP,CAAagmC,IAAb;AAEA;;AAED,aAAOD,MAAP;AAEA;;AAED,QAAK2R,MAAL,EAAc;AAEb,YAAM5nB,QAAQ,GAAG+V,gBAAgB,CAAEjW,IAAI,CAACE,QAAP,CAAjC;AACA,YAAMI,MAAM,GAAG2V,gBAAgB,CAAEjW,IAAI,CAACM,MAAP,CAA/B;AAEA,UAAKJ,QAAQ,CAACt6B,MAAT,GAAkB,CAAvB,EAA2BwwC,IAAI,CAAClW,QAAL,GAAgBA,QAAhB;AAC3B,UAAKI,MAAM,CAAC16B,MAAP,GAAgB,CAArB,EAAyBwwC,IAAI,CAAC9V,MAAL,GAAcA,MAAd;AAEzB;;AAED,WAAO8V,IAAP;AAEA,GA7Q8E;AA+Q/EhgB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAnR8E;AAqR/EA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAK1I,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB;AAEA,SAAKi6B,GAAL,GAAWvxB,MAAM,CAACuxB,GAAlB;AAEA,SAAK+O,QAAL,GAAgBtgC,MAAM,CAACsgC,QAAvB;AACA,SAAKC,IAAL,GAAYvgC,MAAM,CAACugC,IAAnB;AACA,SAAKC,WAAL,GAAmBxgC,MAAM,CAACwgC,WAA1B;AACA,SAAKL,YAAL,GAAoBngC,MAAM,CAACmgC,YAA3B;AAEA,SAAKzrC,OAAL,GAAesL,MAAM,CAACtL,OAAtB;AACA,SAAK+rC,WAAL,GAAmBzgC,MAAM,CAACygC,WAA1B;AAEA,SAAKC,QAAL,GAAgB1gC,MAAM,CAAC0gC,QAAvB;AACA,SAAKC,QAAL,GAAgB3gC,MAAM,CAAC2gC,QAAvB;AACA,SAAKC,aAAL,GAAqB5gC,MAAM,CAAC4gC,aAA5B;AACA,SAAKC,aAAL,GAAqB7gC,MAAM,CAAC6gC,aAA5B;AACA,SAAKC,aAAL,GAAqB9gC,MAAM,CAAC8gC,aAA5B;AACA,SAAKC,kBAAL,GAA0B/gC,MAAM,CAAC+gC,kBAAjC;AAEA,SAAKC,SAAL,GAAiBhhC,MAAM,CAACghC,SAAxB;AACA,SAAKC,SAAL,GAAiBjhC,MAAM,CAACihC,SAAxB;AACA,SAAKC,UAAL,GAAkBlhC,MAAM,CAACkhC,UAAzB;AAEA,SAAKC,gBAAL,GAAwBnhC,MAAM,CAACmhC,gBAA/B;AACA,SAAKC,WAAL,GAAmBphC,MAAM,CAACohC,WAA1B;AACA,SAAKC,UAAL,GAAkBrhC,MAAM,CAACqhC,UAAzB;AACA,SAAKC,eAAL,GAAuBthC,MAAM,CAACshC,eAA9B;AACA,SAAKC,WAAL,GAAmBvhC,MAAM,CAACuhC,WAA1B;AACA,SAAKC,YAAL,GAAoBxhC,MAAM,CAACwhC,YAA3B;AACA,SAAKC,YAAL,GAAoBzhC,MAAM,CAACyhC,YAA3B;AACA,SAAKC,YAAL,GAAoB1hC,MAAM,CAAC0hC,YAA3B;AAEA,UAAMmE,SAAS,GAAG7lC,MAAM,CAAC2hC,cAAzB;AACA,QAAImE,SAAS,GAAG,IAAhB;;AAEA,QAAKD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,YAAM13B,CAAC,GAAG03B,SAAS,CAACllD,MAApB;AACAmlD,MAAAA,SAAS,GAAG,IAAIjlD,KAAJ,CAAWstB,CAAX,CAAZ;;AAEA,WAAM,IAAInsB,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKmsB,CAAvB,EAA0B,EAAGnsB,CAA7B,EAAiC;AAEhC8jD,QAAAA,SAAS,CAAE9jD,CAAF,CAAT,GAAiB6jD,SAAS,CAAE7jD,CAAF,CAAT,CAAemvB,KAAf,EAAjB;AAEA;AAED;;AAED,SAAKwwB,cAAL,GAAsBmE,SAAtB;AACA,SAAKlE,gBAAL,GAAwB5hC,MAAM,CAAC4hC,gBAA/B;AACA,SAAKC,WAAL,GAAmB7hC,MAAM,CAAC6hC,WAA1B;AAEA,SAAKC,UAAL,GAAkB9hC,MAAM,CAAC8hC,UAAzB;AAEA,SAAKC,UAAL,GAAkB/hC,MAAM,CAAC+hC,UAAzB;AAEA,SAAKC,SAAL,GAAiBhiC,MAAM,CAACgiC,SAAxB;AAEA,SAAKC,aAAL,GAAqBjiC,MAAM,CAACiiC,aAA5B;AACA,SAAKC,mBAAL,GAA2BliC,MAAM,CAACkiC,mBAAlC;AACA,SAAKC,kBAAL,GAA0BniC,MAAM,CAACmiC,kBAAjC;AAEA,SAAKC,SAAL,GAAiBpiC,MAAM,CAACoiC,SAAxB;AAEA,SAAKC,SAAL,GAAiBriC,MAAM,CAACqiC,SAAxB;AACA,SAAKC,kBAAL,GAA0BtiC,MAAM,CAACsiC,kBAAjC;AAEA,SAAKrV,OAAL,GAAejtB,MAAM,CAACitB,OAAtB;AAEA,SAAKsV,UAAL,GAAkBviC,MAAM,CAACuiC,UAAzB;AAEA,SAAKjV,QAAL,GAAgBt1B,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgBiH,MAAM,CAACstB,QAAvB,CAAZ,CAAhB;AAEA,WAAO,IAAP;AAEA,GAlW8E;AAoW/EhS,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAK9wB,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAApB;AAEA;AAxW8E,CAA3D,CAArB;AA4WAzK,MAAM,CAACkE,cAAP,CAAuBy6C,QAAQ,CAACv/C,SAAhC,EAA2C,aAA3C,EAA0D;AAEzD0vB,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,QAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKq1B,OAAL;AAEtB;AANwD,CAA1D;AAUA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA,SAASsrB,iBAAT,CAA4BnV,UAA5B,EAAyC;AAExCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb,CANwC,CAMJ;;AAEpC,OAAK6H,GAAL,GAAW,IAAX;AAEA,OAAK22C,QAAL,GAAgB,IAAhB;AACA,OAAKmC,iBAAL,GAAyB,GAAzB;AAEA,OAAKlC,KAAL,GAAa,IAAb;AACA,OAAKC,cAAL,GAAsB,GAAtB;AAEA,OAAKY,WAAL,GAAmB,IAAnB;AAEA,OAAKf,QAAL,GAAgB,IAAhB;AAEA,OAAKgB,MAAL,GAAc,IAAd;AACA,OAAKG,OAAL,GAAephC,iBAAf;AACA,OAAKkhC,YAAL,GAAoB,CAApB;AACA,OAAKC,eAAL,GAAuB,IAAvB;AAEA,OAAKQ,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AACA,OAAKC,gBAAL,GAAwB,OAAxB;AACA,OAAKC,iBAAL,GAAyB,OAAzB;AAEA,OAAKG,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AAEA,OAAK/C,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDmV,iBAAiB,CAACjlD,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA9B;AACAilD,iBAAiB,CAACjlD,SAAlB,CAA4BoC,WAA5B,GAA0C6iD,iBAA1C;AAEAA,iBAAiB,CAACjlD,SAAlB,CAA4BmlD,mBAA5B,GAAkD,IAAlD;;AAEAF,iBAAiB,CAACjlD,SAAlB,CAA4BswB,IAA5B,GAAmC,UAAWpR,MAAX,EAAoB;AAEtDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAKyN,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK22C,QAAL,GAAgB7jC,MAAM,CAAC6jC,QAAvB;AACA,OAAKmC,iBAAL,GAAyBhmC,MAAM,CAACgmC,iBAAhC;AAEA,OAAKlC,KAAL,GAAa9jC,MAAM,CAAC8jC,KAApB;AACA,OAAKC,cAAL,GAAsB/jC,MAAM,CAAC+jC,cAA7B;AAEA,OAAKY,WAAL,GAAmB3kC,MAAM,CAAC2kC,WAA1B;AAEA,OAAKf,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKgB,MAAL,GAAc5kC,MAAM,CAAC4kC,MAArB;AACA,OAAKG,OAAL,GAAe/kC,MAAM,CAAC+kC,OAAtB;AACA,OAAKF,YAAL,GAAoB7kC,MAAM,CAAC6kC,YAA3B;AACA,OAAKC,eAAL,GAAuB9kC,MAAM,CAAC8kC,eAA9B;AAEA,OAAKQ,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AACA,OAAKC,gBAAL,GAAwBxlC,MAAM,CAACwlC,gBAA/B;AACA,OAAKC,iBAAL,GAAyBzlC,MAAM,CAACylC,iBAAhC;AAEA,OAAKG,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CAjCD;AAmCA;;;;;AAIA,MAAMQ,SAAS,GAAG,IAAI3jB,OAAJ,EAAlB;;AACA,MAAM4jB,UAAU,GAAG,IAAIx1B,OAAJ,EAAnB;;AAEA,SAASy1B,eAAT,CAA0Bj5B,KAA1B,EAAiCk5B,QAAjC,EAA2CvG,UAA3C,EAAwD;AAEvD,MAAKj/C,KAAK,CAACoC,OAAN,CAAekqB,KAAf,CAAL,EAA8B;AAE7B,UAAM,IAAIrN,SAAJ,CAAe,uDAAf,CAAN;AAEA;;AAED,OAAKxI,IAAL,GAAY,EAAZ;AAEA,OAAK6V,KAAL,GAAaA,KAAb;AACA,OAAKk5B,QAAL,GAAgBA,QAAhB;AACA,OAAKjW,KAAL,GAAajjB,KAAK,KAAKpqB,SAAV,GAAsBoqB,KAAK,CAACxsB,MAAN,GAAe0lD,QAArC,GAAgD,CAA7D;AACA,OAAKvG,UAAL,GAAkBA,UAAU,KAAK,IAAjC;AAEA,OAAKwG,KAAL,GAAal6B,eAAb;AACA,OAAKm6B,WAAL,GAAmB;AAAEz6C,IAAAA,MAAM,EAAE,CAAV;AAAaskC,IAAAA,KAAK,EAAE,CAAE;AAAtB,GAAnB;AAEA,OAAK3V,OAAL,GAAe,CAAf;AAEA;;AAED/4B,MAAM,CAACkE,cAAP,CAAuBwgD,eAAe,CAACtlD,SAAvC,EAAkD,aAAlD,EAAiE;AAEhE0vB,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,QAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKq1B,OAAL;AAEtB;AAN+D,CAAjE;AAUA/4B,MAAM,CAACme,MAAP,CAAeumC,eAAe,CAACtlD,SAA/B,EAA0C;AAEzC0lD,EAAAA,iBAAiB,EAAE,IAFsB;AAIzCC,EAAAA,gBAAgB,EAAE,YAAY,CAAE,CAJS;AAMzCC,EAAAA,QAAQ,EAAE,UAAWthD,KAAX,EAAmB;AAE5B,SAAKkhD,KAAL,GAAalhD,KAAb;AAEA,WAAO,IAAP;AAEA,GAZwC;AAczCgsB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAK1I,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB;AACA,SAAK6V,KAAL,GAAa,IAAInN,MAAM,CAACmN,KAAP,CAAajqB,WAAjB,CAA8B8c,MAAM,CAACmN,KAArC,CAAb;AACA,SAAKk5B,QAAL,GAAgBrmC,MAAM,CAACqmC,QAAvB;AACA,SAAKjW,KAAL,GAAapwB,MAAM,CAACowB,KAApB;AACA,SAAK0P,UAAL,GAAkB9/B,MAAM,CAAC8/B,UAAzB;AAEA,SAAKwG,KAAL,GAAatmC,MAAM,CAACsmC,KAApB;AAEA,WAAO,IAAP;AAEA,GA1BwC;AA4BzCK,EAAAA,MAAM,EAAE,UAAWC,MAAX,EAAmBhzB,SAAnB,EAA8BizB,MAA9B,EAAuC;AAE9CD,IAAAA,MAAM,IAAI,KAAKP,QAAf;AACAQ,IAAAA,MAAM,IAAIjzB,SAAS,CAACyyB,QAApB;;AAEA,SAAM,IAAIrkD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKikD,QAA1B,EAAoCrkD,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,WAAKmrB,KAAL,CAAYy5B,MAAM,GAAG5kD,CAArB,IAA2B4xB,SAAS,CAACzG,KAAV,CAAiB05B,MAAM,GAAG7kD,CAA1B,CAA3B;AAEA;;AAED,WAAO,IAAP;AAEA,GAzCwC;AA2CzC8kD,EAAAA,SAAS,EAAE,UAAW35B,KAAX,EAAmB;AAE7B,SAAKA,KAAL,CAAWqD,GAAX,CAAgBrD,KAAhB;AAEA,WAAO,IAAP;AAEA,GAjDwC;AAmDzC45B,EAAAA,eAAe,EAAE,UAAWC,MAAX,EAAoB;AAEpC,UAAM75B,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAIrhB,MAAM,GAAG,CAAb;;AAEA,SAAM,IAAI9J,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4kD,MAAM,CAACrmD,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,UAAIvC,KAAK,GAAGunD,MAAM,CAAEhlD,CAAF,CAAlB;;AAEA,UAAKvC,KAAK,KAAKsD,SAAf,EAA2B;AAE1B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd,EAA6E1uB,CAA7E;AACAvC,QAAAA,KAAK,GAAG,IAAI4F,KAAJ,EAAR;AAEA;;AAED8nB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqBrM,KAAK,CAACM,CAA3B;AACAotB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqBrM,KAAK,CAACS,CAA3B;AACAitB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqBrM,KAAK,CAACU,CAA3B;AAEA;;AAED,WAAO,IAAP;AAEA,GA3EwC;AA6EzC8mD,EAAAA,iBAAiB,EAAE,UAAWC,OAAX,EAAqB;AAEvC,UAAM/5B,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAIrhB,MAAM,GAAG,CAAb;;AAEA,SAAM,IAAI9J,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8kD,OAAO,CAACvmD,MAA7B,EAAqCqB,CAAC,GAAGI,CAAzC,EAA4CJ,CAAC,EAA7C,EAAmD;AAElD,UAAIysC,MAAM,GAAGyY,OAAO,CAAEllD,CAAF,CAApB;;AAEA,UAAKysC,MAAM,KAAK1rC,SAAhB,EAA4B;AAE3B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd,EAAgF1uB,CAAhF;AACAysC,QAAAA,MAAM,GAAG,IAAI9d,OAAJ,EAAT;AAEA;;AAEDxD,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAACplC,CAA5B;AACA8jB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAACllC,CAA5B;AAEA;;AAED,WAAO,IAAP;AAEA,GApGwC;AAsGzC49C,EAAAA,iBAAiB,EAAE,UAAWD,OAAX,EAAqB;AAEvC,UAAM/5B,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAIrhB,MAAM,GAAG,CAAb;;AAEA,SAAM,IAAI9J,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8kD,OAAO,CAACvmD,MAA7B,EAAqCqB,CAAC,GAAGI,CAAzC,EAA4CJ,CAAC,EAA7C,EAAmD;AAElD,UAAIysC,MAAM,GAAGyY,OAAO,CAAEllD,CAAF,CAApB;;AAEA,UAAKysC,MAAM,KAAK1rC,SAAhB,EAA4B;AAE3B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd,EAAgF1uB,CAAhF;AACAysC,QAAAA,MAAM,GAAG,IAAIlM,OAAJ,EAAT;AAEA;;AAEDpV,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAACplC,CAA5B;AACA8jB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAACllC,CAA5B;AACA4jB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAAC/S,CAA5B;AAEA;;AAED,WAAO,IAAP;AAEA,GA9HwC;AAgIzC0rB,EAAAA,iBAAiB,EAAE,UAAWF,OAAX,EAAqB;AAEvC,UAAM/5B,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAIrhB,MAAM,GAAG,CAAb;;AAEA,SAAM,IAAI9J,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8kD,OAAO,CAACvmD,MAA7B,EAAqCqB,CAAC,GAAGI,CAAzC,EAA4CJ,CAAC,EAA7C,EAAmD;AAElD,UAAIysC,MAAM,GAAGyY,OAAO,CAAEllD,CAAF,CAApB;;AAEA,UAAKysC,MAAM,KAAK1rC,SAAhB,EAA4B;AAE3B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd,EAAgF1uB,CAAhF;AACAysC,QAAAA,MAAM,GAAG,IAAIhT,OAAJ,EAAT;AAEA;;AAEDtO,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAACplC,CAA5B;AACA8jB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAACllC,CAA5B;AACA4jB,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAAC/S,CAA5B;AACAvO,MAAAA,KAAK,CAAErhB,MAAM,EAAR,CAAL,GAAqB2iC,MAAM,CAAC3vB,CAA5B;AAEA;;AAED,WAAO,IAAP;AAEA,GAzJwC;AA2JzCiT,EAAAA,YAAY,EAAE,UAAW3D,CAAX,EAAe;AAE5B,QAAK,KAAKi4B,QAAL,KAAkB,CAAvB,EAA2B;AAE1B,WAAM,IAAIrkD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKguC,KAA1B,EAAiCpuC,CAAC,GAAGI,CAArC,EAAwCJ,CAAC,EAAzC,EAA+C;AAE9CmkD,QAAAA,UAAU,CAACxyB,mBAAX,CAAgC,IAAhC,EAAsC3xB,CAAtC;;AACAmkD,QAAAA,UAAU,CAACp0B,YAAX,CAAyB3D,CAAzB;;AAEA,aAAKi5B,KAAL,CAAYrlD,CAAZ,EAAemkD,UAAU,CAAC98C,CAA1B,EAA6B88C,UAAU,CAAC58C,CAAxC;AAEA;AAED,KAXD,MAWO,IAAK,KAAK88C,QAAL,KAAkB,CAAvB,EAA2B;AAEjC,WAAM,IAAIrkD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKguC,KAA1B,EAAiCpuC,CAAC,GAAGI,CAArC,EAAwCJ,CAAC,EAAzC,EAA+C;AAE9CkkD,QAAAA,SAAS,CAACvyB,mBAAV,CAA+B,IAA/B,EAAqC3xB,CAArC;;AACAkkD,QAAAA,SAAS,CAACn0B,YAAV,CAAwB3D,CAAxB;;AAEA,aAAKk5B,MAAL,CAAatlD,CAAb,EAAgBkkD,SAAS,CAAC78C,CAA1B,EAA6B68C,SAAS,CAAC38C,CAAvC,EAA0C28C,SAAS,CAACxqB,CAApD;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAvLwC;AAyLzCI,EAAAA,YAAY,EAAE,UAAW1N,CAAX,EAAe;AAE5B,SAAM,IAAIpsB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKguC,KAA1B,EAAiCpuC,CAAC,GAAGI,CAArC,EAAwCJ,CAAC,EAAzC,EAA+C;AAE9CkkD,MAAAA,SAAS,CAAC78C,CAAV,GAAc,KAAKwqB,IAAL,CAAW7xB,CAAX,CAAd;AACAkkD,MAAAA,SAAS,CAAC38C,CAAV,GAAc,KAAKuqB,IAAL,CAAW9xB,CAAX,CAAd;AACAkkD,MAAAA,SAAS,CAACxqB,CAAV,GAAc,KAAKyB,IAAL,CAAWn7B,CAAX,CAAd;;AAEAkkD,MAAAA,SAAS,CAACpqB,YAAV,CAAwB1N,CAAxB;;AAEA,WAAKk5B,MAAL,CAAatlD,CAAb,EAAgBkkD,SAAS,CAAC78C,CAA1B,EAA6B68C,SAAS,CAAC38C,CAAvC,EAA0C28C,SAAS,CAACxqB,CAApD;AAEA;;AAED,WAAO,IAAP;AAEA,GAzMwC;AA2MzCoH,EAAAA,iBAAiB,EAAE,UAAW1U,CAAX,EAAe;AAEjC,SAAM,IAAIpsB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKguC,KAA1B,EAAiCpuC,CAAC,GAAGI,CAArC,EAAwCJ,CAAC,EAAzC,EAA+C;AAE9CkkD,MAAAA,SAAS,CAAC78C,CAAV,GAAc,KAAKwqB,IAAL,CAAW7xB,CAAX,CAAd;AACAkkD,MAAAA,SAAS,CAAC38C,CAAV,GAAc,KAAKuqB,IAAL,CAAW9xB,CAAX,CAAd;AACAkkD,MAAAA,SAAS,CAACxqB,CAAV,GAAc,KAAKyB,IAAL,CAAWn7B,CAAX,CAAd;;AAEAkkD,MAAAA,SAAS,CAACpjB,iBAAV,CAA6B1U,CAA7B;;AAEA,WAAKk5B,MAAL,CAAatlD,CAAb,EAAgBkkD,SAAS,CAAC78C,CAA1B,EAA6B68C,SAAS,CAAC38C,CAAvC,EAA0C28C,SAAS,CAACxqB,CAApD;AAEA;;AAED,WAAO,IAAP;AAEA,GA3NwC;AA6NzCoI,EAAAA,kBAAkB,EAAE,UAAW1V,CAAX,EAAe;AAElC,SAAM,IAAIpsB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKguC,KAA1B,EAAiCpuC,CAAC,GAAGI,CAArC,EAAwCJ,CAAC,EAAzC,EAA+C;AAE9CkkD,MAAAA,SAAS,CAAC78C,CAAV,GAAc,KAAKwqB,IAAL,CAAW7xB,CAAX,CAAd;AACAkkD,MAAAA,SAAS,CAAC38C,CAAV,GAAc,KAAKuqB,IAAL,CAAW9xB,CAAX,CAAd;AACAkkD,MAAAA,SAAS,CAACxqB,CAAV,GAAc,KAAKyB,IAAL,CAAWn7B,CAAX,CAAd;;AAEAkkD,MAAAA,SAAS,CAACpiB,kBAAV,CAA8B1V,CAA9B;;AAEA,WAAKk5B,MAAL,CAAatlD,CAAb,EAAgBkkD,SAAS,CAAC78C,CAA1B,EAA6B68C,SAAS,CAAC38C,CAAvC,EAA0C28C,SAAS,CAACxqB,CAApD;AAEA;;AAED,WAAO,IAAP;AAEA,GA7OwC;AA+OzClL,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAkB0G,MAAlB,EAA2B;AAE/B,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAKqhB,KAAL,CAAWqD,GAAX,CAAgBprB,KAAhB,EAAuB0G,MAAvB;AAEA,WAAO,IAAP;AAEA,GAvPwC;AAyPzC+nB,EAAAA,IAAI,EAAE,UAAWtoB,KAAX,EAAmB;AAExB,WAAO,KAAK4hB,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAzB,CAAP;AAEA,GA7PwC;AA+PzCt1B,EAAAA,IAAI,EAAE,UAAWxlB,KAAX,EAAkBlC,CAAlB,EAAsB;AAE3B,SAAK8jB,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAzB,IAAsCh9C,CAAtC;AAEA,WAAO,IAAP;AAEA,GArQwC;AAuQzCyqB,EAAAA,IAAI,EAAE,UAAWvoB,KAAX,EAAmB;AAExB,WAAO,KAAK4hB,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAb,GAAwB,CAApC,CAAP;AAEA,GA3QwC;AA6QzCr1B,EAAAA,IAAI,EAAE,UAAWzlB,KAAX,EAAkBhC,CAAlB,EAAsB;AAE3B,SAAK4jB,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAb,GAAwB,CAApC,IAA0C98C,CAA1C;AAEA,WAAO,IAAP;AAEA,GAnRwC;AAqRzC4zB,EAAAA,IAAI,EAAE,UAAW5xB,KAAX,EAAmB;AAExB,WAAO,KAAK4hB,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAb,GAAwB,CAApC,CAAP;AAEA,GAzRwC;AA2RzCzqB,EAAAA,IAAI,EAAE,UAAWrwB,KAAX,EAAkBmwB,CAAlB,EAAsB;AAE3B,SAAKvO,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAb,GAAwB,CAApC,IAA0C3qB,CAA1C;AAEA,WAAO,IAAP;AAEA,GAjSwC;AAmSzC0B,EAAAA,IAAI,EAAE,UAAW7xB,KAAX,EAAmB;AAExB,WAAO,KAAK4hB,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAb,GAAwB,CAApC,CAAP;AAEA,GAvSwC;AAySzCxqB,EAAAA,IAAI,EAAE,UAAWtwB,KAAX,EAAkBuT,CAAlB,EAAsB;AAE3B,SAAKqO,KAAL,CAAY5hB,KAAK,GAAG,KAAK86C,QAAb,GAAwB,CAApC,IAA0CvnC,CAA1C;AAEA,WAAO,IAAP;AAEA,GA/SwC;AAiTzCuoC,EAAAA,KAAK,EAAE,UAAW97C,KAAX,EAAkBlC,CAAlB,EAAqBE,CAArB,EAAyB;AAE/BgC,IAAAA,KAAK,IAAI,KAAK86C,QAAd;AAEA,SAAKl5B,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BlC,CAA1B;AACA,SAAK8jB,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BhC,CAA1B;AAEA,WAAO,IAAP;AAEA,GA1TwC;AA4TzC+9C,EAAAA,MAAM,EAAE,UAAW/7C,KAAX,EAAkBlC,CAAlB,EAAqBE,CAArB,EAAwBmyB,CAAxB,EAA4B;AAEnCnwB,IAAAA,KAAK,IAAI,KAAK86C,QAAd;AAEA,SAAKl5B,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BlC,CAA1B;AACA,SAAK8jB,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BhC,CAA1B;AACA,SAAK4jB,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BmwB,CAA1B;AAEA,WAAO,IAAP;AAEA,GAtUwC;AAwUzC6rB,EAAAA,OAAO,EAAE,UAAWh8C,KAAX,EAAkBlC,CAAlB,EAAqBE,CAArB,EAAwBmyB,CAAxB,EAA2B5c,CAA3B,EAA+B;AAEvCvT,IAAAA,KAAK,IAAI,KAAK86C,QAAd;AAEA,SAAKl5B,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BlC,CAA1B;AACA,SAAK8jB,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BhC,CAA1B;AACA,SAAK4jB,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BmwB,CAA1B;AACA,SAAKvO,KAAL,CAAY5hB,KAAK,GAAG,CAApB,IAA0BuT,CAA1B;AAEA,WAAO,IAAP;AAEA,GAnVwC;AAqVzC0oC,EAAAA,QAAQ,EAAE,UAAWzzC,QAAX,EAAsB;AAE/B,SAAK0yC,gBAAL,GAAwB1yC,QAAxB;AAEA,WAAO,IAAP;AAEA,GA3VwC;AA6VzCod,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,CAAsB,KAAKiqB,KAA3B,EAAkC,KAAKk5B,QAAvC,EAAkDj1B,IAAlD,CAAwD,IAAxD,CAAP;AAEA,GAjWwC;AAmWzC0J,EAAAA,MAAM,EAAE,YAAY;AAEnB,WAAO;AACNurB,MAAAA,QAAQ,EAAE,KAAKA,QADT;AAENl6C,MAAAA,IAAI,EAAE,KAAKghB,KAAL,CAAWjqB,WAAX,CAAuBoU,IAFvB;AAGN6V,MAAAA,KAAK,EAAEtsB,KAAK,CAACC,SAAN,CAAgBG,KAAhB,CAAsBI,IAAtB,CAA4B,KAAK8rB,KAAjC,CAHD;AAIN2yB,MAAAA,UAAU,EAAE,KAAKA;AAJX,KAAP;AAOA;AA5WwC,CAA1C,GAgXA;;AAEA,SAAS2H,mBAAT,CAA8Bt6B,KAA9B,EAAqCk5B,QAArC,EAA+CvG,UAA/C,EAA4D;AAE3DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAIqmD,SAAJ,CAAev6B,KAAf,CAA5B,EAAoDk5B,QAApD,EAA8DvG,UAA9D;AAEA;;AAED2H,mBAAmB,CAAC3mD,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAhC;AACA2mD,mBAAmB,CAAC3mD,SAApB,CAA8BoC,WAA9B,GAA4CukD,mBAA5C;;AAGA,SAASE,oBAAT,CAA+Bx6B,KAA/B,EAAsCk5B,QAAtC,EAAgDvG,UAAhD,EAA6D;AAE5DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAIumD,UAAJ,CAAgBz6B,KAAhB,CAA5B,EAAqDk5B,QAArD,EAA+DvG,UAA/D;AAEA;;AAED6H,oBAAoB,CAAC7mD,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAjC;AACA6mD,oBAAoB,CAAC7mD,SAArB,CAA+BoC,WAA/B,GAA6CykD,oBAA7C;;AAGA,SAASE,2BAAT,CAAsC16B,KAAtC,EAA6Ck5B,QAA7C,EAAuDvG,UAAvD,EAAoE;AAEnEsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAIymD,iBAAJ,CAAuB36B,KAAvB,CAA5B,EAA4Dk5B,QAA5D,EAAsEvG,UAAtE;AAEA;;AAED+H,2BAA2B,CAAC/mD,SAA5B,GAAwCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAxC;AACA+mD,2BAA2B,CAAC/mD,SAA5B,CAAsCoC,WAAtC,GAAoD2kD,2BAApD;;AAGA,SAASE,oBAAT,CAA+B56B,KAA/B,EAAsCk5B,QAAtC,EAAgDvG,UAAhD,EAA6D;AAE5DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAI2mD,UAAJ,CAAgB76B,KAAhB,CAA5B,EAAqDk5B,QAArD,EAA+DvG,UAA/D;AAEA;;AAEDiI,oBAAoB,CAACjnD,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAjC;AACAinD,oBAAoB,CAACjnD,SAArB,CAA+BoC,WAA/B,GAA6C6kD,oBAA7C;;AAGA,SAASE,qBAAT,CAAgC96B,KAAhC,EAAuCk5B,QAAvC,EAAiDvG,UAAjD,EAA8D;AAE7DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAI6mD,WAAJ,CAAiB/6B,KAAjB,CAA5B,EAAsDk5B,QAAtD,EAAgEvG,UAAhE;AAEA;;AAEDmI,qBAAqB,CAACnnD,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAlC;AACAmnD,qBAAqB,CAACnnD,SAAtB,CAAgCoC,WAAhC,GAA8C+kD,qBAA9C;;AAGA,SAASE,oBAAT,CAA+Bh7B,KAA/B,EAAsCk5B,QAAtC,EAAgDvG,UAAhD,EAA6D;AAE5DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAI+mD,UAAJ,CAAgBj7B,KAAhB,CAA5B,EAAqDk5B,QAArD,EAA+DvG,UAA/D;AAEA;;AAEDqI,oBAAoB,CAACrnD,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAjC;AACAqnD,oBAAoB,CAACrnD,SAArB,CAA+BoC,WAA/B,GAA6CilD,oBAA7C;;AAGA,SAASE,qBAAT,CAAgCl7B,KAAhC,EAAuCk5B,QAAvC,EAAiDvG,UAAjD,EAA8D;AAE7DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAIinD,WAAJ,CAAiBn7B,KAAjB,CAA5B,EAAsDk5B,QAAtD,EAAgEvG,UAAhE;AAEA;;AAEDuI,qBAAqB,CAACvnD,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAlC;AACAunD,qBAAqB,CAACvnD,SAAtB,CAAgCoC,WAAhC,GAA8CmlD,qBAA9C;;AAGA,SAASE,sBAAT,CAAiCp7B,KAAjC,EAAwCk5B,QAAxC,EAAkDvG,UAAlD,EAA+D;AAE9DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAImnD,YAAJ,CAAkBr7B,KAAlB,CAA5B,EAAuDk5B,QAAvD,EAAiEvG,UAAjE;AAEA;;AAEDyI,sBAAsB,CAACznD,SAAvB,GAAmCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAnC;AACAynD,sBAAsB,CAACznD,SAAvB,CAAiCoC,WAAjC,GAA+CqlD,sBAA/C;;AAGA,SAASE,sBAAT,CAAiCt7B,KAAjC,EAAwCk5B,QAAxC,EAAkDvG,UAAlD,EAA+D;AAE9DsG,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B,IAAIqnD,YAAJ,CAAkBv7B,KAAlB,CAA5B,EAAuDk5B,QAAvD,EAAiEvG,UAAjE;AAEA;;AAED2I,sBAAsB,CAAC3nD,SAAvB,GAAmCY,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAnC;AACA2nD,sBAAsB,CAAC3nD,SAAvB,CAAiCoC,WAAjC,GAA+CulD,sBAA/C;AAEA;;;;AAIA,SAASE,cAAT,GAA0B;AAEzB,OAAKC,QAAL,GAAgB,EAAhB;AACA,OAAKC,OAAL,GAAe,EAAf;AACA,OAAK7B,MAAL,GAAc,EAAd;AACA,OAAK8B,GAAL,GAAW,EAAX;AACA,OAAKC,IAAL,GAAY,EAAZ;AAEA,OAAKC,MAAL,GAAc,EAAd;AAEA,OAAKtD,YAAL,GAAoB,EAApB;AAEA,OAAKuD,WAAL,GAAmB,EAAnB;AACA,OAAKC,WAAL,GAAmB,EAAnB,CAbyB,CAezB;;AAEA,OAAK5U,WAAL,GAAmB,IAAnB;AACA,OAAK6U,cAAL,GAAsB,IAAtB,CAlByB,CAoBzB;;AAEA,OAAKC,kBAAL,GAA0B,KAA1B;AACA,OAAKC,iBAAL,GAAyB,KAAzB;AACA,OAAKC,gBAAL,GAAwB,KAAxB;AACA,OAAKC,aAAL,GAAqB,KAArB;AACA,OAAKC,gBAAL,GAAwB,KAAxB;AAEA;;AAED9nD,MAAM,CAACme,MAAP,CAAe8oC,cAAc,CAAC7nD,SAA9B,EAAyC;AAExC2oD,EAAAA,aAAa,EAAE,UAAW9Y,QAAX,EAAsB;AAEpC,UAAMqY,MAAM,GAAG,EAAf;AAEA,QAAIU,KAAJ,EAAW1nD,CAAX;AACA,QAAIi+C,aAAa,GAAGl9C,SAApB;AAEA,UAAM4mD,KAAK,GAAGhZ,QAAQ,CAACgZ,KAAvB;;AAEA,SAAM3nD,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAG2nD,KAAK,CAAChpD,MAAvB,EAA+BqB,CAAC,EAAhC,EAAsC;AAErC,YAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB,CAFqC,CAIrC;;AAEA,UAAK4nD,IAAI,CAAC3J,aAAL,KAAuBA,aAA5B,EAA4C;AAE3CA,QAAAA,aAAa,GAAG2J,IAAI,CAAC3J,aAArB;;AAEA,YAAKyJ,KAAK,KAAK3mD,SAAf,EAA2B;AAE1B2mD,UAAAA,KAAK,CAACtZ,KAAN,GAAgBpuC,CAAC,GAAG,CAAN,GAAY0nD,KAAK,CAAClP,KAAhC;AACAwO,UAAAA,MAAM,CAAC79C,IAAP,CAAau+C,KAAb;AAEA;;AAEDA,QAAAA,KAAK,GAAG;AACPlP,UAAAA,KAAK,EAAEx4C,CAAC,GAAG,CADJ;AAEPi+C,UAAAA,aAAa,EAAEA;AAFR,SAAR;AAKA;AAED;;AAED,QAAKyJ,KAAK,KAAK3mD,SAAf,EAA2B;AAE1B2mD,MAAAA,KAAK,CAACtZ,KAAN,GAAgBpuC,CAAC,GAAG,CAAN,GAAY0nD,KAAK,CAAClP,KAAhC;AACAwO,MAAAA,MAAM,CAAC79C,IAAP,CAAau+C,KAAb;AAEA;;AAED,SAAKV,MAAL,GAAcA,MAAd;AAEA,GA9CuC;AAgDxCa,EAAAA,YAAY,EAAE,UAAWlZ,QAAX,EAAsB;AAEnC,UAAMgZ,KAAK,GAAGhZ,QAAQ,CAACgZ,KAAvB;AACA,UAAMf,QAAQ,GAAGjY,QAAQ,CAACiY,QAA1B;AACA,UAAMkB,aAAa,GAAGnZ,QAAQ,CAACmZ,aAA/B;AAEA,UAAMC,eAAe,GAAGD,aAAa,CAAE,CAAF,CAAb,IAAsBA,aAAa,CAAE,CAAF,CAAb,CAAmBnpD,MAAnB,GAA4B,CAA1E;AACA,UAAMqpD,gBAAgB,GAAGF,aAAa,CAAE,CAAF,CAAb,IAAsBA,aAAa,CAAE,CAAF,CAAb,CAAmBnpD,MAAnB,GAA4B,CAA3E,CAPmC,CASnC;;AAEA,UAAM+kD,YAAY,GAAG/U,QAAQ,CAAC+U,YAA9B;AACA,UAAMuE,kBAAkB,GAAGvE,YAAY,CAAC/kD,MAAxC;AAEA,QAAIupD,oBAAJ;;AAEA,QAAKD,kBAAkB,GAAG,CAA1B,EAA8B;AAE7BC,MAAAA,oBAAoB,GAAG,EAAvB;;AAEA,WAAM,IAAIloD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGioD,kBAArB,EAAyCjoD,CAAC,EAA1C,EAAgD;AAE/CkoD,QAAAA,oBAAoB,CAAEloD,CAAF,CAApB,GAA4B;AAC3BsV,UAAAA,IAAI,EAAEouC,YAAY,CAAE1jD,CAAF,CAAZ,CAAkBsV,IADG;AAE1B65B,UAAAA,IAAI,EAAE;AAFoB,SAA5B;AAKA;;AAED,WAAKuU,YAAL,CAAkBl9C,QAAlB,GAA6B0hD,oBAA7B;AAEA;;AAED,UAAMvE,YAAY,GAAGhV,QAAQ,CAACgV,YAA9B;AACA,UAAMwE,kBAAkB,GAAGxE,YAAY,CAAChlD,MAAxC;AAEA,QAAIypD,kBAAJ;;AAEA,QAAKD,kBAAkB,GAAG,CAA1B,EAA8B;AAE7BC,MAAAA,kBAAkB,GAAG,EAArB;;AAEA,WAAM,IAAIpoD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmoD,kBAArB,EAAyCnoD,CAAC,EAA1C,EAAgD;AAE/CooD,QAAAA,kBAAkB,CAAEpoD,CAAF,CAAlB,GAA0B;AACzBsV,UAAAA,IAAI,EAAEquC,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBsV,IADC;AAExB65B,UAAAA,IAAI,EAAE;AAFkB,SAA1B;AAKA;;AAED,WAAKuU,YAAL,CAAkB/gB,MAAlB,GAA2BylB,kBAA3B;AAEA,KArDkC,CAuDnC;;;AAEA,UAAMlB,WAAW,GAAGvY,QAAQ,CAACuY,WAA7B;AACA,UAAMD,WAAW,GAAGtY,QAAQ,CAACsY,WAA7B;AAEA,UAAMoB,cAAc,GAAGnB,WAAW,CAACvoD,MAAZ,KAAuBioD,QAAQ,CAACjoD,MAAvD;AACA,UAAM2pD,cAAc,GAAGrB,WAAW,CAACtoD,MAAZ,KAAuBioD,QAAQ,CAACjoD,MAAvD,CA7DmC,CA+DnC;;AAEA,QAAKioD,QAAQ,CAACjoD,MAAT,GAAkB,CAAlB,IAAuBgpD,KAAK,CAAChpD,MAAN,KAAiB,CAA7C,EAAiD;AAEhD8vB,MAAAA,OAAO,CAACyD,KAAR,CAAe,8DAAf;AAEA;;AAED,SAAM,IAAIlyB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2nD,KAAK,CAAChpD,MAA3B,EAAmCqB,CAAC,EAApC,EAA0C;AAEzC,YAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;AAEA,WAAK4mD,QAAL,CAAcz9C,IAAd,CAAoBy9C,QAAQ,CAAEgB,IAAI,CAACxpD,CAAP,CAA5B,EAAwCwoD,QAAQ,CAAEgB,IAAI,CAACzpD,CAAP,CAAhD,EAA4DyoD,QAAQ,CAAEgB,IAAI,CAAC/kD,CAAP,CAApE;AAEA,YAAMq7C,aAAa,GAAG0J,IAAI,CAAC1J,aAA3B;;AAEA,UAAKA,aAAa,CAACv/C,MAAd,KAAyB,CAA9B,EAAkC;AAEjC,aAAKkoD,OAAL,CAAa19C,IAAb,CAAmB+0C,aAAa,CAAE,CAAF,CAAhC,EAAuCA,aAAa,CAAE,CAAF,CAApD,EAA2DA,aAAa,CAAE,CAAF,CAAxE;AAEA,OAJD,MAIO;AAEN,cAAMvb,MAAM,GAAGilB,IAAI,CAACjlB,MAApB;AAEA,aAAKkkB,OAAL,CAAa19C,IAAb,CAAmBw5B,MAAnB,EAA2BA,MAA3B,EAAmCA,MAAnC;AAEA;;AAED,YAAMwb,YAAY,GAAGyJ,IAAI,CAACzJ,YAA1B;;AAEA,UAAKA,YAAY,CAACx/C,MAAb,KAAwB,CAA7B,EAAiC;AAEhC,aAAKqmD,MAAL,CAAY77C,IAAZ,CAAkBg1C,YAAY,CAAE,CAAF,CAA9B,EAAqCA,YAAY,CAAE,CAAF,CAAjD,EAAwDA,YAAY,CAAE,CAAF,CAApE;AAEA,OAJD,MAIO;AAEN,cAAM1gD,KAAK,GAAGmqD,IAAI,CAACnqD,KAAnB;AAEA,aAAKunD,MAAL,CAAY77C,IAAZ,CAAkB1L,KAAlB,EAAyBA,KAAzB,EAAgCA,KAAhC;AAEA;;AAED,UAAKsqD,eAAe,KAAK,IAAzB,EAAgC;AAE/B,cAAMQ,SAAS,GAAGT,aAAa,CAAE,CAAF,CAAb,CAAoB9nD,CAApB,CAAlB;;AAEA,YAAKuoD,SAAS,KAAKxnD,SAAnB,EAA+B;AAE9B,eAAK+lD,GAAL,CAAS39C,IAAT,CAAeo/C,SAAS,CAAE,CAAF,CAAxB,EAA+BA,SAAS,CAAE,CAAF,CAAxC,EAA+CA,SAAS,CAAE,CAAF,CAAxD;AAEA,SAJD,MAIO;AAEN95B,UAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd,EAA0E1uB,CAA1E;AAEA,eAAK8mD,GAAL,CAAS39C,IAAT,CAAe,IAAIwlB,OAAJ,EAAf,EAA8B,IAAIA,OAAJ,EAA9B,EAA6C,IAAIA,OAAJ,EAA7C;AAEA;AAED;;AAED,UAAKq5B,gBAAgB,KAAK,IAA1B,EAAiC;AAEhC,cAAMO,SAAS,GAAGT,aAAa,CAAE,CAAF,CAAb,CAAoB9nD,CAApB,CAAlB;;AAEA,YAAKuoD,SAAS,KAAKxnD,SAAnB,EAA+B;AAE9B,eAAKgmD,IAAL,CAAU59C,IAAV,CAAgBo/C,SAAS,CAAE,CAAF,CAAzB,EAAgCA,SAAS,CAAE,CAAF,CAAzC,EAAgDA,SAAS,CAAE,CAAF,CAAzD;AAEA,SAJD,MAIO;AAEN95B,UAAAA,OAAO,CAACC,IAAR,CAAc,2DAAd,EAA2E1uB,CAA3E;AAEA,eAAK+mD,IAAL,CAAU59C,IAAV,CAAgB,IAAIwlB,OAAJ,EAAhB,EAA+B,IAAIA,OAAJ,EAA/B,EAA8C,IAAIA,OAAJ,EAA9C;AAEA;AAED,OApEwC,CAsEzC;;;AAEA,WAAM,IAAIklB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGoU,kBAArB,EAAyCpU,CAAC,EAA1C,EAAgD;AAE/C,cAAM2U,WAAW,GAAG9E,YAAY,CAAE7P,CAAF,CAAZ,CAAkB+S,QAAtC;AAEAsB,QAAAA,oBAAoB,CAAErU,CAAF,CAApB,CAA0B1E,IAA1B,CAA+BhmC,IAA/B,CAAqCq/C,WAAW,CAAEZ,IAAI,CAACxpD,CAAP,CAAhD,EAA4DoqD,WAAW,CAAEZ,IAAI,CAACzpD,CAAP,CAAvE,EAAmFqqD,WAAW,CAAEZ,IAAI,CAAC/kD,CAAP,CAA9F;AAEA;;AAED,WAAM,IAAIgxC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGsU,kBAArB,EAAyCtU,CAAC,EAA1C,EAAgD;AAE/C,cAAM4U,WAAW,GAAG9E,YAAY,CAAE9P,CAAF,CAAZ,CAAkBqK,aAAlB,CAAiCl+C,CAAjC,CAApB;AAEAooD,QAAAA,kBAAkB,CAAEvU,CAAF,CAAlB,CAAwB1E,IAAxB,CAA6BhmC,IAA7B,CAAmCs/C,WAAW,CAACrqD,CAA/C,EAAkDqqD,WAAW,CAACtqD,CAA9D,EAAiEsqD,WAAW,CAAC5lD,CAA7E;AAEA,OAtFwC,CAwFzC;;;AAEA,UAAKwlD,cAAL,EAAsB;AAErB,aAAKnB,WAAL,CAAiB/9C,IAAjB,CAAuB+9C,WAAW,CAAEU,IAAI,CAACxpD,CAAP,CAAlC,EAA8C8oD,WAAW,CAAEU,IAAI,CAACzpD,CAAP,CAAzD,EAAqE+oD,WAAW,CAAEU,IAAI,CAAC/kD,CAAP,CAAhF;AAEA;;AAED,UAAKylD,cAAL,EAAsB;AAErB,aAAKrB,WAAL,CAAiB99C,IAAjB,CAAuB89C,WAAW,CAAEW,IAAI,CAACxpD,CAAP,CAAlC,EAA8C6oD,WAAW,CAAEW,IAAI,CAACzpD,CAAP,CAAzD,EAAqE8oD,WAAW,CAAEW,IAAI,CAAC/kD,CAAP,CAAhF;AAEA;AAED;;AAED,SAAK4kD,aAAL,CAAoB9Y,QAApB;AAEA,SAAKyY,kBAAL,GAA0BzY,QAAQ,CAACyY,kBAAnC;AACA,SAAKC,iBAAL,GAAyB1Y,QAAQ,CAAC0Y,iBAAlC;AACA,SAAKC,gBAAL,GAAwB3Y,QAAQ,CAAC2Y,gBAAjC;AACA,SAAKC,aAAL,GAAqB5Y,QAAQ,CAAC4Y,aAA9B;AACA,SAAKC,gBAAL,GAAwB7Y,QAAQ,CAAC6Y,gBAAjC;;AAEA,QAAK7Y,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,WAAKA,cAAL,GAAsBxY,QAAQ,CAACwY,cAAT,CAAwBh4B,KAAxB,EAAtB;AAEA;;AAED,QAAKwf,QAAQ,CAAC2D,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,WAAKA,WAAL,GAAmB3D,QAAQ,CAAC2D,WAAT,CAAqBnjB,KAArB,EAAnB;AAEA;;AAED,WAAO,IAAP;AAEA;AArPuC,CAAzC;AAyPA;;;;AAIA,SAASu5B,QAAT,CAAmBv9B,KAAnB,EAA2B;AAE1B,MAAKA,KAAK,CAACxsB,MAAN,KAAiB,CAAtB,EAA0B,OAAO,CAAEiyC,QAAT;AAE1B,MAAI7tC,GAAG,GAAGooB,KAAK,CAAE,CAAF,CAAf;;AAEA,OAAM,IAAInrB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+qB,KAAK,CAACxsB,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0C,EAAGJ,CAA7C,EAAiD;AAEhD,QAAKmrB,KAAK,CAAEnrB,CAAF,CAAL,GAAa+C,GAAlB,EAAwBA,GAAG,GAAGooB,KAAK,CAAEnrB,CAAF,CAAX;AAExB;;AAED,SAAO+C,GAAP;AAEA;AAED;;;;;;AAKA,IAAI4lD,iBAAiB,GAAG,CAAxB,EAA2B;;AAE3B,MAAMC,KAAK,GAAG,IAAIllB,OAAJ,EAAd;;AACA,MAAMmlB,IAAI,GAAG,IAAIve,QAAJ,EAAb;;AACA,MAAMwe,OAAO,GAAG,IAAIvoB,OAAJ,EAAhB;;AACA,MAAMwoB,MAAM,GAAG,IAAI9Y,IAAJ,EAAf;;AACA,MAAM+Y,gBAAgB,GAAG,IAAI/Y,IAAJ,EAAzB;;AACA,MAAMgZ,SAAS,GAAG,IAAI1oB,OAAJ,EAAlB;;AAEA,SAAS2oB,cAAT,GAA0B;AAEzBxpD,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAER,IAAAA,KAAK,EAAEulD,iBAAiB,IAAI;AAA9B,GAAnC;AAEA,OAAK58B,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA,OAAKnW,IAAL,GAAY,EAAZ;AACA,OAAKnL,IAAL,GAAY,gBAAZ;AAEA,OAAKZ,KAAL,GAAa,IAAb;AACA,OAAK4/C,UAAL,GAAkB,EAAlB;AAEA,OAAKC,eAAL,GAAuB,EAAvB;AACA,OAAKC,oBAAL,GAA4B,KAA5B;AAEA,OAAKrC,MAAL,GAAc,EAAd;AAEA,OAAK1U,WAAL,GAAmB,IAAnB;AACA,OAAK6U,cAAL,GAAsB,IAAtB;AAEA,OAAKmC,SAAL,GAAiB;AAAE9Q,IAAAA,KAAK,EAAE,CAAT;AAAYpK,IAAAA,KAAK,EAAEwC;AAAnB,GAAjB;AAEA,OAAKtF,QAAL,GAAgB,EAAhB;AAEA;;AAED4d,cAAc,CAACpqD,SAAf,GAA2BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAErFoC,EAAAA,WAAW,EAAEgoD,cAFwE;AAIrFK,EAAAA,gBAAgB,EAAE,IAJmE;AAMrFC,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKjgD,KAAZ;AAEA,GAVoF;AAYrFkgD,EAAAA,QAAQ,EAAE,UAAWlgD,KAAX,EAAmB;AAE5B,QAAK1K,KAAK,CAACoC,OAAN,CAAesI,KAAf,CAAL,EAA8B;AAE7B,WAAKA,KAAL,GAAa,KAAMm/C,QAAQ,CAAEn/C,KAAF,CAAR,GAAoB,KAApB,GAA4B88C,qBAA5B,GAAoDJ,qBAA1D,EAAmF18C,KAAnF,EAA0F,CAA1F,CAAb;AAEA,KAJD,MAIO;AAEN,WAAKA,KAAL,GAAaA,KAAb;AAEA;AAED,GAxBoF;AA0BrFmgD,EAAAA,YAAY,EAAE,UAAWp0C,IAAX,EAAkB;AAE/B,WAAO,KAAK6zC,UAAL,CAAiB7zC,IAAjB,CAAP;AAEA,GA9BoF;AAgCrF7K,EAAAA,YAAY,EAAE,UAAW6K,IAAX,EAAiBsc,SAAjB,EAA6B;AAE1C,SAAKu3B,UAAL,CAAiB7zC,IAAjB,IAA0Bsc,SAA1B;AAEA,WAAO,IAAP;AAEA,GAtCoF;AAwCrF+3B,EAAAA,eAAe,EAAE,UAAWr0C,IAAX,EAAkB;AAElC,WAAO,KAAK6zC,UAAL,CAAiB7zC,IAAjB,CAAP;AAEA,WAAO,IAAP;AAEA,GA9CoF;AAgDrFs0C,EAAAA,QAAQ,EAAE,UAAWpR,KAAX,EAAkBpK,KAAlB,EAAyB6P,aAAzB,EAAyC;AAElD,SAAK+I,MAAL,CAAY79C,IAAZ,CAAkB;AAEjBqvC,MAAAA,KAAK,EAAEA,KAFU;AAGjBpK,MAAAA,KAAK,EAAEA,KAHU;AAIjB6P,MAAAA,aAAa,EAAEA,aAAa,KAAKl9C,SAAlB,GAA8Bk9C,aAA9B,GAA8C;AAJ5C,KAAlB;AAQA,GA1DoF;AA4DrF4L,EAAAA,WAAW,EAAE,YAAY;AAExB,SAAK7C,MAAL,GAAc,EAAd;AAEA,GAhEoF;AAkErF8C,EAAAA,YAAY,EAAE,UAAWtR,KAAX,EAAkBpK,KAAlB,EAA0B;AAEvC,SAAKkb,SAAL,CAAe9Q,KAAf,GAAuBA,KAAvB;AACA,SAAK8Q,SAAL,CAAelb,KAAf,GAAuBA,KAAvB;AAEA,GAvEoF;AAyErFtU,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAoB;AAEjC,UAAMvuB,QAAQ,GAAG,KAAK2iD,UAAL,CAAgB3iD,QAAjC;;AAEA,QAAKA,QAAQ,KAAKzF,SAAlB,EAA8B;AAE7ByF,MAAAA,QAAQ,CAACszB,YAAT,CAAuB/E,MAAvB;AAEAvuB,MAAAA,QAAQ,CAACujD,WAAT,GAAuB,IAAvB;AAEA;;AAED,UAAMpnB,MAAM,GAAG,KAAKwmB,UAAL,CAAgBxmB,MAA/B;;AAEA,QAAKA,MAAM,KAAK5hC,SAAhB,EAA4B;AAE3B,YAAM+pC,YAAY,GAAG,IAAI7Y,OAAJ,GAAcuD,eAAd,CAA+BT,MAA/B,CAArB;AAEA4N,MAAAA,MAAM,CAAC7B,iBAAP,CAA0BgK,YAA1B;AAEAnI,MAAAA,MAAM,CAAConB,WAAP,GAAqB,IAArB;AAEA;;AAED,UAAMC,OAAO,GAAG,KAAKb,UAAL,CAAgBa,OAAhC;;AAEA,QAAKA,OAAO,KAAKjpD,SAAjB,EAA6B;AAE5BipD,MAAAA,OAAO,CAACloB,kBAAR,CAA4B/M,MAA5B;AAEAi1B,MAAAA,OAAO,CAACD,WAAR,GAAsB,IAAtB;AAEA;;AAED,QAAK,KAAKzX,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,WAAKC,kBAAL;AAEA;;AAED,QAAK,KAAK4U,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,WAAK8C,qBAAL;AAEA;;AAED,WAAO,IAAP;AAEA,GAzHoF;AA2HrFje,EAAAA,OAAO,EAAE,UAAWnb,KAAX,EAAmB;AAE3B;AAEA+3B,IAAAA,KAAK,CAAC7hB,aAAN,CAAqBlW,KAArB;;AAEA,SAAKiJ,YAAL,CAAmB8uB,KAAnB;AAEA,WAAO,IAAP;AAEA,GArIoF;AAuIrF3c,EAAAA,OAAO,EAAE,UAAWpb,KAAX,EAAmB;AAE3B;AAEA+3B,IAAAA,KAAK,CAAC5hB,aAAN,CAAqBnW,KAArB;;AAEA,SAAKiJ,YAAL,CAAmB8uB,KAAnB;AAEA,WAAO,IAAP;AAEA,GAjJoF;AAmJrF1c,EAAAA,OAAO,EAAE,UAAWrb,KAAX,EAAmB;AAE3B;AAEA+3B,IAAAA,KAAK,CAAC3hB,aAAN,CAAqBpW,KAArB;;AAEA,SAAKiJ,YAAL,CAAmB8uB,KAAnB;AAEA,WAAO,IAAP;AAEA,GA7JoF;AA+JrFtyB,EAAAA,SAAS,EAAE,UAAWjvB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE/B;AAEAkvB,IAAAA,KAAK,CAAC9hB,eAAN,CAAuBz/B,CAAvB,EAA0BE,CAA1B,EAA6BmyB,CAA7B;;AAEA,SAAKI,YAAL,CAAmB8uB,KAAnB;AAEA,WAAO,IAAP;AAEA,GAzKoF;AA2KrFzyB,EAAAA,KAAK,EAAE,UAAW9uB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE3B;AAEAkvB,IAAAA,KAAK,CAACzhB,SAAN,CAAiB9/B,CAAjB,EAAoBE,CAApB,EAAuBmyB,CAAvB;;AAEA,SAAKI,YAAL,CAAmB8uB,KAAnB;AAEA,WAAO,IAAP;AAEA,GArLoF;AAuLrFrjB,EAAAA,MAAM,EAAE,UAAWkH,MAAX,EAAoB;AAE3Boc,IAAAA,IAAI,CAACtjB,MAAL,CAAakH,MAAb;;AAEAoc,IAAAA,IAAI,CAAChwB,YAAL;;AAEA,SAAKiB,YAAL,CAAmB+uB,IAAI,CAAC9zB,MAAxB;AAEA,WAAO,IAAP;AAEA,GAjMoF;AAmMrF/C,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKugB,kBAAL;AAEA,SAAKD,WAAL,CAAiBL,SAAjB,CAA4B6W,OAA5B,EAAsCx4B,MAAtC;AAEA,SAAKgG,SAAL,CAAgBwyB,OAAO,CAACzhD,CAAxB,EAA2ByhD,OAAO,CAACvhD,CAAnC,EAAsCuhD,OAAO,CAACpvB,CAA9C;AAEA,WAAO,IAAP;AAEA,GA7MoF;AA+MrFoY,EAAAA,aAAa,EAAE,UAAWrtC,MAAX,EAAoB;AAElC;AAEA,UAAMkqC,QAAQ,GAAGlqC,MAAM,CAACkqC,QAAxB;;AAEA,QAAKlqC,MAAM,CAACiqC,QAAP,IAAmBjqC,MAAM,CAACgqC,MAA/B,EAAwC;AAEvC,YAAMyb,SAAS,GAAG,IAAI3D,sBAAJ,CAA4B5X,QAAQ,CAACiY,QAAT,CAAkBjoD,MAAlB,GAA2B,CAAvD,EAA0D,CAA1D,CAAlB;AACA,YAAMqmD,MAAM,GAAG,IAAIuB,sBAAJ,CAA4B5X,QAAQ,CAACqW,MAAT,CAAgBrmD,MAAhB,GAAyB,CAArD,EAAwD,CAAxD,CAAf;AAEA,WAAK8L,YAAL,CAAmB,UAAnB,EAA+By/C,SAAS,CAAC/E,iBAAV,CAA6BxW,QAAQ,CAACiY,QAAtC,CAA/B;AACA,WAAKn8C,YAAL,CAAmB,OAAnB,EAA4Bu6C,MAAM,CAACD,eAAP,CAAwBpW,QAAQ,CAACqW,MAAjC,CAA5B;;AAEA,UAAKrW,QAAQ,CAACwb,aAAT,IAA0Bxb,QAAQ,CAACwb,aAAT,CAAuBxrD,MAAvB,KAAkCgwC,QAAQ,CAACiY,QAAT,CAAkBjoD,MAAnF,EAA4F;AAE3F,cAAMwrD,aAAa,GAAG,IAAI5D,sBAAJ,CAA4B5X,QAAQ,CAACwb,aAAT,CAAuBxrD,MAAnD,EAA2D,CAA3D,CAAtB;AAEA,aAAK8L,YAAL,CAAmB,cAAnB,EAAmC0/C,aAAa,CAACrF,SAAd,CAAyBnW,QAAQ,CAACwb,aAAlC,CAAnC;AAEA;;AAED,UAAKxb,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,aAAKA,cAAL,GAAsBxY,QAAQ,CAACwY,cAAT,CAAwBh4B,KAAxB,EAAtB;AAEA;;AAED,UAAKwf,QAAQ,CAAC2D,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,aAAKA,WAAL,GAAmB3D,QAAQ,CAAC2D,WAAT,CAAqBnjB,KAArB,EAAnB;AAEA;AAED,KA5BD,MA4BO,IAAK1qB,MAAM,CAAC+pC,MAAZ,EAAqB;AAE3B,UAAKG,QAAQ,IAAIA,QAAQ,CAACyb,UAA1B,EAAuC;AAEtC,aAAKvC,YAAL,CAAmBlZ,QAAnB;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GA7PoF;AA+PrF2C,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAoB;AAElC,UAAM/qC,QAAQ,GAAG,EAAjB;;AAEA,SAAM,IAAIxG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmxC,MAAM,CAAC5yC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAMmyC,KAAK,GAAGZ,MAAM,CAAEvxC,CAAF,CAApB;AACAwG,MAAAA,QAAQ,CAAC2C,IAAT,CAAegpC,KAAK,CAAC9qC,CAArB,EAAwB8qC,KAAK,CAAC5qC,CAA9B,EAAiC4qC,KAAK,CAACzY,CAAN,IAAW,CAA5C;AAEA;;AAED,SAAKjvB,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4B//C,QAA5B,EAAsC,CAAtC,CAA/B;AAEA,WAAO,IAAP;AAEA,GA9QoF;AAgRrF6jD,EAAAA,gBAAgB,EAAE,UAAW5lD,MAAX,EAAoB;AAErC,QAAIkqC,QAAQ,GAAGlqC,MAAM,CAACkqC,QAAtB;;AAEA,QAAKlqC,MAAM,CAAC+pC,MAAZ,EAAqB;AAEpB,UAAI8b,MAAM,GAAG3b,QAAQ,CAAC4b,gBAAtB;;AAEA,UAAK5b,QAAQ,CAAC6b,kBAAT,KAAgC,IAArC,EAA4C;AAE3CF,QAAAA,MAAM,GAAGvpD,SAAT;AACA4tC,QAAAA,QAAQ,CAAC6b,kBAAT,GAA8B,KAA9B;AAEA;;AAED,UAAKF,MAAM,KAAKvpD,SAAhB,EAA4B;AAE3B,eAAO,KAAK8mD,YAAL,CAAmBlZ,QAAnB,CAAP;AAEA;;AAED2b,MAAAA,MAAM,CAAClD,kBAAP,GAA4BzY,QAAQ,CAACyY,kBAArC;AACAkD,MAAAA,MAAM,CAACjD,iBAAP,GAA2B1Y,QAAQ,CAAC0Y,iBAApC;AACAiD,MAAAA,MAAM,CAAChD,gBAAP,GAA0B3Y,QAAQ,CAAC2Y,gBAAnC;AACAgD,MAAAA,MAAM,CAAC/C,aAAP,GAAuB5Y,QAAQ,CAAC4Y,aAAhC;AACA+C,MAAAA,MAAM,CAAC9C,gBAAP,GAA0B7Y,QAAQ,CAAC6Y,gBAAnC;AAEA7Y,MAAAA,QAAQ,CAACyY,kBAAT,GAA8B,KAA9B;AACAzY,MAAAA,QAAQ,CAAC0Y,iBAAT,GAA6B,KAA7B;AACA1Y,MAAAA,QAAQ,CAAC2Y,gBAAT,GAA4B,KAA5B;AACA3Y,MAAAA,QAAQ,CAAC4Y,aAAT,GAAyB,KAAzB;AACA5Y,MAAAA,QAAQ,CAAC6Y,gBAAT,GAA4B,KAA5B;AAEA7Y,MAAAA,QAAQ,GAAG2b,MAAX;AAEA;;AAED,QAAK3b,QAAQ,CAACyY,kBAAT,KAAgC,IAArC,EAA4C;AAE3C,YAAMx1B,SAAS,GAAG,KAAKu3B,UAAL,CAAgB3iD,QAAlC;;AAEA,UAAKorB,SAAS,KAAK7wB,SAAnB,EAA+B;AAE9B6wB,QAAAA,SAAS,CAACuzB,iBAAV,CAA6BxW,QAAQ,CAACiY,QAAtC;AACAh1B,QAAAA,SAAS,CAACm4B,WAAV,GAAwB,IAAxB;AAEA;;AAEDpb,MAAAA,QAAQ,CAACyY,kBAAT,GAA8B,KAA9B;AAEA;;AAED,QAAKzY,QAAQ,CAAC0Y,iBAAT,KAA+B,IAApC,EAA2C;AAE1C,YAAMz1B,SAAS,GAAG,KAAKu3B,UAAL,CAAgBxmB,MAAlC;;AAEA,UAAK/Q,SAAS,KAAK7wB,SAAnB,EAA+B;AAE9B6wB,QAAAA,SAAS,CAACuzB,iBAAV,CAA6BxW,QAAQ,CAACkY,OAAtC;AACAj1B,QAAAA,SAAS,CAACm4B,WAAV,GAAwB,IAAxB;AAEA;;AAEDpb,MAAAA,QAAQ,CAAC0Y,iBAAT,GAA6B,KAA7B;AAEA;;AAED,QAAK1Y,QAAQ,CAAC2Y,gBAAT,KAA8B,IAAnC,EAA0C;AAEzC,YAAM11B,SAAS,GAAG,KAAKu3B,UAAL,CAAgB1rD,KAAlC;;AAEA,UAAKm0B,SAAS,KAAK7wB,SAAnB,EAA+B;AAE9B6wB,QAAAA,SAAS,CAACmzB,eAAV,CAA2BpW,QAAQ,CAACqW,MAApC;AACApzB,QAAAA,SAAS,CAACm4B,WAAV,GAAwB,IAAxB;AAEA;;AAEDpb,MAAAA,QAAQ,CAAC2Y,gBAAT,GAA4B,KAA5B;AAEA;;AAED,QAAK3Y,QAAQ,CAAC4Y,aAAd,EAA8B;AAE7B,YAAM31B,SAAS,GAAG,KAAKu3B,UAAL,CAAgB3vB,EAAlC;;AAEA,UAAK5H,SAAS,KAAK7wB,SAAnB,EAA+B;AAE9B6wB,QAAAA,SAAS,CAACqzB,iBAAV,CAA6BtW,QAAQ,CAACmY,GAAtC;AACAl1B,QAAAA,SAAS,CAACm4B,WAAV,GAAwB,IAAxB;AAEA;;AAEDpb,MAAAA,QAAQ,CAAC4Y,aAAT,GAAyB,KAAzB;AAEA;;AAED,QAAK5Y,QAAQ,CAAC8b,uBAAd,EAAwC;AAEvC,YAAM74B,SAAS,GAAG,KAAKu3B,UAAL,CAAgBuB,YAAlC;;AAEA,UAAK94B,SAAS,KAAK7wB,SAAnB,EAA+B;AAE9B6wB,QAAAA,SAAS,CAACkzB,SAAV,CAAqBnW,QAAQ,CAACwb,aAA9B;AACAv4B,QAAAA,SAAS,CAACm4B,WAAV,GAAwB,IAAxB;AAEA;;AAEDpb,MAAAA,QAAQ,CAAC8b,uBAAT,GAAmC,KAAnC;AAEA;;AAED,QAAK9b,QAAQ,CAAC6Y,gBAAd,EAAiC;AAEhC7Y,MAAAA,QAAQ,CAAC8Y,aAAT,CAAwBhjD,MAAM,CAACkqC,QAA/B;AACA,WAAKqY,MAAL,GAAcrY,QAAQ,CAACqY,MAAvB;AAEArY,MAAAA,QAAQ,CAAC6Y,gBAAT,GAA4B,KAA5B;AAEA;;AAED,WAAO,IAAP;AAEA,GA3YoF;AA6YrFK,EAAAA,YAAY,EAAE,UAAWlZ,QAAX,EAAsB;AAEnCA,IAAAA,QAAQ,CAAC4b,gBAAT,GAA4B,IAAI5D,cAAJ,GAAqBkB,YAArB,CAAmClZ,QAAnC,CAA5B;AAEA,WAAO,KAAKgc,kBAAL,CAAyBhc,QAAQ,CAAC4b,gBAAlC,CAAP;AAEA,GAnZoF;AAqZrFI,EAAAA,kBAAkB,EAAE,UAAWhc,QAAX,EAAsB;AAEzC,UAAMub,SAAS,GAAG,IAAI1D,YAAJ,CAAkB7X,QAAQ,CAACiY,QAAT,CAAkBjoD,MAAlB,GAA2B,CAA7C,CAAlB;AACA,SAAK8L,YAAL,CAAmB,UAAnB,EAA+B,IAAI25C,eAAJ,CAAqB8F,SAArB,EAAgC,CAAhC,EAAoC/E,iBAApC,CAAuDxW,QAAQ,CAACiY,QAAhE,CAA/B;;AAEA,QAAKjY,QAAQ,CAACkY,OAAT,CAAiBloD,MAAjB,GAA0B,CAA/B,EAAmC;AAElC,YAAMkoD,OAAO,GAAG,IAAIL,YAAJ,CAAkB7X,QAAQ,CAACkY,OAAT,CAAiBloD,MAAjB,GAA0B,CAA5C,CAAhB;AACA,WAAK8L,YAAL,CAAmB,QAAnB,EAA6B,IAAI25C,eAAJ,CAAqByC,OAArB,EAA8B,CAA9B,EAAkC1B,iBAAlC,CAAqDxW,QAAQ,CAACkY,OAA9D,CAA7B;AAEA;;AAED,QAAKlY,QAAQ,CAACqW,MAAT,CAAgBrmD,MAAhB,GAAyB,CAA9B,EAAkC;AAEjC,YAAMqmD,MAAM,GAAG,IAAIwB,YAAJ,CAAkB7X,QAAQ,CAACqW,MAAT,CAAgBrmD,MAAhB,GAAyB,CAA3C,CAAf;AACA,WAAK8L,YAAL,CAAmB,OAAnB,EAA4B,IAAI25C,eAAJ,CAAqBY,MAArB,EAA6B,CAA7B,EAAiCD,eAAjC,CAAkDpW,QAAQ,CAACqW,MAA3D,CAA5B;AAEA;;AAED,QAAKrW,QAAQ,CAACmY,GAAT,CAAanoD,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,YAAMmoD,GAAG,GAAG,IAAIN,YAAJ,CAAkB7X,QAAQ,CAACmY,GAAT,CAAanoD,MAAb,GAAsB,CAAxC,CAAZ;AACA,WAAK8L,YAAL,CAAmB,IAAnB,EAAyB,IAAI25C,eAAJ,CAAqB0C,GAArB,EAA0B,CAA1B,EAA8B7B,iBAA9B,CAAiDtW,QAAQ,CAACmY,GAA1D,CAAzB;AAEA;;AAED,QAAKnY,QAAQ,CAACoY,IAAT,CAAcpoD,MAAd,GAAuB,CAA5B,EAAgC;AAE/B,YAAMooD,IAAI,GAAG,IAAIP,YAAJ,CAAkB7X,QAAQ,CAACoY,IAAT,CAAcpoD,MAAd,GAAuB,CAAzC,CAAb;AACA,WAAK8L,YAAL,CAAmB,KAAnB,EAA0B,IAAI25C,eAAJ,CAAqB2C,IAArB,EAA2B,CAA3B,EAA+B9B,iBAA/B,CAAkDtW,QAAQ,CAACoY,IAA3D,CAA1B;AAEA,KA/BwC,CAiCzC;;;AAEA,SAAKC,MAAL,GAAcrY,QAAQ,CAACqY,MAAvB,CAnCyC,CAqCzC;;AAEA,SAAM,MAAM1xC,IAAZ,IAAoBq5B,QAAQ,CAAC+U,YAA7B,EAA4C;AAE3C,YAAMv4B,KAAK,GAAG,EAAd;AACA,YAAMu4B,YAAY,GAAG/U,QAAQ,CAAC+U,YAAT,CAAuBpuC,IAAvB,CAArB;;AAEA,WAAM,IAAItV,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGsjD,YAAY,CAAC/kD,MAAlC,EAA0CqB,CAAC,GAAGI,CAA9C,EAAiDJ,CAAC,EAAlD,EAAwD;AAEvD,cAAMwoD,WAAW,GAAG9E,YAAY,CAAE1jD,CAAF,CAAhC;AAEA,cAAM4xB,SAAS,GAAG,IAAI20B,sBAAJ,CAA4BiC,WAAW,CAACrZ,IAAZ,CAAiBxwC,MAAjB,GAA0B,CAAtD,EAAyD,CAAzD,CAAlB;AACAizB,QAAAA,SAAS,CAACtc,IAAV,GAAiBkzC,WAAW,CAAClzC,IAA7B;AAEA6V,QAAAA,KAAK,CAAChiB,IAAN,CAAYyoB,SAAS,CAACuzB,iBAAV,CAA6BqD,WAAW,CAACrZ,IAAzC,CAAZ;AAEA;;AAED,WAAKia,eAAL,CAAsB9zC,IAAtB,IAA+B6V,KAA/B;AAEA,KAzDwC,CA2DzC;;;AAEA,QAAKwjB,QAAQ,CAACuY,WAAT,CAAqBvoD,MAArB,GAA8B,CAAnC,EAAuC;AAEtC,YAAMuoD,WAAW,GAAG,IAAIX,sBAAJ,CAA4B5X,QAAQ,CAACuY,WAAT,CAAqBvoD,MAArB,GAA8B,CAA1D,EAA6D,CAA7D,CAApB;AACA,WAAK8L,YAAL,CAAmB,WAAnB,EAAgCy8C,WAAW,CAAC9B,iBAAZ,CAA+BzW,QAAQ,CAACuY,WAAxC,CAAhC;AAEA;;AAED,QAAKvY,QAAQ,CAACsY,WAAT,CAAqBtoD,MAArB,GAA8B,CAAnC,EAAuC;AAEtC,YAAMsoD,WAAW,GAAG,IAAIV,sBAAJ,CAA4B5X,QAAQ,CAACsY,WAAT,CAAqBtoD,MAArB,GAA8B,CAA1D,EAA6D,CAA7D,CAApB;AACA,WAAK8L,YAAL,CAAmB,YAAnB,EAAiCw8C,WAAW,CAAC7B,iBAAZ,CAA+BzW,QAAQ,CAACsY,WAAxC,CAAjC;AAEA,KAzEwC,CA2EzC;;;AAEA,QAAKtY,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,WAAKA,cAAL,GAAsBxY,QAAQ,CAACwY,cAAT,CAAwBh4B,KAAxB,EAAtB;AAEA;;AAED,QAAKwf,QAAQ,CAAC2D,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,WAAKA,WAAL,GAAmB3D,QAAQ,CAAC2D,WAAT,CAAqBnjB,KAArB,EAAnB;AAEA;;AAED,WAAO,IAAP;AAEA,GAhfoF;AAkfrFojB,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,QAAK,KAAKD,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,WAAKA,WAAL,GAAmB,IAAIrC,IAAJ,EAAnB;AAEA;;AAED,UAAMzpC,QAAQ,GAAG,KAAK2iD,UAAL,CAAgB3iD,QAAjC;AACA,UAAMokD,uBAAuB,GAAG,KAAKxB,eAAL,CAAqB5iD,QAArD;;AAEA,QAAKA,QAAQ,KAAKzF,SAAlB,EAA8B;AAE7B,WAAKuxC,WAAL,CAAiBjB,sBAAjB,CAAyC7qC,QAAzC,EAF6B,CAI7B;;AAEA,UAAKokD,uBAAL,EAA+B;AAE9B,aAAM,IAAI5qD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGmZ,uBAAuB,CAACjsD,MAA9C,EAAsDqB,CAAC,GAAGyxC,EAA1D,EAA8DzxC,CAAC,EAA/D,EAAqE;AAEpE,gBAAM6qD,cAAc,GAAGD,uBAAuB,CAAE5qD,CAAF,CAA9C;;AACA+oD,UAAAA,MAAM,CAAC1X,sBAAP,CAA+BwZ,cAA/B;;AAEA,cAAK,KAAKxB,oBAAV,EAAiC;AAEhCJ,YAAAA,SAAS,CAAC55B,UAAV,CAAsB,KAAKijB,WAAL,CAAiBxvC,GAAvC,EAA4CimD,MAAM,CAACjmD,GAAnD;;AACA,iBAAKwvC,WAAL,CAAiBZ,aAAjB,CAAgCuX,SAAhC;;AAEAA,YAAAA,SAAS,CAAC55B,UAAV,CAAsB,KAAKijB,WAAL,CAAiBvvC,GAAvC,EAA4CgmD,MAAM,CAAChmD,GAAnD;;AACA,iBAAKuvC,WAAL,CAAiBZ,aAAjB,CAAgCuX,SAAhC;AAEA,WARD,MAQO;AAEN,iBAAK3W,WAAL,CAAiBZ,aAAjB,CAAgCqX,MAAM,CAACjmD,GAAvC;AACA,iBAAKwvC,WAAL,CAAiBZ,aAAjB,CAAgCqX,MAAM,CAAChmD,GAAvC;AAEA;AAED;AAED;AAED,KAhCD,MAgCO;AAEN,WAAKuvC,WAAL,CAAiBd,SAAjB;AAEA;;AAED,QAAKxwC,KAAK,CAAE,KAAKsxC,WAAL,CAAiBxvC,GAAjB,CAAqBuE,CAAvB,CAAL,IAAmCrG,KAAK,CAAE,KAAKsxC,WAAL,CAAiBxvC,GAAjB,CAAqByE,CAAvB,CAAxC,IAAsEvG,KAAK,CAAE,KAAKsxC,WAAL,CAAiBxvC,GAAjB,CAAqB42B,CAAvB,CAAhF,EAA6G;AAE5GjL,MAAAA,OAAO,CAACyD,KAAR,CAAe,mIAAf,EAAoJ,IAApJ;AAEA;AAED,GAziBoF;AA2iBrF+3B,EAAAA,qBAAqB,EAAE,YAAY;AAElC,QAAK,KAAK9C,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,WAAKA,cAAL,GAAsB,IAAIjT,MAAJ,EAAtB;AAEA;;AAED,UAAM1tC,QAAQ,GAAG,KAAK2iD,UAAL,CAAgB3iD,QAAjC;AACA,UAAMokD,uBAAuB,GAAG,KAAKxB,eAAL,CAAqB5iD,QAArD;;AAEA,QAAKA,QAAL,EAAgB;AAEf;AAEA,YAAMwrB,MAAM,GAAG,KAAKm1B,cAAL,CAAoBn1B,MAAnC;;AAEA+2B,MAAAA,MAAM,CAAC1X,sBAAP,CAA+B7qC,QAA/B,EANe,CAQf;;;AAEA,UAAKokD,uBAAL,EAA+B;AAE9B,aAAM,IAAI5qD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGmZ,uBAAuB,CAACjsD,MAA9C,EAAsDqB,CAAC,GAAGyxC,EAA1D,EAA8DzxC,CAAC,EAA/D,EAAqE;AAEpE,gBAAM6qD,cAAc,GAAGD,uBAAuB,CAAE5qD,CAAF,CAA9C;;AACAgpD,UAAAA,gBAAgB,CAAC3X,sBAAjB,CAAyCwZ,cAAzC;;AAEA,cAAK,KAAKxB,oBAAV,EAAiC;AAEhCJ,YAAAA,SAAS,CAAC55B,UAAV,CAAsB05B,MAAM,CAACjmD,GAA7B,EAAkCkmD,gBAAgB,CAAClmD,GAAnD;;AACAimD,YAAAA,MAAM,CAACrX,aAAP,CAAsBuX,SAAtB;;AAEAA,YAAAA,SAAS,CAAC55B,UAAV,CAAsB05B,MAAM,CAAChmD,GAA7B,EAAkCimD,gBAAgB,CAACjmD,GAAnD;;AACAgmD,YAAAA,MAAM,CAACrX,aAAP,CAAsBuX,SAAtB;AAEA,WARD,MAQO;AAENF,YAAAA,MAAM,CAACrX,aAAP,CAAsBsX,gBAAgB,CAAClmD,GAAvC;;AACAimD,YAAAA,MAAM,CAACrX,aAAP,CAAsBsX,gBAAgB,CAACjmD,GAAvC;AAEA;AAED;AAED;;AAEDgmD,MAAAA,MAAM,CAAC9W,SAAP,CAAkBjgB,MAAlB,EApCe,CAsCf;AACA;;;AAEA,UAAIoiB,WAAW,GAAG,CAAlB;;AAEA,WAAM,IAAIp0C,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGjrC,QAAQ,CAAC4nC,KAA/B,EAAsCpuC,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpDipD,QAAAA,SAAS,CAACt3B,mBAAV,CAA+BnrB,QAA/B,EAAyCxG,CAAzC;;AAEAo0C,QAAAA,WAAW,GAAGp2C,IAAI,CAAC+E,GAAL,CAAUqxC,WAAV,EAAuBpiB,MAAM,CAAChB,iBAAP,CAA0Bi4B,SAA1B,CAAvB,CAAd;AAEA,OAjDc,CAmDf;;;AAEA,UAAK2B,uBAAL,EAA+B;AAE9B,aAAM,IAAI5qD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGmZ,uBAAuB,CAACjsD,MAA9C,EAAsDqB,CAAC,GAAGyxC,EAA1D,EAA8DzxC,CAAC,EAA/D,EAAqE;AAEpE,gBAAM6qD,cAAc,GAAGD,uBAAuB,CAAE5qD,CAAF,CAA9C;AACA,gBAAMqpD,oBAAoB,GAAG,KAAKA,oBAAlC;;AAEA,eAAM,IAAIxV,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGD,cAAc,CAACzc,KAArC,EAA4CyF,CAAC,GAAGiX,EAAhD,EAAoDjX,CAAC,EAArD,EAA2D;AAE1DoV,YAAAA,SAAS,CAACt3B,mBAAV,CAA+Bk5B,cAA/B,EAA+ChX,CAA/C;;AAEA,gBAAKwV,oBAAL,EAA4B;AAE3BP,cAAAA,OAAO,CAACn3B,mBAAR,CAA6BnrB,QAA7B,EAAuCqtC,CAAvC;;AACAoV,cAAAA,SAAS,CAACtxC,GAAV,CAAemxC,OAAf;AAEA;;AAED1U,YAAAA,WAAW,GAAGp2C,IAAI,CAAC+E,GAAL,CAAUqxC,WAAV,EAAuBpiB,MAAM,CAAChB,iBAAP,CAA0Bi4B,SAA1B,CAAvB,CAAd;AAEA;AAED;AAED;;AAED,WAAK9B,cAAL,CAAoBpkB,MAApB,GAA6B/kC,IAAI,CAAC0yB,IAAL,CAAW0jB,WAAX,CAA7B;;AAEA,UAAKpzC,KAAK,CAAE,KAAKmmD,cAAL,CAAoBpkB,MAAtB,CAAV,EAA2C;AAE1CtU,QAAAA,OAAO,CAACyD,KAAR,CAAe,8HAAf,EAA+I,IAA/I;AAEA;AAED;AAED,GA/oBoF;AAipBrF64B,EAAAA,kBAAkB,EAAE,YAAY,CAE/B;AAEA,GArpBoF;AAupBrFC,EAAAA,oBAAoB,EAAE,YAAY;AAEjC,UAAMzhD,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM0hD,iBAAiB,GAAG,KAAKvB,YAAL,CAAmB,UAAnB,CAA1B;;AAEA,QAAKuB,iBAAiB,KAAKlqD,SAA3B,EAAuC;AAEtC,UAAImqD,eAAe,GAAG,KAAKxB,YAAL,CAAmB,QAAnB,CAAtB;;AAEA,UAAKwB,eAAe,KAAKnqD,SAAzB,EAAqC;AAEpCmqD,QAAAA,eAAe,GAAG,IAAI9G,eAAJ,CAAqB,IAAIoC,YAAJ,CAAkByE,iBAAiB,CAAC7c,KAAlB,GAA0B,CAA5C,CAArB,EAAsE,CAAtE,CAAlB;AACA,aAAK3jC,YAAL,CAAmB,QAAnB,EAA6BygD,eAA7B;AAEA,OALD,MAKO;AAEN;AAEA,aAAM,IAAIlrD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyZ,eAAe,CAAC9c,KAAtC,EAA6CpuC,CAAC,GAAGyxC,EAAjD,EAAqDzxC,CAAC,EAAtD,EAA4D;AAE3DkrD,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBtlD,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B,EAAiC,CAAjC;AAEA;AAED;;AAED,YAAMmrD,EAAE,GAAG,IAAI5qB,OAAJ,EAAX;AAAA,YAA0B6qB,EAAE,GAAG,IAAI7qB,OAAJ,EAA/B;AAAA,YAA8C8qB,EAAE,GAAG,IAAI9qB,OAAJ,EAAnD;AACA,YAAM+qB,EAAE,GAAG,IAAI/qB,OAAJ,EAAX;AAAA,YAA0BgrB,EAAE,GAAG,IAAIhrB,OAAJ,EAA/B;AAAA,YAA8CirB,EAAE,GAAG,IAAIjrB,OAAJ,EAAnD;AACA,YAAMkrB,EAAE,GAAG,IAAIlrB,OAAJ,EAAX;AAAA,YAA0BmrB,EAAE,GAAG,IAAInrB,OAAJ,EAA/B,CAvBsC,CAyBtC;;AAEA,UAAKh3B,KAAL,EAAa;AAEZ,aAAM,IAAIvJ,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGloC,KAAK,CAAC6kC,KAA5B,EAAmCpuC,CAAC,GAAGyxC,EAAvC,EAA2CzxC,CAAC,IAAI,CAAhD,EAAoD;AAEnD,gBAAM2rD,EAAE,GAAGpiD,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAX;AACA,gBAAM4rD,EAAE,GAAGriD,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAX;AACA,gBAAM6rD,EAAE,GAAGtiD,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAX;AAEAmrD,UAAAA,EAAE,CAACx5B,mBAAH,CAAwBs5B,iBAAxB,EAA2CU,EAA3C;AACAP,UAAAA,EAAE,CAACz5B,mBAAH,CAAwBs5B,iBAAxB,EAA2CW,EAA3C;AACAP,UAAAA,EAAE,CAAC15B,mBAAH,CAAwBs5B,iBAAxB,EAA2CY,EAA3C;AAEAJ,UAAAA,EAAE,CAACh8B,UAAH,CAAe47B,EAAf,EAAmBD,EAAnB;AACAM,UAAAA,EAAE,CAACj8B,UAAH,CAAe07B,EAAf,EAAmBC,EAAnB;AACAK,UAAAA,EAAE,CAACj7B,KAAH,CAAUk7B,EAAV;AAEAJ,UAAAA,EAAE,CAAC35B,mBAAH,CAAwBu5B,eAAxB,EAAyCS,EAAzC;AACAJ,UAAAA,EAAE,CAAC55B,mBAAH,CAAwBu5B,eAAxB,EAAyCU,EAAzC;AACAJ,UAAAA,EAAE,CAAC75B,mBAAH,CAAwBu5B,eAAxB,EAAyCW,EAAzC;AAEAP,UAAAA,EAAE,CAAC3zC,GAAH,CAAQ8zC,EAAR;AACAF,UAAAA,EAAE,CAAC5zC,GAAH,CAAQ8zC,EAAR;AACAD,UAAAA,EAAE,CAAC7zC,GAAH,CAAQ8zC,EAAR;AAEAP,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBqG,EAAxB,EAA4BL,EAAE,CAACjkD,CAA/B,EAAkCikD,EAAE,CAAC/jD,CAArC,EAAwC+jD,EAAE,CAAC5xB,CAA3C;AACAwxB,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBsG,EAAxB,EAA4BL,EAAE,CAAClkD,CAA/B,EAAkCkkD,EAAE,CAAChkD,CAArC,EAAwCgkD,EAAE,CAAC7xB,CAA3C;AACAwxB,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBuG,EAAxB,EAA4BL,EAAE,CAACnkD,CAA/B,EAAkCmkD,EAAE,CAACjkD,CAArC,EAAwCikD,EAAE,CAAC9xB,CAA3C;AAEA;AAED,OA9BD,MA8BO;AAEN;AAEA,aAAM,IAAI15B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGwZ,iBAAiB,CAAC7c,KAAxC,EAA+CpuC,CAAC,GAAGyxC,EAAnD,EAAuDzxC,CAAC,IAAI,CAA5D,EAAgE;AAE/DmrD,UAAAA,EAAE,CAACx5B,mBAAH,CAAwBs5B,iBAAxB,EAA2CjrD,CAAC,GAAG,CAA/C;AACAorD,UAAAA,EAAE,CAACz5B,mBAAH,CAAwBs5B,iBAAxB,EAA2CjrD,CAAC,GAAG,CAA/C;AACAqrD,UAAAA,EAAE,CAAC15B,mBAAH,CAAwBs5B,iBAAxB,EAA2CjrD,CAAC,GAAG,CAA/C;AAEAyrD,UAAAA,EAAE,CAACh8B,UAAH,CAAe47B,EAAf,EAAmBD,EAAnB;AACAM,UAAAA,EAAE,CAACj8B,UAAH,CAAe07B,EAAf,EAAmBC,EAAnB;AACAK,UAAAA,EAAE,CAACj7B,KAAH,CAAUk7B,EAAV;AAEAR,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBtlD,CAAC,GAAG,CAA5B,EAA+ByrD,EAAE,CAACpkD,CAAlC,EAAqCokD,EAAE,CAAClkD,CAAxC,EAA2CkkD,EAAE,CAAC/xB,CAA9C;AACAwxB,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBtlD,CAAC,GAAG,CAA5B,EAA+ByrD,EAAE,CAACpkD,CAAlC,EAAqCokD,EAAE,CAAClkD,CAAxC,EAA2CkkD,EAAE,CAAC/xB,CAA9C;AACAwxB,UAAAA,eAAe,CAAC5F,MAAhB,CAAwBtlD,CAAC,GAAG,CAA5B,EAA+ByrD,EAAE,CAACpkD,CAAlC,EAAqCokD,EAAE,CAAClkD,CAAxC,EAA2CkkD,EAAE,CAAC/xB,CAA9C;AAEA;AAED;;AAED,WAAKoyB,gBAAL;AAEAZ,MAAAA,eAAe,CAACnB,WAAhB,GAA8B,IAA9B;AAEA;AAED,GAjvBoF;AAmvBrFgC,EAAAA,KAAK,EAAE,UAAWpd,QAAX,EAAqB7kC,MAArB,EAA8B;AAEpC,QAAK,EAAI6kC,QAAQ,IAAIA,QAAQ,CAAC4a,gBAAzB,CAAL,EAAmD;AAElD96B,MAAAA,OAAO,CAACyD,KAAR,CAAe,iFAAf,EAAkGyc,QAAlG;AACA;AAEA;;AAED,QAAK7kC,MAAM,KAAK/I,SAAhB,EAA4B;AAE3B+I,MAAAA,MAAM,GAAG,CAAT;AAEA2kB,MAAAA,OAAO,CAACC,IAAR,CACC,wFACE,qEAFH;AAKA;;AAED,UAAMy6B,UAAU,GAAG,KAAKA,UAAxB;;AAEA,SAAM,MAAMxpD,GAAZ,IAAmBwpD,UAAnB,EAAgC;AAE/B,UAAKxa,QAAQ,CAACwa,UAAT,CAAqBxpD,GAArB,MAA+BoB,SAApC,EAAgD;AAEhD,YAAMirD,UAAU,GAAG7C,UAAU,CAAExpD,GAAF,CAA7B;AACA,YAAMssD,eAAe,GAAGD,UAAU,CAAC7gC,KAAnC;AAEA,YAAM+gC,UAAU,GAAGvd,QAAQ,CAACwa,UAAT,CAAqBxpD,GAArB,CAAnB;AACA,YAAMwsD,eAAe,GAAGD,UAAU,CAAC/gC,KAAnC;AAEA,YAAMihC,eAAe,GAAGF,UAAU,CAAC7H,QAAX,GAAsBv6C,MAA9C;AACA,YAAMnL,MAAM,GAAGX,IAAI,CAAC8E,GAAL,CAAUqpD,eAAe,CAACxtD,MAA1B,EAAkCstD,eAAe,CAACttD,MAAhB,GAAyBytD,eAA3D,CAAf;;AAEA,WAAM,IAAIpsD,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAGuY,eAArB,EAAsCpsD,CAAC,GAAGrB,MAA1C,EAAkDqB,CAAC,IAAK6zC,CAAC,EAAzD,EAA+D;AAE9DoY,QAAAA,eAAe,CAAEpY,CAAF,CAAf,GAAuBsY,eAAe,CAAEnsD,CAAF,CAAtC;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAhyBoF;AAkyBrF8rD,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,UAAMjF,OAAO,GAAG,KAAKsC,UAAL,CAAgBxmB,MAAhC;;AAEA,SAAM,IAAI3iC,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGoV,OAAO,CAACzY,KAA9B,EAAqCpuC,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnDipD,MAAAA,SAAS,CAACt3B,mBAAV,CAA+Bk1B,OAA/B,EAAwC7mD,CAAxC;;AAEAipD,MAAAA,SAAS,CAACr4B,SAAV;;AAEAi2B,MAAAA,OAAO,CAACvB,MAAR,CAAgBtlD,CAAhB,EAAmBipD,SAAS,CAAC5hD,CAA7B,EAAgC4hD,SAAS,CAAC1hD,CAA1C,EAA6C0hD,SAAS,CAACvvB,CAAvD;AAEA;AAED,GAhzBoF;AAkzBrF2yB,EAAAA,YAAY,EAAE,YAAY;AAEzB,aAASC,sBAAT,CAAiC16B,SAAjC,EAA4C26B,OAA5C,EAAsD;AAErD,YAAMphC,KAAK,GAAGyG,SAAS,CAACzG,KAAxB;AACA,YAAMk5B,QAAQ,GAAGzyB,SAAS,CAACyyB,QAA3B;AACA,YAAMvG,UAAU,GAAGlsB,SAAS,CAACksB,UAA7B;AAEA,YAAM0O,MAAM,GAAG,IAAIrhC,KAAK,CAACjqB,WAAV,CAAuBqrD,OAAO,CAAC5tD,MAAR,GAAiB0lD,QAAxC,CAAf;AAEA,UAAI96C,KAAK,GAAG,CAAZ;AAAA,UAAes7C,MAAM,GAAG,CAAxB;;AAEA,WAAM,IAAI7kD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmsD,OAAO,CAAC5tD,MAA7B,EAAqCqB,CAAC,GAAGI,CAAzC,EAA4CJ,CAAC,EAA7C,EAAmD;AAElDuJ,QAAAA,KAAK,GAAGgjD,OAAO,CAAEvsD,CAAF,CAAP,GAAeqkD,QAAvB;;AAEA,aAAM,IAAIxQ,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGwQ,QAArB,EAA+BxQ,CAAC,EAAhC,EAAsC;AAErC2Y,UAAAA,MAAM,CAAE3H,MAAM,EAAR,CAAN,GAAsB15B,KAAK,CAAE5hB,KAAK,EAAP,CAA3B;AAEA;AAED;;AAED,aAAO,IAAI66C,eAAJ,CAAqBoI,MAArB,EAA6BnI,QAA7B,EAAuCvG,UAAvC,CAAP;AAEA,KA1BwB,CA4BzB;;;AAEA,QAAK,KAAKv0C,KAAL,KAAe,IAApB,EAA2B;AAE1BklB,MAAAA,OAAO,CAACC,IAAR,CAAc,uEAAd;AACA,aAAO,IAAP;AAEA;;AAED,UAAM+9B,SAAS,GAAG,IAAIvD,cAAJ,EAAlB;AAEA,UAAMqD,OAAO,GAAG,KAAKhjD,KAAL,CAAW4hB,KAA3B;AACA,UAAMg+B,UAAU,GAAG,KAAKA,UAAxB,CAxCyB,CA0CzB;;AAEA,SAAM,MAAM7zC,IAAZ,IAAoB6zC,UAApB,EAAiC;AAEhC,YAAMv3B,SAAS,GAAGu3B,UAAU,CAAE7zC,IAAF,CAA5B;AAEA,YAAMo3C,YAAY,GAAGJ,sBAAsB,CAAE16B,SAAF,EAAa26B,OAAb,CAA3C;AAEAE,MAAAA,SAAS,CAAChiD,YAAV,CAAwB6K,IAAxB,EAA8Bo3C,YAA9B;AAEA,KApDwB,CAsDzB;;;AAEA,UAAMtD,eAAe,GAAG,KAAKA,eAA7B;;AAEA,SAAM,MAAM9zC,IAAZ,IAAoB8zC,eAApB,EAAsC;AAErC,YAAMuD,UAAU,GAAG,EAAnB;AACA,YAAM9B,cAAc,GAAGzB,eAAe,CAAE9zC,IAAF,CAAtC,CAHqC,CAGW;;AAEhD,WAAM,IAAItV,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGoZ,cAAc,CAAClsD,MAArC,EAA6CqB,CAAC,GAAGyxC,EAAjD,EAAqDzxC,CAAC,EAAtD,EAA4D;AAE3D,cAAM4xB,SAAS,GAAGi5B,cAAc,CAAE7qD,CAAF,CAAhC;AAEA,cAAM0sD,YAAY,GAAGJ,sBAAsB,CAAE16B,SAAF,EAAa26B,OAAb,CAA3C;AAEAI,QAAAA,UAAU,CAACxjD,IAAX,CAAiBujD,YAAjB;AAEA;;AAEDD,MAAAA,SAAS,CAACrD,eAAV,CAA2B9zC,IAA3B,IAAoCq3C,UAApC;AAEA;;AAEDF,IAAAA,SAAS,CAACpD,oBAAV,GAAiC,KAAKA,oBAAtC,CA7EyB,CA+EzB;;AAEA,UAAMrC,MAAM,GAAG,KAAKA,MAApB;;AAEA,SAAM,IAAIhnD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4mD,MAAM,CAACroD,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AACAysD,MAAAA,SAAS,CAAC7C,QAAV,CAAoBlC,KAAK,CAAClP,KAA1B,EAAiCkP,KAAK,CAACtZ,KAAvC,EAA8CsZ,KAAK,CAACzJ,aAApD;AAEA;;AAED,WAAOwO,SAAP;AAEA,GA94BoF;AAg5BrF3zB,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAG;AACZjW,MAAAA,QAAQ,EAAE;AACTT,QAAAA,OAAO,EAAE,GADA;AAETtuB,QAAAA,IAAI,EAAE,gBAFG;AAGTgvB,QAAAA,SAAS,EAAE;AAHF;AADE,KAAb,CAFmB,CAUnB;;AAEAgW,IAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AACA,QAAK,KAAKmL,IAAL,KAAc,EAAnB,EAAwB65B,IAAI,CAAC75B,IAAL,GAAY,KAAKA,IAAjB;AACxB,QAAK5V,MAAM,CAACF,IAAP,CAAa,KAAK8rC,QAAlB,EAA6B3sC,MAA7B,GAAsC,CAA3C,EAA+CwwC,IAAI,CAAC7D,QAAL,GAAgB,KAAKA,QAArB;;AAE/C,QAAK,KAAKsD,UAAL,KAAoB7tC,SAAzB,EAAqC;AAEpC,YAAM6tC,UAAU,GAAG,KAAKA,UAAxB;;AAEA,WAAM,MAAMjvC,GAAZ,IAAmBivC,UAAnB,EAAgC;AAE/B,YAAKA,UAAU,CAAEjvC,GAAF,CAAV,KAAsBoB,SAA3B,EAAuCouC,IAAI,CAAExvC,GAAF,CAAJ,GAAcivC,UAAU,CAAEjvC,GAAF,CAAxB;AAEvC;;AAED,aAAOwvC,IAAP;AAEA;;AAEDA,IAAAA,IAAI,CAACA,IAAL,GAAY;AAAEga,MAAAA,UAAU,EAAE;AAAd,KAAZ;AAEA,UAAM5/C,KAAK,GAAG,KAAKA,KAAnB;;AAEA,QAAKA,KAAK,KAAK,IAAf,EAAsB;AAErB4lC,MAAAA,IAAI,CAACA,IAAL,CAAU5lC,KAAV,GAAkB;AACjBY,QAAAA,IAAI,EAAEZ,KAAK,CAAC4hB,KAAN,CAAYjqB,WAAZ,CAAwBoU,IADb;AAEjB6V,QAAAA,KAAK,EAAEtsB,KAAK,CAACC,SAAN,CAAgBG,KAAhB,CAAsBI,IAAtB,CAA4BkK,KAAK,CAAC4hB,KAAlC;AAFU,OAAlB;AAKA;;AAED,UAAMg+B,UAAU,GAAG,KAAKA,UAAxB;;AAEA,SAAM,MAAMxpD,GAAZ,IAAmBwpD,UAAnB,EAAgC;AAE/B,YAAMv3B,SAAS,GAAGu3B,UAAU,CAAExpD,GAAF,CAA5B;AAEA,YAAMitD,aAAa,GAAGh7B,SAAS,CAACkH,MAAV,CAAkBqW,IAAI,CAACA,IAAvB,CAAtB;AAEA,UAAKvd,SAAS,CAACtc,IAAV,KAAmB,EAAxB,EAA6Bs3C,aAAa,CAACt3C,IAAd,GAAqBsc,SAAS,CAACtc,IAA/B;AAE7B65B,MAAAA,IAAI,CAACA,IAAL,CAAUga,UAAV,CAAsBxpD,GAAtB,IAA8BitD,aAA9B;AAEA;;AAED,UAAMxD,eAAe,GAAG,EAAxB;AACA,QAAIyD,kBAAkB,GAAG,KAAzB;;AAEA,SAAM,MAAMltD,GAAZ,IAAmB,KAAKypD,eAAxB,EAA0C;AAEzC,YAAM0D,cAAc,GAAG,KAAK1D,eAAL,CAAsBzpD,GAAtB,CAAvB;AAEA,YAAMwrB,KAAK,GAAG,EAAd;;AAEA,WAAM,IAAInrB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGqb,cAAc,CAACnuD,MAArC,EAA6CqB,CAAC,GAAGyxC,EAAjD,EAAqDzxC,CAAC,EAAtD,EAA4D;AAE3D,cAAM4xB,SAAS,GAAGk7B,cAAc,CAAE9sD,CAAF,CAAhC;AAEA,cAAM4sD,aAAa,GAAGh7B,SAAS,CAACkH,MAAV,CAAkBqW,IAAI,CAACA,IAAvB,CAAtB;AAEA,YAAKvd,SAAS,CAACtc,IAAV,KAAmB,EAAxB,EAA6Bs3C,aAAa,CAACt3C,IAAd,GAAqBsc,SAAS,CAACtc,IAA/B;AAE7B6V,QAAAA,KAAK,CAAChiB,IAAN,CAAYyjD,aAAZ;AAEA;;AAED,UAAKzhC,KAAK,CAACxsB,MAAN,GAAe,CAApB,EAAwB;AAEvByqD,QAAAA,eAAe,CAAEzpD,GAAF,CAAf,GAAyBwrB,KAAzB;AAEA0hC,QAAAA,kBAAkB,GAAG,IAArB;AAEA;AAED;;AAED,QAAKA,kBAAL,EAA0B;AAEzB1d,MAAAA,IAAI,CAACA,IAAL,CAAUia,eAAV,GAA4BA,eAA5B;AACAja,MAAAA,IAAI,CAACA,IAAL,CAAUka,oBAAV,GAAiC,KAAKA,oBAAtC;AAEA;;AAED,UAAMrC,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKA,MAAM,CAACroD,MAAP,GAAgB,CAArB,EAAyB;AAExBwwC,MAAAA,IAAI,CAACA,IAAL,CAAU6X,MAAV,GAAmBhxC,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgBiwC,MAAhB,CAAZ,CAAnB;AAEA;;AAED,UAAMG,cAAc,GAAG,KAAKA,cAA5B;;AAEA,QAAKA,cAAc,KAAK,IAAxB,EAA+B;AAE9BhY,MAAAA,IAAI,CAACA,IAAL,CAAUgY,cAAV,GAA2B;AAC1Bn1B,QAAAA,MAAM,EAAEm1B,cAAc,CAACn1B,MAAf,CAAsBlxB,OAAtB,EADkB;AAE1BiiC,QAAAA,MAAM,EAAEokB,cAAc,CAACpkB;AAFG,OAA3B;AAKA;;AAED,WAAOoM,IAAP;AAEA,GArgCoF;AAugCrFhgB,EAAAA,KAAK,EAAE,YAAY;AAElB;;;;;;;;;;;;;;AAwBA,WAAO,IAAI+5B,cAAJ,GAAqB95B,IAArB,CAA2B,IAA3B,CAAP;AAEA,GAniCoF;AAqiCrFA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB;AAEA,SAAKzU,KAAL,GAAa,IAAb;AACA,SAAK4/C,UAAL,GAAkB,EAAlB;AACA,SAAKC,eAAL,GAAuB,EAAvB;AACA,SAAKpC,MAAL,GAAc,EAAd;AACA,SAAK1U,WAAL,GAAmB,IAAnB;AACA,SAAK6U,cAAL,GAAsB,IAAtB,CATyB,CAWzB;;AAEA,UAAMhY,IAAI,GAAG,EAAb,CAbyB,CAezB;;AAEA,SAAK75B,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB,CAjByB,CAmBzB;;AAEA,UAAM/L,KAAK,GAAGyU,MAAM,CAACzU,KAArB;;AAEA,QAAKA,KAAK,KAAK,IAAf,EAAsB;AAErB,WAAKkgD,QAAL,CAAelgD,KAAK,CAAC4lB,KAAN,CAAaggB,IAAb,CAAf;AAEA,KA3BwB,CA6BzB;;;AAEA,UAAMga,UAAU,GAAGnrC,MAAM,CAACmrC,UAA1B;;AAEA,SAAM,MAAM7zC,IAAZ,IAAoB6zC,UAApB,EAAiC;AAEhC,YAAMv3B,SAAS,GAAGu3B,UAAU,CAAE7zC,IAAF,CAA5B;AACA,WAAK7K,YAAL,CAAmB6K,IAAnB,EAAyBsc,SAAS,CAACzC,KAAV,CAAiBggB,IAAjB,CAAzB;AAEA,KAtCwB,CAwCzB;;;AAEA,UAAMia,eAAe,GAAGprC,MAAM,CAACorC,eAA/B;;AAEA,SAAM,MAAM9zC,IAAZ,IAAoB8zC,eAApB,EAAsC;AAErC,YAAMj+B,KAAK,GAAG,EAAd;AACA,YAAM0/B,cAAc,GAAGzB,eAAe,CAAE9zC,IAAF,CAAtC,CAHqC,CAGW;;AAEhD,WAAM,IAAItV,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGyqD,cAAc,CAAClsD,MAApC,EAA4CqB,CAAC,GAAGI,CAAhD,EAAmDJ,CAAC,EAApD,EAA0D;AAEzDmrB,QAAAA,KAAK,CAAChiB,IAAN,CAAY0hD,cAAc,CAAE7qD,CAAF,CAAd,CAAoBmvB,KAApB,CAA2BggB,IAA3B,CAAZ;AAEA;;AAED,WAAKia,eAAL,CAAsB9zC,IAAtB,IAA+B6V,KAA/B;AAEA;;AAED,SAAKk+B,oBAAL,GAA4BrrC,MAAM,CAACqrC,oBAAnC,CA3DyB,CA6DzB;;AAEA,UAAMrC,MAAM,GAAGhpC,MAAM,CAACgpC,MAAtB;;AAEA,SAAM,IAAIhnD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4mD,MAAM,CAACroD,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AACA,WAAK4pD,QAAL,CAAelC,KAAK,CAAClP,KAArB,EAA4BkP,KAAK,CAACtZ,KAAlC,EAAyCsZ,KAAK,CAACzJ,aAA/C;AAEA,KAtEwB,CAwEzB;;;AAEA,UAAM3L,WAAW,GAAGt0B,MAAM,CAACs0B,WAA3B;;AAEA,QAAKA,WAAW,KAAK,IAArB,EAA4B;AAE3B,WAAKA,WAAL,GAAmBA,WAAW,CAACnjB,KAAZ,EAAnB;AAEA,KAhFwB,CAkFzB;;;AAEA,UAAMg4B,cAAc,GAAGnpC,MAAM,CAACmpC,cAA9B;;AAEA,QAAKA,cAAc,KAAK,IAAxB,EAA+B;AAE9B,WAAKA,cAAL,GAAsBA,cAAc,CAACh4B,KAAf,EAAtB;AAEA,KA1FwB,CA4FzB;;;AAEA,SAAKm6B,SAAL,CAAe9Q,KAAf,GAAuBx6B,MAAM,CAACsrC,SAAP,CAAiB9Q,KAAxC;AACA,SAAK8Q,SAAL,CAAelb,KAAf,GAAuBpwB,MAAM,CAACsrC,SAAP,CAAiBlb,KAAxC,CA/FyB,CAiGzB;;AAEA,SAAK9C,QAAL,GAAgBttB,MAAM,CAACstB,QAAvB;AAEA,WAAO,IAAP;AAEA,GA5oCoF;AA8oCrFhS,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAK9wB,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAApB;AAEA;AAlpCoF,CAA3D,CAA3B;AAspCA;;;;;;;AAOA,MAAM4iD,cAAc,GAAG,IAAIrpB,OAAJ,EAAvB;;AACA,MAAMspB,IAAI,GAAG,IAAIjY,GAAJ,EAAb;;AACA,MAAMkY,OAAO,GAAG,IAAI/Y,MAAJ,EAAhB;;AAEA,MAAMgZ,GAAG,GAAG,IAAI3sB,OAAJ,EAAZ;;AACA,MAAM4sB,GAAG,GAAG,IAAI5sB,OAAJ,EAAZ;;AACA,MAAM6sB,GAAG,GAAG,IAAI7sB,OAAJ,EAAZ;;AAEA,MAAM8sB,MAAM,GAAG,IAAI9sB,OAAJ,EAAf;;AACA,MAAM+sB,MAAM,GAAG,IAAI/sB,OAAJ,EAAf;;AACA,MAAMgtB,MAAM,GAAG,IAAIhtB,OAAJ,EAAf;;AAEA,MAAMitB,OAAO,GAAG,IAAIjtB,OAAJ,EAAhB;;AACA,MAAMktB,OAAO,GAAG,IAAIltB,OAAJ,EAAhB;;AACA,MAAMmtB,OAAO,GAAG,IAAIntB,OAAJ,EAAhB;;AAEA,MAAMotB,IAAI,GAAG,IAAIh/B,OAAJ,EAAb;;AACA,MAAMi/B,IAAI,GAAG,IAAIj/B,OAAJ,EAAb;;AACA,MAAMk/B,IAAI,GAAG,IAAIl/B,OAAJ,EAAb;;AAEA,MAAMm/B,kBAAkB,GAAG,IAAIvtB,OAAJ,EAA3B;;AACA,MAAMwtB,uBAAuB,GAAG,IAAIxtB,OAAJ,EAAhC;;AAEA,SAASytB,IAAT,CAAerf,QAAf,EAAyBG,QAAzB,EAAoC;AAEnCxE,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,MAAZ;AAEA,OAAKwkC,QAAL,GAAgBA,QAAQ,KAAK5tC,SAAb,GAAyB4tC,QAAzB,GAAoC,IAAIua,cAAJ,EAApD;AACA,OAAKpa,QAAL,GAAgBA,QAAQ,KAAK/tC,SAAb,GAAyB+tC,QAAzB,GAAoC,IAAIiV,iBAAJ,EAApD;AAEA,OAAKkK,kBAAL;AAEA;;AAEDD,IAAI,CAAClvD,SAAL,GAAiBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEpEoC,EAAAA,WAAW,EAAE8sD,IAFuD;AAIpExf,EAAAA,MAAM,EAAE,IAJ4D;AAMpEpf,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBssB,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,QAAKA,MAAM,CAACkwC,qBAAP,KAAiCntD,SAAtC,EAAkD;AAEjD,WAAKmtD,qBAAL,GAA6BlwC,MAAM,CAACkwC,qBAAP,CAA6BjvD,KAA7B,EAA7B;AAEA;;AAED,QAAK+e,MAAM,CAACmwC,qBAAP,KAAiCptD,SAAtC,EAAkD;AAEjD,WAAKotD,qBAAL,GAA6BzuD,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBG,MAAM,CAACmwC,qBAA1B,CAA7B;AAEA;;AAED,SAAKrf,QAAL,GAAgB9wB,MAAM,CAAC8wB,QAAvB;AACA,SAAKH,QAAL,GAAgB3wB,MAAM,CAAC2wB,QAAvB;AAEA,WAAO,IAAP;AAEA,GA3BmE;AA6BpEsf,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,UAAMtf,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,QAAKA,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC,YAAMH,eAAe,GAAGza,QAAQ,CAACya,eAAjC;AACA,YAAM5pD,IAAI,GAAGE,MAAM,CAACF,IAAP,CAAa4pD,eAAb,CAAb;;AAEA,UAAK5pD,IAAI,CAACb,MAAL,GAAc,CAAnB,EAAuB;AAEtB,cAAMksD,cAAc,GAAGzB,eAAe,CAAE5pD,IAAI,CAAE,CAAF,CAAN,CAAtC;;AAEA,YAAKqrD,cAAc,KAAK9pD,SAAxB,EAAoC;AAEnC,eAAKmtD,qBAAL,GAA6B,EAA7B;AACA,eAAKC,qBAAL,GAA6B,EAA7B;;AAEA,eAAM,IAAI/hC,CAAC,GAAG,CAAR,EAAWgiC,EAAE,GAAGvD,cAAc,CAAClsD,MAArC,EAA6CytB,CAAC,GAAGgiC,EAAjD,EAAqDhiC,CAAC,EAAtD,EAA4D;AAE3D,kBAAM9W,IAAI,GAAGu1C,cAAc,CAAEz+B,CAAF,CAAd,CAAoB9W,IAApB,IAA4B+4C,MAAM,CAAEjiC,CAAF,CAA/C;AAEA,iBAAK8hC,qBAAL,CAA2B/kD,IAA3B,CAAiC,CAAjC;AACA,iBAAKglD,qBAAL,CAA4B74C,IAA5B,IAAqC8W,CAArC;AAEA;AAED;AAED;AAED,KA3BD,MA2BO;AAEN,YAAMs3B,YAAY,GAAG/U,QAAQ,CAAC+U,YAA9B;;AAEA,UAAKA,YAAY,KAAK3iD,SAAjB,IAA8B2iD,YAAY,CAAC/kD,MAAb,GAAsB,CAAzD,EAA6D;AAE5D8vB,QAAAA,OAAO,CAACyD,KAAR,CAAe,sGAAf;AAEA;AAED;AAED,GAxEmE;AA0EpEub,EAAAA,OAAO,EAAE,UAAW6gB,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,UAAM5f,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAMG,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAMjN,WAAW,GAAG,KAAKA,WAAzB;AAEA,QAAKiN,QAAQ,KAAK/tC,SAAlB,EAA8B,OANa,CAQ3C;;AAEA,QAAK4tC,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwCxY,QAAQ,CAACsb,qBAAT;;AAExCgD,IAAAA,OAAO,CAAC79B,IAAR,CAAcuf,QAAQ,CAACwY,cAAvB;;AACA8F,IAAAA,OAAO,CAACnzB,YAAR,CAAsB+H,WAAtB;;AAEA,QAAKysB,SAAS,CAACpZ,GAAV,CAAcrC,gBAAd,CAAgCoa,OAAhC,MAA8C,KAAnD,EAA2D,OAfhB,CAiB3C;;AAEAF,IAAAA,cAAc,CAACj4B,UAAf,CAA2B+M,WAA3B;;AACAmrB,IAAAA,IAAI,CAAC59B,IAAL,CAAWk/B,SAAS,CAACpZ,GAArB,EAA2Bpb,YAA3B,CAAyCizB,cAAzC,EApB2C,CAsB3C;;;AAEA,QAAKpe,QAAQ,CAAC2D,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,UAAK0a,IAAI,CAACpa,aAAL,CAAoBjE,QAAQ,CAAC2D,WAA7B,MAA+C,KAApD,EAA4D;AAE5D;;AAED,QAAIkc,YAAJ;;AAEA,QAAK7f,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC,YAAMhgD,KAAK,GAAGolC,QAAQ,CAACplC,KAAvB;AACA,YAAM/C,QAAQ,GAAGmoC,QAAQ,CAACwa,UAAT,CAAoB3iD,QAArC;AACA,YAAMioD,aAAa,GAAG9f,QAAQ,CAACya,eAAT,CAAyB5iD,QAA/C;AACA,YAAM6iD,oBAAoB,GAAG1a,QAAQ,CAAC0a,oBAAtC;AACA,YAAM7vB,EAAE,GAAGmV,QAAQ,CAACwa,UAAT,CAAoB3vB,EAA/B;AACA,YAAMihB,GAAG,GAAG9L,QAAQ,CAACwa,UAAT,CAAoB1O,GAAhC;AACA,YAAMuM,MAAM,GAAGrY,QAAQ,CAACqY,MAAxB;AACA,YAAMsC,SAAS,GAAG3a,QAAQ,CAAC2a,SAA3B;;AAEA,UAAK//C,KAAK,KAAK,IAAf,EAAsB;AAErB;AAEA,YAAK1K,KAAK,CAACoC,OAAN,CAAe6tC,QAAf,CAAL,EAAiC;AAEhC,eAAM,IAAI9uC,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGuV,MAAM,CAACroD,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,kBAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AACA,kBAAM0uD,aAAa,GAAG5f,QAAQ,CAAE4Y,KAAK,CAACzJ,aAAR,CAA9B;AAEA,kBAAMzF,KAAK,GAAGx6C,IAAI,CAAC+E,GAAL,CAAU2kD,KAAK,CAAClP,KAAhB,EAAuB8Q,SAAS,CAAC9Q,KAAjC,CAAd;AACA,kBAAMI,GAAG,GAAG56C,IAAI,CAAC8E,GAAL,CAAY4kD,KAAK,CAAClP,KAAN,GAAckP,KAAK,CAACtZ,KAAhC,EAA2Ckb,SAAS,CAAC9Q,KAAV,GAAkB8Q,SAAS,CAAClb,KAAvE,CAAZ;;AAEA,iBAAM,IAAIyF,CAAC,GAAG2E,KAAR,EAAesS,EAAE,GAAGlS,GAA1B,EAA+B/E,CAAC,GAAGiX,EAAnC,EAAuCjX,CAAC,IAAI,CAA5C,EAAgD;AAE/C,oBAAMz1C,CAAC,GAAGmL,KAAK,CAACsoB,IAAN,CAAYgiB,CAAZ,CAAV;AACA,oBAAM11C,CAAC,GAAGoL,KAAK,CAACsoB,IAAN,CAAYgiB,CAAC,GAAG,CAAhB,CAAV;AACA,oBAAMhxC,CAAC,GAAG0G,KAAK,CAACsoB,IAAN,CAAYgiB,CAAC,GAAG,CAAhB,CAAV;AAEA2a,cAAAA,YAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQD,aAAR,EAAuBJ,SAAvB,EAAkCtB,IAAlC,EAAwCxmD,QAAxC,EAAkDioD,aAAlD,EAAiEpF,oBAAjE,EAAuF7vB,EAAvF,EAA2FihB,GAA3F,EAAgGr8C,CAAhG,EAAmGD,CAAnG,EAAsG0E,CAAtG,CAA9C;;AAEA,kBAAK2rD,YAAL,EAAoB;AAEnBA,gBAAAA,YAAY,CAACI,SAAb,GAAyB5wD,IAAI,CAACwE,KAAL,CAAYqxC,CAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9C2a,gBAAAA,YAAY,CAAC5G,IAAb,CAAkB3J,aAAlB,GAAkCyJ,KAAK,CAACzJ,aAAxC;AACAsQ,gBAAAA,UAAU,CAACplD,IAAX,CAAiBqlD,YAAjB;AAEA;AAED;AAED;AAED,SA9BD,MA8BO;AAEN,gBAAMhW,KAAK,GAAGx6C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAaumD,SAAS,CAAC9Q,KAAvB,CAAd;AACA,gBAAMI,GAAG,GAAG56C,IAAI,CAAC8E,GAAL,CAAUyG,KAAK,CAAC6kC,KAAhB,EAAyBkb,SAAS,CAAC9Q,KAAV,GAAkB8Q,SAAS,CAAClb,KAArD,CAAZ;;AAEA,eAAM,IAAIpuC,CAAC,GAAGw4C,KAAR,EAAe/G,EAAE,GAAGmH,GAA1B,EAA+B54C,CAAC,GAAGyxC,EAAnC,EAAuCzxC,CAAC,IAAI,CAA5C,EAAgD;AAE/C,kBAAM5B,CAAC,GAAGmL,KAAK,CAACsoB,IAAN,CAAY7xB,CAAZ,CAAV;AACA,kBAAM7B,CAAC,GAAGoL,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAV;AACA,kBAAM6C,CAAC,GAAG0G,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAV;AAEAwuD,YAAAA,YAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQ7f,QAAR,EAAkBwf,SAAlB,EAA6BtB,IAA7B,EAAmCxmD,QAAnC,EAA6CioD,aAA7C,EAA4DpF,oBAA5D,EAAkF7vB,EAAlF,EAAsFihB,GAAtF,EAA2Fr8C,CAA3F,EAA8FD,CAA9F,EAAiG0E,CAAjG,CAA9C;;AAEA,gBAAK2rD,YAAL,EAAoB;AAEnBA,cAAAA,YAAY,CAACI,SAAb,GAAyB5wD,IAAI,CAACwE,KAAL,CAAYxC,CAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9CuuD,cAAAA,UAAU,CAACplD,IAAX,CAAiBqlD,YAAjB;AAEA;AAED;AAED;AAED,OA1DD,MA0DO,IAAKhoD,QAAQ,KAAKzF,SAAlB,EAA8B;AAEpC;AAEA,YAAKlC,KAAK,CAACoC,OAAN,CAAe6tC,QAAf,CAAL,EAAiC;AAEhC,eAAM,IAAI9uC,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGuV,MAAM,CAACroD,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,kBAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AACA,kBAAM0uD,aAAa,GAAG5f,QAAQ,CAAE4Y,KAAK,CAACzJ,aAAR,CAA9B;AAEA,kBAAMzF,KAAK,GAAGx6C,IAAI,CAAC+E,GAAL,CAAU2kD,KAAK,CAAClP,KAAhB,EAAuB8Q,SAAS,CAAC9Q,KAAjC,CAAd;AACA,kBAAMI,GAAG,GAAG56C,IAAI,CAAC8E,GAAL,CAAY4kD,KAAK,CAAClP,KAAN,GAAckP,KAAK,CAACtZ,KAAhC,EAA2Ckb,SAAS,CAAC9Q,KAAV,GAAkB8Q,SAAS,CAAClb,KAAvE,CAAZ;;AAEA,iBAAM,IAAIyF,CAAC,GAAG2E,KAAR,EAAesS,EAAE,GAAGlS,GAA1B,EAA+B/E,CAAC,GAAGiX,EAAnC,EAAuCjX,CAAC,IAAI,CAA5C,EAAgD;AAE/C,oBAAMz1C,CAAC,GAAGy1C,CAAV;AACA,oBAAM11C,CAAC,GAAG01C,CAAC,GAAG,CAAd;AACA,oBAAMhxC,CAAC,GAAGgxC,CAAC,GAAG,CAAd;AAEA2a,cAAAA,YAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQD,aAAR,EAAuBJ,SAAvB,EAAkCtB,IAAlC,EAAwCxmD,QAAxC,EAAkDioD,aAAlD,EAAiEpF,oBAAjE,EAAuF7vB,EAAvF,EAA2FihB,GAA3F,EAAgGr8C,CAAhG,EAAmGD,CAAnG,EAAsG0E,CAAtG,CAA9C;;AAEA,kBAAK2rD,YAAL,EAAoB;AAEnBA,gBAAAA,YAAY,CAACI,SAAb,GAAyB5wD,IAAI,CAACwE,KAAL,CAAYqxC,CAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9C2a,gBAAAA,YAAY,CAAC5G,IAAb,CAAkB3J,aAAlB,GAAkCyJ,KAAK,CAACzJ,aAAxC;AACAsQ,gBAAAA,UAAU,CAACplD,IAAX,CAAiBqlD,YAAjB;AAEA;AAED;AAED;AAED,SA9BD,MA8BO;AAEN,gBAAMhW,KAAK,GAAGx6C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAaumD,SAAS,CAAC9Q,KAAvB,CAAd;AACA,gBAAMI,GAAG,GAAG56C,IAAI,CAAC8E,GAAL,CAAU0D,QAAQ,CAAC4nC,KAAnB,EAA4Bkb,SAAS,CAAC9Q,KAAV,GAAkB8Q,SAAS,CAAClb,KAAxD,CAAZ;;AAEA,eAAM,IAAIpuC,CAAC,GAAGw4C,KAAR,EAAe/G,EAAE,GAAGmH,GAA1B,EAA+B54C,CAAC,GAAGyxC,EAAnC,EAAuCzxC,CAAC,IAAI,CAA5C,EAAgD;AAE/C,kBAAM5B,CAAC,GAAG4B,CAAV;AACA,kBAAM7B,CAAC,GAAG6B,CAAC,GAAG,CAAd;AACA,kBAAM6C,CAAC,GAAG7C,CAAC,GAAG,CAAd;AAEAwuD,YAAAA,YAAY,GAAGG,+BAA+B,CAAE,IAAF,EAAQ7f,QAAR,EAAkBwf,SAAlB,EAA6BtB,IAA7B,EAAmCxmD,QAAnC,EAA6CioD,aAA7C,EAA4DpF,oBAA5D,EAAkF7vB,EAAlF,EAAsFihB,GAAtF,EAA2Fr8C,CAA3F,EAA8FD,CAA9F,EAAiG0E,CAAjG,CAA9C;;AAEA,gBAAK2rD,YAAL,EAAoB;AAEnBA,cAAAA,YAAY,CAACI,SAAb,GAAyB5wD,IAAI,CAACwE,KAAL,CAAYxC,CAAC,GAAG,CAAhB,CAAzB,CAFmB,CAE2B;;AAC9CuuD,cAAAA,UAAU,CAACplD,IAAX,CAAiBqlD,YAAjB;AAEA;AAED;AAED;AAED;AAED,KAjID,MAiIO,IAAK7f,QAAQ,CAACyb,UAAd,EAA2B;AAEjC,YAAMyE,eAAe,GAAGhwD,KAAK,CAACoC,OAAN,CAAe6tC,QAAf,CAAxB;AAEA,YAAM8X,QAAQ,GAAGjY,QAAQ,CAACiY,QAA1B;AACA,YAAMe,KAAK,GAAGhZ,QAAQ,CAACgZ,KAAvB;AACA,UAAIb,GAAJ;AAEA,YAAMgB,aAAa,GAAGnZ,QAAQ,CAACmZ,aAAT,CAAwB,CAAxB,CAAtB;AACA,UAAKA,aAAa,CAACnpD,MAAd,GAAuB,CAA5B,EAAgCmoD,GAAG,GAAGgB,aAAN;;AAEhC,WAAM,IAAIrlD,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAGnH,KAAK,CAAChpD,MAA5B,EAAoC8D,CAAC,GAAGqsD,EAAxC,EAA4CrsD,CAAC,EAA7C,EAAmD;AAElD,cAAMmlD,IAAI,GAAGD,KAAK,CAAEllD,CAAF,CAAlB;AACA,cAAMssD,YAAY,GAAGF,eAAe,GAAG/f,QAAQ,CAAE8Y,IAAI,CAAC3J,aAAP,CAAX,GAAoCnP,QAAxE;AAEA,YAAKigB,YAAY,KAAKhuD,SAAtB,EAAkC;AAElC,cAAMiuD,GAAG,GAAGpI,QAAQ,CAAEgB,IAAI,CAACxpD,CAAP,CAApB;AACA,cAAM6wD,GAAG,GAAGrI,QAAQ,CAAEgB,IAAI,CAACzpD,CAAP,CAApB;AACA,cAAM+wD,GAAG,GAAGtI,QAAQ,CAAEgB,IAAI,CAAC/kD,CAAP,CAApB;AAEA2rD,QAAAA,YAAY,GAAGW,iBAAiB,CAAE,IAAF,EAAQJ,YAAR,EAAsBT,SAAtB,EAAiCtB,IAAjC,EAAuCgC,GAAvC,EAA4CC,GAA5C,EAAiDC,GAAjD,EAAsDpB,kBAAtD,CAAhC;;AAEA,YAAKU,YAAL,EAAoB;AAEnB,cAAK1H,GAAG,IAAIA,GAAG,CAAErkD,CAAF,CAAf,EAAuB;AAEtB,kBAAM2sD,KAAK,GAAGtI,GAAG,CAAErkD,CAAF,CAAjB;;AACAkrD,YAAAA,IAAI,CAACv+B,IAAL,CAAWggC,KAAK,CAAE,CAAF,CAAhB;;AACAxB,YAAAA,IAAI,CAACx+B,IAAL,CAAWggC,KAAK,CAAE,CAAF,CAAhB;;AACAvB,YAAAA,IAAI,CAACz+B,IAAL,CAAWggC,KAAK,CAAE,CAAF,CAAhB;;AAEAZ,YAAAA,YAAY,CAACh1B,EAAb,GAAkBkgB,QAAQ,CAACY,KAAT,CAAgBwT,kBAAhB,EAAoCkB,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDvB,IAAnD,EAAyDC,IAAzD,EAA+DC,IAA/D,EAAqE,IAAIl/B,OAAJ,EAArE,CAAlB;AAEA;;AAED6/B,UAAAA,YAAY,CAAC5G,IAAb,GAAoBA,IAApB;AACA4G,UAAAA,YAAY,CAACI,SAAb,GAAyBnsD,CAAzB;AACA8rD,UAAAA,UAAU,CAACplD,IAAX,CAAiBqlD,YAAjB;AAEA;AAED;AAED;AAED;AA1RmE,CAApD,CAAjB;;AA8RA,SAASW,iBAAT,CAA4B1qD,MAA5B,EAAoCqqC,QAApC,EAA8Cwf,SAA9C,EAAyDpZ,GAAzD,EAA8DiW,EAA9D,EAAkEC,EAAlE,EAAsEC,EAAtE,EAA0ElZ,KAA1E,EAAkF;AAEjF,MAAIuB,SAAJ;;AAEA,MAAK5E,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC;AAEjCi0B,IAAAA,SAAS,GAAGwB,GAAG,CAACmC,iBAAJ,CAAuBgU,EAAvB,EAA2BD,EAA3B,EAA+BD,EAA/B,EAAmC,IAAnC,EAAyChZ,KAAzC,CAAZ;AAEA,GAJD,MAIO;AAENuB,IAAAA,SAAS,GAAGwB,GAAG,CAACmC,iBAAJ,CAAuB8T,EAAvB,EAA2BC,EAA3B,EAA+BC,EAA/B,EAAmCvc,QAAQ,CAACyP,IAAT,KAAkB7+B,UAArD,EAAiEyyB,KAAjE,CAAZ;AAEA;;AAED,MAAKuB,SAAS,KAAK,IAAnB,EAA0B,OAAO,IAAP;;AAE1Bqa,EAAAA,uBAAuB,CAAC3+B,IAAxB,CAA8B+iB,KAA9B;;AACA4b,EAAAA,uBAAuB,CAACj0B,YAAxB,CAAsCr1B,MAAM,CAACo9B,WAA7C;;AAEA,QAAMuK,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCg9B,uBAAjC,CAAjB;AAEA,MAAK3hB,QAAQ,GAAGkiB,SAAS,CAACtmB,IAArB,IAA6BoE,QAAQ,GAAGkiB,SAAS,CAACrmB,GAAvD,EAA6D,OAAO,IAAP;AAE7D,SAAO;AACNmE,IAAAA,QAAQ,EAAEA,QADJ;AAEN+F,IAAAA,KAAK,EAAE4b,uBAAuB,CAAC5+B,KAAxB,EAFD;AAGN1qB,IAAAA,MAAM,EAAEA;AAHF,GAAP;AAMA;;AAED,SAASkqD,+BAAT,CAA0ClqD,MAA1C,EAAkDqqC,QAAlD,EAA4Dwf,SAA5D,EAAuEpZ,GAAvE,EAA4E1uC,QAA5E,EAAsFioD,aAAtF,EAAqGpF,oBAArG,EAA2H7vB,EAA3H,EAA+HihB,GAA/H,EAAoIr8C,CAApI,EAAuID,CAAvI,EAA0I0E,CAA1I,EAA8I;AAE7IqqD,EAAAA,GAAG,CAACv7B,mBAAJ,CAAyBnrB,QAAzB,EAAmCpI,CAAnC;;AACA+uD,EAAAA,GAAG,CAACx7B,mBAAJ,CAAyBnrB,QAAzB,EAAmCrI,CAAnC;;AACAivD,EAAAA,GAAG,CAACz7B,mBAAJ,CAAyBnrB,QAAzB,EAAmC3D,CAAnC;;AAEA,QAAMwsD,eAAe,GAAG5qD,MAAM,CAACypD,qBAA/B;;AAEA,MAAKpf,QAAQ,CAAC4U,YAAT,IAAyB+K,aAAzB,IAA0CY,eAA/C,EAAiE;AAEhE7B,IAAAA,OAAO,CAACh/B,GAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;;AACAi/B,IAAAA,OAAO,CAACj/B,GAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;;AACAk/B,IAAAA,OAAO,CAACl/B,GAAR,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;;AAEA,SAAM,IAAIxuB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGgd,aAAa,CAAC9vD,MAApC,EAA4CqB,CAAC,GAAGyxC,EAAhD,EAAoDzxC,CAAC,EAArD,EAA2D;AAE1D,YAAMsvD,SAAS,GAAGD,eAAe,CAAErvD,CAAF,CAAjC;AACA,YAAM6qD,cAAc,GAAG4D,aAAa,CAAEzuD,CAAF,CAApC;AAEA,UAAKsvD,SAAS,KAAK,CAAnB,EAAuB;;AAEvBjC,MAAAA,MAAM,CAAC17B,mBAAP,CAA4Bk5B,cAA5B,EAA4CzsD,CAA5C;;AACAkvD,MAAAA,MAAM,CAAC37B,mBAAP,CAA4Bk5B,cAA5B,EAA4C1sD,CAA5C;;AACAovD,MAAAA,MAAM,CAAC57B,mBAAP,CAA4Bk5B,cAA5B,EAA4ChoD,CAA5C;;AAEA,UAAKwmD,oBAAL,EAA4B;AAE3BmE,QAAAA,OAAO,CAACj+B,eAAR,CAAyB89B,MAAzB,EAAiCiC,SAAjC;;AACA7B,QAAAA,OAAO,CAACl+B,eAAR,CAAyB+9B,MAAzB,EAAiCgC,SAAjC;;AACA5B,QAAAA,OAAO,CAACn+B,eAAR,CAAyBg+B,MAAzB,EAAiC+B,SAAjC;AAEA,OAND,MAMO;AAEN9B,QAAAA,OAAO,CAACj+B,eAAR,CAAyB89B,MAAM,CAAC79B,GAAP,CAAY09B,GAAZ,CAAzB,EAA4CoC,SAA5C;;AACA7B,QAAAA,OAAO,CAACl+B,eAAR,CAAyB+9B,MAAM,CAAC99B,GAAP,CAAY29B,GAAZ,CAAzB,EAA4CmC,SAA5C;;AACA5B,QAAAA,OAAO,CAACn+B,eAAR,CAAyBg+B,MAAM,CAAC/9B,GAAP,CAAY49B,GAAZ,CAAzB,EAA4CkC,SAA5C;AAEA;AAED;;AAEDpC,IAAAA,GAAG,CAACv1C,GAAJ,CAAS61C,OAAT;;AACAL,IAAAA,GAAG,CAACx1C,GAAJ,CAAS81C,OAAT;;AACAL,IAAAA,GAAG,CAACz1C,GAAJ,CAAS+1C,OAAT;AAEA;;AAED,MAAKjpD,MAAM,CAAC8qD,aAAZ,EAA4B;AAE3B9qD,IAAAA,MAAM,CAAC+qD,aAAP,CAAsBpxD,CAAtB,EAAyB8uD,GAAzB;AACAzoD,IAAAA,MAAM,CAAC+qD,aAAP,CAAsBrxD,CAAtB,EAAyBgvD,GAAzB;AACA1oD,IAAAA,MAAM,CAAC+qD,aAAP,CAAsB3sD,CAAtB,EAAyBuqD,GAAzB;AAEA;;AAED,QAAMoB,YAAY,GAAGW,iBAAiB,CAAE1qD,MAAF,EAAUqqC,QAAV,EAAoBwf,SAApB,EAA+BpZ,GAA/B,EAAoCgY,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDU,kBAAnD,CAAtC;;AAEA,MAAKU,YAAL,EAAoB;AAEnB,QAAKh1B,EAAL,EAAU;AAETm0B,MAAAA,IAAI,CAACh8B,mBAAL,CAA0B6H,EAA1B,EAA8Bp7B,CAA9B;;AACAwvD,MAAAA,IAAI,CAACj8B,mBAAL,CAA0B6H,EAA1B,EAA8Br7B,CAA9B;;AACA0vD,MAAAA,IAAI,CAACl8B,mBAAL,CAA0B6H,EAA1B,EAA8B32B,CAA9B;;AAEA2rD,MAAAA,YAAY,CAACh1B,EAAb,GAAkBkgB,QAAQ,CAACY,KAAT,CAAgBwT,kBAAhB,EAAoCZ,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDO,IAAnD,EAAyDC,IAAzD,EAA+DC,IAA/D,EAAqE,IAAIl/B,OAAJ,EAArE,CAAlB;AAEA;;AAED,QAAK8rB,GAAL,EAAW;AAEVkT,MAAAA,IAAI,CAACh8B,mBAAL,CAA0B8oB,GAA1B,EAA+Br8C,CAA/B;;AACAwvD,MAAAA,IAAI,CAACj8B,mBAAL,CAA0B8oB,GAA1B,EAA+Bt8C,CAA/B;;AACA0vD,MAAAA,IAAI,CAACl8B,mBAAL,CAA0B8oB,GAA1B,EAA+B53C,CAA/B;;AAEA2rD,MAAAA,YAAY,CAAC/T,GAAb,GAAmBf,QAAQ,CAACY,KAAT,CAAgBwT,kBAAhB,EAAoCZ,GAApC,EAAyCC,GAAzC,EAA8CC,GAA9C,EAAmDO,IAAnD,EAAyDC,IAAzD,EAA+DC,IAA/D,EAAqE,IAAIl/B,OAAJ,EAArE,CAAnB;AAEA;;AAED,UAAMi5B,IAAI,GAAG,IAAI5J,KAAJ,CAAW5/C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,CAAb;AACA62C,IAAAA,QAAQ,CAACC,SAAT,CAAoBuT,GAApB,EAAyBC,GAAzB,EAA8BC,GAA9B,EAAmCxF,IAAI,CAACjlB,MAAxC;AAEA6rB,IAAAA,YAAY,CAAC5G,IAAb,GAAoBA,IAApB;AAEA;;AAED,SAAO4G,YAAP;AAEA;AAED;;;;;;;;;;AASA,IAAIiB,WAAW,GAAG,CAAlB,EAAqB;;AACrB,MAAMC,KAAK,GAAG,IAAIhsB,OAAJ,EAAd;;AACA,MAAMisB,MAAM,GAAG,IAAIrlB,QAAJ,EAAf;;AACA,MAAMslB,SAAS,GAAG,IAAIrvB,OAAJ,EAAlB;;AAEA,SAASsvB,QAAT,GAAoB;AAEnBnwD,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,IAA7B,EAAmC;AAAER,IAAAA,KAAK,EAAEqsD,WAAW,IAAI;AAAxB,GAAnC;AAEA,OAAK1jC,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA,OAAKnW,IAAL,GAAY,EAAZ;AACA,OAAKnL,IAAL,GAAY,UAAZ;AAEA,OAAKy8C,QAAL,GAAgB,EAAhB;AACA,OAAK5B,MAAL,GAAc,EAAd;AACA,OAAK2C,KAAL,GAAa,EAAb;AACA,OAAKG,aAAL,GAAqB,CAAC,EAAD,CAArB;AAEA,OAAKpE,YAAL,GAAoB,EAApB;AACA,OAAKC,YAAL,GAAoB,EAApB;AAEA,OAAKsD,WAAL,GAAmB,EAAnB;AACA,OAAKC,WAAL,GAAmB,EAAnB;AAEA,OAAKiD,aAAL,GAAqB,EAArB;AAEA,OAAK7X,WAAL,GAAmB,IAAnB;AACA,OAAK6U,cAAL,GAAsB,IAAtB,CAvBmB,CAyBnB;;AAEA,OAAKqD,kBAAL,GAA0B,KAA1B;AACA,OAAKpD,kBAAL,GAA0B,KAA1B;AACA,OAAKG,aAAL,GAAqB,KAArB;AACA,OAAKF,iBAAL,GAAyB,KAAzB;AACA,OAAKC,gBAAL,GAAwB,KAAxB;AACA,OAAKmD,uBAAL,GAA+B,KAA/B;AACA,OAAKjD,gBAAL,GAAwB,KAAxB;AAEA;;AAEDqI,QAAQ,CAAC/wD,SAAT,GAAqBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAE/EoC,EAAAA,WAAW,EAAE2uD,QAFkE;AAI/EzF,EAAAA,UAAU,EAAE,IAJmE;AAM/EtwB,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAoB;AAEjC,UAAM+V,YAAY,GAAG,IAAI7Y,OAAJ,GAAcuD,eAAd,CAA+BT,MAA/B,CAArB;;AAEA,SAAM,IAAI/0B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKmV,QAAL,CAAcjoD,MAApC,EAA4CqB,CAAC,GAAGyxC,EAAhD,EAAoDzxC,CAAC,EAArD,EAA2D;AAE1D,YAAM8vD,MAAM,GAAG,KAAKlJ,QAAL,CAAe5mD,CAAf,CAAf;AACA8vD,MAAAA,MAAM,CAACh2B,YAAP,CAAqB/E,MAArB;AAEA;;AAED,SAAM,IAAI/0B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkW,KAAL,CAAWhpD,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,YAAM4nD,IAAI,GAAG,KAAKD,KAAL,CAAY3nD,CAAZ,CAAb;AACA4nD,MAAAA,IAAI,CAACjlB,MAAL,CAAY5S,YAAZ,CAA0B+a,YAA1B,EAAyCla,SAAzC;;AAEA,WAAM,IAAIijB,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGlD,IAAI,CAAC1J,aAAL,CAAmBv/C,MAAzC,EAAiDk1C,CAAC,GAAGiX,EAArD,EAAyDjX,CAAC,EAA1D,EAAgE;AAE/D+T,QAAAA,IAAI,CAAC1J,aAAL,CAAoBrK,CAApB,EAAwB9jB,YAAxB,CAAsC+a,YAAtC,EAAqDla,SAArD;AAEA;AAED;;AAED,QAAK,KAAK0hB,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,WAAKC,kBAAL;AAEA;;AAED,QAAK,KAAK4U,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,WAAK8C,qBAAL;AAEA;;AAED,SAAK7C,kBAAL,GAA0B,IAA1B;AACA,SAAKC,iBAAL,GAAyB,IAAzB;AAEA,WAAO,IAAP;AAEA,GA/C8E;AAiD/Erb,EAAAA,OAAO,EAAE,UAAWnb,KAAX,EAAmB;AAE3B;AAEA6+B,IAAAA,KAAK,CAAC3oB,aAAN,CAAqBlW,KAArB;;AAEA,SAAKiJ,YAAL,CAAmB41B,KAAnB;AAEA,WAAO,IAAP;AAEA,GA3D8E;AA6D/EzjB,EAAAA,OAAO,EAAE,UAAWpb,KAAX,EAAmB;AAE3B;AAEA6+B,IAAAA,KAAK,CAAC1oB,aAAN,CAAqBnW,KAArB;;AAEA,SAAKiJ,YAAL,CAAmB41B,KAAnB;AAEA,WAAO,IAAP;AAEA,GAvE8E;AAyE/ExjB,EAAAA,OAAO,EAAE,UAAWrb,KAAX,EAAmB;AAE3B;AAEA6+B,IAAAA,KAAK,CAACzoB,aAAN,CAAqBpW,KAArB;;AAEA,SAAKiJ,YAAL,CAAmB41B,KAAnB;AAEA,WAAO,IAAP;AAEA,GAnF8E;AAqF/Ep5B,EAAAA,SAAS,EAAE,UAAWjvB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE/B;AAEAg2B,IAAAA,KAAK,CAAC5oB,eAAN,CAAuBz/B,CAAvB,EAA0BE,CAA1B,EAA6BmyB,CAA7B;;AAEA,SAAKI,YAAL,CAAmB41B,KAAnB;AAEA,WAAO,IAAP;AAEA,GA/F8E;AAiG/Ev5B,EAAAA,KAAK,EAAE,UAAW9uB,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE3B;AAEAg2B,IAAAA,KAAK,CAACvoB,SAAN,CAAiB9/B,CAAjB,EAAoBE,CAApB,EAAuBmyB,CAAvB;;AAEA,SAAKI,YAAL,CAAmB41B,KAAnB;AAEA,WAAO,IAAP;AAEA,GA3G8E;AA6G/EnqB,EAAAA,MAAM,EAAE,UAAWkH,MAAX,EAAoB;AAE3BkjB,IAAAA,MAAM,CAACpqB,MAAP,CAAekH,MAAf;;AAEAkjB,IAAAA,MAAM,CAAC92B,YAAP;;AAEA,SAAKiB,YAAL,CAAmB61B,MAAM,CAAC56B,MAA1B;AAEA,WAAO,IAAP;AAEA,GAvH8E;AAyH/Eg7B,EAAAA,kBAAkB,EAAE,UAAWphB,QAAX,EAAsB;AAEzC,UAAMxuC,KAAK,GAAG,IAAd;AAEA,UAAMoJ,KAAK,GAAGolC,QAAQ,CAACplC,KAAT,KAAmB,IAAnB,GAA0BolC,QAAQ,CAACplC,KAAnC,GAA2CxI,SAAzD;AACA,UAAMooD,UAAU,GAAGxa,QAAQ,CAACwa,UAA5B;;AAEA,QAAKA,UAAU,CAAC3iD,QAAX,KAAwBzF,SAA7B,EAAyC;AAExC0tB,MAAAA,OAAO,CAACyD,KAAR,CAAe,kFAAf;AACA,aAAO,IAAP;AAEA;;AAED,UAAM1rB,QAAQ,GAAG2iD,UAAU,CAAC3iD,QAA5B;AACA,UAAMm8B,MAAM,GAAGwmB,UAAU,CAACxmB,MAA1B;AACA,UAAMllC,KAAK,GAAG0rD,UAAU,CAAC1rD,KAAzB;AACA,UAAM+7B,EAAE,GAAG2vB,UAAU,CAAC3vB,EAAtB;AACA,UAAMihB,GAAG,GAAG0O,UAAU,CAAC1O,GAAvB;AAEA,QAAKA,GAAG,KAAK15C,SAAb,EAAyB,KAAK+mD,aAAL,CAAoB,CAApB,IAA0B,EAA1B;;AAEzB,SAAM,IAAI9nD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGwG,QAAQ,CAAC4nC,KAA9B,EAAqCpuC,CAAC,EAAtC,EAA4C;AAE3CG,MAAAA,KAAK,CAACymD,QAAN,CAAez9C,IAAf,CAAqB,IAAIo3B,OAAJ,GAAc5O,mBAAd,CAAmCnrB,QAAnC,EAA6CxG,CAA7C,CAArB;;AAEA,UAAKvC,KAAK,KAAKsD,SAAf,EAA2B;AAE1BZ,QAAAA,KAAK,CAAC6kD,MAAN,CAAa77C,IAAb,CAAmB,IAAI9F,KAAJ,GAAYsuB,mBAAZ,CAAiCl0B,KAAjC,EAAwCuC,CAAxC,CAAnB;AAEA;AAED;;AAED,aAASgwD,OAAT,CAAkB5xD,CAAlB,EAAqBD,CAArB,EAAwB0E,CAAxB,EAA2Bo7C,aAA3B,EAA2C;AAE1C,YAAME,YAAY,GAAK1gD,KAAK,KAAKsD,SAAZ,GAA0B,EAA1B,GAA+B,CACnDZ,KAAK,CAAC6kD,MAAN,CAAc5mD,CAAd,EAAkB+wB,KAAlB,EADmD,EAEnDhvB,KAAK,CAAC6kD,MAAN,CAAc7mD,CAAd,EAAkBgxB,KAAlB,EAFmD,EAGnDhvB,KAAK,CAAC6kD,MAAN,CAAcniD,CAAd,EAAkBssB,KAAlB,EAHmD,CAApD;AAMA,YAAM+uB,aAAa,GAAKvb,MAAM,KAAK5hC,SAAb,GAA2B,EAA3B,GAAgC,CACrD,IAAIw/B,OAAJ,GAAc5O,mBAAd,CAAmCgR,MAAnC,EAA2CvkC,CAA3C,CADqD,EAErD,IAAImiC,OAAJ,GAAc5O,mBAAd,CAAmCgR,MAAnC,EAA2CxkC,CAA3C,CAFqD,EAGrD,IAAIoiC,OAAJ,GAAc5O,mBAAd,CAAmCgR,MAAnC,EAA2C9/B,CAA3C,CAHqD,CAAtD;AAMA,YAAM+kD,IAAI,GAAG,IAAI5J,KAAJ,CAAW5/C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAoBq7C,aAApB,EAAmCC,YAAnC,EAAiDF,aAAjD,CAAb;AAEA99C,MAAAA,KAAK,CAACwnD,KAAN,CAAYx+C,IAAZ,CAAkBy+C,IAAlB;;AAEA,UAAKpuB,EAAE,KAAKz4B,SAAZ,EAAwB;AAEvBZ,QAAAA,KAAK,CAAC2nD,aAAN,CAAqB,CAArB,EAAyB3+C,IAAzB,CAA+B,CAC9B,IAAIwlB,OAAJ,GAAcgD,mBAAd,CAAmC6H,EAAnC,EAAuCp7B,CAAvC,CAD8B,EAE9B,IAAIuwB,OAAJ,GAAcgD,mBAAd,CAAmC6H,EAAnC,EAAuCr7B,CAAvC,CAF8B,EAG9B,IAAIwwB,OAAJ,GAAcgD,mBAAd,CAAmC6H,EAAnC,EAAuC32B,CAAvC,CAH8B,CAA/B;AAMA;;AAED,UAAK43C,GAAG,KAAK15C,SAAb,EAAyB;AAExBZ,QAAAA,KAAK,CAAC2nD,aAAN,CAAqB,CAArB,EAAyB3+C,IAAzB,CAA+B,CAC9B,IAAIwlB,OAAJ,GAAcgD,mBAAd,CAAmC8oB,GAAnC,EAAwCr8C,CAAxC,CAD8B,EAE9B,IAAIuwB,OAAJ,GAAcgD,mBAAd,CAAmC8oB,GAAnC,EAAwCt8C,CAAxC,CAF8B,EAG9B,IAAIwwB,OAAJ,GAAcgD,mBAAd,CAAmC8oB,GAAnC,EAAwC53C,CAAxC,CAH8B,CAA/B;AAMA;AAED;;AAED,UAAMmkD,MAAM,GAAGrY,QAAQ,CAACqY,MAAxB;;AAEA,QAAKA,MAAM,CAACroD,MAAP,GAAgB,CAArB,EAAyB;AAExB,WAAM,IAAIqB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGgnD,MAAM,CAACroD,MAA5B,EAAoCqB,CAAC,EAArC,EAA2C;AAE1C,cAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AAEA,cAAMw4C,KAAK,GAAGkP,KAAK,CAAClP,KAApB;AACA,cAAMpK,KAAK,GAAGsZ,KAAK,CAACtZ,KAApB;;AAEA,aAAM,IAAIyF,CAAC,GAAG2E,KAAR,EAAesS,EAAE,GAAGtS,KAAK,GAAGpK,KAAlC,EAAyCyF,CAAC,GAAGiX,EAA7C,EAAiDjX,CAAC,IAAI,CAAtD,EAA0D;AAEzD,cAAKtqC,KAAK,KAAKxI,SAAf,EAA2B;AAE1BivD,YAAAA,OAAO,CAAEzmD,KAAK,CAACsoB,IAAN,CAAYgiB,CAAZ,CAAF,EAAmBtqC,KAAK,CAACsoB,IAAN,CAAYgiB,CAAC,GAAG,CAAhB,CAAnB,EAAwCtqC,KAAK,CAACsoB,IAAN,CAAYgiB,CAAC,GAAG,CAAhB,CAAxC,EAA6D6T,KAAK,CAACzJ,aAAnE,CAAP;AAEA,WAJD,MAIO;AAEN+R,YAAAA,OAAO,CAAEnc,CAAF,EAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,EAAmB6T,KAAK,CAACzJ,aAAzB,CAAP;AAEA;AAED;AAED;AAED,KAzBD,MAyBO;AAEN,UAAK10C,KAAK,KAAKxI,SAAf,EAA2B;AAE1B,aAAM,IAAIf,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGuJ,KAAK,CAAC6kC,KAA3B,EAAkCpuC,CAAC,IAAI,CAAvC,EAA2C;AAE1CgwD,UAAAA,OAAO,CAAEzmD,KAAK,CAACsoB,IAAN,CAAY7xB,CAAZ,CAAF,EAAmBuJ,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAnB,EAAwCuJ,KAAK,CAACsoB,IAAN,CAAY7xB,CAAC,GAAG,CAAhB,CAAxC,CAAP;AAEA;AAED,OARD,MAQO;AAEN,aAAM,IAAIA,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGwG,QAAQ,CAAC4nC,KAA9B,EAAqCpuC,CAAC,IAAI,CAA1C,EAA8C;AAE7CgwD,UAAAA,OAAO,CAAEhwD,CAAF,EAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG,CAAhB,CAAP;AAEA;AAED;AAED;;AAED,SAAK+qD,kBAAL;;AAEA,QAAKpc,QAAQ,CAAC2D,WAAT,KAAyB,IAA9B,EAAqC;AAEpC,WAAKA,WAAL,GAAmB3D,QAAQ,CAAC2D,WAAT,CAAqBnjB,KAArB,EAAnB;AAEA;;AAED,QAAKwf,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwC;AAEvC,WAAKA,cAAL,GAAsBxY,QAAQ,CAACwY,cAAT,CAAwBh4B,KAAxB,EAAtB;AAEA;;AAED,WAAO,IAAP;AAEA,GApQ8E;AAsQ/E6C,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAKugB,kBAAL;AAEA,SAAKD,WAAL,CAAiBL,SAAjB,CAA4B2d,SAA5B,EAAwCt/B,MAAxC;AAEA,SAAKgG,SAAL,CAAgBs5B,SAAS,CAACvoD,CAA1B,EAA6BuoD,SAAS,CAACroD,CAAvC,EAA0CqoD,SAAS,CAACl2B,CAApD;AAEA,WAAO,IAAP;AAEA,GAhR8E;AAkR/E9I,EAAAA,SAAS,EAAE,YAAY;AAEtB,SAAKq5B,qBAAL;AAEA,UAAMj4B,MAAM,GAAG,KAAKm1B,cAAL,CAAoBn1B,MAAnC;AACA,UAAM+Q,MAAM,GAAG,KAAKokB,cAAL,CAAoBpkB,MAAnC;AAEA,UAAMzkC,CAAC,GAAGykC,MAAM,KAAK,CAAX,GAAe,CAAf,GAAmB,MAAMA,MAAnC;AAEA,UAAMhO,MAAM,GAAG,IAAI2O,OAAJ,EAAf;AACA3O,IAAAA,MAAM,CAACvG,GAAP,CACClwB,CADD,EACI,CADJ,EACO,CADP,EACU,CAAEA,CAAF,GAAM0zB,MAAM,CAAC3qB,CADvB,EAEC,CAFD,EAEI/I,CAFJ,EAEO,CAFP,EAEU,CAAEA,CAAF,GAAM0zB,MAAM,CAACzqB,CAFvB,EAGC,CAHD,EAGI,CAHJ,EAGOjJ,CAHP,EAGU,CAAEA,CAAF,GAAM0zB,MAAM,CAAC0H,CAHvB,EAIC,CAJD,EAII,CAJJ,EAIO,CAJP,EAIU,CAJV;AAOA,SAAKI,YAAL,CAAmB/E,MAAnB;AAEA,WAAO,IAAP;AAEA,GAvS8E;AAyS/Eg2B,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,UAAMU,EAAE,GAAG,IAAIlrB,OAAJ,EAAX;AAAA,UAA0BmrB,EAAE,GAAG,IAAInrB,OAAJ,EAA/B;;AAEA,SAAM,IAAI99B,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,YAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEA,YAAMkpD,EAAE,GAAG,KAAK/E,QAAL,CAAegB,IAAI,CAACxpD,CAApB,CAAX;AACA,YAAMwtD,EAAE,GAAG,KAAKhF,QAAL,CAAegB,IAAI,CAACzpD,CAApB,CAAX;AACA,YAAM0tD,EAAE,GAAG,KAAKjF,QAAL,CAAegB,IAAI,CAAC/kD,CAApB,CAAX;AAEA4oD,MAAAA,EAAE,CAACh8B,UAAH,CAAeo8B,EAAf,EAAmBD,EAAnB;AACAF,MAAAA,EAAE,CAACj8B,UAAH,CAAek8B,EAAf,EAAmBC,EAAnB;AACAH,MAAAA,EAAE,CAACj7B,KAAH,CAAUk7B,EAAV;AAEAD,MAAAA,EAAE,CAAC76B,SAAH;AAEAg3B,MAAAA,IAAI,CAACjlB,MAAL,CAAYvT,IAAZ,CAAkBq8B,EAAlB;AAEA;AAED,GA/T8E;AAiU/ET,EAAAA,oBAAoB,EAAE,UAAWiF,YAAX,EAA0B;AAE/C,QAAKA,YAAY,KAAKlvD,SAAtB,EAAkCkvD,YAAY,GAAG,IAAf;AAElC,UAAMrJ,QAAQ,GAAG,IAAI/nD,KAAJ,CAAW,KAAK+nD,QAAL,CAAcjoD,MAAzB,CAAjB;;AAEA,SAAM,IAAIH,CAAC,GAAG,CAAR,EAAW0xD,EAAE,GAAG,KAAKtJ,QAAL,CAAcjoD,MAApC,EAA4CH,CAAC,GAAG0xD,EAAhD,EAAoD1xD,CAAC,EAArD,EAA2D;AAE1DooD,MAAAA,QAAQ,CAAEpoD,CAAF,CAAR,GAAgB,IAAI+hC,OAAJ,EAAhB;AAEA;;AAED,QAAK0vB,YAAL,EAAoB;AAEnB;AACA;AAEA,YAAMxE,EAAE,GAAG,IAAIlrB,OAAJ,EAAX;AAAA,YAA0BmrB,EAAE,GAAG,IAAInrB,OAAJ,EAA/B;;AAEA,WAAM,IAAI99B,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,cAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEA,cAAMkpD,EAAE,GAAG,KAAK/E,QAAL,CAAegB,IAAI,CAACxpD,CAApB,CAAX;AACA,cAAMwtD,EAAE,GAAG,KAAKhF,QAAL,CAAegB,IAAI,CAACzpD,CAApB,CAAX;AACA,cAAM0tD,EAAE,GAAG,KAAKjF,QAAL,CAAegB,IAAI,CAAC/kD,CAApB,CAAX;AAEA4oD,QAAAA,EAAE,CAACh8B,UAAH,CAAeo8B,EAAf,EAAmBD,EAAnB;AACAF,QAAAA,EAAE,CAACj8B,UAAH,CAAek8B,EAAf,EAAmBC,EAAnB;AACAH,QAAAA,EAAE,CAACj7B,KAAH,CAAUk7B,EAAV;AAEA9E,QAAAA,QAAQ,CAAEgB,IAAI,CAACxpD,CAAP,CAAR,CAAmBuZ,GAAnB,CAAwB8zC,EAAxB;AACA7E,QAAAA,QAAQ,CAAEgB,IAAI,CAACzpD,CAAP,CAAR,CAAmBwZ,GAAnB,CAAwB8zC,EAAxB;AACA7E,QAAAA,QAAQ,CAAEgB,IAAI,CAAC/kD,CAAP,CAAR,CAAmB8U,GAAnB,CAAwB8zC,EAAxB;AAEA;AAED,KAzBD,MAyBO;AAEN,WAAKV,kBAAL;;AAEA,WAAM,IAAItoD,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,cAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEAmkD,QAAAA,QAAQ,CAAEgB,IAAI,CAACxpD,CAAP,CAAR,CAAmBuZ,GAAnB,CAAwBiwC,IAAI,CAACjlB,MAA7B;AACAikB,QAAAA,QAAQ,CAAEgB,IAAI,CAACzpD,CAAP,CAAR,CAAmBwZ,GAAnB,CAAwBiwC,IAAI,CAACjlB,MAA7B;AACAikB,QAAAA,QAAQ,CAAEgB,IAAI,CAAC/kD,CAAP,CAAR,CAAmB8U,GAAnB,CAAwBiwC,IAAI,CAACjlB,MAA7B;AAEA;AAED;;AAED,SAAM,IAAInkC,CAAC,GAAG,CAAR,EAAW0xD,EAAE,GAAG,KAAKtJ,QAAL,CAAcjoD,MAApC,EAA4CH,CAAC,GAAG0xD,EAAhD,EAAoD1xD,CAAC,EAArD,EAA2D;AAE1DooD,MAAAA,QAAQ,CAAEpoD,CAAF,CAAR,CAAcoyB,SAAd;AAEA;;AAED,SAAM,IAAInuB,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,YAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEA,YAAMy7C,aAAa,GAAG0J,IAAI,CAAC1J,aAA3B;;AAEA,UAAKA,aAAa,CAACv/C,MAAd,KAAyB,CAA9B,EAAkC;AAEjCu/C,QAAAA,aAAa,CAAE,CAAF,CAAb,CAAmB9uB,IAAnB,CAAyBw3B,QAAQ,CAAEgB,IAAI,CAACxpD,CAAP,CAAjC;AACA8/C,QAAAA,aAAa,CAAE,CAAF,CAAb,CAAmB9uB,IAAnB,CAAyBw3B,QAAQ,CAAEgB,IAAI,CAACzpD,CAAP,CAAjC;AACA+/C,QAAAA,aAAa,CAAE,CAAF,CAAb,CAAmB9uB,IAAnB,CAAyBw3B,QAAQ,CAAEgB,IAAI,CAAC/kD,CAAP,CAAjC;AAEA,OAND,MAMO;AAENq7C,QAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB0I,QAAQ,CAAEgB,IAAI,CAACxpD,CAAP,CAAR,CAAmB+wB,KAAnB,EAArB;AACA+uB,QAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB0I,QAAQ,CAAEgB,IAAI,CAACzpD,CAAP,CAAR,CAAmBgxB,KAAnB,EAArB;AACA+uB,QAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB0I,QAAQ,CAAEgB,IAAI,CAAC/kD,CAAP,CAAR,CAAmBssB,KAAnB,EAArB;AAEA;AAED;;AAED,QAAK,KAAKw4B,KAAL,CAAWhpD,MAAX,GAAoB,CAAzB,EAA6B;AAE5B,WAAK0oD,iBAAL,GAAyB,IAAzB;AAEA;AAED,GAxZ8E;AA0Z/E8I,EAAAA,wBAAwB,EAAE,YAAY;AAErC,SAAKpF,kBAAL;;AAEA,SAAM,IAAItoD,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,YAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEA,YAAMy7C,aAAa,GAAG0J,IAAI,CAAC1J,aAA3B;;AAEA,UAAKA,aAAa,CAACv/C,MAAd,KAAyB,CAA9B,EAAkC;AAEjCu/C,QAAAA,aAAa,CAAE,CAAF,CAAb,CAAmB9uB,IAAnB,CAAyBw4B,IAAI,CAACjlB,MAA9B;AACAub,QAAAA,aAAa,CAAE,CAAF,CAAb,CAAmB9uB,IAAnB,CAAyBw4B,IAAI,CAACjlB,MAA9B;AACAub,QAAAA,aAAa,CAAE,CAAF,CAAb,CAAmB9uB,IAAnB,CAAyBw4B,IAAI,CAACjlB,MAA9B;AAEA,OAND,MAMO;AAENub,QAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB0J,IAAI,CAACjlB,MAAL,CAAYxT,KAAZ,EAArB;AACA+uB,QAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB0J,IAAI,CAACjlB,MAAL,CAAYxT,KAAZ,EAArB;AACA+uB,QAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB0J,IAAI,CAACjlB,MAAL,CAAYxT,KAAZ,EAArB;AAEA;AAED;;AAED,QAAK,KAAKw4B,KAAL,CAAWhpD,MAAX,GAAoB,CAAzB,EAA6B;AAE5B,WAAK0oD,iBAAL,GAAyB,IAAzB;AAEA;AAED,GA1b8E;AA4b/E+I,EAAAA,mBAAmB,EAAE,YAAY;AAEhC;AACA;AACA;AAEA,SAAM,IAAI3tD,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,YAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;;AAEA,UAAK,CAAEmlD,IAAI,CAACyI,oBAAZ,EAAmC;AAElCzI,QAAAA,IAAI,CAACyI,oBAAL,GAA4BzI,IAAI,CAACjlB,MAAL,CAAYxT,KAAZ,EAA5B;AAEA,OAJD,MAIO;AAENy4B,QAAAA,IAAI,CAACyI,oBAAL,CAA0BjhC,IAA1B,CAAgCw4B,IAAI,CAACjlB,MAArC;AAEA;;AAED,UAAK,CAAEilB,IAAI,CAAC0I,uBAAZ,EAAsC1I,IAAI,CAAC0I,uBAAL,GAA+B,EAA/B;;AAEtC,WAAM,IAAItwD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGmW,IAAI,CAAC1J,aAAL,CAAmBv/C,MAAzC,EAAiDqB,CAAC,GAAGyxC,EAArD,EAAyDzxC,CAAC,EAA1D,EAAgE;AAE/D,YAAK,CAAE4nD,IAAI,CAAC0I,uBAAL,CAA8BtwD,CAA9B,CAAP,EAA2C;AAE1C4nD,UAAAA,IAAI,CAAC0I,uBAAL,CAA8BtwD,CAA9B,IAAoC4nD,IAAI,CAAC1J,aAAL,CAAoBl+C,CAApB,EAAwBmvB,KAAxB,EAApC;AAEA,SAJD,MAIO;AAENy4B,UAAAA,IAAI,CAAC0I,uBAAL,CAA8BtwD,CAA9B,EAAkCovB,IAAlC,CAAwCw4B,IAAI,CAAC1J,aAAL,CAAoBl+C,CAApB,CAAxC;AAEA;AAED;AAED,KApC+B,CAsChC;;;AAEA,UAAMuwD,MAAM,GAAG,IAAIV,QAAJ,EAAf;AACAU,IAAAA,MAAM,CAAC5I,KAAP,GAAe,KAAKA,KAApB;;AAEA,SAAM,IAAI3nD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKiS,YAAL,CAAkB/kD,MAAxC,EAAgDqB,CAAC,GAAGyxC,EAApD,EAAwDzxC,CAAC,EAAzD,EAA+D;AAE9D;AAEA,UAAK,CAAE,KAAK2jD,YAAL,CAAmB3jD,CAAnB,CAAP,EAAgC;AAE/B,aAAK2jD,YAAL,CAAmB3jD,CAAnB,IAAyB,EAAzB;AACA,aAAK2jD,YAAL,CAAmB3jD,CAAnB,EAAuBwwD,WAAvB,GAAqC,EAArC;AACA,aAAK7M,YAAL,CAAmB3jD,CAAnB,EAAuBk+C,aAAvB,GAAuC,EAAvC;AAEA,cAAMuS,cAAc,GAAG,KAAK9M,YAAL,CAAmB3jD,CAAnB,EAAuBwwD,WAA9C;AACA,cAAME,gBAAgB,GAAG,KAAK/M,YAAL,CAAmB3jD,CAAnB,EAAuBk+C,aAAhD;;AAEA,aAAM,IAAIz7C,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,gBAAMkuD,UAAU,GAAG,IAAIpwB,OAAJ,EAAnB;AACA,gBAAM2d,aAAa,GAAG;AAAE9/C,YAAAA,CAAC,EAAE,IAAImiC,OAAJ,EAAL;AAAoBpiC,YAAAA,CAAC,EAAE,IAAIoiC,OAAJ,EAAvB;AAAsC19B,YAAAA,CAAC,EAAE,IAAI09B,OAAJ;AAAzC,WAAtB;AAEAkwB,UAAAA,cAAc,CAACtnD,IAAf,CAAqBwnD,UAArB;AACAD,UAAAA,gBAAgB,CAACvnD,IAAjB,CAAuB+0C,aAAvB;AAEA;AAED;;AAED,YAAMyF,YAAY,GAAG,KAAKA,YAAL,CAAmB3jD,CAAnB,CAArB,CAzB8D,CA2B9D;;AAEAuwD,MAAAA,MAAM,CAAC3J,QAAP,GAAkB,KAAKlD,YAAL,CAAmB1jD,CAAnB,EAAuB4mD,QAAzC,CA7B8D,CA+B9D;;AAEA2J,MAAAA,MAAM,CAACxF,kBAAP;AACAwF,MAAAA,MAAM,CAACvF,oBAAP,GAlC8D,CAoC9D;;AAEA,WAAM,IAAIvoD,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,cAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEA,cAAMkuD,UAAU,GAAGhN,YAAY,CAAC6M,WAAb,CAA0B/tD,CAA1B,CAAnB;AACA,cAAMy7C,aAAa,GAAGyF,YAAY,CAACzF,aAAb,CAA4Bz7C,CAA5B,CAAtB;AAEAkuD,QAAAA,UAAU,CAACvhC,IAAX,CAAiBw4B,IAAI,CAACjlB,MAAtB;AAEAub,QAAAA,aAAa,CAAC9/C,CAAd,CAAgBgxB,IAAhB,CAAsBw4B,IAAI,CAAC1J,aAAL,CAAoB,CAApB,CAAtB;AACAA,QAAAA,aAAa,CAAC//C,CAAd,CAAgBixB,IAAhB,CAAsBw4B,IAAI,CAAC1J,aAAL,CAAoB,CAApB,CAAtB;AACAA,QAAAA,aAAa,CAACr7C,CAAd,CAAgBusB,IAAhB,CAAsBw4B,IAAI,CAAC1J,aAAL,CAAoB,CAApB,CAAtB;AAEA;AAED,KAhG+B,CAkGhC;;;AAEA,SAAM,IAAIz7C,CAAC,GAAG,CAAR,EAAWqsD,EAAE,GAAG,KAAKnH,KAAL,CAAWhpD,MAAjC,EAAyC8D,CAAC,GAAGqsD,EAA7C,EAAiDrsD,CAAC,EAAlD,EAAwD;AAEvD,YAAMmlD,IAAI,GAAG,KAAKD,KAAL,CAAYllD,CAAZ,CAAb;AAEAmlD,MAAAA,IAAI,CAACjlB,MAAL,GAAcilB,IAAI,CAACyI,oBAAnB;AACAzI,MAAAA,IAAI,CAAC1J,aAAL,GAAqB0J,IAAI,CAAC0I,uBAA1B;AAEA;AAED,GAziB8E;AA2iB/E/d,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,QAAK,KAAKD,WAAL,KAAqB,IAA1B,EAAiC;AAEhC,WAAKA,WAAL,GAAmB,IAAIrC,IAAJ,EAAnB;AAEA;;AAED,SAAKqC,WAAL,CAAiBhB,aAAjB,CAAgC,KAAKsV,QAArC;AAEA,GArjB8E;AAujB/EqD,EAAAA,qBAAqB,EAAE,YAAY;AAElC,QAAK,KAAK9C,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,WAAKA,cAAL,GAAsB,IAAIjT,MAAJ,EAAtB;AAEA;;AAED,SAAKiT,cAAL,CAAoB7V,aAApB,CAAmC,KAAKsV,QAAxC;AAEA,GAjkB8E;AAmkB/EmF,EAAAA,KAAK,EAAE,UAAWpd,QAAX,EAAqB5Z,MAArB,EAA6B67B,mBAA7B,EAAmD;AAEzD,QAAK,EAAIjiB,QAAQ,IAAIA,QAAQ,CAACyb,UAAzB,CAAL,EAA6C;AAE5C37B,MAAAA,OAAO,CAACyD,KAAR,CAAe,qEAAf,EAAsFyc,QAAtF;AACA;AAEA;;AAED,QAAI7D,YAAJ;AAAA,QACC+lB,YAAY,GAAG,KAAKjK,QAAL,CAAcjoD,MAD9B;AAAA,QAECmyD,SAAS,GAAG,KAAKlK,QAFlB;AAAA,QAGCmK,SAAS,GAAGpiB,QAAQ,CAACiY,QAHtB;AAAA,QAICoK,MAAM,GAAG,KAAKrJ,KAJf;AAAA,QAKCsJ,MAAM,GAAGtiB,QAAQ,CAACgZ,KALnB;AAAA,QAMCuJ,OAAO,GAAG,KAAKlM,MANhB;AAAA,QAOCmM,OAAO,GAAGxiB,QAAQ,CAACqW,MAPpB;AASA,QAAK4L,mBAAmB,KAAK7vD,SAA7B,EAAyC6vD,mBAAmB,GAAG,CAAtB;;AAEzC,QAAK77B,MAAM,KAAKh0B,SAAhB,EAA4B;AAE3B+pC,MAAAA,YAAY,GAAG,IAAI7Y,OAAJ,GAAcuD,eAAd,CAA+BT,MAA/B,CAAf;AAEA,KAxBwD,CA0BzD;;;AAEA,SAAM,IAAI/0B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGsf,SAAS,CAACpyD,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD,YAAM8vD,MAAM,GAAGiB,SAAS,CAAE/wD,CAAF,CAAxB;AAEA,YAAMoxD,UAAU,GAAGtB,MAAM,CAAC3gC,KAAP,EAAnB;AAEA,UAAK4F,MAAM,KAAKh0B,SAAhB,EAA4BqwD,UAAU,CAACt3B,YAAX,CAAyB/E,MAAzB;AAE5B+7B,MAAAA,SAAS,CAAC3nD,IAAV,CAAgBioD,UAAhB;AAEA,KAtCwD,CAwCzD;;;AAEA,SAAM,IAAIpxD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG0f,OAAO,CAACxyD,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpDkxD,MAAAA,OAAO,CAAC/nD,IAAR,CAAcgoD,OAAO,CAAEnxD,CAAF,CAAP,CAAamvB,KAAb,EAAd;AAEA,KA9CwD,CAgDzD;;;AAEA,SAAM,IAAInvB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGwf,MAAM,CAACtyD,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,UAAI4nD,IAAI,GAAGqJ,MAAM,CAAEjxD,CAAF,CAAjB;AAAA,UAAwBqxD,QAAxB;AAAA,UAAkC1uB,MAAlC;AAAA,UAA0CllC,KAA1C;AAAA,UACC6zD,iBAAiB,GAAG1J,IAAI,CAAC1J,aAD1B;AAAA,UAECqT,gBAAgB,GAAG3J,IAAI,CAACzJ,YAFzB;AAIAkT,MAAAA,QAAQ,GAAG,IAAIrT,KAAJ,CAAW4J,IAAI,CAACxpD,CAAL,GAASyyD,YAApB,EAAkCjJ,IAAI,CAACzpD,CAAL,GAAS0yD,YAA3C,EAAyDjJ,IAAI,CAAC/kD,CAAL,GAASguD,YAAlE,CAAX;AACAQ,MAAAA,QAAQ,CAAC1uB,MAAT,CAAgBvT,IAAhB,CAAsBw4B,IAAI,CAACjlB,MAA3B;;AAEA,UAAKmI,YAAY,KAAK/pC,SAAtB,EAAkC;AAEjCswD,QAAAA,QAAQ,CAAC1uB,MAAT,CAAgB5S,YAAhB,CAA8B+a,YAA9B,EAA6Cla,SAA7C;AAEA;;AAED,WAAM,IAAIijB,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGwG,iBAAiB,CAAC3yD,MAAxC,EAAgDk1C,CAAC,GAAGiX,EAApD,EAAwDjX,CAAC,EAAzD,EAA+D;AAE9DlR,QAAAA,MAAM,GAAG2uB,iBAAiB,CAAEzd,CAAF,CAAjB,CAAuB1kB,KAAvB,EAAT;;AAEA,YAAK2b,YAAY,KAAK/pC,SAAtB,EAAkC;AAEjC4hC,UAAAA,MAAM,CAAC5S,YAAP,CAAqB+a,YAArB,EAAoCla,SAApC;AAEA;;AAEDygC,QAAAA,QAAQ,CAACnT,aAAT,CAAuB/0C,IAAvB,CAA6Bw5B,MAA7B;AAEA;;AAED0uB,MAAAA,QAAQ,CAAC5zD,KAAT,CAAe2xB,IAAf,CAAqBw4B,IAAI,CAACnqD,KAA1B;;AAEA,WAAM,IAAIo2C,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGyG,gBAAgB,CAAC5yD,MAAvC,EAA+Ck1C,CAAC,GAAGiX,EAAnD,EAAuDjX,CAAC,EAAxD,EAA8D;AAE7Dp2C,QAAAA,KAAK,GAAG8zD,gBAAgB,CAAE1d,CAAF,CAAxB;AACAwd,QAAAA,QAAQ,CAAClT,YAAT,CAAsBh1C,IAAtB,CAA4B1L,KAAK,CAAC0xB,KAAN,EAA5B;AAEA;;AAEDkiC,MAAAA,QAAQ,CAACpT,aAAT,GAAyB2J,IAAI,CAAC3J,aAAL,GAAqB2S,mBAA9C;AAEAI,MAAAA,MAAM,CAAC7nD,IAAP,CAAakoD,QAAb;AAEA,KA5FwD,CA8FzD;;;AAEA,SAAM,IAAIrxD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG9C,QAAQ,CAACmZ,aAAT,CAAuBnpD,MAA7C,EAAqDqB,CAAC,GAAGyxC,EAAzD,EAA6DzxC,CAAC,EAA9D,EAAoE;AAEnE,YAAMwxD,cAAc,GAAG7iB,QAAQ,CAACmZ,aAAT,CAAwB9nD,CAAxB,CAAvB;AAEA,UAAK,KAAK8nD,aAAL,CAAoB9nD,CAApB,MAA4Be,SAAjC,EAA6C,KAAK+mD,aAAL,CAAoB9nD,CAApB,IAA0B,EAA1B;;AAE7C,WAAM,IAAI6zC,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAG0G,cAAc,CAAC7yD,MAArC,EAA6Ck1C,CAAC,GAAGiX,EAAjD,EAAqDjX,CAAC,EAAtD,EAA4D;AAE3D,cAAMkT,IAAI,GAAGyK,cAAc,CAAE3d,CAAF,CAA3B;AAAA,cAAkC4d,OAAO,GAAG,EAA5C;;AAEA,aAAM,IAAInsD,CAAC,GAAG,CAAR,EAAWosD,EAAE,GAAG3K,IAAI,CAACpoD,MAA3B,EAAmC2G,CAAC,GAAGosD,EAAvC,EAA2CpsD,CAAC,EAA5C,EAAkD;AAEjDmsD,UAAAA,OAAO,CAACtoD,IAAR,CAAc49C,IAAI,CAAEzhD,CAAF,CAAJ,CAAU6pB,KAAV,EAAd;AAEA;;AAED,aAAK24B,aAAL,CAAoB9nD,CAApB,EAAwBmJ,IAAxB,CAA8BsoD,OAA9B;AAEA;AAED;AAED,GAzrB8E;AA2rB/EE,EAAAA,SAAS,EAAE,UAAWC,IAAX,EAAkB;AAE5B,QAAK,EAAIA,IAAI,IAAIA,IAAI,CAACpjB,MAAjB,CAAL,EAAiC;AAEhC/f,MAAAA,OAAO,CAACyD,KAAR,CAAe,iEAAf,EAAkF0/B,IAAlF;AACA;AAEA;;AAED,QAAKA,IAAI,CAACx5B,gBAAV,EAA6Bw5B,IAAI,CAAC/4B,YAAL;AAE7B,SAAKkzB,KAAL,CAAY6F,IAAI,CAACjjB,QAAjB,EAA2BijB,IAAI,CAAC78B,MAAhC;AAEA,GAxsB8E;;AA0sB/E;;;;;AAMA88B,EAAAA,aAAa,EAAE,YAAY;AAE1B,UAAMC,WAAW,GAAG,EAApB,CAF0B,CAEF;;AACxB,UAAMC,MAAM,GAAG,EAAf;AAAA,UAAmBC,OAAO,GAAG,EAA7B;AAEA,UAAMC,eAAe,GAAG,CAAxB,CAL0B,CAKC;;AAC3B,UAAMjS,SAAS,GAAGhiD,IAAI,CAACsO,GAAL,CAAU,EAAV,EAAc2lD,eAAd,CAAlB;;AAEA,SAAM,IAAIjyD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKmV,QAAL,CAAcjoD,MAApC,EAA4CqB,CAAC,GAAGyxC,EAAhD,EAAoDzxC,CAAC,EAArD,EAA2D;AAE1D,YAAMxB,CAAC,GAAG,KAAKooD,QAAL,CAAe5mD,CAAf,CAAV;AACA,YAAML,GAAG,GAAG3B,IAAI,CAACC,KAAL,CAAYO,CAAC,CAAC6I,CAAF,GAAM24C,SAAlB,IAAgC,GAAhC,GAAsChiD,IAAI,CAACC,KAAL,CAAYO,CAAC,CAAC+I,CAAF,GAAMy4C,SAAlB,CAAtC,GAAsE,GAAtE,GAA4EhiD,IAAI,CAACC,KAAL,CAAYO,CAAC,CAACk7B,CAAF,GAAMsmB,SAAlB,CAAxF;;AAEA,UAAK8R,WAAW,CAAEnyD,GAAF,CAAX,KAAuBoB,SAA5B,EAAwC;AAEvC+wD,QAAAA,WAAW,CAAEnyD,GAAF,CAAX,GAAqBK,CAArB;AACA+xD,QAAAA,MAAM,CAAC5oD,IAAP,CAAa,KAAKy9C,QAAL,CAAe5mD,CAAf,CAAb;AACAgyD,QAAAA,OAAO,CAAEhyD,CAAF,CAAP,GAAe+xD,MAAM,CAACpzD,MAAP,GAAgB,CAA/B;AAEA,OAND,MAMO;AAEN;AACAqzD,QAAAA,OAAO,CAAEhyD,CAAF,CAAP,GAAegyD,OAAO,CAAEF,WAAW,CAAEnyD,GAAF,CAAb,CAAtB;AAEA;AAED,KA1ByB,CA6B1B;AACA;;;AACA,UAAMuyD,mBAAmB,GAAG,EAA5B;;AAEA,SAAM,IAAIlyD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkW,KAAL,CAAWhpD,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,YAAM4nD,IAAI,GAAG,KAAKD,KAAL,CAAY3nD,CAAZ,CAAb;AAEA4nD,MAAAA,IAAI,CAACxpD,CAAL,GAAS4zD,OAAO,CAAEpK,IAAI,CAACxpD,CAAP,CAAhB;AACAwpD,MAAAA,IAAI,CAACzpD,CAAL,GAAS6zD,OAAO,CAAEpK,IAAI,CAACzpD,CAAP,CAAhB;AACAypD,MAAAA,IAAI,CAAC/kD,CAAL,GAASmvD,OAAO,CAAEpK,IAAI,CAAC/kD,CAAP,CAAhB;AAEA,YAAM0pD,OAAO,GAAG,CAAE3E,IAAI,CAACxpD,CAAP,EAAUwpD,IAAI,CAACzpD,CAAf,EAAkBypD,IAAI,CAAC/kD,CAAvB,CAAhB,CARuD,CAUvD;AACA;;AACA,WAAM,IAAIspB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,YAAKogC,OAAO,CAAEpgC,CAAF,CAAP,KAAiBogC,OAAO,CAAE,CAAEpgC,CAAC,GAAG,CAAN,IAAY,CAAd,CAA7B,EAAiD;AAEhD+lC,UAAAA,mBAAmB,CAAC/oD,IAApB,CAA0BnJ,CAA1B;AACA;AAEA;AAED;AAED;;AAED,SAAM,IAAIA,CAAC,GAAGkyD,mBAAmB,CAACvzD,MAApB,GAA6B,CAA3C,EAA8CqB,CAAC,IAAI,CAAnD,EAAsDA,CAAC,EAAvD,EAA6D;AAE5D,YAAMmyD,GAAG,GAAGD,mBAAmB,CAAElyD,CAAF,CAA/B;AAEA,WAAK2nD,KAAL,CAAWn+C,MAAX,CAAmB2oD,GAAnB,EAAwB,CAAxB;;AAEA,WAAM,IAAIte,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAG,KAAKhD,aAAL,CAAmBnpD,MAAzC,EAAiDk1C,CAAC,GAAGiX,EAArD,EAAyDjX,CAAC,EAA1D,EAAgE;AAE/D,aAAKiU,aAAL,CAAoBjU,CAApB,EAAwBrqC,MAAxB,CAAgC2oD,GAAhC,EAAqC,CAArC;AAEA;AAED,KAtEyB,CAwE1B;;;AAEA,UAAM3kD,IAAI,GAAG,KAAKo5C,QAAL,CAAcjoD,MAAd,GAAuBozD,MAAM,CAACpzD,MAA3C;AACA,SAAKioD,QAAL,GAAgBmL,MAAhB;AACA,WAAOvkD,IAAP;AAEA,GA9xB8E;AAgyB/E8jC,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAoB;AAElC,SAAKqV,QAAL,GAAgB,EAAhB;;AAEA,SAAM,IAAI5mD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmxC,MAAM,CAAC5yC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAMmyC,KAAK,GAAGZ,MAAM,CAAEvxC,CAAF,CAApB;AACA,WAAK4mD,QAAL,CAAcz9C,IAAd,CAAoB,IAAIo3B,OAAJ,CAAa4R,KAAK,CAAC9qC,CAAnB,EAAsB8qC,KAAK,CAAC5qC,CAA5B,EAA+B4qC,KAAK,CAACzY,CAAN,IAAW,CAA1C,CAApB;AAEA;;AAED,WAAO,IAAP;AAEA,GA7yB8E;AA+yB/E04B,EAAAA,wBAAwB,EAAE,YAAY;AAErC,UAAMzK,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMhpD,MAAM,GAAGgpD,KAAK,CAAChpD,MAArB,CAHqC,CAKrC;;AAEA,SAAM,IAAIqB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGrB,MAArB,EAA6BqB,CAAC,EAA9B,EAAoC;AAEnC2nD,MAAAA,KAAK,CAAE3nD,CAAF,CAAL,CAAWqyD,GAAX,GAAiBryD,CAAjB;AAEA,KAXoC,CAarC;;;AAEA,aAASsyD,iBAAT,CAA4Bl0D,CAA5B,EAA+BD,CAA/B,EAAmC;AAElC,aAAOC,CAAC,CAAC6/C,aAAF,GAAkB9/C,CAAC,CAAC8/C,aAA3B;AAEA;;AAED0J,IAAAA,KAAK,CAAC4K,IAAN,CAAYD,iBAAZ,EArBqC,CAuBrC;;AAEA,UAAME,IAAI,GAAG,KAAK1K,aAAL,CAAoB,CAApB,CAAb;AACA,UAAMf,IAAI,GAAG,KAAKe,aAAL,CAAoB,CAApB,CAAb;AAEA,QAAI2K,OAAJ,EAAaC,OAAb;AAEA,QAAKF,IAAI,IAAIA,IAAI,CAAC7zD,MAAL,KAAgBA,MAA7B,EAAsC8zD,OAAO,GAAG,EAAV;AACtC,QAAK1L,IAAI,IAAIA,IAAI,CAACpoD,MAAL,KAAgBA,MAA7B,EAAsC+zD,OAAO,GAAG,EAAV;;AAEtC,SAAM,IAAI1yD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGrB,MAArB,EAA6BqB,CAAC,EAA9B,EAAoC;AAEnC,YAAMgtC,EAAE,GAAG2a,KAAK,CAAE3nD,CAAF,CAAL,CAAWqyD,GAAtB;AAEA,UAAKI,OAAL,EAAeA,OAAO,CAACtpD,IAAR,CAAcqpD,IAAI,CAAExlB,EAAF,CAAlB;AACf,UAAK0lB,OAAL,EAAeA,OAAO,CAACvpD,IAAR,CAAc49C,IAAI,CAAE/Z,EAAF,CAAlB;AAEf;;AAED,QAAKylB,OAAL,EAAe,KAAK3K,aAAL,CAAoB,CAApB,IAA0B2K,OAA1B;AACf,QAAKC,OAAL,EAAe,KAAK5K,aAAL,CAAoB,CAApB,IAA0B4K,OAA1B;AAEf,GA51B8E;AA81B/E55B,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAG;AACZjW,MAAAA,QAAQ,EAAE;AACTT,QAAAA,OAAO,EAAE,GADA;AAETtuB,QAAAA,IAAI,EAAE,UAFG;AAGTgvB,QAAAA,SAAS,EAAE;AAHF;AADE,KAAb,CAFmB,CAUnB;;AAEAgW,IAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AACA,QAAK,KAAKmL,IAAL,KAAc,EAAnB,EAAwB65B,IAAI,CAAC75B,IAAL,GAAY,KAAKA,IAAjB;;AAExB,QAAK,KAAKs5B,UAAL,KAAoB7tC,SAAzB,EAAqC;AAEpC,YAAM6tC,UAAU,GAAG,KAAKA,UAAxB;;AAEA,WAAM,MAAMjvC,GAAZ,IAAmBivC,UAAnB,EAAgC;AAE/B,YAAKA,UAAU,CAAEjvC,GAAF,CAAV,KAAsBoB,SAA3B,EAAuCouC,IAAI,CAAExvC,GAAF,CAAJ,GAAcivC,UAAU,CAAEjvC,GAAF,CAAxB;AAEvC;;AAED,aAAOwvC,IAAP;AAEA;;AAED,UAAMyX,QAAQ,GAAG,EAAjB;;AAEA,SAAM,IAAI5mD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAK4mD,QAAL,CAAcjoD,MAAnC,EAA2CqB,CAAC,EAA5C,EAAkD;AAEjD,YAAM8vD,MAAM,GAAG,KAAKlJ,QAAL,CAAe5mD,CAAf,CAAf;AACA4mD,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA;;AAED,UAAMiuB,KAAK,GAAG,EAAd;AACA,UAAMd,OAAO,GAAG,EAAhB;AACA,UAAM8L,WAAW,GAAG,EAApB;AACA,UAAM3N,MAAM,GAAG,EAAf;AACA,UAAM4N,UAAU,GAAG,EAAnB;AACA,UAAM9L,GAAG,GAAG,EAAZ;AACA,UAAM+L,OAAO,GAAG,EAAhB;;AAEA,SAAM,IAAI7yD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAK2nD,KAAL,CAAWhpD,MAAhC,EAAwCqB,CAAC,EAAzC,EAA+C;AAE9C,YAAM4nD,IAAI,GAAG,KAAKD,KAAL,CAAY3nD,CAAZ,CAAb;AAEA,YAAM8yD,WAAW,GAAG,IAApB;AACA,YAAMC,SAAS,GAAG,KAAlB,CAL8C,CAKrB;;AACzB,YAAMhL,eAAe,GAAG,KAAKD,aAAL,CAAoB,CAApB,EAAyB9nD,CAAzB,MAAiCe,SAAzD;AACA,YAAMiyD,aAAa,GAAGpL,IAAI,CAACjlB,MAAL,CAAYhkC,MAAZ,KAAuB,CAA7C;AACA,YAAMs0D,mBAAmB,GAAGrL,IAAI,CAAC1J,aAAL,CAAmBv/C,MAAnB,GAA4B,CAAxD;AACA,YAAMu0D,YAAY,GAAGtL,IAAI,CAACnqD,KAAL,CAAWM,CAAX,KAAiB,CAAjB,IAAsB6pD,IAAI,CAACnqD,KAAL,CAAWS,CAAX,KAAiB,CAAvC,IAA4C0pD,IAAI,CAACnqD,KAAL,CAAWU,CAAX,KAAiB,CAAlF;AACA,YAAMg1D,kBAAkB,GAAGvL,IAAI,CAACzJ,YAAL,CAAkBx/C,MAAlB,GAA2B,CAAtD;AAEA,UAAIy0D,QAAQ,GAAG,CAAf;AAEAA,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAe,CAAf,CAAjB,CAd8C,CAcT;;AACrCA,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeN,WAAf,CAAjB;AACAM,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeL,SAAf,CAAjB;AACAK,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAerL,eAAf,CAAjB;AACAqL,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeJ,aAAf,CAAjB;AACAI,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeH,mBAAf,CAAjB;AACAG,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeF,YAAf,CAAjB;AACAE,MAAAA,QAAQ,GAAGC,MAAM,CAAED,QAAF,EAAY,CAAZ,EAAeD,kBAAf,CAAjB;AAEAxL,MAAAA,KAAK,CAACx+C,IAAN,CAAYiqD,QAAZ;AACAzL,MAAAA,KAAK,CAACx+C,IAAN,CAAYy+C,IAAI,CAACxpD,CAAjB,EAAoBwpD,IAAI,CAACzpD,CAAzB,EAA4BypD,IAAI,CAAC/kD,CAAjC;AACA8kD,MAAAA,KAAK,CAACx+C,IAAN,CAAYy+C,IAAI,CAAC3J,aAAjB;;AAEA,UAAK8J,eAAL,EAAuB;AAEtB,cAAMD,aAAa,GAAG,KAAKA,aAAL,CAAoB,CAApB,EAAyB9nD,CAAzB,CAAtB;AAEA2nD,QAAAA,KAAK,CAACx+C,IAAN,CACCmqD,UAAU,CAAExL,aAAa,CAAE,CAAF,CAAf,CADX,EAECwL,UAAU,CAAExL,aAAa,CAAE,CAAF,CAAf,CAFX,EAGCwL,UAAU,CAAExL,aAAa,CAAE,CAAF,CAAf,CAHX;AAMA;;AAED,UAAKkL,aAAL,EAAqB;AAEpBrL,QAAAA,KAAK,CAACx+C,IAAN,CAAYoqD,cAAc,CAAE3L,IAAI,CAACjlB,MAAP,CAA1B;AAEA;;AAED,UAAKswB,mBAAL,EAA2B;AAE1B,cAAM/U,aAAa,GAAG0J,IAAI,CAAC1J,aAA3B;AAEAyJ,QAAAA,KAAK,CAACx+C,IAAN,CACCoqD,cAAc,CAAErV,aAAa,CAAE,CAAF,CAAf,CADf,EAECqV,cAAc,CAAErV,aAAa,CAAE,CAAF,CAAf,CAFf,EAGCqV,cAAc,CAAErV,aAAa,CAAE,CAAF,CAAf,CAHf;AAMA;;AAED,UAAKgV,YAAL,EAAoB;AAEnBvL,QAAAA,KAAK,CAACx+C,IAAN,CAAYqqD,aAAa,CAAE5L,IAAI,CAACnqD,KAAP,CAAzB;AAEA;;AAED,UAAK01D,kBAAL,EAA0B;AAEzB,cAAMhV,YAAY,GAAGyJ,IAAI,CAACzJ,YAA1B;AAEAwJ,QAAAA,KAAK,CAACx+C,IAAN,CACCqqD,aAAa,CAAErV,YAAY,CAAE,CAAF,CAAd,CADd,EAECqV,aAAa,CAAErV,YAAY,CAAE,CAAF,CAAd,CAFd,EAGCqV,aAAa,CAAErV,YAAY,CAAE,CAAF,CAAd,CAHd;AAMA;AAED;;AAED,aAASkV,MAAT,CAAiBjwD,KAAjB,EAAwBoD,QAAxB,EAAkCitD,OAAlC,EAA4C;AAE3C,aAAOA,OAAO,GAAGrwD,KAAK,GAAK,KAAKoD,QAAlB,GAA+BpD,KAAK,GAAK,EAAI,KAAKoD,QAAT,CAAvD;AAEA;;AAED,aAAS+sD,cAAT,CAAyB5wB,MAAzB,EAAkC;AAEjC,YAAM+wB,IAAI,GAAG/wB,MAAM,CAACt7B,CAAP,CAASvJ,QAAT,KAAsB6kC,MAAM,CAACp7B,CAAP,CAASzJ,QAAT,EAAtB,GAA4C6kC,MAAM,CAACjJ,CAAP,CAAS57B,QAAT,EAAzD;;AAEA,UAAK60D,WAAW,CAAEe,IAAF,CAAX,KAAwB3yD,SAA7B,EAAyC;AAExC,eAAO4xD,WAAW,CAAEe,IAAF,CAAlB;AAEA;;AAEDf,MAAAA,WAAW,CAAEe,IAAF,CAAX,GAAsB7M,OAAO,CAACloD,MAAR,GAAiB,CAAvC;AACAkoD,MAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC;AAEA,aAAOi5B,WAAW,CAAEe,IAAF,CAAlB;AAEA;;AAED,aAASF,aAAT,CAAwB/1D,KAAxB,EAAgC;AAE/B,YAAMi2D,IAAI,GAAGj2D,KAAK,CAACM,CAAN,CAAQD,QAAR,KAAqBL,KAAK,CAACS,CAAN,CAAQJ,QAAR,EAArB,GAA0CL,KAAK,CAACU,CAAN,CAAQL,QAAR,EAAvD;;AAEA,UAAK80D,UAAU,CAAEc,IAAF,CAAV,KAAuB3yD,SAA5B,EAAwC;AAEvC,eAAO6xD,UAAU,CAAEc,IAAF,CAAjB;AAEA;;AAEDd,MAAAA,UAAU,CAAEc,IAAF,CAAV,GAAqB1O,MAAM,CAACrmD,MAA5B;AACAqmD,MAAAA,MAAM,CAAC77C,IAAP,CAAa1L,KAAK,CAACy/C,MAAN,EAAb;AAEA,aAAO0V,UAAU,CAAEc,IAAF,CAAjB;AAEA;;AAED,aAASJ,UAAT,CAAqB95B,EAArB,EAA0B;AAEzB,YAAMk6B,IAAI,GAAGl6B,EAAE,CAACnyB,CAAH,CAAKvJ,QAAL,KAAkB07B,EAAE,CAACjyB,CAAH,CAAKzJ,QAAL,EAA/B;;AAEA,UAAK+0D,OAAO,CAAEa,IAAF,CAAP,KAAoB3yD,SAAzB,EAAqC;AAEpC,eAAO8xD,OAAO,CAAEa,IAAF,CAAd;AAEA;;AAEDb,MAAAA,OAAO,CAAEa,IAAF,CAAP,GAAkB5M,GAAG,CAACnoD,MAAJ,GAAa,CAA/B;AACAmoD,MAAAA,GAAG,CAAC39C,IAAJ,CAAUqwB,EAAE,CAACnyB,CAAb,EAAgBmyB,EAAE,CAACjyB,CAAnB;AAEA,aAAOsrD,OAAO,CAAEa,IAAF,CAAd;AAEA;;AAEDvkB,IAAAA,IAAI,CAACA,IAAL,GAAY,EAAZ;AAEAA,IAAAA,IAAI,CAACA,IAAL,CAAUyX,QAAV,GAAqBA,QAArB;AACAzX,IAAAA,IAAI,CAACA,IAAL,CAAU0X,OAAV,GAAoBA,OAApB;AACA,QAAK7B,MAAM,CAACrmD,MAAP,GAAgB,CAArB,EAAyBwwC,IAAI,CAACA,IAAL,CAAU6V,MAAV,GAAmBA,MAAnB;AACzB,QAAK8B,GAAG,CAACnoD,MAAJ,GAAa,CAAlB,EAAsBwwC,IAAI,CAACA,IAAL,CAAU2X,GAAV,GAAgB,CAAEA,GAAF,CAAhB,CA1LH,CA0L4B;;AAC/C3X,IAAAA,IAAI,CAACA,IAAL,CAAUwY,KAAV,GAAkBA,KAAlB;AAEA,WAAOxY,IAAP;AAEA,GA7hC8E;AA+hC/EhgB,EAAAA,KAAK,EAAE,YAAY;AAElB;;;;;;;;;;;;;;AAwBA,WAAO,IAAI0gC,QAAJ,GAAezgC,IAAf,CAAqB,IAArB,CAAP;AAEA,GA3jC8E;AA6jC/EA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB;AAEA,SAAK4oC,QAAL,GAAgB,EAAhB;AACA,SAAK5B,MAAL,GAAc,EAAd;AACA,SAAK2C,KAAL,GAAa,EAAb;AACA,SAAKG,aAAL,GAAqB,CAAC,EAAD,CAArB;AACA,SAAKpE,YAAL,GAAoB,EAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKsD,WAAL,GAAmB,EAAnB;AACA,SAAKC,WAAL,GAAmB,EAAnB;AACA,SAAKiD,aAAL,GAAqB,EAArB;AACA,SAAK7X,WAAL,GAAmB,IAAnB;AACA,SAAK6U,cAAL,GAAsB,IAAtB,CAdyB,CAgBzB;;AAEA,SAAK7xC,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB,CAlByB,CAoBzB;;AAEA,UAAMsxC,QAAQ,GAAG5oC,MAAM,CAAC4oC,QAAxB;;AAEA,SAAM,IAAI5mD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGmV,QAAQ,CAACjoD,MAA/B,EAAuCqB,CAAC,GAAGyxC,EAA3C,EAA+CzxC,CAAC,EAAhD,EAAsD;AAErD,WAAK4mD,QAAL,CAAcz9C,IAAd,CAAoBy9C,QAAQ,CAAE5mD,CAAF,CAAR,CAAcmvB,KAAd,EAApB;AAEA,KA5BwB,CA8BzB;;;AAEA,UAAM61B,MAAM,GAAGhnC,MAAM,CAACgnC,MAAtB;;AAEA,SAAM,IAAIhlD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGuT,MAAM,CAACrmD,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,WAAKglD,MAAL,CAAY77C,IAAZ,CAAkB67C,MAAM,CAAEhlD,CAAF,CAAN,CAAYmvB,KAAZ,EAAlB;AAEA,KAtCwB,CAwCzB;;;AAEA,UAAMw4B,KAAK,GAAG3pC,MAAM,CAAC2pC,KAArB;;AAEA,SAAM,IAAI3nD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGkW,KAAK,CAAChpD,MAA5B,EAAoCqB,CAAC,GAAGyxC,EAAxC,EAA4CzxC,CAAC,EAA7C,EAAmD;AAElD,WAAK2nD,KAAL,CAAWx+C,IAAX,CAAiBw+C,KAAK,CAAE3nD,CAAF,CAAL,CAAWmvB,KAAX,EAAjB;AAEA,KAhDwB,CAkDzB;;;AAEA,SAAM,IAAInvB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGzzB,MAAM,CAAC8pC,aAAP,CAAqBnpD,MAA3C,EAAmDqB,CAAC,GAAGyxC,EAAvD,EAA2DzxC,CAAC,EAA5D,EAAkE;AAEjE,YAAM8nD,aAAa,GAAG9pC,MAAM,CAAC8pC,aAAP,CAAsB9nD,CAAtB,CAAtB;;AAEA,UAAK,KAAK8nD,aAAL,CAAoB9nD,CAApB,MAA4Be,SAAjC,EAA6C;AAE5C,aAAK+mD,aAAL,CAAoB9nD,CAApB,IAA0B,EAA1B;AAEA;;AAED,WAAM,IAAI6zC,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGhD,aAAa,CAACnpD,MAApC,EAA4Ck1C,CAAC,GAAGiX,EAAhD,EAAoDjX,CAAC,EAArD,EAA2D;AAE1D,cAAMiT,GAAG,GAAGgB,aAAa,CAAEjU,CAAF,CAAzB;AAAA,cAAgC4d,OAAO,GAAG,EAA1C;;AAEA,aAAM,IAAInsD,CAAC,GAAG,CAAR,EAAWosD,EAAE,GAAG5K,GAAG,CAACnoD,MAA1B,EAAkC2G,CAAC,GAAGosD,EAAtC,EAA0CpsD,CAAC,EAA3C,EAAiD;AAEhD,gBAAMk0B,EAAE,GAAGstB,GAAG,CAAExhD,CAAF,CAAd;AAEAmsD,UAAAA,OAAO,CAACtoD,IAAR,CAAcqwB,EAAE,CAACrK,KAAH,EAAd;AAEA;;AAED,aAAK24B,aAAL,CAAoB9nD,CAApB,EAAwBmJ,IAAxB,CAA8BsoD,OAA9B;AAEA;AAED,KA9EwB,CAgFzB;;;AAEA,UAAM/N,YAAY,GAAG1lC,MAAM,CAAC0lC,YAA5B;;AAEA,SAAM,IAAI1jD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGiS,YAAY,CAAC/kD,MAAnC,EAA2CqB,CAAC,GAAGyxC,EAA/C,EAAmDzxC,CAAC,EAApD,EAA0D;AAEzD,YAAMwoD,WAAW,GAAG,EAApB;AACAA,MAAAA,WAAW,CAAClzC,IAAZ,GAAmBouC,YAAY,CAAE1jD,CAAF,CAAZ,CAAkBsV,IAArC,CAHyD,CAKzD;;AAEA,UAAKouC,YAAY,CAAE1jD,CAAF,CAAZ,CAAkB4mD,QAAlB,KAA+B7lD,SAApC,EAAgD;AAE/CynD,QAAAA,WAAW,CAAC5B,QAAZ,GAAuB,EAAvB;;AAEA,aAAM,IAAI/S,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGpH,YAAY,CAAE1jD,CAAF,CAAZ,CAAkB4mD,QAAlB,CAA2BjoD,MAAjD,EAAyDk1C,CAAC,GAAGiX,EAA7D,EAAiEjX,CAAC,EAAlE,EAAwE;AAEvE2U,UAAAA,WAAW,CAAC5B,QAAZ,CAAqBz9C,IAArB,CAA2Bu6C,YAAY,CAAE1jD,CAAF,CAAZ,CAAkB4mD,QAAlB,CAA4B/S,CAA5B,EAAgC1kB,KAAhC,EAA3B;AAEA;AAED,OAjBwD,CAmBzD;;;AAEA,UAAKu0B,YAAY,CAAE1jD,CAAF,CAAZ,CAAkB6mD,OAAlB,KAA8B9lD,SAAnC,EAA+C;AAE9CynD,QAAAA,WAAW,CAAC3B,OAAZ,GAAsB,EAAtB;;AAEA,aAAM,IAAIhT,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGpH,YAAY,CAAE1jD,CAAF,CAAZ,CAAkB6mD,OAAlB,CAA0BloD,MAAhD,EAAwDk1C,CAAC,GAAGiX,EAA5D,EAAgEjX,CAAC,EAAjE,EAAuE;AAEtE2U,UAAAA,WAAW,CAAC3B,OAAZ,CAAoB19C,IAApB,CAA0Bu6C,YAAY,CAAE1jD,CAAF,CAAZ,CAAkB6mD,OAAlB,CAA2BhT,CAA3B,EAA+B1kB,KAA/B,EAA1B;AAEA;AAED;;AAED,WAAKu0B,YAAL,CAAkBv6C,IAAlB,CAAwBq/C,WAAxB;AAEA,KAvHwB,CAyHzB;;;AAEA,UAAM7E,YAAY,GAAG3lC,MAAM,CAAC2lC,YAA5B;;AAEA,SAAM,IAAI3jD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGkS,YAAY,CAAChlD,MAAnC,EAA2CqB,CAAC,GAAGyxC,EAA/C,EAAmDzxC,CAAC,EAApD,EAA0D;AAEzD,YAAMyoD,WAAW,GAAG,EAApB,CAFyD,CAIzD;;AAEA,UAAK9E,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBk+C,aAAlB,KAAoCn9C,SAAzC,EAAqD;AAEpD0nD,QAAAA,WAAW,CAACvK,aAAZ,GAA4B,EAA5B;;AAEA,aAAM,IAAIrK,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGnH,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBk+C,aAAlB,CAAgCv/C,MAAtD,EAA8Dk1C,CAAC,GAAGiX,EAAlE,EAAsEjX,CAAC,EAAvE,EAA6E;AAE5E,gBAAM8f,eAAe,GAAGhQ,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBk+C,aAAlB,CAAiCrK,CAAjC,CAAxB;AACA,gBAAM+f,gBAAgB,GAAG,EAAzB;AAEAA,UAAAA,gBAAgB,CAACx1D,CAAjB,GAAqBu1D,eAAe,CAACv1D,CAAhB,CAAkB+wB,KAAlB,EAArB;AACAykC,UAAAA,gBAAgB,CAACz1D,CAAjB,GAAqBw1D,eAAe,CAACx1D,CAAhB,CAAkBgxB,KAAlB,EAArB;AACAykC,UAAAA,gBAAgB,CAAC/wD,CAAjB,GAAqB8wD,eAAe,CAAC9wD,CAAhB,CAAkBssB,KAAlB,EAArB;AAEAs5B,UAAAA,WAAW,CAACvK,aAAZ,CAA0B/0C,IAA1B,CAAgCyqD,gBAAhC;AAEA;AAED,OAvBwD,CAyBzD;;;AAEA,UAAKjQ,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBwwD,WAAlB,KAAkCzvD,SAAvC,EAAmD;AAElD0nD,QAAAA,WAAW,CAAC+H,WAAZ,GAA0B,EAA1B;;AAEA,aAAM,IAAI3c,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGnH,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBwwD,WAAlB,CAA8B7xD,MAApD,EAA4Dk1C,CAAC,GAAGiX,EAAhE,EAAoEjX,CAAC,EAArE,EAA2E;AAE1E4U,UAAAA,WAAW,CAAC+H,WAAZ,CAAwBrnD,IAAxB,CAA8Bw6C,YAAY,CAAE3jD,CAAF,CAAZ,CAAkBwwD,WAAlB,CAA+B3c,CAA/B,EAAmC1kB,KAAnC,EAA9B;AAEA;AAED;;AAED,WAAKw0B,YAAL,CAAkBx6C,IAAlB,CAAwBs/C,WAAxB;AAEA,KAtKwB,CAwKzB;;;AAEA,UAAMxB,WAAW,GAAGjpC,MAAM,CAACipC,WAA3B;;AAEA,SAAM,IAAIjnD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGwV,WAAW,CAACtoD,MAAlC,EAA0CqB,CAAC,GAAGyxC,EAA9C,EAAkDzxC,CAAC,EAAnD,EAAyD;AAExD,WAAKinD,WAAL,CAAiB99C,IAAjB,CAAuB89C,WAAW,CAAEjnD,CAAF,CAAX,CAAiBmvB,KAAjB,EAAvB;AAEA,KAhLwB,CAkLzB;;;AAEA,UAAM+3B,WAAW,GAAGlpC,MAAM,CAACkpC,WAA3B;;AAEA,SAAM,IAAIlnD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyV,WAAW,CAACvoD,MAAlC,EAA0CqB,CAAC,GAAGyxC,EAA9C,EAAkDzxC,CAAC,EAAnD,EAAyD;AAExD,WAAKknD,WAAL,CAAiB/9C,IAAjB,CAAuB+9C,WAAW,CAAElnD,CAAF,CAAX,CAAiBmvB,KAAjB,EAAvB;AAEA,KA1LwB,CA4LzB;;;AAEA,UAAMg7B,aAAa,GAAGnsC,MAAM,CAACmsC,aAA7B;;AAEA,SAAM,IAAInqD,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG0Y,aAAa,CAACxrD,MAApC,EAA4CqB,CAAC,GAAGyxC,EAAhD,EAAoDzxC,CAAC,EAArD,EAA2D;AAE1D,WAAKmqD,aAAL,CAAmBhhD,IAAnB,CAAyBghD,aAAa,CAAEnqD,CAAF,CAAtC;AAEA,KApMwB,CAsMzB;;;AAEA,UAAMsyC,WAAW,GAAGt0B,MAAM,CAACs0B,WAA3B;;AAEA,QAAKA,WAAW,KAAK,IAArB,EAA4B;AAE3B,WAAKA,WAAL,GAAmBA,WAAW,CAACnjB,KAAZ,EAAnB;AAEA,KA9MwB,CAgNzB;;;AAEA,UAAMg4B,cAAc,GAAGnpC,MAAM,CAACmpC,cAA9B;;AAEA,QAAKA,cAAc,KAAK,IAAxB,EAA+B;AAE9B,WAAKA,cAAL,GAAsBA,cAAc,CAACh4B,KAAf,EAAtB;AAEA,KAxNwB,CA0NzB;;;AAEA,SAAKq7B,kBAAL,GAA0BxsC,MAAM,CAACwsC,kBAAjC;AACA,SAAKpD,kBAAL,GAA0BppC,MAAM,CAACopC,kBAAjC;AACA,SAAKG,aAAL,GAAqBvpC,MAAM,CAACupC,aAA5B;AACA,SAAKF,iBAAL,GAAyBrpC,MAAM,CAACqpC,iBAAhC;AACA,SAAKC,gBAAL,GAAwBtpC,MAAM,CAACspC,gBAA/B;AACA,SAAKmD,uBAAL,GAA+BzsC,MAAM,CAACysC,uBAAtC;AACA,SAAKjD,gBAAL,GAAwBxpC,MAAM,CAACwpC,gBAA/B;AAEA,WAAO,IAAP;AAEA,GAnyC8E;AAqyC/EluB,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAK9wB,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAApB;AAEA;AAzyC8E,CAA3D,CAArB;AA6yCA;;;;AAKA;;AAEA,MAAM0pD,WAAN,SAA0BhE,QAA1B,CAAmC;AAElC3uD,EAAAA,WAAW,CAAEyI,KAAF,EAASC,MAAT,EAAiBkqD,KAAjB,EAAwBC,aAAxB,EAAuCC,cAAvC,EAAuDC,aAAvD,EAAuE;AAEjF;AAEA,SAAK9pD,IAAL,GAAY,aAAZ;AAEA,SAAKykC,UAAL,GAAkB;AACjBjlC,MAAAA,KAAK,EAAEA,KADU;AAEjBC,MAAAA,MAAM,EAAEA,MAFS;AAGjBkqD,MAAAA,KAAK,EAAEA,KAHU;AAIjBC,MAAAA,aAAa,EAAEA,aAJE;AAKjBC,MAAAA,cAAc,EAAEA,cALC;AAMjBC,MAAAA,aAAa,EAAEA;AANE,KAAlB;AASA,SAAKlE,kBAAL,CAAyB,IAAImE,iBAAJ,CAAuBvqD,KAAvB,EAA8BC,MAA9B,EAAsCkqD,KAAtC,EAA6CC,aAA7C,EAA4DC,cAA5D,EAA4EC,aAA5E,CAAzB;AACA,SAAKpC,aAAL;AAEA;;AApBiC,EAwBnC;;;;;AAEA,MAAMqC,iBAAN,SAAgChL,cAAhC,CAA+C;AAE9ChoD,EAAAA,WAAW,CAAEyI,KAAF,EAASC,MAAT,EAAiBkqD,KAAjB,EAAwBC,aAAxB,EAAuCC,cAAvC,EAAuDC,aAAvD,EAAuE;AAEjF;AAEA,SAAK9pD,IAAL,GAAY,mBAAZ;AAEA,SAAKykC,UAAL,GAAkB;AACjBjlC,MAAAA,KAAK,EAAEA,KADU;AAEjBC,MAAAA,MAAM,EAAEA,MAFS;AAGjBkqD,MAAAA,KAAK,EAAEA,KAHU;AAIjBC,MAAAA,aAAa,EAAEA,aAJE;AAKjBC,MAAAA,cAAc,EAAEA,cALC;AAMjBC,MAAAA,aAAa,EAAEA;AANE,KAAlB;AASA,UAAM9zD,KAAK,GAAG,IAAd;AAEAwJ,IAAAA,KAAK,GAAGA,KAAK,IAAI,CAAjB;AACAC,IAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACAkqD,IAAAA,KAAK,GAAGA,KAAK,IAAI,CAAjB,CAnBiF,CAqBjF;;AAEAC,IAAAA,aAAa,GAAG/1D,IAAI,CAACwE,KAAL,CAAYuxD,aAAZ,KAA+B,CAA/C;AACAC,IAAAA,cAAc,GAAGh2D,IAAI,CAACwE,KAAL,CAAYwxD,cAAZ,KAAgC,CAAjD;AACAC,IAAAA,aAAa,GAAGj2D,IAAI,CAACwE,KAAL,CAAYyxD,aAAZ,KAA+B,CAA/C,CAzBiF,CA2BjF;;AAEA,UAAM1H,OAAO,GAAG,EAAhB;AACA,UAAM3F,QAAQ,GAAG,EAAjB;AACA,UAAMC,OAAO,GAAG,EAAhB;AACA,UAAMC,GAAG,GAAG,EAAZ,CAhCiF,CAkCjF;;AAEA,QAAIqN,gBAAgB,GAAG,CAAvB;AACA,QAAIC,UAAU,GAAG,CAAjB,CArCiF,CAuCjF;;AAEAC,IAAAA,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAE,CAAnB,EAAsB,CAAE,CAAxB,EAA2BP,KAA3B,EAAkClqD,MAAlC,EAA0CD,KAA1C,EAAiDsqD,aAAjD,EAAgED,cAAhE,EAAgF,CAAhF,CAAV,CAzCiF,CAyCc;;AAC/FK,IAAAA,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyBP,KAAzB,EAAgClqD,MAAhC,EAAwC,CAAED,KAA1C,EAAiDsqD,aAAjD,EAAgED,cAAhE,EAAgF,CAAhF,CAAV,CA1CiF,CA0Cc;;AAC/FK,IAAAA,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAApB,EAAuB1qD,KAAvB,EAA8BmqD,KAA9B,EAAqClqD,MAArC,EAA6CmqD,aAA7C,EAA4DE,aAA5D,EAA2E,CAA3E,CAAV,CA3CiF,CA2CS;;AAC1FI,IAAAA,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB1qD,KAAzB,EAAgCmqD,KAAhC,EAAuC,CAAElqD,MAAzC,EAAiDmqD,aAAjD,EAAgEE,aAAhE,EAA+E,CAA/E,CAAV,CA5CiF,CA4Ca;;AAC9FI,IAAAA,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB1qD,KAAzB,EAAgCC,MAAhC,EAAwCkqD,KAAxC,EAA+CC,aAA/C,EAA8DC,cAA9D,EAA8E,CAA9E,CAAV,CA7CiF,CA6CY;;AAC7FK,IAAAA,UAAU,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,CAAE,CAAnB,EAAsB,CAAE,CAAxB,EAA2B1qD,KAA3B,EAAkCC,MAAlC,EAA0C,CAAEkqD,KAA5C,EAAmDC,aAAnD,EAAkEC,cAAlE,EAAkF,CAAlF,CAAV,CA9CiF,CA8CgB;AAEjG;;AAEA,SAAKvK,QAAL,CAAe8C,OAAf;AACA,SAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,SAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,SAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;;AAEA,aAASuN,UAAT,CAAqBha,CAArB,EAAwB77C,CAAxB,EAA2Bse,CAA3B,EAA8Bw3C,IAA9B,EAAoCC,IAApC,EAA0C5qD,KAA1C,EAAiDC,MAAjD,EAAyDkqD,KAAzD,EAAgEU,KAAhE,EAAuEC,KAAvE,EAA8ExW,aAA9E,EAA8F;AAE7F,YAAMyW,YAAY,GAAG/qD,KAAK,GAAG6qD,KAA7B;AACA,YAAMG,aAAa,GAAG/qD,MAAM,GAAG6qD,KAA/B;AAEA,YAAMG,SAAS,GAAGjrD,KAAK,GAAG,CAA1B;AACA,YAAMkrD,UAAU,GAAGjrD,MAAM,GAAG,CAA5B;AACA,YAAMkrD,SAAS,GAAGhB,KAAK,GAAG,CAA1B;AAEA,YAAMiB,MAAM,GAAGP,KAAK,GAAG,CAAvB;AACA,YAAMQ,MAAM,GAAGP,KAAK,GAAG,CAAvB;AAEA,UAAIQ,aAAa,GAAG,CAApB;AACA,UAAIC,UAAU,GAAG,CAAjB;AAEA,YAAMzoB,MAAM,GAAG,IAAIlM,OAAJ,EAAf,CAf6F,CAiB7F;;AAEA,WAAM,IAAIa,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG4zB,MAAvB,EAA+B5zB,EAAE,EAAjC,EAAuC;AAEtC,cAAM75B,CAAC,GAAG65B,EAAE,GAAGuzB,aAAL,GAAqBE,UAA/B;;AAEA,aAAM,IAAI1zB,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG4zB,MAAvB,EAA+B5zB,EAAE,EAAjC,EAAuC;AAEtC,gBAAM95B,CAAC,GAAG85B,EAAE,GAAGuzB,YAAL,GAAoBE,SAA9B,CAFsC,CAItC;;AAEAnoB,UAAAA,MAAM,CAAE4N,CAAF,CAAN,GAAchzC,CAAC,GAAGitD,IAAlB;AACA7nB,UAAAA,MAAM,CAAEjuC,CAAF,CAAN,GAAc+I,CAAC,GAAGgtD,IAAlB;AACA9nB,UAAAA,MAAM,CAAE3vB,CAAF,CAAN,GAAcg4C,SAAd,CARsC,CAUtC;;AAEAlO,UAAAA,QAAQ,CAACz9C,IAAT,CAAesjC,MAAM,CAACplC,CAAtB,EAAyBolC,MAAM,CAACllC,CAAhC,EAAmCklC,MAAM,CAAC/S,CAA1C,EAZsC,CActC;;AAEA+S,UAAAA,MAAM,CAAE4N,CAAF,CAAN,GAAc,CAAd;AACA5N,UAAAA,MAAM,CAAEjuC,CAAF,CAAN,GAAc,CAAd;AACAiuC,UAAAA,MAAM,CAAE3vB,CAAF,CAAN,GAAcg3C,KAAK,GAAG,CAAR,GAAY,CAAZ,GAAgB,CAAE,CAAhC,CAlBsC,CAoBtC;;AAEAjN,UAAAA,OAAO,CAAC19C,IAAR,CAAcsjC,MAAM,CAACplC,CAArB,EAAwBolC,MAAM,CAACllC,CAA/B,EAAkCklC,MAAM,CAAC/S,CAAzC,EAtBsC,CAwBtC;;AAEAotB,UAAAA,GAAG,CAAC39C,IAAJ,CAAUg4B,EAAE,GAAGqzB,KAAf;AACA1N,UAAAA,GAAG,CAAC39C,IAAJ,CAAU,IAAMi4B,EAAE,GAAGqzB,KAArB,EA3BsC,CA6BtC;;AAEAQ,UAAAA,aAAa,IAAI,CAAjB;AAEA;AAED,OA1D4F,CA4D7F;AAEA;AACA;AACA;;;AAEA,WAAM,IAAI7zB,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAGqzB,KAAvB,EAA8BrzB,EAAE,EAAhC,EAAsC;AAErC,aAAM,IAAID,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAGqzB,KAAvB,EAA8BrzB,EAAE,EAAhC,EAAsC;AAErC,gBAAM/iC,CAAC,GAAG+1D,gBAAgB,GAAGhzB,EAAnB,GAAwB4zB,MAAM,GAAG3zB,EAA3C;AACA,gBAAMjjC,CAAC,GAAGg2D,gBAAgB,GAAGhzB,EAAnB,GAAwB4zB,MAAM,IAAK3zB,EAAE,GAAG,CAAV,CAAxC;AACA,gBAAMv+B,CAAC,GAAGsxD,gBAAgB,IAAKhzB,EAAE,GAAG,CAAV,CAAhB,GAAgC4zB,MAAM,IAAK3zB,EAAE,GAAG,CAAV,CAAhD;AACA,gBAAMvM,CAAC,GAAGs/B,gBAAgB,IAAKhzB,EAAE,GAAG,CAAV,CAAhB,GAAgC4zB,MAAM,GAAG3zB,EAAnD,CALqC,CAOrC;;AAEAmrB,UAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,UAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB,EAVqC,CAYrC;;AAEAqgC,UAAAA,UAAU,IAAI,CAAd;AAEA;AAED,OAtF4F,CAwF7F;;;AAEA/0D,MAAAA,KAAK,CAACypD,QAAN,CAAgBwK,UAAhB,EAA4Bc,UAA5B,EAAwCjX,aAAxC,EA1F6F,CA4F7F;;AAEAmW,MAAAA,UAAU,IAAIc,UAAd,CA9F6F,CAgG7F;;AAEAf,MAAAA,gBAAgB,IAAIc,aAApB;AAEA;AAED;;AA/J6C;AAmK/C;;;;;;;AAIA,SAASE,aAAT,CAAwBx+B,GAAxB,EAA8B;AAE7B,QAAMgG,GAAG,GAAG,EAAZ;;AAEA,OAAM,MAAM0d,CAAZ,IAAiB1jB,GAAjB,EAAuB;AAEtBgG,IAAAA,GAAG,CAAE0d,CAAF,CAAH,GAAW,EAAX;;AAEA,SAAM,MAAM33C,CAAZ,IAAiBi0B,GAAG,CAAE0jB,CAAF,CAApB,EAA4B;AAE3B,YAAM31C,QAAQ,GAAGiyB,GAAG,CAAE0jB,CAAF,CAAH,CAAU33C,CAAV,CAAjB;;AAEA,UAAKgC,QAAQ,KAAMA,QAAQ,CAACo3C,OAAT,IAClBp3C,QAAQ,CAACytB,SADS,IACIztB,QAAQ,CAACm/B,SADb,IAElBn/B,QAAQ,CAACkqB,SAFS,IAEIlqB,QAAQ,CAAC+7B,SAFb,IAE0B/7B,QAAQ,CAACi1B,SAFnC,IAGlBj1B,QAAQ,CAACk0B,SAHG,CAAb,EAGwB;AAEvB+D,QAAAA,GAAG,CAAE0d,CAAF,CAAH,CAAU33C,CAAV,IAAgBgC,QAAQ,CAACyqB,KAAT,EAAhB;AAEA,OAPD,MAOO,IAAKtwB,KAAK,CAACoC,OAAN,CAAeyD,QAAf,CAAL,EAAiC;AAEvCi4B,QAAAA,GAAG,CAAE0d,CAAF,CAAH,CAAU33C,CAAV,IAAgBgC,QAAQ,CAACzF,KAAT,EAAhB;AAEA,OAJM,MAIA;AAEN09B,QAAAA,GAAG,CAAE0d,CAAF,CAAH,CAAU33C,CAAV,IAAgBgC,QAAhB;AAEA;AAED;AAED;;AAED,SAAOi4B,GAAP;AAEA;;AAED,SAASy4B,aAAT,CAAwBC,QAAxB,EAAmC;AAElC,QAAMC,MAAM,GAAG,EAAf;;AAEA,OAAM,IAAIjb,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGgb,QAAQ,CAAC12D,MAA9B,EAAsC07C,CAAC,EAAvC,EAA6C;AAE5C,UAAM9kB,GAAG,GAAG4/B,aAAa,CAAEE,QAAQ,CAAEhb,CAAF,CAAV,CAAzB;;AAEA,SAAM,MAAM33C,CAAZ,IAAiB6yB,GAAjB,EAAuB;AAEtB+/B,MAAAA,MAAM,CAAE5yD,CAAF,CAAN,GAAc6yB,GAAG,CAAE7yB,CAAF,CAAjB;AAEA;AAED;;AAED,SAAO4yD,MAAP;AAEA,EAED;;;AAEA,MAAMC,aAAa,GAAG;AAAEpmC,EAAAA,KAAK,EAAEgmC,aAAT;AAAwBpJ,EAAAA,KAAK,EAAEqJ;AAA/B,CAAtB;;AAEA,IAAII,cAAc,GAAG,+FAArB;AAEA,IAAIC,gBAAgB,GAAG,gEAAvB;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA,SAASC,cAAT,CAAyB9mB,UAAzB,EAAsC;AAErCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,gBAAZ;AAEA,OAAKwrD,OAAL,GAAe,EAAf;AACA,OAAKN,QAAL,GAAgB,EAAhB;AAEA,OAAKO,YAAL,GAAoBJ,cAApB;AACA,OAAKK,cAAL,GAAsBJ,gBAAtB;AAEA,OAAKtS,SAAL,GAAiB,CAAjB;AAEA,OAAKG,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AAEA,OAAKhU,GAAL,GAAW,KAAX,CAjBqC,CAiBnB;;AAClB,OAAKumB,MAAL,GAAc,KAAd,CAlBqC,CAkBhB;;AACrB,OAAKC,QAAL,GAAgB,KAAhB,CAnBqC,CAmBd;;AAEvB,OAAKnS,QAAL,GAAgB,KAAhB,CArBqC,CAqBd;;AACvB,OAAKF,YAAL,GAAoB,KAApB,CAtBqC,CAsBV;;AAC3B,OAAKC,YAAL,GAAoB,KAApB,CAvBqC,CAuBV;;AAE3B,OAAKqS,UAAL,GAAkB;AACjBC,IAAAA,WAAW,EAAE,KADI;AACG;AACpBC,IAAAA,SAAS,EAAE,KAFM;AAEC;AAClBC,IAAAA,WAAW,EAAE,KAHI;AAGG;AACpBC,IAAAA,gBAAgB,EAAE,KAJD,CAIO;;AAJP,GAAlB,CAzBqC,CAgCrC;AACA;;AACA,OAAKC,sBAAL,GAA8B;AAC7B,aAAS,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,CADoB;AAE7B,UAAM,CAAE,CAAF,EAAK,CAAL,CAFuB;AAG7B,WAAO,CAAE,CAAF,EAAK,CAAL;AAHsB,GAA9B;AAMA,OAAKC,mBAAL,GAA2Bv1D,SAA3B;AACA,OAAKw1D,kBAAL,GAA0B,KAA1B;;AAEA,MAAK3nB,UAAU,KAAK7tC,SAApB,EAAgC;AAE/B,QAAK6tC,UAAU,CAACua,UAAX,KAA0BpoD,SAA/B,EAA2C;AAE1C0tB,MAAAA,OAAO,CAACyD,KAAR,CAAe,yFAAf;AAEA;;AAED,SAAKyuB,SAAL,CAAgB/R,UAAhB;AAEA;AAED;;AAED8mB,cAAc,CAAC52D,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA3B;AACA42D,cAAc,CAAC52D,SAAf,CAAyBoC,WAAzB,GAAuCw0D,cAAvC;AAEAA,cAAc,CAAC52D,SAAf,CAAyB03D,gBAAzB,GAA4C,IAA5C;;AAEAd,cAAc,CAAC52D,SAAf,CAAyBswB,IAAzB,GAAgC,UAAWpR,MAAX,EAAoB;AAEnDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAK63C,cAAL,GAAsB73C,MAAM,CAAC63C,cAA7B;AACA,OAAKD,YAAL,GAAoB53C,MAAM,CAAC43C,YAA3B;AAEA,OAAKP,QAAL,GAAgBF,aAAa,CAAEn3C,MAAM,CAACq3C,QAAT,CAA7B;AAEA,OAAKM,OAAL,GAAej2D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBG,MAAM,CAAC23C,OAA1B,CAAf;AAEA,OAAKrS,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AAEA,OAAKuS,MAAL,GAAc93C,MAAM,CAAC83C,MAArB;AACA,OAAKC,QAAL,GAAgB/3C,MAAM,CAAC+3C,QAAvB;AAEA,OAAKnS,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AAEA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,OAAKqS,UAAL,GAAkBt2D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBG,MAAM,CAACg4C,UAA1B,CAAlB;AAEA,SAAO,IAAP;AAEA,CA1BD;;AA4BAN,cAAc,CAAC52D,SAAf,CAAyBg6B,MAAzB,GAAkC,UAAWC,IAAX,EAAkB;AAEnD,QAAMoW,IAAI,GAAGkP,QAAQ,CAACv/C,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,EAAsC05B,IAAtC,CAAb;AAEAoW,EAAAA,IAAI,CAACkmB,QAAL,GAAgB,EAAhB;;AAEA,OAAM,MAAM//C,IAAZ,IAAoB,KAAK+/C,QAAzB,EAAoC;AAEnC,UAAMoB,OAAO,GAAG,KAAKpB,QAAL,CAAe//C,IAAf,CAAhB;AACA,UAAMlS,KAAK,GAAGqzD,OAAO,CAACrzD,KAAtB;;AAEA,QAAKA,KAAK,IAAIA,KAAK,CAACw1B,SAApB,EAAgC;AAE/BuW,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,GADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAAC01B,MAAN,CAAcC,IAAd,EAAqBhN;AAFL,OAAxB;AAKA,KAPD,MAOO,IAAK3oB,KAAK,IAAIA,KAAK,CAAC04C,OAApB,EAA8B;AAEpC3M,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,GADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAAC85C,MAAN;AAFgB,OAAxB;AAKA,KAPM,MAOA,IAAK95C,KAAK,IAAIA,KAAK,CAACwrB,SAApB,EAAgC;AAEtCugB,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,IADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAACtC,OAAN;AAFgB,OAAxB;AAKA,KAPM,MAOA,IAAKsC,KAAK,IAAIA,KAAK,CAACq9B,SAApB,EAAgC;AAEtC0O,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,IADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAACtC,OAAN;AAFgB,OAAxB;AAKA,KAPM,MAOA,IAAKsC,KAAK,IAAIA,KAAK,CAACu2B,SAApB,EAAgC;AAEtCwV,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,IADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAACtC,OAAN;AAFgB,OAAxB;AAKA,KAPM,MAOA,IAAKsC,KAAK,IAAIA,KAAK,CAAC+uB,SAApB,EAAgC;AAEtCgd,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,IADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAACtC,OAAN;AAFgB,OAAxB;AAKA,KAPM,MAOA,IAAKsC,KAAK,IAAIA,KAAK,CAACygC,SAApB,EAAgC;AAEtCsL,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBnL,QAAAA,IAAI,EAAE,IADiB;AAEvB/G,QAAAA,KAAK,EAAEA,KAAK,CAACtC,OAAN;AAFgB,OAAxB;AAKA,KAPM,MAOA;AAENquC,MAAAA,IAAI,CAACkmB,QAAL,CAAe//C,IAAf,IAAwB;AACvBlS,QAAAA,KAAK,EAAEA;AADgB,OAAxB,CAFM,CAMN;AAEA;AAED;;AAED,MAAK1D,MAAM,CAACF,IAAP,CAAa,KAAKm2D,OAAlB,EAA4Bh3D,MAA5B,GAAqC,CAA1C,EAA8CwwC,IAAI,CAACwmB,OAAL,GAAe,KAAKA,OAApB;AAE9CxmB,EAAAA,IAAI,CAACymB,YAAL,GAAoB,KAAKA,YAAzB;AACAzmB,EAAAA,IAAI,CAAC0mB,cAAL,GAAsB,KAAKA,cAA3B;AAEA,QAAMG,UAAU,GAAG,EAAnB;;AAEA,OAAM,MAAMr2D,GAAZ,IAAmB,KAAKq2D,UAAxB,EAAqC;AAEpC,QAAK,KAAKA,UAAL,CAAiBr2D,GAAjB,MAA2B,IAAhC,EAAuCq2D,UAAU,CAAEr2D,GAAF,CAAV,GAAoB,IAApB;AAEvC;;AAED,MAAKD,MAAM,CAACF,IAAP,CAAaw2D,UAAb,EAA0Br3D,MAA1B,GAAmC,CAAxC,EAA4CwwC,IAAI,CAAC6mB,UAAL,GAAkBA,UAAlB;AAE5C,SAAO7mB,IAAP;AAEA,CAzFD;AA2FA;;;;;;;AAMA,SAASunB,MAAT,GAAkB;AAEjBpsB,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,QAAZ;AAEA,OAAKs3B,kBAAL,GAA0B,IAAIiC,OAAJ,EAA1B;AAEA,OAAKhC,gBAAL,GAAwB,IAAIgC,OAAJ,EAAxB;AACA,OAAK9B,uBAAL,GAA+B,IAAI8B,OAAJ,EAA/B;AAEA;;AAEDgzB,MAAM,CAAC53D,SAAP,GAAmBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEtEoC,EAAAA,WAAW,EAAEw1D,MAFyD;AAItE9pB,EAAAA,QAAQ,EAAE,IAJ4D;AAMtExd,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAmBoxB,SAAnB,EAA+B;AAEpC9E,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC,EAA4CoxB,SAA5C;AAEA,SAAK3N,kBAAL,CAAwBrS,IAAxB,CAA8BpR,MAAM,CAACyjB,kBAArC;AAEA,SAAKC,gBAAL,CAAsBtS,IAAtB,CAA4BpR,MAAM,CAAC0jB,gBAAnC;AACA,SAAKE,uBAAL,CAA6BxS,IAA7B,CAAmCpR,MAAM,CAAC4jB,uBAA1C;AAEA,WAAO,IAAP;AAEA,GAjBqE;AAmBtE4L,EAAAA,iBAAiB,EAAE,UAAWruC,MAAX,EAAoB;AAEtC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,2DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,SAAK8M,iBAAL,CAAwB,IAAxB;AAEA,UAAM9nC,CAAC,GAAG,KAAKs8B,WAAL,CAAiB7R,QAA3B;AAEA,WAAO7wB,MAAM,CAACqvB,GAAP,CAAY,CAAEjpB,CAAC,CAAE,CAAF,CAAf,EAAsB,CAAEA,CAAC,CAAE,CAAF,CAAzB,EAAgC,CAAEA,CAAC,CAAE,EAAF,CAAnC,EAA4CqrB,SAA5C,EAAP;AAEA,GAlCqE;AAoCtEyc,EAAAA,iBAAiB,EAAE,UAAWQ,KAAX,EAAmB;AAErCvD,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBuuC,iBAAnB,CAAqChuC,IAArC,CAA2C,IAA3C,EAAiDwuC,KAAjD;AAEA,SAAKpM,kBAAL,CAAwB3M,UAAxB,CAAoC,KAAK+M,WAAzC;AAEA,GA1CqE;AA4CtE8K,EAAAA,iBAAiB,EAAE,UAAWmB,aAAX,EAA0BC,cAA1B,EAA2C;AAE7DzD,IAAAA,QAAQ,CAACxrC,SAAT,CAAmB6tC,iBAAnB,CAAqCttC,IAArC,CAA2C,IAA3C,EAAiDyuC,aAAjD,EAAgEC,cAAhE;AAEA,SAAKtM,kBAAL,CAAwB3M,UAAxB,CAAoC,KAAK+M,WAAzC;AAEA,GAlDqE;AAoDtE1S,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA;AAxDqE,CAApD,CAAnB;AA4DA;;;;;;;AAOA,SAASunC,iBAAT,CAA4BC,GAA5B,EAAiCC,MAAjC,EAAyC7uB,IAAzC,EAA+CC,GAA/C,EAAqD;AAEpDyuB,EAAAA,MAAM,CAACr3D,IAAP,CAAa,IAAb;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAKysD,GAAL,GAAWA,GAAG,KAAK71D,SAAR,GAAoB61D,GAApB,GAA0B,EAArC;AACA,OAAKE,IAAL,GAAY,CAAZ;AAEA,OAAK9uB,IAAL,GAAYA,IAAI,KAAKjnC,SAAT,GAAqBinC,IAArB,GAA4B,GAAxC;AACA,OAAKC,GAAL,GAAWA,GAAG,KAAKlnC,SAAR,GAAoBknC,GAApB,GAA0B,IAArC;AACA,OAAK7rB,KAAL,GAAa,EAAb;AAEA,OAAKy6C,MAAL,GAAcA,MAAM,KAAK91D,SAAX,GAAuB81D,MAAvB,GAAgC,CAA9C;AACA,OAAKE,IAAL,GAAY,IAAZ;AAEA,OAAKC,SAAL,GAAiB,EAAjB,CAhBoD,CAgB/B;;AACrB,OAAKC,UAAL,GAAkB,CAAlB,CAjBoD,CAiB/B;;AAErB,OAAKC,sBAAL;AAEA;;AAEDP,iBAAiB,CAAC73D,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe+9B,MAAM,CAAC53D,SAAtB,CAAf,EAAkD;AAE/EoC,EAAAA,WAAW,EAAEy1D,iBAFkE;AAI/EQ,EAAAA,mBAAmB,EAAE,IAJ0D;AAM/E/nC,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAmBoxB,SAAnB,EAA+B;AAEpCsnB,IAAAA,MAAM,CAAC53D,SAAP,CAAiBswB,IAAjB,CAAsB/vB,IAAtB,CAA4B,IAA5B,EAAkC2e,MAAlC,EAA0CoxB,SAA1C;AAEA,SAAKwnB,GAAL,GAAW54C,MAAM,CAAC44C,GAAlB;AACA,SAAKE,IAAL,GAAY94C,MAAM,CAAC84C,IAAnB;AAEA,SAAK9uB,IAAL,GAAYhqB,MAAM,CAACgqB,IAAnB;AACA,SAAKC,GAAL,GAAWjqB,MAAM,CAACiqB,GAAlB;AACA,SAAK7rB,KAAL,GAAa4B,MAAM,CAAC5B,KAApB;AAEA,SAAKy6C,MAAL,GAAc74C,MAAM,CAAC64C,MAArB;AACA,SAAKE,IAAL,GAAY/4C,MAAM,CAAC+4C,IAAP,KAAgB,IAAhB,GAAuB,IAAvB,GAA8Br3D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBG,MAAM,CAAC+4C,IAA1B,CAA1C;AAEA,SAAKC,SAAL,GAAiBh5C,MAAM,CAACg5C,SAAxB;AACA,SAAKC,UAAL,GAAkBj5C,MAAM,CAACi5C,UAAzB;AAEA,WAAO,IAAP;AAEA,GAzB8E;;AA2B/E;;;;;;;;AAQAG,EAAAA,cAAc,EAAE,UAAWC,WAAX,EAAyB;AAExC;AACA,UAAMC,YAAY,GAAG,MAAM,KAAKC,aAAL,EAAN,GAA6BF,WAAlD;AAEA,SAAKT,GAAL,GAAWvrC,SAAS,CAACG,OAAV,GAAoB,CAApB,GAAwBxtB,IAAI,CAACw5D,IAAL,CAAWF,YAAX,CAAnC;AACA,SAAKJ,sBAAL;AAEA,GA3C8E;;AA6C/E;;;AAGAO,EAAAA,cAAc,EAAE,YAAY;AAE3B,UAAMH,YAAY,GAAGt5D,IAAI,CAAC05D,GAAL,CAAUrsC,SAAS,CAACC,OAAV,GAAoB,GAApB,GAA0B,KAAKsrC,GAAzC,CAArB;AAEA,WAAO,MAAM,KAAKW,aAAL,EAAN,GAA6BD,YAApC;AAEA,GAtD8E;AAwD/EK,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAOtsC,SAAS,CAACG,OAAV,GAAoB,CAApB,GAAwBxtB,IAAI,CAACw5D,IAAL,CAC9Bx5D,IAAI,CAAC05D,GAAL,CAAUrsC,SAAS,CAACC,OAAV,GAAoB,GAApB,GAA0B,KAAKsrC,GAAzC,IAAiD,KAAKE,IADxB,CAA/B;AAGA,GA7D8E;AA+D/Ec,EAAAA,YAAY,EAAE,YAAY;AAEzB;AACA,WAAO,KAAKZ,SAAL,GAAiBh5D,IAAI,CAAC8E,GAAL,CAAU,KAAK+zD,MAAf,EAAuB,CAAvB,CAAxB;AAEA,GApE8E;AAsE/EU,EAAAA,aAAa,EAAE,YAAY;AAE1B;AACA,WAAO,KAAKP,SAAL,GAAiBh5D,IAAI,CAAC+E,GAAL,CAAU,KAAK8zD,MAAf,EAAuB,CAAvB,CAAxB;AAEA,GA3E8E;;AA6E/E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCAgB,EAAAA,aAAa,EAAE,UAAWC,SAAX,EAAsBC,UAAtB,EAAkC1wD,CAAlC,EAAqCE,CAArC,EAAwCoC,KAAxC,EAA+CC,MAA/C,EAAwD;AAEtE,SAAKitD,MAAL,GAAciB,SAAS,GAAGC,UAA1B;;AAEA,QAAK,KAAKhB,IAAL,KAAc,IAAnB,EAA0B;AAEzB,WAAKA,IAAL,GAAY;AACXtD,QAAAA,OAAO,EAAE,IADE;AAEXqE,QAAAA,SAAS,EAAE,CAFA;AAGXC,QAAAA,UAAU,EAAE,CAHD;AAIXC,QAAAA,OAAO,EAAE,CAJE;AAKXC,QAAAA,OAAO,EAAE,CALE;AAMXtuD,QAAAA,KAAK,EAAE,CANI;AAOXC,QAAAA,MAAM,EAAE;AAPG,OAAZ;AAUA;;AAED,SAAKmtD,IAAL,CAAUtD,OAAV,GAAoB,IAApB;AACA,SAAKsD,IAAL,CAAUe,SAAV,GAAsBA,SAAtB;AACA,SAAKf,IAAL,CAAUgB,UAAV,GAAuBA,UAAvB;AACA,SAAKhB,IAAL,CAAUiB,OAAV,GAAoB3wD,CAApB;AACA,SAAK0vD,IAAL,CAAUkB,OAAV,GAAoB1wD,CAApB;AACA,SAAKwvD,IAAL,CAAUptD,KAAV,GAAkBA,KAAlB;AACA,SAAKotD,IAAL,CAAUntD,MAAV,GAAmBA,MAAnB;AAEA,SAAKstD,sBAAL;AAEA,GA5I8E;AA8I/EgB,EAAAA,eAAe,EAAE,YAAY;AAE5B,QAAK,KAAKnB,IAAL,KAAc,IAAnB,EAA0B;AAEzB,WAAKA,IAAL,CAAUtD,OAAV,GAAoB,KAApB;AAEA;;AAED,SAAKyD,sBAAL;AAEA,GAxJ8E;AA0J/EA,EAAAA,sBAAsB,EAAE,YAAY;AAEnC,QAAIlvB,IAAI,GAAG,KAAKA,IAAhB;AAAA,QACCrhC,GAAG,GAAGqhC,IAAI,GAAGhqC,IAAI,CAAC05D,GAAL,CAAUrsC,SAAS,CAACC,OAAV,GAAoB,GAApB,GAA0B,KAAKsrC,GAAzC,CAAP,GAAwD,KAAKE,IADpE;AAAA,QAECltD,MAAM,GAAG,IAAIjD,GAFd;AAAA,QAGCgD,KAAK,GAAG,KAAKktD,MAAL,GAAcjtD,MAHvB;AAAA,QAICnD,IAAI,GAAG,CAAE,GAAF,GAAQkD,KAJhB;AAAA,QAKCotD,IAAI,GAAG,KAAKA,IALb;;AAOA,QAAK,KAAKA,IAAL,KAAc,IAAd,IAAsB,KAAKA,IAAL,CAAUtD,OAArC,EAA+C;AAE9C,YAAMqE,SAAS,GAAGf,IAAI,CAACe,SAAvB;AAAA,YACCC,UAAU,GAAGhB,IAAI,CAACgB,UADnB;AAGAtxD,MAAAA,IAAI,IAAIswD,IAAI,CAACiB,OAAL,GAAeruD,KAAf,GAAuBmuD,SAA/B;AACAnxD,MAAAA,GAAG,IAAIowD,IAAI,CAACkB,OAAL,GAAeruD,MAAf,GAAwBmuD,UAA/B;AACApuD,MAAAA,KAAK,IAAIotD,IAAI,CAACptD,KAAL,GAAamuD,SAAtB;AACAluD,MAAAA,MAAM,IAAImtD,IAAI,CAACntD,MAAL,GAAcmuD,UAAxB;AAEA;;AAED,UAAMI,IAAI,GAAG,KAAKlB,UAAlB;AACA,QAAKkB,IAAI,KAAK,CAAd,EAAkB1xD,IAAI,IAAIuhC,IAAI,GAAGmwB,IAAP,GAAc,KAAKP,YAAL,EAAtB;AAElB,SAAKl2B,gBAAL,CAAsBqG,eAAtB,CAAuCthC,IAAvC,EAA6CA,IAAI,GAAGkD,KAApD,EAA2DhD,GAA3D,EAAgEA,GAAG,GAAGiD,MAAtE,EAA8Eo+B,IAA9E,EAAoF,KAAKC,GAAzF;AAEA,SAAKrG,uBAAL,CAA6B9M,UAA7B,CAAyC,KAAK4M,gBAA9C;AAEA,GAtL8E;AAwL/E5I,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAG7E,QAAQ,CAACxrC,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,EAAsC05B,IAAtC,CAAb;AAEAoW,IAAAA,IAAI,CAAC1qC,MAAL,CAAYmyD,GAAZ,GAAkB,KAAKA,GAAvB;AACAznB,IAAAA,IAAI,CAAC1qC,MAAL,CAAYqyD,IAAZ,GAAmB,KAAKA,IAAxB;AAEA3nB,IAAAA,IAAI,CAAC1qC,MAAL,CAAYujC,IAAZ,GAAmB,KAAKA,IAAxB;AACAmH,IAAAA,IAAI,CAAC1qC,MAAL,CAAYwjC,GAAZ,GAAkB,KAAKA,GAAvB;AACAkH,IAAAA,IAAI,CAAC1qC,MAAL,CAAY2X,KAAZ,GAAoB,KAAKA,KAAzB;AAEA+yB,IAAAA,IAAI,CAAC1qC,MAAL,CAAYoyD,MAAZ,GAAqB,KAAKA,MAA1B;AAEA,QAAK,KAAKE,IAAL,KAAc,IAAnB,EAA0B5nB,IAAI,CAAC1qC,MAAL,CAAYsyD,IAAZ,GAAmBr3D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmB,KAAKk5C,IAAxB,CAAnB;AAE1B5nB,IAAAA,IAAI,CAAC1qC,MAAL,CAAYuyD,SAAZ,GAAwB,KAAKA,SAA7B;AACA7nB,IAAAA,IAAI,CAAC1qC,MAAL,CAAYwyD,UAAZ,GAAyB,KAAKA,UAA9B;AAEA,WAAO9nB,IAAP;AAEA;AA5M8E,CAAlD,CAA9B;AAgNA;;;;;;;AAOA,MAAMynB,GAAG,GAAG,EAAZ;AAAA,MAAgBC,MAAM,GAAG,CAAzB;;AAEA,SAASuB,UAAT,CAAqBpwB,IAArB,EAA2BC,GAA3B,EAAgCowB,YAAhC,EAA+C;AAE9C/tB,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,YAAZ;;AAEA,MAAKkuD,YAAY,CAACC,uBAAb,KAAyC,IAA9C,EAAqD;AAEpD7pC,IAAAA,OAAO,CAACyD,KAAR,CAAe,wGAAf;AACA;AAEA;;AAED,OAAKmmC,YAAL,GAAoBA,YAApB;AAEA,QAAME,QAAQ,GAAG,IAAI5B,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAjB;AACAswB,EAAAA,QAAQ,CAAC/uB,MAAT,GAAkB,KAAKA,MAAvB;AACA+uB,EAAAA,QAAQ,CAAC9yB,EAAT,CAAYjX,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACA+pC,EAAAA,QAAQ,CAAChzB,MAAT,CAAiB,IAAIhF,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,OAAK5oB,GAAL,CAAU4gD,QAAV;AAEA,QAAMC,QAAQ,GAAG,IAAI7B,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAjB;AACAuwB,EAAAA,QAAQ,CAAChvB,MAAT,GAAkB,KAAKA,MAAvB;AACAgvB,EAAAA,QAAQ,CAAC/yB,EAAT,CAAYjX,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAgqC,EAAAA,QAAQ,CAACjzB,MAAT,CAAiB,IAAIhF,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAAjB;AACA,OAAK5oB,GAAL,CAAU6gD,QAAV;AAEA,QAAMC,QAAQ,GAAG,IAAI9B,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAjB;AACAwwB,EAAAA,QAAQ,CAACjvB,MAAT,GAAkB,KAAKA,MAAvB;AACAivB,EAAAA,QAAQ,CAAChzB,EAAT,CAAYjX,GAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB;AACAiqC,EAAAA,QAAQ,CAAClzB,MAAT,CAAiB,IAAIhF,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,OAAK5oB,GAAL,CAAU8gD,QAAV;AAEA,QAAMC,QAAQ,GAAG,IAAI/B,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAjB;AACAywB,EAAAA,QAAQ,CAAClvB,MAAT,GAAkB,KAAKA,MAAvB;AACAkvB,EAAAA,QAAQ,CAACjzB,EAAT,CAAYjX,GAAZ,CAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAE,CAAzB;AACAkqC,EAAAA,QAAQ,CAACnzB,MAAT,CAAiB,IAAIhF,OAAJ,CAAa,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAArB,CAAjB;AACA,OAAK5oB,GAAL,CAAU+gD,QAAV;AAEA,QAAMC,QAAQ,GAAG,IAAIhC,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAjB;AACA0wB,EAAAA,QAAQ,CAACnvB,MAAT,GAAkB,KAAKA,MAAvB;AACAmvB,EAAAA,QAAQ,CAAClzB,EAAT,CAAYjX,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAmqC,EAAAA,QAAQ,CAACpzB,MAAT,CAAiB,IAAIhF,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,OAAK5oB,GAAL,CAAUghD,QAAV;AAEA,QAAMC,QAAQ,GAAG,IAAIjC,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAjB;AACA2wB,EAAAA,QAAQ,CAACpvB,MAAT,GAAkB,KAAKA,MAAvB;AACAovB,EAAAA,QAAQ,CAACnzB,EAAT,CAAYjX,GAAZ,CAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,CAAzB;AACAoqC,EAAAA,QAAQ,CAACrzB,MAAT,CAAiB,IAAIhF,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAAjB;AACA,OAAK5oB,GAAL,CAAUihD,QAAV;;AAEA,OAAKz6B,MAAL,GAAc,UAAW06B,QAAX,EAAqBC,KAArB,EAA6B;AAE1C,QAAK,KAAKrkD,MAAL,KAAgB,IAArB,EAA4B,KAAK44B,iBAAL;AAE5B,UAAM0rB,gBAAgB,GAAGF,QAAQ,CAACG,EAAT,CAAYvF,OAArC;AACA,UAAMwF,mBAAmB,GAAGJ,QAAQ,CAACK,eAAT,EAA5B;AAEAL,IAAAA,QAAQ,CAACG,EAAT,CAAYvF,OAAZ,GAAsB,KAAtB;AAEA,UAAMp7B,eAAe,GAAGggC,YAAY,CAAC58B,OAAb,CAAqBpD,eAA7C;AAEAggC,IAAAA,YAAY,CAAC58B,OAAb,CAAqBpD,eAArB,GAAuC,KAAvC;AAEAwgC,IAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwC,CAAxC;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBP,QAAxB;AAEAM,IAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwC,CAAxC;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBN,QAAxB;AAEAK,IAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwC,CAAxC;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBL,QAAxB;AAEAI,IAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwC,CAAxC;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBJ,QAAxB;AAEAG,IAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwC,CAAxC;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBH,QAAxB;AAEAN,IAAAA,YAAY,CAAC58B,OAAb,CAAqBpD,eAArB,GAAuCA,eAAvC;AAEAwgC,IAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwC,CAAxC;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBF,QAAxB;AAEAC,IAAAA,QAAQ,CAACM,eAAT,CAA0BF,mBAA1B;AAEAJ,IAAAA,QAAQ,CAACG,EAAT,CAAYvF,OAAZ,GAAsBsF,gBAAtB;AAEA,GArCD;;AAuCA,OAAKM,KAAL,GAAa,UAAWR,QAAX,EAAqBp7D,KAArB,EAA4Bq2D,KAA5B,EAAmCwF,OAAnC,EAA6C;AAEzD,UAAML,mBAAmB,GAAGJ,QAAQ,CAACK,eAAT,EAA5B;;AAEA,SAAM,IAAIl5D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B64D,MAAAA,QAAQ,CAACM,eAAT,CAA0Bd,YAA1B,EAAwCr4D,CAAxC;AAEA64D,MAAAA,QAAQ,CAACQ,KAAT,CAAgB57D,KAAhB,EAAuBq2D,KAAvB,EAA8BwF,OAA9B;AAEA;;AAEDT,IAAAA,QAAQ,CAACM,eAAT,CAA0BF,mBAA1B;AAEA,GAdD;AAgBA;;AAEDb,UAAU,CAACt5D,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAvB;AACAs5D,UAAU,CAACt5D,SAAX,CAAqBoC,WAArB,GAAmCk3D,UAAnC;AAEA;;;;;AAKA,SAASmB,qBAAT,CAAgC3nB,IAAhC,EAAsC5mC,OAAtC,EAA+CwuD,KAA/C,EAAuD;AAEtD,MAAKj8C,MAAM,CAACE,SAAP,CAAkBzS,OAAlB,CAAL,EAAmC;AAElCyjB,IAAAA,OAAO,CAACC,IAAR,CAAc,kGAAd;AAEA1jB,IAAAA,OAAO,GAAGwuD,KAAV;AAEA;;AAEDn+B,EAAAA,iBAAiB,CAACh8B,IAAlB,CAAwB,IAAxB,EAA8BuyC,IAA9B,EAAoCA,IAApC,EAA0C5mC,OAA1C;AAEA;;AAEDuuD,qBAAqB,CAACz6D,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAe0C,iBAAiB,CAACv8B,SAAjC,CAAlC;AACAy6D,qBAAqB,CAACz6D,SAAtB,CAAgCoC,WAAhC,GAA8Cq4D,qBAA9C;AAEAA,qBAAqB,CAACz6D,SAAtB,CAAgCw5D,uBAAhC,GAA0D,IAA1D;;AAEAiB,qBAAqB,CAACz6D,SAAtB,CAAgC26D,0BAAhC,GAA6D,UAAWZ,QAAX,EAAqBp9B,OAArB,EAA+B;AAE3F,OAAKA,OAAL,CAAatxB,IAAb,GAAoBsxB,OAAO,CAACtxB,IAA5B;AACA,OAAKsxB,OAAL,CAAa7D,MAAb,GAAsB6D,OAAO,CAAC7D,MAA9B;AACA,OAAK6D,OAAL,CAAa3D,QAAb,GAAwB2D,OAAO,CAAC3D,QAAhC;AAEA,QAAMghC,KAAK,GAAG,IAAIzpB,KAAJ,EAAd;AAEA,QAAMqqB,MAAM,GAAG;AAEdrE,IAAAA,QAAQ,EAAE;AACTsE,MAAAA,SAAS,EAAE;AAAEv2D,QAAAA,KAAK,EAAE;AAAT;AADF,KAFI;AAMdwyD,IAAAA,YAAY,EAAE,CAEb,+BAFa,EAIb,0DAJa,EAMb,yDANa,EAQb,GARa,EAUb,eAVa,EAYb,iEAZa,EAcb,0BAda,EAeb,4BAfa,EAiBb,GAjBa,EAmBZxsD,IAnBY,CAmBN,IAnBM,CANA;AA2BdysD,IAAAA,cAAc,EAAE,CAEf,8BAFe,EAIf,+BAJe,EAMf,mBANe,EAQf,eARe,EAUf,iDAVe,EAYf,2CAZe,EAcf,mDAde,EAgBf,GAhBe,EAkBdzsD,IAlBc,CAkBR,IAlBQ;AA3BF,GAAf;AAgDA,QAAM0lC,QAAQ,GAAG,IAAI4mB,cAAJ,CAAoB;AAEpCpgD,IAAAA,IAAI,EAAE,qBAF8B;AAIpC+/C,IAAAA,QAAQ,EAAEF,aAAa,CAAEuE,MAAM,CAACrE,QAAT,CAJa;AAKpCO,IAAAA,YAAY,EAAE8D,MAAM,CAAC9D,YALe;AAMpCC,IAAAA,cAAc,EAAE6D,MAAM,CAAC7D,cANa;AAOpCtX,IAAAA,IAAI,EAAE9+B,QAP8B;AAQpC6+B,IAAAA,QAAQ,EAAEz+B;AAR0B,GAApB,CAAjB;AAYAivB,EAAAA,QAAQ,CAACumB,QAAT,CAAkBsE,SAAlB,CAA4Bv2D,KAA5B,GAAoCq4B,OAApC;AAEA,QAAMm2B,IAAI,GAAG,IAAI5D,IAAJ,CAAU,IAAIkG,iBAAJ,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAAV,EAA4CplB,QAA5C,CAAb;AAEAgqB,EAAAA,KAAK,CAACnhD,GAAN,CAAWi6C,IAAX;AAEA,QAAMpwB,MAAM,GAAG,IAAI42B,UAAJ,CAAgB,CAAhB,EAAmB,EAAnB,EAAuB,IAAvB,CAAf;AACA52B,EAAAA,MAAM,CAACrD,MAAP,CAAe06B,QAAf,EAAyBC,KAAzB;AAEAlH,EAAAA,IAAI,CAACjjB,QAAL,CAAcrV,OAAd;AACAs4B,EAAAA,IAAI,CAAC9iB,QAAL,CAAcxV,OAAd;AAEA,SAAO,IAAP;AAEA,CAlFD;AAoFA;;;;;AAIA,SAASsgC,WAAT,CAAsBzqB,IAAtB,EAA4BxlC,KAA5B,EAAmCC,MAAnC,EAA2CguB,MAA3C,EAAmDztB,IAAnD,EAAyDotB,OAAzD,EAAkEC,KAAlE,EAAyEC,KAAzE,EAAgFC,SAAhF,EAA2FC,SAA3F,EAAsGE,UAAtG,EAAkHC,QAAlH,EAA6H;AAE5HR,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoB,IAApB,EAA0Bk4B,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4DC,SAA5D,EAAuEC,MAAvE,EAA+EztB,IAA/E,EAAqF0tB,UAArF,EAAiGC,QAAjG;AAEA,OAAKpB,KAAL,GAAa;AAAEyY,IAAAA,IAAI,EAAEA,IAAI,IAAI,IAAhB;AAAsBxlC,IAAAA,KAAK,EAAEA,KAAK,IAAI,CAAtC;AAAyCC,IAAAA,MAAM,EAAEA,MAAM,IAAI;AAA3D,GAAb;AAEA,OAAK8tB,SAAL,GAAiBA,SAAS,KAAK32B,SAAd,GAA0B22B,SAA1B,GAAsC5U,aAAvD;AACA,OAAK6U,SAAL,GAAiBA,SAAS,KAAK52B,SAAd,GAA0B42B,SAA1B,GAAsC7U,aAAvD;AAEA,OAAKuV,eAAL,GAAuB,KAAvB;AACA,OAAKE,KAAL,GAAa,KAAb;AACA,OAAKC,eAAL,GAAuB,CAAvB;AAEA,OAAKuxB,WAAL,GAAmB,IAAnB;AAEA;;AAED6P,WAAW,CAAC96D,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAAxB;AACA86D,WAAW,CAAC96D,SAAZ,CAAsBoC,WAAtB,GAAoC04D,WAApC;AAEAA,WAAW,CAAC96D,SAAZ,CAAsB+6D,aAAtB,GAAsC,IAAtC;AAEA;;;;;;AAMA,MAAMC,SAAS,GAAG,IAAI5lB,MAAJ,EAAlB;;AACA,MAAM6lB,SAAS,GAAG,IAAIx5B,OAAJ,EAAlB;;AAEA,SAASy5B,OAAT,CAAkBlmB,EAAlB,EAAsBC,EAAtB,EAA0BC,EAA1B,EAA8BuG,EAA9B,EAAkC0f,EAAlC,EAAsCC,EAAtC,EAA2C;AAE1C,OAAKC,MAAL,GAAc,CAEXrmB,EAAE,KAAK/yC,SAAT,GAAuB+yC,EAAvB,GAA4B,IAAIgE,KAAJ,EAFf,EAGX/D,EAAE,KAAKhzC,SAAT,GAAuBgzC,EAAvB,GAA4B,IAAI+D,KAAJ,EAHf,EAIX9D,EAAE,KAAKjzC,SAAT,GAAuBizC,EAAvB,GAA4B,IAAI8D,KAAJ,EAJf,EAKXyC,EAAE,KAAKx5C,SAAT,GAAuBw5C,EAAvB,GAA4B,IAAIzC,KAAJ,EALf,EAMXmiB,EAAE,KAAKl5D,SAAT,GAAuBk5D,EAAvB,GAA4B,IAAIniB,KAAJ,EANf,EAOXoiB,EAAE,KAAKn5D,SAAT,GAAuBm5D,EAAvB,GAA4B,IAAIpiB,KAAJ,EAPf,CAAd;AAWA;;AAEDp4C,MAAM,CAACme,MAAP,CAAem8C,OAAO,CAACl7D,SAAvB,EAAkC;AAEjC0vB,EAAAA,GAAG,EAAE,UAAWslB,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBuG,EAAvB,EAA2B0f,EAA3B,EAA+BC,EAA/B,EAAoC;AAExC,UAAMC,MAAM,GAAG,KAAKA,MAApB;AAEAA,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAY/qC,IAAZ,CAAkB0kB,EAAlB;AACAqmB,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAY/qC,IAAZ,CAAkB2kB,EAAlB;AACAomB,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAY/qC,IAAZ,CAAkB4kB,EAAlB;AACAmmB,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAY/qC,IAAZ,CAAkBmrB,EAAlB;AACA4f,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAY/qC,IAAZ,CAAkB6qC,EAAlB;AACAE,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAY/qC,IAAZ,CAAkB8qC,EAAlB;AAEA,WAAO,IAAP;AAEA,GAfgC;AAiBjC/qC,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GArBgC;AAuBjCA,EAAAA,IAAI,EAAE,UAAWgrC,OAAX,EAAqB;AAE1B,UAAMD,MAAM,GAAG,KAAKA,MAApB;;AAEA,SAAM,IAAIn6D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9Bm6D,MAAAA,MAAM,CAAEn6D,CAAF,CAAN,CAAYovB,IAAZ,CAAkBgrC,OAAO,CAACD,MAAR,CAAgBn6D,CAAhB,CAAlB;AAEA;;AAED,WAAO,IAAP;AAEA,GAnCgC;AAqCjCq6D,EAAAA,uBAAuB,EAAE,UAAWjuC,CAAX,EAAe;AAEvC,UAAM+tC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMpnC,EAAE,GAAG3G,CAAC,CAAC4D,QAAb;AACA,UAAMsqC,GAAG,GAAGvnC,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBwnC,GAAG,GAAGxnC,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCynC,GAAG,GAAGznC,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmD0nC,GAAG,GAAG1nC,EAAE,CAAE,CAAF,CAA3D;AACA,UAAM2nC,GAAG,GAAG3nC,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqB4nC,GAAG,GAAG5nC,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoC6nC,GAAG,GAAG7nC,EAAE,CAAE,CAAF,CAA5C;AAAA,UAAmD8nC,GAAG,GAAG9nC,EAAE,CAAE,CAAF,CAA3D;AACA,UAAM+nC,GAAG,GAAG/nC,EAAE,CAAE,CAAF,CAAd;AAAA,UAAqBgoC,GAAG,GAAGhoC,EAAE,CAAE,CAAF,CAA7B;AAAA,UAAoCioC,IAAI,GAAGjoC,EAAE,CAAE,EAAF,CAA7C;AAAA,UAAqDkoC,IAAI,GAAGloC,EAAE,CAAE,EAAF,CAA9D;AACA,UAAMmoC,IAAI,GAAGnoC,EAAE,CAAE,EAAF,CAAf;AAAA,UAAuBooC,IAAI,GAAGpoC,EAAE,CAAE,EAAF,CAAhC;AAAA,UAAwCqoC,IAAI,GAAGroC,EAAE,CAAE,EAAF,CAAjD;AAAA,UAAyDsoC,IAAI,GAAGtoC,EAAE,CAAE,EAAF,CAAlE;AAEAonC,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAYniB,aAAZ,CAA2ByiB,GAAG,GAAGH,GAAjC,EAAsCO,GAAG,GAAGH,GAA5C,EAAiDO,IAAI,GAAGH,GAAxD,EAA6DO,IAAI,GAAGH,IAApE,EAA2EtqC,SAA3E;AACAupC,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAYniB,aAAZ,CAA2ByiB,GAAG,GAAGH,GAAjC,EAAsCO,GAAG,GAAGH,GAA5C,EAAiDO,IAAI,GAAGH,GAAxD,EAA6DO,IAAI,GAAGH,IAApE,EAA2EtqC,SAA3E;AACAupC,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAYniB,aAAZ,CAA2ByiB,GAAG,GAAGF,GAAjC,EAAsCM,GAAG,GAAGF,GAA5C,EAAiDM,IAAI,GAAGF,GAAxD,EAA6DM,IAAI,GAAGF,IAApE,EAA2EvqC,SAA3E;AACAupC,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAYniB,aAAZ,CAA2ByiB,GAAG,GAAGF,GAAjC,EAAsCM,GAAG,GAAGF,GAA5C,EAAiDM,IAAI,GAAGF,GAAxD,EAA6DM,IAAI,GAAGF,IAApE,EAA2EvqC,SAA3E;AACAupC,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAYniB,aAAZ,CAA2ByiB,GAAG,GAAGD,GAAjC,EAAsCK,GAAG,GAAGD,GAA5C,EAAiDK,IAAI,GAAGD,IAAxD,EAA8DK,IAAI,GAAGD,IAArE,EAA4ExqC,SAA5E;AACAupC,IAAAA,MAAM,CAAE,CAAF,CAAN,CAAYniB,aAAZ,CAA2ByiB,GAAG,GAAGD,GAAjC,EAAsCK,GAAG,GAAGD,GAA5C,EAAiDK,IAAI,GAAGD,IAAxD,EAA8DK,IAAI,GAAGD,IAArE,EAA4ExqC,SAA5E;AAEA,WAAO,IAAP;AAEA,GAvDgC;AAyDjC0qC,EAAAA,gBAAgB,EAAE,UAAW72D,MAAX,EAAoB;AAErC,UAAMkqC,QAAQ,GAAGlqC,MAAM,CAACkqC,QAAxB;AAEA,QAAKA,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwCxY,QAAQ,CAACsb,qBAAT;;AAExC6P,IAAAA,SAAS,CAAC1qC,IAAV,CAAgBuf,QAAQ,CAACwY,cAAzB,EAA0CrtB,YAA1C,CAAwDr1B,MAAM,CAACo9B,WAA/D;;AAEA,WAAO,KAAKgR,gBAAL,CAAuBinB,SAAvB,CAAP;AAEA,GAnEgC;AAqEjCyB,EAAAA,gBAAgB,EAAE,UAAWC,MAAX,EAAoB;AAErC1B,IAAAA,SAAS,CAAC9nC,MAAV,CAAiBxD,GAAjB,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;;AACAsrC,IAAAA,SAAS,CAAC/2B,MAAV,GAAmB,kBAAnB;;AACA+2B,IAAAA,SAAS,CAAChgC,YAAV,CAAwB0hC,MAAM,CAAC35B,WAA/B;;AAEA,WAAO,KAAKgR,gBAAL,CAAuBinB,SAAvB,CAAP;AAEA,GA7EgC;AA+EjCjnB,EAAAA,gBAAgB,EAAE,UAAWC,MAAX,EAAoB;AAErC,UAAMqnB,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMnoC,MAAM,GAAG8gB,MAAM,CAAC9gB,MAAtB;AACA,UAAMypC,SAAS,GAAG,CAAE3oB,MAAM,CAAC/P,MAA3B;;AAEA,SAAM,IAAI/iC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,YAAMosC,QAAQ,GAAG+tB,MAAM,CAAEn6D,CAAF,CAAN,CAAYuzC,eAAZ,CAA6BvhB,MAA7B,CAAjB;;AAEA,UAAKoa,QAAQ,GAAGqvB,SAAhB,EAA4B;AAE3B,eAAO,KAAP;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAnGgC;AAqGjC7oB,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B,UAAMsgD,MAAM,GAAG,KAAKA,MAApB;;AAEA,SAAM,IAAIn6D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,YAAMizC,KAAK,GAAGknB,MAAM,CAAEn6D,CAAF,CAApB,CAF8B,CAI9B;;AAEA+5D,MAAAA,SAAS,CAAC1yD,CAAV,GAAc4rC,KAAK,CAACtQ,MAAN,CAAat7B,CAAb,GAAiB,CAAjB,GAAqBwS,GAAG,CAAC9W,GAAJ,CAAQsE,CAA7B,GAAiCwS,GAAG,CAAC/W,GAAJ,CAAQuE,CAAvD;AACA0yD,MAAAA,SAAS,CAACxyD,CAAV,GAAc0rC,KAAK,CAACtQ,MAAN,CAAap7B,CAAb,GAAiB,CAAjB,GAAqBsS,GAAG,CAAC9W,GAAJ,CAAQwE,CAA7B,GAAiCsS,GAAG,CAAC/W,GAAJ,CAAQyE,CAAvD;AACAwyD,MAAAA,SAAS,CAACrgC,CAAV,GAAcuZ,KAAK,CAACtQ,MAAN,CAAajJ,CAAb,GAAiB,CAAjB,GAAqB7f,GAAG,CAAC9W,GAAJ,CAAQ22B,CAA7B,GAAiC7f,GAAG,CAAC/W,GAAJ,CAAQ42B,CAAvD;;AAEA,UAAKuZ,KAAK,CAACM,eAAN,CAAuBwmB,SAAvB,IAAqC,CAA1C,EAA8C;AAE7C,eAAO,KAAP;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GA7HgC;AA+HjCtnB,EAAAA,aAAa,EAAE,UAAWN,KAAX,EAAmB;AAEjC,UAAMgoB,MAAM,GAAG,KAAKA,MAApB;;AAEA,SAAM,IAAIn6D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,UAAKm6D,MAAM,CAAEn6D,CAAF,CAAN,CAAYuzC,eAAZ,CAA6BpB,KAA7B,IAAuC,CAA5C,EAAgD;AAE/C,eAAO,KAAP;AAEA;AAED;;AAED,WAAO,IAAP;AAEA;AA/IgC,CAAlC;AAmJA;;;;AAIA,MAAMupB,WAAW,GAAG;AAEnBr6D,EAAAA,MAAM,EAAE;AAEPs6D,IAAAA,OAAO,EAAE;AAAEv4D,MAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,KAFF;AAGPqP,IAAAA,OAAO,EAAE;AAAEtP,MAAAA,KAAK,EAAE;AAAT,KAHF;AAKP8H,IAAAA,GAAG,EAAE;AAAE9H,MAAAA,KAAK,EAAE;AAAT,KALE;AAMPw4D,IAAAA,WAAW,EAAE;AAAEx4D,MAAAA,KAAK,EAAE,IAAI6uB,OAAJ;AAAT,KANN;AAOP4pC,IAAAA,YAAY,EAAE;AAAEz4D,MAAAA,KAAK,EAAE,IAAI6uB,OAAJ;AAAT,KAPP;AASP2vB,IAAAA,QAAQ,EAAE;AAAEx+C,MAAAA,KAAK,EAAE;AAAT;AATH,GAFW;AAenB04D,EAAAA,WAAW,EAAE;AAEZnZ,IAAAA,WAAW,EAAE;AAAEv/C,MAAAA,KAAK,EAAE;AAAT;AAFD,GAfM;AAqBnB24D,EAAAA,MAAM,EAAE;AAEPnZ,IAAAA,MAAM,EAAE;AAAEx/C,MAAAA,KAAK,EAAE;AAAT,KAFD;AAGP44D,IAAAA,UAAU,EAAE;AAAE54D,MAAAA,KAAK,EAAE,CAAE;AAAX,KAHL;AAIPy/C,IAAAA,YAAY,EAAE;AAAEz/C,MAAAA,KAAK,EAAE;AAAT,KAJP;AAKP0/C,IAAAA,eAAe,EAAE;AAAE1/C,MAAAA,KAAK,EAAE;AAAT,KALV;AAMP64D,IAAAA,WAAW,EAAE;AAAE74D,MAAAA,KAAK,EAAE;AAAT;AANN,GArBW;AA+BnB84D,EAAAA,KAAK,EAAE;AAENpa,IAAAA,KAAK,EAAE;AAAE1+C,MAAAA,KAAK,EAAE;AAAT,KAFD;AAGN2+C,IAAAA,cAAc,EAAE;AAAE3+C,MAAAA,KAAK,EAAE;AAAT;AAHV,GA/BY;AAsCnB+4D,EAAAA,QAAQ,EAAE;AAETta,IAAAA,QAAQ,EAAE;AAAEz+C,MAAAA,KAAK,EAAE;AAAT,KAFD;AAGT4gD,IAAAA,iBAAiB,EAAE;AAAE5gD,MAAAA,KAAK,EAAE;AAAT;AAHV,GAtCS;AA6CnBg5D,EAAAA,WAAW,EAAE;AAEZ1Z,IAAAA,WAAW,EAAE;AAAEt/C,MAAAA,KAAK,EAAE;AAAT;AAFD,GA7CM;AAmDnBi5D,EAAAA,OAAO,EAAE;AAERra,IAAAA,OAAO,EAAE;AAAE5+C,MAAAA,KAAK,EAAE;AAAT,KAFD;AAGR6+C,IAAAA,SAAS,EAAE;AAAE7+C,MAAAA,KAAK,EAAE;AAAT;AAHH,GAnDU;AA0DnBk5D,EAAAA,SAAS,EAAE;AAEVpa,IAAAA,SAAS,EAAE;AAAE9+C,MAAAA,KAAK,EAAE;AAAT,KAFD;AAGVg/C,IAAAA,WAAW,EAAE;AAAEh/C,MAAAA,KAAK,EAAE,IAAIurB,OAAJ,CAAa,CAAb,EAAgB,CAAhB;AAAT;AAHH,GA1DQ;AAiEnB4tC,EAAAA,eAAe,EAAE;AAEhBla,IAAAA,eAAe,EAAE;AAAEj/C,MAAAA,KAAK,EAAE;AAAT,KAFD;AAGhBk/C,IAAAA,iBAAiB,EAAE;AAAEl/C,MAAAA,KAAK,EAAE;AAAT,KAHH;AAIhBm/C,IAAAA,gBAAgB,EAAE;AAAEn/C,MAAAA,KAAK,EAAE;AAAT;AAJF,GAjEE;AAyEnBo5D,EAAAA,YAAY,EAAE;AAEbha,IAAAA,YAAY,EAAE;AAAEp/C,MAAAA,KAAK,EAAE;AAAT;AAFD,GAzEK;AA+EnBq5D,EAAAA,YAAY,EAAE;AAEbha,IAAAA,YAAY,EAAE;AAAEr/C,MAAAA,KAAK,EAAE;AAAT;AAFD,GA/EK;AAqFnBs5D,EAAAA,WAAW,EAAE;AAEZzZ,IAAAA,WAAW,EAAE;AAAE7/C,MAAAA,KAAK,EAAE;AAAT;AAFD,GArFM;AA2FnBmsC,EAAAA,GAAG,EAAE;AAEJotB,IAAAA,UAAU,EAAE;AAAEv5D,MAAAA,KAAK,EAAE;AAAT,KAFR;AAGJw5D,IAAAA,OAAO,EAAE;AAAEx5D,MAAAA,KAAK,EAAE;AAAT,KAHL;AAIJy5D,IAAAA,MAAM,EAAE;AAAEz5D,MAAAA,KAAK,EAAE;AAAT,KAJJ;AAKJ05D,IAAAA,QAAQ,EAAE;AAAE15D,MAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT;AALN,GA3Fc;AAoGnByyD,EAAAA,MAAM,EAAE;AAEPiH,IAAAA,iBAAiB,EAAE;AAAE35D,MAAAA,KAAK,EAAE;AAAT,KAFZ;AAIP45D,IAAAA,UAAU,EAAE;AAAE55D,MAAAA,KAAK,EAAE;AAAT,KAJL;AAMP65D,IAAAA,iBAAiB,EAAE;AAAE75D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AAC3CjoB,QAAAA,SAAS,EAAE,EADgC;AAE3Cx3C,QAAAA,KAAK,EAAE;AAFoC;AAAzB,KANZ;AAWP0/D,IAAAA,uBAAuB,EAAE;AAAE/5D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AACjDE,QAAAA,UAAU,EAAE,EADqC;AAEjDC,QAAAA,gBAAgB,EAAE,EAF+B;AAGjDC,QAAAA,YAAY,EAAE,EAHmC;AAIjDC,QAAAA,aAAa,EAAE;AAJkC;AAAzB,KAXlB;AAkBPC,IAAAA,oBAAoB,EAAE;AAAEp6D,MAAAA,KAAK,EAAE;AAAT,KAlBf;AAmBPq6D,IAAAA,uBAAuB,EAAE;AAAEr6D,MAAAA,KAAK,EAAE;AAAT,KAnBlB;AAqBPs6D,IAAAA,UAAU,EAAE;AAAEt6D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AACpCz/D,QAAAA,KAAK,EAAE,EAD6B;AAEpC+I,QAAAA,QAAQ,EAAE,EAF0B;AAGpCyuC,QAAAA,SAAS,EAAE,EAHyB;AAIpC7I,QAAAA,QAAQ,EAAE,EAJ0B;AAKpCuxB,QAAAA,OAAO,EAAE,EAL2B;AAMpCC,QAAAA,WAAW,EAAE,EANuB;AAOpCC,QAAAA,KAAK,EAAE;AAP6B;AAAzB,KArBL;AA+BPC,IAAAA,gBAAgB,EAAE;AAAE16D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AAC1CE,QAAAA,UAAU,EAAE,EAD8B;AAE1CC,QAAAA,gBAAgB,EAAE,EAFwB;AAG1CC,QAAAA,YAAY,EAAE,EAH4B;AAI1CC,QAAAA,aAAa,EAAE;AAJ2B;AAAzB,KA/BX;AAsCPQ,IAAAA,aAAa,EAAE;AAAE36D,MAAAA,KAAK,EAAE;AAAT,KAtCR;AAuCP46D,IAAAA,gBAAgB,EAAE;AAAE56D,MAAAA,KAAK,EAAE;AAAT,KAvCX;AAyCP66D,IAAAA,WAAW,EAAE;AAAE76D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AACrCz/D,QAAAA,KAAK,EAAE,EAD8B;AAErC+I,QAAAA,QAAQ,EAAE,EAF2B;AAGrCq3D,QAAAA,KAAK,EAAE,EAH8B;AAIrCzxB,QAAAA,QAAQ,EAAE;AAJ2B;AAAzB,KAzCN;AAgDP8xB,IAAAA,iBAAiB,EAAE;AAAE96D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AAC3CE,QAAAA,UAAU,EAAE,EAD+B;AAE3CC,QAAAA,gBAAgB,EAAE,EAFyB;AAG3CC,QAAAA,YAAY,EAAE,EAH6B;AAI3CC,QAAAA,aAAa,EAAE,EAJ4B;AAK3CY,QAAAA,gBAAgB,EAAE,EALyB;AAM3CC,QAAAA,eAAe,EAAE;AAN0B;AAAzB,KAhDZ;AAyDPC,IAAAA,cAAc,EAAE;AAAEj7D,MAAAA,KAAK,EAAE;AAAT,KAzDT;AA0DPk7D,IAAAA,iBAAiB,EAAE;AAAEl7D,MAAAA,KAAK,EAAE;AAAT,KA1DZ;AA4DPm7D,IAAAA,gBAAgB,EAAE;AAAEn7D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AAC1CjoB,QAAAA,SAAS,EAAE,EAD+B;AAE1CupB,QAAAA,QAAQ,EAAE,EAFgC;AAG1CC,QAAAA,WAAW,EAAE;AAH6B;AAAzB,KA5DX;AAkEP;AACAC,IAAAA,cAAc,EAAE;AAAEt7D,MAAAA,KAAK,EAAE,EAAT;AAAa85D,MAAAA,UAAU,EAAE;AACxCz/D,QAAAA,KAAK,EAAE,EADiC;AAExC+I,QAAAA,QAAQ,EAAE,EAF8B;AAGxCmD,QAAAA,KAAK,EAAE,EAHiC;AAIxCC,QAAAA,MAAM,EAAE;AAJgC;AAAzB;AAnET,GApGW;AAgLnB2nC,EAAAA,MAAM,EAAE;AAEPoqB,IAAAA,OAAO,EAAE;AAAEv4D,MAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,KAFF;AAGPqP,IAAAA,OAAO,EAAE;AAAEtP,MAAAA,KAAK,EAAE;AAAT,KAHF;AAIPwuC,IAAAA,IAAI,EAAE;AAAExuC,MAAAA,KAAK,EAAE;AAAT,KAJC;AAKP+yB,IAAAA,KAAK,EAAE;AAAE/yB,MAAAA,KAAK,EAAE;AAAT,KALA;AAMP8H,IAAAA,GAAG,EAAE;AAAE9H,MAAAA,KAAK,EAAE;AAAT,KANE;AAOPw+C,IAAAA,QAAQ,EAAE;AAAEx+C,MAAAA,KAAK,EAAE;AAAT,KAPH;AAQPw4D,IAAAA,WAAW,EAAE;AAAEx4D,MAAAA,KAAK,EAAE,IAAI6uB,OAAJ;AAAT;AARN,GAhLW;AA4LnBupC,EAAAA,MAAM,EAAE;AAEPG,IAAAA,OAAO,EAAE;AAAEv4D,MAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,KAFF;AAGPqP,IAAAA,OAAO,EAAE;AAAEtP,MAAAA,KAAK,EAAE;AAAT,KAHF;AAIP4uB,IAAAA,MAAM,EAAE;AAAE5uB,MAAAA,KAAK,EAAE,IAAIurB,OAAJ,CAAa,GAAb,EAAkB,GAAlB;AAAT,KAJD;AAKPqH,IAAAA,QAAQ,EAAE;AAAE5yB,MAAAA,KAAK,EAAE;AAAT,KALH;AAMP8H,IAAAA,GAAG,EAAE;AAAE9H,MAAAA,KAAK,EAAE;AAAT,KANE;AAOPw+C,IAAAA,QAAQ,EAAE;AAAEx+C,MAAAA,KAAK,EAAE;AAAT,KAPH;AAQPw4D,IAAAA,WAAW,EAAE;AAAEx4D,MAAAA,KAAK,EAAE,IAAI6uB,OAAJ;AAAT;AARN;AA5LW,CAApB;AA0MA;;;;;;AAIA,SAAS0sC,cAAT,GAA0B;AAEzB,MAAI5nC,OAAO,GAAG,IAAd;AACA,MAAI6nC,WAAW,GAAG,KAAlB;AACA,MAAIC,aAAa,GAAG,IAApB;AACA,MAAIC,SAAS,GAAG,IAAhB;;AAEA,WAASC,gBAAT,CAA2BC,IAA3B,EAAiCC,KAAjC,EAAyC;AAExCJ,IAAAA,aAAa,CAAEG,IAAF,EAAQC,KAAR,CAAb;AAEAH,IAAAA,SAAS,GAAG/nC,OAAO,CAACjlB,qBAAR,CAA+BitD,gBAA/B,CAAZ;AAEA;;AAED,SAAO;AAENvmB,IAAAA,KAAK,EAAE,YAAY;AAElB,UAAKomB,WAAW,KAAK,IAArB,EAA4B;AAC5B,UAAKC,aAAa,KAAK,IAAvB,EAA8B;AAE9BC,MAAAA,SAAS,GAAG/nC,OAAO,CAACjlB,qBAAR,CAA+BitD,gBAA/B,CAAZ;AAEAH,MAAAA,WAAW,GAAG,IAAd;AAEA,KAXK;AAaNM,IAAAA,IAAI,EAAE,YAAY;AAEjBnoC,MAAAA,OAAO,CAACooC,oBAAR,CAA8BL,SAA9B;AAEAF,MAAAA,WAAW,GAAG,KAAd;AAEA,KAnBK;AAqBNQ,IAAAA,gBAAgB,EAAE,UAAWrtD,QAAX,EAAsB;AAEvC8sD,MAAAA,aAAa,GAAG9sD,QAAhB;AAEA,KAzBK;AA2BNstD,IAAAA,UAAU,EAAE,UAAWj8D,KAAX,EAAmB;AAE9B2zB,MAAAA,OAAO,GAAG3zB,KAAV;AAEA;AA/BK,GAAP;AAmCA;AAED;;;;;AAIA,SAASk8D,eAAT,CAA0BC,EAA1B,EAA8BC,YAA9B,EAA6C;AAE5C,QAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AAEA,QAAMC,OAAO,GAAG,IAAIC,OAAJ,EAAhB;;AAEA,WAASC,YAAT,CAAuBhuC,SAAvB,EAAkCiuC,UAAlC,EAA+C;AAE9C,UAAM10C,KAAK,GAAGyG,SAAS,CAACzG,KAAxB;AACA,UAAMm5B,KAAK,GAAG1yB,SAAS,CAAC0yB,KAAxB;AAEA,UAAMwb,MAAM,GAAGP,EAAE,CAACK,YAAH,EAAf;AAEAL,IAAAA,EAAE,CAACQ,UAAH,CAAeF,UAAf,EAA2BC,MAA3B;AACAP,IAAAA,EAAE,CAACS,UAAH,CAAeH,UAAf,EAA2B10C,KAA3B,EAAkCm5B,KAAlC;AAEA1yB,IAAAA,SAAS,CAAC6yB,gBAAV;AAEA,QAAIt6C,IAAI,GAAG,IAAX;;AAEA,QAAKghB,KAAK,YAAYq7B,YAAtB,EAAqC;AAEpCr8C,MAAAA,IAAI,GAAG,IAAP;AAEA,KAJD,MAIO,IAAKghB,KAAK,YAAYu7B,YAAtB,EAAqC;AAE3Cj4B,MAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd;AAEA,KAJM,MAIA,IAAKvD,KAAK,YAAY+6B,WAAtB,EAAoC;AAE1C/7C,MAAAA,IAAI,GAAG,IAAP;AAEA,KAJM,MAIA,IAAKghB,KAAK,YAAY66B,UAAtB,EAAmC;AAEzC77C,MAAAA,IAAI,GAAG,IAAP;AAEA,KAJM,MAIA,IAAKghB,KAAK,YAAYm7B,WAAtB,EAAoC;AAE1Cn8C,MAAAA,IAAI,GAAG,IAAP;AAEA,KAJM,MAIA,IAAKghB,KAAK,YAAYi7B,UAAtB,EAAmC;AAEzCj8C,MAAAA,IAAI,GAAG,IAAP;AAEA,KAJM,MAIA,IAAKghB,KAAK,YAAYu6B,SAAtB,EAAkC;AAExCv7C,MAAAA,IAAI,GAAG,IAAP;AAEA,KAJM,MAIA,IAAKghB,KAAK,YAAYy6B,UAAtB,EAAmC;AAEzCz7C,MAAAA,IAAI,GAAG,IAAP;AAEA;;AAED,WAAO;AACN21D,MAAAA,MAAM,EAAEA,MADF;AAEN31D,MAAAA,IAAI,EAAEA,IAFA;AAGN81D,MAAAA,eAAe,EAAE90C,KAAK,CAAC+0C,iBAHjB;AAINznC,MAAAA,OAAO,EAAE7G,SAAS,CAAC6G;AAJb,KAAP;AAOA;;AAED,WAAS0nC,YAAT,CAAuBL,MAAvB,EAA+BluC,SAA/B,EAA0CiuC,UAA1C,EAAuD;AAEtD,UAAM10C,KAAK,GAAGyG,SAAS,CAACzG,KAAxB;AACA,UAAMo5B,WAAW,GAAG3yB,SAAS,CAAC2yB,WAA9B;AAEAgb,IAAAA,EAAE,CAACQ,UAAH,CAAeF,UAAf,EAA2BC,MAA3B;;AAEA,QAAKvb,WAAW,CAACnW,KAAZ,KAAsB,CAAE,CAA7B,EAAiC;AAEhC;AAEAmxB,MAAAA,EAAE,CAACa,aAAH,CAAkBP,UAAlB,EAA8B,CAA9B,EAAiC10C,KAAjC;AAEA,KAND,MAMO;AAEN,UAAKs0C,QAAL,EAAgB;AAEfF,QAAAA,EAAE,CAACa,aAAH,CAAkBP,UAAlB,EAA8Btb,WAAW,CAACz6C,MAAZ,GAAqBqhB,KAAK,CAAC+0C,iBAAzD,EACC/0C,KADD,EACQo5B,WAAW,CAACz6C,MADpB,EAC4By6C,WAAW,CAACnW,KADxC;AAGA,OALD,MAKO;AAENmxB,QAAAA,EAAE,CAACa,aAAH,CAAkBP,UAAlB,EAA8Btb,WAAW,CAACz6C,MAAZ,GAAqBqhB,KAAK,CAAC+0C,iBAAzD,EACC/0C,KAAK,CAACk1C,QAAN,CAAgB9b,WAAW,CAACz6C,MAA5B,EAAoCy6C,WAAW,CAACz6C,MAAZ,GAAqBy6C,WAAW,CAACnW,KAArE,CADD;AAGA;;AAEDmW,MAAAA,WAAW,CAACnW,KAAZ,GAAoB,CAAE,CAAtB,CAdM,CAcmB;AAEzB;AAED,GA9F2C,CAgG5C;;;AAEA,WAASxwB,GAAT,CAAcgU,SAAd,EAA0B;AAEzB,QAAKA,SAAS,CAAC0uC,4BAAf,EAA8C1uC,SAAS,GAAGA,SAAS,CAACud,IAAtB;AAE9C,WAAOuwB,OAAO,CAAC9hD,GAAR,CAAagU,SAAb,CAAP;AAEA;;AAED,WAASlY,MAAT,CAAiBkY,SAAjB,EAA6B;AAE5B,QAAKA,SAAS,CAAC0uC,4BAAf,EAA8C1uC,SAAS,GAAGA,SAAS,CAACud,IAAtB;AAE9C,UAAMA,IAAI,GAAGuwB,OAAO,CAAC9hD,GAAR,CAAagU,SAAb,CAAb;;AAEA,QAAKud,IAAL,EAAY;AAEXowB,MAAAA,EAAE,CAACgB,YAAH,CAAiBpxB,IAAI,CAAC2wB,MAAtB;AAEAJ,MAAAA,OAAO,CAACc,MAAR,CAAgB5uC,SAAhB;AAEA;AAED;;AAED,WAASuM,MAAT,CAAiBvM,SAAjB,EAA4BiuC,UAA5B,EAAyC;AAExC,QAAKjuC,SAAS,CAAC0uC,4BAAf,EAA8C1uC,SAAS,GAAGA,SAAS,CAACud,IAAtB;AAE9C,UAAMA,IAAI,GAAGuwB,OAAO,CAAC9hD,GAAR,CAAagU,SAAb,CAAb;;AAEA,QAAKud,IAAI,KAAKpuC,SAAd,EAA0B;AAEzB2+D,MAAAA,OAAO,CAAClxC,GAAR,CAAaoD,SAAb,EAAwBguC,YAAY,CAAEhuC,SAAF,EAAaiuC,UAAb,CAApC;AAEA,KAJD,MAIO,IAAK1wB,IAAI,CAAC1W,OAAL,GAAe7G,SAAS,CAAC6G,OAA9B,EAAwC;AAE9C0nC,MAAAA,YAAY,CAAEhxB,IAAI,CAAC2wB,MAAP,EAAeluC,SAAf,EAA0BiuC,UAA1B,CAAZ;AAEA1wB,MAAAA,IAAI,CAAC1W,OAAL,GAAe7G,SAAS,CAAC6G,OAAzB;AAEA;AAED;;AAED,SAAO;AAEN7a,IAAAA,GAAG,EAAEA,GAFC;AAGNlE,IAAAA,MAAM,EAAEA,MAHF;AAINykB,IAAAA,MAAM,EAAEA;AAJF,GAAP;AAQA;AAED;;;;AAKA;;;AAEA,SAASsiC,aAAT,CAAwB92D,KAAxB,EAA+BC,MAA/B,EAAuCmqD,aAAvC,EAAsDC,cAAtD,EAAuE;AAEtEnE,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,eAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBjlC,IAAAA,KAAK,EAAEA,KADU;AAEjBC,IAAAA,MAAM,EAAEA,MAFS;AAGjBmqD,IAAAA,aAAa,EAAEA,aAHE;AAIjBC,IAAAA,cAAc,EAAEA;AAJC,GAAlB;AAOA,OAAKjE,kBAAL,CAAyB,IAAI2Q,mBAAJ,CAAyB/2D,KAAzB,EAAgCC,MAAhC,EAAwCmqD,aAAxC,EAAuDC,cAAvD,CAAzB;AACA,OAAKnC,aAAL;AAEA;;AAED4O,aAAa,CAAC3hE,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA1B;AACA2hE,aAAa,CAAC3hE,SAAd,CAAwBoC,WAAxB,GAAsCu/D,aAAtC,EAEA;;AAEA,SAASC,mBAAT,CAA8B/2D,KAA9B,EAAqCC,MAArC,EAA6CmqD,aAA7C,EAA4DC,cAA5D,EAA6E;AAE5E9K,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBjlC,IAAAA,KAAK,EAAEA,KADU;AAEjBC,IAAAA,MAAM,EAAEA,MAFS;AAGjBmqD,IAAAA,aAAa,EAAEA,aAHE;AAIjBC,IAAAA,cAAc,EAAEA;AAJC,GAAlB;AAOArqD,EAAAA,KAAK,GAAGA,KAAK,IAAI,CAAjB;AACAC,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AAEA,QAAM+2D,UAAU,GAAGh3D,KAAK,GAAG,CAA3B;AACA,QAAMi3D,WAAW,GAAGh3D,MAAM,GAAG,CAA7B;AAEA,QAAM4qD,KAAK,GAAGx2D,IAAI,CAACwE,KAAL,CAAYuxD,aAAZ,KAA+B,CAA7C;AACA,QAAMU,KAAK,GAAGz2D,IAAI,CAACwE,KAAL,CAAYwxD,cAAZ,KAAgC,CAA9C;AAEA,QAAMe,MAAM,GAAGP,KAAK,GAAG,CAAvB;AACA,QAAMQ,MAAM,GAAGP,KAAK,GAAG,CAAvB;AAEA,QAAMoM,aAAa,GAAGl3D,KAAK,GAAG6qD,KAA9B;AACA,QAAMsM,cAAc,GAAGl3D,MAAM,GAAG6qD,KAAhC,CA1B4E,CA4B5E;;AAEA,QAAMlI,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CAjC4E,CAmC5E;;AAEA,OAAM,IAAI1lB,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG4zB,MAAvB,EAA+B5zB,EAAE,EAAjC,EAAuC;AAEtC,UAAM75B,CAAC,GAAG65B,EAAE,GAAG0/B,cAAL,GAAsBF,WAAhC;;AAEA,SAAM,IAAIz/B,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG4zB,MAAvB,EAA+B5zB,EAAE,EAAjC,EAAuC;AAEtC,YAAM95B,CAAC,GAAG85B,EAAE,GAAG0/B,aAAL,GAAqBF,UAA/B;AAEA/Z,MAAAA,QAAQ,CAACz9C,IAAT,CAAe9B,CAAf,EAAkB,CAAEE,CAApB,EAAuB,CAAvB;AAEAs/C,MAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AAEA29C,MAAAA,GAAG,CAAC39C,IAAJ,CAAUg4B,EAAE,GAAGqzB,KAAf;AACA1N,MAAAA,GAAG,CAAC39C,IAAJ,CAAU,IAAMi4B,EAAE,GAAGqzB,KAArB;AAEA;AAED,GAtD2E,CAwD5E;;;AAEA,OAAM,IAAIrzB,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAGqzB,KAAvB,EAA8BrzB,EAAE,EAAhC,EAAsC;AAErC,SAAM,IAAID,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAGqzB,KAAvB,EAA8BrzB,EAAE,EAAhC,EAAsC;AAErC,YAAM/iC,CAAC,GAAG+iC,EAAE,GAAG4zB,MAAM,GAAG3zB,EAAxB;AACA,YAAMjjC,CAAC,GAAGgjC,EAAE,GAAG4zB,MAAM,IAAK3zB,EAAE,GAAG,CAAV,CAArB;AACA,YAAMv+B,CAAC,GAAKs+B,EAAE,GAAG,CAAP,GAAa4zB,MAAM,IAAK3zB,EAAE,GAAG,CAAV,CAA7B;AACA,YAAMvM,CAAC,GAAKsM,EAAE,GAAG,CAAP,GAAa4zB,MAAM,GAAG3zB,EAAhC,CALqC,CAOrC;;AAEAmrB,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,MAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED,GA1E2E,CA4E5E;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAED4Z,mBAAmB,CAAC5hE,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAhC;AACA4hE,mBAAmB,CAAC5hE,SAApB,CAA8BoC,WAA9B,GAA4Cw/D,mBAA5C;AAEA,IAAIK,iBAAiB,GAAG,gFAAxB;AAEA,IAAIC,sBAAsB,GAAG,4DAA7B;AAEA,IAAIC,kBAAkB,GAAG,wEAAzB;AAEA,IAAIC,cAAc,GAAG,0aAArB;AAEA,IAAIC,mBAAmB,GAAG,uFAA1B;AAEA,IAAIC,YAAY,GAAG,sCAAnB;AAEA,IAAIC,kBAAkB,GAAG,8GAAzB;AAEA,IAAIC,KAAK,GAAG,8pPAAZ;AAEA,IAAIC,qBAAqB,GAAG,g9BAA5B;AAEA,IAAIC,wBAAwB,GAAG,4nBAA/B;AAEA,IAAIC,6BAA6B,GAAG,2HAApC;AAEA,IAAIC,2BAA2B,GAAG,oEAAlC;AAEA,IAAIC,sBAAsB,GAAG,0EAA7B;AAEA,IAAIC,cAAc,GAAG,yDAArB;AAEA,IAAIC,mBAAmB,GAAG,kDAA1B;AAEA,IAAIC,iBAAiB,GAAG,kDAAxB;AAEA,IAAIC,YAAY,GAAG,qDAAnB;AAEA,IAAI1gE,MAAM,GAAG,q0FAAb;AAEA,IAAI2gE,2BAA2B,GAAG,ygHAAlC;AAEA,IAAIC,oBAAoB,GAAG,0jBAA3B;AAEA,IAAIC,2BAA2B,GAAG,iJAAlC;AAEA,IAAIC,sBAAsB,GAAG,kKAA7B;AAEA,IAAIC,oBAAoB,GAAG,4MAA3B;AAEA,IAAIC,yBAAyB,GAAG,kEAAhC;AAEA,IAAIC,kBAAkB,GAAG,qDAAzB;AAEA,IAAIC,uBAAuB,GAAG,4uFAA9B;AAEA,IAAIC,eAAe,GAAG,4iDAAtB;AAEA,IAAIC,2BAA2B,GAAG,wOAAlC;AAEA,IAAIC,oBAAoB,GAAG,wTAA3B;AAEA,IAAIC,kBAAkB,GAAG,8RAAzB;AAEA,IAAIC,aAAa,GAAG,4oBAApB;AAEA,IAAIC,UAAU,GAAG,qDAAjB;AAEA,IAAIC,eAAe,GAAG,mDAAtB;AAEA,IAAIC,YAAY,GAAG,uRAAnB;AAEA,IAAIC,iBAAiB,GAAG,yMAAxB;AAEA,IAAIC,yBAAyB,GAAG,gYAAhC;AAEA,IAAIC,iBAAiB,GAAG,2LAAxB;AAEA,IAAIC,sBAAsB,GAAG,gGAA7B;AAEA,IAAIC,qBAAqB,GAAG,uwFAA5B;AAEA,IAAIC,iBAAiB,GAAG,szIAAxB;AAEA,IAAIC,6BAA6B,GAAG,8tFAApC;AAEA,IAAIC,oBAAoB,GAAG,mEAA3B;AAEA,IAAIC,yBAAyB,GAAG,u9BAAhC;AAEA,IAAIC,qBAAqB,GAAG,qMAA5B;AAEA,IAAIC,0BAA0B,GAAG,wxCAAjC;AAEA,IAAIC,wBAAwB,GAAG,u0CAA/B;AAEA,IAAIC,6BAA6B,GAAG,0jLAApC;AAEA,IAAIC,qBAAqB,GAAG,42HAA5B;AAEA,IAAIC,oBAAoB,GAAG,43BAA3B;AAEA,IAAIC,mBAAmB,GAAG,0QAA1B;AAEA,IAAIC,oBAAoB,GAAG,kLAA3B;AAEA,IAAIC,yBAAyB,GAAG,wKAAhC;AAEA,IAAIC,uBAAuB,GAAG,qLAA9B;AAEA,IAAIC,kBAAkB,GAAG,8XAAzB;AAEA,IAAIC,YAAY,GAAG,mJAAnB;AAEA,IAAIC,iBAAiB,GAAG,kDAAxB;AAEA,IAAIC,qBAAqB,GAAG,iVAA5B;AAEA,IAAIC,0BAA0B,GAAG,sMAAjC;AAEA,IAAIC,qBAAqB,GAAG,sKAA5B;AAEA,IAAIC,0BAA0B,GAAG,oEAAjC;AAEA,IAAIC,kBAAkB,GAAG,sUAAzB;AAEA,IAAIC,uBAAuB,GAAG,qNAA9B;AAEA,IAAIC,kBAAkB,GAAG,2lBAAzB;AAEA,IAAIC,qBAAqB,GAAG,43BAA5B;AAEA,IAAIC,oBAAoB,GAAG,4pBAA3B;AAEA,IAAIC,uBAAuB,GAAG,o6BAA9B;AAEA,IAAIC,+BAA+B,GAAG,oEAAtC;AAEA,IAAIC,8BAA8B,GAAG,mWAArC;AAEA,IAAIC,uBAAuB,GAAG,kRAA9B;AAEA,IAAIC,OAAO,GAAG,wjDAAd;AAEA,IAAIC,4BAA4B,GAAG,2EAAnC;AAEA,IAAIC,cAAc,GAAG,mNAArB;AAEA,IAAIC,kBAAkB,GAAG,+EAAzB;AAEA,IAAIC,uBAAuB,GAAG,0UAA9B;AAEA,IAAIC,qBAAqB,GAAG,sKAA5B;AAEA,IAAIC,0BAA0B,GAAG,oEAAjC;AAEA,IAAIC,uBAAuB,GAAG,06RAA9B;AAEA,IAAIC,qBAAqB,GAAG,kxCAA5B;AAEA,IAAIC,gBAAgB,GAAG,izCAAvB;AAEA,IAAIC,wBAAwB,GAAG,i5CAA/B;AAEA,IAAIC,eAAe,GAAG,iOAAtB;AAEA,IAAIC,oBAAoB,GAAG,+gCAA3B;AAEA,IAAIC,eAAe,GAAG,8XAAtB;AAEA,IAAIC,iBAAiB,GAAG,qdAAxB;AAEA,IAAIC,oBAAoB,GAAG,yLAA3B;AAEA,IAAIC,yBAAyB,GAAG,kEAAhC;AAEA,IAAIC,oBAAoB,GAAG,4FAA3B;AAEA,IAAIC,yBAAyB,GAAG,iyCAAhC;AAEA,IAAIC,gBAAgB,GAAG,wFAAvB;AAEA,IAAIC,cAAc,GAAG,uIAArB;AAEA,IAAIC,SAAS,GAAG,oEAAhB;AAEA,IAAIC,iBAAiB,GAAG,mFAAxB;AAEA,IAAIC,eAAe,GAAG,wIAAtB;AAEA,IAAIC,UAAU,GAAG,6GAAjB;AAEA,IAAIC,eAAe,GAAG,iRAAtB;AAEA,IAAIC,eAAe,GAAG,2NAAtB;AAEA,IAAIC,eAAe,GAAG,6JAAtB;AAEA,IAAIC,SAAS,GAAG,yVAAhB;AAEA,IAAIC,SAAS,GAAG,gOAAhB;AAEA,IAAIC,UAAU,GAAG,y1BAAjB;AAEA,IAAIC,UAAU,GAAG,uuBAAjB;AAEA,IAAIC,iBAAiB,GAAG,4rBAAxB;AAEA,IAAIC,iBAAiB,GAAG,itBAAxB;AAEA,IAAIC,aAAa,GAAG,yWAApB;AAEA,IAAIC,aAAa,GAAG,8LAApB;AAEA,IAAIC,eAAe,GAAG,kyBAAtB;AAEA,IAAIC,eAAe,GAAG,8hBAAtB;AAEA,IAAIC,cAAc,GAAG,+pDAArB;AAEA,IAAIC,cAAc,GAAG,o2BAArB;AAEA,IAAIC,gBAAgB,GAAG,40EAAvB;AAEA,IAAIC,gBAAgB,GAAG,4nCAAvB;AAEA,IAAIC,eAAe,GAAG,4gDAAtB;AAEA,IAAIC,eAAe,GAAG,49BAAtB;AAEA,IAAIC,aAAa,GAAG,wvDAApB;AAEA,IAAIC,aAAa,GAAG,wmCAApB;AAEA,IAAIC,cAAc,GAAG,iiEAArB;AAEA,IAAIC,cAAc,GAAG,oqCAArB;AAEA,IAAIC,iBAAiB,GAAG,w6FAAxB;AAEA,IAAIC,iBAAiB,GAAG,81CAAxB;AAEA,IAAIC,WAAW,GAAG,kuBAAlB;AAEA,IAAIC,WAAW,GAAG,kyCAAlB;AAEA,IAAIC,WAAW,GAAG,mvBAAlB;AAEA,IAAIC,WAAW,GAAG,orBAAlB;AAEA,IAAIC,WAAW,GAAG,kaAAlB;AAEA,IAAIC,WAAW,GAAG,oZAAlB;AAEA,IAAIC,WAAW,GAAG,ytBAAlB;AAEA,IAAIC,WAAW,GAAG,qnCAAlB;AAEA,MAAMC,WAAW,GAAG;AACnB9H,EAAAA,iBAAiB,EAAEA,iBADA;AAEnBC,EAAAA,sBAAsB,EAAEA,sBAFL;AAGnBC,EAAAA,kBAAkB,EAAEA,kBAHD;AAInBC,EAAAA,cAAc,EAAEA,cAJG;AAKnBC,EAAAA,mBAAmB,EAAEA,mBALF;AAMnBC,EAAAA,YAAY,EAAEA,YANK;AAOnBC,EAAAA,kBAAkB,EAAEA,kBAPD;AAQnBC,EAAAA,KAAK,EAAEA,KARY;AASnBC,EAAAA,qBAAqB,EAAEA,qBATJ;AAUnBC,EAAAA,wBAAwB,EAAEA,wBAVP;AAWnBC,EAAAA,6BAA6B,EAAEA,6BAXZ;AAYnBC,EAAAA,2BAA2B,EAAEA,2BAZV;AAanBC,EAAAA,sBAAsB,EAAEA,sBAbL;AAcnBC,EAAAA,cAAc,EAAEA,cAdG;AAenBC,EAAAA,mBAAmB,EAAEA,mBAfF;AAgBnBC,EAAAA,iBAAiB,EAAEA,iBAhBA;AAiBnBC,EAAAA,YAAY,EAAEA,YAjBK;AAkBnB1gE,EAAAA,MAAM,EAAEA,MAlBW;AAmBnB2gE,EAAAA,2BAA2B,EAAEA,2BAnBV;AAoBnBC,EAAAA,oBAAoB,EAAEA,oBApBH;AAqBnBC,EAAAA,2BAA2B,EAAEA,2BArBV;AAsBnBC,EAAAA,sBAAsB,EAAEA,sBAtBL;AAuBnBC,EAAAA,oBAAoB,EAAEA,oBAvBH;AAwBnBC,EAAAA,yBAAyB,EAAEA,yBAxBR;AAyBnBC,EAAAA,kBAAkB,EAAEA,kBAzBD;AA0BnBC,EAAAA,uBAAuB,EAAEA,uBA1BN;AA2BnBC,EAAAA,eAAe,EAAEA,eA3BE;AA4BnBC,EAAAA,2BAA2B,EAAEA,2BA5BV;AA6BnBC,EAAAA,oBAAoB,EAAEA,oBA7BH;AA8BnBC,EAAAA,kBAAkB,EAAEA,kBA9BD;AA+BnBW,EAAAA,6BAA6B,EAAEA,6BA/BZ;AAgCnBV,EAAAA,aAAa,EAAEA,aAhCI;AAiCnBC,EAAAA,UAAU,EAAEA,UAjCO;AAkCnBC,EAAAA,eAAe,EAAEA,eAlCE;AAmCnBC,EAAAA,YAAY,EAAEA,YAnCK;AAoCnBC,EAAAA,iBAAiB,EAAEA,iBApCA;AAqCnBC,EAAAA,yBAAyB,EAAEA,yBArCR;AAsCnBC,EAAAA,iBAAiB,EAAEA,iBAtCA;AAuCnBC,EAAAA,sBAAsB,EAAEA,sBAvCL;AAwCnBC,EAAAA,qBAAqB,EAAEA,qBAxCJ;AAyCnBC,EAAAA,iBAAiB,EAAEA,iBAzCA;AA0CnBE,EAAAA,oBAAoB,EAAEA,oBA1CH;AA2CnBC,EAAAA,yBAAyB,EAAEA,yBA3CR;AA4CnBC,EAAAA,qBAAqB,EAAEA,qBA5CJ;AA6CnBC,EAAAA,0BAA0B,EAAEA,0BA7CT;AA8CnBC,EAAAA,wBAAwB,EAAEA,wBA9CP;AA+CnBC,EAAAA,6BAA6B,EAAEA,6BA/CZ;AAgDnBC,EAAAA,qBAAqB,EAAEA,qBAhDJ;AAiDnBC,EAAAA,oBAAoB,EAAEA,oBAjDH;AAkDnBC,EAAAA,mBAAmB,EAAEA,mBAlDF;AAmDnBC,EAAAA,oBAAoB,EAAEA,oBAnDH;AAoDnBC,EAAAA,yBAAyB,EAAEA,yBApDR;AAqDnBC,EAAAA,uBAAuB,EAAEA,uBArDN;AAsDnBC,EAAAA,kBAAkB,EAAEA,kBAtDD;AAuDnBC,EAAAA,YAAY,EAAEA,YAvDK;AAwDnBC,EAAAA,iBAAiB,EAAEA,iBAxDA;AAyDnBC,EAAAA,qBAAqB,EAAEA,qBAzDJ;AA0DnBC,EAAAA,0BAA0B,EAAEA,0BA1DT;AA2DnBC,EAAAA,qBAAqB,EAAEA,qBA3DJ;AA4DnBC,EAAAA,0BAA0B,EAAEA,0BA5DT;AA6DnBC,EAAAA,kBAAkB,EAAEA,kBA7DD;AA8DnBC,EAAAA,uBAAuB,EAAEA,uBA9DN;AA+DnBC,EAAAA,kBAAkB,EAAEA,kBA/DD;AAgEnBC,EAAAA,qBAAqB,EAAEA,qBAhEJ;AAiEnBC,EAAAA,oBAAoB,EAAEA,oBAjEH;AAkEnBC,EAAAA,uBAAuB,EAAEA,uBAlEN;AAmEnBC,EAAAA,+BAA+B,EAAEA,+BAnEd;AAoEnBC,EAAAA,8BAA8B,EAAEA,8BApEb;AAqEnBC,EAAAA,uBAAuB,EAAEA,uBArEN;AAsEnBC,EAAAA,OAAO,EAAEA,OAtEU;AAuEnBC,EAAAA,4BAA4B,EAAEA,4BAvEX;AAwEnBC,EAAAA,cAAc,EAAEA,cAxEG;AAyEnBC,EAAAA,kBAAkB,EAAEA,kBAzED;AA0EnBC,EAAAA,uBAAuB,EAAEA,uBA1EN;AA2EnBC,EAAAA,qBAAqB,EAAEA,qBA3EJ;AA4EnBC,EAAAA,0BAA0B,EAAEA,0BA5ET;AA6EnBC,EAAAA,uBAAuB,EAAEA,uBA7EN;AA8EnBC,EAAAA,qBAAqB,EAAEA,qBA9EJ;AA+EnBC,EAAAA,gBAAgB,EAAEA,gBA/EC;AAgFnBC,EAAAA,wBAAwB,EAAEA,wBAhFP;AAiFnBC,EAAAA,eAAe,EAAEA,eAjFE;AAkFnBC,EAAAA,oBAAoB,EAAEA,oBAlFH;AAmFnBC,EAAAA,eAAe,EAAEA,eAnFE;AAoFnBC,EAAAA,iBAAiB,EAAEA,iBApFA;AAqFnBC,EAAAA,oBAAoB,EAAEA,oBArFH;AAsFnBC,EAAAA,yBAAyB,EAAEA,yBAtFR;AAuFnBC,EAAAA,oBAAoB,EAAEA,oBAvFH;AAwFnBC,EAAAA,yBAAyB,EAAEA,yBAxFR;AAyFnBC,EAAAA,gBAAgB,EAAEA,gBAzFC;AA0FnBC,EAAAA,cAAc,EAAEA,cA1FG;AA2FnBC,EAAAA,SAAS,EAAEA,SA3FQ;AA4FnBC,EAAAA,iBAAiB,EAAEA,iBA5FA;AA6FnBC,EAAAA,eAAe,EAAEA,eA7FE;AA8FnBC,EAAAA,UAAU,EAAEA,UA9FO;AA+FnBC,EAAAA,eAAe,EAAEA,eA/FE;AAiGnBC,EAAAA,eAAe,EAAEA,eAjGE;AAkGnBC,EAAAA,eAAe,EAAEA,eAlGE;AAmGnBC,EAAAA,SAAS,EAAEA,SAnGQ;AAoGnBC,EAAAA,SAAS,EAAEA,SApGQ;AAqGnBC,EAAAA,UAAU,EAAEA,UArGO;AAsGnBC,EAAAA,UAAU,EAAEA,UAtGO;AAuGnBC,EAAAA,iBAAiB,EAAEA,iBAvGA;AAwGnBC,EAAAA,iBAAiB,EAAEA,iBAxGA;AAyGnBC,EAAAA,aAAa,EAAEA,aAzGI;AA0GnBC,EAAAA,aAAa,EAAEA,aA1GI;AA2GnBC,EAAAA,eAAe,EAAEA,eA3GE;AA4GnBC,EAAAA,eAAe,EAAEA,eA5GE;AA6GnBC,EAAAA,cAAc,EAAEA,cA7GG;AA8GnBC,EAAAA,cAAc,EAAEA,cA9GG;AA+GnBC,EAAAA,gBAAgB,EAAEA,gBA/GC;AAgHnBC,EAAAA,gBAAgB,EAAEA,gBAhHC;AAiHnBC,EAAAA,eAAe,EAAEA,eAjHE;AAkHnBC,EAAAA,eAAe,EAAEA,eAlHE;AAmHnBC,EAAAA,aAAa,EAAEA,aAnHI;AAoHnBC,EAAAA,aAAa,EAAEA,aApHI;AAqHnBC,EAAAA,cAAc,EAAEA,cArHG;AAsHnBC,EAAAA,cAAc,EAAEA,cAtHG;AAuHnBC,EAAAA,iBAAiB,EAAEA,iBAvHA;AAwHnBC,EAAAA,iBAAiB,EAAEA,iBAxHA;AAyHnBC,EAAAA,WAAW,EAAEA,WAzHM;AA0HnBC,EAAAA,WAAW,EAAEA,WA1HM;AA2HnBC,EAAAA,WAAW,EAAEA,WA3HM;AA4HnBC,EAAAA,WAAW,EAAEA,WA5HM;AA6HnBC,EAAAA,WAAW,EAAEA,WA7HM;AA8HnBC,EAAAA,WAAW,EAAEA,WA9HM;AA+HnBC,EAAAA,WAAW,EAAEA,WA/HM;AAgInBC,EAAAA,WAAW,EAAEA;AAhIM,CAApB;AAmIA;;;;;;;AAMA,MAAME,SAAS,GAAG;AAEjBC,EAAAA,KAAK,EAAE;AAEN1T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACI,WAFY,EAGxBJ,WAAW,CAACK,MAHY,EAIxBL,WAAW,CAACQ,KAJY,EAKxBR,WAAW,CAACS,QALY,EAMxBT,WAAW,CAACnsB,GANY,CAAF,CAFjB;AAWNqmB,IAAAA,YAAY,EAAEiT,WAAW,CAACnB,cAXpB;AAYN7R,IAAAA,cAAc,EAAEgT,WAAW,CAACpB;AAZtB,GAFU;AAkBjBuB,EAAAA,OAAO,EAAE;AAER3T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACI,WAFY,EAGxBJ,WAAW,CAACK,MAHY,EAIxBL,WAAW,CAACQ,KAJY,EAKxBR,WAAW,CAACS,QALY,EAMxBT,WAAW,CAACU,WANY,EAOxBV,WAAW,CAACnsB,GAPY,EAQxBmsB,WAAW,CAAC5F,MARY,EASxB;AACC7U,MAAAA,QAAQ,EAAE;AAAE79C,QAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT;AADX,KATwB,CAAF,CAFf;AAgBRuyD,IAAAA,YAAY,EAAEiT,WAAW,CAACjB,gBAhBlB;AAiBR/R,IAAAA,cAAc,EAAEgT,WAAW,CAAClB;AAjBpB,GAlBQ;AAuCjBsB,EAAAA,KAAK,EAAE;AAEN5T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACI,WAFY,EAGxBJ,WAAW,CAACK,MAHY,EAIxBL,WAAW,CAACQ,KAJY,EAKxBR,WAAW,CAACS,QALY,EAMxBT,WAAW,CAACU,WANY,EAOxBV,WAAW,CAACW,OAPY,EAQxBX,WAAW,CAACY,SARY,EASxBZ,WAAW,CAACa,eATY,EAUxBb,WAAW,CAACnsB,GAVY,EAWxBmsB,WAAW,CAAC5F,MAXY,EAYxB;AACC7U,MAAAA,QAAQ,EAAE;AAAE79C,QAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,OADX;AAEC89C,MAAAA,QAAQ,EAAE;AAAE/9C,QAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,OAFX;AAGC+9C,MAAAA,SAAS,EAAE;AAAEh+C,QAAAA,KAAK,EAAE;AAAT;AAHZ,KAZwB,CAAF,CAFjB;AAqBNwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACX,cArBpB;AAsBNrS,IAAAA,cAAc,EAAEgT,WAAW,CAACZ;AAtBtB,GAvCU;AAiEjBiB,EAAAA,QAAQ,EAAE;AAET7T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACK,MAFY,EAGxBL,WAAW,CAACQ,KAHY,EAIxBR,WAAW,CAACS,QAJY,EAKxBT,WAAW,CAACU,WALY,EAMxBV,WAAW,CAACW,OANY,EAOxBX,WAAW,CAACY,SAPY,EAQxBZ,WAAW,CAACa,eARY,EASxBb,WAAW,CAACc,YATY,EAUxBd,WAAW,CAACe,YAVY,EAWxBf,WAAW,CAACnsB,GAXY,EAYxBmsB,WAAW,CAAC5F,MAZY,EAaxB;AACC7U,MAAAA,QAAQ,EAAE;AAAE79C,QAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,OADX;AAECy9C,MAAAA,SAAS,EAAE;AAAE19C,QAAAA,KAAK,EAAE;AAAT,OAFZ;AAGC29C,MAAAA,SAAS,EAAE;AAAE39C,QAAAA,KAAK,EAAE;AAAT,OAHZ;AAIC4/C,MAAAA,eAAe,EAAE;AAAE5/C,QAAAA,KAAK,EAAE;AAAT,OAJlB,CAI+B;;AAJ/B,KAbwB,CAAF,CAFd;AAuBTwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACT,iBAvBjB;AAwBTvS,IAAAA,cAAc,EAAEgT,WAAW,CAACV;AAxBnB,GAjEO;AA6FjBgB,EAAAA,IAAI,EAAE;AAEL9T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACQ,KAFY,EAGxBR,WAAW,CAACS,QAHY,EAIxBT,WAAW,CAACU,WAJY,EAKxBV,WAAW,CAACW,OALY,EAMxBX,WAAW,CAACY,SANY,EAOxBZ,WAAW,CAACa,eAPY,EAQxBb,WAAW,CAACgB,WARY,EASxBhB,WAAW,CAACnsB,GATY,EAUxBmsB,WAAW,CAAC5F,MAVY,EAWxB;AACC7U,MAAAA,QAAQ,EAAE;AAAE79C,QAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT;AADX,KAXwB,CAAF,CAFlB;AAkBLuyD,IAAAA,YAAY,EAAEiT,WAAW,CAACb,aAlBrB;AAmBLnS,IAAAA,cAAc,EAAEgT,WAAW,CAACd;AAnBvB,GA7FW;AAoHjBpmB,EAAAA,MAAM,EAAE;AAEP0T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACW,OAFY,EAGxBX,WAAW,CAACY,SAHY,EAIxBZ,WAAW,CAACa,eAJY,EAKxBb,WAAW,CAACnsB,GALY,EAMxB;AACCoS,MAAAA,MAAM,EAAE;AAAEv+C,QAAAA,KAAK,EAAE;AAAT;AADT,KANwB,CAAF,CAFhB;AAaPwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACf,eAbnB;AAcPjS,IAAAA,cAAc,EAAEgT,WAAW,CAAChB;AAdrB,GApHS;AAsIjBt2B,EAAAA,MAAM,EAAE;AAEP8jB,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACnqB,MADY,EAExBmqB,WAAW,CAACnsB,GAFY,CAAF,CAFhB;AAOPqmB,IAAAA,YAAY,EAAEiT,WAAW,CAACL,WAPnB;AAQP3S,IAAAA,cAAc,EAAEgT,WAAW,CAACN;AARrB,GAtIS;AAkJjBa,EAAAA,MAAM,EAAE;AAEP/T,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACnsB,GAFY,EAGxB;AACCpZ,MAAAA,KAAK,EAAE;AAAE/yB,QAAAA,KAAK,EAAE;AAAT,OADR;AAECggD,MAAAA,QAAQ,EAAE;AAAEhgD,QAAAA,KAAK,EAAE;AAAT,OAFX;AAGCimE,MAAAA,SAAS,EAAE;AAAEjmE,QAAAA,KAAK,EAAE;AAAT;AAHZ,KAHwB,CAAF,CAFhB;AAYPwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACrB,eAZnB;AAaP3R,IAAAA,cAAc,EAAEgT,WAAW,CAACtB;AAbrB,GAlJS;AAmKjBzT,EAAAA,KAAK,EAAE;AAENuB,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACa,eAFY,CAAF,CAFjB;AAON3G,IAAAA,YAAY,EAAEiT,WAAW,CAAC3B,UAPpB;AAQNrR,IAAAA,cAAc,EAAEgT,WAAW,CAAC5B;AARtB,GAnKU;AA+KjBtkC,EAAAA,MAAM,EAAE;AAEP0yB,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACW,OAFY,EAGxBX,WAAW,CAACY,SAHY,EAIxBZ,WAAW,CAACa,eAJY,EAKxB;AACC7pD,MAAAA,OAAO,EAAE;AAAEtP,QAAAA,KAAK,EAAE;AAAT;AADV,KALwB,CAAF,CAFhB;AAYPwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACP,WAZnB;AAaPzS,IAAAA,cAAc,EAAEgT,WAAW,CAACR;AAbrB,GA/KS;AAgMjB7M,EAAAA,MAAM,EAAE;AAEPnG,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACF,MADY,EAExBE,WAAW,CAACnsB,GAFY,CAAF,CAFhB;AAOPqmB,IAAAA,YAAY,EAAEiT,WAAW,CAACD,WAPnB;AAQP/S,IAAAA,cAAc,EAAEgT,WAAW,CAACF;AARrB,GAhMS;AA4MjB/3D,EAAAA,UAAU,EAAE;AAEXykD,IAAAA,QAAQ,EAAE;AACTuG,MAAAA,WAAW,EAAE;AAAEx4D,QAAAA,KAAK,EAAE,IAAI6uB,OAAJ;AAAT,OADJ;AAETq3C,MAAAA,GAAG,EAAE;AAAElmE,QAAAA,KAAK,EAAE;AAAT;AAFI,KAFC;AAOXwyD,IAAAA,YAAY,EAAEiT,WAAW,CAAC/B,eAPf;AAQXjR,IAAAA,cAAc,EAAEgT,WAAW,CAAChC;AARjB,GA5MK;;AAuNjB;;;AAIA0C,EAAAA,IAAI,EAAE;AAELlU,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACK,MADY,EAExB;AACCrpD,MAAAA,OAAO,EAAE;AAAEtP,QAAAA,KAAK,EAAE;AAAT;AADV,KAFwB,CAAF,CAFlB;AASLwyD,IAAAA,YAAY,EAAEiT,WAAW,CAAC7B,SATrB;AAULnR,IAAAA,cAAc,EAAEgT,WAAW,CAAC9B;AAVvB,GA3NW;AAyOjByC,EAAAA,QAAQ,EAAE;AAETnU,IAAAA,QAAQ,EAAE;AACTsE,MAAAA,SAAS,EAAE;AAAEv2D,QAAAA,KAAK,EAAE;AAAT;AADF,KAFD;AAMTwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACvB,aANjB;AAOTzR,IAAAA,cAAc,EAAEgT,WAAW,CAACxB;AAPnB,GAzOO;AAoPjBoC,EAAAA,YAAY,EAAE;AAEbpU,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAACr6D,MADY,EAExBq6D,WAAW,CAACa,eAFY,EAGxB;AACCmN,MAAAA,iBAAiB,EAAE;AAAEtmE,QAAAA,KAAK,EAAE,IAAIm9B,OAAJ;AAAT,OADpB;AAECopC,MAAAA,YAAY,EAAE;AAAEvmE,QAAAA,KAAK,EAAE;AAAT,OAFf;AAGCwmE,MAAAA,WAAW,EAAE;AAAExmE,QAAAA,KAAK,EAAE;AAAT;AAHd,KAHwB,CAAF,CAFV;AAYbwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACzB,iBAZb;AAabvR,IAAAA,cAAc,EAAEgT,WAAW,CAAC1B;AAbf,GApPG;AAqQjB0C,EAAAA,MAAM,EAAE;AAEPxU,IAAAA,QAAQ,EAAED,aAAa,CAAE,CACxBsG,WAAW,CAAC5F,MADY,EAExB4F,WAAW,CAACnsB,GAFY,EAGxB;AACC9xC,MAAAA,KAAK,EAAE;AAAE2F,QAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,OAAX;AAAT,OADR;AAECqP,MAAAA,OAAO,EAAE;AAAEtP,QAAAA,KAAK,EAAE;AAAT;AAFV,KAHwB,CAAF,CAFhB;AAWPwyD,IAAAA,YAAY,EAAEiT,WAAW,CAACH,WAXnB;AAYP7S,IAAAA,cAAc,EAAEgT,WAAW,CAACJ;AAZrB;AArQS,CAAlB;;AAuRAK,SAAS,CAACgB,QAAV,GAAqB;AAEpBzU,EAAAA,QAAQ,EAAED,aAAa,CAAE,CACxB0T,SAAS,CAACI,QAAV,CAAmB7T,QADK,EAExB;AACChU,IAAAA,SAAS,EAAE;AAAEj+C,MAAAA,KAAK,EAAE;AAAT,KADZ;AAECm+C,IAAAA,YAAY,EAAE;AAAEn+C,MAAAA,KAAK,EAAE;AAAT,KAFf;AAGCk+C,IAAAA,kBAAkB,EAAE;AAAEl+C,MAAAA,KAAK,EAAE;AAAT,KAHrB;AAICo+C,IAAAA,qBAAqB,EAAE;AAAEp+C,MAAAA,KAAK,EAAE;AAAT,KAJxB;AAKCs+C,IAAAA,oBAAoB,EAAE;AAAEt+C,MAAAA,KAAK,EAAE,IAAIurB,OAAJ,CAAa,CAAb,EAAgB,CAAhB;AAAT,KALvB;AAMC8yB,IAAAA,kBAAkB,EAAE;AAAEr+C,MAAAA,KAAK,EAAE;AAAT,KANrB;AAOC49C,IAAAA,KAAK,EAAE;AAAE59C,MAAAA,KAAK,EAAE,IAAIC,KAAJ,CAAW,QAAX;AAAT,KAPR;AAQC0mE,IAAAA,YAAY,EAAE;AAAE3mE,MAAAA,KAAK,EAAE;AAAT;AARf,GAFwB,CAAF,CAFH;AAgBpBwyD,EAAAA,YAAY,EAAEiT,WAAW,CAACT,iBAhBN;AAiBpBvS,EAAAA,cAAc,EAAEgT,WAAW,CAACV;AAjBR,CAArB;AAqBA;;;;AAIA,SAAS6B,eAAT,CAA0BnR,QAA1B,EAAoCoR,KAApC,EAA2CC,OAA3C,EAAoD5pB,kBAApD,EAAyE;AAExE,QAAM6pB,UAAU,GAAG,IAAI9mE,KAAJ,CAAW,QAAX,CAAnB;AACA,MAAI+mE,UAAU,GAAG,CAAjB;AAEA,MAAIC,SAAJ;AACA,MAAIC,OAAJ;AAEA,MAAIC,iBAAiB,GAAG,IAAxB;AACA,MAAIC,wBAAwB,GAAG,CAA/B;AACA,MAAIC,kBAAkB,GAAG,IAAzB;;AAEA,WAASrR,MAAT,CAAiBsR,UAAjB,EAA6B5R,KAA7B,EAAoCt3B,MAApC,EAA4CmpC,UAA5C,EAAyD;AAExD,QAAI/5D,UAAU,GAAGkoD,KAAK,CAACjpB,OAAN,KAAkB,IAAlB,GAAyBipB,KAAK,CAACloD,UAA/B,GAA4C,IAA7D,CAFwD,CAIxD;AACA;;AAEA,UAAMooD,EAAE,GAAGH,QAAQ,CAACG,EAApB;AACA,UAAM4R,OAAO,GAAG5R,EAAE,CAAC6R,UAAH,IAAiB7R,EAAE,CAAC6R,UAAH,EAAjC;;AAEA,QAAKD,OAAO,IAAIA,OAAO,CAACE,oBAAR,KAAiC,UAAjD,EAA8D;AAE7Dl6D,MAAAA,UAAU,GAAG,IAAb;AAEA;;AAED,QAAKA,UAAU,KAAK,IAApB,EAA2B;AAE1Bm6D,MAAAA,QAAQ,CAAEZ,UAAF,EAAcC,UAAd,CAAR;AAEA,KAJD,MAIO,IAAKx5D,UAAU,IAAIA,UAAU,CAACkrC,OAA9B,EAAwC;AAE9CivB,MAAAA,QAAQ,CAAEn6D,UAAF,EAAc,CAAd,CAAR;AACA+5D,MAAAA,UAAU,GAAG,IAAb;AAEA;;AAED,QAAK9R,QAAQ,CAACmS,SAAT,IAAsBL,UAA3B,EAAwC;AAEvC9R,MAAAA,QAAQ,CAACQ,KAAT,CAAgBR,QAAQ,CAACoS,cAAzB,EAAyCpS,QAAQ,CAACqS,cAAlD,EAAkErS,QAAQ,CAACsS,gBAA3E;AAEA;;AAED,QAAKv6D,UAAU,KAAMA,UAAU,CAACw6D,aAAX,IAA4Bx6D,UAAU,CAAC0nD,uBAAvC,IAAkE1nD,UAAU,CAAC2mB,OAAX,KAAuB9U,uBAA/F,CAAf,EAA0I;AAEzI,UAAK6nD,OAAO,KAAKvpE,SAAjB,EAA6B;AAE5BupE,QAAAA,OAAO,GAAG,IAAItc,IAAJ,CACT,IAAIkG,iBAAJ,CAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CADS,EAET,IAAIwB,cAAJ,CAAoB;AACnBpgD,UAAAA,IAAI,EAAE,wBADa;AAEnB+/C,UAAAA,QAAQ,EAAEF,aAAa,CAAE2T,SAAS,CAACS,IAAV,CAAelU,QAAjB,CAFJ;AAGnBO,UAAAA,YAAY,EAAEkT,SAAS,CAACS,IAAV,CAAe3T,YAHV;AAInBC,UAAAA,cAAc,EAAEiT,SAAS,CAACS,IAAV,CAAe1T,cAJZ;AAKnBtX,UAAAA,IAAI,EAAE9+B,QALa;AAMnBw/B,UAAAA,SAAS,EAAE,KANQ;AAOnBC,UAAAA,UAAU,EAAE,KAPO;AAQnB3P,UAAAA,GAAG,EAAE;AARc,SAApB,CAFS,CAAV;AAcA+6B,QAAAA,OAAO,CAAC37B,QAAR,CAAiBgb,eAAjB,CAAkC,QAAlC;AACA2gB,QAAAA,OAAO,CAAC37B,QAAR,CAAiBgb,eAAjB,CAAkC,IAAlC;;AAEA2gB,QAAAA,OAAO,CAAC9+B,cAAR,GAAyB,UAAWqtB,QAAX,EAAqBC,KAArB,EAA4Bt3B,MAA5B,EAAqC;AAE7D,eAAKK,WAAL,CAAiBwC,YAAjB,CAA+B7C,MAAM,CAACK,WAAtC;AAEA,SAJD,CAnB4B,CAyB5B;;;AACAniC,QAAAA,MAAM,CAACkE,cAAP,CAAuB0mE,OAAO,CAACx7B,QAA/B,EAAyC,QAAzC,EAAmD;AAElDlxB,UAAAA,GAAG,EAAE,YAAY;AAEhB,mBAAO,KAAKy3C,QAAL,CAAczS,MAAd,CAAqBx/C,KAA5B;AAEA;AANiD,SAAnD;AAUA8mE,QAAAA,OAAO,CAAC/rC,MAAR,CAAgBmsC,OAAhB;AAEA;;AAED,YAAM7uC,OAAO,GAAG7qB,UAAU,CAAC0nD,uBAAX,GAAqC1nD,UAAU,CAAC6qB,OAAhD,GAA0D7qB,UAA1E;AAEA05D,MAAAA,OAAO,CAACx7B,QAAR,CAAiBumB,QAAjB,CAA0BzS,MAA1B,CAAiCx/C,KAAjC,GAAyCq4B,OAAzC;AACA6uC,MAAAA,OAAO,CAACx7B,QAAR,CAAiBumB,QAAjB,CAA0B2G,UAA1B,CAAqC54D,KAArC,GAA6Cq4B,OAAO,CAAC2vC,aAAR,GAAwB,CAAE,CAA1B,GAA8B,CAA3E;;AAEA,UAAKb,iBAAiB,KAAK35D,UAAtB,IACJ45D,wBAAwB,KAAK/uC,OAAO,CAAChD,OADjC,IAEJgyC,kBAAkB,KAAK5R,QAAQ,CAACwS,WAFjC,EAE+C;AAE9Cf,QAAAA,OAAO,CAACx7B,QAAR,CAAiBib,WAAjB,GAA+B,IAA/B;AAEAwgB,QAAAA,iBAAiB,GAAG35D,UAApB;AACA45D,QAAAA,wBAAwB,GAAG/uC,OAAO,CAAChD,OAAnC;AACAgyC,QAAAA,kBAAkB,GAAG5R,QAAQ,CAACwS,WAA9B;AAEA,OAzDwI,CA2DzI;;;AACAX,MAAAA,UAAU,CAACY,OAAX,CAAoBhB,OAApB,EAA6BA,OAAO,CAAC37B,QAArC,EAA+C27B,OAAO,CAACx7B,QAAvD,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,IAAvE;AAEA,KA9DD,MA8DO,IAAKl+B,UAAU,IAAIA,UAAU,CAACgoB,SAA9B,EAA0C;AAEhD,UAAKyxC,SAAS,KAAKtpE,SAAnB,EAA+B;AAE9BspE,QAAAA,SAAS,GAAG,IAAIrc,IAAJ,CACX,IAAI0S,mBAAJ,CAAyB,CAAzB,EAA4B,CAA5B,CADW,EAEX,IAAIhL,cAAJ,CAAoB;AACnBpgD,UAAAA,IAAI,EAAE,oBADa;AAEnB+/C,UAAAA,QAAQ,EAAEF,aAAa,CAAE2T,SAAS,CAACl4D,UAAV,CAAqBykD,QAAvB,CAFJ;AAGnBO,UAAAA,YAAY,EAAEkT,SAAS,CAACl4D,UAAV,CAAqBglD,YAHhB;AAInBC,UAAAA,cAAc,EAAEiT,SAAS,CAACl4D,UAAV,CAAqBilD,cAJlB;AAKnBtX,UAAAA,IAAI,EAAE/+B,SALa;AAMnBy/B,UAAAA,SAAS,EAAE,KANQ;AAOnBC,UAAAA,UAAU,EAAE,KAPO;AAQnB3P,UAAAA,GAAG,EAAE;AARc,SAApB,CAFW,CAAZ;AAcA86B,QAAAA,SAAS,CAAC17B,QAAV,CAAmBgb,eAAnB,CAAoC,QAApC,EAhB8B,CAkB9B;;AACAjqD,QAAAA,MAAM,CAACkE,cAAP,CAAuBymE,SAAS,CAACv7B,QAAjC,EAA2C,KAA3C,EAAkD;AAEjDlxB,UAAAA,GAAG,EAAE,YAAY;AAEhB,mBAAO,KAAKy3C,QAAL,CAAciU,GAAd,CAAkBlmE,KAAzB;AAEA;AANgD,SAAlD;AAUA8mE,QAAAA,OAAO,CAAC/rC,MAAR,CAAgBksC,SAAhB;AAEA;;AAEDA,MAAAA,SAAS,CAACv7B,QAAV,CAAmBumB,QAAnB,CAA4BiU,GAA5B,CAAgClmE,KAAhC,GAAwCwN,UAAxC;;AAEA,UAAKA,UAAU,CAACwnB,gBAAX,KAAgC,IAArC,EAA4C;AAE3CxnB,QAAAA,UAAU,CAACioB,YAAX;AAEA;;AAEDwxC,MAAAA,SAAS,CAACv7B,QAAV,CAAmBumB,QAAnB,CAA4BuG,WAA5B,CAAwCx4D,KAAxC,CAA8CgsB,IAA9C,CAAoDxe,UAAU,CAACmkB,MAA/D;;AAEA,UAAKw1C,iBAAiB,KAAK35D,UAAtB,IACJ45D,wBAAwB,KAAK55D,UAAU,CAAC6nB,OADpC,IAEJgyC,kBAAkB,KAAK5R,QAAQ,CAACwS,WAFjC,EAE+C;AAE9ChB,QAAAA,SAAS,CAACv7B,QAAV,CAAmBib,WAAnB,GAAiC,IAAjC;AAEAwgB,QAAAA,iBAAiB,GAAG35D,UAApB;AACA45D,QAAAA,wBAAwB,GAAG55D,UAAU,CAAC6nB,OAAtC;AACAgyC,QAAAA,kBAAkB,GAAG5R,QAAQ,CAACwS,WAA9B;AAEA,OAvD+C,CA0DhD;;;AACAX,MAAAA,UAAU,CAACY,OAAX,CAAoBjB,SAApB,EAA+BA,SAAS,CAAC17B,QAAzC,EAAmD07B,SAAS,CAACv7B,QAA7D,EAAuE,CAAvE,EAA0E,CAA1E,EAA6E,IAA7E;AAEA;AAED;;AAED,WAASi8B,QAAT,CAAmBttE,KAAnB,EAA0B4zB,KAA1B,EAAkC;AAEjC44C,IAAAA,KAAK,CAACvK,OAAN,CAAcjiE,KAAd,CAAoBstE,QAApB,CAA8BttE,KAAK,CAACM,CAApC,EAAuCN,KAAK,CAACS,CAA7C,EAAgDT,KAAK,CAACU,CAAtD,EAAyDkzB,KAAzD,EAAgEivB,kBAAhE;AAEA;;AAED,SAAO;AAENirB,IAAAA,aAAa,EAAE,YAAY;AAE1B,aAAOpB,UAAP;AAEA,KANK;AAONqB,IAAAA,aAAa,EAAE,UAAW/tE,KAAX,EAAkB4zB,KAAlB,EAA0B;AAExC84C,MAAAA,UAAU,CAAC37C,GAAX,CAAgB/wB,KAAhB;AACA2sE,MAAAA,UAAU,GAAG/4C,KAAK,KAAKtwB,SAAV,GAAsBswB,KAAtB,GAA8B,CAA3C;AACA05C,MAAAA,QAAQ,CAAEZ,UAAF,EAAcC,UAAd,CAAR;AAEA,KAbK;AAcNqB,IAAAA,aAAa,EAAE,YAAY;AAE1B,aAAOrB,UAAP;AAEA,KAlBK;AAmBNsB,IAAAA,aAAa,EAAE,UAAWr6C,KAAX,EAAmB;AAEjC+4C,MAAAA,UAAU,GAAG/4C,KAAb;AACA05C,MAAAA,QAAQ,CAAEZ,UAAF,EAAcC,UAAd,CAAR;AAEA,KAxBK;AAyBNhR,IAAAA,MAAM,EAAEA;AAzBF,GAAP;AA6BA;AAED;;;;;;AAKA,SAASuS,kBAAT,CAA6BpM,EAA7B,EAAiCvJ,UAAjC,EAA6C7M,UAA7C,EAAyDqW,YAAzD,EAAwE;AAEvE,QAAMoM,mBAAmB,GAAGrM,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAA5B;AAEA,QAAMk5B,SAAS,GAAGrM,YAAY,CAACC,QAAb,GAAwB,IAAxB,GAA+BzJ,UAAU,CAACp4C,GAAX,CAAgB,yBAAhB,CAAjD;AACA,QAAMkuD,YAAY,GAAGtM,YAAY,CAACC,QAAb,IAAyBoM,SAAS,KAAK,IAA5D;AAEA,QAAME,aAAa,GAAG,EAAtB;AAEA,QAAMC,YAAY,GAAGC,kBAAkB,CAAE,IAAF,CAAvC;AACA,MAAIC,YAAY,GAAGF,YAAnB;;AAEA,WAASG,KAAT,CAAgB1nE,MAAhB,EAAwBqqC,QAAxB,EAAkCs9B,OAAlC,EAA2Cz9B,QAA3C,EAAqDplC,KAArD,EAA6D;AAE5D,QAAI8iE,aAAa,GAAG,KAApB;;AAEA,QAAKP,YAAL,EAAoB;AAEnB,YAAM7B,KAAK,GAAGqC,eAAe,CAAE39B,QAAF,EAAYy9B,OAAZ,EAAqBt9B,QAArB,CAA7B;;AAEA,UAAKo9B,YAAY,KAAKjC,KAAtB,EAA8B;AAE7BiC,QAAAA,YAAY,GAAGjC,KAAf;AACAsC,QAAAA,qBAAqB,CAAEL,YAAY,CAACznE,MAAf,CAArB;AAEA;;AAED4nE,MAAAA,aAAa,GAAGtiB,WAAW,CAAEpb,QAAF,CAA3B;AAEA,UAAK09B,aAAL,EAAqBG,SAAS,CAAE79B,QAAF,CAAT;AAErB,KAfD,MAeO;AAEN,YAAM2U,SAAS,GAAKxU,QAAQ,CAACwU,SAAT,KAAuB,IAA3C;;AAEA,UAAK4oB,YAAY,CAACv9B,QAAb,KAA0BA,QAAQ,CAAC3B,EAAnC,IACJk/B,YAAY,CAACE,OAAb,KAAyBA,OAAO,CAACp/B,EAD7B,IAEJk/B,YAAY,CAAC5oB,SAAb,KAA2BA,SAF5B,EAEwC;AAEvC4oB,QAAAA,YAAY,CAACv9B,QAAb,GAAwBA,QAAQ,CAAC3B,EAAjC;AACAk/B,QAAAA,YAAY,CAACE,OAAb,GAAuBA,OAAO,CAACp/B,EAA/B;AACAk/B,QAAAA,YAAY,CAAC5oB,SAAb,GAAyBA,SAAzB;AAEA+oB,QAAAA,aAAa,GAAG,IAAhB;AAEA;AAED;;AAED,QAAK5nE,MAAM,CAAC0pC,eAAP,KAA2B,IAAhC,EAAuC;AAEtCk+B,MAAAA,aAAa,GAAG,IAAhB;AAEA;;AAED,QAAK9iE,KAAK,KAAK,IAAf,EAAsB;AAErB4/C,MAAAA,UAAU,CAAChrB,MAAX,CAAmB50B,KAAnB,EAA0B,KAA1B;AAEA;;AAED,QAAK8iE,aAAL,EAAqB;AAEpBI,MAAAA,qBAAqB,CAAEhoE,MAAF,EAAUqqC,QAAV,EAAoBs9B,OAApB,EAA6Bz9B,QAA7B,CAArB;;AAEA,UAAKplC,KAAK,KAAK,IAAf,EAAsB;AAErBg2D,QAAAA,EAAE,CAACQ,UAAH,CAAe,KAAf,EAAsB5W,UAAU,CAACvrC,GAAX,CAAgBrU,KAAhB,EAAwBu2D,MAA9C;AAEA;AAED;AAED;;AAED,WAAS4M,uBAAT,GAAmC;AAElC,QAAKlN,YAAY,CAACC,QAAlB,EAA6B,OAAOF,EAAE,CAACoN,iBAAH,EAAP;AAE7B,WAAOd,SAAS,CAACe,oBAAV,EAAP;AAEA;;AAED,WAASL,qBAAT,CAAgCM,GAAhC,EAAsC;AAErC,QAAKrN,YAAY,CAACC,QAAlB,EAA6B,OAAOF,EAAE,CAACuN,eAAH,CAAoBD,GAApB,CAAP;AAE7B,WAAOhB,SAAS,CAACkB,kBAAV,CAA8BF,GAA9B,CAAP;AAEA;;AAED,WAASG,uBAAT,CAAkCH,GAAlC,EAAwC;AAEvC,QAAKrN,YAAY,CAACC,QAAlB,EAA6B,OAAOF,EAAE,CAAC0N,iBAAH,CAAsBJ,GAAtB,CAAP;AAE7B,WAAOhB,SAAS,CAACqB,oBAAV,CAAgCL,GAAhC,CAAP;AAEA;;AAED,WAASP,eAAT,CAA0B39B,QAA1B,EAAoCy9B,OAApC,EAA6Ct9B,QAA7C,EAAwD;AAEvD,UAAMwU,SAAS,GAAKxU,QAAQ,CAACwU,SAAT,KAAuB,IAA3C;AAEA,QAAI6pB,UAAU,GAAGpB,aAAa,CAAEp9B,QAAQ,CAAC3B,EAAX,CAA9B;;AAEA,QAAKmgC,UAAU,KAAKpsE,SAApB,EAAgC;AAE/BosE,MAAAA,UAAU,GAAG,EAAb;AACApB,MAAAA,aAAa,CAAEp9B,QAAQ,CAAC3B,EAAX,CAAb,GAA+BmgC,UAA/B;AAEA;;AAED,QAAIC,QAAQ,GAAGD,UAAU,CAAEf,OAAO,CAACp/B,EAAV,CAAzB;;AAEA,QAAKogC,QAAQ,KAAKrsE,SAAlB,EAA8B;AAE7BqsE,MAAAA,QAAQ,GAAG,EAAX;AACAD,MAAAA,UAAU,CAAEf,OAAO,CAACp/B,EAAV,CAAV,GAA2BogC,QAA3B;AAEA;;AAED,QAAInD,KAAK,GAAGmD,QAAQ,CAAE9pB,SAAF,CAApB;;AAEA,QAAK2mB,KAAK,KAAKlpE,SAAf,EAA2B;AAE1BkpE,MAAAA,KAAK,GAAGgC,kBAAkB,CAAES,uBAAuB,EAAzB,CAA1B;AACAU,MAAAA,QAAQ,CAAE9pB,SAAF,CAAR,GAAwB2mB,KAAxB;AAEA;;AAED,WAAOA,KAAP;AAEA;;AAED,WAASgC,kBAAT,CAA6BY,GAA7B,EAAmC;AAElC,UAAMQ,aAAa,GAAG,EAAtB;AACA,UAAMC,iBAAiB,GAAG,EAA1B;AACA,UAAMC,iBAAiB,GAAG,EAA1B;;AAEA,SAAM,IAAIvtE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG4rE,mBAArB,EAA0C5rE,CAAC,EAA3C,EAAiD;AAEhDqtE,MAAAA,aAAa,CAAErtE,CAAF,CAAb,GAAqB,CAArB;AACAstE,MAAAA,iBAAiB,CAAEttE,CAAF,CAAjB,GAAyB,CAAzB;AACAutE,MAAAA,iBAAiB,CAAEvtE,CAAF,CAAjB,GAAyB,CAAzB;AAEA;;AAED,WAAO;AAEN;AACA2uC,MAAAA,QAAQ,EAAE,IAHJ;AAINy9B,MAAAA,OAAO,EAAE,IAJH;AAKN9oB,MAAAA,SAAS,EAAE,KALL;AAON+pB,MAAAA,aAAa,EAAEA,aAPT;AAQNC,MAAAA,iBAAiB,EAAEA,iBARb;AASNC,MAAAA,iBAAiB,EAAEA,iBATb;AAUN9oE,MAAAA,MAAM,EAAEooE,GAVF;AAWN1jB,MAAAA,UAAU,EAAE;AAXN,KAAP;AAeA;;AAED,WAASY,WAAT,CAAsBpb,QAAtB,EAAiC;AAEhC,UAAM6+B,gBAAgB,GAAGtB,YAAY,CAAC/iB,UAAtC;AACA,UAAMskB,kBAAkB,GAAG9+B,QAAQ,CAACwa,UAApC;AAEA,QAAKzpD,MAAM,CAACF,IAAP,CAAaguE,gBAAb,EAAgC7uE,MAAhC,KAA2Ce,MAAM,CAACF,IAAP,CAAaiuE,kBAAb,EAAkC9uE,MAAlF,EAA2F,OAAO,IAAP;;AAE3F,SAAM,MAAMgB,GAAZ,IAAmB8tE,kBAAnB,EAAwC;AAEvC,YAAMC,eAAe,GAAGF,gBAAgB,CAAE7tE,GAAF,CAAxC;AACA,YAAMguE,iBAAiB,GAAGF,kBAAkB,CAAE9tE,GAAF,CAA5C;AAEA,UAAK+tE,eAAe,CAAC97C,SAAhB,KAA8B+7C,iBAAnC,EAAuD,OAAO,IAAP;AAEvD,UAAKD,eAAe,CAACv+B,IAAhB,KAAyBw+B,iBAAiB,CAACx+B,IAAhD,EAAuD,OAAO,IAAP;AAEvD;;AAED,WAAO,KAAP;AAEA;;AAED,WAASq9B,SAAT,CAAoB79B,QAApB,EAA+B;AAE9B,UAAMM,KAAK,GAAG,EAAd;AACA,UAAMka,UAAU,GAAGxa,QAAQ,CAACwa,UAA5B;;AAEA,SAAM,MAAMxpD,GAAZ,IAAmBwpD,UAAnB,EAAgC;AAE/B,YAAMv3B,SAAS,GAAGu3B,UAAU,CAAExpD,GAAF,CAA5B;AAEA,YAAMwvC,IAAI,GAAG,EAAb;AACAA,MAAAA,IAAI,CAACvd,SAAL,GAAiBA,SAAjB;;AAEA,UAAKA,SAAS,CAACud,IAAf,EAAsB;AAErBA,QAAAA,IAAI,CAACA,IAAL,GAAYvd,SAAS,CAACud,IAAtB;AAEA;;AAEDF,MAAAA,KAAK,CAAEtvC,GAAF,CAAL,GAAewvC,IAAf;AAEA;;AAED+8B,IAAAA,YAAY,CAAC/iB,UAAb,GAA0Bla,KAA1B;AAEA;;AAED,WAAS2+B,cAAT,GAA0B;AAEzB,UAAMP,aAAa,GAAGnB,YAAY,CAACmB,aAAnC;;AAEA,SAAM,IAAIrtE,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG47B,aAAa,CAAC1uE,MAApC,EAA4CqB,CAAC,GAAGyxC,EAAhD,EAAoDzxC,CAAC,EAArD,EAA2D;AAE1DqtE,MAAAA,aAAa,CAAErtE,CAAF,CAAb,GAAqB,CAArB;AAEA;AAED;;AAED,WAAS6tE,eAAT,CAA0Bj8C,SAA1B,EAAsC;AAErCk8C,IAAAA,yBAAyB,CAAEl8C,SAAF,EAAa,CAAb,CAAzB;AAEA;;AAED,WAASk8C,yBAAT,CAAoCl8C,SAApC,EAA+Cm8C,gBAA/C,EAAkE;AAEjE,UAAMV,aAAa,GAAGnB,YAAY,CAACmB,aAAnC;AACA,UAAMC,iBAAiB,GAAGpB,YAAY,CAACoB,iBAAvC;AACA,UAAMC,iBAAiB,GAAGrB,YAAY,CAACqB,iBAAvC;AAEAF,IAAAA,aAAa,CAAEz7C,SAAF,CAAb,GAA6B,CAA7B;;AAEA,QAAK07C,iBAAiB,CAAE17C,SAAF,CAAjB,KAAmC,CAAxC,EAA4C;AAE3C2tC,MAAAA,EAAE,CAACyO,uBAAH,CAA4Bp8C,SAA5B;AACA07C,MAAAA,iBAAiB,CAAE17C,SAAF,CAAjB,GAAiC,CAAjC;AAEA;;AAED,QAAK27C,iBAAiB,CAAE37C,SAAF,CAAjB,KAAmCm8C,gBAAxC,EAA2D;AAE1D,YAAMlC,SAAS,GAAGrM,YAAY,CAACC,QAAb,GAAwBF,EAAxB,GAA6BvJ,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,CAA/C;AAEAiuD,MAAAA,SAAS,CAAErM,YAAY,CAACC,QAAb,GAAwB,qBAAxB,GAAgD,0BAAlD,CAAT,CAAyF7tC,SAAzF,EAAoGm8C,gBAApG;AACAR,MAAAA,iBAAiB,CAAE37C,SAAF,CAAjB,GAAiCm8C,gBAAjC;AAEA;AAED;;AAED,WAASE,uBAAT,GAAmC;AAElC,UAAMZ,aAAa,GAAGnB,YAAY,CAACmB,aAAnC;AACA,UAAMC,iBAAiB,GAAGpB,YAAY,CAACoB,iBAAvC;;AAEA,SAAM,IAAIttE,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG67B,iBAAiB,CAAC3uE,MAAxC,EAAgDqB,CAAC,GAAGyxC,EAApD,EAAwDzxC,CAAC,EAAzD,EAA+D;AAE9D,UAAKstE,iBAAiB,CAAEttE,CAAF,CAAjB,KAA2BqtE,aAAa,CAAErtE,CAAF,CAA7C,EAAqD;AAEpDu/D,QAAAA,EAAE,CAAC2O,wBAAH,CAA6BluE,CAA7B;AACAstE,QAAAA,iBAAiB,CAAEttE,CAAF,CAAjB,GAAyB,CAAzB;AAEA;AAED;AAED;;AAED,WAASmuE,mBAAT,CAA8B5kE,KAA9B,EAAqCqoC,IAArC,EAA2CznC,IAA3C,EAAiD2zC,UAAjD,EAA6DswB,MAA7D,EAAqEtkE,MAArE,EAA8E;AAE7E,QAAK01D,YAAY,CAACC,QAAb,KAA0B,IAA1B,KAAoCt1D,IAAI,KAAK,IAAT,IAAiBA,IAAI,KAAK,IAA9D,CAAL,EAA4E;AAE3Eo1D,MAAAA,EAAE,CAAC8O,oBAAH,CAAyB9kE,KAAzB,EAAgCqoC,IAAhC,EAAsCznC,IAAtC,EAA4C2zC,UAA5C,EAAwDswB,MAAxD,EAAgEtkE,MAAhE;AAEA,KAJD,MAIO;AAENy1D,MAAAA,EAAE,CAAC4O,mBAAH,CAAwB5kE,KAAxB,EAA+BqoC,IAA/B,EAAqCznC,IAArC,EAA2C2zC,UAA3C,EAAuDswB,MAAvD,EAA+DtkE,MAA/D;AAEA;AAED;;AAED,WAAS2iE,qBAAT,CAAgChoE,MAAhC,EAAwCqqC,QAAxC,EAAkDs9B,OAAlD,EAA2Dz9B,QAA3D,EAAsE;AAErE,QAAK6wB,YAAY,CAACC,QAAb,KAA0B,KAA1B,KAAqCh7D,MAAM,CAAC0pC,eAAP,IAA0BQ,QAAQ,CAAC2/B,yBAAxE,CAAL,EAA2G;AAE1G,UAAKtY,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,MAA+C,IAApD,EAA2D;AAE3D;;AAEDgwD,IAAAA,cAAc;AAEd,UAAMH,kBAAkB,GAAG9+B,QAAQ,CAACwa,UAApC;AAEA,UAAMolB,iBAAiB,GAAGnC,OAAO,CAACoC,aAAR,EAA1B;AAEA,UAAMC,8BAA8B,GAAG3/B,QAAQ,CAACunB,sBAAhD;;AAEA,SAAM,MAAM/gD,IAAZ,IAAoBi5D,iBAApB,EAAwC;AAEvC,YAAMG,gBAAgB,GAAGH,iBAAiB,CAAEj5D,IAAF,CAA1C;;AAEA,UAAKo5D,gBAAgB,IAAI,CAAzB,EAA6B;AAE5B,cAAMf,iBAAiB,GAAGF,kBAAkB,CAAEn4D,IAAF,CAA5C;;AAEA,YAAKq4D,iBAAiB,KAAK5sE,SAA3B,EAAuC;AAEtC,gBAAM+8C,UAAU,GAAG6vB,iBAAiB,CAAC7vB,UAArC;AACA,gBAAMlM,IAAI,GAAG+7B,iBAAiB,CAACtpB,QAA/B;AAEA,gBAAMzyB,SAAS,GAAGu3B,UAAU,CAACvrC,GAAX,CAAgB+vD,iBAAhB,CAAlB,CALsC,CAOtC;;AAEA,cAAK/7C,SAAS,KAAK7wB,SAAnB,EAA+B;AAE/B,gBAAM++D,MAAM,GAAGluC,SAAS,CAACkuC,MAAzB;AACA,gBAAM31D,IAAI,GAAGynB,SAAS,CAACznB,IAAvB;AACA,gBAAM81D,eAAe,GAAGruC,SAAS,CAACquC,eAAlC;;AAEA,cAAK0N,iBAAiB,CAACrN,4BAAvB,EAAsD;AAErD,kBAAMnxB,IAAI,GAAGw+B,iBAAiB,CAACx+B,IAA/B;AACA,kBAAMi/B,MAAM,GAAGj/B,IAAI,CAACi/B,MAApB;AACA,kBAAMtkE,MAAM,GAAG6jE,iBAAiB,CAAC7jE,MAAjC;;AAEA,gBAAKqlC,IAAI,IAAIA,IAAI,CAACw/B,4BAAlB,EAAiD;AAEhDb,cAAAA,yBAAyB,CAAEY,gBAAF,EAAoBv/B,IAAI,CAAC4+B,gBAAzB,CAAzB;;AAEA,kBAAKp/B,QAAQ,CAACigC,iBAAT,KAA+B7tE,SAApC,EAAgD;AAE/C4tC,gBAAAA,QAAQ,CAACigC,iBAAT,GAA6Bz/B,IAAI,CAAC4+B,gBAAL,GAAwB5+B,IAAI,CAACf,KAA1D;AAEA;AAED,aAVD,MAUO;AAENy/B,cAAAA,eAAe,CAAEa,gBAAF,CAAf;AAEA;;AAEDnP,YAAAA,EAAE,CAACQ,UAAH,CAAe,KAAf,EAAsBD,MAAtB;AACAqO,YAAAA,mBAAmB,CAAEO,gBAAF,EAAoB98B,IAApB,EAA0BznC,IAA1B,EAAgC2zC,UAAhC,EAA4CswB,MAAM,GAAGnO,eAArD,EAAsEn2D,MAAM,GAAGm2D,eAA/E,CAAnB;AAEA,WAzBD,MAyBO;AAEN,gBAAK0N,iBAAiB,CAACkB,0BAAvB,EAAoD;AAEnDf,cAAAA,yBAAyB,CAAEY,gBAAF,EAAoBf,iBAAiB,CAACI,gBAAtC,CAAzB;;AAEA,kBAAKp/B,QAAQ,CAACigC,iBAAT,KAA+B7tE,SAApC,EAAgD;AAE/C4tC,gBAAAA,QAAQ,CAACigC,iBAAT,GAA6BjB,iBAAiB,CAACI,gBAAlB,GAAqCJ,iBAAiB,CAACv/B,KAApF;AAEA;AAED,aAVD,MAUO;AAENy/B,cAAAA,eAAe,CAAEa,gBAAF,CAAf;AAEA;;AAEDnP,YAAAA,EAAE,CAACQ,UAAH,CAAe,KAAf,EAAsBD,MAAtB;AACAqO,YAAAA,mBAAmB,CAAEO,gBAAF,EAAoB98B,IAApB,EAA0BznC,IAA1B,EAAgC2zC,UAAhC,EAA4C,CAA5C,EAA+C,CAA/C,CAAnB;AAEA;AAED,SA/DD,MA+DO,IAAKxoC,IAAI,KAAK,gBAAd,EAAiC;AAEvC,gBAAMsc,SAAS,GAAGu3B,UAAU,CAACvrC,GAAX,CAAgBnZ,MAAM,CAAC4pC,cAAvB,CAAlB,CAFuC,CAIvC;;AAEA,cAAKzc,SAAS,KAAK7wB,SAAnB,EAA+B;AAE/B,gBAAM++D,MAAM,GAAGluC,SAAS,CAACkuC,MAAzB;AACA,gBAAM31D,IAAI,GAAGynB,SAAS,CAACznB,IAAvB;AAEA2jE,UAAAA,yBAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AACAZ,UAAAA,yBAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AACAZ,UAAAA,yBAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AACAZ,UAAAA,yBAAyB,CAAEY,gBAAgB,GAAG,CAArB,EAAwB,CAAxB,CAAzB;AAEAnP,UAAAA,EAAE,CAACQ,UAAH,CAAe,KAAf,EAAsBD,MAAtB;AAEAP,UAAAA,EAAE,CAAC4O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDvkE,IAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,CAAlE;AACAo1D,UAAAA,EAAE,CAAC4O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDvkE,IAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,EAAlE;AACAo1D,UAAAA,EAAE,CAAC4O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDvkE,IAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,EAAlE;AACAo1D,UAAAA,EAAE,CAAC4O,mBAAH,CAAwBO,gBAAgB,GAAG,CAA3C,EAA8C,CAA9C,EAAiDvkE,IAAjD,EAAuD,KAAvD,EAA8D,EAA9D,EAAkE,EAAlE;AAEA,SAvBM,MAuBA,IAAKskE,8BAA8B,KAAK1tE,SAAxC,EAAoD;AAE1D,gBAAMqC,KAAK,GAAGqrE,8BAA8B,CAAEn5D,IAAF,CAA5C;;AAEA,cAAKlS,KAAK,KAAKrC,SAAf,EAA2B;AAE1B,oBAASqC,KAAK,CAACzE,MAAf;AAEC,mBAAK,CAAL;AACC4gE,gBAAAA,EAAE,CAACuP,eAAH,CAAoBJ,gBAApB,EAAsCtrE,KAAtC;AACA;;AAED,mBAAK,CAAL;AACCm8D,gBAAAA,EAAE,CAACwP,eAAH,CAAoBL,gBAApB,EAAsCtrE,KAAtC;AACA;;AAED,mBAAK,CAAL;AACCm8D,gBAAAA,EAAE,CAACyP,eAAH,CAAoBN,gBAApB,EAAsCtrE,KAAtC;AACA;;AAED;AACCm8D,gBAAAA,EAAE,CAAC0P,eAAH,CAAoBP,gBAApB,EAAsCtrE,KAAtC;AAfF;AAmBA;AAED;AAED;AAED;;AAED6qE,IAAAA,uBAAuB;AAEvB;;AAED,WAAS30C,OAAT,GAAmB;AAElB41C,IAAAA,KAAK;;AAEL,SAAM,MAAMC,UAAZ,IAA0BpD,aAA1B,EAA0C;AAEzC,YAAMoB,UAAU,GAAGpB,aAAa,CAAEoD,UAAF,CAAhC;;AAEA,WAAM,MAAMC,SAAZ,IAAyBjC,UAAzB,EAAsC;AAErC,cAAMC,QAAQ,GAAGD,UAAU,CAAEiC,SAAF,CAA3B;;AAEA,aAAM,MAAM9rB,SAAZ,IAAyB8pB,QAAzB,EAAoC;AAEnCJ,UAAAA,uBAAuB,CAAEI,QAAQ,CAAE9pB,SAAF,CAAR,CAAsB7+C,MAAxB,CAAvB;AAEA,iBAAO2oE,QAAQ,CAAE9pB,SAAF,CAAf;AAEA;;AAED,eAAO6pB,UAAU,CAAEiC,SAAF,CAAjB;AAEA;;AAED,aAAOrD,aAAa,CAAEoD,UAAF,CAApB;AAEA;AAED;;AAED,WAASE,uBAAT,CAAkC1gC,QAAlC,EAA6C;AAE5C,QAAKo9B,aAAa,CAAEp9B,QAAQ,CAAC3B,EAAX,CAAb,KAAiCjsC,SAAtC,EAAkD;AAElD,UAAMosE,UAAU,GAAGpB,aAAa,CAAEp9B,QAAQ,CAAC3B,EAAX,CAAhC;;AAEA,SAAM,MAAMoiC,SAAZ,IAAyBjC,UAAzB,EAAsC;AAErC,YAAMC,QAAQ,GAAGD,UAAU,CAAEiC,SAAF,CAA3B;;AAEA,WAAM,MAAM9rB,SAAZ,IAAyB8pB,QAAzB,EAAoC;AAEnCJ,QAAAA,uBAAuB,CAAEI,QAAQ,CAAE9pB,SAAF,CAAR,CAAsB7+C,MAAxB,CAAvB;AAEA,eAAO2oE,QAAQ,CAAE9pB,SAAF,CAAf;AAEA;;AAED,aAAO6pB,UAAU,CAAEiC,SAAF,CAAjB;AAEA;;AAED,WAAOrD,aAAa,CAAEp9B,QAAQ,CAAC3B,EAAX,CAApB;AAEA;;AAED,WAASsiC,sBAAT,CAAiClD,OAAjC,EAA2C;AAE1C,SAAM,MAAM+C,UAAZ,IAA0BpD,aAA1B,EAA0C;AAEzC,YAAMoB,UAAU,GAAGpB,aAAa,CAAEoD,UAAF,CAAhC;AAEA,UAAKhC,UAAU,CAAEf,OAAO,CAACp/B,EAAV,CAAV,KAA6BjsC,SAAlC,EAA8C;AAE9C,YAAMqsE,QAAQ,GAAGD,UAAU,CAAEf,OAAO,CAACp/B,EAAV,CAA3B;;AAEA,WAAM,MAAMsW,SAAZ,IAAyB8pB,QAAzB,EAAoC;AAEnCJ,QAAAA,uBAAuB,CAAEI,QAAQ,CAAE9pB,SAAF,CAAR,CAAsB7+C,MAAxB,CAAvB;AAEA,eAAO2oE,QAAQ,CAAE9pB,SAAF,CAAf;AAEA;;AAED,aAAO6pB,UAAU,CAAEf,OAAO,CAACp/B,EAAV,CAAjB;AAEA;AAED;;AAED,WAASkiC,KAAT,GAAiB;AAEhBK,IAAAA,iBAAiB;AAEjB,QAAKrD,YAAY,KAAKF,YAAtB,EAAqC;AAErCE,IAAAA,YAAY,GAAGF,YAAf;AACAO,IAAAA,qBAAqB,CAAEL,YAAY,CAACznE,MAAf,CAArB;AAEA,GA7gBsE,CA+gBvE;;;AAEA,WAAS8qE,iBAAT,GAA6B;AAE5BvD,IAAAA,YAAY,CAACr9B,QAAb,GAAwB,IAAxB;AACAq9B,IAAAA,YAAY,CAACI,OAAb,GAAuB,IAAvB;AACAJ,IAAAA,YAAY,CAAC1oB,SAAb,GAAyB,KAAzB;AAEA;;AAED,SAAO;AAEN6oB,IAAAA,KAAK,EAAEA,KAFD;AAGN+C,IAAAA,KAAK,EAAEA,KAHD;AAINK,IAAAA,iBAAiB,EAAEA,iBAJb;AAKNj2C,IAAAA,OAAO,EAAEA,OALH;AAMN+1C,IAAAA,uBAAuB,EAAEA,uBANnB;AAONC,IAAAA,sBAAsB,EAAEA,sBAPlB;AASN1B,IAAAA,cAAc,EAAEA,cATV;AAUNC,IAAAA,eAAe,EAAEA,eAVX;AAWNI,IAAAA,uBAAuB,EAAEA;AAXnB,GAAP;AAeA;AAED;;;;;AAIA,SAASuB,mBAAT,CAA8BjQ,EAA9B,EAAkCvJ,UAAlC,EAA8CyZ,IAA9C,EAAoDjQ,YAApD,EAAmE;AAElE,QAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AAEA,MAAIiQ,IAAJ;;AAEA,WAASC,OAAT,CAAkBvsE,KAAlB,EAA0B;AAEzBssE,IAAAA,IAAI,GAAGtsE,KAAP;AAEA;;AAED,WAASg2D,MAAT,CAAiB5gB,KAAjB,EAAwBpK,KAAxB,EAAgC;AAE/BmxB,IAAAA,EAAE,CAACqQ,UAAH,CAAeF,IAAf,EAAqBl3B,KAArB,EAA4BpK,KAA5B;AAEAqhC,IAAAA,IAAI,CAACtxC,MAAL,CAAaiQ,KAAb,EAAoBshC,IAApB;AAEA;;AAED,WAASG,eAAT,CAA0BlhC,QAA1B,EAAoC6J,KAApC,EAA2CpK,KAA3C,EAAkD0hC,SAAlD,EAA8D;AAE7D,QAAKA,SAAS,KAAK,CAAnB,EAAuB;AAEvB,QAAIjE,SAAJ,EAAekE,UAAf;;AAEA,QAAKtQ,QAAL,EAAgB;AAEfoM,MAAAA,SAAS,GAAGtM,EAAZ;AACAwQ,MAAAA,UAAU,GAAG,qBAAb;AAEA,KALD,MAKO;AAENlE,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,CAAZ;AACAmyD,MAAAA,UAAU,GAAG,0BAAb;;AAEA,UAAKlE,SAAS,KAAK,IAAnB,EAA0B;AAEzBp9C,QAAAA,OAAO,CAACyD,KAAR,CAAe,gIAAf;AACA;AAEA;AAED;;AAED25C,IAAAA,SAAS,CAAEkE,UAAF,CAAT,CAAyBL,IAAzB,EAA+Bl3B,KAA/B,EAAsCpK,KAAtC,EAA6C0hC,SAA7C;AAEAL,IAAAA,IAAI,CAACtxC,MAAL,CAAaiQ,KAAb,EAAoBshC,IAApB,EAA0BI,SAA1B;AAEA,GAjDiE,CAmDlE;;;AAEA,OAAKH,OAAL,GAAeA,OAAf;AACA,OAAKvW,MAAL,GAAcA,MAAd;AACA,OAAKyW,eAAL,GAAuBA,eAAvB;AAEA;AAED;;;;;AAIA,SAASG,iBAAT,CAA4BzQ,EAA5B,EAAgCvJ,UAAhC,EAA4CpnB,UAA5C,EAAyD;AAExD,MAAIqhC,aAAJ;;AAEA,WAASC,gBAAT,GAA4B;AAE3B,QAAKD,aAAa,KAAKlvE,SAAvB,EAAmC,OAAOkvE,aAAP;AAEnC,UAAMpE,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,gCAAhB,CAAlB;;AAEA,QAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzBoE,MAAAA,aAAa,GAAG1Q,EAAE,CAAC5sB,YAAH,CAAiBk5B,SAAS,CAACsE,8BAA3B,CAAhB;AAEA,KAJD,MAIO;AAENF,MAAAA,aAAa,GAAG,CAAhB;AAEA;;AAED,WAAOA,aAAP;AAEA;;AAED,WAASG,eAAT,CAA0BpwB,SAA1B,EAAsC;AAErC,QAAKA,SAAS,KAAK,OAAnB,EAA6B;AAE5B,UAAKuf,EAAE,CAAC8Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4CrwB,SAA5C,GAAwD,CAAxD,IACJuf,EAAE,CAAC8Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4CrwB,SAA5C,GAAwD,CADzD,EAC6D;AAE5D,eAAO,OAAP;AAEA;;AAEDA,MAAAA,SAAS,GAAG,SAAZ;AAEA;;AAED,QAAKA,SAAS,KAAK,SAAnB,EAA+B;AAE9B,UAAKuf,EAAE,CAAC8Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4CrwB,SAA5C,GAAwD,CAAxD,IACJuf,EAAE,CAAC8Q,wBAAH,CAA6B,KAA7B,EAAoC,KAApC,EAA4CrwB,SAA5C,GAAwD,CADzD,EAC6D;AAE5D,eAAO,SAAP;AAEA;AAED;;AAED,WAAO,MAAP;AAEA;AAED;;;AACA,QAAMyf,QAAQ,GAAK,OAAO6Q,sBAAP,KAAkC,WAAlC,IAAiD/Q,EAAE,YAAY+Q,sBAAjE,IACd,OAAOC,6BAAP,KAAyC,WAAzC,IAAwDhR,EAAE,YAAYgR,6BADzE;AAEA;;AAEA,MAAIvwB,SAAS,GAAGpR,UAAU,CAACoR,SAAX,KAAyBj/C,SAAzB,GAAqC6tC,UAAU,CAACoR,SAAhD,GAA4D,OAA5E;AACA,QAAMwwB,YAAY,GAAGJ,eAAe,CAAEpwB,SAAF,CAApC;;AAEA,MAAKwwB,YAAY,KAAKxwB,SAAtB,EAAkC;AAEjCvxB,IAAAA,OAAO,CAACC,IAAR,CAAc,sBAAd,EAAsCsxB,SAAtC,EAAiD,sBAAjD,EAAyEwwB,YAAzE,EAAuF,UAAvF;AACAxwB,IAAAA,SAAS,GAAGwwB,YAAZ;AAEA;;AAED,QAAMC,sBAAsB,GAAG7hC,UAAU,CAAC6hC,sBAAX,KAAsC,IAArE;AAEA,QAAMC,WAAW,GAAGnR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAApB;AACA,QAAMg+B,iBAAiB,GAAGpR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAA1B;AACA,QAAMi+B,cAAc,GAAGrR,EAAE,CAAC5sB,YAAH,CAAiB,IAAjB,CAAvB;AACA,QAAMk+B,cAAc,GAAGtR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAAvB;AAEA,QAAMm+B,aAAa,GAAGvR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAAtB;AACA,QAAMo+B,iBAAiB,GAAGxR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAA1B;AACA,QAAMq+B,WAAW,GAAGzR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAApB;AACA,QAAMs+B,mBAAmB,GAAG1R,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAA5B;AAEA,QAAMu+B,cAAc,GAAGP,iBAAiB,GAAG,CAA3C;AACA,QAAMQ,qBAAqB,GAAG1R,QAAQ,IAAI,CAAC,CAAEzJ,UAAU,CAACp4C,GAAX,CAAgB,mBAAhB,CAA7C;AACA,QAAMwzD,mBAAmB,GAAGF,cAAc,IAAIC,qBAA9C;AAEA,QAAME,UAAU,GAAG5R,QAAQ,GAAGF,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAAH,GAA8B,CAAzD;AAEA,SAAO;AAEN8sB,IAAAA,QAAQ,EAAEA,QAFJ;AAINyQ,IAAAA,gBAAgB,EAAEA,gBAJZ;AAKNE,IAAAA,eAAe,EAAEA,eALX;AAONpwB,IAAAA,SAAS,EAAEA,SAPL;AAQNywB,IAAAA,sBAAsB,EAAEA,sBARlB;AAUNC,IAAAA,WAAW,EAAEA,WAVP;AAWNC,IAAAA,iBAAiB,EAAEA,iBAXb;AAYNC,IAAAA,cAAc,EAAEA,cAZV;AAaNC,IAAAA,cAAc,EAAEA,cAbV;AAeNC,IAAAA,aAAa,EAAEA,aAfT;AAgBNC,IAAAA,iBAAiB,EAAEA,iBAhBb;AAiBNC,IAAAA,WAAW,EAAEA,WAjBP;AAkBNC,IAAAA,mBAAmB,EAAEA,mBAlBf;AAoBNC,IAAAA,cAAc,EAAEA,cApBV;AAqBNC,IAAAA,qBAAqB,EAAEA,qBArBjB;AAsBNC,IAAAA,mBAAmB,EAAEA,mBAtBf;AAwBNC,IAAAA,UAAU,EAAEA;AAxBN,GAAP;AA4BA;AAED;;;;;AAIA,SAASC,aAAT,GAAyB;AAExB,QAAMnxE,KAAK,GAAG,IAAd;AAEA,MAAIoxE,WAAW,GAAG,IAAlB;AAAA,MACCC,eAAe,GAAG,CADnB;AAAA,MAECC,oBAAoB,GAAG,KAFxB;AAAA,MAGCC,gBAAgB,GAAG,KAHpB;AAKA,QAAMz+B,KAAK,GAAG,IAAI6E,KAAJ,EAAd;AAAA,QACC65B,gBAAgB,GAAG,IAAI1/C,OAAJ,EADpB;AAAA,QAGCwkC,OAAO,GAAG;AAAErzD,IAAAA,KAAK,EAAE,IAAT;AAAe2mD,IAAAA,WAAW,EAAE;AAA5B,GAHX;AAKA,OAAK0M,OAAL,GAAeA,OAAf;AACA,OAAKmb,SAAL,GAAiB,CAAjB;AACA,OAAKC,eAAL,GAAuB,CAAvB;;AAEA,OAAKhqE,IAAL,GAAY,UAAWsyD,MAAX,EAAmB2X,mBAAnB,EAAwCtwC,MAAxC,EAAiD;AAE5D,UAAMiyB,OAAO,GACZ0G,MAAM,CAACx7D,MAAP,KAAkB,CAAlB,IACAmzE,mBADA,IAEA;AACA;AACAN,IAAAA,eAAe,KAAK,CAJpB,IAKAC,oBAND;AAQAA,IAAAA,oBAAoB,GAAGK,mBAAvB;AAEAP,IAAAA,WAAW,GAAGQ,aAAa,CAAE5X,MAAF,EAAU34B,MAAV,EAAkB,CAAlB,CAA3B;AACAgwC,IAAAA,eAAe,GAAGrX,MAAM,CAACx7D,MAAzB;AAEA,WAAO80D,OAAP;AAEA,GAjBD;;AAmBA,OAAKue,YAAL,GAAoB,YAAY;AAE/BN,IAAAA,gBAAgB,GAAG,IAAnB;AACAK,IAAAA,aAAa,CAAE,IAAF,CAAb;AAEA,GALD;;AAOA,OAAKE,UAAL,GAAkB,YAAY;AAE7BP,IAAAA,gBAAgB,GAAG,KAAnB;AACAQ,IAAAA,gBAAgB;AAEhB,GALD;;AAOA,OAAKC,QAAL,GAAgB,UAAWhY,MAAX,EAAmBva,gBAAnB,EAAqCC,WAArC,EAAkDre,MAAlD,EAA0DyN,KAA1D,EAAiEmjC,SAAjE,EAA6E;AAE5F,QAAK,CAAEX,oBAAF,IAA0BtX,MAAM,KAAK,IAArC,IAA6CA,MAAM,CAACx7D,MAAP,KAAkB,CAA/D,IAAoE+yE,gBAAgB,IAAI,CAAE7xB,WAA/F,EAA6G;AAE5G;AAEA,UAAK6xB,gBAAL,EAAwB;AAEvB;AAEAK,QAAAA,aAAa,CAAE,IAAF,CAAb;AAEA,OAND,MAMO;AAENG,QAAAA,gBAAgB;AAEhB;AAED,KAhBD,MAgBO;AAEN,YAAMG,OAAO,GAAGX,gBAAgB,GAAG,CAAH,GAAOF,eAAvC;AAAA,YACCc,OAAO,GAAGD,OAAO,GAAG,CADrB;AAGA,UAAIE,QAAQ,GAAGtjC,KAAK,CAACujC,aAAN,IAAuB,IAAtC;AAEA/b,MAAAA,OAAO,CAACrzD,KAAR,GAAgBmvE,QAAhB,CAPM,CAOoB;;AAE1BA,MAAAA,QAAQ,GAAGR,aAAa,CAAE5X,MAAF,EAAU34B,MAAV,EAAkB8wC,OAAlB,EAA2BF,SAA3B,CAAxB;;AAEA,WAAM,IAAIpyE,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKsyE,OAAvB,EAAgC,EAAGtyE,CAAnC,EAAuC;AAEtCuyE,QAAAA,QAAQ,CAAEvyE,CAAF,CAAR,GAAgBuxE,WAAW,CAAEvxE,CAAF,CAA3B;AAEA;;AAEDivC,MAAAA,KAAK,CAACujC,aAAN,GAAsBD,QAAtB;AACA,WAAKV,eAAL,GAAuBjyB,gBAAgB,GAAG,KAAKgyB,SAAR,GAAoB,CAA3D;AACA,WAAKA,SAAL,IAAkBS,OAAlB;AAEA;AAGD,GA1CD;;AA4CA,WAASH,gBAAT,GAA4B;AAE3B,QAAKzb,OAAO,CAACrzD,KAAR,KAAkBmuE,WAAvB,EAAqC;AAEpC9a,MAAAA,OAAO,CAACrzD,KAAR,GAAgBmuE,WAAhB;AACA9a,MAAAA,OAAO,CAAC1M,WAAR,GAAsBynB,eAAe,GAAG,CAAxC;AAEA;;AAEDrxE,IAAAA,KAAK,CAACyxE,SAAN,GAAkBJ,eAAlB;AACArxE,IAAAA,KAAK,CAAC0xE,eAAN,GAAwB,CAAxB;AAEA;;AAED,WAASE,aAAT,CAAwB5X,MAAxB,EAAgC34B,MAAhC,EAAwC5E,SAAxC,EAAmD61C,aAAnD,EAAmE;AAElE,QAAIC,OAAO,GAAGvY,MAAM,KAAK,IAAX,GAAkBA,MAAM,CAACx7D,MAAzB,GAAkC,CAAhD;AAAA,QACC4zE,QAAQ,GAAG,IADZ;;AAGA,QAAKG,OAAO,KAAK,CAAjB,EAAqB;AAEpBH,MAAAA,QAAQ,GAAG9b,OAAO,CAACrzD,KAAnB;;AAEA,UAAKqvE,aAAa,KAAK,IAAlB,IAA0BF,QAAQ,KAAK,IAA5C,EAAmD;AAElD,cAAMI,QAAQ,GAAG/1C,SAAS,GAAG81C,OAAO,GAAG,CAAvC;AAAA,cACCE,UAAU,GAAGpxC,MAAM,CAACC,kBADrB;AAGAkwC,QAAAA,gBAAgB,CAACn8C,eAAjB,CAAkCo9C,UAAlC;;AAEA,YAAKL,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,CAAC5zE,MAAT,GAAkBg0E,QAA5C,EAAuD;AAEtDJ,UAAAA,QAAQ,GAAG,IAAI/rB,YAAJ,CAAkBmsB,QAAlB,CAAX;AAEA;;AAED,aAAM,IAAI3yE,CAAC,GAAG,CAAR,EAAW6yE,EAAE,GAAGj2C,SAAtB,EAAiC58B,CAAC,KAAK0yE,OAAvC,EAAgD,EAAG1yE,CAAH,EAAM6yE,EAAE,IAAI,CAA5D,EAAgE;AAE/D5/B,UAAAA,KAAK,CAAC7jB,IAAN,CAAY+qC,MAAM,CAAEn6D,CAAF,CAAlB,EAA0B85B,YAA1B,CAAwC84C,UAAxC,EAAoDjB,gBAApD;AAEA1+B,UAAAA,KAAK,CAACtQ,MAAN,CAAa7hC,OAAb,CAAsByxE,QAAtB,EAAgCM,EAAhC;AACAN,UAAAA,QAAQ,CAAEM,EAAE,GAAG,CAAP,CAAR,GAAqB5/B,KAAK,CAACC,QAA3B;AAEA;AAED;;AAEDujB,MAAAA,OAAO,CAACrzD,KAAR,GAAgBmvE,QAAhB;AACA9b,MAAAA,OAAO,CAAC1M,WAAR,GAAsB,IAAtB;AAEA;;AAED5pD,IAAAA,KAAK,CAACyxE,SAAN,GAAkBc,OAAlB;AACAvyE,IAAAA,KAAK,CAAC0xE,eAAN,GAAwB,CAAxB;AAEA,WAAOU,QAAP;AAEA;AAED;AAED;;;;;AAIA,SAASO,eAAT,CAA0BvT,EAA1B,EAA+B;AAE9B,QAAMvJ,UAAU,GAAG,EAAnB;AAEA,SAAO;AAENp4C,IAAAA,GAAG,EAAE,UAAWtI,IAAX,EAAkB;AAEtB,UAAK0gD,UAAU,CAAE1gD,IAAF,CAAV,KAAuBvU,SAA5B,EAAwC;AAEvC,eAAOi1D,UAAU,CAAE1gD,IAAF,CAAjB;AAEA;;AAED,UAAIu2D,SAAJ;;AAEA,cAASv2D,IAAT;AAEC,aAAK,qBAAL;AACCu2D,UAAAA,SAAS,GAAGtM,EAAE,CAACwT,YAAH,CAAiB,qBAAjB,KAA4CxT,EAAE,CAACwT,YAAH,CAAiB,yBAAjB,CAA5C,IAA4FxT,EAAE,CAACwT,YAAH,CAAiB,4BAAjB,CAAxG;AACA;;AAED,aAAK,gCAAL;AACClH,UAAAA,SAAS,GAAGtM,EAAE,CAACwT,YAAH,CAAiB,gCAAjB,KAAuDxT,EAAE,CAACwT,YAAH,CAAiB,oCAAjB,CAAvD,IAAkHxT,EAAE,CAACwT,YAAH,CAAiB,uCAAjB,CAA9H;AACA;;AAED,aAAK,+BAAL;AACClH,UAAAA,SAAS,GAAGtM,EAAE,CAACwT,YAAH,CAAiB,+BAAjB,KAAsDxT,EAAE,CAACwT,YAAH,CAAiB,mCAAjB,CAAtD,IAAgHxT,EAAE,CAACwT,YAAH,CAAiB,sCAAjB,CAA5H;AACA;;AAED,aAAK,gCAAL;AACClH,UAAAA,SAAS,GAAGtM,EAAE,CAACwT,YAAH,CAAiB,gCAAjB,KAAuDxT,EAAE,CAACwT,YAAH,CAAiB,uCAAjB,CAAnE;AACA;;AAED;AACClH,UAAAA,SAAS,GAAGtM,EAAE,CAACwT,YAAH,CAAiBz9D,IAAjB,CAAZ;AAnBF;;AAuBA,UAAKu2D,SAAS,KAAK,IAAnB,EAA0B;AAEzBp9C,QAAAA,OAAO,CAACC,IAAR,CAAc,0BAA0BpZ,IAA1B,GAAiC,2BAA/C;AAEA;;AAED0gD,MAAAA,UAAU,CAAE1gD,IAAF,CAAV,GAAqBu2D,SAArB;AAEA,aAAOA,SAAP;AAEA;AA7CK,GAAP;AAiDA;AAED;;;;;AAIA,SAASmH,eAAT,CAA0BzT,EAA1B,EAA8BpW,UAA9B,EAA0CsmB,IAA1C,EAAgD1D,aAAhD,EAAgE;AAE/D,QAAM/9B,UAAU,GAAG,IAAI2xB,OAAJ,EAAnB;AACA,QAAMsT,mBAAmB,GAAG,IAAItT,OAAJ,EAA5B;;AAEA,WAASuT,iBAAT,CAA4BzqE,KAA5B,EAAoC;AAEnC,UAAMkmC,QAAQ,GAAGlmC,KAAK,CAACtJ,MAAvB;AACA,UAAMg0E,cAAc,GAAGnlC,UAAU,CAACpwB,GAAX,CAAgB+wB,QAAhB,CAAvB;;AAEA,QAAKwkC,cAAc,CAAC5pE,KAAf,KAAyB,IAA9B,EAAqC;AAEpC4/C,MAAAA,UAAU,CAACzvC,MAAX,CAAmBy5D,cAAc,CAAC5pE,KAAlC;AAEA;;AAED,SAAM,MAAM+L,IAAZ,IAAoB69D,cAAc,CAAChqB,UAAnC,EAAgD;AAE/CA,MAAAA,UAAU,CAACzvC,MAAX,CAAmBy5D,cAAc,CAAChqB,UAAf,CAA2B7zC,IAA3B,CAAnB;AAEA;;AAEDq5B,IAAAA,QAAQ,CAAC7lC,mBAAT,CAA8B,SAA9B,EAAyCoqE,iBAAzC;AAEAllC,IAAAA,UAAU,CAACwyB,MAAX,CAAmB7xB,QAAnB;AAEA,UAAM/c,SAAS,GAAGqhD,mBAAmB,CAACr1D,GAApB,CAAyBu1D,cAAzB,CAAlB;;AAEA,QAAKvhD,SAAL,EAAiB;AAEhBu3B,MAAAA,UAAU,CAACzvC,MAAX,CAAmBkY,SAAnB;AACAqhD,MAAAA,mBAAmB,CAACzS,MAApB,CAA4B2S,cAA5B;AAEA;;AAEDpH,IAAAA,aAAa,CAACsD,uBAAd,CAAuC1gC,QAAvC;;AAEA,QAAKA,QAAQ,CAAC2/B,yBAAT,KAAuC,IAA5C,EAAmD;AAElD,aAAO3/B,QAAQ,CAACigC,iBAAhB;AAEA,KApCkC,CAsCnC;;;AAEAa,IAAAA,IAAI,CAAC2D,MAAL,CAAYplC,UAAZ;AAEA;;AAED,WAASpwB,GAAT,CAAcnZ,MAAd,EAAsBkqC,QAAtB,EAAiC;AAEhC,QAAIwkC,cAAc,GAAGnlC,UAAU,CAACpwB,GAAX,CAAgB+wB,QAAhB,CAArB;AAEA,QAAKwkC,cAAL,EAAsB,OAAOA,cAAP;AAEtBxkC,IAAAA,QAAQ,CAAC/lC,gBAAT,CAA2B,SAA3B,EAAsCsqE,iBAAtC;;AAEA,QAAKvkC,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC4pB,MAAAA,cAAc,GAAGxkC,QAAjB;AAEA,KAJD,MAIO,IAAKA,QAAQ,CAACyb,UAAd,EAA2B;AAEjC,UAAKzb,QAAQ,CAAC0kC,eAAT,KAA6BtyE,SAAlC,EAA8C;AAE7C4tC,QAAAA,QAAQ,CAAC0kC,eAAT,GAA2B,IAAInqB,cAAJ,GAAqBpX,aAArB,CAAoCrtC,MAApC,CAA3B;AAEA;;AAED0uE,MAAAA,cAAc,GAAGxkC,QAAQ,CAAC0kC,eAA1B;AAEA;;AAEDrlC,IAAAA,UAAU,CAACxf,GAAX,CAAgBmgB,QAAhB,EAA0BwkC,cAA1B;AAEA1D,IAAAA,IAAI,CAAC2D,MAAL,CAAYplC,UAAZ;AAEA,WAAOmlC,cAAP;AAEA;;AAED,WAASh1C,MAAT,CAAiBwQ,QAAjB,EAA4B;AAE3B,UAAM8+B,kBAAkB,GAAG9+B,QAAQ,CAACwa,UAApC,CAF2B,CAI3B;;AAEA,SAAM,MAAM7zC,IAAZ,IAAoBm4D,kBAApB,EAAyC;AAExCtkB,MAAAA,UAAU,CAAChrB,MAAX,CAAmBsvC,kBAAkB,CAAEn4D,IAAF,CAArC,EAA+C,KAA/C;AAEA,KAV0B,CAY3B;;;AAEA,UAAM8zC,eAAe,GAAGza,QAAQ,CAACya,eAAjC;;AAEA,SAAM,MAAM9zC,IAAZ,IAAoB8zC,eAApB,EAAsC;AAErC,YAAMj+B,KAAK,GAAGi+B,eAAe,CAAE9zC,IAAF,CAA7B;;AAEA,WAAM,IAAItV,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+qB,KAAK,CAACxsB,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhDmpD,QAAAA,UAAU,CAAChrB,MAAX,CAAmBhT,KAAK,CAAEnrB,CAAF,CAAxB,EAA+B,KAA/B;AAEA;AAED;AAED;;AAED,WAASszE,wBAAT,CAAmC3kC,QAAnC,EAA8C;AAE7C,UAAM4d,OAAO,GAAG,EAAhB;AAEA,UAAMgnB,aAAa,GAAG5kC,QAAQ,CAACplC,KAA/B;AACA,UAAMiqE,gBAAgB,GAAG7kC,QAAQ,CAACwa,UAAT,CAAoB3iD,QAA7C;AACA,QAAIiyB,OAAO,GAAG,CAAd;;AAEA,QAAK86C,aAAa,KAAK,IAAvB,EAA8B;AAE7B,YAAMpoD,KAAK,GAAGooD,aAAa,CAACpoD,KAA5B;AACAsN,MAAAA,OAAO,GAAG86C,aAAa,CAAC96C,OAAxB;;AAEA,WAAM,IAAIz4B,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+qB,KAAK,CAACxsB,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,IAAI,CAA/C,EAAmD;AAElD,cAAM5B,CAAC,GAAG+sB,KAAK,CAAEnrB,CAAC,GAAG,CAAN,CAAf;AACA,cAAM7B,CAAC,GAAGgtB,KAAK,CAAEnrB,CAAC,GAAG,CAAN,CAAf;AACA,cAAM6C,CAAC,GAAGsoB,KAAK,CAAEnrB,CAAC,GAAG,CAAN,CAAf;AAEAusD,QAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoBA,CAApB,EAAuB0E,CAAvB,EAA0BA,CAA1B,EAA6BzE,CAA7B;AAEA;AAED,KAfD,MAeO;AAEN,YAAM+sB,KAAK,GAAGqoD,gBAAgB,CAACroD,KAA/B;AACAsN,MAAAA,OAAO,GAAG+6C,gBAAgB,CAAC/6C,OAA3B;;AAEA,WAAM,IAAIz4B,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAK+qB,KAAK,CAACxsB,MAAN,GAAe,CAAjB,GAAuB,CAA5C,EAA+CqB,CAAC,GAAGI,CAAnD,EAAsDJ,CAAC,IAAI,CAA3D,EAA+D;AAE9D,cAAM5B,CAAC,GAAG4B,CAAC,GAAG,CAAd;AACA,cAAM7B,CAAC,GAAG6B,CAAC,GAAG,CAAd;AACA,cAAM6C,CAAC,GAAG7C,CAAC,GAAG,CAAd;AAEAusD,QAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoBA,CAApB,EAAuB0E,CAAvB,EAA0BA,CAA1B,EAA6BzE,CAA7B;AAEA;AAED;;AAED,UAAMwzB,SAAS,GAAG,KAAM82B,QAAQ,CAAE6D,OAAF,CAAR,GAAsB,KAAtB,GAA8BlG,qBAA9B,GAAsDJ,qBAA5D,EAAqFsG,OAArF,EAA8F,CAA9F,CAAlB;AACA36B,IAAAA,SAAS,CAAC6G,OAAV,GAAoBA,OAApB,CAzC6C,CA2C7C;AAEA;;AAEA,UAAMg7C,iBAAiB,GAAGR,mBAAmB,CAACr1D,GAApB,CAAyB+wB,QAAzB,CAA1B;AAEA,QAAK8kC,iBAAL,EAAyBtqB,UAAU,CAACzvC,MAAX,CAAmB+5D,iBAAnB,EAjDoB,CAmD7C;;AAEAR,IAAAA,mBAAmB,CAACzkD,GAApB,CAAyBmgB,QAAzB,EAAmC/c,SAAnC;AAEA;;AAED,WAAS8hD,qBAAT,CAAgC/kC,QAAhC,EAA2C;AAE1C,UAAMglC,gBAAgB,GAAGV,mBAAmB,CAACr1D,GAApB,CAAyB+wB,QAAzB,CAAzB;;AAEA,QAAKglC,gBAAL,EAAwB;AAEvB,YAAMJ,aAAa,GAAG5kC,QAAQ,CAACplC,KAA/B;;AAEA,UAAKgqE,aAAa,KAAK,IAAvB,EAA8B;AAE7B;AAEA,YAAKI,gBAAgB,CAACl7C,OAAjB,GAA2B86C,aAAa,CAAC96C,OAA9C,EAAwD;AAEvD66C,UAAAA,wBAAwB,CAAE3kC,QAAF,CAAxB;AAEA;AAED;AAED,KAhBD,MAgBO;AAEN2kC,MAAAA,wBAAwB,CAAE3kC,QAAF,CAAxB;AAEA;;AAED,WAAOskC,mBAAmB,CAACr1D,GAApB,CAAyB+wB,QAAzB,CAAP;AAEA;;AAED,SAAO;AAEN/wB,IAAAA,GAAG,EAAEA,GAFC;AAGNugB,IAAAA,MAAM,EAAEA,MAHF;AAKNu1C,IAAAA,qBAAqB,EAAEA;AALjB,GAAP;AASA;AAED;;;;;AAIA,SAASE,0BAAT,CAAqCrU,EAArC,EAAyCvJ,UAAzC,EAAqDyZ,IAArD,EAA2DjQ,YAA3D,EAA0E;AAEzE,QAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AAEA,MAAIiQ,IAAJ;;AAEA,WAASC,OAAT,CAAkBvsE,KAAlB,EAA0B;AAEzBssE,IAAAA,IAAI,GAAGtsE,KAAP;AAEA;;AAED,MAAI+G,IAAJ,EAAU81D,eAAV;;AAEA,WAASxW,QAAT,CAAmBrmD,KAAnB,EAA2B;AAE1B+G,IAAAA,IAAI,GAAG/G,KAAK,CAAC+G,IAAb;AACA81D,IAAAA,eAAe,GAAG78D,KAAK,CAAC68D,eAAxB;AAEA;;AAED,WAAS7G,MAAT,CAAiB5gB,KAAjB,EAAwBpK,KAAxB,EAAgC;AAE/BmxB,IAAAA,EAAE,CAACsU,YAAH,CAAiBnE,IAAjB,EAAuBthC,KAAvB,EAA8BjkC,IAA9B,EAAoCquC,KAAK,GAAGynB,eAA5C;AAEAwP,IAAAA,IAAI,CAACtxC,MAAL,CAAaiQ,KAAb,EAAoBshC,IAApB;AAEA;;AAED,WAASG,eAAT,CAA0BlhC,QAA1B,EAAoC6J,KAApC,EAA2CpK,KAA3C,EAAkD0hC,SAAlD,EAA8D;AAE7D,QAAKA,SAAS,KAAK,CAAnB,EAAuB;AAEvB,QAAIjE,SAAJ,EAAekE,UAAf;;AAEA,QAAKtQ,QAAL,EAAgB;AAEfoM,MAAAA,SAAS,GAAGtM,EAAZ;AACAwQ,MAAAA,UAAU,GAAG,uBAAb;AAEA,KALD,MAKO;AAENlE,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,CAAZ;AACAmyD,MAAAA,UAAU,GAAG,4BAAb;;AAEA,UAAKlE,SAAS,KAAK,IAAnB,EAA0B;AAEzBp9C,QAAAA,OAAO,CAACyD,KAAR,CAAe,uIAAf;AACA;AAEA;AAED;;AAED25C,IAAAA,SAAS,CAAEkE,UAAF,CAAT,CAAyBL,IAAzB,EAA+BthC,KAA/B,EAAsCjkC,IAAtC,EAA4CquC,KAAK,GAAGynB,eAApD,EAAqE6P,SAArE;AAEAL,IAAAA,IAAI,CAACtxC,MAAL,CAAaiQ,KAAb,EAAoBshC,IAApB,EAA0BI,SAA1B;AAEA,GA1DwE,CA4DzE;;;AAEA,OAAKH,OAAL,GAAeA,OAAf;AACA,OAAKlmB,QAAL,GAAgBA,QAAhB;AACA,OAAK2P,MAAL,GAAcA,MAAd;AACA,OAAKyW,eAAL,GAAuBA,eAAvB;AAEA;AAED;;;;;AAIA,SAASiE,SAAT,CAAoBvU,EAApB,EAAyB;AAExB,QAAM6T,MAAM,GAAG;AACdplC,IAAAA,UAAU,EAAE,CADE;AAEd/U,IAAAA,QAAQ,EAAE;AAFI,GAAf;AAKA,QAAMmgC,MAAM,GAAG;AACd6F,IAAAA,KAAK,EAAE,CADO;AAEd8U,IAAAA,KAAK,EAAE,CAFO;AAGdC,IAAAA,SAAS,EAAE,CAHG;AAIdziC,IAAAA,MAAM,EAAE,CAJM;AAKd0iC,IAAAA,KAAK,EAAE;AALO,GAAf;;AAQA,WAAS91C,MAAT,CAAiBiQ,KAAjB,EAAwBshC,IAAxB,EAA8BwE,aAA9B,EAA8C;AAE7CA,IAAAA,aAAa,GAAGA,aAAa,IAAI,CAAjC;AAEA9a,IAAAA,MAAM,CAAC2a,KAAP;;AAEA,YAASrE,IAAT;AAEC,WAAK,CAAL;AACCtW,QAAAA,MAAM,CAAC4a,SAAP,IAAoBE,aAAa,IAAK9lC,KAAK,GAAG,CAAb,CAAjC;AACA;;AAED,WAAK,CAAL;AACCgrB,QAAAA,MAAM,CAAC6a,KAAP,IAAgBC,aAAa,IAAK9lC,KAAK,GAAG,CAAb,CAA7B;AACA;;AAED,WAAK,CAAL;AACCgrB,QAAAA,MAAM,CAAC6a,KAAP,IAAgBC,aAAa,IAAK9lC,KAAK,GAAG,CAAb,CAA7B;AACA;;AAED,WAAK,CAAL;AACCgrB,QAAAA,MAAM,CAAC6a,KAAP,IAAgBC,aAAa,GAAG9lC,KAAhC;AACA;;AAED,WAAK,CAAL;AACCgrB,QAAAA,MAAM,CAAC7nB,MAAP,IAAiB2iC,aAAa,GAAG9lC,KAAjC;AACA;;AAED;AACC3f,QAAAA,OAAO,CAACyD,KAAR,CAAe,qCAAf,EAAsDw9C,IAAtD;AACA;AAxBF;AA4BA;;AAED,WAASR,KAAT,GAAiB;AAEhB9V,IAAAA,MAAM,CAAC6F,KAAP;AACA7F,IAAAA,MAAM,CAAC2a,KAAP,GAAe,CAAf;AACA3a,IAAAA,MAAM,CAAC4a,SAAP,GAAmB,CAAnB;AACA5a,IAAAA,MAAM,CAAC7nB,MAAP,GAAgB,CAAhB;AACA6nB,IAAAA,MAAM,CAAC6a,KAAP,GAAe,CAAf;AAEA;;AAED,SAAO;AACNb,IAAAA,MAAM,EAAEA,MADF;AAENha,IAAAA,MAAM,EAAEA,MAFF;AAGN+a,IAAAA,QAAQ,EAAE,IAHJ;AAINC,IAAAA,SAAS,EAAE,IAJL;AAKNlF,IAAAA,KAAK,EAAEA,KALD;AAMN/wC,IAAAA,MAAM,EAAEA;AANF,GAAP;AASA;AAED;;;;;AAIA,SAASk2C,aAAT,CAAwBj2E,CAAxB,EAA2BD,CAA3B,EAA+B;AAE9B,SAAOC,CAAC,CAAE,CAAF,CAAD,GAASD,CAAC,CAAE,CAAF,CAAjB;AAEA;;AAED,SAASm2E,gBAAT,CAA2Bl2E,CAA3B,EAA8BD,CAA9B,EAAkC;AAEjC,SAAOH,IAAI,CAACwO,GAAL,CAAUrO,CAAC,CAAE,CAAF,CAAX,IAAqBH,IAAI,CAACwO,GAAL,CAAUpO,CAAC,CAAE,CAAF,CAAX,CAA5B;AAEA;;AAED,SAASm2E,iBAAT,CAA4BhV,EAA5B,EAAiC;AAEhC,QAAMiV,cAAc,GAAG,EAAvB;AACA,QAAMnlB,eAAe,GAAG,IAAI7I,YAAJ,CAAkB,CAAlB,CAAxB;AAEA,QAAMiuB,cAAc,GAAG,EAAvB;;AAEA,OAAM,IAAIz0E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9By0E,IAAAA,cAAc,CAAEz0E,CAAF,CAAd,GAAsB,CAAEA,CAAF,EAAK,CAAL,CAAtB;AAEA;;AAED,WAASm+B,MAAT,CAAiB15B,MAAjB,EAAyBkqC,QAAzB,EAAmCG,QAAnC,EAA6Cs9B,OAA7C,EAAuD;AAEtD,UAAMsI,gBAAgB,GAAGjwE,MAAM,CAACypD,qBAAhC,CAFsD,CAItD;AACA;;AAEA,UAAMvvD,MAAM,GAAG+1E,gBAAgB,KAAK3zE,SAArB,GAAiC,CAAjC,GAAqC2zE,gBAAgB,CAAC/1E,MAArE;AAEA,QAAIg2E,UAAU,GAAGH,cAAc,CAAE7lC,QAAQ,CAAC3B,EAAX,CAA/B;;AAEA,QAAK2nC,UAAU,KAAK5zE,SAApB,EAAgC;AAE/B;AAEA4zE,MAAAA,UAAU,GAAG,EAAb;;AAEA,WAAM,IAAI30E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGrB,MAArB,EAA6BqB,CAAC,EAA9B,EAAoC;AAEnC20E,QAAAA,UAAU,CAAE30E,CAAF,CAAV,GAAkB,CAAEA,CAAF,EAAK,CAAL,CAAlB;AAEA;;AAEDw0E,MAAAA,cAAc,CAAE7lC,QAAQ,CAAC3B,EAAX,CAAd,GAAgC2nC,UAAhC;AAEA,KAzBqD,CA2BtD;;;AAEA,SAAM,IAAI30E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGrB,MAArB,EAA6BqB,CAAC,EAA9B,EAAoC;AAEnC,YAAMsvD,SAAS,GAAGqlB,UAAU,CAAE30E,CAAF,CAA5B;AAEAsvD,MAAAA,SAAS,CAAE,CAAF,CAAT,GAAiBtvD,CAAjB;AACAsvD,MAAAA,SAAS,CAAE,CAAF,CAAT,GAAiBolB,gBAAgB,CAAE10E,CAAF,CAAjC;AAEA;;AAED20E,IAAAA,UAAU,CAACpiB,IAAX,CAAiB+hB,gBAAjB;;AAEA,SAAM,IAAIt0E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,UAAKA,CAAC,GAAGrB,MAAJ,IAAcg2E,UAAU,CAAE30E,CAAF,CAAV,CAAiB,CAAjB,CAAnB,EAA0C;AAEzCy0E,QAAAA,cAAc,CAAEz0E,CAAF,CAAd,CAAqB,CAArB,IAA2B20E,UAAU,CAAE30E,CAAF,CAAV,CAAiB,CAAjB,CAA3B;AACAy0E,QAAAA,cAAc,CAAEz0E,CAAF,CAAd,CAAqB,CAArB,IAA2B20E,UAAU,CAAE30E,CAAF,CAAV,CAAiB,CAAjB,CAA3B;AAEA,OALD,MAKO;AAENy0E,QAAAA,cAAc,CAAEz0E,CAAF,CAAd,CAAqB,CAArB,IAA2Bud,MAAM,CAACq3D,gBAAlC;AACAH,QAAAA,cAAc,CAAEz0E,CAAF,CAAd,CAAqB,CAArB,IAA2B,CAA3B;AAEA;AAED;;AAEDy0E,IAAAA,cAAc,CAACliB,IAAf,CAAqB8hB,aAArB;AAEA,UAAM3wB,YAAY,GAAG5U,QAAQ,CAAC4U,YAAT,IAAyB/U,QAAQ,CAACya,eAAT,CAAyB5iD,QAAvE;AACA,UAAMm9C,YAAY,GAAG7U,QAAQ,CAAC6U,YAAT,IAAyBhV,QAAQ,CAACya,eAAT,CAAyBzmB,MAAvE;AAEA,QAAIkyC,kBAAkB,GAAG,CAAzB;;AAEA,SAAM,IAAI70E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,YAAMsvD,SAAS,GAAGmlB,cAAc,CAAEz0E,CAAF,CAAhC;AACA,YAAMuJ,KAAK,GAAG+lD,SAAS,CAAE,CAAF,CAAvB;AACA,YAAMlsD,KAAK,GAAGksD,SAAS,CAAE,CAAF,CAAvB;;AAEA,UAAK/lD,KAAK,KAAKgU,MAAM,CAACq3D,gBAAjB,IAAqCxxE,KAA1C,EAAkD;AAEjD,YAAKsgD,YAAY,IAAI/U,QAAQ,CAAC+a,YAAT,CAAuB,gBAAgB1pD,CAAvC,MAA+C0jD,YAAY,CAAEn6C,KAAF,CAAhF,EAA4F;AAE3FolC,UAAAA,QAAQ,CAAClkC,YAAT,CAAuB,gBAAgBzK,CAAvC,EAA0C0jD,YAAY,CAAEn6C,KAAF,CAAtD;AAEA;;AAED,YAAKo6C,YAAY,IAAIhV,QAAQ,CAAC+a,YAAT,CAAuB,gBAAgB1pD,CAAvC,MAA+C2jD,YAAY,CAAEp6C,KAAF,CAAhF,EAA4F;AAE3FolC,UAAAA,QAAQ,CAAClkC,YAAT,CAAuB,gBAAgBzK,CAAvC,EAA0C2jD,YAAY,CAAEp6C,KAAF,CAAtD;AAEA;;AAED8lD,QAAAA,eAAe,CAAErvD,CAAF,CAAf,GAAuBoD,KAAvB;AACAyxE,QAAAA,kBAAkB,IAAIzxE,KAAtB;AAEA,OAjBD,MAiBO;AAEN,YAAKsgD,YAAY,IAAI/U,QAAQ,CAAC+a,YAAT,CAAuB,gBAAgB1pD,CAAvC,MAA+Ce,SAApE,EAAgF;AAE/E4tC,UAAAA,QAAQ,CAACgb,eAAT,CAA0B,gBAAgB3pD,CAA1C;AAEA;;AAED,YAAK2jD,YAAY,IAAIhV,QAAQ,CAAC+a,YAAT,CAAuB,gBAAgB1pD,CAAvC,MAA+Ce,SAApE,EAAgF;AAE/E4tC,UAAAA,QAAQ,CAACgb,eAAT,CAA0B,gBAAgB3pD,CAA1C;AAEA;;AAEDqvD,QAAAA,eAAe,CAAErvD,CAAF,CAAf,GAAuB,CAAvB;AAEA;AAED,KAxGqD,CA0GtD;AACA;AACA;;;AACA,UAAM80E,kBAAkB,GAAGnmC,QAAQ,CAAC0a,oBAAT,GAAgC,CAAhC,GAAoC,IAAIwrB,kBAAnE;AAEAzI,IAAAA,OAAO,CAAC2I,WAAR,GAAsBpqE,QAAtB,CAAgC40D,EAAhC,EAAoC,0BAApC,EAAgEuV,kBAAhE;AACA1I,IAAAA,OAAO,CAAC2I,WAAR,GAAsBpqE,QAAtB,CAAgC40D,EAAhC,EAAoC,uBAApC,EAA6DlQ,eAA7D;AAEA;;AAED,SAAO;AAENlxB,IAAAA,MAAM,EAAEA;AAFF,GAAP;AAMA;AAED;;;;;AAIA,SAAS62C,YAAT,CAAuBzV,EAAvB,EAA2BvxB,UAA3B,EAAuCmb,UAAvC,EAAmDsmB,IAAnD,EAA0D;AAEzD,MAAIwF,SAAS,GAAG,IAAItV,OAAJ,EAAhB;;AAEA,WAASxhC,MAAT,CAAiB15B,MAAjB,EAA0B;AAEzB,UAAMw6D,KAAK,GAAGwQ,IAAI,CAACrW,MAAL,CAAY6F,KAA1B;AAEA,UAAMtwB,QAAQ,GAAGlqC,MAAM,CAACkqC,QAAxB;AACA,UAAMwkC,cAAc,GAAGnlC,UAAU,CAACpwB,GAAX,CAAgBnZ,MAAhB,EAAwBkqC,QAAxB,CAAvB,CALyB,CAOzB;;AAEA,QAAKsmC,SAAS,CAACr3D,GAAV,CAAeu1D,cAAf,MAAoClU,KAAzC,EAAiD;AAEhD,UAAKtwB,QAAQ,CAACyb,UAAd,EAA2B;AAE1B+oB,QAAAA,cAAc,CAAC9oB,gBAAf,CAAiC5lD,MAAjC;AAEA;;AAEDupC,MAAAA,UAAU,CAAC7P,MAAX,CAAmBg1C,cAAnB;AAEA8B,MAAAA,SAAS,CAACzmD,GAAV,CAAe2kD,cAAf,EAA+BlU,KAA/B;AAEA;;AAED,QAAKx6D,MAAM,CAAC0pC,eAAZ,EAA8B;AAE7Bgb,MAAAA,UAAU,CAAChrB,MAAX,CAAmB15B,MAAM,CAAC4pC,cAA1B,EAA0C,KAA1C;AAEA;;AAED,WAAO8kC,cAAP;AAEA;;AAED,WAAS75C,OAAT,GAAmB;AAElB27C,IAAAA,SAAS,GAAG,IAAItV,OAAJ,EAAZ;AAEA;;AAED,SAAO;AAENxhC,IAAAA,MAAM,EAAEA,MAFF;AAGN7E,IAAAA,OAAO,EAAEA;AAHH,GAAP;AAOA;AAED;;;;;AAIA,SAAS47C,WAAT,CAAsB77C,MAAtB,EAA8B9B,OAA9B,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,SAArD,EAAgEC,SAAhE,EAA2EC,MAA3E,EAAmFztB,IAAnF,EAAyF0tB,UAAzF,EAAqGC,QAArG,EAAgH;AAE/GuB,EAAAA,MAAM,GAAGA,MAAM,KAAKt4B,SAAX,GAAuBs4B,MAAvB,GAAgC,EAAzC;AACA9B,EAAAA,OAAO,GAAGA,OAAO,KAAKx2B,SAAZ,GAAwBw2B,OAAxB,GAAkClV,qBAA5C;AACAuV,EAAAA,MAAM,GAAGA,MAAM,KAAK72B,SAAX,GAAuB62B,MAAvB,GAAgCvT,SAAzC;AAEAiT,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoBg6B,MAApB,EAA4B9B,OAA5B,EAAqCC,KAArC,EAA4CC,KAA5C,EAAmDC,SAAnD,EAA8DC,SAA9D,EAAyEC,MAAzE,EAAiFztB,IAAjF,EAAuF0tB,UAAvF,EAAmGC,QAAnG;AAEA,OAAKS,KAAL,GAAa,KAAb;AAEA;;AAED28C,WAAW,CAACp2E,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAAxB;AACAo2E,WAAW,CAACp2E,SAAZ,CAAsBoC,WAAtB,GAAoCg0E,WAApC;AAEAA,WAAW,CAACp2E,SAAZ,CAAsBssE,aAAtB,GAAsC,IAAtC;AAEA1rE,MAAM,CAACkE,cAAP,CAAuBsxE,WAAW,CAACp2E,SAAnC,EAA8C,QAA9C,EAAwD;AAEvD8e,EAAAA,GAAG,EAAE,YAAY;AAEhB,WAAO,KAAK8Y,KAAZ;AAEA,GANsD;AAQvDlI,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,SAAKszB,KAAL,GAAatzB,KAAb;AAEA;AAZsD,CAAxD;AAgBA;;;;AAIA,SAAS+xE,kBAAT,CAA6BhmC,IAA7B,EAAmCxlC,KAAnC,EAA0CC,MAA1C,EAAkDkqD,KAAlD,EAA0D;AAEzDx8B,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoB,IAApB;AAEA,OAAKq3B,KAAL,GAAa;AAAEyY,IAAAA,IAAI,EAAEA,IAAI,IAAI,IAAhB;AAAsBxlC,IAAAA,KAAK,EAAEA,KAAK,IAAI,CAAtC;AAAyCC,IAAAA,MAAM,EAAEA,MAAM,IAAI,CAA3D;AAA8DkqD,IAAAA,KAAK,EAAEA,KAAK,IAAI;AAA9E,GAAb;AAEA,OAAKp8B,SAAL,GAAiB5U,aAAjB;AACA,OAAK6U,SAAL,GAAiB7U,aAAjB;AAEA,OAAKsyD,KAAL,GAAaxyD,mBAAb;AAEA,OAAKyV,eAAL,GAAuB,KAAvB;AACA,OAAKE,KAAL,GAAa,KAAb;AAEA,OAAKwxB,WAAL,GAAmB,IAAnB;AAEA;;AAEDorB,kBAAkB,CAACr2E,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAA/B;AACAq2E,kBAAkB,CAACr2E,SAAnB,CAA6BoC,WAA7B,GAA2Ci0E,kBAA3C;AACAA,kBAAkB,CAACr2E,SAAnB,CAA6Bu2E,oBAA7B,GAAoD,IAApD;AAEA;;;;AAIA,SAASC,aAAT,CAAwBnmC,IAAxB,EAA8BxlC,KAA9B,EAAqCC,MAArC,EAA6CkqD,KAA7C,EAAqD;AAEpD;AACA;AACA;AACA;AACA;AACA;AACA;AAEAx8B,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoB,IAApB;AAEA,OAAKq3B,KAAL,GAAa;AAAEyY,IAAAA,IAAI,EAAEA,IAAI,IAAI,IAAhB;AAAsBxlC,IAAAA,KAAK,EAAEA,KAAK,IAAI,CAAtC;AAAyCC,IAAAA,MAAM,EAAEA,MAAM,IAAI,CAA3D;AAA8DkqD,IAAAA,KAAK,EAAEA,KAAK,IAAI;AAA9E,GAAb;AAEA,OAAKp8B,SAAL,GAAiB5U,aAAjB;AACA,OAAK6U,SAAL,GAAiB7U,aAAjB;AAEA,OAAKsyD,KAAL,GAAaxyD,mBAAb;AAEA,OAAKyV,eAAL,GAAuB,KAAvB;AACA,OAAKE,KAAL,GAAa,KAAb;AAEA,OAAKwxB,WAAL,GAAmB,IAAnB;AAGA;;AAEDurB,aAAa,CAACx2E,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAA1B;AACAw2E,aAAa,CAACx2E,SAAd,CAAwBoC,WAAxB,GAAsCo0E,aAAtC;AACAA,aAAa,CAACx2E,SAAd,CAAwBy2E,eAAxB,GAA0C,IAA1C;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+CA,MAAMC,YAAY,GAAG,IAAIl+C,OAAJ,EAArB;AACA,MAAMm+C,mBAAmB,GAAG,IAAIN,kBAAJ,EAA5B;AACA,MAAMO,cAAc,GAAG,IAAIJ,aAAJ,EAAvB;AACA,MAAMK,gBAAgB,GAAG,IAAIT,WAAJ,EAAzB,EAEA;AAEA;;AAEA,MAAMU,aAAa,GAAG,EAAtB;AACA,MAAMC,aAAa,GAAG,EAAtB,EAEA;;AAEA,MAAMC,SAAS,GAAG,IAAItvB,YAAJ,CAAkB,EAAlB,CAAlB;AACA,MAAMuvB,SAAS,GAAG,IAAIvvB,YAAJ,CAAkB,CAAlB,CAAlB;AACA,MAAMwvB,SAAS,GAAG,IAAIxvB,YAAJ,CAAkB,CAAlB,CAAlB,EAEA;;AAEA,SAASyvB,OAAT,CAAkB9qD,KAAlB,EAAyB+qD,OAAzB,EAAkCC,SAAlC,EAA8C;AAE7C,QAAMC,SAAS,GAAGjrD,KAAK,CAAE,CAAF,CAAvB;AAEA,MAAKirD,SAAS,IAAI,CAAb,IAAkBA,SAAS,GAAG,CAAnC,EAAuC,OAAOjrD,KAAP,CAJM,CAK7C;AACA;;AAEA,MAAIgB,CAAC,GAAG+pD,OAAO,GAAGC,SAAlB;AAAA,MACCp4E,CAAC,GAAG63E,aAAa,CAAEzpD,CAAF,CADlB;;AAGA,MAAKpuB,CAAC,KAAKgD,SAAX,EAAuB;AAEtBhD,IAAAA,CAAC,GAAG,IAAIyoD,YAAJ,CAAkBr6B,CAAlB,CAAJ;AACAypD,IAAAA,aAAa,CAAEzpD,CAAF,CAAb,GAAqBpuB,CAArB;AAEA;;AAED,MAAKm4E,OAAO,KAAK,CAAjB,EAAqB;AAEpBE,IAAAA,SAAS,CAACt1E,OAAV,CAAmB/C,CAAnB,EAAsB,CAAtB;;AAEA,SAAM,IAAIiC,CAAC,GAAG,CAAR,EAAW8J,MAAM,GAAG,CAA1B,EAA6B9J,CAAC,KAAKk2E,OAAnC,EAA4C,EAAGl2E,CAA/C,EAAmD;AAElD8J,MAAAA,MAAM,IAAIqsE,SAAV;AACAhrD,MAAAA,KAAK,CAAEnrB,CAAF,CAAL,CAAWc,OAAX,CAAoB/C,CAApB,EAAuB+L,MAAvB;AAEA;AAED;;AAED,SAAO/L,CAAP;AAEA;;AAED,SAASs4E,WAAT,CAAsBj4E,CAAtB,EAAyBD,CAAzB,EAA6B;AAE5B,MAAKC,CAAC,CAACO,MAAF,KAAaR,CAAC,CAACQ,MAApB,EAA6B,OAAO,KAAP;;AAE7B,OAAM,IAAIqB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGhC,CAAC,CAACO,MAAvB,EAA+BqB,CAAC,GAAGI,CAAnC,EAAsCJ,CAAC,EAAvC,EAA6C;AAE5C,QAAK5B,CAAC,CAAE4B,CAAF,CAAD,KAAW7B,CAAC,CAAE6B,CAAF,CAAjB,EAAyB,OAAO,KAAP;AAEzB;;AAED,SAAO,IAAP;AAEA;;AAED,SAAS8kD,SAAT,CAAoB1mD,CAApB,EAAuBD,CAAvB,EAA2B;AAE1B,OAAM,IAAI6B,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGjC,CAAC,CAACQ,MAAvB,EAA+BqB,CAAC,GAAGI,CAAnC,EAAsCJ,CAAC,EAAvC,EAA6C;AAE5C5B,IAAAA,CAAC,CAAE4B,CAAF,CAAD,GAAS7B,CAAC,CAAE6B,CAAF,CAAV;AAEA;AAED,EAED;;;AAEA,SAASs2E,aAAT,CAAwBr9C,QAAxB,EAAkC9M,CAAlC,EAAsC;AAErC,MAAIpuB,CAAC,GAAG83E,aAAa,CAAE1pD,CAAF,CAArB;;AAEA,MAAKpuB,CAAC,KAAKgD,SAAX,EAAuB;AAEtBhD,IAAAA,CAAC,GAAG,IAAIqoD,UAAJ,CAAgBj6B,CAAhB,CAAJ;AACA0pD,IAAAA,aAAa,CAAE1pD,CAAF,CAAb,GAAqBpuB,CAArB;AAEA;;AAED,OAAM,IAAIiC,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKmsB,CAAvB,EAA0B,EAAGnsB,CAA7B,EAAiC;AAEhCjC,IAAAA,CAAC,CAAEiC,CAAF,CAAD,GAASi5B,QAAQ,CAACs9C,mBAAT,EAAT;AAEA;;AAED,SAAOx4E,CAAP;AAEA,EAED;AAEA;AACA;AAEA;;;AAEA,SAASy4E,WAAT,CAAsBjX,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AAEA,MAAKA,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAApB,EAAwB;AAExB+gE,EAAAA,EAAE,CAACkX,SAAH,CAAc,KAAKC,IAAnB,EAAyBl4E,CAAzB;AAEAywC,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAb;AAEA,EAED;;;AAEA,SAASm4E,WAAT,CAAsBpX,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;;AAEA,MAAKzwC,CAAC,CAAC6I,CAAF,KAAQtG,SAAb,EAAyB;AAExB,QAAKkuC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAAC6I,CAAjB,IAAsB4nC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAAC+I,CAA5C,EAAgD;AAE/Cg4D,MAAAA,EAAE,CAACqX,SAAH,CAAc,KAAKF,IAAnB,EAAyBl4E,CAAC,CAAC6I,CAA3B,EAA8B7I,CAAC,CAAC+I,CAAhC;AAEA0nC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAAC6I,CAAf;AACA4nC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAAC+I,CAAf;AAEA;AAED,GAXD,MAWO;AAEN,QAAK8uE,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,IAAAA,EAAE,CAACsX,UAAH,CAAe,KAAKH,IAApB,EAA0Bl4E,CAA1B;AAEAsmD,IAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA;AAED;;AAED,SAASs4E,WAAT,CAAsBvX,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;;AAEA,MAAKzwC,CAAC,CAAC6I,CAAF,KAAQtG,SAAb,EAAyB;AAExB,QAAKkuC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAAC6I,CAAjB,IAAsB4nC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAAC+I,CAAvC,IAA4C0nC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAACk7B,CAAlE,EAAsE;AAErE6lC,MAAAA,EAAE,CAACwX,SAAH,CAAc,KAAKL,IAAnB,EAAyBl4E,CAAC,CAAC6I,CAA3B,EAA8B7I,CAAC,CAAC+I,CAAhC,EAAmC/I,CAAC,CAACk7B,CAArC;AAEAuV,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAAC6I,CAAf;AACA4nC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAAC+I,CAAf;AACA0nC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAACk7B,CAAf;AAEA;AAED,GAZD,MAYO,IAAKl7B,CAAC,CAACT,CAAF,KAAQgD,SAAb,EAAyB;AAE/B,QAAKkuC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAACT,CAAjB,IAAsBkxC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAACN,CAAvC,IAA4C+wC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAACL,CAAlE,EAAsE;AAErEohE,MAAAA,EAAE,CAACwX,SAAH,CAAc,KAAKL,IAAnB,EAAyBl4E,CAAC,CAACT,CAA3B,EAA8BS,CAAC,CAACN,CAAhC,EAAmCM,CAAC,CAACL,CAArC;AAEA8wC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAACT,CAAf;AACAkxC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAACN,CAAf;AACA+wC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAACL,CAAf;AAEA;AAED,GAZM,MAYA;AAEN,QAAKk4E,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,IAAAA,EAAE,CAACyX,UAAH,CAAe,KAAKN,IAApB,EAA0Bl4E,CAA1B;AAEAsmD,IAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA;AAED;;AAED,SAASy4E,WAAT,CAAsB1X,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;;AAEA,MAAKzwC,CAAC,CAAC6I,CAAF,KAAQtG,SAAb,EAAyB;AAExB,QAAKkuC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAAC6I,CAAjB,IAAsB4nC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAAC+I,CAAvC,IAA4C0nC,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAACk7B,CAA7D,IAAkEuV,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAAC,CAACse,CAAxF,EAA4F;AAE3FyiD,MAAAA,EAAE,CAAC2X,SAAH,CAAc,KAAKR,IAAnB,EAAyBl4E,CAAC,CAAC6I,CAA3B,EAA8B7I,CAAC,CAAC+I,CAAhC,EAAmC/I,CAAC,CAACk7B,CAArC,EAAwCl7B,CAAC,CAACse,CAA1C;AAEAmyB,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAAC6I,CAAf;AACA4nC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAAC+I,CAAf;AACA0nC,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAACk7B,CAAf;AACAuV,MAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAC,CAACse,CAAf;AAEA;AAED,GAbD,MAaO;AAEN,QAAKu5D,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,IAAAA,EAAE,CAAC4X,UAAH,CAAe,KAAKT,IAApB,EAA0Bl4E,CAA1B;AAEAsmD,IAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA;AAED,EAED;;;AAEA,SAAS44E,UAAT,CAAqB7X,EAArB,EAAyB/gE,CAAzB,EAA6B;AAE5B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMjf,QAAQ,GAAGxxB,CAAC,CAACwxB,QAAnB;;AAEA,MAAKA,QAAQ,KAAKjvB,SAAlB,EAA8B;AAE7B,QAAKs1E,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,IAAAA,EAAE,CAAC8X,gBAAH,CAAqB,KAAKX,IAA1B,EAAgC,KAAhC,EAAuCl4E,CAAvC;AAEAsmD,IAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA,GARD,MAQO;AAEN,QAAK63E,WAAW,CAAEpnC,KAAF,EAASjf,QAAT,CAAhB,EAAsC;AAEtCgmD,IAAAA,SAAS,CAACxnD,GAAV,CAAewB,QAAf;AAEAuvC,IAAAA,EAAE,CAAC8X,gBAAH,CAAqB,KAAKX,IAA1B,EAAgC,KAAhC,EAAuCV,SAAvC;AAEAlxB,IAAAA,SAAS,CAAE7V,KAAF,EAASjf,QAAT,CAAT;AAEA;AAED;;AAED,SAASsnD,UAAT,CAAqB/X,EAArB,EAAyB/gE,CAAzB,EAA6B;AAE5B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMjf,QAAQ,GAAGxxB,CAAC,CAACwxB,QAAnB;;AAEA,MAAKA,QAAQ,KAAKjvB,SAAlB,EAA8B;AAE7B,QAAKs1E,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,IAAAA,EAAE,CAACgY,gBAAH,CAAqB,KAAKb,IAA1B,EAAgC,KAAhC,EAAuCl4E,CAAvC;AAEAsmD,IAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA,GARD,MAQO;AAEN,QAAK63E,WAAW,CAAEpnC,KAAF,EAASjf,QAAT,CAAhB,EAAsC;AAEtC+lD,IAAAA,SAAS,CAACvnD,GAAV,CAAewB,QAAf;AAEAuvC,IAAAA,EAAE,CAACgY,gBAAH,CAAqB,KAAKb,IAA1B,EAAgC,KAAhC,EAAuCX,SAAvC;AAEAjxB,IAAAA,SAAS,CAAE7V,KAAF,EAASjf,QAAT,CAAT;AAEA;AAED;;AAED,SAASwnD,UAAT,CAAqBjY,EAArB,EAAyB/gE,CAAzB,EAA6B;AAE5B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAMjf,QAAQ,GAAGxxB,CAAC,CAACwxB,QAAnB;;AAEA,MAAKA,QAAQ,KAAKjvB,SAAlB,EAA8B;AAE7B,QAAKs1E,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,IAAAA,EAAE,CAACkY,gBAAH,CAAqB,KAAKf,IAA1B,EAAgC,KAAhC,EAAuCl4E,CAAvC;AAEAsmD,IAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA,GARD,MAQO;AAEN,QAAK63E,WAAW,CAAEpnC,KAAF,EAASjf,QAAT,CAAhB,EAAsC;AAEtC8lD,IAAAA,SAAS,CAACtnD,GAAV,CAAewB,QAAf;AAEAuvC,IAAAA,EAAE,CAACkY,gBAAH,CAAqB,KAAKf,IAA1B,EAAgC,KAAhC,EAAuCZ,SAAvC;AAEAhxB,IAAAA,SAAS,CAAE7V,KAAF,EAASjf,QAAT,CAAT;AAEA;AAED,EAED;;;AAEA,SAAS0nD,UAAT,CAAqBnY,EAArB,EAAyB/gE,CAAzB,EAA4By6B,QAA5B,EAAuC;AAEtC,QAAMgW,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAM0oC,IAAI,GAAG1+C,QAAQ,CAACs9C,mBAAT,EAAb;;AAEA,MAAKtnC,KAAK,CAAE,CAAF,CAAL,KAAe0oC,IAApB,EAA2B;AAE1BpY,IAAAA,EAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA1oC,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAa0oC,IAAb;AAEA;;AAED1+C,EAAAA,QAAQ,CAAC4+C,gBAAT,CAA2Br5E,CAAC,IAAIg3E,YAAhC,EAA8CmC,IAA9C;AAEA;;AAED,SAASG,iBAAT,CAA4BvY,EAA5B,EAAgC/gE,CAAhC,EAAmCy6B,QAAnC,EAA8C;AAE7C,QAAMgW,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAM0oC,IAAI,GAAG1+C,QAAQ,CAACs9C,mBAAT,EAAb;;AAEA,MAAKtnC,KAAK,CAAE,CAAF,CAAL,KAAe0oC,IAApB,EAA2B;AAE1BpY,IAAAA,EAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA1oC,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAa0oC,IAAb;AAEA;;AAED1+C,EAAAA,QAAQ,CAAC8+C,iBAAT,CAA4Bv5E,CAAC,IAAIi3E,mBAAjC,EAAsDkC,IAAtD;AAEA;;AAED,SAASK,YAAT,CAAuBzY,EAAvB,EAA2B/gE,CAA3B,EAA8By6B,QAA9B,EAAyC;AAExC,QAAMgW,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAM0oC,IAAI,GAAG1+C,QAAQ,CAACs9C,mBAAT,EAAb;;AAEA,MAAKtnC,KAAK,CAAE,CAAF,CAAL,KAAe0oC,IAApB,EAA2B;AAE1BpY,IAAAA,EAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA1oC,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAa0oC,IAAb;AAEA;;AAED1+C,EAAAA,QAAQ,CAACg/C,YAAT,CAAuBz5E,CAAC,IAAIk3E,cAA5B,EAA4CiC,IAA5C;AAEA;;AAED,SAASO,UAAT,CAAqB3Y,EAArB,EAAyB/gE,CAAzB,EAA4By6B,QAA5B,EAAuC;AAEtC,QAAMgW,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAM0oC,IAAI,GAAG1+C,QAAQ,CAACs9C,mBAAT,EAAb;;AAEA,MAAKtnC,KAAK,CAAE,CAAF,CAAL,KAAe0oC,IAApB,EAA2B;AAE1BpY,IAAAA,EAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBiB,IAAzB;AACA1oC,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAa0oC,IAAb;AAEA;;AAED1+C,EAAAA,QAAQ,CAACk/C,kBAAT,CAA6B35E,CAAC,IAAIm3E,gBAAlC,EAAoDgC,IAApD;AAEA,EAED;;;AAEA,SAASS,WAAT,CAAsB7Y,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AAEA,MAAKA,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAApB,EAAwB;AAExB+gE,EAAAA,EAAE,CAACqY,SAAH,CAAc,KAAKlB,IAAnB,EAAyBl4E,CAAzB;AAEAywC,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAb;AAEA;;AAED,SAAS65E,WAAT,CAAsB9Y,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AAEA,MAAKonC,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,EAAAA,EAAE,CAAC+Y,UAAH,CAAe,KAAK5B,IAApB,EAA0Bl4E,CAA1B;AAEAsmD,EAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA;;AAED,SAAS+5E,WAAT,CAAsBhZ,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AAEA,MAAKonC,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,EAAAA,EAAE,CAACiZ,UAAH,CAAe,KAAK9B,IAApB,EAA0Bl4E,CAA1B;AAEAsmD,EAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA;;AAED,SAASi6E,WAAT,CAAsBlZ,EAAtB,EAA0B/gE,CAA1B,EAA8B;AAE7B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AAEA,MAAKonC,WAAW,CAAEpnC,KAAF,EAASzwC,CAAT,CAAhB,EAA+B;AAE/B+gE,EAAAA,EAAE,CAACmZ,UAAH,CAAe,KAAKhC,IAApB,EAA0Bl4E,CAA1B;AAEAsmD,EAAAA,SAAS,CAAE7V,KAAF,EAASzwC,CAAT,CAAT;AAEA,EAED;;;AAEA,SAASm6E,YAAT,CAAuBpZ,EAAvB,EAA2B/gE,CAA3B,EAA+B;AAE9B,QAAMywC,KAAK,GAAG,KAAKA,KAAnB;AAEA,MAAKA,KAAK,CAAE,CAAF,CAAL,KAAezwC,CAApB,EAAwB;AAExB+gE,EAAAA,EAAE,CAACqZ,UAAH,CAAe,KAAKlC,IAApB,EAA0Bl4E,CAA1B;AAEAywC,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAazwC,CAAb;AAEA,EAED;;;AAEA,SAASq6E,iBAAT,CAA4B1uE,IAA5B,EAAmC;AAElC,UAASA,IAAT;AAEC,SAAK,MAAL;AAAa,aAAOqsE,WAAP;AAAoB;;AACjC,SAAK,MAAL;AAAa,aAAOG,WAAP;AAAoB;;AACjC,SAAK,MAAL;AAAa,aAAOG,WAAP;AAAoB;;AACjC,SAAK,MAAL;AAAa,aAAOG,WAAP;AAAoB;;AAEjC,SAAK,MAAL;AAAa,aAAOG,UAAP;AAAmB;;AAChC,SAAK,MAAL;AAAa,aAAOE,UAAP;AAAmB;;AAChC,SAAK,MAAL;AAAa,aAAOE,UAAP;AAAmB;;AAEhC,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOY,WAAP;AAAoB;;AAC9C,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOC,WAAP;AAAoB;;AAC9C,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOE,WAAP;AAAoB;;AAC9C,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOE,WAAP;AAAoB;;AAE9C,SAAK,MAAL;AAAa,aAAOE,YAAP;AAAqB;;AAElC,SAAK,MAAL,CAlBD,CAkBc;;AACb,SAAK,MAAL,CAnBD,CAmBc;;AACb,SAAK,MAAL,CApBD,CAoBc;;AACb,SAAK,MAAL,CArBD,CAqBc;;AACb,SAAK,MAAL;AAAa;AACZ,aAAOjB,UAAP;;AAED,SAAK,MAAL,CAzBD,CAyBc;;AACb,SAAK,MAAL,CA1BD,CA0Bc;;AACb,SAAK,MAAL;AAAa;AACZ,aAAOM,YAAP;;AAED,SAAK,MAAL,CA9BD,CA8Bc;;AACb,SAAK,MAAL,CA/BD,CA+Bc;;AACb,SAAK,MAAL,CAhCD,CAgCc;;AACb,SAAK,MAAL;AAAa;AACZ,aAAOE,UAAP;;AAED,SAAK,MAAL,CApCD,CAoCc;;AACb,SAAK,MAAL,CArCD,CAqCc;;AACb,SAAK,MAAL,CAtCD,CAsCc;;AACb,SAAK,MAAL;AAAa;AACZ,aAAOJ,iBAAP;AAxCF;AA4CA,EAED;;;AACA,SAASgB,gBAAT,CAA2BvZ,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC+gE,EAAAA,EAAE,CAACwZ,UAAH,CAAe,KAAKrC,IAApB,EAA0Bl4E,CAA1B;AAEA,EAED;;;AACA,SAASw6E,gBAAT,CAA2BzZ,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC+gE,EAAAA,EAAE,CAAC0Z,UAAH,CAAe,KAAKvC,IAApB,EAA0Bl4E,CAA1B;AAEA;;AAED,SAAS06E,gBAAT,CAA2B3Z,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC+gE,EAAAA,EAAE,CAAC+Y,UAAH,CAAe,KAAK5B,IAApB,EAA0Bl4E,CAA1B;AAEA;;AAED,SAAS26E,gBAAT,CAA2B5Z,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC+gE,EAAAA,EAAE,CAACiZ,UAAH,CAAe,KAAK9B,IAApB,EAA0Bl4E,CAA1B;AAEA;;AAED,SAAS46E,gBAAT,CAA2B7Z,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC+gE,EAAAA,EAAE,CAACmZ,UAAH,CAAe,KAAKhC,IAApB,EAA0Bl4E,CAA1B;AAEA,EAGD;;;AAEA,SAAS66E,gBAAT,CAA2B9Z,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC,QAAM2wC,IAAI,GAAG8mC,OAAO,CAAEz3E,CAAF,EAAK,KAAKozC,IAAV,EAAgB,CAAhB,CAApB;AAEA2tB,EAAAA,EAAE,CAACsX,UAAH,CAAe,KAAKH,IAApB,EAA0BvnC,IAA1B;AAEA;;AAED,SAASmqC,gBAAT,CAA2B/Z,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC,QAAM2wC,IAAI,GAAG8mC,OAAO,CAAEz3E,CAAF,EAAK,KAAKozC,IAAV,EAAgB,CAAhB,CAApB;AAEA2tB,EAAAA,EAAE,CAACyX,UAAH,CAAe,KAAKN,IAApB,EAA0BvnC,IAA1B;AAEA;;AAED,SAASoqC,gBAAT,CAA2Bha,EAA3B,EAA+B/gE,CAA/B,EAAmC;AAElC,QAAM2wC,IAAI,GAAG8mC,OAAO,CAAEz3E,CAAF,EAAK,KAAKozC,IAAV,EAAgB,CAAhB,CAApB;AAEA2tB,EAAAA,EAAE,CAAC4X,UAAH,CAAe,KAAKT,IAApB,EAA0BvnC,IAA1B;AAEA,EAED;;;AAEA,SAASqqC,eAAT,CAA0Bja,EAA1B,EAA8B/gE,CAA9B,EAAkC;AAEjC,QAAM2wC,IAAI,GAAG8mC,OAAO,CAAEz3E,CAAF,EAAK,KAAKozC,IAAV,EAAgB,CAAhB,CAApB;AAEA2tB,EAAAA,EAAE,CAAC8X,gBAAH,CAAqB,KAAKX,IAA1B,EAAgC,KAAhC,EAAuCvnC,IAAvC;AAEA;;AAED,SAASsqC,eAAT,CAA0Bla,EAA1B,EAA8B/gE,CAA9B,EAAkC;AAEjC,QAAM2wC,IAAI,GAAG8mC,OAAO,CAAEz3E,CAAF,EAAK,KAAKozC,IAAV,EAAgB,CAAhB,CAApB;AAEA2tB,EAAAA,EAAE,CAACgY,gBAAH,CAAqB,KAAKb,IAA1B,EAAgC,KAAhC,EAAuCvnC,IAAvC;AAEA;;AAED,SAASuqC,eAAT,CAA0Bna,EAA1B,EAA8B/gE,CAA9B,EAAkC;AAEjC,QAAM2wC,IAAI,GAAG8mC,OAAO,CAAEz3E,CAAF,EAAK,KAAKozC,IAAV,EAAgB,EAAhB,CAApB;AAEA2tB,EAAAA,EAAE,CAACkY,gBAAH,CAAqB,KAAKf,IAA1B,EAAgC,KAAhC,EAAuCvnC,IAAvC;AAEA,EAED;;;AAEA,SAASwqC,eAAT,CAA0Bpa,EAA1B,EAA8B/gE,CAA9B,EAAiCy6B,QAAjC,EAA4C;AAE3C,QAAM9M,CAAC,GAAG3tB,CAAC,CAACG,MAAZ;AAEA,QAAMi7E,KAAK,GAAGtD,aAAa,CAAEr9C,QAAF,EAAY9M,CAAZ,CAA3B;AAEAozC,EAAAA,EAAE,CAAC0Z,UAAH,CAAe,KAAKvC,IAApB,EAA0BkD,KAA1B;;AAEA,OAAM,IAAI55E,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKmsB,CAAvB,EAA0B,EAAGnsB,CAA7B,EAAiC;AAEhCi5B,IAAAA,QAAQ,CAAC4+C,gBAAT,CAA2Br5E,CAAC,CAAEwB,CAAF,CAAD,IAAUw1E,YAArC,EAAmDoE,KAAK,CAAE55E,CAAF,CAAxD;AAEA;AAED;;AAED,SAAS65E,eAAT,CAA0Bta,EAA1B,EAA8B/gE,CAA9B,EAAiCy6B,QAAjC,EAA4C;AAE3C,QAAM9M,CAAC,GAAG3tB,CAAC,CAACG,MAAZ;AAEA,QAAMi7E,KAAK,GAAGtD,aAAa,CAAEr9C,QAAF,EAAY9M,CAAZ,CAA3B;AAEAozC,EAAAA,EAAE,CAAC0Z,UAAH,CAAe,KAAKvC,IAApB,EAA0BkD,KAA1B;;AAEA,OAAM,IAAI55E,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKmsB,CAAvB,EAA0B,EAAGnsB,CAA7B,EAAiC;AAEhCi5B,IAAAA,QAAQ,CAACk/C,kBAAT,CAA6B35E,CAAC,CAAEwB,CAAF,CAAD,IAAU21E,gBAAvC,EAAyDiE,KAAK,CAAE55E,CAAF,CAA9D;AAEA;AAED,EAED;;;AAEA,SAAS85E,kBAAT,CAA6B3vE,IAA7B,EAAoC;AAEnC,UAASA,IAAT;AAEC,SAAK,MAAL;AAAa,aAAO2uE,gBAAP;AAAyB;;AACtC,SAAK,MAAL;AAAa,aAAOO,gBAAP;AAAyB;;AACtC,SAAK,MAAL;AAAa,aAAOC,gBAAP;AAAyB;;AACtC,SAAK,MAAL;AAAa,aAAOC,gBAAP;AAAyB;;AAEtC,SAAK,MAAL;AAAa,aAAOC,eAAP;AAAwB;;AACrC,SAAK,MAAL;AAAa,aAAOC,eAAP;AAAwB;;AACrC,SAAK,MAAL;AAAa,aAAOC,eAAP;AAAwB;;AAErC,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOV,gBAAP;AAAyB;;AACnD,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOE,gBAAP;AAAyB;;AACnD,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOC,gBAAP;AAAyB;;AACnD,SAAK,MAAL;AAAa,SAAK,MAAL;AAAa,aAAOC,gBAAP;AAAyB;;AAEnD,SAAK,MAAL,CAhBD,CAgBc;;AACb,SAAK,MAAL,CAjBD,CAiBc;;AACb,SAAK,MAAL,CAlBD,CAkBc;;AACb,SAAK,MAAL,CAnBD,CAmBc;;AACb,SAAK,MAAL;AAAa;AACZ,aAAOO,eAAP;;AAED,SAAK,MAAL,CAvBD,CAuBc;;AACb,SAAK,MAAL,CAxBD,CAwBc;;AACb,SAAK,MAAL,CAzBD,CAyBc;;AACb,SAAK,MAAL;AAAa;AACZ,aAAOE,eAAP;AA3BF;AA+BA,EAED;;;AAEA,SAASE,aAAT,CAAwB/sC,EAAxB,EAA4BgtC,UAA5B,EAAwCtD,IAAxC,EAA+C;AAE9C,OAAK1pC,EAAL,GAAUA,EAAV;AACA,OAAK0pC,IAAL,GAAYA,IAAZ;AACA,OAAKznC,KAAL,GAAa,EAAb;AACA,OAAKtkC,QAAL,GAAgBkuE,iBAAiB,CAAEmB,UAAU,CAAC7vE,IAAb,CAAjC,CAL8C,CAO9C;AAEA;;AAED,SAAS8vE,gBAAT,CAA2BjtC,EAA3B,EAA+BgtC,UAA/B,EAA2CtD,IAA3C,EAAkD;AAEjD,OAAK1pC,EAAL,GAAUA,EAAV;AACA,OAAK0pC,IAAL,GAAYA,IAAZ;AACA,OAAKznC,KAAL,GAAa,EAAb;AACA,OAAK2C,IAAL,GAAYooC,UAAU,CAACpoC,IAAvB;AACA,OAAKjnC,QAAL,GAAgBmvE,kBAAkB,CAAEE,UAAU,CAAC7vE,IAAb,CAAlC,CANiD,CAQjD;AAEA;;AAED8vE,gBAAgB,CAACn7E,SAAjB,CAA2Bo7E,WAA3B,GAAyC,UAAW/qC,IAAX,EAAkB;AAE1D,MAAIF,KAAK,GAAG,KAAKA,KAAjB;;AAEA,MAAKE,IAAI,YAAYqX,YAAhB,IAAgCvX,KAAK,CAACtwC,MAAN,KAAiBwwC,IAAI,CAACxwC,MAA3D,EAAoE;AAEnE,SAAKswC,KAAL,GAAa,IAAIuX,YAAJ,CAAkBrX,IAAI,CAACxwC,MAAvB,CAAb;AAEA;;AAEDmmD,EAAAA,SAAS,CAAE7V,KAAF,EAASE,IAAT,CAAT;AAEA,CAZD;;AAcA,SAASgrC,iBAAT,CAA4BntC,EAA5B,EAAiC;AAEhC,OAAKA,EAAL,GAAUA,EAAV;AAEA,OAAKotC,GAAL,GAAW,EAAX;AACA,OAAKlvE,GAAL,GAAW,EAAX;AAEA;;AAEDivE,iBAAiB,CAACr7E,SAAlB,CAA4B6L,QAA5B,GAAuC,UAAW40D,EAAX,EAAen8D,KAAf,EAAsB61B,QAAtB,EAAiC;AAEvE,QAAMmhD,GAAG,GAAG,KAAKA,GAAjB;;AAEA,OAAM,IAAIp6E,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGiuD,GAAG,CAACz7E,MAAzB,EAAiCqB,CAAC,KAAKmsB,CAAvC,EAA0C,EAAGnsB,CAA7C,EAAiD;AAEhD,UAAMq6C,CAAC,GAAG+/B,GAAG,CAAEp6E,CAAF,CAAb;AACAq6C,IAAAA,CAAC,CAAC1vC,QAAF,CAAY40D,EAAZ,EAAgBn8D,KAAK,CAAEi3C,CAAC,CAACrN,EAAJ,CAArB,EAA+B/T,QAA/B;AAEA;AAED,CAXD,EAaA;AAEA;;;AAEA,MAAMohD,UAAU,GAAG,0BAAnB,EAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,UAAT,CAAqBr/D,SAArB,EAAgCs/D,aAAhC,EAAgD;AAE/Ct/D,EAAAA,SAAS,CAACm/D,GAAV,CAAcjxE,IAAd,CAAoBoxE,aAApB;AACAt/D,EAAAA,SAAS,CAAC/P,GAAV,CAAeqvE,aAAa,CAACvtC,EAA7B,IAAoCutC,aAApC;AAEA;;AAED,SAASC,YAAT,CAAuBR,UAAvB,EAAmCtD,IAAnC,EAAyCz7D,SAAzC,EAAqD;AAEpD,QAAMw/D,IAAI,GAAGT,UAAU,CAAC1kE,IAAxB;AAAA,QACColE,UAAU,GAAGD,IAAI,CAAC97E,MADnB,CAFoD,CAKpD;;AACA07E,EAAAA,UAAU,CAACM,SAAX,GAAuB,CAAvB;;AAEA,SAAQ,IAAR,EAAe;AAEd,UAAMl5E,KAAK,GAAG44E,UAAU,CAACj+B,IAAX,CAAiBq+B,IAAjB,CAAd;AAAA,UACCG,QAAQ,GAAGP,UAAU,CAACM,SADvB;AAGA,QAAI3tC,EAAE,GAAGvrC,KAAK,CAAE,CAAF,CAAd;AAAA,QACCo5E,SAAS,GAAGp5E,KAAK,CAAE,CAAF,CAAL,KAAe,GAD5B;AAAA,QAECq5E,SAAS,GAAGr5E,KAAK,CAAE,CAAF,CAFlB;AAIA,QAAKo5E,SAAL,EAAiB7tC,EAAE,GAAGA,EAAE,GAAG,CAAV,CATH,CASgB;;AAE9B,QAAK8tC,SAAS,KAAK/5E,SAAd,IAA2B+5E,SAAS,KAAK,GAAd,IAAqBF,QAAQ,GAAG,CAAX,KAAiBF,UAAtE,EAAmF;AAElF;AAEAJ,MAAAA,UAAU,CAAEr/D,SAAF,EAAa6/D,SAAS,KAAK/5E,SAAd,GACtB,IAAIg5E,aAAJ,CAAmB/sC,EAAnB,EAAuBgtC,UAAvB,EAAmCtD,IAAnC,CADsB,GAEtB,IAAIuD,gBAAJ,CAAsBjtC,EAAtB,EAA0BgtC,UAA1B,EAAsCtD,IAAtC,CAFS,CAAV;AAIA;AAEA,KAVD,MAUO;AAEN;AAEA,YAAMxrE,GAAG,GAAG+P,SAAS,CAAC/P,GAAtB;AACA,UAAI6vE,IAAI,GAAG7vE,GAAG,CAAE8hC,EAAF,CAAd;;AAEA,UAAK+tC,IAAI,KAAKh6E,SAAd,EAA0B;AAEzBg6E,QAAAA,IAAI,GAAG,IAAIZ,iBAAJ,CAAuBntC,EAAvB,CAAP;AACAstC,QAAAA,UAAU,CAAEr/D,SAAF,EAAa8/D,IAAb,CAAV;AAEA;;AAED9/D,MAAAA,SAAS,GAAG8/D,IAAZ;AAEA;AAED;AAED,EAED;;;AAEA,SAASC,aAAT,CAAwBzb,EAAxB,EAA4B6M,OAA5B,EAAsC;AAErC,OAAKgO,GAAL,GAAW,EAAX;AACA,OAAKlvE,GAAL,GAAW,EAAX;AAEA,QAAMihB,CAAC,GAAGozC,EAAE,CAAC0b,mBAAH,CAAwB7O,OAAxB,EAAiC,KAAjC,CAAV;;AAEA,OAAM,IAAIpsE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmsB,CAArB,EAAwB,EAAGnsB,CAA3B,EAA+B;AAE9B,UAAMyvE,IAAI,GAAGlQ,EAAE,CAAC2b,gBAAH,CAAqB9O,OAArB,EAA8BpsE,CAA9B,CAAb;AAAA,UACC02E,IAAI,GAAGnX,EAAE,CAAC4b,kBAAH,CAAuB/O,OAAvB,EAAgCqD,IAAI,CAACn6D,IAArC,CADR;AAGAklE,IAAAA,YAAY,CAAE/K,IAAF,EAAQiH,IAAR,EAAc,IAAd,CAAZ;AAEA;AAED;;AAEDsE,aAAa,CAACl8E,SAAd,CAAwB6L,QAAxB,GAAmC,UAAW40D,EAAX,EAAejqD,IAAf,EAAqBlS,KAArB,EAA4B61B,QAA5B,EAAuC;AAEzE,QAAMohB,CAAC,GAAG,KAAKnvC,GAAL,CAAUoK,IAAV,CAAV;AAEA,MAAK+kC,CAAC,KAAKt5C,SAAX,EAAuBs5C,CAAC,CAAC1vC,QAAF,CAAY40D,EAAZ,EAAgBn8D,KAAhB,EAAuB61B,QAAvB;AAEvB,CAND;;AAQA+hD,aAAa,CAACl8E,SAAd,CAAwBs8E,WAAxB,GAAsC,UAAW7b,EAAX,EAAe96D,MAAf,EAAuB6Q,IAAvB,EAA8B;AAEnE,QAAM9W,CAAC,GAAGiG,MAAM,CAAE6Q,IAAF,CAAhB;AAEA,MAAK9W,CAAC,KAAKuC,SAAX,EAAuB,KAAK4J,QAAL,CAAe40D,EAAf,EAAmBjqD,IAAnB,EAAyB9W,CAAzB;AAEvB,CAND,EASA;;;AAEAw8E,aAAa,CAACK,MAAd,GAAuB,UAAW9b,EAAX,EAAe6a,GAAf,EAAoBlrC,MAApB,EAA4BjW,QAA5B,EAAuC;AAE7D,OAAM,IAAIj5B,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGiuD,GAAG,CAACz7E,MAAzB,EAAiCqB,CAAC,KAAKmsB,CAAvC,EAA0C,EAAGnsB,CAA7C,EAAiD;AAEhD,UAAMq6C,CAAC,GAAG+/B,GAAG,CAAEp6E,CAAF,CAAb;AAAA,UACCxB,CAAC,GAAG0wC,MAAM,CAAEmL,CAAC,CAACrN,EAAJ,CADX;;AAGA,QAAKxuC,CAAC,CAACurD,WAAF,KAAkB,KAAvB,EAA+B;AAE9B;AACA1P,MAAAA,CAAC,CAAC1vC,QAAF,CAAY40D,EAAZ,EAAgB/gE,CAAC,CAAC4E,KAAlB,EAAyB61B,QAAzB;AAEA;AAED;AAED,CAhBD;;AAkBA+hD,aAAa,CAACM,YAAd,GAA6B,UAAWlB,GAAX,EAAgBlrC,MAAhB,EAAyB;AAErD,QAAMnxC,CAAC,GAAG,EAAV;;AAEA,OAAM,IAAIiC,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGiuD,GAAG,CAACz7E,MAAzB,EAAiCqB,CAAC,KAAKmsB,CAAvC,EAA0C,EAAGnsB,CAA7C,EAAiD;AAEhD,UAAMq6C,CAAC,GAAG+/B,GAAG,CAAEp6E,CAAF,CAAb;AACA,QAAKq6C,CAAC,CAACrN,EAAF,IAAQkC,MAAb,EAAsBnxC,CAAC,CAACoL,IAAF,CAAQkxC,CAAR;AAEtB;;AAED,SAAOt8C,CAAP;AAEA,CAbD;AAeA;;;;;AAIA,SAASw9E,WAAT,CAAsBhc,EAAtB,EAA0Bp1D,IAA1B,EAAgCgyC,MAAhC,EAAyC;AAExC,QAAMud,MAAM,GAAG6F,EAAE,CAACic,YAAH,CAAiBrxE,IAAjB,CAAf;AAEAo1D,EAAAA,EAAE,CAACkc,YAAH,CAAiB/hB,MAAjB,EAAyBvd,MAAzB;AACAojB,EAAAA,EAAE,CAACmc,aAAH,CAAkBhiB,MAAlB;AAEA,SAAOA,MAAP;AAEA;AAED;;;;;AAIA,IAAIiiB,cAAc,GAAG,CAArB;;AAEA,SAASC,cAAT,CAAyBz/B,MAAzB,EAAkC;AAEjC,QAAM83B,KAAK,GAAG93B,MAAM,CAAClzC,KAAP,CAAc,IAAd,CAAd;;AAEA,OAAM,IAAIjJ,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGi0E,KAAK,CAACt1E,MAA3B,EAAmCqB,CAAC,EAApC,EAA0C;AAEzCi0E,IAAAA,KAAK,CAAEj0E,CAAF,CAAL,GAAeA,CAAC,GAAG,CAAN,GAAY,IAAZ,GAAmBi0E,KAAK,CAAEj0E,CAAF,CAArC;AAEA;;AAED,SAAOi0E,KAAK,CAAC7qE,IAAN,CAAY,IAAZ,CAAP;AAEA;;AAED,SAASyyE,qBAAT,CAAgC/jD,QAAhC,EAA2C;AAE1C,UAASA,QAAT;AAEC,SAAKtP,cAAL;AACC,aAAO,CAAE,QAAF,EAAY,WAAZ,CAAP;;AACD,SAAKC,YAAL;AACC,aAAO,CAAE,MAAF,EAAU,WAAV,CAAP;;AACD,SAAKE,YAAL;AACC,aAAO,CAAE,MAAF,EAAU,WAAV,CAAP;;AACD,SAAKE,aAAL;AACC,aAAO,CAAE,MAAF,EAAU,gBAAV,CAAP;;AACD,SAAKC,cAAL;AACC,aAAO,CAAE,MAAF,EAAU,iBAAV,CAAP;;AACD,SAAKC,YAAL;AACC,aAAO,CAAE,MAAF,EAAU,kBAAV,CAAP;;AACD,SAAKL,aAAL;AACC,aAAO,CAAE,OAAF,EAAW,kCAAX,CAAP;;AACD,SAAKE,cAAL;AACC,aAAO,CAAE,QAAF,EAAY,WAAZ,CAAP;;AACD;AACC6F,MAAAA,OAAO,CAACC,IAAR,CAAc,2CAAd,EAA2DoJ,QAA3D;AACA,aAAO,CAAE,QAAF,EAAY,WAAZ,CAAP;AApBF;AAwBA;;AAED,SAASgkD,eAAT,CAA0Bvc,EAA1B,EAA8B7F,MAA9B,EAAsCvvD,IAAtC,EAA6C;AAE5C,QAAM4xE,MAAM,GAAGxc,EAAE,CAACyc,kBAAH,CAAuBtiB,MAAvB,EAA+B,KAA/B,CAAf;AACA,QAAMntD,GAAG,GAAGgzD,EAAE,CAAC0c,gBAAH,CAAqBviB,MAArB,EAA8BwiB,IAA9B,EAAZ;AAEA,MAAKH,MAAM,IAAIxvE,GAAG,KAAK,EAAvB,EAA4B,OAAO,EAAP,CALgB,CAO5C;AACA;;AAEA,QAAMyR,MAAM,GAAGuhD,EAAE,CAAC4c,eAAH,CAAoBziB,MAApB,CAAf;AAEA,SAAO,8CAA8CvvD,IAA9C,GAAqD,IAArD,GAA4DoC,GAA5D,GAAkEqvE,cAAc,CAAE59D,MAAF,CAAvF;AAEA;;AAED,SAASo+D,wBAAT,CAAmCC,YAAnC,EAAiDvkD,QAAjD,EAA4D;AAE3D,QAAMukB,UAAU,GAAGw/B,qBAAqB,CAAE/jD,QAAF,CAAxC;AACA,SAAO,UAAUukD,YAAV,GAAyB,0BAAzB,GAAsDhgC,UAAU,CAAE,CAAF,CAAhE,GAAwE,UAAxE,GAAqFA,UAAU,CAAE,CAAF,CAA/F,GAAuG,KAA9G;AAEA;;AAED,SAASigC,wBAAT,CAAmCD,YAAnC,EAAiDvkD,QAAjD,EAA4D;AAE3D,QAAMukB,UAAU,GAAGw/B,qBAAqB,CAAE/jD,QAAF,CAAxC;AACA,SAAO,UAAUukD,YAAV,GAAyB,kCAAzB,GAA8DhgC,UAAU,CAAE,CAAF,CAAxE,GAAgFA,UAAU,CAAE,CAAF,CAA1F,GAAkG,KAAzG;AAEA;;AAED,SAASkgC,sBAAT,CAAiCF,YAAjC,EAA+ChR,WAA/C,EAA6D;AAE5D,MAAImR,eAAJ;;AAEA,UAASnR,WAAT;AAEC,SAAKtpD,iBAAL;AACCy6D,MAAAA,eAAe,GAAG,QAAlB;AACA;;AAED,SAAKx6D,mBAAL;AACCw6D,MAAAA,eAAe,GAAG,UAAlB;AACA;;AAED,SAAKv6D,iBAAL;AACCu6D,MAAAA,eAAe,GAAG,iBAAlB;AACA;;AAED,SAAKt6D,qBAAL;AACCs6D,MAAAA,eAAe,GAAG,YAAlB;AACA;;AAED,SAAKr6D,iBAAL;AACCq6D,MAAAA,eAAe,GAAG,QAAlB;AACA;;AAED;AACC/tD,MAAAA,OAAO,CAACC,IAAR,CAAc,8CAAd,EAA8D28C,WAA9D;AACAmR,MAAAA,eAAe,GAAG,QAAlB;AAxBF;;AA4BA,SAAO,UAAUH,YAAV,GAAyB,0BAAzB,GAAsDG,eAAtD,GAAwE,yBAA/E;AAEA;;AAED,SAASC,kBAAT,CAA6B7tC,UAA7B,EAA0C;AAEzC,QAAM8tC,MAAM,GAAG,CACZ9tC,UAAU,CAAC+tC,oBAAX,IAAmC/tC,UAAU,CAACguC,YAA9C,IAA8DhuC,UAAU,CAACoT,OAAzE,IAAoFpT,UAAU,CAACiuC,qBAA/F,IAAwHjuC,UAAU,CAAC6S,kBAAnI,IAAyJ7S,UAAU,CAAC4P,WAApK,IAAmL5P,UAAU,CAACkuC,QAAX,KAAwB,UAA7M,GAA4N,iDAA5N,GAAgR,EADlQ,EAEd,CAAEluC,UAAU,CAACmuC,kBAAX,IAAiCnuC,UAAU,CAAC6hC,sBAA9C,KAA0E7hC,UAAU,CAACouC,0BAArF,GAAkH,uCAAlH,GAA4J,EAF9I,EAGZpuC,UAAU,CAACquC,oBAAX,IAAmCruC,UAAU,CAACsuC,4BAAhD,GAAiF,0CAAjF,GAA8H,EAHhH,EAId,CAAEtuC,UAAU,CAACuuC,yBAAX,IAAwCvuC,UAAU,CAACgU,MAArD,KAAiEhU,UAAU,CAACwuC,iCAA5E,GAAgH,+CAAhH,GAAkK,EAJpJ,CAAf;AAOA,SAAOV,MAAM,CAACW,MAAP,CAAeC,eAAf,EAAiCl0E,IAAjC,CAAuC,IAAvC,CAAP;AAEA;;AAED,SAASm0E,eAAT,CAA0B5nB,OAA1B,EAAoC;AAEnC,QAAM+mB,MAAM,GAAG,EAAf;;AAEA,OAAM,MAAMpnE,IAAZ,IAAoBqgD,OAApB,EAA8B;AAE7B,UAAMvyD,KAAK,GAAGuyD,OAAO,CAAErgD,IAAF,CAArB;AAEA,QAAKlS,KAAK,KAAK,KAAf,EAAuB;AAEvBs5E,IAAAA,MAAM,CAACvzE,IAAP,CAAa,aAAamM,IAAb,GAAoB,GAApB,GAA0BlS,KAAvC;AAEA;;AAED,SAAOs5E,MAAM,CAACtzE,IAAP,CAAa,IAAb,CAAP;AAEA;;AAED,SAASo0E,uBAAT,CAAkCje,EAAlC,EAAsC6M,OAAtC,EAAgD;AAE/C,QAAMjjB,UAAU,GAAG,EAAnB;AAEA,QAAMh9B,CAAC,GAAGozC,EAAE,CAAC0b,mBAAH,CAAwB7O,OAAxB,EAAiC,KAAjC,CAAV;;AAEA,OAAM,IAAIpsE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmsB,CAArB,EAAwBnsB,CAAC,EAAzB,EAA+B;AAE9B,UAAMyvE,IAAI,GAAGlQ,EAAE,CAACke,eAAH,CAAoBrR,OAApB,EAA6BpsE,CAA7B,CAAb;AACA,UAAMsV,IAAI,GAAGm6D,IAAI,CAACn6D,IAAlB,CAH8B,CAK9B;;AAEA6zC,IAAAA,UAAU,CAAE7zC,IAAF,CAAV,GAAqBiqD,EAAE,CAACme,iBAAH,CAAsBtR,OAAtB,EAA+B92D,IAA/B,CAArB;AAEA;;AAED,SAAO6zC,UAAP;AAEA;;AAED,SAASm0B,eAAT,CAA0BnhC,MAA1B,EAAmC;AAElC,SAAOA,MAAM,KAAK,EAAlB;AAEA;;AAED,SAASwhC,gBAAT,CAA2BxhC,MAA3B,EAAmCvN,UAAnC,EAAgD;AAE/C,SAAOuN,MAAM,CACX9yC,OADK,CACI,iBADJ,EACuBulC,UAAU,CAACgvC,YADlC,EAELv0E,OAFK,CAEI,kBAFJ,EAEwBulC,UAAU,CAACivC,aAFnC,EAGLx0E,OAHK,CAGI,uBAHJ,EAG6BulC,UAAU,CAACkvC,iBAHxC,EAILz0E,OAJK,CAII,mBAJJ,EAIyBulC,UAAU,CAACmvC,cAJpC,EAKL10E,OALK,CAKI,kBALJ,EAKwBulC,UAAU,CAACovC,aALnC,EAML30E,OANK,CAMI,wBANJ,EAM8BulC,UAAU,CAACqvC,kBANzC,EAOL50E,OAPK,CAOI,yBAPJ,EAO+BulC,UAAU,CAACsvC,mBAP1C,EAQL70E,OARK,CAQI,0BARJ,EAQgCulC,UAAU,CAACuvC,oBAR3C,CAAP;AAUA;;AAED,SAASC,wBAAT,CAAmCjiC,MAAnC,EAA2CvN,UAA3C,EAAwD;AAEvD,SAAOuN,MAAM,CACX9yC,OADK,CACI,sBADJ,EAC4BulC,UAAU,CAACyvC,iBADvC,EAELh1E,OAFK,CAEI,wBAFJ,EAEgCulC,UAAU,CAACyvC,iBAAX,GAA+BzvC,UAAU,CAAC0vC,mBAF1E,CAAP;AAIA,EAED;;;AAEA,MAAMC,cAAc,GAAG,kCAAvB;;AAEA,SAASC,eAAT,CAA0BriC,MAA1B,EAAmC;AAElC,SAAOA,MAAM,CAAC9yC,OAAP,CAAgBk1E,cAAhB,EAAgCE,eAAhC,CAAP;AAEA;;AAED,SAASA,eAAT,CAA0Bh9E,KAA1B,EAAiCi9E,OAAjC,EAA2C;AAE1C,QAAMviC,MAAM,GAAG0sB,WAAW,CAAE6V,OAAF,CAA1B;;AAEA,MAAKviC,MAAM,KAAKp7C,SAAhB,EAA4B;AAE3B,UAAM,IAAIuC,KAAJ,CAAW,+BAA+Bo7E,OAA/B,GAAyC,GAApD,CAAN;AAEA;;AAED,SAAOF,eAAe,CAAEriC,MAAF,CAAtB;AAEA,EAED;;;AAEA,MAAMwiC,2BAA2B,GAAG,8FAApC;AACA,MAAMC,iBAAiB,GAAG,iIAA1B;;AAEA,SAASC,WAAT,CAAsB1iC,MAAtB,EAA+B;AAE9B,SAAOA,MAAM,CACX9yC,OADK,CACIu1E,iBADJ,EACuBE,YADvB,EAELz1E,OAFK,CAEIs1E,2BAFJ,EAEiCI,sBAFjC,CAAP;AAIA;;AAED,SAASA,sBAAT,CAAiCt9E,KAAjC,EAAwC+2C,KAAxC,EAA+CI,GAA/C,EAAoDomC,OAApD,EAA8D;AAE7DvwD,EAAAA,OAAO,CAACC,IAAR,CAAc,qHAAd;AACA,SAAOowD,YAAY,CAAEr9E,KAAF,EAAS+2C,KAAT,EAAgBI,GAAhB,EAAqBomC,OAArB,CAAnB;AAEA;;AAED,SAASF,YAAT,CAAuBr9E,KAAvB,EAA8B+2C,KAA9B,EAAqCI,GAArC,EAA0ComC,OAA1C,EAAoD;AAEnD,MAAI7iC,MAAM,GAAG,EAAb;;AAEA,OAAM,IAAIn8C,CAAC,GAAG0B,QAAQ,CAAE82C,KAAF,CAAtB,EAAiCx4C,CAAC,GAAG0B,QAAQ,CAAEk3C,GAAF,CAA7C,EAAsD54C,CAAC,EAAvD,EAA6D;AAE5Dm8C,IAAAA,MAAM,IAAI6iC,OAAO,CACf31E,OADQ,CACC,UADD,EACa,OAAOrJ,CAAP,GAAW,IADxB,EAERqJ,OAFQ,CAEC,sBAFD,EAEyBrJ,CAFzB,CAAV;AAIA;;AAED,SAAOm8C,MAAP;AAEA,EAED;;;AAEA,SAAS8iC,iBAAT,CAA4BrwC,UAA5B,EAAyC;AAExC,MAAIswC,eAAe,GAAG,eAAetwC,UAAU,CAACoR,SAA1B,GAAsC,qBAAtC,GAA8DpR,UAAU,CAACoR,SAAzE,GAAqF,OAA3G;;AAEA,MAAKpR,UAAU,CAACoR,SAAX,KAAyB,OAA9B,EAAwC;AAEvCk/B,IAAAA,eAAe,IAAI,0BAAnB;AAEA,GAJD,MAIO,IAAKtwC,UAAU,CAACoR,SAAX,KAAyB,SAA9B,EAA0C;AAEhDk/B,IAAAA,eAAe,IAAI,4BAAnB;AAEA,GAJM,MAIA,IAAKtwC,UAAU,CAACoR,SAAX,KAAyB,MAA9B,EAAuC;AAE7Ck/B,IAAAA,eAAe,IAAI,yBAAnB;AAEA;;AAED,SAAOA,eAAP;AAEA;;AAED,SAASC,2BAAT,CAAsCvwC,UAAtC,EAAmD;AAElD,MAAIwwC,mBAAmB,GAAG,sBAA1B;;AAEA,MAAKxwC,UAAU,CAACywC,aAAX,KAA6BhgE,YAAlC,EAAiD;AAEhD+/D,IAAAA,mBAAmB,GAAG,oBAAtB;AAEA,GAJD,MAIO,IAAKxwC,UAAU,CAACywC,aAAX,KAA6B//D,gBAAlC,EAAqD;AAE3D8/D,IAAAA,mBAAmB,GAAG,yBAAtB;AAEA,GAJM,MAIA,IAAKxwC,UAAU,CAACywC,aAAX,KAA6B9/D,YAAlC,EAAiD;AAEvD6/D,IAAAA,mBAAmB,GAAG,oBAAtB;AAEA;;AAED,SAAOA,mBAAP;AAEA;;AAED,SAASE,wBAAT,CAAmC1wC,UAAnC,EAAgD;AAE/C,MAAI2wC,gBAAgB,GAAG,kBAAvB;;AAEA,MAAK3wC,UAAU,CAACgU,MAAhB,EAAyB;AAExB,YAAShU,UAAU,CAAC4wC,UAApB;AAEC,WAAKn9D,qBAAL;AACA,WAAKC,qBAAL;AACCi9D,QAAAA,gBAAgB,GAAG,kBAAnB;AACA;;AAED,WAAK98D,uBAAL;AACA,WAAKC,uBAAL;AACC68D,QAAAA,gBAAgB,GAAG,qBAAnB;AACA;;AAED,WAAKh9D,gCAAL;AACA,WAAKC,gCAAL;AACC+8D,QAAAA,gBAAgB,GAAG,qBAAnB;AACA;AAfF;AAmBA;;AAED,SAAOA,gBAAP;AAEA;;AAED,SAASE,wBAAT,CAAmC7wC,UAAnC,EAAgD;AAE/C,MAAI8wC,gBAAgB,GAAG,wBAAvB;;AAEA,MAAK9wC,UAAU,CAACgU,MAAhB,EAAyB;AAExB,YAAShU,UAAU,CAAC4wC,UAApB;AAEC,WAAKl9D,qBAAL;AACA,WAAKE,gCAAL;AACCk9D,QAAAA,gBAAgB,GAAG,wBAAnB;AACA;AALF;AASA;;AAED,SAAOA,gBAAP;AAEA;;AAED,SAASC,4BAAT,CAAuC/wC,UAAvC,EAAoD;AAEnD,MAAIgxC,oBAAoB,GAAG,sBAA3B;;AAEA,MAAKhxC,UAAU,CAACgU,MAAhB,EAAyB;AAExB,YAAShU,UAAU,CAACmU,OAApB;AAEC,WAAKphC,iBAAL;AACCi+D,QAAAA,oBAAoB,GAAG,0BAAvB;AACA;;AAED,WAAKh+D,YAAL;AACCg+D,QAAAA,oBAAoB,GAAG,qBAAvB;AACA;;AAED,WAAK/9D,YAAL;AACC+9D,QAAAA,oBAAoB,GAAG,qBAAvB;AACA;AAZF;AAgBA;;AAED,SAAOA,oBAAP;AAEA;;AAED,SAASC,YAAT,CAAuBhnB,QAAvB,EAAiCinB,QAAjC,EAA2ClxC,UAA3C,EAAuDm9B,aAAvD,EAAuE;AAEtE,QAAMxM,EAAE,GAAG1G,QAAQ,CAAC7hC,UAAT,EAAX;AAEA,QAAM2+B,OAAO,GAAG/mB,UAAU,CAAC+mB,OAA3B;AAEA,MAAIC,YAAY,GAAGhnB,UAAU,CAACgnB,YAA9B;AACA,MAAIC,cAAc,GAAGjnB,UAAU,CAACinB,cAAhC;AAEA,QAAMupB,mBAAmB,GAAGD,2BAA2B,CAAEvwC,UAAF,CAAvD;AACA,QAAM2wC,gBAAgB,GAAGD,wBAAwB,CAAE1wC,UAAF,CAAjD;AACA,QAAM8wC,gBAAgB,GAAGD,wBAAwB,CAAE7wC,UAAF,CAAjD;AACA,QAAMgxC,oBAAoB,GAAGD,4BAA4B,CAAE/wC,UAAF,CAAzD;AAGA,QAAMmxC,iBAAiB,GAAKlnB,QAAQ,CAACpc,WAAT,GAAuB,CAAzB,GAA+Boc,QAAQ,CAACpc,WAAxC,GAAsD,GAAhF;AAEA,QAAMujC,gBAAgB,GAAGpxC,UAAU,CAAC6wB,QAAX,GAAsB,EAAtB,GAA2Bgd,kBAAkB,CAAE7tC,UAAF,CAAtE;AAEA,QAAMqxC,aAAa,GAAG1C,eAAe,CAAE5nB,OAAF,CAArC;AAEA,QAAMyW,OAAO,GAAG7M,EAAE,CAAC2gB,aAAH,EAAhB;AAEA,MAAIC,YAAJ,EAAkBC,cAAlB;;AAEA,MAAKxxC,UAAU,CAACyxC,mBAAhB,EAAsC;AAErCF,IAAAA,YAAY,GAAG,CAEdF,aAFc,EAIb5C,MAJa,CAILC,eAJK,EAIal0E,IAJb,CAImB,IAJnB,CAAf;;AAMA,QAAK+2E,YAAY,CAACxhF,MAAb,GAAsB,CAA3B,EAA+B;AAE9BwhF,MAAAA,YAAY,IAAI,IAAhB;AAEA;;AAEDC,IAAAA,cAAc,GAAG,CAEhBJ,gBAFgB,EAGhBC,aAHgB,EAKf5C,MALe,CAKPC,eALO,EAKWl0E,IALX,CAKiB,IALjB,CAAjB;;AAOA,QAAKg3E,cAAc,CAACzhF,MAAf,GAAwB,CAA7B,EAAiC;AAEhCyhF,MAAAA,cAAc,IAAI,IAAlB;AAEA;AAED,GA3BD,MA2BO;AAEND,IAAAA,YAAY,GAAG,CAEdlB,iBAAiB,CAAErwC,UAAF,CAFH,EAId,yBAAyBA,UAAU,CAAC0xC,UAJtB,EAMdL,aANc,EAQdrxC,UAAU,CAAC2xC,UAAX,GAAwB,wBAAxB,GAAmD,EARrC,EASd3xC,UAAU,CAAC4xC,sBAAX,GAAoC,yBAApC,GAAgE,EATlD,EAWd,0BAA0BT,iBAXZ,EAad,uBAAuBnxC,UAAU,CAAC6xC,QAbpB,EAcZ7xC,UAAU,CAAC8xC,MAAX,IAAqB9xC,UAAU,CAACW,GAAlC,GAA0C,iBAA1C,GAA8D,EAdhD,EAeZX,UAAU,CAAC8xC,MAAX,IAAqB9xC,UAAU,CAAC+xC,OAAlC,GAA8C,kBAA9C,GAAmE,EAfrD,EAiBd/xC,UAAU,CAAC1jC,GAAX,GAAiB,iBAAjB,GAAqC,EAjBvB,EAkBd0jC,UAAU,CAACgU,MAAX,GAAoB,oBAApB,GAA2C,EAlB7B,EAmBdhU,UAAU,CAACgU,MAAX,GAAoB,aAAa88B,gBAAjC,GAAoD,EAnBtC,EAoBd9wC,UAAU,CAACiT,QAAX,GAAsB,sBAAtB,GAA+C,EApBjC,EAqBdjT,UAAU,CAACkT,KAAX,GAAmB,mBAAnB,GAAyC,EArB3B,EAsBdlT,UAAU,CAAC8T,WAAX,GAAyB,yBAAzB,GAAqD,EAtBvC,EAuBd9T,UAAU,CAACoT,OAAX,GAAqB,qBAArB,GAA6C,EAvB/B,EAwBdpT,UAAU,CAACsT,SAAX,GAAuB,uBAAvB,GAAiD,EAxBnC,EAyBZtT,UAAU,CAACsT,SAAX,IAAwBtT,UAAU,CAACgyC,oBAArC,GAA8D,+BAA9D,GAAgG,EAzBlF,EA0BZhyC,UAAU,CAACsT,SAAX,IAAwBtT,UAAU,CAACiuC,qBAArC,GAA+D,gCAA/D,GAAkG,EA1BpF,EA4BdjuC,UAAU,CAAC2S,YAAX,GAA0B,0BAA1B,GAAuD,EA5BzC,EA6Bd3S,UAAU,CAAC4S,qBAAX,GAAmC,oCAAnC,GAA0E,EA7B5D,EA8Bd5S,UAAU,CAAC6S,kBAAX,GAAgC,iCAAhC,GAAoE,EA9BtD,EA+Bd7S,UAAU,CAACyT,eAAX,IAA8BzT,UAAU,CAAC4xC,sBAAzC,GAAkE,6BAAlE,GAAkG,EA/BpF,EAgCd5xC,UAAU,CAAC+T,WAAX,GAAyB,yBAAzB,GAAqD,EAhCvC,EAiCd/T,UAAU,CAAC4T,YAAX,GAA0B,0BAA1B,GAAuD,EAjCzC,EAkCd5T,UAAU,CAAC6T,YAAX,GAA0B,0BAA1B,GAAuD,EAlCzC,EAmCd7T,UAAU,CAACgT,QAAX,GAAsB,sBAAtB,GAA+C,EAnCjC,EAqCdhT,UAAU,CAACiyC,cAAX,GAA4B,qBAA5B,GAAoD,EArCtC,EAsCdjyC,UAAU,CAACuP,YAAX,GAA0B,mBAA1B,GAAgD,EAtClC,EAuCdvP,UAAU,CAAC2Z,SAAX,GAAuB,gBAAvB,GAA0C,EAvC5B,EAwCd3Z,UAAU,CAACkyC,aAAX,GAA2B,yBAA3B,GAAuD,EAxCzC,EA0CdlyC,UAAU,CAAC4P,WAAX,GAAyB,qBAAzB,GAAiD,EA1CnC,EA4Cd5P,UAAU,CAACgV,QAAX,GAAsB,sBAAtB,GAA+C,EA5CjC,EA6CdhV,UAAU,CAACmyC,gBAAX,GAA8B,sBAA9B,GAAuD,EA7CzC,EA+CdnyC,UAAU,CAAC8U,YAAX,GAA0B,0BAA1B,GAAuD,EA/CzC,EAgDd9U,UAAU,CAAC+U,YAAX,IAA2B/U,UAAU,CAAC4P,WAAX,KAA2B,KAAtD,GAA8D,0BAA9D,GAA2F,EAhD7E,EAiDd5P,UAAU,CAACoyC,WAAX,GAAyB,sBAAzB,GAAkD,EAjDpC,EAkDdpyC,UAAU,CAACqyC,SAAX,GAAuB,oBAAvB,GAA8C,EAlDhC,EAoDdryC,UAAU,CAACsyC,gBAAX,GAA8B,uBAA9B,GAAwD,EApD1C,EAqDdtyC,UAAU,CAACsyC,gBAAX,GAA8B,aAAa9B,mBAA3C,GAAiE,EArDnD,EAuDdxwC,UAAU,CAACsU,eAAX,GAA6B,6BAA7B,GAA6D,EAvD/C,EAyDdtU,UAAU,CAAC6hC,sBAAX,GAAoC,yBAApC,GAAgE,EAzDlD,EA0DZ7hC,UAAU,CAAC6hC,sBAAX,IAAqC7hC,UAAU,CAACouC,0BAAlD,GAAiF,6BAAjF,GAAiH,EA1DnG,EA4Dd,2BA5Dc,EA6Dd,+BA7Dc,EA8Dd,gCA9Dc,EA+Dd,0BA/Dc,EAgEd,4BAhEc,EAiEd,8BAjEc,EAkEd,8BAlEc,EAoEd,uBApEc,EAsEd,iCAtEc,EAwEd,QAxEc,EA0Ed,0BA1Ec,EA2Ed,wBA3Ec,EA4Ed,oBA5Ec,EA8Ed,oBA9Ec,EAgFd,0BAhFc,EAkFd,QAlFc,EAoFd,kBApFc,EAsFd,wBAtFc,EAwFd,QAxFc,EA0Fd,yBA1Fc,EA4Fd,+BA5Fc,EA6Fd,+BA7Fc,EA8Fd,+BA9Fc,EA+Fd,+BA/Fc,EAiGd,0BAjGc,EAmGd,gCAnGc,EAoGd,gCApGc,EAqGd,gCArGc,EAsGd,gCAtGc,EAwGd,QAxGc,EA0Gd,gCA1Gc,EA2Gd,gCA3Gc,EA4Gd,gCA5Gc,EA6Gd,gCA7Gc,EA+Gd,SA/Gc,EAiHd,QAjHc,EAmHd,qBAnHc,EAqHd,4BArHc,EAsHd,6BAtHc,EAwHd,QAxHc,EA0Hd,IA1Hc,EA4HbK,MA5Ha,CA4HLC,eA5HK,EA4Hal0E,IA5Hb,CA4HmB,IA5HnB,CAAf;AA8HAg3E,IAAAA,cAAc,GAAG,CAEhBJ,gBAFgB,EAIhBf,iBAAiB,CAAErwC,UAAF,CAJD,EAMhB,yBAAyBA,UAAU,CAAC0xC,UANpB,EAQhBL,aARgB,EAUhBrxC,UAAU,CAACyR,SAAX,GAAuB,uBAAuBzR,UAAU,CAACyR,SAAlC,IAAgDzR,UAAU,CAACyR,SAAX,GAAuB,CAAvB,GAA2B,EAA3B,GAAgC,IAAhF,CAAvB,GAAgH,EAVhG,EAUoG;AAEpH,8BAA0B0/B,iBAZV,EAcdnxC,UAAU,CAAC8xC,MAAX,IAAqB9xC,UAAU,CAACW,GAAlC,GAA0C,iBAA1C,GAA8D,EAd9C,EAedX,UAAU,CAAC8xC,MAAX,IAAqB9xC,UAAU,CAAC+xC,OAAlC,GAA8C,kBAA9C,GAAmE,EAfnD,EAiBhB/xC,UAAU,CAAC1jC,GAAX,GAAiB,iBAAjB,GAAqC,EAjBrB,EAkBhB0jC,UAAU,CAAC+S,MAAX,GAAoB,oBAApB,GAA2C,EAlB3B,EAmBhB/S,UAAU,CAACgU,MAAX,GAAoB,oBAApB,GAA2C,EAnB3B,EAoBhBhU,UAAU,CAACgU,MAAX,GAAoB,aAAa28B,gBAAjC,GAAoD,EApBpC,EAqBhB3wC,UAAU,CAACgU,MAAX,GAAoB,aAAa88B,gBAAjC,GAAoD,EArBpC,EAsBhB9wC,UAAU,CAACgU,MAAX,GAAoB,aAAag9B,oBAAjC,GAAwD,EAtBxC,EAuBhBhxC,UAAU,CAACiT,QAAX,GAAsB,sBAAtB,GAA+C,EAvB/B,EAwBhBjT,UAAU,CAACkT,KAAX,GAAmB,mBAAnB,GAAyC,EAxBzB,EAyBhBlT,UAAU,CAAC8T,WAAX,GAAyB,yBAAzB,GAAqD,EAzBrC,EA0BhB9T,UAAU,CAACoT,OAAX,GAAqB,qBAArB,GAA6C,EA1B7B,EA2BhBpT,UAAU,CAACsT,SAAX,GAAuB,uBAAvB,GAAiD,EA3BjC,EA4BdtT,UAAU,CAACsT,SAAX,IAAwBtT,UAAU,CAACgyC,oBAArC,GAA8D,+BAA9D,GAAgG,EA5BhF,EA6BdhyC,UAAU,CAACsT,SAAX,IAAwBtT,UAAU,CAACiuC,qBAArC,GAA+D,gCAA/D,GAAkG,EA7BlF,EA8BhBjuC,UAAU,CAAC2S,YAAX,GAA0B,0BAA1B,GAAuD,EA9BvC,EA+BhB3S,UAAU,CAAC4S,qBAAX,GAAmC,oCAAnC,GAA0E,EA/B1D,EAgChB5S,UAAU,CAAC6S,kBAAX,GAAgC,iCAAhC,GAAoE,EAhCpD,EAiChB7S,UAAU,CAAC+T,WAAX,GAAyB,yBAAzB,GAAqD,EAjCrC,EAkChB/T,UAAU,CAAC4T,YAAX,GAA0B,0BAA1B,GAAuD,EAlCvC,EAmChB5T,UAAU,CAAC6T,YAAX,GAA0B,0BAA1B,GAAuD,EAnCvC,EAoChB7T,UAAU,CAACgT,QAAX,GAAsB,sBAAtB,GAA+C,EApC/B,EAsChBhT,UAAU,CAACoS,KAAX,GAAmB,mBAAnB,GAAyC,EAtCzB,EAwChBpS,UAAU,CAACiyC,cAAX,GAA4B,qBAA5B,GAAoD,EAxCpC,EAyChBjyC,UAAU,CAACuP,YAAX,GAA0B,mBAA1B,GAAgD,EAzChC,EA0ChBvP,UAAU,CAAC2Z,SAAX,GAAuB,gBAAvB,GAA0C,EA1C1B,EA2ChB3Z,UAAU,CAACkyC,aAAX,GAA2B,yBAA3B,GAAuD,EA3CvC,EA6ChBlyC,UAAU,CAACqU,WAAX,GAAyB,yBAAzB,GAAqD,EA7CrC,EA+ChBrU,UAAU,CAAC4P,WAAX,GAAyB,qBAAzB,GAAiD,EA/CjC,EAiDhB5P,UAAU,CAACoyC,WAAX,GAAyB,sBAAzB,GAAkD,EAjDlC,EAkDhBpyC,UAAU,CAACqyC,SAAX,GAAuB,oBAAvB,GAA8C,EAlD9B,EAoDhBryC,UAAU,CAACsyC,gBAAX,GAA8B,uBAA9B,GAAwD,EApDxC,EAqDhBtyC,UAAU,CAACsyC,gBAAX,GAA8B,aAAa9B,mBAA3C,GAAiE,EArDjD,EAuDhBxwC,UAAU,CAAC0R,kBAAX,GAAgC,6BAAhC,GAAgE,EAvDhD,EAyDhB1R,UAAU,CAACuyC,uBAAX,GAAqC,mCAArC,GAA2E,EAzD3D,EA2DhBvyC,UAAU,CAAC6hC,sBAAX,GAAoC,yBAApC,GAAgE,EA3DhD,EA4Dd7hC,UAAU,CAAC6hC,sBAAX,IAAqC7hC,UAAU,CAACouC,0BAAlD,GAAiF,6BAAjF,GAAiH,EA5DjG,EA8Dd,CAAEpuC,UAAU,CAACuuC,yBAAX,IAAwCvuC,UAAU,CAACgU,MAArD,KAAiEhU,UAAU,CAACwuC,iCAA9E,GAAoH,yBAApH,GAAgJ,EA9DhI,EAgEhB,0BAhEgB,EAiEhB,8BAjEgB,EAkEhB,8BAlEgB,EAoEdxuC,UAAU,CAACy8B,WAAX,KAA2BvpD,aAA7B,GAA+C,sBAA/C,GAAwE,EApExD,EAqEd8sB,UAAU,CAACy8B,WAAX,KAA2BvpD,aAA7B,GAA+C+mD,WAAW,CAAE,2BAAF,CAA1D,GAA4F,EArE5E,EAqEgF;AAC9Fj6B,IAAAA,UAAU,CAACy8B,WAAX,KAA2BvpD,aAA7B,GAA+Cy6D,sBAAsB,CAAE,aAAF,EAAiB3tC,UAAU,CAACy8B,WAA5B,CAArE,GAAiH,EAtEjG,EAwEhBz8B,UAAU,CAACwR,SAAX,GAAuB,mBAAvB,GAA6C,EAxE7B,EA0EhByoB,WAAW,CAAE,yBAAF,CA1EK,EA0E0B;AAC1Cj6B,IAAAA,UAAU,CAAC1jC,GAAX,GAAiBkxE,wBAAwB,CAAE,kBAAF,EAAsBxtC,UAAU,CAACwyC,WAAjC,CAAzC,GAA0F,EA3E1E,EA4EhBxyC,UAAU,CAAC+S,MAAX,GAAoBy6B,wBAAwB,CAAE,qBAAF,EAAyBxtC,UAAU,CAACyyC,cAApC,CAA5C,GAAmG,EA5EnF,EA6EhBzyC,UAAU,CAACgU,MAAX,GAAoBw5B,wBAAwB,CAAE,qBAAF,EAAyBxtC,UAAU,CAAC0yC,cAApC,CAA5C,GAAmG,EA7EnF,EA8EhB1yC,UAAU,CAAC8T,WAAX,GAAyB05B,wBAAwB,CAAE,0BAAF,EAA8BxtC,UAAU,CAAC2yC,mBAAzC,CAAjD,GAAkH,EA9ElG,EA+EhB3yC,UAAU,CAACiT,QAAX,GAAsBu6B,wBAAwB,CAAE,uBAAF,EAA2BxtC,UAAU,CAAC4yC,gBAAtC,CAA9C,GAAyG,EA/EzF,EAgFhBlF,wBAAwB,CAAE,qBAAF,EAAyB1tC,UAAU,CAAC6yC,cAApC,CAhFR,EAkFhB7yC,UAAU,CAAC8yC,YAAX,GAA0B,2BAA2B9yC,UAAU,CAAC8yC,YAAhE,GAA+E,EAlF/D,EAoFhB,IApFgB,EAsFfrE,MAtFe,CAsFPC,eAtFO,EAsFWl0E,IAtFX,CAsFiB,IAtFjB,CAAjB;AAwFA;;AAEDwsD,EAAAA,YAAY,GAAG4oB,eAAe,CAAE5oB,YAAF,CAA9B;AACAA,EAAAA,YAAY,GAAG+nB,gBAAgB,CAAE/nB,YAAF,EAAgBhnB,UAAhB,CAA/B;AACAgnB,EAAAA,YAAY,GAAGwoB,wBAAwB,CAAExoB,YAAF,EAAgBhnB,UAAhB,CAAvC;AAEAinB,EAAAA,cAAc,GAAG2oB,eAAe,CAAE3oB,cAAF,CAAhC;AACAA,EAAAA,cAAc,GAAG8nB,gBAAgB,CAAE9nB,cAAF,EAAkBjnB,UAAlB,CAAjC;AACAinB,EAAAA,cAAc,GAAGuoB,wBAAwB,CAAEvoB,cAAF,EAAkBjnB,UAAlB,CAAzC;AAEAgnB,EAAAA,YAAY,GAAGipB,WAAW,CAAEjpB,YAAF,CAA1B;AACAC,EAAAA,cAAc,GAAGgpB,WAAW,CAAEhpB,cAAF,CAA5B;;AAEA,MAAKjnB,UAAU,CAAC6wB,QAAX,IAAuB,CAAE7wB,UAAU,CAACyxC,mBAAzC,EAA+D;AAE9D,QAAIsB,qBAAqB,GAAG,KAA5B;AAEA,UAAMC,YAAY,GAAG,8BAArB;;AAEA,QAAKhzC,UAAU,CAAC4nB,gBAAX,IACJZ,YAAY,CAACn0D,KAAb,CAAoBmgF,YAApB,MAAuC,IADnC,IAEJ/rB,cAAc,CAACp0D,KAAf,CAAsBmgF,YAAtB,MAAyC,IAF1C,EAEiD;AAEhDD,MAAAA,qBAAqB,GAAG,IAAxB;AAEA/rB,MAAAA,YAAY,GAAGA,YAAY,CAACvsD,OAAb,CAAsBu4E,YAAtB,EAAoC,EAApC,CAAf;AACA/rB,MAAAA,cAAc,GAAGA,cAAc,CAACxsD,OAAf,CAAwBu4E,YAAxB,EAAsC,EAAtC,CAAjB;AAEA,KAf6D,CAiB9D;;;AAEAzB,IAAAA,YAAY,GAAG,CACd,mBADc,EAEd,sBAFc,EAGd,qBAHc,EAId,2BAJc,EAKb/2E,IALa,CAKP,IALO,IAKE,IALF,GAKS+2E,YALxB;AAOAC,IAAAA,cAAc,GAAG,CAChB,mBADgB,EAEhB,oBAFgB,EAGhBuB,qBAAqB,GAAG,EAAH,GAAQ,8BAHb,EAIhBA,qBAAqB,GAAG,EAAH,GAAQ,mCAJb,EAKhB,sCALgB,EAMhB,2BANgB,EAOhB,6BAPgB,EAQhB,mCARgB,EAShB,oCATgB,EAUhB,4CAVgB,EAWhB,sCAXgB,EAYhB,sCAZgB,EAahB,8CAbgB,EAchB,wCAdgB,EAefv4E,IAfe,CAeT,IAfS,IAeA,IAfA,GAeOg3E,cAfxB;AAiBA;;AAED,QAAMyB,UAAU,GAAG1B,YAAY,GAAGvqB,YAAlC;AACA,QAAMksB,YAAY,GAAG1B,cAAc,GAAGvqB,cAAtC,CAvUsE,CAyUtE;AACA;;AAEA,QAAMksB,cAAc,GAAGxG,WAAW,CAAEhc,EAAF,EAAM,KAAN,EAAasiB,UAAb,CAAlC;AACA,QAAMG,gBAAgB,GAAGzG,WAAW,CAAEhc,EAAF,EAAM,KAAN,EAAauiB,YAAb,CAApC;AAEAviB,EAAAA,EAAE,CAAC0iB,YAAH,CAAiB7V,OAAjB,EAA0B2V,cAA1B;AACAxiB,EAAAA,EAAE,CAAC0iB,YAAH,CAAiB7V,OAAjB,EAA0B4V,gBAA1B,EAhVsE,CAkVtE;;AAEA,MAAKpzC,UAAU,CAAC0nB,mBAAX,KAAmCv1D,SAAxC,EAAoD;AAEnDw+D,IAAAA,EAAE,CAAC2iB,kBAAH,CAAuB9V,OAAvB,EAAgC,CAAhC,EAAmCx9B,UAAU,CAAC0nB,mBAA9C;AAEA,GAJD,MAIO,IAAK1nB,UAAU,CAAC8U,YAAX,KAA4B,IAAjC,EAAwC;AAE9C;AACA6b,IAAAA,EAAE,CAAC2iB,kBAAH,CAAuB9V,OAAvB,EAAgC,CAAhC,EAAmC,UAAnC;AAEA;;AAED7M,EAAAA,EAAE,CAAC4iB,WAAH,CAAgB/V,OAAhB,EA/VsE,CAiWtE;;AACA,MAAKvT,QAAQ,CAACupB,KAAT,CAAeC,iBAApB,EAAwC;AAEvC,UAAMC,UAAU,GAAG/iB,EAAE,CAACgjB,iBAAH,CAAsBnW,OAAtB,EAAgC8P,IAAhC,EAAnB;AACA,UAAMsG,SAAS,GAAGjjB,EAAE,CAAC0c,gBAAH,CAAqB8F,cAArB,EAAsC7F,IAAtC,EAAlB;AACA,UAAMuG,WAAW,GAAGljB,EAAE,CAAC0c,gBAAH,CAAqB+F,gBAArB,EAAwC9F,IAAxC,EAApB;AAEA,QAAIwG,QAAQ,GAAG,IAAf;AACA,QAAIC,eAAe,GAAG,IAAtB;;AAEA,QAAKpjB,EAAE,CAAC0b,mBAAH,CAAwB7O,OAAxB,EAAiC,KAAjC,MAA6C,KAAlD,EAA0D;AAEzDsW,MAAAA,QAAQ,GAAG,KAAX;AAEA,YAAME,YAAY,GAAG9G,eAAe,CAAEvc,EAAF,EAAMwiB,cAAN,EAAsB,QAAtB,CAApC;AACA,YAAMc,cAAc,GAAG/G,eAAe,CAAEvc,EAAF,EAAMyiB,gBAAN,EAAwB,UAAxB,CAAtC;AAEAvzD,MAAAA,OAAO,CAACyD,KAAR,CAAe,oCAAf,EAAqDqtC,EAAE,CAACujB,QAAH,EAArD,EAAoE,OAApE,EAA6EvjB,EAAE,CAAC0b,mBAAH,CAAwB7O,OAAxB,EAAiC,KAAjC,CAA7E,EAAuH,sBAAvH,EAA+IkW,UAA/I,EAA2JM,YAA3J,EAAyKC,cAAzK;AAEA,KATD,MASO,IAAKP,UAAU,KAAK,EAApB,EAAyB;AAE/B7zD,MAAAA,OAAO,CAACC,IAAR,CAAc,4CAAd,EAA4D4zD,UAA5D;AAEA,KAJM,MAIA,IAAKE,SAAS,KAAK,EAAd,IAAoBC,WAAW,KAAK,EAAzC,EAA8C;AAEpDE,MAAAA,eAAe,GAAG,KAAlB;AAEA;;AAED,QAAKA,eAAL,EAAuB;AAEtB,WAAKI,WAAL,GAAmB;AAElBL,QAAAA,QAAQ,EAAEA,QAFQ;AAIlBJ,QAAAA,UAAU,EAAEA,UAJM;AAMlB1sB,QAAAA,YAAY,EAAE;AAEbrpD,UAAAA,GAAG,EAAEi2E,SAFQ;AAGbQ,UAAAA,MAAM,EAAE7C;AAHK,SANI;AAalBtqB,QAAAA,cAAc,EAAE;AAEftpD,UAAAA,GAAG,EAAEk2E,WAFU;AAGfO,UAAAA,MAAM,EAAE5C;AAHO;AAbE,OAAnB;AAsBA;AAED,GAxZqE,CA0ZtE;AAEA;AACA;AACA;;;AAEA7gB,EAAAA,EAAE,CAAC0jB,YAAH,CAAiBlB,cAAjB;AACAxiB,EAAAA,EAAE,CAAC0jB,YAAH,CAAiBjB,gBAAjB,EAjasE,CAmatE;;AAEA,MAAIkB,cAAJ;;AAEA,OAAKnO,WAAL,GAAmB,YAAY;AAE9B,QAAKmO,cAAc,KAAKniF,SAAxB,EAAoC;AAEnCmiF,MAAAA,cAAc,GAAG,IAAIlI,aAAJ,CAAmBzb,EAAnB,EAAuB6M,OAAvB,CAAjB;AAEA;;AAED,WAAO8W,cAAP;AAEA,GAVD,CAvasE,CAmbtE;;;AAEA,MAAI1V,gBAAJ;;AAEA,OAAKgB,aAAL,GAAqB,YAAY;AAEhC,QAAKhB,gBAAgB,KAAKzsE,SAA1B,EAAsC;AAErCysE,MAAAA,gBAAgB,GAAGgQ,uBAAuB,CAAEje,EAAF,EAAM6M,OAAN,CAA1C;AAEA;;AAED,WAAOoB,gBAAP;AAEA,GAVD,CAvbsE,CAmctE;;;AAEA,OAAK2V,OAAL,GAAe,YAAY;AAE1BpX,IAAAA,aAAa,CAACuD,sBAAd,CAAsC,IAAtC;AAEA/P,IAAAA,EAAE,CAAC6jB,aAAH,CAAkBhX,OAAlB;AACA,SAAKA,OAAL,GAAerrE,SAAf;AAEA,GAPD,CArcsE,CA8ctE;;;AAEA,OAAKuU,IAAL,GAAYs5B,UAAU,CAAC0xC,UAAvB;AACA,OAAKtzC,EAAL,GAAU2uC,cAAc,EAAxB;AACA,OAAKmE,QAAL,GAAgBA,QAAhB;AACA,OAAKuD,SAAL,GAAiB,CAAjB;AACA,OAAKjX,OAAL,GAAeA,OAAf;AACA,OAAKxW,YAAL,GAAoBmsB,cAApB;AACA,OAAKlsB,cAAL,GAAsBmsB,gBAAtB;AAEA,SAAO,IAAP;AAEA;AAED;;;;;AAIA,SAASsB,aAAT,CAAwBzqB,QAAxB,EAAkC7C,UAAlC,EAA8CwJ,YAA9C,EAA4DuM,aAA5D,EAA4E;AAE3E,QAAMoI,QAAQ,GAAG,EAAjB;AAEA,QAAM1U,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AACA,QAAMgR,sBAAsB,GAAGjR,YAAY,CAACiR,sBAA5C;AACA,QAAMW,mBAAmB,GAAG5R,YAAY,CAAC4R,mBAAzC;AACA,QAAML,iBAAiB,GAAGvR,YAAY,CAACuR,iBAAvC;AACA,QAAMG,cAAc,GAAG1R,YAAY,CAAC0R,cAApC;AAEA,MAAIlxB,SAAS,GAAGwf,YAAY,CAACxf,SAA7B;AAEA,QAAMujC,SAAS,GAAG;AACjBC,IAAAA,iBAAiB,EAAE,OADF;AAEjBC,IAAAA,oBAAoB,EAAE,cAFL;AAGjBC,IAAAA,kBAAkB,EAAE,QAHH;AAIjB3/B,IAAAA,iBAAiB,EAAE,OAJF;AAKjB4/B,IAAAA,mBAAmB,EAAE,SALJ;AAMjBC,IAAAA,iBAAiB,EAAE,OANF;AAOjBC,IAAAA,gBAAgB,EAAE,MAPD;AAQjBC,IAAAA,oBAAoB,EAAE,UARL;AASjBC,IAAAA,oBAAoB,EAAE,UATL;AAUjBC,IAAAA,kBAAkB,EAAE,QAVH;AAWjBC,IAAAA,iBAAiB,EAAE,OAXF;AAYjBC,IAAAA,kBAAkB,EAAE,QAZH;AAajBC,IAAAA,cAAc,EAAE,QAbC;AAcjBC,IAAAA,cAAc,EAAE,QAdC;AAejBC,IAAAA,cAAc,EAAE;AAfC,GAAlB;AAkBA,QAAMC,cAAc,GAAG,CACtB,WADsB,EACT,UADS,EACG,wBADH,EAC6B,gBAD7B,EAC+C,YAD/C,EAEtB,KAFsB,EAEf,aAFe,EAEA,QAFA,EAEU,gBAFV,EAE4B,QAF5B,EAEsC,YAFtC,EAEoD,gBAFpD,EAEsE,cAFtE,EAGtB,UAHsB,EAGV,kBAHU,EAGU,OAHV,EAGmB,aAHnB,EAGkC,qBAHlC,EAGyD,SAHzD,EAGoE,WAHpE,EAGiF,sBAHjF,EAGyG,uBAHzG,EAGkI,cAHlI,EAGkJ,uBAHlJ,EAG2K,oBAH3K,EAGiM,iBAHjM,EAGoN,aAHpN,EAItB,cAJsB,EAIN,cAJM,EAIU,aAJV,EAKtB,UALsB,EAKV,SALU,EAKC,cALD,EAKiB,gBALjB,EAKmC,WALnC,EAKgD,eALhD,EAKiE,KALjE,EAKwE,QALxE,EAKkF,SALlF,EAMtB,aANsB,EAMP,iBANO,EAMY,wBANZ,EAMsC,UANtC,EAOtB,UAPsB,EAOV,kBAPU,EAOU,cAPV,EAO0B,cAP1B,EAQtB,iBARsB,EAQH,iBARG,EAQgB,oBARhB,EAStB,cATsB,EASN,gBATM,EASY,eATZ,EAS6B,eAT7B,EAS8C,mBAT9C,EAUtB,oBAVsB,EAUA,sBAVA,EAUwB,qBAVxB,EAWtB,kBAXsB,EAWF,eAXE,EAWe,aAXf,EAW8B,yBAX9B,EAYtB,WAZsB,EAYT,aAZS,EAYM,WAZN,EAYmB,mBAZnB,EAYwC,qBAZxC,EAY+D,cAZ/D,EAY+E,WAZ/E,EAatB,OAbsB,CAAvB;;AAgBA,WAASC,eAAT,CAA0Bz1C,QAA1B,EAAoCguC,QAApC,EAA+C;AAE9C,QAAI0H,YAAJ;;AAEA,QAAK1H,QAAL,EAAgB;AAEf,YAAMpjB,MAAM,GAAGoP,SAAS,CAAEgU,QAAF,CAAxB;AAEA0H,MAAAA,YAAY,GAAG;AACdlvE,QAAAA,IAAI,EAAEw5B,QAAQ,CAACx5B,IAAT,IAAiBw5B,QAAQ,CAAC3kC,IADlB;AAEdkrD,QAAAA,QAAQ,EAAEE,aAAa,CAACpmC,KAAd,CAAqBuqC,MAAM,CAACrE,QAA5B,CAFI;AAGdO,QAAAA,YAAY,EAAE8D,MAAM,CAAC9D,YAHP;AAIdC,QAAAA,cAAc,EAAE6D,MAAM,CAAC7D;AAJT,OAAf;AAOA,KAXD,MAWO;AAEN2uB,MAAAA,YAAY,GAAG;AACdlvE,QAAAA,IAAI,EAAEw5B,QAAQ,CAACx5B,IAAT,IAAiBw5B,QAAQ,CAAC3kC,IADlB;AAEdkrD,QAAAA,QAAQ,EAAEvmB,QAAQ,CAACumB,QAFL;AAGdO,QAAAA,YAAY,EAAE9mB,QAAQ,CAAC8mB,YAHT;AAIdC,QAAAA,cAAc,EAAE/mB,QAAQ,CAAC+mB;AAJX,OAAf;AAOA;;AAED,WAAO2uB,YAAP;AAEA;;AAED,WAASC,aAAT,CAAwBhgF,MAAxB,EAAiC;AAEhC,UAAMigF,QAAQ,GAAGjgF,MAAM,CAACigF,QAAxB;AACA,UAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;;AAEA,QAAKvT,mBAAL,EAA2B;AAE1B,aAAO,IAAP;AAEA,KAJD,MAIO;AAEN;AACA;AACA;AACA;AACA;AACA;AAEA,YAAMwT,eAAe,GAAG7T,iBAAxB;AACA,YAAM8T,eAAe,GAAG7mF,IAAI,CAACwE,KAAL,CAAY,CAAEoiF,eAAe,GAAG,EAApB,IAA2B,CAAvC,CAAxB;AAEA,YAAMnE,QAAQ,GAAGziF,IAAI,CAAC8E,GAAL,CAAU+hF,eAAV,EAA2BF,KAAK,CAAChmF,MAAjC,CAAjB;;AAEA,UAAK8hF,QAAQ,GAAGkE,KAAK,CAAChmF,MAAtB,EAA+B;AAE9B8vB,QAAAA,OAAO,CAACC,IAAR,CAAc,uCAAuCi2D,KAAK,CAAChmF,MAA7C,GAAsD,4BAAtD,GAAqF8hF,QAArF,GAAgG,GAA9G;AACA,eAAO,CAAP;AAEA;;AAED,aAAOA,QAAP;AAEA;AAED;;AAED,WAASqE,yBAAT,CAAoC55E,GAApC,EAA0C;AAEzC,QAAI4sB,QAAJ;;AAEA,QAAK,CAAE5sB,GAAP,EAAa;AAEZ4sB,MAAAA,QAAQ,GAAGtP,cAAX;AAEA,KAJD,MAIO,IAAKtd,GAAG,CAAC0tB,SAAT,EAAqB;AAE3Bd,MAAAA,QAAQ,GAAG5sB,GAAG,CAAC4sB,QAAf;AAEA,KAJM,MAIA,IAAK5sB,GAAG,CAAC2wB,mBAAT,EAA+B;AAErCpN,MAAAA,OAAO,CAACC,IAAR,CAAc,2HAAd;AACAoJ,MAAAA,QAAQ,GAAG5sB,GAAG,CAACuwB,OAAJ,CAAY3D,QAAvB;AAEA;;AAED,WAAOA,QAAP;AAEA;;AAED,WAASitD,aAAT,CAAwBj2C,QAAxB,EAAkCgnB,MAAlC,EAA0CkvB,OAA1C,EAAmDlsB,KAAnD,EAA0DmsB,WAA1D,EAAuEC,iBAAvE,EAA0FzgF,MAA1F,EAAmG;AAElG,UAAM8qC,GAAG,GAAGupB,KAAK,CAACvpB,GAAlB;AACA,UAAMD,WAAW,GAAGR,QAAQ,CAACq2C,sBAAT,GAAkCrsB,KAAK,CAACxpB,WAAxC,GAAsD,IAA1E;AAEA,UAAMsT,MAAM,GAAG9T,QAAQ,CAAC8T,MAAT,IAAmBtT,WAAlC;AAEA,UAAMwtC,QAAQ,GAAGyG,SAAS,CAAEz0C,QAAQ,CAAC3kC,IAAX,CAA1B,CAPkG,CASlG;AACA;;AAEA,UAAMs2E,QAAQ,GAAGh8E,MAAM,CAAC8qD,aAAP,GAAuBk1B,aAAa,CAAEhgF,MAAF,CAApC,GAAiD,CAAlE;;AAEA,QAAKqqC,QAAQ,CAACkR,SAAT,KAAuB,IAA5B,EAAmC;AAElCA,MAAAA,SAAS,GAAGwf,YAAY,CAAC4Q,eAAb,CAA8BthC,QAAQ,CAACkR,SAAvC,CAAZ;;AAEA,UAAKA,SAAS,KAAKlR,QAAQ,CAACkR,SAA5B,EAAwC;AAEvCvxB,QAAAA,OAAO,CAACC,IAAR,CAAc,mCAAd,EAAmDogB,QAAQ,CAACkR,SAA5D,EAAuE,sBAAvE,EAA+FA,SAA/F,EAA0G,UAA1G;AAEA;AAED;;AAED,UAAMwkC,YAAY,GAAGD,eAAe,CAAEz1C,QAAF,EAAYguC,QAAZ,CAApC;AACAhuC,IAAAA,QAAQ,CAAC2R,eAAT,CAA0B+jC,YAA1B,EAAwC3rB,QAAxC;AAEA,UAAMI,mBAAmB,GAAGJ,QAAQ,CAACK,eAAT,EAA5B;AAEA,UAAMtqB,UAAU,GAAG;AAElB6wB,MAAAA,QAAQ,EAAEA,QAFQ;AAIlBqd,MAAAA,QAAQ,EAAEA,QAJQ;AAKlBwD,MAAAA,UAAU,EAAEkE,YAAY,CAAClvE,IALP;AAOlB+/C,MAAAA,QAAQ,EAAEmvB,YAAY,CAACnvB,QAPL;AAQlBO,MAAAA,YAAY,EAAE4uB,YAAY,CAAC5uB,YART;AASlBC,MAAAA,cAAc,EAAE2uB,YAAY,CAAC3uB,cATX;AAUlBF,MAAAA,OAAO,EAAE7mB,QAAQ,CAAC6mB,OAVA;AAYlB0qB,MAAAA,mBAAmB,EAAEvxC,QAAQ,CAACuxC,mBAZZ;AAalB7pB,MAAAA,gBAAgB,EAAE1nB,QAAQ,CAAC0nB,gBAbT;AAelBxW,MAAAA,SAAS,EAAEA,SAfO;AAiBlBugC,MAAAA,UAAU,EAAE97E,MAAM,CAAC0pC,eAAP,KAA2B,IAjBrB;AAmBlBqyC,MAAAA,sBAAsB,EAAEtP,cAnBN;AAoBlBuQ,MAAAA,cAAc,EAAIxoB,mBAAmB,KAAK,IAA1B,GAAmC6rB,yBAAyB,CAAE7rB,mBAAmB,CAACx9B,OAAtB,CAA5D,GAA8Fo9B,QAAQ,CAAC4oB,cApBrG;AAqBlBv2E,MAAAA,GAAG,EAAE,CAAC,CAAE4jC,QAAQ,CAAC5jC,GArBC;AAsBlBk2E,MAAAA,WAAW,EAAE0D,yBAAyB,CAAEh2C,QAAQ,CAAC5jC,GAAX,CAtBpB;AAuBlBy2C,MAAAA,MAAM,EAAE,CAAC,CAAE7S,QAAQ,CAAC6S,MAvBF;AAwBlB0/B,MAAAA,cAAc,EAAEyD,yBAAyB,CAAEh2C,QAAQ,CAAC6S,MAAX,CAxBvB;AAyBlBiB,MAAAA,MAAM,EAAE,CAAC,CAAEA,MAzBO;AA0BlB48B,MAAAA,UAAU,EAAE58B,MAAM,IAAIA,MAAM,CAACrrB,OA1BX;AA2BlB+pD,MAAAA,cAAc,EAAEwD,yBAAyB,CAAEliC,MAAF,CA3BvB;AA4BlBg6B,MAAAA,YAAY,EAAI,CAAC,CAAEh6B,MAAL,KAAqBA,MAAM,CAACrrB,OAAP,KAAmB9U,uBAArB,IAAoDmgC,MAAM,CAACrrB,OAAP,KAAmB7U,uBAA1F,CA5BI;AA6BlBm/B,MAAAA,QAAQ,EAAE,CAAC,CAAE/S,QAAQ,CAAC+S,QA7BJ;AA8BlB2/B,MAAAA,gBAAgB,EAAEsD,yBAAyB,CAAEh2C,QAAQ,CAAC+S,QAAX,CA9BzB;AA+BlBC,MAAAA,KAAK,EAAE,CAAC,CAAEhT,QAAQ,CAACgT,KA/BD;AAgClBY,MAAAA,WAAW,EAAE,CAAC,CAAE5T,QAAQ,CAAC4T,WAhCP;AAiClB6+B,MAAAA,mBAAmB,EAAEuD,yBAAyB,CAAEh2C,QAAQ,CAAC4T,WAAX,CAjC5B;AAkClBV,MAAAA,OAAO,EAAE,CAAC,CAAElT,QAAQ,CAACkT,OAlCH;AAmClBE,MAAAA,SAAS,EAAE,CAAC,CAAEpT,QAAQ,CAACoT,SAnCL;AAoClB0+B,MAAAA,oBAAoB,EAAE9xC,QAAQ,CAACqT,aAAT,KAA2Bh5B,oBApC/B;AAqClB0zD,MAAAA,qBAAqB,EAAE/tC,QAAQ,CAACqT,aAAT,KAA2Bj5B,qBArChC;AAsClBq4B,MAAAA,YAAY,EAAE,CAAC,CAAEzS,QAAQ,CAACyS,YAtCR;AAuClBC,MAAAA,qBAAqB,EAAE,CAAC,CAAE1S,QAAQ,CAAC0S,qBAvCjB;AAwClBC,MAAAA,kBAAkB,EAAE,CAAC,CAAE3S,QAAQ,CAAC2S,kBAxCd;AAyClBY,MAAAA,eAAe,EAAE,CAAC,CAAEvT,QAAQ,CAACuT,eAzCX;AA0ClBG,MAAAA,YAAY,EAAE,CAAC,CAAE1T,QAAQ,CAAC0T,YA1CR;AA2ClBC,MAAAA,YAAY,EAAE,CAAC,CAAE3T,QAAQ,CAAC2T,YA3CR;AA4ClBE,MAAAA,WAAW,EAAE,CAAC,CAAE7T,QAAQ,CAAC6T,WA5CP;AA6ClBf,MAAAA,QAAQ,EAAE,CAAC,CAAE9S,QAAQ,CAAC8S,QA7CJ;AA+ClBqB,MAAAA,WAAW,EAAE,CAAC,CAAEnU,QAAQ,CAACmU,WA/CP;AAiDlBjC,MAAAA,KAAK,EAAE,CAAC,CAAElS,QAAQ,CAACkS,KAjDD;AAmDlB+B,MAAAA,OAAO,EAAEjU,QAAQ,CAACiU,OAnDA;AAqDlB89B,MAAAA,cAAc,EAAI/xC,QAAQ,CAACoT,SAAT,IAAsBpT,QAAQ,CAAC+xC,cArD/B;AAsDlB1iC,MAAAA,YAAY,EAAErP,QAAQ,CAACqP,YAtDL;AAuDlBoK,MAAAA,SAAS,EAAE,CAAC,CAAEzZ,QAAQ,CAAC5jC,GAAZ,IAAmB,CAAC,CAAE4jC,QAAQ,CAACkT,OAA/B,IAA0C,CAAC,CAAElT,QAAQ,CAACoT,SAAtD,IAAmE,CAAC,CAAEpT,QAAQ,CAAC6T,WAA/E,IAA8F,CAAC,CAAE7T,QAAQ,CAAC8S,QAA1G,IAAsH,CAAC,CAAE9S,QAAQ,CAAC4T,WAAlI,IAAiJ,CAAC,CAAE5T,QAAQ,CAAC0T,YAA7J,IAA6K,CAAC,CAAE1T,QAAQ,CAAC2T,YAAzL,IAAyM,CAAC,CAAE3T,QAAQ,CAACyS,YAArN,IAAqO,CAAC,CAAEzS,QAAQ,CAAC0S,qBAAjP,IAA0Q,CAAC,CAAE1S,QAAQ,CAAC2S,kBAAtR,IAA4S,CAAC,CAAE3S,QAAQ,CAACuT,eAvDjT;AAwDlBy+B,MAAAA,aAAa,EAAE,EAAI,CAAC,CAAEhyC,QAAQ,CAAC5jC,GAAZ,IAAmB,CAAC,CAAE4jC,QAAQ,CAACkT,OAA/B,IAA0C,CAAC,CAAElT,QAAQ,CAACoT,SAAtD,IAAmE,CAAC,CAAEpT,QAAQ,CAAC6T,WAA/E,IAA8F,CAAC,CAAE7T,QAAQ,CAAC8S,QAA1G,IAAsH,CAAC,CAAE9S,QAAQ,CAAC4T,WAAlI,IAAiJ,CAAC,CAAE5T,QAAQ,CAAC0T,YAA7J,IAA6K,CAAC,CAAE1T,QAAQ,CAAC2T,YAAzL,IAAyM,CAAC,CAAE3T,QAAQ,CAAC2S,kBAAzN,KAAiP,CAAC,CAAE3S,QAAQ,CAACuT,eAxD1P;AA0DlB9S,MAAAA,GAAG,EAAE,CAAC,CAAEA,GA1DU;AA2DlBmxC,MAAAA,MAAM,EAAE5xC,QAAQ,CAACS,GA3DC;AA4DlBoxC,MAAAA,OAAO,EAAIpxC,GAAG,IAAIA,GAAG,CAAC61C,SA5DJ;AA8DlB5mC,MAAAA,WAAW,EAAE1P,QAAQ,CAAC0P,WA9DJ;AAgElB0E,MAAAA,eAAe,EAAEpU,QAAQ,CAACoU,eAhER;AAiElButB,MAAAA,sBAAsB,EAAEA,sBAjEN;AAmElB7sB,MAAAA,QAAQ,EAAE9U,QAAQ,CAAC8U,QAAT,IAAqB68B,QAAQ,GAAG,CAnExB;AAoElBA,MAAAA,QAAQ,EAAEA,QApEQ;AAqElBM,MAAAA,gBAAgB,EAAE3P,mBArEA;AAuElB1tB,MAAAA,YAAY,EAAE5U,QAAQ,CAAC4U,YAvEL;AAwElBC,MAAAA,YAAY,EAAE7U,QAAQ,CAAC6U,YAxEL;AAyElB0hC,MAAAA,eAAe,EAAExsB,QAAQ,CAACwsB,eAzER;AA0ElBC,MAAAA,eAAe,EAAEzsB,QAAQ,CAACysB,eA1ER;AA4ElB1H,MAAAA,YAAY,EAAE9nB,MAAM,CAACyvB,WAAP,CAAmB5mF,MA5Ef;AA6ElBo/E,MAAAA,cAAc,EAAEjoB,MAAM,CAAC3jB,KAAP,CAAaxzC,MA7EX;AA8ElBk/E,MAAAA,aAAa,EAAE/nB,MAAM,CAAC0vB,IAAP,CAAY7mF,MA9ET;AA+ElBm/E,MAAAA,iBAAiB,EAAEhoB,MAAM,CAAC2vB,QAAP,CAAgB9mF,MA/EjB;AAgFlBq/E,MAAAA,aAAa,EAAEloB,MAAM,CAAC4vB,IAAP,CAAY/mF,MAhFT;AAkFlBs/E,MAAAA,kBAAkB,EAAEnoB,MAAM,CAAC0H,oBAAP,CAA4B7+D,MAlF9B;AAmFlBw/E,MAAAA,oBAAoB,EAAEroB,MAAM,CAACuI,cAAP,CAAsB1/D,MAnF1B;AAoFlBu/E,MAAAA,mBAAmB,EAAEpoB,MAAM,CAACiI,aAAP,CAAqBp/D,MApFxB;AAsFlB0/E,MAAAA,iBAAiB,EAAE4G,WAtFD;AAuFlB3G,MAAAA,mBAAmB,EAAE4G,iBAvFH;AAyFlB9kC,MAAAA,SAAS,EAAEtR,QAAQ,CAACsR,SAzFF;AA2FlB8gC,MAAAA,gBAAgB,EAAEroB,QAAQ,CAAC8sB,SAAT,CAAmBlyB,OAAnB,IAA8BuxB,OAAO,CAACrmF,MAAR,GAAiB,CA3F/C;AA4FlB0gF,MAAAA,aAAa,EAAExmB,QAAQ,CAAC8sB,SAAT,CAAmBx7E,IA5FhB;AA8FlBkhE,MAAAA,WAAW,EAAEv8B,QAAQ,CAACyR,UAAT,GAAsBsY,QAAQ,CAACwS,WAA/B,GAA6CvpD,aA9FxC;AA+FlBq/D,MAAAA,uBAAuB,EAAEtoB,QAAQ,CAACsoB,uBA/FhB;AAiGlB7gC,MAAAA,kBAAkB,EAAExR,QAAQ,CAACwR,kBAjGX;AAmGlBD,MAAAA,SAAS,EAAEvR,QAAQ,CAACuR,SAnGF;AAoGlB2gC,MAAAA,WAAW,EAAElyC,QAAQ,CAACyP,IAAT,KAAkB7+B,UApGb;AAqGlBuhE,MAAAA,SAAS,EAAEnyC,QAAQ,CAACyP,IAAT,KAAkB9+B,QArGX;AAuGlBiiE,MAAAA,YAAY,EAAI5yC,QAAQ,CAAC4yC,YAAT,KAA0B3gF,SAA5B,GAA0C+tC,QAAQ,CAAC4yC,YAAnD,GAAkE,KAvG9D;AAyGlBprB,MAAAA,mBAAmB,EAAExnB,QAAQ,CAACwnB,mBAzGZ;AA2GlBqmB,MAAAA,oBAAoB,EAAE7tC,QAAQ,CAACknB,UAAT,IAAuBlnB,QAAQ,CAACknB,UAAT,CAAoBC,WA3G/C;AA4GlB8mB,MAAAA,kBAAkB,EAAEjuC,QAAQ,CAACknB,UAAT,IAAuBlnB,QAAQ,CAACknB,UAAT,CAAoBE,SA5G7C;AA6GlB+mB,MAAAA,oBAAoB,EAAEnuC,QAAQ,CAACknB,UAAT,IAAuBlnB,QAAQ,CAACknB,UAAT,CAAoBG,WA7G/C;AA8GlBgnB,MAAAA,yBAAyB,EAAEruC,QAAQ,CAACknB,UAAT,IAAuBlnB,QAAQ,CAACknB,UAAT,CAAoBI,gBA9GpD;AAgHlB4mB,MAAAA,0BAA0B,EAAEvd,QAAQ,IAAIzJ,UAAU,CAACp4C,GAAX,CAAgB,gBAAhB,MAAuC,IAhH7D;AAiHlBs/D,MAAAA,4BAA4B,EAAEzd,QAAQ,IAAIzJ,UAAU,CAACp4C,GAAX,CAAgB,oBAAhB,MAA2C,IAjHnE;AAkHlBw/D,MAAAA,iCAAiC,EAAE3d,QAAQ,IAAIzJ,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,MAA+C,IAlH5E;AAoHlB8iC,MAAAA,qBAAqB,EAAE5R,QAAQ,CAAC4R,qBAAT;AApHL,KAAnB;AAwHA,WAAO9R,UAAP;AAEA;;AAED,WAASg3C,kBAAT,CAA6Bh3C,UAA7B,EAA0C;AAEzC,UAAMzjB,KAAK,GAAG,EAAd;;AAEA,QAAKyjB,UAAU,CAACkuC,QAAhB,EAA2B;AAE1B3xD,MAAAA,KAAK,CAAChiB,IAAN,CAAYylC,UAAU,CAACkuC,QAAvB;AAEA,KAJD,MAIO;AAEN3xD,MAAAA,KAAK,CAAChiB,IAAN,CAAYylC,UAAU,CAACinB,cAAvB;AACA1qC,MAAAA,KAAK,CAAChiB,IAAN,CAAYylC,UAAU,CAACgnB,YAAvB;AAEA;;AAED,QAAKhnB,UAAU,CAAC+mB,OAAX,KAAuB50D,SAA5B,EAAwC;AAEvC,WAAM,MAAMuU,IAAZ,IAAoBs5B,UAAU,CAAC+mB,OAA/B,EAAyC;AAExCxqC,QAAAA,KAAK,CAAChiB,IAAN,CAAYmM,IAAZ;AACA6V,QAAAA,KAAK,CAAChiB,IAAN,CAAYylC,UAAU,CAAC+mB,OAAX,CAAoBrgD,IAApB,CAAZ;AAEA;AAED;;AAED,QAAKs5B,UAAU,CAACyxC,mBAAX,KAAmCt/E,SAAxC,EAAoD;AAEnD,WAAM,IAAIf,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGskF,cAAc,CAAC3lF,MAApC,EAA4CqB,CAAC,EAA7C,EAAmD;AAElDmrB,QAAAA,KAAK,CAAChiB,IAAN,CAAYylC,UAAU,CAAE01C,cAAc,CAAEtkF,CAAF,CAAhB,CAAtB;AAEA;;AAEDmrB,MAAAA,KAAK,CAAChiB,IAAN,CAAY0vD,QAAQ,CAAC4oB,cAArB;AACAt2D,MAAAA,KAAK,CAAChiB,IAAN,CAAY0vD,QAAQ,CAACpc,WAArB;AAEA;;AAEDtxB,IAAAA,KAAK,CAAChiB,IAAN,CAAYylC,UAAU,CAAC8R,qBAAvB;AAEA,WAAOv1B,KAAK,CAAC/hB,IAAN,EAAP;AAEA;;AAED,WAASy8E,cAAT,CAAyBj3C,UAAzB,EAAqCkxC,QAArC,EAAgD;AAE/C,QAAI1T,OAAJ,CAF+C,CAI/C;;AACA,SAAM,IAAI1pE,CAAC,GAAG,CAAR,EAAWojF,EAAE,GAAG3R,QAAQ,CAACx1E,MAA/B,EAAuC+D,CAAC,GAAGojF,EAA3C,EAA+CpjF,CAAC,EAAhD,EAAsD;AAErD,YAAMqjF,kBAAkB,GAAG5R,QAAQ,CAAEzxE,CAAF,CAAnC;;AAEA,UAAKqjF,kBAAkB,CAACjG,QAAnB,KAAgCA,QAArC,EAAgD;AAE/C1T,QAAAA,OAAO,GAAG2Z,kBAAV;AACA,UAAG3Z,OAAO,CAACiX,SAAX;AAEA;AAEA;AAED;;AAED,QAAKjX,OAAO,KAAKrrE,SAAjB,EAA6B;AAE5BqrE,MAAAA,OAAO,GAAG,IAAIyT,YAAJ,CAAkBhnB,QAAlB,EAA4BinB,QAA5B,EAAsClxC,UAAtC,EAAkDm9B,aAAlD,CAAV;AACAoI,MAAAA,QAAQ,CAAChrE,IAAT,CAAeijE,OAAf;AAEA;;AAED,WAAOA,OAAP;AAEA;;AAED,WAAS4Z,cAAT,CAAyB5Z,OAAzB,EAAmC;AAElC,QAAK,EAAGA,OAAO,CAACiX,SAAX,KAAyB,CAA9B,EAAkC;AAEjC;AACA,YAAMrjF,CAAC,GAAGm0E,QAAQ,CAACjrE,OAAT,CAAkBkjE,OAAlB,CAAV;AACA+H,MAAAA,QAAQ,CAAEn0E,CAAF,CAAR,GAAgBm0E,QAAQ,CAAEA,QAAQ,CAACx1E,MAAT,GAAkB,CAApB,CAAxB;AACAw1E,MAAAA,QAAQ,CAAC8R,GAAT,GALiC,CAOjC;;AACA7Z,MAAAA,OAAO,CAAC+W,OAAR;AAEA;AAED;;AAED,SAAO;AACN4B,IAAAA,aAAa,EAAEA,aADT;AAENa,IAAAA,kBAAkB,EAAEA,kBAFd;AAGNC,IAAAA,cAAc,EAAEA,cAHV;AAING,IAAAA,cAAc,EAAEA,cAJV;AAKN;AACA7R,IAAAA,QAAQ,EAAEA;AANJ,GAAP;AASA;AAED;;;;;AAIA,SAAS+R,eAAT,GAA2B;AAE1B,MAAIhpB,UAAU,GAAG,IAAIyC,OAAJ,EAAjB;;AAEA,WAAS/hD,GAAT,CAAcnZ,MAAd,EAAuB;AAEtB,QAAIyG,GAAG,GAAGgyD,UAAU,CAACt/C,GAAX,CAAgBnZ,MAAhB,CAAV;;AAEA,QAAKyG,GAAG,KAAKnK,SAAb,EAAyB;AAExBmK,MAAAA,GAAG,GAAG,EAAN;AACAgyD,MAAAA,UAAU,CAAC1uC,GAAX,CAAgB/pB,MAAhB,EAAwByG,GAAxB;AAEA;;AAED,WAAOA,GAAP;AAEA;;AAED,WAASwO,MAAT,CAAiBjV,MAAjB,EAA0B;AAEzBy4D,IAAAA,UAAU,CAACsD,MAAX,CAAmB/7D,MAAnB;AAEA;;AAED,WAAS05B,MAAT,CAAiB15B,MAAjB,EAAyB9E,GAAzB,EAA8ByD,KAA9B,EAAsC;AAErC85D,IAAAA,UAAU,CAACt/C,GAAX,CAAgBnZ,MAAhB,EAA0B9E,GAA1B,IAAkCyD,KAAlC;AAEA;;AAED,WAASk2B,OAAT,GAAmB;AAElB4jC,IAAAA,UAAU,GAAG,IAAIyC,OAAJ,EAAb;AAEA;;AAED,SAAO;AACN/hD,IAAAA,GAAG,EAAEA,GADC;AAENlE,IAAAA,MAAM,EAAEA,MAFF;AAGNykB,IAAAA,MAAM,EAAEA,MAHF;AAIN7E,IAAAA,OAAO,EAAEA;AAJH,GAAP;AAOA;AAED;;;;;AAIA,SAAS6sD,iBAAT,CAA4B/nF,CAA5B,EAA+BD,CAA/B,EAAmC;AAElC,MAAKC,CAAC,CAACgoF,UAAF,KAAiBjoF,CAAC,CAACioF,UAAxB,EAAqC;AAEpC,WAAOhoF,CAAC,CAACgoF,UAAF,GAAejoF,CAAC,CAACioF,UAAxB;AAEA,GAJD,MAIO,IAAKhoF,CAAC,CAACitC,WAAF,KAAkBltC,CAAC,CAACktC,WAAzB,EAAuC;AAE7C,WAAOjtC,CAAC,CAACitC,WAAF,GAAgBltC,CAAC,CAACktC,WAAzB;AAEA,GAJM,MAIA,IAAKjtC,CAAC,CAACguE,OAAF,KAAcjuE,CAAC,CAACiuE,OAArB,EAA+B;AAErC,WAAOhuE,CAAC,CAACguE,OAAF,CAAUp/B,EAAV,GAAe7uC,CAAC,CAACiuE,OAAF,CAAUp/B,EAAhC;AAEA,GAJM,MAIA,IAAK5uC,CAAC,CAAC0wC,QAAF,CAAW9B,EAAX,KAAkB7uC,CAAC,CAAC2wC,QAAF,CAAW9B,EAAlC,EAAuC;AAE7C,WAAO5uC,CAAC,CAAC0wC,QAAF,CAAW9B,EAAX,GAAgB7uC,CAAC,CAAC2wC,QAAF,CAAW9B,EAAlC;AAEA,GAJM,MAIA,IAAK5uC,CAAC,CAACs7B,CAAF,KAAQv7B,CAAC,CAACu7B,CAAf,EAAmB;AAEzB,WAAOt7B,CAAC,CAACs7B,CAAF,GAAMv7B,CAAC,CAACu7B,CAAf;AAEA,GAJM,MAIA;AAEN,WAAOt7B,CAAC,CAAC4uC,EAAF,GAAO7uC,CAAC,CAAC6uC,EAAhB;AAEA;AAED;;AAED,SAASq5C,wBAAT,CAAmCjoF,CAAnC,EAAsCD,CAAtC,EAA0C;AAEzC,MAAKC,CAAC,CAACgoF,UAAF,KAAiBjoF,CAAC,CAACioF,UAAxB,EAAqC;AAEpC,WAAOhoF,CAAC,CAACgoF,UAAF,GAAejoF,CAAC,CAACioF,UAAxB;AAEA,GAJD,MAIO,IAAKhoF,CAAC,CAACitC,WAAF,KAAkBltC,CAAC,CAACktC,WAAzB,EAAuC;AAE7C,WAAOjtC,CAAC,CAACitC,WAAF,GAAgBltC,CAAC,CAACktC,WAAzB;AAEA,GAJM,MAIA,IAAKjtC,CAAC,CAACs7B,CAAF,KAAQv7B,CAAC,CAACu7B,CAAf,EAAmB;AAEzB,WAAOv7B,CAAC,CAACu7B,CAAF,GAAMt7B,CAAC,CAACs7B,CAAf;AAEA,GAJM,MAIA;AAEN,WAAOt7B,CAAC,CAAC4uC,EAAF,GAAO7uC,CAAC,CAAC6uC,EAAhB;AAEA;AAED;;AAGD,SAASs5C,eAAT,GAA2B;AAE1B,QAAMC,WAAW,GAAG,EAApB;AACA,MAAIC,gBAAgB,GAAG,CAAvB;AAEA,QAAMC,MAAM,GAAG,EAAf;AACA,QAAMhoC,WAAW,GAAG,EAApB;AAEA,QAAMioC,cAAc,GAAG;AAAE15C,IAAAA,EAAE,EAAE,CAAE;AAAR,GAAvB;;AAEA,WAASnlC,IAAT,GAAgB;AAEf2+E,IAAAA,gBAAgB,GAAG,CAAnB;AAEAC,IAAAA,MAAM,CAAC9nF,MAAP,GAAgB,CAAhB;AACA8/C,IAAAA,WAAW,CAAC9/C,MAAZ,GAAqB,CAArB;AAEA;;AAED,WAASgoF,iBAAT,CAA4BliF,MAA5B,EAAoCkqC,QAApC,EAA8CG,QAA9C,EAAwDs3C,UAAxD,EAAoE1sD,CAApE,EAAuEguB,KAAvE,EAA+E;AAE9E,QAAIk/B,UAAU,GAAGL,WAAW,CAAEC,gBAAF,CAA5B;;AAEA,QAAKI,UAAU,KAAK7lF,SAApB,EAAgC;AAE/B6lF,MAAAA,UAAU,GAAG;AACZ55C,QAAAA,EAAE,EAAEvoC,MAAM,CAACuoC,EADC;AAEZvoC,QAAAA,MAAM,EAAEA,MAFI;AAGZkqC,QAAAA,QAAQ,EAAEA,QAHE;AAIZG,QAAAA,QAAQ,EAAEA,QAJE;AAKZs9B,QAAAA,OAAO,EAAEt9B,QAAQ,CAACs9B,OAAT,IAAoBsa,cALjB;AAMZN,QAAAA,UAAU,EAAEA,UANA;AAOZ/6C,QAAAA,WAAW,EAAE5mC,MAAM,CAAC4mC,WAPR;AAQZ3R,QAAAA,CAAC,EAAEA,CARS;AASZguB,QAAAA,KAAK,EAAEA;AATK,OAAb;AAYA6+B,MAAAA,WAAW,CAAEC,gBAAF,CAAX,GAAkCI,UAAlC;AAEA,KAhBD,MAgBO;AAENA,MAAAA,UAAU,CAAC55C,EAAX,GAAgBvoC,MAAM,CAACuoC,EAAvB;AACA45C,MAAAA,UAAU,CAACniF,MAAX,GAAoBA,MAApB;AACAmiF,MAAAA,UAAU,CAACj4C,QAAX,GAAsBA,QAAtB;AACAi4C,MAAAA,UAAU,CAAC93C,QAAX,GAAsBA,QAAtB;AACA83C,MAAAA,UAAU,CAACxa,OAAX,GAAqBt9B,QAAQ,CAACs9B,OAAT,IAAoBsa,cAAzC;AACAE,MAAAA,UAAU,CAACR,UAAX,GAAwBA,UAAxB;AACAQ,MAAAA,UAAU,CAACv7C,WAAX,GAAyB5mC,MAAM,CAAC4mC,WAAhC;AACAu7C,MAAAA,UAAU,CAACltD,CAAX,GAAeA,CAAf;AACAktD,MAAAA,UAAU,CAACl/B,KAAX,GAAmBA,KAAnB;AAEA;;AAED8+B,IAAAA,gBAAgB;AAEhB,WAAOI,UAAP;AAEA;;AAED,WAASz9E,IAAT,CAAe1E,MAAf,EAAuBkqC,QAAvB,EAAiCG,QAAjC,EAA2Cs3C,UAA3C,EAAuD1sD,CAAvD,EAA0DguB,KAA1D,EAAkE;AAEjE,UAAMk/B,UAAU,GAAGD,iBAAiB,CAAEliF,MAAF,EAAUkqC,QAAV,EAAoBG,QAApB,EAA8Bs3C,UAA9B,EAA0C1sD,CAA1C,EAA6CguB,KAA7C,CAApC;AAEA,KAAE5Y,QAAQ,CAAC2P,WAAT,KAAyB,IAAzB,GAAgCA,WAAhC,GAA8CgoC,MAAhD,EAAyDt9E,IAAzD,CAA+Dy9E,UAA/D;AAEA;;AAED,WAAStb,OAAT,CAAkB7mE,MAAlB,EAA0BkqC,QAA1B,EAAoCG,QAApC,EAA8Cs3C,UAA9C,EAA0D1sD,CAA1D,EAA6DguB,KAA7D,EAAqE;AAEpE,UAAMk/B,UAAU,GAAGD,iBAAiB,CAAEliF,MAAF,EAAUkqC,QAAV,EAAoBG,QAApB,EAA8Bs3C,UAA9B,EAA0C1sD,CAA1C,EAA6CguB,KAA7C,CAApC;AAEA,KAAE5Y,QAAQ,CAAC2P,WAAT,KAAyB,IAAzB,GAAgCA,WAAhC,GAA8CgoC,MAAhD,EAAyDnb,OAAzD,CAAkEsb,UAAlE;AAEA;;AAED,WAASr0B,IAAT,CAAes0B,gBAAf,EAAiCC,qBAAjC,EAAyD;AAExD,QAAKL,MAAM,CAAC9nF,MAAP,GAAgB,CAArB,EAAyB8nF,MAAM,CAACl0B,IAAP,CAAas0B,gBAAgB,IAAIV,iBAAjC;AACzB,QAAK1nC,WAAW,CAAC9/C,MAAZ,GAAqB,CAA1B,EAA8B8/C,WAAW,CAAC8T,IAAZ,CAAkBu0B,qBAAqB,IAAIT,wBAA3C;AAE9B;;AAED,WAASU,MAAT,GAAkB;AAEjB;AAEA,SAAM,IAAI/mF,CAAC,GAAGwmF,gBAAR,EAA0B/0C,EAAE,GAAG80C,WAAW,CAAC5nF,MAAjD,EAAyDqB,CAAC,GAAGyxC,EAA7D,EAAiEzxC,CAAC,EAAlE,EAAwE;AAEvE,YAAM4mF,UAAU,GAAGL,WAAW,CAAEvmF,CAAF,CAA9B;AAEA,UAAK4mF,UAAU,CAAC55C,EAAX,KAAkB,IAAvB,EAA8B;AAE9B45C,MAAAA,UAAU,CAAC55C,EAAX,GAAgB,IAAhB;AACA45C,MAAAA,UAAU,CAACniF,MAAX,GAAoB,IAApB;AACAmiF,MAAAA,UAAU,CAACj4C,QAAX,GAAsB,IAAtB;AACAi4C,MAAAA,UAAU,CAAC93C,QAAX,GAAsB,IAAtB;AACA83C,MAAAA,UAAU,CAACxa,OAAX,GAAqB,IAArB;AACAwa,MAAAA,UAAU,CAACl/B,KAAX,GAAmB,IAAnB;AAEA;AAED;;AAED,SAAO;AACN++B,IAAAA,MAAM,EAAEA,MADF;AAENhoC,IAAAA,WAAW,EAAEA,WAFP;AAIN52C,IAAAA,IAAI,EAAEA,IAJA;AAKNsB,IAAAA,IAAI,EAAEA,IALA;AAMNmiE,IAAAA,OAAO,EAAEA,OANH;AAONyb,IAAAA,MAAM,EAAEA,MAPF;AASNx0B,IAAAA,IAAI,EAAEA;AATA,GAAP;AAYA;;AAED,SAASy0B,gBAAT,GAA4B;AAE3B,MAAIC,KAAK,GAAG,IAAItnB,OAAJ,EAAZ;;AAEA,WAASunB,cAAT,CAAyBz+E,KAAzB,EAAiC;AAEhC,UAAMqwD,KAAK,GAAGrwD,KAAK,CAACtJ,MAApB;AAEA25D,IAAAA,KAAK,CAAChwD,mBAAN,CAA2B,SAA3B,EAAsCo+E,cAAtC;AAEAD,IAAAA,KAAK,CAACzmB,MAAN,CAAc1H,KAAd;AAEA;;AAED,WAASl7C,GAAT,CAAck7C,KAAd,EAAqBt3B,MAArB,EAA8B;AAE7B,UAAM2lD,OAAO,GAAGF,KAAK,CAACrpE,GAAN,CAAWk7C,KAAX,CAAhB;AACA,QAAIsuB,IAAJ;;AAEA,QAAKD,OAAO,KAAKpmF,SAAjB,EAA6B;AAE5BqmF,MAAAA,IAAI,GAAG,IAAId,eAAJ,EAAP;AACAW,MAAAA,KAAK,CAACz4D,GAAN,CAAWsqC,KAAX,EAAkB,IAAI6G,OAAJ,EAAlB;AACAsnB,MAAAA,KAAK,CAACrpE,GAAN,CAAWk7C,KAAX,EAAmBtqC,GAAnB,CAAwBgT,MAAxB,EAAgC4lD,IAAhC;AAEAtuB,MAAAA,KAAK,CAAClwD,gBAAN,CAAwB,SAAxB,EAAmCs+E,cAAnC;AAEA,KARD,MAQO;AAENE,MAAAA,IAAI,GAAGD,OAAO,CAACvpE,GAAR,CAAa4jB,MAAb,CAAP;;AACA,UAAK4lD,IAAI,KAAKrmF,SAAd,EAA0B;AAEzBqmF,QAAAA,IAAI,GAAG,IAAId,eAAJ,EAAP;AACAa,QAAAA,OAAO,CAAC34D,GAAR,CAAagT,MAAb,EAAqB4lD,IAArB;AAEA;AAED;;AAED,WAAOA,IAAP;AAEA;;AAED,WAAS9tD,OAAT,GAAmB;AAElB2tD,IAAAA,KAAK,GAAG,IAAItnB,OAAJ,EAAR;AAEA;;AAED,SAAO;AACN/hD,IAAAA,GAAG,EAAEA,GADC;AAEN0b,IAAAA,OAAO,EAAEA;AAFH,GAAP;AAKA;AAED;;;;;AAIA,SAAS+tD,aAAT,GAAyB;AAExB,QAAMvxB,MAAM,GAAG,EAAf;AAEA,SAAO;AAENl4C,IAAAA,GAAG,EAAE,UAAW0pE,KAAX,EAAmB;AAEvB,UAAKxxB,MAAM,CAAEwxB,KAAK,CAACt6C,EAAR,CAAN,KAAuBjsC,SAA5B,EAAwC;AAEvC,eAAO+0D,MAAM,CAAEwxB,KAAK,CAACt6C,EAAR,CAAb;AAEA;;AAED,UAAIqoB,QAAJ;;AAEA,cAASiyB,KAAK,CAACn9E,IAAf;AAEC,aAAK,kBAAL;AACCkrD,UAAAA,QAAQ,GAAG;AACVpgB,YAAAA,SAAS,EAAE,IAAI1U,OAAJ,EADD;AAEV9iC,YAAAA,KAAK,EAAE,IAAI4F,KAAJ;AAFG,WAAX;AAIA;;AAED,aAAK,WAAL;AACCgyD,UAAAA,QAAQ,GAAG;AACV7uD,YAAAA,QAAQ,EAAE,IAAI+5B,OAAJ,EADA;AAEV0U,YAAAA,SAAS,EAAE,IAAI1U,OAAJ,EAFD;AAGV9iC,YAAAA,KAAK,EAAE,IAAI4F,KAAJ,EAHG;AAIV+oC,YAAAA,QAAQ,EAAE,CAJA;AAKVuxB,YAAAA,OAAO,EAAE,CALC;AAMVC,YAAAA,WAAW,EAAE,CANH;AAOVC,YAAAA,KAAK,EAAE;AAPG,WAAX;AASA;;AAED,aAAK,YAAL;AACCxI,UAAAA,QAAQ,GAAG;AACV7uD,YAAAA,QAAQ,EAAE,IAAI+5B,OAAJ,EADA;AAEV9iC,YAAAA,KAAK,EAAE,IAAI4F,KAAJ,EAFG;AAGV+oC,YAAAA,QAAQ,EAAE,CAHA;AAIVyxB,YAAAA,KAAK,EAAE;AAJG,WAAX;AAMA;;AAED,aAAK,iBAAL;AACCxI,UAAAA,QAAQ,GAAG;AACVpgB,YAAAA,SAAS,EAAE,IAAI1U,OAAJ,EADD;AAEVi+B,YAAAA,QAAQ,EAAE,IAAIn7D,KAAJ,EAFA;AAGVo7D,YAAAA,WAAW,EAAE,IAAIp7D,KAAJ;AAHH,WAAX;AAKA;;AAED,aAAK,eAAL;AACCgyD,UAAAA,QAAQ,GAAG;AACV53D,YAAAA,KAAK,EAAE,IAAI4F,KAAJ,EADG;AAEVmD,YAAAA,QAAQ,EAAE,IAAI+5B,OAAJ,EAFA;AAGVgnD,YAAAA,SAAS,EAAE,IAAIhnD,OAAJ,EAHD;AAIVinD,YAAAA,UAAU,EAAE,IAAIjnD,OAAJ;AAJF,WAAX;AAMA;AA7CF;;AAiDAu1B,MAAAA,MAAM,CAAEwxB,KAAK,CAACt6C,EAAR,CAAN,GAAqBqoB,QAArB;AAEA,aAAOA,QAAP;AAEA;AAjEK,GAAP;AAqEA;;AAED,SAASoyB,mBAAT,GAA+B;AAE9B,QAAM3xB,MAAM,GAAG,EAAf;AAEA,SAAO;AAENl4C,IAAAA,GAAG,EAAE,UAAW0pE,KAAX,EAAmB;AAEvB,UAAKxxB,MAAM,CAAEwxB,KAAK,CAACt6C,EAAR,CAAN,KAAuBjsC,SAA5B,EAAwC;AAEvC,eAAO+0D,MAAM,CAAEwxB,KAAK,CAACt6C,EAAR,CAAb;AAEA;;AAED,UAAIqoB,QAAJ;;AAEA,cAASiyB,KAAK,CAACn9E,IAAf;AAEC,aAAK,kBAAL;AACCkrD,UAAAA,QAAQ,GAAG;AACV+H,YAAAA,UAAU,EAAE,CADF;AAEVC,YAAAA,gBAAgB,EAAE,CAFR;AAGVC,YAAAA,YAAY,EAAE,CAHJ;AAIVC,YAAAA,aAAa,EAAE,IAAI5uC,OAAJ;AAJL,WAAX;AAMA;;AAED,aAAK,WAAL;AACC0mC,UAAAA,QAAQ,GAAG;AACV+H,YAAAA,UAAU,EAAE,CADF;AAEVC,YAAAA,gBAAgB,EAAE,CAFR;AAGVC,YAAAA,YAAY,EAAE,CAHJ;AAIVC,YAAAA,aAAa,EAAE,IAAI5uC,OAAJ;AAJL,WAAX;AAMA;;AAED,aAAK,YAAL;AACC0mC,UAAAA,QAAQ,GAAG;AACV+H,YAAAA,UAAU,EAAE,CADF;AAEVC,YAAAA,gBAAgB,EAAE,CAFR;AAGVC,YAAAA,YAAY,EAAE,CAHJ;AAIVC,YAAAA,aAAa,EAAE,IAAI5uC,OAAJ,EAJL;AAKVwvC,YAAAA,gBAAgB,EAAE,CALR;AAMVC,YAAAA,eAAe,EAAE;AANP,WAAX;AAQA;AAED;AA/BD;;AAmCAtI,MAAAA,MAAM,CAAEwxB,KAAK,CAACt6C,EAAR,CAAN,GAAqBqoB,QAArB;AAEA,aAAOA,QAAP;AAEA;AAnDK,GAAP;AAuDA;;AAID,IAAIqyB,WAAW,GAAG,CAAlB;;AAEA,SAASC,wBAAT,CAAmCC,MAAnC,EAA2CC,MAA3C,EAAoD;AAEnD,SAAO,CAAEA,MAAM,CAAC38C,UAAP,GAAoB,CAApB,GAAwB,CAA1B,KAAkC08C,MAAM,CAAC18C,UAAP,GAAoB,CAApB,GAAwB,CAA1D,CAAP;AAEA;;AAED,SAAS48C,WAAT,GAAuB;AAEtB,QAAM74C,KAAK,GAAG,IAAIo4C,aAAJ,EAAd;AAEA,QAAMU,WAAW,GAAGN,mBAAmB,EAAvC;AAEA,QAAMxd,KAAK,GAAG;AAEbxxC,IAAAA,OAAO,EAAE,CAFI;AAIbi7B,IAAAA,IAAI,EAAE;AACLs0B,MAAAA,iBAAiB,EAAE,CAAE,CADhB;AAELC,MAAAA,WAAW,EAAE,CAAE,CAFV;AAGLC,MAAAA,UAAU,EAAE,CAAE,CAHT;AAILC,MAAAA,cAAc,EAAE,CAAE,CAJb;AAKLC,MAAAA,UAAU,EAAE,CAAE,CALT;AAOLC,MAAAA,qBAAqB,EAAE,CAAE,CAPpB;AAQLC,MAAAA,eAAe,EAAE,CAAE,CARd;AASLC,MAAAA,cAAc,EAAE,CAAE;AATb,KAJO;AAgBbC,IAAAA,OAAO,EAAE,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,CAhBI;AAiBbC,IAAAA,KAAK,EAAE,EAjBM;AAkBblD,IAAAA,WAAW,EAAE,EAlBA;AAmBbmD,IAAAA,iBAAiB,EAAE,EAnBN;AAoBblrB,IAAAA,oBAAoB,EAAE,EApBT;AAqBbC,IAAAA,uBAAuB,EAAE,EArBZ;AAsBb+nB,IAAAA,IAAI,EAAE,EAtBO;AAuBbmD,IAAAA,UAAU,EAAE,EAvBC;AAwBb5qB,IAAAA,aAAa,EAAE,EAxBF;AAyBbC,IAAAA,gBAAgB,EAAE,EAzBL;AA0BbynB,IAAAA,QAAQ,EAAE,EA1BG;AA2BbtzC,IAAAA,KAAK,EAAE,EA3BM;AA4Bby2C,IAAAA,WAAW,EAAE,EA5BA;AA6BbvqB,IAAAA,cAAc,EAAE,EA7BH;AA8BbC,IAAAA,iBAAiB,EAAE,EA9BN;AA+BbonB,IAAAA,IAAI,EAAE;AA/BO,GAAd;;AAmCA,OAAM,IAAI1lF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+BiqE,KAAK,CAACwe,KAAN,CAAYt/E,IAAZ,CAAkB,IAAIo3B,OAAJ,EAAlB;;AAE/B,QAAMsoD,OAAO,GAAG,IAAItoD,OAAJ,EAAhB;AACA,QAAM9K,OAAO,GAAG,IAAIiO,OAAJ,EAAhB;AACA,QAAMolD,QAAQ,GAAG,IAAIplD,OAAJ,EAAjB;;AAEA,WAASyoC,KAAT,CAAgBrW,MAAhB,EAAwBkvB,OAAxB,EAAiCxjD,MAAjC,EAA0C;AAEzC,QAAIzjC,CAAC,GAAG,CAAR;AAAA,QAAWG,CAAC,GAAG,CAAf;AAAA,QAAkBC,CAAC,GAAG,CAAtB;;AAEA,SAAM,IAAI6B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+BiqE,KAAK,CAACwe,KAAN,CAAazoF,CAAb,EAAiBwuB,GAAjB,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B;;AAE/B,QAAIw5D,iBAAiB,GAAG,CAAxB;AACA,QAAIC,WAAW,GAAG,CAAlB;AACA,QAAIC,UAAU,GAAG,CAAjB;AACA,QAAIC,cAAc,GAAG,CAArB;AACA,QAAIC,UAAU,GAAG,CAAjB;AAEA,QAAIC,qBAAqB,GAAG,CAA5B;AACA,QAAIC,eAAe,GAAG,CAAtB;AACA,QAAIC,cAAc,GAAG,CAArB;AAEA,UAAM3V,UAAU,GAAGpxC,MAAM,CAACC,kBAA1B;AAEAq0B,IAAAA,MAAM,CAACvD,IAAP,CAAao1B,wBAAb;;AAEA,SAAM,IAAI3nF,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG01D,MAAM,CAACn3D,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAMsnF,KAAK,GAAGxxB,MAAM,CAAE91D,CAAF,CAApB;AAEA,YAAMvC,KAAK,GAAG6pF,KAAK,CAAC7pF,KAApB;AACA,YAAMsrF,SAAS,GAAGzB,KAAK,CAACyB,SAAxB;AACA,YAAM38C,QAAQ,GAAGk7C,KAAK,CAACl7C,QAAvB;AAEA,YAAMu5C,SAAS,GAAK2B,KAAK,CAACzd,MAAN,IAAgByd,KAAK,CAACzd,MAAN,CAAa3+D,GAA/B,GAAuCo8E,KAAK,CAACzd,MAAN,CAAa3+D,GAAb,CAAiBuwB,OAAxD,GAAkE,IAApF;;AAEA,UAAK6rD,KAAK,CAAC0B,cAAX,EAA4B;AAE3BjrF,QAAAA,CAAC,IAAIN,KAAK,CAACM,CAAN,GAAUgrF,SAAf;AACA7qF,QAAAA,CAAC,IAAIT,KAAK,CAACS,CAAN,GAAU6qF,SAAf;AACA5qF,QAAAA,CAAC,IAAIV,KAAK,CAACU,CAAN,GAAU4qF,SAAf;AAEA,OAND,MAMO,IAAKzB,KAAK,CAAC2B,YAAX,EAA0B;AAEhC,aAAM,IAAIp1C,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9Bo2B,UAAAA,KAAK,CAACwe,KAAN,CAAa50C,CAAb,EAAiBtkB,eAAjB,CAAkC+3D,KAAK,CAAC4B,EAAN,CAASC,YAAT,CAAuBt1C,CAAvB,CAAlC,EAA8Dk1C,SAA9D;AAEA;AAED,OARM,MAQA,IAAKzB,KAAK,CAAC8B,kBAAX,EAAgC;AAEtC,cAAM/zB,QAAQ,GAAGpmB,KAAK,CAACrxB,GAAN,CAAW0pE,KAAX,CAAjB;AAEAjyB,QAAAA,QAAQ,CAAC53D,KAAT,CAAe2xB,IAAf,CAAqBk4D,KAAK,CAAC7pF,KAA3B,EAAmCmyB,cAAnC,CAAmD03D,KAAK,CAACyB,SAAzD;AACA1zB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmB7R,qBAAnB,CAA0CkkD,KAAK,CAACzlD,WAAhD;AACAgnD,QAAAA,OAAO,CAACzlD,qBAAR,CAA+BkkD,KAAK,CAACnoF,MAAN,CAAa0iC,WAA5C;AACAwzB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmBzlB,GAAnB,CAAwBq5D,OAAxB;AACAxzB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmBnT,kBAAnB,CAAuC8wC,UAAvC;;AAEA,YAAK0U,KAAK,CAACp8C,UAAX,EAAwB;AAEvB,gBAAM2+B,MAAM,GAAGyd,KAAK,CAACzd,MAArB;AAEA,gBAAMwf,cAAc,GAAGtB,WAAW,CAACnqE,GAAZ,CAAiB0pE,KAAjB,CAAvB;AAEA+B,UAAAA,cAAc,CAACjsB,UAAf,GAA4ByM,MAAM,CAACyf,IAAnC;AACAD,UAAAA,cAAc,CAAChsB,gBAAf,GAAkCwM,MAAM,CAAC0f,UAAzC;AACAF,UAAAA,cAAc,CAAC/rB,YAAf,GAA8BuM,MAAM,CAAC9mC,MAArC;AACAsmD,UAAAA,cAAc,CAAC9rB,aAAf,GAA+BsM,MAAM,CAAC2f,OAAtC;AAEAvf,UAAAA,KAAK,CAACye,iBAAN,CAAyBV,iBAAzB,IAA+CqB,cAA/C;AACApf,UAAAA,KAAK,CAACzM,oBAAN,CAA4BwqB,iBAA5B,IAAkDrC,SAAlD;AACA1b,UAAAA,KAAK,CAACxM,uBAAN,CAA+BuqB,iBAA/B,IAAqDV,KAAK,CAACzd,MAAN,CAAa90C,MAAlE;AAEAszD,UAAAA,qBAAqB;AAErB;;AAEDpe,QAAAA,KAAK,CAACsb,WAAN,CAAmByC,iBAAnB,IAAyC3yB,QAAzC;AAEA2yB,QAAAA,iBAAiB;AAEjB,OAjCM,MAiCA,IAAKV,KAAK,CAACmC,WAAX,EAAyB;AAE/B,cAAMp0B,QAAQ,GAAGpmB,KAAK,CAACrxB,GAAN,CAAW0pE,KAAX,CAAjB;AAEAjyB,QAAAA,QAAQ,CAAC7uD,QAAT,CAAkB48B,qBAAlB,CAAyCkkD,KAAK,CAACzlD,WAA/C;AACAwzB,QAAAA,QAAQ,CAAC7uD,QAAT,CAAkBszB,YAAlB,CAAgC84C,UAAhC;AAEAvd,QAAAA,QAAQ,CAAC53D,KAAT,CAAe2xB,IAAf,CAAqB3xB,KAArB,EAA6BmyB,cAA7B,CAA6Cm5D,SAA7C;AACA1zB,QAAAA,QAAQ,CAACjpB,QAAT,GAAoBA,QAApB;AAEAipB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmB7R,qBAAnB,CAA0CkkD,KAAK,CAACzlD,WAAhD;AACAgnD,QAAAA,OAAO,CAACzlD,qBAAR,CAA+BkkD,KAAK,CAACnoF,MAAN,CAAa0iC,WAA5C;AACAwzB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmBzlB,GAAnB,CAAwBq5D,OAAxB;AACAxzB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmBnT,kBAAnB,CAAuC8wC,UAAvC;AAEAvd,QAAAA,QAAQ,CAACsI,OAAT,GAAmB3/D,IAAI,CAAC8vB,GAAL,CAAUw5D,KAAK,CAACz2D,KAAhB,CAAnB;AACAwkC,QAAAA,QAAQ,CAACuI,WAAT,GAAuB5/D,IAAI,CAAC8vB,GAAL,CAAUw5D,KAAK,CAACz2D,KAAN,IAAgB,IAAIy2D,KAAK,CAACoC,QAA1B,CAAV,CAAvB;AACAr0B,QAAAA,QAAQ,CAACwI,KAAT,GAAiBypB,KAAK,CAACzpB,KAAvB;;AAEA,YAAKypB,KAAK,CAACp8C,UAAX,EAAwB;AAEvB,gBAAM2+B,MAAM,GAAGyd,KAAK,CAACzd,MAArB;AAEA,gBAAMwf,cAAc,GAAGtB,WAAW,CAACnqE,GAAZ,CAAiB0pE,KAAjB,CAAvB;AAEA+B,UAAAA,cAAc,CAACjsB,UAAf,GAA4ByM,MAAM,CAACyf,IAAnC;AACAD,UAAAA,cAAc,CAAChsB,gBAAf,GAAkCwM,MAAM,CAAC0f,UAAzC;AACAF,UAAAA,cAAc,CAAC/rB,YAAf,GAA8BuM,MAAM,CAAC9mC,MAArC;AACAsmD,UAAAA,cAAc,CAAC9rB,aAAf,GAA+BsM,MAAM,CAAC2f,OAAtC;AAEAvf,UAAAA,KAAK,CAAC0e,UAAN,CAAkBT,UAAlB,IAAiCmB,cAAjC;AACApf,UAAAA,KAAK,CAAClM,aAAN,CAAqBmqB,UAArB,IAAoCvC,SAApC;AACA1b,UAAAA,KAAK,CAACjM,gBAAN,CAAwBkqB,UAAxB,IAAuCZ,KAAK,CAACzd,MAAN,CAAa90C,MAApD;AAEAwzD,UAAAA,cAAc;AAEd;;AAEDte,QAAAA,KAAK,CAACub,IAAN,CAAY0C,UAAZ,IAA2B7yB,QAA3B;AAEA6yB,QAAAA,UAAU;AAEV,OA1CM,MA0CA,IAAKZ,KAAK,CAACqC,eAAX,EAA6B;AAEnC,cAAMt0B,QAAQ,GAAGpmB,KAAK,CAACrxB,GAAN,CAAW0pE,KAAX,CAAjB,CAFmC,CAInC;AACA;AAEA;;AACAjyB,QAAAA,QAAQ,CAAC53D,KAAT,CAAe2xB,IAAf,CAAqB3xB,KAArB,EAA6BmyB,cAA7B,CAA6Cm5D,SAA7C;AAEA1zB,QAAAA,QAAQ,CAAC7uD,QAAT,CAAkB48B,qBAAlB,CAAyCkkD,KAAK,CAACzlD,WAA/C;AACAwzB,QAAAA,QAAQ,CAAC7uD,QAAT,CAAkBszB,YAAlB,CAAgC84C,UAAhC,EAXmC,CAanC;;AACAkW,QAAAA,QAAQ,CAACh2D,QAAT;AACA2C,QAAAA,OAAO,CAACrG,IAAR,CAAck4D,KAAK,CAACzlD,WAApB;AACApM,QAAAA,OAAO,CAAClC,WAAR,CAAqBq/C,UAArB;AACAkW,QAAAA,QAAQ,CAACvkD,eAAT,CAA0B9O,OAA1B;AAEA4/B,QAAAA,QAAQ,CAACkyB,SAAT,CAAmB/4D,GAAnB,CAAwB84D,KAAK,CAAC39E,KAAN,GAAc,GAAtC,EAA2C,GAA3C,EAAgD,GAAhD;AACA0rD,QAAAA,QAAQ,CAACmyB,UAAT,CAAoBh5D,GAApB,CAAyB,GAAzB,EAA8B84D,KAAK,CAAC19E,MAAN,GAAe,GAA7C,EAAkD,GAAlD;AAEAyrD,QAAAA,QAAQ,CAACkyB,SAAT,CAAmBztD,YAAnB,CAAiCgvD,QAAjC;AACAzzB,QAAAA,QAAQ,CAACmyB,UAAT,CAAoB1tD,YAApB,CAAkCgvD,QAAlC,EAvBmC,CAyBnC;AACA;;AAEA7e,QAAAA,KAAK,CAACwb,QAAN,CAAgB0C,cAAhB,IAAmC9yB,QAAnC;AAEA8yB,QAAAA,cAAc;AAEd,OAhCM,MAgCA,IAAKb,KAAK,CAACsC,YAAX,EAA0B;AAEhC,cAAMv0B,QAAQ,GAAGpmB,KAAK,CAACrxB,GAAN,CAAW0pE,KAAX,CAAjB;AAEAjyB,QAAAA,QAAQ,CAAC7uD,QAAT,CAAkB48B,qBAAlB,CAAyCkkD,KAAK,CAACzlD,WAA/C;AACAwzB,QAAAA,QAAQ,CAAC7uD,QAAT,CAAkBszB,YAAlB,CAAgC84C,UAAhC;AAEAvd,QAAAA,QAAQ,CAAC53D,KAAT,CAAe2xB,IAAf,CAAqBk4D,KAAK,CAAC7pF,KAA3B,EAAmCmyB,cAAnC,CAAmD03D,KAAK,CAACyB,SAAzD;AACA1zB,QAAAA,QAAQ,CAACjpB,QAAT,GAAoBk7C,KAAK,CAACl7C,QAA1B;AACAipB,QAAAA,QAAQ,CAACwI,KAAT,GAAiBypB,KAAK,CAACzpB,KAAvB;;AAEA,YAAKypB,KAAK,CAACp8C,UAAX,EAAwB;AAEvB,gBAAM2+B,MAAM,GAAGyd,KAAK,CAACzd,MAArB;AAEA,gBAAMwf,cAAc,GAAGtB,WAAW,CAACnqE,GAAZ,CAAiB0pE,KAAjB,CAAvB;AAEA+B,UAAAA,cAAc,CAACjsB,UAAf,GAA4ByM,MAAM,CAACyf,IAAnC;AACAD,UAAAA,cAAc,CAAChsB,gBAAf,GAAkCwM,MAAM,CAAC0f,UAAzC;AACAF,UAAAA,cAAc,CAAC/rB,YAAf,GAA8BuM,MAAM,CAAC9mC,MAArC;AACAsmD,UAAAA,cAAc,CAAC9rB,aAAf,GAA+BsM,MAAM,CAAC2f,OAAtC;AACAH,UAAAA,cAAc,CAAClrB,gBAAf,GAAkC0L,MAAM,CAACroC,MAAP,CAAcwG,IAAhD;AACAqhD,UAAAA,cAAc,CAACjrB,eAAf,GAAiCyL,MAAM,CAACroC,MAAP,CAAcyG,GAA/C;AAEAgiC,UAAAA,KAAK,CAAC2e,WAAN,CAAmBX,WAAnB,IAAmCoB,cAAnC;AACApf,UAAAA,KAAK,CAAC5L,cAAN,CAAsB4pB,WAAtB,IAAsCtC,SAAtC;AACA1b,UAAAA,KAAK,CAAC3L,iBAAN,CAAyB2pB,WAAzB,IAAyCX,KAAK,CAACzd,MAAN,CAAa90C,MAAtD;AAEAuzD,UAAAA,eAAe;AAEf;;AAEDre,QAAAA,KAAK,CAAC93B,KAAN,CAAa81C,WAAb,IAA6B5yB,QAA7B;AAEA4yB,QAAAA,WAAW;AAEX,OApCM,MAoCA,IAAKX,KAAK,CAACuC,iBAAX,EAA+B;AAErC,cAAMx0B,QAAQ,GAAGpmB,KAAK,CAACrxB,GAAN,CAAW0pE,KAAX,CAAjB;AAEAjyB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmB7R,qBAAnB,CAA0CkkD,KAAK,CAACzlD,WAAhD;AACAwzB,QAAAA,QAAQ,CAACpgB,SAAT,CAAmBnT,kBAAnB,CAAuC8wC,UAAvC;AACAvd,QAAAA,QAAQ,CAACpgB,SAAT,CAAmBrkB,SAAnB;AAEAykC,QAAAA,QAAQ,CAACmJ,QAAT,CAAkBpvC,IAAlB,CAAwBk4D,KAAK,CAAC7pF,KAA9B,EAAsCmyB,cAAtC,CAAsDm5D,SAAtD;AACA1zB,QAAAA,QAAQ,CAACoJ,WAAT,CAAqBrvC,IAArB,CAA2Bk4D,KAAK,CAAC7oB,WAAjC,EAA+C7uC,cAA/C,CAA+Dm5D,SAA/D;AAEA9e,QAAAA,KAAK,CAACyb,IAAN,CAAY0C,UAAZ,IAA2B/yB,QAA3B;AAEA+yB,QAAAA,UAAU;AAEV;AAED;;AAEDne,IAAAA,KAAK,CAACue,OAAN,CAAe,CAAf,IAAqBzqF,CAArB;AACAksE,IAAAA,KAAK,CAACue,OAAN,CAAe,CAAf,IAAqBtqF,CAArB;AACA+rE,IAAAA,KAAK,CAACue,OAAN,CAAe,CAAf,IAAqBrqF,CAArB;AAEA,UAAMu1D,IAAI,GAAGuW,KAAK,CAACvW,IAAnB;;AAEA,QAAKA,IAAI,CAACs0B,iBAAL,KAA2BA,iBAA3B,IACJt0B,IAAI,CAACu0B,WAAL,KAAqBA,WADjB,IAEJv0B,IAAI,CAACw0B,UAAL,KAAoBA,UAFhB,IAGJx0B,IAAI,CAACy0B,cAAL,KAAwBA,cAHpB,IAIJz0B,IAAI,CAAC00B,UAAL,KAAoBA,UAJhB,IAKJ10B,IAAI,CAAC20B,qBAAL,KAA+BA,qBAL3B,IAMJ30B,IAAI,CAAC40B,eAAL,KAAyBA,eANrB,IAOJ50B,IAAI,CAAC60B,cAAL,KAAwBA,cAPzB,EAO0C;AAEzCte,MAAAA,KAAK,CAACsb,WAAN,CAAkB5mF,MAAlB,GAA2BqpF,iBAA3B;AACA/d,MAAAA,KAAK,CAACub,IAAN,CAAW7mF,MAAX,GAAoBupF,UAApB;AACAje,MAAAA,KAAK,CAACwb,QAAN,CAAe9mF,MAAf,GAAwBwpF,cAAxB;AACAle,MAAAA,KAAK,CAAC93B,KAAN,CAAYxzC,MAAZ,GAAqBspF,WAArB;AACAhe,MAAAA,KAAK,CAACyb,IAAN,CAAW/mF,MAAX,GAAoBypF,UAApB;AAEAne,MAAAA,KAAK,CAACye,iBAAN,CAAwB/pF,MAAxB,GAAiC0pF,qBAAjC;AACApe,MAAAA,KAAK,CAACzM,oBAAN,CAA2B7+D,MAA3B,GAAoC0pF,qBAApC;AACApe,MAAAA,KAAK,CAAC2e,WAAN,CAAkBjqF,MAAlB,GAA2B2pF,eAA3B;AACAre,MAAAA,KAAK,CAAC5L,cAAN,CAAqB1/D,MAArB,GAA8B2pF,eAA9B;AACAre,MAAAA,KAAK,CAAC0e,UAAN,CAAiBhqF,MAAjB,GAA0B4pF,cAA1B;AACAte,MAAAA,KAAK,CAAClM,aAAN,CAAoBp/D,MAApB,GAA6B4pF,cAA7B;AACAte,MAAAA,KAAK,CAACxM,uBAAN,CAA8B9+D,MAA9B,GAAuC0pF,qBAAvC;AACApe,MAAAA,KAAK,CAAC3L,iBAAN,CAAwB3/D,MAAxB,GAAiC2pF,eAAjC;AACAre,MAAAA,KAAK,CAACjM,gBAAN,CAAuBr/D,MAAvB,GAAgC4pF,cAAhC;AAEA70B,MAAAA,IAAI,CAACs0B,iBAAL,GAAyBA,iBAAzB;AACAt0B,MAAAA,IAAI,CAACu0B,WAAL,GAAmBA,WAAnB;AACAv0B,MAAAA,IAAI,CAACw0B,UAAL,GAAkBA,UAAlB;AACAx0B,MAAAA,IAAI,CAACy0B,cAAL,GAAsBA,cAAtB;AACAz0B,MAAAA,IAAI,CAAC00B,UAAL,GAAkBA,UAAlB;AAEA10B,MAAAA,IAAI,CAAC20B,qBAAL,GAA6BA,qBAA7B;AACA30B,MAAAA,IAAI,CAAC40B,eAAL,GAAuBA,eAAvB;AACA50B,MAAAA,IAAI,CAAC60B,cAAL,GAAsBA,cAAtB;AAEAte,MAAAA,KAAK,CAACxxC,OAAN,GAAgBivD,WAAW,EAA3B;AAEA;AAED;;AAED,SAAO;AACNvb,IAAAA,KAAK,EAAEA,KADD;AAENlC,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAKA;AAED;;;;;AAIA,SAAS6f,gBAAT,GAA4B;AAE3B,QAAMh0B,MAAM,GAAG,IAAIgyB,WAAJ,EAAf;AAEA,QAAMiC,WAAW,GAAG,EAApB;AACA,QAAMC,YAAY,GAAG,EAArB;;AAEA,WAASniF,IAAT,GAAgB;AAEfkiF,IAAAA,WAAW,CAACprF,MAAZ,GAAqB,CAArB;AACAqrF,IAAAA,YAAY,CAACrrF,MAAb,GAAsB,CAAtB;AAEA;;AAED,WAASsrF,SAAT,CAAoB3C,KAApB,EAA4B;AAE3ByC,IAAAA,WAAW,CAAC5gF,IAAZ,CAAkBm+E,KAAlB;AAEA;;AAED,WAAS4C,UAAT,CAAqBC,WAArB,EAAmC;AAElCH,IAAAA,YAAY,CAAC7gF,IAAb,CAAmBghF,WAAnB;AAEA;;AAED,WAASC,WAAT,CAAsB5oD,MAAtB,EAA+B;AAE9Bs0B,IAAAA,MAAM,CAACqW,KAAP,CAAc4d,WAAd,EAA2BC,YAA3B,EAAyCxoD,MAAzC;AAEA;;AAED,QAAMyoC,KAAK,GAAG;AACb8f,IAAAA,WAAW,EAAEA,WADA;AAEbC,IAAAA,YAAY,EAAEA,YAFD;AAIbl0B,IAAAA,MAAM,EAAEA;AAJK,GAAd;AAOA,SAAO;AACNjuD,IAAAA,IAAI,EAAEA,IADA;AAENoiE,IAAAA,KAAK,EAAEA,KAFD;AAGNmgB,IAAAA,WAAW,EAAEA,WAHP;AAKNH,IAAAA,SAAS,EAAEA,SALL;AAMNC,IAAAA,UAAU,EAAEA;AANN,GAAP;AASA;;AAED,SAASG,iBAAT,GAA6B;AAE5B,MAAIC,YAAY,GAAG,IAAI3qB,OAAJ,EAAnB;;AAEA,WAASunB,cAAT,CAAyBz+E,KAAzB,EAAiC;AAEhC,UAAMqwD,KAAK,GAAGrwD,KAAK,CAACtJ,MAApB;AAEA25D,IAAAA,KAAK,CAAChwD,mBAAN,CAA2B,SAA3B,EAAsCo+E,cAAtC;AAEAoD,IAAAA,YAAY,CAAC9pB,MAAb,CAAqB1H,KAArB;AAEA;;AAED,WAASl7C,GAAT,CAAck7C,KAAd,EAAqBt3B,MAArB,EAA8B;AAE7B,QAAI+oD,WAAJ;;AAEA,QAAKD,YAAY,CAACE,GAAb,CAAkB1xB,KAAlB,MAA8B,KAAnC,EAA2C;AAE1CyxB,MAAAA,WAAW,GAAG,IAAIT,gBAAJ,EAAd;AACAQ,MAAAA,YAAY,CAAC97D,GAAb,CAAkBsqC,KAAlB,EAAyB,IAAI6G,OAAJ,EAAzB;AACA2qB,MAAAA,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAA0BtqC,GAA1B,CAA+BgT,MAA/B,EAAuC+oD,WAAvC;AAEAzxB,MAAAA,KAAK,CAAClwD,gBAAN,CAAwB,SAAxB,EAAmCs+E,cAAnC;AAEA,KARD,MAQO;AAEN,UAAKoD,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAA0B0xB,GAA1B,CAA+BhpD,MAA/B,MAA4C,KAAjD,EAAyD;AAExD+oD,QAAAA,WAAW,GAAG,IAAIT,gBAAJ,EAAd;AACAQ,QAAAA,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAA0BtqC,GAA1B,CAA+BgT,MAA/B,EAAuC+oD,WAAvC;AAEA,OALD,MAKO;AAENA,QAAAA,WAAW,GAAGD,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAA0Bl7C,GAA1B,CAA+B4jB,MAA/B,CAAd;AAEA;AAED;;AAED,WAAO+oD,WAAP;AAEA;;AAED,WAASjxD,OAAT,GAAmB;AAElBgxD,IAAAA,YAAY,GAAG,IAAI3qB,OAAJ,EAAf;AAEA;;AAED,SAAO;AACN/hD,IAAAA,GAAG,EAAEA,GADC;AAEN0b,IAAAA,OAAO,EAAEA;AAFH,GAAP;AAKA;AAED;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAASkqD,iBAAT,CAA4B50C,UAA5B,EAAyC;AAExCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAKu3E,YAAL,GAAoB14D,iBAApB;AAEA,OAAK46B,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AAEA,OAAKx4C,GAAL,GAAW,IAAX;AAEA,OAAK02C,QAAL,GAAgB,IAAhB;AAEA,OAAKS,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKe,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AAEA,OAAKhU,GAAL,GAAW,KAAX;AAEA,OAAKoR,SAAL,CAAgB/R,UAAhB;AAEA;;AAED40C,iBAAiB,CAAC1kF,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA9B;AACA0kF,iBAAiB,CAAC1kF,SAAlB,CAA4BoC,WAA5B,GAA0CsiF,iBAA1C;AAEAA,iBAAiB,CAAC1kF,SAAlB,CAA4B2rF,mBAA5B,GAAkD,IAAlD;;AAEAjH,iBAAiB,CAAC1kF,SAAlB,CAA4BswB,IAA5B,GAAmC,UAAWpR,MAAX,EAAoB;AAEtDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAK0jE,YAAL,GAAoB1jE,MAAM,CAAC0jE,YAA3B;AAEA,OAAK99B,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AAEA,OAAKx4C,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK02C,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKS,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,OAAKe,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AAEA,SAAO,IAAP;AAEA,CAtBD;AAwBA;;;;;;;;;;;;;;;;;;;;;;;;AAuBA,SAASkgC,oBAAT,CAA+B70C,UAA/B,EAA4C;AAE3CyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,sBAAZ;AAEA,OAAKu/D,iBAAL,GAAyB,IAAInpC,OAAJ,EAAzB;AACA,OAAKopC,YAAL,GAAoB,CAApB;AACA,OAAKC,WAAL,GAAmB,IAAnB;AAEA,OAAKhmB,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AAEA,OAAKx4C,GAAL,GAAW,IAAX;AAEA,OAAK02C,QAAL,GAAgB,IAAhB;AAEA,OAAKS,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKhT,GAAL,GAAW,KAAX;AAEA,OAAKoR,SAAL,CAAgB/R,UAAhB;AAEA;;AAED60C,oBAAoB,CAAC3kF,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAAjC;AACA2kF,oBAAoB,CAAC3kF,SAArB,CAA+BoC,WAA/B,GAA6CuiF,oBAA7C;AAEAA,oBAAoB,CAAC3kF,SAArB,CAA+B4rF,sBAA/B,GAAwD,IAAxD;;AAEAjH,oBAAoB,CAAC3kF,SAArB,CAA+BswB,IAA/B,GAAsC,UAAWpR,MAAX,EAAoB;AAEzDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAK0rD,iBAAL,CAAuBt6C,IAAvB,CAA6BpR,MAAM,CAAC0rD,iBAApC;AACA,OAAKC,YAAL,GAAoB3rD,MAAM,CAAC2rD,YAA3B;AACA,OAAKC,WAAL,GAAmB5rD,MAAM,CAAC4rD,WAA1B;AAEA,OAAKhmB,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AAEA,OAAKx4C,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK02C,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKS,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,SAAO,IAAP;AAEA,CArBD;;AAuBA,IAAIooC,QAAQ,GAAG,ggCAAf;AAEA,IAAIC,QAAQ,GAAG,0DAAf;AAEA;;;;;AAKA,SAASC,cAAT,CAAyBC,SAAzB,EAAoCC,QAApC,EAA8Cna,cAA9C,EAA+D;AAE9D,MAAIoa,QAAQ,GAAG,IAAIhxB,OAAJ,EAAf;;AAEA,QAAMixB,cAAc,GAAG,IAAIt8D,OAAJ,EAAvB;AAAA,QACCu8D,aAAa,GAAG,IAAIv8D,OAAJ,EADjB;AAAA,QAGCw8D,SAAS,GAAG,IAAI1xD,OAAJ,EAHb;AAAA,QAKC2xD,eAAe,GAAG,EALnB;AAAA,QAMCC,kBAAkB,GAAG,EANtB;AAAA,QAQCC,cAAc,GAAG,EARlB;;AAUA,QAAMxrC,UAAU,GAAG;AAAE,OAAGrgC,QAAL;AAAe,OAAGD,SAAlB;AAA6B,OAAGE;AAAhC,GAAnB;AAEA,QAAM6rE,sBAAsB,GAAG,IAAI71B,cAAJ,CAAoB;AAElDC,IAAAA,OAAO,EAAE;AACR61B,MAAAA,WAAW,EAAE,MAAM,GADX;AAERC,MAAAA,gBAAgB,EAAE,MAAM;AAFhB,KAFyC;AAOlDp2B,IAAAA,QAAQ,EAAE;AACTq2B,MAAAA,WAAW,EAAE;AAAEtoF,QAAAA,KAAK,EAAE;AAAT,OADJ;AAETuoF,MAAAA,UAAU,EAAE;AAAEvoF,QAAAA,KAAK,EAAE,IAAIurB,OAAJ;AAAT,OAFH;AAGToU,MAAAA,MAAM,EAAE;AAAE3/B,QAAAA,KAAK,EAAE;AAAT;AAHC,KAPwC;AAalDwyD,IAAAA,YAAY,EAAEg1B,QAboC;AAelD/0B,IAAAA,cAAc,EAAE80B;AAfkC,GAApB,CAA/B;AAmBA,QAAMiB,uBAAuB,GAAGL,sBAAsB,CAACp8D,KAAvB,EAAhC;AACAy8D,EAAAA,uBAAuB,CAACj2B,OAAxB,CAAgCk2B,cAAhC,GAAiD,CAAjD;AAEA,QAAMC,aAAa,GAAG,IAAI5iC,cAAJ,EAAtB;AACA4iC,EAAAA,aAAa,CAACrhF,YAAd,CACC,UADD,EAEC,IAAI25C,eAAJ,CACC,IAAIoC,YAAJ,CAAkB,CAAE,CAAE,CAAJ,EAAO,CAAE,CAAT,EAAY,GAAZ,EAAiB,CAAjB,EAAoB,CAAE,CAAtB,EAAyB,GAAzB,EAA8B,CAAE,CAAhC,EAAmC,CAAnC,EAAsC,GAAtC,CAAlB,CADD,EAEC,CAFD,CAFD;AAQA,QAAMulC,cAAc,GAAG,IAAI/9B,IAAJ,CAAU89B,aAAV,EAAyBP,sBAAzB,CAAvB;AAEA,QAAMprF,KAAK,GAAG,IAAd;AAEA,OAAKszD,OAAL,GAAe,KAAf;AAEA,OAAKhkB,UAAL,GAAkB,IAAlB;AACA,OAAKsa,WAAL,GAAmB,KAAnB;AAEA,OAAK5/C,IAAL,GAAYkV,YAAZ;;AAEA,OAAK+5C,MAAL,GAAc,UAAWtD,MAAX,EAAmBgD,KAAnB,EAA0Bt3B,MAA1B,EAAmC;AAEhD,QAAKrhC,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAC/B,QAAKtzD,KAAK,CAACsvC,UAAN,KAAqB,KAArB,IAA8BtvC,KAAK,CAAC4pD,WAAN,KAAsB,KAAzD,EAAiE;AAEjE,QAAK+L,MAAM,CAACn3D,MAAP,KAAkB,CAAvB,EAA2B;;AAE3B,UAAMs6D,mBAAmB,GAAG6xB,SAAS,CAAC5xB,eAAV,EAA5B;;AACA,UAAM8yB,cAAc,GAAGlB,SAAS,CAACmB,iBAAV,EAAvB;;AACA,UAAMC,iBAAiB,GAAGpB,SAAS,CAACqB,oBAAV,EAA1B;;AAEA,UAAMC,MAAM,GAAGtB,SAAS,CAAC7gB,KAAzB,CAXgD,CAahD;;AACAmiB,IAAAA,MAAM,CAACC,WAAP,CAAoBxsE,UAApB;;AACAusE,IAAAA,MAAM,CAAC1sB,OAAP,CAAejiE,KAAf,CAAqBstE,QAArB,CAA+B,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC;;AACAqhB,IAAAA,MAAM,CAAC1sB,OAAP,CAAe5L,KAAf,CAAqBw4B,OAArB,CAA8B,IAA9B;;AACAF,IAAAA,MAAM,CAACG,cAAP,CAAuB,KAAvB,EAjBgD,CAmBhD;;;AAEA,SAAM,IAAIvsF,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGqkB,MAAM,CAACn3D,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,YAAMsnF,KAAK,GAAGxxB,MAAM,CAAE91D,CAAF,CAApB;AACA,YAAM6pE,MAAM,GAAGyd,KAAK,CAACzd,MAArB;AAEA,UAAKA,MAAM,CAACp6B,UAAP,KAAsB,KAAtB,IAA+Bo6B,MAAM,CAAC9f,WAAP,KAAuB,KAA3D,EAAmE;;AAEnE,UAAK8f,MAAM,KAAK9oE,SAAhB,EAA4B;AAE3B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,uBAAd,EAAuC44D,KAAvC,EAA8C,gBAA9C;AACA;AAEA;;AAED2D,MAAAA,cAAc,CAAC77D,IAAf,CAAqBy6C,MAAM,CAAC2f,OAA5B;;AAEA,YAAMgD,kBAAkB,GAAG3iB,MAAM,CAAC4iB,eAAP,EAA3B;;AAEAxB,MAAAA,cAAc,CAACt7D,QAAf,CAAyB68D,kBAAzB;;AAEAtB,MAAAA,aAAa,CAAC97D,IAAd,CAAoBy6C,MAAM,CAAC2f,OAA3B;;AAEA,UAAKyB,cAAc,CAAC5jF,CAAf,GAAmBupE,cAAnB,IAAqCqa,cAAc,CAAC1jF,CAAf,GAAmBqpE,cAA7D,EAA8E;AAE7E,YAAKqa,cAAc,CAAC5jF,CAAf,GAAmBupE,cAAxB,EAAyC;AAExCsa,UAAAA,aAAa,CAAC7jF,CAAd,GAAkBrJ,IAAI,CAACwE,KAAL,CAAYouE,cAAc,GAAG4b,kBAAkB,CAACnlF,CAAhD,CAAlB;AACA4jF,UAAAA,cAAc,CAAC5jF,CAAf,GAAmB6jF,aAAa,CAAC7jF,CAAd,GAAkBmlF,kBAAkB,CAACnlF,CAAxD;AACAwiE,UAAAA,MAAM,CAAC2f,OAAP,CAAeniF,CAAf,GAAmB6jF,aAAa,CAAC7jF,CAAjC;AAEA;;AAED,YAAK4jF,cAAc,CAAC1jF,CAAf,GAAmBqpE,cAAxB,EAAyC;AAExCsa,UAAAA,aAAa,CAAC3jF,CAAd,GAAkBvJ,IAAI,CAACwE,KAAL,CAAYouE,cAAc,GAAG4b,kBAAkB,CAACjlF,CAAhD,CAAlB;AACA0jF,UAAAA,cAAc,CAAC1jF,CAAf,GAAmB2jF,aAAa,CAAC3jF,CAAd,GAAkBilF,kBAAkB,CAACjlF,CAAxD;AACAsiE,UAAAA,MAAM,CAAC2f,OAAP,CAAejiF,CAAf,GAAmB2jF,aAAa,CAAC3jF,CAAjC;AAEA;AAED;;AAED,UAAKsiE,MAAM,CAAC3+D,GAAP,KAAe,IAAf,IAAuB,CAAE2+D,MAAM,CAAC6iB,kBAAhC,IAAsD,KAAKviF,IAAL,KAAcoV,YAAzE,EAAwF;AAEvF,cAAMzY,IAAI,GAAG;AAAE6wB,UAAAA,SAAS,EAAExU,YAAb;AAA2BuU,UAAAA,SAAS,EAAEvU,YAAtC;AAAoDyU,UAAAA,MAAM,EAAEtT;AAA5D,SAAb;AAEAulD,QAAAA,MAAM,CAAC3+D,GAAP,GAAa,IAAImwB,iBAAJ,CAAuB4vD,cAAc,CAAC5jF,CAAtC,EAAyC4jF,cAAc,CAAC1jF,CAAxD,EAA2DT,IAA3D,CAAb;AACA+iE,QAAAA,MAAM,CAAC3+D,GAAP,CAAWuwB,OAAX,CAAmBnmB,IAAnB,GAA0BgyE,KAAK,CAAChyE,IAAN,GAAa,YAAvC;AAEAu0D,QAAAA,MAAM,CAAC8iB,OAAP,GAAiB,IAAItxD,iBAAJ,CAAuB4vD,cAAc,CAAC5jF,CAAtC,EAAyC4jF,cAAc,CAAC1jF,CAAxD,EAA2DT,IAA3D,CAAjB;AAEA+iE,QAAAA,MAAM,CAACroC,MAAP,CAAc01B,sBAAd;AAEA;;AAED,UAAK2S,MAAM,CAAC3+D,GAAP,KAAe,IAApB,EAA2B;AAE1B,cAAMpE,IAAI,GAAG;AAAE6wB,UAAAA,SAAS,EAAE7U,aAAb;AAA4B4U,UAAAA,SAAS,EAAE5U,aAAvC;AAAsD8U,UAAAA,MAAM,EAAEtT;AAA9D,SAAb;AAEAulD,QAAAA,MAAM,CAAC3+D,GAAP,GAAa,IAAImwB,iBAAJ,CAAuB4vD,cAAc,CAAC5jF,CAAtC,EAAyC4jF,cAAc,CAAC1jF,CAAxD,EAA2DT,IAA3D,CAAb;AACA+iE,QAAAA,MAAM,CAAC3+D,GAAP,CAAWuwB,OAAX,CAAmBnmB,IAAnB,GAA0BgyE,KAAK,CAAChyE,IAAN,GAAa,YAAvC;AAEAu0D,QAAAA,MAAM,CAACroC,MAAP,CAAc01B,sBAAd;AAEA;;AAED4zB,MAAAA,SAAS,CAAC3xB,eAAV,CAA2B0Q,MAAM,CAAC3+D,GAAlC;;AACA4/E,MAAAA,SAAS,CAACzxB,KAAV;;AAEA,YAAMuzB,aAAa,GAAG/iB,MAAM,CAACgjB,gBAAP,EAAtB;;AAEA,WAAM,IAAIC,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAGF,aAAvB,EAAsCE,EAAE,EAAxC,EAA8C;AAE7C,cAAMtxD,QAAQ,GAAGquC,MAAM,CAACkjB,WAAP,CAAoBD,EAApB,CAAjB;;AAEA3B,QAAAA,SAAS,CAAC38D,GAAV,CACC08D,aAAa,CAAC7jF,CAAd,GAAkBm0B,QAAQ,CAACn0B,CAD5B,EAEC6jF,aAAa,CAAC3jF,CAAd,GAAkBi0B,QAAQ,CAACj0B,CAF5B,EAGC2jF,aAAa,CAAC7jF,CAAd,GAAkBm0B,QAAQ,CAAC9B,CAH5B,EAICwxD,aAAa,CAAC3jF,CAAd,GAAkBi0B,QAAQ,CAAC1e,CAJ5B;;AAOAsvE,QAAAA,MAAM,CAAC5wD,QAAP,CAAiB2vD,SAAjB;;AAEAthB,QAAAA,MAAM,CAACmjB,cAAP,CAAuB1F,KAAvB,EAA8BwF,EAA9B;AAEA9B,QAAAA,QAAQ,GAAGnhB,MAAM,CAACojB,UAAP,EAAX;AAEAC,QAAAA,YAAY,CAAEp0B,KAAF,EAASt3B,MAAT,EAAiBqoC,MAAM,CAACroC,MAAxB,EAAgC8lD,KAAhC,EAAuC,KAAKn9E,IAA5C,CAAZ;AAEA,OA1FkD,CA4FnD;;;AAEA,UAAK,CAAE0/D,MAAM,CAAC6iB,kBAAT,IAA+B,KAAKviF,IAAL,KAAcoV,YAAlD,EAAiE;AAEhE4tE,QAAAA,OAAO,CAAEtjB,MAAF,EAAUroC,MAAV,CAAP;AAEA;;AAEDqoC,MAAAA,MAAM,CAAC9f,WAAP,GAAqB,KAArB;AAEA;;AAED5pD,IAAAA,KAAK,CAAC4pD,WAAN,GAAoB,KAApB;;AAEA+gC,IAAAA,SAAS,CAAC3xB,eAAV,CAA2BF,mBAA3B,EAAgD+yB,cAAhD,EAAgEE,iBAAhE;AAEA,GAjID;;AAmIA,WAASiB,OAAT,CAAkBtjB,MAAlB,EAA0BroC,MAA1B,EAAmC;AAElC,UAAMmN,QAAQ,GAAGo8C,QAAQ,CAAC5sD,MAAT,CAAiB4tD,cAAjB,CAAjB,CAFkC,CAIlC;;;AAEAR,IAAAA,sBAAsB,CAACl2B,QAAvB,CAAgCq2B,WAAhC,CAA4CtoF,KAA5C,GAAoDymE,MAAM,CAAC3+D,GAAP,CAAWuwB,OAA/D;AACA8vD,IAAAA,sBAAsB,CAACl2B,QAAvB,CAAgCs2B,UAAhC,CAA2CvoF,KAA3C,GAAmDymE,MAAM,CAAC2f,OAA1D;AACA+B,IAAAA,sBAAsB,CAACl2B,QAAvB,CAAgCtyB,MAAhC,CAAuC3/B,KAAvC,GAA+CymE,MAAM,CAAC9mC,MAAtD;;AACA+nD,IAAAA,SAAS,CAAC3xB,eAAV,CAA2B0Q,MAAM,CAAC8iB,OAAlC;;AACA7B,IAAAA,SAAS,CAACzxB,KAAV;;AACAyxB,IAAAA,SAAS,CAACsC,kBAAV,CAA8B5rD,MAA9B,EAAsC,IAAtC,EAA4CmN,QAA5C,EAAsD48C,sBAAtD,EAA8EQ,cAA9E,EAA8F,IAA9F,EAXkC,CAalC;;;AAEAH,IAAAA,uBAAuB,CAACv2B,QAAxB,CAAiCq2B,WAAjC,CAA6CtoF,KAA7C,GAAqDymE,MAAM,CAAC8iB,OAAP,CAAelxD,OAApE;AACAmwD,IAAAA,uBAAuB,CAACv2B,QAAxB,CAAiCs2B,UAAjC,CAA4CvoF,KAA5C,GAAoDymE,MAAM,CAAC2f,OAA3D;AACAoC,IAAAA,uBAAuB,CAACv2B,QAAxB,CAAiCtyB,MAAjC,CAAwC3/B,KAAxC,GAAgDymE,MAAM,CAAC9mC,MAAvD;;AACA+nD,IAAAA,SAAS,CAAC3xB,eAAV,CAA2B0Q,MAAM,CAAC3+D,GAAlC;;AACA4/E,IAAAA,SAAS,CAACzxB,KAAV;;AACAyxB,IAAAA,SAAS,CAACsC,kBAAV,CAA8B5rD,MAA9B,EAAsC,IAAtC,EAA4CmN,QAA5C,EAAsDi9C,uBAAtD,EAA+EG,cAA/E,EAA+F,IAA/F;AAEA;;AAED,WAASsB,uBAAT,CAAkCC,WAAlC,EAA+CC,WAA/C,EAA4DC,aAA5D,EAA4E;AAE3E,UAAMjkF,KAAK,GAAG+jF,WAAW,IAAI,CAAf,GAAmBC,WAAW,IAAI,CAAlC,GAAsCC,aAAa,IAAI,CAArE;AAEA,QAAI1+C,QAAQ,GAAGs8C,eAAe,CAAE7hF,KAAF,CAA9B;;AAEA,QAAKulC,QAAQ,KAAK/tC,SAAlB,EAA8B;AAE7B+tC,MAAAA,QAAQ,GAAG,IAAI00C,iBAAJ,CAAuB;AAEjC9B,QAAAA,YAAY,EAAEz4D,gBAFmB;AAIjCy6B,QAAAA,YAAY,EAAE4pC,WAJmB;AAKjC1pC,QAAAA,QAAQ,EAAE2pC;AALuB,OAAvB,CAAX;AASAnC,MAAAA,eAAe,CAAE7hF,KAAF,CAAf,GAA2BulC,QAA3B;AAEA;;AAED,WAAOA,QAAP;AAEA;;AAED,WAAS2+C,0BAAT,CAAqCH,WAArC,EAAkDC,WAAlD,EAA+DC,aAA/D,EAA+E;AAE9E,UAAMjkF,KAAK,GAAG+jF,WAAW,IAAI,CAAf,GAAmBC,WAAW,IAAI,CAAlC,GAAsCC,aAAa,IAAI,CAArE;AAEA,QAAI1+C,QAAQ,GAAGu8C,kBAAkB,CAAE9hF,KAAF,CAAjC;;AAEA,QAAKulC,QAAQ,KAAK/tC,SAAlB,EAA8B;AAE7B+tC,MAAAA,QAAQ,GAAG,IAAI20C,oBAAJ,CAA0B;AAEpC//B,QAAAA,YAAY,EAAE4pC,WAFsB;AAGpC1pC,QAAAA,QAAQ,EAAE2pC;AAH0B,OAA1B,CAAX;AAOAlC,MAAAA,kBAAkB,CAAE9hF,KAAF,CAAlB,GAA8BulC,QAA9B;AAEA;;AAED,WAAOA,QAAP;AAEA;;AAED,WAAS4+C,gBAAT,CAA2BjpF,MAA3B,EAAmCkqC,QAAnC,EAA6CG,QAA7C,EAAuDw4C,KAAvD,EAA8DnpB,gBAA9D,EAAgFC,eAAhF,EAAiGj0D,IAAjG,EAAwG;AAEvG,QAAItI,MAAM,GAAG,IAAb;AAEA,QAAI8rF,kBAAkB,GAAGN,uBAAzB;AACA,QAAIO,cAAc,GAAGnpF,MAAM,CAACopF,mBAA5B;;AAEA,QAAKvG,KAAK,CAACsC,YAAN,KAAuB,IAA5B,EAAmC;AAElC+D,MAAAA,kBAAkB,GAAGF,0BAArB;AACAG,MAAAA,cAAc,GAAGnpF,MAAM,CAACqpF,sBAAxB;AAEA;;AAED,QAAKF,cAAc,KAAK7sF,SAAxB,EAAoC;AAEnC,UAAIusF,WAAW,GAAG,KAAlB;;AAEA,UAAKx+C,QAAQ,CAAC4U,YAAT,KAA0B,IAA/B,EAAsC;AAErC4pC,QAAAA,WAAW,GAAG3+C,QAAQ,CAACya,eAAT,IAA4Bza,QAAQ,CAACya,eAAT,CAAyB5iD,QAArD,IAAiEmoC,QAAQ,CAACya,eAAT,CAAyB5iD,QAAzB,CAAkC7H,MAAlC,GAA2C,CAA1H;AAEA;;AAED,UAAI4uF,WAAW,GAAG,KAAlB;;AAEA,UAAK9oF,MAAM,CAAC8qD,aAAP,KAAyB,IAA9B,EAAqC;AAEpC,YAAKzgB,QAAQ,CAAC8U,QAAT,KAAsB,IAA3B,EAAkC;AAEjC2pC,UAAAA,WAAW,GAAG,IAAd;AAEA,SAJD,MAIO;AAEN9+D,UAAAA,OAAO,CAACC,IAAR,CAAc,8EAAd,EAA8FjqB,MAA9F;AAEA;AAED;;AAED,YAAM+oF,aAAa,GAAG/oF,MAAM,CAAC0pC,eAAP,KAA2B,IAAjD;AAEAtsC,MAAAA,MAAM,GAAG8rF,kBAAkB,CAAEL,WAAF,EAAeC,WAAf,EAA4BC,aAA5B,CAA3B;AAEA,KA9BD,MA8BO;AAEN3rF,MAAAA,MAAM,GAAG+rF,cAAT;AAEA;;AAED,QAAK9C,SAAS,CAACrZ,oBAAV,IACH3iC,QAAQ,CAAC+Q,WAAT,KAAyB,IADtB,IAEH/Q,QAAQ,CAAC6Q,cAAT,CAAwBhhD,MAAxB,KAAmC,CAFrC,EAEyC;AAExC;AACA;AAEA,YAAMovF,IAAI,GAAGlsF,MAAM,CAACkqB,IAApB;AAAA,YAA0BiiE,IAAI,GAAGl/C,QAAQ,CAAC/iB,IAA1C;AAEA,UAAIkiE,mBAAmB,GAAG3C,cAAc,CAAEyC,IAAF,CAAxC;;AAEA,UAAKE,mBAAmB,KAAKltF,SAA7B,EAAyC;AAExCktF,QAAAA,mBAAmB,GAAG,EAAtB;AACA3C,QAAAA,cAAc,CAAEyC,IAAF,CAAd,GAAyBE,mBAAzB;AAEA;;AAED,UAAIC,cAAc,GAAGD,mBAAmB,CAAED,IAAF,CAAxC;;AAEA,UAAKE,cAAc,KAAKntF,SAAxB,EAAoC;AAEnCmtF,QAAAA,cAAc,GAAGrsF,MAAM,CAACstB,KAAP,EAAjB;AACA8+D,QAAAA,mBAAmB,CAAED,IAAF,CAAnB,GAA8BE,cAA9B;AAEA;;AAEDrsF,MAAAA,MAAM,GAAGqsF,cAAT;AAEA;;AAEDrsF,IAAAA,MAAM,CAACopC,OAAP,GAAiB6D,QAAQ,CAAC7D,OAA1B;AACAppC,IAAAA,MAAM,CAACyhD,SAAP,GAAmBxU,QAAQ,CAACwU,SAA5B;;AAEA,QAAKn5C,IAAI,KAAKoV,YAAd,EAA6B;AAE5B1d,MAAAA,MAAM,CAAC08C,IAAP,GAAgBzP,QAAQ,CAACgR,UAAT,KAAwB,IAA1B,GAAmChR,QAAQ,CAACgR,UAA5C,GAAyDhR,QAAQ,CAACyP,IAAhF;AAEA,KAJD,MAIO;AAEN18C,MAAAA,MAAM,CAAC08C,IAAP,GAAgBzP,QAAQ,CAACgR,UAAT,KAAwB,IAA1B,GAAmChR,QAAQ,CAACgR,UAA5C,GAAyDA,UAAU,CAAEhR,QAAQ,CAACyP,IAAX,CAAjF;AAEA;;AAED18C,IAAAA,MAAM,CAACg+C,WAAP,GAAqB/Q,QAAQ,CAAC+Q,WAA9B;AACAh+C,IAAAA,MAAM,CAAC89C,cAAP,GAAwB7Q,QAAQ,CAAC6Q,cAAjC;AACA99C,IAAAA,MAAM,CAAC+9C,gBAAP,GAA0B9Q,QAAQ,CAAC8Q,gBAAnC;AAEA/9C,IAAAA,MAAM,CAAC0hD,kBAAP,GAA4BzU,QAAQ,CAACyU,kBAArC;AACA1hD,IAAAA,MAAM,CAACshD,SAAP,GAAmBrU,QAAQ,CAACqU,SAA5B;;AAEA,QAAKmkC,KAAK,CAACsC,YAAN,KAAuB,IAAvB,IAA+B/nF,MAAM,CAAC6oF,sBAAP,KAAkC,IAAtE,EAA6E;AAE5E7oF,MAAAA,MAAM,CAAC6nE,iBAAP,CAAyBtmC,qBAAzB,CAAgDkkD,KAAK,CAACzlD,WAAtD;AACAhgC,MAAAA,MAAM,CAAC8nE,YAAP,GAAsBxL,gBAAtB;AACAt8D,MAAAA,MAAM,CAAC+nE,WAAP,GAAqBxL,eAArB;AAEA;;AAED,WAAOv8D,MAAP;AAEA;;AAED,WAASqrF,YAAT,CAAuBzoF,MAAvB,EAA+B+8B,MAA/B,EAAuC2sD,YAAvC,EAAqD7G,KAArD,EAA4Dn9E,IAA5D,EAAmE;AAElE,QAAK1F,MAAM,CAACwmC,OAAP,KAAmB,KAAxB,EAAgC;AAEhC,UAAMA,OAAO,GAAGxmC,MAAM,CAAC+kC,MAAP,CAAchoC,IAAd,CAAoBggC,MAAM,CAACgI,MAA3B,CAAhB;;AAEA,QAAKyB,OAAO,KAAMxmC,MAAM,CAAC+pC,MAAP,IAAiB/pC,MAAM,CAACgqC,MAAxB,IAAkChqC,MAAM,CAACiqC,QAA/C,CAAZ,EAAwE;AAEvE,UAAK,CAAEjqC,MAAM,CAACymC,UAAP,IAAuBzmC,MAAM,CAAC0mC,aAAP,IAAwBhhC,IAAI,KAAKoV,YAA1D,MAAgF,CAAE9a,MAAM,CAAC2mC,aAAT,IAA0B4/C,QAAQ,CAAC1vB,gBAAT,CAA2B72D,MAA3B,CAA1G,CAAL,EAAuJ;AAEtJA,QAAAA,MAAM,CAAComC,eAAP,CAAuBvX,gBAAvB,CAAyC66D,YAAY,CAAC1sD,kBAAtD,EAA0Eh9B,MAAM,CAACo9B,WAAjF;;AAEA,cAAM8M,QAAQ,GAAGo8C,QAAQ,CAAC5sD,MAAT,CAAiB15B,MAAjB,CAAjB;;AACA,cAAMqqC,QAAQ,GAAGrqC,MAAM,CAACqqC,QAAxB;;AAEA,YAAKjwC,KAAK,CAACoC,OAAN,CAAe6tC,QAAf,CAAL,EAAiC;AAEhC,gBAAMkY,MAAM,GAAGrY,QAAQ,CAACqY,MAAxB;;AAEA,eAAM,IAAI1hD,CAAC,GAAG,CAAR,EAAWosD,EAAE,GAAG1K,MAAM,CAACroD,MAA7B,EAAqC2G,CAAC,GAAGosD,EAAzC,EAA6CpsD,CAAC,EAA9C,EAAoD;AAEnD,kBAAMoiD,KAAK,GAAGV,MAAM,CAAE1hD,CAAF,CAApB;AACA,kBAAMopD,aAAa,GAAG5f,QAAQ,CAAE4Y,KAAK,CAACzJ,aAAR,CAA9B;;AAEA,gBAAKyQ,aAAa,IAAIA,aAAa,CAACzjB,OAApC,EAA8C;AAE7C,oBAAMmjD,aAAa,GAAGV,gBAAgB,CAAEjpF,MAAF,EAAUkqC,QAAV,EAAoB+f,aAApB,EAAmC44B,KAAnC,EAA0C6G,YAAY,CAACnmD,IAAvD,EAA6DmmD,YAAY,CAAClmD,GAA1E,EAA+E99B,IAA/E,CAAtC;;AAEA2gF,cAAAA,SAAS,CAACsC,kBAAV,CAA8Be,YAA9B,EAA4C,IAA5C,EAAkDx/C,QAAlD,EAA4Dy/C,aAA5D,EAA2E3pF,MAA3E,EAAmFijD,KAAnF;AAEA;AAED;AAED,SAnBD,MAmBO,IAAK5Y,QAAQ,CAAC7D,OAAd,EAAwB;AAE9B,gBAAMmjD,aAAa,GAAGV,gBAAgB,CAAEjpF,MAAF,EAAUkqC,QAAV,EAAoBG,QAApB,EAA8Bw4C,KAA9B,EAAqC6G,YAAY,CAACnmD,IAAlD,EAAwDmmD,YAAY,CAAClmD,GAArE,EAA0E99B,IAA1E,CAAtC;;AAEA2gF,UAAAA,SAAS,CAACsC,kBAAV,CAA8Be,YAA9B,EAA4C,IAA5C,EAAkDx/C,QAAlD,EAA4Dy/C,aAA5D,EAA2E3pF,MAA3E,EAAmF,IAAnF;AAEA;AAED;AAED;;AAED,UAAM8lC,QAAQ,GAAG9lC,MAAM,CAAC8lC,QAAxB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDktF,MAAAA,YAAY,CAAE3iD,QAAQ,CAAEvqC,CAAF,CAAV,EAAiBwhC,MAAjB,EAAyB2sD,YAAzB,EAAuC7G,KAAvC,EAA8Cn9E,IAA9C,CAAZ;AAEA;AAED;AAED;AAED;;;;;AAIA,SAASkkF,UAAT,CAAqB9uB,EAArB,EAAyBvJ,UAAzB,EAAqCwJ,YAArC,EAAoD;AAEnD,QAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;;AAEA,WAAS6uB,WAAT,GAAuB;AAEtB,QAAIC,MAAM,GAAG,KAAb;AAEA,UAAM9wF,KAAK,GAAG,IAAIg8B,OAAJ,EAAd;AACA,QAAI+0D,gBAAgB,GAAG,IAAvB;AACA,UAAMC,iBAAiB,GAAG,IAAIh1D,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAA1B;AAEA,WAAO;AAENi1D,MAAAA,OAAO,EAAE,UAAWC,SAAX,EAAuB;AAE/B,YAAKH,gBAAgB,KAAKG,SAArB,IAAkC,CAAEJ,MAAzC,EAAkD;AAEjDhvB,UAAAA,EAAE,CAACovB,SAAH,CAAcA,SAAd,EAAyBA,SAAzB,EAAoCA,SAApC,EAA+CA,SAA/C;AACAH,UAAAA,gBAAgB,GAAGG,SAAnB;AAEA;AAED,OAXK;AAaNC,MAAAA,SAAS,EAAE,UAAWC,IAAX,EAAkB;AAE5BN,QAAAA,MAAM,GAAGM,IAAT;AAEA,OAjBK;AAmBN9jB,MAAAA,QAAQ,EAAE,UAAWhtE,CAAX,EAAcG,CAAd,EAAiBC,CAAjB,EAAoBC,CAApB,EAAuBkiD,kBAAvB,EAA4C;AAErD,YAAKA,kBAAkB,KAAK,IAA5B,EAAmC;AAElCviD,UAAAA,CAAC,IAAIK,CAAL;AAAQF,UAAAA,CAAC,IAAIE,CAAL;AAAQD,UAAAA,CAAC,IAAIC,CAAL;AAEhB;;AAEDX,QAAAA,KAAK,CAAC+wB,GAAN,CAAWzwB,CAAX,EAAcG,CAAd,EAAiBC,CAAjB,EAAoBC,CAApB;;AAEA,YAAKqwF,iBAAiB,CAACh9D,MAAlB,CAA0Bh0B,KAA1B,MAAsC,KAA3C,EAAmD;AAElD8hE,UAAAA,EAAE,CAAC4K,UAAH,CAAepsE,CAAf,EAAkBG,CAAlB,EAAqBC,CAArB,EAAwBC,CAAxB;AACAqwF,UAAAA,iBAAiB,CAACr/D,IAAlB,CAAwB3xB,KAAxB;AAEA;AAED,OApCK;AAsCNyxE,MAAAA,KAAK,EAAE,YAAY;AAElBqf,QAAAA,MAAM,GAAG,KAAT;AAEAC,QAAAA,gBAAgB,GAAG,IAAnB;AACAC,QAAAA,iBAAiB,CAACjgE,GAAlB,CAAuB,CAAE,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC,EALkB,CAKqB;AAEvC;AA7CK,KAAP;AAiDA;;AAED,WAASsgE,WAAT,GAAuB;AAEtB,QAAIP,MAAM,GAAG,KAAb;AAEA,QAAIQ,gBAAgB,GAAG,IAAvB;AACA,QAAIC,gBAAgB,GAAG,IAAvB;AACA,QAAIC,iBAAiB,GAAG,IAAxB;AAEA,WAAO;AAEN3C,MAAAA,OAAO,EAAE,UAAWrtC,SAAX,EAAuB;AAE/B,YAAKA,SAAL,EAAiB;AAEhB9V,UAAAA,MAAM,CAAE,IAAF,CAAN;AAEA,SAJD,MAIO;AAENG,UAAAA,OAAO,CAAE,IAAF,CAAP;AAEA;AAED,OAdK;AAgBNolD,MAAAA,OAAO,EAAE,UAAWQ,SAAX,EAAuB;AAE/B,YAAKH,gBAAgB,KAAKG,SAArB,IAAkC,CAAEX,MAAzC,EAAkD;AAEjDhvB,UAAAA,EAAE,CAAC2vB,SAAH,CAAcA,SAAd;AACAH,UAAAA,gBAAgB,GAAGG,SAAnB;AAEA;AAED,OAzBK;AA2BNC,MAAAA,OAAO,EAAE,UAAWnwC,SAAX,EAAuB;AAE/B,YAAKgwC,gBAAgB,KAAKhwC,SAA1B,EAAsC;AAErC,cAAKA,SAAL,EAAiB;AAEhB,oBAASA,SAAT;AAEC,mBAAK79B,UAAL;AAECo+C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAK59B,WAAL;AAECm+C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAK39B,SAAL;AAECk+C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAK19B,cAAL;AAECi+C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAKz9B,UAAL;AAECg+C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAKx9B,iBAAL;AAEC+9C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAKv9B,YAAL;AAEC89C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED,mBAAKt9B,aAAL;AAEC69C,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AACA;;AAED;AAECugB,gBAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AA5CF;AAgDA,WAlDD,MAkDO;AAENugB,YAAAA,EAAE,CAACvgB,SAAH,CAAc,GAAd;AAEA;;AAEDgwC,UAAAA,gBAAgB,GAAGhwC,SAAnB;AAEA;AAED,OA3FK;AA6FN4vC,MAAAA,SAAS,EAAE,UAAWC,IAAX,EAAkB;AAE5BN,QAAAA,MAAM,GAAGM,IAAT;AAEA,OAjGK;AAmGN9jB,MAAAA,QAAQ,EAAE,UAAWjX,KAAX,EAAmB;AAE5B,YAAKm7B,iBAAiB,KAAKn7B,KAA3B,EAAmC;AAElCyL,UAAAA,EAAE,CAAC6vB,UAAH,CAAet7B,KAAf;AACAm7B,UAAAA,iBAAiB,GAAGn7B,KAApB;AAEA;AAED,OA5GK;AA8GNob,MAAAA,KAAK,EAAE,YAAY;AAElBqf,QAAAA,MAAM,GAAG,KAAT;AAEAQ,QAAAA,gBAAgB,GAAG,IAAnB;AACAC,QAAAA,gBAAgB,GAAG,IAAnB;AACAC,QAAAA,iBAAiB,GAAG,IAApB;AAEA;AAtHK,KAAP;AA0HA;;AAED,WAASI,aAAT,GAAyB;AAExB,QAAId,MAAM,GAAG,KAAb;AAEA,QAAIe,kBAAkB,GAAG,IAAzB;AACA,QAAIC,kBAAkB,GAAG,IAAzB;AACA,QAAIC,iBAAiB,GAAG,IAAxB;AACA,QAAIC,sBAAsB,GAAG,IAA7B;AACA,QAAIC,kBAAkB,GAAG,IAAzB;AACA,QAAIC,mBAAmB,GAAG,IAA1B;AACA,QAAIC,mBAAmB,GAAG,IAA1B;AACA,QAAIC,mBAAmB,GAAG,IAA1B;AAEA,WAAO;AAENvD,MAAAA,OAAO,EAAE,UAAWwD,WAAX,EAAyB;AAEjC,YAAK,CAAEvB,MAAP,EAAgB;AAEf,cAAKuB,WAAL,EAAmB;AAElB3mD,YAAAA,MAAM,CAAE,IAAF,CAAN;AAEA,WAJD,MAIO;AAENG,YAAAA,OAAO,CAAE,IAAF,CAAP;AAEA;AAED;AAED,OAlBK;AAoBNolD,MAAAA,OAAO,EAAE,UAAWqB,WAAX,EAAyB;AAEjC,YAAKT,kBAAkB,KAAKS,WAAvB,IAAsC,CAAExB,MAA7C,EAAsD;AAErDhvB,UAAAA,EAAE,CAACwwB,WAAH,CAAgBA,WAAhB;AACAT,UAAAA,kBAAkB,GAAGS,WAArB;AAEA;AAED,OA7BK;AA+BNZ,MAAAA,OAAO,EAAE,UAAW/vC,WAAX,EAAwBC,UAAxB,EAAoC0wC,WAApC,EAAkD;AAE1D,YAAKR,kBAAkB,KAAKnwC,WAAvB,IACAowC,iBAAiB,KAAMnwC,UADvB,IAEAowC,sBAAsB,KAAKM,WAFhC,EAE8C;AAE7CxwB,UAAAA,EAAE,CAACngB,WAAH,CAAgBA,WAAhB,EAA6BC,UAA7B,EAAyC0wC,WAAzC;AAEAR,UAAAA,kBAAkB,GAAGnwC,WAArB;AACAowC,UAAAA,iBAAiB,GAAGnwC,UAApB;AACAowC,UAAAA,sBAAsB,GAAGM,WAAzB;AAEA;AAED,OA7CK;AA+CNC,MAAAA,KAAK,EAAE,UAAWzwC,WAAX,EAAwBC,YAAxB,EAAsCC,YAAtC,EAAqD;AAE3D,YAAKiwC,kBAAkB,KAAMnwC,WAAxB,IACAowC,mBAAmB,KAAKnwC,YADxB,IAEAowC,mBAAmB,KAAKnwC,YAF7B,EAE4C;AAE3C8f,UAAAA,EAAE,CAAC0wB,SAAH,CAAc1wC,WAAd,EAA2BC,YAA3B,EAAyCC,YAAzC;AAEAiwC,UAAAA,kBAAkB,GAAGnwC,WAArB;AACAowC,UAAAA,mBAAmB,GAAGnwC,YAAtB;AACAowC,UAAAA,mBAAmB,GAAGnwC,YAAtB;AAEA;AAED,OA7DK;AA+DNmvC,MAAAA,SAAS,EAAE,UAAWC,IAAX,EAAkB;AAE5BN,QAAAA,MAAM,GAAGM,IAAT;AAEA,OAnEK;AAqEN9jB,MAAAA,QAAQ,EAAE,UAAWzR,OAAX,EAAqB;AAE9B,YAAKu2B,mBAAmB,KAAKv2B,OAA7B,EAAuC;AAEtCiG,UAAAA,EAAE,CAAC2wB,YAAH,CAAiB52B,OAAjB;AACAu2B,UAAAA,mBAAmB,GAAGv2B,OAAtB;AAEA;AAED,OA9EK;AAgFN4V,MAAAA,KAAK,EAAE,YAAY;AAElBqf,QAAAA,MAAM,GAAG,KAAT;AAEAe,QAAAA,kBAAkB,GAAG,IAArB;AACAC,QAAAA,kBAAkB,GAAG,IAArB;AACAC,QAAAA,iBAAiB,GAAG,IAApB;AACAC,QAAAA,sBAAsB,GAAG,IAAzB;AACAC,QAAAA,kBAAkB,GAAG,IAArB;AACAC,QAAAA,mBAAmB,GAAG,IAAtB;AACAC,QAAAA,mBAAmB,GAAG,IAAtB;AACAC,QAAAA,mBAAmB,GAAG,IAAtB;AAEA;AA7FK,KAAP;AAiGA,GAjTkD,CAmTnD;;;AAEA,QAAMM,WAAW,GAAG,IAAI7B,WAAJ,EAApB;AACA,QAAM5yD,WAAW,GAAG,IAAIozD,WAAJ,EAApB;AACA,QAAMnzD,aAAa,GAAG,IAAI0zD,aAAJ,EAAtB;AAEA,MAAIe,mBAAmB,GAAG,EAA1B;AAEA,MAAIC,cAAc,GAAG,IAArB;AAEA,MAAIC,sBAAsB,GAAG,IAA7B;AACA,MAAIC,eAAe,GAAG,IAAtB;AACA,MAAIC,oBAAoB,GAAG,IAA3B;AACA,MAAIC,eAAe,GAAG,IAAtB;AACA,MAAIC,eAAe,GAAG,IAAtB;AACA,MAAIC,yBAAyB,GAAG,IAAhC;AACA,MAAIC,oBAAoB,GAAG,IAA3B;AACA,MAAIC,oBAAoB,GAAG,IAA3B;AACA,MAAIC,wBAAwB,GAAG,KAA/B;AAEA,MAAIC,gBAAgB,GAAG,IAAvB;AACA,MAAIC,eAAe,GAAG,IAAtB;AAEA,MAAIC,gBAAgB,GAAG,IAAvB;AAEA,MAAIC,0BAA0B,GAAG,IAAjC;AACA,MAAIC,yBAAyB,GAAG,IAAhC;AAEA,QAAMzgB,WAAW,GAAGnR,EAAE,CAAC5sB,YAAH,CAAiB,KAAjB,CAApB;AAEA,MAAIy+C,kBAAkB,GAAG,KAAzB;AACA,MAAI34D,OAAO,GAAG,CAAd;AACA,QAAM44D,SAAS,GAAG9xB,EAAE,CAAC5sB,YAAH,CAAiB,IAAjB,CAAlB;;AAEA,MAAK0+C,SAAS,CAACnoF,OAAV,CAAmB,OAAnB,MAAiC,CAAE,CAAxC,EAA4C;AAE3CuvB,IAAAA,OAAO,GAAG92B,UAAU,CAAE,kBAAkBy6C,IAAlB,CAAwBi1C,SAAxB,EAAqC,CAArC,CAAF,CAApB;AACAD,IAAAA,kBAAkB,GAAK34D,OAAO,IAAI,GAAlC;AAEA,GALD,MAKO,IAAK44D,SAAS,CAACnoF,OAAV,CAAmB,WAAnB,MAAqC,CAAE,CAA5C,EAAgD;AAEtDuvB,IAAAA,OAAO,GAAG92B,UAAU,CAAE,uBAAuBy6C,IAAvB,CAA6Bi1C,SAA7B,EAA0C,CAA1C,CAAF,CAApB;AACAD,IAAAA,kBAAkB,GAAK34D,OAAO,IAAI,GAAlC;AAEA;;AAED,MAAI64D,kBAAkB,GAAG,IAAzB;AACA,MAAIC,oBAAoB,GAAG,EAA3B;AAEA,QAAMC,cAAc,GAAG,IAAI/3D,OAAJ,EAAvB;AACA,QAAMg4D,eAAe,GAAG,IAAIh4D,OAAJ,EAAxB;;AAEA,WAASi4D,aAAT,CAAwBvnF,IAAxB,EAA8BhL,MAA9B,EAAsCivC,KAAtC,EAA8C;AAE7C,UAAMe,IAAI,GAAG,IAAIyW,UAAJ,CAAgB,CAAhB,CAAb,CAF6C,CAEX;;AAClC,UAAMnqB,OAAO,GAAG8jC,EAAE,CAACmyB,aAAH,EAAhB;AAEAnyB,IAAAA,EAAE,CAACoyB,WAAH,CAAgBxnF,IAAhB,EAAsBsxB,OAAtB;AACA8jC,IAAAA,EAAE,CAACqyB,aAAH,CAAkBznF,IAAlB,EAAwB,KAAxB,EAA+B,IAA/B;AACAo1D,IAAAA,EAAE,CAACqyB,aAAH,CAAkBznF,IAAlB,EAAwB,KAAxB,EAA+B,IAA/B;;AAEA,SAAM,IAAInK,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGouC,KAArB,EAA4BpuC,CAAC,EAA7B,EAAmC;AAElCu/D,MAAAA,EAAE,CAACsyB,UAAH,CAAe1yF,MAAM,GAAGa,CAAxB,EAA2B,CAA3B,EAA8B,IAA9B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,EAA6C,IAA7C,EAAmD,IAAnD,EAAyDmvC,IAAzD;AAEA;;AAED,WAAO1T,OAAP;AAEA;;AAED,QAAMq2D,aAAa,GAAG,EAAtB;AACAA,EAAAA,aAAa,CAAE,IAAF,CAAb,GAAwBJ,aAAa,CAAE,IAAF,EAAQ,IAAR,EAAc,CAAd,CAArC;AACAI,EAAAA,aAAa,CAAE,KAAF,CAAb,GAAyBJ,aAAa,CAAE,KAAF,EAAS,KAAT,EAAgB,CAAhB,CAAtC,CA5XmD,CA8XnD;;AAEAvB,EAAAA,WAAW,CAACplB,QAAZ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,EAA+B,CAA/B;AACArvC,EAAAA,WAAW,CAACqvC,QAAZ,CAAsB,CAAtB;AACApvC,EAAAA,aAAa,CAACovC,QAAd,CAAwB,CAAxB;AAEA5hC,EAAAA,MAAM,CAAE,IAAF,CAAN;AACAzN,EAAAA,WAAW,CAACyzD,OAAZ,CAAqB7tE,cAArB;AAEAywE,EAAAA,YAAY,CAAE,KAAF,CAAZ;AACAC,EAAAA,WAAW,CAAEjzE,YAAF,CAAX;AACAoqB,EAAAA,MAAM,CAAE,IAAF,CAAN;AAEAkjD,EAAAA,WAAW,CAAExsE,UAAF,CAAX,CA3YmD,CA6YnD;;AAEA,WAASspB,MAAT,CAAiB6D,EAAjB,EAAsB;AAErB,QAAKojD,mBAAmB,CAAEpjD,EAAF,CAAnB,KAA8B,IAAnC,EAA0C;AAEzCuyB,MAAAA,EAAE,CAACp2B,MAAH,CAAW6D,EAAX;AACAojD,MAAAA,mBAAmB,CAAEpjD,EAAF,CAAnB,GAA4B,IAA5B;AAEA;AAED;;AAED,WAAS1D,OAAT,CAAkB0D,EAAlB,EAAuB;AAEtB,QAAKojD,mBAAmB,CAAEpjD,EAAF,CAAnB,KAA8B,KAAnC,EAA2C;AAE1CuyB,MAAAA,EAAE,CAACj2B,OAAH,CAAY0D,EAAZ;AACAojD,MAAAA,mBAAmB,CAAEpjD,EAAF,CAAnB,GAA4B,KAA5B;AAEA;AAED;;AAED,WAASilD,UAAT,CAAqB7lB,OAArB,EAA+B;AAE9B,QAAKikB,cAAc,KAAKjkB,OAAxB,EAAkC;AAEjC7M,MAAAA,EAAE,CAAC0yB,UAAH,CAAe7lB,OAAf;AAEAikB,MAAAA,cAAc,GAAGjkB,OAAjB;AAEA,aAAO,IAAP;AAEA;;AAED,WAAO,KAAP;AAEA;;AAED,QAAM8lB,YAAY,GAAG;AACpB,KAAE/xE,WAAF,GAAiB,KADG;AAEpB,KAAEC,gBAAF,GAAsB,KAFF;AAGpB,KAAEC,uBAAF,GAA6B;AAHT,GAArB;;AAMA,MAAKo/C,QAAL,EAAgB;AAEfyyB,IAAAA,YAAY,CAAE5xE,WAAF,CAAZ,GAA8B,KAA9B;AACA4xE,IAAAA,YAAY,CAAE3xE,WAAF,CAAZ,GAA8B,KAA9B;AAEA,GALD,MAKO;AAEN,UAAMsrD,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,kBAAhB,CAAlB;;AAEA,QAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzBqmB,MAAAA,YAAY,CAAE5xE,WAAF,CAAZ,GAA8BurD,SAAS,CAACsmB,OAAxC;AACAD,MAAAA,YAAY,CAAE3xE,WAAF,CAAZ,GAA8BsrD,SAAS,CAACumB,OAAxC;AAEA;AAED;;AAED,QAAMC,UAAU,GAAG;AAClB,KAAE7xE,UAAF,GAAgB,CADE;AAElB,KAAEC,SAAF,GAAe,CAFG;AAGlB,KAAEC,cAAF,GAAoB,GAHF;AAIlB,KAAEE,cAAF,GAAoB,GAJF;AAKlB,KAAEM,sBAAF,GAA4B,GALV;AAMlB,KAAEF,cAAF,GAAoB,GANF;AAOlB,KAAEF,cAAF,GAAoB,GAPF;AAQlB,KAAEH,sBAAF,GAA4B,GARV;AASlB,KAAEE,sBAAF,GAA4B,GATV;AAUlB,KAAEI,sBAAF,GAA4B,GAVV;AAWlB,KAAEF,sBAAF,GAA4B;AAXV,GAAnB;;AAcA,WAASsrE,WAAT,CAAsB/tC,QAAtB,EAAgCM,aAAhC,EAA+CF,QAA/C,EAAyDC,QAAzD,EAAmEI,kBAAnE,EAAuFF,aAAvF,EAAsGC,aAAtG,EAAqHwB,kBAArH,EAA0I;AAEzI,QAAKhC,QAAQ,KAAKz+B,UAAlB,EAA+B;AAE9B,UAAKywE,sBAAL,EAA8B;AAE7BhnD,QAAAA,OAAO,CAAE,IAAF,CAAP;AACAgnD,QAAAA,sBAAsB,GAAG,KAAzB;AAEA;;AAED;AAEA;;AAED,QAAK,CAAEA,sBAAP,EAAgC;AAE/BnnD,MAAAA,MAAM,CAAE,IAAF,CAAN;AACAmnD,MAAAA,sBAAsB,GAAG,IAAzB;AAEA;;AAED,QAAKhyC,QAAQ,KAAKp+B,cAAlB,EAAmC;AAElC,UAAKo+B,QAAQ,KAAKiyC,eAAb,IAAgCjwC,kBAAkB,KAAKwwC,wBAA5D,EAAuF;AAEtF,YAAKN,oBAAoB,KAAKrwE,WAAzB,IAAwCwwE,yBAAyB,KAAKxwE,WAA3E,EAAyF;AAExFo/C,UAAAA,EAAE,CAAC3gB,aAAH,CAAkB,KAAlB;AAEA4xC,UAAAA,oBAAoB,GAAGrwE,WAAvB;AACAwwE,UAAAA,yBAAyB,GAAGxwE,WAA5B;AAEA;;AAED,YAAKmgC,kBAAL,EAA0B;AAEzB,kBAAShC,QAAT;AAEC,iBAAKx+B,cAAL;AACCy/C,cAAAA,EAAE,CAAC+yB,iBAAH,CAAsB,CAAtB,EAAyB,GAAzB,EAA8B,CAA9B,EAAiC,GAAjC;AACA;;AAED,iBAAKvyE,gBAAL;AACCw/C,cAAAA,EAAE,CAACgzB,SAAH,CAAc,CAAd,EAAiB,CAAjB;AACA;;AAED,iBAAKvyE,mBAAL;AACCu/C,cAAAA,EAAE,CAAC+yB,iBAAH,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B,GAA5B,EAAiC,GAAjC;AACA;;AAED,iBAAKryE,gBAAL;AACCs/C,cAAAA,EAAE,CAAC+yB,iBAAH,CAAsB,CAAtB,EAAyB,GAAzB,EAA8B,CAA9B,EAAiC,GAAjC;AACA;;AAED;AACC7jE,cAAAA,OAAO,CAACyD,KAAR,CAAe,sCAAf,EAAuDosB,QAAvD;AACA;AApBF;AAwBA,SA1BD,MA0BO;AAEN,kBAASA,QAAT;AAEC,iBAAKx+B,cAAL;AACCy/C,cAAAA,EAAE,CAAC+yB,iBAAH,CAAsB,GAAtB,EAA2B,GAA3B,EAAgC,CAAhC,EAAmC,GAAnC;AACA;;AAED,iBAAKvyE,gBAAL;AACCw/C,cAAAA,EAAE,CAACgzB,SAAH,CAAc,GAAd,EAAmB,CAAnB;AACA;;AAED,iBAAKvyE,mBAAL;AACCu/C,cAAAA,EAAE,CAACgzB,SAAH,CAAc,CAAd,EAAiB,GAAjB;AACA;;AAED,iBAAKtyE,gBAAL;AACCs/C,cAAAA,EAAE,CAACgzB,SAAH,CAAc,CAAd,EAAiB,GAAjB;AACA;;AAED;AACC9jE,cAAAA,OAAO,CAACyD,KAAR,CAAe,sCAAf,EAAuDosB,QAAvD;AACA;AApBF;AAwBA;;AAEDmyC,QAAAA,eAAe,GAAG,IAAlB;AACAC,QAAAA,eAAe,GAAG,IAAlB;AACAE,QAAAA,oBAAoB,GAAG,IAAvB;AACAC,QAAAA,oBAAoB,GAAG,IAAvB;AAEAN,QAAAA,eAAe,GAAGjyC,QAAlB;AACAwyC,QAAAA,wBAAwB,GAAGxwC,kBAA3B;AAEA;;AAED;AAEA,KArGwI,CAuGzI;;;AAEAvB,IAAAA,kBAAkB,GAAGA,kBAAkB,IAAIH,aAA3C;AACAC,IAAAA,aAAa,GAAGA,aAAa,IAAIH,QAAjC;AACAI,IAAAA,aAAa,GAAGA,aAAa,IAAIH,QAAjC;;AAEA,QAAKC,aAAa,KAAK4xC,oBAAlB,IAA0CzxC,kBAAkB,KAAK4xC,yBAAtE,EAAkG;AAEjGpxB,MAAAA,EAAE,CAACizB,qBAAH,CAA0BN,YAAY,CAAEtzC,aAAF,CAAtC,EAAyDszC,YAAY,CAAEnzC,kBAAF,CAArE;AAEAyxC,MAAAA,oBAAoB,GAAG5xC,aAAvB;AACA+xC,MAAAA,yBAAyB,GAAG5xC,kBAA5B;AAEA;;AAED,QAAKL,QAAQ,KAAK+xC,eAAb,IAAgC9xC,QAAQ,KAAK+xC,eAA7C,IAAgE7xC,aAAa,KAAK+xC,oBAAlF,IAA0G9xC,aAAa,KAAK+xC,oBAAjI,EAAwJ;AAEvJtxB,MAAAA,EAAE,CAAC+yB,iBAAH,CAAsBD,UAAU,CAAE3zC,QAAF,CAAhC,EAA8C2zC,UAAU,CAAE1zC,QAAF,CAAxD,EAAsE0zC,UAAU,CAAExzC,aAAF,CAAhF,EAAmGwzC,UAAU,CAAEvzC,aAAF,CAA7G;AAEA2xC,MAAAA,eAAe,GAAG/xC,QAAlB;AACAgyC,MAAAA,eAAe,GAAG/xC,QAAlB;AACAiyC,MAAAA,oBAAoB,GAAG/xC,aAAvB;AACAgyC,MAAAA,oBAAoB,GAAG/xC,aAAvB;AAEA;;AAEDyxC,IAAAA,eAAe,GAAGjyC,QAAlB;AACAwyC,IAAAA,wBAAwB,GAAG,IAA3B;AAEA;;AAED,WAAS2B,WAAT,CAAsB3jD,QAAtB,EAAgC4jD,WAAhC,EAA8C;AAE7C5jD,IAAAA,QAAQ,CAACyP,IAAT,KAAkB7+B,UAAlB,GACG4pB,OAAO,CAAE,IAAF,CADV,GAEGH,MAAM,CAAE,IAAF,CAFT;AAIA,QAAI83C,SAAS,GAAKnyC,QAAQ,CAACyP,IAAT,KAAkB9+B,QAApC;AACA,QAAKizE,WAAL,EAAmBzR,SAAS,GAAG,CAAEA,SAAd;AAEnB8Q,IAAAA,YAAY,CAAE9Q,SAAF,CAAZ;AAEEnyC,IAAAA,QAAQ,CAACwP,QAAT,KAAsBx+B,cAAtB,IAAwCgvB,QAAQ,CAAC2P,WAAT,KAAyB,KAAnE,GACG4tC,WAAW,CAAExsE,UAAF,CADd,GAEGwsE,WAAW,CAAEv9C,QAAQ,CAACwP,QAAX,EAAqBxP,QAAQ,CAAC8P,aAA9B,EAA6C9P,QAAQ,CAAC4P,QAAtD,EAAgE5P,QAAQ,CAAC6P,QAAzE,EAAmF7P,QAAQ,CAACiQ,kBAA5F,EAAgHjQ,QAAQ,CAAC+P,aAAzH,EAAwI/P,QAAQ,CAACgQ,aAAjJ,EAAgKhQ,QAAQ,CAACwR,kBAAzK,CAFd;AAIA5kB,IAAAA,WAAW,CAACyzD,OAAZ,CAAqBrgD,QAAQ,CAACkQ,SAA9B;AACAtjB,IAAAA,WAAW,CAAC4wD,OAAZ,CAAqBx9C,QAAQ,CAACmQ,SAA9B;AACAvjB,IAAAA,WAAW,CAACgzD,OAAZ,CAAqB5/C,QAAQ,CAACoQ,UAA9B;AACAixC,IAAAA,WAAW,CAACzB,OAAZ,CAAqB5/C,QAAQ,CAACiR,UAA9B;AAEA,UAAML,YAAY,GAAG5Q,QAAQ,CAAC4Q,YAA9B;AACA/jB,IAAAA,aAAa,CAAC2wD,OAAd,CAAuB5sC,YAAvB;;AACA,QAAKA,YAAL,EAAoB;AAEnB/jB,MAAAA,aAAa,CAAC+yD,OAAd,CAAuB5/C,QAAQ,CAACqQ,gBAAhC;AACAxjB,MAAAA,aAAa,CAACwzD,OAAd,CAAuBrgD,QAAQ,CAACsQ,WAAhC,EAA6CtQ,QAAQ,CAACuQ,UAAtD,EAAkEvQ,QAAQ,CAACwQ,eAA3E;AACA3jB,MAAAA,aAAa,CAACq0D,KAAd,CAAqBlhD,QAAQ,CAACyQ,WAA9B,EAA2CzQ,QAAQ,CAAC0Q,YAApD,EAAkE1Q,QAAQ,CAAC2Q,YAA3E;AAEA;;AAEDkzC,IAAAA,gBAAgB,CAAE7jD,QAAQ,CAACmR,aAAX,EAA0BnR,QAAQ,CAACoR,mBAAnC,EAAwDpR,QAAQ,CAACqR,kBAAjE,CAAhB;AAEA,GAjoBkD,CAmoBnD;;;AAEA,WAAS4xC,YAAT,CAAuB9Q,SAAvB,EAAmC;AAElC,QAAK8P,gBAAgB,KAAK9P,SAA1B,EAAsC;AAErC,UAAKA,SAAL,EAAiB;AAEhB1hB,QAAAA,EAAE,CAACqzB,SAAH,CAAc,IAAd;AAEA,OAJD,MAIO;AAENrzB,QAAAA,EAAE,CAACqzB,SAAH,CAAc,IAAd;AAEA;;AAED7B,MAAAA,gBAAgB,GAAG9P,SAAnB;AAEA;AAED;;AAED,WAAS+Q,WAAT,CAAsBa,QAAtB,EAAiC;AAEhC,QAAKA,QAAQ,KAAK/zE,YAAlB,EAAiC;AAEhCqqB,MAAAA,MAAM,CAAE,IAAF,CAAN;;AAEA,UAAK0pD,QAAQ,KAAK7B,eAAlB,EAAoC;AAEnC,YAAK6B,QAAQ,KAAK9zE,YAAlB,EAAiC;AAEhCwgD,UAAAA,EAAE,CAACszB,QAAH,CAAa,IAAb;AAEA,SAJD,MAIO,IAAKA,QAAQ,KAAK7zE,aAAlB,EAAkC;AAExCugD,UAAAA,EAAE,CAACszB,QAAH,CAAa,IAAb;AAEA,SAJM,MAIA;AAENtzB,UAAAA,EAAE,CAACszB,QAAH,CAAa,IAAb;AAEA;AAED;AAED,KAtBD,MAsBO;AAENvpD,MAAAA,OAAO,CAAE,IAAF,CAAP;AAEA;;AAED0nD,IAAAA,eAAe,GAAG6B,QAAlB;AAEA;;AAED,WAASC,YAAT,CAAuBnpF,KAAvB,EAA+B;AAE9B,QAAKA,KAAK,KAAKsnF,gBAAf,EAAkC;AAEjC,UAAKG,kBAAL,EAA0B7xB,EAAE,CAACwzB,SAAH,CAAcppF,KAAd;AAE1BsnF,MAAAA,gBAAgB,GAAGtnF,KAAnB;AAEA;AAED;;AAED,WAASgpF,gBAAT,CAA2B1yC,aAA3B,EAA0C+yC,MAA1C,EAAkDpZ,KAAlD,EAA0D;AAEzD,QAAK35B,aAAL,EAAqB;AAEpB9W,MAAAA,MAAM,CAAE,KAAF,CAAN;;AAEA,UAAK+nD,0BAA0B,KAAK8B,MAA/B,IAAyC7B,yBAAyB,KAAKvX,KAA5E,EAAoF;AAEnFra,QAAAA,EAAE,CAACtf,aAAH,CAAkB+yC,MAAlB,EAA0BpZ,KAA1B;AAEAsX,QAAAA,0BAA0B,GAAG8B,MAA7B;AACA7B,QAAAA,yBAAyB,GAAGvX,KAA5B;AAEA;AAED,KAbD,MAaO;AAENtwC,MAAAA,OAAO,CAAE,KAAF,CAAP;AAEA;AAED;;AAED,WAASijD,cAAT,CAAyBhxD,WAAzB,EAAuC;AAEtC,QAAKA,WAAL,EAAmB;AAElB4N,MAAAA,MAAM,CAAE,IAAF,CAAN;AAEA,KAJD,MAIO;AAENG,MAAAA,OAAO,CAAE,IAAF,CAAP;AAEA;AAED,GA1uBkD,CA4uBnD;;;AAEA,WAAS2pD,aAAT,CAAwBC,SAAxB,EAAoC;AAEnC,QAAKA,SAAS,KAAKnyF,SAAnB,EAA+BmyF,SAAS,GAAG,QAAQxiB,WAAR,GAAsB,CAAlC;;AAE/B,QAAK4gB,kBAAkB,KAAK4B,SAA5B,EAAwC;AAEvC3zB,MAAAA,EAAE,CAAC0zB,aAAH,CAAkBC,SAAlB;AACA5B,MAAAA,kBAAkB,GAAG4B,SAArB;AAEA;AAED;;AAED,WAASvB,WAAT,CAAsBwB,SAAtB,EAAiCC,YAAjC,EAAgD;AAE/C,QAAK9B,kBAAkB,KAAK,IAA5B,EAAmC;AAElC2B,MAAAA,aAAa;AAEb;;AAED,QAAII,YAAY,GAAG9B,oBAAoB,CAAED,kBAAF,CAAvC;;AAEA,QAAK+B,YAAY,KAAKtyF,SAAtB,EAAkC;AAEjCsyF,MAAAA,YAAY,GAAG;AAAElpF,QAAAA,IAAI,EAAEpJ,SAAR;AAAmB06B,QAAAA,OAAO,EAAE16B;AAA5B,OAAf;AACAwwF,MAAAA,oBAAoB,CAAED,kBAAF,CAApB,GAA6C+B,YAA7C;AAEA;;AAED,QAAKA,YAAY,CAAClpF,IAAb,KAAsBgpF,SAAtB,IAAmCE,YAAY,CAAC53D,OAAb,KAAyB23D,YAAjE,EAAgF;AAE/E7zB,MAAAA,EAAE,CAACoyB,WAAH,CAAgBwB,SAAhB,EAA2BC,YAAY,IAAItB,aAAa,CAAEqB,SAAF,CAAxD;AAEAE,MAAAA,YAAY,CAAClpF,IAAb,GAAoBgpF,SAApB;AACAE,MAAAA,YAAY,CAAC53D,OAAb,GAAuB23D,YAAvB;AAEA;AAED;;AAED,WAASE,aAAT,GAAyB;AAExB,UAAMD,YAAY,GAAG9B,oBAAoB,CAAED,kBAAF,CAAzC;;AAEA,QAAK+B,YAAY,KAAKtyF,SAAjB,IAA8BsyF,YAAY,CAAClpF,IAAb,KAAsBpJ,SAAzD,EAAqE;AAEpEw+D,MAAAA,EAAE,CAACoyB,WAAH,CAAgB0B,YAAY,CAAClpF,IAA7B,EAAmC,IAAnC;AAEAkpF,MAAAA,YAAY,CAAClpF,IAAb,GAAoBpJ,SAApB;AACAsyF,MAAAA,YAAY,CAAC53D,OAAb,GAAuB16B,SAAvB;AAEA;AAED;;AAED,WAASwyF,oBAAT,GAAgC;AAE/B,QAAI;AAEHh0B,MAAAA,EAAE,CAACg0B,oBAAH,CAAwBtzF,KAAxB,CAA+Bs/D,EAA/B,EAAmCjgE,SAAnC;AAEA,KAJD,CAIE,OAAQ4yB,KAAR,EAAgB;AAEjBzD,MAAAA,OAAO,CAACyD,KAAR,CAAe,mBAAf,EAAoCA,KAApC;AAEA;AAED;;AAED,WAAS2/D,UAAT,GAAsB;AAErB,QAAI;AAEHtyB,MAAAA,EAAE,CAACsyB,UAAH,CAAc5xF,KAAd,CAAqBs/D,EAArB,EAAyBjgE,SAAzB;AAEA,KAJD,CAIE,OAAQ4yB,KAAR,EAAgB;AAEjBzD,MAAAA,OAAO,CAACyD,KAAR,CAAe,mBAAf,EAAoCA,KAApC;AAEA;AAED;;AAED,WAASshE,UAAT,GAAsB;AAErB,QAAI;AAEHj0B,MAAAA,EAAE,CAACi0B,UAAH,CAAcvzF,KAAd,CAAqBs/D,EAArB,EAAyBjgE,SAAzB;AAEA,KAJD,CAIE,OAAQ4yB,KAAR,EAAgB;AAEjBzD,MAAAA,OAAO,CAACyD,KAAR,CAAe,mBAAf,EAAoCA,KAApC;AAEA;AAED,GA90BkD,CAg1BnD;;;AAEA,WAASoJ,OAAT,CAAkBA,OAAlB,EAA4B;AAE3B,QAAKk2D,cAAc,CAAC//D,MAAf,CAAuB6J,OAAvB,MAAqC,KAA1C,EAAkD;AAEjDikC,MAAAA,EAAE,CAACjkC,OAAH,CAAYA,OAAO,CAACj0B,CAApB,EAAuBi0B,OAAO,CAAC/zB,CAA/B,EAAkC+zB,OAAO,CAAC5B,CAA1C,EAA6C4B,OAAO,CAACxe,CAArD;AACA00E,MAAAA,cAAc,CAACpiE,IAAf,CAAqBkM,OAArB;AAEA;AAED;;AAED,WAASE,QAAT,CAAmBA,QAAnB,EAA8B;AAE7B,QAAKi2D,eAAe,CAAChgE,MAAhB,CAAwB+J,QAAxB,MAAuC,KAA5C,EAAoD;AAEnD+jC,MAAAA,EAAE,CAAC/jC,QAAH,CAAaA,QAAQ,CAACn0B,CAAtB,EAAyBm0B,QAAQ,CAACj0B,CAAlC,EAAqCi0B,QAAQ,CAAC9B,CAA9C,EAAiD8B,QAAQ,CAAC1e,CAA1D;AACA20E,MAAAA,eAAe,CAACriE,IAAhB,CAAsBoM,QAAtB;AAEA;AAED,GAt2BkD,CAw2BnD;;;AAEA,WAAS0zC,KAAT,GAAiB;AAEhBkhB,IAAAA,mBAAmB,GAAG,EAAtB;AAEAkB,IAAAA,kBAAkB,GAAG,IAArB;AACAC,IAAAA,oBAAoB,GAAG,EAAvB;AAEAlB,IAAAA,cAAc,GAAG,IAAjB;AAEAE,IAAAA,eAAe,GAAG,IAAlB;AAEAQ,IAAAA,gBAAgB,GAAG,IAAnB;AACAC,IAAAA,eAAe,GAAG,IAAlB;AAEAb,IAAAA,WAAW,CAACjhB,KAAZ;AACAxzC,IAAAA,WAAW,CAACwzC,KAAZ;AACAvzC,IAAAA,aAAa,CAACuzC,KAAd;AAEA;;AAED,SAAO;AAENxP,IAAAA,OAAO,EAAE;AACRjiE,MAAAA,KAAK,EAAE0yF,WADC;AAERr8B,MAAAA,KAAK,EAAEp4B,WAFC;AAGR49B,MAAAA,OAAO,EAAE39B;AAHD,KAFH;AAQNwN,IAAAA,MAAM,EAAEA,MARF;AASNG,IAAAA,OAAO,EAAEA,OATH;AAWN2oD,IAAAA,UAAU,EAAEA,UAXN;AAaN5F,IAAAA,WAAW,EAAEA,WAbP;AAcNoG,IAAAA,WAAW,EAAEA,WAdP;AAgBNV,IAAAA,YAAY,EAAEA,YAhBR;AAiBNC,IAAAA,WAAW,EAAEA,WAjBP;AAmBNc,IAAAA,YAAY,EAAEA,YAnBR;AAoBNH,IAAAA,gBAAgB,EAAEA,gBApBZ;AAsBNpG,IAAAA,cAAc,EAAEA,cAtBV;AAwBN0G,IAAAA,aAAa,EAAEA,aAxBT;AAyBNtB,IAAAA,WAAW,EAAEA,WAzBP;AA0BN2B,IAAAA,aAAa,EAAEA,aA1BT;AA2BNC,IAAAA,oBAAoB,EAAEA,oBA3BhB;AA4BN1B,IAAAA,UAAU,EAAEA,UA5BN;AA6BN2B,IAAAA,UAAU,EAAEA,UA7BN;AA+BNl4D,IAAAA,OAAO,EAAEA,OA/BH;AAgCNE,IAAAA,QAAQ,EAAEA,QAhCJ;AAkCN0zC,IAAAA,KAAK,EAAEA;AAlCD,GAAP;AAsCA;AAED;;;;;AAIA,SAASukB,aAAT,CAAwBC,GAAxB,EAA6B19B,UAA7B,EAAyCiU,KAAzC,EAAgD/M,UAAhD,EAA4DsC,YAA5D,EAA0Em0B,KAA1E,EAAiFlkB,IAAjF,EAAwF;AAEvF,QAAMhQ,QAAQ,GAAGD,YAAY,CAACC,QAA9B;AACA,QAAMiR,WAAW,GAAGlR,YAAY,CAACkR,WAAjC;AACA,QAAMG,cAAc,GAAGrR,YAAY,CAACqR,cAApC;AACA,QAAMD,cAAc,GAAGpR,YAAY,CAACoR,cAApC;AACA,QAAMS,UAAU,GAAG7R,YAAY,CAAC6R,UAAhC;;AAEA,QAAMuiB,cAAc,GAAG,IAAIj0B,OAAJ,EAAvB;;AACA,MAAIppC,OAAJ,CATuF,CAWvF;AACA;AACA;;;AAEA,MAAIs9D,kBAAkB,GAAG,KAAzB;;AAEA,MAAI;AAEHA,IAAAA,kBAAkB,GAAG,OAAOC,eAAP,KAA2B,WAA3B,IACf,IAAIA,eAAJ,CAAqB,CAArB,EAAwB,CAAxB,EAA4B98D,UAA5B,CAAwC,IAAxC,CAAF,KAAuD,IAD3D;AAGA,GALD,CAKE,OAAQ+8D,GAAR,EAAc,CAEf;AAEA;;AAED,WAASC,YAAT,CAAuBrqF,KAAvB,EAA8BC,MAA9B,EAAuC;AAEtC;AAEA,WAAOiqF,kBAAkB,GACxB,IAAIC,eAAJ,CAAqBnqF,KAArB,EAA4BC,MAA5B,CADwB,GAExB/E,QAAQ,CAACiyB,eAAT,CAA0B,8BAA1B,EAA0D,QAA1D,CAFD;AAIA;;AAED,WAASm9D,WAAT,CAAsBv9D,KAAtB,EAA6Bw9D,eAA7B,EAA8CC,cAA9C,EAA8DC,OAA9D,EAAwE;AAEvE,QAAIj+D,KAAK,GAAG,CAAZ,CAFuE,CAIvE;;AAEA,QAAKO,KAAK,CAAC/sB,KAAN,GAAcyqF,OAAd,IAAyB19D,KAAK,CAAC9sB,MAAN,GAAewqF,OAA7C,EAAuD;AAEtDj+D,MAAAA,KAAK,GAAGi+D,OAAO,GAAGp2F,IAAI,CAAC+E,GAAL,CAAU2zB,KAAK,CAAC/sB,KAAhB,EAAuB+sB,KAAK,CAAC9sB,MAA7B,CAAlB;AAEA,KAVsE,CAYvE;;;AAEA,QAAKusB,KAAK,GAAG,CAAR,IAAa+9D,eAAe,KAAK,IAAtC,EAA6C;AAE5C;AAEA,UAAO,OAAOG,gBAAP,KAA4B,WAA5B,IAA2C39D,KAAK,YAAY29D,gBAA9D,IACF,OAAOz9D,iBAAP,KAA6B,WAA7B,IAA4CF,KAAK,YAAYE,iBAD3D,IAEF,OAAO09D,WAAP,KAAuB,WAAvB,IAAsC59D,KAAK,YAAY49D,WAF1D,EAE0E;AAEzE,cAAM9xF,KAAK,GAAG0xF,eAAe,GAAG7oE,SAAS,CAACsC,eAAb,GAA+B3vB,IAAI,CAACwE,KAAjE;AAEA,cAAMmH,KAAK,GAAGnH,KAAK,CAAE2zB,KAAK,GAAGO,KAAK,CAAC/sB,KAAhB,CAAnB;AACA,cAAMC,MAAM,GAAGpH,KAAK,CAAE2zB,KAAK,GAAGO,KAAK,CAAC9sB,MAAhB,CAApB;AAEA,YAAK2sB,OAAO,KAAKx1B,SAAjB,EAA6Bw1B,OAAO,GAAGy9D,YAAY,CAAErqF,KAAF,EAASC,MAAT,CAAtB,CAP4C,CASzE;;AAEA,cAAMitB,MAAM,GAAGs9D,cAAc,GAAGH,YAAY,CAAErqF,KAAF,EAASC,MAAT,CAAf,GAAmC2sB,OAAhE;AAEAM,QAAAA,MAAM,CAACltB,KAAP,GAAeA,KAAf;AACAktB,QAAAA,MAAM,CAACjtB,MAAP,GAAgBA,MAAhB;AAEA,cAAMmtB,OAAO,GAAGF,MAAM,CAACG,UAAP,CAAmB,IAAnB,CAAhB;AACAD,QAAAA,OAAO,CAACI,SAAR,CAAmBT,KAAnB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC/sB,KAAhC,EAAuCC,MAAvC;AAEA6kB,QAAAA,OAAO,CAACC,IAAR,CAAc,yDAAyDgI,KAAK,CAAC/sB,KAA/D,GAAuE,GAAvE,GAA6E+sB,KAAK,CAAC9sB,MAAnF,GAA4F,QAA5F,GAAuGD,KAAvG,GAA+G,GAA/G,GAAqHC,MAArH,GAA8H,IAA5I;AAEA,eAAOitB,MAAP;AAEA,OAzBD,MAyBO;AAEN,YAAK,UAAUH,KAAf,EAAuB;AAEtBjI,UAAAA,OAAO,CAACC,IAAR,CAAc,2DAA2DgI,KAAK,CAAC/sB,KAAjE,GAAyE,GAAzE,GAA+E+sB,KAAK,CAAC9sB,MAArF,GAA8F,IAA5G;AAEA;;AAED,eAAO8sB,KAAP;AAEA;AAED;;AAED,WAAOA,KAAP;AAEA;;AAED,WAASnJ,YAAT,CAAuBmJ,KAAvB,EAA+B;AAE9B,WAAOrL,SAAS,CAACkC,YAAV,CAAwBmJ,KAAK,CAAC/sB,KAA9B,KAAyC0hB,SAAS,CAACkC,YAAV,CAAwBmJ,KAAK,CAAC9sB,MAA9B,CAAhD;AAEA;;AAED,WAAS2qF,sBAAT,CAAiC94D,OAAjC,EAA2C;AAE1C,QAAKgkC,QAAL,EAAgB,OAAO,KAAP;AAEhB,WAAShkC,OAAO,CAACjE,KAAR,KAAkB5U,mBAAlB,IAAyC6Y,OAAO,CAAChE,KAAR,KAAkB7U,mBAA7D,IACJ6Y,OAAO,CAAC9D,SAAR,KAAsB7U,aAAtB,IAAuC2Y,OAAO,CAAC9D,SAAR,KAAsBxU,YADhE;AAGA;;AAED,WAASqxE,2BAAT,CAAsC/4D,OAAtC,EAA+Cg5D,YAA/C,EAA8D;AAE7D,WAAOh5D,OAAO,CAACpD,eAAR,IAA2Bo8D,YAA3B,IACNh5D,OAAO,CAAC9D,SAAR,KAAsB7U,aADhB,IACiC2Y,OAAO,CAAC9D,SAAR,KAAsBxU,YAD9D;AAGA;;AAED,WAASuxE,cAAT,CAAyBv1F,MAAzB,EAAiCs8B,OAAjC,EAA0C9xB,KAA1C,EAAiDC,MAAjD,EAA0D;AAEzD8pF,IAAAA,GAAG,CAACgB,cAAJ,CAAoBv1F,MAApB;;AAEA,UAAMw1F,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,CAA1B,CAJyD,CAMzD;;AACAk5D,IAAAA,iBAAiB,CAACC,aAAlB,GAAkC52F,IAAI,CAACuO,GAAL,CAAUvO,IAAI,CAAC+E,GAAL,CAAU4G,KAAV,EAAiBC,MAAjB,CAAV,IAAwC5L,IAAI,CAAC62F,KAA/E;AAEA;;AAED,WAASC,iBAAT,CAA4BC,kBAA5B,EAAgDC,QAAhD,EAA0DC,MAA1D,EAAmE;AAElE,QAAKx1B,QAAQ,KAAK,KAAlB,EAA0B,OAAOu1B,QAAP;;AAE1B,QAAKD,kBAAkB,KAAK,IAA5B,EAAmC;AAElC,UAAKrB,GAAG,CAAEqB,kBAAF,CAAH,KAA8Bh0F,SAAnC,EAA+C,OAAO2yF,GAAG,CAAEqB,kBAAF,CAAV;AAE/CtmE,MAAAA,OAAO,CAACC,IAAR,CAAc,8EAA8EqmE,kBAA9E,GAAmG,IAAjH;AAEA;;AAED,QAAI78D,cAAc,GAAG88D,QAArB;;AAEA,QAAKA,QAAQ,KAAK,IAAlB,EAAyB;AAExB,UAAKC,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AACvB,UAAK+8D,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AACvB,UAAK+8D,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AAEvB;;AAED,QAAK88D,QAAQ,KAAK,IAAlB,EAAyB;AAExB,UAAKC,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AACvB,UAAK+8D,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AACvB,UAAK+8D,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AAEvB;;AAED,QAAK88D,QAAQ,KAAK,IAAlB,EAAyB;AAExB,UAAKC,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AACvB,UAAK+8D,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AACvB,UAAK+8D,MAAM,KAAK,IAAhB,EAAuB/8D,cAAc,GAAG,KAAjB;AAEvB;;AAED,QAAKA,cAAc,KAAK,KAAnB,IAA4BA,cAAc,KAAK,KAA/C,IACJA,cAAc,KAAK,KADf,IACwBA,cAAc,KAAK,KADhD,EACwD;AAEvD89B,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB;AAEA;;AAED,WAAOsa,cAAP;AAEA,GAnLsF,CAqLvF;;;AAEA,WAASg9D,cAAT,CAAyBzyF,CAAzB,EAA6B;AAE5B,QAAKA,CAAC,KAAKqgB,aAAN,IAAuBrgB,CAAC,KAAKsgB,0BAA7B,IAA2DtgB,CAAC,KAAKwgB,yBAAtE,EAAkG;AAEjG,aAAO,IAAP;AAEA;;AAED,WAAO,IAAP;AAEA,GAjMsF,CAmMvF;;;AAEA,WAASkyE,gBAAT,CAA2B1sF,KAA3B,EAAmC;AAElC,UAAMgzB,OAAO,GAAGhzB,KAAK,CAACtJ,MAAtB;AAEAs8B,IAAAA,OAAO,CAAC3yB,mBAAR,CAA6B,SAA7B,EAAwCqsF,gBAAxC;AAEAC,IAAAA,iBAAiB,CAAE35D,OAAF,CAAjB;;AAEA,QAAKA,OAAO,CAAC45D,cAAb,EAA8B;AAE7BzB,MAAAA,cAAc,CAACpzB,MAAf,CAAuB/kC,OAAvB;AAEA;;AAEDg0C,IAAAA,IAAI,CAAC2D,MAAL,CAAYn6C,QAAZ;AAEA;;AAED,WAASq8D,qBAAT,CAAgC7sF,KAAhC,EAAwC;AAEvC,UAAM4vD,YAAY,GAAG5vD,KAAK,CAACtJ,MAA3B;AAEAk5D,IAAAA,YAAY,CAACvvD,mBAAb,CAAkC,SAAlC,EAA6CwsF,qBAA7C;AAEAC,IAAAA,sBAAsB,CAAEl9B,YAAF,CAAtB;AAEAoX,IAAAA,IAAI,CAAC2D,MAAL,CAAYn6C,QAAZ;AAEA,GAjOsF,CAmOvF;;;AAEA,WAASm8D,iBAAT,CAA4B35D,OAA5B,EAAsC;AAErC,UAAMk5D,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,CAA1B;AAEA,QAAKk5D,iBAAiB,CAACa,WAAlB,KAAkCz0F,SAAvC,EAAmD;;AAEnD2yF,IAAAA,GAAG,CAAC+B,aAAJ,CAAmBd,iBAAiB,CAACe,cAArC;;AAEAx4B,IAAAA,UAAU,CAACxjD,MAAX,CAAmB+hB,OAAnB;AAEA;;AAED,WAAS85D,sBAAT,CAAiCl9B,YAAjC,EAAgD;AAE/C,UAAMs9B,sBAAsB,GAAGz4B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,CAA/B;AACA,UAAMs8B,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAY,CAAC58B,OAA7B,CAA1B;AAEA,QAAK,CAAE48B,YAAP,EAAsB;;AAEtB,QAAKs8B,iBAAiB,CAACe,cAAlB,KAAqC30F,SAA1C,EAAsD;AAErD2yF,MAAAA,GAAG,CAAC+B,aAAJ,CAAmBd,iBAAiB,CAACe,cAArC;AAEA;;AAED,QAAKr9B,YAAY,CAACz8B,YAAlB,EAAiC;AAEhCy8B,MAAAA,YAAY,CAACz8B,YAAb,CAA0BtC,OAA1B;AAEA;;AAED,QAAK++B,YAAY,CAACC,uBAAlB,EAA4C;AAE3C,WAAM,IAAIt4D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B0zF,QAAAA,GAAG,CAACkC,iBAAJ,CAAuBD,sBAAsB,CAACE,kBAAvB,CAA2C71F,CAA3C,CAAvB;;AACA,YAAK21F,sBAAsB,CAACG,kBAA5B,EAAiDpC,GAAG,CAACqC,kBAAJ,CAAwBJ,sBAAsB,CAACG,kBAAvB,CAA2C91F,CAA3C,CAAxB;AAEjD;AAED,KATD,MASO;AAEN0zF,MAAAA,GAAG,CAACkC,iBAAJ,CAAuBD,sBAAsB,CAACE,kBAA9C;;AACA,UAAKF,sBAAsB,CAACG,kBAA5B,EAAiDpC,GAAG,CAACqC,kBAAJ,CAAwBJ,sBAAsB,CAACG,kBAA/C;AACjD,UAAKH,sBAAsB,CAACK,8BAA5B,EAA6DtC,GAAG,CAACkC,iBAAJ,CAAuBD,sBAAsB,CAACK,8BAA9C;AAC7D,UAAKL,sBAAsB,CAACM,wBAA5B,EAAuDvC,GAAG,CAACqC,kBAAJ,CAAwBJ,sBAAsB,CAACM,wBAA/C;AACvD,UAAKN,sBAAsB,CAACO,wBAA5B,EAAuDxC,GAAG,CAACqC,kBAAJ,CAAwBJ,sBAAsB,CAACO,wBAA/C;AAEvD;;AAEDh5B,IAAAA,UAAU,CAACxjD,MAAX,CAAmB2+C,YAAY,CAAC58B,OAAhC;AACAyhC,IAAAA,UAAU,CAACxjD,MAAX,CAAmB2+C,YAAnB;AAEA,GA1RsF,CA4RvF;;;AAEA,MAAI89B,YAAY,GAAG,CAAnB;;AAEA,WAASC,iBAAT,GAA6B;AAE5BD,IAAAA,YAAY,GAAG,CAAf;AAEA;;AAED,WAAS5f,mBAAT,GAA+B;AAE9B,UAAM8f,WAAW,GAAGF,YAApB;;AAEA,QAAKE,WAAW,IAAI3lB,WAApB,EAAkC;AAEjCjiD,MAAAA,OAAO,CAACC,IAAR,CAAc,wCAAwC2nE,WAAxC,GAAsD,8CAAtD,GAAuG3lB,WAArH;AAEA;;AAEDylB,IAAAA,YAAY,IAAI,CAAhB;AAEA,WAAOE,WAAP;AAEA,GApTsF,CAsTvF;;;AAEA,WAASC,YAAT,CAAuB76D,OAAvB,EAAgC86D,IAAhC,EAAuC;AAEtC,UAAM5B,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,CAA1B;AAEA,QAAKA,OAAO,CAAC45D,cAAb,EAA8BmB,kBAAkB,CAAE/6D,OAAF,CAAlB;;AAE9B,QAAKA,OAAO,CAAChD,OAAR,GAAkB,CAAlB,IAAuBk8D,iBAAiB,CAAC8B,SAAlB,KAAgCh7D,OAAO,CAAChD,OAApE,EAA8E;AAE7E,YAAM/B,KAAK,GAAG+E,OAAO,CAAC/E,KAAtB;;AAEA,UAAKA,KAAK,KAAK31B,SAAf,EAA2B;AAE1B0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,uEAAd;AAEA,OAJD,MAIO,IAAKgI,KAAK,CAACggE,QAAN,KAAmB,KAAxB,EAAgC;AAEtCjoE,QAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AAEA,OAJM,MAIA;AAENioE,QAAAA,aAAa,CAAEhC,iBAAF,EAAqBl5D,OAArB,EAA8B86D,IAA9B,CAAb;AACA;AAEA;AAED;;AAEDtsB,IAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,IAAAA,KAAK,CAAC0nB,WAAN,CAAmB,IAAnB,EAAyBgD,iBAAiB,CAACe,cAA3C;AAEA;;AAED,WAAS3d,iBAAT,CAA4Bt8C,OAA5B,EAAqC86D,IAArC,EAA4C;AAE3C,UAAM5B,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,CAA1B;;AAEA,QAAKA,OAAO,CAAChD,OAAR,GAAkB,CAAlB,IAAuBk8D,iBAAiB,CAAC8B,SAAlB,KAAgCh7D,OAAO,CAAChD,OAApE,EAA8E;AAE7Ek+D,MAAAA,aAAa,CAAEhC,iBAAF,EAAqBl5D,OAArB,EAA8B86D,IAA9B,CAAb;AACA;AAEA;;AAEDtsB,IAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,IAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0BgD,iBAAiB,CAACe,cAA5C;AAEA;;AAED,WAASzd,YAAT,CAAuBx8C,OAAvB,EAAgC86D,IAAhC,EAAuC;AAEtC,UAAM5B,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,CAA1B;;AAEA,QAAKA,OAAO,CAAChD,OAAR,GAAkB,CAAlB,IAAuBk8D,iBAAiB,CAAC8B,SAAlB,KAAgCh7D,OAAO,CAAChD,OAApE,EAA8E;AAE7Ek+D,MAAAA,aAAa,CAAEhC,iBAAF,EAAqBl5D,OAArB,EAA8B86D,IAA9B,CAAb;AACA;AAEA;;AAEDtsB,IAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,IAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0BgD,iBAAiB,CAACe,cAA5C;AAEA;;AAED,WAASkB,cAAT,CAAyBn7D,OAAzB,EAAkC86D,IAAlC,EAAyC;AAExC,QAAK96D,OAAO,CAAC/E,KAAR,CAAc/3B,MAAd,KAAyB,CAA9B,EAAkC;AAElC,UAAMg2F,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,CAA1B;;AAEA,QAAKA,OAAO,CAAChD,OAAR,GAAkB,CAAlB,IAAuBk8D,iBAAiB,CAAC8B,SAAlB,KAAgCh7D,OAAO,CAAChD,OAApE,EAA8E;AAE7Eo+D,MAAAA,WAAW,CAAElC,iBAAF,EAAqBl5D,OAArB,CAAX;AAEAwuC,MAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,MAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0BgD,iBAAiB,CAACe,cAA5C;;AAEAhC,MAAAA,GAAG,CAACoD,WAAJ,CAAiB,KAAjB,EAAwBr7D,OAAO,CAAClD,KAAhC;;AAEA,YAAMw+D,YAAY,GAAKt7D,OAAO,KAAMA,OAAO,CAACu7D,mBAAR,IAA+Bv7D,OAAO,CAAC/E,KAAR,CAAe,CAAf,EAAmBsgE,mBAAxD,CAA9B;AACA,YAAMn9B,aAAa,GAAKp+B,OAAO,CAAC/E,KAAR,CAAe,CAAf,KAAsB+E,OAAO,CAAC/E,KAAR,CAAe,CAAf,EAAmBmjC,aAAjE;AAEA,YAAMo9B,SAAS,GAAG,EAAlB;;AAEA,WAAM,IAAIj3F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,YAAK,CAAE+2F,YAAF,IAAkB,CAAEl9B,aAAzB,EAAyC;AAExCo9B,UAAAA,SAAS,CAAEj3F,CAAF,CAAT,GAAiBi0F,WAAW,CAAEx4D,OAAO,CAAC/E,KAAR,CAAe12B,CAAf,CAAF,EAAsB,KAAtB,EAA6B,IAA7B,EAAmC6wE,cAAnC,CAA5B;AAEA,SAJD,MAIO;AAENomB,UAAAA,SAAS,CAAEj3F,CAAF,CAAT,GAAiB65D,aAAa,GAAGp+B,OAAO,CAAC/E,KAAR,CAAe12B,CAAf,EAAmB02B,KAAtB,GAA8B+E,OAAO,CAAC/E,KAAR,CAAe12B,CAAf,CAA5D;AAEA;AAED;;AAED,YAAM02B,KAAK,GAAGugE,SAAS,CAAE,CAAF,CAAvB;AAAA,YACCxC,YAAY,GAAGlnE,YAAY,CAAEmJ,KAAF,CAAZ,IAAyB+oC,QADzC;AAAA,YAECu1B,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAAC7D,MAAvB,CAFZ;AAAA,YAGCq9D,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAACtxB,IAAvB,CAHV;AAAA,YAICgtF,gBAAgB,GAAGrC,iBAAiB,CAAEr5D,OAAO,CAACvD,cAAV,EAA0B88D,QAA1B,EAAoCC,MAApC,CAJrC;AAMAmC,MAAAA,oBAAoB,CAAE,KAAF,EAAS37D,OAAT,EAAkBg5D,YAAlB,CAApB;AAEA,UAAIz8D,OAAJ;;AAEA,UAAK++D,YAAL,EAAoB;AAEnB,aAAM,IAAI/2F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9Bg4B,UAAAA,OAAO,GAAGi/D,SAAS,CAAEj3F,CAAF,CAAT,CAAeg4B,OAAzB;;AAEA,eAAM,IAAI6b,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG7b,OAAO,CAACr5B,MAA7B,EAAqCk1C,CAAC,EAAtC,EAA4C;AAE3C,kBAAMwjD,MAAM,GAAGr/D,OAAO,CAAE6b,CAAF,CAAtB;;AAEA,gBAAKpY,OAAO,CAAC7D,MAAR,KAAmBtT,UAAnB,IAAiCmX,OAAO,CAAC7D,MAAR,KAAmBvT,SAAzD,EAAqE;AAEpE,kBAAK2wE,QAAQ,KAAK,IAAlB,EAAyB;AAExB/qB,gBAAAA,KAAK,CAACspB,oBAAN,CAA4B,QAAQvzF,CAApC,EAAuC6zC,CAAvC,EAA0CsjD,gBAA1C,EAA4DE,MAAM,CAAC1tF,KAAnE,EAA0E0tF,MAAM,CAACztF,MAAjF,EAAyF,CAAzF,EAA4FytF,MAAM,CAACloD,IAAnG;AAEA,eAJD,MAIO;AAEN1gB,gBAAAA,OAAO,CAACC,IAAR,CAAc,iGAAd;AAEA;AAED,aAZD,MAYO;AAENu7C,cAAAA,KAAK,CAAC4nB,UAAN,CAAkB,QAAQ7xF,CAA1B,EAA6B6zC,CAA7B,EAAgCsjD,gBAAhC,EAAkDE,MAAM,CAAC1tF,KAAzD,EAAgE0tF,MAAM,CAACztF,MAAvE,EAA+E,CAA/E,EAAkForF,QAAlF,EAA4FC,MAA5F,EAAoGoC,MAAM,CAACloD,IAA3G;AAEA;AAED;AAED;;AAEDwlD,QAAAA,iBAAiB,CAACC,aAAlB,GAAkC58D,OAAO,CAACr5B,MAAR,GAAiB,CAAnD;AAEA,OAlCD,MAkCO;AAENq5B,QAAAA,OAAO,GAAGyD,OAAO,CAACzD,OAAlB;;AAEA,aAAM,IAAIh4B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,cAAK65D,aAAL,EAAqB;AAEpBoQ,YAAAA,KAAK,CAAC4nB,UAAN,CAAkB,QAAQ7xF,CAA1B,EAA6B,CAA7B,EAAgCm3F,gBAAhC,EAAkDF,SAAS,CAAEj3F,CAAF,CAAT,CAAe2J,KAAjE,EAAwEstF,SAAS,CAAEj3F,CAAF,CAAT,CAAe4J,MAAvF,EAA+F,CAA/F,EAAkGorF,QAAlG,EAA4GC,MAA5G,EAAoHgC,SAAS,CAAEj3F,CAAF,CAAT,CAAemvC,IAAnI;;AAEA,iBAAM,IAAI0E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG7b,OAAO,CAACr5B,MAA7B,EAAqCk1C,CAAC,EAAtC,EAA4C;AAE3C,oBAAMwjD,MAAM,GAAGr/D,OAAO,CAAE6b,CAAF,CAAtB;AACA,oBAAMyjD,WAAW,GAAGD,MAAM,CAAC3gE,KAAP,CAAc12B,CAAd,EAAkB02B,KAAtC;AAEAuzC,cAAAA,KAAK,CAAC4nB,UAAN,CAAkB,QAAQ7xF,CAA1B,EAA6B6zC,CAAC,GAAG,CAAjC,EAAoCsjD,gBAApC,EAAsDG,WAAW,CAAC3tF,KAAlE,EAAyE2tF,WAAW,CAAC1tF,MAArF,EAA6F,CAA7F,EAAgGorF,QAAhG,EAA0GC,MAA1G,EAAkHqC,WAAW,CAACnoD,IAA9H;AAEA;AAED,WAbD,MAaO;AAEN86B,YAAAA,KAAK,CAAC4nB,UAAN,CAAkB,QAAQ7xF,CAA1B,EAA6B,CAA7B,EAAgCm3F,gBAAhC,EAAkDnC,QAAlD,EAA4DC,MAA5D,EAAoEgC,SAAS,CAAEj3F,CAAF,CAA7E;;AAEA,iBAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG7b,OAAO,CAACr5B,MAA7B,EAAqCk1C,CAAC,EAAtC,EAA4C;AAE3C,oBAAMwjD,MAAM,GAAGr/D,OAAO,CAAE6b,CAAF,CAAtB;AAEAo2B,cAAAA,KAAK,CAAC4nB,UAAN,CAAkB,QAAQ7xF,CAA1B,EAA6B6zC,CAAC,GAAG,CAAjC,EAAoCsjD,gBAApC,EAAsDnC,QAAtD,EAAgEC,MAAhE,EAAwEoC,MAAM,CAAC3gE,KAAP,CAAc12B,CAAd,CAAxE;AAEA;AAED;AAED;;AAED20F,QAAAA,iBAAiB,CAACC,aAAlB,GAAkC58D,OAAO,CAACr5B,MAA1C;AAEA;;AAED,UAAK61F,2BAA2B,CAAE/4D,OAAF,EAAWg5D,YAAX,CAAhC,EAA4D;AAE3D;AACAC,QAAAA,cAAc,CAAE,KAAF,EAASj5D,OAAT,EAAkB/E,KAAK,CAAC/sB,KAAxB,EAA+B+sB,KAAK,CAAC9sB,MAArC,CAAd;AAEA;;AAED+qF,MAAAA,iBAAiB,CAAC8B,SAAlB,GAA8Bh7D,OAAO,CAAChD,OAAtC;AAEA,UAAKgD,OAAO,CAAC/C,QAAb,EAAwB+C,OAAO,CAAC/C,QAAR,CAAkB+C,OAAlB;AAExB,KA1HD,MA0HO;AAENwuC,MAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,MAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0BgD,iBAAiB,CAACe,cAA5C;AAEA;AAED;;AAED,WAAS6B,qBAAT,CAAgC97D,OAAhC,EAAyC86D,IAAzC,EAAgD;AAE/CtsB,IAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,IAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0Bz0B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,EAA0Bi6D,cAApD;AAEA;;AAED,QAAM8B,YAAY,GAAG;AACpB,KAAE70E,cAAF,GAAoB,KADA;AAEpB,KAAEC,mBAAF,GAAyB,KAFL;AAGpB,KAAEC,sBAAF,GAA4B;AAHR,GAArB;AAMA,QAAM40E,UAAU,GAAG;AAClB,KAAE30E,aAAF,GAAmB,IADD;AAElB,KAAEC,0BAAF,GAAgC,IAFd;AAGlB,KAAEE,yBAAF,GAA+B,IAHb;AAKlB,KAAEE,YAAF,GAAkB,IALA;AAMlB,KAAEC,yBAAF,GAA+B,IANb;AAOlB,KAAEE,wBAAF,GAA8B;AAPZ,GAAnB;;AAUA,WAAS8zE,oBAAT,CAA+BM,WAA/B,EAA4Cj8D,OAA5C,EAAqDg5D,YAArD,EAAoE;AAEnE,QAAKA,YAAL,EAAoB;AAEnBf,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCF,YAAY,CAAE/7D,OAAO,CAACjE,KAAV,CAAnD;;AACAk8D,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCF,YAAY,CAAE/7D,OAAO,CAAChE,KAAV,CAAnD;;AAEA,UAAKigE,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,KAA9C,EAAsD;AAErDhE,QAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCF,YAAY,CAAE/7D,OAAO,CAAC25C,KAAV,CAAnD;AAEA;;AAEDse,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCD,UAAU,CAAEh8D,OAAO,CAAC/D,SAAV,CAAjD;;AACAg8D,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCD,UAAU,CAAEh8D,OAAO,CAAC9D,SAAV,CAAjD;AAEA,KAdD,MAcO;AAEN+7D,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuC,KAAvC;;AACAhE,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuC,KAAvC;;AAEA,UAAKA,WAAW,KAAK,KAAhB,IAAyBA,WAAW,KAAK,KAA9C,EAAsD;AAErDhE,QAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuC,KAAvC;AAEA;;AAED,UAAKj8D,OAAO,CAACjE,KAAR,KAAkB5U,mBAAlB,IAAyC6Y,OAAO,CAAChE,KAAR,KAAkB7U,mBAAhE,EAAsF;AAErF6L,QAAAA,OAAO,CAACC,IAAR,CAAc,+HAAd;AAEA;;AAEDglE,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCxC,cAAc,CAAEz5D,OAAO,CAAC/D,SAAV,CAArD;;AACAg8D,MAAAA,GAAG,CAAC9B,aAAJ,CAAmB8F,WAAnB,EAAgC,KAAhC,EAAuCxC,cAAc,CAAEz5D,OAAO,CAAC9D,SAAV,CAArD;;AAEA,UAAK8D,OAAO,CAAC9D,SAAR,KAAsB7U,aAAtB,IAAuC2Y,OAAO,CAAC9D,SAAR,KAAsBxU,YAAlE,EAAiF;AAEhFsL,QAAAA,OAAO,CAACC,IAAR,CAAc,iIAAd;AAEA;AAED;;AAED,UAAMm9C,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,gCAAhB,CAAlB;;AAEA,QAAKiuD,SAAL,EAAiB;AAEhB,UAAKpwC,OAAO,CAACtxB,IAAR,KAAiB2Z,SAAjB,IAA8BkyC,UAAU,CAACp4C,GAAX,CAAgB,0BAAhB,MAAiD,IAApF,EAA2F;AAC3F,UAAK6d,OAAO,CAACtxB,IAAR,KAAiB4Z,aAAjB,IAAkC,CAAE07C,QAAQ,IAAIzJ,UAAU,CAACp4C,GAAX,CAAgB,+BAAhB,CAAd,MAAsE,IAA7G,EAAoH;;AAEpH,UAAK6d,OAAO,CAAC5D,UAAR,GAAqB,CAArB,IAA0BqlC,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,EAA0Bk8D,mBAAzD,EAA+E;AAE9EjE,QAAAA,GAAG,CAACkE,aAAJ,CAAmBF,WAAnB,EAAgC7rB,SAAS,CAACgsB,0BAA1C,EAAsE75F,IAAI,CAAC8E,GAAL,CAAU24B,OAAO,CAAC5D,UAAlB,EAA8B2nC,YAAY,CAAC0Q,gBAAb,EAA9B,CAAtE;;AACAhT,QAAAA,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,EAA0Bk8D,mBAA1B,GAAgDl8D,OAAO,CAAC5D,UAAxD;AAEA;AAED;AAED;;AAED,WAASg/D,WAAT,CAAsBlC,iBAAtB,EAAyCl5D,OAAzC,EAAmD;AAElD,QAAKk5D,iBAAiB,CAACa,WAAlB,KAAkCz0F,SAAvC,EAAmD;AAElD4zF,MAAAA,iBAAiB,CAACa,WAAlB,GAAgC,IAAhC;AAEA/5D,MAAAA,OAAO,CAAC7yB,gBAAR,CAA0B,SAA1B,EAAqCusF,gBAArC;AAEAR,MAAAA,iBAAiB,CAACe,cAAlB,GAAmChC,GAAG,CAAChC,aAAJ,EAAnC;AAEAjiB,MAAAA,IAAI,CAAC2D,MAAL,CAAYn6C,QAAZ;AAEA;AAED;;AAED,WAAS09D,aAAT,CAAwBhC,iBAAxB,EAA2Cl5D,OAA3C,EAAoD86D,IAApD,EAA2D;AAE1D,QAAImB,WAAW,GAAG,IAAlB;AAEA,QAAKj8D,OAAO,CAAC45C,oBAAb,EAAoCqiB,WAAW,GAAG,KAAd;AACpC,QAAKj8D,OAAO,CAAC85C,eAAb,EAA+BmiB,WAAW,GAAG,KAAd;AAE/Bb,IAAAA,WAAW,CAAElC,iBAAF,EAAqBl5D,OAArB,CAAX;AAEAwuC,IAAAA,KAAK,CAACgpB,aAAN,CAAqB,QAAQsD,IAA7B;AACAtsB,IAAAA,KAAK,CAAC0nB,WAAN,CAAmB+F,WAAnB,EAAgC/C,iBAAiB,CAACe,cAAlD;;AAEAhC,IAAAA,GAAG,CAACoD,WAAJ,CAAiB,KAAjB,EAAwBr7D,OAAO,CAAClD,KAAhC;;AACAm7D,IAAAA,GAAG,CAACoD,WAAJ,CAAiB,KAAjB,EAAwBr7D,OAAO,CAACnD,gBAAhC;;AACAo7D,IAAAA,GAAG,CAACoD,WAAJ,CAAiB,IAAjB,EAAuBr7D,OAAO,CAACjD,eAA/B;;AAEA,UAAM07D,eAAe,GAAGK,sBAAsB,CAAE94D,OAAF,CAAtB,IAAqClO,YAAY,CAAEkO,OAAO,CAAC/E,KAAV,CAAZ,KAAkC,KAA/F;AACA,UAAMA,KAAK,GAAGu9D,WAAW,CAAEx4D,OAAO,CAAC/E,KAAV,EAAiBw9D,eAAjB,EAAkC,KAAlC,EAAyCtjB,cAAzC,CAAzB;AAEA,UAAM6jB,YAAY,GAAGlnE,YAAY,CAAEmJ,KAAF,CAAZ,IAAyB+oC,QAA9C;AAAA,UACCu1B,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAAC7D,MAAvB,CADZ;AAGA,QAAIq9D,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAACtxB,IAAvB,CAAb;AAAA,QACCgtF,gBAAgB,GAAGrC,iBAAiB,CAAEr5D,OAAO,CAACvD,cAAV,EAA0B88D,QAA1B,EAAoCC,MAApC,CADrC;AAGAmC,IAAAA,oBAAoB,CAAEM,WAAF,EAAej8D,OAAf,EAAwBg5D,YAAxB,CAApB;AAEA,QAAI4C,MAAJ;AACA,UAAMr/D,OAAO,GAAGyD,OAAO,CAACzD,OAAxB;;AAEA,QAAKyD,OAAO,CAACq8D,cAAb,EAA8B;AAE7B;AAEAX,MAAAA,gBAAgB,GAAG,IAAnB;;AAEA,UAAK13B,QAAL,EAAgB;AAEf,YAAKhkC,OAAO,CAACtxB,IAAR,KAAiB2Z,SAAtB,EAAkC;AAEjCqzE,UAAAA,gBAAgB,GAAG,KAAnB;AAEA,SAJD,MAIO,IAAK17D,OAAO,CAACtxB,IAAR,KAAiB0Z,eAAtB,EAAwC;AAE9CszE,UAAAA,gBAAgB,GAAG,KAAnB;AAEA,SAJM,MAIA,IAAK17D,OAAO,CAACtxB,IAAR,KAAiBga,kBAAtB,EAA2C;AAEjDgzE,UAAAA,gBAAgB,GAAG,KAAnB;AAEA,SAJM,MAIA;AAENA,UAAAA,gBAAgB,GAAG,KAAnB,CAFM,CAEoB;AAE1B;AAED,OApBD,MAoBO;AAEN,YAAK17D,OAAO,CAACtxB,IAAR,KAAiB2Z,SAAtB,EAAkC;AAEjC2K,UAAAA,OAAO,CAACyD,KAAR,CAAe,8DAAf;AAEA;AAED,OAlC4B,CAoC7B;;;AAEA,UAAKuJ,OAAO,CAAC7D,MAAR,KAAmBlT,WAAnB,IAAkCyyE,gBAAgB,KAAK,IAA5D,EAAmE;AAElE;AACA;AACA;AACA,YAAK17D,OAAO,CAACtxB,IAAR,KAAiBwZ,iBAAjB,IAAsC8X,OAAO,CAACtxB,IAAR,KAAiB0Z,eAA5D,EAA8E;AAE7E4K,UAAAA,OAAO,CAACC,IAAR,CAAc,6FAAd;AAEA+M,UAAAA,OAAO,CAACtxB,IAAR,GAAewZ,iBAAf;AACAsxE,UAAAA,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAACtxB,IAAvB,CAAT;AAEA;AAED;;AAED,UAAKsxB,OAAO,CAAC7D,MAAR,KAAmBjT,kBAAnB,IAAyCwyE,gBAAgB,KAAK,IAAnE,EAA0E;AAEzE;AACA;AACAA,QAAAA,gBAAgB,GAAG,KAAnB,CAJyE,CAMzE;AACA;AACA;;AACA,YAAK17D,OAAO,CAACtxB,IAAR,KAAiBga,kBAAtB,EAA2C;AAE1CsK,UAAAA,OAAO,CAACC,IAAR,CAAc,kFAAd;AAEA+M,UAAAA,OAAO,CAACtxB,IAAR,GAAega,kBAAf;AACA8wE,UAAAA,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAACtxB,IAAvB,CAAT;AAEA;AAED,OAxE4B,CA0E7B;;;AAEA8/D,MAAAA,KAAK,CAAC4nB,UAAN,CAAkB,IAAlB,EAAwB,CAAxB,EAA2BsF,gBAA3B,EAA6CzgE,KAAK,CAAC/sB,KAAnD,EAA0D+sB,KAAK,CAAC9sB,MAAhE,EAAwE,CAAxE,EAA2EorF,QAA3E,EAAqFC,MAArF,EAA6F,IAA7F;AAEA,KA9ED,MA8EO,IAAKx5D,OAAO,CAACo+B,aAAb,EAA6B;AAEnC;AACA;AACA;AAEA,UAAK7hC,OAAO,CAACr5B,MAAR,GAAiB,CAAjB,IAAsB81F,YAA3B,EAA0C;AAEzC,aAAM,IAAIz0F,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGzZ,OAAO,CAACr5B,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpDq3F,UAAAA,MAAM,GAAGr/D,OAAO,CAAEh4B,CAAF,CAAhB;AACAiqE,UAAAA,KAAK,CAAC4nB,UAAN,CAAkB,IAAlB,EAAwB7xF,CAAxB,EAA2Bm3F,gBAA3B,EAA6CE,MAAM,CAAC1tF,KAApD,EAA2D0tF,MAAM,CAACztF,MAAlE,EAA0E,CAA1E,EAA6EorF,QAA7E,EAAuFC,MAAvF,EAA+FoC,MAAM,CAACloD,IAAtG;AAEA;;AAED1T,QAAAA,OAAO,CAACpD,eAAR,GAA0B,KAA1B;AACAs8D,QAAAA,iBAAiB,CAACC,aAAlB,GAAkC58D,OAAO,CAACr5B,MAAR,GAAiB,CAAnD;AAEA,OAZD,MAYO;AAENsrE,QAAAA,KAAK,CAAC4nB,UAAN,CAAkB,IAAlB,EAAwB,CAAxB,EAA2BsF,gBAA3B,EAA6CzgE,KAAK,CAAC/sB,KAAnD,EAA0D+sB,KAAK,CAAC9sB,MAAhE,EAAwE,CAAxE,EAA2EorF,QAA3E,EAAqFC,MAArF,EAA6Fv+D,KAAK,CAACyY,IAAnG;AACAwlD,QAAAA,iBAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA;AAED,KAzBM,MAyBA,IAAKn5D,OAAO,CAACu7D,mBAAb,EAAmC;AAEzC,WAAM,IAAIh3F,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGzZ,OAAO,CAACr5B,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpDq3F,QAAAA,MAAM,GAAGr/D,OAAO,CAAEh4B,CAAF,CAAhB;;AAEA,YAAKy7B,OAAO,CAAC7D,MAAR,KAAmBtT,UAAnB,IAAiCmX,OAAO,CAAC7D,MAAR,KAAmBvT,SAAzD,EAAqE;AAEpE,cAAK2wE,QAAQ,KAAK,IAAlB,EAAyB;AAExB/qB,YAAAA,KAAK,CAACspB,oBAAN,CAA4B,IAA5B,EAAkCvzF,CAAlC,EAAqCm3F,gBAArC,EAAuDE,MAAM,CAAC1tF,KAA9D,EAAqE0tF,MAAM,CAACztF,MAA5E,EAAoF,CAApF,EAAuFytF,MAAM,CAACloD,IAA9F;AAEA,WAJD,MAIO;AAEN1gB,YAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AAEA;AAED,SAZD,MAYO;AAENu7C,UAAAA,KAAK,CAAC4nB,UAAN,CAAkB,IAAlB,EAAwB7xF,CAAxB,EAA2Bm3F,gBAA3B,EAA6CE,MAAM,CAAC1tF,KAApD,EAA2D0tF,MAAM,CAACztF,MAAlE,EAA0E,CAA1E,EAA6EorF,QAA7E,EAAuFC,MAAvF,EAA+FoC,MAAM,CAACloD,IAAtG;AAEA;AAED;;AAEDwlD,MAAAA,iBAAiB,CAACC,aAAlB,GAAkC58D,OAAO,CAACr5B,MAAR,GAAiB,CAAnD;AAEA,KA5BM,MA4BA,IAAK88B,OAAO,CAAC45C,oBAAb,EAAoC;AAE1CpL,MAAAA,KAAK,CAACupB,UAAN,CAAkB,KAAlB,EAAyB,CAAzB,EAA4B2D,gBAA5B,EAA8CzgE,KAAK,CAAC/sB,KAApD,EAA2D+sB,KAAK,CAAC9sB,MAAjE,EAAyE8sB,KAAK,CAACo9B,KAA/E,EAAsF,CAAtF,EAAyFkhC,QAAzF,EAAmGC,MAAnG,EAA2Gv+D,KAAK,CAACyY,IAAjH;AACAwlD,MAAAA,iBAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA,KALM,MAKA,IAAKn5D,OAAO,CAAC85C,eAAb,EAA+B;AAErCtL,MAAAA,KAAK,CAACupB,UAAN,CAAkB,KAAlB,EAAyB,CAAzB,EAA4B2D,gBAA5B,EAA8CzgE,KAAK,CAAC/sB,KAApD,EAA2D+sB,KAAK,CAAC9sB,MAAjE,EAAyE8sB,KAAK,CAACo9B,KAA/E,EAAsF,CAAtF,EAAyFkhC,QAAzF,EAAmGC,MAAnG,EAA2Gv+D,KAAK,CAACyY,IAAjH;AACAwlD,MAAAA,iBAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA,KALM,MAKA;AAEN;AAEA;AACA;AACA;AAEA,UAAK58D,OAAO,CAACr5B,MAAR,GAAiB,CAAjB,IAAsB81F,YAA3B,EAA0C;AAEzC,aAAM,IAAIz0F,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGzZ,OAAO,CAACr5B,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpDq3F,UAAAA,MAAM,GAAGr/D,OAAO,CAAEh4B,CAAF,CAAhB;AACAiqE,UAAAA,KAAK,CAAC4nB,UAAN,CAAkB,IAAlB,EAAwB7xF,CAAxB,EAA2Bm3F,gBAA3B,EAA6CnC,QAA7C,EAAuDC,MAAvD,EAA+DoC,MAA/D;AAEA;;AAED57D,QAAAA,OAAO,CAACpD,eAAR,GAA0B,KAA1B;AACAs8D,QAAAA,iBAAiB,CAACC,aAAlB,GAAkC58D,OAAO,CAACr5B,MAAR,GAAiB,CAAnD;AAEA,OAZD,MAYO;AAENsrE,QAAAA,KAAK,CAAC4nB,UAAN,CAAkB,IAAlB,EAAwB,CAAxB,EAA2BsF,gBAA3B,EAA6CnC,QAA7C,EAAuDC,MAAvD,EAA+Dv+D,KAA/D;AACAi+D,QAAAA,iBAAiB,CAACC,aAAlB,GAAkC,CAAlC;AAEA;AAED;;AAED,QAAKJ,2BAA2B,CAAE/4D,OAAF,EAAWg5D,YAAX,CAAhC,EAA4D;AAE3DC,MAAAA,cAAc,CAAEgD,WAAF,EAAej8D,OAAf,EAAwB/E,KAAK,CAAC/sB,KAA9B,EAAqC+sB,KAAK,CAAC9sB,MAA3C,CAAd;AAEA;;AAED+qF,IAAAA,iBAAiB,CAAC8B,SAAlB,GAA8Bh7D,OAAO,CAAChD,OAAtC;AAEA,QAAKgD,OAAO,CAAC/C,QAAb,EAAwB+C,OAAO,CAAC/C,QAAR,CAAkB+C,OAAlB;AAExB,GAxzBsF,CA0zBvF;AAEA;;;AACA,WAASs8D,uBAAT,CAAkCC,WAAlC,EAA+C3/B,YAA/C,EAA6D4/B,UAA7D,EAAyEC,aAAzE,EAAyF;AAExF,UAAMlD,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAe7+B,YAAY,CAAC58B,OAAb,CAAqB7D,MAApC,CAAjB;AACA,UAAMq9D,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAe7+B,YAAY,CAAC58B,OAAb,CAAqBtxB,IAApC,CAAf;AACA,UAAMgtF,gBAAgB,GAAGrC,iBAAiB,CAAEz8B,YAAY,CAAC58B,OAAb,CAAqBvD,cAAvB,EAAuC88D,QAAvC,EAAiDC,MAAjD,CAA1C;AACAhrB,IAAAA,KAAK,CAAC4nB,UAAN,CAAkBqG,aAAlB,EAAiC,CAAjC,EAAoCf,gBAApC,EAAsD9+B,YAAY,CAAC1uD,KAAnE,EAA0E0uD,YAAY,CAACzuD,MAAvF,EAA+F,CAA/F,EAAkGorF,QAAlG,EAA4GC,MAA5G,EAAoH,IAApH;;AACAvB,IAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AACAtE,IAAAA,GAAG,CAAC0E,oBAAJ,CAA0B,KAA1B,EAAiCH,UAAjC,EAA6CC,aAA7C,EAA4Dh7B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAY,CAAC58B,OAA7B,EAAuCi6D,cAAnG,EAAmH,CAAnH;;AACAhC,IAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4B,IAA5B;AAEA,GAv0BsF,CAy0BvF;;;AACA,WAASE,wBAAT,CAAmCC,YAAnC,EAAiDjgC,YAAjD,EAA+DkgC,aAA/D,EAA+E;AAE9E7E,IAAAA,GAAG,CAAC8E,gBAAJ,CAAsB,KAAtB,EAA6BF,YAA7B;;AAEA,QAAKjgC,YAAY,CAAC38B,WAAb,IAA4B,CAAE28B,YAAY,CAAC18B,aAAhD,EAAgE;AAE/D,UAAIw7D,gBAAgB,GAAG,KAAvB;;AAEA,UAAKoB,aAAL,EAAqB;AAEpB,cAAM38D,YAAY,GAAGy8B,YAAY,CAACz8B,YAAlC;;AAEA,YAAKA,YAAY,IAAIA,YAAY,CAACk8D,cAAlC,EAAmD;AAElD,cAAKl8D,YAAY,CAACzxB,IAAb,KAAsB2Z,SAA3B,EAAuC;AAEtCqzE,YAAAA,gBAAgB,GAAG,KAAnB;AAEA,WAJD,MAIO,IAAKv7D,YAAY,CAACzxB,IAAb,KAAsB0Z,eAA3B,EAA6C;AAEnDszE,YAAAA,gBAAgB,GAAG,KAAnB;AAEA;AAED;;AAED,cAAMn7D,OAAO,GAAGy8D,sBAAsB,CAAEpgC,YAAF,CAAtC;;AAEAq7B,QAAAA,GAAG,CAACgF,8BAAJ,CAAoC,KAApC,EAA2C18D,OAA3C,EAAoDm7D,gBAApD,EAAsE9+B,YAAY,CAAC1uD,KAAnF,EAA0F0uD,YAAY,CAACzuD,MAAvG;AAEA,OAtBD,MAsBO;AAEN8pF,QAAAA,GAAG,CAACiF,mBAAJ,CAAyB,KAAzB,EAAgCxB,gBAAhC,EAAkD9+B,YAAY,CAAC1uD,KAA/D,EAAsE0uD,YAAY,CAACzuD,MAAnF;AAEA;;AAED8pF,MAAAA,GAAG,CAACkF,uBAAJ,CAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkDN,YAAlD;AAEA,KAlCD,MAkCO,IAAKjgC,YAAY,CAAC38B,WAAb,IAA4B28B,YAAY,CAAC18B,aAA9C,EAA8D;AAEpE,UAAK48D,aAAL,EAAqB;AAEpB,cAAMv8D,OAAO,GAAGy8D,sBAAsB,CAAEpgC,YAAF,CAAtC;;AAEAq7B,QAAAA,GAAG,CAACgF,8BAAJ,CAAoC,KAApC,EAA2C18D,OAA3C,EAAoD,KAApD,EAA2Dq8B,YAAY,CAAC1uD,KAAxE,EAA+E0uD,YAAY,CAACzuD,MAA5F;AAEA,OAND,MAMO;AAEN8pF,QAAAA,GAAG,CAACiF,mBAAJ,CAAyB,KAAzB,EAAgC,KAAhC,EAAuCtgC,YAAY,CAAC1uD,KAApD,EAA2D0uD,YAAY,CAACzuD,MAAxE;AAEA;;AAGD8pF,MAAAA,GAAG,CAACkF,uBAAJ,CAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkDN,YAAlD;AAEA,KAjBM,MAiBA;AAEN,YAAMtD,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAe7+B,YAAY,CAAC58B,OAAb,CAAqB7D,MAApC,CAAjB;AACA,YAAMq9D,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAe7+B,YAAY,CAAC58B,OAAb,CAAqBtxB,IAApC,CAAf;AACA,YAAMgtF,gBAAgB,GAAGrC,iBAAiB,CAAEz8B,YAAY,CAAC58B,OAAb,CAAqBvD,cAAvB,EAAuC88D,QAAvC,EAAiDC,MAAjD,CAA1C;;AAEA,UAAKsD,aAAL,EAAqB;AAEpB,cAAMv8D,OAAO,GAAGy8D,sBAAsB,CAAEpgC,YAAF,CAAtC;;AAEAq7B,QAAAA,GAAG,CAACgF,8BAAJ,CAAoC,KAApC,EAA2C18D,OAA3C,EAAoDm7D,gBAApD,EAAsE9+B,YAAY,CAAC1uD,KAAnF,EAA0F0uD,YAAY,CAACzuD,MAAvG;AAEA,OAND,MAMO;AAEN8pF,QAAAA,GAAG,CAACiF,mBAAJ,CAAyB,KAAzB,EAAgCxB,gBAAhC,EAAkD9+B,YAAY,CAAC1uD,KAA/D,EAAsE0uD,YAAY,CAACzuD,MAAnF;AAEA;AAED;;AAED8pF,IAAAA,GAAG,CAAC8E,gBAAJ,CAAsB,KAAtB,EAA6B,IAA7B;AAEA,GAv5BsF,CAy5BvF;;;AACA,WAASK,iBAAT,CAA4Bb,WAA5B,EAAyC3/B,YAAzC,EAAwD;AAEvD,UAAMygC,MAAM,GAAKzgC,YAAY,IAAIA,YAAY,CAACC,uBAA9C;AACA,QAAKwgC,MAAL,EAAc,MAAM,IAAIx1F,KAAJ,CAAW,yDAAX,CAAN;;AAEdowF,IAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AAEA,QAAK,EAAI3/B,YAAY,CAACz8B,YAAb,IAA6By8B,YAAY,CAACz8B,YAAb,CAA0Bk8D,cAA3D,CAAL,EAAmF;AAElF,YAAM,IAAIx0F,KAAJ,CAAW,qEAAX,CAAN;AAEA,KAXsD,CAavD;;;AACA,QAAK,CAAE45D,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAY,CAACz8B,YAA7B,EAA4C85D,cAA9C,IACHr9B,YAAY,CAACz8B,YAAb,CAA0BlF,KAA1B,CAAgC/sB,KAAhC,KAA0C0uD,YAAY,CAAC1uD,KADpD,IAEH0uD,YAAY,CAACz8B,YAAb,CAA0BlF,KAA1B,CAAgC9sB,MAAhC,KAA2CyuD,YAAY,CAACzuD,MAF1D,EAEmE;AAElEyuD,MAAAA,YAAY,CAACz8B,YAAb,CAA0BlF,KAA1B,CAAgC/sB,KAAhC,GAAwC0uD,YAAY,CAAC1uD,KAArD;AACA0uD,MAAAA,YAAY,CAACz8B,YAAb,CAA0BlF,KAA1B,CAAgC9sB,MAAhC,GAAyCyuD,YAAY,CAACzuD,MAAtD;AACAyuD,MAAAA,YAAY,CAACz8B,YAAb,CAA0BmuB,WAA1B,GAAwC,IAAxC;AAEA;;AAEDusC,IAAAA,YAAY,CAAEj+B,YAAY,CAACz8B,YAAf,EAA6B,CAA7B,CAAZ;;AAEA,UAAMm9D,iBAAiB,GAAG77B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAY,CAACz8B,YAA7B,EAA4C85D,cAAtE;;AAEA,QAAKr9B,YAAY,CAACz8B,YAAb,CAA0BhE,MAA1B,KAAqClT,WAA1C,EAAwD;AAEvDgvE,MAAAA,GAAG,CAAC0E,oBAAJ,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8CW,iBAA9C,EAAiE,CAAjE;AAEA,KAJD,MAIO,IAAK1gC,YAAY,CAACz8B,YAAb,CAA0BhE,MAA1B,KAAqCjT,kBAA1C,EAA+D;AAErE+uE,MAAAA,GAAG,CAAC0E,oBAAJ,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC,IAAxC,EAA8CW,iBAA9C,EAAiE,CAAjE;AAEA,KAJM,MAIA;AAEN,YAAM,IAAIz1F,KAAJ,CAAW,6BAAX,CAAN;AAEA;AAED,GAp8BsF,CAs8BvF;;;AACA,WAAS01F,sBAAT,CAAiC3gC,YAAjC,EAAgD;AAE/C,UAAMs9B,sBAAsB,GAAGz4B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,CAA/B;AAEA,UAAMygC,MAAM,GAAKzgC,YAAY,CAACC,uBAAb,KAAyC,IAA1D;;AAEA,QAAKD,YAAY,CAACz8B,YAAlB,EAAiC;AAEhC,UAAKk9D,MAAL,EAAc,MAAM,IAAIx1F,KAAJ,CAAW,0DAAX,CAAN;AAEdu1F,MAAAA,iBAAiB,CAAElD,sBAAsB,CAACE,kBAAzB,EAA6Cx9B,YAA7C,CAAjB;AAEA,KAND,MAMO;AAEN,UAAKygC,MAAL,EAAc;AAEbnD,QAAAA,sBAAsB,CAACG,kBAAvB,GAA4C,EAA5C;;AAEA,aAAM,IAAI91F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B0zF,UAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACE,kBAAvB,CAA2C71F,CAA3C,CAA5B;;AACA21F,UAAAA,sBAAsB,CAACG,kBAAvB,CAA2C91F,CAA3C,IAAiD0zF,GAAG,CAACuF,kBAAJ,EAAjD;AACAZ,UAAAA,wBAAwB,CAAE1C,sBAAsB,CAACG,kBAAvB,CAA2C91F,CAA3C,CAAF,EAAkDq4D,YAAlD,EAAgE,KAAhE,CAAxB;AAEA;AAED,OAZD,MAYO;AAENq7B,QAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACE,kBAAnD;;AACAF,QAAAA,sBAAsB,CAACG,kBAAvB,GAA4CpC,GAAG,CAACuF,kBAAJ,EAA5C;AACAZ,QAAAA,wBAAwB,CAAE1C,sBAAsB,CAACG,kBAAzB,EAA6Cz9B,YAA7C,EAA2D,KAA3D,CAAxB;AAEA;AAED;;AAEDq7B,IAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4B,IAA5B;AAEA,GA7+BsF,CA++BvF;;;AACA,WAASe,iBAAT,CAA4B7gC,YAA5B,EAA2C;AAE1C,UAAMs9B,sBAAsB,GAAGz4B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,CAA/B;AACA,UAAMs8B,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAY,CAAC58B,OAA7B,CAA1B;AAEA48B,IAAAA,YAAY,CAACzvD,gBAAb,CAA+B,SAA/B,EAA0C0sF,qBAA1C;AAEAX,IAAAA,iBAAiB,CAACe,cAAlB,GAAmChC,GAAG,CAAChC,aAAJ,EAAnC;AAEAjiB,IAAAA,IAAI,CAAC2D,MAAL,CAAYn6C,QAAZ;AAEA,UAAM6/D,MAAM,GAAKzgC,YAAY,CAACC,uBAAb,KAAyC,IAA1D;AACA,UAAMigC,aAAa,GAAKlgC,YAAY,CAACp8B,8BAAb,KAAgD,IAAxE;AACA,UAAMw4D,YAAY,GAAGlnE,YAAY,CAAE8qC,YAAF,CAAZ,IAAgCoH,QAArD,CAb0C,CAe1C;;AAEA,QAAKA,QAAQ,IAAIpH,YAAY,CAAC58B,OAAb,CAAqB7D,MAArB,KAAgCvT,SAA5C,KAA2Dg0C,YAAY,CAAC58B,OAAb,CAAqBtxB,IAArB,KAA8B2Z,SAA9B,IAA2Cu0C,YAAY,CAAC58B,OAAb,CAAqBtxB,IAArB,KAA8B4Z,aAApI,CAAL,EAA2J;AAE1Js0C,MAAAA,YAAY,CAAC58B,OAAb,CAAqB7D,MAArB,GAA8BtT,UAA9B;AAEAmK,MAAAA,OAAO,CAACC,IAAR,CAAc,yGAAd;AAEA,KAvByC,CAyB1C;;;AAEA,QAAKoqE,MAAL,EAAc;AAEbnD,MAAAA,sBAAsB,CAACE,kBAAvB,GAA4C,EAA5C;;AAEA,WAAM,IAAI71F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B21F,QAAAA,sBAAsB,CAACE,kBAAvB,CAA2C71F,CAA3C,IAAiD0zF,GAAG,CAACyF,iBAAJ,EAAjD;AAEA;AAED,KAVD,MAUO;AAENxD,MAAAA,sBAAsB,CAACE,kBAAvB,GAA4CnC,GAAG,CAACyF,iBAAJ,EAA5C;;AAEA,UAAKZ,aAAL,EAAqB;AAEpB,YAAK94B,QAAL,EAAgB;AAEfk2B,UAAAA,sBAAsB,CAACK,8BAAvB,GAAwDtC,GAAG,CAACyF,iBAAJ,EAAxD;AACAxD,UAAAA,sBAAsB,CAACM,wBAAvB,GAAkDvC,GAAG,CAACuF,kBAAJ,EAAlD;;AAEAvF,UAAAA,GAAG,CAAC8E,gBAAJ,CAAsB,KAAtB,EAA6B7C,sBAAsB,CAACM,wBAApD;;AAEA,gBAAMjB,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAe7+B,YAAY,CAAC58B,OAAb,CAAqB7D,MAApC,CAAjB;AACA,gBAAMq9D,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAe7+B,YAAY,CAAC58B,OAAb,CAAqBtxB,IAApC,CAAf;AACA,gBAAMgtF,gBAAgB,GAAGrC,iBAAiB,CAAEz8B,YAAY,CAAC58B,OAAb,CAAqBvD,cAAvB,EAAuC88D,QAAvC,EAAiDC,MAAjD,CAA1C;AACA,gBAAMj5D,OAAO,GAAGy8D,sBAAsB,CAAEpgC,YAAF,CAAtC;;AACAq7B,UAAAA,GAAG,CAACgF,8BAAJ,CAAoC,KAApC,EAA2C18D,OAA3C,EAAoDm7D,gBAApD,EAAsE9+B,YAAY,CAAC1uD,KAAnF,EAA0F0uD,YAAY,CAACzuD,MAAvG;;AAEA8pF,UAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACK,8BAAnD;;AACAtC,UAAAA,GAAG,CAACkF,uBAAJ,CAA6B,KAA7B,EAAoC,KAApC,EAA2C,KAA3C,EAAkDjD,sBAAsB,CAACM,wBAAzE;;AACAvC,UAAAA,GAAG,CAAC8E,gBAAJ,CAAsB,KAAtB,EAA6B,IAA7B;;AAEA,cAAKngC,YAAY,CAAC38B,WAAlB,EAAgC;AAE/Bi6D,YAAAA,sBAAsB,CAACO,wBAAvB,GAAkDxC,GAAG,CAACuF,kBAAJ,EAAlD;AACAZ,YAAAA,wBAAwB,CAAE1C,sBAAsB,CAACO,wBAAzB,EAAmD79B,YAAnD,EAAiE,IAAjE,CAAxB;AAEA;;AAEDq7B,UAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4B,IAA5B;AAGA,SA3BD,MA2BO;AAEN1pE,UAAAA,OAAO,CAACC,IAAR,CAAc,iFAAd;AAEA;AAED;AAED,KA9EyC,CAgF1C;;;AAEA,QAAKoqE,MAAL,EAAc;AAEb7uB,MAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0BgD,iBAAiB,CAACe,cAA5C;AACA0B,MAAAA,oBAAoB,CAAE,KAAF,EAAS/+B,YAAY,CAAC58B,OAAtB,EAA+Bg5D,YAA/B,CAApB;;AAEA,WAAM,IAAIz0F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B+3F,QAAAA,uBAAuB,CAAEpC,sBAAsB,CAACE,kBAAvB,CAA2C71F,CAA3C,CAAF,EAAkDq4D,YAAlD,EAAgE,KAAhE,EAAuE,QAAQr4D,CAA/E,CAAvB;AAEA;;AAED,UAAKw0F,2BAA2B,CAAEn8B,YAAY,CAAC58B,OAAf,EAAwBg5D,YAAxB,CAAhC,EAAyE;AAExEC,QAAAA,cAAc,CAAE,KAAF,EAASr8B,YAAY,CAAC58B,OAAtB,EAA+B48B,YAAY,CAAC1uD,KAA5C,EAAmD0uD,YAAY,CAACzuD,MAAhE,CAAd;AAEA;;AAEDqgE,MAAAA,KAAK,CAAC0nB,WAAN,CAAmB,KAAnB,EAA0B,IAA1B;AAEA,KAnBD,MAmBO;AAEN1nB,MAAAA,KAAK,CAAC0nB,WAAN,CAAmB,IAAnB,EAAyBgD,iBAAiB,CAACe,cAA3C;AACA0B,MAAAA,oBAAoB,CAAE,IAAF,EAAQ/+B,YAAY,CAAC58B,OAArB,EAA8Bg5D,YAA9B,CAApB;AACAsD,MAAAA,uBAAuB,CAAEpC,sBAAsB,CAACE,kBAAzB,EAA6Cx9B,YAA7C,EAA2D,KAA3D,EAAkE,IAAlE,CAAvB;;AAEA,UAAKm8B,2BAA2B,CAAEn8B,YAAY,CAAC58B,OAAf,EAAwBg5D,YAAxB,CAAhC,EAAyE;AAExEC,QAAAA,cAAc,CAAE,IAAF,EAAQr8B,YAAY,CAAC58B,OAArB,EAA8B48B,YAAY,CAAC1uD,KAA3C,EAAkD0uD,YAAY,CAACzuD,MAA/D,CAAd;AAEA;;AAEDqgE,MAAAA,KAAK,CAAC0nB,WAAN,CAAmB,IAAnB,EAAyB,IAAzB;AAEA,KAnHyC,CAqH1C;;;AAEA,QAAKt5B,YAAY,CAAC38B,WAAlB,EAAgC;AAE/Bs9D,MAAAA,sBAAsB,CAAE3gC,YAAF,CAAtB;AAEA;AAED;;AAED,WAAS+gC,wBAAT,CAAmC/gC,YAAnC,EAAkD;AAEjD,UAAM58B,OAAO,GAAG48B,YAAY,CAAC58B,OAA7B;AACA,UAAMg5D,YAAY,GAAGlnE,YAAY,CAAE8qC,YAAF,CAAZ,IAAgCoH,QAArD;;AAEA,QAAK+0B,2BAA2B,CAAE/4D,OAAF,EAAWg5D,YAAX,CAAhC,EAA4D;AAE3D,YAAMt1F,MAAM,GAAGk5D,YAAY,CAACC,uBAAb,GAAuC,KAAvC,GAA+C,IAA9D;;AACA,YAAM86B,YAAY,GAAGl2B,UAAU,CAACt/C,GAAX,CAAgB6d,OAAhB,EAA0Bi6D,cAA/C;;AAEAzrB,MAAAA,KAAK,CAAC0nB,WAAN,CAAmBxyF,MAAnB,EAA2Bi0F,YAA3B;AACAsB,MAAAA,cAAc,CAAEv1F,MAAF,EAAUs8B,OAAV,EAAmB48B,YAAY,CAAC1uD,KAAhC,EAAuC0uD,YAAY,CAACzuD,MAApD,CAAd;AACAqgE,MAAAA,KAAK,CAAC0nB,WAAN,CAAmBxyF,MAAnB,EAA2B,IAA3B;AAEA;AAED;;AAED,WAASk6F,6BAAT,CAAwChhC,YAAxC,EAAuD;AAEtD,QAAKA,YAAY,CAACp8B,8BAAlB,EAAmD;AAElD,UAAKwjC,QAAL,EAAgB;AAEf,cAAMk2B,sBAAsB,GAAGz4B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,CAA/B;;AAEAq7B,QAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACK,8BAAnD;;AACAtC,QAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACE,kBAAnD;;AAEA,cAAMlsF,KAAK,GAAG0uD,YAAY,CAAC1uD,KAA3B;AACA,cAAMC,MAAM,GAAGyuD,YAAY,CAACzuD,MAA5B;AACA,YAAIq/B,IAAI,GAAG,KAAX;AAEA,YAAKovB,YAAY,CAAC38B,WAAlB,EAAgCuN,IAAI,IAAI,GAAR;AAChC,YAAKovB,YAAY,CAAC18B,aAAlB,EAAkCsN,IAAI,IAAI,IAAR;;AAElCyqD,QAAAA,GAAG,CAAC4F,eAAJ,CAAqB,CAArB,EAAwB,CAAxB,EAA2B3vF,KAA3B,EAAkCC,MAAlC,EAA0C,CAA1C,EAA6C,CAA7C,EAAgDD,KAAhD,EAAuDC,MAAvD,EAA+Dq/B,IAA/D,EAAqE,IAArE;;AAEAyqD,QAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BxC,sBAAsB,CAACK,8BAAnD,EAhBe,CAgBsE;;AAErF,OAlBD,MAkBO;AAENvnE,QAAAA,OAAO,CAACC,IAAR,CAAc,iFAAd;AAEA;AAED;AAED;;AAED,WAAS+pE,sBAAT,CAAiCpgC,YAAjC,EAAgD;AAE/C,WAASoH,QAAQ,IAAIpH,YAAY,CAACp8B,8BAA3B,GACNj+B,IAAI,CAAC8E,GAAL,CAAUuuE,UAAV,EAAsBhZ,YAAY,CAACr8B,OAAnC,CADM,GACyC,CADhD;AAGA;;AAED,WAASw6D,kBAAT,CAA6B/6D,OAA7B,EAAuC;AAEtC,UAAMwjC,KAAK,GAAGwQ,IAAI,CAACrW,MAAL,CAAY6F,KAA1B,CAFsC,CAItC;;AAEA,QAAK20B,cAAc,CAACh2E,GAAf,CAAoB6d,OAApB,MAAkCwjC,KAAvC,EAA+C;AAE9C20B,MAAAA,cAAc,CAACplE,GAAf,CAAoBiN,OAApB,EAA6BwjC,KAA7B;;AACAxjC,MAAAA,OAAO,CAAC0C,MAAR;AAEA;AAED,GArrCsF,CAurCvF;;;AAEA,MAAIo7D,eAAe,GAAG,KAAtB;AACA,MAAIC,iBAAiB,GAAG,KAAxB;;AAEA,WAAS3hB,gBAAT,CAA2Bp8C,OAA3B,EAAoC86D,IAApC,EAA2C;AAE1C,QAAK96D,OAAO,IAAIA,OAAO,CAACI,mBAAxB,EAA8C;AAE7C,UAAK09D,eAAe,KAAK,KAAzB,EAAiC;AAEhC9qE,QAAAA,OAAO,CAACC,IAAR,CAAc,kHAAd;AACA6qE,QAAAA,eAAe,GAAG,IAAlB;AAEA;;AAED99D,MAAAA,OAAO,GAAGA,OAAO,CAACA,OAAlB;AAEA;;AAED66D,IAAAA,YAAY,CAAE76D,OAAF,EAAW86D,IAAX,CAAZ;AAEA;;AAED,WAASpe,kBAAT,CAA6B18C,OAA7B,EAAsC86D,IAAtC,EAA6C;AAE5C,QAAK96D,OAAO,IAAIA,OAAO,CAAC68B,uBAAxB,EAAkD;AAEjD,UAAKkhC,iBAAiB,KAAK,KAA3B,EAAmC;AAElC/qE,QAAAA,OAAO,CAACC,IAAR,CAAc,yHAAd;AACA8qE,QAAAA,iBAAiB,GAAG,IAApB;AAEA;;AAED/9D,MAAAA,OAAO,GAAGA,OAAO,CAACA,OAAlB;AAEA,KAb2C,CAe5C;AACA;;;AACA,QAAOA,OAAO,IAAIA,OAAO,CAAC2vC,aAArB,IACFvsE,KAAK,CAACoC,OAAN,CAAew6B,OAAO,CAAC/E,KAAvB,KAAkC+E,OAAO,CAAC/E,KAAR,CAAc/3B,MAAd,KAAyB,CAD9D,EACoE;AAEnE;AAEA;AACAi4F,MAAAA,cAAc,CAAEn7D,OAAF,EAAW86D,IAAX,CAAd;AAEA,KARD,MAQO;AAEN;AACAgB,MAAAA,qBAAqB,CAAE97D,OAAF,EAAW86D,IAAX,CAArB;AAEA;AAED,GA/uCsF,CAivCvF;;;AAEA,OAAKhgB,mBAAL,GAA2BA,mBAA3B;AACA,OAAK6f,iBAAL,GAAyBA,iBAAzB;AAEA,OAAKE,YAAL,GAAoBA,YAApB;AACA,OAAKve,iBAAL,GAAyBA,iBAAzB;AACA,OAAKE,YAAL,GAAoBA,YAApB;AACA,OAAK2e,cAAL,GAAsBA,cAAtB;AACA,OAAKW,qBAAL,GAA6BA,qBAA7B;AACA,OAAK2B,iBAAL,GAAyBA,iBAAzB;AACA,OAAKE,wBAAL,GAAgCA,wBAAhC;AACA,OAAKC,6BAAL,GAAqCA,6BAArC;AAEA,OAAKxhB,gBAAL,GAAwBA,gBAAxB;AACA,OAAKM,kBAAL,GAA0BA,kBAA1B;AAEA;AAED;;;;;AAIA,SAASshB,UAAT,CAAqBl6B,EAArB,EAAyBvJ,UAAzB,EAAqCwJ,YAArC,EAAoD;AAEnD,QAAMC,QAAQ,GAAGD,YAAY,CAACC,QAA9B;;AAEA,WAASy3B,OAAT,CAAkBx0F,CAAlB,EAAsB;AAErB,QAAImpE,SAAJ;AAEA,QAAKnpE,CAAC,KAAK8gB,gBAAX,EAA8B,OAAO,IAAP;AAC9B,QAAK9gB,CAAC,KAAKshB,qBAAX,EAAmC,OAAO,KAAP;AACnC,QAAKthB,CAAC,KAAKuhB,qBAAX,EAAmC,OAAO,KAAP;AACnC,QAAKvhB,CAAC,KAAKwhB,oBAAX,EAAkC,OAAO,KAAP;AAElC,QAAKxhB,CAAC,KAAK+gB,QAAX,EAAsB,OAAO,IAAP;AACtB,QAAK/gB,CAAC,KAAKghB,SAAX,EAAuB,OAAO,IAAP;AACvB,QAAKhhB,CAAC,KAAKihB,iBAAX,EAA+B,OAAO,IAAP;AAC/B,QAAKjhB,CAAC,KAAKkhB,OAAX,EAAqB,OAAO,IAAP;AACrB,QAAKlhB,CAAC,KAAKmhB,eAAX,EAA6B,OAAO,IAAP;AAC7B,QAAKnhB,CAAC,KAAKohB,SAAX,EAAuB,OAAO,IAAP;;AAEvB,QAAKphB,CAAC,KAAKqhB,aAAX,EAA2B;AAE1B,UAAK07C,QAAL,EAAgB,OAAO,IAAP;AAEhBoM,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,eAAOA,SAAS,CAAC6tB,cAAjB;AAEA,OAJD,MAIO;AAEN,eAAO,IAAP;AAEA;AAED;;AAED,QAAKh3F,CAAC,KAAK0hB,WAAX,EAAyB,OAAO,IAAP;AACzB,QAAK1hB,CAAC,KAAK2hB,SAAX,EAAuB,OAAO,IAAP;AACvB,QAAK3hB,CAAC,KAAK4hB,UAAX,EAAwB,OAAO,IAAP;AACxB,QAAK5hB,CAAC,KAAK6hB,eAAX,EAA6B,OAAO,IAAP;AAC7B,QAAK7hB,CAAC,KAAK8hB,oBAAX,EAAkC,OAAO,IAAP;AAClC,QAAK9hB,CAAC,KAAKgiB,WAAX,EAAyB,OAAO,IAAP;AACzB,QAAKhiB,CAAC,KAAKiiB,kBAAX,EAAgC,OAAO,KAAP;AAChC,QAAKjiB,CAAC,KAAKkiB,SAAX,EAAuB,OAAO,IAAP,CAzCF,CA2CrB;;AAEA,QAAKliB,CAAC,KAAKmiB,gBAAX,EAA8B,OAAO,KAAP;AAC9B,QAAKniB,CAAC,KAAKoiB,QAAX,EAAsB,OAAO,KAAP;AACtB,QAAKpiB,CAAC,KAAKqiB,eAAX,EAA6B,OAAO,KAAP;AAC7B,QAAKriB,CAAC,KAAKsiB,gBAAX,EAA8B,OAAO,KAAP;AAC9B,QAAKtiB,CAAC,KAAKuiB,iBAAX,EAA+B,OAAO,KAAP;;AAE/B,QAAKviB,CAAC,KAAKwiB,oBAAN,IAA8BxiB,CAAC,KAAKyiB,qBAApC,IACJziB,CAAC,KAAK0iB,qBADF,IAC2B1iB,CAAC,KAAK2iB,qBADtC,EAC8D;AAE7DwmD,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,+BAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,YAAKnpE,CAAC,KAAKwiB,oBAAX,EAAkC,OAAO2mD,SAAS,CAAC8tB,4BAAjB;AAClC,YAAKj3F,CAAC,KAAKyiB,qBAAX,EAAmC,OAAO0mD,SAAS,CAAC+tB,6BAAjB;AACnC,YAAKl3F,CAAC,KAAK0iB,qBAAX,EAAmC,OAAOymD,SAAS,CAACguB,6BAAjB;AACnC,YAAKn3F,CAAC,KAAK2iB,qBAAX,EAAmC,OAAOwmD,SAAS,CAACiuB,6BAAjB;AAEnC,OAPD,MAOO;AAEN,eAAO,IAAP;AAEA;AAED;;AAED,QAAKp3F,CAAC,KAAK4iB,uBAAN,IAAiC5iB,CAAC,KAAK6iB,uBAAvC,IACJ7iB,CAAC,KAAK8iB,wBADF,IAC8B9iB,CAAC,KAAK+iB,wBADzC,EACoE;AAEnEomD,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,gCAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,YAAKnpE,CAAC,KAAK4iB,uBAAX,EAAqC,OAAOumD,SAAS,CAACkuB,+BAAjB;AACrC,YAAKr3F,CAAC,KAAK6iB,uBAAX,EAAqC,OAAOsmD,SAAS,CAACmuB,+BAAjB;AACrC,YAAKt3F,CAAC,KAAK8iB,wBAAX,EAAsC,OAAOqmD,SAAS,CAACouB,gCAAjB;AACtC,YAAKv3F,CAAC,KAAK+iB,wBAAX,EAAsC,OAAOomD,SAAS,CAACquB,gCAAjB;AAEtC,OAPD,MAOO;AAEN,eAAO,IAAP;AAEA;AAED;;AAED,QAAKx3F,CAAC,KAAKgjB,eAAX,EAA6B;AAE5BmmD,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,+BAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,eAAOA,SAAS,CAACsuB,yBAAjB;AAEA,OAJD,MAIO;AAEN,eAAO,IAAP;AAEA;AAED;;AAED,QAAKz3F,CAAC,KAAKijB,eAAN,IAAyBjjB,CAAC,KAAKkjB,oBAApC,EAA2D;AAE1DimD,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,8BAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,YAAKnpE,CAAC,KAAKijB,eAAX,EAA6B,OAAOkmD,SAAS,CAACuuB,oBAAjB;AAC7B,YAAK13F,CAAC,KAAKkjB,oBAAX,EAAkC,OAAOimD,SAAS,CAACwuB,yBAAjB;AAElC;AAED;;AAED,QAAK33F,CAAC,KAAKmjB,oBAAN,IAA8BnjB,CAAC,KAAKojB,oBAApC,IAA4DpjB,CAAC,KAAKqjB,oBAAlE,IACJrjB,CAAC,KAAKsjB,oBADF,IAC0BtjB,CAAC,KAAKujB,oBADhC,IACwDvjB,CAAC,KAAKwjB,oBAD9D,IAEJxjB,CAAC,KAAKyjB,oBAFF,IAE0BzjB,CAAC,KAAK0jB,oBAFhC,IAEwD1jB,CAAC,KAAK2jB,qBAF9D,IAGJ3jB,CAAC,KAAK4jB,qBAHF,IAG2B5jB,CAAC,KAAK6jB,qBAHjC,IAG0D7jB,CAAC,KAAK8jB,sBAHhE,IAIJ9jB,CAAC,KAAK+jB,sBAJF,IAI4B/jB,CAAC,KAAKgkB,sBAJlC,IAKJhkB,CAAC,KAAKkkB,4BALF,IAKkClkB,CAAC,KAAKmkB,4BALxC,IAKwEnkB,CAAC,KAAKokB,4BAL9E,IAMJpkB,CAAC,KAAKqkB,4BANF,IAMkCrkB,CAAC,KAAKskB,4BANxC,IAMwEtkB,CAAC,KAAKukB,4BAN9E,IAOJvkB,CAAC,KAAKwkB,4BAPF,IAOkCxkB,CAAC,KAAKykB,4BAPxC,IAOwEzkB,CAAC,KAAK0kB,6BAP9E,IAQJ1kB,CAAC,KAAK2kB,6BARF,IAQmC3kB,CAAC,KAAK4kB,6BARzC,IAQ0E5kB,CAAC,KAAK6kB,8BARhF,IASJ7kB,CAAC,KAAK8kB,8BATF,IASoC9kB,CAAC,KAAK+kB,8BAT/C,EASgF;AAE/EokD,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,+BAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA,eAAOnpE,CAAP;AAEA,OAND,MAMO;AAEN,eAAO,IAAP;AAEA;AAED;;AAED,QAAKA,CAAC,KAAKikB,gBAAX,EAA8B;AAE7BklD,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,8BAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA,eAAOnpE,CAAP;AAEA,OAND,MAMO;AAEN,eAAO,IAAP;AAEA;AAED;;AAED,QAAKA,CAAC,KAAKyhB,kBAAX,EAAgC;AAE/B,UAAKs7C,QAAL,EAAgB,OAAO,KAAP;AAEhBoM,MAAAA,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,qBAAhB,CAAZ;;AAEA,UAAKiuD,SAAS,KAAK,IAAnB,EAA0B;AAEzB,eAAOA,SAAS,CAACyuB,uBAAjB;AAEA,OAJD,MAIO;AAEN,eAAO,IAAP;AAEA;AAED;AAED;;AAED,SAAO;AAAEpD,IAAAA,OAAO,EAAEA;AAAX,GAAP;AAEA;AAED;;;;;AAIA,SAASqD,WAAT,CAAsBpvE,KAAtB,EAA8B;AAE7BwrC,EAAAA,iBAAiB,CAACt3D,IAAlB,CAAwB,IAAxB;AAEA,OAAK8nF,OAAL,GAAeh8D,KAAK,IAAI,EAAxB;AAEA;;AAEDovE,WAAW,CAACz7F,SAAZ,GAAwBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeg+B,iBAAiB,CAAC73D,SAAjC,CAAf,EAA6D;AAEpFoC,EAAAA,WAAW,EAAEq5F,WAFuE;AAIpFC,EAAAA,aAAa,EAAE;AAJqE,CAA7D,CAAxB;AAQA;;;;AAIA,SAASC,KAAT,GAAiB;AAEhBnwD,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,OAAZ;AAEA;;AAEDswF,KAAK,CAAC37F,SAAN,GAAkBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAErEoC,EAAAA,WAAW,EAAEu5F,KAFwD;AAIrEC,EAAAA,OAAO,EAAE;AAJ4D,CAApD,CAAlB;AAQA;;;;AAIA,SAASC,eAAT,GAA2B;AAE1B,OAAKC,UAAL,GAAkB,IAAlB;AACA,OAAKC,KAAL,GAAa,IAAb;AAEA;;AAEDn7F,MAAM,CAACme,MAAP,CAAe88E,eAAe,CAAC77F,SAA/B,EAA0C;AAEzCoC,EAAAA,WAAW,EAAEy5F,eAF4B;AAIzCG,EAAAA,iBAAiB,EAAE,YAAY;AAE9B,QAAK,KAAKF,UAAL,KAAoB,IAAzB,EAAgC;AAE/B,WAAKA,UAAL,GAAkB,IAAIH,KAAJ,EAAlB;AACA,WAAKG,UAAL,CAAgBxiE,gBAAhB,GAAmC,KAAnC;AACA,WAAKwiE,UAAL,CAAgB3vD,OAAhB,GAA0B,KAA1B;AAEA;;AAED,WAAO,KAAK2vD,UAAZ;AAEA,GAhBwC;AAkBzCG,EAAAA,YAAY,EAAE,YAAY;AAEzB,QAAK,KAAKF,KAAL,KAAe,IAApB,EAA2B;AAE1B,WAAKA,KAAL,GAAa,IAAIJ,KAAJ,EAAb;AACA,WAAKI,KAAL,CAAWziE,gBAAX,GAA8B,KAA9B;AACA,WAAKyiE,KAAL,CAAW5vD,OAAX,GAAqB,KAArB;AAEA;;AAED,WAAO,KAAK4vD,KAAZ;AAEA,GA9BwC;AAgCzCryF,EAAAA,aAAa,EAAE,UAAWC,KAAX,EAAmB;AAEjC,QAAK,KAAKmyF,UAAL,KAAoB,IAAzB,EAAgC;AAE/B,WAAKA,UAAL,CAAgBpyF,aAAhB,CAA+BC,KAA/B;AAEA;;AAED,QAAK,KAAKoyF,KAAL,KAAe,IAApB,EAA2B;AAE1B,WAAKA,KAAL,CAAWryF,aAAX,CAA0BC,KAA1B;AAEA;;AAED,WAAO,IAAP;AAEA,GAhDwC;AAkDzCuyF,EAAAA,UAAU,EAAE,UAAWC,WAAX,EAAyB;AAEpC,SAAKzyF,aAAL,CAAoB;AAAE2B,MAAAA,IAAI,EAAE,cAAR;AAAwBglC,MAAAA,IAAI,EAAE8rD;AAA9B,KAApB;;AAEA,QAAK,KAAKL,UAAL,KAAoB,IAAzB,EAAgC;AAE/B,WAAKA,UAAL,CAAgB3vD,OAAhB,GAA0B,KAA1B;AAEA;;AAED,QAAK,KAAK4vD,KAAL,KAAe,IAApB,EAA2B;AAE1B,WAAKA,KAAL,CAAW5vD,OAAX,GAAqB,KAArB;AAEA;;AAED,WAAO,IAAP;AAEA,GApEwC;AAsEzC9M,EAAAA,MAAM,EAAE,UAAW88D,WAAX,EAAwBh8B,KAAxB,EAA+Bi8B,cAA/B,EAAgD;AAEvD,QAAIC,SAAS,GAAG,IAAhB;AACA,QAAIC,QAAQ,GAAG,IAAf;AAEA,UAAMC,SAAS,GAAG,KAAKT,UAAvB;AACA,UAAMU,IAAI,GAAG,KAAKT,KAAlB;;AAEA,QAAKI,WAAL,EAAmB;AAElB,UAAKI,SAAS,KAAK,IAAnB,EAA0B;AAEzBF,QAAAA,SAAS,GAAGl8B,KAAK,CAACs8B,OAAN,CAAeN,WAAW,CAACO,cAA3B,EAA2CN,cAA3C,CAAZ;;AAEA,YAAKC,SAAS,KAAK,IAAnB,EAA0B;AAEzBE,UAAAA,SAAS,CAACtmE,MAAV,CAAiBrD,SAAjB,CAA4BypE,SAAS,CAACM,SAAV,CAAoB1mE,MAAhD;AACAsmE,UAAAA,SAAS,CAACtmE,MAAV,CAAiB4S,SAAjB,CAA4B0zD,SAAS,CAAC70F,QAAtC,EAAgD60F,SAAS,CAACrlE,QAA1D,EAAoEqlE,SAAS,CAACllE,KAA9E;AAEA;AAED;;AAED,UAAKmlE,IAAI,KAAK,IAAT,IAAiBL,WAAW,CAACS,SAAlC,EAA8C;AAE7CN,QAAAA,QAAQ,GAAGn8B,KAAK,CAACs8B,OAAN,CAAeN,WAAW,CAACS,SAA3B,EAAsCR,cAAtC,CAAX;;AAEA,YAAKE,QAAQ,KAAK,IAAlB,EAAyB;AAExBE,UAAAA,IAAI,CAACvmE,MAAL,CAAYrD,SAAZ,CAAuB0pE,QAAQ,CAACK,SAAT,CAAmB1mE,MAA1C;AACAumE,UAAAA,IAAI,CAACvmE,MAAL,CAAY4S,SAAZ,CAAuB2zD,IAAI,CAAC90F,QAA5B,EAAsC80F,IAAI,CAACtlE,QAA3C,EAAqDslE,IAAI,CAACnlE,KAA1D;AAEA;AAED;AAED;;AAED,QAAKklE,SAAS,KAAK,IAAnB,EAA0B;AAEzBA,MAAAA,SAAS,CAACpwD,OAAV,GAAsBkwD,SAAS,KAAK,IAApC;AAEA;;AAED,QAAKG,IAAI,KAAK,IAAd,EAAqB;AAEpBA,MAAAA,IAAI,CAACrwD,OAAL,GAAiBmwD,QAAQ,KAAK,IAA9B;AAEA;;AAED,WAAO,IAAP;AAEA;AA1HwC,CAA1C;AA8HA;;;;AAIA,SAASO,YAAT,CAAuB9iC,QAAvB,EAAiC0G,EAAjC,EAAsC;AAErC,QAAMp/D,KAAK,GAAG,IAAd;AAEA,MAAIyqE,OAAO,GAAG,IAAd;AAEA,MAAIgxB,sBAAsB,GAAG,GAA7B;AAEA,MAAIV,cAAc,GAAG,IAArB;AACA,MAAIW,kBAAkB,GAAG,aAAzB;AAEA,MAAIC,IAAI,GAAG,IAAX;AAEA,QAAM1+E,WAAW,GAAG,EAApB;AACA,QAAM2+E,eAAe,GAAG,IAAIC,GAAJ,EAAxB,CAdqC,CAgBrC;;AAEA,QAAMC,OAAO,GAAG,IAAItlC,iBAAJ,EAAhB;AACAslC,EAAAA,OAAO,CAACzyD,MAAR,CAAeL,MAAf,CAAuB,CAAvB;AACA8yD,EAAAA,OAAO,CAACzgE,QAAR,GAAmB,IAAI/B,OAAJ,EAAnB;AAEA,QAAMyiE,OAAO,GAAG,IAAIvlC,iBAAJ,EAAhB;AACAulC,EAAAA,OAAO,CAAC1yD,MAAR,CAAeL,MAAf,CAAuB,CAAvB;AACA+yD,EAAAA,OAAO,CAAC1gE,QAAR,GAAmB,IAAI/B,OAAJ,EAAnB;AAEA,QAAM0tD,OAAO,GAAG,CAAE8U,OAAF,EAAWC,OAAX,CAAhB;AAEA,QAAMC,QAAQ,GAAG,IAAI5B,WAAJ,EAAjB;AACA4B,EAAAA,QAAQ,CAAC3yD,MAAT,CAAgBL,MAAhB,CAAwB,CAAxB;AACAgzD,EAAAA,QAAQ,CAAC3yD,MAAT,CAAgBL,MAAhB,CAAwB,CAAxB;AAEA,MAAIizD,iBAAiB,GAAG,IAAxB;AACA,MAAIC,gBAAgB,GAAG,IAAvB,CAjCqC,CAmCrC;;AAEA,OAAK5oC,OAAL,GAAe,KAAf;AAEA,OAAK6oC,YAAL,GAAoB,KAApB;;AAEA,OAAKC,aAAL,GAAqB,UAAWhzF,KAAX,EAAmB;AAEvC,QAAIqO,UAAU,GAAGwF,WAAW,CAAE7T,KAAF,CAA5B;;AAEA,QAAKqO,UAAU,KAAK7W,SAApB,EAAgC;AAE/B6W,MAAAA,UAAU,GAAG,IAAI+iF,eAAJ,EAAb;AACAv9E,MAAAA,WAAW,CAAE7T,KAAF,CAAX,GAAuBqO,UAAvB;AAEA;;AAED,WAAOA,UAAU,CAACkjF,iBAAX,EAAP;AAEA,GAbD;;AAeA,OAAK0B,iBAAL,GAAyB,UAAWjzF,KAAX,EAAmB;AAE3C,QAAIqO,UAAU,GAAGwF,WAAW,CAAE7T,KAAF,CAA5B;;AAEA,QAAKqO,UAAU,KAAK7W,SAApB,EAAgC;AAE/B6W,MAAAA,UAAU,GAAG,IAAI+iF,eAAJ,EAAb;AACAv9E,MAAAA,WAAW,CAAE7T,KAAF,CAAX,GAAuBqO,UAAvB;AAEA;;AAED,WAAOA,UAAU,CAACmjF,YAAX,EAAP;AAEA,GAbD,CAxDqC,CAuErC;;;AAEA,WAAS0B,cAAT,CAAyBh0F,KAAzB,EAAiC;AAEhC,UAAMmP,UAAU,GAAGmkF,eAAe,CAACn+E,GAAhB,CAAqBnV,KAAK,CAACwyF,WAA3B,CAAnB;;AAEA,QAAKrjF,UAAL,EAAkB;AAEjBA,MAAAA,UAAU,CAACpP,aAAX,CAA0B;AAAE2B,QAAAA,IAAI,EAAE1B,KAAK,CAAC0B;AAAd,OAA1B;AAEA;AAED;;AAED,WAASuyF,YAAT,GAAwB;AAEvBX,IAAAA,eAAe,CAACh9F,OAAhB,CAAyB,UAAW6Y,UAAX,EAAuBqjF,WAAvB,EAAqC;AAE7DrjF,MAAAA,UAAU,CAACojF,UAAX,CAAuBC,WAAvB;AAEA,KAJD;AAMAc,IAAAA,eAAe,CAAC1iC,KAAhB,GARuB,CAUvB;;AAEAR,IAAAA,QAAQ,CAAC8jC,cAAT,CAAyB,IAAzB;AACA9jC,IAAAA,QAAQ,CAACM,eAAT,CAA0BN,QAAQ,CAACK,eAAT,EAA1B,EAbuB,CAaiC;;AACxD0jC,IAAAA,SAAS,CAAC19B,IAAV;AAEA/+D,IAAAA,KAAK,CAACm8F,YAAN,GAAqB,KAArB;AAEAn8F,IAAAA,KAAK,CAACqI,aAAN,CAAqB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAArB;AAEA;;AAED,WAAS0yF,uBAAT,CAAkCz5F,KAAlC,EAA0C;AAEzC83F,IAAAA,cAAc,GAAG93F,KAAjB;AAEAw5F,IAAAA,SAAS,CAACv9B,UAAV,CAAsBuL,OAAtB;AACAgyB,IAAAA,SAAS,CAACpkD,KAAV;AAEAr4C,IAAAA,KAAK,CAACm8F,YAAN,GAAqB,IAArB;AAEAn8F,IAAAA,KAAK,CAACqI,aAAN,CAAqB;AAAE2B,MAAAA,IAAI,EAAE;AAAR,KAArB;AAEA;;AAED,OAAK2yF,yBAAL,GAAiC,UAAW15F,KAAX,EAAmB;AAEnDw4F,IAAAA,sBAAsB,GAAGx4F,KAAzB;;AAEA,QAAKjD,KAAK,CAACm8F,YAAN,KAAuB,IAA5B,EAAmC;AAElC7tE,MAAAA,OAAO,CAACC,IAAR,CAAc,uEAAd;AAEA;AAED,GAVD;;AAYA,OAAKquE,qBAAL,GAA6B,UAAW35F,KAAX,EAAmB;AAE/Cy4F,IAAAA,kBAAkB,GAAGz4F,KAArB;;AAEA,QAAKjD,KAAK,CAACm8F,YAAN,KAAuB,IAA5B,EAAmC;AAElC7tE,MAAAA,OAAO,CAACC,IAAR,CAAc,0EAAd;AAEA;AAED,GAVD;;AAYA,OAAKsuE,iBAAL,GAAyB,YAAY;AAEpC,WAAO9B,cAAP;AAEA,GAJD;;AAMA,OAAKrwB,UAAL,GAAkB,YAAY;AAE7B,WAAOD,OAAP;AAEA,GAJD;;AAMA,OAAKqyB,UAAL,GAAkB,UAAW75F,KAAX,EAAmB;AAEpCwnE,IAAAA,OAAO,GAAGxnE,KAAV;;AAEA,QAAKwnE,OAAO,KAAK,IAAjB,EAAwB;AAEvBA,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,QAA1B,EAAoC6zF,cAApC;AACA7xB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,aAA1B,EAAyC6zF,cAAzC;AACA7xB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,WAA1B,EAAuC6zF,cAAvC;AACA7xB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,SAA1B,EAAqC6zF,cAArC;AACA7xB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,cAA1B,EAA0C6zF,cAA1C;AACA7xB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,YAA1B,EAAwC6zF,cAAxC;AACA7xB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,KAA1B,EAAiC8zF,YAAjC;AAEA,YAAMvzC,UAAU,GAAGoW,EAAE,CAAC29B,oBAAH,EAAnB;;AAEA,UAAK/zC,UAAU,CAACg0C,YAAX,KAA4B,IAAjC,EAAwC;AAEvC59B,QAAAA,EAAE,CAAC69B,gBAAH;AAEA;;AAED,YAAMC,SAAS,GAAG;AACjBC,QAAAA,SAAS,EAAEn0C,UAAU,CAACm0C,SADL;AAEjBjsE,QAAAA,KAAK,EAAE83B,UAAU,CAAC93B,KAFD;AAGjByiC,QAAAA,KAAK,EAAE3K,UAAU,CAAC2K,KAHD;AAIjBwF,QAAAA,OAAO,EAAEnQ,UAAU,CAACmQ,OAJH;AAKjBsiC,QAAAA,sBAAsB,EAAEA;AALP,OAAlB,CAlBuB,CA0BvB;;AACA,YAAM2B,SAAS,GAAG,IAAIC,YAAJ,CAAkB5yB,OAAlB,EAA2BrL,EAA3B,EAA+B89B,SAA/B,CAAlB;AAEAzyB,MAAAA,OAAO,CAAC6yB,iBAAR,CAA2B;AAAEF,QAAAA,SAAS,EAAEA;AAAb,OAA3B;AAEA3yB,MAAAA,OAAO,CAAC8yB,qBAAR,CAA+B7B,kBAA/B,EAAoD8B,IAApD,CAA0Dd,uBAA1D,EA/BuB,CAiCvB;;AAEAjyB,MAAAA,OAAO,CAAChiE,gBAAR,CAA0B,oBAA1B,EAAgDg1F,kBAAhD;AAEA;AAED,GA3CD;;AA6CA,WAASA,kBAAT,CAA6Bn1F,KAA7B,EAAqC;AAEpC,UAAMo1F,YAAY,GAAGjzB,OAAO,CAACizB,YAA7B,CAFoC,CAIpC;;AAEA,SAAM,IAAI79F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGod,WAAW,CAACze,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C+7F,MAAAA,eAAe,CAACvtE,GAAhB,CAAqBqvE,YAAY,CAAE79F,CAAF,CAAjC,EAAwCod,WAAW,CAAEpd,CAAF,CAAnD;AAEA,KAVmC,CAYpC;;;AAEA,SAAM,IAAIA,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGyI,KAAK,CAACq1F,OAAN,CAAcn/F,MAAnC,EAA2CqB,CAAC,EAA5C,EAAkD;AAEjD,YAAMi7F,WAAW,GAAGxyF,KAAK,CAACq1F,OAAN,CAAe99F,CAAf,CAApB;AACA,YAAM4X,UAAU,GAAGmkF,eAAe,CAACn+E,GAAhB,CAAqBq9E,WAArB,CAAnB;;AAEA,UAAKrjF,UAAL,EAAkB;AAEjBA,QAAAA,UAAU,CAACpP,aAAX,CAA0B;AAAE2B,UAAAA,IAAI,EAAE,cAAR;AAAwBglC,UAAAA,IAAI,EAAE8rD;AAA9B,SAA1B;AACAc,QAAAA,eAAe,CAACv7B,MAAhB,CAAwBy6B,WAAxB;AAEA;AAED,KA1BmC,CA4BpC;;;AAEA,SAAM,IAAIj7F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGyI,KAAK,CAACs1F,KAAN,CAAYp/F,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C,YAAMi7F,WAAW,GAAGxyF,KAAK,CAACs1F,KAAN,CAAa/9F,CAAb,CAApB;AACA,YAAM4X,UAAU,GAAGmkF,eAAe,CAACn+E,GAAhB,CAAqBq9E,WAArB,CAAnB;;AAEA,UAAKrjF,UAAL,EAAkB;AAEjBA,QAAAA,UAAU,CAACpP,aAAX,CAA0B;AAAE2B,UAAAA,IAAI,EAAE,WAAR;AAAqBglC,UAAAA,IAAI,EAAE8rD;AAA3B,SAA1B;AAEA;AAED;AAED,GApPoC,CAsPrC;;;AAEA,QAAM+C,UAAU,GAAG,IAAIz9D,OAAJ,EAAnB;AACA,QAAM09D,UAAU,GAAG,IAAI19D,OAAJ,EAAnB;AAEA;;;;;;;;;AAQA,WAAS29D,sBAAT,CAAiC18D,MAAjC,EAAyCy6D,OAAzC,EAAkDC,OAAlD,EAA4D;AAE3D8B,IAAAA,UAAU,CAAC56D,qBAAX,CAAkC64D,OAAO,CAACp6D,WAA1C;AACAo8D,IAAAA,UAAU,CAAC76D,qBAAX,CAAkC84D,OAAO,CAACr6D,WAA1C;AAEA,UAAMs8D,GAAG,GAAGH,UAAU,CAACjtE,UAAX,CAAuBktE,UAAvB,CAAZ;AAEA,UAAMG,KAAK,GAAGnC,OAAO,CAACv6D,gBAAR,CAAyB1R,QAAvC;AACA,UAAMquE,KAAK,GAAGnC,OAAO,CAACx6D,gBAAR,CAAyB1R,QAAvC,CAR2D,CAU3D;AACA;AACA;;AACA,UAAMgY,IAAI,GAAGo2D,KAAK,CAAE,EAAF,CAAL,IAAgBA,KAAK,CAAE,EAAF,CAAL,GAAc,CAA9B,CAAb;AACA,UAAMn2D,GAAG,GAAGm2D,KAAK,CAAE,EAAF,CAAL,IAAgBA,KAAK,CAAE,EAAF,CAAL,GAAc,CAA9B,CAAZ;AACA,UAAME,MAAM,GAAG,CAAEF,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAAzC;AACA,UAAMG,SAAS,GAAG,CAAEH,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAA5C;AAEA,UAAMI,OAAO,GAAG,CAAEJ,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAA1C;AACA,UAAMK,QAAQ,GAAG,CAAEJ,KAAK,CAAE,CAAF,CAAL,GAAa,CAAf,IAAqBA,KAAK,CAAE,CAAF,CAA3C;AACA,UAAM53F,IAAI,GAAGuhC,IAAI,GAAGw2D,OAApB;AACA,UAAM93F,KAAK,GAAGshC,IAAI,GAAGy2D,QAArB,CArB2D,CAuB3D;AACA;;AACA,UAAMC,OAAO,GAAGP,GAAG,IAAK,CAAEK,OAAF,GAAYC,QAAjB,CAAnB;AACA,UAAME,OAAO,GAAGD,OAAO,GAAG,CAAEF,OAA5B,CA1B2D,CA4B3D;;AACAvC,IAAAA,OAAO,CAACp6D,WAAR,CAAoB8F,SAApB,CAA+BnG,MAAM,CAACh7B,QAAtC,EAAgDg7B,MAAM,CAACxD,UAAvD,EAAmEwD,MAAM,CAACrL,KAA1E;AACAqL,IAAAA,MAAM,CAAC6K,UAAP,CAAmBsyD,OAAnB;AACAn9D,IAAAA,MAAM,CAAC+K,UAAP,CAAmBmyD,OAAnB;AACAl9D,IAAAA,MAAM,CAACK,WAAP,CAAmBxnB,OAAnB,CAA4BmnB,MAAM,CAACh7B,QAAnC,EAA6Cg7B,MAAM,CAACxD,UAApD,EAAgEwD,MAAM,CAACrL,KAAvE;AACAqL,IAAAA,MAAM,CAACC,kBAAP,CAA0B3M,UAA1B,CAAsC0M,MAAM,CAACK,WAA7C,EAjC2D,CAmC3D;AACA;AACA;;AACA,UAAM+8D,KAAK,GAAG52D,IAAI,GAAG02D,OAArB;AACA,UAAMG,IAAI,GAAG52D,GAAG,GAAGy2D,OAAnB;AACA,UAAMI,KAAK,GAAGr4F,IAAI,GAAGk4F,OAArB;AACA,UAAMI,MAAM,GAAGr4F,KAAK,IAAKy3F,GAAG,GAAGQ,OAAX,CAApB;AACA,UAAMK,IAAI,GAAGV,MAAM,GAAGr2D,GAAT,GAAe42D,IAAf,GAAsBD,KAAnC;AACA,UAAMK,OAAO,GAAGV,SAAS,GAAGt2D,GAAZ,GAAkB42D,IAAlB,GAAyBD,KAAzC;AAEAp9D,IAAAA,MAAM,CAACE,gBAAP,CAAwBqG,eAAxB,CAAyC+2D,KAAzC,EAAgDC,MAAhD,EAAwDC,IAAxD,EAA8DC,OAA9D,EAAuEL,KAAvE,EAA8EC,IAA9E;AAEA;;AAED,WAASK,YAAT,CAAuB19D,MAAvB,EAA+B/sB,MAA/B,EAAwC;AAEvC,QAAKA,MAAM,KAAK,IAAhB,EAAuB;AAEtB+sB,MAAAA,MAAM,CAACK,WAAP,CAAmBzS,IAAnB,CAAyBoS,MAAM,CAACzM,MAAhC;AAEA,KAJD,MAIO;AAENyM,MAAAA,MAAM,CAACK,WAAP,CAAmBvO,gBAAnB,CAAqC7e,MAAM,CAACotB,WAA5C,EAAyDL,MAAM,CAACzM,MAAhE;AAEA;;AAEDyM,IAAAA,MAAM,CAACC,kBAAP,CAA0B3M,UAA1B,CAAsC0M,MAAM,CAACK,WAA7C;AAEA;;AAED,OAAKs9D,SAAL,GAAiB,UAAW39D,MAAX,EAAoB;AAEpC26D,IAAAA,QAAQ,CAACn0D,IAAT,GAAgBk0D,OAAO,CAACl0D,IAAR,GAAei0D,OAAO,CAACj0D,IAAR,GAAexG,MAAM,CAACwG,IAArD;AACAm0D,IAAAA,QAAQ,CAACl0D,GAAT,GAAei0D,OAAO,CAACj0D,GAAR,GAAcg0D,OAAO,CAACh0D,GAAR,GAAczG,MAAM,CAACyG,GAAlD;;AAEA,QAAKm0D,iBAAiB,KAAKD,QAAQ,CAACn0D,IAA/B,IAAuCq0D,gBAAgB,KAAKF,QAAQ,CAACl0D,GAA1E,EAAgF;AAE/E;AAEA2iC,MAAAA,OAAO,CAAC6yB,iBAAR,CAA2B;AAC1B2B,QAAAA,SAAS,EAAEjD,QAAQ,CAACn0D,IADM;AAE1Bq3D,QAAAA,QAAQ,EAAElD,QAAQ,CAACl0D;AAFO,OAA3B;AAKAm0D,MAAAA,iBAAiB,GAAGD,QAAQ,CAACn0D,IAA7B;AACAq0D,MAAAA,gBAAgB,GAAGF,QAAQ,CAACl0D,GAA5B;AAEA;;AAED,UAAMxzB,MAAM,GAAG+sB,MAAM,CAAC/sB,MAAtB;AACA,UAAM0yE,OAAO,GAAGgV,QAAQ,CAAChV,OAAzB;AAEA+X,IAAAA,YAAY,CAAE/C,QAAF,EAAY1nF,MAAZ,CAAZ;;AAEA,SAAM,IAAIzU,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmnF,OAAO,CAACxoF,MAA7B,EAAqCqB,CAAC,EAAtC,EAA4C;AAE3Ck/F,MAAAA,YAAY,CAAE/X,OAAO,CAAEnnF,CAAF,CAAT,EAAgByU,MAAhB,CAAZ;AAEA,KA5BmC,CA8BpC;;;AAEA+sB,IAAAA,MAAM,CAACK,WAAP,CAAmBzS,IAAnB,CAAyB+sE,QAAQ,CAACt6D,WAAlC;AAEA,UAAM0I,QAAQ,GAAG/I,MAAM,CAAC+I,QAAxB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDuqC,MAAAA,QAAQ,CAAEvqC,CAAF,CAAR,CAAcqtC,iBAAd,CAAiC,IAAjC;AAEA,KAxCmC,CA0CpC;;;AAEA,QAAK85C,OAAO,CAACxoF,MAAR,KAAmB,CAAxB,EAA4B;AAE3Bu/F,MAAAA,sBAAsB,CAAE/B,QAAF,EAAYF,OAAZ,EAAqBC,OAArB,CAAtB;AAEA,KAJD,MAIO;AAEN;AAEAC,MAAAA,QAAQ,CAACz6D,gBAAT,CAA0BtS,IAA1B,CAAgC6sE,OAAO,CAACv6D,gBAAxC;AAEA;;AAED,WAAOy6D,QAAP;AAEA,GA1DD,CApUqC,CAgYrC;;;AAEA,MAAImD,wBAAwB,GAAG,IAA/B;;AAEA,WAASvgC,gBAAT,CAA2BC,IAA3B,EAAiCC,KAAjC,EAAyC;AAExC68B,IAAAA,IAAI,GAAG78B,KAAK,CAACsgC,aAAN,CAAqBrE,cAArB,CAAP;;AAEA,QAAKY,IAAI,KAAK,IAAd,EAAqB;AAEpB,YAAM0D,KAAK,GAAG1D,IAAI,CAAC0D,KAAnB;AACA,YAAMjC,SAAS,GAAG3yB,OAAO,CAAC2f,WAAR,CAAoBgT,SAAtC;AAEA1kC,MAAAA,QAAQ,CAAC8jC,cAAT,CAAyBY,SAAS,CAACvF,WAAnC;AAEA,UAAIyH,mBAAmB,GAAG,KAA1B,CAPoB,CASpB;;AAEA,UAAKD,KAAK,CAAC7gG,MAAN,KAAiBw9F,QAAQ,CAAChV,OAAT,CAAiBxoF,MAAvC,EAAgD;AAE/Cw9F,QAAAA,QAAQ,CAAChV,OAAT,CAAiBxoF,MAAjB,GAA0B,CAA1B;AACA8gG,QAAAA,mBAAmB,GAAG,IAAtB;AAEA;;AAED,WAAM,IAAIz/F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGw/F,KAAK,CAAC7gG,MAA3B,EAAmCqB,CAAC,EAApC,EAA0C;AAEzC,cAAM+2D,IAAI,GAAGyoC,KAAK,CAAEx/F,CAAF,CAAlB;AACA,cAAMw7B,QAAQ,GAAG+hE,SAAS,CAACxQ,WAAV,CAAuBh2B,IAAvB,CAAjB;AAEA,cAAMv1B,MAAM,GAAG2lD,OAAO,CAAEnnF,CAAF,CAAtB;AACAwhC,QAAAA,MAAM,CAACzM,MAAP,CAAcrD,SAAd,CAAyBqlC,IAAI,CAAC0kC,SAAL,CAAe1mE,MAAxC;AACAyM,QAAAA,MAAM,CAACE,gBAAP,CAAwBhQ,SAAxB,CAAmCqlC,IAAI,CAACr1B,gBAAxC;AACAF,QAAAA,MAAM,CAAChG,QAAP,CAAgBhN,GAAhB,CAAqBgN,QAAQ,CAACn0B,CAA9B,EAAiCm0B,QAAQ,CAACj0B,CAA1C,EAA6Ci0B,QAAQ,CAAC7xB,KAAtD,EAA6D6xB,QAAQ,CAAC5xB,MAAtE;;AAEA,YAAK5J,CAAC,KAAK,CAAX,EAAe;AAEdm8F,UAAAA,QAAQ,CAACpnE,MAAT,CAAgB3F,IAAhB,CAAsBoS,MAAM,CAACzM,MAA7B;AAEA;;AAED,YAAK0qE,mBAAmB,KAAK,IAA7B,EAAoC;AAEnCtD,UAAAA,QAAQ,CAAChV,OAAT,CAAiBh+E,IAAjB,CAAuBq4B,MAAvB;AAEA;AAED;AAED,KA9CuC,CAgDxC;;;AAEA,UAAMq8D,YAAY,GAAGjzB,OAAO,CAACizB,YAA7B;;AAEA,SAAM,IAAI79F,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGod,WAAW,CAACze,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C,YAAM4X,UAAU,GAAGwF,WAAW,CAAEpd,CAAF,CAA9B;AACA,YAAMi7F,WAAW,GAAG4C,YAAY,CAAE79F,CAAF,CAAhC;AAEA4X,MAAAA,UAAU,CAACumB,MAAX,CAAmB88D,WAAnB,EAAgCh8B,KAAhC,EAAuCi8B,cAAvC;AAEA;;AAED,QAAKoE,wBAAL,EAAgCA,wBAAwB,CAAEtgC,IAAF,EAAQC,KAAR,CAAxB;AAEhC;;AAED,QAAM29B,SAAS,GAAG,IAAIj+B,cAAJ,EAAlB;AACAi+B,EAAAA,SAAS,CAACx9B,gBAAV,CAA4BL,gBAA5B;;AAEA,OAAKK,gBAAL,GAAwB,UAAWrtD,QAAX,EAAsB;AAE7CutF,IAAAA,wBAAwB,GAAGvtF,QAA3B;AAEA,GAJD;;AAMA,OAAKunB,OAAL,GAAe,YAAY,CAAE,CAA7B;AAEA;;AAED55B,MAAM,CAACme,MAAP,CAAe89E,YAAY,CAAC78F,SAA5B,EAAuC+rB,eAAe,CAAC/rB,SAAvD;AAEA;;;;AAIA,SAAS4gG,cAAT,CAAyBxiC,UAAzB,EAAsC;AAErC,WAASyiC,kBAAT,CAA6BtqC,QAA7B,EAAuC9lB,GAAvC,EAA6C;AAE5C8lB,IAAAA,QAAQ,CAACyH,QAAT,CAAkB15D,KAAlB,CAAwBgsB,IAAxB,CAA8BmgB,GAAG,CAAC9xC,KAAlC;;AAEA,QAAK8xC,GAAG,CAACqwD,KAAT,EAAiB;AAEhBvqC,MAAAA,QAAQ,CAACuH,OAAT,CAAiBx5D,KAAjB,GAAyBmsC,GAAG,CAACvH,IAA7B;AACAqtB,MAAAA,QAAQ,CAACwH,MAAT,CAAgBz5D,KAAhB,GAAwBmsC,GAAG,CAACtH,GAA5B;AAEA,KALD,MAKO,IAAKsH,GAAG,CAAC61C,SAAT,EAAqB;AAE3B/vB,MAAAA,QAAQ,CAACsH,UAAT,CAAoBv5D,KAApB,GAA4BmsC,GAAG,CAACswD,OAAhC;AAEA;AAED;;AAED,WAASC,uBAAT,CAAkCzqC,QAAlC,EAA4CvmB,QAA5C,EAAsDQ,WAAtD,EAAmEywD,UAAnE,EAA+En2F,MAA/E,EAAwF;AAEvF,QAAKklC,QAAQ,CAACmV,mBAAd,EAAoC;AAEnC+7C,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AAEA,KAJD,MAIO,IAAKA,QAAQ,CAACmxD,qBAAd,EAAsC;AAE5CD,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACAoxD,MAAAA,sBAAsB,CAAE7qC,QAAF,EAAYvmB,QAAZ,CAAtB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAACqxD,kBAAd,EAAmC;AAEzCH,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACAsxD,MAAAA,mBAAmB,CAAE/qC,QAAF,EAAYvmB,QAAZ,CAAnB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAACuxD,mBAAd,EAAoC;AAE1CL,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACAwxD,MAAAA,oBAAoB,CAAEjrC,QAAF,EAAYvmB,QAAZ,CAApB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAACq2C,sBAAd,EAAuC;AAE7C6a,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,EAAsBQ,WAAtB,CAArB;;AAEA,UAAKR,QAAQ,CAACyxD,sBAAd,EAAuC;AAEtCC,QAAAA,uBAAuB,CAAEnrC,QAAF,EAAYvmB,QAAZ,EAAsBQ,WAAtB,CAAvB;AAEA,OAJD,MAIO;AAENmxD,QAAAA,uBAAuB,CAAEprC,QAAF,EAAYvmB,QAAZ,EAAsBQ,WAAtB,CAAvB;AAEA;AAED,KAdM,MAcA,IAAKR,QAAQ,CAAC4xD,oBAAd,EAAqC;AAE3CV,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACA6xD,MAAAA,qBAAqB,CAAEtrC,QAAF,EAAYvmB,QAAZ,CAArB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAAC27C,mBAAd,EAAoC;AAE1CuV,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACA8xD,MAAAA,oBAAoB,CAAEvrC,QAAF,EAAYvmB,QAAZ,CAApB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAAC47C,sBAAd,EAAuC;AAE7CsV,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACA+xD,MAAAA,uBAAuB,CAAExrC,QAAF,EAAYvmB,QAAZ,CAAvB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAACgyD,oBAAd,EAAqC;AAE3Cd,MAAAA,qBAAqB,CAAE3qC,QAAF,EAAYvmB,QAAZ,CAArB;AACAiyD,MAAAA,qBAAqB,CAAE1rC,QAAF,EAAYvmB,QAAZ,CAArB;AAEA,KALM,MAKA,IAAKA,QAAQ,CAACkyD,mBAAd,EAAoC;AAE1CC,MAAAA,mBAAmB,CAAE5rC,QAAF,EAAYvmB,QAAZ,CAAnB;;AAEA,UAAKA,QAAQ,CAACoyD,oBAAd,EAAqC;AAEpCC,QAAAA,mBAAmB,CAAE9rC,QAAF,EAAYvmB,QAAZ,CAAnB;AAEA;AAED,KAVM,MAUA,IAAKA,QAAQ,CAACsyD,gBAAd,EAAiC;AAEvCC,MAAAA,qBAAqB,CAAEhsC,QAAF,EAAYvmB,QAAZ,EAAsBixD,UAAtB,EAAkCn2F,MAAlC,CAArB;AAEA,KAJM,MAIA,IAAKklC,QAAQ,CAACwyD,gBAAd,EAAiC;AAEvCC,MAAAA,sBAAsB,CAAElsC,QAAF,EAAYvmB,QAAZ,CAAtB;AAEA,KAJM,MAIA,IAAKA,QAAQ,CAAC0yD,gBAAd,EAAiC;AAEvCnsC,MAAAA,QAAQ,CAAC53D,KAAT,CAAe2F,KAAf,CAAqBgsB,IAArB,CAA2B0f,QAAQ,CAACrxC,KAApC;AACA43D,MAAAA,QAAQ,CAAC3iD,OAAT,CAAiBtP,KAAjB,GAAyB0rC,QAAQ,CAACp8B,OAAlC;AAEA,KALM,MAKA,IAAKo8B,QAAQ,CAAC0nB,gBAAd,EAAiC;AAEvC1nB,MAAAA,QAAQ,CAACynB,kBAAT,GAA8B,KAA9B,CAFuC,CAEF;AAErC;AAED;;AAED,WAASypC,qBAAT,CAAgC3qC,QAAhC,EAA0CvmB,QAA1C,EAAoDQ,WAApD,EAAkE;AAEjE+lB,IAAAA,QAAQ,CAAC3iD,OAAT,CAAiBtP,KAAjB,GAAyB0rC,QAAQ,CAACp8B,OAAlC;;AAEA,QAAKo8B,QAAQ,CAACrxC,KAAd,EAAsB;AAErB43D,MAAAA,QAAQ,CAACsG,OAAT,CAAiBv4D,KAAjB,CAAuBgsB,IAAvB,CAA6B0f,QAAQ,CAACrxC,KAAtC;AAEA;;AAED,QAAKqxC,QAAQ,CAACmS,QAAd,EAAyB;AAExBoU,MAAAA,QAAQ,CAACpU,QAAT,CAAkB79C,KAAlB,CAAwBgsB,IAAxB,CAA8B0f,QAAQ,CAACmS,QAAvC,EAAkDrxB,cAAlD,CAAkEkf,QAAQ,CAACoS,iBAA3E;AAEA;;AAED,QAAKpS,QAAQ,CAAC5jC,GAAd,EAAoB;AAEnBmqD,MAAAA,QAAQ,CAACnqD,GAAT,CAAa9H,KAAb,GAAqB0rC,QAAQ,CAAC5jC,GAA9B;AAEA;;AAED,QAAK4jC,QAAQ,CAAC8S,QAAd,EAAyB;AAExByT,MAAAA,QAAQ,CAACzT,QAAT,CAAkBx+C,KAAlB,GAA0B0rC,QAAQ,CAAC8S,QAAnC;AAEA;;AAED,QAAK9S,QAAQ,CAAC6T,WAAd,EAA4B;AAE3B0S,MAAAA,QAAQ,CAAC1S,WAAT,CAAqBv/C,KAArB,GAA6B0rC,QAAQ,CAAC6T,WAAtC;AAEA;;AAED,UAAMC,MAAM,GAAG9T,QAAQ,CAAC8T,MAAT,IAAmBtT,WAAlC;;AAEA,QAAKsT,MAAL,EAAc;AAEbyS,MAAAA,QAAQ,CAACzS,MAAT,CAAgBx/C,KAAhB,GAAwBw/C,MAAxB;AAEAyS,MAAAA,QAAQ,CAAC2G,UAAT,CAAoB54D,KAApB,GAA4Bw/C,MAAM,CAACwoB,aAAP,GAAuB,CAAE,CAAzB,GAA6B,CAAzD;AAEA/V,MAAAA,QAAQ,CAACxS,YAAT,CAAsBz/C,KAAtB,GAA8B0rC,QAAQ,CAAC+T,YAAvC;AACAwS,MAAAA,QAAQ,CAACvS,eAAT,CAAyB1/C,KAAzB,GAAiC0rC,QAAQ,CAACgU,eAA1C;AAEAuS,MAAAA,QAAQ,CAAC4G,WAAT,CAAqB74D,KAArB,GAA6B85D,UAAU,CAACt/C,GAAX,CAAgBglC,MAAhB,EAAyBgyC,aAAtD;AAEA;;AAED,QAAK9lD,QAAQ,CAAC+S,QAAd,EAAyB;AAExBwT,MAAAA,QAAQ,CAACxT,QAAT,CAAkBz+C,KAAlB,GAA0B0rC,QAAQ,CAAC+S,QAAnC;AACAwT,MAAAA,QAAQ,CAACrR,iBAAT,CAA2B5gD,KAA3B,GAAmC0rC,QAAQ,CAACkV,iBAA5C;AAEA;;AAED,QAAKlV,QAAQ,CAACgT,KAAd,EAAsB;AAErBuT,MAAAA,QAAQ,CAACvT,KAAT,CAAe1+C,KAAf,GAAuB0rC,QAAQ,CAACgT,KAAhC;AACAuT,MAAAA,QAAQ,CAACtT,cAAT,CAAwB3+C,KAAxB,GAAgC0rC,QAAQ,CAACiT,cAAzC;AAEA,KA7DgE,CA+DjE;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA,QAAI0/C,UAAJ;;AAEA,QAAK3yD,QAAQ,CAAC5jC,GAAd,EAAoB;AAEnBu2F,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC5jC,GAAtB;AAEA,KAJD,MAIO,IAAK4jC,QAAQ,CAAC6T,WAAd,EAA4B;AAElC8+C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC6T,WAAtB;AAEA,KAJM,MAIA,IAAK7T,QAAQ,CAACuT,eAAd,EAAgC;AAEtCo/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAACuT,eAAtB;AAEA,KAJM,MAIA,IAAKvT,QAAQ,CAACoT,SAAd,EAA0B;AAEhCu/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAACoT,SAAtB;AAEA,KAJM,MAIA,IAAKpT,QAAQ,CAACkT,OAAd,EAAwB;AAE9By/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAACkT,OAAtB;AAEA,KAJM,MAIA,IAAKlT,QAAQ,CAAC0T,YAAd,EAA6B;AAEnCi/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC0T,YAAtB;AAEA,KAJM,MAIA,IAAK1T,QAAQ,CAAC2T,YAAd,EAA6B;AAEnCg/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC2T,YAAtB;AAEA,KAJM,MAIA,IAAK3T,QAAQ,CAAC8S,QAAd,EAAyB;AAE/B6/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC8S,QAAtB;AAEA,KAJM,MAIA,IAAK9S,QAAQ,CAAC4T,WAAd,EAA4B;AAElC++C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC4T,WAAtB;AAEA;;AAED,QAAK++C,UAAU,KAAK1gG,SAApB,EAAgC;AAE/B;AACA,UAAK0gG,UAAU,CAAC5lE,mBAAhB,EAAsC;AAErC4lE,QAAAA,UAAU,GAAGA,UAAU,CAAChmE,OAAxB;AAEA;;AAED,UAAKgmE,UAAU,CAACrpE,gBAAX,KAAgC,IAArC,EAA4C;AAE3CqpE,QAAAA,UAAU,CAAC5oE,YAAX;AAEA;;AAEDw8B,MAAAA,QAAQ,CAACuG,WAAT,CAAqBx4D,KAArB,CAA2BgsB,IAA3B,CAAiCqyE,UAAU,CAAC1sE,MAA5C;AAEA,KAhIgE,CAkIjE;AACA;AACA;;;AAEA,QAAI2sE,WAAJ;;AAEA,QAAK5yD,QAAQ,CAACgT,KAAd,EAAsB;AAErB4/C,MAAAA,WAAW,GAAG5yD,QAAQ,CAACgT,KAAvB;AAEA,KAJD,MAIO,IAAKhT,QAAQ,CAAC+S,QAAd,EAAyB;AAE/B6/C,MAAAA,WAAW,GAAG5yD,QAAQ,CAAC+S,QAAvB;AAEA;;AAED,QAAK6/C,WAAW,KAAK3gG,SAArB,EAAiC;AAEhC;AACA,UAAK2gG,WAAW,CAAC7lE,mBAAjB,EAAuC;AAEtC6lE,QAAAA,WAAW,GAAGA,WAAW,CAACjmE,OAA1B;AAEA;;AAED,UAAKimE,WAAW,CAACtpE,gBAAZ,KAAiC,IAAtC,EAA6C;AAE5CspE,QAAAA,WAAW,CAAC7oE,YAAZ;AAEA;;AAEDw8B,MAAAA,QAAQ,CAACwG,YAAT,CAAsBz4D,KAAtB,CAA4BgsB,IAA5B,CAAkCsyE,WAAW,CAAC3sE,MAA9C;AAEA;AAED;;AAED,WAASksE,mBAAT,CAA8B5rC,QAA9B,EAAwCvmB,QAAxC,EAAmD;AAElDumB,IAAAA,QAAQ,CAACsG,OAAT,CAAiBv4D,KAAjB,CAAuBgsB,IAAvB,CAA6B0f,QAAQ,CAACrxC,KAAtC;AACA43D,IAAAA,QAAQ,CAAC3iD,OAAT,CAAiBtP,KAAjB,GAAyB0rC,QAAQ,CAACp8B,OAAlC;AAEA;;AAED,WAASyuF,mBAAT,CAA8B9rC,QAA9B,EAAwCvmB,QAAxC,EAAmD;AAElDumB,IAAAA,QAAQ,CAACjS,QAAT,CAAkBhgD,KAAlB,GAA0B0rC,QAAQ,CAACsU,QAAnC;AACAiS,IAAAA,QAAQ,CAACgU,SAAT,CAAmBjmE,KAAnB,GAA2B0rC,QAAQ,CAACsU,QAAT,GAAoBtU,QAAQ,CAACuU,OAAxD;AACAgS,IAAAA,QAAQ,CAACl/B,KAAT,CAAe/yB,KAAf,GAAuB0rC,QAAQ,CAAC3Y,KAAhC;AAEA;;AAED,WAASkrE,qBAAT,CAAgChsC,QAAhC,EAA0CvmB,QAA1C,EAAoDixD,UAApD,EAAgEn2F,MAAhE,EAAyE;AAExEyrD,IAAAA,QAAQ,CAACsG,OAAT,CAAiBv4D,KAAjB,CAAuBgsB,IAAvB,CAA6B0f,QAAQ,CAACrxC,KAAtC;AACA43D,IAAAA,QAAQ,CAAC3iD,OAAT,CAAiBtP,KAAjB,GAAyB0rC,QAAQ,CAACp8B,OAAlC;AACA2iD,IAAAA,QAAQ,CAACzjB,IAAT,CAAcxuC,KAAd,GAAsB0rC,QAAQ,CAAC8C,IAAT,GAAgBmuD,UAAtC;AACA1qC,IAAAA,QAAQ,CAACl/B,KAAT,CAAe/yB,KAAf,GAAuBwG,MAAM,GAAG,GAAhC;;AAEA,QAAKklC,QAAQ,CAAC5jC,GAAd,EAAoB;AAEnBmqD,MAAAA,QAAQ,CAACnqD,GAAT,CAAa9H,KAAb,GAAqB0rC,QAAQ,CAAC5jC,GAA9B;AAEA;;AAED,QAAK4jC,QAAQ,CAAC8S,QAAd,EAAyB;AAExByT,MAAAA,QAAQ,CAACzT,QAAT,CAAkBx+C,KAAlB,GAA0B0rC,QAAQ,CAAC8S,QAAnC;AAEA,KAjBuE,CAmBxE;AACA;AACA;;;AAEA,QAAI6/C,UAAJ;;AAEA,QAAK3yD,QAAQ,CAAC5jC,GAAd,EAAoB;AAEnBu2F,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC5jC,GAAtB;AAEA,KAJD,MAIO,IAAK4jC,QAAQ,CAAC8S,QAAd,EAAyB;AAE/B6/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC8S,QAAtB;AAEA;;AAED,QAAK6/C,UAAU,KAAK1gG,SAApB,EAAgC;AAE/B,UAAK0gG,UAAU,CAACrpE,gBAAX,KAAgC,IAArC,EAA4C;AAE3CqpE,QAAAA,UAAU,CAAC5oE,YAAX;AAEA;;AAEDw8B,MAAAA,QAAQ,CAACuG,WAAT,CAAqBx4D,KAArB,CAA2BgsB,IAA3B,CAAiCqyE,UAAU,CAAC1sE,MAA5C;AAEA;AAED;;AAED,WAASwsE,sBAAT,CAAiClsC,QAAjC,EAA2CvmB,QAA3C,EAAsD;AAErDumB,IAAAA,QAAQ,CAACsG,OAAT,CAAiBv4D,KAAjB,CAAuBgsB,IAAvB,CAA6B0f,QAAQ,CAACrxC,KAAtC;AACA43D,IAAAA,QAAQ,CAAC3iD,OAAT,CAAiBtP,KAAjB,GAAyB0rC,QAAQ,CAACp8B,OAAlC;AACA2iD,IAAAA,QAAQ,CAACr/B,QAAT,CAAkB5yB,KAAlB,GAA0B0rC,QAAQ,CAAC9Y,QAAnC;;AAEA,QAAK8Y,QAAQ,CAAC5jC,GAAd,EAAoB;AAEnBmqD,MAAAA,QAAQ,CAACnqD,GAAT,CAAa9H,KAAb,GAAqB0rC,QAAQ,CAAC5jC,GAA9B;AAEA;;AAED,QAAK4jC,QAAQ,CAAC8S,QAAd,EAAyB;AAExByT,MAAAA,QAAQ,CAACzT,QAAT,CAAkBx+C,KAAlB,GAA0B0rC,QAAQ,CAAC8S,QAAnC;AAEA,KAhBoD,CAkBrD;AACA;AACA;;;AAEA,QAAI6/C,UAAJ;;AAEA,QAAK3yD,QAAQ,CAAC5jC,GAAd,EAAoB;AAEnBu2F,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC5jC,GAAtB;AAEA,KAJD,MAIO,IAAK4jC,QAAQ,CAAC8S,QAAd,EAAyB;AAE/B6/C,MAAAA,UAAU,GAAG3yD,QAAQ,CAAC8S,QAAtB;AAEA;;AAED,QAAK6/C,UAAU,KAAK1gG,SAApB,EAAgC;AAE/B,UAAK0gG,UAAU,CAACrpE,gBAAX,KAAgC,IAArC,EAA4C;AAE3CqpE,QAAAA,UAAU,CAAC5oE,YAAX;AAEA;;AAEDw8B,MAAAA,QAAQ,CAACuG,WAAT,CAAqBx4D,KAArB,CAA2BgsB,IAA3B,CAAiCqyE,UAAU,CAAC1sE,MAA5C;AAEA;AAED;;AAED,WAASmrE,sBAAT,CAAiC7qC,QAAjC,EAA2CvmB,QAA3C,EAAsD;AAErD,QAAKA,QAAQ,CAAC4T,WAAd,EAA4B;AAE3B2S,MAAAA,QAAQ,CAAC3S,WAAT,CAAqBt/C,KAArB,GAA6B0rC,QAAQ,CAAC4T,WAAtC;AAEA;AAED;;AAED,WAAS49C,oBAAT,CAA+BjrC,QAA/B,EAAyCvmB,QAAzC,EAAoD;AAEnDumB,IAAAA,QAAQ,CAAClU,QAAT,CAAkB/9C,KAAlB,CAAwBgsB,IAAxB,CAA8B0f,QAAQ,CAACqS,QAAvC;AACAkU,IAAAA,QAAQ,CAACjU,SAAT,CAAmBh+C,KAAnB,GAA2BpF,IAAI,CAAC+E,GAAL,CAAU+rC,QAAQ,CAACsS,SAAnB,EAA8B,IAA9B,CAA3B,CAHmD,CAGc;;AAEjE,QAAKtS,QAAQ,CAAC4T,WAAd,EAA4B;AAE3B2S,MAAAA,QAAQ,CAAC3S,WAAT,CAAqBt/C,KAArB,GAA6B0rC,QAAQ,CAAC4T,WAAtC;AAEA;;AAED,QAAK5T,QAAQ,CAACkT,OAAd,EAAwB;AAEvBqT,MAAAA,QAAQ,CAACrT,OAAT,CAAiB5+C,KAAjB,GAAyB0rC,QAAQ,CAACkT,OAAlC;AACAqT,MAAAA,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,GAA2B0rC,QAAQ,CAACmT,SAApC;AACA,UAAKnT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,QAAK0rC,QAAQ,CAACoT,SAAd,EAA0B;AAEzBmT,MAAAA,QAAQ,CAACnT,SAAT,CAAmB9+C,KAAnB,GAA2B0rC,QAAQ,CAACoT,SAApC;AACAmT,MAAAA,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BgsB,IAA3B,CAAiC0f,QAAQ,CAACsT,WAA1C;AACA,UAAKtT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BktB,MAA3B;AAElC;;AAED,QAAKwe,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;AAED;;AAED,WAAS69C,mBAAT,CAA8B/qC,QAA9B,EAAwCvmB,QAAxC,EAAmD;AAElD,QAAKA,QAAQ,CAACmU,WAAd,EAA4B;AAE3BoS,MAAAA,QAAQ,CAACpS,WAAT,CAAqB7/C,KAArB,GAA6B0rC,QAAQ,CAACmU,WAAtC;AAEA;;AAED,QAAKnU,QAAQ,CAAC4T,WAAd,EAA4B;AAE3B2S,MAAAA,QAAQ,CAAC3S,WAAT,CAAqBt/C,KAArB,GAA6B0rC,QAAQ,CAAC4T,WAAtC;AAEA;;AAED,QAAK5T,QAAQ,CAACkT,OAAd,EAAwB;AAEvBqT,MAAAA,QAAQ,CAACrT,OAAT,CAAiB5+C,KAAjB,GAAyB0rC,QAAQ,CAACkT,OAAlC;AACAqT,MAAAA,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,GAA2B0rC,QAAQ,CAACmT,SAApC;AACA,UAAKnT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,QAAK0rC,QAAQ,CAACoT,SAAd,EAA0B;AAEzBmT,MAAAA,QAAQ,CAACnT,SAAT,CAAmB9+C,KAAnB,GAA2B0rC,QAAQ,CAACoT,SAApC;AACAmT,MAAAA,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BgsB,IAA3B,CAAiC0f,QAAQ,CAACsT,WAA1C;AACA,UAAKtT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BktB,MAA3B;AAElC;;AAED,QAAKwe,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;AAED;;AAED,WAASk+C,uBAAT,CAAkCprC,QAAlC,EAA4CvmB,QAA5C,EAAsDQ,WAAtD,EAAoE;AAEnE+lB,IAAAA,QAAQ,CAACvU,SAAT,CAAmB19C,KAAnB,GAA2B0rC,QAAQ,CAACgS,SAApC;AACAuU,IAAAA,QAAQ,CAACtU,SAAT,CAAmB39C,KAAnB,GAA2B0rC,QAAQ,CAACiS,SAApC;;AAEA,QAAKjS,QAAQ,CAAC0T,YAAd,EAA6B;AAE5B6S,MAAAA,QAAQ,CAAC7S,YAAT,CAAsBp/C,KAAtB,GAA8B0rC,QAAQ,CAAC0T,YAAvC;AAEA;;AAED,QAAK1T,QAAQ,CAAC2T,YAAd,EAA6B;AAE5B4S,MAAAA,QAAQ,CAAC5S,YAAT,CAAsBr/C,KAAtB,GAA8B0rC,QAAQ,CAAC2T,YAAvC;AAEA;;AAED,QAAK3T,QAAQ,CAAC4T,WAAd,EAA4B;AAE3B2S,MAAAA,QAAQ,CAAC3S,WAAT,CAAqBt/C,KAArB,GAA6B0rC,QAAQ,CAAC4T,WAAtC;AAEA;;AAED,QAAK5T,QAAQ,CAACkT,OAAd,EAAwB;AAEvBqT,MAAAA,QAAQ,CAACrT,OAAT,CAAiB5+C,KAAjB,GAAyB0rC,QAAQ,CAACkT,OAAlC;AACAqT,MAAAA,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,GAA2B0rC,QAAQ,CAACmT,SAApC;AACA,UAAKnT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,QAAK0rC,QAAQ,CAACoT,SAAd,EAA0B;AAEzBmT,MAAAA,QAAQ,CAACnT,SAAT,CAAmB9+C,KAAnB,GAA2B0rC,QAAQ,CAACoT,SAApC;AACAmT,MAAAA,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BgsB,IAA3B,CAAiC0f,QAAQ,CAACsT,WAA1C;AACA,UAAKtT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BktB,MAA3B;AAElC;;AAED,QAAKwe,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;;AAED,QAAKzT,QAAQ,CAAC8T,MAAT,IAAmBtT,WAAxB,EAAsC;AAErC;AACA+lB,MAAAA,QAAQ,CAACrS,eAAT,CAAyB5/C,KAAzB,GAAiC0rC,QAAQ,CAACkU,eAA1C;AAEA;AAED;;AAED,WAASw9C,uBAAT,CAAkCnrC,QAAlC,EAA4CvmB,QAA5C,EAAsDQ,WAAtD,EAAoE;AAEnEmxD,IAAAA,uBAAuB,CAAEprC,QAAF,EAAYvmB,QAAZ,EAAsBQ,WAAtB,CAAvB;AAEA+lB,IAAAA,QAAQ,CAACxS,YAAT,CAAsBz/C,KAAtB,GAA8B0rC,QAAQ,CAAC+T,YAAvC,CAJmE,CAId;;AAErDwS,IAAAA,QAAQ,CAAChU,SAAT,CAAmBj+C,KAAnB,GAA2B0rC,QAAQ,CAACuS,SAApC;AACAgU,IAAAA,QAAQ,CAAC/T,kBAAT,CAA4Bl+C,KAA5B,GAAoC0rC,QAAQ,CAACwS,kBAA7C;AACA,QAAKxS,QAAQ,CAACkS,KAAd,EAAsBqU,QAAQ,CAACrU,KAAT,CAAe59C,KAAf,CAAqBgsB,IAArB,CAA2B0f,QAAQ,CAACkS,KAApC;;AAEtB,QAAKlS,QAAQ,CAACyS,YAAd,EAA6B;AAE5B8T,MAAAA,QAAQ,CAAC9T,YAAT,CAAsBn+C,KAAtB,GAA8B0rC,QAAQ,CAACyS,YAAvC;AAEA;;AAED,QAAKzS,QAAQ,CAAC0S,qBAAd,EAAsC;AAErC6T,MAAAA,QAAQ,CAAC7T,qBAAT,CAA+Bp+C,KAA/B,GAAuC0rC,QAAQ,CAAC0S,qBAAhD;AAEA;;AAED,QAAK1S,QAAQ,CAAC2S,kBAAd,EAAmC;AAElC4T,MAAAA,QAAQ,CAAC3T,oBAAT,CAA8Bt+C,KAA9B,CAAoCgsB,IAApC,CAA0C0f,QAAQ,CAAC4S,oBAAnD;AACA2T,MAAAA,QAAQ,CAAC5T,kBAAT,CAA4Br+C,KAA5B,GAAoC0rC,QAAQ,CAAC2S,kBAA7C;;AAEA,UAAK3S,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC;AAEjC41C,QAAAA,QAAQ,CAAC3T,oBAAT,CAA8Bt+C,KAA9B,CAAoCktB,MAApC;AAEA;AAED;;AAED+kC,IAAAA,QAAQ,CAAC0U,YAAT,CAAsB3mE,KAAtB,GAA8B0rC,QAAQ,CAACi7B,YAAvC;AAEA;;AAED,WAAS42B,qBAAT,CAAgCtrC,QAAhC,EAA0CvmB,QAA1C,EAAqD;AAEpD,QAAKA,QAAQ,CAAC6S,MAAd,EAAuB;AAEtB0T,MAAAA,QAAQ,CAAC1T,MAAT,CAAgBv+C,KAAhB,GAAwB0rC,QAAQ,CAAC6S,MAAjC;AAEA;;AAED,QAAK7S,QAAQ,CAACkT,OAAd,EAAwB;AAEvBqT,MAAAA,QAAQ,CAACrT,OAAT,CAAiB5+C,KAAjB,GAAyB0rC,QAAQ,CAACkT,OAAlC;AACAqT,MAAAA,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,GAA2B0rC,QAAQ,CAACmT,SAApC;AACA,UAAKnT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,QAAK0rC,QAAQ,CAACoT,SAAd,EAA0B;AAEzBmT,MAAAA,QAAQ,CAACnT,SAAT,CAAmB9+C,KAAnB,GAA2B0rC,QAAQ,CAACoT,SAApC;AACAmT,MAAAA,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BgsB,IAA3B,CAAiC0f,QAAQ,CAACsT,WAA1C;AACA,UAAKtT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BktB,MAA3B;AAElC;;AAED,QAAKwe,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;AAED;;AAED,WAASq+C,oBAAT,CAA+BvrC,QAA/B,EAAyCvmB,QAAzC,EAAoD;AAEnD,QAAKA,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;AAED;;AAED,WAASs+C,uBAAT,CAAkCxrC,QAAlC,EAA4CvmB,QAA5C,EAAuD;AAEtD,QAAKA,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;;AAED8S,IAAAA,QAAQ,CAACqU,iBAAT,CAA2BtmE,KAA3B,CAAiCgsB,IAAjC,CAAuC0f,QAAQ,CAAC46B,iBAAhD;AACArU,IAAAA,QAAQ,CAACsU,YAAT,CAAsBvmE,KAAtB,GAA8B0rC,QAAQ,CAAC66B,YAAvC;AACAtU,IAAAA,QAAQ,CAACuU,WAAT,CAAqBxmE,KAArB,GAA6B0rC,QAAQ,CAAC86B,WAAtC;AAEA;;AAED,WAASm3B,qBAAT,CAAgC1rC,QAAhC,EAA0CvmB,QAA1C,EAAqD;AAEpD,QAAKA,QAAQ,CAACkT,OAAd,EAAwB;AAEvBqT,MAAAA,QAAQ,CAACrT,OAAT,CAAiB5+C,KAAjB,GAAyB0rC,QAAQ,CAACkT,OAAlC;AACAqT,MAAAA,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,GAA2B0rC,QAAQ,CAACmT,SAApC;AACA,UAAKnT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACpT,SAAT,CAAmB7+C,KAAnB,IAA4B,CAAE,CAA9B;AAElC;;AAED,QAAK0rC,QAAQ,CAACoT,SAAd,EAA0B;AAEzBmT,MAAAA,QAAQ,CAACnT,SAAT,CAAmB9+C,KAAnB,GAA2B0rC,QAAQ,CAACoT,SAApC;AACAmT,MAAAA,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BgsB,IAA3B,CAAiC0f,QAAQ,CAACsT,WAA1C;AACA,UAAKtT,QAAQ,CAACyP,IAAT,KAAkB9+B,QAAvB,EAAkC41C,QAAQ,CAACjT,WAAT,CAAqBh/C,KAArB,CAA2BktB,MAA3B;AAElC;;AAED,QAAKwe,QAAQ,CAACuT,eAAd,EAAgC;AAE/BgT,MAAAA,QAAQ,CAAChT,eAAT,CAAyBj/C,KAAzB,GAAiC0rC,QAAQ,CAACuT,eAA1C;AACAgT,MAAAA,QAAQ,CAAC/S,iBAAT,CAA2Bl/C,KAA3B,GAAmC0rC,QAAQ,CAACwT,iBAA5C;AACA+S,MAAAA,QAAQ,CAAC9S,gBAAT,CAA0Bn/C,KAA1B,GAAkC0rC,QAAQ,CAACyT,gBAA3C;AAEA;AAED;;AAED,SAAO;AACNo9C,IAAAA,kBAAkB,EAAEA,kBADd;AAENG,IAAAA,uBAAuB,EAAEA;AAFnB,GAAP;AAKA;AAED;;;;;;;;;AAQA,SAAS6B,aAAT,CAAwB/yD,UAAxB,EAAqC;AAEpCA,EAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;;AAEA,QAAMrY,OAAO,GAAGqY,UAAU,CAAC/X,MAAX,KAAsB91B,SAAtB,GAAkC6tC,UAAU,CAAC/X,MAA7C,GAAsDhyB,QAAQ,CAACiyB,eAAT,CAA0B,8BAA1B,EAA0D,QAA1D,CAAtE;AAAA,QACC8qE,QAAQ,GAAGhzD,UAAU,CAAC7X,OAAX,KAAuBh2B,SAAvB,GAAmC6tC,UAAU,CAAC7X,OAA9C,GAAwD,IADpE;AAAA,QAGC8qE,MAAM,GAAGjzD,UAAU,CAACvd,KAAX,KAAqBtwB,SAArB,GAAiC6tC,UAAU,CAACvd,KAA5C,GAAoD,KAH9D;AAAA,QAICywE,MAAM,GAAGlzD,UAAU,CAACklB,KAAX,KAAqB/yD,SAArB,GAAiC6tC,UAAU,CAACklB,KAA5C,GAAoD,IAJ9D;AAAA,QAKCiuC,QAAQ,GAAGnzD,UAAU,CAAC0qB,OAAX,KAAuBv4D,SAAvB,GAAmC6tC,UAAU,CAAC0qB,OAA9C,GAAwD,IALpE;AAAA,QAMC0oC,UAAU,GAAGpzD,UAAU,CAAC0uD,SAAX,KAAyBv8F,SAAzB,GAAqC6tC,UAAU,CAAC0uD,SAAhD,GAA4D,KAN1E;AAAA,QAOC2E,mBAAmB,GAAGrzD,UAAU,CAAC0R,kBAAX,KAAkCv/C,SAAlC,GAA8C6tC,UAAU,CAAC0R,kBAAzD,GAA8E,IAPrG;AAAA,QAQC4hD,sBAAsB,GAAGtzD,UAAU,CAACuzD,qBAAX,KAAqCphG,SAArC,GAAiD6tC,UAAU,CAACuzD,qBAA5D,GAAoF,KAR9G;AAAA,QASCC,gBAAgB,GAAGxzD,UAAU,CAACyzD,eAAX,KAA+BthG,SAA/B,GAA2C6tC,UAAU,CAACyzD,eAAtD,GAAwE,SAT5F;AAAA,QAUCC,6BAA6B,GAAG1zD,UAAU,CAAC2zD,4BAAX,KAA4CxhG,SAA5C,GAAwD6tC,UAAU,CAAC2zD,4BAAnE,GAAkG,KAVnI;;AAYA,MAAIC,iBAAiB,GAAG,IAAxB;AACA,MAAIC,kBAAkB,GAAG,IAAzB,CAjBoC,CAmBpC;;AAEA,OAAK79F,UAAL,GAAkB2xB,OAAlB,CArBoC,CAuBpC;;AACA,OAAK6rD,KAAL,GAAa;AAEZ;;;;AAIAC,IAAAA,iBAAiB,EAAE;AANP,GAAb,CAxBoC,CAiCpC;;AAEA,OAAKrX,SAAL,GAAiB,IAAjB;AACA,OAAKC,cAAL,GAAsB,IAAtB;AACA,OAAKC,cAAL,GAAsB,IAAtB;AACA,OAAKC,gBAAL,GAAwB,IAAxB,CAtCoC,CAwCpC;;AAEA,OAAKu3B,WAAL,GAAmB,IAAnB,CA1CoC,CA4CpC;;AAEA,OAAK/iD,cAAL,GAAsB,EAAtB;AACA,OAAK8xB,oBAAL,GAA4B,KAA5B,CA/CoC,CAiDpC;;AAEA,OAAKh1B,WAAL,GAAmB,GAAnB,CAnDoC,CAmDZ;;AACxB,OAAKglC,cAAL,GAAsBj5D,cAAtB,CApDoC,CAsDpC;;AAEA,OAAK24D,uBAAL,GAA+B,KAA/B,CAxDoC,CA0DpC;;AAEA,OAAK9V,WAAL,GAAmBvpD,aAAnB;AACA,OAAK6gF,mBAAL,GAA2B,GAA3B,CA7DoC,CA+DpC;;AAEA,OAAKtd,eAAL,GAAuB,CAAvB;AACA,OAAKC,eAAL,GAAuB,CAAvB,CAlEoC,CAoEpC;;AAEA,QAAMh7E,KAAK,GAAG,IAAd;;AAEA,MAAIs4F,cAAc,GAAG,KAArB,CAxEoC,CA0EpC;;AAEA,MAAIC,YAAY,GAAG,IAAnB;AAEA,MAAIC,sBAAsB,GAAG,CAA7B;AACA,MAAIC,yBAAyB,GAAG,CAAhC;AACA,MAAIC,oBAAoB,GAAG,IAA3B;AACA,MAAIC,mBAAmB,GAAG,IAA1B;;AACA,MAAIC,kBAAkB,GAAG,CAAE,CAA3B;;AAEA,MAAIC,cAAc,GAAG,IAArB;AACA,MAAIC,mBAAmB,GAAG,IAA1B;;AAEA,QAAMC,gBAAgB,GAAG,IAAI5pE,OAAJ,EAAzB;;AACA,QAAM6pE,eAAe,GAAG,IAAI7pE,OAAJ,EAAxB;;AACA,MAAI8pE,mBAAmB,GAAG,IAA1B,CAzFoC,CA2FpC;;AAEA,MAAIC,MAAM,GAAGjtE,OAAO,CAAC5sB,KAArB;AACA,MAAI85F,OAAO,GAAGltE,OAAO,CAAC3sB,MAAtB;AAEA,MAAI85F,WAAW,GAAG,CAAlB;AACA,MAAIC,WAAW,GAAG,IAAlB;AACA,MAAIC,gBAAgB,GAAG,IAAvB;;AAEA,QAAMzY,SAAS,GAAG,IAAI1xD,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB+pE,MAAnB,EAA2BC,OAA3B,CAAlB;;AACA,QAAMI,QAAQ,GAAG,IAAIpqE,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB+pE,MAAnB,EAA2BC,OAA3B,CAAjB;;AACA,MAAIK,YAAY,GAAG,KAAnB,CAtGoC,CAwGpC;;AAEA,QAAM9Y,QAAQ,GAAG,IAAIhxB,OAAJ,EAAjB,CA1GoC,CA4GpC;;;AAEA,QAAM+pC,SAAS,GAAG,IAAIzyB,aAAJ,EAAlB;;AACA,MAAI0yB,gBAAgB,GAAG,KAAvB;AACA,MAAIC,qBAAqB,GAAG,KAA5B,CAhHoC,CAkHpC;;AAEA,QAAMC,iBAAiB,GAAG,IAAIxgE,OAAJ,EAA1B;;AAEA,QAAMygE,QAAQ,GAAG,IAAI5jE,OAAJ,EAAjB;;AAEA,QAAM6jE,WAAW,GAAG;AAAExzF,IAAAA,UAAU,EAAE,IAAd;AAAoB2+B,IAAAA,GAAG,EAAE,IAAzB;AAA+BD,IAAAA,WAAW,EAAE,IAA5C;AAAkDE,IAAAA,gBAAgB,EAAE,IAApE;AAA0EK,IAAAA,OAAO,EAAE;AAAnF,GAApB;;AAEA,WAASw0D,mBAAT,GAA+B;AAE9B,WAAOrB,oBAAoB,KAAK,IAAzB,GAAgCU,WAAhC,GAA8C,CAArD;AAEA,GA9HmC,CAgIpC;;;AAEA,MAAIhQ,GAAG,GAAGkO,QAAV;;AAEA,WAAS5qE,UAAT,CAAqBstE,YAArB,EAAmCC,iBAAnC,EAAuD;AAEtD,SAAM,IAAIvkG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGskG,YAAY,CAAC3lG,MAAlC,EAA0CqB,CAAC,EAA3C,EAAiD;AAEhD,YAAMwkG,WAAW,GAAGF,YAAY,CAAEtkG,CAAF,CAAhC;;AACA,YAAM+2B,OAAO,GAAGR,OAAO,CAACS,UAAR,CAAoBwtE,WAApB,EAAiCD,iBAAjC,CAAhB;;AACA,UAAKxtE,OAAO,KAAK,IAAjB,EAAwB,OAAOA,OAAP;AAExB;;AAED,WAAO,IAAP;AAEA;;AAED,MAAI;AAEH,UAAMwtE,iBAAiB,GAAG;AACzBlzE,MAAAA,KAAK,EAAEwwE,MADkB;AAEzB/tC,MAAAA,KAAK,EAAEguC,MAFkB;AAGzBxoC,MAAAA,OAAO,EAAEyoC,QAHgB;AAIzBzE,MAAAA,SAAS,EAAE0E,UAJc;AAKzB1hD,MAAAA,kBAAkB,EAAE2hD,mBALK;AAMzBE,MAAAA,qBAAqB,EAAED,sBANE;AAOzBG,MAAAA,eAAe,EAAED,gBAPQ;AAQzBG,MAAAA,4BAA4B,EAAED;AARL,KAA1B,CAFG,CAaH;;AAEA/rE,IAAAA,OAAO,CAAC3tB,gBAAR,CAA0B,kBAA1B,EAA8C67F,aAA9C,EAA6D,KAA7D;;AACAluE,IAAAA,OAAO,CAAC3tB,gBAAR,CAA0B,sBAA1B,EAAkD87F,gBAAlD,EAAoE,KAApE;;AAEA,QAAKhR,GAAG,KAAK,IAAb,EAAoB;AAEnB,YAAM4Q,YAAY,GAAG,CAAE,QAAF,EAAY,OAAZ,EAAqB,oBAArB,CAArB;;AAEA,UAAKh6F,KAAK,CAACq6F,gBAAN,KAA2B,IAAhC,EAAuC;AAEtCL,QAAAA,YAAY,CAACM,KAAb;AAEA;;AAEDlR,MAAAA,GAAG,GAAG18D,UAAU,CAAEstE,YAAF,EAAgBC,iBAAhB,CAAhB;;AAEA,UAAK7Q,GAAG,KAAK,IAAb,EAAoB;AAEnB,YAAK18D,UAAU,CAAEstE,YAAF,CAAf,EAAkC;AAEjC,gBAAM,IAAIhhG,KAAJ,CAAW,6DAAX,CAAN;AAEA,SAJD,MAIO;AAEN,gBAAM,IAAIA,KAAJ,CAAW,+BAAX,CAAN;AAEA;AAED;AAED,KA5CE,CA8CH;;;AAEA,QAAKowF,GAAG,CAACrjB,wBAAJ,KAAiCtvE,SAAtC,EAAkD;AAEjD2yF,MAAAA,GAAG,CAACrjB,wBAAJ,GAA+B,YAAY;AAE1C,eAAO;AAAE,sBAAY,CAAd;AAAiB,sBAAY,CAA7B;AAAgC,uBAAa;AAA7C,SAAP;AAEA,OAJD;AAMA;AAED,GA1DD,CA0DE,OAAQn+C,KAAR,EAAgB;AAEjBzD,IAAAA,OAAO,CAACyD,KAAR,CAAe,0BAA0BA,KAAK,CAAC2yE,OAA/C;AACA,UAAM3yE,KAAN;AAEA;;AAED,MAAI8jC,UAAJ,EAAgBwJ,YAAhB,EAA8ByK,KAA9B,EAAqCwF,IAArC;AACA,MAAIvS,UAAJ,EAAgBjkC,QAAhB,EAA0BkwB,UAA1B,EAAsCnb,UAAtC,EAAkDk8B,OAAlD;AACA,MAAI46B,YAAJ,EAAkB72D,SAAlB,EAA6B82D,WAA7B,EAA0Cza,YAA1C;AAEA,MAAI15E,UAAJ,EAAgBo0F,YAAhB,EAA8BC,cAA9B,EAA8CC,qBAA9C;AAEA,MAAIvR,KAAJ,EAAW5nB,aAAX;;AAEA,WAASo5B,aAAT,GAAyB;AAExBnvC,IAAAA,UAAU,GAAG,IAAI8c,eAAJ,CAAqB4gB,GAArB,CAAb;AAEAl0B,IAAAA,YAAY,GAAG,IAAIwQ,iBAAJ,CAAuB0jB,GAAvB,EAA4B19B,UAA5B,EAAwCpnB,UAAxC,CAAf;;AAEA,QAAK4wB,YAAY,CAACC,QAAb,KAA0B,KAA/B,EAAuC;AAEtCzJ,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,qBAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,mBAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,+BAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,0BAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,yBAAhB;AACAo4C,MAAAA,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB;AAEA;;AAEDo4C,IAAAA,UAAU,CAACp4C,GAAX,CAAgB,0BAAhB;AAEA+1E,IAAAA,KAAK,GAAG,IAAI8F,UAAJ,CAAgB/F,GAAhB,EAAqB19B,UAArB,EAAiCwJ,YAAjC,CAAR;AAEAyK,IAAAA,KAAK,GAAG,IAAIokB,UAAJ,CAAgBqF,GAAhB,EAAqB19B,UAArB,EAAiCwJ,YAAjC,CAAR;AACAyK,IAAAA,KAAK,CAAC3uC,OAAN,CAAegoE,eAAe,CAACl0E,IAAhB,CAAsBy0E,QAAtB,EAAiCj0E,cAAjC,CAAiD8zE,WAAjD,EAA+DlhG,KAA/D,EAAf;AACAynE,IAAAA,KAAK,CAACzuC,QAAN,CAAgB6nE,gBAAgB,CAACj0E,IAAjB,CAAuB+7D,SAAvB,EAAmCv7D,cAAnC,CAAmD8zE,WAAnD,EAAiElhG,KAAjE,EAAhB;AAEAitE,IAAAA,IAAI,GAAG,IAAIqE,SAAJ,CAAe4f,GAAf,CAAP;AACAx2B,IAAAA,UAAU,GAAG,IAAIgpB,eAAJ,EAAb;AACAjtD,IAAAA,QAAQ,GAAG,IAAIw6D,aAAJ,CAAmBC,GAAnB,EAAwB19B,UAAxB,EAAoCiU,KAApC,EAA2C/M,UAA3C,EAAuDsC,YAAvD,EAAqEm0B,KAArE,EAA4ElkB,IAA5E,CAAX;AACAtmB,IAAAA,UAAU,GAAG,IAAImW,eAAJ,CAAqBo0B,GAArB,EAA0Bl0B,YAA1B,CAAb;AACAuM,IAAAA,aAAa,GAAG,IAAIJ,kBAAJ,CAAwB+nB,GAAxB,EAA6B19B,UAA7B,EAAyC7M,UAAzC,EAAqDqW,YAArD,CAAhB;AACAxxB,IAAAA,UAAU,GAAG,IAAIglC,eAAJ,CAAqB0gB,GAArB,EAA0BvqC,UAA1B,EAAsCsmB,IAAtC,EAA4C1D,aAA5C,CAAb;AACA7B,IAAAA,OAAO,GAAG,IAAI8K,YAAJ,CAAkB0e,GAAlB,EAAuB1lD,UAAvB,EAAmCmb,UAAnC,EAA+CsmB,IAA/C,CAAV;AACAu1B,IAAAA,YAAY,GAAG,IAAIzwB,iBAAJ,CAAuBmf,GAAvB,CAAf;AACAoR,IAAAA,YAAY,GAAG,IAAIxhB,aAAJ,CAAmBh5E,KAAnB,EAA0B0rD,UAA1B,EAAsCwJ,YAAtC,EAAoDuM,aAApD,CAAf;AACA99B,IAAAA,SAAS,GAAG,IAAIyxD,cAAJ,CAAoBxiC,UAApB,CAAZ;AACA6nC,IAAAA,WAAW,GAAG,IAAI/d,gBAAJ,EAAd;AACAsD,IAAAA,YAAY,GAAG,IAAID,iBAAJ,EAAf;AAEAz5E,IAAAA,UAAU,GAAG,IAAIo5D,eAAJ,CAAqB1/D,KAArB,EAA4B2/D,KAA5B,EAAmCC,OAAnC,EAA4C+3B,mBAA5C,CAAb;AAEAgD,IAAAA,cAAc,GAAG,IAAIz1B,mBAAJ,CAAyBkkB,GAAzB,EAA8B19B,UAA9B,EAA0CyZ,IAA1C,EAAgDjQ,YAAhD,CAAjB;AACA0lC,IAAAA,qBAAqB,GAAG,IAAItxB,0BAAJ,CAAgC8f,GAAhC,EAAqC19B,UAArC,EAAiDyZ,IAAjD,EAAuDjQ,YAAvD,CAAxB;AAEAiQ,IAAAA,IAAI,CAAC0E,QAAL,GAAgB2wB,YAAY,CAAC3wB,QAA7B;AAEA7pE,IAAAA,KAAK,CAACk1D,YAAN,GAAqBA,YAArB;AACAl1D,IAAAA,KAAK,CAAC0rD,UAAN,GAAmBA,UAAnB;AACA1rD,IAAAA,KAAK,CAAC4yD,UAAN,GAAmBA,UAAnB;AACA5yD,IAAAA,KAAK,CAACy6F,WAAN,GAAoBA,WAApB;AACAz6F,IAAAA,KAAK,CAAC2/D,KAAN,GAAcA,KAAd;AACA3/D,IAAAA,KAAK,CAACmlE,IAAN,GAAaA,IAAb;AAEA;;AAED01B,EAAAA,aAAa,GAnRuB,CAqRpC;;AAEA,QAAMnsC,EAAE,GAAG,IAAI2iC,YAAJ,CAAkBrxF,KAAlB,EAAyBopF,GAAzB,CAAX;AAEA,OAAK16B,EAAL,GAAUA,EAAV,CAzRoC,CA2RpC;;AAEA,QAAM2sB,SAAS,GAAG,IAAIkF,cAAJ,CAAoBvgF,KAApB,EAA2B4/D,OAA3B,EAAoC1K,YAAY,CAACoR,cAAjD,CAAlB;AAEA,OAAK+U,SAAL,GAAiBA,SAAjB,CA/RoC,CAiSpC;;AAEA,OAAK3uD,UAAL,GAAkB,YAAY;AAE7B,WAAO08D,GAAP;AAEA,GAJD;;AAMA,OAAKwJ,oBAAL,GAA4B,YAAY;AAEvC,WAAOxJ,GAAG,CAACwJ,oBAAJ,EAAP;AAEA,GAJD;;AAMA,OAAKkI,gBAAL,GAAwB,YAAY;AAEnC,UAAMv5B,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,oBAAhB,CAAlB;AACA,QAAKiuD,SAAL,EAAiBA,SAAS,CAACw5B,WAAV;AAEjB,GALD;;AAOA,OAAKC,mBAAL,GAA2B,YAAY;AAEtC,UAAMz5B,SAAS,GAAG7V,UAAU,CAACp4C,GAAX,CAAgB,oBAAhB,CAAlB;AACA,QAAKiuD,SAAL,EAAiBA,SAAS,CAAC05B,cAAV;AAEjB,GALD;;AAOA,OAAKC,aAAL,GAAqB,YAAY;AAEhC,WAAO9B,WAAP;AAEA,GAJD;;AAMA,OAAK+B,aAAL,GAAqB,UAAWriG,KAAX,EAAmB;AAEvC,QAAKA,KAAK,KAAKrC,SAAf,EAA2B;AAE3B2iG,IAAAA,WAAW,GAAGtgG,KAAd;AAEA,SAAK04B,OAAL,CAAc0nE,MAAd,EAAsBC,OAAtB,EAA+B,KAA/B;AAEA,GARD;;AAUA,OAAKvxD,OAAL,GAAe,UAAW/yC,MAAX,EAAoB;AAElC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,iEAAd;AAEAvvB,MAAAA,MAAM,GAAG,IAAIwvB,OAAJ,EAAT;AAEA;;AAED,WAAOxvB,MAAM,CAACqvB,GAAP,CAAYg1E,MAAZ,EAAoBC,OAApB,CAAP;AAEA,GAZD;;AAcA,OAAK3nE,OAAL,GAAe,UAAWnyB,KAAX,EAAkBC,MAAlB,EAA0B87F,WAA1B,EAAwC;AAEtD,QAAK1sC,EAAE,CAACsjC,YAAR,EAAuB;AAEtB7tE,MAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA;AAEA;;AAED80E,IAAAA,MAAM,GAAG75F,KAAT;AACA85F,IAAAA,OAAO,GAAG75F,MAAV;AAEA2sB,IAAAA,OAAO,CAAC5sB,KAAR,GAAgB3L,IAAI,CAACwE,KAAL,CAAYmH,KAAK,GAAG+5F,WAApB,CAAhB;AACAntE,IAAAA,OAAO,CAAC3sB,MAAR,GAAiB5L,IAAI,CAACwE,KAAL,CAAYoH,MAAM,GAAG85F,WAArB,CAAjB;;AAEA,QAAKgC,WAAW,KAAK,KAArB,EAA6B;AAE5BnvE,MAAAA,OAAO,CAACxwB,KAAR,CAAc4D,KAAd,GAAsBA,KAAK,GAAG,IAA9B;AACA4sB,MAAAA,OAAO,CAACxwB,KAAR,CAAc6D,MAAd,GAAuBA,MAAM,GAAG,IAAhC;AAEA;;AAED,SAAK+7F,WAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwBh8F,KAAxB,EAA+BC,MAA/B;AAEA,GAxBD;;AA0BA,OAAKg8F,oBAAL,GAA4B,UAAWzmG,MAAX,EAAoB;AAE/C,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,8EAAd;AAEAvvB,MAAAA,MAAM,GAAG,IAAIwvB,OAAJ,EAAT;AAEA;;AAED,WAAOxvB,MAAM,CAACqvB,GAAP,CAAYg1E,MAAM,GAAGE,WAArB,EAAkCD,OAAO,GAAGC,WAA5C,EAA0DlhG,KAA1D,EAAP;AAEA,GAZD;;AAcA,OAAKqjG,oBAAL,GAA4B,UAAWl8F,KAAX,EAAkBC,MAAlB,EAA0Bm2F,UAA1B,EAAuC;AAElEyD,IAAAA,MAAM,GAAG75F,KAAT;AACA85F,IAAAA,OAAO,GAAG75F,MAAV;AAEA85F,IAAAA,WAAW,GAAG3D,UAAd;AAEAxpE,IAAAA,OAAO,CAAC5sB,KAAR,GAAgB3L,IAAI,CAACwE,KAAL,CAAYmH,KAAK,GAAGo2F,UAApB,CAAhB;AACAxpE,IAAAA,OAAO,CAAC3sB,MAAR,GAAiB5L,IAAI,CAACwE,KAAL,CAAYoH,MAAM,GAAGm2F,UAArB,CAAjB;AAEA,SAAK4F,WAAL,CAAkB,CAAlB,EAAqB,CAArB,EAAwBh8F,KAAxB,EAA+BC,MAA/B;AAEA,GAZD;;AAcA,OAAKk8F,kBAAL,GAA0B,UAAW3mG,MAAX,EAAoB;AAE7C,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;AAEAvvB,MAAAA,MAAM,GAAG,IAAIs6B,OAAJ,EAAT;AAEA;;AAED,WAAOt6B,MAAM,CAACiwB,IAAP,CAAai0E,gBAAb,CAAP;AAEA,GAZD;;AAcA,OAAKtW,WAAL,GAAmB,UAAW5tF,MAAX,EAAoB;AAEtC,WAAOA,MAAM,CAACiwB,IAAP,CAAa+7D,SAAb,CAAP;AAEA,GAJD;;AAMA,OAAKwa,WAAL,GAAmB,UAAWt+F,CAAX,EAAcE,CAAd,EAAiBoC,KAAjB,EAAwBC,MAAxB,EAAiC;AAEnD,QAAKvC,CAAC,CAACsyB,SAAP,EAAmB;AAElBwxD,MAAAA,SAAS,CAAC38D,GAAV,CAAennB,CAAC,CAACA,CAAjB,EAAoBA,CAAC,CAACE,CAAtB,EAAyBF,CAAC,CAACqyB,CAA3B,EAA8BryB,CAAC,CAACyV,CAAhC;AAEA,KAJD,MAIO;AAENquE,MAAAA,SAAS,CAAC38D,GAAV,CAAennB,CAAf,EAAkBE,CAAlB,EAAqBoC,KAArB,EAA4BC,MAA5B;AAEA;;AAEDqgE,IAAAA,KAAK,CAACzuC,QAAN,CAAgB6nE,gBAAgB,CAACj0E,IAAjB,CAAuB+7D,SAAvB,EAAmCv7D,cAAnC,CAAmD8zE,WAAnD,EAAiElhG,KAAjE,EAAhB;AAEA,GAdD;;AAgBA,OAAKujG,UAAL,GAAkB,UAAW5mG,MAAX,EAAoB;AAErC,WAAOA,MAAM,CAACiwB,IAAP,CAAay0E,QAAb,CAAP;AAEA,GAJD;;AAMA,OAAKmC,UAAL,GAAkB,UAAW3+F,CAAX,EAAcE,CAAd,EAAiBoC,KAAjB,EAAwBC,MAAxB,EAAiC;AAElD,QAAKvC,CAAC,CAACsyB,SAAP,EAAmB;AAElBkqE,MAAAA,QAAQ,CAACr1E,GAAT,CAAcnnB,CAAC,CAACA,CAAhB,EAAmBA,CAAC,CAACE,CAArB,EAAwBF,CAAC,CAACqyB,CAA1B,EAA6BryB,CAAC,CAACyV,CAA/B;AAEA,KAJD,MAIO;AAEN+mF,MAAAA,QAAQ,CAACr1E,GAAT,CAAcnnB,CAAd,EAAiBE,CAAjB,EAAoBoC,KAApB,EAA2BC,MAA3B;AAEA;;AAEDqgE,IAAAA,KAAK,CAAC3uC,OAAN,CAAegoE,eAAe,CAACl0E,IAAhB,CAAsBy0E,QAAtB,EAAiCj0E,cAAjC,CAAiD8zE,WAAjD,EAA+DlhG,KAA/D,EAAf;AAEA,GAdD;;AAgBA,OAAKyjG,cAAL,GAAsB,YAAY;AAEjC,WAAOnC,YAAP;AAEA,GAJD;;AAMA,OAAKvX,cAAL,GAAsB,UAAW2Z,OAAX,EAAqB;AAE1Cj8B,IAAAA,KAAK,CAACsiB,cAAN,CAAsBuX,YAAY,GAAGoC,OAArC;AAEA,GAJD;;AAMA,OAAKC,aAAL,GAAqB,UAAWrsF,MAAX,EAAoB;AAExC6pF,IAAAA,WAAW,GAAG7pF,MAAd;AAEA,GAJD;;AAMA,OAAKssF,kBAAL,GAA0B,UAAWtsF,MAAX,EAAoB;AAE7C8pF,IAAAA,gBAAgB,GAAG9pF,MAAnB;AAEA,GAJD,CA7doC,CAmepC;;;AAEA,OAAKyxD,aAAL,GAAqB,YAAY;AAEhC,WAAO36D,UAAU,CAAC26D,aAAX,EAAP;AAEA,GAJD;;AAMA,OAAKC,aAAL,GAAqB,YAAY;AAEhC56D,IAAAA,UAAU,CAAC46D,aAAX,CAAyBvrE,KAAzB,CAAgC2Q,UAAhC,EAA4CtR,SAA5C;AAEA,GAJD;;AAMA,OAAKmsE,aAAL,GAAqB,YAAY;AAEhC,WAAO76D,UAAU,CAAC66D,aAAX,EAAP;AAEA,GAJD;;AAMA,OAAKC,aAAL,GAAqB,YAAY;AAEhC96D,IAAAA,UAAU,CAAC86D,aAAX,CAAyBzrE,KAAzB,CAAgC2Q,UAAhC,EAA4CtR,SAA5C;AAEA,GAJD;;AAMA,OAAK+5D,KAAL,GAAa,UAAW57D,KAAX,EAAkBq2D,KAAlB,EAAyBwF,OAAzB,EAAmC;AAE/C,QAAI+sC,IAAI,GAAG,CAAX;AAEA,QAAK5oG,KAAK,KAAKsD,SAAV,IAAuBtD,KAA5B,EAAoC4oG,IAAI,IAAI,KAAR;AACpC,QAAKvyC,KAAK,KAAK/yD,SAAV,IAAuB+yD,KAA5B,EAAoCuyC,IAAI,IAAI,GAAR;AACpC,QAAK/sC,OAAO,KAAKv4D,SAAZ,IAAyBu4D,OAA9B,EAAwC+sC,IAAI,IAAI,IAAR;;AAExC3S,IAAAA,GAAG,CAACr6B,KAAJ,CAAWgtC,IAAX;AAEA,GAVD;;AAYA,OAAKl8B,UAAL,GAAkB,YAAY;AAE7B,SAAK9Q,KAAL,CAAY,IAAZ,EAAkB,KAAlB,EAAyB,KAAzB;AAEA,GAJD;;AAMA,OAAK+1B,UAAL,GAAkB,YAAY;AAE7B,SAAK/1B,KAAL,CAAY,KAAZ,EAAmB,IAAnB,EAAyB,KAAzB;AAEA,GAJD;;AAMA,OAAK62B,YAAL,GAAoB,YAAY;AAE/B,SAAK72B,KAAL,CAAY,KAAZ,EAAmB,KAAnB,EAA0B,IAA1B;AAEA,GAJD,CArhBoC,CA2hBpC;;;AAEA,OAAK//B,OAAL,GAAe,YAAY;AAE1B/C,IAAAA,OAAO,CAACztB,mBAAR,CAA6B,kBAA7B,EAAiD27F,aAAjD,EAAgE,KAAhE;;AACAluE,IAAAA,OAAO,CAACztB,mBAAR,CAA6B,sBAA7B,EAAqD47F,gBAArD,EAAuE,KAAvE;;AAEAK,IAAAA,WAAW,CAACzrE,OAAZ;AACAgxD,IAAAA,YAAY,CAAChxD,OAAb;AACA4jC,IAAAA,UAAU,CAAC5jC,OAAX;AACA4wC,IAAAA,OAAO,CAAC5wC,OAAR;AACAyyC,IAAAA,aAAa,CAACzyC,OAAd;AAEA0/B,IAAAA,EAAE,CAAC1/B,OAAH;AAEAsjE,IAAAA,SAAS,CAAC19B,IAAV;AAEA,GAfD,CA7hBoC,CA8iBpC;;;AAEA,WAASulC,aAAT,CAAwBh8F,KAAxB,EAAgC;AAE/BA,IAAAA,KAAK,CAAC4F,cAAN;AAEAogB,IAAAA,OAAO,CAACliB,GAAR,CAAa,oCAAb;AAEAq2F,IAAAA,cAAc,GAAG,IAAjB;AAEA;;AAED,WAAS8B,gBAAT;AAA2B;AAAc;AAExCj2E,IAAAA,OAAO,CAACliB,GAAR,CAAa,wCAAb;AAEAq2F,IAAAA,cAAc,GAAG,KAAjB;AAEAuC,IAAAA,aAAa;AAEb;;AAED,WAASmB,iBAAT,CAA4B79F,KAA5B,EAAoC;AAEnC,UAAMqmC,QAAQ,GAAGrmC,KAAK,CAACtJ,MAAvB;AAEA2vC,IAAAA,QAAQ,CAAChmC,mBAAT,CAA8B,SAA9B,EAAyCw9F,iBAAzC;AAEAC,IAAAA,kBAAkB,CAAEz3D,QAAF,CAAlB;AAEA,GA5kBmC,CA8kBpC;;;AAEA,WAASy3D,kBAAT,CAA6Bz3D,QAA7B,EAAwC;AAEvC03D,IAAAA,+BAA+B,CAAE13D,QAAF,CAA/B;AAEAouB,IAAAA,UAAU,CAACxjD,MAAX,CAAmBo1B,QAAnB;AAEA;;AAGD,WAAS03D,+BAAT,CAA0C13D,QAA1C,EAAqD;AAEpD,UAAM23D,WAAW,GAAGvpC,UAAU,CAACt/C,GAAX,CAAgBkxB,QAAhB,EAA2Bs9B,OAA/C;AAEAt9B,IAAAA,QAAQ,CAACs9B,OAAT,GAAmBrrE,SAAnB;;AAEA,QAAK0lG,WAAW,KAAK1lG,SAArB,EAAiC;AAEhC+jG,MAAAA,YAAY,CAAC9e,cAAb,CAA6BygB,WAA7B;AAEA;AAED,GArmBmC,CAumBpC;;;AAEA,WAASC,qBAAT,CAAgCjiG,MAAhC,EAAwC2nE,OAAxC,EAAkD;AAEjD3nE,IAAAA,MAAM,CAAC20D,MAAP,CAAe,UAAW30D,MAAX,EAAoB;AAElC6F,MAAAA,KAAK,CAACq8F,qBAAN,CAA6BliG,MAA7B,EAAqC2nE,OAArC;AAEA,KAJD;AAMA;;AAED,OAAKu6B,qBAAL,GAA6B,UAAWliG,MAAX,EAAmB2nE,OAAnB,EAA6B;AAEzDL,IAAAA,aAAa,CAAC6B,cAAd;AAEA,UAAMlO,OAAO,GAAGxC,UAAU,CAACt/C,GAAX,CAAgBnZ,MAAhB,CAAhB;AAEA,QAAKA,MAAM,CAACmiG,YAAP,IAAuB,CAAElnC,OAAO,CAACl5D,QAAtC,EAAiDk5D,OAAO,CAACl5D,QAAR,GAAmBktF,GAAG,CAAC9zB,YAAJ,EAAnB;AACjD,QAAKn7D,MAAM,CAACoiG,UAAP,IAAqB,CAAEnnC,OAAO,CAAC/8B,MAApC,EAA6C+8B,OAAO,CAAC/8B,MAAR,GAAiB+wD,GAAG,CAAC9zB,YAAJ,EAAjB;AAC7C,QAAKn7D,MAAM,CAACqiG,MAAP,IAAiB,CAAEpnC,OAAO,CAAClmC,EAAhC,EAAqCkmC,OAAO,CAAClmC,EAAR,GAAak6D,GAAG,CAAC9zB,YAAJ,EAAb;AACrC,QAAKn7D,MAAM,CAACsiG,SAAP,IAAoB,CAAErnC,OAAO,CAACjiE,KAAnC,EAA2CiiE,OAAO,CAACjiE,KAAR,GAAgBi2F,GAAG,CAAC9zB,YAAJ,EAAhB;AAE3C,UAAM2O,iBAAiB,GAAGnC,OAAO,CAACoC,aAAR,EAA1B;;AAEA,QAAK/pE,MAAM,CAACmiG,YAAZ,EAA2B;AAE1BlT,MAAAA,GAAG,CAAC3zB,UAAJ,CAAgB,KAAhB,EAAuBL,OAAO,CAACl5D,QAA/B;;AACAktF,MAAAA,GAAG,CAAC1zB,UAAJ,CAAgB,KAAhB,EAAuBv7D,MAAM,CAACuiG,aAA9B,EAA6C,KAA7C;;AAEAj7B,MAAAA,aAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAAC/nE,QAAjD;;AACAktF,MAAAA,GAAG,CAACvlB,mBAAJ,CAAyBI,iBAAiB,CAAC/nE,QAA3C,EAAqD,CAArD,EAAwD,IAAxD,EAA8D,KAA9D,EAAqE,CAArE,EAAwE,CAAxE;AAEA;;AAED,QAAK/B,MAAM,CAACoiG,UAAZ,EAAyB;AAExBnT,MAAAA,GAAG,CAAC3zB,UAAJ,CAAgB,KAAhB,EAAuBL,OAAO,CAAC/8B,MAA/B;;AACA+wD,MAAAA,GAAG,CAAC1zB,UAAJ,CAAgB,KAAhB,EAAuBv7D,MAAM,CAACwiG,WAA9B,EAA2C,KAA3C;;AAEAl7B,MAAAA,aAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAAC5rC,MAAjD;;AACA+wD,MAAAA,GAAG,CAACvlB,mBAAJ,CAAyBI,iBAAiB,CAAC5rC,MAA3C,EAAmD,CAAnD,EAAsD,IAAtD,EAA4D,KAA5D,EAAmE,CAAnE,EAAsE,CAAtE;AAEA;;AAED,QAAKl+B,MAAM,CAACqiG,MAAZ,EAAqB;AAEpBpT,MAAAA,GAAG,CAAC3zB,UAAJ,CAAgB,KAAhB,EAAuBL,OAAO,CAAClmC,EAA/B;;AACAk6D,MAAAA,GAAG,CAAC1zB,UAAJ,CAAgB,KAAhB,EAAuBv7D,MAAM,CAACyiG,OAA9B,EAAuC,KAAvC;;AAEAn7B,MAAAA,aAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAAC/0C,EAAjD;;AACAk6D,MAAAA,GAAG,CAACvlB,mBAAJ,CAAyBI,iBAAiB,CAAC/0C,EAA3C,EAA+C,CAA/C,EAAkD,IAAlD,EAAwD,KAAxD,EAA+D,CAA/D,EAAkE,CAAlE;AAEA;;AAED,QAAK/0B,MAAM,CAACsiG,SAAZ,EAAwB;AAEvBrT,MAAAA,GAAG,CAAC3zB,UAAJ,CAAgB,KAAhB,EAAuBL,OAAO,CAACjiE,KAA/B;;AACAi2F,MAAAA,GAAG,CAAC1zB,UAAJ,CAAgB,KAAhB,EAAuBv7D,MAAM,CAAC0iG,UAA9B,EAA0C,KAA1C;;AAEAp7B,MAAAA,aAAa,CAAC8B,eAAd,CAA+BU,iBAAiB,CAAC9wE,KAAjD;;AACAi2F,MAAAA,GAAG,CAACvlB,mBAAJ,CAAyBI,iBAAiB,CAAC9wE,KAA3C,EAAkD,CAAlD,EAAqD,IAArD,EAA2D,KAA3D,EAAkE,CAAlE,EAAqE,CAArE;AAEA;;AAEDsuE,IAAAA,aAAa,CAACkC,uBAAd;;AAEAylB,IAAAA,GAAG,CAAC9jB,UAAJ,CAAgB,CAAhB,EAAmB,CAAnB,EAAsBnrE,MAAM,CAAC2pC,KAA7B;;AAEA3pC,IAAAA,MAAM,CAAC2pC,KAAP,GAAe,CAAf;AAEA,GA3DD;;AA6DA,OAAKg/C,kBAAL,GAA0B,UAAW5rD,MAAX,EAAmBs3B,KAAnB,EAA0BnqB,QAA1B,EAAoCG,QAApC,EAA8CrqC,MAA9C,EAAsDijD,KAAtD,EAA8D;AAEvF,QAAKoR,KAAK,KAAK,IAAf,EAAsBA,KAAK,GAAGsrC,WAAR,CAFiE,CAE5C;;AAE3C,UAAM1R,WAAW,GAAKjuF,MAAM,CAAC+pC,MAAP,IAAiB/pC,MAAM,CAACo9B,WAAP,CAAmBjN,WAAnB,KAAmC,CAA1E;AAEA,UAAMw3C,OAAO,GAAGg7B,UAAU,CAAE5lE,MAAF,EAAUs3B,KAAV,EAAiBhqB,QAAjB,EAA2BrqC,MAA3B,CAA1B;AAEAwlE,IAAAA,KAAK,CAACwoB,WAAN,CAAmB3jD,QAAnB,EAA6B4jD,WAA7B,EARuF,CAUvF;;AAEA,QAAInpF,KAAK,GAAGolC,QAAQ,CAACplC,KAArB;AACA,UAAM/C,QAAQ,GAAGmoC,QAAQ,CAACwa,UAAT,CAAoB3iD,QAArC,CAbuF,CAevF;;AAEA,QAAK+C,KAAK,KAAK,IAAf,EAAsB;AAErB,UAAK/C,QAAQ,KAAKzF,SAAb,IAA0ByF,QAAQ,CAAC4nC,KAAT,KAAmB,CAAlD,EAAsD;AAEtD,KAJD,MAIO,IAAK7kC,KAAK,CAAC6kC,KAAN,KAAgB,CAArB,EAAyB;AAE/B;AAEA,KAzBsF,CA2BvF;;;AAEA,QAAIi5D,WAAW,GAAG,CAAlB;;AAEA,QAAKv4D,QAAQ,CAACwU,SAAT,KAAuB,IAA5B,EAAmC;AAElC/5C,MAAAA,KAAK,GAAGykC,UAAU,CAAC0lC,qBAAX,CAAkC/kC,QAAlC,CAAR;AACA04D,MAAAA,WAAW,GAAG,CAAd;AAEA;;AAED,QAAKv4D,QAAQ,CAAC4U,YAAT,IAAyB5U,QAAQ,CAAC6U,YAAvC,EAAsD;AAErDqhD,MAAAA,YAAY,CAAC7mE,MAAb,CAAqB15B,MAArB,EAA6BkqC,QAA7B,EAAuCG,QAAvC,EAAiDs9B,OAAjD;AAEA;;AAEDL,IAAAA,aAAa,CAACI,KAAd,CAAqB1nE,MAArB,EAA6BqqC,QAA7B,EAAuCs9B,OAAvC,EAAgDz9B,QAAhD,EAA0DplC,KAA1D;AAEA,QAAIqoB,SAAJ;AACA,QAAIinC,QAAQ,GAAGosC,cAAf;;AAEA,QAAK17F,KAAK,KAAK,IAAf,EAAsB;AAErBqoB,MAAAA,SAAS,GAAGu3B,UAAU,CAACvrC,GAAX,CAAgBrU,KAAhB,CAAZ;AAEAsvD,MAAAA,QAAQ,GAAGqsC,qBAAX;AACArsC,MAAAA,QAAQ,CAACpP,QAAT,CAAmB73B,SAAnB;AAEA,KAxDsF,CA0DvF;;;AAEA,UAAM01E,SAAS,GAAK/9F,KAAK,KAAK,IAAZ,GAAqBA,KAAK,CAAC6kC,KAA3B,GAAmC5nC,QAAQ,CAAC4nC,KAA9D;AAEA,UAAMm5D,UAAU,GAAG54D,QAAQ,CAAC2a,SAAT,CAAmB9Q,KAAnB,GAA2B6uD,WAA9C;AACA,UAAMG,UAAU,GAAG74D,QAAQ,CAAC2a,SAAT,CAAmBlb,KAAnB,GAA2Bi5D,WAA9C;AAEA,UAAMjzC,UAAU,GAAG1M,KAAK,KAAK,IAAV,GAAiBA,KAAK,CAAClP,KAAN,GAAc6uD,WAA/B,GAA6C,CAAhE;AACA,UAAMnyC,UAAU,GAAGxN,KAAK,KAAK,IAAV,GAAiBA,KAAK,CAACtZ,KAAN,GAAci5D,WAA/B,GAA6Cz2D,QAAhE;AAEA,UAAM62D,SAAS,GAAGzpG,IAAI,CAAC+E,GAAL,CAAUwkG,UAAV,EAAsBnzC,UAAtB,CAAlB;AACA,UAAMszC,OAAO,GAAG1pG,IAAI,CAAC8E,GAAL,CAAUwkG,SAAV,EAAqBC,UAAU,GAAGC,UAAlC,EAA8CpzC,UAAU,GAAGc,UAA3D,IAA0E,CAA1F;AAEA,UAAMyyC,SAAS,GAAG3pG,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa2kG,OAAO,GAAGD,SAAV,GAAsB,CAAnC,CAAlB;AAEA,QAAKE,SAAS,KAAK,CAAnB,EAAuB,OAzEgE,CA2EvF;;AAEA,QAAKljG,MAAM,CAAC+pC,MAAZ,EAAqB;AAEpB,UAAKM,QAAQ,CAACwU,SAAT,KAAuB,IAA5B,EAAmC;AAElC2mB,QAAAA,KAAK,CAAC6oB,YAAN,CAAoBhkD,QAAQ,CAACyU,kBAAT,GAA8B8gD,mBAAmB,EAArE;AACAxrC,QAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA,OALD,MAKO;AAEN9W,QAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA;AAED,KAbD,MAaO,IAAKlrE,MAAM,CAACgqC,MAAZ,EAAqB;AAE3B,UAAIskD,SAAS,GAAGjkD,QAAQ,CAACqU,SAAzB;AAEA,UAAK4vC,SAAS,KAAKhyF,SAAnB,EAA+BgyF,SAAS,GAAG,CAAZ,CAJJ,CAImB;;AAE9C9oB,MAAAA,KAAK,CAAC6oB,YAAN,CAAoBC,SAAS,GAAGsR,mBAAmB,EAAnD;;AAEA,UAAK5/F,MAAM,CAACmjG,cAAZ,EAA6B;AAE5B/uC,QAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA,OAJD,MAIO,IAAKlrE,MAAM,CAACojG,UAAZ,EAAyB;AAE/BhvC,QAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA,OAJM,MAIA;AAEN9W,QAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA;AAED,KAtBM,MAsBA,IAAKlrE,MAAM,CAACiqC,QAAZ,EAAuB;AAE7BmqB,MAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA,KAJM,MAIA,IAAKlrE,MAAM,CAACqjG,QAAZ,EAAuB;AAE7BjvC,MAAAA,QAAQ,CAAC8W,OAAT,CAAkB,CAAlB;AAEA;;AAED,QAAKlrE,MAAM,CAAC0pC,eAAZ,EAA8B;AAE7B0qB,MAAAA,QAAQ,CAACgX,eAAT,CAA0BlhC,QAA1B,EAAoC84D,SAApC,EAA+CE,SAA/C,EAA0DljG,MAAM,CAAC2pC,KAAjE;AAEA,KAJD,MAIO,IAAKO,QAAQ,CAAC2/B,yBAAd,EAA0C;AAEhD,YAAM4F,aAAa,GAAGl2E,IAAI,CAAC8E,GAAL,CAAU6rC,QAAQ,CAACulC,aAAnB,EAAkCvlC,QAAQ,CAACigC,iBAA3C,CAAtB;AAEA/V,MAAAA,QAAQ,CAACgX,eAAT,CAA0BlhC,QAA1B,EAAoC84D,SAApC,EAA+CE,SAA/C,EAA0DzzB,aAA1D;AAEA,KANM,MAMA;AAENrb,MAAAA,QAAQ,CAACO,MAAT,CAAiBquC,SAAjB,EAA4BE,SAA5B;AAEA;AAED,GA1ID,CAhrBoC,CA4zBpC;;;AAEA,OAAKI,OAAL,GAAe,UAAWjvC,KAAX,EAAkBt3B,MAAlB,EAA2B;AAEzCihE,IAAAA,kBAAkB,GAAGnY,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAAyBt3B,MAAzB,CAArB;AACAihE,IAAAA,kBAAkB,CAAC56F,IAAnB;AAEAixD,IAAAA,KAAK,CAACprB,QAAN,CAAgB,UAAWjpC,MAAX,EAAoB;AAEnC,UAAKA,MAAM,CAACooC,OAAZ,EAAsB;AAErB41D,QAAAA,kBAAkB,CAACxY,SAAnB,CAA8BxlF,MAA9B;;AAEA,YAAKA,MAAM,CAACymC,UAAZ,EAAyB;AAExBu3D,UAAAA,kBAAkB,CAACvY,UAAnB,CAA+BzlF,MAA/B;AAEA;AAED;AAED,KAdD;AAgBAg+F,IAAAA,kBAAkB,CAACrY,WAAnB,CAAgC5oD,MAAhC;AAEA,UAAMwmE,QAAQ,GAAG,IAAIroC,OAAJ,EAAjB;AAEA7G,IAAAA,KAAK,CAACprB,QAAN,CAAgB,UAAWjpC,MAAX,EAAoB;AAEnC,UAAIqqC,QAAQ,GAAGrqC,MAAM,CAACqqC,QAAtB;;AAEA,UAAKA,QAAL,EAAgB;AAEf,YAAKjwC,KAAK,CAACoC,OAAN,CAAe6tC,QAAf,CAAL,EAAiC;AAEhC,eAAM,IAAI9uC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG8uC,QAAQ,CAACnwC,MAA9B,EAAsCqB,CAAC,EAAvC,EAA6C;AAE5C,gBAAIioG,SAAS,GAAGn5D,QAAQ,CAAE9uC,CAAF,CAAxB;;AAEA,gBAAKgoG,QAAQ,CAACxd,GAAT,CAAcyd,SAAd,MAA8B,KAAnC,EAA2C;AAE1CC,cAAAA,YAAY,CAAED,SAAF,EAAanvC,KAAb,EAAoBr0D,MAApB,CAAZ;AACAujG,cAAAA,QAAQ,CAACx5E,GAAT,CAAcy5E,SAAd;AAEA;AAED;AAED,SAfD,MAeO,IAAKD,QAAQ,CAACxd,GAAT,CAAc17C,QAAd,MAA6B,KAAlC,EAA0C;AAEhDo5D,UAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AACAujG,UAAAA,QAAQ,CAACx5E,GAAT,CAAcsgB,QAAd;AAEA;AAED;AAED,KA9BD;AAgCA,GAzDD,CA9zBoC,CAy3BpC;;;AAEA,MAAIwwD,wBAAwB,GAAG,IAA/B;;AAEA,WAASvgC,gBAAT,CAA2BC,IAA3B,EAAkC;AAEjC,QAAKhG,EAAE,CAACsjC,YAAR,EAAuB;AACvB,QAAKgD,wBAAL,EAAgCA,wBAAwB,CAAEtgC,IAAF,CAAxB;AAEhC;;AAED,QAAM49B,SAAS,GAAG,IAAIj+B,cAAJ,EAAlB;AACAi+B,EAAAA,SAAS,CAACx9B,gBAAV,CAA4BL,gBAA5B;AAEA,MAAK,OAAOp3D,MAAP,KAAkB,WAAvB,EAAqCi1F,SAAS,CAACv9B,UAAV,CAAsB13D,MAAtB;;AAErC,OAAKy3D,gBAAL,GAAwB,UAAWrtD,QAAX,EAAsB;AAE7CutF,IAAAA,wBAAwB,GAAGvtF,QAA3B;AACAinD,IAAAA,EAAE,CAACoG,gBAAH,CAAqBrtD,QAArB;AAEEA,IAAAA,QAAQ,KAAK,IAAf,GAAwB6qF,SAAS,CAAC19B,IAAV,EAAxB,GAA2C09B,SAAS,CAACpkD,KAAV,EAA3C;AAEA,GAPD,CAz4BoC,CAk5BpC;;;AAEA,OAAK4gB,MAAL,GAAc,UAAWN,KAAX,EAAkBt3B,MAAlB,EAA2B;AAExC,QAAI62B,YAAJ,EAAkBsS,UAAlB;;AAEA,QAAKrrE,SAAS,CAAE,CAAF,CAAT,KAAmByB,SAAxB,EAAoC;AAEnC0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,2GAAd;AACA2pC,MAAAA,YAAY,GAAG/4D,SAAS,CAAE,CAAF,CAAxB;AAEA;;AAED,QAAKA,SAAS,CAAE,CAAF,CAAT,KAAmByB,SAAxB,EAAoC;AAEnC0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,+FAAd;AACAi8C,MAAAA,UAAU,GAAGrrE,SAAS,CAAE,CAAF,CAAtB;AAEA;;AAED,QAAKkiC,MAAM,KAAKzgC,SAAX,IAAwBygC,MAAM,CAACoL,QAAP,KAAoB,IAAjD,EAAwD;AAEvDne,MAAAA,OAAO,CAACyD,KAAR,CAAe,wEAAf;AACA;AAEA;;AAED,QAAK0wE,cAAc,KAAK,IAAxB,EAA+B,OAzBS,CA2BxC;;AAEA72B,IAAAA,aAAa,CAACwD,iBAAd;AACA2zB,IAAAA,kBAAkB,GAAG,CAAE,CAAvB;AACAC,IAAAA,cAAc,GAAG,IAAjB,CA/BwC,CAiCxC;;AAEA,QAAKrqC,KAAK,CAACrpB,UAAN,KAAqB,IAA1B,EAAiCqpB,KAAK,CAACzrB,iBAAN,GAnCO,CAqCxC;;AAEA,QAAK7L,MAAM,CAAC/sB,MAAP,KAAkB,IAAvB,EAA8B+sB,MAAM,CAAC6L,iBAAP;;AAE9B,QAAK2rB,EAAE,CAACvF,OAAH,KAAe,IAAf,IAAuBuF,EAAE,CAACsjC,YAAH,KAAoB,IAAhD,EAAuD;AAEtD96D,MAAAA,MAAM,GAAGw3B,EAAE,CAACmmC,SAAH,CAAc39D,MAAd,CAAT;AAEA,KA7CuC,CA+CxC;;;AACA,QAAKs3B,KAAK,CAACjpB,OAAN,KAAkB,IAAvB,EAA8BipB,KAAK,CAACttB,cAAN,CAAsBlhC,KAAtB,EAA6BwuD,KAA7B,EAAoCt3B,MAApC,EAA4C62B,YAAY,IAAI2qC,oBAA5D;AAE9BP,IAAAA,kBAAkB,GAAGnY,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAAyBt3B,MAAzB,CAArB;AACAihE,IAAAA,kBAAkB,CAAC56F,IAAnB;;AAEAq8F,IAAAA,iBAAiB,CAAC5wE,gBAAlB,CAAoCkO,MAAM,CAACE,gBAA3C,EAA6DF,MAAM,CAACC,kBAApE;;AACAupD,IAAAA,QAAQ,CAAC3wB,uBAAT,CAAkC6pC,iBAAlC;;AAEAD,IAAAA,qBAAqB,GAAG,KAAKxyB,oBAA7B;AACAuyB,IAAAA,gBAAgB,GAAGD,SAAS,CAACl8F,IAAV,CAAgB,KAAK83C,cAArB,EAAqCskD,qBAArC,EAA4DziE,MAA5D,CAAnB;AAEAghE,IAAAA,iBAAiB,GAAGuC,WAAW,CAACnnF,GAAZ,CAAiBk7C,KAAjB,EAAwBt3B,MAAxB,CAApB;AACAghE,IAAAA,iBAAiB,CAAC36F,IAAlB;AAEAsgG,IAAAA,aAAa,CAAErvC,KAAF,EAASt3B,MAAT,EAAiB,CAAjB,EAAoBl3B,KAAK,CAACo4F,WAA1B,CAAb;AAEAF,IAAAA,iBAAiB,CAACzb,MAAlB;;AAEA,QAAKz8E,KAAK,CAACo4F,WAAN,KAAsB,IAA3B,EAAkC;AAEjCF,MAAAA,iBAAiB,CAACjwC,IAAlB,CAAwBoxC,WAAxB,EAAqCC,gBAArC;AAEA,KAtEuC,CAwExC;;;AAEA,QAAKI,gBAAgB,KAAK,IAA1B,EAAiCD,SAAS,CAAC/xB,YAAV;AAEjC,UAAMgY,YAAY,GAAGyY,kBAAkB,CAACx4B,KAAnB,CAAyB+f,YAA9C;AAEArE,IAAAA,SAAS,CAACvsB,MAAV,CAAkB4wB,YAAlB,EAAgClxB,KAAhC,EAAuCt3B,MAAvC;AAEAihE,IAAAA,kBAAkB,CAACrY,WAAnB,CAAgC5oD,MAAhC;AAEA,QAAKwiE,gBAAgB,KAAK,IAA1B,EAAiCD,SAAS,CAAC9xB,UAAV,GAlFO,CAoFxC;;AAEA,QAAK,KAAKxC,IAAL,CAAU2E,SAAV,KAAwB,IAA7B,EAAoC,KAAK3E,IAAL,CAAUP,KAAV;;AAEpC,QAAK7W,YAAY,KAAKt3D,SAAtB,EAAkC;AAEjC,WAAKo4D,eAAL,CAAsBd,YAAtB;AAEA,KA5FuC,CA8FxC;;;AAEAznD,IAAAA,UAAU,CAACwoD,MAAX,CAAmBopC,iBAAnB,EAAsC1pC,KAAtC,EAA6Ct3B,MAA7C,EAAqDmpC,UAArD,EAhGwC,CAkGxC;;AAEA,UAAMy9B,aAAa,GAAG5F,iBAAiB,CAAC/b,MAAxC;AACA,UAAM4hB,kBAAkB,GAAG7F,iBAAiB,CAAC/jD,WAA7C;AAEA,QAAK2pD,aAAa,CAACzpG,MAAd,GAAuB,CAA5B,EAAgC2pG,aAAa,CAAEF,aAAF,EAAiBtvC,KAAjB,EAAwBt3B,MAAxB,CAAb;AAChC,QAAK6mE,kBAAkB,CAAC1pG,MAAnB,GAA4B,CAAjC,EAAqC2pG,aAAa,CAAED,kBAAF,EAAsBvvC,KAAtB,EAA6Bt3B,MAA7B,CAAb,CAxGG,CA0GxC;;AAEA,QAAKs3B,KAAK,CAACjpB,OAAN,KAAkB,IAAvB,EAA8BipB,KAAK,CAACrtB,aAAN,CAAqBnhC,KAArB,EAA4BwuD,KAA5B,EAAmCt3B,MAAnC,EA5GU,CA8GxC;;AAEA,QAAKwhE,oBAAoB,KAAK,IAA9B,EAAqC;AAEpC;AAEA/pE,MAAAA,QAAQ,CAACmgE,wBAAT,CAAmC4J,oBAAnC,EAJoC,CAMpC;;AAEA/pE,MAAAA,QAAQ,CAACogE,6BAAT,CAAwC2J,oBAAxC;AAEA,KA1HuC,CA4HxC;;;AAEA/4B,IAAAA,KAAK,CAACvK,OAAN,CAAc5L,KAAd,CAAoBw4B,OAApB,CAA6B,IAA7B;AACAriB,IAAAA,KAAK,CAACvK,OAAN,CAAc5L,KAAd,CAAoB46B,OAApB,CAA6B,IAA7B;AACAzkB,IAAAA,KAAK,CAACvK,OAAN,CAAcjiE,KAAd,CAAoBixF,OAApB,CAA6B,IAA7B;AAEAzkB,IAAAA,KAAK,CAAC0oB,gBAAN,CAAwB,KAAxB,EAlIwC,CAoIxC;;AAEA6P,IAAAA,iBAAiB,GAAG,IAApB;AACAC,IAAAA,kBAAkB,GAAG,IAArB;AAEA,GAzID;;AA2IA,WAAS0F,aAAT,CAAwB1jG,MAAxB,EAAgC+8B,MAAhC,EAAwC4kD,UAAxC,EAAoDsc,WAApD,EAAkE;AAEjE,QAAKj+F,MAAM,CAACwmC,OAAP,KAAmB,KAAxB,EAAgC;AAEhC,UAAMA,OAAO,GAAGxmC,MAAM,CAAC+kC,MAAP,CAAchoC,IAAd,CAAoBggC,MAAM,CAACgI,MAA3B,CAAhB;;AAEA,QAAKyB,OAAL,EAAe;AAEd,UAAKxmC,MAAM,CAACi2F,OAAZ,EAAsB;AAErBtU,QAAAA,UAAU,GAAG3hF,MAAM,CAAC4mC,WAApB;AAEA,OAJD,MAIO,IAAK5mC,MAAM,CAAC8jG,KAAZ,EAAoB;AAE1B,YAAK9jG,MAAM,CAACgrC,UAAP,KAAsB,IAA3B,EAAkChrC,MAAM,CAAC05B,MAAP,CAAeqD,MAAf;AAElC,OAJM,MAIA,IAAK/8B,MAAM,CAACooC,OAAZ,EAAsB;AAE5B41D,QAAAA,kBAAkB,CAACxY,SAAnB,CAA8BxlF,MAA9B;;AAEA,YAAKA,MAAM,CAACymC,UAAZ,EAAyB;AAExBu3D,UAAAA,kBAAkB,CAACvY,UAAnB,CAA+BzlF,MAA/B;AAEA;AAED,OAVM,MAUA,IAAKA,MAAM,CAACqjG,QAAZ,EAAuB;AAE7B,YAAK,CAAErjG,MAAM,CAAC2mC,aAAT,IAA0B4/C,QAAQ,CAACzvB,gBAAT,CAA2B92D,MAA3B,CAA/B,EAAqE;AAEpE,cAAKi+F,WAAL,EAAmB;AAElByB,YAAAA,QAAQ,CAAC/gE,qBAAT,CAAgC3+B,MAAM,CAACo9B,WAAvC,EACE/H,YADF,CACgBoqE,iBADhB;AAGA;;AAED,gBAAMv1D,QAAQ,GAAGu7B,OAAO,CAAC/rC,MAAR,CAAgB15B,MAAhB,CAAjB;AACA,gBAAMqqC,QAAQ,GAAGrqC,MAAM,CAACqqC,QAAxB;;AAEA,cAAKA,QAAQ,CAAC7D,OAAd,EAAwB;AAEvBu3D,YAAAA,iBAAiB,CAACr5F,IAAlB,CAAwB1E,MAAxB,EAAgCkqC,QAAhC,EAA0CG,QAA1C,EAAoDs3C,UAApD,EAAgE+d,QAAQ,CAACzqE,CAAzE,EAA4E,IAA5E;AAEA;AAED;AAED,OAtBM,MAsBA,IAAKj1B,MAAM,CAAC+jG,uBAAZ,EAAsC;AAE5C,YAAK9F,WAAL,EAAmB;AAElByB,UAAAA,QAAQ,CAAC/gE,qBAAT,CAAgC3+B,MAAM,CAACo9B,WAAvC,EACE/H,YADF,CACgBoqE,iBADhB;AAGA;;AAED1B,QAAAA,iBAAiB,CAACr5F,IAAlB,CAAwB1E,MAAxB,EAAgC,IAAhC,EAAsCA,MAAM,CAACqqC,QAA7C,EAAuDs3C,UAAvD,EAAmE+d,QAAQ,CAACzqE,CAA5E,EAA+E,IAA/E;AAEA,OAXM,MAWA,IAAKj1B,MAAM,CAAC+pC,MAAP,IAAiB/pC,MAAM,CAACgqC,MAAxB,IAAkChqC,MAAM,CAACiqC,QAA9C,EAAyD;AAE/D,YAAKjqC,MAAM,CAAC8qD,aAAZ,EAA4B;AAE3B;AAEA,cAAK9qD,MAAM,CAACigF,QAAP,CAAgBzlB,KAAhB,KAA0BwQ,IAAI,CAACrW,MAAL,CAAY6F,KAA3C,EAAmD;AAElDx6D,YAAAA,MAAM,CAACigF,QAAP,CAAgBvmD,MAAhB;AACA15B,YAAAA,MAAM,CAACigF,QAAP,CAAgBzlB,KAAhB,GAAwBwQ,IAAI,CAACrW,MAAL,CAAY6F,KAApC;AAEA;AAED;;AAED,YAAK,CAAEx6D,MAAM,CAAC2mC,aAAT,IAA0B4/C,QAAQ,CAAC1vB,gBAAT,CAA2B72D,MAA3B,CAA/B,EAAqE;AAEpE,cAAKi+F,WAAL,EAAmB;AAElByB,YAAAA,QAAQ,CAAC/gE,qBAAT,CAAgC3+B,MAAM,CAACo9B,WAAvC,EACE/H,YADF,CACgBoqE,iBADhB;AAGA;;AAED,gBAAMv1D,QAAQ,GAAGu7B,OAAO,CAAC/rC,MAAR,CAAgB15B,MAAhB,CAAjB;AACA,gBAAMqqC,QAAQ,GAAGrqC,MAAM,CAACqqC,QAAxB;;AAEA,cAAKjwC,KAAK,CAACoC,OAAN,CAAe6tC,QAAf,CAAL,EAAiC;AAEhC,kBAAMkY,MAAM,GAAGrY,QAAQ,CAACqY,MAAxB;;AAEA,iBAAM,IAAIhnD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4mD,MAAM,CAACroD,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,oBAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AACA,oBAAM0uD,aAAa,GAAG5f,QAAQ,CAAE4Y,KAAK,CAACzJ,aAAR,CAA9B;;AAEA,kBAAKyQ,aAAa,IAAIA,aAAa,CAACzjB,OAApC,EAA8C;AAE7Cu3D,gBAAAA,iBAAiB,CAACr5F,IAAlB,CAAwB1E,MAAxB,EAAgCkqC,QAAhC,EAA0C+f,aAA1C,EAAyD03B,UAAzD,EAAqE+d,QAAQ,CAACzqE,CAA9E,EAAiFguB,KAAjF;AAEA;AAED;AAED,WAjBD,MAiBO,IAAK5Y,QAAQ,CAAC7D,OAAd,EAAwB;AAE9Bu3D,YAAAA,iBAAiB,CAACr5F,IAAlB,CAAwB1E,MAAxB,EAAgCkqC,QAAhC,EAA0CG,QAA1C,EAAoDs3C,UAApD,EAAgE+d,QAAQ,CAACzqE,CAAzE,EAA4E,IAA5E;AAEA;AAED;AAED;AAED;;AAED,UAAM6Q,QAAQ,GAAG9lC,MAAM,CAAC8lC,QAAxB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDmoG,MAAAA,aAAa,CAAE59D,QAAQ,CAAEvqC,CAAF,CAAV,EAAiBwhC,MAAjB,EAAyB4kD,UAAzB,EAAqCsc,WAArC,CAAb;AAEA;AAED;;AAED,WAAS4F,aAAT,CAAwB59B,UAAxB,EAAoC5R,KAApC,EAA2Ct3B,MAA3C,EAAoD;AAEnD,UAAMgO,gBAAgB,GAAGspB,KAAK,CAACjpB,OAAN,KAAkB,IAAlB,GAAyBipB,KAAK,CAACtpB,gBAA/B,GAAkD,IAA3E;;AAEA,SAAM,IAAIxvC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGsqE,UAAU,CAAC/rE,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErD,YAAM4mF,UAAU,GAAGlc,UAAU,CAAE1qE,CAAF,CAA7B;AAEA,YAAMyE,MAAM,GAAGmiF,UAAU,CAACniF,MAA1B;AACA,YAAMkqC,QAAQ,GAAGi4C,UAAU,CAACj4C,QAA5B;AACA,YAAMG,QAAQ,GAAGU,gBAAgB,KAAK,IAArB,GAA4Bo3C,UAAU,CAAC93C,QAAvC,GAAkDU,gBAAnE;AACA,YAAMkY,KAAK,GAAGk/B,UAAU,CAACl/B,KAAzB;;AAEA,UAAKlmB,MAAM,CAACg5D,aAAZ,EAA4B;AAE3B4I,QAAAA,mBAAmB,GAAG5hE,MAAtB;AAEA,cAAM2lD,OAAO,GAAG3lD,MAAM,CAAC2lD,OAAvB;;AAEA,aAAM,IAAItzC,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGq8B,OAAO,CAACxoF,MAA9B,EAAsCk1C,CAAC,GAAGiX,EAA1C,EAA8CjX,CAAC,EAA/C,EAAqD;AAEpD,gBAAM40D,OAAO,GAAGthB,OAAO,CAAEtzC,CAAF,CAAvB;;AAEA,cAAKpvC,MAAM,CAAC+kC,MAAP,CAAchoC,IAAd,CAAoBinG,OAAO,CAACj/D,MAA5B,CAAL,EAA4C;AAE3CygC,YAAAA,KAAK,CAACzuC,QAAN,CAAgB6nE,gBAAgB,CAACj0E,IAAjB,CAAuBq5E,OAAO,CAACjtE,QAA/B,CAAhB;AAEAinE,YAAAA,kBAAkB,CAACrY,WAAnB,CAAgCqe,OAAhC;AAEAvb,YAAAA,YAAY,CAAEzoF,MAAF,EAAUq0D,KAAV,EAAiB2vC,OAAjB,EAA0B95D,QAA1B,EAAoCG,QAApC,EAA8C4Y,KAA9C,CAAZ;AAEA;AAED;AAED,OAtBD,MAsBO;AAEN07C,QAAAA,mBAAmB,GAAG,IAAtB;AAEAlW,QAAAA,YAAY,CAAEzoF,MAAF,EAAUq0D,KAAV,EAAiBt3B,MAAjB,EAAyBmN,QAAzB,EAAmCG,QAAnC,EAA6C4Y,KAA7C,CAAZ;AAEA;AAED;AAED;;AAED,WAASwlC,YAAT,CAAuBzoF,MAAvB,EAA+Bq0D,KAA/B,EAAsCt3B,MAAtC,EAA8CmN,QAA9C,EAAwDG,QAAxD,EAAkE4Y,KAAlE,EAA0E;AAEzEjjD,IAAAA,MAAM,CAAC+mC,cAAP,CAAuBlhC,KAAvB,EAA8BwuD,KAA9B,EAAqCt3B,MAArC,EAA6CmN,QAA7C,EAAuDG,QAAvD,EAAiE4Y,KAAjE;AACA+6C,IAAAA,kBAAkB,GAAGnY,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAAyBsqC,mBAAmB,IAAI5hE,MAAhD,CAArB;AAEA/8B,IAAAA,MAAM,CAAComC,eAAP,CAAuBvX,gBAAvB,CAAyCkO,MAAM,CAACC,kBAAhD,EAAoEh9B,MAAM,CAACo9B,WAA3E;AACAp9B,IAAAA,MAAM,CAACqmC,YAAP,CAAoBtV,eAApB,CAAqC/wB,MAAM,CAAComC,eAA5C;;AAEA,QAAKpmC,MAAM,CAAC+jG,uBAAZ,EAAsC;AAErC,YAAMp8B,OAAO,GAAGg7B,UAAU,CAAE5lE,MAAF,EAAUs3B,KAAV,EAAiBhqB,QAAjB,EAA2BrqC,MAA3B,CAA1B;AAEAwlE,MAAAA,KAAK,CAACwoB,WAAN,CAAmB3jD,QAAnB;AAEAi9B,MAAAA,aAAa,CAACmD,KAAd;AAEAw3B,MAAAA,qBAAqB,CAAEjiG,MAAF,EAAU2nE,OAAV,CAArB;AAEA,KAVD,MAUO;AAEN9hE,MAAAA,KAAK,CAAC8iF,kBAAN,CAA0B5rD,MAA1B,EAAkCs3B,KAAlC,EAAyCnqB,QAAzC,EAAmDG,QAAnD,EAA6DrqC,MAA7D,EAAqEijD,KAArE;AAEA;;AAEDjjD,IAAAA,MAAM,CAACgnC,aAAP,CAAsBnhC,KAAtB,EAA6BwuD,KAA7B,EAAoCt3B,MAApC,EAA4CmN,QAA5C,EAAsDG,QAAtD,EAAgE4Y,KAAhE;AACA+6C,IAAAA,kBAAkB,GAAGnY,YAAY,CAAC1sE,GAAb,CAAkBk7C,KAAlB,EAAyBsqC,mBAAmB,IAAI5hE,MAAhD,CAArB;AAEA;;AAED,WAAS0mE,YAAT,CAAuBp5D,QAAvB,EAAiCgqB,KAAjC,EAAwCr0D,MAAxC,EAAiD;AAEhD,QAAKq0D,KAAK,CAACjpB,OAAN,KAAkB,IAAvB,EAA8BipB,KAAK,GAAGsrC,WAAR,CAFkB,CAEG;;AAEnD,UAAMsE,kBAAkB,GAAGxrC,UAAU,CAACt/C,GAAX,CAAgBkxB,QAAhB,CAA3B;AAEA,UAAMgnB,MAAM,GAAG2sC,kBAAkB,CAACx4B,KAAnB,CAAyBnU,MAAxC;AACA,UAAMk0B,YAAY,GAAGyY,kBAAkB,CAACx4B,KAAnB,CAAyB+f,YAA9C;AAEA,UAAM2e,kBAAkB,GAAG7yC,MAAM,CAACmU,KAAP,CAAaxxC,OAAxC;AAEA,UAAMmW,UAAU,GAAGk2D,YAAY,CAAC/f,aAAb,CAA4Bj2C,QAA5B,EAAsCgnB,MAAM,CAACmU,KAA7C,EAAoD+f,YAApD,EAAkElxB,KAAlE,EAAyEirC,SAAS,CAACnyB,SAAnF,EAA8FmyB,SAAS,CAAClyB,eAAxG,EAAyHptE,MAAzH,CAAnB;AACA,UAAMmkG,eAAe,GAAG9D,YAAY,CAAClf,kBAAb,CAAiCh3C,UAAjC,CAAxB;AAEA,QAAIw9B,OAAO,GAAGs8B,kBAAkB,CAACt8B,OAAjC;AACA,QAAIy8B,aAAa,GAAG,IAApB;;AAEA,QAAKz8B,OAAO,KAAKrrE,SAAjB,EAA6B;AAE5B;AACA+tC,MAAAA,QAAQ,CAAClmC,gBAAT,CAA2B,SAA3B,EAAsC09F,iBAAtC;AAEA,KALD,MAKO,IAAKl6B,OAAO,CAAC0T,QAAR,KAAqB8oB,eAA1B,EAA4C;AAElD;AACApC,MAAAA,+BAA+B,CAAE13D,QAAF,CAA/B;AAEA,KALM,MAKA,IAAK45D,kBAAkB,CAACC,kBAAnB,KAA0CA,kBAA/C,EAAoE;AAE1ED,MAAAA,kBAAkB,CAACC,kBAAnB,GAAwCA,kBAAxC;AAEAE,MAAAA,aAAa,GAAG,KAAhB;AAEA,KANM,MAMA,IAAKj6D,UAAU,CAACkuC,QAAX,KAAwB/7E,SAA7B,EAAyC;AAE/C;AACA;AAEA,KALM,MAKA;AAEN;AACA8nG,MAAAA,aAAa,GAAG,KAAhB;AAEA;;AAED,QAAKA,aAAL,EAAqB;AAEpBz8B,MAAAA,OAAO,GAAG04B,YAAY,CAACjf,cAAb,CAA6Bj3C,UAA7B,EAAyCg6D,eAAzC,CAAV;AAEAF,MAAAA,kBAAkB,CAACt8B,OAAnB,GAA6BA,OAA7B;AACAs8B,MAAAA,kBAAkB,CAACrzC,QAAnB,GAA8BzmB,UAAU,CAACymB,QAAzC;AACAqzC,MAAAA,kBAAkB,CAACjnB,cAAnB,GAAoC7yC,UAAU,CAAC6yC,cAA/C;AACA3yC,MAAAA,QAAQ,CAACs9B,OAAT,GAAmBA,OAAnB;AAEA;;AAED,UAAMmC,iBAAiB,GAAGnC,OAAO,CAACoC,aAAR,EAA1B;;AAEA,QAAK1/B,QAAQ,CAAC4U,YAAd,EAA6B;AAE5B5U,MAAAA,QAAQ,CAACg6D,wBAAT,GAAoC,CAApC;;AAEA,WAAM,IAAI9oG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGsK,KAAK,CAAC+6E,eAA3B,EAA4CrlF,CAAC,EAA7C,EAAmD;AAElD,YAAKuuE,iBAAiB,CAAE,gBAAgBvuE,CAAlB,CAAjB,IAA0C,CAA/C,EAAmD;AAElD8uC,UAAAA,QAAQ,CAACg6D,wBAAT;AAEA;AAED;AAED;;AAED,QAAKh6D,QAAQ,CAAC6U,YAAd,EAA6B;AAE5B7U,MAAAA,QAAQ,CAACi6D,wBAAT,GAAoC,CAApC;;AAEA,WAAM,IAAI/oG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGsK,KAAK,CAACg7E,eAA3B,EAA4CtlF,CAAC,EAA7C,EAAmD;AAElD,YAAKuuE,iBAAiB,CAAE,gBAAgBvuE,CAAlB,CAAjB,IAA0C,CAA/C,EAAmD;AAElD8uC,UAAAA,QAAQ,CAACi6D,wBAAT;AAEA;AAED;AAED;;AAED,UAAM1zC,QAAQ,GAAGqzC,kBAAkB,CAACrzC,QAApC;;AAEA,QAAK,CAAEvmB,QAAQ,CAAC0nB,gBAAX,IACJ,CAAE1nB,QAAQ,CAACuxC,mBADP,IAEJvxC,QAAQ,CAACinB,QAAT,KAAsB,IAFvB,EAE8B;AAE7B2yC,MAAAA,kBAAkB,CAACrqB,iBAAnB,GAAuC0lB,SAAS,CAACnyB,SAAjD;AACA82B,MAAAA,kBAAkB,CAAC72B,eAAnB,GAAqCkyB,SAAS,CAAClyB,eAA/C;AACAxc,MAAAA,QAAQ,CAAC1V,cAAT,GAA0BokD,SAAS,CAACttC,OAApC;AAEA;;AAEDiyC,IAAAA,kBAAkB,CAACp5D,WAAnB,GAAiCR,QAAQ,CAACq2C,sBAAT,GAAkCrsB,KAAK,CAACxpB,WAAxC,GAAsD,IAAvF;AACAo5D,IAAAA,kBAAkB,CAACn5D,GAAnB,GAAyBupB,KAAK,CAACvpB,GAA/B,CAvGgD,CAyGhD;;AAEAm5D,IAAAA,kBAAkB,CAACM,WAAnB,GAAiCC,mBAAmB,CAAEn6D,QAAF,CAApD;AACA45D,IAAAA,kBAAkB,CAACC,kBAAnB,GAAwCA,kBAAxC;;AAEA,QAAKD,kBAAkB,CAACM,WAAxB,EAAsC;AAErC;AAEA3zC,MAAAA,QAAQ,CAAC0H,iBAAT,CAA2B35D,KAA3B,GAAmC0yD,MAAM,CAACmU,KAAP,CAAaue,OAAhD;AACAnzB,MAAAA,QAAQ,CAAC2H,UAAT,CAAoB55D,KAApB,GAA4B0yD,MAAM,CAACmU,KAAP,CAAawe,KAAzC;AACApzB,MAAAA,QAAQ,CAAC4H,iBAAT,CAA2B75D,KAA3B,GAAmC0yD,MAAM,CAACmU,KAAP,CAAasb,WAAhD;AACAlwB,MAAAA,QAAQ,CAAC8H,uBAAT,CAAiC/5D,KAAjC,GAAyC0yD,MAAM,CAACmU,KAAP,CAAaye,iBAAtD;AACArzB,MAAAA,QAAQ,CAACqI,UAAT,CAAoBt6D,KAApB,GAA4B0yD,MAAM,CAACmU,KAAP,CAAaub,IAAzC;AACAnwB,MAAAA,QAAQ,CAACyI,gBAAT,CAA0B16D,KAA1B,GAAkC0yD,MAAM,CAACmU,KAAP,CAAa0e,UAA/C;AACAtzB,MAAAA,QAAQ,CAACqJ,cAAT,CAAwBt7D,KAAxB,GAAgC0yD,MAAM,CAACmU,KAAP,CAAawb,QAA7C;AACApwB,MAAAA,QAAQ,CAAC4I,WAAT,CAAqB76D,KAArB,GAA6B0yD,MAAM,CAACmU,KAAP,CAAa93B,KAA1C;AACAkjB,MAAAA,QAAQ,CAAC6I,iBAAT,CAA2B96D,KAA3B,GAAmC0yD,MAAM,CAACmU,KAAP,CAAa2e,WAAhD;AACAvzB,MAAAA,QAAQ,CAACkJ,gBAAT,CAA0Bn7D,KAA1B,GAAkC0yD,MAAM,CAACmU,KAAP,CAAayb,IAA/C;AAEArwB,MAAAA,QAAQ,CAACmI,oBAAT,CAA8Bp6D,KAA9B,GAAsC0yD,MAAM,CAACmU,KAAP,CAAazM,oBAAnD;AACAnI,MAAAA,QAAQ,CAACoI,uBAAT,CAAiCr6D,KAAjC,GAAyC0yD,MAAM,CAACmU,KAAP,CAAaxM,uBAAtD;AACApI,MAAAA,QAAQ,CAAC0I,aAAT,CAAuB36D,KAAvB,GAA+B0yD,MAAM,CAACmU,KAAP,CAAalM,aAA5C;AACA1I,MAAAA,QAAQ,CAAC2I,gBAAT,CAA0B56D,KAA1B,GAAkC0yD,MAAM,CAACmU,KAAP,CAAajM,gBAA/C;AACA3I,MAAAA,QAAQ,CAACgJ,cAAT,CAAwBj7D,KAAxB,GAAgC0yD,MAAM,CAACmU,KAAP,CAAa5L,cAA7C;AACAhJ,MAAAA,QAAQ,CAACiJ,iBAAT,CAA2Bl7D,KAA3B,GAAmC0yD,MAAM,CAACmU,KAAP,CAAa3L,iBAAhD,CApBqC,CAqBrC;AAEA;;AAED,UAAM4qC,YAAY,GAAGR,kBAAkB,CAACt8B,OAAnB,CAA2B2I,WAA3B,EAArB;AAAA,UACCo0B,YAAY,GACXnuB,aAAa,CAACM,YAAd,CAA4B4tB,YAAY,CAAC9uB,GAAzC,EAA8C/kB,QAA9C,CAFF;AAIAqzC,IAAAA,kBAAkB,CAACS,YAAnB,GAAkCA,YAAlC;AAEA;;AAED,WAAS/B,UAAT,CAAqB5lE,MAArB,EAA6Bs3B,KAA7B,EAAoChqB,QAApC,EAA8CrqC,MAA9C,EAAuD;AAEtD,QAAKq0D,KAAK,CAACjpB,OAAN,KAAkB,IAAvB,EAA8BipB,KAAK,GAAGsrC,WAAR,CAFwB,CAEH;;AAEnDnrE,IAAAA,QAAQ,CAACm9D,iBAAT;AAEA,UAAM7mD,GAAG,GAAGupB,KAAK,CAACvpB,GAAlB;AACA,UAAMD,WAAW,GAAGR,QAAQ,CAACq2C,sBAAT,GAAkCrsB,KAAK,CAACxpB,WAAxC,GAAsD,IAA1E;AACA,UAAMxX,QAAQ,GAAKkrE,oBAAoB,KAAK,IAA3B,GAAoC14F,KAAK,CAACm3E,cAA1C,GAA2DuhB,oBAAoB,CAACvnE,OAArB,CAA6B3D,QAAzG;AAEA,UAAM4wE,kBAAkB,GAAGxrC,UAAU,CAACt/C,GAAX,CAAgBkxB,QAAhB,CAA3B;AACA,UAAMgnB,MAAM,GAAG2sC,kBAAkB,CAACx4B,KAAnB,CAAyBnU,MAAxC;;AAEA,QAAKkuC,gBAAgB,KAAK,IAA1B,EAAiC;AAEhC,UAAKC,qBAAqB,KAAK,IAA1B,IAAkCziE,MAAM,KAAK2hE,cAAlD,EAAmE;AAElE,cAAMiG,QAAQ,GACb5nE,MAAM,KAAK2hE,cAAX,IACAr0D,QAAQ,CAAC9B,EAAT,KAAgBk2D,kBAFjB,CAFkE,CAMlE;AACA;AACA;;AACAa,QAAAA,SAAS,CAAC5xB,QAAV,CACCrjC,QAAQ,CAAC6Q,cADV,EAC0B7Q,QAAQ,CAAC8Q,gBADnC,EACqD9Q,QAAQ,CAAC+Q,WAD9D,EAECre,MAFD,EAESknE,kBAFT,EAE6BU,QAF7B;AAIA;AAED;;AAED,QAAKt6D,QAAQ,CAACrW,OAAT,KAAqBiwE,kBAAkB,CAACjS,SAA7C,EAAyD;AAExD,UAAKiS,kBAAkB,CAACt8B,OAAnB,KAA+BrrE,SAApC,EAAgD;AAE/CmnG,QAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AAEA,OAJD,MAIO,IAAKqqC,QAAQ,CAACS,GAAT,IAAgBm5D,kBAAkB,CAACn5D,GAAnB,KAA2BA,GAAhD,EAAsD;AAE5D24D,QAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AAEA,OAJM,MAIA,IAAKikG,kBAAkB,CAACp5D,WAAnB,KAAmCA,WAAxC,EAAsD;AAE5D44D,QAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AAEA,OAJM,MAIA,IAAKikG,kBAAkB,CAACM,WAAnB,IAAoCN,kBAAkB,CAACC,kBAAnB,KAA0C7yC,MAAM,CAACmU,KAAP,CAAaxxC,OAAhG,EAA4G;AAElHyvE,QAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AAEA,OAJM,MAIA,IAAKikG,kBAAkB,CAACrqB,iBAAnB,KAAyCt9E,SAAzC,KACT2nG,kBAAkB,CAACrqB,iBAAnB,KAAyC0lB,SAAS,CAACnyB,SAAnD,IACF82B,kBAAkB,CAAC72B,eAAnB,KAAuCkyB,SAAS,CAAClyB,eAFtC,CAAL,EAE+D;AAErEq2B,QAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AAEA,OANM,MAMA,IAAKikG,kBAAkB,CAACjnB,cAAnB,KAAsC3pD,QAA3C,EAAsD;AAE5DowE,QAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AAEA;AAED,KA9BD,MA8BO;AAENyjG,MAAAA,YAAY,CAAEp5D,QAAF,EAAYgqB,KAAZ,EAAmBr0D,MAAnB,CAAZ;AACAikG,MAAAA,kBAAkB,CAACjS,SAAnB,GAA+B3nD,QAAQ,CAACrW,OAAxC;AAEA;;AAED,QAAI4wE,cAAc,GAAG,KAArB;AACA,QAAIC,eAAe,GAAG,KAAtB;AACA,QAAIC,aAAa,GAAG,KAApB;AAEA,UAAMn9B,OAAO,GAAGs8B,kBAAkB,CAACt8B,OAAnC;AAAA,UACCo9B,UAAU,GAAGp9B,OAAO,CAAC2I,WAAR,EADd;AAAA,UAEC00B,UAAU,GAAGf,kBAAkB,CAACrzC,QAFjC;;AAIA,QAAK4U,KAAK,CAACgoB,UAAN,CAAkB7lB,OAAO,CAACA,OAA1B,CAAL,EAA2C;AAE1Ci9B,MAAAA,cAAc,GAAG,IAAjB;AACAC,MAAAA,eAAe,GAAG,IAAlB;AACAC,MAAAA,aAAa,GAAG,IAAhB;AAEA;;AAED,QAAKz6D,QAAQ,CAAC9B,EAAT,KAAgBk2D,kBAArB,EAA0C;AAEzCA,MAAAA,kBAAkB,GAAGp0D,QAAQ,CAAC9B,EAA9B;AAEAs8D,MAAAA,eAAe,GAAG,IAAlB;AAEA;;AAED,QAAKD,cAAc,IAAIlG,cAAc,KAAK3hE,MAA1C,EAAmD;AAElDgoE,MAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,kBAA1B,EAA8ClyD,MAAM,CAACE,gBAArD;;AAEA,UAAK89B,YAAY,CAACiR,sBAAlB,EAA2C;AAE1C+4B,QAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,eAA1B,EACC,OAAQ11F,IAAI,CAACuO,GAAL,CAAUi1B,MAAM,CAACyG,GAAP,GAAa,GAAvB,IAA+BjqC,IAAI,CAAC0vB,GAA5C,CADD;AAGA;;AAED,UAAKy1E,cAAc,KAAK3hE,MAAxB,EAAiC;AAEhC2hE,QAAAA,cAAc,GAAG3hE,MAAjB,CAFgC,CAIhC;AACA;AACA;;AAEA8nE,QAAAA,eAAe,GAAG,IAAlB,CARgC,CAQP;;AACzBC,QAAAA,aAAa,GAAG,IAAhB,CATgC,CAST;AAEvB,OAtBiD,CAwBlD;AACA;;;AAEA,UAAKz6D,QAAQ,CAAC0nB,gBAAT,IACJ1nB,QAAQ,CAACuxD,mBADL,IAEJvxD,QAAQ,CAACqxD,kBAFL,IAGJrxD,QAAQ,CAACq2C,sBAHL,IAIJr2C,QAAQ,CAAC8T,MAJV,EAImB;AAElB,cAAM8mD,OAAO,GAAGF,UAAU,CAACt+F,GAAX,CAAey+F,cAA/B;;AAEA,YAAKD,OAAO,KAAK3oG,SAAjB,EAA6B;AAE5B2oG,UAAAA,OAAO,CAAC/+F,QAAR,CAAkB+oF,GAAlB,EACCyQ,QAAQ,CAAC/gE,qBAAT,CAAgC5B,MAAM,CAACK,WAAvC,CADD;AAGA;AAED;;AAED,UAAKiN,QAAQ,CAACuxD,mBAAT,IACJvxD,QAAQ,CAACqxD,kBADL,IAEJrxD,QAAQ,CAACmxD,qBAFL,IAGJnxD,QAAQ,CAACmV,mBAHL,IAIJnV,QAAQ,CAACq2C,sBAJL,IAKJr2C,QAAQ,CAAC0nB,gBALV,EAK6B;AAE5BgzC,QAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,gBAA1B,EAA4ClyD,MAAM,CAACooE,oBAAP,KAAgC,IAA5E;AAEA;;AAED,UAAK96D,QAAQ,CAACuxD,mBAAT,IACJvxD,QAAQ,CAACqxD,kBADL,IAEJrxD,QAAQ,CAACmxD,qBAFL,IAGJnxD,QAAQ,CAACmV,mBAHL,IAIJnV,QAAQ,CAACq2C,sBAJL,IAKJr2C,QAAQ,CAAC0nB,gBALL,IAMJ1nB,QAAQ,CAAC0yD,gBANL,IAOJ1yD,QAAQ,CAAC8U,QAPV,EAOqB;AAEpB4lD,QAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,YAA1B,EAAwClyD,MAAM,CAACC,kBAA/C;AAEA;AAED,KAjKqD,CAmKtD;AACA;AACA;;;AAEA,QAAKqN,QAAQ,CAAC8U,QAAd,EAAyB;AAExB4lD,MAAAA,UAAU,CAACpuB,WAAX,CAAwBsY,GAAxB,EAA6BjvF,MAA7B,EAAqC,YAArC;AACA+kG,MAAAA,UAAU,CAACpuB,WAAX,CAAwBsY,GAAxB,EAA6BjvF,MAA7B,EAAqC,mBAArC;AAEA,YAAMigF,QAAQ,GAAGjgF,MAAM,CAACigF,QAAxB;;AAEA,UAAKA,QAAL,EAAgB;AAEf,cAAMC,KAAK,GAAGD,QAAQ,CAACC,KAAvB;;AAEA,YAAKnlB,YAAY,CAAC4R,mBAAlB,EAAwC;AAEvC,cAAKsT,QAAQ,CAACmlB,WAAT,KAAyB9oG,SAA9B,EAA0C;AAEzC;AACA;AACA;AACA;AACA;AACA;AAGA,gBAAI6wC,IAAI,GAAG5zC,IAAI,CAAC0yB,IAAL,CAAWi0D,KAAK,CAAChmF,MAAN,GAAe,CAA1B,CAAX,CAVyC,CAUC;;AAC1CizC,YAAAA,IAAI,GAAGvmB,SAAS,CAACmC,cAAV,CAA0BokB,IAA1B,CAAP;AACAA,YAAAA,IAAI,GAAG5zC,IAAI,CAAC+E,GAAL,CAAU6uC,IAAV,EAAgB,CAAhB,CAAP;AAEA,kBAAMk4D,YAAY,GAAG,IAAItjD,YAAJ,CAAkB5U,IAAI,GAAGA,IAAP,GAAc,CAAhC,CAArB,CAdyC,CAciB;;AAC1Dk4D,YAAAA,YAAY,CAACt7E,GAAb,CAAkBk2D,QAAQ,CAAColB,YAA3B,EAfyC,CAeE;;AAE3C,kBAAMD,WAAW,GAAG,IAAIjwC,WAAJ,CAAiBkwC,YAAjB,EAA+Bl4D,IAA/B,EAAqCA,IAArC,EAA2CttB,UAA3C,EAAuDR,SAAvD,CAApB;AAEA4gE,YAAAA,QAAQ,CAAColB,YAAT,GAAwBA,YAAxB;AACAplB,YAAAA,QAAQ,CAACmlB,WAAT,GAAuBA,WAAvB;AACAnlB,YAAAA,QAAQ,CAACqlB,eAAT,GAA2Bn4D,IAA3B;AAEA;;AAED43D,UAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,aAA1B,EAAyChP,QAAQ,CAACmlB,WAAlD,EAA+D5wE,QAA/D;AACAuwE,UAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,iBAA1B,EAA6ChP,QAAQ,CAACqlB,eAAtD;AAEA,SA9BD,MA8BO;AAENP,UAAAA,UAAU,CAACpuB,WAAX,CAAwBsY,GAAxB,EAA6BhP,QAA7B,EAAuC,cAAvC;AAEA;AAED;AAED;;AAED,QAAK4kB,eAAe,IAAIZ,kBAAkB,CAACv9D,aAAnB,KAAqC1mC,MAAM,CAAC0mC,aAApE,EAAoF;AAEnFu9D,MAAAA,kBAAkB,CAACv9D,aAAnB,GAAmC1mC,MAAM,CAAC0mC,aAA1C;AACAq+D,MAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,eAA1B,EAA2CjvF,MAAM,CAAC0mC,aAAlD;AAEA;;AAED,QAAKm+D,eAAL,EAAuB;AAEtBE,MAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,qBAA1B,EAAiDppF,KAAK,CAACq4F,mBAAvD;;AAEA,UAAK+F,kBAAkB,CAACM,WAAxB,EAAsC;AAErC;AAEA;AACA;AACA;AACA;AACA;AACA;AAEAgB,QAAAA,6BAA6B,CAAEP,UAAF,EAAcF,aAAd,CAA7B;AAEA,OAjBqB,CAmBtB;;;AAEA,UAAKh6D,GAAG,IAAIT,QAAQ,CAACS,GAArB,EAA2B;AAE1BtB,QAAAA,SAAS,CAAC0xD,kBAAV,CAA8B8J,UAA9B,EAA0Cl6D,GAA1C;AAEA;;AAEDtB,MAAAA,SAAS,CAAC6xD,uBAAV,CAAmC2J,UAAnC,EAA+C36D,QAA/C,EAAyDQ,WAAzD,EAAsEo0D,WAAtE,EAAmFD,OAAnF,EA3BsB,CA6BtB;AACA;;AAEA,UAAKgG,UAAU,CAACQ,KAAX,KAAqBlpG,SAA1B,EAAsC0oG,UAAU,CAACQ,KAAX,CAAiB7mG,KAAjB,GAAyBs4D,WAAW,CAACwuC,KAArC;AACtC,UAAKT,UAAU,CAACU,KAAX,KAAqBppG,SAA1B,EAAsC0oG,UAAU,CAACU,KAAX,CAAiB/mG,KAAjB,GAAyBs4D,WAAW,CAAC0uC,KAArC;AAEtCpvB,MAAAA,aAAa,CAACK,MAAd,CAAsBqY,GAAtB,EAA2BgV,kBAAkB,CAACS,YAA9C,EAA4DM,UAA5D,EAAwExwE,QAAxE;AAEA;;AAED,QAAK6V,QAAQ,CAAC0nB,gBAAT,IAA6B1nB,QAAQ,CAACynB,kBAAT,KAAgC,IAAlE,EAAyE;AAExEykB,MAAAA,aAAa,CAACK,MAAd,CAAsBqY,GAAtB,EAA2BgV,kBAAkB,CAACS,YAA9C,EAA4DM,UAA5D,EAAwExwE,QAAxE;AACA6V,MAAAA,QAAQ,CAACynB,kBAAT,GAA8B,KAA9B;AAEA;;AAED,QAAKznB,QAAQ,CAACwyD,gBAAd,EAAiC;AAEhCkI,MAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,QAA1B,EAAoCjvF,MAAM,CAACutB,MAA3C;AAEA,KAnRqD,CAqRtD;;;AAEAw3E,IAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,iBAA1B,EAA6CjvF,MAAM,CAAComC,eAApD;AACA2+D,IAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,cAA1B,EAA0CjvF,MAAM,CAACqmC,YAAjD;AACA0+D,IAAAA,UAAU,CAAC7+F,QAAX,CAAqB+oF,GAArB,EAA0B,aAA1B,EAAyCjvF,MAAM,CAACo9B,WAAhD;AAEA,WAAOuqC,OAAP;AAEA,GAppDmC,CAspDpC;;;AAEA,WAAS49B,6BAAT,CAAwC30C,QAAxC,EAAkDjyD,KAAlD,EAA0D;AAEzDiyD,IAAAA,QAAQ,CAAC0H,iBAAT,CAA2BhT,WAA3B,GAAyC3mD,KAAzC;AACAiyD,IAAAA,QAAQ,CAAC2H,UAAT,CAAoBjT,WAApB,GAAkC3mD,KAAlC;AAEAiyD,IAAAA,QAAQ,CAAC4H,iBAAT,CAA2BlT,WAA3B,GAAyC3mD,KAAzC;AACAiyD,IAAAA,QAAQ,CAAC8H,uBAAT,CAAiCpT,WAAjC,GAA+C3mD,KAA/C;AACAiyD,IAAAA,QAAQ,CAAC4I,WAAT,CAAqBlU,WAArB,GAAmC3mD,KAAnC;AACAiyD,IAAAA,QAAQ,CAAC6I,iBAAT,CAA2BnU,WAA3B,GAAyC3mD,KAAzC;AACAiyD,IAAAA,QAAQ,CAACqI,UAAT,CAAoB3T,WAApB,GAAkC3mD,KAAlC;AACAiyD,IAAAA,QAAQ,CAACyI,gBAAT,CAA0B/T,WAA1B,GAAwC3mD,KAAxC;AACAiyD,IAAAA,QAAQ,CAACqJ,cAAT,CAAwB3U,WAAxB,GAAsC3mD,KAAtC;AACAiyD,IAAAA,QAAQ,CAACkJ,gBAAT,CAA0BxU,WAA1B,GAAwC3mD,KAAxC;AAEA;;AAED,WAAS6lG,mBAAT,CAA8Bn6D,QAA9B,EAAyC;AAExC,WAAOA,QAAQ,CAACmxD,qBAAT,IAAkCnxD,QAAQ,CAACqxD,kBAA3C,IAAiErxD,QAAQ,CAACuxD,mBAA1E,IACNvxD,QAAQ,CAACq2C,sBADH,IAC6Br2C,QAAQ,CAAC0yD,gBADtC,IAEJ1yD,QAAQ,CAAC0nB,gBAAT,IAA6B1nB,QAAQ,CAACgnB,MAAT,KAAoB,IAFpD;AAIA,GA9qDmC,CAgrDpC;;;AACA,OAAK6mC,cAAL,GAAsB,UAAWv5F,KAAX,EAAmB;AAExC,QAAKy/F,YAAY,KAAKz/F,KAAjB,IAA0B4/F,oBAAoB,KAAK,IAAxD,EAA+DtP,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4B/0F,KAA5B;AAE/Dy/F,IAAAA,YAAY,GAAGz/F,KAAf;AAEA,GAND;;AAQA,OAAK6oF,iBAAL,GAAyB,YAAY;AAEpC,WAAO6W,sBAAP;AAEA,GAJD;;AAMA,OAAK3W,oBAAL,GAA4B,YAAY;AAEvC,WAAO4W,yBAAP;AAEA,GAJD;;AAMA,OAAK7pC,eAAL,GAAuB,YAAY;AAElC,WAAO8pC,oBAAP;AAEA,GAJD;;AAMA,OAAK7pC,eAAL,GAAuB,UAAWd,YAAX,EAAyB2zB,cAAzB,EAAyCE,iBAAzC,EAA6D;AAEnF8W,IAAAA,oBAAoB,GAAG3qC,YAAvB;AACAyqC,IAAAA,sBAAsB,GAAG9W,cAAzB;AACA+W,IAAAA,yBAAyB,GAAG7W,iBAA5B;;AAEA,QAAK7zB,YAAY,IAAI6E,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,EAA+Bw9B,kBAA/B,KAAsD90F,SAA3E,EAAuF;AAEtFk4B,MAAAA,QAAQ,CAACigE,iBAAT,CAA4B7gC,YAA5B;AAEA;;AAED,QAAI2/B,WAAW,GAAG6K,YAAlB;AACA,QAAI/J,MAAM,GAAG,KAAb;;AAEA,QAAKzgC,YAAL,EAAoB;AAEnB,YAAMw9B,kBAAkB,GAAG34B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,EAA+Bw9B,kBAA1D;;AAEA,UAAKx9B,YAAY,CAACC,uBAAlB,EAA4C;AAE3C0/B,QAAAA,WAAW,GAAGnC,kBAAkB,CAAE7J,cAAc,IAAI,CAApB,CAAhC;AACA8M,QAAAA,MAAM,GAAG,IAAT;AAEA,OALD,MAKO,IAAKzgC,YAAY,CAACp8B,8BAAlB,EAAmD;AAEzD+7D,QAAAA,WAAW,GAAG96B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,EAA+B29B,8BAA7C;AAEA,OAJM,MAIA;AAENgC,QAAAA,WAAW,GAAGnC,kBAAd;AAEA;;AAEDwN,MAAAA,gBAAgB,CAACj0E,IAAjB,CAAuBipC,YAAY,CAAC78B,QAApC;;AACA8nE,MAAAA,eAAe,CAACl0E,IAAhB,CAAsBipC,YAAY,CAAC/8B,OAAnC;;AACAioE,MAAAA,mBAAmB,GAAGlrC,YAAY,CAAC98B,WAAnC;AAEA,KAvBD,MAuBO;AAEN8nE,MAAAA,gBAAgB,CAACj0E,IAAjB,CAAuB+7D,SAAvB,EAAmCv7D,cAAnC,CAAmD8zE,WAAnD,EAAiElhG,KAAjE;;AACA8gG,MAAAA,eAAe,CAACl0E,IAAhB,CAAsBy0E,QAAtB,EAAiCj0E,cAAjC,CAAiD8zE,WAAjD,EAA+DlhG,KAA/D;;AACA+gG,MAAAA,mBAAmB,GAAGO,YAAtB;AAEA;;AAED,QAAKb,mBAAmB,KAAKjL,WAA7B,EAA2C;AAE1CtE,MAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AACAiL,MAAAA,mBAAmB,GAAGjL,WAAtB;AAEA;;AAED/tB,IAAAA,KAAK,CAACzuC,QAAN,CAAgB6nE,gBAAhB;AACAp5B,IAAAA,KAAK,CAAC3uC,OAAN,CAAegoE,eAAf;AACAr5B,IAAAA,KAAK,CAACsiB,cAAN,CAAsBgX,mBAAtB;;AAEA,QAAKzK,MAAL,EAAc;AAEb,YAAMnE,iBAAiB,GAAGz3B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAY,CAAC58B,OAA7B,CAA1B;;AACAi4D,MAAAA,GAAG,CAAC0E,oBAAJ,CAA0B,KAA1B,EAAiC,KAAjC,EAAwC,SAAUpM,cAAc,IAAI,CAA5B,CAAxC,EAAyE2I,iBAAiB,CAACe,cAA3F,EAA2GxJ,iBAAiB,IAAI,CAAhI;AAEA;AAED,GAhED;;AAkEA,OAAKme,sBAAL,GAA8B,UAAWhyC,YAAX,EAAyBhxD,CAAzB,EAA4BE,CAA5B,EAA+BoC,KAA/B,EAAsCC,MAAtC,EAA8Ck2D,MAA9C,EAAsDwqC,mBAAtD,EAA4E;AAEzG,QAAK,EAAIjyC,YAAY,IAAIA,YAAY,CAACx8B,mBAAjC,CAAL,EAA8D;AAE7DpN,MAAAA,OAAO,CAACyD,KAAR,CAAe,0FAAf;AACA;AAEA;;AAED,QAAI8lE,WAAW,GAAG96B,UAAU,CAACt/C,GAAX,CAAgBy6C,YAAhB,EAA+Bw9B,kBAAjD;;AAEA,QAAKx9B,YAAY,CAACC,uBAAb,IAAwCgyC,mBAAmB,KAAKvpG,SAArE,EAAiF;AAEhFi3F,MAAAA,WAAW,GAAGA,WAAW,CAAEsS,mBAAF,CAAzB;AAEA;;AAED,QAAKtS,WAAL,EAAmB;AAElB,UAAIuS,OAAO,GAAG,KAAd;;AAEA,UAAKvS,WAAW,KAAKiL,mBAArB,EAA2C;AAE1CvP,QAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4BH,WAA5B;;AAEAuS,QAAAA,OAAO,GAAG,IAAV;AAEA;;AAED,UAAI;AAEH,cAAM9uE,OAAO,GAAG48B,YAAY,CAAC58B,OAA7B;AACA,cAAM+uE,aAAa,GAAG/uE,OAAO,CAAC7D,MAA9B;AACA,cAAM8/D,WAAW,GAAGj8D,OAAO,CAACtxB,IAA5B;;AAEA,YAAKqgG,aAAa,KAAKlmF,UAAlB,IAAgCqvE,KAAK,CAACuD,OAAN,CAAesT,aAAf,MAAmC9W,GAAG,CAAC/gD,YAAJ,CAAkB,KAAlB,CAAxE,EAAoG;AAEnGlkB,UAAAA,OAAO,CAACyD,KAAR,CAAe,2GAAf;AACA;AAEA;;AAED,YAAKwlE,WAAW,KAAKl0E,gBAAhB,IAAoCmwE,KAAK,CAACuD,OAAN,CAAeQ,WAAf,MAAiChE,GAAG,CAAC/gD,YAAJ,CAAkB,KAAlB,CAArE,IAAkG;AACtG,UAAI+kD,WAAW,KAAK5zE,SAAhB,KAA+B07C,YAAY,CAACC,QAAb,IAAyBzJ,UAAU,CAACp4C,GAAX,CAAgB,mBAAhB,CAAzB,IAAkEo4C,UAAU,CAACp4C,GAAX,CAAgB,0BAAhB,CAAjG,CAAJ,CADI,IACqJ;AACzJ,UAAI85E,WAAW,KAAK3zE,aAAhB,KAAmCy7C,YAAY,CAACC,QAAb,GAAwBzJ,UAAU,CAACp4C,GAAX,CAAgB,wBAAhB,CAAxB,GAAqEo4C,UAAU,CAACp4C,GAAX,CAAgB,6BAAhB,CAAxG,CAAJ,CAFD,EAEmK;AAElK6Q,UAAAA,OAAO,CAACyD,KAAR,CAAe,qHAAf;AACA;AAEA;;AAED,YAAKwhE,GAAG,CAAC+W,sBAAJ,CAA4B,KAA5B,MAAwC,KAA7C,EAAqD;AAEpD;AAEA,cAAOpjG,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAMgxD,YAAY,CAAC1uD,KAAb,GAAqBA,KAAxC,IAAuDpC,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAM8wD,YAAY,CAACzuD,MAAb,GAAsBA,MAAnG,EAAgH;AAE/G8pF,YAAAA,GAAG,CAACgX,UAAJ,CAAgBrjG,CAAhB,EAAmBE,CAAnB,EAAsBoC,KAAtB,EAA6BC,MAA7B,EAAqC+pF,KAAK,CAACuD,OAAN,CAAesT,aAAf,CAArC,EAAqE7W,KAAK,CAACuD,OAAN,CAAeQ,WAAf,CAArE,EAAmG53B,MAAnG;AAEA;AAED,SAVD,MAUO;AAENrxC,UAAAA,OAAO,CAACyD,KAAR,CAAe,4GAAf;AAEA;AAED,OAtCD,SAsCU;AAET,YAAKq4E,OAAL,EAAe;AAEd7W,UAAAA,GAAG,CAACyE,eAAJ,CAAqB,KAArB,EAA4B8K,mBAA5B;AAEA;AAED;AAED;AAED,GA/ED;;AAiFA,OAAK0H,wBAAL,GAAgC,UAAWnkG,QAAX,EAAqBi1B,OAArB,EAA8BmvE,KAA9B,EAAsC;AAErE,QAAKA,KAAK,KAAK7pG,SAAf,EAA2B6pG,KAAK,GAAG,CAAR;AAE3B,UAAMC,UAAU,GAAG7sG,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAa,CAAEs+F,KAAf,CAAnB;AACA,UAAMjhG,KAAK,GAAG3L,IAAI,CAACwE,KAAL,CAAYi5B,OAAO,CAAC/E,KAAR,CAAc/sB,KAAd,GAAsBkhG,UAAlC,CAAd;AACA,UAAMjhG,MAAM,GAAG5L,IAAI,CAACwE,KAAL,CAAYi5B,OAAO,CAAC/E,KAAR,CAAc9sB,MAAd,GAAuBihG,UAAnC,CAAf;AACA,UAAM7V,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAez7D,OAAO,CAAC7D,MAAvB,CAAjB;AAEAqB,IAAAA,QAAQ,CAACq9D,YAAT,CAAuB76D,OAAvB,EAAgC,CAAhC;;AAEAi4D,IAAAA,GAAG,CAACoX,cAAJ,CAAoB,IAApB,EAA0BF,KAA1B,EAAiC5V,QAAjC,EAA2CxuF,QAAQ,CAACa,CAApD,EAAuDb,QAAQ,CAACe,CAAhE,EAAmEoC,KAAnE,EAA0EC,MAA1E,EAAkF,CAAlF;;AAEAqgE,IAAAA,KAAK,CAACqpB,aAAN;AAEA,GAfD;;AAiBA,OAAKyX,oBAAL,GAA4B,UAAWvkG,QAAX,EAAqBwkG,UAArB,EAAiCC,UAAjC,EAA6CL,KAA7C,EAAqD;AAEhF,QAAKA,KAAK,KAAK7pG,SAAf,EAA2B6pG,KAAK,GAAG,CAAR;AAE3B,UAAMjhG,KAAK,GAAGqhG,UAAU,CAACt0E,KAAX,CAAiB/sB,KAA/B;AACA,UAAMC,MAAM,GAAGohG,UAAU,CAACt0E,KAAX,CAAiB9sB,MAAhC;AACA,UAAMorF,QAAQ,GAAGrB,KAAK,CAACuD,OAAN,CAAe+T,UAAU,CAACrzE,MAA1B,CAAjB;AACA,UAAMq9D,MAAM,GAAGtB,KAAK,CAACuD,OAAN,CAAe+T,UAAU,CAAC9gG,IAA1B,CAAf;AAEA8uB,IAAAA,QAAQ,CAACq9D,YAAT,CAAuB2U,UAAvB,EAAmC,CAAnC,EATgF,CAWhF;AACA;;AACAvX,IAAAA,GAAG,CAACoD,WAAJ,CAAiB,KAAjB,EAAwBmU,UAAU,CAAC1yE,KAAnC;;AACAm7D,IAAAA,GAAG,CAACoD,WAAJ,CAAiB,KAAjB,EAAwBmU,UAAU,CAAC3yE,gBAAnC;;AACAo7D,IAAAA,GAAG,CAACoD,WAAJ,CAAiB,IAAjB,EAAuBmU,UAAU,CAACzyE,eAAlC;;AAEA,QAAKwyE,UAAU,CAACnxC,aAAhB,EAAgC;AAE/B65B,MAAAA,GAAG,CAACwX,aAAJ,CAAmB,IAAnB,EAAyBN,KAAzB,EAAgCpkG,QAAQ,CAACa,CAAzC,EAA4Cb,QAAQ,CAACe,CAArD,EAAwDoC,KAAxD,EAA+DC,MAA/D,EAAuEorF,QAAvE,EAAiFC,MAAjF,EAAyF+V,UAAU,CAACt0E,KAAX,CAAiByY,IAA1G;AAEA,KAJD,MAIO;AAEN,UAAK67D,UAAU,CAAChU,mBAAhB,EAAsC;AAErCtD,QAAAA,GAAG,CAACyX,uBAAJ,CAA6B,IAA7B,EAAmCP,KAAnC,EAA0CpkG,QAAQ,CAACa,CAAnD,EAAsDb,QAAQ,CAACe,CAA/D,EAAkEyjG,UAAU,CAAChzE,OAAX,CAAoB,CAApB,EAAwBruB,KAA1F,EAAiGqhG,UAAU,CAAChzE,OAAX,CAAoB,CAApB,EAAwBpuB,MAAzH,EAAiIorF,QAAjI,EAA2IgW,UAAU,CAAChzE,OAAX,CAAoB,CAApB,EAAwBmX,IAAnK;AAEA,OAJD,MAIO;AAENukD,QAAAA,GAAG,CAACwX,aAAJ,CAAmB,IAAnB,EAAyBN,KAAzB,EAAgCpkG,QAAQ,CAACa,CAAzC,EAA4Cb,QAAQ,CAACe,CAArD,EAAwDytF,QAAxD,EAAkEC,MAAlE,EAA0E+V,UAAU,CAACt0E,KAArF;AAEA;AAED,KAjC+E,CAmChF;;;AACA,QAAKk0E,KAAK,KAAK,CAAV,IAAeK,UAAU,CAAC5yE,eAA/B,EAAiDq7D,GAAG,CAACgB,cAAJ,CAAoB,IAApB;AAEjDzqB,IAAAA,KAAK,CAACqpB,aAAN;AAEA,GAxCD;;AA0CA,OAAKuD,WAAL,GAAmB,UAAWp7D,OAAX,EAAqB;AAEvCxC,IAAAA,QAAQ,CAACq9D,YAAT,CAAuB76D,OAAvB,EAAgC,CAAhC;AAEAwuC,IAAAA,KAAK,CAACqpB,aAAN;AAEA,GAND;;AAQA,MAAK,OAAO5jD,kBAAP,KAA8B,WAAnC,EAAiD;AAEhDA,IAAAA,kBAAkB,CAAClnC,aAAnB,CAAkC,IAAImnC,WAAJ,CAAiB,SAAjB,EAA4B;AAAEC,MAAAA,MAAM,EAAE;AAAV,KAA5B,CAAlC,EAFgD,CAEoC;;AAEpF;AAED;AAED;;;;;AAIA,SAASw7D,cAAT,CAAyBx8D,UAAzB,EAAsC;AAErC+yD,EAAAA,aAAa,CAACtiG,IAAd,CAAoB,IAApB,EAA0BuvC,UAA1B;AAEA;;AAEDw8D,cAAc,CAACtsG,SAAf,GAA2BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAegpE,aAAa,CAAC7iG,SAA7B,CAAf,EAAyD;AAEnFoC,EAAAA,WAAW,EAAEkqG,cAFsE;AAInFzG,EAAAA,gBAAgB,EAAE;AAJiE,CAAzD,CAA3B;AAQA;;;;;AAKA,SAAS0G,OAAT,CAAkB5tG,KAAlB,EAAyBoiG,OAAzB,EAAmC;AAElC,OAAKvqF,IAAL,GAAY,EAAZ;AAEA,OAAK7X,KAAL,GAAa,IAAI4F,KAAJ,CAAW5F,KAAX,CAAb;AACA,OAAKoiG,OAAL,GAAiBA,OAAO,KAAK9+F,SAAd,GAA4B8+F,OAA5B,GAAsC,OAArD;AAEA;;AAEDngG,MAAM,CAACme,MAAP,CAAewtF,OAAO,CAACvsG,SAAvB,EAAkC;AAEjCsmF,EAAAA,SAAS,EAAE,IAFsB;AAIjCj2D,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAIk8E,OAAJ,CAAa,KAAK5tG,KAAlB,EAAyB,KAAKoiG,OAA9B,CAAP;AAEA,GARgC;AAUjC/mE,EAAAA,MAAM,EAAE;AAAW;AAAa;AAE/B,WAAO;AACN3uB,MAAAA,IAAI,EAAE,SADA;AAEN1M,MAAAA,KAAK,EAAE,KAAKA,KAAL,CAAWy/C,MAAX,EAFD;AAGN2iD,MAAAA,OAAO,EAAE,KAAKA;AAHR,KAAP;AAMA;AAlBgC,CAAlC;AAsBA;;;;;AAKA,SAASyL,GAAT,CAAc7tG,KAAd,EAAqBuqC,IAArB,EAA2BC,GAA3B,EAAiC;AAEhC,OAAK3yB,IAAL,GAAY,EAAZ;AAEA,OAAK7X,KAAL,GAAa,IAAI4F,KAAJ,CAAW5F,KAAX,CAAb;AAEA,OAAKuqC,IAAL,GAAcA,IAAI,KAAKjnC,SAAX,GAAyBinC,IAAzB,GAAgC,CAA5C;AACA,OAAKC,GAAL,GAAaA,GAAG,KAAKlnC,SAAV,GAAwBknC,GAAxB,GAA8B,IAAzC;AAEA;;AAEDvoC,MAAM,CAACme,MAAP,CAAeytF,GAAG,CAACxsG,SAAnB,EAA8B;AAE7B8gG,EAAAA,KAAK,EAAE,IAFsB;AAI7BzwE,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAIm8E,GAAJ,CAAS,KAAK7tG,KAAd,EAAqB,KAAKuqC,IAA1B,EAAgC,KAAKC,GAArC,CAAP;AAEA,GAR4B;AAU7BnP,EAAAA,MAAM,EAAE;AAAW;AAAa;AAE/B,WAAO;AACN3uB,MAAAA,IAAI,EAAE,KADA;AAEN1M,MAAAA,KAAK,EAAE,KAAKA,KAAL,CAAWy/C,MAAX,EAFD;AAGNlV,MAAAA,IAAI,EAAE,KAAKA,IAHL;AAINC,MAAAA,GAAG,EAAE,KAAKA;AAJJ,KAAP;AAOA;AAnB4B,CAA9B;AAuBA;;;;AAIA,SAASsjE,iBAAT,CAA4BpgF,KAA5B,EAAmCijD,MAAnC,EAA4C;AAE3C,OAAKjjD,KAAL,GAAaA,KAAb;AACA,OAAKijD,MAAL,GAAcA,MAAd;AACA,OAAKhgC,KAAL,GAAajjB,KAAK,KAAKpqB,SAAV,GAAsBoqB,KAAK,CAACxsB,MAAN,GAAeyvE,MAArC,GAA8C,CAA3D;AAEA,OAAK9pB,KAAL,GAAal6B,eAAb;AACA,OAAKm6B,WAAL,GAAmB;AAAEz6C,IAAAA,MAAM,EAAE,CAAV;AAAaskC,IAAAA,KAAK,EAAE,CAAE;AAAtB,GAAnB;AAEA,OAAK3V,OAAL,GAAe,CAAf;AAEA,OAAK1M,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA;;AAED/rB,MAAM,CAACkE,cAAP,CAAuB2nG,iBAAiB,CAACzsG,SAAzC,EAAoD,aAApD,EAAmE;AAElE0vB,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,QAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKq1B,OAAL;AAEtB;AANiE,CAAnE;AAUA/4B,MAAM,CAACme,MAAP,CAAe0tF,iBAAiB,CAACzsG,SAAjC,EAA4C;AAE3C0sG,EAAAA,mBAAmB,EAAE,IAFsB;AAI3C/mD,EAAAA,gBAAgB,EAAE,YAAY,CAAE,CAJW;AAM3CC,EAAAA,QAAQ,EAAE,UAAWthD,KAAX,EAAmB;AAE5B,SAAKkhD,KAAL,GAAalhD,KAAb;AAEA,WAAO,IAAP;AAEA,GAZ0C;AAc3CgsB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAKmN,KAAL,GAAa,IAAInN,MAAM,CAACmN,KAAP,CAAajqB,WAAjB,CAA8B8c,MAAM,CAACmN,KAArC,CAAb;AACA,SAAKijB,KAAL,GAAapwB,MAAM,CAACowB,KAApB;AACA,SAAKggC,MAAL,GAAcpwD,MAAM,CAACowD,MAArB;AACA,SAAK9pB,KAAL,GAAatmC,MAAM,CAACsmC,KAApB;AAEA,WAAO,IAAP;AAEA,GAvB0C;AAyB3CK,EAAAA,MAAM,EAAE,UAAWC,MAAX,EAAmBhzB,SAAnB,EAA8BizB,MAA9B,EAAuC;AAE9CD,IAAAA,MAAM,IAAI,KAAKwpB,MAAf;AACAvpB,IAAAA,MAAM,IAAIjzB,SAAS,CAACw8C,MAApB;;AAEA,SAAM,IAAIpuE,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKguE,MAA1B,EAAkCpuE,CAAC,GAAGI,CAAtC,EAAyCJ,CAAC,EAA1C,EAAgD;AAE/C,WAAKmrB,KAAL,CAAYy5B,MAAM,GAAG5kD,CAArB,IAA2B4xB,SAAS,CAACzG,KAAV,CAAiB05B,MAAM,GAAG7kD,CAA1B,CAA3B;AAEA;;AAED,WAAO,IAAP;AAEA,GAtC0C;AAwC3CwuB,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAkB0G,MAAlB,EAA2B;AAE/B,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,SAAKqhB,KAAL,CAAWqD,GAAX,CAAgBprB,KAAhB,EAAuB0G,MAAvB;AAEA,WAAO,IAAP;AAEA,GAhD0C;AAkD3CqlB,EAAAA,KAAK,EAAE,UAAWggB,IAAX,EAAkB;AAExB,QAAKA,IAAI,CAACs8D,YAAL,KAAsB1qG,SAA3B,EAAuC;AAEtCouC,MAAAA,IAAI,CAACs8D,YAAL,GAAoB,EAApB;AAEA;;AAED,QAAK,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAAlB,KAA4B3qG,SAAjC,EAA6C;AAE5C,WAAKoqB,KAAL,CAAW20C,MAAX,CAAkB4rC,KAAlB,GAA0BrgF,SAAS,CAACI,YAAV,EAA1B;AAEA;;AAED,QAAK0jB,IAAI,CAACs8D,YAAL,CAAmB,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAArC,MAAiD3qG,SAAtD,EAAkE;AAEjEouC,MAAAA,IAAI,CAACs8D,YAAL,CAAmB,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAArC,IAA+C,KAAKvgF,KAAL,CAAWlsB,KAAX,CAAkB,CAAlB,EAAsB6gE,MAArE;AAEA;;AAED,UAAM30C,KAAK,GAAG,IAAI,KAAKA,KAAL,CAAWjqB,WAAf,CAA4BiuC,IAAI,CAACs8D,YAAL,CAAmB,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAArC,CAA5B,CAAd;AAEA,UAAMC,EAAE,GAAG,IAAIJ,iBAAJ,CAAuBpgF,KAAvB,EAA8B,KAAKijD,MAAnC,CAAX;AACAu9B,IAAAA,EAAE,CAACjnD,QAAH,CAAa,KAAKJ,KAAlB;AAEA,WAAOqnD,EAAP;AAEA,GA7E0C;AA+E3CnmD,EAAAA,QAAQ,EAAE,UAAWzzC,QAAX,EAAsB;AAE/B,SAAK0yC,gBAAL,GAAwB1yC,QAAxB;AAEA,WAAO,IAAP;AAEA,GArF0C;AAuF3C+mB,EAAAA,MAAM,EAAE,UAAWqW,IAAX,EAAkB;AAEzB,QAAKA,IAAI,CAACs8D,YAAL,KAAsB1qG,SAA3B,EAAuC;AAEtCouC,MAAAA,IAAI,CAACs8D,YAAL,GAAoB,EAApB;AAEA,KANwB,CAQzB;;;AAEA,QAAK,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAAlB,KAA4B3qG,SAAjC,EAA6C;AAE5C,WAAKoqB,KAAL,CAAW20C,MAAX,CAAkB4rC,KAAlB,GAA0BrgF,SAAS,CAACI,YAAV,EAA1B;AAEA;;AAED,QAAK0jB,IAAI,CAACs8D,YAAL,CAAmB,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAArC,MAAiD3qG,SAAtD,EAAkE;AAEjEouC,MAAAA,IAAI,CAACs8D,YAAL,CAAmB,KAAKtgF,KAAL,CAAW20C,MAAX,CAAkB4rC,KAArC,IAA+C7sG,KAAK,CAACC,SAAN,CAAgBG,KAAhB,CAAsBI,IAAtB,CAA4B,IAAIinD,WAAJ,CAAiB,KAAKn7B,KAAL,CAAW20C,MAA5B,CAA5B,CAA/C;AAEA,KApBwB,CAsBzB;;;AAEA,WAAO;AACN/zC,MAAAA,IAAI,EAAE,KAAKA,IADL;AAEN+zC,MAAAA,MAAM,EAAE,KAAK30C,KAAL,CAAW20C,MAAX,CAAkB4rC,KAFpB;AAGNvhG,MAAAA,IAAI,EAAE,KAAKghB,KAAL,CAAWjqB,WAAX,CAAuBoU,IAHvB;AAIN84D,MAAAA,MAAM,EAAE,KAAKA;AAJP,KAAP;AAOA;AAtH0C,CAA5C;AA0HA;;;;AAIA,MAAMw9B,SAAS,GAAG,IAAIrrE,OAAJ,EAAlB;;AAEA,SAASsrE,0BAAT,CAAqCC,iBAArC,EAAwDznD,QAAxD,EAAkEv6C,MAAlE,EAA0Eg0C,UAA1E,EAAuF;AAEtF,OAAKxoC,IAAL,GAAY,EAAZ;AAEA,OAAK65B,IAAL,GAAY28D,iBAAZ;AACA,OAAKznD,QAAL,GAAgBA,QAAhB;AACA,OAAKv6C,MAAL,GAAcA,MAAd;AAEA,OAAKg0C,UAAL,GAAkBA,UAAU,KAAK,IAAjC;AAEA;;AAEDp+C,MAAM,CAACwV,gBAAP,CAAyB22F,0BAA0B,CAAC/sG,SAApD,EAA+D;AAE9DsvC,EAAAA,KAAK,EAAE;AAENxwB,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKuxB,IAAL,CAAUf,KAAjB;AAEA;AANK,GAFuD;AAY9DjjB,EAAAA,KAAK,EAAE;AAENvN,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKuxB,IAAL,CAAUhkB,KAAjB;AAEA;AANK;AAZuD,CAA/D;AAwBAzrB,MAAM,CAACme,MAAP,CAAeguF,0BAA0B,CAAC/sG,SAA1C,EAAqD;AAEpDwhE,EAAAA,4BAA4B,EAAE,IAFsB;AAIpDxmC,EAAAA,YAAY,EAAE,UAAW1N,CAAX,EAAe;AAE5B,SAAM,IAAIpsB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAK+uC,IAAL,CAAUf,KAA/B,EAAsCpuC,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnD4rG,MAAAA,SAAS,CAACvkG,CAAV,GAAc,KAAKwqB,IAAL,CAAW7xB,CAAX,CAAd;AACA4rG,MAAAA,SAAS,CAACrkG,CAAV,GAAc,KAAKuqB,IAAL,CAAW9xB,CAAX,CAAd;AACA4rG,MAAAA,SAAS,CAAClyE,CAAV,GAAc,KAAKyB,IAAL,CAAWn7B,CAAX,CAAd;;AAEA4rG,MAAAA,SAAS,CAAC9xE,YAAV,CAAwB1N,CAAxB;;AAEA,WAAKk5B,MAAL,CAAatlD,CAAb,EAAgB4rG,SAAS,CAACvkG,CAA1B,EAA6BukG,SAAS,CAACrkG,CAAvC,EAA0CqkG,SAAS,CAAClyE,CAApD;AAEA;;AAED,WAAO,IAAP;AAEA,GApBmD;AAsBpD3K,EAAAA,IAAI,EAAE,UAAWxlB,KAAX,EAAkBlC,CAAlB,EAAsB;AAE3B,SAAK8nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAjD,IAA4DzC,CAA5D;AAEA,WAAO,IAAP;AAEA,GA5BmD;AA8BpD2nB,EAAAA,IAAI,EAAE,UAAWzlB,KAAX,EAAkBhC,CAAlB,EAAsB;AAE3B,SAAK4nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAhC,GAAyC,CAA1D,IAAgEvC,CAAhE;AAEA,WAAO,IAAP;AAEA,GApCmD;AAsCpDqyB,EAAAA,IAAI,EAAE,UAAWrwB,KAAX,EAAkBmwB,CAAlB,EAAsB;AAE3B,SAAKyV,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAhC,GAAyC,CAA1D,IAAgE4vB,CAAhE;AAEA,WAAO,IAAP;AAEA,GA5CmD;AA8CpDG,EAAAA,IAAI,EAAE,UAAWtwB,KAAX,EAAkBuT,CAAlB,EAAsB;AAE3B,SAAKqyB,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAhC,GAAyC,CAA1D,IAAgEgT,CAAhE;AAEA,WAAO,IAAP;AAEA,GApDmD;AAsDpD+U,EAAAA,IAAI,EAAE,UAAWtoB,KAAX,EAAmB;AAExB,WAAO,KAAK4lC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAjD,CAAP;AAEA,GA1DmD;AA4DpDgoB,EAAAA,IAAI,EAAE,UAAWvoB,KAAX,EAAmB;AAExB,WAAO,KAAK4lC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAhC,GAAyC,CAA1D,CAAP;AAEA,GAhEmD;AAkEpDqxB,EAAAA,IAAI,EAAE,UAAW5xB,KAAX,EAAmB;AAExB,WAAO,KAAK4lC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAhC,GAAyC,CAA1D,CAAP;AAEA,GAtEmD;AAwEpDsxB,EAAAA,IAAI,EAAE,UAAW7xB,KAAX,EAAmB;AAExB,WAAO,KAAK4lC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAhC,GAAyC,CAA1D,CAAP;AAEA,GA5EmD;AA8EpDu7C,EAAAA,KAAK,EAAE,UAAW97C,KAAX,EAAkBlC,CAAlB,EAAqBE,CAArB,EAAyB;AAE/BgC,IAAAA,KAAK,GAAGA,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAxC;AAEA,SAAKqlC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BlC,CAA/B;AACA,SAAK8nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BhC,CAA/B;AAEA,WAAO,IAAP;AAEA,GAvFmD;AAyFpD+9C,EAAAA,MAAM,EAAE,UAAW/7C,KAAX,EAAkBlC,CAAlB,EAAqBE,CAArB,EAAwBmyB,CAAxB,EAA4B;AAEnCnwB,IAAAA,KAAK,GAAGA,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAxC;AAEA,SAAKqlC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BlC,CAA/B;AACA,SAAK8nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BhC,CAA/B;AACA,SAAK4nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BmwB,CAA/B;AAEA,WAAO,IAAP;AAEA,GAnGmD;AAqGpD6rB,EAAAA,OAAO,EAAE,UAAWh8C,KAAX,EAAkBlC,CAAlB,EAAqBE,CAArB,EAAwBmyB,CAAxB,EAA2B5c,CAA3B,EAA+B;AAEvCvT,IAAAA,KAAK,GAAGA,KAAK,GAAG,KAAK4lC,IAAL,CAAUi/B,MAAlB,GAA2B,KAAKtkE,MAAxC;AAEA,SAAKqlC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BlC,CAA/B;AACA,SAAK8nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BhC,CAA/B;AACA,SAAK4nC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BmwB,CAA/B;AACA,SAAKyV,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAG,CAAzB,IAA+BuT,CAA/B;AAEA,WAAO,IAAP;AAEA,GAhHmD;AAkHpDqS,EAAAA,KAAK,EAAE,UAAWggB,IAAX,EAAkB;AAExB,QAAKA,IAAI,KAAKpuC,SAAd,EAA0B;AAEzB0tB,MAAAA,OAAO,CAACliB,GAAR,CAAa,iHAAb;AAEA,YAAM4e,KAAK,GAAG,EAAd;;AAEA,WAAM,IAAInrB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKouC,KAA1B,EAAiCpuC,CAAC,EAAlC,EAAwC;AAEvC,cAAMuJ,KAAK,GAAGvJ,CAAC,GAAG,KAAKmvC,IAAL,CAAUi/B,MAAd,GAAuB,KAAKtkE,MAA1C;;AAEA,aAAM,IAAI+pC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKwQ,QAA1B,EAAoCxQ,CAAC,EAArC,EAA2C;AAE1C1oB,UAAAA,KAAK,CAAChiB,IAAN,CAAY,KAAKgmC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAGsqC,CAAzB,CAAZ;AAEA;AAED;;AAED,aAAO,IAAIuQ,eAAJ,CAAqB,IAAI,KAAKj5B,KAAL,CAAWjqB,WAAf,CAA4BiqB,KAA5B,CAArB,EAA0D,KAAKk5B,QAA/D,EAAyE,KAAKvG,UAA9E,CAAP;AAEA,KApBD,MAoBO;AAEN,UAAK3O,IAAI,CAAC48D,kBAAL,KAA4BhrG,SAAjC,EAA6C;AAE5CouC,QAAAA,IAAI,CAAC48D,kBAAL,GAA0B,EAA1B;AAEA;;AAED,UAAK58D,IAAI,CAAC48D,kBAAL,CAAyB,KAAK58D,IAAL,CAAUpjB,IAAnC,MAA8ChrB,SAAnD,EAA+D;AAE9DouC,QAAAA,IAAI,CAAC48D,kBAAL,CAAyB,KAAK58D,IAAL,CAAUpjB,IAAnC,IAA4C,KAAKojB,IAAL,CAAUhgB,KAAV,CAAiBggB,IAAjB,CAA5C;AAEA;;AAED,aAAO,IAAI08D,0BAAJ,CAAgC18D,IAAI,CAAC48D,kBAAL,CAAyB,KAAK58D,IAAL,CAAUpjB,IAAnC,CAAhC,EAA2E,KAAKs4B,QAAhF,EAA0F,KAAKv6C,MAA/F,EAAuG,KAAKg0C,UAA5G,CAAP;AAEA;AAED,GA1JmD;AA4JpDhlB,EAAAA,MAAM,EAAE,UAAWqW,IAAX,EAAkB;AAEzB,QAAKA,IAAI,KAAKpuC,SAAd,EAA0B;AAEzB0tB,MAAAA,OAAO,CAACliB,GAAR,CAAa,sHAAb;AAEA,YAAM4e,KAAK,GAAG,EAAd;;AAEA,WAAM,IAAInrB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKouC,KAA1B,EAAiCpuC,CAAC,EAAlC,EAAwC;AAEvC,cAAMuJ,KAAK,GAAGvJ,CAAC,GAAG,KAAKmvC,IAAL,CAAUi/B,MAAd,GAAuB,KAAKtkE,MAA1C;;AAEA,aAAM,IAAI+pC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKwQ,QAA1B,EAAoCxQ,CAAC,EAArC,EAA2C;AAE1C1oB,UAAAA,KAAK,CAAChiB,IAAN,CAAY,KAAKgmC,IAAL,CAAUhkB,KAAV,CAAiB5hB,KAAK,GAAGsqC,CAAzB,CAAZ;AAEA;AAED,OAhBwB,CAkBzB;;;AAEA,aAAO;AACNwQ,QAAAA,QAAQ,EAAE,KAAKA,QADT;AAENl6C,QAAAA,IAAI,EAAE,KAAKghB,KAAL,CAAWjqB,WAAX,CAAuBoU,IAFvB;AAGN6V,QAAAA,KAAK,EAAEA,KAHD;AAIN2yB,QAAAA,UAAU,EAAE,KAAKA;AAJX,OAAP;AAOA,KA3BD,MA2BO;AAEN;AAEA,UAAK3O,IAAI,CAAC48D,kBAAL,KAA4BhrG,SAAjC,EAA6C;AAE5CouC,QAAAA,IAAI,CAAC48D,kBAAL,GAA0B,EAA1B;AAEA;;AAED,UAAK58D,IAAI,CAAC48D,kBAAL,CAAyB,KAAK58D,IAAL,CAAUpjB,IAAnC,MAA8ChrB,SAAnD,EAA+D;AAE9DouC,QAAAA,IAAI,CAAC48D,kBAAL,CAAyB,KAAK58D,IAAL,CAAUpjB,IAAnC,IAA4C,KAAKojB,IAAL,CAAUrW,MAAV,CAAkBqW,IAAlB,CAA5C;AAEA;;AAED,aAAO;AACNmxB,QAAAA,4BAA4B,EAAE,IADxB;AAENjc,QAAAA,QAAQ,EAAE,KAAKA,QAFT;AAGNlV,QAAAA,IAAI,EAAE,KAAKA,IAAL,CAAUpjB,IAHV;AAINjiB,QAAAA,MAAM,EAAE,KAAKA,MAJP;AAKNg0C,QAAAA,UAAU,EAAE,KAAKA;AALX,OAAP;AAQA;AAED;AAnNmD,CAArD;AAuNA;;;;;;;;;;;;AAYA,SAASumC,cAAT,CAAyBz1C,UAAzB,EAAsC;AAErCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,gBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb;AAEA,OAAK6H,GAAL,GAAW,IAAX;AAEA,OAAK02C,QAAL,GAAgB,IAAhB;AAEA,OAAK5rB,QAAL,GAAgB,CAAhB;AAEA,OAAKktB,eAAL,GAAuB,IAAvB;AAEA,OAAKzE,WAAL,GAAmB,IAAnB;AAEA,OAAKkC,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDy1C,cAAc,CAACvlF,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA3B;AACAulF,cAAc,CAACvlF,SAAf,CAAyBoC,WAAzB,GAAuCmjF,cAAvC;AACAA,cAAc,CAACvlF,SAAf,CAAyBwiG,gBAAzB,GAA4C,IAA5C;;AAEAjd,cAAc,CAACvlF,SAAf,CAAyBswB,IAAzB,GAAgC,UAAWpR,MAAX,EAAoB;AAEnDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAKyN,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK02C,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAK5rB,QAAL,GAAgBhY,MAAM,CAACgY,QAAvB;AAEA,OAAKktB,eAAL,GAAuBllC,MAAM,CAACklC,eAA9B;AAEA,SAAO,IAAP;AAEA,CAhBD;AAkBA;;;;;;AAKA,IAAI8oD,SAAJ;;AAEA,MAAMC,eAAe,GAAG,IAAI1rE,OAAJ,EAAxB;;AACA,MAAM2rE,WAAW,GAAG,IAAI3rE,OAAJ,EAApB;;AACA,MAAM4rE,WAAW,GAAG,IAAI5rE,OAAJ,EAApB;;AAEA,MAAM6rE,gBAAgB,GAAG,IAAIz9E,OAAJ,EAAzB;;AACA,MAAM09E,gBAAgB,GAAG,IAAI19E,OAAJ,EAAzB;;AACA,MAAM29E,gBAAgB,GAAG,IAAI5oE,OAAJ,EAAzB;;AAEA,MAAM6oE,KAAK,GAAG,IAAIhsE,OAAJ,EAAd;;AACA,MAAMisE,KAAK,GAAG,IAAIjsE,OAAJ,EAAd;;AACA,MAAMksE,KAAK,GAAG,IAAIlsE,OAAJ,EAAd;;AAEA,MAAMmsE,MAAM,GAAG,IAAI/9E,OAAJ,EAAf;;AACA,MAAMg+E,MAAM,GAAG,IAAIh+E,OAAJ,EAAf;;AACA,MAAMi+E,MAAM,GAAG,IAAIj+E,OAAJ,EAAf;;AAEA,SAASk+E,MAAT,CAAiB/9D,QAAjB,EAA4B;AAE3BxE,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,QAAZ;;AAEA,MAAK6hG,SAAS,KAAKjrG,SAAnB,EAA+B;AAE9BirG,IAAAA,SAAS,GAAG,IAAI9iD,cAAJ,EAAZ;AAEA,UAAM4jD,YAAY,GAAG,IAAItmD,YAAJ,CAAkB,CACtC,CAAE,GADoC,EAC/B,CAAE,GAD6B,EACxB,CADwB,EACrB,CADqB,EAClB,CADkB,EAEtC,GAFsC,EAEjC,CAAE,GAF+B,EAE1B,CAF0B,EAEvB,CAFuB,EAEpB,CAFoB,EAGtC,GAHsC,EAGjC,GAHiC,EAG5B,CAH4B,EAGzB,CAHyB,EAGtB,CAHsB,EAItC,CAAE,GAJoC,EAI/B,GAJ+B,EAI1B,CAJ0B,EAIvB,CAJuB,EAIpB,CAJoB,CAAlB,CAArB;AAOA,UAAMslD,iBAAiB,GAAG,IAAIP,iBAAJ,CAAuBuB,YAAvB,EAAqC,CAArC,CAA1B;;AAEAd,IAAAA,SAAS,CAACviD,QAAV,CAAoB,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAApB;;AACAuiD,IAAAA,SAAS,CAACvhG,YAAV,CAAwB,UAAxB,EAAoC,IAAIohG,0BAAJ,CAAgCC,iBAAhC,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,KAAzD,CAApC;;AACAE,IAAAA,SAAS,CAACvhG,YAAV,CAAwB,IAAxB,EAA8B,IAAIohG,0BAAJ,CAAgCC,iBAAhC,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,KAAzD,CAA9B;AAEA;;AAED,OAAKn9D,QAAL,GAAgBq9D,SAAhB;AACA,OAAKl9D,QAAL,GAAkBA,QAAQ,KAAK/tC,SAAf,GAA6B+tC,QAA7B,GAAwC,IAAIu1C,cAAJ,EAAxD;AAEA,OAAKryD,MAAL,GAAc,IAAIrD,OAAJ,CAAa,GAAb,EAAkB,GAAlB,CAAd;AAEA;;AAEDk+E,MAAM,CAAC/tG,SAAP,GAAmBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEtEoC,EAAAA,WAAW,EAAE2rG,MAFyD;AAItE/E,EAAAA,QAAQ,EAAE,IAJ4D;AAMtEr6D,EAAAA,OAAO,EAAE,UAAW6gB,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,QAAKD,SAAS,CAAC9sB,MAAV,KAAqB,IAA1B,EAAiC;AAEhC/S,MAAAA,OAAO,CAACyD,KAAR,CAAe,uFAAf;AAEA;;AAEDg6E,IAAAA,WAAW,CAAC7oE,kBAAZ,CAAgC,KAAKxB,WAArC;;AAEAyqE,IAAAA,gBAAgB,CAACl9E,IAAjB,CAAuBk/B,SAAS,CAAC9sB,MAAV,CAAiBK,WAAxC;;AACA,SAAKgJ,eAAL,CAAqBvX,gBAArB,CAAuCg7B,SAAS,CAAC9sB,MAAV,CAAiBC,kBAAxD,EAA4E,KAAKI,WAAjF;;AAEAsqE,IAAAA,WAAW,CAAC/oE,qBAAZ,CAAmC,KAAKyH,eAAxC;;AAEA,QAAKyjB,SAAS,CAAC9sB,MAAV,CAAiB21B,mBAAjB,IAAwC,KAAKroB,QAAL,CAAcoU,eAAd,KAAkC,KAA/E,EAAuF;AAEtFgpD,MAAAA,WAAW,CAACt8E,cAAZ,CAA4B,CAAEu8E,WAAW,CAACzyE,CAA1C;AAEA;;AAED,UAAM1D,QAAQ,GAAG,KAAK8Y,QAAL,CAAc9Y,QAA/B;AACA,QAAIjI,GAAJ,EAASD,GAAT;;AAEA,QAAKkI,QAAQ,KAAK,CAAlB,EAAsB;AAErBlI,MAAAA,GAAG,GAAG9vB,IAAI,CAAC8vB,GAAL,CAAUkI,QAAV,CAAN;AACAjI,MAAAA,GAAG,GAAG/vB,IAAI,CAAC+vB,GAAL,CAAUiI,QAAV,CAAN;AAEA;;AAED,UAAMhE,MAAM,GAAG,KAAKA,MAApB;AAEA+6E,IAAAA,eAAe,CAAER,KAAK,CAAC/9E,GAAN,CAAW,CAAE,GAAb,EAAkB,CAAE,GAApB,EAAyB,CAAzB,CAAF,EAAgC29E,WAAhC,EAA6Cn6E,MAA7C,EAAqDk6E,WAArD,EAAkEn+E,GAAlE,EAAuED,GAAvE,CAAf;AACAi/E,IAAAA,eAAe,CAAEP,KAAK,CAACh+E,GAAN,CAAW,GAAX,EAAgB,CAAE,GAAlB,EAAuB,CAAvB,CAAF,EAA8B29E,WAA9B,EAA2Cn6E,MAA3C,EAAmDk6E,WAAnD,EAAgEn+E,GAAhE,EAAqED,GAArE,CAAf;AACAi/E,IAAAA,eAAe,CAAEN,KAAK,CAACj+E,GAAN,CAAW,GAAX,EAAgB,GAAhB,EAAqB,CAArB,CAAF,EAA4B29E,WAA5B,EAAyCn6E,MAAzC,EAAiDk6E,WAAjD,EAA8Dn+E,GAA9D,EAAmED,GAAnE,CAAf;;AAEA4+E,IAAAA,MAAM,CAACl+E,GAAP,CAAY,CAAZ,EAAe,CAAf;;AACAm+E,IAAAA,MAAM,CAACn+E,GAAP,CAAY,CAAZ,EAAe,CAAf;;AACAo+E,IAAAA,MAAM,CAACp+E,GAAP,CAAY,CAAZ,EAAe,CAAf,EAvC2C,CAyC3C;;;AACA,QAAIklB,SAAS,GAAG4a,SAAS,CAACpZ,GAAV,CAAcmC,iBAAd,CAAiCk1D,KAAjC,EAAwCC,KAAxC,EAA+CC,KAA/C,EAAsD,KAAtD,EAA6DR,eAA7D,CAAhB;;AAEA,QAAKv4D,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AACAq5D,MAAAA,eAAe,CAAEP,KAAK,CAACh+E,GAAN,CAAW,CAAE,GAAb,EAAkB,GAAlB,EAAuB,CAAvB,CAAF,EAA8B29E,WAA9B,EAA2Cn6E,MAA3C,EAAmDk6E,WAAnD,EAAgEn+E,GAAhE,EAAqED,GAArE,CAAf;;AACA6+E,MAAAA,MAAM,CAACn+E,GAAP,CAAY,CAAZ,EAAe,CAAf;;AAEAklB,MAAAA,SAAS,GAAG4a,SAAS,CAACpZ,GAAV,CAAcmC,iBAAd,CAAiCk1D,KAAjC,EAAwCE,KAAxC,EAA+CD,KAA/C,EAAsD,KAAtD,EAA6DP,eAA7D,CAAZ;;AACA,UAAKv4D,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA;AAED;;AAED,UAAMtH,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCk7E,eAAjC,CAAjB;AAEA,QAAK7/D,QAAQ,GAAGkiB,SAAS,CAACtmB,IAArB,IAA6BoE,QAAQ,GAAGkiB,SAAS,CAACrmB,GAAvD,EAA6D;AAE7DsmB,IAAAA,UAAU,CAACplD,IAAX,CAAiB;AAEhBijC,MAAAA,QAAQ,EAAEA,QAFM;AAGhB+F,MAAAA,KAAK,EAAE85D,eAAe,CAAC98E,KAAhB,EAHS;AAIhBqK,MAAAA,EAAE,EAAEkgB,QAAQ,CAACY,KAAT,CAAgB2xD,eAAhB,EAAiCM,KAAjC,EAAwCC,KAAxC,EAA+CC,KAA/C,EAAsDC,MAAtD,EAA8DC,MAA9D,EAAsEC,MAAtE,EAA8E,IAAIj+E,OAAJ,EAA9E,CAJY;AAKhBi5B,MAAAA,IAAI,EAAE,IALU;AAMhBnjD,MAAAA,MAAM,EAAE;AANQ,KAAjB;AAUA,GA/EqE;AAiFtE2qB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBssB,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,QAAKA,MAAM,CAACgU,MAAP,KAAkBjxB,SAAvB,EAAmC,KAAKixB,MAAL,CAAY5C,IAAZ,CAAkBpR,MAAM,CAACgU,MAAzB;AAEnC,SAAK8c,QAAL,GAAgB9wB,MAAM,CAAC8wB,QAAvB;AAEA,WAAO,IAAP;AAEA;AA3FqE,CAApD,CAAnB;;AA+FA,SAASi+D,eAAT,CAA0BC,cAA1B,EAA0CC,UAA1C,EAAsDj7E,MAAtD,EAA8DmE,KAA9D,EAAqEpI,GAArE,EAA0ED,GAA1E,EAAgF;AAE/E;AACAs+E,EAAAA,gBAAgB,CAAC38E,UAAjB,CAA6Bu9E,cAA7B,EAA6Ch7E,MAA7C,EAAsD1C,SAAtD,CAAiE,GAAjE,EAAuEK,QAAvE,CAAiFwG,KAAjF,EAH+E,CAK/E;;;AACA,MAAKpI,GAAG,KAAKhtB,SAAb,EAAyB;AAExBsrG,IAAAA,gBAAgB,CAAChlG,CAAjB,GAAuBymB,GAAG,GAAGs+E,gBAAgB,CAAC/kG,CAAzB,GAAiC0mB,GAAG,GAAGq+E,gBAAgB,CAAC7kG,CAA7E;AACA8kG,IAAAA,gBAAgB,CAAC9kG,CAAjB,GAAuBwmB,GAAG,GAAGq+E,gBAAgB,CAAC/kG,CAAzB,GAAiCymB,GAAG,GAAGs+E,gBAAgB,CAAC7kG,CAA7E;AAEA,GALD,MAKO;AAEN8kG,IAAAA,gBAAgB,CAACj9E,IAAjB,CAAuBg9E,gBAAvB;AAEA;;AAGDY,EAAAA,cAAc,CAAC59E,IAAf,CAAqB69E,UAArB;AACAD,EAAAA,cAAc,CAAC3lG,CAAf,IAAoBglG,gBAAgB,CAAChlG,CAArC;AACA2lG,EAAAA,cAAc,CAACzlG,CAAf,IAAoB8kG,gBAAgB,CAAC9kG,CAArC,CApB+E,CAsB/E;;AACAylG,EAAAA,cAAc,CAAClzE,YAAf,CAA6BwyE,gBAA7B;AAEA;AAED;;;;;;;AAMA,MAAMY,KAAK,GAAG,IAAI3sE,OAAJ,EAAd;;AACA,MAAM4sE,KAAK,GAAG,IAAI5sE,OAAJ,EAAd;;AAEA,SAAS6sE,GAAT,GAAe;AAEd9iE,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAKguG,aAAL,GAAqB,CAArB;AAEA,OAAKljG,IAAL,GAAY,KAAZ;AAEAzK,EAAAA,MAAM,CAACwV,gBAAP,CAAyB,IAAzB,EAA+B;AAC9Bo4F,IAAAA,MAAM,EAAE;AACP1iE,MAAAA,UAAU,EAAE,IADL;AAEPxnC,MAAAA,KAAK,EAAE;AAFA;AADsB,GAA/B;AAOA,OAAKqsC,UAAL,GAAkB,IAAlB;AAEA;;AAED29D,GAAG,CAACtuG,SAAJ,GAAgBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEnEoC,EAAAA,WAAW,EAAEksG,GAFsD;AAInE7E,EAAAA,KAAK,EAAE,IAJ4D;AAMnEn5E,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBssB,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC,EAA4C,KAA5C;AAEA,UAAMsvF,MAAM,GAAGtvF,MAAM,CAACsvF,MAAtB;;AAEA,SAAM,IAAIttG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGktG,MAAM,CAAC3uG,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAM4qG,KAAK,GAAG0C,MAAM,CAAEttG,CAAF,CAApB;AAEA,WAAKutG,QAAL,CAAe3C,KAAK,CAACnmG,MAAN,CAAa0qB,KAAb,EAAf,EAAqCy7E,KAAK,CAACx+D,QAA3C;AAEA;;AAED,SAAKqD,UAAL,GAAkBzxB,MAAM,CAACyxB,UAAzB;AAEA,WAAO,IAAP;AAEA,GAxBkE;AA0BnE89D,EAAAA,QAAQ,EAAE,UAAW9oG,MAAX,EAAmB2nC,QAAnB,EAA8B;AAEvC,QAAKA,QAAQ,KAAKrrC,SAAlB,EAA8BqrC,QAAQ,GAAG,CAAX;AAE9BA,IAAAA,QAAQ,GAAGpuC,IAAI,CAACwO,GAAL,CAAU4/B,QAAV,CAAX;AAEA,UAAMkhE,MAAM,GAAG,KAAKA,MAApB;AAEA,QAAIltG,CAAJ;;AAEA,SAAMA,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGktG,MAAM,CAAC3uG,MAAxB,EAAgCyB,CAAC,EAAjC,EAAuC;AAEtC,UAAKgsC,QAAQ,GAAGkhE,MAAM,CAAEltG,CAAF,CAAN,CAAYgsC,QAA5B,EAAuC;AAEtC;AAEA;AAED;;AAEDkhE,IAAAA,MAAM,CAAC9jG,MAAP,CAAepJ,CAAf,EAAkB,CAAlB,EAAqB;AAAEgsC,MAAAA,QAAQ,EAAEA,QAAZ;AAAsB3nC,MAAAA,MAAM,EAAEA;AAA9B,KAArB;AAEA,SAAKkT,GAAL,CAAUlT,MAAV;AAEA,WAAO,IAAP;AAEA,GApDkE;AAsDnE+oG,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO,KAAKH,aAAZ;AAEA,GA1DkE;AA4DnEI,EAAAA,oBAAoB,EAAE,UAAWrhE,QAAX,EAAsB;AAE3C,UAAMkhE,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKA,MAAM,CAAC3uG,MAAP,GAAgB,CAArB,EAAyB;AAExB,UAAIqB,CAAJ,EAAOI,CAAP;;AAEA,WAAMJ,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAGktG,MAAM,CAAC3uG,MAAxB,EAAgCqB,CAAC,GAAGI,CAApC,EAAuCJ,CAAC,EAAxC,EAA8C;AAE7C,YAAKosC,QAAQ,GAAGkhE,MAAM,CAAEttG,CAAF,CAAN,CAAYosC,QAA5B,EAAuC;AAEtC;AAEA;AAED;;AAED,aAAOkhE,MAAM,CAAEttG,CAAC,GAAG,CAAN,CAAN,CAAgByE,MAAvB;AAEA;;AAED,WAAO,IAAP;AAEA,GApFkE;AAsFnEgpC,EAAAA,OAAO,EAAE,UAAW6gB,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,UAAM++C,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKA,MAAM,CAAC3uG,MAAP,GAAgB,CAArB,EAAyB;AAExBuuG,MAAAA,KAAK,CAAC9pE,qBAAN,CAA6B,KAAKvB,WAAlC;;AAEA,YAAMuK,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCm8E,KAAjC,CAAjB;AAEA,WAAKO,oBAAL,CAA2BrhE,QAA3B,EAAsCqB,OAAtC,CAA+C6gB,SAA/C,EAA0DC,UAA1D;AAEA;AAED,GApGkE;AAsGnEpwB,EAAAA,MAAM,EAAE,UAAWqD,MAAX,EAAoB;AAE3B,UAAM8rE,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKA,MAAM,CAAC3uG,MAAP,GAAgB,CAArB,EAAyB;AAExBuuG,MAAAA,KAAK,CAAC9pE,qBAAN,CAA6B5B,MAAM,CAACK,WAApC;;AACAsrE,MAAAA,KAAK,CAAC/pE,qBAAN,CAA6B,KAAKvB,WAAlC;;AAEA,YAAMuK,QAAQ,GAAG8gE,KAAK,CAACn8E,UAAN,CAAkBo8E,KAAlB,IAA4B3rE,MAAM,CAACs1B,IAApD;AAEAw2C,MAAAA,MAAM,CAAE,CAAF,CAAN,CAAY7oG,MAAZ,CAAmBwmC,OAAnB,GAA6B,IAA7B;AAEA,UAAIjrC,CAAJ,EAAOI,CAAP;;AAEA,WAAMJ,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAGktG,MAAM,CAAC3uG,MAAxB,EAAgCqB,CAAC,GAAGI,CAApC,EAAuCJ,CAAC,EAAxC,EAA8C;AAE7C,YAAKosC,QAAQ,IAAIkhE,MAAM,CAAEttG,CAAF,CAAN,CAAYosC,QAA7B,EAAwC;AAEvCkhE,UAAAA,MAAM,CAAEttG,CAAC,GAAG,CAAN,CAAN,CAAgByE,MAAhB,CAAuBwmC,OAAvB,GAAiC,KAAjC;AACAqiE,UAAAA,MAAM,CAAEttG,CAAF,CAAN,CAAYyE,MAAZ,CAAmBwmC,OAAnB,GAA6B,IAA7B;AAEA,SALD,MAKO;AAEN;AAEA;AAED;;AAED,WAAKoiE,aAAL,GAAqBrtG,CAAC,GAAG,CAAzB;;AAEA,aAAQA,CAAC,GAAGI,CAAZ,EAAeJ,CAAC,EAAhB,EAAsB;AAErBstG,QAAAA,MAAM,CAAEttG,CAAF,CAAN,CAAYyE,MAAZ,CAAmBwmC,OAAnB,GAA6B,KAA7B;AAEA;AAED;AAED,GA9IkE;AAgJnEnS,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAG7E,QAAQ,CAACxrC,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,EAAsC05B,IAAtC,CAAb;AAEA,QAAK,KAAK0W,UAAL,KAAoB,KAAzB,EAAiCN,IAAI,CAAC1qC,MAAL,CAAYgrC,UAAZ,GAAyB,KAAzB;AAEjCN,IAAAA,IAAI,CAAC1qC,MAAL,CAAY6oG,MAAZ,GAAqB,EAArB;AAEA,UAAMA,MAAM,GAAG,KAAKA,MAApB;;AAEA,SAAM,IAAIttG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGktG,MAAM,CAAC3uG,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAM4qG,KAAK,GAAG0C,MAAM,CAAEttG,CAAF,CAApB;AAEAmvC,MAAAA,IAAI,CAAC1qC,MAAL,CAAY6oG,MAAZ,CAAmBnkG,IAAnB,CAAyB;AACxB1E,QAAAA,MAAM,EAAEmmG,KAAK,CAACnmG,MAAN,CAAasnB,IADG;AAExBqgB,QAAAA,QAAQ,EAAEw+D,KAAK,CAACx+D;AAFQ,OAAzB;AAKA;;AAED,WAAO+C,IAAP;AAEA;AAvKkE,CAApD,CAAhB;AA2KA;;;;;;AAMA,SAASu+D,WAAT,CAAsB/+D,QAAtB,EAAgCG,QAAhC,EAA2C;AAE1C,MAAKH,QAAQ,IAAIA,QAAQ,CAACyb,UAA1B,EAAuC;AAEtC37B,IAAAA,OAAO,CAACyD,KAAR,CAAe,wFAAf;AAEA;;AAED87B,EAAAA,IAAI,CAAC3uD,IAAL,CAAW,IAAX,EAAiBsvC,QAAjB,EAA2BG,QAA3B;AAEA,OAAK3kC,IAAL,GAAY,aAAZ;AAEA,OAAKwjG,QAAL,GAAgB,UAAhB;AACA,OAAKC,UAAL,GAAkB,IAAIlqE,OAAJ,EAAlB;AACA,OAAKmqE,iBAAL,GAAyB,IAAInqE,OAAJ,EAAzB;AAEA;;AAEDgqE,WAAW,CAAC5uG,SAAZ,GAAwBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeq1B,IAAI,CAAClvD,SAApB,CAAf,EAAgD;AAEvEoC,EAAAA,WAAW,EAAEwsG,WAF0D;AAIvEn+C,EAAAA,aAAa,EAAE,IAJwD;AAMvEngC,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBgwC,IAAAA,IAAI,CAAClvD,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;AAEA,SAAK2vF,QAAL,GAAgB3vF,MAAM,CAAC2vF,QAAvB;AACA,SAAKC,UAAL,CAAgBx+E,IAAhB,CAAsBpR,MAAM,CAAC4vF,UAA7B;AACA,SAAKC,iBAAL,CAAuBz+E,IAAvB,CAA6BpR,MAAM,CAAC6vF,iBAApC;AAEA,SAAKnpB,QAAL,GAAgB1mE,MAAM,CAAC0mE,QAAvB;AAEA,WAAO,IAAP;AAEA,GAlBsE;AAoBvE7kF,EAAAA,IAAI,EAAE,UAAW6kF,QAAX,EAAqBkpB,UAArB,EAAkC;AAEvC,SAAKlpB,QAAL,GAAgBA,QAAhB;;AAEA,QAAKkpB,UAAU,KAAK7sG,SAApB,EAAgC;AAE/B,WAAKssC,iBAAL,CAAwB,IAAxB;AAEA,WAAKq3C,QAAL,CAAcopB,iBAAd;AAEAF,MAAAA,UAAU,GAAG,KAAK/rE,WAAlB;AAEA;;AAED,SAAK+rE,UAAL,CAAgBx+E,IAAhB,CAAsBw+E,UAAtB;AACA,SAAKC,iBAAL,CAAuB/4E,UAAvB,CAAmC84E,UAAnC;AAEA,GArCsE;AAuCvE9R,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAKpX,QAAL,CAAcoX,IAAd;AAEA,GA3CsE;AA6CvEiS,EAAAA,oBAAoB,EAAE,YAAY;AAEjC,UAAMthE,MAAM,GAAG,IAAIhT,OAAJ,EAAf;AAEA,UAAMu0E,UAAU,GAAG,KAAKr/D,QAAL,CAAcwa,UAAd,CAAyB6kD,UAA5C;;AAEA,SAAM,IAAIhuG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4tG,UAAU,CAAC5/D,KAAhC,EAAuCpuC,CAAC,GAAGI,CAA3C,EAA8CJ,CAAC,EAA/C,EAAqD;AAEpDysC,MAAAA,MAAM,CAACplC,CAAP,GAAW2mG,UAAU,CAACn8E,IAAX,CAAiB7xB,CAAjB,CAAX;AACAysC,MAAAA,MAAM,CAACllC,CAAP,GAAWymG,UAAU,CAACl8E,IAAX,CAAiB9xB,CAAjB,CAAX;AACAysC,MAAAA,MAAM,CAAC/S,CAAP,GAAWs0E,UAAU,CAAC7yE,IAAX,CAAiBn7B,CAAjB,CAAX;AACAysC,MAAAA,MAAM,CAAC3vB,CAAP,GAAWkxF,UAAU,CAAC5yE,IAAX,CAAiBp7B,CAAjB,CAAX;AAEA,YAAMm2B,KAAK,GAAG,MAAMsW,MAAM,CAAC9b,eAAP,EAApB;;AAEA,UAAKwF,KAAK,KAAKya,QAAf,EAA0B;AAEzBnE,QAAAA,MAAM,CAAC7c,cAAP,CAAuBuG,KAAvB;AAEA,OAJD,MAIO;AAENsW,QAAAA,MAAM,CAACje,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAFM,CAEoB;AAE1B;;AAEDw/E,MAAAA,UAAU,CAACzoD,OAAX,CAAoBvlD,CAApB,EAAuBysC,MAAM,CAACplC,CAA9B,EAAiColC,MAAM,CAACllC,CAAxC,EAA2CklC,MAAM,CAAC/S,CAAlD,EAAqD+S,MAAM,CAAC3vB,CAA5D;AAEA;AAED,GA1EsE;AA4EvEuwB,EAAAA,iBAAiB,EAAE,UAAWQ,KAAX,EAAmB;AAErCmgB,IAAAA,IAAI,CAAClvD,SAAL,CAAeuuC,iBAAf,CAAiChuC,IAAjC,CAAuC,IAAvC,EAA6CwuC,KAA7C;;AAEA,QAAK,KAAK8/D,QAAL,KAAkB,UAAvB,EAAoC;AAEnC,WAAKE,iBAAL,CAAuB/4E,UAAvB,CAAmC,KAAK+M,WAAxC;AAEA,KAJD,MAIO,IAAK,KAAK8rE,QAAL,KAAkB,UAAvB,EAAoC;AAE1C,WAAKE,iBAAL,CAAuB/4E,UAAvB,CAAmC,KAAK84E,UAAxC;AAEA,KAJM,MAIA;AAENn/E,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAA+C,KAAKi/E,QAAlE;AAEA;AAED,GA9FsE;AAgGvEn+C,EAAAA,aAAa,EAAI,YAAY;AAE5B,UAAMy+C,YAAY,GAAG,IAAI1tE,OAAJ,EAArB;AAEA,UAAM2tE,SAAS,GAAG,IAAIz0E,OAAJ,EAAlB;AACA,UAAMu0E,UAAU,GAAG,IAAIv0E,OAAJ,EAAnB;AAEA,UAAMgT,MAAM,GAAG,IAAIlM,OAAJ,EAAf;AACA,UAAMxL,MAAM,GAAG,IAAI2O,OAAJ,EAAf;AAEA,WAAO,UAAWn6B,KAAX,EAAkBpK,MAAlB,EAA2B;AAEjC,YAAMulF,QAAQ,GAAG,KAAKA,QAAtB;AACA,YAAM/1C,QAAQ,GAAG,KAAKA,QAAtB;AAEAu/D,MAAAA,SAAS,CAACv8E,mBAAV,CAA+Bgd,QAAQ,CAACwa,UAAT,CAAoB+kD,SAAnD,EAA8D3kG,KAA9D;AACAykG,MAAAA,UAAU,CAACr8E,mBAAX,CAAgCgd,QAAQ,CAACwa,UAAT,CAAoB6kD,UAApD,EAAgEzkG,KAAhE;AAEA0kG,MAAAA,YAAY,CAACt8E,mBAAb,CAAkCgd,QAAQ,CAACwa,UAAT,CAAoB3iD,QAAtD,EAAgE+C,KAAhE,EAAwEuwB,YAAxE,CAAsF,KAAK8zE,UAA3F;AAEAzuG,MAAAA,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;;AAEA,WAAM,IAAIxuB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,cAAMmuG,MAAM,GAAGH,UAAU,CAAC9+E,YAAX,CAAyBlvB,CAAzB,CAAf;;AAEA,YAAKmuG,MAAM,KAAK,CAAhB,EAAoB;AAEnB,gBAAMC,SAAS,GAAGF,SAAS,CAACh/E,YAAV,CAAwBlvB,CAAxB,CAAlB;AAEA+0B,UAAAA,MAAM,CAACzB,gBAAP,CAAyBoxD,QAAQ,CAACC,KAAT,CAAgBypB,SAAhB,EAA4BvsE,WAArD,EAAkE6iD,QAAQ,CAAC2pB,YAAT,CAAuBD,SAAvB,CAAlE;AAEAjvG,UAAAA,MAAM,CAACowB,eAAP,CAAwBkd,MAAM,CAACrd,IAAP,CAAa6+E,YAAb,EAA4Bn0E,YAA5B,CAA0C/E,MAA1C,CAAxB,EAA4Eo5E,MAA5E;AAEA;AAED;;AAED,aAAOhvG,MAAM,CAAC26B,YAAP,CAAqB,KAAK+zE,iBAA1B,CAAP;AAEA,KA9BD;AAgCA,GA1CgB;AAhGsD,CAAhD,CAAxB;AA8IA;;;;;;;AAOA,MAAMS,aAAa,GAAG,IAAI5qE,OAAJ,EAAtB;;AACA,MAAM6qE,eAAe,GAAG,IAAI7qE,OAAJ,EAAxB;;AAEA,SAAS8qE,QAAT,CAAmB7pB,KAAnB,EAA0B0pB,YAA1B,EAAyC;AAExC;AAEA1pB,EAAAA,KAAK,GAAGA,KAAK,IAAI,EAAjB;AAEA,OAAKA,KAAL,GAAaA,KAAK,CAAC1lF,KAAN,CAAa,CAAb,CAAb;AACA,OAAK6qG,YAAL,GAAoB,IAAItjD,YAAJ,CAAkB,KAAKm+B,KAAL,CAAWhmF,MAAX,GAAoB,EAAtC,CAApB;AAEA,OAAKsgE,KAAL,GAAa,CAAE,CAAf,CATwC,CAWxC;;AAEA,MAAKovC,YAAY,KAAKttG,SAAtB,EAAkC;AAEjC,SAAK+sG,iBAAL;AAEA,GAJD,MAIO;AAEN,QAAK,KAAKnpB,KAAL,CAAWhmF,MAAX,KAAsB0vG,YAAY,CAAC1vG,MAAxC,EAAiD;AAEhD,WAAK0vG,YAAL,GAAoBA,YAAY,CAACpvG,KAAb,CAAoB,CAApB,CAApB;AAEA,KAJD,MAIO;AAENwvB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AAEA,WAAK2/E,YAAL,GAAoB,EAApB;;AAEA,WAAM,IAAIruG,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkzC,KAAL,CAAWhmF,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,aAAKquG,YAAL,CAAkBllG,IAAlB,CAAwB,IAAIu6B,OAAJ,EAAxB;AAEA;AAED;AAED;AAED;;AAEDhkC,MAAM,CAACme,MAAP,CAAe2wF,QAAQ,CAAC1vG,SAAxB,EAAmC;AAElCgvG,EAAAA,iBAAiB,EAAE,YAAY;AAE9B,SAAKO,YAAL,GAAoB,EAApB;;AAEA,SAAM,IAAIruG,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkzC,KAAL,CAAWhmF,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,YAAMo/B,OAAO,GAAG,IAAIsE,OAAJ,EAAhB;;AAEA,UAAK,KAAKihD,KAAL,CAAY3kF,CAAZ,CAAL,EAAuB;AAEtBo/B,QAAAA,OAAO,CAACtK,UAAR,CAAoB,KAAK6vD,KAAL,CAAY3kF,CAAZ,EAAgB6hC,WAApC;AAEA;;AAED,WAAKwsE,YAAL,CAAkBllG,IAAlB,CAAwBi2B,OAAxB;AAEA;AAED,GApBiC;AAsBlC08D,EAAAA,IAAI,EAAE,YAAY;AAEjB;AAEA,SAAM,IAAI97F,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkzC,KAAL,CAAWhmF,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,YAAMyuG,IAAI,GAAG,KAAK9pB,KAAL,CAAY3kF,CAAZ,CAAb;;AAEA,UAAKyuG,IAAL,EAAY;AAEXA,QAAAA,IAAI,CAAC5sE,WAAL,CAAiB/M,UAAjB,CAA6B,KAAKu5E,YAAL,CAAmBruG,CAAnB,CAA7B;AAEA;AAED,KAdgB,CAgBjB;;;AAEA,SAAM,IAAIA,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkzC,KAAL,CAAWhmF,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,YAAMyuG,IAAI,GAAG,KAAK9pB,KAAL,CAAY3kF,CAAZ,CAAb;;AAEA,UAAKyuG,IAAL,EAAY;AAEX,YAAKA,IAAI,CAACh6F,MAAL,IAAeg6F,IAAI,CAACh6F,MAAL,CAAYi6F,MAAhC,EAAyC;AAExCD,UAAAA,IAAI,CAAC15E,MAAL,CAAYD,UAAZ,CAAwB25E,IAAI,CAACh6F,MAAL,CAAYotB,WAApC;AACA4sE,UAAAA,IAAI,CAAC15E,MAAL,CAAYpF,QAAZ,CAAsB8+E,IAAI,CAAC5sE,WAA3B;AAEA,SALD,MAKO;AAEN4sE,UAAAA,IAAI,CAAC15E,MAAL,CAAY3F,IAAZ,CAAkBq/E,IAAI,CAAC5sE,WAAvB;AAEA;;AAED4sE,QAAAA,IAAI,CAAC15E,MAAL,CAAY4S,SAAZ,CAAuB8mE,IAAI,CAACjoG,QAA5B,EAAsCioG,IAAI,CAACzwE,UAA3C,EAAuDywE,IAAI,CAACt4E,KAA5D;AAEA;AAED;AAED,GA/DiC;AAiElCgI,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMwmD,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAM0pB,YAAY,GAAG,KAAKA,YAA1B;AACA,UAAMvE,YAAY,GAAG,KAAKA,YAA1B;AACA,UAAMD,WAAW,GAAG,KAAKA,WAAzB,CALmB,CAOnB;;AAEA,SAAM,IAAI7pG,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGkzC,KAAK,CAAChmF,MAA5B,EAAoCqB,CAAC,GAAGyxC,EAAxC,EAA4CzxC,CAAC,EAA7C,EAAmD;AAElD;AAEA,YAAM+0B,MAAM,GAAG4vD,KAAK,CAAE3kF,CAAF,CAAL,GAAa2kF,KAAK,CAAE3kF,CAAF,CAAL,CAAW6hC,WAAxB,GAAsC0sE,eAArD;;AAEAD,MAAAA,aAAa,CAACh7E,gBAAd,CAAgCyB,MAAhC,EAAwCs5E,YAAY,CAAEruG,CAAF,CAApD;;AACAsuG,MAAAA,aAAa,CAACxtG,OAAd,CAAuBgpG,YAAvB,EAAqC9pG,CAAC,GAAG,EAAzC;AAEA;;AAED,QAAK6pG,WAAW,KAAK9oG,SAArB,EAAiC;AAEhC8oG,MAAAA,WAAW,CAAC9/C,WAAZ,GAA0B,IAA1B;AAEA;AAED,GA3FiC;AA6FlC56B,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAIq/E,QAAJ,CAAc,KAAK7pB,KAAnB,EAA0B,KAAK0pB,YAA/B,CAAP;AAEA,GAjGiC;AAmGlCM,EAAAA,aAAa,EAAE,UAAWr5F,IAAX,EAAkB;AAEhC,SAAM,IAAItV,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG,KAAKkzC,KAAL,CAAWhmF,MAAjC,EAAyCqB,CAAC,GAAGyxC,EAA7C,EAAiDzxC,CAAC,EAAlD,EAAwD;AAEvD,YAAMyuG,IAAI,GAAG,KAAK9pB,KAAL,CAAY3kF,CAAZ,CAAb;;AAEA,UAAKyuG,IAAI,CAACn5F,IAAL,KAAcA,IAAnB,EAA0B;AAEzB,eAAOm5F,IAAP;AAEA;AAED;;AAED,WAAO1tG,SAAP;AAEA,GAnHiC;AAqHlCu4B,EAAAA,OAAO,EAAE,YAAa;AAErB,QAAK,KAAKuwE,WAAV,EAAwB;AAEvB,WAAKA,WAAL,CAAiBvwE,OAAjB;AAEA,WAAKuwE,WAAL,GAAmB9oG,SAAnB;AAEA;AAED;AA/HiC,CAAnC;AAmIA;;;;;;AAMA,SAAS6tG,IAAT,GAAgB;AAEftkE,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,MAAZ;AAEA;;AAEDykG,IAAI,CAAC9vG,SAAL,GAAiBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEpEoC,EAAAA,WAAW,EAAE0tG,IAFuD;AAIpEF,EAAAA,MAAM,EAAE;AAJ4D,CAApD,CAAjB;AAQA;;;;AAIA,MAAMG,oBAAoB,GAAG,IAAInrE,OAAJ,EAA7B;;AACA,MAAMorE,oBAAoB,GAAG,IAAIprE,OAAJ,EAA7B;;AAEA,MAAMqrE,mBAAmB,GAAG,EAA5B;;AAEA,MAAMC,KAAK,GAAG,IAAIhhD,IAAJ,EAAd;;AAEA,SAASihD,aAAT,CAAwBtgE,QAAxB,EAAkCG,QAAlC,EAA4CV,KAA5C,EAAoD;AAEnD4f,EAAAA,IAAI,CAAC3uD,IAAL,CAAW,IAAX,EAAiBsvC,QAAjB,EAA2BG,QAA3B;AAEA,OAAKT,cAAL,GAAsB,IAAI+V,eAAJ,CAAqB,IAAIoC,YAAJ,CAAkBpY,KAAK,GAAG,EAA1B,CAArB,EAAqD,EAArD,CAAtB;AAEA,OAAKA,KAAL,GAAaA,KAAb;AAEA,OAAKhD,aAAL,GAAqB,KAArB;AAEA;;AAED6jE,aAAa,CAACnwG,SAAd,GAA0BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeq1B,IAAI,CAAClvD,SAApB,CAAf,EAAgD;AAEzEoC,EAAAA,WAAW,EAAE+tG,aAF4D;AAIzE9gE,EAAAA,eAAe,EAAE,IAJwD;AAMzE/e,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBgwC,IAAAA,IAAI,CAAClvD,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;AAEA,SAAKqwB,cAAL,CAAoBjf,IAApB,CAA0BpR,MAAM,CAACqwB,cAAjC;AACA,SAAKD,KAAL,GAAapwB,MAAM,CAACowB,KAApB;AAEA,WAAO,IAAP;AAEA,GAfwE;AAiBzE8gE,EAAAA,WAAW,EAAE,UAAW3lG,KAAX,EAAkBwrB,MAAlB,EAA2B;AAEvCA,IAAAA,MAAM,CAACrD,SAAP,CAAkB,KAAK2c,cAAL,CAAoBljB,KAAtC,EAA6C5hB,KAAK,GAAG,EAArD;AAEA,GArBwE;AAuBzEkkC,EAAAA,OAAO,EAAE,UAAW6gB,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,UAAM1sB,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMstE,YAAY,GAAG,KAAK/gE,KAA1B;AAEA4gE,IAAAA,KAAK,CAACrgE,QAAN,GAAiB,KAAKA,QAAtB;AACAqgE,IAAAA,KAAK,CAAClgE,QAAN,GAAiB,KAAKA,QAAtB;AAEA,QAAKkgE,KAAK,CAAClgE,QAAN,KAAmB/tC,SAAxB,EAAoC;;AAEpC,SAAM,IAAIquG,UAAU,GAAG,CAAvB,EAA0BA,UAAU,GAAGD,YAAvC,EAAqDC,UAAU,EAA/D,EAAqE;AAEpE;AAEA,WAAKF,WAAL,CAAkBE,UAAlB,EAA8BP,oBAA9B;;AAEAC,MAAAA,oBAAoB,CAACx7E,gBAArB,CAAuCuO,WAAvC,EAAoDgtE,oBAApD,EANoE,CAQpE;;;AAEAG,MAAAA,KAAK,CAACntE,WAAN,GAAoBitE,oBAApB;;AAEAE,MAAAA,KAAK,CAACvhE,OAAN,CAAe6gB,SAAf,EAA0BygD,mBAA1B,EAZoE,CAcpE;;;AAEA,WAAM,IAAI/uG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG2uG,mBAAmB,CAACpwG,MAAzC,EAAiDqB,CAAC,GAAGI,CAArD,EAAwDJ,CAAC,EAAzD,EAA+D;AAE9D,cAAM0zC,SAAS,GAAGq7D,mBAAmB,CAAE/uG,CAAF,CAArC;AACA0zC,QAAAA,SAAS,CAAC07D,UAAV,GAAuBA,UAAvB;AACA17D,QAAAA,SAAS,CAACjvC,MAAV,GAAmB,IAAnB;AACA8pD,QAAAA,UAAU,CAACplD,IAAX,CAAiBuqC,SAAjB;AAEA;;AAEDq7D,MAAAA,mBAAmB,CAACpwG,MAApB,GAA6B,CAA7B;AAEA;AAED,GA9DwE;AAgEzE0wG,EAAAA,WAAW,EAAE,UAAW9lG,KAAX,EAAkBwrB,MAAlB,EAA2B;AAEvCA,IAAAA,MAAM,CAACj0B,OAAP,CAAgB,KAAKutC,cAAL,CAAoBljB,KAApC,EAA2C5hB,KAAK,GAAG,EAAnD;AAEA,GApEwE;AAsEzE0kD,EAAAA,kBAAkB,EAAE,YAAY,CAE/B;AAxEwE,CAAhD,CAA1B;AA4EA;;;;;;;;;;;;;;AAcA,SAASg2B,iBAAT,CAA4Br1C,UAA5B,EAAyC;AAExCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb;AAEA,OAAK8/C,SAAL,GAAiB,CAAjB;AACA,OAAKmsD,OAAL,GAAe,OAAf;AACA,OAAKC,QAAL,GAAgB,OAAhB;AAEA,OAAK7rD,YAAL,GAAoB,KAApB;AAEA,OAAK/C,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDq1C,iBAAiB,CAACnlF,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA9B;AACAmlF,iBAAiB,CAACnlF,SAAlB,CAA4BoC,WAA5B,GAA0C+iF,iBAA1C;AAEAA,iBAAiB,CAACnlF,SAAlB,CAA4BkiG,mBAA5B,GAAkD,IAAlD;;AAEA/c,iBAAiB,CAACnlF,SAAlB,CAA4BswB,IAA5B,GAAmC,UAAWpR,MAAX,EAAoB;AAEtDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAK0lD,SAAL,GAAiBnlC,MAAM,CAACmlC,SAAxB;AACA,OAAKmsD,OAAL,GAAetxF,MAAM,CAACsxF,OAAtB;AACA,OAAKC,QAAL,GAAgBvxF,MAAM,CAACuxF,QAAvB;AAEA,OAAK7rD,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CAdD;AAgBA;;;;;AAIA,MAAM8rD,MAAM,GAAG,IAAIjvE,OAAJ,EAAf;;AACA,MAAMkvE,IAAI,GAAG,IAAIlvE,OAAJ,EAAb;;AACA,MAAMmvE,gBAAgB,GAAG,IAAIhsE,OAAJ,EAAzB;;AACA,MAAMisE,MAAM,GAAG,IAAI56D,GAAJ,EAAf;;AACA,MAAM66D,SAAS,GAAG,IAAI17D,MAAJ,EAAlB;;AAEA,SAAS27D,IAAT,CAAelhE,QAAf,EAAyBG,QAAzB,EAAmC4gC,IAAnC,EAA0C;AAEzC,MAAKA,IAAI,KAAK,CAAd,EAAkB;AAEjBjhD,IAAAA,OAAO,CAACyD,KAAR,CAAe,6FAAf;AAEA;;AAEDoY,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,MAAZ;AAEA,OAAKwkC,QAAL,GAAgBA,QAAQ,KAAK5tC,SAAb,GAAyB4tC,QAAzB,GAAoC,IAAIua,cAAJ,EAApD;AACA,OAAKpa,QAAL,GAAgBA,QAAQ,KAAK/tC,SAAb,GAAyB+tC,QAAzB,GAAoC,IAAIm1C,iBAAJ,EAApD;AAEA,OAAKh2B,kBAAL;AAEA;;AAED4hD,IAAI,CAAC/wG,SAAL,GAAiBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEpEoC,EAAAA,WAAW,EAAE2uG,IAFuD;AAIpEphE,EAAAA,MAAM,EAAE,IAJ4D;AAMpErf,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBssB,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,SAAK8wB,QAAL,GAAgB9wB,MAAM,CAAC8wB,QAAvB;AACA,SAAKH,QAAL,GAAgB3wB,MAAM,CAAC2wB,QAAvB;AAEA,WAAO,IAAP;AAEA,GAfmE;AAiBpEmhE,EAAAA,oBAAoB,EAAE,YAAY;AAEjC,UAAMnhE,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,QAAKA,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC;AAEA,UAAK5a,QAAQ,CAACplC,KAAT,KAAmB,IAAxB,EAA+B;AAE9B,cAAM0hD,iBAAiB,GAAGtc,QAAQ,CAACwa,UAAT,CAAoB3iD,QAA9C;AACA,cAAM2jD,aAAa,GAAG,CAAE,CAAF,CAAtB;;AAEA,aAAM,IAAInqD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG6qD,iBAAiB,CAAC7c,KAAvC,EAA8CpuC,CAAC,GAAGI,CAAlD,EAAqDJ,CAAC,EAAtD,EAA4D;AAE3DwvG,UAAAA,MAAM,CAAC79E,mBAAP,CAA4Bs5B,iBAA5B,EAA+CjrD,CAAC,GAAG,CAAnD;;AACAyvG,UAAAA,IAAI,CAAC99E,mBAAL,CAA0Bs5B,iBAA1B,EAA6CjrD,CAA7C;;AAEAmqD,UAAAA,aAAa,CAAEnqD,CAAF,CAAb,GAAqBmqD,aAAa,CAAEnqD,CAAC,GAAG,CAAN,CAAlC;AACAmqD,UAAAA,aAAa,CAAEnqD,CAAF,CAAb,IAAsBwvG,MAAM,CAACz+E,UAAP,CAAmB0+E,IAAnB,CAAtB;AAEA;;AAED9gE,QAAAA,QAAQ,CAAClkC,YAAT,CAAuB,cAAvB,EAAuC,IAAI87C,sBAAJ,CAA4B4D,aAA5B,EAA2C,CAA3C,CAAvC;AAEA,OAjBD,MAiBO;AAEN17B,QAAAA,OAAO,CAACC,IAAR,CAAc,+FAAd;AAEA;AAED,KA3BD,MA2BO,IAAKigB,QAAQ,CAACyb,UAAd,EAA2B;AAEjC,YAAMxD,QAAQ,GAAGjY,QAAQ,CAACiY,QAA1B;AACA,YAAMuD,aAAa,GAAGxb,QAAQ,CAACwb,aAA/B;AAEAA,MAAAA,aAAa,CAAE,CAAF,CAAb,GAAqB,CAArB;;AAEA,WAAM,IAAInqD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGwmD,QAAQ,CAACjoD,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDmqD,QAAAA,aAAa,CAAEnqD,CAAF,CAAb,GAAqBmqD,aAAa,CAAEnqD,CAAC,GAAG,CAAN,CAAlC;AACAmqD,QAAAA,aAAa,CAAEnqD,CAAF,CAAb,IAAsB4mD,QAAQ,CAAE5mD,CAAC,GAAG,CAAN,CAAR,CAAkB+wB,UAAlB,CAA8B61B,QAAQ,CAAE5mD,CAAF,CAAtC,CAAtB;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAlEmE;AAoEpEytC,EAAAA,OAAO,EAAE,UAAW6gB,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,UAAM5f,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAM9M,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMrhC,SAAS,GAAG8tD,SAAS,CAACtnD,MAAV,CAAiB6oG,IAAjB,CAAsBrvG,SAAxC,CAJ2C,CAM3C;;AAEA,QAAKmuC,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwCxY,QAAQ,CAACsb,qBAAT;;AAExC2lD,IAAAA,SAAS,CAACxgF,IAAV,CAAgBuf,QAAQ,CAACwY,cAAzB;;AACAyoD,IAAAA,SAAS,CAAC91E,YAAV,CAAwB+H,WAAxB;;AACA+tE,IAAAA,SAAS,CAAC7sE,MAAV,IAAoBviC,SAApB;AAEA,QAAK8tD,SAAS,CAACpZ,GAAV,CAAcrC,gBAAd,CAAgC+8D,SAAhC,MAAgD,KAArD,EAA6D,OAdlB,CAgB3C;;AAEAF,IAAAA,gBAAgB,CAAC56E,UAAjB,CAA6B+M,WAA7B;;AACA8tE,IAAAA,MAAM,CAACvgF,IAAP,CAAak/B,SAAS,CAACpZ,GAAvB,EAA6Bpb,YAA7B,CAA2C41E,gBAA3C;;AAEA,UAAMK,cAAc,GAAGvvG,SAAS,IAAK,CAAE,KAAK21B,KAAL,CAAW9uB,CAAX,GAAe,KAAK8uB,KAAL,CAAW5uB,CAA1B,GAA8B,KAAK4uB,KAAL,CAAWuD,CAA3C,IAAiD,CAAtD,CAAhC;AACA,UAAMs2E,gBAAgB,GAAGD,cAAc,GAAGA,cAA1C;AAEA,UAAME,MAAM,GAAG,IAAI1vE,OAAJ,EAAf;AACA,UAAM2vE,IAAI,GAAG,IAAI3vE,OAAJ,EAAb;AACA,UAAM4vE,YAAY,GAAG,IAAI5vE,OAAJ,EAArB;AACA,UAAM6vE,QAAQ,GAAG,IAAI7vE,OAAJ,EAAjB;AACA,UAAMn0B,IAAI,GAAK,QAAQ,KAAKw7F,cAAf,GAAkC,CAAlC,GAAsC,CAAnD;;AAEA,QAAKj5D,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC,YAAMhgD,KAAK,GAAGolC,QAAQ,CAACplC,KAAvB;AACA,YAAM4/C,UAAU,GAAGxa,QAAQ,CAACwa,UAA5B;AACA,YAAMe,SAAS,GAAGf,UAAU,CAAC3iD,QAAX,CAAoB2kB,KAAtC;;AAEA,UAAK5hB,KAAK,KAAK,IAAf,EAAsB;AAErB,cAAMgjD,OAAO,GAAGhjD,KAAK,CAAC4hB,KAAtB;;AAEA,aAAM,IAAInrB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmsD,OAAO,CAAC5tD,MAAR,GAAiB,CAAtC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,IAAIoM,IAArD,EAA4D;AAE3D,gBAAMhO,CAAC,GAAGmuD,OAAO,CAAEvsD,CAAF,CAAjB;AACA,gBAAM7B,CAAC,GAAGouD,OAAO,CAAEvsD,CAAC,GAAG,CAAN,CAAjB;AAEAiwG,UAAAA,MAAM,CAACv+E,SAAP,CAAkBw4B,SAAlB,EAA6B9rD,CAAC,GAAG,CAAjC;AACA8xG,UAAAA,IAAI,CAACx+E,SAAL,CAAgBw4B,SAAhB,EAA2B/rD,CAAC,GAAG,CAA/B;;AAEA,gBAAMkyG,MAAM,GAAGV,MAAM,CAACn6D,mBAAP,CAA4By6D,MAA5B,EAAoCC,IAApC,EAA0CE,QAA1C,EAAoDD,YAApD,CAAf;;AAEA,cAAKE,MAAM,GAAGL,gBAAd,EAAiC;AAEjCI,UAAAA,QAAQ,CAACt2E,YAAT,CAAuB,KAAK+H,WAA5B,EAZ2D,CAYhB;;AAE3C,gBAAMuK,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCq/E,QAAjC,CAAjB;AAEA,cAAKhkE,QAAQ,GAAGkiB,SAAS,CAACtmB,IAArB,IAA6BoE,QAAQ,GAAGkiB,SAAS,CAACrmB,GAAvD,EAA6D;AAE7DsmB,UAAAA,UAAU,CAACplD,IAAX,CAAiB;AAEhBijC,YAAAA,QAAQ,EAAEA,QAFM;AAGhB;AACA;AACA+F,YAAAA,KAAK,EAAEg+D,YAAY,CAAChhF,KAAb,GAAqB2K,YAArB,CAAmC,KAAK+H,WAAxC,CALS;AAMhBt4B,YAAAA,KAAK,EAAEvJ,CANS;AAOhB4nD,YAAAA,IAAI,EAAE,IAPU;AAQhBgH,YAAAA,SAAS,EAAE,IARK;AAShBnqD,YAAAA,MAAM,EAAE;AATQ,WAAjB;AAaA;AAED,OArCD,MAqCO;AAEN,aAAM,IAAIzE,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8pD,SAAS,CAACvrD,MAAV,GAAmB,CAAnB,GAAuB,CAA5C,EAA+CqB,CAAC,GAAGI,CAAnD,EAAsDJ,CAAC,IAAIoM,IAA3D,EAAkE;AAEjE6jG,UAAAA,MAAM,CAACv+E,SAAP,CAAkBw4B,SAAlB,EAA6B,IAAIlqD,CAAjC;AACAkwG,UAAAA,IAAI,CAACx+E,SAAL,CAAgBw4B,SAAhB,EAA2B,IAAIlqD,CAAJ,GAAQ,CAAnC;;AAEA,gBAAMqwG,MAAM,GAAGV,MAAM,CAACn6D,mBAAP,CAA4By6D,MAA5B,EAAoCC,IAApC,EAA0CE,QAA1C,EAAoDD,YAApD,CAAf;;AAEA,cAAKE,MAAM,GAAGL,gBAAd,EAAiC;AAEjCI,UAAAA,QAAQ,CAACt2E,YAAT,CAAuB,KAAK+H,WAA5B,EATiE,CAStB;;AAE3C,gBAAMuK,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCq/E,QAAjC,CAAjB;AAEA,cAAKhkE,QAAQ,GAAGkiB,SAAS,CAACtmB,IAArB,IAA6BoE,QAAQ,GAAGkiB,SAAS,CAACrmB,GAAvD,EAA6D;AAE7DsmB,UAAAA,UAAU,CAACplD,IAAX,CAAiB;AAEhBijC,YAAAA,QAAQ,EAAEA,QAFM;AAGhB;AACA;AACA+F,YAAAA,KAAK,EAAEg+D,YAAY,CAAChhF,KAAb,GAAqB2K,YAArB,CAAmC,KAAK+H,WAAxC,CALS;AAMhBt4B,YAAAA,KAAK,EAAEvJ,CANS;AAOhB4nD,YAAAA,IAAI,EAAE,IAPU;AAQhBgH,YAAAA,SAAS,EAAE,IARK;AAShBnqD,YAAAA,MAAM,EAAE;AATQ,WAAjB;AAaA;AAED;AAED,KA7ED,MA6EO,IAAKkqC,QAAQ,CAACyb,UAAd,EAA2B;AAEjC,YAAMxD,QAAQ,GAAGjY,QAAQ,CAACiY,QAA1B;AACA,YAAM0pD,UAAU,GAAG1pD,QAAQ,CAACjoD,MAA5B;;AAEA,WAAM,IAAIqB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGswG,UAAU,GAAG,CAAlC,EAAqCtwG,CAAC,IAAIoM,IAA1C,EAAiD;AAEhD,cAAMikG,MAAM,GAAGV,MAAM,CAACn6D,mBAAP,CAA4BoR,QAAQ,CAAE5mD,CAAF,CAApC,EAA2C4mD,QAAQ,CAAE5mD,CAAC,GAAG,CAAN,CAAnD,EAA8DowG,QAA9D,EAAwED,YAAxE,CAAf;;AAEA,YAAKE,MAAM,GAAGL,gBAAd,EAAiC;AAEjCI,QAAAA,QAAQ,CAACt2E,YAAT,CAAuB,KAAK+H,WAA5B,EANgD,CAML;;AAE3C,cAAMuK,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCq/E,QAAjC,CAAjB;AAEA,YAAKhkE,QAAQ,GAAGkiB,SAAS,CAACtmB,IAArB,IAA6BoE,QAAQ,GAAGkiB,SAAS,CAACrmB,GAAvD,EAA6D;AAE7DsmB,QAAAA,UAAU,CAACplD,IAAX,CAAiB;AAEhBijC,UAAAA,QAAQ,EAAEA,QAFM;AAGhB;AACA;AACA+F,UAAAA,KAAK,EAAEg+D,YAAY,CAAChhF,KAAb,GAAqB2K,YAArB,CAAmC,KAAK+H,WAAxC,CALS;AAMhBt4B,UAAAA,KAAK,EAAEvJ,CANS;AAOhB4nD,UAAAA,IAAI,EAAE,IAPU;AAQhBgH,UAAAA,SAAS,EAAE,IARK;AAShBnqD,UAAAA,MAAM,EAAE;AATQ,SAAjB;AAaA;AAED;AAED,GAjNmE;AAmNpEwpD,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,UAAMtf,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,QAAKA,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC,YAAMH,eAAe,GAAGza,QAAQ,CAACya,eAAjC;AACA,YAAM5pD,IAAI,GAAGE,MAAM,CAACF,IAAP,CAAa4pD,eAAb,CAAb;;AAEA,UAAK5pD,IAAI,CAACb,MAAL,GAAc,CAAnB,EAAuB;AAEtB,cAAMksD,cAAc,GAAGzB,eAAe,CAAE5pD,IAAI,CAAE,CAAF,CAAN,CAAtC;;AAEA,YAAKqrD,cAAc,KAAK9pD,SAAxB,EAAoC;AAEnC,eAAKmtD,qBAAL,GAA6B,EAA7B;AACA,eAAKC,qBAAL,GAA6B,EAA7B;;AAEA,eAAM,IAAI/hC,CAAC,GAAG,CAAR,EAAWgiC,EAAE,GAAGvD,cAAc,CAAClsD,MAArC,EAA6CytB,CAAC,GAAGgiC,EAAjD,EAAqDhiC,CAAC,EAAtD,EAA4D;AAE3D,kBAAM9W,IAAI,GAAGu1C,cAAc,CAAEz+B,CAAF,CAAd,CAAoB9W,IAApB,IAA4B+4C,MAAM,CAAEjiC,CAAF,CAA/C;AAEA,iBAAK8hC,qBAAL,CAA2B/kD,IAA3B,CAAiC,CAAjC;AACA,iBAAKglD,qBAAL,CAA4B74C,IAA5B,IAAqC8W,CAArC;AAEA;AAED;AAED;AAED,KA3BD,MA2BO;AAEN,YAAMs3B,YAAY,GAAG/U,QAAQ,CAAC+U,YAA9B;;AAEA,UAAKA,YAAY,KAAK3iD,SAAjB,IAA8B2iD,YAAY,CAAC/kD,MAAb,GAAsB,CAAzD,EAA6D;AAE5D8vB,QAAAA,OAAO,CAACyD,KAAR,CAAe,oGAAf;AAEA;AAED;AAED;AA9PmE,CAApD,CAAjB;AAkQA;;;;AAIA,MAAMq+E,QAAQ,GAAG,IAAIhwE,OAAJ,EAAjB;;AACA,MAAMiwE,MAAM,GAAG,IAAIjwE,OAAJ,EAAf;;AAEA,SAASkwE,YAAT,CAAuB9hE,QAAvB,EAAiCG,QAAjC,EAA4C;AAE3C+gE,EAAAA,IAAI,CAACxwG,IAAL,CAAW,IAAX,EAAiBsvC,QAAjB,EAA2BG,QAA3B;AAEA,OAAK3kC,IAAL,GAAY,cAAZ;AAEA;;AAEDsmG,YAAY,CAAC3xG,SAAb,GAAyBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAek3E,IAAI,CAAC/wG,SAApB,CAAf,EAAgD;AAExEoC,EAAAA,WAAW,EAAEuvG,YAF2D;AAIxE7I,EAAAA,cAAc,EAAE,IAJwD;AAMxEkI,EAAAA,oBAAoB,EAAE,YAAY;AAEjC,UAAMnhE,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,QAAKA,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC;AAEA,UAAK5a,QAAQ,CAACplC,KAAT,KAAmB,IAAxB,EAA+B;AAE9B,cAAM0hD,iBAAiB,GAAGtc,QAAQ,CAACwa,UAAT,CAAoB3iD,QAA9C;AACA,cAAM2jD,aAAa,GAAG,EAAtB;;AAEA,aAAM,IAAInqD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG6qD,iBAAiB,CAAC7c,KAAvC,EAA8CpuC,CAAC,GAAGI,CAAlD,EAAqDJ,CAAC,IAAI,CAA1D,EAA8D;AAE7DuwG,UAAAA,QAAQ,CAAC5+E,mBAAT,CAA8Bs5B,iBAA9B,EAAiDjrD,CAAjD;;AACAwwG,UAAAA,MAAM,CAAC7+E,mBAAP,CAA4Bs5B,iBAA5B,EAA+CjrD,CAAC,GAAG,CAAnD;;AAEAmqD,UAAAA,aAAa,CAAEnqD,CAAF,CAAb,GAAuBA,CAAC,KAAK,CAAR,GAAc,CAAd,GAAkBmqD,aAAa,CAAEnqD,CAAC,GAAG,CAAN,CAApD;AACAmqD,UAAAA,aAAa,CAAEnqD,CAAC,GAAG,CAAN,CAAb,GAAyBmqD,aAAa,CAAEnqD,CAAF,CAAb,GAAqBuwG,QAAQ,CAACx/E,UAAT,CAAqBy/E,MAArB,CAA9C;AAEA;;AAED7hE,QAAAA,QAAQ,CAAClkC,YAAT,CAAuB,cAAvB,EAAuC,IAAI87C,sBAAJ,CAA4B4D,aAA5B,EAA2C,CAA3C,CAAvC;AAEA,OAjBD,MAiBO;AAEN17B,QAAAA,OAAO,CAACC,IAAR,CAAc,uGAAd;AAEA;AAED,KA3BD,MA2BO,IAAKigB,QAAQ,CAACyb,UAAd,EAA2B;AAEjC,YAAMxD,QAAQ,GAAGjY,QAAQ,CAACiY,QAA1B;AACA,YAAMuD,aAAa,GAAGxb,QAAQ,CAACwb,aAA/B;;AAEA,WAAM,IAAInqD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGwmD,QAAQ,CAACjoD,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,IAAI,CAAlD,EAAsD;AAErDuwG,QAAAA,QAAQ,CAACnhF,IAAT,CAAew3B,QAAQ,CAAE5mD,CAAF,CAAvB;;AACAwwG,QAAAA,MAAM,CAACphF,IAAP,CAAaw3B,QAAQ,CAAE5mD,CAAC,GAAG,CAAN,CAArB;;AAEAmqD,QAAAA,aAAa,CAAEnqD,CAAF,CAAb,GAAuBA,CAAC,KAAK,CAAR,GAAc,CAAd,GAAkBmqD,aAAa,CAAEnqD,CAAC,GAAG,CAAN,CAApD;AACAmqD,QAAAA,aAAa,CAAEnqD,CAAC,GAAG,CAAN,CAAb,GAAyBmqD,aAAa,CAAEnqD,CAAF,CAAb,GAAqBuwG,QAAQ,CAACx/E,UAAT,CAAqBy/E,MAArB,CAA9C;AAEA;AAED;;AAED,WAAO,IAAP;AAEA;AAxDuE,CAAhD,CAAzB;AA4DA;;;;AAIA,SAASE,QAAT,CAAmB/hE,QAAnB,EAA6BG,QAA7B,EAAwC;AAEvC+gE,EAAAA,IAAI,CAACxwG,IAAL,CAAW,IAAX,EAAiBsvC,QAAjB,EAA2BG,QAA3B;AAEA,OAAK3kC,IAAL,GAAY,UAAZ;AAEA;;AAEDumG,QAAQ,CAAC5xG,SAAT,GAAqBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAek3E,IAAI,CAAC/wG,SAApB,CAAf,EAAgD;AAEpEoC,EAAAA,WAAW,EAAEwvG,QAFuD;AAIpE7I,EAAAA,UAAU,EAAE;AAJwD,CAAhD,CAArB;AAQA;;;;;;;;;;;;;;;;;AAiBA,SAAS1jB,cAAT,CAAyBv1C,UAAzB,EAAsC;AAErCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,gBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb;AAEA,OAAK6H,GAAL,GAAW,IAAX;AAEA,OAAK02C,QAAL,GAAgB,IAAhB;AAEA,OAAKhQ,IAAL,GAAY,CAAZ;AACA,OAAKsR,eAAL,GAAuB,IAAvB;AAEA,OAAKQ,YAAL,GAAoB,KAApB;AAEA,OAAK/C,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDu1C,cAAc,CAACrlF,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA3B;AACAqlF,cAAc,CAACrlF,SAAf,CAAyBoC,WAAzB,GAAuCijF,cAAvC;AAEAA,cAAc,CAACrlF,SAAf,CAAyBsiG,gBAAzB,GAA4C,IAA5C;;AAEAjd,cAAc,CAACrlF,SAAf,CAAyBswB,IAAzB,GAAgC,UAAWpR,MAAX,EAAoB;AAEnDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAKyN,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK02C,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKhQ,IAAL,GAAY5zB,MAAM,CAAC4zB,IAAnB;AACA,OAAKsR,eAAL,GAAuBllC,MAAM,CAACklC,eAA9B;AAEA,OAAKQ,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CAjBD;AAmBA;;;;;AAIA,MAAMitD,gBAAgB,GAAG,IAAIjtE,OAAJ,EAAzB;;AACA,MAAMktE,MAAM,GAAG,IAAI77D,GAAJ,EAAf;;AACA,MAAM87D,SAAS,GAAG,IAAI38D,MAAJ,EAAlB;;AACA,MAAM48D,WAAW,GAAG,IAAIvwE,OAAJ,EAApB;;AAEA,SAASwwE,MAAT,CAAiBpiE,QAAjB,EAA2BG,QAA3B,EAAsC;AAErCxE,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,QAAZ;AAEA,OAAKwkC,QAAL,GAAgBA,QAAQ,KAAK5tC,SAAb,GAAyB4tC,QAAzB,GAAoC,IAAIua,cAAJ,EAApD;AACA,OAAKpa,QAAL,GAAgBA,QAAQ,KAAK/tC,SAAb,GAAyB+tC,QAAzB,GAAoC,IAAIq1C,cAAJ,EAApD;AAEA,OAAKl2B,kBAAL;AAEA;;AAED8iD,MAAM,CAACjyG,SAAP,GAAmBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAEtEoC,EAAAA,WAAW,EAAE6vG,MAFyD;AAItEriE,EAAAA,QAAQ,EAAE,IAJ4D;AAMtEtf,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBssB,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,SAAK8wB,QAAL,GAAgB9wB,MAAM,CAAC8wB,QAAvB;AACA,SAAKH,QAAL,GAAgB3wB,MAAM,CAAC2wB,QAAvB;AAEA,WAAO,IAAP;AAEA,GAfqE;AAiBtElB,EAAAA,OAAO,EAAE,UAAW6gB,SAAX,EAAsBC,UAAtB,EAAmC;AAE3C,UAAM5f,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAM9M,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMrhC,SAAS,GAAG8tD,SAAS,CAACtnD,MAAV,CAAiB+pG,MAAjB,CAAwBvwG,SAA1C,CAJ2C,CAM3C;;AAEA,QAAKmuC,QAAQ,CAACwY,cAAT,KAA4B,IAAjC,EAAwCxY,QAAQ,CAACsb,qBAAT;;AAExC4mD,IAAAA,SAAS,CAACzhF,IAAV,CAAgBuf,QAAQ,CAACwY,cAAzB;;AACA0pD,IAAAA,SAAS,CAAC/2E,YAAV,CAAwB+H,WAAxB;;AACAgvE,IAAAA,SAAS,CAAC9tE,MAAV,IAAoBviC,SAApB;AAEA,QAAK8tD,SAAS,CAACpZ,GAAV,CAAcrC,gBAAd,CAAgCg+D,SAAhC,MAAgD,KAArD,EAA6D,OAdlB,CAgB3C;;AAEAF,IAAAA,gBAAgB,CAAC77E,UAAjB,CAA6B+M,WAA7B;;AACA+uE,IAAAA,MAAM,CAACxhF,IAAP,CAAak/B,SAAS,CAACpZ,GAAvB,EAA6Bpb,YAA7B,CAA2C62E,gBAA3C;;AAEA,UAAMZ,cAAc,GAAGvvG,SAAS,IAAK,CAAE,KAAK21B,KAAL,CAAW9uB,CAAX,GAAe,KAAK8uB,KAAL,CAAW5uB,CAA1B,GAA8B,KAAK4uB,KAAL,CAAWuD,CAA3C,IAAiD,CAAtD,CAAhC;AACA,UAAMs2E,gBAAgB,GAAGD,cAAc,GAAGA,cAA1C;;AAEA,QAAKphE,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC,YAAMhgD,KAAK,GAAGolC,QAAQ,CAACplC,KAAvB;AACA,YAAM4/C,UAAU,GAAGxa,QAAQ,CAACwa,UAA5B;AACA,YAAMe,SAAS,GAAGf,UAAU,CAAC3iD,QAAX,CAAoB2kB,KAAtC;;AAEA,UAAK5hB,KAAK,KAAK,IAAf,EAAsB;AAErB,cAAMgjD,OAAO,GAAGhjD,KAAK,CAAC4hB,KAAtB;;AAEA,aAAM,IAAInrB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG8a,OAAO,CAAC5tD,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpD,gBAAM5B,CAAC,GAAGmuD,OAAO,CAAEvsD,CAAF,CAAjB;;AAEA8wG,UAAAA,WAAW,CAACp/E,SAAZ,CAAuBw4B,SAAvB,EAAkC9rD,CAAC,GAAG,CAAtC;;AAEA4yG,UAAAA,SAAS,CAAEF,WAAF,EAAe1yG,CAAf,EAAkB4xG,gBAAlB,EAAoCnuE,WAApC,EAAiDysB,SAAjD,EAA4DC,UAA5D,EAAwE,IAAxE,CAAT;AAEA;AAED,OAdD,MAcO;AAEN,aAAM,IAAIvuD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8pD,SAAS,CAACvrD,MAAV,GAAmB,CAAxC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD8wG,UAAAA,WAAW,CAACp/E,SAAZ,CAAuBw4B,SAAvB,EAAkClqD,CAAC,GAAG,CAAtC;;AAEAgxG,UAAAA,SAAS,CAAEF,WAAF,EAAe9wG,CAAf,EAAkBgwG,gBAAlB,EAAoCnuE,WAApC,EAAiDysB,SAAjD,EAA4DC,UAA5D,EAAwE,IAAxE,CAAT;AAEA;AAED;AAED,KAhCD,MAgCO;AAEN,YAAM3H,QAAQ,GAAGjY,QAAQ,CAACiY,QAA1B;;AAEA,WAAM,IAAI5mD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGwmD,QAAQ,CAACjoD,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnDgxG,QAAAA,SAAS,CAAEpqD,QAAQ,CAAE5mD,CAAF,CAAV,EAAiBA,CAAjB,EAAoBgwG,gBAApB,EAAsCnuE,WAAtC,EAAmDysB,SAAnD,EAA8DC,UAA9D,EAA0E,IAA1E,CAAT;AAEA;AAED;AAED,GArFqE;AAuFtEN,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,UAAMtf,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,QAAKA,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhC,YAAMH,eAAe,GAAGza,QAAQ,CAACya,eAAjC;AACA,YAAM5pD,IAAI,GAAGE,MAAM,CAACF,IAAP,CAAa4pD,eAAb,CAAb;;AAEA,UAAK5pD,IAAI,CAACb,MAAL,GAAc,CAAnB,EAAuB;AAEtB,cAAMksD,cAAc,GAAGzB,eAAe,CAAE5pD,IAAI,CAAE,CAAF,CAAN,CAAtC;;AAEA,YAAKqrD,cAAc,KAAK9pD,SAAxB,EAAoC;AAEnC,eAAKmtD,qBAAL,GAA6B,EAA7B;AACA,eAAKC,qBAAL,GAA6B,EAA7B;;AAEA,eAAM,IAAI/hC,CAAC,GAAG,CAAR,EAAWgiC,EAAE,GAAGvD,cAAc,CAAClsD,MAArC,EAA6CytB,CAAC,GAAGgiC,EAAjD,EAAqDhiC,CAAC,EAAtD,EAA4D;AAE3D,kBAAM9W,IAAI,GAAGu1C,cAAc,CAAEz+B,CAAF,CAAd,CAAoB9W,IAApB,IAA4B+4C,MAAM,CAAEjiC,CAAF,CAA/C;AAEA,iBAAK8hC,qBAAL,CAA2B/kD,IAA3B,CAAiC,CAAjC;AACA,iBAAKglD,qBAAL,CAA4B74C,IAA5B,IAAqC8W,CAArC;AAEA;AAED;AAED;AAED,KA3BD,MA2BO;AAEN,YAAMs3B,YAAY,GAAG/U,QAAQ,CAAC+U,YAA9B;;AAEA,UAAKA,YAAY,KAAK3iD,SAAjB,IAA8B2iD,YAAY,CAAC/kD,MAAb,GAAsB,CAAzD,EAA6D;AAE5D8vB,QAAAA,OAAO,CAACyD,KAAR,CAAe,sGAAf;AAEA;AAED;AAED;AAlIqE,CAApD,CAAnB;;AAsIA,SAAS8+E,SAAT,CAAoB7+D,KAApB,EAA2B5oC,KAA3B,EAAkCymG,gBAAlC,EAAoDnuE,WAApD,EAAiEysB,SAAjE,EAA4EC,UAA5E,EAAwF9pD,MAAxF,EAAiG;AAEhG,QAAMwsG,kBAAkB,GAAGL,MAAM,CAACr7D,iBAAP,CAA0BpD,KAA1B,CAA3B;;AAEA,MAAK8+D,kBAAkB,GAAGjB,gBAA1B,EAA6C;AAE5C,UAAMkB,cAAc,GAAG,IAAI3wE,OAAJ,EAAvB;;AAEAqwE,IAAAA,MAAM,CAACv7D,mBAAP,CAA4BlD,KAA5B,EAAmC++D,cAAnC;;AACAA,IAAAA,cAAc,CAACp3E,YAAf,CAA6B+H,WAA7B;AAEA,UAAMuK,QAAQ,GAAGkiB,SAAS,CAACpZ,GAAV,CAAcF,MAAd,CAAqBjkB,UAArB,CAAiCmgF,cAAjC,CAAjB;AAEA,QAAK9kE,QAAQ,GAAGkiB,SAAS,CAACtmB,IAArB,IAA6BoE,QAAQ,GAAGkiB,SAAS,CAACrmB,GAAvD,EAA6D;AAE7DsmB,IAAAA,UAAU,CAACplD,IAAX,CAAiB;AAEhBijC,MAAAA,QAAQ,EAAEA,QAFM;AAGhB+kE,MAAAA,aAAa,EAAEnzG,IAAI,CAAC0yB,IAAL,CAAWugF,kBAAX,CAHC;AAIhB9+D,MAAAA,KAAK,EAAE++D,cAJS;AAKhB3nG,MAAAA,KAAK,EAAEA,KALS;AAMhBq+C,MAAAA,IAAI,EAAE,IANU;AAOhBnjD,MAAAA,MAAM,EAAEA;AAPQ,KAAjB;AAWA;AAED;AAED;;;;;AAIA,SAAS2sG,YAAT,CAAuBC,KAAvB,EAA8B95E,OAA9B,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,SAArD,EAAgEC,SAAhE,EAA2EC,MAA3E,EAAmFztB,IAAnF,EAAyF0tB,UAAzF,EAAsG;AAErGP,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoBgyG,KAApB,EAA2B95E,OAA3B,EAAoCC,KAApC,EAA2CC,KAA3C,EAAkDC,SAAlD,EAA6DC,SAA7D,EAAwEC,MAAxE,EAAgFztB,IAAhF,EAAsF0tB,UAAtF;AAEA,OAAKD,MAAL,GAAcA,MAAM,KAAK72B,SAAX,GAAuB62B,MAAvB,GAAgCvT,SAA9C;AAEA,OAAKsT,SAAL,GAAiBA,SAAS,KAAK52B,SAAd,GAA0B42B,SAA1B,GAAsCxU,YAAvD;AACA,OAAKuU,SAAL,GAAiBA,SAAS,KAAK32B,SAAd,GAA0B22B,SAA1B,GAAsCvU,YAAvD;AAEA,OAAKkV,eAAL,GAAuB,KAAvB;AAEA;;AAED+4E,YAAY,CAACtyG,SAAb,GAAyBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAAf,EAAmD;AAE3EoC,EAAAA,WAAW,EAAEkwG,YAF8D;AAI3E/b,EAAAA,cAAc,EAAE,IAJ2D;AAM3El3D,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMkzE,KAAK,GAAG,KAAK36E,KAAnB;;AAEA,QAAK26E,KAAK,CAACC,UAAN,IAAoBD,KAAK,CAACE,iBAA/B,EAAmD;AAElD,WAAKxnD,WAAL,GAAmB,IAAnB;AAEA;AAED;AAhB0E,CAAnD,CAAzB;AAoBA;;;;AAIA,SAASynD,iBAAT,CAA4Bx5E,OAA5B,EAAqCruB,KAArC,EAA4CC,MAA5C,EAAoDguB,MAApD,EAA4DztB,IAA5D,EAAkEotB,OAAlE,EAA2EC,KAA3E,EAAkFC,KAAlF,EAAyFC,SAAzF,EAAoGC,SAApG,EAA+GE,UAA/G,EAA2HC,QAA3H,EAAsI;AAErIR,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoB,IAApB,EAA0Bk4B,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4DC,SAA5D,EAAuEC,MAAvE,EAA+EztB,IAA/E,EAAqF0tB,UAArF,EAAiGC,QAAjG;AAEA,OAAKpB,KAAL,GAAa;AAAE/sB,IAAAA,KAAK,EAAEA,KAAT;AAAgBC,IAAAA,MAAM,EAAEA;AAAxB,GAAb;AACA,OAAKouB,OAAL,GAAeA,OAAf,CALqI,CAOrI;AACA;;AAEA,OAAKO,KAAL,GAAa,KAAb,CAVqI,CAYrI;AACA;;AAEA,OAAKF,eAAL,GAAuB,KAAvB;AAEA;;AAEDm5E,iBAAiB,CAAC1yG,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAA9B;AACA0yG,iBAAiB,CAAC1yG,SAAlB,CAA4BoC,WAA5B,GAA0CswG,iBAA1C;AAEAA,iBAAiB,CAAC1yG,SAAlB,CAA4Bk4F,mBAA5B,GAAkD,IAAlD;AAEA;;;;AAIA,SAASya,aAAT,CAAwB56E,MAAxB,EAAgCU,OAAhC,EAAyCC,KAAzC,EAAgDC,KAAhD,EAAuDC,SAAvD,EAAkEC,SAAlE,EAA6EC,MAA7E,EAAqFztB,IAArF,EAA2F0tB,UAA3F,EAAwG;AAEvGP,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoBw3B,MAApB,EAA4BU,OAA5B,EAAqCC,KAArC,EAA4CC,KAA5C,EAAmDC,SAAnD,EAA8DC,SAA9D,EAAyEC,MAAzE,EAAiFztB,IAAjF,EAAuF0tB,UAAvF;AAEA,OAAKkyB,WAAL,GAAmB,IAAnB;AAEA;;AAED0nD,aAAa,CAAC3yG,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAA1B;AACA2yG,aAAa,CAAC3yG,SAAd,CAAwBoC,WAAxB,GAAsCuwG,aAAtC;AACAA,aAAa,CAAC3yG,SAAd,CAAwB4yG,eAAxB,GAA0C,IAA1C;AAEA;;;;;AAKA,SAASC,YAAT,CAAuBhoG,KAAvB,EAA8BC,MAA9B,EAAsCO,IAAtC,EAA4CotB,OAA5C,EAAqDC,KAArD,EAA4DC,KAA5D,EAAmEC,SAAnE,EAA8EC,SAA9E,EAAyFE,UAAzF,EAAqGD,MAArG,EAA8G;AAE7GA,EAAAA,MAAM,GAAGA,MAAM,KAAK72B,SAAX,GAAuB62B,MAAvB,GAAgClT,WAAzC;;AAEA,MAAKkT,MAAM,KAAKlT,WAAX,IAA0BkT,MAAM,KAAKjT,kBAA1C,EAA+D;AAE9D,UAAM,IAAIrhB,KAAJ,CAAW,kFAAX,CAAN;AAEA;;AAED,MAAK6G,IAAI,KAAKpJ,SAAT,IAAsB62B,MAAM,KAAKlT,WAAtC,EAAoDva,IAAI,GAAGwZ,iBAAP;AACpD,MAAKxZ,IAAI,KAAKpJ,SAAT,IAAsB62B,MAAM,KAAKjT,kBAAtC,EAA2Dxa,IAAI,GAAGga,kBAAP;AAE3DmT,EAAAA,OAAO,CAACj4B,IAAR,CAAc,IAAd,EAAoB,IAApB,EAA0Bk4B,OAA1B,EAAmCC,KAAnC,EAA0CC,KAA1C,EAAiDC,SAAjD,EAA4DC,SAA5D,EAAuEC,MAAvE,EAA+EztB,IAA/E,EAAqF0tB,UAArF;AAEA,OAAKnB,KAAL,GAAa;AAAE/sB,IAAAA,KAAK,EAAEA,KAAT;AAAgBC,IAAAA,MAAM,EAAEA;AAAxB,GAAb;AAEA,OAAK8tB,SAAL,GAAiBA,SAAS,KAAK32B,SAAd,GAA0B22B,SAA1B,GAAsC5U,aAAvD;AACA,OAAK6U,SAAL,GAAiBA,SAAS,KAAK52B,SAAd,GAA0B42B,SAA1B,GAAsC7U,aAAvD;AAEA,OAAKyV,KAAL,GAAa,KAAb;AACA,OAAKF,eAAL,GAAuB,KAAvB;AAEA;;AAEDs5E,YAAY,CAAC7yG,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAerB,OAAO,CAACx4B,SAAvB,CAAzB;AACA6yG,YAAY,CAAC7yG,SAAb,CAAuBoC,WAAvB,GAAqCywG,YAArC;AACAA,YAAY,CAAC7yG,SAAb,CAAuBg5F,cAAvB,GAAwC,IAAxC;AAEA;;;;;AAKA,SAAS8Z,iBAAT,CAA4BjjE,QAA5B,EAAuC;AAEtCua,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,mBAAZ,CAJsC,CAMtC;;AAEA,QAAMy8C,QAAQ,GAAG,EAAjB,CARsC,CAUtC;;AAEA,QAAMirD,IAAI,GAAG,CAAE,CAAF,EAAK,CAAL,CAAb;AAAA,QAAuBC,KAAK,GAAG,EAA/B;AACA,QAAMtyG,IAAI,GAAG,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAb,CAbsC,CAetC;;AAEA,MAAKmvC,QAAQ,IAAIA,QAAQ,CAACyb,UAA1B,EAAuC;AAEtC;AAEA,UAAMzC,KAAK,GAAGhZ,QAAQ,CAACgZ,KAAvB;;AAEA,SAAM,IAAI3nD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGunD,KAAK,CAAChpD,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhD,YAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;;AAEA,WAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,cAAMk+D,KAAK,GAAGnqD,IAAI,CAAEpoD,IAAI,CAAEq0C,CAAF,CAAN,CAAlB;AACA,cAAMm+D,KAAK,GAAGpqD,IAAI,CAAEpoD,IAAI,CAAE,CAAEq0C,CAAC,GAAG,CAAN,IAAY,CAAd,CAAN,CAAlB;AACAg+D,QAAAA,IAAI,CAAE,CAAF,CAAJ,GAAY7zG,IAAI,CAAC8E,GAAL,CAAUivG,KAAV,EAAiBC,KAAjB,CAAZ,CAJ8B,CAIQ;;AACtCH,QAAAA,IAAI,CAAE,CAAF,CAAJ,GAAY7zG,IAAI,CAAC+E,GAAL,CAAUgvG,KAAV,EAAiBC,KAAjB,CAAZ;AAEA,cAAMryG,GAAG,GAAGkyG,IAAI,CAAE,CAAF,CAAJ,GAAY,GAAZ,GAAkBA,IAAI,CAAE,CAAF,CAAlC;;AAEA,YAAKC,KAAK,CAAEnyG,GAAF,CAAL,KAAiBoB,SAAtB,EAAkC;AAEjC+wG,UAAAA,KAAK,CAAEnyG,GAAF,CAAL,GAAe;AAAEilD,YAAAA,MAAM,EAAEitD,IAAI,CAAE,CAAF,CAAd;AAAqBhtD,YAAAA,MAAM,EAAEgtD,IAAI,CAAE,CAAF;AAAjC,WAAf;AAEA;AAED;AAED,KA3BqC,CA6BtC;;;AAEA,SAAM,MAAMlyG,GAAZ,IAAmBmyG,KAAnB,EAA2B;AAE1B,YAAMvsG,CAAC,GAAGusG,KAAK,CAAEnyG,GAAF,CAAf;AAEA,UAAImwD,MAAM,GAAGnhB,QAAQ,CAACiY,QAAT,CAAmBrhD,CAAC,CAACq/C,MAArB,CAAb;AACAgC,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEAo2B,MAAAA,MAAM,GAAGnhB,QAAQ,CAACiY,QAAT,CAAmBrhD,CAAC,CAACs/C,MAArB,CAAT;AACA+B,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA;AAED,GA3CD,MA2CO,IAAKiV,QAAQ,IAAIA,QAAQ,CAAC4a,gBAA1B,EAA6C;AAEnD,QAAIuG,MAAM,GAAG,IAAIvvB,OAAJ,EAAb;;AAEA,QAAKoO,QAAQ,CAACplC,KAAT,KAAmB,IAAxB,EAA+B;AAE9B;AAEA,YAAM/C,QAAQ,GAAGmoC,QAAQ,CAACwa,UAAT,CAAoB3iD,QAArC;AACA,YAAM+lD,OAAO,GAAG5d,QAAQ,CAACplC,KAAzB;AACA,UAAIy9C,MAAM,GAAGrY,QAAQ,CAACqY,MAAtB;;AAEA,UAAKA,MAAM,CAACroD,MAAP,KAAkB,CAAvB,EAA2B;AAE1BqoD,QAAAA,MAAM,GAAG,CAAE;AAAExO,UAAAA,KAAK,EAAE,CAAT;AAAYpK,UAAAA,KAAK,EAAEme,OAAO,CAACne,KAA3B;AAAkC6P,UAAAA,aAAa,EAAE;AAAjD,SAAF,CAAT;AAEA,OAZ6B,CAc9B;;;AAEA,WAAM,IAAIg0D,CAAC,GAAG,CAAR,EAAWC,EAAE,GAAGlrD,MAAM,CAACroD,MAA7B,EAAqCszG,CAAC,GAAGC,EAAzC,EAA6C,EAAGD,CAAhD,EAAoD;AAEnD,cAAMvqD,KAAK,GAAGV,MAAM,CAAEirD,CAAF,CAApB;AAEA,cAAMz5D,KAAK,GAAGkP,KAAK,CAAClP,KAApB;AACA,cAAMpK,KAAK,GAAGsZ,KAAK,CAACtZ,KAApB;;AAEA,aAAM,IAAIpuC,CAAC,GAAGw4C,KAAR,EAAep4C,CAAC,GAAKo4C,KAAK,GAAGpK,KAAnC,EAA4CpuC,CAAC,GAAGI,CAAhD,EAAmDJ,CAAC,IAAI,CAAxD,EAA4D;AAE3D,eAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,kBAAMk+D,KAAK,GAAGxlD,OAAO,CAAC16B,IAAR,CAAc7xB,CAAC,GAAG6zC,CAAlB,CAAd;AACA,kBAAMm+D,KAAK,GAAGzlD,OAAO,CAAC16B,IAAR,CAAc7xB,CAAC,GAAG,CAAE6zC,CAAC,GAAG,CAAN,IAAY,CAA9B,CAAd;AACAg+D,YAAAA,IAAI,CAAE,CAAF,CAAJ,GAAY7zG,IAAI,CAAC8E,GAAL,CAAUivG,KAAV,EAAiBC,KAAjB,CAAZ,CAJ8B,CAIQ;;AACtCH,YAAAA,IAAI,CAAE,CAAF,CAAJ,GAAY7zG,IAAI,CAAC+E,GAAL,CAAUgvG,KAAV,EAAiBC,KAAjB,CAAZ;AAEA,kBAAMryG,GAAG,GAAGkyG,IAAI,CAAE,CAAF,CAAJ,GAAY,GAAZ,GAAkBA,IAAI,CAAE,CAAF,CAAlC;;AAEA,gBAAKC,KAAK,CAAEnyG,GAAF,CAAL,KAAiBoB,SAAtB,EAAkC;AAEjC+wG,cAAAA,KAAK,CAAEnyG,GAAF,CAAL,GAAe;AAAEilD,gBAAAA,MAAM,EAAEitD,IAAI,CAAE,CAAF,CAAd;AAAqBhtD,gBAAAA,MAAM,EAAEgtD,IAAI,CAAE,CAAF;AAAjC,eAAf;AAEA;AAED;AAED;AAED,OA5C6B,CA8C9B;;;AAEA,WAAM,MAAMlyG,GAAZ,IAAmBmyG,KAAnB,EAA2B;AAE1B,cAAMvsG,CAAC,GAAGusG,KAAK,CAAEnyG,GAAF,CAAf;AAEAmwD,QAAAA,MAAM,CAACn+B,mBAAP,CAA4BnrB,QAA5B,EAAsCjB,CAAC,CAACq/C,MAAxC;AACAgC,QAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEAo2B,QAAAA,MAAM,CAACn+B,mBAAP,CAA4BnrB,QAA5B,EAAsCjB,CAAC,CAACs/C,MAAxC;AACA+B,QAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA;AAED,KA5DD,MA4DO;AAEN;AAEA,YAAMlzB,QAAQ,GAAGmoC,QAAQ,CAACwa,UAAT,CAAoB3iD,QAArC;;AAEA,WAAM,IAAIxG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAKoG,QAAQ,CAAC4nC,KAAT,GAAiB,CAAxC,EAA6CpuC,CAAC,GAAGI,CAAjD,EAAoDJ,CAAC,EAArD,EAA2D;AAE1D,aAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B;AACA;AAEA,gBAAM+Q,MAAM,GAAG,IAAI5kD,CAAJ,GAAQ6zC,CAAvB;AACAic,UAAAA,MAAM,CAACn+B,mBAAP,CAA4BnrB,QAA5B,EAAsCo+C,MAAtC;AACAgC,UAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA,gBAAMmrB,MAAM,GAAG,IAAI7kD,CAAJ,GAAU,CAAE6zC,CAAC,GAAG,CAAN,IAAY,CAArC;AACAic,UAAAA,MAAM,CAACn+B,mBAAP,CAA4BnrB,QAA5B,EAAsCq+C,MAAtC;AACA+B,UAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA;AAED;AAED;AAED,GAvJqC,CAyJtC;;;AAEA,OAAKjvB,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AAEA;;AAEDgrD,iBAAiB,CAAC9yG,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAA9B;AACA8yG,iBAAiB,CAAC9yG,SAAlB,CAA4BoC,WAA5B,GAA0C0wG,iBAA1C;AAEA;;;;;;;AAQA;;AAEA,SAASO,kBAAT,CAA6B5xG,IAA7B,EAAmC6xG,MAAnC,EAA2CC,MAA3C,EAAoD;AAEnDxiD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBruC,IAAAA,IAAI,EAAEA,IADW;AAEjB6xG,IAAAA,MAAM,EAAEA,MAFS;AAGjBC,IAAAA,MAAM,EAAEA;AAHS,GAAlB;AAMA,OAAKtiD,kBAAL,CAAyB,IAAIuiD,wBAAJ,CAA8B/xG,IAA9B,EAAoC6xG,MAApC,EAA4CC,MAA5C,CAAzB;AACA,OAAKxgD,aAAL;AAEA;;AAEDsgD,kBAAkB,CAACrzG,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA/B;AACAqzG,kBAAkB,CAACrzG,SAAnB,CAA6BoC,WAA7B,GAA2CixG,kBAA3C,EAEA;;AAEA,SAASG,wBAAT,CAAmC/xG,IAAnC,EAAyC6xG,MAAzC,EAAiDC,MAAjD,EAA0D;AAEzDnpD,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,0BAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBruC,IAAAA,IAAI,EAAEA,IADW;AAEjB6xG,IAAAA,MAAM,EAAEA,MAFS;AAGjBC,IAAAA,MAAM,EAAEA;AAHS,GAAlB,CANyD,CAYzD;;AAEA,QAAM9lD,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ;AAEA,QAAM7nB,GAAG,GAAG,OAAZ;AAEA,QAAM0D,MAAM,GAAG,IAAIpC,OAAJ,EAAf;AAEA,QAAMuT,EAAE,GAAG,IAAIvT,OAAJ,EAAX;AAAA,QAA0BwT,EAAE,GAAG,IAAIxT,OAAJ,EAA/B;AACA,QAAMgyE,EAAE,GAAG,IAAIhyE,OAAJ,EAAX;AAAA,QAA0BiyE,EAAE,GAAG,IAAIjyE,OAAJ,EAA/B;;AAEA,MAAKhgC,IAAI,CAAC5B,MAAL,GAAc,CAAnB,EAAuB;AAEtB8vB,IAAAA,OAAO,CAACyD,KAAR,CAAe,kFAAf;AAEA,GA9BwD,CAgCzD;;;AAEA,QAAMugF,UAAU,GAAGL,MAAM,GAAG,CAA5B;;AAEA,OAAM,IAAIpyG,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIqyG,MAAtB,EAA8BryG,CAAC,EAA/B,EAAqC;AAEpC,UAAMxB,CAAC,GAAGwB,CAAC,GAAGqyG,MAAd;;AAEA,SAAM,IAAIx+D,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIu+D,MAAtB,EAA8Bv+D,CAAC,EAA/B,EAAqC;AAEpC,YAAMwG,CAAC,GAAGxG,CAAC,GAAGu+D,MAAd,CAFoC,CAIpC;;AAEA7xG,MAAAA,IAAI,CAAE85C,CAAF,EAAK77C,CAAL,EAAQs1C,EAAR,CAAJ;AACA8S,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2qC,EAAE,CAACzsC,CAAlB,EAAqBysC,EAAE,CAACvsC,CAAxB,EAA2BusC,EAAE,CAACpa,CAA9B,EAPoC,CASpC;AAEA;;AAEA,UAAK2gB,CAAC,GAAGpb,GAAJ,IAAW,CAAhB,EAAoB;AAEnB1+B,QAAAA,IAAI,CAAE85C,CAAC,GAAGpb,GAAN,EAAWzgC,CAAX,EAAcu1C,EAAd,CAAJ;AACAw+D,QAAAA,EAAE,CAAC9iF,UAAH,CAAeqkB,EAAf,EAAmBC,EAAnB;AAEA,OALD,MAKO;AAENxzC,QAAAA,IAAI,CAAE85C,CAAC,GAAGpb,GAAN,EAAWzgC,CAAX,EAAcu1C,EAAd,CAAJ;AACAw+D,QAAAA,EAAE,CAAC9iF,UAAH,CAAeskB,EAAf,EAAmBD,EAAnB;AAEA;;AAED,UAAKt1C,CAAC,GAAGygC,GAAJ,IAAW,CAAhB,EAAoB;AAEnB1+B,QAAAA,IAAI,CAAE85C,CAAF,EAAK77C,CAAC,GAAGygC,GAAT,EAAc8U,EAAd,CAAJ;AACAy+D,QAAAA,EAAE,CAAC/iF,UAAH,CAAeqkB,EAAf,EAAmBC,EAAnB;AAEA,OALD,MAKO;AAENxzC,QAAAA,IAAI,CAAE85C,CAAF,EAAK77C,CAAC,GAAGygC,GAAT,EAAc8U,EAAd,CAAJ;AACAy+D,QAAAA,EAAE,CAAC/iF,UAAH,CAAeskB,EAAf,EAAmBD,EAAnB;AAEA,OAnCmC,CAqCpC;;;AAEAnR,MAAAA,MAAM,CAACZ,YAAP,CAAqBwwE,EAArB,EAAyBC,EAAzB,EAA8B5hF,SAA9B;AACAi2B,MAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC,EAxCoC,CA0CpC;;AAEAotB,MAAAA,GAAG,CAAC39C,IAAJ,CAAUkxC,CAAV,EAAa77C,CAAb;AAEA;AAED,GAxFwD,CA0FzD;;;AAEA,OAAM,IAAIwB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGqyG,MAArB,EAA6BryG,CAAC,EAA9B,EAAoC;AAEnC,SAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGu+D,MAArB,EAA6Bv+D,CAAC,EAA9B,EAAoC;AAEnC,YAAMz1C,CAAC,GAAG4B,CAAC,GAAGyyG,UAAJ,GAAiB5+D,CAA3B;AACA,YAAM11C,CAAC,GAAG6B,CAAC,GAAGyyG,UAAJ,GAAiB5+D,CAAjB,GAAqB,CAA/B;AACA,YAAMhxC,CAAC,GAAG,CAAE7C,CAAC,GAAG,CAAN,IAAYyyG,UAAZ,GAAyB5+D,CAAzB,GAA6B,CAAvC;AACA,YAAMhf,CAAC,GAAG,CAAE70B,CAAC,GAAG,CAAN,IAAYyyG,UAAZ,GAAyB5+D,CAAnC,CALmC,CAOnC;;AAEA0Y,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,MAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED,GA5GwD,CA8GzD;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDwrD,wBAAwB,CAACxzG,SAAzB,GAAqCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAArC;AACAwzG,wBAAwB,CAACxzG,SAAzB,CAAmCoC,WAAnC,GAAiDoxG,wBAAjD;AAEA;;;;;;AAOA;;AAEA,SAASI,kBAAT,CAA6B9rD,QAA7B,EAAuC2F,OAAvC,EAAgDxpB,MAAhD,EAAwD6M,MAAxD,EAAiE;AAEhEigB,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBgY,IAAAA,QAAQ,EAAEA,QADO;AAEjB2F,IAAAA,OAAO,EAAEA,OAFQ;AAGjBxpB,IAAAA,MAAM,EAAEA,MAHS;AAIjB6M,IAAAA,MAAM,EAAEA;AAJS,GAAlB;AAOA,OAAKmgB,kBAAL,CAAyB,IAAI4iD,wBAAJ,CAA8B/rD,QAA9B,EAAwC2F,OAAxC,EAAiDxpB,MAAjD,EAAyD6M,MAAzD,CAAzB;AACA,OAAKiiB,aAAL;AAEA;;AAED6gD,kBAAkB,CAAC5zG,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA/B;AACA4zG,kBAAkB,CAAC5zG,SAAnB,CAA6BoC,WAA7B,GAA2CwxG,kBAA3C,EAEA;;AAEA,SAASC,wBAAT,CAAmC/rD,QAAnC,EAA6C2F,OAA7C,EAAsDxpB,MAAtD,EAA8D6M,MAA9D,EAAuE;AAEtEsZ,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,0BAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBgY,IAAAA,QAAQ,EAAEA,QADO;AAEjB2F,IAAAA,OAAO,EAAEA,OAFQ;AAGjBxpB,IAAAA,MAAM,EAAEA,MAHS;AAIjB6M,IAAAA,MAAM,EAAEA;AAJS,GAAlB;AAOA7M,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACA6M,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB,CAdsE,CAgBtE;;AAEA,QAAMgjE,YAAY,GAAG,EAArB;AACA,QAAMC,QAAQ,GAAG,EAAjB,CAnBsE,CAqBtE;;AAEAC,EAAAA,SAAS,CAAEljE,MAAF,CAAT,CAvBsE,CAyBtE;;AAEAmjE,EAAAA,WAAW,CAAEhwE,MAAF,CAAX,CA3BsE,CA6BtE;;AAEAiwE,EAAAA,WAAW,GA/B2D,CAiCtE;;AAEA,OAAKvoG,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BqsD,YAA5B,EAA0C,CAA1C,CAA/B;AACA,OAAKnoG,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BqsD,YAAY,CAAC3zG,KAAb,EAA5B,EAAkD,CAAlD,CAA7B;AACA,OAAKwL,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BssD,QAA5B,EAAsC,CAAtC,CAAzB;;AAEA,MAAKjjE,MAAM,KAAK,CAAhB,EAAoB;AAEnB,SAAKob,oBAAL,GAFmB,CAEU;AAE7B,GAJD,MAIO;AAEN,SAAKc,gBAAL,GAFM,CAEmB;AAEzB,GA/CqE,CAiDtE;;;AAEA,WAASgnD,SAAT,CAAoBljE,MAApB,EAA6B;AAE5B,UAAMxxC,CAAC,GAAG,IAAImiC,OAAJ,EAAV;AACA,UAAMpiC,CAAC,GAAG,IAAIoiC,OAAJ,EAAV;AACA,UAAM19B,CAAC,GAAG,IAAI09B,OAAJ,EAAV,CAJ4B,CAM5B;;AAEA,SAAM,IAAIvgC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGusD,OAAO,CAAC5tD,MAA7B,EAAqCqB,CAAC,IAAI,CAA1C,EAA8C;AAE7C;AAEAizG,MAAAA,gBAAgB,CAAE1mD,OAAO,CAAEvsD,CAAC,GAAG,CAAN,CAAT,EAAoB5B,CAApB,CAAhB;AACA60G,MAAAA,gBAAgB,CAAE1mD,OAAO,CAAEvsD,CAAC,GAAG,CAAN,CAAT,EAAoB7B,CAApB,CAAhB;AACA80G,MAAAA,gBAAgB,CAAE1mD,OAAO,CAAEvsD,CAAC,GAAG,CAAN,CAAT,EAAoB6C,CAApB,CAAhB,CAN6C,CAQ7C;;AAEAqwG,MAAAA,aAAa,CAAE90G,CAAF,EAAKD,CAAL,EAAQ0E,CAAR,EAAW+sC,MAAX,CAAb;AAEA;AAED;;AAED,WAASsjE,aAAT,CAAwB90G,CAAxB,EAA2BD,CAA3B,EAA8B0E,CAA9B,EAAiC+sC,MAAjC,EAA0C;AAEzC,UAAMujE,IAAI,GAAGn1G,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAasjC,MAAb,CAAb,CAFyC,CAIzC;;AAEA,UAAMpxC,CAAC,GAAG,EAAV,CANyC,CAQzC;;AAEA,SAAM,IAAIwB,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAImzG,IAAtB,EAA4BnzG,CAAC,EAA7B,EAAmC;AAElCxB,MAAAA,CAAC,CAAEwB,CAAF,CAAD,GAAS,EAAT;AAEA,YAAMozG,EAAE,GAAGh1G,CAAC,CAAC+wB,KAAF,GAAUzC,IAAV,CAAgB7pB,CAAhB,EAAmB7C,CAAC,GAAGmzG,IAAvB,CAAX;AACA,YAAME,EAAE,GAAGl1G,CAAC,CAACgxB,KAAF,GAAUzC,IAAV,CAAgB7pB,CAAhB,EAAmB7C,CAAC,GAAGmzG,IAAvB,CAAX;AAEA,YAAMG,IAAI,GAAGH,IAAI,GAAGnzG,CAApB;;AAEA,WAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIy/D,IAAtB,EAA4Bz/D,CAAC,EAA7B,EAAmC;AAElC,YAAKA,CAAC,KAAK,CAAN,IAAW7zC,CAAC,KAAKmzG,IAAtB,EAA6B;AAE5B30G,UAAAA,CAAC,CAAEwB,CAAF,CAAD,CAAQ6zC,CAAR,IAAcu/D,EAAd;AAEA,SAJD,MAIO;AAEN50G,UAAAA,CAAC,CAAEwB,CAAF,CAAD,CAAQ6zC,CAAR,IAAcu/D,EAAE,CAACjkF,KAAH,GAAWzC,IAAX,CAAiB2mF,EAAjB,EAAqBx/D,CAAC,GAAGy/D,IAAzB,CAAd;AAEA;AAED;AAED,KAjCwC,CAmCzC;;;AAEA,SAAM,IAAItzG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmzG,IAArB,EAA2BnzG,CAAC,EAA5B,EAAkC;AAEjC,WAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAMs/D,IAAI,GAAGnzG,CAAb,IAAmB,CAAxC,EAA2C6zC,CAAC,EAA5C,EAAkD;AAEjD,cAAMvuC,CAAC,GAAGtH,IAAI,CAACwE,KAAL,CAAYqxC,CAAC,GAAG,CAAhB,CAAV;;AAEA,YAAKA,CAAC,GAAG,CAAJ,KAAU,CAAf,EAAmB;AAElB0/D,UAAAA,UAAU,CAAE/0G,CAAC,CAAEwB,CAAF,CAAD,CAAQsF,CAAC,GAAG,CAAZ,CAAF,CAAV;AACAiuG,UAAAA,UAAU,CAAE/0G,CAAC,CAAEwB,CAAC,GAAG,CAAN,CAAD,CAAYsF,CAAZ,CAAF,CAAV;AACAiuG,UAAAA,UAAU,CAAE/0G,CAAC,CAAEwB,CAAF,CAAD,CAAQsF,CAAR,CAAF,CAAV;AAEA,SAND,MAMO;AAENiuG,UAAAA,UAAU,CAAE/0G,CAAC,CAAEwB,CAAF,CAAD,CAAQsF,CAAC,GAAG,CAAZ,CAAF,CAAV;AACAiuG,UAAAA,UAAU,CAAE/0G,CAAC,CAAEwB,CAAC,GAAG,CAAN,CAAD,CAAYsF,CAAC,GAAG,CAAhB,CAAF,CAAV;AACAiuG,UAAAA,UAAU,CAAE/0G,CAAC,CAAEwB,CAAC,GAAG,CAAN,CAAD,CAAYsF,CAAZ,CAAF,CAAV;AAEA;AAED;AAED;AAED;;AAED,WAASytG,WAAT,CAAsBhwE,MAAtB,EAA+B;AAE9B,UAAM+sB,MAAM,GAAG,IAAIvvB,OAAJ,EAAf,CAF8B,CAI9B;;AAEA,SAAM,IAAIvgC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG4yG,YAAY,CAACj0G,MAAlC,EAA0CqB,CAAC,IAAI,CAA/C,EAAmD;AAElD8vD,MAAAA,MAAM,CAACzoD,CAAP,GAAWurG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAvB;AACA8vD,MAAAA,MAAM,CAACvoD,CAAP,GAAWqrG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAvB;AACA8vD,MAAAA,MAAM,CAACp2B,CAAP,GAAWk5E,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAvB;AAEA8vD,MAAAA,MAAM,CAACl/B,SAAP,GAAmBhB,cAAnB,CAAmCmT,MAAnC;AAEA6vE,MAAAA,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAZ,GAAwB8vD,MAAM,CAACzoD,CAA/B;AACAurG,MAAAA,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAZ,GAAwB8vD,MAAM,CAACvoD,CAA/B;AACAqrG,MAAAA,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAZ,GAAwB8vD,MAAM,CAACp2B,CAA/B;AAEA;AAED;;AAED,WAASs5E,WAAT,GAAuB;AAEtB,UAAMljD,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;;AAEA,SAAM,IAAIvgC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG4yG,YAAY,CAACj0G,MAAlC,EAA0CqB,CAAC,IAAI,CAA/C,EAAmD;AAElD8vD,MAAAA,MAAM,CAACzoD,CAAP,GAAWurG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAvB;AACA8vD,MAAAA,MAAM,CAACvoD,CAAP,GAAWqrG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAvB;AACA8vD,MAAAA,MAAM,CAACp2B,CAAP,GAAWk5E,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAvB;AAEA,YAAMq6C,CAAC,GAAGm5D,OAAO,CAAE1jD,MAAF,CAAP,GAAoB,CAApB,GAAwB9xD,IAAI,CAACutB,EAA7B,GAAkC,GAA5C;AACA,YAAM/sB,CAAC,GAAGi1G,WAAW,CAAE3jD,MAAF,CAAX,GAAwB9xD,IAAI,CAACutB,EAA7B,GAAkC,GAA5C;AACAsnF,MAAAA,QAAQ,CAAC1pG,IAAT,CAAekxC,CAAf,EAAkB,IAAI77C,CAAtB;AAEA;;AAEDk1G,IAAAA,UAAU;AAEVC,IAAAA,WAAW;AAEX;;AAED,WAASA,WAAT,GAAuB;AAEtB;AAEA,SAAM,IAAI3zG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG6yG,QAAQ,CAACl0G,MAA9B,EAAsCqB,CAAC,IAAI,CAA3C,EAA+C;AAE9C;AAEA,YAAMi9B,EAAE,GAAG41E,QAAQ,CAAE7yG,CAAC,GAAG,CAAN,CAAnB;AACA,YAAMq9B,EAAE,GAAGw1E,QAAQ,CAAE7yG,CAAC,GAAG,CAAN,CAAnB;AACA,YAAMqnC,EAAE,GAAGwrE,QAAQ,CAAE7yG,CAAC,GAAG,CAAN,CAAnB;AAEA,YAAM+C,GAAG,GAAG/E,IAAI,CAAC+E,GAAL,CAAUk6B,EAAV,EAAcI,EAAd,EAAkBgK,EAAlB,CAAZ;AACA,YAAMvkC,GAAG,GAAG9E,IAAI,CAAC8E,GAAL,CAAUm6B,EAAV,EAAcI,EAAd,EAAkBgK,EAAlB,CAAZ,CAT8C,CAW9C;;AAEA,UAAKtkC,GAAG,GAAG,GAAN,IAAaD,GAAG,GAAG,GAAxB,EAA8B;AAE7B,YAAKm6B,EAAE,GAAG,GAAV,EAAgB41E,QAAQ,CAAE7yG,CAAC,GAAG,CAAN,CAAR,IAAqB,CAArB;AAChB,YAAKq9B,EAAE,GAAG,GAAV,EAAgBw1E,QAAQ,CAAE7yG,CAAC,GAAG,CAAN,CAAR,IAAqB,CAArB;AAChB,YAAKqnC,EAAE,GAAG,GAAV,EAAgBwrE,QAAQ,CAAE7yG,CAAC,GAAG,CAAN,CAAR,IAAqB,CAArB;AAEhB;AAED;AAED;;AAED,WAASuzG,UAAT,CAAqBzjD,MAArB,EAA8B;AAE7B8iD,IAAAA,YAAY,CAACzpG,IAAb,CAAmB2mD,MAAM,CAACzoD,CAA1B,EAA6ByoD,MAAM,CAACvoD,CAApC,EAAuCuoD,MAAM,CAACp2B,CAA9C;AAEA;;AAED,WAASu5E,gBAAT,CAA2B1pG,KAA3B,EAAkCumD,MAAlC,EAA2C;AAE1C,UAAMse,MAAM,GAAG7kE,KAAK,GAAG,CAAvB;AAEAumD,IAAAA,MAAM,CAACzoD,CAAP,GAAWu/C,QAAQ,CAAEwnB,MAAM,GAAG,CAAX,CAAnB;AACAte,IAAAA,MAAM,CAACvoD,CAAP,GAAWq/C,QAAQ,CAAEwnB,MAAM,GAAG,CAAX,CAAnB;AACAte,IAAAA,MAAM,CAACp2B,CAAP,GAAWktB,QAAQ,CAAEwnB,MAAM,GAAG,CAAX,CAAnB;AAEA;;AAED,WAASslC,UAAT,GAAsB;AAErB,UAAMt1G,CAAC,GAAG,IAAImiC,OAAJ,EAAV;AACA,UAAMpiC,CAAC,GAAG,IAAIoiC,OAAJ,EAAV;AACA,UAAM19B,CAAC,GAAG,IAAI09B,OAAJ,EAAV;AAEA,UAAMqzE,QAAQ,GAAG,IAAIrzE,OAAJ,EAAjB;AAEA,UAAMszE,GAAG,GAAG,IAAIllF,OAAJ,EAAZ;AACA,UAAMmlF,GAAG,GAAG,IAAInlF,OAAJ,EAAZ;AACA,UAAMolF,GAAG,GAAG,IAAIplF,OAAJ,EAAZ;;AAEA,SAAM,IAAI3uB,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAG,CAArB,EAAwB7zC,CAAC,GAAG4yG,YAAY,CAACj0G,MAAzC,EAAiDqB,CAAC,IAAI,CAAL,EAAQ6zC,CAAC,IAAI,CAA9D,EAAkE;AAEjEz1C,MAAAA,CAAC,CAACowB,GAAF,CAAOokF,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAnB,EAA8B4yG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAA1C,EAAqD4yG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAjE;AACA7B,MAAAA,CAAC,CAACqwB,GAAF,CAAOokF,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAnB,EAA8B4yG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAA1C,EAAqD4yG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAjE;AACA6C,MAAAA,CAAC,CAAC2rB,GAAF,CAAOokF,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAnB,EAA8B4yG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAA1C,EAAqD4yG,YAAY,CAAE5yG,CAAC,GAAG,CAAN,CAAjE;AAEA6zG,MAAAA,GAAG,CAACrlF,GAAJ,CAASqkF,QAAQ,CAAEh/D,CAAC,GAAG,CAAN,CAAjB,EAA4Bg/D,QAAQ,CAAEh/D,CAAC,GAAG,CAAN,CAApC;AACAigE,MAAAA,GAAG,CAACtlF,GAAJ,CAASqkF,QAAQ,CAAEh/D,CAAC,GAAG,CAAN,CAAjB,EAA4Bg/D,QAAQ,CAAEh/D,CAAC,GAAG,CAAN,CAApC;AACAkgE,MAAAA,GAAG,CAACvlF,GAAJ,CAASqkF,QAAQ,CAAEh/D,CAAC,GAAG,CAAN,CAAjB,EAA4Bg/D,QAAQ,CAAEh/D,CAAC,GAAG,CAAN,CAApC;AAEA+/D,MAAAA,QAAQ,CAACxkF,IAAT,CAAehxB,CAAf,EAAmBuZ,GAAnB,CAAwBxZ,CAAxB,EAA4BwZ,GAA5B,CAAiC9U,CAAjC,EAAqCitB,YAArC,CAAmD,CAAnD;AAEA,YAAMkkF,GAAG,GAAGR,OAAO,CAAEI,QAAF,CAAnB;AAEAK,MAAAA,SAAS,CAAEJ,GAAF,EAAOhgE,CAAC,GAAG,CAAX,EAAcz1C,CAAd,EAAiB41G,GAAjB,CAAT;AACAC,MAAAA,SAAS,CAAEH,GAAF,EAAOjgE,CAAC,GAAG,CAAX,EAAc11C,CAAd,EAAiB61G,GAAjB,CAAT;AACAC,MAAAA,SAAS,CAAEF,GAAF,EAAOlgE,CAAC,GAAG,CAAX,EAAchxC,CAAd,EAAiBmxG,GAAjB,CAAT;AAEA;AAED;;AAED,WAASC,SAAT,CAAoBz6E,EAApB,EAAwB40C,MAAxB,EAAgC3hC,MAAhC,EAAwC+mE,OAAxC,EAAkD;AAEjD,QAAOA,OAAO,GAAG,CAAZ,IAAqBh6E,EAAE,CAACnyB,CAAH,KAAS,CAAnC,EAAyC;AAExCwrG,MAAAA,QAAQ,CAAEzkC,MAAF,CAAR,GAAqB50C,EAAE,CAACnyB,CAAH,GAAO,CAA5B;AAEA;;AAED,QAAOolC,MAAM,CAACplC,CAAP,KAAa,CAAf,IAAwBolC,MAAM,CAAC/S,CAAP,KAAa,CAA1C,EAAgD;AAE/Cm5E,MAAAA,QAAQ,CAAEzkC,MAAF,CAAR,GAAqBolC,OAAO,GAAG,CAAV,GAAcx1G,IAAI,CAACutB,EAAnB,GAAwB,GAA7C;AAEA;AAED,GAnRqE,CAqRtE;;;AAEA,WAASioF,OAAT,CAAkB/mE,MAAlB,EAA2B;AAE1B,WAAOzuC,IAAI,CAAC8yB,KAAL,CAAY2b,MAAM,CAAC/S,CAAnB,EAAsB,CAAE+S,MAAM,CAACplC,CAA/B,CAAP;AAEA,GA3RqE,CA8RtE;;;AAEA,WAASosG,WAAT,CAAsBhnE,MAAtB,EAA+B;AAE9B,WAAOzuC,IAAI,CAAC8yB,KAAL,CAAY,CAAE2b,MAAM,CAACllC,CAArB,EAAwBvJ,IAAI,CAAC0yB,IAAL,CAAa+b,MAAM,CAACplC,CAAP,GAAWolC,MAAM,CAACplC,CAApB,GAA4BolC,MAAM,CAAC/S,CAAP,GAAW+S,MAAM,CAAC/S,CAAzD,CAAxB,CAAP;AAEA;AAED;;AAEDi5E,wBAAwB,CAAC7zG,SAAzB,GAAqCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAArC;AACA6zG,wBAAwB,CAAC7zG,SAAzB,CAAmCoC,WAAnC,GAAiDyxG,wBAAjD;AAEA;;;;AAKA;;AAEA,SAASuB,mBAAT,CAA8BnxE,MAA9B,EAAsC6M,MAAtC,EAA+C;AAE9CigB,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA,OAAKmgB,kBAAL,CAAyB,IAAIokD,yBAAJ,CAA+BpxE,MAA/B,EAAuC6M,MAAvC,CAAzB;AACA,OAAKiiB,aAAL;AAEA;;AAEDqiD,mBAAmB,CAACp1G,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAAhC;AACAo1G,mBAAmB,CAACp1G,SAApB,CAA8BoC,WAA9B,GAA4CgzG,mBAA5C,EAEA;;AAEA,SAASC,yBAAT,CAAoCpxE,MAApC,EAA4C6M,MAA5C,EAAqD;AAEpD,QAAMgX,QAAQ,GAAG,CAChB,CADgB,EACb,CADa,EACV,CADU,EACN,CAAE,CADI,EACD,CAAE,CADD,EACI,CADJ,EACQ,CAAE,CADV,EACa,CADb,EACgB,CAAE,CADlB,EACsB,CADtB,EACyB,CAAE,CAD3B,EAC8B,CAAE,CADhC,CAAjB;AAIA,QAAM2F,OAAO,GAAG,CACf,CADe,EACZ,CADY,EACT,CADS,EACL,CADK,EACF,CADE,EACC,CADD,EACI,CADJ,EACO,CADP,EACU,CADV,EACa,CADb,EACgB,CADhB,EACmB,CADnB,CAAhB;AAIAomD,EAAAA,wBAAwB,CAACtzG,IAAzB,CAA+B,IAA/B,EAAqCunD,QAArC,EAA+C2F,OAA/C,EAAwDxpB,MAAxD,EAAgE6M,MAAhE;AAEA,OAAKzlC,IAAL,GAAY,2BAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA;;AAEDukE,yBAAyB,CAACr1G,SAA1B,GAAsCY,MAAM,CAACi5B,MAAP,CAAeg6E,wBAAwB,CAAC7zG,SAAxC,CAAtC;AACAq1G,yBAAyB,CAACr1G,SAA1B,CAAoCoC,WAApC,GAAkDizG,yBAAlD;AAEA;;;;AAKA;;AAEA,SAASC,kBAAT,CAA6BrxE,MAA7B,EAAqC6M,MAArC,EAA8C;AAE7CigB,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA,OAAKmgB,kBAAL,CAAyB,IAAIskD,wBAAJ,CAA8BtxE,MAA9B,EAAsC6M,MAAtC,CAAzB;AACA,OAAKiiB,aAAL;AAEA;;AAEDuiD,kBAAkB,CAACt1G,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA/B;AACAs1G,kBAAkB,CAACt1G,SAAnB,CAA6BoC,WAA7B,GAA2CkzG,kBAA3C,EAEA;;AAEA,SAASC,wBAAT,CAAmCtxE,MAAnC,EAA2C6M,MAA3C,EAAoD;AAEnD,QAAMgX,QAAQ,GAAG,CAChB,CADgB,EACb,CADa,EACV,CADU,EACN,CAAE,CADI,EACD,CADC,EACE,CADF,EACK,CADL,EACQ,CADR,EACW,CADX,EAEhB,CAFgB,EAEb,CAAE,CAFW,EAER,CAFQ,EAEJ,CAFI,EAED,CAFC,EAEE,CAFF,EAEK,CAFL,EAEQ,CAFR,EAEW,CAAE,CAFb,CAAjB;AAKA,QAAM2F,OAAO,GAAG,CACf,CADe,EACZ,CADY,EACT,CADS,EACN,CADM,EACH,CADG,EACA,CADA,EACG,CADH,EACM,CADN,EACS,CADT,EAEf,CAFe,EAEZ,CAFY,EAET,CAFS,EAEN,CAFM,EAEH,CAFG,EAEA,CAFA,EAEG,CAFH,EAEM,CAFN,EAES,CAFT,EAGf,CAHe,EAGZ,CAHY,EAGT,CAHS,EAGN,CAHM,EAGH,CAHG,EAGA,CAHA,CAAhB;AAMAomD,EAAAA,wBAAwB,CAACtzG,IAAzB,CAA+B,IAA/B,EAAqCunD,QAArC,EAA+C2F,OAA/C,EAAwDxpB,MAAxD,EAAgE6M,MAAhE;AAEA,OAAKzlC,IAAL,GAAY,0BAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA;;AAEDykE,wBAAwB,CAACv1G,SAAzB,GAAqCY,MAAM,CAACi5B,MAAP,CAAeg6E,wBAAwB,CAAC7zG,SAAxC,CAArC;AACAu1G,wBAAwB,CAACv1G,SAAzB,CAAmCoC,WAAnC,GAAiDmzG,wBAAjD;AAEA;;;;AAKA;;AAEA,SAASC,mBAAT,CAA8BvxE,MAA9B,EAAsC6M,MAAtC,EAA+C;AAE9CigB,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA,OAAKmgB,kBAAL,CAAyB,IAAIwkD,yBAAJ,CAA+BxxE,MAA/B,EAAuC6M,MAAvC,CAAzB;AACA,OAAKiiB,aAAL;AAEA;;AAEDyiD,mBAAmB,CAACx1G,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAAhC;AACAw1G,mBAAmB,CAACx1G,SAApB,CAA8BoC,WAA9B,GAA4CozG,mBAA5C,EAEA;;AAEA,SAASC,yBAAT,CAAoCxxE,MAApC,EAA4C6M,MAA5C,EAAqD;AAEpD,QAAMhtC,CAAC,GAAG,CAAE,IAAI5E,IAAI,CAAC0yB,IAAL,CAAW,CAAX,CAAN,IAAyB,CAAnC;AAEA,QAAMk2B,QAAQ,GAAG,CAChB,CAAE,CADc,EACXhkD,CADW,EACR,CADQ,EACJ,CADI,EACDA,CADC,EACE,CADF,EACM,CAAE,CADR,EACW,CAAEA,CADb,EACgB,CADhB,EACoB,CADpB,EACuB,CAAEA,CADzB,EAC4B,CAD5B,EAEf,CAFe,EAEZ,CAAE,CAFU,EAEPA,CAFO,EAEH,CAFG,EAEA,CAFA,EAEGA,CAFH,EAEM,CAFN,EAES,CAAE,CAFX,EAEc,CAAEA,CAFhB,EAEoB,CAFpB,EAEuB,CAFvB,EAE0B,CAAEA,CAF5B,EAGfA,CAHe,EAGZ,CAHY,EAGT,CAAE,CAHO,EAGHA,CAHG,EAGA,CAHA,EAGG,CAHH,EAGO,CAAEA,CAHT,EAGY,CAHZ,EAGe,CAAE,CAHjB,EAGqB,CAAEA,CAHvB,EAG0B,CAH1B,EAG6B,CAH7B,CAAjB;AAMA,QAAM2pD,OAAO,GAAG,CACd,CADc,EACX,EADW,EACP,CADO,EACH,CADG,EACA,CADA,EACG,CADH,EACO,CADP,EACU,CADV,EACa,CADb,EACiB,CADjB,EACoB,CADpB,EACuB,EADvB,EAC4B,CAD5B,EAC+B,EAD/B,EACmC,EADnC,EAEd,CAFc,EAEX,CAFW,EAER,CAFQ,EAEJ,CAFI,EAED,EAFC,EAEG,CAFH,EAEM,EAFN,EAEU,EAFV,EAEc,CAFd,EAEiB,EAFjB,EAEqB,CAFrB,EAEwB,CAFxB,EAE2B,CAF3B,EAE8B,CAF9B,EAEiC,CAFjC,EAGd,CAHc,EAGX,CAHW,EAGR,CAHQ,EAGJ,CAHI,EAGD,CAHC,EAGE,CAHF,EAGK,CAHL,EAGQ,CAHR,EAGW,CAHX,EAGc,CAHd,EAGiB,CAHjB,EAGoB,CAHpB,EAGuB,CAHvB,EAG0B,CAH1B,EAG6B,CAH7B,EAId,CAJc,EAIX,CAJW,EAIR,CAJQ,EAIJ,CAJI,EAID,CAJC,EAIE,EAJF,EAIM,CAJN,EAIS,CAJT,EAIY,EAJZ,EAIgB,CAJhB,EAImB,CAJnB,EAIsB,CAJtB,EAIyB,CAJzB,EAI4B,CAJ5B,EAI+B,CAJ/B,CAAhB;AAOAomD,EAAAA,wBAAwB,CAACtzG,IAAzB,CAA+B,IAA/B,EAAqCunD,QAArC,EAA+C2F,OAA/C,EAAwDxpB,MAAxD,EAAgE6M,MAAhE;AAEA,OAAKzlC,IAAL,GAAY,2BAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA;;AAED2kE,yBAAyB,CAACz1G,SAA1B,GAAsCY,MAAM,CAACi5B,MAAP,CAAeg6E,wBAAwB,CAAC7zG,SAAxC,CAAtC;AACAy1G,yBAAyB,CAACz1G,SAA1B,CAAoCoC,WAApC,GAAkDqzG,yBAAlD;AAEA;;;;AAKA;;AAEA,SAASC,oBAAT,CAA+BzxE,MAA/B,EAAuC6M,MAAvC,EAAgD;AAE/CigB,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,sBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA,OAAKmgB,kBAAL,CAAyB,IAAI0kD,0BAAJ,CAAgC1xE,MAAhC,EAAwC6M,MAAxC,CAAzB;AACA,OAAKiiB,aAAL;AAEA;;AAED2iD,oBAAoB,CAAC11G,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAAjC;AACA01G,oBAAoB,CAAC11G,SAArB,CAA+BoC,WAA/B,GAA6CszG,oBAA7C,EAEA;;AAEA,SAASC,0BAAT,CAAqC1xE,MAArC,EAA6C6M,MAA7C,EAAsD;AAErD,QAAMhtC,CAAC,GAAG,CAAE,IAAI5E,IAAI,CAAC0yB,IAAL,CAAW,CAAX,CAAN,IAAyB,CAAnC;AACA,QAAM3yB,CAAC,GAAG,IAAI6E,CAAd;AAEA,QAAMgkD,QAAQ,GAAG,CAEhB;AACA,GAAE,CAHc,EAGX,CAAE,CAHS,EAGN,CAAE,CAHI,EAGD,CAAE,CAHD,EAGI,CAAE,CAHN,EAGS,CAHT,EAIhB,CAAE,CAJc,EAIX,CAJW,EAIR,CAAE,CAJM,EAIH,CAAE,CAJC,EAIE,CAJF,EAIK,CAJL,EAKhB,CALgB,EAKb,CAAE,CALW,EAKR,CAAE,CALM,EAKH,CALG,EAKA,CAAE,CALF,EAKK,CALL,EAMhB,CANgB,EAMb,CANa,EAMV,CAAE,CANQ,EAML,CANK,EAMF,CANE,EAMC,CAND,EAQhB;AACC,GATe,EASZ,CAAE7oD,CATU,EASP,CAAE6E,CATK,EASF,CATE,EASC,CAAE7E,CATH,EASM6E,CATN,EAUf,CAVe,EAUZ7E,CAVY,EAUT,CAAE6E,CAVO,EAUJ,CAVI,EAUD7E,CAVC,EAUE6E,CAVF,EAYhB;AACA,GAAE7E,CAbc,EAaX,CAAE6E,CAbS,EAaN,CAbM,EAaH,CAAE7E,CAbC,EAaE6E,CAbF,EAaK,CAbL,EAcf7E,CAde,EAcZ,CAAE6E,CAdU,EAcP,CAdO,EAcJ7E,CAdI,EAcD6E,CAdC,EAcE,CAdF,EAgBhB;AACA,GAAEA,CAjBc,EAiBX,CAjBW,EAiBR,CAAE7E,CAjBM,EAiBH6E,CAjBG,EAiBA,CAjBA,EAiBG,CAAE7E,CAjBL,EAkBhB,CAAE6E,CAlBc,EAkBX,CAlBW,EAkBR7E,CAlBQ,EAkBL6E,CAlBK,EAkBF,CAlBE,EAkBC7E,CAlBD,CAAjB;AAqBA,QAAMwuD,OAAO,GAAG,CACf,CADe,EACZ,EADY,EACR,CADQ,EACJ,CADI,EACD,CADC,EACE,EADF,EACO,CADP,EACU,EADV,EACc,EADd,EAEf,CAFe,EAEZ,EAFY,EAER,EAFQ,EAEH,CAFG,EAEA,EAFA,EAEI,CAFJ,EAEQ,CAFR,EAEW,CAFX,EAEc,EAFd,EAGf,EAHe,EAGX,CAHW,EAGR,CAHQ,EAGJ,EAHI,EAGA,CAHA,EAGG,EAHH,EAGQ,EAHR,EAGY,EAHZ,EAGgB,CAHhB,EAIf,CAJe,EAIZ,CAJY,EAIT,EAJS,EAIJ,CAJI,EAID,EAJC,EAIG,CAJH,EAIO,CAJP,EAIU,CAJV,EAIa,EAJb,EAKf,CALe,EAKZ,EALY,EAKR,CALQ,EAKJ,CALI,EAKD,CALC,EAKE,EALF,EAKO,CALP,EAKU,EALV,EAKc,EALd,EAMf,CANe,EAMZ,EANY,EAMR,CANQ,EAMJ,CANI,EAMD,CANC,EAME,EANF,EAMO,CANP,EAMU,EANV,EAMc,EANd,EAOf,CAPe,EAOZ,EAPY,EAOR,EAPQ,EAOH,CAPG,EAOA,EAPA,EAOI,CAPJ,EAOQ,CAPR,EAOW,CAPX,EAOc,EAPd,EAQf,EARe,EAQX,CARW,EAQR,CARQ,EAQJ,EARI,EAQA,CARA,EAQG,EARH,EAQQ,EARR,EAQY,EARZ,EAQgB,CARhB,EASf,CATe,EASZ,EATY,EASR,EATQ,EASH,CATG,EASA,EATA,EASI,CATJ,EASQ,CATR,EASW,CATX,EASc,CATd,EAUf,EAVe,EAUX,CAVW,EAUR,CAVQ,EAUJ,EAVI,EAUA,CAVA,EAUG,EAVH,EAUQ,EAVR,EAUY,EAVZ,EAUgB,CAVhB,EAWf,EAXe,EAWX,CAXW,EAWR,EAXQ,EAWH,EAXG,EAWC,EAXD,EAWK,CAXL,EAWS,EAXT,EAWa,CAXb,EAWgB,EAXhB,EAYf,CAZe,EAYZ,EAZY,EAYR,EAZQ,EAYH,CAZG,EAYA,EAZA,EAYI,CAZJ,EAYQ,CAZR,EAYW,CAZX,EAYc,CAZd,CAAhB;AAeAomD,EAAAA,wBAAwB,CAACtzG,IAAzB,CAA+B,IAA/B,EAAqCunD,QAArC,EAA+C2F,OAA/C,EAAwDxpB,MAAxD,EAAgE6M,MAAhE;AAEA,OAAKzlC,IAAL,GAAY,4BAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6M,IAAAA,MAAM,EAAEA;AAFS,GAAlB;AAKA;;AAED6kE,0BAA0B,CAAC31G,SAA3B,GAAuCY,MAAM,CAACi5B,MAAP,CAAeg6E,wBAAwB,CAAC7zG,SAAxC,CAAvC;AACA21G,0BAA0B,CAAC31G,SAA3B,CAAqCoC,WAArC,GAAmDuzG,0BAAnD;AAEA;;;;;;;;;AAUA;;AAEA,SAASC,YAAT,CAAuBj6B,IAAvB,EAA6Bk6B,eAA7B,EAA8C5xE,MAA9C,EAAsD6xE,cAAtD,EAAsEr/F,MAAtE,EAA8Es/F,KAA9E,EAAsF;AAErFhlD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,cAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB6rC,IAAAA,IAAI,EAAEA,IADW;AAEjBk6B,IAAAA,eAAe,EAAEA,eAFA;AAGjB5xE,IAAAA,MAAM,EAAEA,MAHS;AAIjB6xE,IAAAA,cAAc,EAAEA,cAJC;AAKjBr/F,IAAAA,MAAM,EAAEA;AALS,GAAlB;AAQA,MAAKs/F,KAAK,KAAK9zG,SAAf,EAA2B0tB,OAAO,CAACC,IAAR,CAAc,6CAAd;AAE3B,QAAMomF,cAAc,GAAG,IAAIC,kBAAJ,CAAwBt6B,IAAxB,EAA8Bk6B,eAA9B,EAA+C5xE,MAA/C,EAAuD6xE,cAAvD,EAAuEr/F,MAAvE,CAAvB,CAhBqF,CAkBrF;;AAEA,OAAKy/F,QAAL,GAAgBF,cAAc,CAACE,QAA/B;AACA,OAAKnuD,OAAL,GAAeiuD,cAAc,CAACjuD,OAA9B;AACA,OAAKouD,SAAL,GAAiBH,cAAc,CAACG,SAAhC,CAtBqF,CAwBrF;;AAEA,OAAKllD,kBAAL,CAAyB+kD,cAAzB;AACA,OAAKjjD,aAAL;AAEA;;AAED6iD,YAAY,CAAC51G,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAAzB;AACA41G,YAAY,CAAC51G,SAAb,CAAuBoC,WAAvB,GAAqCwzG,YAArC,EAEA;;AAEA,SAASK,kBAAT,CAA6Bt6B,IAA7B,EAAmCk6B,eAAnC,EAAoD5xE,MAApD,EAA4D6xE,cAA5D,EAA4Er/F,MAA5E,EAAqF;AAEpF2zC,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB6rC,IAAAA,IAAI,EAAEA,IADW;AAEjBk6B,IAAAA,eAAe,EAAEA,eAFA;AAGjB5xE,IAAAA,MAAM,EAAEA,MAHS;AAIjB6xE,IAAAA,cAAc,EAAEA,cAJC;AAKjBr/F,IAAAA,MAAM,EAAEA;AALS,GAAlB;AAQAo/F,EAAAA,eAAe,GAAGA,eAAe,IAAI,EAArC;AACA5xE,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACA6xE,EAAAA,cAAc,GAAGA,cAAc,IAAI,CAAnC;AACAr/F,EAAAA,MAAM,GAAGA,MAAM,IAAI,KAAnB;AAEA,QAAM2/F,MAAM,GAAGz6B,IAAI,CAAC06B,mBAAL,CAA0BR,eAA1B,EAA2Cp/F,MAA3C,CAAf,CAnBoF,CAqBpF;;AAEA,OAAKy/F,QAAL,GAAgBE,MAAM,CAACF,QAAvB;AACA,OAAKnuD,OAAL,GAAequD,MAAM,CAACruD,OAAtB;AACA,OAAKouD,SAAL,GAAiBC,MAAM,CAACD,SAAxB,CAzBoF,CA2BpF;;AAEA,QAAMnlD,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAMoC,MAAM,GAAG,IAAIpC,OAAJ,EAAf;AACA,QAAM/G,EAAE,GAAG,IAAI7K,OAAJ,EAAX;AACA,MAAIymF,CAAC,GAAG,IAAI70E,OAAJ,EAAR,CAhCoF,CAkCpF;;AAEA,QAAMqmB,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ;AACA,QAAMyF,OAAO,GAAG,EAAhB,CAvCoF,CAyCpF;;AAEA8oD,EAAAA,kBAAkB,GA3CkE,CA6CpF;;AAEA,OAAK5rD,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB,EAlDoF,CAoDpF;;AAEA,WAASuuD,kBAAT,GAA8B;AAE7B,SAAM,IAAIr1G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG20G,eAArB,EAAsC30G,CAAC,EAAvC,EAA6C;AAE5Cs1G,MAAAA,eAAe,CAAEt1G,CAAF,CAAf;AAEA,KAN4B,CAQ7B;AACA;AACA;AACA;;;AAEAs1G,IAAAA,eAAe,CAAI//F,MAAM,KAAK,KAAb,GAAuBo/F,eAAvB,GAAyC,CAA3C,CAAf,CAb6B,CAe7B;AACA;;AAEA3B,IAAAA,WAAW,GAlBkB,CAoB7B;;AAEAuC,IAAAA,eAAe;AAEf;;AAED,WAASD,eAAT,CAA0Bt1G,CAA1B,EAA8B;AAE7B;AAEAo1G,IAAAA,CAAC,GAAG36B,IAAI,CAAC+6B,UAAL,CAAiBx1G,CAAC,GAAG20G,eAArB,EAAsCS,CAAtC,CAAJ,CAJ6B,CAM7B;;AAEA,UAAMK,CAAC,GAAGP,MAAM,CAACruD,OAAP,CAAgB7mD,CAAhB,CAAV;AACA,UAAM01G,CAAC,GAAGR,MAAM,CAACD,SAAP,CAAkBj1G,CAAlB,CAAV,CAT6B,CAW7B;;AAEA,SAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI+gE,cAAtB,EAAsC/gE,CAAC,EAAvC,EAA6C;AAE5C,YAAMr1C,CAAC,GAAGq1C,CAAC,GAAG+gE,cAAJ,GAAqB52G,IAAI,CAACutB,EAA1B,GAA+B,CAAzC;AAEA,YAAMwC,GAAG,GAAG/vB,IAAI,CAAC+vB,GAAL,CAAUvvB,CAAV,CAAZ;AACA,YAAMsvB,GAAG,GAAG,CAAE9vB,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,CAAd,CAL4C,CAO5C;;AAEAmkC,MAAAA,MAAM,CAACt7B,CAAP,GAAaymB,GAAG,GAAG2nF,CAAC,CAACpuG,CAAR,GAAY0mB,GAAG,GAAG2nF,CAAC,CAACruG,CAAjC;AACAs7B,MAAAA,MAAM,CAACp7B,CAAP,GAAaumB,GAAG,GAAG2nF,CAAC,CAACluG,CAAR,GAAYwmB,GAAG,GAAG2nF,CAAC,CAACnuG,CAAjC;AACAo7B,MAAAA,MAAM,CAACjJ,CAAP,GAAa5L,GAAG,GAAG2nF,CAAC,CAAC/7E,CAAR,GAAY3L,GAAG,GAAG2nF,CAAC,CAACh8E,CAAjC;AACAiJ,MAAAA,MAAM,CAAC/R,SAAP;AAEAi2B,MAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC,EAd4C,CAgB5C;;AAEAo2B,MAAAA,MAAM,CAACzoD,CAAP,GAAW+tG,CAAC,CAAC/tG,CAAF,GAAM07B,MAAM,GAAGJ,MAAM,CAACt7B,CAAjC;AACAyoD,MAAAA,MAAM,CAACvoD,CAAP,GAAW6tG,CAAC,CAAC7tG,CAAF,GAAMw7B,MAAM,GAAGJ,MAAM,CAACp7B,CAAjC;AACAuoD,MAAAA,MAAM,CAACp2B,CAAP,GAAW07E,CAAC,CAAC17E,CAAF,GAAMqJ,MAAM,GAAGJ,MAAM,CAACjJ,CAAjC;AAEAktB,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA;AAED;;AAED,WAAS67E,eAAT,GAA2B;AAE1B,SAAM,IAAI1hE,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI8gE,eAAtB,EAAuC9gE,CAAC,EAAxC,EAA8C;AAE7C,WAAM,IAAI7zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI40G,cAAtB,EAAsC50G,CAAC,EAAvC,EAA6C;AAE5C,cAAM5B,CAAC,GAAG,CAAEw2G,cAAc,GAAG,CAAnB,KAA2B/gE,CAAC,GAAG,CAA/B,KAAuC7zC,CAAC,GAAG,CAA3C,CAAV;AACA,cAAM7B,CAAC,GAAG,CAAEy2G,cAAc,GAAG,CAAnB,IAAyB/gE,CAAzB,IAA+B7zC,CAAC,GAAG,CAAnC,CAAV;AACA,cAAM6C,CAAC,GAAG,CAAE+xG,cAAc,GAAG,CAAnB,IAAyB/gE,CAAzB,GAA6B7zC,CAAvC;AACA,cAAM60B,CAAC,GAAG,CAAE+/E,cAAc,GAAG,CAAnB,KAA2B/gE,CAAC,GAAG,CAA/B,IAAqC7zC,CAA/C,CAL4C,CAO5C;;AAEAusD,QAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,QAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED;AAED;;AAED,WAASm+E,WAAT,GAAuB;AAEtB,SAAM,IAAIhzG,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI20G,eAAtB,EAAuC30G,CAAC,EAAxC,EAA8C;AAE7C,WAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI+gE,cAAtB,EAAsC/gE,CAAC,EAAvC,EAA6C;AAE5Cra,QAAAA,EAAE,CAACnyB,CAAH,GAAOrH,CAAC,GAAG20G,eAAX;AACAn7E,QAAAA,EAAE,CAACjyB,CAAH,GAAOssC,CAAC,GAAG+gE,cAAX;AAEA9tD,QAAAA,GAAG,CAAC39C,IAAJ,CAAUqwB,EAAE,CAACnyB,CAAb,EAAgBmyB,EAAE,CAACjyB,CAAnB;AAEA;AAED;AAED;AAED;;AAEDwtG,kBAAkB,CAACj2G,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAA/B;AACAi2G,kBAAkB,CAACj2G,SAAnB,CAA6BoC,WAA7B,GAA2C6zG,kBAA3C;;AAEAA,kBAAkB,CAACj2G,SAAnB,CAA6Bg6B,MAA7B,GAAsC,YAAY;AAEjD,QAAMqW,IAAI,GAAG+Z,cAAc,CAACpqD,SAAf,CAAyBg6B,MAAzB,CAAgCz5B,IAAhC,CAAsC,IAAtC,CAAb;AAEA8vC,EAAAA,IAAI,CAACsrC,IAAL,GAAY,KAAK7rC,UAAL,CAAgB6rC,IAAhB,CAAqB3hD,MAArB,EAAZ;AAEA,SAAOqW,IAAP;AAEA,CARD;AAUA;;;;;;AAOA;;;AAEA,SAASwmE,iBAAT,CAA4B5yE,MAA5B,EAAoC6yE,IAApC,EAA0CjB,eAA1C,EAA2DC,cAA3D,EAA2ElyG,CAA3E,EAA8EC,CAA9E,EAAiFkzG,WAAjF,EAA+F;AAE9FhmD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6yE,IAAAA,IAAI,EAAEA,IAFW;AAGjBjB,IAAAA,eAAe,EAAEA,eAHA;AAIjBC,IAAAA,cAAc,EAAEA,cAJC;AAKjBlyG,IAAAA,CAAC,EAAEA,CALc;AAMjBC,IAAAA,CAAC,EAAEA;AANc,GAAlB;AASA,MAAKkzG,WAAW,KAAK90G,SAArB,EAAiC0tB,OAAO,CAACC,IAAR,CAAc,0FAAd;AAEjC,OAAKqhC,kBAAL,CAAyB,IAAI+lD,uBAAJ,CAA6B/yE,MAA7B,EAAqC6yE,IAArC,EAA2CjB,eAA3C,EAA4DC,cAA5D,EAA4ElyG,CAA5E,EAA+EC,CAA/E,CAAzB;AACA,OAAKkvD,aAAL;AAEA;;AAED8jD,iBAAiB,CAAC72G,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA9B;AACA62G,iBAAiB,CAAC72G,SAAlB,CAA4BoC,WAA5B,GAA0Cy0G,iBAA1C,EAEA;;AAEA,SAASG,uBAAT,CAAkC/yE,MAAlC,EAA0C6yE,IAA1C,EAAgDjB,eAAhD,EAAiEC,cAAjE,EAAiFlyG,CAAjF,EAAoFC,CAApF,EAAwF;AAEvFumD,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,yBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6yE,IAAAA,IAAI,EAAEA,IAFW;AAGjBjB,IAAAA,eAAe,EAAEA,eAHA;AAIjBC,IAAAA,cAAc,EAAEA,cAJC;AAKjBlyG,IAAAA,CAAC,EAAEA,CALc;AAMjBC,IAAAA,CAAC,EAAEA;AANc,GAAlB;AASAogC,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACA6yE,EAAAA,IAAI,GAAGA,IAAI,IAAI,GAAf;AACAjB,EAAAA,eAAe,GAAG32G,IAAI,CAACwE,KAAL,CAAYmyG,eAAZ,KAAiC,EAAnD;AACAC,EAAAA,cAAc,GAAG52G,IAAI,CAACwE,KAAL,CAAYoyG,cAAZ,KAAgC,CAAjD;AACAlyG,EAAAA,CAAC,GAAGA,CAAC,IAAI,CAAT;AACAC,EAAAA,CAAC,GAAGA,CAAC,IAAI,CAAT,CApBuF,CAsBvF;;AAEA,QAAM4pD,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CA3BuF,CA6BvF;;AAEA,QAAMgJ,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAMoC,MAAM,GAAG,IAAIpC,OAAJ,EAAf;AAEA,QAAMw1E,EAAE,GAAG,IAAIx1E,OAAJ,EAAX;AACA,QAAMy1E,EAAE,GAAG,IAAIz1E,OAAJ,EAAX;AAEA,QAAMm1E,CAAC,GAAG,IAAIn1E,OAAJ,EAAV;AACA,QAAM01E,CAAC,GAAG,IAAI11E,OAAJ,EAAV;AACA,QAAMk1E,CAAC,GAAG,IAAIl1E,OAAJ,EAAV,CAvCuF,CAyCvF;;AAEA,OAAM,IAAIvgC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI20G,eAAtB,EAAuC,EAAG30G,CAA1C,EAA8C;AAE7C;AAEA,UAAMq6C,CAAC,GAAGr6C,CAAC,GAAG20G,eAAJ,GAAsBjyG,CAAtB,GAA0B1E,IAAI,CAACutB,EAA/B,GAAoC,CAA9C,CAJ6C,CAM7C;AACA;;AAEA2qF,IAAAA,wBAAwB,CAAE77D,CAAF,EAAK33C,CAAL,EAAQC,CAAR,EAAWogC,MAAX,EAAmBgzE,EAAnB,CAAxB;AACAG,IAAAA,wBAAwB,CAAE77D,CAAC,GAAG,IAAN,EAAY33C,CAAZ,EAAeC,CAAf,EAAkBogC,MAAlB,EAA0BizE,EAA1B,CAAxB,CAV6C,CAY7C;;AAEAC,IAAAA,CAAC,CAACxmF,UAAF,CAAcumF,EAAd,EAAkBD,EAAlB;AACAN,IAAAA,CAAC,CAACpmF,UAAF,CAAc2mF,EAAd,EAAkBD,EAAlB;AACAL,IAAAA,CAAC,CAAC3zE,YAAF,CAAgBk0E,CAAhB,EAAmBR,CAAnB;AACAA,IAAAA,CAAC,CAAC1zE,YAAF,CAAgB2zE,CAAhB,EAAmBO,CAAnB,EAjB6C,CAmB7C;;AAEAP,IAAAA,CAAC,CAAC9kF,SAAF;AACA6kF,IAAAA,CAAC,CAAC7kF,SAAF;;AAEA,SAAM,IAAIijB,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI+gE,cAAtB,EAAsC,EAAG/gE,CAAzC,EAA6C;AAE5C;AACA;AAEA,YAAMr1C,CAAC,GAAGq1C,CAAC,GAAG+gE,cAAJ,GAAqB52G,IAAI,CAACutB,EAA1B,GAA+B,CAAzC;AACA,YAAM0K,EAAE,GAAG,CAAE2/E,IAAF,GAAS53G,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,CAApB;AACA,YAAM03B,EAAE,GAAG0/E,IAAI,GAAG53G,IAAI,CAAC+vB,GAAL,CAAUvvB,CAAV,CAAlB,CAP4C,CAS5C;AACA;;AAEAsxD,MAAAA,MAAM,CAACzoD,CAAP,GAAW0uG,EAAE,CAAC1uG,CAAH,IAAS4uB,EAAE,GAAGw/E,CAAC,CAACpuG,CAAP,GAAW6uB,EAAE,GAAGw/E,CAAC,CAACruG,CAA3B,CAAX;AACAyoD,MAAAA,MAAM,CAACvoD,CAAP,GAAWwuG,EAAE,CAACxuG,CAAH,IAAS0uB,EAAE,GAAGw/E,CAAC,CAACluG,CAAP,GAAW2uB,EAAE,GAAGw/E,CAAC,CAACnuG,CAA3B,CAAX;AACAuoD,MAAAA,MAAM,CAACp2B,CAAP,GAAWq8E,EAAE,CAACr8E,CAAH,IAASzD,EAAE,GAAGw/E,CAAC,CAAC/7E,CAAP,GAAWxD,EAAE,GAAGw/E,CAAC,CAACh8E,CAA3B,CAAX;AAEAktB,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EAhB4C,CAkB5C;;AAEAiJ,MAAAA,MAAM,CAAClT,UAAP,CAAmBqgC,MAAnB,EAA2BimD,EAA3B,EAAgCnlF,SAAhC;AAEAi2B,MAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC,EAtB4C,CAwB5C;;AAEAotB,MAAAA,GAAG,CAAC39C,IAAJ,CAAUnJ,CAAC,GAAG20G,eAAd;AACA7tD,MAAAA,GAAG,CAAC39C,IAAJ,CAAU0qC,CAAC,GAAG+gE,cAAd;AAEA;AAED,GAlGsF,CAoGvF;;;AAEA,OAAM,IAAI/gE,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI8gE,eAAtB,EAAuC9gE,CAAC,EAAxC,EAA8C;AAE7C,SAAM,IAAI7zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI40G,cAAtB,EAAsC50G,CAAC,EAAvC,EAA6C;AAE5C;AAEA,YAAM5B,CAAC,GAAG,CAAEw2G,cAAc,GAAG,CAAnB,KAA2B/gE,CAAC,GAAG,CAA/B,KAAuC7zC,CAAC,GAAG,CAA3C,CAAV;AACA,YAAM7B,CAAC,GAAG,CAAEy2G,cAAc,GAAG,CAAnB,IAAyB/gE,CAAzB,IAA+B7zC,CAAC,GAAG,CAAnC,CAAV;AACA,YAAM6C,CAAC,GAAG,CAAE+xG,cAAc,GAAG,CAAnB,IAAyB/gE,CAAzB,GAA6B7zC,CAAvC;AACA,YAAM60B,CAAC,GAAG,CAAE+/E,cAAc,GAAG,CAAnB,KAA2B/gE,CAAC,GAAG,CAA/B,IAAqC7zC,CAA/C,CAP4C,CAS5C;;AAEAusD,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,MAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED,GAxHsF,CA0HvF;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB,EA/HuF,CAiIvF;;AAEA,WAASovD,wBAAT,CAAmC77D,CAAnC,EAAsC33C,CAAtC,EAAyCC,CAAzC,EAA4CogC,MAA5C,EAAoDv8B,QAApD,EAA+D;AAE9D,UAAM2vG,EAAE,GAAGn4G,IAAI,CAAC8vB,GAAL,CAAUusB,CAAV,CAAX;AACA,UAAM+7D,EAAE,GAAGp4G,IAAI,CAAC+vB,GAAL,CAAUssB,CAAV,CAAX;AACA,UAAMg8D,OAAO,GAAG1zG,CAAC,GAAGD,CAAJ,GAAQ23C,CAAxB;AACA,UAAMi8D,EAAE,GAAGt4G,IAAI,CAAC8vB,GAAL,CAAUuoF,OAAV,CAAX;AAEA7vG,IAAAA,QAAQ,CAACa,CAAT,GAAa07B,MAAM,IAAK,IAAIuzE,EAAT,CAAN,GAAsB,GAAtB,GAA4BH,EAAzC;AACA3vG,IAAAA,QAAQ,CAACe,CAAT,GAAaw7B,MAAM,IAAK,IAAIuzE,EAAT,CAAN,GAAsBF,EAAtB,GAA2B,GAAxC;AACA5vG,IAAAA,QAAQ,CAACkzB,CAAT,GAAaqJ,MAAM,GAAG/kC,IAAI,CAAC+vB,GAAL,CAAUsoF,OAAV,CAAT,GAA+B,GAA5C;AAEA;AAED;;AAEDP,uBAAuB,CAACh3G,SAAxB,GAAoCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAApC;AACAg3G,uBAAuB,CAACh3G,SAAxB,CAAkCoC,WAAlC,GAAgD40G,uBAAhD;AAEA;;;;;AAMA;;AAEA,SAASS,aAAT,CAAwBxzE,MAAxB,EAAgC6yE,IAAhC,EAAsChB,cAAtC,EAAsDD,eAAtD,EAAuE6B,GAAvE,EAA6E;AAE5E3mD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,eAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6yE,IAAAA,IAAI,EAAEA,IAFW;AAGjBhB,IAAAA,cAAc,EAAEA,cAHC;AAIjBD,IAAAA,eAAe,EAAEA,eAJA;AAKjB6B,IAAAA,GAAG,EAAEA;AALY,GAAlB;AAQA,OAAKzmD,kBAAL,CAAyB,IAAI0mD,mBAAJ,CAAyB1zE,MAAzB,EAAiC6yE,IAAjC,EAAuChB,cAAvC,EAAuDD,eAAvD,EAAwE6B,GAAxE,CAAzB;AACA,OAAK3kD,aAAL;AAEA;;AAED0kD,aAAa,CAACz3G,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA1B;AACAy3G,aAAa,CAACz3G,SAAd,CAAwBoC,WAAxB,GAAsCq1G,aAAtC,EAEA;;AAEA,SAASE,mBAAT,CAA8B1zE,MAA9B,EAAsC6yE,IAAtC,EAA4ChB,cAA5C,EAA4DD,eAA5D,EAA6E6B,GAA7E,EAAmF;AAElFttD,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjB6yE,IAAAA,IAAI,EAAEA,IAFW;AAGjBhB,IAAAA,cAAc,EAAEA,cAHC;AAIjBD,IAAAA,eAAe,EAAEA,eAJA;AAKjB6B,IAAAA,GAAG,EAAEA;AALY,GAAlB;AAQAzzE,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACA6yE,EAAAA,IAAI,GAAGA,IAAI,IAAI,GAAf;AACAhB,EAAAA,cAAc,GAAG52G,IAAI,CAACwE,KAAL,CAAYoyG,cAAZ,KAAgC,CAAjD;AACAD,EAAAA,eAAe,GAAG32G,IAAI,CAACwE,KAAL,CAAYmyG,eAAZ,KAAiC,CAAnD;AACA6B,EAAAA,GAAG,GAAGA,GAAG,IAAIx4G,IAAI,CAACutB,EAAL,GAAU,CAAvB,CAlBkF,CAoBlF;;AAEA,QAAMghC,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CAzBkF,CA2BlF;;AAEA,QAAM90B,MAAM,GAAG,IAAIuO,OAAJ,EAAf;AACA,QAAMuvB,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAMoC,MAAM,GAAG,IAAIpC,OAAJ,EAAf,CA/BkF,CAiClF;;AAEA,OAAM,IAAIsT,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI+gE,cAAtB,EAAsC/gE,CAAC,EAAvC,EAA6C;AAE5C,SAAM,IAAI7zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI20G,eAAtB,EAAuC30G,CAAC,EAAxC,EAA8C;AAE7C,YAAMq6C,CAAC,GAAGr6C,CAAC,GAAG20G,eAAJ,GAAsB6B,GAAhC;AACA,YAAMh4G,CAAC,GAAGq1C,CAAC,GAAG+gE,cAAJ,GAAqB52G,IAAI,CAACutB,EAA1B,GAA+B,CAAzC,CAH6C,CAK7C;;AAEAukC,MAAAA,MAAM,CAACzoD,CAAP,GAAW,CAAE07B,MAAM,GAAG6yE,IAAI,GAAG53G,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,CAAlB,IAAoCR,IAAI,CAAC8vB,GAAL,CAAUusB,CAAV,CAA/C;AACAyV,MAAAA,MAAM,CAACvoD,CAAP,GAAW,CAAEw7B,MAAM,GAAG6yE,IAAI,GAAG53G,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,CAAlB,IAAoCR,IAAI,CAAC+vB,GAAL,CAAUssB,CAAV,CAA/C;AACAyV,MAAAA,MAAM,CAACp2B,CAAP,GAAWk8E,IAAI,GAAG53G,IAAI,CAAC+vB,GAAL,CAAUvvB,CAAV,CAAlB;AAEAooD,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EAX6C,CAa7C;;AAEA1H,MAAAA,MAAM,CAAC3qB,CAAP,GAAW07B,MAAM,GAAG/kC,IAAI,CAAC8vB,GAAL,CAAUusB,CAAV,CAApB;AACAroB,MAAAA,MAAM,CAACzqB,CAAP,GAAWw7B,MAAM,GAAG/kC,IAAI,CAAC+vB,GAAL,CAAUssB,CAAV,CAApB;AACA1X,MAAAA,MAAM,CAAClT,UAAP,CAAmBqgC,MAAnB,EAA2B99B,MAA3B,EAAoCpB,SAApC;AAEAi2B,MAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC,EAnB6C,CAqB7C;;AAEAotB,MAAAA,GAAG,CAAC39C,IAAJ,CAAUnJ,CAAC,GAAG20G,eAAd;AACA7tD,MAAAA,GAAG,CAAC39C,IAAJ,CAAU0qC,CAAC,GAAG+gE,cAAd;AAEA;AAED,GAjEiF,CAmElF;;;AAEA,OAAM,IAAI/gE,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI+gE,cAAtB,EAAsC/gE,CAAC,EAAvC,EAA6C;AAE5C,SAAM,IAAI7zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI20G,eAAtB,EAAuC30G,CAAC,EAAxC,EAA8C;AAE7C;AAEA,YAAM5B,CAAC,GAAG,CAAEu2G,eAAe,GAAG,CAApB,IAA0B9gE,CAA1B,GAA8B7zC,CAA9B,GAAkC,CAA5C;AACA,YAAM7B,CAAC,GAAG,CAAEw2G,eAAe,GAAG,CAApB,KAA4B9gE,CAAC,GAAG,CAAhC,IAAsC7zC,CAAtC,GAA0C,CAApD;AACA,YAAM6C,CAAC,GAAG,CAAE8xG,eAAe,GAAG,CAApB,KAA4B9gE,CAAC,GAAG,CAAhC,IAAsC7zC,CAAhD;AACA,YAAM60B,CAAC,GAAG,CAAE8/E,eAAe,GAAG,CAApB,IAA0B9gE,CAA1B,GAA8B7zC,CAAxC,CAP6C,CAS7C;;AAEAusD,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,MAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED,GAvFiF,CAyFlF;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAED2vD,mBAAmB,CAAC33G,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAhC;AACA23G,mBAAmB,CAAC33G,SAApB,CAA8BoC,WAA9B,GAA4Cu1G,mBAA5C;AAEA;;;;;AAKA,MAAMC,MAAM,GAAG;AAEdC,EAAAA,WAAW,EAAE,UAAWxnE,IAAX,EAAiBynE,WAAjB,EAA8BC,GAA9B,EAAoC;AAEhDA,IAAAA,GAAG,GAAGA,GAAG,IAAI,CAAb;AAEA,QAAIC,QAAQ,GAAGF,WAAW,IAAIA,WAAW,CAACj4G,MAA1C;AAAA,QACCo4G,QAAQ,GAAGD,QAAQ,GAAGF,WAAW,CAAE,CAAF,CAAX,GAAmBC,GAAtB,GAA4B1nE,IAAI,CAACxwC,MADrD;AAAA,QAECq4G,SAAS,GAAGC,UAAU,CAAE9nE,IAAF,EAAQ,CAAR,EAAW4nE,QAAX,EAAqBF,GAArB,EAA0B,IAA1B,CAFvB;AAAA,QAGC7iC,SAAS,GAAG,EAHb;AAKA,QAAK,CAAEgjC,SAAF,IAAeA,SAAS,CAACj8B,IAAV,KAAmBi8B,SAAS,CAACE,IAAjD,EAAwD,OAAOljC,SAAP;AAExD,QAAIjjC,IAAJ,EAAUC,IAAV,EAAgBE,IAAhB,EAAsBC,IAAtB,EAA4B9pC,CAA5B,EAA+BE,CAA/B,EAAkC4vG,OAAlC;AAEA,QAAKL,QAAL,EAAgBE,SAAS,GAAGI,cAAc,CAAEjoE,IAAF,EAAQynE,WAAR,EAAqBI,SAArB,EAAgCH,GAAhC,CAA1B,CAbgC,CAehD;;AACA,QAAK1nE,IAAI,CAACxwC,MAAL,GAAc,KAAKk4G,GAAxB,EAA8B;AAE7B9lE,MAAAA,IAAI,GAAGG,IAAI,GAAG/B,IAAI,CAAE,CAAF,CAAlB;AACA6B,MAAAA,IAAI,GAAGG,IAAI,GAAGhC,IAAI,CAAE,CAAF,CAAlB;;AAEA,WAAM,IAAInvC,CAAC,GAAG62G,GAAd,EAAmB72G,CAAC,GAAG+2G,QAAvB,EAAiC/2G,CAAC,IAAI62G,GAAtC,EAA4C;AAE3CxvG,QAAAA,CAAC,GAAG8nC,IAAI,CAAEnvC,CAAF,CAAR;AACAuH,QAAAA,CAAC,GAAG4nC,IAAI,CAAEnvC,CAAC,GAAG,CAAN,CAAR;AACA,YAAKqH,CAAC,GAAG0pC,IAAT,EAAgBA,IAAI,GAAG1pC,CAAP;AAChB,YAAKE,CAAC,GAAGypC,IAAT,EAAgBA,IAAI,GAAGzpC,CAAP;AAChB,YAAKF,CAAC,GAAG6pC,IAAT,EAAgBA,IAAI,GAAG7pC,CAAP;AAChB,YAAKE,CAAC,GAAG4pC,IAAT,EAAgBA,IAAI,GAAG5pC,CAAP;AAEhB,OAd4B,CAgB7B;;;AACA4vG,MAAAA,OAAO,GAAGn5G,IAAI,CAAC+E,GAAL,CAAUmuC,IAAI,GAAGH,IAAjB,EAAuBI,IAAI,GAAGH,IAA9B,CAAV;AACAmmE,MAAAA,OAAO,GAAGA,OAAO,KAAK,CAAZ,GAAgB,IAAIA,OAApB,GAA8B,CAAxC;AAEA;;AAEDE,IAAAA,YAAY,CAAEL,SAAF,EAAahjC,SAAb,EAAwB6iC,GAAxB,EAA6B9lE,IAA7B,EAAmCC,IAAnC,EAAyCmmE,OAAzC,CAAZ;AAEA,WAAOnjC,SAAP;AAEA;AA5Ca,CAAf,EAgDA;;AACA,SAASijC,UAAT,CAAqB9nE,IAArB,EAA2BqJ,KAA3B,EAAkCI,GAAlC,EAAuCi+D,GAAvC,EAA4CS,SAA5C,EAAwD;AAEvD,MAAIt3G,CAAJ,EAAOu3G,IAAP;;AAEA,MAAKD,SAAS,KAAOE,UAAU,CAAEroE,IAAF,EAAQqJ,KAAR,EAAeI,GAAf,EAAoBi+D,GAApB,CAAV,GAAsC,CAA3D,EAAiE;AAEhE,SAAM72G,CAAC,GAAGw4C,KAAV,EAAiBx4C,CAAC,GAAG44C,GAArB,EAA0B54C,CAAC,IAAI62G,GAA/B,EAAqCU,IAAI,GAAGE,UAAU,CAAEz3G,CAAF,EAAKmvC,IAAI,CAAEnvC,CAAF,CAAT,EAAgBmvC,IAAI,CAAEnvC,CAAC,GAAG,CAAN,CAApB,EAA+Bu3G,IAA/B,CAAjB;AAErC,GAJD,MAIO;AAEN,SAAMv3G,CAAC,GAAG44C,GAAG,GAAGi+D,GAAhB,EAAqB72G,CAAC,IAAIw4C,KAA1B,EAAiCx4C,CAAC,IAAI62G,GAAtC,EAA4CU,IAAI,GAAGE,UAAU,CAAEz3G,CAAF,EAAKmvC,IAAI,CAAEnvC,CAAF,CAAT,EAAgBmvC,IAAI,CAAEnvC,CAAC,GAAG,CAAN,CAApB,EAA+Bu3G,IAA/B,CAAjB;AAE5C;;AAED,MAAKA,IAAI,IAAI9lF,MAAM,CAAE8lF,IAAF,EAAQA,IAAI,CAACx8B,IAAb,CAAnB,EAAyC;AAExC28B,IAAAA,UAAU,CAAEH,IAAF,CAAV;AACAA,IAAAA,IAAI,GAAGA,IAAI,CAACx8B,IAAZ;AAEA;;AAED,SAAOw8B,IAAP;AAEA,EAED;;;AACA,SAASI,YAAT,CAAuBn/D,KAAvB,EAA8BI,GAA9B,EAAoC;AAEnC,MAAK,CAAEJ,KAAP,EAAe,OAAOA,KAAP;AACf,MAAK,CAAEI,GAAP,EAAaA,GAAG,GAAGJ,KAAN;AAEb,MAAI91C,CAAC,GAAG81C,KAAR;AAAA,MACCo/D,KADD;;AAEA,KAAG;AAEFA,IAAAA,KAAK,GAAG,KAAR;;AAEA,QAAK,CAAEl1G,CAAC,CAACm1G,OAAJ,KAAiBpmF,MAAM,CAAE/uB,CAAF,EAAKA,CAAC,CAACq4E,IAAP,CAAN,IAAuB+8B,IAAI,CAAEp1G,CAAC,CAACw0G,IAAJ,EAAUx0G,CAAV,EAAaA,CAAC,CAACq4E,IAAf,CAAJ,KAA8B,CAAtE,CAAL,EAAiF;AAEhF28B,MAAAA,UAAU,CAAEh1G,CAAF,CAAV;AACAA,MAAAA,CAAC,GAAGk2C,GAAG,GAAGl2C,CAAC,CAACw0G,IAAZ;AACA,UAAKx0G,CAAC,KAAKA,CAAC,CAACq4E,IAAb,EAAoB;AACpB68B,MAAAA,KAAK,GAAG,IAAR;AAEA,KAPD,MAOO;AAENl1G,MAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA;AAED,GAjBD,QAiBU68B,KAAK,IAAIl1G,CAAC,KAAKk2C,GAjBzB;;AAmBA,SAAOA,GAAP;AAEA,EAED;;;AACA,SAASy+D,YAAT,CAAuBU,GAAvB,EAA4B/jC,SAA5B,EAAuC6iC,GAAvC,EAA4C9lE,IAA5C,EAAkDC,IAAlD,EAAwDmmE,OAAxD,EAAiEa,IAAjE,EAAwE;AAEvE,MAAK,CAAED,GAAP,EAAa,OAF0D,CAIvE;;AACA,MAAK,CAAEC,IAAF,IAAUb,OAAf,EAAyBc,UAAU,CAAEF,GAAF,EAAOhnE,IAAP,EAAaC,IAAb,EAAmBmmE,OAAnB,CAAV;AAEzB,MAAIj4C,IAAI,GAAG64C,GAAX;AAAA,MACCb,IADD;AAAA,MACOn8B,IADP,CAPuE,CAUvE;;AACA,SAAQg9B,GAAG,CAACb,IAAJ,KAAaa,GAAG,CAACh9B,IAAzB,EAAgC;AAE/Bm8B,IAAAA,IAAI,GAAGa,GAAG,CAACb,IAAX;AACAn8B,IAAAA,IAAI,GAAGg9B,GAAG,CAACh9B,IAAX;;AAEA,QAAKo8B,OAAO,GAAGe,WAAW,CAAEH,GAAF,EAAOhnE,IAAP,EAAaC,IAAb,EAAmBmmE,OAAnB,CAAd,GAA6CgB,KAAK,CAAEJ,GAAF,CAA9D,EAAwE;AAEvE;AACA/jC,MAAAA,SAAS,CAAC7qE,IAAV,CAAgB+tG,IAAI,CAACl3G,CAAL,GAAS62G,GAAzB;AACA7iC,MAAAA,SAAS,CAAC7qE,IAAV,CAAgB4uG,GAAG,CAAC/3G,CAAJ,GAAQ62G,GAAxB;AACA7iC,MAAAA,SAAS,CAAC7qE,IAAV,CAAgB4xE,IAAI,CAAC/6E,CAAL,GAAS62G,GAAzB;AAEAa,MAAAA,UAAU,CAAEK,GAAF,CAAV,CAPuE,CASvE;;AACAA,MAAAA,GAAG,GAAGh9B,IAAI,CAACA,IAAX;AACA7b,MAAAA,IAAI,GAAG6b,IAAI,CAACA,IAAZ;AAEA;AAEA;;AAEDg9B,IAAAA,GAAG,GAAGh9B,IAAN,CAtB+B,CAwB/B;;AACA,QAAKg9B,GAAG,KAAK74C,IAAb,EAAoB;AAEnB;AACA,UAAK,CAAE84C,IAAP,EAAc;AAEbX,QAAAA,YAAY,CAAEM,YAAY,CAAEI,GAAF,CAAd,EAAuB/jC,SAAvB,EAAkC6iC,GAAlC,EAAuC9lE,IAAvC,EAA6CC,IAA7C,EAAmDmmE,OAAnD,EAA4D,CAA5D,CAAZ,CAFa,CAIb;AAEA,OAND,MAMO,IAAKa,IAAI,KAAK,CAAd,EAAkB;AAExBD,QAAAA,GAAG,GAAGK,sBAAsB,CAAET,YAAY,CAAEI,GAAF,CAAd,EAAuB/jC,SAAvB,EAAkC6iC,GAAlC,CAA5B;AACAQ,QAAAA,YAAY,CAAEU,GAAF,EAAO/jC,SAAP,EAAkB6iC,GAAlB,EAAuB9lE,IAAvB,EAA6BC,IAA7B,EAAmCmmE,OAAnC,EAA4C,CAA5C,CAAZ,CAHwB,CAKxB;AAEA,OAPM,MAOA,IAAKa,IAAI,KAAK,CAAd,EAAkB;AAExBK,QAAAA,WAAW,CAAEN,GAAF,EAAO/jC,SAAP,EAAkB6iC,GAAlB,EAAuB9lE,IAAvB,EAA6BC,IAA7B,EAAmCmmE,OAAnC,CAAX;AAEA;;AAED;AAEA;AAED;AAED,EAED;;;AACA,SAASgB,KAAT,CAAgBJ,GAAhB,EAAsB;AAErB,MAAI35G,CAAC,GAAG25G,GAAG,CAACb,IAAZ;AAAA,MACC/4G,CAAC,GAAG45G,GADL;AAAA,MAECl1G,CAAC,GAAGk1G,GAAG,CAACh9B,IAFT;AAIA,MAAK+8B,IAAI,CAAE15G,CAAF,EAAKD,CAAL,EAAQ0E,CAAR,CAAJ,IAAmB,CAAxB,EAA4B,OAAO,KAAP,CANP,CAMqB;AAE1C;;AACA,MAAIH,CAAC,GAAGq1G,GAAG,CAACh9B,IAAJ,CAASA,IAAjB;;AAEA,SAAQr4E,CAAC,KAAKq1G,GAAG,CAACb,IAAlB,EAAyB;AAExB,QAAKoB,eAAe,CAAEl6G,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACmJ,CAAT,EAAYpJ,CAAC,CAACkJ,CAAd,EAAiBlJ,CAAC,CAACoJ,CAAnB,EAAsB1E,CAAC,CAACwE,CAAxB,EAA2BxE,CAAC,CAAC0E,CAA7B,EAAgC7E,CAAC,CAAC2E,CAAlC,EAAqC3E,CAAC,CAAC6E,CAAvC,CAAf,IACJuwG,IAAI,CAAEp1G,CAAC,CAACw0G,IAAJ,EAAUx0G,CAAV,EAAaA,CAAC,CAACq4E,IAAf,CAAJ,IAA6B,CAD9B,EACkC,OAAO,KAAP;AAClCr4E,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA;;AAED,SAAO,IAAP;AAEA;;AAED,SAASm9B,WAAT,CAAsBH,GAAtB,EAA2BhnE,IAA3B,EAAiCC,IAAjC,EAAuCmmE,OAAvC,EAAiD;AAEhD,MAAI/4G,CAAC,GAAG25G,GAAG,CAACb,IAAZ;AAAA,MACC/4G,CAAC,GAAG45G,GADL;AAAA,MAECl1G,CAAC,GAAGk1G,GAAG,CAACh9B,IAFT;AAIA,MAAK+8B,IAAI,CAAE15G,CAAF,EAAKD,CAAL,EAAQ0E,CAAR,CAAJ,IAAmB,CAAxB,EAA4B,OAAO,KAAP,CANoB,CAMN;AAE1C;;AACA,MAAI01G,KAAK,GAAGn6G,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAR,GAAcjJ,CAAC,CAACiJ,CAAF,GAAMxE,CAAC,CAACwE,CAAR,GAAYjJ,CAAC,CAACiJ,CAAd,GAAkBxE,CAAC,CAACwE,CAAlC,GAA0ClJ,CAAC,CAACkJ,CAAF,GAAMxE,CAAC,CAACwE,CAAR,GAAYlJ,CAAC,CAACkJ,CAAd,GAAkBxE,CAAC,CAACwE,CAA1E;AAAA,MACCmxG,KAAK,GAAGp6G,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAR,GAAcnJ,CAAC,CAACmJ,CAAF,GAAM1E,CAAC,CAAC0E,CAAR,GAAYnJ,CAAC,CAACmJ,CAAd,GAAkB1E,CAAC,CAAC0E,CAAlC,GAA0CpJ,CAAC,CAACoJ,CAAF,GAAM1E,CAAC,CAAC0E,CAAR,GAAYpJ,CAAC,CAACoJ,CAAd,GAAkB1E,CAAC,CAAC0E,CADvE;AAAA,MAECkxG,KAAK,GAAGr6G,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAR,GAAcjJ,CAAC,CAACiJ,CAAF,GAAMxE,CAAC,CAACwE,CAAR,GAAYjJ,CAAC,CAACiJ,CAAd,GAAkBxE,CAAC,CAACwE,CAAlC,GAA0ClJ,CAAC,CAACkJ,CAAF,GAAMxE,CAAC,CAACwE,CAAR,GAAYlJ,CAAC,CAACkJ,CAAd,GAAkBxE,CAAC,CAACwE,CAFvE;AAAA,MAGCqxG,KAAK,GAAGt6G,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAR,GAAcnJ,CAAC,CAACmJ,CAAF,GAAM1E,CAAC,CAAC0E,CAAR,GAAYnJ,CAAC,CAACmJ,CAAd,GAAkB1E,CAAC,CAAC0E,CAAlC,GAA0CpJ,CAAC,CAACoJ,CAAF,GAAM1E,CAAC,CAAC0E,CAAR,GAAYpJ,CAAC,CAACoJ,CAAd,GAAkB1E,CAAC,CAAC0E,CAHvE,CATgD,CAchD;;AACA,MAAI0pC,IAAI,GAAG0nE,MAAM,CAAEJ,KAAF,EAASC,KAAT,EAAgBznE,IAAhB,EAAsBC,IAAtB,EAA4BmmE,OAA5B,CAAjB;AAAA,MACC/lE,IAAI,GAAGunE,MAAM,CAAEF,KAAF,EAASC,KAAT,EAAgB3nE,IAAhB,EAAsBC,IAAtB,EAA4BmmE,OAA5B,CADd;AAGA,MAAIz0G,CAAC,GAAGq1G,GAAG,CAACa,KAAZ;AAAA,MACCzsF,CAAC,GAAG4rF,GAAG,CAACc,KADT,CAlBgD,CAqBhD;;AACA,SAAQn2G,CAAC,IAAIA,CAAC,CAACg3B,CAAF,IAAOuX,IAAZ,IAAoB9kB,CAApB,IAAyBA,CAAC,CAACuN,CAAF,IAAO0X,IAAxC,EAA+C;AAE9C,QAAK1uC,CAAC,KAAKq1G,GAAG,CAACb,IAAV,IAAkBx0G,CAAC,KAAKq1G,GAAG,CAACh9B,IAA5B,IACJu9B,eAAe,CAAEl6G,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACmJ,CAAT,EAAYpJ,CAAC,CAACkJ,CAAd,EAAiBlJ,CAAC,CAACoJ,CAAnB,EAAsB1E,CAAC,CAACwE,CAAxB,EAA2BxE,CAAC,CAAC0E,CAA7B,EAAgC7E,CAAC,CAAC2E,CAAlC,EAAqC3E,CAAC,CAAC6E,CAAvC,CADX,IAEJuwG,IAAI,CAAEp1G,CAAC,CAACw0G,IAAJ,EAAUx0G,CAAV,EAAaA,CAAC,CAACq4E,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClCr4E,IAAAA,CAAC,GAAGA,CAAC,CAACk2G,KAAN;AAEA,QAAKzsF,CAAC,KAAK4rF,GAAG,CAACb,IAAV,IAAkB/qF,CAAC,KAAK4rF,GAAG,CAACh9B,IAA5B,IACJu9B,eAAe,CAAEl6G,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACmJ,CAAT,EAAYpJ,CAAC,CAACkJ,CAAd,EAAiBlJ,CAAC,CAACoJ,CAAnB,EAAsB1E,CAAC,CAACwE,CAAxB,EAA2BxE,CAAC,CAAC0E,CAA7B,EAAgC4kB,CAAC,CAAC9kB,CAAlC,EAAqC8kB,CAAC,CAAC5kB,CAAvC,CADX,IAEJuwG,IAAI,CAAE3rF,CAAC,CAAC+qF,IAAJ,EAAU/qF,CAAV,EAAaA,CAAC,CAAC4uD,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClC5uD,IAAAA,CAAC,GAAGA,CAAC,CAAC0sF,KAAN;AAEA,GAlC+C,CAoChD;;;AACA,SAAQn2G,CAAC,IAAIA,CAAC,CAACg3B,CAAF,IAAOuX,IAApB,EAA2B;AAE1B,QAAKvuC,CAAC,KAAKq1G,GAAG,CAACb,IAAV,IAAkBx0G,CAAC,KAAKq1G,GAAG,CAACh9B,IAA5B,IACJu9B,eAAe,CAAEl6G,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACmJ,CAAT,EAAYpJ,CAAC,CAACkJ,CAAd,EAAiBlJ,CAAC,CAACoJ,CAAnB,EAAsB1E,CAAC,CAACwE,CAAxB,EAA2BxE,CAAC,CAAC0E,CAA7B,EAAgC7E,CAAC,CAAC2E,CAAlC,EAAqC3E,CAAC,CAAC6E,CAAvC,CADX,IAEJuwG,IAAI,CAAEp1G,CAAC,CAACw0G,IAAJ,EAAUx0G,CAAV,EAAaA,CAAC,CAACq4E,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClCr4E,IAAAA,CAAC,GAAGA,CAAC,CAACk2G,KAAN;AAEA,GA5C+C,CA8ChD;;;AACA,SAAQzsF,CAAC,IAAIA,CAAC,CAACuN,CAAF,IAAO0X,IAApB,EAA2B;AAE1B,QAAKjlB,CAAC,KAAK4rF,GAAG,CAACb,IAAV,IAAkB/qF,CAAC,KAAK4rF,GAAG,CAACh9B,IAA5B,IACJu9B,eAAe,CAAEl6G,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACmJ,CAAT,EAAYpJ,CAAC,CAACkJ,CAAd,EAAiBlJ,CAAC,CAACoJ,CAAnB,EAAsB1E,CAAC,CAACwE,CAAxB,EAA2BxE,CAAC,CAAC0E,CAA7B,EAAgC4kB,CAAC,CAAC9kB,CAAlC,EAAqC8kB,CAAC,CAAC5kB,CAAvC,CADX,IAEJuwG,IAAI,CAAE3rF,CAAC,CAAC+qF,IAAJ,EAAU/qF,CAAV,EAAaA,CAAC,CAAC4uD,IAAf,CAAJ,IAA6B,CAF9B,EAEkC,OAAO,KAAP;AAClC5uD,IAAAA,CAAC,GAAGA,CAAC,CAAC0sF,KAAN;AAEA;;AAED,SAAO,IAAP;AAEA,EAED;;;AACA,SAAST,sBAAT,CAAiC5/D,KAAjC,EAAwCw7B,SAAxC,EAAmD6iC,GAAnD,EAAyD;AAExD,MAAIn0G,CAAC,GAAG81C,KAAR;;AACA,KAAG;AAEF,QAAIp6C,CAAC,GAAGsE,CAAC,CAACw0G,IAAV;AAAA,QACC/4G,CAAC,GAAGuE,CAAC,CAACq4E,IAAF,CAAOA,IADZ;;AAGA,QAAK,CAAEtpD,MAAM,CAAErzB,CAAF,EAAKD,CAAL,CAAR,IAAoBowD,UAAU,CAAEnwD,CAAF,EAAKsE,CAAL,EAAQA,CAAC,CAACq4E,IAAV,EAAgB58E,CAAhB,CAA9B,IAAqD26G,aAAa,CAAE16G,CAAF,EAAKD,CAAL,CAAlE,IAA8E26G,aAAa,CAAE36G,CAAF,EAAKC,CAAL,CAAhG,EAA2G;AAE1G41E,MAAAA,SAAS,CAAC7qE,IAAV,CAAgB/K,CAAC,CAAC4B,CAAF,GAAM62G,GAAtB;AACA7iC,MAAAA,SAAS,CAAC7qE,IAAV,CAAgBzG,CAAC,CAAC1C,CAAF,GAAM62G,GAAtB;AACA7iC,MAAAA,SAAS,CAAC7qE,IAAV,CAAgBhL,CAAC,CAAC6B,CAAF,GAAM62G,GAAtB,EAJ0G,CAM1G;;AACAa,MAAAA,UAAU,CAAEh1G,CAAF,CAAV;AACAg1G,MAAAA,UAAU,CAAEh1G,CAAC,CAACq4E,IAAJ,CAAV;AAEAr4E,MAAAA,CAAC,GAAG81C,KAAK,GAAGr6C,CAAZ;AAEA;;AAEDuE,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GArBD,QAqBUr4E,CAAC,KAAK81C,KArBhB;;AAuBA,SAAOm/D,YAAY,CAAEj1G,CAAF,CAAnB;AAEA,EAED;;;AACA,SAAS21G,WAAT,CAAsB7/D,KAAtB,EAA6Bw7B,SAA7B,EAAwC6iC,GAAxC,EAA6C9lE,IAA7C,EAAmDC,IAAnD,EAAyDmmE,OAAzD,EAAmE;AAElE;AACA,MAAI/4G,CAAC,GAAGo6C,KAAR;;AACA,KAAG;AAEF,QAAIr6C,CAAC,GAAGC,CAAC,CAAC28E,IAAF,CAAOA,IAAf;;AACA,WAAQ58E,CAAC,KAAKC,CAAC,CAAC84G,IAAhB,EAAuB;AAEtB,UAAK94G,CAAC,CAAC4B,CAAF,KAAQ7B,CAAC,CAAC6B,CAAV,IAAe+4G,eAAe,CAAE36G,CAAF,EAAKD,CAAL,CAAnC,EAA8C;AAE7C;AACA,YAAI0E,CAAC,GAAGm2G,YAAY,CAAE56G,CAAF,EAAKD,CAAL,CAApB,CAH6C,CAK7C;;AACAC,QAAAA,CAAC,GAAGu5G,YAAY,CAAEv5G,CAAF,EAAKA,CAAC,CAAC28E,IAAP,CAAhB;AACAl4E,QAAAA,CAAC,GAAG80G,YAAY,CAAE90G,CAAF,EAAKA,CAAC,CAACk4E,IAAP,CAAhB,CAP6C,CAS7C;;AACAs8B,QAAAA,YAAY,CAAEj5G,CAAF,EAAK41E,SAAL,EAAgB6iC,GAAhB,EAAqB9lE,IAArB,EAA2BC,IAA3B,EAAiCmmE,OAAjC,CAAZ;AACAE,QAAAA,YAAY,CAAEx0G,CAAF,EAAKmxE,SAAL,EAAgB6iC,GAAhB,EAAqB9lE,IAArB,EAA2BC,IAA3B,EAAiCmmE,OAAjC,CAAZ;AACA;AAEA;;AAEDh5G,MAAAA,CAAC,GAAGA,CAAC,CAAC48E,IAAN;AAEA;;AAED38E,IAAAA,CAAC,GAAGA,CAAC,CAAC28E,IAAN;AAEA,GA3BD,QA2BU38E,CAAC,KAAKo6C,KA3BhB;AA6BA,EAED;;;AACA,SAAS4+D,cAAT,CAAyBjoE,IAAzB,EAA+BynE,WAA/B,EAA4CI,SAA5C,EAAuDH,GAAvD,EAA6D;AAE5D,MAAIoC,KAAK,GAAG,EAAZ;AAAA,MACCj5G,CADD;AAAA,MACI29B,GADJ;AAAA,MACS6a,KADT;AAAA,MACgBI,GADhB;AAAA,MACqBwuC,IADrB;;AAGA,OAAMpnF,CAAC,GAAG,CAAJ,EAAO29B,GAAG,GAAGi5E,WAAW,CAACj4G,MAA/B,EAAuCqB,CAAC,GAAG29B,GAA3C,EAAgD39B,CAAC,EAAjD,EAAuD;AAEtDw4C,IAAAA,KAAK,GAAGo+D,WAAW,CAAE52G,CAAF,CAAX,GAAmB62G,GAA3B;AACAj+D,IAAAA,GAAG,GAAG54C,CAAC,GAAG29B,GAAG,GAAG,CAAV,GAAci5E,WAAW,CAAE52G,CAAC,GAAG,CAAN,CAAX,GAAuB62G,GAArC,GAA2C1nE,IAAI,CAACxwC,MAAtD;AACAyoF,IAAAA,IAAI,GAAG6vB,UAAU,CAAE9nE,IAAF,EAAQqJ,KAAR,EAAeI,GAAf,EAAoBi+D,GAApB,EAAyB,KAAzB,CAAjB;AACA,QAAKzvB,IAAI,KAAKA,IAAI,CAACrM,IAAnB,EAA0BqM,IAAI,CAACywB,OAAL,GAAe,IAAf;AAC1BoB,IAAAA,KAAK,CAAC9vG,IAAN,CAAY+vG,WAAW,CAAE9xB,IAAF,CAAvB;AAEA;;AAED6xB,EAAAA,KAAK,CAAC1mD,IAAN,CAAY4mD,QAAZ,EAf4D,CAiB5D;;AACA,OAAMn5G,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGi5G,KAAK,CAACt6G,MAAvB,EAA+BqB,CAAC,EAAhC,EAAsC;AAErCo5G,IAAAA,aAAa,CAAEH,KAAK,CAAEj5G,CAAF,CAAP,EAAcg3G,SAAd,CAAb;AACAA,IAAAA,SAAS,GAAGW,YAAY,CAAEX,SAAF,EAAaA,SAAS,CAACj8B,IAAvB,CAAxB;AAEA;;AAED,SAAOi8B,SAAP;AAEA;;AAED,SAASmC,QAAT,CAAmB/6G,CAAnB,EAAsBD,CAAtB,EAA0B;AAEzB,SAAOC,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAf;AAEA,EAED;;;AACA,SAAS+xG,aAAT,CAAwBC,IAAxB,EAA8BrC,SAA9B,EAA0C;AAEzCA,EAAAA,SAAS,GAAGsC,cAAc,CAAED,IAAF,EAAQrC,SAAR,CAA1B;;AACA,MAAKA,SAAL,EAAiB;AAEhB,UAAM74G,CAAC,GAAG66G,YAAY,CAAEhC,SAAF,EAAaqC,IAAb,CAAtB,CAFgB,CAIhB;;AACA1B,IAAAA,YAAY,CAAEX,SAAF,EAAaA,SAAS,CAACj8B,IAAvB,CAAZ;AACA48B,IAAAA,YAAY,CAAEx5G,CAAF,EAAKA,CAAC,CAAC48E,IAAP,CAAZ;AAEA;AAED,EAED;;;AACA,SAASu+B,cAAT,CAAyBD,IAAzB,EAA+BrC,SAA/B,EAA2C;AAE1C,MAAIt0G,CAAC,GAAGs0G,SAAR;AAAA,MACCuC,EAAE,GAAGF,IAAI,CAAChyG,CADX;AAAA,MAECmyG,EAAE,GAAGH,IAAI,CAAC9xG,CAFX;AAAA,MAGCw5B,EAAE,GAAG,CAAE6P,QAHR;AAAA,MAICxkB,CAJD,CAF0C,CAQ1C;AACA;;AACA,KAAG;AAEF,QAAKotF,EAAE,IAAI92G,CAAC,CAAC6E,CAAR,IAAaiyG,EAAE,IAAI92G,CAAC,CAACq4E,IAAF,CAAOxzE,CAA1B,IAA+B7E,CAAC,CAACq4E,IAAF,CAAOxzE,CAAP,KAAa7E,CAAC,CAAC6E,CAAnD,EAAuD;AAEtD,UAAIF,CAAC,GAAG3E,CAAC,CAAC2E,CAAF,GAAM,CAAEmyG,EAAE,GAAG92G,CAAC,CAAC6E,CAAT,KAAiB7E,CAAC,CAACq4E,IAAF,CAAO1zE,CAAP,GAAW3E,CAAC,CAAC2E,CAA9B,KAAsC3E,CAAC,CAACq4E,IAAF,CAAOxzE,CAAP,GAAW7E,CAAC,CAAC6E,CAAnD,CAAd;;AACA,UAAKF,CAAC,IAAIkyG,EAAL,IAAWlyG,CAAC,GAAG05B,EAApB,EAAyB;AAExBA,QAAAA,EAAE,GAAG15B,CAAL;;AACA,YAAKA,CAAC,KAAKkyG,EAAX,EAAgB;AAEf,cAAKC,EAAE,KAAK92G,CAAC,CAAC6E,CAAd,EAAkB,OAAO7E,CAAP;AAClB,cAAK82G,EAAE,KAAK92G,CAAC,CAACq4E,IAAF,CAAOxzE,CAAnB,EAAuB,OAAO7E,CAAC,CAACq4E,IAAT;AAEvB;;AAED3uD,QAAAA,CAAC,GAAG1pB,CAAC,CAAC2E,CAAF,GAAM3E,CAAC,CAACq4E,IAAF,CAAO1zE,CAAb,GAAiB3E,CAAjB,GAAqBA,CAAC,CAACq4E,IAA3B;AAEA;AAED;;AAEDr4E,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GAvBD,QAuBUr4E,CAAC,KAAKs0G,SAvBhB;;AAyBA,MAAK,CAAE5qF,CAAP,EAAW,OAAO,IAAP;AAEX,MAAKmtF,EAAE,KAAKx4E,EAAZ,EAAiB,OAAO3U,CAAP,CArCyB,CAqCf;AAE3B;AACA;AACA;;AAEA,MAAI8yC,IAAI,GAAG9yC,CAAX;AAAA,MACCqtF,EAAE,GAAGrtF,CAAC,CAAC/kB,CADR;AAAA,MAECqyG,EAAE,GAAGttF,CAAC,CAAC7kB,CAFR;AAAA,MAGCoyG,MAAM,GAAG/oE,QAHV;AAAA,MAIC8mB,GAJD;AAMAh1D,EAAAA,CAAC,GAAG0pB,CAAJ;;AAEA,KAAG;AAEF,QAAKmtF,EAAE,IAAI72G,CAAC,CAAC2E,CAAR,IAAa3E,CAAC,CAAC2E,CAAF,IAAOoyG,EAApB,IAA0BF,EAAE,KAAK72G,CAAC,CAAC2E,CAAnC,IACHixG,eAAe,CAAEkB,EAAE,GAAGE,EAAL,GAAUH,EAAV,GAAex4E,EAAjB,EAAqBy4E,EAArB,EAAyBC,EAAzB,EAA6BC,EAA7B,EAAiCF,EAAE,GAAGE,EAAL,GAAU34E,EAAV,GAAew4E,EAAhD,EAAoDC,EAApD,EAAwD92G,CAAC,CAAC2E,CAA1D,EAA6D3E,CAAC,CAAC6E,CAA/D,CADjB,EACsF;AAErFmwD,MAAAA,GAAG,GAAG15D,IAAI,CAACwO,GAAL,CAAUgtG,EAAE,GAAG92G,CAAC,CAAC6E,CAAjB,KAAyBgyG,EAAE,GAAG72G,CAAC,CAAC2E,CAAhC,CAAN,CAFqF,CAE1C;;AAE3C,UAAKyxG,aAAa,CAAEp2G,CAAF,EAAK22G,IAAL,CAAb,KAA8B3hD,GAAG,GAAGiiD,MAAN,IAAkBjiD,GAAG,KAAKiiD,MAAR,KAAoBj3G,CAAC,CAAC2E,CAAF,GAAM+kB,CAAC,CAAC/kB,CAAR,IAAe3E,CAAC,CAAC2E,CAAF,KAAQ+kB,CAAC,CAAC/kB,CAAV,IAAeuyG,oBAAoB,CAAExtF,CAAF,EAAK1pB,CAAL,CAAtE,CAAhD,CAAL,EAA8I;AAE7I0pB,QAAAA,CAAC,GAAG1pB,CAAJ;AACAi3G,QAAAA,MAAM,GAAGjiD,GAAT;AAEA;AAED;;AAEDh1D,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GAlBD,QAkBUr4E,CAAC,KAAKw8D,IAlBhB;;AAoBA,SAAO9yC,CAAP;AAEA,EAED;;;AACA,SAASwtF,oBAAT,CAA+BxtF,CAA/B,EAAkC1pB,CAAlC,EAAsC;AAErC,SAAOo1G,IAAI,CAAE1rF,CAAC,CAAC8qF,IAAJ,EAAU9qF,CAAV,EAAa1pB,CAAC,CAACw0G,IAAf,CAAJ,GAA4B,CAA5B,IAAiCY,IAAI,CAAEp1G,CAAC,CAACq4E,IAAJ,EAAU3uD,CAAV,EAAaA,CAAC,CAAC2uD,IAAf,CAAJ,GAA4B,CAApE;AAEA,EAED;;;AACA,SAASk9B,UAAT,CAAqBz/D,KAArB,EAA4BzH,IAA5B,EAAkCC,IAAlC,EAAwCmmE,OAAxC,EAAkD;AAEjD,MAAIz0G,CAAC,GAAG81C,KAAR;;AACA,KAAG;AAEF,QAAK91C,CAAC,CAACg3B,CAAF,KAAQ,IAAb,EAAoBh3B,CAAC,CAACg3B,CAAF,GAAMi/E,MAAM,CAAEj2G,CAAC,CAAC2E,CAAJ,EAAO3E,CAAC,CAAC6E,CAAT,EAAYwpC,IAAZ,EAAkBC,IAAlB,EAAwBmmE,OAAxB,CAAZ;AACpBz0G,IAAAA,CAAC,CAACk2G,KAAF,GAAUl2G,CAAC,CAACw0G,IAAZ;AACAx0G,IAAAA,CAAC,CAACm2G,KAAF,GAAUn2G,CAAC,CAACq4E,IAAZ;AACAr4E,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GAPD,QAOUr4E,CAAC,KAAK81C,KAPhB;;AASA91C,EAAAA,CAAC,CAACk2G,KAAF,CAAQC,KAAR,GAAgB,IAAhB;AACAn2G,EAAAA,CAAC,CAACk2G,KAAF,GAAU,IAAV;AAEAiB,EAAAA,UAAU,CAAEn3G,CAAF,CAAV;AAEA,EAED;AACA;;;AACA,SAASm3G,UAAT,CAAqBzyB,IAArB,EAA4B;AAE3B,MAAIpnF,CAAJ;AAAA,MAAO0C,CAAP;AAAA,MAAUC,CAAV;AAAA,MAAa4C,CAAb;AAAA,MAAgBu0G,IAAhB;AAAA,MAAsBC,SAAtB;AAAA,MAAiCC,KAAjC;AAAA,MAAwCC,KAAxC;AAAA,MACCC,MAAM,GAAG,CADV;;AAGA,KAAG;AAEFx3G,IAAAA,CAAC,GAAG0kF,IAAJ;AACAA,IAAAA,IAAI,GAAG,IAAP;AACA0yB,IAAAA,IAAI,GAAG,IAAP;AACAC,IAAAA,SAAS,GAAG,CAAZ;;AAEA,WAAQr3G,CAAR,EAAY;AAEXq3G,MAAAA,SAAS;AACTp3G,MAAAA,CAAC,GAAGD,CAAJ;AACAs3G,MAAAA,KAAK,GAAG,CAAR;;AACA,WAAMh6G,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGk6G,MAAjB,EAAyBl6G,CAAC,EAA1B,EAAgC;AAE/Bg6G,QAAAA,KAAK;AACLr3G,QAAAA,CAAC,GAAGA,CAAC,CAACk2G,KAAN;AACA,YAAK,CAAEl2G,CAAP,EAAW;AAEX;;AAEDs3G,MAAAA,KAAK,GAAGC,MAAR;;AAEA,aAAQF,KAAK,GAAG,CAAR,IAAeC,KAAK,GAAG,CAAR,IAAat3G,CAApC,EAA0C;AAEzC,YAAKq3G,KAAK,KAAK,CAAV,KAAiBC,KAAK,KAAK,CAAV,IAAe,CAAEt3G,CAAjB,IAAsBD,CAAC,CAACg3B,CAAF,IAAO/2B,CAAC,CAAC+2B,CAAhD,CAAL,EAA2D;AAE1Dn0B,UAAAA,CAAC,GAAG7C,CAAJ;AACAA,UAAAA,CAAC,GAAGA,CAAC,CAACm2G,KAAN;AACAmB,UAAAA,KAAK;AAEL,SAND,MAMO;AAENz0G,UAAAA,CAAC,GAAG5C,CAAJ;AACAA,UAAAA,CAAC,GAAGA,CAAC,CAACk2G,KAAN;AACAoB,UAAAA,KAAK;AAEL;;AAED,YAAKH,IAAL,EAAYA,IAAI,CAACjB,KAAL,GAAatzG,CAAb,CAAZ,KACK6hF,IAAI,GAAG7hF,CAAP;AAELA,QAAAA,CAAC,CAACqzG,KAAF,GAAUkB,IAAV;AACAA,QAAAA,IAAI,GAAGv0G,CAAP;AAEA;;AAED7C,MAAAA,CAAC,GAAGC,CAAJ;AAEA;;AAEDm3G,IAAAA,IAAI,CAACjB,KAAL,GAAa,IAAb;AACAqB,IAAAA,MAAM,IAAI,CAAV;AAEA,GArDD,QAqDUH,SAAS,GAAG,CArDtB;;AAuDA,SAAO3yB,IAAP;AAEA,EAED;;;AACA,SAASuxB,MAAT,CAAiBtxG,CAAjB,EAAoBE,CAApB,EAAuBwpC,IAAvB,EAA6BC,IAA7B,EAAmCmmE,OAAnC,EAA6C;AAE5C;AACA9vG,EAAAA,CAAC,GAAG,SAAUA,CAAC,GAAG0pC,IAAd,IAAuBomE,OAA3B;AACA5vG,EAAAA,CAAC,GAAG,SAAUA,CAAC,GAAGypC,IAAd,IAAuBmmE,OAA3B;AAEA9vG,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AAEAE,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AACAA,EAAAA,CAAC,GAAG,CAAEA,CAAC,GAAKA,CAAC,IAAI,CAAb,IAAqB,UAAzB;AAEA,SAAOF,CAAC,GAAKE,CAAC,IAAI,CAAlB;AAEA,EAED;;;AACA,SAAS2xG,WAAT,CAAsB1gE,KAAtB,EAA8B;AAE7B,MAAI91C,CAAC,GAAG81C,KAAR;AAAA,MACC2hE,QAAQ,GAAG3hE,KADZ;;AAEA,KAAG;AAEF,QAAK91C,CAAC,CAAC2E,CAAF,GAAM8yG,QAAQ,CAAC9yG,CAAf,IAAsB3E,CAAC,CAAC2E,CAAF,KAAQ8yG,QAAQ,CAAC9yG,CAAjB,IAAsB3E,CAAC,CAAC6E,CAAF,GAAM4yG,QAAQ,CAAC5yG,CAAhE,EAAsE4yG,QAAQ,GAAGz3G,CAAX;AACtEA,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GALD,QAKUr4E,CAAC,KAAK81C,KALhB;;AAOA,SAAO2hE,QAAP;AAEA,EAED;;;AACA,SAAS7B,eAAT,CAA0Bt2E,EAA1B,EAA8BC,EAA9B,EAAkCE,EAAlC,EAAsCC,EAAtC,EAA0CnM,EAA1C,EAA8CC,EAA9C,EAAkDkkF,EAAlD,EAAsDC,EAAtD,EAA2D;AAE1D,SAAO,CAAEpkF,EAAE,GAAGmkF,EAAP,KAAgBn4E,EAAE,GAAGo4E,EAArB,IAA4B,CAAEr4E,EAAE,GAAGo4E,EAAP,KAAgBlkF,EAAE,GAAGmkF,EAArB,CAA5B,IAAyD,CAAzD,IACL,CAAEr4E,EAAE,GAAGo4E,EAAP,KAAgBh4E,EAAE,GAAGi4E,EAArB,IAA4B,CAAEl4E,EAAE,GAAGi4E,EAAP,KAAgBn4E,EAAE,GAAGo4E,EAArB,CAA5B,IAAyD,CADpD,IAEL,CAAEl4E,EAAE,GAAGi4E,EAAP,KAAgBlkF,EAAE,GAAGmkF,EAArB,IAA4B,CAAEpkF,EAAE,GAAGmkF,EAAP,KAAgBh4E,EAAE,GAAGi4E,EAArB,CAA5B,IAAyD,CAF3D;AAIA,EAED;;;AACA,SAAStB,eAAT,CAA0B36G,CAA1B,EAA6BD,CAA7B,EAAiC;AAEhC,SAAOC,CAAC,CAAC28E,IAAF,CAAO/6E,CAAP,KAAa7B,CAAC,CAAC6B,CAAf,IAAoB5B,CAAC,CAAC84G,IAAF,CAAOl3G,CAAP,KAAa7B,CAAC,CAAC6B,CAAnC,IAAwC,CAAEs6G,iBAAiB,CAAEl8G,CAAF,EAAKD,CAAL,CAA3D,MAAuE;AAC3E26G,EAAAA,aAAa,CAAE16G,CAAF,EAAKD,CAAL,CAAb,IAAyB26G,aAAa,CAAE36G,CAAF,EAAKC,CAAL,CAAtC,IAAkDm8G,YAAY,CAAEn8G,CAAF,EAAKD,CAAL,CAA9D,MAA0E;AAC1E25G,EAAAA,IAAI,CAAE15G,CAAC,CAAC84G,IAAJ,EAAU94G,CAAV,EAAaD,CAAC,CAAC+4G,IAAf,CAAJ,IAA6BY,IAAI,CAAE15G,CAAF,EAAKD,CAAC,CAAC+4G,IAAP,EAAa/4G,CAAb,CADjC,KACuD;AACzDszB,EAAAA,MAAM,CAAErzB,CAAF,EAAKD,CAAL,CAAN,IAAkB25G,IAAI,CAAE15G,CAAC,CAAC84G,IAAJ,EAAU94G,CAAV,EAAaA,CAAC,CAAC28E,IAAf,CAAJ,GAA4B,CAA9C,IAAmD+8B,IAAI,CAAE35G,CAAC,CAAC+4G,IAAJ,EAAU/4G,CAAV,EAAaA,CAAC,CAAC48E,IAAf,CAAJ,GAA4B,CAHzE,CAAP,CAFgC,CAKqD;AAErF,EAED;;;AACA,SAAS+8B,IAAT,CAAep1G,CAAf,EAAkBC,CAAlB,EAAqB5E,CAArB,EAAyB;AAExB,SAAO,CAAE4E,CAAC,CAAC4E,CAAF,GAAM7E,CAAC,CAAC6E,CAAV,KAAkBxJ,CAAC,CAACsJ,CAAF,GAAM1E,CAAC,CAAC0E,CAA1B,IAAgC,CAAE1E,CAAC,CAAC0E,CAAF,GAAM3E,CAAC,CAAC2E,CAAV,KAAkBtJ,CAAC,CAACwJ,CAAF,GAAM5E,CAAC,CAAC4E,CAA1B,CAAvC;AAEA,EAED;;;AACA,SAASkqB,MAAT,CAAiBsiB,EAAjB,EAAqBC,EAArB,EAA0B;AAEzB,SAAOD,EAAE,CAAC1sC,CAAH,KAAS2sC,EAAE,CAAC3sC,CAAZ,IAAiB0sC,EAAE,CAACxsC,CAAH,KAASysC,EAAE,CAACzsC,CAApC;AAEA,EAED;;;AACA,SAASgnD,UAAT,CAAqBxa,EAArB,EAAyBymE,EAAzB,EAA6BxmE,EAA7B,EAAiCymE,EAAjC,EAAsC;AAErC,QAAM3sG,EAAE,GAAG6P,IAAI,CAAEm6F,IAAI,CAAE/jE,EAAF,EAAMymE,EAAN,EAAUxmE,EAAV,CAAN,CAAf;AACA,QAAMjmC,EAAE,GAAG4P,IAAI,CAAEm6F,IAAI,CAAE/jE,EAAF,EAAMymE,EAAN,EAAUC,EAAV,CAAN,CAAf;AACA,QAAMC,EAAE,GAAG/8F,IAAI,CAAEm6F,IAAI,CAAE9jE,EAAF,EAAMymE,EAAN,EAAU1mE,EAAV,CAAN,CAAf;AACA,QAAM4mE,EAAE,GAAGh9F,IAAI,CAAEm6F,IAAI,CAAE9jE,EAAF,EAAMymE,EAAN,EAAUD,EAAV,CAAN,CAAf;AAEA,MAAK1sG,EAAE,KAAKC,EAAP,IAAa2sG,EAAE,KAAKC,EAAzB,EAA8B,OAAO,IAAP,CAPO,CAOM;;AAE3C,MAAK7sG,EAAE,KAAK,CAAP,IAAY8sG,SAAS,CAAE7mE,EAAF,EAAMC,EAAN,EAAUwmE,EAAV,CAA1B,EAA2C,OAAO,IAAP,CATN,CASmB;;AACxD,MAAKzsG,EAAE,KAAK,CAAP,IAAY6sG,SAAS,CAAE7mE,EAAF,EAAM0mE,EAAN,EAAUD,EAAV,CAA1B,EAA2C,OAAO,IAAP,CAVN,CAUmB;;AACxD,MAAKE,EAAE,KAAK,CAAP,IAAYE,SAAS,CAAE5mE,EAAF,EAAMD,EAAN,EAAU0mE,EAAV,CAA1B,EAA2C,OAAO,IAAP,CAXN,CAWmB;;AACxD,MAAKE,EAAE,KAAK,CAAP,IAAYC,SAAS,CAAE5mE,EAAF,EAAMwmE,EAAN,EAAUC,EAAV,CAA1B,EAA2C,OAAO,IAAP,CAZN,CAYmB;;AAExD,SAAO,KAAP;AAEA,EAED;;;AACA,SAASG,SAAT,CAAoBl4G,CAApB,EAAuBC,CAAvB,EAA0B5E,CAA1B,EAA8B;AAE7B,SAAO4E,CAAC,CAAC0E,CAAF,IAAOrJ,IAAI,CAAC+E,GAAL,CAAUL,CAAC,CAAC2E,CAAZ,EAAetJ,CAAC,CAACsJ,CAAjB,CAAP,IAA+B1E,CAAC,CAAC0E,CAAF,IAAOrJ,IAAI,CAAC8E,GAAL,CAAUJ,CAAC,CAAC2E,CAAZ,EAAetJ,CAAC,CAACsJ,CAAjB,CAAtC,IAA8D1E,CAAC,CAAC4E,CAAF,IAAOvJ,IAAI,CAAC+E,GAAL,CAAUL,CAAC,CAAC6E,CAAZ,EAAexJ,CAAC,CAACwJ,CAAjB,CAArE,IAA6F5E,CAAC,CAAC4E,CAAF,IAAOvJ,IAAI,CAAC8E,GAAL,CAAUJ,CAAC,CAAC6E,CAAZ,EAAexJ,CAAC,CAACwJ,CAAjB,CAA3G;AAEA;;AAED,SAASoW,IAAT,CAAek9F,GAAf,EAAqB;AAEpB,SAAOA,GAAG,GAAG,CAAN,GAAU,CAAV,GAAcA,GAAG,GAAG,CAAN,GAAU,CAAE,CAAZ,GAAgB,CAArC;AAEA,EAED;;;AACA,SAASP,iBAAT,CAA4Bl8G,CAA5B,EAA+BD,CAA/B,EAAmC;AAElC,MAAIuE,CAAC,GAAGtE,CAAR;;AACA,KAAG;AAEF,QAAKsE,CAAC,CAAC1C,CAAF,KAAQ5B,CAAC,CAAC4B,CAAV,IAAe0C,CAAC,CAACq4E,IAAF,CAAO/6E,CAAP,KAAa5B,CAAC,CAAC4B,CAA9B,IAAmC0C,CAAC,CAAC1C,CAAF,KAAQ7B,CAAC,CAAC6B,CAA7C,IAAkD0C,CAAC,CAACq4E,IAAF,CAAO/6E,CAAP,KAAa7B,CAAC,CAAC6B,CAAjE,IACHuuD,UAAU,CAAE7rD,CAAF,EAAKA,CAAC,CAACq4E,IAAP,EAAa38E,CAAb,EAAgBD,CAAhB,CADZ,EACkC,OAAO,IAAP;AAClCuE,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GAND,QAMUr4E,CAAC,KAAKtE,CANhB;;AAQA,SAAO,KAAP;AAEA,EAED;;;AACA,SAAS06G,aAAT,CAAwB16G,CAAxB,EAA2BD,CAA3B,EAA+B;AAE9B,SAAO25G,IAAI,CAAE15G,CAAC,CAAC84G,IAAJ,EAAU94G,CAAV,EAAaA,CAAC,CAAC28E,IAAf,CAAJ,GAA4B,CAA5B,GACN+8B,IAAI,CAAE15G,CAAF,EAAKD,CAAL,EAAQC,CAAC,CAAC28E,IAAV,CAAJ,IAAwB,CAAxB,IAA6B+8B,IAAI,CAAE15G,CAAF,EAAKA,CAAC,CAAC84G,IAAP,EAAa/4G,CAAb,CAAJ,IAAwB,CAD/C,GAEN25G,IAAI,CAAE15G,CAAF,EAAKD,CAAL,EAAQC,CAAC,CAAC84G,IAAV,CAAJ,GAAuB,CAAvB,IAA4BY,IAAI,CAAE15G,CAAF,EAAKA,CAAC,CAAC28E,IAAP,EAAa58E,CAAb,CAAJ,GAAuB,CAFpD;AAIA,EAED;;;AACA,SAASo8G,YAAT,CAAuBn8G,CAAvB,EAA0BD,CAA1B,EAA8B;AAE7B,MAAIuE,CAAC,GAAGtE,CAAR;AAAA,MACC08G,MAAM,GAAG,KADV;AAAA,MAECV,EAAE,GAAG,CAAEh8G,CAAC,CAACiJ,CAAF,GAAMlJ,CAAC,CAACkJ,CAAV,IAAgB,CAFtB;AAAA,MAGCgzG,EAAE,GAAG,CAAEj8G,CAAC,CAACmJ,CAAF,GAAMpJ,CAAC,CAACoJ,CAAV,IAAgB,CAHtB;;AAIA,KAAG;AAEF,QAAS7E,CAAC,CAAC6E,CAAF,GAAM8yG,EAAR,KAAmB33G,CAAC,CAACq4E,IAAF,CAAOxzE,CAAP,GAAW8yG,EAAhC,IAA0C33G,CAAC,CAACq4E,IAAF,CAAOxzE,CAAP,KAAa7E,CAAC,CAAC6E,CAAzD,IACD6yG,EAAE,GAAG,CAAE13G,CAAC,CAACq4E,IAAF,CAAO1zE,CAAP,GAAW3E,CAAC,CAAC2E,CAAf,KAAuBgzG,EAAE,GAAG33G,CAAC,CAAC6E,CAA9B,KAAsC7E,CAAC,CAACq4E,IAAF,CAAOxzE,CAAP,GAAW7E,CAAC,CAAC6E,CAAnD,IAAyD7E,CAAC,CAAC2E,CADpE,EAECyzG,MAAM,GAAG,CAAEA,MAAX;AACDp4G,IAAAA,CAAC,GAAGA,CAAC,CAACq4E,IAAN;AAEA,GAPD,QAOUr4E,CAAC,KAAKtE,CAPhB;;AASA,SAAO08G,MAAP;AAEA,EAED;AACA;;;AACA,SAAS9B,YAAT,CAAuB56G,CAAvB,EAA0BD,CAA1B,EAA8B;AAE7B,MAAIouB,EAAE,GAAG,IAAIwuF,IAAJ,CAAU38G,CAAC,CAAC4B,CAAZ,EAAe5B,CAAC,CAACiJ,CAAjB,EAAoBjJ,CAAC,CAACmJ,CAAtB,CAAT;AAAA,MACCklB,EAAE,GAAG,IAAIsuF,IAAJ,CAAU58G,CAAC,CAAC6B,CAAZ,EAAe7B,CAAC,CAACkJ,CAAjB,EAAoBlJ,CAAC,CAACoJ,CAAtB,CADN;AAAA,MAECyzG,EAAE,GAAG58G,CAAC,CAAC28E,IAFR;AAAA,MAGCkgC,EAAE,GAAG98G,CAAC,CAAC+4G,IAHR;AAKA94G,EAAAA,CAAC,CAAC28E,IAAF,GAAS58E,CAAT;AACAA,EAAAA,CAAC,CAAC+4G,IAAF,GAAS94G,CAAT;AAEAmuB,EAAAA,EAAE,CAACwuD,IAAH,GAAUigC,EAAV;AACAA,EAAAA,EAAE,CAAC9D,IAAH,GAAU3qF,EAAV;AAEAE,EAAAA,EAAE,CAACsuD,IAAH,GAAUxuD,EAAV;AACAA,EAAAA,EAAE,CAAC2qF,IAAH,GAAUzqF,EAAV;AAEAwuF,EAAAA,EAAE,CAAClgC,IAAH,GAAUtuD,EAAV;AACAA,EAAAA,EAAE,CAACyqF,IAAH,GAAU+D,EAAV;AAEA,SAAOxuF,EAAP;AAEA,EAED;;;AACA,SAASgrF,UAAT,CAAqBz3G,CAArB,EAAwBqH,CAAxB,EAA2BE,CAA3B,EAA8BgwG,IAA9B,EAAqC;AAEpC,QAAM70G,CAAC,GAAG,IAAIq4G,IAAJ,CAAU/6G,CAAV,EAAaqH,CAAb,EAAgBE,CAAhB,CAAV;;AAEA,MAAK,CAAEgwG,IAAP,EAAc;AAEb70G,IAAAA,CAAC,CAACw0G,IAAF,GAASx0G,CAAT;AACAA,IAAAA,CAAC,CAACq4E,IAAF,GAASr4E,CAAT;AAEA,GALD,MAKO;AAENA,IAAAA,CAAC,CAACq4E,IAAF,GAASw8B,IAAI,CAACx8B,IAAd;AACAr4E,IAAAA,CAAC,CAACw0G,IAAF,GAASK,IAAT;AACAA,IAAAA,IAAI,CAACx8B,IAAL,CAAUm8B,IAAV,GAAiBx0G,CAAjB;AACA60G,IAAAA,IAAI,CAACx8B,IAAL,GAAYr4E,CAAZ;AAEA;;AAED,SAAOA,CAAP;AAEA;;AAED,SAASg1G,UAAT,CAAqBh1G,CAArB,EAAyB;AAExBA,EAAAA,CAAC,CAACq4E,IAAF,CAAOm8B,IAAP,GAAcx0G,CAAC,CAACw0G,IAAhB;AACAx0G,EAAAA,CAAC,CAACw0G,IAAF,CAAOn8B,IAAP,GAAcr4E,CAAC,CAACq4E,IAAhB;AAEA,MAAKr4E,CAAC,CAACk2G,KAAP,EAAel2G,CAAC,CAACk2G,KAAF,CAAQC,KAAR,GAAgBn2G,CAAC,CAACm2G,KAAlB;AACf,MAAKn2G,CAAC,CAACm2G,KAAP,EAAen2G,CAAC,CAACm2G,KAAF,CAAQD,KAAR,GAAgBl2G,CAAC,CAACk2G,KAAlB;AAEf;;AAED,SAASmC,IAAT,CAAe/6G,CAAf,EAAkBqH,CAAlB,EAAqBE,CAArB,EAAyB;AAExB;AACA,OAAKvH,CAAL,GAASA,CAAT,CAHwB,CAKxB;;AACA,OAAKqH,CAAL,GAASA,CAAT;AACA,OAAKE,CAAL,GAASA,CAAT,CAPwB,CASxB;;AACA,OAAK2vG,IAAL,GAAY,IAAZ;AACA,OAAKn8B,IAAL,GAAY,IAAZ,CAXwB,CAaxB;;AACA,OAAKrhD,CAAL,GAAS,IAAT,CAdwB,CAgBxB;;AACA,OAAKk/E,KAAL,GAAa,IAAb;AACA,OAAKC,KAAL,GAAa,IAAb,CAlBwB,CAoBxB;;AACA,OAAKhB,OAAL,GAAe,KAAf;AAEA;;AAED,SAASL,UAAT,CAAqBroE,IAArB,EAA2BqJ,KAA3B,EAAkCI,GAAlC,EAAuCi+D,GAAvC,EAA6C;AAE5C,MAAIqE,GAAG,GAAG,CAAV;;AACA,OAAM,IAAIl7G,CAAC,GAAGw4C,KAAR,EAAe3E,CAAC,GAAG+E,GAAG,GAAGi+D,GAA/B,EAAoC72G,CAAC,GAAG44C,GAAxC,EAA6C54C,CAAC,IAAI62G,GAAlD,EAAwD;AAEvDqE,IAAAA,GAAG,IAAI,CAAE/rE,IAAI,CAAE0E,CAAF,CAAJ,GAAY1E,IAAI,CAAEnvC,CAAF,CAAlB,KAA8BmvC,IAAI,CAAEnvC,CAAC,GAAG,CAAN,CAAJ,GAAgBmvC,IAAI,CAAE0E,CAAC,GAAG,CAAN,CAAlD,CAAP;AACAA,IAAAA,CAAC,GAAG7zC,CAAJ;AAEA;;AAED,SAAOk7G,GAAP;AAEA;AAED;;;;;AAIA,MAAMC,UAAU,GAAG;AAElB;AAEArD,EAAAA,IAAI,EAAE,UAAWsD,OAAX,EAAqB;AAE1B,UAAMjvF,CAAC,GAAGivF,OAAO,CAACz8G,MAAlB;AACA,QAAIP,CAAC,GAAG,GAAR;;AAEA,SAAM,IAAIsE,CAAC,GAAGypB,CAAC,GAAG,CAAZ,EAAexpB,CAAC,GAAG,CAAzB,EAA4BA,CAAC,GAAGwpB,CAAhC,EAAmCzpB,CAAC,GAAGC,CAAC,EAAxC,EAA8C;AAE7CvE,MAAAA,CAAC,IAAIg9G,OAAO,CAAE14G,CAAF,CAAP,CAAa2E,CAAb,GAAiB+zG,OAAO,CAAEz4G,CAAF,CAAP,CAAa4E,CAA9B,GAAkC6zG,OAAO,CAAEz4G,CAAF,CAAP,CAAa0E,CAAb,GAAiB+zG,OAAO,CAAE14G,CAAF,CAAP,CAAa6E,CAArE;AAEA;;AAED,WAAOnJ,CAAC,GAAG,GAAX;AAEA,GAjBiB;AAmBlBi9G,EAAAA,WAAW,EAAE,UAAWC,GAAX,EAAiB;AAE7B,WAAOH,UAAU,CAACrD,IAAX,CAAiBwD,GAAjB,IAAyB,CAAhC;AAEA,GAvBiB;AAyBlBC,EAAAA,gBAAgB,EAAE,UAAWH,OAAX,EAAoBI,KAApB,EAA4B;AAE7C,UAAM50D,QAAQ,GAAG,EAAjB,CAF6C,CAExB;;AACrB,UAAMgwD,WAAW,GAAG,EAApB,CAH6C,CAGrB;;AACxB,UAAMjvD,KAAK,GAAG,EAAd,CAJ6C,CAI3B;;AAElB8zD,IAAAA,eAAe,CAAEL,OAAF,CAAf;AACAM,IAAAA,UAAU,CAAE90D,QAAF,EAAYw0D,OAAZ,CAAV,CAP6C,CAS7C;;AAEA,QAAIO,SAAS,GAAGP,OAAO,CAACz8G,MAAxB;AAEA68G,IAAAA,KAAK,CAACz8G,OAAN,CAAe08G,eAAf;;AAEA,SAAM,IAAIz7G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGw7G,KAAK,CAAC78G,MAA3B,EAAmCqB,CAAC,EAApC,EAA0C;AAEzC42G,MAAAA,WAAW,CAACztG,IAAZ,CAAkBwyG,SAAlB;AACAA,MAAAA,SAAS,IAAIH,KAAK,CAAEx7G,CAAF,CAAL,CAAWrB,MAAxB;AACA+8G,MAAAA,UAAU,CAAE90D,QAAF,EAAY40D,KAAK,CAAEx7G,CAAF,CAAjB,CAAV;AAEA,KArB4C,CAuB7C;;;AAEA,UAAMg0E,SAAS,GAAG0iC,MAAM,CAACC,WAAP,CAAoB/vD,QAApB,EAA8BgwD,WAA9B,CAAlB,CAzB6C,CA2B7C;;AAEA,SAAM,IAAI52G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGg0E,SAAS,CAACr1E,MAA/B,EAAuCqB,CAAC,IAAI,CAA5C,EAAgD;AAE/C2nD,MAAAA,KAAK,CAACx+C,IAAN,CAAY6qE,SAAS,CAAC/0E,KAAV,CAAiBe,CAAjB,EAAoBA,CAAC,GAAG,CAAxB,CAAZ;AAEA;;AAED,WAAO2nD,KAAP;AAEA;AA9DiB,CAAnB;;;AAkEA,SAAS8zD,eAAT,CAA0BlqE,MAA1B,EAAmC;AAElC,QAAMnxC,CAAC,GAAGmxC,MAAM,CAAC5yC,MAAjB;;AAEA,MAAKyB,CAAC,GAAG,CAAJ,IAASmxC,MAAM,CAAEnxC,CAAC,GAAG,CAAN,CAAN,CAAgBqxB,MAAhB,CAAwB8f,MAAM,CAAE,CAAF,CAA9B,CAAd,EAAsD;AAErDA,IAAAA,MAAM,CAAC00C,GAAP;AAEA;AAED;;AAED,SAASy1B,UAAT,CAAqB90D,QAArB,EAA+Bw0D,OAA/B,EAAyC;AAExC,OAAM,IAAIp7G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGo7G,OAAO,CAACz8G,MAA7B,EAAqCqB,CAAC,EAAtC,EAA4C;AAE3C4mD,IAAAA,QAAQ,CAACz9C,IAAT,CAAeiyG,OAAO,CAAEp7G,CAAF,CAAP,CAAaqH,CAA5B;AACAu/C,IAAAA,QAAQ,CAACz9C,IAAT,CAAeiyG,OAAO,CAAEp7G,CAAF,CAAP,CAAauH,CAA5B;AAEA;AAED;AAED;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;;AAEA,SAASq0G,eAAT,CAA0B1tE,MAA1B,EAAkCljC,OAAlC,EAA4C;AAE3C6kD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,iBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBV,IAAAA,MAAM,EAAEA,MADS;AAEjBljC,IAAAA,OAAO,EAAEA;AAFQ,GAAlB;AAKA,OAAK+kD,kBAAL,CAAyB,IAAI8rD,qBAAJ,CAA2B3tE,MAA3B,EAAmCljC,OAAnC,CAAzB;AACA,OAAK6mD,aAAL;AAEA;;AAED+pD,eAAe,CAAC98G,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA5B;AACA88G,eAAe,CAAC98G,SAAhB,CAA0BoC,WAA1B,GAAwC06G,eAAxC;;AAEAA,eAAe,CAAC98G,SAAhB,CAA0Bg6B,MAA1B,GAAmC,YAAY;AAE9C,QAAMqW,IAAI,GAAG0gB,QAAQ,CAAC/wD,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,CAAb;AAEA,QAAM6uC,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AACA,QAAMljC,OAAO,GAAG,KAAK4jC,UAAL,CAAgB5jC,OAAhC;AAEA,SAAO8tB,MAAM,CAAEoV,MAAF,EAAUljC,OAAV,EAAmBmkC,IAAnB,CAAb;AAEA,CATD,EAWA;;;AAEA,SAAS0sE,qBAAT,CAAgC3tE,MAAhC,EAAwCljC,OAAxC,EAAkD;AAEjDk+C,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,uBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBV,IAAAA,MAAM,EAAEA,MADS;AAEjBljC,IAAAA,OAAO,EAAEA;AAFQ,GAAlB;AAKAkjC,EAAAA,MAAM,GAAGrvC,KAAK,CAACoC,OAAN,CAAeitC,MAAf,IAA0BA,MAA1B,GAAmC,CAAEA,MAAF,CAA5C;AAEA,QAAM/tC,KAAK,GAAG,IAAd;AAEA,QAAM27G,aAAa,GAAG,EAAtB;AACA,QAAM5U,OAAO,GAAG,EAAhB;;AAEA,OAAM,IAAIlnG,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8tC,MAAM,CAACvvC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,UAAM6uC,KAAK,GAAGX,MAAM,CAAEluC,CAAF,CAApB;AACA+7G,IAAAA,QAAQ,CAAEltE,KAAF,CAAR;AAEA,GAvBgD,CAyBjD;;;AAEA,OAAKpkC,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4Bu1D,aAA5B,EAA2C,CAA3C,CAA/B;AACA,OAAKrxG,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4B2gD,OAA5B,EAAqC,CAArC,CAAzB;AAEA,OAAKl8C,oBAAL,GA9BiD,CAgCjD;;AAEA,WAAS+wD,QAAT,CAAmBltE,KAAnB,EAA2B;AAE1B,UAAMmtE,WAAW,GAAG,EAApB,CAF0B,CAI1B;;AAEA,UAAMC,aAAa,GAAGjxG,OAAO,CAACixG,aAAR,KAA0Bl7G,SAA1B,GAAsCiK,OAAO,CAACixG,aAA9C,GAA8D,EAApF;AACA,UAAMC,KAAK,GAAGlxG,OAAO,CAACkxG,KAAR,KAAkBn7G,SAAlB,GAA8BiK,OAAO,CAACkxG,KAAtC,GAA8C,CAA5D;AACA,QAAIpoD,KAAK,GAAG9oD,OAAO,CAAC8oD,KAAR,KAAkB/yD,SAAlB,GAA8BiK,OAAO,CAAC8oD,KAAtC,GAA8C,GAA1D;AAEA,QAAIqoD,YAAY,GAAGnxG,OAAO,CAACmxG,YAAR,KAAyBp7G,SAAzB,GAAqCiK,OAAO,CAACmxG,YAA7C,GAA4D,IAA/E;AACA,QAAIC,cAAc,GAAGpxG,OAAO,CAACoxG,cAAR,KAA2Br7G,SAA3B,GAAuCiK,OAAO,CAACoxG,cAA/C,GAAgE,CAArF;AACA,QAAIC,SAAS,GAAGrxG,OAAO,CAACqxG,SAAR,KAAsBt7G,SAAtB,GAAkCiK,OAAO,CAACqxG,SAA1C,GAAsDD,cAAc,GAAG,CAAvF;AACA,QAAIE,WAAW,GAAGtxG,OAAO,CAACsxG,WAAR,KAAwBv7G,SAAxB,GAAoCiK,OAAO,CAACsxG,WAA5C,GAA0D,CAA5E;AACA,QAAIC,aAAa,GAAGvxG,OAAO,CAACuxG,aAAR,KAA0Bx7G,SAA1B,GAAsCiK,OAAO,CAACuxG,aAA9C,GAA8D,CAAlF;AAEA,UAAMC,WAAW,GAAGxxG,OAAO,CAACwxG,WAA5B;AAEA,UAAMC,KAAK,GAAGzxG,OAAO,CAAC0xG,WAAR,KAAwB37G,SAAxB,GAAoCiK,OAAO,CAAC0xG,WAA5C,GAA0DC,gBAAxE,CAlB0B,CAoB1B;;AAEA,QAAK3xG,OAAO,CAAC4xG,MAAR,KAAmB77G,SAAxB,EAAoC;AAEnC0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACAolC,MAAAA,KAAK,GAAG9oD,OAAO,CAAC4xG,MAAhB;AAEA,KA3ByB,CA6B1B;;;AAEA,QAAIC,UAAJ;AAAA,QAAgBC,aAAa,GAAG,KAAhC;AACA,QAAIC,UAAJ,EAAgBC,QAAhB,EAA0Br6E,MAA1B,EAAkCs6E,SAAlC;;AAEA,QAAKT,WAAL,EAAmB;AAElBK,MAAAA,UAAU,GAAGL,WAAW,CAACU,eAAZ,CAA6BhB,KAA7B,CAAb;AAEAY,MAAAA,aAAa,GAAG,IAAhB;AACAX,MAAAA,YAAY,GAAG,KAAf,CALkB,CAKI;AAEtB;AAEA;;AAEAY,MAAAA,UAAU,GAAGP,WAAW,CAACrH,mBAAZ,CAAiC+G,KAAjC,EAAwC,KAAxC,CAAb,CAXkB,CAalB;;AAEAc,MAAAA,QAAQ,GAAG,IAAIz8E,OAAJ,EAAX;AACAoC,MAAAA,MAAM,GAAG,IAAIpC,OAAJ,EAAT;AACA08E,MAAAA,SAAS,GAAG,IAAI18E,OAAJ,EAAZ;AAEA,KArDyB,CAuD1B;;;AAEA,QAAK,CAAE47E,YAAP,EAAsB;AAErBI,MAAAA,aAAa,GAAG,CAAhB;AACAH,MAAAA,cAAc,GAAG,CAAjB;AACAC,MAAAA,SAAS,GAAG,CAAZ;AACAC,MAAAA,WAAW,GAAG,CAAd;AAEA,KAhEyB,CAkE1B;;;AAEA,UAAMa,WAAW,GAAGtuE,KAAK,CAACuuE,aAAN,CAAqBnB,aAArB,CAApB;AAEA,QAAIr1D,QAAQ,GAAGu2D,WAAW,CAACtuE,KAA3B;AACA,UAAM2sE,KAAK,GAAG2B,WAAW,CAAC3B,KAA1B;AAEA,UAAM6B,OAAO,GAAG,CAAElC,UAAU,CAACE,WAAX,CAAwBz0D,QAAxB,CAAlB;;AAEA,QAAKy2D,OAAL,EAAe;AAEdz2D,MAAAA,QAAQ,GAAGA,QAAQ,CAACy2D,OAAT,EAAX,CAFc,CAId;;AAEA,WAAM,IAAIh/G,CAAC,GAAG,CAAR,EAAWi/G,EAAE,GAAG9B,KAAK,CAAC78G,MAA5B,EAAoCN,CAAC,GAAGi/G,EAAxC,EAA4Cj/G,CAAC,EAA7C,EAAmD;AAElD,cAAMk/G,KAAK,GAAG/B,KAAK,CAAEn9G,CAAF,CAAnB;;AAEA,YAAK88G,UAAU,CAACE,WAAX,CAAwBkC,KAAxB,CAAL,EAAuC;AAEtC/B,UAAAA,KAAK,CAAEn9G,CAAF,CAAL,GAAak/G,KAAK,CAACF,OAAN,EAAb;AAEA;AAED;AAED;;AAGD,UAAM11D,KAAK,GAAGwzD,UAAU,CAACI,gBAAX,CAA6B30D,QAA7B,EAAuC40D,KAAvC,CAAd;AAEA;;AAEA,UAAMJ,OAAO,GAAGx0D,QAAhB,CApG0B,CAoGA;;AAE1B,SAAM,IAAIvoD,CAAC,GAAG,CAAR,EAAWi/G,EAAE,GAAG9B,KAAK,CAAC78G,MAA5B,EAAoCN,CAAC,GAAGi/G,EAAxC,EAA4Cj/G,CAAC,EAA7C,EAAmD;AAElD,YAAMk/G,KAAK,GAAG/B,KAAK,CAAEn9G,CAAF,CAAnB;AAEAuoD,MAAAA,QAAQ,GAAGA,QAAQ,CAAC7rC,MAAT,CAAiBwiG,KAAjB,CAAX;AAEA;;AAGD,aAASC,QAAT,CAAmBC,EAAnB,EAAuBC,GAAvB,EAA4B9rE,IAA5B,EAAmC;AAElC,UAAK,CAAE8rE,GAAP,EAAajvF,OAAO,CAACyD,KAAR,CAAe,2CAAf;AAEb,aAAOwrF,GAAG,CAACvuF,KAAJ,GAAYS,cAAZ,CAA4BgiB,IAA5B,EAAmCj6B,GAAnC,CAAwC8lG,EAAxC,CAAP;AAEA;;AAED,UAAME,IAAI,GAAG/2D,QAAQ,CAACjoD,MAAtB;AAAA,UAA8Bi/G,IAAI,GAAGj2D,KAAK,CAAChpD,MAA3C,CAvH0B,CA0H1B;;AAGA,aAASk/G,WAAT,CAAsBC,IAAtB,EAA4BC,MAA5B,EAAoCC,MAApC,EAA6C;AAE5C;AACA;AACA;AACA;AACA;AACA;AAEA,UAAIC,SAAJ,EAAeC,SAAf,EAA0BC,SAA1B,CAT4C,CASP;AAErC;AACA;;AAEA,YAAMC,QAAQ,GAAGN,IAAI,CAACz2G,CAAL,GAAS02G,MAAM,CAAC12G,CAAjC;AAAA,YACCg3G,QAAQ,GAAGP,IAAI,CAACv2G,CAAL,GAASw2G,MAAM,CAACx2G,CAD5B;AAEA,YAAM+2G,QAAQ,GAAGN,MAAM,CAAC32G,CAAP,GAAWy2G,IAAI,CAACz2G,CAAjC;AAAA,YACCk3G,QAAQ,GAAGP,MAAM,CAACz2G,CAAP,GAAWu2G,IAAI,CAACv2G,CAD5B;AAGA,YAAMi3G,YAAY,GAAKJ,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAAxD,CAnB4C,CAqB5C;;AACA,YAAMI,UAAU,GAAKL,QAAQ,GAAGG,QAAX,GAAsBF,QAAQ,GAAGC,QAAtD;;AAEA,UAAKtgH,IAAI,CAACwO,GAAL,CAAUiyG,UAAV,IAAyBlhG,MAAM,CAACC,OAArC,EAA+C;AAE9C;AAEA;AAEA,cAAMkhG,UAAU,GAAG1gH,IAAI,CAAC0yB,IAAL,CAAW8tF,YAAX,CAAnB;AACA,cAAMG,UAAU,GAAG3gH,IAAI,CAAC0yB,IAAL,CAAW4tF,QAAQ,GAAGA,QAAX,GAAsBC,QAAQ,GAAGA,QAA5C,CAAnB,CAP8C,CAS9C;;AAEA,cAAMK,aAAa,GAAKb,MAAM,CAAC12G,CAAP,GAAWg3G,QAAQ,GAAGK,UAA9C;AACA,cAAMG,aAAa,GAAKd,MAAM,CAACx2G,CAAP,GAAW62G,QAAQ,GAAGM,UAA9C;AAEA,cAAMI,aAAa,GAAKd,MAAM,CAAC32G,CAAP,GAAWk3G,QAAQ,GAAGI,UAA9C;AACA,cAAMI,aAAa,GAAKf,MAAM,CAACz2G,CAAP,GAAW+2G,QAAQ,GAAGK,UAA9C,CAf8C,CAiB9C;;AAEA,cAAMK,EAAE,GAAG,CAAE,CAAEF,aAAa,GAAGF,aAAlB,IAAoCL,QAApC,GACX,CAAEQ,aAAa,GAAGF,aAAlB,IAAoCP,QAD3B,KAERF,QAAQ,GAAGG,QAAX,GAAsBF,QAAQ,GAAGC,QAFzB,CAAX,CAnB8C,CAuB9C;;AAEAL,QAAAA,SAAS,GAAKW,aAAa,GAAGR,QAAQ,GAAGY,EAA3B,GAAgClB,IAAI,CAACz2G,CAAnD;AACA62G,QAAAA,SAAS,GAAKW,aAAa,GAAGR,QAAQ,GAAGW,EAA3B,GAAgClB,IAAI,CAACv2G,CAAnD,CA1B8C,CA4B9C;AACA;;AACA,cAAM03G,aAAa,GAAKhB,SAAS,GAAGA,SAAZ,GAAwBC,SAAS,GAAGA,SAA5D;;AACA,YAAKe,aAAa,IAAI,CAAtB,EAA0B;AAEzB,iBAAO,IAAItwF,OAAJ,CAAasvF,SAAb,EAAwBC,SAAxB,CAAP;AAEA,SAJD,MAIO;AAENC,UAAAA,SAAS,GAAGngH,IAAI,CAAC0yB,IAAL,CAAWuuF,aAAa,GAAG,CAA3B,CAAZ;AAEA;AAED,OAzCD,MAyCO;AAEN;AAEA,YAAIC,YAAY,GAAG,KAAnB,CAJM,CAIoB;;AAE1B,YAAKd,QAAQ,GAAG7gG,MAAM,CAACC,OAAvB,EAAiC;AAEhC,cAAK8gG,QAAQ,GAAG/gG,MAAM,CAACC,OAAvB,EAAiC;AAEhC0hG,YAAAA,YAAY,GAAG,IAAf;AAEA;AAED,SARD,MAQO;AAEN,cAAKd,QAAQ,GAAG,CAAE7gG,MAAM,CAACC,OAAzB,EAAmC;AAElC,gBAAK8gG,QAAQ,GAAG,CAAE/gG,MAAM,CAACC,OAAzB,EAAmC;AAElC0hG,cAAAA,YAAY,GAAG,IAAf;AAEA;AAED,WARD,MAQO;AAEN,gBAAKlhH,IAAI,CAAC2f,IAAL,CAAW0gG,QAAX,MAA0BrgH,IAAI,CAAC2f,IAAL,CAAW4gG,QAAX,CAA/B,EAAuD;AAEtDW,cAAAA,YAAY,GAAG,IAAf;AAEA;AAED;AAED;;AAED,YAAKA,YAAL,EAAoB;AAEnB;AACAjB,UAAAA,SAAS,GAAG,CAAEI,QAAd;AACAH,UAAAA,SAAS,GAAGE,QAAZ;AACAD,UAAAA,SAAS,GAAGngH,IAAI,CAAC0yB,IAAL,CAAW8tF,YAAX,CAAZ;AAEA,SAPD,MAOO;AAEN;AACAP,UAAAA,SAAS,GAAGG,QAAZ;AACAF,UAAAA,SAAS,GAAGG,QAAZ;AACAF,UAAAA,SAAS,GAAGngH,IAAI,CAAC0yB,IAAL,CAAW8tF,YAAY,GAAG,CAA1B,CAAZ;AAEA;AAED;;AAED,aAAO,IAAI7vF,OAAJ,CAAasvF,SAAS,GAAGE,SAAzB,EAAoCD,SAAS,GAAGC,SAAhD,CAAP;AAEA;;AAGD,UAAMgB,gBAAgB,GAAG,EAAzB;;AAEA,SAAM,IAAIn/G,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG2pE,OAAO,CAACz8G,MAAxB,EAAgCk1C,CAAC,GAAGpC,EAAE,GAAG,CAAzC,EAA4CnsC,CAAC,GAAGtF,CAAC,GAAG,CAA1D,EAA6DA,CAAC,GAAGyxC,EAAjE,EAAqEzxC,CAAC,IAAK6zC,CAAC,EAAN,EAAWvuC,CAAC,EAAlF,EAAwF;AAEvF,UAAKuuC,CAAC,KAAKpC,EAAX,EAAgBoC,CAAC,GAAG,CAAJ;AAChB,UAAKvuC,CAAC,KAAKmsC,EAAX,EAAgBnsC,CAAC,GAAG,CAAJ,CAHuE,CAKvF;AACA;;AAEA65G,MAAAA,gBAAgB,CAAEn/G,CAAF,CAAhB,GAAwB69G,WAAW,CAAEzC,OAAO,CAAEp7G,CAAF,CAAT,EAAgBo7G,OAAO,CAAEvnE,CAAF,CAAvB,EAA8BunE,OAAO,CAAE91G,CAAF,CAArC,CAAnC;AAEA;;AAED,UAAM85G,cAAc,GAAG,EAAvB;AACA,QAAIC,gBAAJ;AAAA,QAAsBC,iBAAiB,GAAGH,gBAAgB,CAACpkG,MAAjB,EAA1C;;AAEA,SAAM,IAAI1c,CAAC,GAAG,CAAR,EAAWi/G,EAAE,GAAG9B,KAAK,CAAC78G,MAA5B,EAAoCN,CAAC,GAAGi/G,EAAxC,EAA4Cj/G,CAAC,EAA7C,EAAmD;AAElD,YAAMk/G,KAAK,GAAG/B,KAAK,CAAEn9G,CAAF,CAAnB;AAEAghH,MAAAA,gBAAgB,GAAG,EAAnB;;AAEA,WAAM,IAAIr/G,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG8rE,KAAK,CAAC5+G,MAAtB,EAA8Bk1C,CAAC,GAAGpC,EAAE,GAAG,CAAvC,EAA0CnsC,CAAC,GAAGtF,CAAC,GAAG,CAAxD,EAA2DA,CAAC,GAAGyxC,EAA/D,EAAmEzxC,CAAC,IAAK6zC,CAAC,EAAN,EAAWvuC,CAAC,EAAhF,EAAsF;AAErF,YAAKuuC,CAAC,KAAKpC,EAAX,EAAgBoC,CAAC,GAAG,CAAJ;AAChB,YAAKvuC,CAAC,KAAKmsC,EAAX,EAAgBnsC,CAAC,GAAG,CAAJ,CAHqE,CAKrF;;AACA+5G,QAAAA,gBAAgB,CAAEr/G,CAAF,CAAhB,GAAwB69G,WAAW,CAAEN,KAAK,CAAEv9G,CAAF,CAAP,EAAcu9G,KAAK,CAAE1pE,CAAF,CAAnB,EAA0B0pE,KAAK,CAAEj4G,CAAF,CAA/B,CAAnC;AAEA;;AAED85G,MAAAA,cAAc,CAACj2G,IAAf,CAAqBk2G,gBAArB;AACAC,MAAAA,iBAAiB,GAAGA,iBAAiB,CAACvkG,MAAlB,CAA0BskG,gBAA1B,CAApB;AAEA,KA7RyB,CAgS1B;;;AAEA,SAAM,IAAIlhH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGo+G,aAArB,EAAoCp+G,CAAC,EAArC,EAA2C;AAE1C;AAEA,YAAMyE,CAAC,GAAGzE,CAAC,GAAGo+G,aAAd;AACA,YAAM7iF,CAAC,GAAG0iF,cAAc,GAAGp+G,IAAI,CAAC8vB,GAAL,CAAUlrB,CAAC,GAAG5E,IAAI,CAACutB,EAAT,GAAc,CAAxB,CAA3B;AACA,YAAMg0F,EAAE,GAAGlD,SAAS,GAAGr+G,IAAI,CAAC+vB,GAAL,CAAUnrB,CAAC,GAAG5E,IAAI,CAACutB,EAAT,GAAc,CAAxB,CAAZ,GAA0C+wF,WAArD,CAN0C,CAQ1C;;AAEA,WAAM,IAAIt8G,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG2pE,OAAO,CAACz8G,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpD,cAAMqG,IAAI,GAAGm3G,QAAQ,CAAEpC,OAAO,CAAEp7G,CAAF,CAAT,EAAgBm/G,gBAAgB,CAAEn/G,CAAF,CAAhC,EAAuCu/G,EAAvC,CAArB;AAEA/gH,QAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAf,EAAkB,CAAEmyB,CAApB,CAAD;AAEA,OAhByC,CAkB1C;;;AAEA,WAAM,IAAIr7B,CAAC,GAAG,CAAR,EAAWi/G,EAAE,GAAG9B,KAAK,CAAC78G,MAA5B,EAAoCN,CAAC,GAAGi/G,EAAxC,EAA4Cj/G,CAAC,EAA7C,EAAmD;AAElD,cAAMk/G,KAAK,GAAG/B,KAAK,CAAEn9G,CAAF,CAAnB;AACAghH,QAAAA,gBAAgB,GAAGD,cAAc,CAAE/gH,CAAF,CAAjC;;AAEA,aAAM,IAAI2B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG8rE,KAAK,CAAC5+G,MAA5B,EAAoCqB,CAAC,GAAGyxC,EAAxC,EAA4CzxC,CAAC,EAA7C,EAAmD;AAElD,gBAAMqG,IAAI,GAAGm3G,QAAQ,CAAED,KAAK,CAAEv9G,CAAF,CAAP,EAAcq/G,gBAAgB,CAAEr/G,CAAF,CAA9B,EAAqCu/G,EAArC,CAArB;AAEA/gH,UAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAf,EAAkB,CAAEmyB,CAApB,CAAD;AAEA;AAED;AAED;;AAED,UAAM6lF,EAAE,GAAGlD,SAAS,GAAGC,WAAvB,CAvU0B,CAyU1B;;AAEA,SAAM,IAAIt8G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG29G,IAArB,EAA2B39G,CAAC,EAA5B,EAAkC;AAEjC,YAAMqG,IAAI,GAAG81G,YAAY,GAAGqB,QAAQ,CAAE52D,QAAQ,CAAE5mD,CAAF,CAAV,EAAiBs/G,iBAAiB,CAAEt/G,CAAF,CAAlC,EAAyCu/G,EAAzC,CAAX,GAA2D34D,QAAQ,CAAE5mD,CAAF,CAA5F;;AAEA,UAAK,CAAE88G,aAAP,EAAuB;AAEtBt+G,QAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAf,EAAkB,CAAlB,CAAD;AAEA,OAJD,MAIO;AAEN;AAEAo7B,QAAAA,MAAM,CAACvT,IAAP,CAAa2tF,UAAU,CAACl2D,OAAX,CAAoB,CAApB,CAAb,EAAuCj3B,cAAvC,CAAuDvpB,IAAI,CAACgB,CAA5D;AACA21G,QAAAA,QAAQ,CAAC5tF,IAAT,CAAe2tF,UAAU,CAAC9H,SAAX,CAAsB,CAAtB,CAAf,EAA2CrlF,cAA3C,CAA2DvpB,IAAI,CAACkB,CAAhE;AAEA01G,QAAAA,SAAS,CAAC7tF,IAAV,CAAgBytF,UAAU,CAAE,CAAF,CAA1B,EAAkCllG,GAAlC,CAAuCgrB,MAAvC,EAAgDhrB,GAAhD,CAAqDqlG,QAArD;AAEAx+G,QAAAA,CAAC,CAAEy+G,SAAS,CAAC51G,CAAZ,EAAe41G,SAAS,CAAC11G,CAAzB,EAA4B01G,SAAS,CAACvjF,CAAtC,CAAD;AAEA;AAED,KAhWyB,CAkW1B;AACA;;;AAEA,SAAM,IAAIp7B,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI49G,KAAtB,EAA6B59G,CAAC,EAA9B,EAAoC;AAEnC,WAAM,IAAI0B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG29G,IAArB,EAA2B39G,CAAC,EAA5B,EAAkC;AAEjC,cAAMqG,IAAI,GAAG81G,YAAY,GAAGqB,QAAQ,CAAE52D,QAAQ,CAAE5mD,CAAF,CAAV,EAAiBs/G,iBAAiB,CAAEt/G,CAAF,CAAlC,EAAyCu/G,EAAzC,CAAX,GAA2D34D,QAAQ,CAAE5mD,CAAF,CAA5F;;AAEA,YAAK,CAAE88G,aAAP,EAAuB;AAEtBt+G,UAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAf,EAAkBusD,KAAK,GAAGooD,KAAR,GAAgB59G,CAAlC,CAAD;AAEA,SAJD,MAIO;AAEN;AAEAqkC,UAAAA,MAAM,CAACvT,IAAP,CAAa2tF,UAAU,CAACl2D,OAAX,CAAoBvoD,CAApB,CAAb,EAAuCsxB,cAAvC,CAAuDvpB,IAAI,CAACgB,CAA5D;AACA21G,UAAAA,QAAQ,CAAC5tF,IAAT,CAAe2tF,UAAU,CAAC9H,SAAX,CAAsB32G,CAAtB,CAAf,EAA2CsxB,cAA3C,CAA2DvpB,IAAI,CAACkB,CAAhE;AAEA01G,UAAAA,SAAS,CAAC7tF,IAAV,CAAgBytF,UAAU,CAAEv+G,CAAF,CAA1B,EAAkCqZ,GAAlC,CAAuCgrB,MAAvC,EAAgDhrB,GAAhD,CAAqDqlG,QAArD;AAEAx+G,UAAAA,CAAC,CAAEy+G,SAAS,CAAC51G,CAAZ,EAAe41G,SAAS,CAAC11G,CAAzB,EAA4B01G,SAAS,CAACvjF,CAAtC,CAAD;AAEA;AAED;AAED,KA9XyB,CAiY1B;AAEA;;;AACA,SAAM,IAAIv7B,CAAC,GAAGo+G,aAAa,GAAG,CAA9B,EAAiCp+G,CAAC,IAAI,CAAtC,EAAyCA,CAAC,EAA1C,EAAgD;AAE/C,YAAMyE,CAAC,GAAGzE,CAAC,GAAGo+G,aAAd;AACA,YAAM7iF,CAAC,GAAG0iF,cAAc,GAAGp+G,IAAI,CAAC8vB,GAAL,CAAUlrB,CAAC,GAAG5E,IAAI,CAACutB,EAAT,GAAc,CAAxB,CAA3B;AACA,YAAMg0F,EAAE,GAAGlD,SAAS,GAAGr+G,IAAI,CAAC+vB,GAAL,CAAUnrB,CAAC,GAAG5E,IAAI,CAACutB,EAAT,GAAc,CAAxB,CAAZ,GAA0C+wF,WAArD,CAJ+C,CAM/C;;AAEA,WAAM,IAAIt8G,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG2pE,OAAO,CAACz8G,MAA9B,EAAsCqB,CAAC,GAAGyxC,EAA1C,EAA8CzxC,CAAC,EAA/C,EAAqD;AAEpD,cAAMqG,IAAI,GAAGm3G,QAAQ,CAAEpC,OAAO,CAAEp7G,CAAF,CAAT,EAAgBm/G,gBAAgB,CAAEn/G,CAAF,CAAhC,EAAuCu/G,EAAvC,CAArB;AACA/gH,QAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAf,EAAkBusD,KAAK,GAAGp6B,CAA1B,CAAD;AAEA,OAb8C,CAe/C;;;AAEA,WAAM,IAAIr7B,CAAC,GAAG,CAAR,EAAWi/G,EAAE,GAAG9B,KAAK,CAAC78G,MAA5B,EAAoCN,CAAC,GAAGi/G,EAAxC,EAA4Cj/G,CAAC,EAA7C,EAAmD;AAElD,cAAMk/G,KAAK,GAAG/B,KAAK,CAAEn9G,CAAF,CAAnB;AACAghH,QAAAA,gBAAgB,GAAGD,cAAc,CAAE/gH,CAAF,CAAjC;;AAEA,aAAM,IAAI2B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG8rE,KAAK,CAAC5+G,MAA5B,EAAoCqB,CAAC,GAAGyxC,EAAxC,EAA4CzxC,CAAC,EAA7C,EAAmD;AAElD,gBAAMqG,IAAI,GAAGm3G,QAAQ,CAAED,KAAK,CAAEv9G,CAAF,CAAP,EAAcq/G,gBAAgB,CAAEr/G,CAAF,CAA9B,EAAqCu/G,EAArC,CAArB;;AAEA,cAAK,CAAEzC,aAAP,EAAuB;AAEtBt+G,YAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAf,EAAkBusD,KAAK,GAAGp6B,CAA1B,CAAD;AAEA,WAJD,MAIO;AAENl7B,YAAAA,CAAC,CAAE6H,IAAI,CAACgB,CAAP,EAAUhB,IAAI,CAACkB,CAAL,GAASs1G,UAAU,CAAEX,KAAK,GAAG,CAAV,CAAV,CAAwB30G,CAA3C,EAA8Cs1G,UAAU,CAAEX,KAAK,GAAG,CAAV,CAAV,CAAwB70G,CAAxB,GAA4BqyB,CAA1E,CAAD;AAEA;AAED;AAED;AAED;AAED;AAEA;;;AAEA8lF,IAAAA,aAAa,GAlba,CAob1B;;AAEAC,IAAAA,cAAc,GAtbY,CAyb1B;;AAEA,aAASD,aAAT,GAAyB;AAExB,YAAMhnE,KAAK,GAAGsjE,aAAa,CAACn9G,MAAd,GAAuB,CAArC;;AAEA,UAAKw9G,YAAL,EAAoB;AAEnB,YAAIuD,KAAK,GAAG,CAAZ,CAFmB,CAEJ;;AACf,YAAI51G,MAAM,GAAG6zG,IAAI,GAAG+B,KAApB,CAHmB,CAKnB;;AAEA,aAAM,IAAI1/G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG49G,IAArB,EAA2B59G,CAAC,EAA5B,EAAkC;AAEjC,gBAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;AACA2/G,UAAAA,EAAE,CAAE/3D,IAAI,CAAE,CAAF,CAAJ,GAAY99C,MAAd,EAAsB89C,IAAI,CAAE,CAAF,CAAJ,GAAY99C,MAAlC,EAA0C89C,IAAI,CAAE,CAAF,CAAJ,GAAY99C,MAAtD,CAAF;AAEA;;AAED41G,QAAAA,KAAK,GAAGxD,KAAK,GAAGK,aAAa,GAAG,CAAhC;AACAzyG,QAAAA,MAAM,GAAG6zG,IAAI,GAAG+B,KAAhB,CAfmB,CAiBnB;;AAEA,aAAM,IAAI1/G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG49G,IAArB,EAA2B59G,CAAC,EAA5B,EAAkC;AAEjC,gBAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;AACA2/G,UAAAA,EAAE,CAAE/3D,IAAI,CAAE,CAAF,CAAJ,GAAY99C,MAAd,EAAsB89C,IAAI,CAAE,CAAF,CAAJ,GAAY99C,MAAlC,EAA0C89C,IAAI,CAAE,CAAF,CAAJ,GAAY99C,MAAtD,CAAF;AAEA;AAED,OA1BD,MA0BO;AAEN;AAEA,aAAM,IAAI9J,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG49G,IAArB,EAA2B59G,CAAC,EAA5B,EAAkC;AAEjC,gBAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;AACA2/G,UAAAA,EAAE,CAAE/3D,IAAI,CAAE,CAAF,CAAN,EAAaA,IAAI,CAAE,CAAF,CAAjB,EAAwBA,IAAI,CAAE,CAAF,CAA5B,CAAF;AAEA,SATK,CAWN;;;AAEA,aAAM,IAAI5nD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG49G,IAArB,EAA2B59G,CAAC,EAA5B,EAAkC;AAEjC,gBAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;AACA2/G,UAAAA,EAAE,CAAE/3D,IAAI,CAAE,CAAF,CAAJ,GAAY+1D,IAAI,GAAGzB,KAArB,EAA4Bt0D,IAAI,CAAE,CAAF,CAAJ,GAAY+1D,IAAI,GAAGzB,KAA/C,EAAsDt0D,IAAI,CAAE,CAAF,CAAJ,GAAY+1D,IAAI,GAAGzB,KAAzE,CAAF;AAEA;AAED;;AAED/7G,MAAAA,KAAK,CAACypD,QAAN,CAAgBpR,KAAhB,EAAuBsjE,aAAa,CAACn9G,MAAd,GAAuB,CAAvB,GAA2B65C,KAAlD,EAAyD,CAAzD;AAEA,KAjfyB,CAmf1B;;;AAEA,aAASinE,cAAT,GAA0B;AAEzB,YAAMjnE,KAAK,GAAGsjE,aAAa,CAACn9G,MAAd,GAAuB,CAArC;AACA,UAAIihH,WAAW,GAAG,CAAlB;AACAC,MAAAA,SAAS,CAAEzE,OAAF,EAAWwE,WAAX,CAAT;AACAA,MAAAA,WAAW,IAAIxE,OAAO,CAACz8G,MAAvB;;AAEA,WAAM,IAAIN,CAAC,GAAG,CAAR,EAAWi/G,EAAE,GAAG9B,KAAK,CAAC78G,MAA5B,EAAoCN,CAAC,GAAGi/G,EAAxC,EAA4Cj/G,CAAC,EAA7C,EAAmD;AAElD,cAAMk/G,KAAK,GAAG/B,KAAK,CAAEn9G,CAAF,CAAnB;AACAwhH,QAAAA,SAAS,CAAEtC,KAAF,EAASqC,WAAT,CAAT,CAHkD,CAKlD;;AACAA,QAAAA,WAAW,IAAIrC,KAAK,CAAC5+G,MAArB;AAEA;;AAGDwB,MAAAA,KAAK,CAACypD,QAAN,CAAgBpR,KAAhB,EAAuBsjE,aAAa,CAACn9G,MAAd,GAAuB,CAAvB,GAA2B65C,KAAlD,EAAyD,CAAzD;AAGA;;AAED,aAASqnE,SAAT,CAAoBzE,OAApB,EAA6BwE,WAA7B,EAA2C;AAE1C,UAAI5/G,CAAC,GAAGo7G,OAAO,CAACz8G,MAAhB;;AAEA,aAAQ,EAAGqB,CAAH,IAAQ,CAAhB,EAAoB;AAEnB,cAAM6zC,CAAC,GAAG7zC,CAAV;AACA,YAAIsF,CAAC,GAAGtF,CAAC,GAAG,CAAZ;AACA,YAAKsF,CAAC,GAAG,CAAT,EAAaA,CAAC,GAAG81G,OAAO,CAACz8G,MAAR,GAAiB,CAArB,CAJM,CAMnB;;AAEA,aAAM,IAAIL,CAAC,GAAG,CAAR,EAAWwhH,EAAE,GAAK5D,KAAK,GAAGK,aAAa,GAAG,CAAhD,EAAqDj+G,CAAC,GAAGwhH,EAAzD,EAA6DxhH,CAAC,EAA9D,EAAoE;AAEnE,gBAAMyhH,KAAK,GAAGpC,IAAI,GAAGr/G,CAArB;AACA,gBAAM0hH,KAAK,GAAGrC,IAAI,IAAKr/G,CAAC,GAAG,CAAT,CAAlB;AAEA,gBAAMF,CAAC,GAAGwhH,WAAW,GAAG/rE,CAAd,GAAkBksE,KAA5B;AAAA,gBACC5hH,CAAC,GAAGyhH,WAAW,GAAGt6G,CAAd,GAAkBy6G,KADvB;AAAA,gBAECl9G,CAAC,GAAG+8G,WAAW,GAAGt6G,CAAd,GAAkB06G,KAFvB;AAAA,gBAGCnrF,CAAC,GAAG+qF,WAAW,GAAG/rE,CAAd,GAAkBmsE,KAHvB;AAKAC,UAAAA,EAAE,CAAE7hH,CAAF,EAAKD,CAAL,EAAQ0E,CAAR,EAAWgyB,CAAX,CAAF;AAEA;AAED;AAED;;AAED,aAASr2B,CAAT,CAAY6I,CAAZ,EAAeE,CAAf,EAAkBmyB,CAAlB,EAAsB;AAErBsiF,MAAAA,WAAW,CAAC7yG,IAAZ,CAAkB9B,CAAlB;AACA20G,MAAAA,WAAW,CAAC7yG,IAAZ,CAAkB5B,CAAlB;AACAy0G,MAAAA,WAAW,CAAC7yG,IAAZ,CAAkBuwB,CAAlB;AAEA;;AAGD,aAASimF,EAAT,CAAavhH,CAAb,EAAgBD,CAAhB,EAAmB0E,CAAnB,EAAuB;AAEtBq9G,MAAAA,SAAS,CAAE9hH,CAAF,CAAT;AACA8hH,MAAAA,SAAS,CAAE/hH,CAAF,CAAT;AACA+hH,MAAAA,SAAS,CAAEr9G,CAAF,CAAT;AAEA,YAAMs9G,SAAS,GAAGrE,aAAa,CAACn9G,MAAd,GAAuB,CAAzC;AACA,YAAMmoD,GAAG,GAAG21D,KAAK,CAAC2D,aAAN,CAAqBjgH,KAArB,EAA4B27G,aAA5B,EAA2CqE,SAAS,GAAG,CAAvD,EAA0DA,SAAS,GAAG,CAAtE,EAAyEA,SAAS,GAAG,CAArF,CAAZ;AAEAE,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AAEA;;AAED,aAASm5D,EAAT,CAAa7hH,CAAb,EAAgBD,CAAhB,EAAmB0E,CAAnB,EAAsBgyB,CAAtB,EAA0B;AAEzBqrF,MAAAA,SAAS,CAAE9hH,CAAF,CAAT;AACA8hH,MAAAA,SAAS,CAAE/hH,CAAF,CAAT;AACA+hH,MAAAA,SAAS,CAAErrF,CAAF,CAAT;AAEAqrF,MAAAA,SAAS,CAAE/hH,CAAF,CAAT;AACA+hH,MAAAA,SAAS,CAAEr9G,CAAF,CAAT;AACAq9G,MAAAA,SAAS,CAAErrF,CAAF,CAAT;AAGA,YAAMsrF,SAAS,GAAGrE,aAAa,CAACn9G,MAAd,GAAuB,CAAzC;AACA,YAAMmoD,GAAG,GAAG21D,KAAK,CAAC6D,kBAAN,CAA0BngH,KAA1B,EAAiC27G,aAAjC,EAAgDqE,SAAS,GAAG,CAA5D,EAA+DA,SAAS,GAAG,CAA3E,EAA8EA,SAAS,GAAG,CAA1F,EAA6FA,SAAS,GAAG,CAAzG,CAAZ;AAEAE,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AAEAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AACAu5D,MAAAA,KAAK,CAAEv5D,GAAG,CAAE,CAAF,CAAL,CAAL;AAEA;;AAED,aAASo5D,SAAT,CAAoB32G,KAApB,EAA4B;AAE3BuyG,MAAAA,aAAa,CAAC3yG,IAAd,CAAoB6yG,WAAW,CAAEzyG,KAAK,GAAG,CAAR,GAAY,CAAd,CAA/B;AACAuyG,MAAAA,aAAa,CAAC3yG,IAAd,CAAoB6yG,WAAW,CAAEzyG,KAAK,GAAG,CAAR,GAAY,CAAd,CAA/B;AACAuyG,MAAAA,aAAa,CAAC3yG,IAAd,CAAoB6yG,WAAW,CAAEzyG,KAAK,GAAG,CAAR,GAAY,CAAd,CAA/B;AAEA;;AAGD,aAAS82G,KAAT,CAAgBE,OAAhB,EAA0B;AAEzBrZ,MAAAA,OAAO,CAAC/9F,IAAR,CAAco3G,OAAO,CAACl5G,CAAtB;AACA6/F,MAAAA,OAAO,CAAC/9F,IAAR,CAAco3G,OAAO,CAACh5G,CAAtB;AAEA;AAED;AAED;;AAEDs0G,qBAAqB,CAAC/8G,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAlC;AACA+8G,qBAAqB,CAAC/8G,SAAtB,CAAgCoC,WAAhC,GAA8C26G,qBAA9C;;AAEAA,qBAAqB,CAAC/8G,SAAtB,CAAgCg6B,MAAhC,GAAyC,YAAY;AAEpD,QAAMqW,IAAI,GAAG+Z,cAAc,CAACpqD,SAAf,CAAyBg6B,MAAzB,CAAgCz5B,IAAhC,CAAsC,IAAtC,CAAb;AAEA,QAAM6uC,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AACA,QAAMljC,OAAO,GAAG,KAAK4jC,UAAL,CAAgB5jC,OAAhC;AAEA,SAAO8tB,MAAM,CAAEoV,MAAF,EAAUljC,OAAV,EAAmBmkC,IAAnB,CAAb;AAEA,CATD,EAWA;;;AAEA,MAAMwtE,gBAAgB,GAAG;AAExByD,EAAAA,aAAa,EAAE,UAAWzxE,QAAX,EAAqBiY,QAArB,EAA+B45D,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAwD;AAEtE,UAAMC,GAAG,GAAG/5D,QAAQ,CAAE45D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMI,GAAG,GAAGh6D,QAAQ,CAAE45D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMK,GAAG,GAAGj6D,QAAQ,CAAE65D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMK,GAAG,GAAGl6D,QAAQ,CAAE65D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMM,GAAG,GAAGn6D,QAAQ,CAAE85D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMM,GAAG,GAAGp6D,QAAQ,CAAE85D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AAEA,WAAO,CACN,IAAI/xF,OAAJ,CAAagyF,GAAb,EAAkBC,GAAlB,CADM,EAEN,IAAIjyF,OAAJ,CAAakyF,GAAb,EAAkBC,GAAlB,CAFM,EAGN,IAAInyF,OAAJ,CAAaoyF,GAAb,EAAkBC,GAAlB,CAHM,CAAP;AAMA,GAjBuB;AAmBxBV,EAAAA,kBAAkB,EAAE,UAAW3xE,QAAX,EAAqBiY,QAArB,EAA+B45D,MAA/B,EAAuCC,MAAvC,EAA+CC,MAA/C,EAAuDO,MAAvD,EAAgE;AAEnF,UAAMN,GAAG,GAAG/5D,QAAQ,CAAE45D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMI,GAAG,GAAGh6D,QAAQ,CAAE45D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMU,GAAG,GAAGt6D,QAAQ,CAAE45D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMK,GAAG,GAAGj6D,QAAQ,CAAE65D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMK,GAAG,GAAGl6D,QAAQ,CAAE65D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMU,GAAG,GAAGv6D,QAAQ,CAAE65D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMM,GAAG,GAAGn6D,QAAQ,CAAE85D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMM,GAAG,GAAGp6D,QAAQ,CAAE85D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMU,GAAG,GAAGx6D,QAAQ,CAAE85D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMW,GAAG,GAAGz6D,QAAQ,CAAEq6D,MAAM,GAAG,CAAX,CAApB;AACA,UAAMK,GAAG,GAAG16D,QAAQ,CAAEq6D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;AACA,UAAMM,GAAG,GAAG36D,QAAQ,CAAEq6D,MAAM,GAAG,CAAT,GAAa,CAAf,CAApB;;AAEA,QAAKjjH,IAAI,CAACwO,GAAL,CAAUo0G,GAAG,GAAGE,GAAhB,IAAwB,IAA7B,EAAoC;AAEnC,aAAO,CACN,IAAInyF,OAAJ,CAAagyF,GAAb,EAAkB,IAAIO,GAAtB,CADM,EAEN,IAAIvyF,OAAJ,CAAakyF,GAAb,EAAkB,IAAIM,GAAtB,CAFM,EAGN,IAAIxyF,OAAJ,CAAaoyF,GAAb,EAAkB,IAAIK,GAAtB,CAHM,EAIN,IAAIzyF,OAAJ,CAAa0yF,GAAb,EAAkB,IAAIE,GAAtB,CAJM,CAAP;AAOA,KATD,MASO;AAEN,aAAO,CACN,IAAI5yF,OAAJ,CAAaiyF,GAAb,EAAkB,IAAIM,GAAtB,CADM,EAEN,IAAIvyF,OAAJ,CAAamyF,GAAb,EAAkB,IAAIK,GAAtB,CAFM,EAGN,IAAIxyF,OAAJ,CAAaqyF,GAAb,EAAkB,IAAII,GAAtB,CAHM,EAIN,IAAIzyF,OAAJ,CAAa2yF,GAAb,EAAkB,IAAIC,GAAtB,CAJM,CAAP;AAOA;AAED;AAtDuB,CAAzB;;AAyDA,SAASzoF,MAAT,CAAiBoV,MAAjB,EAAyBljC,OAAzB,EAAkCmkC,IAAlC,EAAyC;AAExC;AAEAA,EAAAA,IAAI,CAACjB,MAAL,GAAc,EAAd;;AAEA,MAAKrvC,KAAK,CAACoC,OAAN,CAAeitC,MAAf,CAAL,EAA+B;AAE9B,SAAM,IAAIluC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8tC,MAAM,CAACvvC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAM6uC,KAAK,GAAGX,MAAM,CAAEluC,CAAF,CAApB;AAEAmvC,MAAAA,IAAI,CAACjB,MAAL,CAAY/kC,IAAZ,CAAkB0lC,KAAK,CAAC9iB,IAAxB;AAEA;AAED,GAVD,MAUO;AAENojB,IAAAA,IAAI,CAACjB,MAAL,CAAY/kC,IAAZ,CAAkB+kC,MAAM,CAACniB,IAAzB;AAEA,GApBuC,CAsBxC;;;AAEA,MAAK/gB,OAAO,CAACwxG,WAAR,KAAwBz7G,SAA7B,EAAyCouC,IAAI,CAACnkC,OAAL,CAAawxG,WAAb,GAA2BxxG,OAAO,CAACwxG,WAAR,CAAoB1jF,MAApB,EAA3B;AAEzC,SAAOqW,IAAP;AAEA;AAED;;;;;;;;;;;;;;;;;;;AAoBA;;;AAEA,SAASqyE,YAAT,CAAuB3yG,IAAvB,EAA6B+/B,UAA7B,EAA0C;AAEzCihB,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,cAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB//B,IAAAA,IAAI,EAAEA,IADW;AAEjB+/B,IAAAA,UAAU,EAAEA;AAFK,GAAlB;AAKA,OAAKmhB,kBAAL,CAAyB,IAAI0xD,kBAAJ,CAAwB5yG,IAAxB,EAA8B+/B,UAA9B,CAAzB;AACA,OAAKijB,aAAL;AAEA;;AAED2vD,YAAY,CAAC1iH,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAAzB;AACA0iH,YAAY,CAAC1iH,SAAb,CAAuBoC,WAAvB,GAAqCsgH,YAArC,EAEA;;AAEA,SAASC,kBAAT,CAA6B5yG,IAA7B,EAAmC+/B,UAAnC,EAAgD;AAE/CA,EAAAA,UAAU,GAAGA,UAAU,IAAI,EAA3B;AAEA,QAAM8yE,IAAI,GAAG9yE,UAAU,CAAC8yE,IAAxB;;AAEA,MAAK,EAAIA,IAAI,IAAIA,IAAI,CAACC,MAAjB,CAAL,EAAiC;AAEhClzF,IAAAA,OAAO,CAACyD,KAAR,CAAe,sEAAf;AACA,WAAO,IAAI29B,QAAJ,EAAP;AAEA;;AAED,QAAM3hB,MAAM,GAAGwzE,IAAI,CAACE,cAAL,CAAqB/yG,IAArB,EAA2B+/B,UAAU,CAACgD,IAAtC,CAAf,CAb+C,CAe/C;;AAEAhD,EAAAA,UAAU,CAACklB,KAAX,GAAmBllB,UAAU,CAAChlC,MAAX,KAAsB7I,SAAtB,GAAkC6tC,UAAU,CAAChlC,MAA7C,GAAsD,EAAzE,CAjB+C,CAmB/C;;AAEA,MAAKglC,UAAU,CAACwtE,cAAX,KAA8Br7G,SAAnC,EAA+C6tC,UAAU,CAACwtE,cAAX,GAA4B,EAA5B;AAC/C,MAAKxtE,UAAU,CAACytE,SAAX,KAAyBt7G,SAA9B,EAA0C6tC,UAAU,CAACytE,SAAX,GAAuB,CAAvB;AAC1C,MAAKztE,UAAU,CAACutE,YAAX,KAA4Bp7G,SAAjC,EAA6C6tC,UAAU,CAACutE,YAAX,GAA0B,KAA1B;AAE7CN,EAAAA,qBAAqB,CAACx8G,IAAtB,CAA4B,IAA5B,EAAkC6uC,MAAlC,EAA0CU,UAA1C;AAEA,OAAKzkC,IAAL,GAAY,oBAAZ;AAEA;;AAEDs3G,kBAAkB,CAAC3iH,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAekjF,qBAAqB,CAAC/8G,SAArC,CAA/B;AACA2iH,kBAAkB,CAAC3iH,SAAnB,CAA6BoC,WAA7B,GAA2CugH,kBAA3C;AAEA;;;;;AAMA;;AAEA,SAASI,cAAT,CAAyB9+E,MAAzB,EAAiCgxB,aAAjC,EAAgDC,cAAhD,EAAgE8tD,QAAhE,EAA0EC,SAA1E,EAAqFC,UAArF,EAAiGC,WAAjG,EAA+G;AAE9GpyD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,gBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjBgxB,IAAAA,aAAa,EAAEA,aAFE;AAGjBC,IAAAA,cAAc,EAAEA,cAHC;AAIjB8tD,IAAAA,QAAQ,EAAEA,QAJO;AAKjBC,IAAAA,SAAS,EAAEA,SALM;AAMjBC,IAAAA,UAAU,EAAEA,UANK;AAOjBC,IAAAA,WAAW,EAAEA;AAPI,GAAlB;AAUA,OAAKlyD,kBAAL,CAAyB,IAAImyD,oBAAJ,CAA0Bn/E,MAA1B,EAAkCgxB,aAAlC,EAAiDC,cAAjD,EAAiE8tD,QAAjE,EAA2EC,SAA3E,EAAsFC,UAAtF,EAAkGC,WAAlG,CAAzB;AACA,OAAKpwD,aAAL;AAEA;;AAEDgwD,cAAc,CAAC/iH,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA3B;AACA+iH,cAAc,CAAC/iH,SAAf,CAAyBoC,WAAzB,GAAuC2gH,cAAvC,EAEA;;AAEA,SAASK,oBAAT,CAA+Bn/E,MAA/B,EAAuCgxB,aAAvC,EAAsDC,cAAtD,EAAsE8tD,QAAtE,EAAgFC,SAAhF,EAA2FC,UAA3F,EAAuGC,WAAvG,EAAqH;AAEpH/4D,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,sBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjBgxB,IAAAA,aAAa,EAAEA,aAFE;AAGjBC,IAAAA,cAAc,EAAEA,cAHC;AAIjB8tD,IAAAA,QAAQ,EAAEA,QAJO;AAKjBC,IAAAA,SAAS,EAAEA,SALM;AAMjBC,IAAAA,UAAU,EAAEA,UANK;AAOjBC,IAAAA,WAAW,EAAEA;AAPI,GAAlB;AAUAl/E,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AAEAgxB,EAAAA,aAAa,GAAG/1D,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa/E,IAAI,CAACwE,KAAL,CAAYuxD,aAAZ,KAA+B,CAA5C,CAAhB;AACAC,EAAAA,cAAc,GAAGh2D,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa/E,IAAI,CAACwE,KAAL,CAAYwxD,cAAZ,KAAgC,CAA7C,CAAjB;AAEA8tD,EAAAA,QAAQ,GAAGA,QAAQ,KAAK/gH,SAAb,GAAyB+gH,QAAzB,GAAoC,CAA/C;AACAC,EAAAA,SAAS,GAAGA,SAAS,KAAKhhH,SAAd,GAA0BghH,SAA1B,GAAsC/jH,IAAI,CAACutB,EAAL,GAAU,CAA5D;AAEAy2F,EAAAA,UAAU,GAAGA,UAAU,KAAKjhH,SAAf,GAA2BihH,UAA3B,GAAwC,CAArD;AACAC,EAAAA,WAAW,GAAGA,WAAW,KAAKlhH,SAAhB,GAA4BkhH,WAA5B,GAA0CjkH,IAAI,CAACutB,EAA7D;AAEA,QAAM42F,QAAQ,GAAGnkH,IAAI,CAAC8E,GAAL,CAAUk/G,UAAU,GAAGC,WAAvB,EAAoCjkH,IAAI,CAACutB,EAAzC,CAAjB;AAEA,MAAIhiB,KAAK,GAAG,CAAZ;AACA,QAAM64G,IAAI,GAAG,EAAb;AAEA,QAAMtyD,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAMoC,MAAM,GAAG,IAAIpC,OAAJ,EAAf,CAjCoH,CAmCpH;;AAEA,QAAMgsB,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CAxCoH,CA0CpH;;AAEA,OAAM,IAAI1lB,EAAE,GAAG,CAAf,EAAkBA,EAAE,IAAI4yB,cAAxB,EAAwC5yB,EAAE,EAA1C,EAAgD;AAE/C,UAAMihF,WAAW,GAAG,EAApB;AAEA,UAAM7jH,CAAC,GAAG4iC,EAAE,GAAG4yB,cAAf,CAJ+C,CAM/C;;AAEA,QAAIsuD,OAAO,GAAG,CAAd;;AAEA,QAAKlhF,EAAE,IAAI,CAAN,IAAW4gF,UAAU,IAAI,CAA9B,EAAkC;AAEjCM,MAAAA,OAAO,GAAG,MAAMvuD,aAAhB;AAEA,KAJD,MAIO,IAAK3yB,EAAE,IAAI4yB,cAAN,IAAwBmuD,QAAQ,IAAInkH,IAAI,CAACutB,EAA9C,EAAmD;AAEzD+2F,MAAAA,OAAO,GAAG,CAAE,GAAF,GAAQvuD,aAAlB;AAEA;;AAED,SAAM,IAAI5yB,EAAE,GAAG,CAAf,EAAkBA,EAAE,IAAI4yB,aAAxB,EAAuC5yB,EAAE,EAAzC,EAA+C;AAE9C,YAAMkZ,CAAC,GAAGlZ,EAAE,GAAG4yB,aAAf,CAF8C,CAI9C;;AAEAjE,MAAAA,MAAM,CAACzoD,CAAP,GAAW,CAAE07B,MAAF,GAAW/kC,IAAI,CAAC8vB,GAAL,CAAUg0F,QAAQ,GAAGznE,CAAC,GAAG0nE,SAAzB,CAAX,GAAkD/jH,IAAI,CAAC+vB,GAAL,CAAUi0F,UAAU,GAAGxjH,CAAC,GAAGyjH,WAA3B,CAA7D;AACAnyD,MAAAA,MAAM,CAACvoD,CAAP,GAAWw7B,MAAM,GAAG/kC,IAAI,CAAC8vB,GAAL,CAAUk0F,UAAU,GAAGxjH,CAAC,GAAGyjH,WAA3B,CAApB;AACAnyD,MAAAA,MAAM,CAACp2B,CAAP,GAAWqJ,MAAM,GAAG/kC,IAAI,CAAC+vB,GAAL,CAAU+zF,QAAQ,GAAGznE,CAAC,GAAG0nE,SAAzB,CAAT,GAAgD/jH,IAAI,CAAC+vB,GAAL,CAAUi0F,UAAU,GAAGxjH,CAAC,GAAGyjH,WAA3B,CAA3D;AAEAr7D,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EAV8C,CAY9C;;AAEAiJ,MAAAA,MAAM,CAACvT,IAAP,CAAa0gC,MAAb,EAAsBl/B,SAAtB;AACAi2B,MAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC,EAf8C,CAiB9C;;AAEAotB,MAAAA,GAAG,CAAC39C,IAAJ,CAAUkxC,CAAC,GAAGioE,OAAd,EAAuB,IAAI9jH,CAA3B;AAEA6jH,MAAAA,WAAW,CAACl5G,IAAZ,CAAkBI,KAAK,EAAvB;AAEA;;AAED64G,IAAAA,IAAI,CAACj5G,IAAL,CAAWk5G,WAAX;AAEA,GA3FmH,CA6FpH;;;AAEA,OAAM,IAAIjhF,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG4yB,cAAvB,EAAuC5yB,EAAE,EAAzC,EAA+C;AAE9C,SAAM,IAAID,EAAE,GAAG,CAAf,EAAkBA,EAAE,GAAG4yB,aAAvB,EAAsC5yB,EAAE,EAAxC,EAA8C;AAE7C,YAAM/iC,CAAC,GAAGgkH,IAAI,CAAEhhF,EAAF,CAAJ,CAAYD,EAAE,GAAG,CAAjB,CAAV;AACA,YAAMhjC,CAAC,GAAGikH,IAAI,CAAEhhF,EAAF,CAAJ,CAAYD,EAAZ,CAAV;AACA,YAAMt+B,CAAC,GAAGu/G,IAAI,CAAEhhF,EAAE,GAAG,CAAP,CAAJ,CAAgBD,EAAhB,CAAV;AACA,YAAMtM,CAAC,GAAGutF,IAAI,CAAEhhF,EAAE,GAAG,CAAP,CAAJ,CAAgBD,EAAE,GAAG,CAArB,CAAV;AAEA,UAAKC,EAAE,KAAK,CAAP,IAAY4gF,UAAU,GAAG,CAA9B,EAAkCz1D,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AAClC,UAAKuM,EAAE,KAAK4yB,cAAc,GAAG,CAAxB,IAA6BmuD,QAAQ,GAAGnkH,IAAI,CAACutB,EAAlD,EAAuDghC,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEvD;AAED,GA7GmH,CA+GpH;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDo7D,oBAAoB,CAACpjH,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAjC;AACAojH,oBAAoB,CAACpjH,SAArB,CAA+BoC,WAA/B,GAA6CghH,oBAA7C;AAEA;;;;AAKA;;AAEA,SAASK,YAAT,CAAuBC,WAAvB,EAAoCC,WAApC,EAAiDC,aAAjD,EAAgEC,WAAhE,EAA6EX,UAA7E,EAAyFC,WAAzF,EAAuG;AAEtGpyD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,cAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB4zE,IAAAA,WAAW,EAAEA,WADI;AAEjBC,IAAAA,WAAW,EAAEA,WAFI;AAGjBC,IAAAA,aAAa,EAAEA,aAHE;AAIjBC,IAAAA,WAAW,EAAEA,WAJI;AAKjBX,IAAAA,UAAU,EAAEA,UALK;AAMjBC,IAAAA,WAAW,EAAEA;AANI,GAAlB;AASA,OAAKlyD,kBAAL,CAAyB,IAAI6yD,kBAAJ,CAAwBJ,WAAxB,EAAqCC,WAArC,EAAkDC,aAAlD,EAAiEC,WAAjE,EAA8EX,UAA9E,EAA0FC,WAA1F,CAAzB;AACA,OAAKpwD,aAAL;AAEA;;AAED0wD,YAAY,CAACzjH,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAAzB;AACAyjH,YAAY,CAACzjH,SAAb,CAAuBoC,WAAvB,GAAqCqhH,YAArC,EAEA;;AAEA,SAASK,kBAAT,CAA6BJ,WAA7B,EAA0CC,WAA1C,EAAuDC,aAAvD,EAAsEC,WAAtE,EAAmFX,UAAnF,EAA+FC,WAA/F,EAA6G;AAE5G/4D,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB4zE,IAAAA,WAAW,EAAEA,WADI;AAEjBC,IAAAA,WAAW,EAAEA,WAFI;AAGjBC,IAAAA,aAAa,EAAEA,aAHE;AAIjBC,IAAAA,WAAW,EAAEA,WAJI;AAKjBX,IAAAA,UAAU,EAAEA,UALK;AAMjBC,IAAAA,WAAW,EAAEA;AANI,GAAlB;AASAO,EAAAA,WAAW,GAAGA,WAAW,IAAI,GAA7B;AACAC,EAAAA,WAAW,GAAGA,WAAW,IAAI,CAA7B;AAEAT,EAAAA,UAAU,GAAGA,UAAU,KAAKjhH,SAAf,GAA2BihH,UAA3B,GAAwC,CAArD;AACAC,EAAAA,WAAW,GAAGA,WAAW,KAAKlhH,SAAhB,GAA4BkhH,WAA5B,GAA0CjkH,IAAI,CAACutB,EAAL,GAAU,CAAlE;AAEAm3F,EAAAA,aAAa,GAAGA,aAAa,KAAK3hH,SAAlB,GAA8B/C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa2/G,aAAb,CAA9B,GAA6D,CAA7E;AACAC,EAAAA,WAAW,GAAGA,WAAW,KAAK5hH,SAAhB,GAA4B/C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa4/G,WAAb,CAA5B,GAAyD,CAAvE,CAtB4G,CAwB5G;;AAEA,QAAMp2D,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CA7B4G,CA+B5G;;AAEA,MAAI/jB,MAAM,GAAGy/E,WAAb;AACA,QAAMK,UAAU,GAAK,CAAEJ,WAAW,GAAGD,WAAhB,IAAgCG,WAArD;AACA,QAAM7yD,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAM/G,EAAE,GAAG,IAAI7K,OAAJ,EAAX,CApC4G,CAsC5G;;AAEA,OAAM,IAAIklB,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI8uE,WAAtB,EAAmC9uE,CAAC,EAApC,EAA0C;AAEzC,SAAM,IAAI7zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAI0iH,aAAtB,EAAqC1iH,CAAC,EAAtC,EAA4C;AAE3C;AAEA,YAAM8iH,OAAO,GAAGd,UAAU,GAAGhiH,CAAC,GAAG0iH,aAAJ,GAAoBT,WAAjD,CAJ2C,CAM3C;;AAEAnyD,MAAAA,MAAM,CAACzoD,CAAP,GAAW07B,MAAM,GAAG/kC,IAAI,CAAC8vB,GAAL,CAAUg1F,OAAV,CAApB;AACAhzD,MAAAA,MAAM,CAACvoD,CAAP,GAAWw7B,MAAM,GAAG/kC,IAAI,CAAC+vB,GAAL,CAAU+0F,OAAV,CAApB;AAEAl8D,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EAX2C,CAa3C;;AAEAmtB,MAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAf2C,CAiB3C;;AAEAqwB,MAAAA,EAAE,CAACnyB,CAAH,GAAO,CAAEyoD,MAAM,CAACzoD,CAAP,GAAWo7G,WAAX,GAAyB,CAA3B,IAAiC,CAAxC;AACAjpF,MAAAA,EAAE,CAACjyB,CAAH,GAAO,CAAEuoD,MAAM,CAACvoD,CAAP,GAAWk7G,WAAX,GAAyB,CAA3B,IAAiC,CAAxC;AAEA37D,MAAAA,GAAG,CAAC39C,IAAJ,CAAUqwB,EAAE,CAACnyB,CAAb,EAAgBmyB,EAAE,CAACjyB,CAAnB;AAEA,KA1BwC,CA4BzC;;;AAEAw7B,IAAAA,MAAM,IAAI8/E,UAAV;AAEA,GAxE2G,CA0E5G;;;AAEA,OAAM,IAAIhvE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG8uE,WAArB,EAAkC9uE,CAAC,EAAnC,EAAyC;AAExC,UAAMkvE,iBAAiB,GAAGlvE,CAAC,IAAK6uE,aAAa,GAAG,CAArB,CAA3B;;AAEA,SAAM,IAAI1iH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG0iH,aAArB,EAAoC1iH,CAAC,EAArC,EAA2C;AAE1C,YAAM8iH,OAAO,GAAG9iH,CAAC,GAAG+iH,iBAApB;AAEA,YAAM3kH,CAAC,GAAG0kH,OAAV;AACA,YAAM3kH,CAAC,GAAG2kH,OAAO,GAAGJ,aAAV,GAA0B,CAApC;AACA,YAAM7/G,CAAC,GAAGigH,OAAO,GAAGJ,aAAV,GAA0B,CAApC;AACA,YAAM7tF,CAAC,GAAGiuF,OAAO,GAAG,CAApB,CAP0C,CAS1C;;AAEAv2D,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,MAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED,GAhG2G,CAkG5G;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAED87D,kBAAkB,CAAC9jH,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAA/B;AACA8jH,kBAAkB,CAAC9jH,SAAnB,CAA6BoC,WAA7B,GAA2C0hH,kBAA3C;AAEA;;;;;AAMA;;AAEA,SAASI,aAAT,CAAwBzxE,MAAxB,EAAgC0xE,QAAhC,EAA0CnB,QAA1C,EAAoDC,SAApD,EAAgE;AAE/DlyD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,eAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB2C,IAAAA,MAAM,EAAEA,MADS;AAEjB0xE,IAAAA,QAAQ,EAAEA,QAFO;AAGjBnB,IAAAA,QAAQ,EAAEA,QAHO;AAIjBC,IAAAA,SAAS,EAAEA;AAJM,GAAlB;AAOA,OAAKhyD,kBAAL,CAAyB,IAAImzD,mBAAJ,CAAyB3xE,MAAzB,EAAiC0xE,QAAjC,EAA2CnB,QAA3C,EAAqDC,SAArD,CAAzB;AACA,OAAKlwD,aAAL;AAEA;;AAEDmxD,aAAa,CAAClkH,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA1B;AACAkkH,aAAa,CAAClkH,SAAd,CAAwBoC,WAAxB,GAAsC8hH,aAAtC,EAEA;;AAEA,SAASE,mBAAT,CAA8B3xE,MAA9B,EAAsC0xE,QAAtC,EAAgDnB,QAAhD,EAA0DC,SAA1D,EAAsE;AAErE74D,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB2C,IAAAA,MAAM,EAAEA,MADS;AAEjB0xE,IAAAA,QAAQ,EAAEA,QAFO;AAGjBnB,IAAAA,QAAQ,EAAEA,QAHO;AAIjBC,IAAAA,SAAS,EAAEA;AAJM,GAAlB;AAOAkB,EAAAA,QAAQ,GAAGjlH,IAAI,CAACwE,KAAL,CAAYygH,QAAZ,KAA0B,EAArC;AACAnB,EAAAA,QAAQ,GAAGA,QAAQ,IAAI,CAAvB;AACAC,EAAAA,SAAS,GAAGA,SAAS,IAAI/jH,IAAI,CAACutB,EAAL,GAAU,CAAnC,CAfqE,CAiBrE;;AAEAw2F,EAAAA,SAAS,GAAG12F,SAAS,CAACY,KAAV,CAAiB81F,SAAjB,EAA4B,CAA5B,EAA+B/jH,IAAI,CAACutB,EAAL,GAAU,CAAzC,CAAZ,CAnBqE,CAsBrE;;AAEA,QAAMghC,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAME,GAAG,GAAG,EAAZ,CA1BqE,CA4BrE;;AAEA,QAAMq8D,eAAe,GAAG,MAAMF,QAA9B;AACA,QAAMnzD,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAM/G,EAAE,GAAG,IAAI7K,OAAJ,EAAX,CAhCqE,CAkCrE;;AAEA,OAAM,IAAI3uB,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIijH,QAAtB,EAAgCjjH,CAAC,EAAjC,EAAuC;AAEtC,UAAMgjC,GAAG,GAAG8+E,QAAQ,GAAG9hH,CAAC,GAAGmjH,eAAJ,GAAsBpB,SAA7C;AAEA,UAAMh0F,GAAG,GAAG/vB,IAAI,CAAC+vB,GAAL,CAAUiV,GAAV,CAAZ;AACA,UAAMlV,GAAG,GAAG9vB,IAAI,CAAC8vB,GAAL,CAAUkV,GAAV,CAAZ;;AAEA,SAAM,IAAI6Q,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAMtC,MAAM,CAAC5yC,MAAP,GAAgB,CAAxC,EAA6Ck1C,CAAC,EAA9C,EAAoD;AAEnD;AAEAic,MAAAA,MAAM,CAACzoD,CAAP,GAAWkqC,MAAM,CAAEsC,CAAF,CAAN,CAAYxsC,CAAZ,GAAgB0mB,GAA3B;AACA+hC,MAAAA,MAAM,CAACvoD,CAAP,GAAWgqC,MAAM,CAAEsC,CAAF,CAAN,CAAYtsC,CAAvB;AACAuoD,MAAAA,MAAM,CAACp2B,CAAP,GAAW6X,MAAM,CAAEsC,CAAF,CAAN,CAAYxsC,CAAZ,GAAgBymB,GAA3B;AAEA84B,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EARmD,CAUnD;;AAEAF,MAAAA,EAAE,CAACnyB,CAAH,GAAOrH,CAAC,GAAGijH,QAAX;AACAzpF,MAAAA,EAAE,CAACjyB,CAAH,GAAOssC,CAAC,IAAKtC,MAAM,CAAC5yC,MAAP,GAAgB,CAArB,CAAR;AAEAmoD,MAAAA,GAAG,CAAC39C,IAAJ,CAAUqwB,EAAE,CAACnyB,CAAb,EAAgBmyB,EAAE,CAACjyB,CAAnB;AAGA;AAED,GA/DoE,CAiErE;;;AAEA,OAAM,IAAIvH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGijH,QAArB,EAA+BjjH,CAAC,EAAhC,EAAsC;AAErC,SAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAKtC,MAAM,CAAC5yC,MAAP,GAAgB,CAAvC,EAA4Ck1C,CAAC,EAA7C,EAAmD;AAElD,YAAMuvE,IAAI,GAAGvvE,CAAC,GAAG7zC,CAAC,GAAGuxC,MAAM,CAAC5yC,MAA5B;AAEA,YAAMP,CAAC,GAAGglH,IAAV;AACA,YAAMjlH,CAAC,GAAGilH,IAAI,GAAG7xE,MAAM,CAAC5yC,MAAxB;AACA,YAAMkE,CAAC,GAAGugH,IAAI,GAAG7xE,MAAM,CAAC5yC,MAAd,GAAuB,CAAjC;AACA,YAAMk2B,CAAC,GAAGuuF,IAAI,GAAG,CAAjB,CAPkD,CASlD;;AAEA72D,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,MAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB;AAEA;AAED,GArFoE,CAuFrE;;;AAEA,OAAK40B,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB,EA3FqE,CA6FrE;;AAEA,OAAKkE,oBAAL,GA/FqE,CAiGrE;AACA;;AAEA,MAAK+2D,SAAS,KAAK/jH,IAAI,CAACutB,EAAL,GAAU,CAA7B,EAAiC;AAEhC,UAAMs7B,OAAO,GAAG,KAAKsC,UAAL,CAAgBxmB,MAAhB,CAAuBxX,KAAvC;AACA,UAAMk4F,EAAE,GAAG,IAAI9iF,OAAJ,EAAX;AACA,UAAM+iF,EAAE,GAAG,IAAI/iF,OAAJ,EAAX;AACA,UAAMpU,CAAC,GAAG,IAAIoU,OAAJ,EAAV,CALgC,CAOhC;;AAEA,UAAM6iF,IAAI,GAAGH,QAAQ,GAAG1xE,MAAM,CAAC5yC,MAAlB,GAA2B,CAAxC;;AAEA,SAAM,IAAIqB,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAG,CAArB,EAAwB7zC,CAAC,GAAGuxC,MAAM,CAAC5yC,MAAnC,EAA2CqB,CAAC,IAAK6zC,CAAC,IAAI,CAAtD,EAA0D;AAEzD;AAEAwvE,MAAAA,EAAE,CAACh8G,CAAH,GAAOw/C,OAAO,CAAEhT,CAAC,GAAG,CAAN,CAAd;AACAwvE,MAAAA,EAAE,CAAC97G,CAAH,GAAOs/C,OAAO,CAAEhT,CAAC,GAAG,CAAN,CAAd;AACAwvE,MAAAA,EAAE,CAAC3pF,CAAH,GAAOmtB,OAAO,CAAEhT,CAAC,GAAG,CAAN,CAAd,CANyD,CAQzD;;AAEAyvE,MAAAA,EAAE,CAACj8G,CAAH,GAAOw/C,OAAO,CAAEu8D,IAAI,GAAGvvE,CAAP,GAAW,CAAb,CAAd;AACAyvE,MAAAA,EAAE,CAAC/7G,CAAH,GAAOs/C,OAAO,CAAEu8D,IAAI,GAAGvvE,CAAP,GAAW,CAAb,CAAd;AACAyvE,MAAAA,EAAE,CAAC5pF,CAAH,GAAOmtB,OAAO,CAAEu8D,IAAI,GAAGvvE,CAAP,GAAW,CAAb,CAAd,CAZyD,CAczD;;AAEA1nB,MAAAA,CAAC,CAACkD,UAAF,CAAcg0F,EAAd,EAAkBC,EAAlB,EAAuB1yF,SAAvB,GAhByD,CAkBzD;;AAEAi2B,MAAAA,OAAO,CAAEhT,CAAC,GAAG,CAAN,CAAP,GAAmBgT,OAAO,CAAEu8D,IAAI,GAAGvvE,CAAP,GAAW,CAAb,CAAP,GAA0B1nB,CAAC,CAAC9kB,CAA/C;AACAw/C,MAAAA,OAAO,CAAEhT,CAAC,GAAG,CAAN,CAAP,GAAmBgT,OAAO,CAAEu8D,IAAI,GAAGvvE,CAAP,GAAW,CAAb,CAAP,GAA0B1nB,CAAC,CAAC5kB,CAA/C;AACAs/C,MAAAA,OAAO,CAAEhT,CAAC,GAAG,CAAN,CAAP,GAAmBgT,OAAO,CAAEu8D,IAAI,GAAGvvE,CAAP,GAAW,CAAb,CAAP,GAA0B1nB,CAAC,CAACuN,CAA/C;AAEA;AAED;AAED;;AAEDwpF,mBAAmB,CAACpkH,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAhC;AACAokH,mBAAmB,CAACpkH,SAApB,CAA8BoC,WAA9B,GAA4CgiH,mBAA5C;AAEA;;;;AAKA;;AAEA,SAASK,aAAT,CAAwBr1E,MAAxB,EAAgC+tE,aAAhC,EAAgD;AAE/CpsD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,eAAZ;;AAEA,MAAK,OAAO8xG,aAAP,KAAyB,QAA9B,EAAyC;AAExCxtF,IAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AAEAutF,IAAAA,aAAa,GAAGA,aAAa,CAACA,aAA9B;AAEA;;AAED,OAAKrtE,UAAL,GAAkB;AACjBV,IAAAA,MAAM,EAAEA,MADS;AAEjB+tE,IAAAA,aAAa,EAAEA;AAFE,GAAlB;AAKA,OAAKlsD,kBAAL,CAAyB,IAAIyzD,mBAAJ,CAAyBt1E,MAAzB,EAAiC+tE,aAAjC,CAAzB;AACA,OAAKpqD,aAAL;AAEA;;AAED0xD,aAAa,CAACzkH,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA1B;AACAykH,aAAa,CAACzkH,SAAd,CAAwBoC,WAAxB,GAAsCqiH,aAAtC;;AAEAA,aAAa,CAACzkH,SAAd,CAAwBg6B,MAAxB,GAAiC,YAAY;AAE5C,QAAMqW,IAAI,GAAG0gB,QAAQ,CAAC/wD,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,CAAb;AAEA,QAAM6uC,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AAEA,SAAOu1E,QAAQ,CAAEv1E,MAAF,EAAUiB,IAAV,CAAf;AAEA,CARD,EAUA;;;AAEA,SAASq0E,mBAAT,CAA8Bt1E,MAA9B,EAAsC+tE,aAAtC,EAAsD;AAErD/yD,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBV,IAAAA,MAAM,EAAEA,MADS;AAEjB+tE,IAAAA,aAAa,EAAEA;AAFE,GAAlB;AAKAA,EAAAA,aAAa,GAAGA,aAAa,IAAI,EAAjC,CAXqD,CAarD;;AAEA,QAAM1vD,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CAlBqD,CAoBrD;;AAEA,MAAIsN,UAAU,GAAG,CAAjB;AACA,MAAIc,UAAU,GAAG,CAAjB,CAvBqD,CAyBrD;;AAEA,MAAKr2D,KAAK,CAACoC,OAAN,CAAeitC,MAAf,MAA4B,KAAjC,EAAyC;AAExC6tE,IAAAA,QAAQ,CAAE7tE,MAAF,CAAR;AAEA,GAJD,MAIO;AAEN,SAAM,IAAIluC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGkuC,MAAM,CAACvvC,MAA5B,EAAoCqB,CAAC,EAArC,EAA2C;AAE1C+7G,MAAAA,QAAQ,CAAE7tE,MAAM,CAAEluC,CAAF,CAAR,CAAR;AAEA,WAAK4pD,QAAL,CAAewK,UAAf,EAA2Bc,UAA3B,EAAuCl1D,CAAvC,EAJ0C,CAIE;;AAE5Co0D,MAAAA,UAAU,IAAIc,UAAd;AACAA,MAAAA,UAAU,GAAG,CAAb;AAEA;AAED,GA5CoD,CA8CrD;;;AAEA,OAAKzL,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB,EAnDqD,CAsDrD;;AAEA,WAASi1D,QAAT,CAAmBltE,KAAnB,EAA2B;AAE1B,UAAM60E,WAAW,GAAG98D,QAAQ,CAACjoD,MAAT,GAAkB,CAAtC;AACA,UAAM4yC,MAAM,GAAG1C,KAAK,CAACuuE,aAAN,CAAqBnB,aAArB,CAAf;AAEA,QAAI0H,aAAa,GAAGpyE,MAAM,CAAC1C,KAA3B;AACA,UAAM+0E,UAAU,GAAGryE,MAAM,CAACiqE,KAA1B,CAN0B,CAQ1B;;AAEA,QAAKL,UAAU,CAACE,WAAX,CAAwBsI,aAAxB,MAA4C,KAAjD,EAAyD;AAExDA,MAAAA,aAAa,GAAGA,aAAa,CAACtG,OAAd,EAAhB;AAEA;;AAED,SAAM,IAAIr9G,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGwjH,UAAU,CAACjlH,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErD,YAAM6jH,SAAS,GAAGD,UAAU,CAAE5jH,CAAF,CAA5B;;AAEA,UAAKm7G,UAAU,CAACE,WAAX,CAAwBwI,SAAxB,MAAwC,IAA7C,EAAoD;AAEnDD,QAAAA,UAAU,CAAE5jH,CAAF,CAAV,GAAkB6jH,SAAS,CAACxG,OAAV,EAAlB;AAEA;AAED;;AAED,UAAM11D,KAAK,GAAGwzD,UAAU,CAACI,gBAAX,CAA6BoI,aAA7B,EAA4CC,UAA5C,CAAd,CA5B0B,CA8B1B;;AAEA,SAAM,IAAI5jH,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGwjH,UAAU,CAACjlH,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErD,YAAM6jH,SAAS,GAAGD,UAAU,CAAE5jH,CAAF,CAA5B;AACA2jH,MAAAA,aAAa,GAAGA,aAAa,CAAC5oG,MAAd,CAAsB8oG,SAAtB,CAAhB;AAEA,KArCyB,CAuC1B;;;AAEA,SAAM,IAAI7jH,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGujH,aAAa,CAAChlH,MAAnC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD,YAAM8vD,MAAM,GAAG6zD,aAAa,CAAE3jH,CAAF,CAA5B;AAEA4mD,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmC,CAAnC;AACAs/C,MAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACA29C,MAAAA,GAAG,CAAC39C,IAAJ,CAAU2mD,MAAM,CAACzoD,CAAjB,EAAoByoD,MAAM,CAACvoD,CAA3B,EANwD,CAMxB;AAEhC,KAjDyB,CAmD1B;;;AAEA,SAAM,IAAIvH,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGunD,KAAK,CAAChpD,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhD,YAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;AAEA,YAAM5B,CAAC,GAAGwpD,IAAI,CAAE,CAAF,CAAJ,GAAY87D,WAAtB;AACA,YAAMvlH,CAAC,GAAGypD,IAAI,CAAE,CAAF,CAAJ,GAAY87D,WAAtB;AACA,YAAM7gH,CAAC,GAAG+kD,IAAI,CAAE,CAAF,CAAJ,GAAY87D,WAAtB;AAEAn3D,MAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB0E,CAApB;AACAqyD,MAAAA,UAAU,IAAI,CAAd;AAEA;AAED;AAED;;AAEDsuD,mBAAmB,CAAC1kH,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAhC;AACA0kH,mBAAmB,CAAC1kH,SAApB,CAA8BoC,WAA9B,GAA4CsiH,mBAA5C;;AAEAA,mBAAmB,CAAC1kH,SAApB,CAA8Bg6B,MAA9B,GAAuC,YAAY;AAElD,QAAMqW,IAAI,GAAG+Z,cAAc,CAACpqD,SAAf,CAAyBg6B,MAAzB,CAAgCz5B,IAAhC,CAAsC,IAAtC,CAAb;AAEA,QAAM6uC,MAAM,GAAG,KAAKU,UAAL,CAAgBV,MAA/B;AAEA,SAAOu1E,QAAQ,CAAEv1E,MAAF,EAAUiB,IAAV,CAAf;AAEA,CARD,EAUA;;;AAEA,SAASs0E,QAAT,CAAmBv1E,MAAnB,EAA2BiB,IAA3B,EAAkC;AAEjCA,EAAAA,IAAI,CAACjB,MAAL,GAAc,EAAd;;AAEA,MAAKrvC,KAAK,CAACoC,OAAN,CAAeitC,MAAf,CAAL,EAA+B;AAE9B,SAAM,IAAIluC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8tC,MAAM,CAACvvC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAM6uC,KAAK,GAAGX,MAAM,CAAEluC,CAAF,CAApB;AAEAmvC,MAAAA,IAAI,CAACjB,MAAL,CAAY/kC,IAAZ,CAAkB0lC,KAAK,CAAC9iB,IAAxB;AAEA;AAED,GAVD,MAUO;AAENojB,IAAAA,IAAI,CAACjB,MAAL,CAAY/kC,IAAZ,CAAkB+kC,MAAM,CAACniB,IAAzB;AAEA;;AAED,SAAOojB,IAAP;AAEA;AAED;;;;;;AAKA,SAAS20E,aAAT,CAAwBn1E,QAAxB,EAAkCo1E,cAAlC,EAAmD;AAElD76D,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,eAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBm1E,IAAAA,cAAc,EAAEA;AADC,GAAlB;AAIAA,EAAAA,cAAc,GAAKA,cAAc,KAAKhjH,SAArB,GAAmCgjH,cAAnC,GAAoD,CAArE,CAVkD,CAYlD;;AAEA,QAAMn9D,QAAQ,GAAG,EAAjB,CAdkD,CAgBlD;;AAEA,QAAMo9D,YAAY,GAAGhmH,IAAI,CAAC8vB,GAAL,CAAUzC,SAAS,CAACC,OAAV,GAAoBy4F,cAA9B,CAArB;AACA,QAAMlS,IAAI,GAAG,CAAE,CAAF,EAAK,CAAL,CAAb;AAAA,QAAuBC,KAAK,GAAG,EAA/B;AACA,MAAIC,KAAJ,EAAWC,KAAX,EAAkBryG,GAAlB;AACA,QAAMH,IAAI,GAAG,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAb,CArBkD,CAuBlD;;AAEA,MAAIitD,SAAJ;;AAEA,MAAK9d,QAAQ,CAAC4a,gBAAd,EAAiC;AAEhCkD,IAAAA,SAAS,GAAG,IAAIoD,QAAJ,EAAZ;AACApD,IAAAA,SAAS,CAACsD,kBAAV,CAA8BphB,QAA9B;AAEA,GALD,MAKO;AAEN8d,IAAAA,SAAS,GAAG9d,QAAQ,CAACxf,KAAT,EAAZ;AAEA;;AAEDs9B,EAAAA,SAAS,CAACoF,aAAV;AACApF,EAAAA,SAAS,CAAC1B,kBAAV;AAEA,QAAMk5D,cAAc,GAAGx3D,SAAS,CAAC7F,QAAjC;AACA,QAAMe,KAAK,GAAG8E,SAAS,CAAC9E,KAAxB,CA1CkD,CA4ClD;;AAEA,OAAM,IAAI3nD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGunD,KAAK,CAAChpD,MAA3B,EAAmCqB,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhD,UAAM4nD,IAAI,GAAGD,KAAK,CAAE3nD,CAAF,CAAlB;;AAEA,SAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9Bk+D,MAAAA,KAAK,GAAGnqD,IAAI,CAAEpoD,IAAI,CAAEq0C,CAAF,CAAN,CAAZ;AACAm+D,MAAAA,KAAK,GAAGpqD,IAAI,CAAEpoD,IAAI,CAAE,CAAEq0C,CAAC,GAAG,CAAN,IAAY,CAAd,CAAN,CAAZ;AACAg+D,MAAAA,IAAI,CAAE,CAAF,CAAJ,GAAY7zG,IAAI,CAAC8E,GAAL,CAAUivG,KAAV,EAAiBC,KAAjB,CAAZ;AACAH,MAAAA,IAAI,CAAE,CAAF,CAAJ,GAAY7zG,IAAI,CAAC+E,GAAL,CAAUgvG,KAAV,EAAiBC,KAAjB,CAAZ;AAEAryG,MAAAA,GAAG,GAAGkyG,IAAI,CAAE,CAAF,CAAJ,GAAY,GAAZ,GAAkBA,IAAI,CAAE,CAAF,CAA5B;;AAEA,UAAKC,KAAK,CAAEnyG,GAAF,CAAL,KAAiBoB,SAAtB,EAAkC;AAEjC+wG,QAAAA,KAAK,CAAEnyG,GAAF,CAAL,GAAe;AAAEilD,UAAAA,MAAM,EAAEitD,IAAI,CAAE,CAAF,CAAd;AAAqBhtD,UAAAA,MAAM,EAAEgtD,IAAI,CAAE,CAAF,CAAjC;AAAwCqS,UAAAA,KAAK,EAAElkH,CAA/C;AAAkDmkH,UAAAA,KAAK,EAAEpjH;AAAzD,SAAf;AAEA,OAJD,MAIO;AAEN+wG,QAAAA,KAAK,CAAEnyG,GAAF,CAAL,CAAawkH,KAAb,GAAqBnkH,CAArB;AAEA;AAED;AAED,GAvEiD,CAyElD;;;AAEA,OAAML,GAAN,IAAamyG,KAAb,EAAqB;AAEpB,UAAMvsG,CAAC,GAAGusG,KAAK,CAAEnyG,GAAF,CAAf,CAFoB,CAIpB;;AAEA,QAAK4F,CAAC,CAAC4+G,KAAF,KAAYpjH,SAAZ,IAAyB4mD,KAAK,CAAEpiD,CAAC,CAAC2+G,KAAJ,CAAL,CAAiBvhF,MAAjB,CAAwBpS,GAAxB,CAA6Bo3B,KAAK,CAAEpiD,CAAC,CAAC4+G,KAAJ,CAAL,CAAiBxhF,MAA9C,KAA0DqhF,YAAxF,EAAuG;AAEtG,UAAIl0D,MAAM,GAAGm0D,cAAc,CAAE1+G,CAAC,CAACq/C,MAAJ,CAA3B;AACAgC,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEAo2B,MAAAA,MAAM,GAAGm0D,cAAc,CAAE1+G,CAAC,CAACs/C,MAAJ,CAAvB;AACA+B,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C;AAEA;AAED,GA3FiD,CA6FlD;;;AAEA,OAAKjvB,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AAEA;;AAEDk9D,aAAa,CAAChlH,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAA1B;AACAglH,aAAa,CAAChlH,SAAd,CAAwBoC,WAAxB,GAAsC4iH,aAAtC;AAEA;;;;AAKA;;AAEA,SAASM,gBAAT,CAA2BC,SAA3B,EAAsCC,YAAtC,EAAoD16G,MAApD,EAA4DgrG,cAA5D,EAA4E5gD,cAA5E,EAA4FuwD,SAA5F,EAAuGvC,UAAvG,EAAmHC,WAAnH,EAAiI;AAEhIpyD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,kBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBy1E,IAAAA,SAAS,EAAEA,SADM;AAEjBC,IAAAA,YAAY,EAAEA,YAFG;AAGjB16G,IAAAA,MAAM,EAAEA,MAHS;AAIjBgrG,IAAAA,cAAc,EAAEA,cAJC;AAKjB5gD,IAAAA,cAAc,EAAEA,cALC;AAMjBuwD,IAAAA,SAAS,EAAEA,SANM;AAOjBvC,IAAAA,UAAU,EAAEA,UAPK;AAQjBC,IAAAA,WAAW,EAAEA;AARI,GAAlB;AAWA,OAAKlyD,kBAAL,CAAyB,IAAIy0D,sBAAJ,CAA4BH,SAA5B,EAAuCC,YAAvC,EAAqD16G,MAArD,EAA6DgrG,cAA7D,EAA6E5gD,cAA7E,EAA6FuwD,SAA7F,EAAwGvC,UAAxG,EAAoHC,WAApH,CAAzB;AACA,OAAKpwD,aAAL;AAEA;;AAEDuyD,gBAAgB,CAACtlH,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA7B;AACAslH,gBAAgB,CAACtlH,SAAjB,CAA2BoC,WAA3B,GAAyCkjH,gBAAzC,EAEA;;AAEA,SAASI,sBAAT,CAAiCH,SAAjC,EAA4CC,YAA5C,EAA0D16G,MAA1D,EAAkEgrG,cAAlE,EAAkF5gD,cAAlF,EAAkGuwD,SAAlG,EAA6GvC,UAA7G,EAAyHC,WAAzH,EAAuI;AAEtI/4D,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,wBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjBy1E,IAAAA,SAAS,EAAEA,SADM;AAEjBC,IAAAA,YAAY,EAAEA,YAFG;AAGjB16G,IAAAA,MAAM,EAAEA,MAHS;AAIjBgrG,IAAAA,cAAc,EAAEA,cAJC;AAKjB5gD,IAAAA,cAAc,EAAEA,cALC;AAMjBuwD,IAAAA,SAAS,EAAEA,SANM;AAOjBvC,IAAAA,UAAU,EAAEA,UAPK;AAQjBC,IAAAA,WAAW,EAAEA;AARI,GAAlB;AAWA,QAAM9hH,KAAK,GAAG,IAAd;AAEAkkH,EAAAA,SAAS,GAAGA,SAAS,KAAKtjH,SAAd,GAA0BsjH,SAA1B,GAAsC,CAAlD;AACAC,EAAAA,YAAY,GAAGA,YAAY,KAAKvjH,SAAjB,GAA6BujH,YAA7B,GAA4C,CAA3D;AACA16G,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AAEAgrG,EAAAA,cAAc,GAAG52G,IAAI,CAACwE,KAAL,CAAYoyG,cAAZ,KAAgC,CAAjD;AACA5gD,EAAAA,cAAc,GAAGh2D,IAAI,CAACwE,KAAL,CAAYwxD,cAAZ,KAAgC,CAAjD;AAEAuwD,EAAAA,SAAS,GAAGA,SAAS,KAAKxjH,SAAd,GAA0BwjH,SAA1B,GAAsC,KAAlD;AACAvC,EAAAA,UAAU,GAAGA,UAAU,KAAKjhH,SAAf,GAA2BihH,UAA3B,GAAwC,GAArD;AACAC,EAAAA,WAAW,GAAGA,WAAW,KAAKlhH,SAAhB,GAA4BkhH,WAA5B,GAA0CjkH,IAAI,CAACutB,EAAL,GAAU,CAAlE,CA5BsI,CA8BtI;;AAEA,QAAMghC,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CAnCsI,CAqCtI;;AAEA,MAAIv9C,KAAK,GAAG,CAAZ;AACA,QAAMk7G,UAAU,GAAG,EAAnB;AACA,QAAMj9B,UAAU,GAAG59E,MAAM,GAAG,CAA5B;AACA,MAAIwqD,UAAU,GAAG,CAAjB,CA1CsI,CA4CtI;;AAEAswD,EAAAA,aAAa;;AAEb,MAAKH,SAAS,KAAK,KAAnB,EAA2B;AAE1B,QAAKF,SAAS,GAAG,CAAjB,EAAqBM,WAAW,CAAE,IAAF,CAAX;AACrB,QAAKL,YAAY,GAAG,CAApB,EAAwBK,WAAW,CAAE,KAAF,CAAX;AAExB,GArDqI,CAuDtI;;;AAEA,OAAKl7D,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;;AAEA,WAAS49D,aAAT,GAAyB;AAExB,UAAM/hF,MAAM,GAAG,IAAIpC,OAAJ,EAAf;AACA,UAAMuvB,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AAEA,QAAI20B,UAAU,GAAG,CAAjB,CALwB,CAOxB;;AACA,UAAM0vD,KAAK,GAAG,CAAEN,YAAY,GAAGD,SAAjB,IAA+Bz6G,MAA7C,CARwB,CAUxB;;AAEA,SAAM,IAAIrC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIysD,cAAtB,EAAsCzsD,CAAC,EAAvC,EAA6C;AAE5C,YAAMs9G,QAAQ,GAAG,EAAjB;AAEA,YAAMrmH,CAAC,GAAG+I,CAAC,GAAGysD,cAAd,CAJ4C,CAM5C;;AAEA,YAAMjxB,MAAM,GAAGvkC,CAAC,IAAK8lH,YAAY,GAAGD,SAApB,CAAD,GAAmCA,SAAlD;;AAEA,WAAM,IAAIh9G,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIutG,cAAtB,EAAsCvtG,CAAC,EAAvC,EAA6C;AAE5C,cAAMgzC,CAAC,GAAGhzC,CAAC,GAAGutG,cAAd;AAEA,cAAMv+E,KAAK,GAAGgkB,CAAC,GAAG4nE,WAAJ,GAAkBD,UAAhC;AAEA,cAAM8C,QAAQ,GAAG9mH,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAjB;AACA,cAAM0uF,QAAQ,GAAG/mH,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAjB,CAP4C,CAS5C;;AAEAy5B,QAAAA,MAAM,CAACzoD,CAAP,GAAW07B,MAAM,GAAG+hF,QAApB;AACAh1D,QAAAA,MAAM,CAACvoD,CAAP,GAAW,CAAE/I,CAAF,GAAMoL,MAAN,GAAe49E,UAA1B;AACA13B,QAAAA,MAAM,CAACp2B,CAAP,GAAWqJ,MAAM,GAAGgiF,QAApB;AACAn+D,QAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EAd4C,CAgB5C;;AAEAiJ,QAAAA,MAAM,CAACnU,GAAP,CAAYs2F,QAAZ,EAAsBF,KAAtB,EAA6BG,QAA7B,EAAwCn0F,SAAxC;AACAi2B,QAAAA,OAAO,CAAC19C,IAAR,CAAcw5B,MAAM,CAACt7B,CAArB,EAAwBs7B,MAAM,CAACp7B,CAA/B,EAAkCo7B,MAAM,CAACjJ,CAAzC,EAnB4C,CAqB5C;;AAEAotB,QAAAA,GAAG,CAAC39C,IAAJ,CAAUkxC,CAAV,EAAa,IAAI77C,CAAjB,EAvB4C,CAyB5C;;AAEAqmH,QAAAA,QAAQ,CAAC17G,IAAT,CAAeI,KAAK,EAApB;AAEA,OAvC2C,CAyC5C;;;AAEAk7G,MAAAA,UAAU,CAACt7G,IAAX,CAAiB07G,QAAjB;AAEA,KAzDuB,CA2DxB;;;AAEA,SAAM,IAAIx9G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGutG,cAArB,EAAqCvtG,CAAC,EAAtC,EAA4C;AAE3C,WAAM,IAAIE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGysD,cAArB,EAAqCzsD,CAAC,EAAtC,EAA4C;AAE3C;AAEA,cAAMnJ,CAAC,GAAGqmH,UAAU,CAAEl9G,CAAF,CAAV,CAAiBF,CAAjB,CAAV;AACA,cAAMlJ,CAAC,GAAGsmH,UAAU,CAAEl9G,CAAC,GAAG,CAAN,CAAV,CAAqBF,CAArB,CAAV;AACA,cAAMxE,CAAC,GAAG4hH,UAAU,CAAEl9G,CAAC,GAAG,CAAN,CAAV,CAAqBF,CAAC,GAAG,CAAzB,CAAV;AACA,cAAMwtB,CAAC,GAAG4vF,UAAU,CAAEl9G,CAAF,CAAV,CAAiBF,CAAC,GAAG,CAArB,CAAV,CAP2C,CAS3C;;AAEAklD,QAAAA,OAAO,CAACpjD,IAAR,CAAc/K,CAAd,EAAiBD,CAAjB,EAAoB02B,CAApB;AACA03B,QAAAA,OAAO,CAACpjD,IAAR,CAAchL,CAAd,EAAiB0E,CAAjB,EAAoBgyB,CAApB,EAZ2C,CAc3C;;AAEAqgC,QAAAA,UAAU,IAAI,CAAd;AAEA;AAED,KAnFuB,CAqFxB;;;AAEA/0D,IAAAA,KAAK,CAACypD,QAAN,CAAgBwK,UAAhB,EAA4Bc,UAA5B,EAAwC,CAAxC,EAvFwB,CAyFxB;;AAEAd,IAAAA,UAAU,IAAIc,UAAd;AAEA;;AAED,WAASyvD,WAAT,CAAsBh+G,GAAtB,EAA4B;AAE3B,QAAIq+G,gBAAJ,EAAsBC,cAAtB;AAEA,UAAMzrF,EAAE,GAAG,IAAI7K,OAAJ,EAAX;AACA,UAAMmhC,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AAEA,QAAI20B,UAAU,GAAG,CAAjB;AAEA,UAAMnyB,MAAM,GAAKp8B,GAAG,KAAK,IAAV,GAAmB09G,SAAnB,GAA+BC,YAA9C;AACA,UAAM3mG,IAAI,GAAKhX,GAAG,KAAK,IAAV,GAAmB,CAAnB,GAAuB,CAAE,CAAtC,CAV2B,CAY3B;;AACAq+G,IAAAA,gBAAgB,GAAGz7G,KAAnB,CAb2B,CAe3B;AACA;AACA;;AAEA,SAAM,IAAIlC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIutG,cAAtB,EAAsCvtG,CAAC,EAAvC,EAA6C;AAE5C;AAEAu/C,MAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAf,EAAkBq+E,UAAU,GAAG7pE,IAA/B,EAAqC,CAArC,EAJ4C,CAM5C;;AAEAkpC,MAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiBwU,IAAjB,EAAuB,CAAvB,EAR4C,CAU5C;;AAEAmpC,MAAAA,GAAG,CAAC39C,IAAJ,CAAU,GAAV,EAAe,GAAf,EAZ4C,CAc5C;;AAEAI,MAAAA,KAAK;AAEL,KArC0B,CAuC3B;;;AAEA07G,IAAAA,cAAc,GAAG17G,KAAjB,CAzC2B,CA2C3B;;AAEA,SAAM,IAAIlC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIutG,cAAtB,EAAsCvtG,CAAC,EAAvC,EAA6C;AAE5C,YAAMgzC,CAAC,GAAGhzC,CAAC,GAAGutG,cAAd;AACA,YAAMv+E,KAAK,GAAGgkB,CAAC,GAAG4nE,WAAJ,GAAkBD,UAAhC;AAEA,YAAM+C,QAAQ,GAAG/mH,IAAI,CAAC8vB,GAAL,CAAUuI,KAAV,CAAjB;AACA,YAAMyuF,QAAQ,GAAG9mH,IAAI,CAAC+vB,GAAL,CAAUsI,KAAV,CAAjB,CAN4C,CAQ5C;;AAEAy5B,MAAAA,MAAM,CAACzoD,CAAP,GAAW07B,MAAM,GAAG+hF,QAApB;AACAh1D,MAAAA,MAAM,CAACvoD,CAAP,GAAWigF,UAAU,GAAG7pE,IAAxB;AACAmyC,MAAAA,MAAM,CAACp2B,CAAP,GAAWqJ,MAAM,GAAGgiF,QAApB;AACAn+D,MAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EAb4C,CAe5C;;AAEAmtB,MAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiBwU,IAAjB,EAAuB,CAAvB,EAjB4C,CAmB5C;;AAEA6b,MAAAA,EAAE,CAACnyB,CAAH,GAAS09G,QAAQ,GAAG,GAAb,GAAqB,GAA5B;AACAvrF,MAAAA,EAAE,CAACjyB,CAAH,GAASu9G,QAAQ,GAAG,GAAX,GAAiBnnG,IAAnB,GAA4B,GAAnC;AACAmpC,MAAAA,GAAG,CAAC39C,IAAJ,CAAUqwB,EAAE,CAACnyB,CAAb,EAAgBmyB,EAAE,CAACjyB,CAAnB,EAvB4C,CAyB5C;;AAEAgC,MAAAA,KAAK;AAEL,KA1E0B,CA4E3B;;;AAEA,SAAM,IAAIlC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGutG,cAArB,EAAqCvtG,CAAC,EAAtC,EAA4C;AAE3C,YAAMxE,CAAC,GAAGmiH,gBAAgB,GAAG39G,CAA7B;AACA,YAAMrH,CAAC,GAAGilH,cAAc,GAAG59G,CAA3B;;AAEA,UAAKV,GAAG,KAAK,IAAb,EAAoB;AAEnB;AAEA4lD,QAAAA,OAAO,CAACpjD,IAAR,CAAcnJ,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwB6C,CAAxB;AAEA,OAND,MAMO;AAEN;AAEA0pD,QAAAA,OAAO,CAACpjD,IAAR,CAAcnJ,CAAC,GAAG,CAAlB,EAAqBA,CAArB,EAAwB6C,CAAxB;AAEA;;AAEDqyD,MAAAA,UAAU,IAAI,CAAd;AAEA,KAnG0B,CAqG3B;;;AAEA/0D,IAAAA,KAAK,CAACypD,QAAN,CAAgBwK,UAAhB,EAA4Bc,UAA5B,EAAwCvuD,GAAG,KAAK,IAAR,GAAe,CAAf,GAAmB,CAA3D,EAvG2B,CAyG3B;;AAEAytD,IAAAA,UAAU,IAAIc,UAAd;AAEA;AAED;;AAEDsvD,sBAAsB,CAAC1lH,SAAvB,GAAmCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAnC;AACA0lH,sBAAsB,CAAC1lH,SAAvB,CAAiCoC,WAAjC,GAA+CsjH,sBAA/C;AAEA;;;AAIA;;AAEA,SAASU,YAAT,CAAuBniF,MAAvB,EAA+Bn5B,MAA/B,EAAuCgrG,cAAvC,EAAuD5gD,cAAvD,EAAuEuwD,SAAvE,EAAkFvC,UAAlF,EAA8FC,WAA9F,EAA4G;AAE3GmC,EAAAA,gBAAgB,CAAC/kH,IAAjB,CAAuB,IAAvB,EAA6B,CAA7B,EAAgC0jC,MAAhC,EAAwCn5B,MAAxC,EAAgDgrG,cAAhD,EAAgE5gD,cAAhE,EAAgFuwD,SAAhF,EAA2FvC,UAA3F,EAAuGC,WAAvG;AAEA,OAAK93G,IAAL,GAAY,cAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjBn5B,IAAAA,MAAM,EAAEA,MAFS;AAGjBgrG,IAAAA,cAAc,EAAEA,cAHC;AAIjB5gD,IAAAA,cAAc,EAAEA,cAJC;AAKjBuwD,IAAAA,SAAS,EAAEA,SALM;AAMjBvC,IAAAA,UAAU,EAAEA,UANK;AAOjBC,IAAAA,WAAW,EAAEA;AAPI,GAAlB;AAUA;;AAEDiD,YAAY,CAACpmH,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAeyrF,gBAAgB,CAACtlH,SAAhC,CAAzB;AACAomH,YAAY,CAACpmH,SAAb,CAAuBoC,WAAvB,GAAqCgkH,YAArC,EAEA;;AAEA,SAASC,kBAAT,CAA6BpiF,MAA7B,EAAqCn5B,MAArC,EAA6CgrG,cAA7C,EAA6D5gD,cAA7D,EAA6EuwD,SAA7E,EAAwFvC,UAAxF,EAAoGC,WAApG,EAAkH;AAEjHuC,EAAAA,sBAAsB,CAACnlH,IAAvB,CAA6B,IAA7B,EAAmC,CAAnC,EAAsC0jC,MAAtC,EAA8Cn5B,MAA9C,EAAsDgrG,cAAtD,EAAsE5gD,cAAtE,EAAsFuwD,SAAtF,EAAiGvC,UAAjG,EAA6GC,WAA7G;AAEA,OAAK93G,IAAL,GAAY,oBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjBn5B,IAAAA,MAAM,EAAEA,MAFS;AAGjBgrG,IAAAA,cAAc,EAAEA,cAHC;AAIjB5gD,IAAAA,cAAc,EAAEA,cAJC;AAKjBuwD,IAAAA,SAAS,EAAEA,SALM;AAMjBvC,IAAAA,UAAU,EAAEA,UANK;AAOjBC,IAAAA,WAAW,EAAEA;AAPI,GAAlB;AAUA;;AAEDkD,kBAAkB,CAACrmH,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAe6rF,sBAAsB,CAAC1lH,SAAtC,CAA/B;AACAqmH,kBAAkB,CAACrmH,SAAnB,CAA6BoC,WAA7B,GAA2CikH,kBAA3C;AAEA;;;;;AAMA;;AAEA,SAASC,cAAT,CAAyBriF,MAAzB,EAAiCkgF,QAAjC,EAA2CjB,UAA3C,EAAuDC,WAAvD,EAAqE;AAEpEpyD,EAAAA,QAAQ,CAACxwD,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,gBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjBkgF,IAAAA,QAAQ,EAAEA,QAFO;AAGjBjB,IAAAA,UAAU,EAAEA,UAHK;AAIjBC,IAAAA,WAAW,EAAEA;AAJI,GAAlB;AAOA,OAAKlyD,kBAAL,CAAyB,IAAIs1D,oBAAJ,CAA0BtiF,MAA1B,EAAkCkgF,QAAlC,EAA4CjB,UAA5C,EAAwDC,WAAxD,CAAzB;AACA,OAAKpwD,aAAL;AAEA;;AAEDuzD,cAAc,CAACtmH,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAek3B,QAAQ,CAAC/wD,SAAxB,CAA3B;AACAsmH,cAAc,CAACtmH,SAAf,CAAyBoC,WAAzB,GAAuCkkH,cAAvC,EAEA;;AAEA,SAASC,oBAAT,CAA+BtiF,MAA/B,EAAuCkgF,QAAvC,EAAiDjB,UAAjD,EAA6DC,WAA7D,EAA2E;AAE1E/4D,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,sBAAZ;AAEA,OAAKykC,UAAL,GAAkB;AACjB7L,IAAAA,MAAM,EAAEA,MADS;AAEjBkgF,IAAAA,QAAQ,EAAEA,QAFO;AAGjBjB,IAAAA,UAAU,EAAEA,UAHK;AAIjBC,IAAAA,WAAW,EAAEA;AAJI,GAAlB;AAOAl/E,EAAAA,MAAM,GAAGA,MAAM,IAAI,CAAnB;AACAkgF,EAAAA,QAAQ,GAAGA,QAAQ,KAAKliH,SAAb,GAAyB/C,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAakgH,QAAb,CAAzB,GAAmD,CAA9D;AAEAjB,EAAAA,UAAU,GAAGA,UAAU,KAAKjhH,SAAf,GAA2BihH,UAA3B,GAAwC,CAArD;AACAC,EAAAA,WAAW,GAAGA,WAAW,KAAKlhH,SAAhB,GAA4BkhH,WAA5B,GAA0CjkH,IAAI,CAACutB,EAAL,GAAU,CAAlE,CAjB0E,CAmB1E;;AAEA,QAAMghC,OAAO,GAAG,EAAhB;AACA,QAAM3F,QAAQ,GAAG,EAAjB;AACA,QAAMC,OAAO,GAAG,EAAhB;AACA,QAAMC,GAAG,GAAG,EAAZ,CAxB0E,CA0B1E;;AAEA,QAAMgJ,MAAM,GAAG,IAAIvvB,OAAJ,EAAf;AACA,QAAM/G,EAAE,GAAG,IAAI7K,OAAJ,EAAX,CA7B0E,CA+B1E;;AAEAi4B,EAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACA09C,EAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB;AACA29C,EAAAA,GAAG,CAAC39C,IAAJ,CAAU,GAAV,EAAe,GAAf;;AAEA,OAAM,IAAI7K,CAAC,GAAG,CAAR,EAAW0B,CAAC,GAAG,CAArB,EAAwB1B,CAAC,IAAI2kH,QAA7B,EAAuC3kH,CAAC,IAAK0B,CAAC,IAAI,CAAlD,EAAsD;AAErD,UAAM8iH,OAAO,GAAGd,UAAU,GAAG1jH,CAAC,GAAG2kH,QAAJ,GAAehB,WAA5C,CAFqD,CAIrD;;AAEAnyD,IAAAA,MAAM,CAACzoD,CAAP,GAAW07B,MAAM,GAAG/kC,IAAI,CAAC8vB,GAAL,CAAUg1F,OAAV,CAApB;AACAhzD,IAAAA,MAAM,CAACvoD,CAAP,GAAWw7B,MAAM,GAAG/kC,IAAI,CAAC+vB,GAAL,CAAU+0F,OAAV,CAApB;AAEAl8D,IAAAA,QAAQ,CAACz9C,IAAT,CAAe2mD,MAAM,CAACzoD,CAAtB,EAAyByoD,MAAM,CAACvoD,CAAhC,EAAmCuoD,MAAM,CAACp2B,CAA1C,EATqD,CAWrD;;AAEAmtB,IAAAA,OAAO,CAAC19C,IAAR,CAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAbqD,CAerD;;AAEAqwB,IAAAA,EAAE,CAACnyB,CAAH,GAAO,CAAEu/C,QAAQ,CAAE5mD,CAAF,CAAR,GAAgB+iC,MAAhB,GAAyB,CAA3B,IAAiC,CAAxC;AACAvJ,IAAAA,EAAE,CAACjyB,CAAH,GAAO,CAAEq/C,QAAQ,CAAE5mD,CAAC,GAAG,CAAN,CAAR,GAAoB+iC,MAApB,GAA6B,CAA/B,IAAqC,CAA5C;AAEA+jB,IAAAA,GAAG,CAAC39C,IAAJ,CAAUqwB,EAAE,CAACnyB,CAAb,EAAgBmyB,EAAE,CAACjyB,CAAnB;AAEA,GA3DyE,CA6D1E;;;AAEA,OAAM,IAAIvH,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIijH,QAAtB,EAAgCjjH,CAAC,EAAjC,EAAuC;AAEtCusD,IAAAA,OAAO,CAACpjD,IAAR,CAAcnJ,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwB,CAAxB;AAEA,GAnEyE,CAqE1E;;;AAEA,OAAKypD,QAAL,CAAe8C,OAAf;AACA,OAAK9hD,YAAL,CAAmB,UAAnB,EAA+B,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAA/B;AACA,OAAKn8C,YAAL,CAAmB,QAAnB,EAA6B,IAAI87C,sBAAJ,CAA4BM,OAA5B,EAAqC,CAArC,CAA7B;AACA,OAAKp8C,YAAL,CAAmB,IAAnB,EAAyB,IAAI87C,sBAAJ,CAA4BO,GAA5B,EAAiC,CAAjC,CAAzB;AAEA;;AAEDu+D,oBAAoB,CAACvmH,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAjC;AACAumH,oBAAoB,CAACvmH,SAArB,CAA+BoC,WAA/B,GAA6CmkH,oBAA7C;AAEA,IAAIC,UAAU,GAAG,aAAa5lH,MAAM,CAAC6lH,MAAP,CAAc;AAC3CC,EAAAA,SAAS,EAAE,IADgC;AAE3C5T,EAAAA,iBAAiB,EAAEA,iBAFwB;AAG3CO,EAAAA,kBAAkB,EAAEA,kBAHuB;AAI3CG,EAAAA,wBAAwB,EAAEA,wBAJiB;AAK3C4B,EAAAA,mBAAmB,EAAEA,mBALsB;AAM3CC,EAAAA,yBAAyB,EAAEA,yBANgB;AAO3CC,EAAAA,kBAAkB,EAAEA,kBAPuB;AAQ3CC,EAAAA,wBAAwB,EAAEA,wBARiB;AAS3CC,EAAAA,mBAAmB,EAAEA,mBATsB;AAU3CC,EAAAA,yBAAyB,EAAEA,yBAVgB;AAW3CC,EAAAA,oBAAoB,EAAEA,oBAXqB;AAY3CC,EAAAA,0BAA0B,EAAEA,0BAZe;AAa3C/B,EAAAA,kBAAkB,EAAEA,kBAbuB;AAc3CC,EAAAA,wBAAwB,EAAEA,wBAdiB;AAe3C+B,EAAAA,YAAY,EAAEA,YAf6B;AAgB3CK,EAAAA,kBAAkB,EAAEA,kBAhBuB;AAiB3CY,EAAAA,iBAAiB,EAAEA,iBAjBwB;AAkB3CG,EAAAA,uBAAuB,EAAEA,uBAlBkB;AAmB3CS,EAAAA,aAAa,EAAEA,aAnB4B;AAoB3CE,EAAAA,mBAAmB,EAAEA,mBApBsB;AAqB3C+K,EAAAA,YAAY,EAAEA,YArB6B;AAsB3CC,EAAAA,kBAAkB,EAAEA,kBAtBuB;AAuB3CI,EAAAA,cAAc,EAAEA,cAvB2B;AAwB3CK,EAAAA,oBAAoB,EAAEA,oBAxBqB;AAyB3CK,EAAAA,YAAY,EAAEA,YAzB6B;AA0B3CK,EAAAA,kBAAkB,EAAEA,kBA1BuB;AA2B3CniD,EAAAA,aAAa,EAAEA,aA3B4B;AA4B3CC,EAAAA,mBAAmB,EAAEA,mBA5BsB;AA6B3CsiD,EAAAA,aAAa,EAAEA,aA7B4B;AA8B3CE,EAAAA,mBAAmB,EAAEA,mBA9BsB;AA+B3CK,EAAAA,aAAa,EAAEA,aA/B4B;AAgC3CC,EAAAA,mBAAmB,EAAEA,mBAhCsB;AAiC3C5H,EAAAA,eAAe,EAAEA,eAjC0B;AAkC3CC,EAAAA,qBAAqB,EAAEA,qBAlCoB;AAmC3CiI,EAAAA,aAAa,EAAEA,aAnC4B;AAoC3CoB,EAAAA,YAAY,EAAEA,YApC6B;AAqC3CC,EAAAA,kBAAkB,EAAEA,kBArCuB;AAsC3Cf,EAAAA,gBAAgB,EAAEA,gBAtCyB;AAuC3CI,EAAAA,sBAAsB,EAAEA,sBAvCmB;AAwC3CY,EAAAA,cAAc,EAAEA,cAxC2B;AAyC3CC,EAAAA,oBAAoB,EAAEA,oBAzCqB;AA0C3CxxD,EAAAA,WAAW,EAAEA,WA1C8B;AA2C3CK,EAAAA,iBAAiB,EAAEA;AA3CwB,CAAd,CAA9B;AA8CA;;;;;;;;AAQA,SAASkwB,cAAT,CAAyBx1C,UAAzB,EAAsC;AAErCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,gBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb;AACA,OAAKo7C,WAAL,GAAmB,IAAnB;AAEA,OAAKkC,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDw1C,cAAc,CAACtlF,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA3B;AACAslF,cAAc,CAACtlF,SAAf,CAAyBoC,WAAzB,GAAuCkjF,cAAvC;AAEAA,cAAc,CAACtlF,SAAf,CAAyB0iG,gBAAzB,GAA4C,IAA5C;;AAEApd,cAAc,CAACtlF,SAAf,CAAyBswB,IAAzB,GAAgC,UAAWpR,MAAX,EAAoB;AAEnDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,SAAO,IAAP;AAEA,CARD;AAUA;;;;;AAIA,SAASgoH,iBAAT,CAA4B72E,UAA5B,EAAyC;AAExC8mB,EAAAA,cAAc,CAACr2D,IAAf,CAAqB,IAArB,EAA2BuvC,UAA3B;AAEA,OAAKzkC,IAAL,GAAY,mBAAZ;AAEA;;AAEDs7G,iBAAiB,CAAC3mH,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAe+8B,cAAc,CAAC52D,SAA9B,CAA9B;AACA2mH,iBAAiB,CAAC3mH,SAAlB,CAA4BoC,WAA5B,GAA0CukH,iBAA1C;AAEAA,iBAAiB,CAAC3mH,SAAlB,CAA4BuhF,mBAA5B,GAAkD,IAAlD;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoDA,SAASyD,oBAAT,CAA+Bl1C,UAA/B,EAA4C;AAE3CyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAKs2D,OAAL,GAAe;AAAE,gBAAY;AAAd,GAAf;AAEA,OAAKxrD,IAAL,GAAY,sBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb,CAR2C,CAQP;;AACpC,OAAKy9C,SAAL,GAAiB,GAAjB;AACA,OAAKC,SAAL,GAAiB,GAAjB;AAEA,OAAK71C,GAAL,GAAW,IAAX;AAEA,OAAK22C,QAAL,GAAgB,IAAhB;AACA,OAAKmC,iBAAL,GAAyB,GAAzB;AAEA,OAAKlC,KAAL,GAAa,IAAb;AACA,OAAKC,cAAL,GAAsB,GAAtB;AAEA,OAAKd,QAAL,GAAgB,IAAI59C,KAAJ,CAAW,QAAX,CAAhB;AACA,OAAK69C,iBAAL,GAAyB,GAAzB;AACA,OAAKwB,WAAL,GAAmB,IAAnB;AAEA,OAAKV,OAAL,GAAe,IAAf;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,aAAL,GAAqBj5B,qBAArB;AACA,OAAKk5B,WAAL,GAAmB,IAAIzzB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,OAAK0zB,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKC,YAAL,GAAoB,IAApB;AAEA,OAAKC,YAAL,GAAoB,IAApB;AAEA,OAAKb,QAAL,GAAgB,IAAhB;AAEA,OAAKgB,MAAL,GAAc,IAAd;AACA,OAAKI,eAAL,GAAuB,GAAvB;AAEA,OAAKF,eAAL,GAAuB,IAAvB;AAEA,OAAKQ,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AACA,OAAKC,gBAAL,GAAwB,OAAxB;AACA,OAAKC,iBAAL,GAAyB,OAAzB;AAEA,OAAKG,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AACA,OAAKC,YAAL,GAAoB,KAApB;AAEA,OAAKk9B,cAAL,GAAsB,KAAtB;AAEA,OAAKlgC,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDk1C,oBAAoB,CAAChlF,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAAjC;AACAglF,oBAAoB,CAAChlF,SAArB,CAA+BoC,WAA/B,GAA6C4iF,oBAA7C;AAEAA,oBAAoB,CAAChlF,SAArB,CAA+BqmF,sBAA/B,GAAwD,IAAxD;;AAEArB,oBAAoB,CAAChlF,SAArB,CAA+BswB,IAA/B,GAAsC,UAAWpR,MAAX,EAAoB;AAEzDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAK23C,OAAL,GAAe;AAAE,gBAAY;AAAd,GAAf;AAEA,OAAKl4D,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AACA,OAAKqjD,SAAL,GAAiB9iC,MAAM,CAAC8iC,SAAxB;AACA,OAAKC,SAAL,GAAiB/iC,MAAM,CAAC+iC,SAAxB;AAEA,OAAK71C,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK22C,QAAL,GAAgB7jC,MAAM,CAAC6jC,QAAvB;AACA,OAAKmC,iBAAL,GAAyBhmC,MAAM,CAACgmC,iBAAhC;AAEA,OAAKlC,KAAL,GAAa9jC,MAAM,CAAC8jC,KAApB;AACA,OAAKC,cAAL,GAAsB/jC,MAAM,CAAC+jC,cAA7B;AAEA,OAAKd,QAAL,CAAc7xB,IAAd,CAAoBpR,MAAM,CAACijC,QAA3B;AACA,OAAKyB,WAAL,GAAmB1kC,MAAM,CAAC0kC,WAA1B;AACA,OAAKxB,iBAAL,GAAyBljC,MAAM,CAACkjC,iBAAhC;AAEA,OAAKc,OAAL,GAAehkC,MAAM,CAACgkC,OAAtB;AACA,OAAKC,SAAL,GAAiBjkC,MAAM,CAACikC,SAAxB;AAEA,OAAKC,SAAL,GAAiBlkC,MAAM,CAACkkC,SAAxB;AACA,OAAKC,aAAL,GAAqBnkC,MAAM,CAACmkC,aAA5B;AACA,OAAKC,WAAL,CAAiBhzB,IAAjB,CAAuBpR,MAAM,CAACokC,WAA9B;AAEA,OAAKC,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,OAAKC,YAAL,GAAoBxkC,MAAM,CAACwkC,YAA3B;AAEA,OAAKC,YAAL,GAAoBzkC,MAAM,CAACykC,YAA3B;AAEA,OAAKb,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKgB,MAAL,GAAc5kC,MAAM,CAAC4kC,MAArB;AACA,OAAKI,eAAL,GAAuBhlC,MAAM,CAACglC,eAA9B;AAEA,OAAKF,eAAL,GAAuB9kC,MAAM,CAAC8kC,eAA9B;AAEA,OAAKQ,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AACA,OAAKC,gBAAL,GAAwBxlC,MAAM,CAACwlC,gBAA/B;AACA,OAAKC,iBAAL,GAAyBzlC,MAAM,CAACylC,iBAAhC;AAEA,OAAKG,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,OAAKk9B,cAAL,GAAsB7iE,MAAM,CAAC6iE,cAA7B;AAEA,SAAO,IAAP;AAEA,CAzDD;AA2DA;;;;;;;;;;;;;;;;;;;;AAmBA,SAASkD,oBAAT,CAA+Bn1C,UAA/B,EAA4C;AAE3Ck1C,EAAAA,oBAAoB,CAACzkF,IAArB,CAA2B,IAA3B;AAEA,OAAKs2D,OAAL,GAAe;AAEd,gBAAY,EAFE;AAGd,gBAAY;AAHE,GAAf;AAOA,OAAKxrD,IAAL,GAAY,sBAAZ;AAEA,OAAKk3C,SAAL,GAAiB,GAAjB;AACA,OAAKE,YAAL,GAAoB,IAApB;AACA,OAAKD,kBAAL,GAA0B,GAA1B;AACA,OAAKE,qBAAL,GAA6B,IAA7B;AACA,OAAKE,oBAAL,GAA4B,IAAI/yB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAA5B;AACA,OAAK8yB,kBAAL,GAA0B,IAA1B;AAEA,OAAKoB,YAAL,GAAoB,GAApB,CApB2C,CAoBlB;;AAEzB,OAAK7B,KAAL,GAAa,IAAb,CAtB2C,CAsBxB;;AAEnB,OAAK+oB,YAAL,GAAoB,GAApB;AAEA,OAAKppB,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDm1C,oBAAoB,CAACjlF,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAemrD,oBAAoB,CAAChlF,SAApC,CAAjC;AACAilF,oBAAoB,CAACjlF,SAArB,CAA+BoC,WAA/B,GAA6C6iF,oBAA7C;AAEAA,oBAAoB,CAACjlF,SAArB,CAA+ByhG,sBAA/B,GAAwD,IAAxD;;AAEAxc,oBAAoB,CAACjlF,SAArB,CAA+BswB,IAA/B,GAAsC,UAAWpR,MAAX,EAAoB;AAEzD8lE,EAAAA,oBAAoB,CAAChlF,SAArB,CAA+BswB,IAA/B,CAAoC/vB,IAApC,CAA0C,IAA1C,EAAgD2e,MAAhD;AAEA,OAAK23C,OAAL,GAAe;AAEd,gBAAY,EAFE;AAGd,gBAAY;AAHE,GAAf;AAOA,OAAKtU,SAAL,GAAiBrjC,MAAM,CAACqjC,SAAxB;AACA,OAAKE,YAAL,GAAoBvjC,MAAM,CAACujC,YAA3B;AACA,OAAKD,kBAAL,GAA0BtjC,MAAM,CAACsjC,kBAAjC;AACA,OAAKE,qBAAL,GAA6BxjC,MAAM,CAACwjC,qBAApC;AACA,OAAKC,kBAAL,GAA0BzjC,MAAM,CAACyjC,kBAAjC;AACA,OAAKC,oBAAL,CAA0BtyB,IAA1B,CAAgCpR,MAAM,CAAC0jC,oBAAvC;AAEA,OAAKmB,YAAL,GAAoB7kC,MAAM,CAAC6kC,YAA3B;;AAEA,MAAK7kC,MAAM,CAACgjC,KAAZ,EAAoB;AAEnB,SAAKA,KAAL,GAAa,CAAE,KAAKA,KAAL,IAAc,IAAI39C,KAAJ,EAAhB,EAA8B+rB,IAA9B,CAAoCpR,MAAM,CAACgjC,KAA3C,CAAb;AAEA,GAJD,MAIO;AAEN,SAAKA,KAAL,GAAa,IAAb;AAEA;;AAED,OAAK+oB,YAAL,GAAoB/rD,MAAM,CAAC+rD,YAA3B;AAEA,SAAO,IAAP;AAEA,CAlCD;AAoCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmDA,SAAS6Z,iBAAT,CAA4Bh1C,UAA5B,EAAyC;AAExCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb,CANwC,CAMJ;;AACpC,OAAK89C,QAAL,GAAgB,IAAI99C,KAAJ,CAAW,QAAX,CAAhB;AACA,OAAK+9C,SAAL,GAAiB,EAAjB;AAEA,OAAKl2C,GAAL,GAAW,IAAX;AAEA,OAAK22C,QAAL,GAAgB,IAAhB;AACA,OAAKmC,iBAAL,GAAyB,GAAzB;AAEA,OAAKlC,KAAL,GAAa,IAAb;AACA,OAAKC,cAAL,GAAsB,GAAtB;AAEA,OAAKd,QAAL,GAAgB,IAAI59C,KAAJ,CAAW,QAAX,CAAhB;AACA,OAAK69C,iBAAL,GAAyB,GAAzB;AACA,OAAKwB,WAAL,GAAmB,IAAnB;AAEA,OAAKV,OAAL,GAAe,IAAf;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,aAAL,GAAqBj5B,qBAArB;AACA,OAAKk5B,WAAL,GAAmB,IAAIzzB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,OAAK0zB,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKI,WAAL,GAAmB,IAAnB;AAEA,OAAKf,QAAL,GAAgB,IAAhB;AAEA,OAAKgB,MAAL,GAAc,IAAd;AACA,OAAKG,OAAL,GAAephC,iBAAf;AACA,OAAKkhC,YAAL,GAAoB,CAApB;AACA,OAAKC,eAAL,GAAuB,IAAvB;AAEA,OAAKQ,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AACA,OAAKC,gBAAL,GAAwB,OAAxB;AACA,OAAKC,iBAAL,GAAyB,OAAzB;AAEA,OAAKG,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AACA,OAAKC,YAAL,GAAoB,KAApB;AAEA,OAAKhD,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDg1C,iBAAiB,CAAC9kF,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA9B;AACA8kF,iBAAiB,CAAC9kF,SAAlB,CAA4BoC,WAA5B,GAA0C0iF,iBAA1C;AAEAA,iBAAiB,CAAC9kF,SAAlB,CAA4BuhG,mBAA5B,GAAkD,IAAlD;;AAEAzc,iBAAiB,CAAC9kF,SAAlB,CAA4BswB,IAA5B,GAAmC,UAAWpR,MAAX,EAAoB;AAEtDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AACA,OAAK0jD,QAAL,CAAc/xB,IAAd,CAAoBpR,MAAM,CAACmjC,QAA3B;AACA,OAAKC,SAAL,GAAiBpjC,MAAM,CAACojC,SAAxB;AAEA,OAAKl2C,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK22C,QAAL,GAAgB7jC,MAAM,CAAC6jC,QAAvB;AACA,OAAKmC,iBAAL,GAAyBhmC,MAAM,CAACgmC,iBAAhC;AAEA,OAAKlC,KAAL,GAAa9jC,MAAM,CAAC8jC,KAApB;AACA,OAAKC,cAAL,GAAsB/jC,MAAM,CAAC+jC,cAA7B;AAEA,OAAKd,QAAL,CAAc7xB,IAAd,CAAoBpR,MAAM,CAACijC,QAA3B;AACA,OAAKyB,WAAL,GAAmB1kC,MAAM,CAAC0kC,WAA1B;AACA,OAAKxB,iBAAL,GAAyBljC,MAAM,CAACkjC,iBAAhC;AAEA,OAAKc,OAAL,GAAehkC,MAAM,CAACgkC,OAAtB;AACA,OAAKC,SAAL,GAAiBjkC,MAAM,CAACikC,SAAxB;AAEA,OAAKC,SAAL,GAAiBlkC,MAAM,CAACkkC,SAAxB;AACA,OAAKC,aAAL,GAAqBnkC,MAAM,CAACmkC,aAA5B;AACA,OAAKC,WAAL,CAAiBhzB,IAAjB,CAAuBpR,MAAM,CAACokC,WAA9B;AAEA,OAAKC,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,OAAKI,WAAL,GAAmB3kC,MAAM,CAAC2kC,WAA1B;AAEA,OAAKf,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKgB,MAAL,GAAc5kC,MAAM,CAAC4kC,MAArB;AACA,OAAKG,OAAL,GAAe/kC,MAAM,CAAC+kC,OAAtB;AACA,OAAKF,YAAL,GAAoB7kC,MAAM,CAAC6kC,YAA3B;AACA,OAAKC,eAAL,GAAuB9kC,MAAM,CAAC8kC,eAA9B;AAEA,OAAKQ,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AACA,OAAKC,gBAAL,GAAwBxlC,MAAM,CAACwlC,gBAA/B;AACA,OAAKC,iBAAL,GAAyBzlC,MAAM,CAACylC,iBAAhC;AAEA,OAAKG,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CAnDD;AAqDA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyCA,SAASkgC,gBAAT,CAA2Bj1C,UAA3B,EAAwC;AAEvCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAKs2D,OAAL,GAAe;AAAE,YAAQ;AAAV,GAAf;AAEA,OAAKxrD,IAAL,GAAY,kBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb;AAEA,OAAK6H,GAAL,GAAW,IAAX;AACA,OAAK+3C,WAAL,GAAmB,IAAnB;AAEA,OAAKpB,QAAL,GAAgB,IAAhB;AACA,OAAKmC,iBAAL,GAAyB,GAAzB;AAEA,OAAKlC,KAAL,GAAa,IAAb;AACA,OAAKC,cAAL,GAAsB,GAAtB;AAEA,OAAKd,QAAL,GAAgB,IAAI59C,KAAJ,CAAW,QAAX,CAAhB;AACA,OAAK69C,iBAAL,GAAyB,GAAzB;AACA,OAAKwB,WAAL,GAAmB,IAAnB;AAEA,OAAKV,OAAL,GAAe,IAAf;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,aAAL,GAAqBj5B,qBAArB;AACA,OAAKk5B,WAAL,GAAmB,IAAIzzB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,OAAK0zB,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKX,QAAL,GAAgB,IAAhB;AAEA,OAAK0B,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AACA,OAAKC,gBAAL,GAAwB,OAAxB;AACA,OAAKC,iBAAL,GAAyB,OAAzB;AAEA,OAAKG,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AACA,OAAKC,YAAL,GAAoB,KAApB;AAEA,OAAKhD,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDi1C,gBAAgB,CAAC/kF,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA7B;AACA+kF,gBAAgB,CAAC/kF,SAAjB,CAA2BoC,WAA3B,GAAyC2iF,gBAAzC;AAEAA,gBAAgB,CAAC/kF,SAAjB,CAA2BqhG,kBAA3B,GAAgD,IAAhD;;AAEAtc,gBAAgB,CAAC/kF,SAAjB,CAA2BswB,IAA3B,GAAkC,UAAWpR,MAAX,EAAoB;AAErDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAKyN,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AACA,OAAK+3C,WAAL,GAAmBjlC,MAAM,CAACilC,WAA1B;AAEA,OAAKpB,QAAL,GAAgB7jC,MAAM,CAAC6jC,QAAvB;AACA,OAAKmC,iBAAL,GAAyBhmC,MAAM,CAACgmC,iBAAhC;AAEA,OAAKlC,KAAL,GAAa9jC,MAAM,CAAC8jC,KAApB;AACA,OAAKC,cAAL,GAAsB/jC,MAAM,CAAC+jC,cAA7B;AAEA,OAAKd,QAAL,CAAc7xB,IAAd,CAAoBpR,MAAM,CAACijC,QAA3B;AACA,OAAKyB,WAAL,GAAmB1kC,MAAM,CAAC0kC,WAA1B;AACA,OAAKxB,iBAAL,GAAyBljC,MAAM,CAACkjC,iBAAhC;AAEA,OAAKc,OAAL,GAAehkC,MAAM,CAACgkC,OAAtB;AACA,OAAKC,SAAL,GAAiBjkC,MAAM,CAACikC,SAAxB;AAEA,OAAKC,SAAL,GAAiBlkC,MAAM,CAACkkC,SAAxB;AACA,OAAKC,aAAL,GAAqBnkC,MAAM,CAACmkC,aAA5B;AACA,OAAKC,WAAL,CAAiBhzB,IAAjB,CAAuBpR,MAAM,CAACokC,WAA9B;AAEA,OAAKC,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,OAAKX,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAK0B,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AACA,OAAKC,gBAAL,GAAwBxlC,MAAM,CAACwlC,gBAA/B;AACA,OAAKC,iBAAL,GAAyBzlC,MAAM,CAACylC,iBAAhC;AAEA,OAAKG,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CA3CD;AA6CA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA,SAAS+/B,kBAAT,CAA6B90C,UAA7B,EAA0C;AAEzCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAK63C,OAAL,GAAe,IAAf;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,aAAL,GAAqBj5B,qBAArB;AACA,OAAKk5B,WAAL,GAAmB,IAAIzzB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,OAAK0zB,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKe,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AAEA,OAAKhU,GAAL,GAAW,KAAX;AAEA,OAAKqU,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AACA,OAAKC,YAAL,GAAoB,KAApB;AAEA,OAAKhD,SAAL,CAAgB/R,UAAhB;AAEA;;AAED80C,kBAAkB,CAAC5kF,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA/B;AACA4kF,kBAAkB,CAAC5kF,SAAnB,CAA6BoC,WAA7B,GAA2CwiF,kBAA3C;AAEAA,kBAAkB,CAAC5kF,SAAnB,CAA6BgiG,oBAA7B,GAAoD,IAApD;;AAEApd,kBAAkB,CAAC5kF,SAAnB,CAA6BswB,IAA7B,GAAoC,UAAWpR,MAAX,EAAoB;AAEvDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKgkC,OAAL,GAAehkC,MAAM,CAACgkC,OAAtB;AACA,OAAKC,SAAL,GAAiBjkC,MAAM,CAACikC,SAAxB;AAEA,OAAKC,SAAL,GAAiBlkC,MAAM,CAACkkC,SAAxB;AACA,OAAKC,aAAL,GAAqBnkC,MAAM,CAACmkC,aAA5B;AACA,OAAKC,WAAL,CAAiBhzB,IAAjB,CAAuBpR,MAAM,CAACokC,WAA9B;AAEA,OAAKC,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,OAAKe,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AAEA,OAAKK,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CAxBD;AA0BA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAASggC,mBAAT,CAA8B/0C,UAA9B,EAA2C;AAE1CyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,qBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb,CAN0C,CAMN;;AAEpC,OAAK6H,GAAL,GAAW,IAAX;AAEA,OAAK22C,QAAL,GAAgB,IAAhB;AACA,OAAKmC,iBAAL,GAAyB,GAAzB;AAEA,OAAKlC,KAAL,GAAa,IAAb;AACA,OAAKC,cAAL,GAAsB,GAAtB;AAEA,OAAKd,QAAL,GAAgB,IAAI59C,KAAJ,CAAW,QAAX,CAAhB;AACA,OAAK69C,iBAAL,GAAyB,GAAzB;AACA,OAAKwB,WAAL,GAAmB,IAAnB;AAEA,OAAKC,WAAL,GAAmB,IAAnB;AAEA,OAAKf,QAAL,GAAgB,IAAhB;AAEA,OAAKgB,MAAL,GAAc,IAAd;AACA,OAAKG,OAAL,GAAephC,iBAAf;AACA,OAAKkhC,YAAL,GAAoB,CAApB;AACA,OAAKC,eAAL,GAAuB,IAAvB;AAEA,OAAKQ,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,CAA1B;AACA,OAAKC,gBAAL,GAAwB,OAAxB;AACA,OAAKC,iBAAL,GAAyB,OAAzB;AAEA,OAAKG,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AACA,OAAKC,YAAL,GAAoB,KAApB;AAEA,OAAKhD,SAAL,CAAgB/R,UAAhB;AAEA;;AAED+0C,mBAAmB,CAAC7kF,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAAhC;AACA6kF,mBAAmB,CAAC7kF,SAApB,CAA8BoC,WAA9B,GAA4CyiF,mBAA5C;AAEAA,mBAAmB,CAAC7kF,SAApB,CAA8BmhG,qBAA9B,GAAsD,IAAtD;;AAEAtc,mBAAmB,CAAC7kF,SAApB,CAA8BswB,IAA9B,GAAqC,UAAWpR,MAAX,EAAoB;AAExDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAKyN,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK22C,QAAL,GAAgB7jC,MAAM,CAAC6jC,QAAvB;AACA,OAAKmC,iBAAL,GAAyBhmC,MAAM,CAACgmC,iBAAhC;AAEA,OAAKlC,KAAL,GAAa9jC,MAAM,CAAC8jC,KAApB;AACA,OAAKC,cAAL,GAAsB/jC,MAAM,CAAC+jC,cAA7B;AAEA,OAAKd,QAAL,CAAc7xB,IAAd,CAAoBpR,MAAM,CAACijC,QAA3B;AACA,OAAKyB,WAAL,GAAmB1kC,MAAM,CAAC0kC,WAA1B;AACA,OAAKxB,iBAAL,GAAyBljC,MAAM,CAACkjC,iBAAhC;AAEA,OAAKyB,WAAL,GAAmB3kC,MAAM,CAAC2kC,WAA1B;AAEA,OAAKf,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKgB,MAAL,GAAc5kC,MAAM,CAAC4kC,MAArB;AACA,OAAKG,OAAL,GAAe/kC,MAAM,CAAC+kC,OAAtB;AACA,OAAKF,YAAL,GAAoB7kC,MAAM,CAAC6kC,YAA3B;AACA,OAAKC,eAAL,GAAuB9kC,MAAM,CAAC8kC,eAA9B;AAEA,OAAKQ,SAAL,GAAiBtlC,MAAM,CAACslC,SAAxB;AACA,OAAKC,kBAAL,GAA0BvlC,MAAM,CAACulC,kBAAjC;AACA,OAAKC,gBAAL,GAAwBxlC,MAAM,CAACwlC,gBAA/B;AACA,OAAKC,iBAAL,GAAyBzlC,MAAM,CAACylC,iBAAhC;AAEA,OAAKG,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CAtCD;AAwCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,SAASqgC,kBAAT,CAA6Bp1C,UAA7B,EAA0C;AAEzCyP,EAAAA,QAAQ,CAACh/C,IAAT,CAAe,IAAf;AAEA,OAAKs2D,OAAL,GAAe;AAAE,cAAU;AAAZ,GAAf;AAEA,OAAKxrD,IAAL,GAAY,oBAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW,QAAX,CAAb,CARyC,CAQL;;AAEpC,OAAKs+C,MAAL,GAAc,IAAd;AAEA,OAAKz2C,GAAL,GAAW,IAAX;AAEA,OAAK82C,OAAL,GAAe,IAAf;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,aAAL,GAAqBj5B,qBAArB;AACA,OAAKk5B,WAAL,GAAmB,IAAIzzB,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAnB;AAEA,OAAK0zB,eAAL,GAAuB,IAAvB;AACA,OAAKC,iBAAL,GAAyB,CAAzB;AACA,OAAKC,gBAAL,GAAwB,CAAxB;AAEA,OAAKX,QAAL,GAAgB,IAAhB;AAEA,OAAKgC,QAAL,GAAgB,KAAhB;AACA,OAAKF,YAAL,GAAoB,KAApB;AACA,OAAKC,YAAL,GAAoB,KAApB;AAEA,OAAKhD,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDo1C,kBAAkB,CAACllF,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAe0lB,QAAQ,CAACv/C,SAAxB,CAA/B;AACAklF,kBAAkB,CAACllF,SAAnB,CAA6BoC,WAA7B,GAA2C8iF,kBAA3C;AAEAA,kBAAkB,CAACllF,SAAnB,CAA6B4hG,oBAA7B,GAAoD,IAApD;;AAEA1c,kBAAkB,CAACllF,SAAnB,CAA6BswB,IAA7B,GAAoC,UAAWpR,MAAX,EAAoB;AAEvDqgC,EAAAA,QAAQ,CAACv/C,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,OAAK23C,OAAL,GAAe;AAAE,cAAU;AAAZ,GAAf;AAEA,OAAKl4D,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AAEA,OAAKkkD,MAAL,GAAc3jC,MAAM,CAAC2jC,MAArB;AAEA,OAAKz2C,GAAL,GAAW8S,MAAM,CAAC9S,GAAlB;AAEA,OAAK82C,OAAL,GAAehkC,MAAM,CAACgkC,OAAtB;AACA,OAAKC,SAAL,GAAiBjkC,MAAM,CAACikC,SAAxB;AAEA,OAAKC,SAAL,GAAiBlkC,MAAM,CAACkkC,SAAxB;AACA,OAAKC,aAAL,GAAqBnkC,MAAM,CAACmkC,aAA5B;AACA,OAAKC,WAAL,CAAiBhzB,IAAjB,CAAuBpR,MAAM,CAACokC,WAA9B;AAEA,OAAKC,eAAL,GAAuBrkC,MAAM,CAACqkC,eAA9B;AACA,OAAKC,iBAAL,GAAyBtkC,MAAM,CAACskC,iBAAhC;AACA,OAAKC,gBAAL,GAAwBvkC,MAAM,CAACukC,gBAA/B;AAEA,OAAKX,QAAL,GAAgB5jC,MAAM,CAAC4jC,QAAvB;AAEA,OAAKgC,QAAL,GAAgB5lC,MAAM,CAAC4lC,QAAvB;AACA,OAAKF,YAAL,GAAoB1lC,MAAM,CAAC0lC,YAA3B;AACA,OAAKC,YAAL,GAAoB3lC,MAAM,CAAC2lC,YAA3B;AAEA,SAAO,IAAP;AAEA,CA/BD;AAiCA;;;;;;;;;;;;;;;;AAeA,SAASugC,kBAAT,CAA6Bt1C,UAA7B,EAA0C;AAEzCq1C,EAAAA,iBAAiB,CAAC5kF,IAAlB,CAAwB,IAAxB;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAKgsB,KAAL,GAAa,CAAb;AACA,OAAKitB,QAAL,GAAgB,CAAhB;AACA,OAAKC,OAAL,GAAe,CAAf;AAEA,OAAK1C,SAAL,CAAgB/R,UAAhB;AAEA;;AAEDs1C,kBAAkB,CAACplF,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAesrD,iBAAiB,CAACnlF,SAAjC,CAA/B;AACAolF,kBAAkB,CAACplF,SAAnB,CAA6BoC,WAA7B,GAA2CgjF,kBAA3C;AAEAA,kBAAkB,CAACplF,SAAnB,CAA6BoiG,oBAA7B,GAAoD,IAApD;;AAEAhd,kBAAkB,CAACplF,SAAnB,CAA6BswB,IAA7B,GAAoC,UAAWpR,MAAX,EAAoB;AAEvDimE,EAAAA,iBAAiB,CAACnlF,SAAlB,CAA4BswB,IAA5B,CAAiC/vB,IAAjC,CAAuC,IAAvC,EAA6C2e,MAA7C;AAEA,OAAKmY,KAAL,GAAanY,MAAM,CAACmY,KAApB;AACA,OAAKitB,QAAL,GAAgBplC,MAAM,CAAColC,QAAvB;AACA,OAAKC,OAAL,GAAerlC,MAAM,CAACqlC,OAAtB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYA,IAAIqiE,SAAS,GAAG,aAAahmH,MAAM,CAAC6lH,MAAP,CAAc;AAC1CC,EAAAA,SAAS,EAAE,IAD+B;AAE1CphC,EAAAA,cAAc,EAAEA,cAF0B;AAG1CC,EAAAA,cAAc,EAAEA,cAH0B;AAI1CohC,EAAAA,iBAAiB,EAAEA,iBAJuB;AAK1C/vD,EAAAA,cAAc,EAAEA,cAL0B;AAM1CyuB,EAAAA,cAAc,EAAEA,cAN0B;AAO1CJ,EAAAA,oBAAoB,EAAEA,oBAPoB;AAQ1CD,EAAAA,oBAAoB,EAAEA,oBARoB;AAS1CF,EAAAA,iBAAiB,EAAEA,iBATuB;AAU1CC,EAAAA,gBAAgB,EAAEA,gBAVwB;AAW1CH,EAAAA,kBAAkB,EAAEA,kBAXsB;AAY1CC,EAAAA,mBAAmB,EAAEA,mBAZqB;AAa1CH,EAAAA,iBAAiB,EAAEA,iBAbuB;AAc1CC,EAAAA,oBAAoB,EAAEA,oBAdoB;AAe1C1/B,EAAAA,iBAAiB,EAAEA,iBAfuB;AAgB1CigC,EAAAA,kBAAkB,EAAEA,kBAhBsB;AAiB1CE,EAAAA,kBAAkB,EAAEA,kBAjBsB;AAkB1CD,EAAAA,iBAAiB,EAAEA,iBAlBuB;AAmB1C5lC,EAAAA,QAAQ,EAAEA;AAnBgC,CAAd,CAA7B;AAsBA;;;;;;AAMA,MAAMsnE,cAAc,GAAG;AAEtB;AACAC,EAAAA,UAAU,EAAE,UAAWz6F,KAAX,EAAkB06F,IAAlB,EAAwBC,EAAxB,EAA6B;AAExC,QAAKH,cAAc,CAACI,YAAf,CAA6B56F,KAA7B,CAAL,EAA4C;AAE3C;AACA;AACA,aAAO,IAAIA,KAAK,CAACjqB,WAAV,CAAuBiqB,KAAK,CAACk1C,QAAN,CAAgBwlD,IAAhB,EAAsBC,EAAE,KAAK/kH,SAAP,GAAmB+kH,EAAnB,GAAwB36F,KAAK,CAACxsB,MAApD,CAAvB,CAAP;AAEA;;AAED,WAAOwsB,KAAK,CAAClsB,KAAN,CAAa4mH,IAAb,EAAmBC,EAAnB,CAAP;AAEA,GAfqB;AAiBtB;AACAE,EAAAA,YAAY,EAAE,UAAW76F,KAAX,EAAkBhhB,IAAlB,EAAwB87G,UAAxB,EAAqC;AAElD,QAAK,CAAE96F,KAAF,IAAW;AACf,KAAE86F,UAAF,IAAgB96F,KAAK,CAACjqB,WAAN,KAAsBiJ,IADvC,EAC8C,OAAOghB,KAAP;;AAE9C,QAAK,OAAOhhB,IAAI,CAAC+1D,iBAAZ,KAAkC,QAAvC,EAAkD;AAEjD,aAAO,IAAI/1D,IAAJ,CAAUghB,KAAV,CAAP,CAFiD,CAEvB;AAE1B;;AAED,WAAOtsB,KAAK,CAACC,SAAN,CAAgBG,KAAhB,CAAsBI,IAAtB,CAA4B8rB,KAA5B,CAAP,CAXkD,CAWN;AAE5C,GA/BqB;AAiCtB46F,EAAAA,YAAY,EAAE,UAAWthH,MAAX,EAAoB;AAEjC,WAAOyhH,WAAW,CAACC,MAAZ,CAAoB1hH,MAApB,KACN,EAAIA,MAAM,YAAY2hH,QAAtB,CADD;AAGA,GAtCqB;AAwCtB;AACAC,EAAAA,gBAAgB,EAAE,UAAWC,KAAX,EAAmB;AAEpC,aAASC,WAAT,CAAsBvmH,CAAtB,EAAyB6zC,CAAzB,EAA6B;AAE5B,aAAOyyE,KAAK,CAAEtmH,CAAF,CAAL,GAAasmH,KAAK,CAAEzyE,CAAF,CAAzB;AAEA;;AAED,UAAM1nB,CAAC,GAAGm6F,KAAK,CAAC3nH,MAAhB;AACA,UAAMkD,MAAM,GAAG,IAAIhD,KAAJ,CAAWstB,CAAX,CAAf;;AACA,SAAM,IAAInsB,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKmsB,CAAvB,EAA0B,EAAGnsB,CAA7B,EAAiC6B,MAAM,CAAE7B,CAAF,CAAN,GAAcA,CAAd;;AAEjC6B,IAAAA,MAAM,CAAC0wD,IAAP,CAAag0D,WAAb;AAEA,WAAO1kH,MAAP;AAEA,GAzDqB;AA2DtB;AACA2kH,EAAAA,WAAW,EAAE,UAAWt3E,MAAX,EAAmBk/B,MAAnB,EAA2BvgD,KAA3B,EAAmC;AAE/C,UAAM44F,OAAO,GAAGv3E,MAAM,CAACvwC,MAAvB;AACA,UAAMkD,MAAM,GAAG,IAAIqtC,MAAM,CAAChuC,WAAX,CAAwBulH,OAAxB,CAAf;;AAEA,SAAM,IAAIzmH,CAAC,GAAG,CAAR,EAAW48B,SAAS,GAAG,CAA7B,EAAgCA,SAAS,KAAK6pF,OAA9C,EAAuD,EAAGzmH,CAA1D,EAA8D;AAE7D,YAAM0mH,SAAS,GAAG74F,KAAK,CAAE7tB,CAAF,CAAL,GAAaouE,MAA/B;;AAEA,WAAM,IAAIv6B,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKu6B,MAAvB,EAA+B,EAAGv6B,CAAlC,EAAsC;AAErChyC,QAAAA,MAAM,CAAE+6B,SAAS,EAAX,CAAN,GAAyBsS,MAAM,CAAEw3E,SAAS,GAAG7yE,CAAd,CAA/B;AAEA;AAED;;AAED,WAAOhyC,MAAP;AAEA,GA/EqB;AAiFtB;AACA8kH,EAAAA,WAAW,EAAE,UAAWC,QAAX,EAAqBN,KAArB,EAA4Bp3E,MAA5B,EAAoC23E,iBAApC,EAAwD;AAEpE,QAAI7mH,CAAC,GAAG,CAAR;AAAA,QAAWL,GAAG,GAAGinH,QAAQ,CAAE,CAAF,CAAzB;;AAEA,WAAQjnH,GAAG,KAAKoB,SAAR,IAAqBpB,GAAG,CAAEknH,iBAAF,CAAH,KAA6B9lH,SAA1D,EAAsE;AAErEpB,MAAAA,GAAG,GAAGinH,QAAQ,CAAE5mH,CAAC,EAAH,CAAd;AAEA;;AAED,QAAKL,GAAG,KAAKoB,SAAb,EAAyB,OAV2C,CAUnC;;AAEjC,QAAIqC,KAAK,GAAGzD,GAAG,CAAEknH,iBAAF,CAAf;AACA,QAAKzjH,KAAK,KAAKrC,SAAf,EAA2B,OAbyC,CAajC;;AAEnC,QAAKlC,KAAK,CAACoC,OAAN,CAAemC,KAAf,CAAL,EAA8B;AAE7B,SAAG;AAEFA,QAAAA,KAAK,GAAGzD,GAAG,CAAEknH,iBAAF,CAAX;;AAEA,YAAKzjH,KAAK,KAAKrC,SAAf,EAA2B;AAE1BulH,UAAAA,KAAK,CAACn9G,IAAN,CAAYxJ,GAAG,CAACq/D,IAAhB;AACA9vB,UAAAA,MAAM,CAAC/lC,IAAP,CAAYlJ,KAAZ,CAAmBivC,MAAnB,EAA2B9rC,KAA3B,EAH0B,CAGU;AAEpC;;AAEDzD,QAAAA,GAAG,GAAGinH,QAAQ,CAAE5mH,CAAC,EAAH,CAAd;AAEA,OAbD,QAaUL,GAAG,KAAKoB,SAblB;AAeA,KAjBD,MAiBO,IAAKqC,KAAK,CAACtC,OAAN,KAAkBC,SAAvB,EAAmC;AAEzC;AAEA,SAAG;AAEFqC,QAAAA,KAAK,GAAGzD,GAAG,CAAEknH,iBAAF,CAAX;;AAEA,YAAKzjH,KAAK,KAAKrC,SAAf,EAA2B;AAE1BulH,UAAAA,KAAK,CAACn9G,IAAN,CAAYxJ,GAAG,CAACq/D,IAAhB;AACA57D,UAAAA,KAAK,CAACtC,OAAN,CAAeouC,MAAf,EAAuBA,MAAM,CAACvwC,MAA9B;AAEA;;AAEDgB,QAAAA,GAAG,GAAGinH,QAAQ,CAAE5mH,CAAC,EAAH,CAAd;AAEA,OAbD,QAaUL,GAAG,KAAKoB,SAblB;AAeA,KAnBM,MAmBA;AAEN;AAEA,SAAG;AAEFqC,QAAAA,KAAK,GAAGzD,GAAG,CAAEknH,iBAAF,CAAX;;AAEA,YAAKzjH,KAAK,KAAKrC,SAAf,EAA2B;AAE1BulH,UAAAA,KAAK,CAACn9G,IAAN,CAAYxJ,GAAG,CAACq/D,IAAhB;AACA9vB,UAAAA,MAAM,CAAC/lC,IAAP,CAAa/F,KAAb;AAEA;;AAEDzD,QAAAA,GAAG,GAAGinH,QAAQ,CAAE5mH,CAAC,EAAH,CAAd;AAEA,OAbD,QAaUL,GAAG,KAAKoB,SAblB;AAeA;AAED,GA1JqB;AA4JtB+lH,EAAAA,OAAO,EAAE,UAAWC,UAAX,EAAuBzxG,IAAvB,EAA6B0xG,UAA7B,EAAyCC,QAAzC,EAAmDC,GAAnD,EAAyD;AAEjEA,IAAAA,GAAG,GAAGA,GAAG,IAAI,EAAb;AAEA,UAAMC,IAAI,GAAGJ,UAAU,CAAC53F,KAAX,EAAb;AAEAg4F,IAAAA,IAAI,CAAC7xG,IAAL,GAAYA,IAAZ;AAEA,UAAM8xG,MAAM,GAAG,EAAf;;AAEA,SAAM,IAAIpnH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmnH,IAAI,CAACC,MAAL,CAAYzoH,MAAjC,EAAyC,EAAGqB,CAA5C,EAAgD;AAE/C,YAAMqnH,KAAK,GAAGF,IAAI,CAACC,MAAL,CAAapnH,CAAb,CAAd;AACA,YAAMsnH,SAAS,GAAGD,KAAK,CAACE,YAAN,EAAlB;AAEA,YAAMjB,KAAK,GAAG,EAAd;AACA,YAAMp3E,MAAM,GAAG,EAAf;;AAEA,WAAM,IAAI2E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGwzE,KAAK,CAACf,KAAN,CAAY3nH,MAAjC,EAAyC,EAAGk1C,CAA5C,EAAgD;AAE/C,cAAMorB,KAAK,GAAGooD,KAAK,CAACf,KAAN,CAAazyE,CAAb,IAAmBqzE,GAAjC;AAEA,YAAKjoD,KAAK,GAAG+nD,UAAR,IAAsB/nD,KAAK,IAAIgoD,QAApC,EAA+C;AAE/CX,QAAAA,KAAK,CAACn9G,IAAN,CAAYk+G,KAAK,CAACf,KAAN,CAAazyE,CAAb,CAAZ;;AAEA,aAAM,IAAIvuC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGgiH,SAArB,EAAgC,EAAGhiH,CAAnC,EAAuC;AAEtC4pC,UAAAA,MAAM,CAAC/lC,IAAP,CAAak+G,KAAK,CAACn4E,MAAN,CAAc2E,CAAC,GAAGyzE,SAAJ,GAAgBhiH,CAA9B,CAAb;AAEA;AAED;;AAED,UAAKghH,KAAK,CAAC3nH,MAAN,KAAiB,CAAtB,EAA0B;AAE1B0oH,MAAAA,KAAK,CAACf,KAAN,GAAcX,cAAc,CAACK,YAAf,CAA6BM,KAA7B,EAAoCe,KAAK,CAACf,KAAN,CAAYplH,WAAhD,CAAd;AACAmmH,MAAAA,KAAK,CAACn4E,MAAN,GAAey2E,cAAc,CAACK,YAAf,CAA6B92E,MAA7B,EAAqCm4E,KAAK,CAACn4E,MAAN,CAAahuC,WAAlD,CAAf;AAEAkmH,MAAAA,MAAM,CAACj+G,IAAP,CAAak+G,KAAb;AAEA;;AAEDF,IAAAA,IAAI,CAACC,MAAL,GAAcA,MAAd,CA3CiE,CA6CjE;;AAEA,QAAII,YAAY,GAAG52E,QAAnB;;AAEA,SAAM,IAAI5wC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmnH,IAAI,CAACC,MAAL,CAAYzoH,MAAjC,EAAyC,EAAGqB,CAA5C,EAAgD;AAE/C,UAAKwnH,YAAY,GAAGL,IAAI,CAACC,MAAL,CAAapnH,CAAb,EAAiBsmH,KAAjB,CAAwB,CAAxB,CAApB,EAAkD;AAEjDkB,QAAAA,YAAY,GAAGL,IAAI,CAACC,MAAL,CAAapnH,CAAb,EAAiBsmH,KAAjB,CAAwB,CAAxB,CAAf;AAEA;AAED,KAzDgE,CA2DjE;;;AAEA,SAAM,IAAItmH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmnH,IAAI,CAACC,MAAL,CAAYzoH,MAAjC,EAAyC,EAAGqB,CAA5C,EAAgD;AAE/CmnH,MAAAA,IAAI,CAACC,MAAL,CAAapnH,CAAb,EAAiB4kG,KAAjB,CAAwB,CAAE,CAAF,GAAM4iB,YAA9B;AAEA;;AAEDL,IAAAA,IAAI,CAACM,aAAL;AAEA,WAAON,IAAP;AAEA,GAnOqB;AAqOtBO,EAAAA,gBAAgB,EAAE,UAAWC,UAAX,EAAuBC,cAAvB,EAAuCC,aAAvC,EAAsDX,GAAtD,EAA4D;AAE7E,QAAKU,cAAc,KAAK7mH,SAAxB,EAAoC6mH,cAAc,GAAG,CAAjB;AACpC,QAAKC,aAAa,KAAK9mH,SAAvB,EAAmC8mH,aAAa,GAAGF,UAAhB;AACnC,QAAKT,GAAG,KAAKnmH,SAAR,IAAqBmmH,GAAG,IAAI,CAAjC,EAAqCA,GAAG,GAAG,EAAN;AAErC,UAAMY,SAAS,GAAGH,UAAU,CAACP,MAAX,CAAkBzoH,MAApC;AACA,UAAMopH,aAAa,GAAGH,cAAc,GAAGV,GAAvC,CAP6E,CAS7E;;AACA,SAAM,IAAIlnH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG8nH,SAArB,EAAgC,EAAG9nH,CAAnC,EAAuC;AAEtC,YAAMgoH,cAAc,GAAGH,aAAa,CAACT,MAAd,CAAsBpnH,CAAtB,CAAvB;AACA,YAAMioH,kBAAkB,GAAGD,cAAc,CAACE,aAA1C,CAHsC,CAKtC;;AACA,UAAKD,kBAAkB,KAAK,MAAvB,IAAiCA,kBAAkB,KAAK,QAA7D,EAAwE,SANlC,CAQtC;;AACA,YAAME,WAAW,GAAGR,UAAU,CAACP,MAAX,CAAkBgB,IAAlB,CAAwB,UAAWf,KAAX,EAAmB;AAE9D,eAAOA,KAAK,CAAC/xG,IAAN,KAAe0yG,cAAc,CAAC1yG,IAA9B,IACJ+xG,KAAK,CAACa,aAAN,KAAwBD,kBAD3B;AAGA,OALmB,CAApB;AAOA,UAAKE,WAAW,KAAKpnH,SAArB,EAAiC;AAEjC,YAAMumH,SAAS,GAAGU,cAAc,CAACT,YAAf,EAAlB;AACA,YAAM5sC,SAAS,GAAGqtC,cAAc,CAAC1B,KAAf,CAAqB3nH,MAArB,GAA8B,CAAhD;AACA,UAAI0pH,cAAJ,CApBsC,CAsBtC;;AACA,UAAKN,aAAa,IAAIC,cAAc,CAAC1B,KAAf,CAAsB,CAAtB,CAAtB,EAAkD;AAEjD;AACA+B,QAAAA,cAAc,GAAG1C,cAAc,CAACC,UAAf,CAA2BoC,cAAc,CAAC94E,MAA1C,EAAkD,CAAlD,EAAqD84E,cAAc,CAACV,SAApE,CAAjB;AAEA,OALD,MAKO,IAAKS,aAAa,IAAIC,cAAc,CAAC1B,KAAf,CAAsB3rC,SAAtB,CAAtB,EAA0D;AAEhE;AACA,cAAM2tC,UAAU,GAAG3tC,SAAS,GAAG2sC,SAA/B;AACAe,QAAAA,cAAc,GAAG1C,cAAc,CAACC,UAAf,CAA2BoC,cAAc,CAAC94E,MAA1C,EAAkDo5E,UAAlD,CAAjB;AAEA,OANM,MAMA;AAEN;AACA,cAAMC,WAAW,GAAGP,cAAc,CAACQ,iBAAf,EAApB;AACAD,QAAAA,WAAW,CAACE,QAAZ,CAAsBV,aAAtB;AACAM,QAAAA,cAAc,GAAGE,WAAW,CAACG,YAA7B;AAEA,OAzCqC,CA2CtC;;;AACA,UAAKT,kBAAkB,KAAK,YAA5B,EAA2C;AAE1C,cAAMU,aAAa,GAAG,IAAIzsF,UAAJ,CACrBmsF,cAAc,CAAE,CAAF,CADO,EAErBA,cAAc,CAAE,CAAF,CAFO,EAGrBA,cAAc,CAAE,CAAF,CAHO,EAIrBA,cAAc,CAAE,CAAF,CAJO,EAKpBz3F,SALoB,GAKRyO,SALQ,EAAtB;AAMAspF,QAAAA,aAAa,CAAC7nH,OAAd,CAAuBunH,cAAvB;AAEA,OAtDqC,CAwDtC;;;AAEA,YAAMO,QAAQ,GAAGT,WAAW,CAAC7B,KAAZ,CAAkB3nH,MAAnC;;AACA,WAAM,IAAIk1C,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG+0E,QAArB,EAA+B,EAAG/0E,CAAlC,EAAsC;AAErC,cAAMg1E,UAAU,GAAGh1E,CAAC,GAAGyzE,SAAvB;;AAEA,YAAKW,kBAAkB,KAAK,YAA5B,EAA2C;AAE1C;AACA/rF,UAAAA,UAAU,CAAC2B,uBAAX,CACCsqF,WAAW,CAACj5E,MADb,EAEC25E,UAFD,EAGCR,cAHD,EAIC,CAJD,EAKCF,WAAW,CAACj5E,MALb,EAMC25E,UAND;AASA,SAZD,MAYO;AAEN;AACA,eAAM,IAAIvjH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGgiH,SAArB,EAAgC,EAAGhiH,CAAnC,EAAuC;AAEtC6iH,YAAAA,WAAW,CAACj5E,MAAZ,CAAoB25E,UAAU,GAAGvjH,CAAjC,KAAwC+iH,cAAc,CAAE/iH,CAAF,CAAtD;AAEA;AAED;AAED;AAED;;AAEDqiH,IAAAA,UAAU,CAACmB,SAAX,GAAuB1gG,0BAAvB;AAEA,WAAOu/F,UAAP;AAEA;AA7UqB,CAAvB;AAiVA;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,SAASoB,WAAT,CAAsBC,kBAAtB,EAA0CC,YAA1C,EAAwDC,UAAxD,EAAoER,YAApE,EAAmF;AAElF,OAAKM,kBAAL,GAA0BA,kBAA1B;AACA,OAAKG,YAAL,GAAoB,CAApB;AAEA,OAAKT,YAAL,GAAoBA,YAAY,KAAK3nH,SAAjB,GACnB2nH,YADmB,GACJ,IAAIO,YAAY,CAAC/nH,WAAjB,CAA8BgoH,UAA9B,CADhB;AAEA,OAAKD,YAAL,GAAoBA,YAApB;AACA,OAAK3B,SAAL,GAAiB4B,UAAjB;AAEA;;AAEDxpH,MAAM,CAACme,MAAP,CAAekrG,WAAW,CAACjqH,SAA3B,EAAsC;AAErC2pH,EAAAA,QAAQ,EAAE,UAAW7lH,CAAX,EAAe;AAExB,QAAIwmH,EAAE,GAAG,KAAKJ,kBAAd;AAAA,QACCp7G,EAAE,GAAG,KAAKu7G,YADX;AAAA,QAGC5yE,EAAE,GAAG6yE,EAAE,CAAEx7G,EAAF,CAHR;AAAA,QAIC0oC,EAAE,GAAG8yE,EAAE,CAAEx7G,EAAE,GAAG,CAAP,CAJR;;AAMAy7G,IAAAA,iBAAiB,EAAE;AAElBC,MAAAA,IAAI,EAAE;AAEL,YAAI5iH,KAAJ;;AAEA6iH,QAAAA,WAAW,EAAE;AAEZ;AACA;AACA;AACA;AACAC,UAAAA,YAAY,EAAE,IAAK,EAAI5mH,CAAC,GAAG2zC,EAAR,CAAL,EAAoB;AAEjC,iBAAM,IAAIkzE,QAAQ,GAAG77G,EAAE,GAAG,CAA1B,IAAiC;AAEhC,kBAAK2oC,EAAE,KAAKx1C,SAAZ,EAAwB;AAEvB,oBAAK6B,CAAC,GAAG0zC,EAAT,EAAc,MAAMkzE,YAAN,CAFS,CAIvB;;AAEA57G,gBAAAA,EAAE,GAAGw7G,EAAE,CAACzqH,MAAR;AACA,qBAAKwqH,YAAL,GAAoBv7G,EAApB;AACA,uBAAO,KAAK87G,SAAL,CAAgB97G,EAAE,GAAG,CAArB,EAAwBhL,CAAxB,EAA2B0zC,EAA3B,CAAP;AAEA;;AAED,kBAAK1oC,EAAE,KAAK67G,QAAZ,EAAuB,MAdS,CAcF;;AAE9BnzE,cAAAA,EAAE,GAAGC,EAAL;AACAA,cAAAA,EAAE,GAAG6yE,EAAE,CAAE,EAAGx7G,EAAL,CAAP;;AAEA,kBAAKhL,CAAC,GAAG2zC,EAAT,EAAc;AAEb;AACA,sBAAM+yE,IAAN;AAEA;AAED,aA5BgC,CA8BjC;;;AACA5iH,YAAAA,KAAK,GAAG0iH,EAAE,CAACzqH,MAAX;AACA,kBAAM4qH,WAAN;AAEA,WAxCW,CA0CZ;AACA;;;AACA,cAAK,EAAI3mH,CAAC,IAAI0zC,EAAT,CAAL,EAAqB;AAEpB;AAEA,kBAAMqzE,QAAQ,GAAGP,EAAE,CAAE,CAAF,CAAnB;;AAEA,gBAAKxmH,CAAC,GAAG+mH,QAAT,EAAoB;AAEnB/7G,cAAAA,EAAE,GAAG,CAAL,CAFmB,CAEX;;AACR0oC,cAAAA,EAAE,GAAGqzE,QAAL;AAEA,aAXmB,CAapB;;;AAEA,iBAAM,IAAIF,QAAQ,GAAG77G,EAAE,GAAG,CAA1B,IAAiC;AAEhC,kBAAK0oC,EAAE,KAAKv1C,SAAZ,EAAwB;AAEvB;AAEA,qBAAKooH,YAAL,GAAoB,CAApB;AACA,uBAAO,KAAKS,YAAL,CAAmB,CAAnB,EAAsBhnH,CAAtB,EAAyB2zC,EAAzB,CAAP;AAEA;;AAED,kBAAK3oC,EAAE,KAAK67G,QAAZ,EAAuB,MAXS,CAWF;;AAE9BlzE,cAAAA,EAAE,GAAGD,EAAL;AACAA,cAAAA,EAAE,GAAG8yE,EAAE,CAAE,EAAGx7G,EAAH,GAAQ,CAAV,CAAP;;AAEA,kBAAKhL,CAAC,IAAI0zC,EAAV,EAAe;AAEd;AACA,sBAAMgzE,IAAN;AAEA;AAED,aAtCmB,CAwCpB;;;AACA5iH,YAAAA,KAAK,GAAGkH,EAAR;AACAA,YAAAA,EAAE,GAAG,CAAL;AACA,kBAAM27G,WAAN;AAEA,WAzFW,CA2FZ;;;AAEA,gBAAMF,iBAAN;AAEA,SAnGI,CAmGH;AAEF;;;AAEA,eAAQz7G,EAAE,GAAGlH,KAAb,EAAqB;AAEpB,gBAAMmjH,GAAG,GAAKj8G,EAAE,GAAGlH,KAAP,KAAmB,CAA/B;;AAEA,cAAK9D,CAAC,GAAGwmH,EAAE,CAAES,GAAF,CAAX,EAAqB;AAEpBnjH,YAAAA,KAAK,GAAGmjH,GAAR;AAEA,WAJD,MAIO;AAENj8G,YAAAA,EAAE,GAAGi8G,GAAG,GAAG,CAAX;AAEA;AAED;;AAEDtzE,QAAAA,EAAE,GAAG6yE,EAAE,CAAEx7G,EAAF,CAAP;AACA0oC,QAAAA,EAAE,GAAG8yE,EAAE,CAAEx7G,EAAE,GAAG,CAAP,CAAP,CAxHK,CA0HL;;AAEA,YAAK0oC,EAAE,KAAKv1C,SAAZ,EAAwB;AAEvB,eAAKooH,YAAL,GAAoB,CAApB;AACA,iBAAO,KAAKS,YAAL,CAAmB,CAAnB,EAAsBhnH,CAAtB,EAAyB2zC,EAAzB,CAAP;AAEA;;AAED,YAAKA,EAAE,KAAKx1C,SAAZ,EAAwB;AAEvB6M,UAAAA,EAAE,GAAGw7G,EAAE,CAACzqH,MAAR;AACA,eAAKwqH,YAAL,GAAoBv7G,EAApB;AACA,iBAAO,KAAK87G,SAAL,CAAgB97G,EAAE,GAAG,CAArB,EAAwB0oC,EAAxB,EAA4B1zC,CAA5B,CAAP;AAEA;AAED,OA7IiB,CA6IhB;;;AAEF,WAAKumH,YAAL,GAAoBv7G,EAApB;AAEA,WAAKk8G,gBAAL,CAAuBl8G,EAAvB,EAA2B0oC,EAA3B,EAA+BC,EAA/B;AAEA,KA3JuB,CA2JtB;;;AAEF,WAAO,KAAKwzE,YAAL,CAAmBn8G,EAAnB,EAAuB0oC,EAAvB,EAA2B1zC,CAA3B,EAA8B2zC,EAA9B,CAAP;AAEA,GAjKoC;AAmKrCyzE,EAAAA,QAAQ,EAAE,IAnK2B;AAmKrB;AAChB;AAEA;AAEAC,EAAAA,gBAAgB,EAAE,EAxKmB;AA0KrCC,EAAAA,YAAY,EAAE,YAAY;AAEzB,WAAO,KAAKF,QAAL,IAAiB,KAAKC,gBAA7B;AAEA,GA9KoC;AAgLrCE,EAAAA,gBAAgB,EAAE,UAAW5gH,KAAX,EAAmB;AAEpC;AAEA,UAAM1H,MAAM,GAAG,KAAK6mH,YAApB;AAAA,UACCx5E,MAAM,GAAG,KAAK+5E,YADf;AAAA,UAEC76C,MAAM,GAAG,KAAKk5C,SAFf;AAAA,UAGCx9G,MAAM,GAAGP,KAAK,GAAG6kE,MAHlB;;AAKA,SAAM,IAAIpuE,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC6B,MAAAA,MAAM,CAAE7B,CAAF,CAAN,GAAckvC,MAAM,CAAEplC,MAAM,GAAG9J,CAAX,CAApB;AAEA;;AAED,WAAO6B,MAAP;AAEA,GAjMoC;AAmMrC;AAEAkoH,EAAAA,YAAY,EAAE;AAAW;AAAsB;AAE9C,UAAM,IAAIzmH,KAAJ,CAAW,yBAAX,CAAN,CAF8C,CAG9C;AAEA,GA1MoC;AA4MrCwmH,EAAAA,gBAAgB,EAAE;AAAW;AAAmB,GAE/C;AAEA;AAhNoC,CAAtC,GAoNA;;AACApqH,MAAM,CAACme,MAAP,CAAekrG,WAAW,CAACjqH,SAA3B,EAAsC;AAErC;AACA8qH,EAAAA,YAAY,EAAEb,WAAW,CAACjqH,SAAZ,CAAsBqrH,gBAHC;AAKrC;AACAT,EAAAA,SAAS,EAAEX,WAAW,CAACjqH,SAAZ,CAAsBqrH;AANI,CAAtC;AAUA;;;;;;;;;;AAUA,SAASC,gBAAT,CAA2BpB,kBAA3B,EAA+CC,YAA/C,EAA6DC,UAA7D,EAAyER,YAAzE,EAAwF;AAEvFK,EAAAA,WAAW,CAAC1pH,IAAZ,CAAkB,IAAlB,EAAwB2pH,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA,OAAK2B,WAAL,GAAmB,CAAE,CAArB;AACA,OAAKC,WAAL,GAAmB,CAAE,CAArB;AACA,OAAKC,WAAL,GAAmB,CAAE,CAArB;AACA,OAAKC,WAAL,GAAmB,CAAE,CAArB;AAEA;;AAEDJ,gBAAgB,CAACtrH,SAAjB,GAA6BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeowF,WAAW,CAACjqH,SAA3B,CAAf,EAAuD;AAEnFoC,EAAAA,WAAW,EAAEkpH,gBAFsE;AAInFH,EAAAA,gBAAgB,EAAE;AAEjBQ,IAAAA,WAAW,EAAEziG,mBAFI;AAGjB0iG,IAAAA,SAAS,EAAE1iG;AAHM,GAJiE;AAWnF8hG,EAAAA,gBAAgB,EAAE,UAAWl8G,EAAX,EAAe0oC,EAAf,EAAmBC,EAAnB,EAAwB;AAEzC,QAAI6yE,EAAE,GAAG,KAAKJ,kBAAd;AAAA,QACC2B,KAAK,GAAG/8G,EAAE,GAAG,CADd;AAAA,QAECg9G,KAAK,GAAGh9G,EAAE,GAAG,CAFd;AAAA,QAICi9G,KAAK,GAAGzB,EAAE,CAAEuB,KAAF,CAJX;AAAA,QAKCG,KAAK,GAAG1B,EAAE,CAAEwB,KAAF,CALX;;AAOA,QAAKC,KAAK,KAAK9pH,SAAf,EAA2B;AAE1B,cAAS,KAAKmpH,YAAL,GAAoBO,WAA7B;AAEC,aAAKxiG,eAAL;AAEC;AACA0iG,UAAAA,KAAK,GAAG/8G,EAAR;AACAi9G,UAAAA,KAAK,GAAG,IAAIv0E,EAAJ,GAASC,EAAjB;AAEA;;AAED,aAAKruB,gBAAL;AAEC;AACAyiG,UAAAA,KAAK,GAAGvB,EAAE,CAACzqH,MAAH,GAAY,CAApB;AACAksH,UAAAA,KAAK,GAAGv0E,EAAE,GAAG8yE,EAAE,CAAEuB,KAAF,CAAP,GAAmBvB,EAAE,CAAEuB,KAAK,GAAG,CAAV,CAA7B;AAEA;;AAED;AAAS;AAER;AACAA,UAAAA,KAAK,GAAG/8G,EAAR;AACAi9G,UAAAA,KAAK,GAAGt0E,EAAR;AAtBF;AA0BA;;AAED,QAAKu0E,KAAK,KAAK/pH,SAAf,EAA2B;AAE1B,cAAS,KAAKmpH,YAAL,GAAoBQ,SAA7B;AAEC,aAAKziG,eAAL;AAEC;AACA2iG,UAAAA,KAAK,GAAGh9G,EAAR;AACAk9G,UAAAA,KAAK,GAAG,IAAIv0E,EAAJ,GAASD,EAAjB;AAEA;;AAED,aAAKpuB,gBAAL;AAEC;AACA0iG,UAAAA,KAAK,GAAG,CAAR;AACAE,UAAAA,KAAK,GAAGv0E,EAAE,GAAG6yE,EAAE,CAAE,CAAF,CAAP,GAAeA,EAAE,CAAE,CAAF,CAAzB;AAEA;;AAED;AAAS;AAER;AACAwB,UAAAA,KAAK,GAAGh9G,EAAE,GAAG,CAAb;AACAk9G,UAAAA,KAAK,GAAGx0E,EAAR;AAtBF;AA0BA;;AAED,UAAMy0E,MAAM,GAAG,CAAEx0E,EAAE,GAAGD,EAAP,IAAc,GAA7B;AAAA,UACC83B,MAAM,GAAG,KAAKk5C,SADf;AAGA,SAAK+C,WAAL,GAAmBU,MAAM,IAAKz0E,EAAE,GAAGu0E,KAAV,CAAzB;AACA,SAAKN,WAAL,GAAmBQ,MAAM,IAAKD,KAAK,GAAGv0E,EAAb,CAAzB;AACA,SAAK+zE,WAAL,GAAmBK,KAAK,GAAGv8C,MAA3B;AACA,SAAKo8C,WAAL,GAAmBI,KAAK,GAAGx8C,MAA3B;AAEA,GAxFkF;AA0FnF27C,EAAAA,YAAY,EAAE,UAAWn8G,EAAX,EAAe0oC,EAAf,EAAmB1zC,CAAnB,EAAsB2zC,EAAtB,EAA2B;AAExC,UAAM10C,MAAM,GAAG,KAAK6mH,YAApB;AAAA,UACCx5E,MAAM,GAAG,KAAK+5E,YADf;AAAA,UAEC76C,MAAM,GAAG,KAAKk5C,SAFf;AAAA,UAICx5G,EAAE,GAAGF,EAAE,GAAGwgE,MAJX;AAAA,UAIoB48C,EAAE,GAAGl9G,EAAE,GAAGsgE,MAJ9B;AAAA,UAKC68C,EAAE,GAAG,KAAKX,WALX;AAAA,UAKyBY,EAAE,GAAG,KAAKV,WALnC;AAAA,UAMCW,EAAE,GAAG,KAAKd,WANX;AAAA,UAMwBe,EAAE,GAAG,KAAKb,WANlC;AAAA,UAQC7nH,CAAC,GAAG,CAAEE,CAAC,GAAG0zC,EAAN,KAAeC,EAAE,GAAGD,EAApB,CARL;AAAA,UASC8yE,EAAE,GAAG1mH,CAAC,GAAGA,CATV;AAAA,UAUC2oH,GAAG,GAAGjC,EAAE,GAAG1mH,CAVZ,CAFwC,CAcxC;;AAEA,UAAM4oH,EAAE,GAAG,CAAEH,EAAF,GAAOE,GAAP,GAAa,IAAIF,EAAJ,GAAS/B,EAAtB,GAA2B+B,EAAE,GAAGzoH,CAA3C;AACA,UAAMozC,EAAE,GAAG,CAAE,IAAIq1E,EAAN,IAAaE,GAAb,GAAmB,CAAE,CAAE,GAAF,GAAQ,IAAIF,EAAd,IAAqB/B,EAAxC,GAA6C,CAAE,CAAE,GAAF,GAAQ+B,EAAV,IAAiBzoH,CAA9D,GAAkE,CAA7E;AACA,UAAM67B,EAAE,GAAG,CAAE,CAAE,CAAF,GAAM6sF,EAAR,IAAeC,GAAf,GAAqB,CAAE,MAAMD,EAAR,IAAehC,EAApC,GAAyC,MAAM1mH,CAA1D;AACA,UAAM6oH,EAAE,GAAGH,EAAE,GAAGC,GAAL,GAAWD,EAAE,GAAGhC,EAA3B,CAnBwC,CAqBxC;;AAEA,SAAM,IAAIppH,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC6B,MAAAA,MAAM,CAAE7B,CAAF,CAAN,GACEsrH,EAAE,GAAGp8E,MAAM,CAAE+7E,EAAE,GAAGjrH,CAAP,CAAX,GACA81C,EAAE,GAAG5G,MAAM,CAAE87E,EAAE,GAAGhrH,CAAP,CADX,GAEAu+B,EAAE,GAAG2Q,MAAM,CAAEphC,EAAE,GAAG9N,CAAP,CAFX,GAGAurH,EAAE,GAAGr8E,MAAM,CAAEg8E,EAAE,GAAGlrH,CAAP,CAJb;AAMA;;AAED,WAAO6B,MAAP;AAEA;AA7HkF,CAAvD,CAA7B;AAiIA;;;;AAIA,SAAS2pH,iBAAT,CAA4BxC,kBAA5B,EAAgDC,YAAhD,EAA8DC,UAA9D,EAA0ER,YAA1E,EAAyF;AAExFK,EAAAA,WAAW,CAAC1pH,IAAZ,CAAkB,IAAlB,EAAwB2pH,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA;;AAED8C,iBAAiB,CAAC1sH,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeowF,WAAW,CAACjqH,SAA3B,CAAf,EAAuD;AAEpFoC,EAAAA,WAAW,EAAEsqH,iBAFuE;AAIpFzB,EAAAA,YAAY,EAAE,UAAWn8G,EAAX,EAAe0oC,EAAf,EAAmB1zC,CAAnB,EAAsB2zC,EAAtB,EAA2B;AAExC,UAAM10C,MAAM,GAAG,KAAK6mH,YAApB;AAAA,UACCx5E,MAAM,GAAG,KAAK+5E,YADf;AAAA,UAEC76C,MAAM,GAAG,KAAKk5C,SAFf;AAAA,UAICmE,OAAO,GAAG79G,EAAE,GAAGwgE,MAJhB;AAAA,UAKCs9C,OAAO,GAAGD,OAAO,GAAGr9C,MALrB;AAAA,UAOCu9C,OAAO,GAAG,CAAE/oH,CAAC,GAAG0zC,EAAN,KAAeC,EAAE,GAAGD,EAApB,CAPX;AAAA,UAQCs1E,OAAO,GAAG,IAAID,OARf;;AAUA,SAAM,IAAI3rH,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC6B,MAAAA,MAAM,CAAE7B,CAAF,CAAN,GACEkvC,MAAM,CAAEw8E,OAAO,GAAG1rH,CAAZ,CAAN,GAAwB4rH,OAAxB,GACA18E,MAAM,CAAEu8E,OAAO,GAAGzrH,CAAZ,CAAN,GAAwB2rH,OAF1B;AAIA;;AAED,WAAO9pH,MAAP;AAEA;AA1BmF,CAAvD,CAA9B;AA8BA;;;;;;;;AAQA,SAASgqH,mBAAT,CAA8B7C,kBAA9B,EAAkDC,YAAlD,EAAgEC,UAAhE,EAA4ER,YAA5E,EAA2F;AAE1FK,EAAAA,WAAW,CAAC1pH,IAAZ,CAAkB,IAAlB,EAAwB2pH,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA;;AAEDmD,mBAAmB,CAAC/sH,SAApB,GAAgCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeowF,WAAW,CAACjqH,SAA3B,CAAf,EAAuD;AAEtFoC,EAAAA,WAAW,EAAE2qH,mBAFyE;AAItF9B,EAAAA,YAAY,EAAE,UAAWn8G;AAAG;AAAd,IAAiC;AAE9C,WAAO,KAAKu8G,gBAAL,CAAuBv8G,EAAE,GAAG,CAA5B,CAAP;AAEA;AARqF,CAAvD,CAAhC;AAYA;;;;;;;;;;AAUA,SAASk+G,aAAT,CAAwBx2G,IAAxB,EAA8BgxG,KAA9B,EAAqCp3E,MAArC,EAA6C68E,aAA7C,EAA6D;AAE5D,MAAKz2G,IAAI,KAAKvU,SAAd,EAA0B,MAAM,IAAIuC,KAAJ,CAAW,8CAAX,CAAN;AAC1B,MAAKgjH,KAAK,KAAKvlH,SAAV,IAAuBulH,KAAK,CAAC3nH,MAAN,KAAiB,CAA7C,EAAiD,MAAM,IAAI2E,KAAJ,CAAW,sDAAsDgS,IAAjE,CAAN;AAEjD,OAAKA,IAAL,GAAYA,IAAZ;AAEA,OAAKgxG,KAAL,GAAaX,cAAc,CAACK,YAAf,CAA6BM,KAA7B,EAAoC,KAAK0F,cAAzC,CAAb;AACA,OAAK98E,MAAL,GAAcy2E,cAAc,CAACK,YAAf,CAA6B92E,MAA7B,EAAqC,KAAK+8E,eAA1C,CAAd;AAEA,OAAKC,gBAAL,CAAuBH,aAAa,IAAI,KAAKI,oBAA7C;AAEA,EAED;;;AAEAzsH,MAAM,CAACme,MAAP,CAAeiuG,aAAf,EAA8B;AAE7B;AACA;AAEAhzF,EAAAA,MAAM,EAAE,UAAWuuF,KAAX,EAAmB;AAE1B,UAAM+E,SAAS,GAAG/E,KAAK,CAACnmH,WAAxB;AAEA,QAAImrH,IAAJ,CAJ0B,CAM1B;;AACA,QAAKD,SAAS,CAACtzF,MAAV,KAAqB/3B,SAA1B,EAAsC;AAErCsrH,MAAAA,IAAI,GAAGD,SAAS,CAACtzF,MAAV,CAAkBuuF,KAAlB,CAAP;AAEA,KAJD,MAIO;AAEN;AACAgF,MAAAA,IAAI,GAAG;AAEN,gBAAQhF,KAAK,CAAC/xG,IAFR;AAGN,iBAASqwG,cAAc,CAACK,YAAf,CAA6BqB,KAAK,CAACf,KAAnC,EAA0CznH,KAA1C,CAHH;AAIN,kBAAU8mH,cAAc,CAACK,YAAf,CAA6BqB,KAAK,CAACn4E,MAAnC,EAA2CrwC,KAA3C;AAJJ,OAAP;AAQA,YAAMktH,aAAa,GAAG1E,KAAK,CAACiF,gBAAN,EAAtB;;AAEA,UAAKP,aAAa,KAAK1E,KAAK,CAAC8E,oBAA7B,EAAoD;AAEnDE,QAAAA,IAAI,CAACN,aAAL,GAAqBA,aAArB;AAEA;AAED;;AAEDM,IAAAA,IAAI,CAACliH,IAAL,GAAYk9G,KAAK,CAACa,aAAlB,CAhC0B,CAgCO;;AAEjC,WAAOmE,IAAP;AAEA;AAzC4B,CAA9B;AA6CA3sH,MAAM,CAACme,MAAP,CAAeiuG,aAAa,CAAChtH,SAA7B,EAAwC;AAEvCoC,EAAAA,WAAW,EAAE4qH,aAF0B;AAIvCE,EAAAA,cAAc,EAAExlE,YAJuB;AAMvCylE,EAAAA,eAAe,EAAEzlE,YANsB;AAQvC2lE,EAAAA,oBAAoB,EAAErkG,iBARiB;AAUvCykG,EAAAA,gCAAgC,EAAE,UAAW1qH,MAAX,EAAoB;AAErD,WAAO,IAAIgqH,mBAAJ,CAAyB,KAAKvF,KAA9B,EAAqC,KAAKp3E,MAA1C,EAAkD,KAAKq4E,YAAL,EAAlD,EAAuE1lH,MAAvE,CAAP;AAEA,GAdsC;AAgBvC2qH,EAAAA,8BAA8B,EAAE,UAAW3qH,MAAX,EAAoB;AAEnD,WAAO,IAAI2pH,iBAAJ,CAAuB,KAAKlF,KAA5B,EAAmC,KAAKp3E,MAAxC,EAAgD,KAAKq4E,YAAL,EAAhD,EAAqE1lH,MAArE,CAAP;AAEA,GApBsC;AAsBvC4qH,EAAAA,8BAA8B,EAAE,UAAW5qH,MAAX,EAAoB;AAEnD,WAAO,IAAIuoH,gBAAJ,CAAsB,KAAK9D,KAA3B,EAAkC,KAAKp3E,MAAvC,EAA+C,KAAKq4E,YAAL,EAA/C,EAAoE1lH,MAApE,CAAP;AAEA,GA1BsC;AA4BvCqqH,EAAAA,gBAAgB,EAAE,UAAWH,aAAX,EAA2B;AAE5C,QAAIW,aAAJ;;AAEA,YAASX,aAAT;AAEC,WAAKlkG,mBAAL;AAEC6kG,QAAAA,aAAa,GAAG,KAAKH,gCAArB;AAEA;;AAED,WAAKzkG,iBAAL;AAEC4kG,QAAAA,aAAa,GAAG,KAAKF,8BAArB;AAEA;;AAED,WAAKzkG,iBAAL;AAEC2kG,QAAAA,aAAa,GAAG,KAAKD,8BAArB;AAEA;AAlBF;;AAsBA,QAAKC,aAAa,KAAK3rH,SAAvB,EAAmC;AAElC,YAAM8jG,OAAO,GAAG,mCACf,KAAKqjB,aADU,GACM,wBADN,GACiC,KAAK5yG,IADtD;;AAGA,UAAK,KAAKkzG,iBAAL,KAA2BznH,SAAhC,EAA4C;AAE3C;AACA,YAAKgrH,aAAa,KAAK,KAAKI,oBAA5B,EAAmD;AAElD,eAAKD,gBAAL,CAAuB,KAAKC,oBAA5B;AAEA,SAJD,MAIO;AAEN,gBAAM,IAAI7oH,KAAJ,CAAWuhG,OAAX,CAAN,CAFM,CAEsB;AAE5B;AAED;;AAEDp2E,MAAAA,OAAO,CAACC,IAAR,CAAc,sBAAd,EAAsCm2E,OAAtC;AACA,aAAO,IAAP;AAEA;;AAED,SAAK2jB,iBAAL,GAAyBkE,aAAzB;AAEA,WAAO,IAAP;AAEA,GAnFsC;AAqFvCJ,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,YAAS,KAAK9D,iBAAd;AAEC,WAAK,KAAK+D,gCAAV;AAEC,eAAO1kG,mBAAP;;AAED,WAAK,KAAK2kG,8BAAV;AAEC,eAAO1kG,iBAAP;;AAED,WAAK,KAAK2kG,8BAAV;AAEC,eAAO1kG,iBAAP;AAZF;AAgBA,GAvGsC;AAyGvCw/F,EAAAA,YAAY,EAAE,YAAY;AAEzB,WAAO,KAAKr4E,MAAL,CAAYvwC,MAAZ,GAAqB,KAAK2nH,KAAL,CAAW3nH,MAAvC;AAEA,GA7GsC;AA+GvC;AACAimG,EAAAA,KAAK,EAAE,UAAW+nB,UAAX,EAAwB;AAE9B,QAAKA,UAAU,KAAK,GAApB,EAA0B;AAEzB,YAAMrG,KAAK,GAAG,KAAKA,KAAnB;;AAEA,WAAM,IAAItmH,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGm6F,KAAK,CAAC3nH,MAA3B,EAAmCqB,CAAC,KAAKmsB,CAAzC,EAA4C,EAAGnsB,CAA/C,EAAmD;AAElDsmH,QAAAA,KAAK,CAAEtmH,CAAF,CAAL,IAAc2sH,UAAd;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAhIsC;AAkIvC;AACAx2F,EAAAA,KAAK,EAAE,UAAWy2F,SAAX,EAAuB;AAE7B,QAAKA,SAAS,KAAK,GAAnB,EAAyB;AAExB,YAAMtG,KAAK,GAAG,KAAKA,KAAnB;;AAEA,WAAM,IAAItmH,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGm6F,KAAK,CAAC3nH,MAA3B,EAAmCqB,CAAC,KAAKmsB,CAAzC,EAA4C,EAAGnsB,CAA/C,EAAmD;AAElDsmH,QAAAA,KAAK,CAAEtmH,CAAF,CAAL,IAAc4sH,SAAd;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAnJsC;AAqJvC;AACA;AACA1wC,EAAAA,IAAI,EAAE,UAAW2wC,SAAX,EAAsBC,OAAtB,EAAgC;AAErC,UAAMxG,KAAK,GAAG,KAAKA,KAAnB;AAAA,UACCyG,KAAK,GAAGzG,KAAK,CAAC3nH,MADf;AAGA,QAAIknH,IAAI,GAAG,CAAX;AAAA,QACCC,EAAE,GAAGiH,KAAK,GAAG,CADd;;AAGA,WAAQlH,IAAI,KAAKkH,KAAT,IAAkBzG,KAAK,CAAET,IAAF,CAAL,GAAgBgH,SAA1C,EAAsD;AAErD,QAAGhH,IAAH;AAEA;;AAED,WAAQC,EAAE,KAAK,CAAE,CAAT,IAAcQ,KAAK,CAAER,EAAF,CAAL,GAAcgH,OAApC,EAA8C;AAE7C,QAAGhH,EAAH;AAEA;;AAED,MAAGA,EAAH,CApBqC,CAoB9B;;AAEP,QAAKD,IAAI,KAAK,CAAT,IAAcC,EAAE,KAAKiH,KAA1B,EAAkC;AAEjC;AACA,UAAKlH,IAAI,IAAIC,EAAb,EAAkB;AAEjBA,QAAAA,EAAE,GAAG9nH,IAAI,CAAC+E,GAAL,CAAU+iH,EAAV,EAAc,CAAd,CAAL;AACAD,QAAAA,IAAI,GAAGC,EAAE,GAAG,CAAZ;AAEA;;AAED,YAAM13C,MAAM,GAAG,KAAKm5C,YAAL,EAAf;AACA,WAAKjB,KAAL,GAAaX,cAAc,CAACC,UAAf,CAA2BU,KAA3B,EAAkCT,IAAlC,EAAwCC,EAAxC,CAAb;AACA,WAAK52E,MAAL,GAAcy2E,cAAc,CAACC,UAAf,CAA2B,KAAK12E,MAAhC,EAAwC22E,IAAI,GAAGz3C,MAA/C,EAAuD03C,EAAE,GAAG13C,MAA5D,CAAd;AAEA;;AAED,WAAO,IAAP;AAEA,GA/LsC;AAiMvC;AACA4+C,EAAAA,QAAQ,EAAE,YAAY;AAErB,QAAIC,KAAK,GAAG,IAAZ;AAEA,UAAM3F,SAAS,GAAG,KAAKC,YAAL,EAAlB;;AACA,QAAKD,SAAS,GAAGtpH,IAAI,CAACwE,KAAL,CAAY8kH,SAAZ,CAAZ,KAAwC,CAA7C,EAAiD;AAEhD74F,MAAAA,OAAO,CAACyD,KAAR,CAAe,mDAAf,EAAoE,IAApE;AACA+6F,MAAAA,KAAK,GAAG,KAAR;AAEA;;AAED,UAAM3G,KAAK,GAAG,KAAKA,KAAnB;AAAA,UACCp3E,MAAM,GAAG,KAAKA,MADf;AAAA,UAGC69E,KAAK,GAAGzG,KAAK,CAAC3nH,MAHf;;AAKA,QAAKouH,KAAK,KAAK,CAAf,EAAmB;AAElBt+F,MAAAA,OAAO,CAACyD,KAAR,CAAe,sCAAf,EAAuD,IAAvD;AACA+6F,MAAAA,KAAK,GAAG,KAAR;AAEA;;AAED,QAAIC,QAAQ,GAAG,IAAf;;AAEA,SAAM,IAAIltH,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAK+sH,KAAvB,EAA8B/sH,CAAC,EAA/B,EAAqC;AAEpC,YAAMmtH,QAAQ,GAAG7G,KAAK,CAAEtmH,CAAF,CAAtB;;AAEA,UAAK,OAAOmtH,QAAP,KAAoB,QAApB,IAAgCnsH,KAAK,CAAEmsH,QAAF,CAA1C,EAAyD;AAExD1+F,QAAAA,OAAO,CAACyD,KAAR,CAAe,kDAAf,EAAmE,IAAnE,EAAyElyB,CAAzE,EAA4EmtH,QAA5E;AACAF,QAAAA,KAAK,GAAG,KAAR;AACA;AAEA;;AAED,UAAKC,QAAQ,KAAK,IAAb,IAAqBA,QAAQ,GAAGC,QAArC,EAAgD;AAE/C1+F,QAAAA,OAAO,CAACyD,KAAR,CAAe,yCAAf,EAA0D,IAA1D,EAAgElyB,CAAhE,EAAmEmtH,QAAnE,EAA6ED,QAA7E;AACAD,QAAAA,KAAK,GAAG,KAAR;AACA;AAEA;;AAEDC,MAAAA,QAAQ,GAAGC,QAAX;AAEA;;AAED,QAAKj+E,MAAM,KAAKnuC,SAAhB,EAA4B;AAE3B,UAAK4kH,cAAc,CAACI,YAAf,CAA6B72E,MAA7B,CAAL,EAA6C;AAE5C,aAAM,IAAIlvC,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG+iB,MAAM,CAACvwC,MAA5B,EAAoCqB,CAAC,KAAKmsB,CAA1C,EAA6C,EAAGnsB,CAAhD,EAAoD;AAEnD,gBAAMoD,KAAK,GAAG8rC,MAAM,CAAElvC,CAAF,CAApB;;AAEA,cAAKgB,KAAK,CAAEoC,KAAF,CAAV,EAAsB;AAErBqrB,YAAAA,OAAO,CAACyD,KAAR,CAAe,mDAAf,EAAoE,IAApE,EAA0ElyB,CAA1E,EAA6EoD,KAA7E;AACA6pH,YAAAA,KAAK,GAAG,KAAR;AACA;AAEA;AAED;AAED;AAED;;AAED,WAAOA,KAAP;AAEA,GA5QsC;AA8QvC;AACA;AACAG,EAAAA,QAAQ,EAAE,YAAY;AAErB;AACA,UAAM9G,KAAK,GAAGX,cAAc,CAACC,UAAf,CAA2B,KAAKU,KAAhC,CAAd;AAAA,UACCp3E,MAAM,GAAGy2E,cAAc,CAACC,UAAf,CAA2B,KAAK12E,MAAhC,CADV;AAAA,UAECk/B,MAAM,GAAG,KAAKm5C,YAAL,EAFV;AAAA,UAIC8F,mBAAmB,GAAG,KAAKf,gBAAL,OAA4BvkG,iBAJnD;AAAA,UAMC4yD,SAAS,GAAG2rC,KAAK,CAAC3nH,MAAN,GAAe,CAN5B;AAQA,QAAI2uH,UAAU,GAAG,CAAjB;;AAEA,SAAM,IAAIttH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG26E,SAArB,EAAgC,EAAG36E,CAAnC,EAAuC;AAEtC,UAAIutH,IAAI,GAAG,KAAX;AAEA,YAAMvuD,IAAI,GAAGsnD,KAAK,CAAEtmH,CAAF,CAAlB;AACA,YAAMwtH,QAAQ,GAAGlH,KAAK,CAAEtmH,CAAC,GAAG,CAAN,CAAtB,CALsC,CAOtC;;AAEA,UAAKg/D,IAAI,KAAKwuD,QAAT,KAAuBxtH,CAAC,KAAK,CAAN,IAAWg/D,IAAI,KAAKA,IAAI,CAAE,CAAF,CAA/C,CAAL,EAA8D;AAE7D,YAAK,CAAEquD,mBAAP,EAA6B;AAE5B;AAEA,gBAAMvjH,MAAM,GAAG9J,CAAC,GAAGouE,MAAnB;AAAA,gBACCq/C,OAAO,GAAG3jH,MAAM,GAAGskE,MADpB;AAAA,gBAECs/C,OAAO,GAAG5jH,MAAM,GAAGskE,MAFpB;;AAIA,eAAM,IAAIv6B,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKu6B,MAAvB,EAA+B,EAAGv6B,CAAlC,EAAsC;AAErC,kBAAMzwC,KAAK,GAAG8rC,MAAM,CAAEplC,MAAM,GAAG+pC,CAAX,CAApB;;AAEA,gBAAKzwC,KAAK,KAAK8rC,MAAM,CAAEu+E,OAAO,GAAG55E,CAAZ,CAAhB,IACJzwC,KAAK,KAAK8rC,MAAM,CAAEw+E,OAAO,GAAG75E,CAAZ,CADjB,EACmC;AAElC05E,cAAAA,IAAI,GAAG,IAAP;AACA;AAEA;AAED;AAED,SAtBD,MAsBO;AAENA,UAAAA,IAAI,GAAG,IAAP;AAEA;AAED,OAvCqC,CAyCtC;;;AAEA,UAAKA,IAAL,EAAY;AAEX,YAAKvtH,CAAC,KAAKstH,UAAX,EAAwB;AAEvBhH,UAAAA,KAAK,CAAEgH,UAAF,CAAL,GAAsBhH,KAAK,CAAEtmH,CAAF,CAA3B;AAEA,gBAAM2tH,UAAU,GAAG3tH,CAAC,GAAGouE,MAAvB;AAAA,gBACCw/C,WAAW,GAAGN,UAAU,GAAGl/C,MAD5B;;AAGA,eAAM,IAAIv6B,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKu6B,MAAvB,EAA+B,EAAGv6B,CAAlC,EAAsC;AAErC3E,YAAAA,MAAM,CAAE0+E,WAAW,GAAG/5E,CAAhB,CAAN,GAA4B3E,MAAM,CAAEy+E,UAAU,GAAG95E,CAAf,CAAlC;AAEA;AAED;;AAED,UAAGy5E,UAAH;AAEA;AAED,KA7EoB,CA+ErB;;;AAEA,QAAK3yC,SAAS,GAAG,CAAjB,EAAqB;AAEpB2rC,MAAAA,KAAK,CAAEgH,UAAF,CAAL,GAAsBhH,KAAK,CAAE3rC,SAAF,CAA3B;;AAEA,WAAM,IAAIgzC,UAAU,GAAGhzC,SAAS,GAAGvM,MAA7B,EAAqCw/C,WAAW,GAAGN,UAAU,GAAGl/C,MAAhE,EAAwEv6B,CAAC,GAAG,CAAlF,EAAqFA,CAAC,KAAKu6B,MAA3F,EAAmG,EAAGv6B,CAAtG,EAA0G;AAEzG3E,QAAAA,MAAM,CAAE0+E,WAAW,GAAG/5E,CAAhB,CAAN,GAA4B3E,MAAM,CAAEy+E,UAAU,GAAG95E,CAAf,CAAlC;AAEA;;AAED,QAAGy5E,UAAH;AAEA;;AAED,QAAKA,UAAU,KAAKhH,KAAK,CAAC3nH,MAA1B,EAAmC;AAElC,WAAK2nH,KAAL,GAAaX,cAAc,CAACC,UAAf,CAA2BU,KAA3B,EAAkC,CAAlC,EAAqCgH,UAArC,CAAb;AACA,WAAKp+E,MAAL,GAAcy2E,cAAc,CAACC,UAAf,CAA2B12E,MAA3B,EAAmC,CAAnC,EAAsCo+E,UAAU,GAAGl/C,MAAnD,CAAd;AAEA,KALD,MAKO;AAEN,WAAKk4C,KAAL,GAAaA,KAAb;AACA,WAAKp3E,MAAL,GAAcA,MAAd;AAEA;;AAED,WAAO,IAAP;AAEA,GA7XsC;AA+XvC/f,EAAAA,KAAK,EAAE,YAAY;AAElB,UAAMm3F,KAAK,GAAGX,cAAc,CAACC,UAAf,CAA2B,KAAKU,KAAhC,EAAuC,CAAvC,CAAd;AACA,UAAMp3E,MAAM,GAAGy2E,cAAc,CAACC,UAAf,CAA2B,KAAK12E,MAAhC,EAAwC,CAAxC,CAAf;AAEA,UAAM2+E,kBAAkB,GAAG,KAAK3sH,WAAhC;AACA,UAAMmmH,KAAK,GAAG,IAAIwG,kBAAJ,CAAwB,KAAKv4G,IAA7B,EAAmCgxG,KAAnC,EAA0Cp3E,MAA1C,CAAd,CANkB,CAQlB;;AACAm4E,IAAAA,KAAK,CAACmB,iBAAN,GAA0B,KAAKA,iBAA/B;AAEA,WAAOnB,KAAP;AAEA;AA5YsC,CAAxC;AAgZA;;;;;;;;;;AAUA,SAASyG,oBAAT,CAA+Bx4G,IAA/B,EAAqCgxG,KAArC,EAA4Cp3E,MAA5C,EAAqD;AAEpD48E,EAAAA,aAAa,CAACzsH,IAAd,CAAoB,IAApB,EAA0BiW,IAA1B,EAAgCgxG,KAAhC,EAAuCp3E,MAAvC;AAEA;;AAED4+E,oBAAoB,CAAChvH,SAArB,GAAiCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAemzF,aAAa,CAAChtH,SAA7B,CAAf,EAAyD;AAEzFoC,EAAAA,WAAW,EAAE4sH,oBAF4E;AAIzF5F,EAAAA,aAAa,EAAE,MAJ0E;AAKzF+D,EAAAA,eAAe,EAAEptH,KALwE;AAOzFstH,EAAAA,oBAAoB,EAAEtkG,mBAPmE;AASzF2kG,EAAAA,8BAA8B,EAAEzrH,SATyD;AAUzF0rH,EAAAA,8BAA8B,EAAE1rH,SAVyD,CAYzF;AACA;AACA;;AAdyF,CAAzD,CAAjC;AAkBA;;;;;;;;;;AAUA,SAASgtH,kBAAT,CAA6Bz4G,IAA7B,EAAmCgxG,KAAnC,EAA0Cp3E,MAA1C,EAAkD68E,aAAlD,EAAkE;AAEjED,EAAAA,aAAa,CAACzsH,IAAd,CAAoB,IAApB,EAA0BiW,IAA1B,EAAgCgxG,KAAhC,EAAuCp3E,MAAvC,EAA+C68E,aAA/C;AAEA;;AAEDgC,kBAAkB,CAACjvH,SAAnB,GAA+BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAemzF,aAAa,CAAChtH,SAA7B,CAAf,EAAyD;AAEvFoC,EAAAA,WAAW,EAAE6sH,kBAF0E;AAIvF7F,EAAAA,aAAa,EAAE,OAJwE,CAMvF;AAEA;AAEA;AACA;;AAXuF,CAAzD,CAA/B;AAeA;;;;;;;;;AASA,SAAS8F,mBAAT,CAA8B14G,IAA9B,EAAoCgxG,KAApC,EAA2Cp3E,MAA3C,EAAmD68E,aAAnD,EAAmE;AAElED,EAAAA,aAAa,CAACzsH,IAAd,CAAoB,IAApB,EAA0BiW,IAA1B,EAAgCgxG,KAAhC,EAAuCp3E,MAAvC,EAA+C68E,aAA/C;AAEA;;AAEDiC,mBAAmB,CAAClvH,SAApB,GAAgCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAemzF,aAAa,CAAChtH,SAA7B,CAAf,EAAyD;AAExFoC,EAAAA,WAAW,EAAE8sH,mBAF2E;AAIxF9F,EAAAA,aAAa,EAAE,QAJyE,CAMxF;AAEA;;AARwF,CAAzD,CAAhC;AAYA;;;;;;AAMA,SAAS+F,2BAAT,CAAsCjF,kBAAtC,EAA0DC,YAA1D,EAAwEC,UAAxE,EAAoFR,YAApF,EAAmG;AAElGK,EAAAA,WAAW,CAAC1pH,IAAZ,CAAkB,IAAlB,EAAwB2pH,kBAAxB,EAA4CC,YAA5C,EAA0DC,UAA1D,EAAsER,YAAtE;AAEA;;AAEDuF,2BAA2B,CAACnvH,SAA5B,GAAwCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeowF,WAAW,CAACjqH,SAA3B,CAAf,EAAuD;AAE9FoC,EAAAA,WAAW,EAAE+sH,2BAFiF;AAI9FlE,EAAAA,YAAY,EAAE,UAAWn8G,EAAX,EAAe0oC,EAAf,EAAmB1zC,CAAnB,EAAsB2zC,EAAtB,EAA2B;AAExC,UAAM10C,MAAM,GAAG,KAAK6mH,YAApB;AAAA,UACCx5E,MAAM,GAAG,KAAK+5E,YADf;AAAA,UAEC76C,MAAM,GAAG,KAAKk5C,SAFf;AAAA,UAICj2F,KAAK,GAAG,CAAEzuB,CAAC,GAAG0zC,EAAN,KAAeC,EAAE,GAAGD,EAApB,CAJT;AAMA,QAAIxsC,MAAM,GAAG8D,EAAE,GAAGwgE,MAAlB;;AAEA,SAAM,IAAIx1B,GAAG,GAAG9uC,MAAM,GAAGskE,MAAzB,EAAiCtkE,MAAM,KAAK8uC,GAA5C,EAAiD9uC,MAAM,IAAI,CAA3D,EAA+D;AAE9DoyB,MAAAA,UAAU,CAACQ,SAAX,CAAsB76B,MAAtB,EAA8B,CAA9B,EAAiCqtC,MAAjC,EAAyCplC,MAAM,GAAGskE,MAAlD,EAA0Dl/B,MAA1D,EAAkEplC,MAAlE,EAA0EunB,KAA1E;AAEA;;AAED,WAAOxvB,MAAP;AAEA;AAtB6F,CAAvD,CAAxC;AA0BA;;;;;;;;;AASA,SAASqsH,uBAAT,CAAkC54G,IAAlC,EAAwCgxG,KAAxC,EAA+Cp3E,MAA/C,EAAuD68E,aAAvD,EAAuE;AAEtED,EAAAA,aAAa,CAACzsH,IAAd,CAAoB,IAApB,EAA0BiW,IAA1B,EAAgCgxG,KAAhC,EAAuCp3E,MAAvC,EAA+C68E,aAA/C;AAEA;;AAEDmC,uBAAuB,CAACpvH,SAAxB,GAAoCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAemzF,aAAa,CAAChtH,SAA7B,CAAf,EAAyD;AAE5FoC,EAAAA,WAAW,EAAEgtH,uBAF+E;AAI5FhG,EAAAA,aAAa,EAAE,YAJ6E;AAM5F;AAEAiE,EAAAA,oBAAoB,EAAErkG,iBARsE;AAU5F0kG,EAAAA,8BAA8B,EAAE,UAAW3qH,MAAX,EAAoB;AAEnD,WAAO,IAAIosH,2BAAJ,CAAiC,KAAK3H,KAAtC,EAA6C,KAAKp3E,MAAlD,EAA0D,KAAKq4E,YAAL,EAA1D,EAA+E1lH,MAA/E,CAAP;AAEA,GAd2F;AAgB5F4qH,EAAAA,8BAA8B,EAAE1rH,SAhB4D,CAgBlD;;AAhBkD,CAAzD,CAApC;AAoBA;;;;;;;;;;AAUA,SAASotH,mBAAT,CAA8B74G,IAA9B,EAAoCgxG,KAApC,EAA2Cp3E,MAA3C,EAAmD68E,aAAnD,EAAmE;AAElED,EAAAA,aAAa,CAACzsH,IAAd,CAAoB,IAApB,EAA0BiW,IAA1B,EAAgCgxG,KAAhC,EAAuCp3E,MAAvC,EAA+C68E,aAA/C;AAEA;;AAEDoC,mBAAmB,CAACrvH,SAApB,GAAgCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAemzF,aAAa,CAAChtH,SAA7B,CAAf,EAAyD;AAExFoC,EAAAA,WAAW,EAAEitH,mBAF2E;AAIxFjG,EAAAA,aAAa,EAAE,QAJyE;AAKxF+D,EAAAA,eAAe,EAAEptH,KALuE;AAOxFstH,EAAAA,oBAAoB,EAAEtkG,mBAPkE;AASxF2kG,EAAAA,8BAA8B,EAAEzrH,SATwD;AAWxF0rH,EAAAA,8BAA8B,EAAE1rH;AAXwD,CAAzD,CAAhC;AAeA;;;;;;;;;;AAUA,SAASqtH,mBAAT,CAA8B94G,IAA9B,EAAoCgxG,KAApC,EAA2Cp3E,MAA3C,EAAmD68E,aAAnD,EAAmE;AAElED,EAAAA,aAAa,CAACzsH,IAAd,CAAoB,IAApB,EAA0BiW,IAA1B,EAAgCgxG,KAAhC,EAAuCp3E,MAAvC,EAA+C68E,aAA/C;AAEA;;AAEDqC,mBAAmB,CAACtvH,SAApB,GAAgCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAemzF,aAAa,CAAChtH,SAA7B,CAAf,EAAyD;AAExFoC,EAAAA,WAAW,EAAEktH,mBAF2E;AAIxFlG,EAAAA,aAAa,EAAE,QAJyE,CAMxF;AAEA;;AARwF,CAAzD,CAAhC;AAYA;;;;;;;;AAQA,SAASmG,aAAT,CAAwB/4G,IAAxB,EAA8Bg5G,QAA9B,EAAwClH,MAAxC,EAAgD0B,SAAhD,EAA4D;AAE3D,OAAKxzG,IAAL,GAAYA,IAAZ;AACA,OAAK8xG,MAAL,GAAcA,MAAd;AACA,OAAKkH,QAAL,GAAkBA,QAAQ,KAAKvtH,SAAf,GAA6ButH,QAA7B,GAAwC,CAAE,CAA1D;AACA,OAAKxF,SAAL,GAAmBA,SAAS,KAAK/nH,SAAhB,GAA8B+nH,SAA9B,GAA0C3gG,wBAA3D;AAEA,OAAK4D,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ,CAP2D,CAS3D;;AACA,MAAK,KAAK6iG,QAAL,GAAgB,CAArB,EAAyB;AAExB,SAAK7G,aAAL;AAEA;AAED;;AAED,SAAS8G,4BAAT,CAAuCC,QAAvC,EAAkD;AAEjD,UAASA,QAAQ,CAACC,WAAT,EAAT;AAEC,SAAK,QAAL;AACA,SAAK,QAAL;AACA,SAAK,OAAL;AACA,SAAK,QAAL;AACA,SAAK,SAAL;AAEC,aAAOT,mBAAP;;AAED,SAAK,QAAL;AACA,SAAK,SAAL;AACA,SAAK,SAAL;AACA,SAAK,SAAL;AAEC,aAAOI,mBAAP;;AAED,SAAK,OAAL;AAEC,aAAOL,kBAAP;;AAED,SAAK,YAAL;AAEC,aAAOG,uBAAP;;AAED,SAAK,MAAL;AACA,SAAK,SAAL;AAEC,aAAOJ,oBAAP;;AAED,SAAK,QAAL;AAEC,aAAOK,mBAAP;AAhCF;;AAoCA,QAAM,IAAI7qH,KAAJ,CAAW,gDAAgDkrH,QAA3D,CAAN;AAEA;;AAED,SAASE,kBAAT,CAA6BrC,IAA7B,EAAoC;AAEnC,MAAKA,IAAI,CAACliH,IAAL,KAAcpJ,SAAnB,EAA+B;AAE9B,UAAM,IAAIuC,KAAJ,CAAW,0DAAX,CAAN;AAEA;;AAED,QAAM8oH,SAAS,GAAGmC,4BAA4B,CAAElC,IAAI,CAACliH,IAAP,CAA9C;;AAEA,MAAKkiH,IAAI,CAAC/F,KAAL,KAAevlH,SAApB,EAAgC;AAE/B,UAAMulH,KAAK,GAAG,EAAd;AAAA,UAAkBp3E,MAAM,GAAG,EAA3B;AAEAy2E,IAAAA,cAAc,CAACgB,WAAf,CAA4B0F,IAAI,CAAC7sH,IAAjC,EAAuC8mH,KAAvC,EAA8Cp3E,MAA9C,EAAsD,OAAtD;AAEAm9E,IAAAA,IAAI,CAAC/F,KAAL,GAAaA,KAAb;AACA+F,IAAAA,IAAI,CAACn9E,MAAL,GAAcA,MAAd;AAEA,GAnBkC,CAqBnC;;;AACA,MAAKk9E,SAAS,CAACn2G,KAAV,KAAoBlV,SAAzB,EAAqC;AAEpC,WAAOqrH,SAAS,CAACn2G,KAAV,CAAiBo2G,IAAjB,CAAP;AAEA,GAJD,MAIO;AAEN;AACA,WAAO,IAAID,SAAJ,CAAeC,IAAI,CAAC/2G,IAApB,EAA0B+2G,IAAI,CAAC/F,KAA/B,EAAsC+F,IAAI,CAACn9E,MAA3C,EAAmDm9E,IAAI,CAACN,aAAxD,CAAP;AAEA;AAED;;AAEDrsH,MAAM,CAACme,MAAP,CAAewwG,aAAf,EAA8B;AAE7Bp4G,EAAAA,KAAK,EAAE,UAAWo2G,IAAX,EAAkB;AAExB,UAAMjF,MAAM,GAAG,EAAf;AAAA,UACCuH,UAAU,GAAGtC,IAAI,CAACjF,MADnB;AAAA,UAECwH,SAAS,GAAG,OAAQvC,IAAI,CAACnF,GAAL,IAAY,GAApB,CAFb;;AAIA,SAAM,IAAIlnH,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGwiG,UAAU,CAAChwH,MAAhC,EAAwCqB,CAAC,KAAKmsB,CAA9C,EAAiD,EAAGnsB,CAApD,EAAwD;AAEvDonH,MAAAA,MAAM,CAACj+G,IAAP,CAAaulH,kBAAkB,CAAEC,UAAU,CAAE3uH,CAAF,CAAZ,CAAlB,CAAsCm2B,KAAtC,CAA6Cy4F,SAA7C,CAAb;AAEA;;AAED,WAAO,IAAIP,aAAJ,CAAmBhC,IAAI,CAAC/2G,IAAxB,EAA8B+2G,IAAI,CAACiC,QAAnC,EAA6ClH,MAA7C,EAAqDiF,IAAI,CAACvD,SAA1D,CAAP;AAEA,GAhB4B;AAkB7BhwF,EAAAA,MAAM,EAAE,UAAWquF,IAAX,EAAkB;AAEzB,UAAMC,MAAM,GAAG,EAAf;AAAA,UACCyH,UAAU,GAAG1H,IAAI,CAACC,MADnB;AAGA,UAAMiF,IAAI,GAAG;AAEZ,cAAQlF,IAAI,CAAC7xG,IAFD;AAGZ,kBAAY6xG,IAAI,CAACmH,QAHL;AAIZ,gBAAUlH,MAJE;AAKZ,cAAQD,IAAI,CAACp7F,IALD;AAMZ,mBAAao7F,IAAI,CAAC2B;AANN,KAAb;;AAUA,SAAM,IAAI9oH,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG0iG,UAAU,CAAClwH,MAAhC,EAAwCqB,CAAC,KAAKmsB,CAA9C,EAAiD,EAAGnsB,CAApD,EAAwD;AAEvDonH,MAAAA,MAAM,CAACj+G,IAAP,CAAa2iH,aAAa,CAAChzF,MAAd,CAAsB+1F,UAAU,CAAE7uH,CAAF,CAAhC,CAAb;AAEA;;AAED,WAAOqsH,IAAP;AAEA,GAzC4B;AA2C7ByC,EAAAA,6BAA6B,EAAE,UAAWx5G,IAAX,EAAiBy5G,mBAAjB,EAAsC7H,GAAtC,EAA2C8H,MAA3C,EAAoD;AAElF,UAAMC,eAAe,GAAGF,mBAAmB,CAACpwH,MAA5C;AACA,UAAMyoH,MAAM,GAAG,EAAf;;AAEA,SAAM,IAAIpnH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGivH,eAArB,EAAsCjvH,CAAC,EAAvC,EAA6C;AAE5C,UAAIsmH,KAAK,GAAG,EAAZ;AACA,UAAIp3E,MAAM,GAAG,EAAb;AAEAo3E,MAAAA,KAAK,CAACn9G,IAAN,CACC,CAAEnJ,CAAC,GAAGivH,eAAJ,GAAsB,CAAxB,IAA8BA,eAD/B,EAECjvH,CAFD,EAGC,CAAEA,CAAC,GAAG,CAAN,IAAYivH,eAHb;AAKA//E,MAAAA,MAAM,CAAC/lC,IAAP,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB;AAEA,YAAM0kB,KAAK,GAAG83F,cAAc,CAACU,gBAAf,CAAiCC,KAAjC,CAAd;AACAA,MAAAA,KAAK,GAAGX,cAAc,CAACa,WAAf,CAA4BF,KAA5B,EAAmC,CAAnC,EAAsCz4F,KAAtC,CAAR;AACAqhB,MAAAA,MAAM,GAAGy2E,cAAc,CAACa,WAAf,CAA4Bt3E,MAA5B,EAAoC,CAApC,EAAuCrhB,KAAvC,CAAT,CAd4C,CAgB5C;AACA;;AACA,UAAK,CAAEmhG,MAAF,IAAY1I,KAAK,CAAE,CAAF,CAAL,KAAe,CAAhC,EAAoC;AAEnCA,QAAAA,KAAK,CAACn9G,IAAN,CAAY8lH,eAAZ;AACA//E,QAAAA,MAAM,CAAC/lC,IAAP,CAAa+lC,MAAM,CAAE,CAAF,CAAnB;AAEA;;AAEDk4E,MAAAA,MAAM,CAACj+G,IAAP,CACC,IAAI6kH,mBAAJ,CACC,4BAA4Be,mBAAmB,CAAE/uH,CAAF,CAAnB,CAAyBsV,IAArD,GAA4D,GAD7D,EAECgxG,KAFD,EAEQp3E,MAFR,EAGE/Y,KAHF,CAGS,MAAM+wF,GAHf,CADD;AAMA;;AAED,WAAO,IAAImH,aAAJ,CAAmB/4G,IAAnB,EAAyB,CAAE,CAA3B,EAA8B8xG,MAA9B,CAAP;AAEA,GAnF4B;AAqF7B8H,EAAAA,UAAU,EAAE,UAAWC,iBAAX,EAA8B75G,IAA9B,EAAqC;AAEhD,QAAI85G,SAAS,GAAGD,iBAAhB;;AAEA,QAAK,CAAEtwH,KAAK,CAACoC,OAAN,CAAekuH,iBAAf,CAAP,EAA4C;AAE3C,YAAMld,CAAC,GAAGkd,iBAAV;AACAC,MAAAA,SAAS,GAAGnd,CAAC,CAACtjE,QAAF,IAAcsjE,CAAC,CAACtjE,QAAF,CAAW0gF,UAAzB,IAAuCpd,CAAC,CAACod,UAArD;AAEA;;AAED,SAAM,IAAIrvH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGovH,SAAS,CAACzwH,MAA/B,EAAuCqB,CAAC,EAAxC,EAA8C;AAE7C,UAAKovH,SAAS,CAAEpvH,CAAF,CAAT,CAAesV,IAAf,KAAwBA,IAA7B,EAAoC;AAEnC,eAAO85G,SAAS,CAAEpvH,CAAF,CAAhB;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GA5G4B;AA8G7BsvH,EAAAA,mCAAmC,EAAE,UAAW5rE,YAAX,EAAyBwjE,GAAzB,EAA8B8H,MAA9B,EAAuC;AAE3E,UAAMO,uBAAuB,GAAG,EAAhC,CAF2E,CAI3E;AACA;;AACA,UAAMC,OAAO,GAAG,oBAAhB,CAN2E,CAQ3E;AACA;;AACA,SAAM,IAAIxvH,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGiS,YAAY,CAAC/kD,MAAnC,EAA2CqB,CAAC,GAAGyxC,EAA/C,EAAmDzxC,CAAC,EAApD,EAA0D;AAEzD,YAAMwoD,WAAW,GAAG9E,YAAY,CAAE1jD,CAAF,CAAhC;AACA,YAAMyvH,KAAK,GAAGjnE,WAAW,CAAClzC,IAAZ,CAAiB7T,KAAjB,CAAwB+tH,OAAxB,CAAd;;AAEA,UAAKC,KAAK,IAAIA,KAAK,CAAC9wH,MAAN,GAAe,CAA7B,EAAiC;AAEhC,cAAM2W,IAAI,GAAGm6G,KAAK,CAAE,CAAF,CAAlB;AAEA,YAAIC,qBAAqB,GAAGH,uBAAuB,CAAEj6G,IAAF,CAAnD;;AAEA,YAAK,CAAEo6G,qBAAP,EAA+B;AAE9BH,UAAAA,uBAAuB,CAAEj6G,IAAF,CAAvB,GAAkCo6G,qBAAqB,GAAG,EAA1D;AAEA;;AAEDA,QAAAA,qBAAqB,CAACvmH,IAAtB,CAA4Bq/C,WAA5B;AAEA;AAED;;AAED,UAAMmnE,KAAK,GAAG,EAAd;;AAEA,SAAM,MAAMr6G,IAAZ,IAAoBi6G,uBAApB,EAA8C;AAE7CI,MAAAA,KAAK,CAACxmH,IAAN,CAAYklH,aAAa,CAACS,6BAAd,CAA6Cx5G,IAA7C,EAAmDi6G,uBAAuB,CAAEj6G,IAAF,CAA1E,EAAoF4xG,GAApF,EAAyF8H,MAAzF,CAAZ;AAEA;;AAED,WAAOW,KAAP;AAEA,GAzJ4B;AA2J7B;AACAC,EAAAA,cAAc,EAAE,UAAWhzB,SAAX,EAAsBjY,KAAtB,EAA8B;AAE7C,QAAK,CAAEiY,SAAP,EAAmB;AAElBnuE,MAAAA,OAAO,CAACyD,KAAR,CAAe,uDAAf;AACA,aAAO,IAAP;AAEA;;AAED,UAAM29F,gBAAgB,GAAG,UAAWzD,SAAX,EAAsB0D,SAAtB,EAAiCC,aAAjC,EAAgDC,YAAhD,EAA8DC,UAA9D,EAA2E;AAEnG;AACA,UAAKF,aAAa,CAACpxH,MAAd,KAAyB,CAA9B,EAAkC;AAEjC,cAAM2nH,KAAK,GAAG,EAAd;AACA,cAAMp3E,MAAM,GAAG,EAAf;AAEAy2E,QAAAA,cAAc,CAACgB,WAAf,CAA4BoJ,aAA5B,EAA2CzJ,KAA3C,EAAkDp3E,MAAlD,EAA0D8gF,YAA1D,EALiC,CAOjC;;AACA,YAAK1J,KAAK,CAAC3nH,MAAN,KAAiB,CAAtB,EAA0B;AAEzBsxH,UAAAA,UAAU,CAAC9mH,IAAX,CAAiB,IAAIijH,SAAJ,CAAe0D,SAAf,EAA0BxJ,KAA1B,EAAiCp3E,MAAjC,CAAjB;AAEA;AAED;AAED,KAnBD;;AAqBA,UAAMk4E,MAAM,GAAG,EAAf;AAEA,UAAM8I,QAAQ,GAAGtzB,SAAS,CAACtnF,IAAV,IAAkB,SAAnC;AACA,UAAM4xG,GAAG,GAAGtqB,SAAS,CAACsqB,GAAV,IAAiB,EAA7B;AACA,UAAM4B,SAAS,GAAGlsB,SAAS,CAACksB,SAA5B,CAlC6C,CAoC7C;;AACA,QAAIwF,QAAQ,GAAG1xB,SAAS,CAACj+F,MAAV,IAAoB,CAAE,CAArC;AAEA,UAAMwxH,eAAe,GAAGvzB,SAAS,CAACwzB,SAAV,IAAuB,EAA/C;;AAEA,SAAM,IAAI/xH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG8xH,eAAe,CAACxxH,MAArC,EAA6CN,CAAC,EAA9C,EAAoD;AAEnD,YAAM0xH,aAAa,GAAGI,eAAe,CAAE9xH,CAAF,CAAf,CAAqBmB,IAA3C,CAFmD,CAInD;;AACA,UAAK,CAAEuwH,aAAF,IAAmBA,aAAa,CAACpxH,MAAd,KAAyB,CAAjD,EAAqD,SALF,CAOnD;;AACA,UAAKoxH,aAAa,CAAE,CAAF,CAAb,CAAmBrsE,YAAxB,EAAuC;AAEtC;AACA,cAAM2sE,gBAAgB,GAAG,EAAzB;AAEA,YAAI/qH,CAAJ;;AAEA,aAAMA,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAGyqH,aAAa,CAACpxH,MAA/B,EAAuC2G,CAAC,EAAxC,EAA8C;AAE7C,cAAKyqH,aAAa,CAAEzqH,CAAF,CAAb,CAAmBo+C,YAAxB,EAAuC;AAEtC,iBAAM,IAAIt3B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2jG,aAAa,CAAEzqH,CAAF,CAAb,CAAmBo+C,YAAnB,CAAgC/kD,MAArD,EAA6DytB,CAAC,EAA9D,EAAoE;AAEnEikG,cAAAA,gBAAgB,CAAEN,aAAa,CAAEzqH,CAAF,CAAb,CAAmBo+C,YAAnB,CAAiCt3B,CAAjC,CAAF,CAAhB,GAA2D,CAAE,CAA7D;AAEA;AAED;AAED,SAnBqC,CAqBtC;AACA;AACA;;;AACA,aAAM,MAAMkkG,eAAZ,IAA+BD,gBAA/B,EAAkD;AAEjD,gBAAM/J,KAAK,GAAG,EAAd;AACA,gBAAMp3E,MAAM,GAAG,EAAf;;AAEA,eAAM,IAAI9iB,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAK2jG,aAAa,CAAEzqH,CAAF,CAAb,CAAmBo+C,YAAnB,CAAgC/kD,MAAvD,EAA+D,EAAGytB,CAAlE,EAAsE;AAErE,kBAAMmkG,YAAY,GAAGR,aAAa,CAAEzqH,CAAF,CAAlC;AAEAghH,YAAAA,KAAK,CAACn9G,IAAN,CAAYonH,YAAY,CAACvxD,IAAzB;AACA9vB,YAAAA,MAAM,CAAC/lC,IAAP,CAAeonH,YAAY,CAAC/nE,WAAb,KAA6B8nE,eAA/B,GAAmD,CAAnD,GAAuD,CAApE;AAEA;;AAEDlJ,UAAAA,MAAM,CAACj+G,IAAP,CAAa,IAAI6kH,mBAAJ,CAAyB,2BAA2BsC,eAA3B,GAA6C,GAAtE,EAA2EhK,KAA3E,EAAkFp3E,MAAlF,CAAb;AAEA;;AAEDo/E,QAAAA,QAAQ,GAAG+B,gBAAgB,CAAC1xH,MAAjB,IAA4BuoH,GAAG,IAAI,GAAnC,CAAX;AAEA,OA5CD,MA4CO;AAEN;AAEA,cAAMsJ,QAAQ,GAAG,YAAY7rC,KAAK,CAAEtmF,CAAF,CAAL,CAAWiX,IAAvB,GAA8B,GAA/C;AAEAu6G,QAAAA,gBAAgB,CACfzB,mBADe,EACMoC,QAAQ,GAAG,WADjB,EAEfT,aAFe,EAEA,KAFA,EAEO3I,MAFP,CAAhB;AAIAyI,QAAAA,gBAAgB,CACf3B,uBADe,EACUsC,QAAQ,GAAG,aADrB,EAEfT,aAFe,EAEA,KAFA,EAEO3I,MAFP,CAAhB;AAIAyI,QAAAA,gBAAgB,CACfzB,mBADe,EACMoC,QAAQ,GAAG,QADjB,EAEfT,aAFe,EAEA,KAFA,EAEO3I,MAFP,CAAhB;AAIA;AAED;;AAED,QAAKA,MAAM,CAACzoH,MAAP,KAAkB,CAAvB,EAA2B;AAE1B,aAAO,IAAP;AAEA;;AAED,UAAMwoH,IAAI,GAAG,IAAIkH,aAAJ,CAAmB6B,QAAnB,EAA6B5B,QAA7B,EAAuClH,MAAvC,EAA+C0B,SAA/C,CAAb;AAEA,WAAO3B,IAAP;AAEA;AAzR4B,CAA9B;AA6RAznH,MAAM,CAACme,MAAP,CAAewwG,aAAa,CAACvvH,SAA7B,EAAwC;AAEvC2oH,EAAAA,aAAa,EAAE,YAAY;AAE1B,UAAML,MAAM,GAAG,KAAKA,MAApB;AACA,QAAIkH,QAAQ,GAAG,CAAf;;AAEA,SAAM,IAAItuH,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGi7F,MAAM,CAACzoH,MAA5B,EAAoCqB,CAAC,KAAKmsB,CAA1C,EAA6C,EAAGnsB,CAAhD,EAAoD;AAEnD,YAAMqnH,KAAK,GAAG,KAAKD,MAAL,CAAapnH,CAAb,CAAd;AAEAsuH,MAAAA,QAAQ,GAAGtwH,IAAI,CAAC+E,GAAL,CAAUurH,QAAV,EAAoBjH,KAAK,CAACf,KAAN,CAAae,KAAK,CAACf,KAAN,CAAY3nH,MAAZ,GAAqB,CAAlC,CAApB,CAAX;AAEA;;AAED,SAAK2vH,QAAL,GAAgBA,QAAhB;AAEA,WAAO,IAAP;AAEA,GAnBsC;AAqBvCpyC,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAM,IAAIl8E,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKonH,MAAL,CAAYzoH,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C,WAAKonH,MAAL,CAAapnH,CAAb,EAAiBk8E,IAAjB,CAAuB,CAAvB,EAA0B,KAAKoyC,QAA/B;AAEA;;AAED,WAAO,IAAP;AAEA,GA/BsC;AAiCvCtB,EAAAA,QAAQ,EAAE,YAAY;AAErB,QAAIC,KAAK,GAAG,IAAZ;;AAEA,SAAM,IAAIjtH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKonH,MAAL,CAAYzoH,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/CitH,MAAAA,KAAK,GAAGA,KAAK,IAAI,KAAK7F,MAAL,CAAapnH,CAAb,EAAiBgtH,QAAjB,EAAjB;AAEA;;AAED,WAAOC,KAAP;AAEA,GA7CsC;AA+CvCG,EAAAA,QAAQ,EAAE,YAAY;AAErB,SAAM,IAAIptH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKonH,MAAL,CAAYzoH,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C,WAAKonH,MAAL,CAAapnH,CAAb,EAAiBotH,QAAjB;AAEA;;AAED,WAAO,IAAP;AAEA,GAzDsC;AA2DvCj+F,EAAAA,KAAK,EAAE,YAAY;AAElB,UAAMi4F,MAAM,GAAG,EAAf;;AAEA,SAAM,IAAIpnH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKonH,MAAL,CAAYzoH,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/ConH,MAAAA,MAAM,CAACj+G,IAAP,CAAa,KAAKi+G,MAAL,CAAapnH,CAAb,EAAiBmvB,KAAjB,EAAb;AAEA;;AAED,WAAO,IAAIk/F,aAAJ,CAAmB,KAAK/4G,IAAxB,EAA8B,KAAKg5G,QAAnC,EAA6ClH,MAA7C,EAAqD,KAAK0B,SAA1D,CAAP;AAEA;AAvEsC,CAAxC;AA2EA;;;;AAIA,MAAM2H,KAAK,GAAG;AAEbh9D,EAAAA,OAAO,EAAE,KAFI;AAIbi9D,EAAAA,KAAK,EAAE,EAJM;AAMb/4G,EAAAA,GAAG,EAAE,UAAWhY,GAAX,EAAgBgxH,IAAhB,EAAuB;AAE3B,QAAK,KAAKl9D,OAAL,KAAiB,KAAtB,EAA8B,OAFH,CAI3B;;AAEA,SAAKi9D,KAAL,CAAY/wH,GAAZ,IAAoBgxH,IAApB;AAEA,GAdY;AAgBb/yG,EAAAA,GAAG,EAAE,UAAWje,GAAX,EAAiB;AAErB,QAAK,KAAK8zD,OAAL,KAAiB,KAAtB,EAA8B,OAFT,CAIrB;;AAEA,WAAO,KAAKi9D,KAAL,CAAY/wH,GAAZ,CAAP;AAEA,GAxBY;AA0Bb+Z,EAAAA,MAAM,EAAE,UAAW/Z,GAAX,EAAiB;AAExB,WAAO,KAAK+wH,KAAL,CAAY/wH,GAAZ,CAAP;AAEA,GA9BY;AAgCb05D,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAKq3D,KAAL,GAAa,EAAb;AAEA;AApCY,CAAd;AAwCA;;;;;;AAIA,SAASE,cAAT,CAAyBC,MAAzB,EAAiCC,UAAjC,EAA6CC,OAA7C,EAAuD;AAEtD,QAAM5wH,KAAK,GAAG,IAAd;AAEA,MAAI6wH,SAAS,GAAG,KAAhB;AACA,MAAIC,WAAW,GAAG,CAAlB;AACA,MAAIC,UAAU,GAAG,CAAjB;AACA,MAAIC,WAAW,GAAGpwH,SAAlB;AACA,QAAMqwH,QAAQ,GAAG,EAAjB,CARsD,CAUtD;AACA;;AAEA,OAAKC,OAAL,GAAetwH,SAAf;AACA,OAAK8vH,MAAL,GAAcA,MAAd;AACA,OAAKC,UAAL,GAAkBA,UAAlB;AACA,OAAKC,OAAL,GAAeA,OAAf;;AAEA,OAAKO,SAAL,GAAiB,UAAWrgH,GAAX,EAAiB;AAEjCigH,IAAAA,UAAU;;AAEV,QAAKF,SAAS,KAAK,KAAnB,EAA2B;AAE1B,UAAK7wH,KAAK,CAACkxH,OAAN,KAAkBtwH,SAAvB,EAAmC;AAElCZ,QAAAA,KAAK,CAACkxH,OAAN,CAAepgH,GAAf,EAAoBggH,WAApB,EAAiCC,UAAjC;AAEA;AAED;;AAEDF,IAAAA,SAAS,GAAG,IAAZ;AAEA,GAhBD;;AAkBA,OAAKO,OAAL,GAAe,UAAWtgH,GAAX,EAAiB;AAE/BggH,IAAAA,WAAW;;AAEX,QAAK9wH,KAAK,CAAC2wH,UAAN,KAAqB/vH,SAA1B,EAAsC;AAErCZ,MAAAA,KAAK,CAAC2wH,UAAN,CAAkB7/G,GAAlB,EAAuBggH,WAAvB,EAAoCC,UAApC;AAEA;;AAED,QAAKD,WAAW,KAAKC,UAArB,EAAkC;AAEjCF,MAAAA,SAAS,GAAG,KAAZ;;AAEA,UAAK7wH,KAAK,CAAC0wH,MAAN,KAAiB9vH,SAAtB,EAAkC;AAEjCZ,QAAAA,KAAK,CAAC0wH,MAAN;AAEA;AAED;AAED,GAtBD;;AAwBA,OAAKW,SAAL,GAAiB,UAAWvgH,GAAX,EAAiB;AAEjC,QAAK9Q,KAAK,CAAC4wH,OAAN,KAAkBhwH,SAAvB,EAAmC;AAElCZ,MAAAA,KAAK,CAAC4wH,OAAN,CAAe9/G,GAAf;AAEA;AAED,GARD;;AAUA,OAAKwgH,UAAL,GAAkB,UAAWxgH,GAAX,EAAiB;AAElC,QAAKkgH,WAAL,EAAmB;AAElB,aAAOA,WAAW,CAAElgH,GAAF,CAAlB;AAEA;;AAED,WAAOA,GAAP;AAEA,GAVD;;AAYA,OAAKygH,cAAL,GAAsB,UAAWj2B,SAAX,EAAuB;AAE5C01B,IAAAA,WAAW,GAAG11B,SAAd;AAEA,WAAO,IAAP;AAEA,GAND;;AAQA,OAAKk2B,UAAL,GAAkB,UAAWC,KAAX,EAAkBC,MAAlB,EAA2B;AAE5CT,IAAAA,QAAQ,CAACjoH,IAAT,CAAeyoH,KAAf,EAAsBC,MAAtB;AAEA,WAAO,IAAP;AAEA,GAND;;AAQA,OAAKC,aAAL,GAAqB,UAAWF,KAAX,EAAmB;AAEvC,UAAMroH,KAAK,GAAG6nH,QAAQ,CAACloH,OAAT,CAAkB0oH,KAAlB,CAAd;;AAEA,QAAKroH,KAAK,KAAK,CAAE,CAAjB,EAAqB;AAEpB6nH,MAAAA,QAAQ,CAAC5nH,MAAT,CAAiBD,KAAjB,EAAwB,CAAxB;AAEA;;AAED,WAAO,IAAP;AAEA,GAZD;;AAcA,OAAKwoH,UAAL,GAAkB,UAAWpB,IAAX,EAAkB;AAEnC,SAAM,IAAI3wH,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGgxH,QAAQ,CAACzyH,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,IAAI,CAAlD,EAAsD;AAErD,YAAM4xH,KAAK,GAAGR,QAAQ,CAAEpxH,CAAF,CAAtB;AACA,YAAM6xH,MAAM,GAAGT,QAAQ,CAAEpxH,CAAC,GAAG,CAAN,CAAvB;AAEA,UAAK4xH,KAAK,CAACI,MAAX,EAAoBJ,KAAK,CAACj3C,SAAN,GAAkB,CAAlB,CALiC,CAKZ;;AAEzC,UAAKi3C,KAAK,CAACpwH,IAAN,CAAYmvH,IAAZ,CAAL,EAA0B;AAEzB,eAAOkB,MAAP;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GAnBD;AAqBA;;AAED,MAAMI,qBAAqB,GAAG,IAAIrB,cAAJ,EAA9B;AAEA;;;;;;AAIA,SAASsB,MAAT,CAAiBC,OAAjB,EAA2B;AAE1B,OAAKA,OAAL,GAAiBA,OAAO,KAAKpxH,SAAd,GAA4BoxH,OAA5B,GAAsCF,qBAArD;AAEA,OAAKG,WAAL,GAAmB,WAAnB;AACA,OAAK33C,IAAL,GAAY,EAAZ;AACA,OAAK43C,YAAL,GAAoB,EAApB;AACA,OAAKC,aAAL,GAAqB,EAArB;AAEA;;AAED5yH,MAAM,CAACme,MAAP,CAAeq0G,MAAM,CAACpzH,SAAtB,EAAiC;AAEhCyV,EAAAA,IAAI,EAAE;AAAW;AAAyC,GAAE,CAF5B;AAIhCg+G,EAAAA,SAAS,EAAE,UAAWthH,GAAX,EAAgB6/G,UAAhB,EAA6B;AAEvC,UAAM3wH,KAAK,GAAG,IAAd;AAEA,WAAO,IAAIqyH,OAAJ,CAAa,UAAWC,OAAX,EAAoBC,MAApB,EAA6B;AAEhDvyH,MAAAA,KAAK,CAACoU,IAAN,CAAYtD,GAAZ,EAAiBwhH,OAAjB,EAA0B3B,UAA1B,EAAsC4B,MAAtC;AAEA,KAJM,CAAP;AAMA,GAd+B;AAgBhCz8G,EAAAA,KAAK,EAAE;AAAW;AAAa,GAAE,CAhBD;AAkBhC08G,EAAAA,cAAc,EAAE,UAAWP,WAAX,EAAyB;AAExC,SAAKA,WAAL,GAAmBA,WAAnB;AACA,WAAO,IAAP;AAEA,GAvB+B;AAyBhCQ,EAAAA,OAAO,EAAE,UAAWn4C,IAAX,EAAkB;AAE1B,SAAKA,IAAL,GAAYA,IAAZ;AACA,WAAO,IAAP;AAEA,GA9B+B;AAgChCo4C,EAAAA,eAAe,EAAE,UAAWR,YAAX,EAA0B;AAE1C,SAAKA,YAAL,GAAoBA,YAApB;AACA,WAAO,IAAP;AAEA,GArC+B;AAuChCS,EAAAA,gBAAgB,EAAE,UAAWR,aAAX,EAA2B;AAE5C,SAAKA,aAAL,GAAqBA,aAArB;AACA,WAAO,IAAP;AAEA;AA5C+B,CAAjC;AAgDA;;;;AAIA,MAAMS,OAAO,GAAG,EAAhB;;AAEA,SAASC,UAAT,CAAqBb,OAArB,EAA+B;AAE9BD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDa,UAAU,CAACl0H,SAAX,GAAuBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAExEoC,EAAAA,WAAW,EAAE8xH,UAF2D;AAIxEz+G,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,QAAK9/G,GAAG,KAAKlQ,SAAb,EAAyBkQ,GAAG,GAAG,EAAN;AAEzB,QAAK,KAAKwpE,IAAL,KAAc15E,SAAnB,EAA+BkQ,GAAG,GAAG,KAAKwpE,IAAL,GAAYxpE,GAAlB;AAE/BA,IAAAA,GAAG,GAAG,KAAKkhH,OAAL,CAAaV,UAAb,CAAyBxgH,GAAzB,CAAN;AAEA,UAAM9Q,KAAK,GAAG,IAAd;AAEA,UAAM8yH,MAAM,GAAGxC,KAAK,CAAC7yG,GAAN,CAAW3M,GAAX,CAAf;;AAEA,QAAKgiH,MAAM,KAAKlyH,SAAhB,EAA4B;AAE3BZ,MAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEApQ,MAAAA,UAAU,CAAE,YAAY;AAEvB,YAAKgwH,MAAL,EAAcA,MAAM,CAAEoC,MAAF,CAAN;AAEd9yH,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OANS,EAMP,CANO,CAAV;AAQA,aAAOgiH,MAAP;AAEA,KA1BkD,CA4BnD;;;AAEA,QAAKF,OAAO,CAAE9hH,GAAF,CAAP,KAAmBlQ,SAAxB,EAAoC;AAEnCgyH,MAAAA,OAAO,CAAE9hH,GAAF,CAAP,CAAe9H,IAAf,CAAqB;AAEpB0nH,QAAAA,MAAM,EAAEA,MAFY;AAGpBC,QAAAA,UAAU,EAAEA,UAHQ;AAIpBC,QAAAA,OAAO,EAAEA;AAJW,OAArB;AAQA;AAEA,KA1CkD,CA4CnD;;;AACA,UAAMmC,YAAY,GAAG,6BAArB;AACA,UAAMC,kBAAkB,GAAGliH,GAAG,CAACxP,KAAJ,CAAWyxH,YAAX,CAA3B;AACA,QAAIE,OAAJ,CA/CmD,CAiDnD;;AACA,QAAKD,kBAAL,EAA0B;AAEzB,YAAME,QAAQ,GAAGF,kBAAkB,CAAE,CAAF,CAAnC;AACA,YAAMG,QAAQ,GAAG,CAAC,CAAEH,kBAAkB,CAAE,CAAF,CAAtC;AAEA,UAAIhkF,IAAI,GAAGgkF,kBAAkB,CAAE,CAAF,CAA7B;AACAhkF,MAAAA,IAAI,GAAGokF,kBAAkB,CAAEpkF,IAAF,CAAzB;AAEA,UAAKmkF,QAAL,EAAgBnkF,IAAI,GAAGqkF,IAAI,CAAErkF,IAAF,CAAX;;AAEhB,UAAI;AAEH,YAAIskF,QAAJ;AACA,cAAMC,YAAY,GAAG,CAAE,KAAKA,YAAL,IAAqB,EAAvB,EAA4BjF,WAA5B,EAArB;;AAEA,gBAASiF,YAAT;AAEC,eAAK,aAAL;AACA,eAAK,MAAL;AAEC,kBAAM38D,IAAI,GAAG,IAAInR,UAAJ,CAAgBzW,IAAI,CAACxwC,MAArB,CAAb;;AAEA,iBAAM,IAAIqB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmvC,IAAI,CAACxwC,MAA1B,EAAkCqB,CAAC,EAAnC,EAAyC;AAExC+2D,cAAAA,IAAI,CAAE/2D,CAAF,CAAJ,GAAYmvC,IAAI,CAACwkF,UAAL,CAAiB3zH,CAAjB,CAAZ;AAEA;;AAED,gBAAK0zH,YAAY,KAAK,MAAtB,EAA+B;AAE9BD,cAAAA,QAAQ,GAAG,IAAIG,IAAJ,CAAU,CAAE78D,IAAI,CAAC+I,MAAP,CAAV,EAA2B;AAAE31D,gBAAAA,IAAI,EAAEkpH;AAAR,eAA3B,CAAX;AAEA,aAJD,MAIO;AAENI,cAAAA,QAAQ,GAAG18D,IAAI,CAAC+I,MAAhB;AAEA;;AAED;;AAED,eAAK,UAAL;AAEC,kBAAM+zD,MAAM,GAAG,IAAIC,SAAJ,EAAf;AACAL,YAAAA,QAAQ,GAAGI,MAAM,CAACE,eAAP,CAAwB5kF,IAAxB,EAA8BkkF,QAA9B,CAAX;AAEA;;AAED,eAAK,MAAL;AAECI,YAAAA,QAAQ,GAAGz9G,IAAI,CAACC,KAAL,CAAYk5B,IAAZ,CAAX;AAEA;;AAED;AAAS;AAERskF,YAAAA,QAAQ,GAAGtkF,IAAX;AAEA;AA1CF,SALG,CAmDH;;;AACAtuC,QAAAA,UAAU,CAAE,YAAY;AAEvB,cAAKgwH,MAAL,EAAcA,MAAM,CAAE4C,QAAF,CAAN;AAEdtzH,UAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,SANS,EAMP,CANO,CAAV;AAQA,OA5DD,CA4DE,OAAQihB,KAAR,EAAgB;AAEjB;AACArxB,QAAAA,UAAU,CAAE,YAAY;AAEvB,cAAKkwH,OAAL,EAAeA,OAAO,CAAE7+F,KAAF,CAAP;AAEf/xB,UAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,UAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,SAPS,EAOP,CAPO,CAAV;AASA;AAED,KApFD,MAoFO;AAEN;AAEA8hH,MAAAA,OAAO,CAAE9hH,GAAF,CAAP,GAAiB,EAAjB;AAEA8hH,MAAAA,OAAO,CAAE9hH,GAAF,CAAP,CAAe9H,IAAf,CAAqB;AAEpB0nH,QAAAA,MAAM,EAAEA,MAFY;AAGpBC,QAAAA,UAAU,EAAEA,UAHQ;AAIpBC,QAAAA,OAAO,EAAEA;AAJW,OAArB;AAQAqC,MAAAA,OAAO,GAAG,IAAIY,cAAJ,EAAV;AAEAZ,MAAAA,OAAO,CAACa,IAAR,CAAc,KAAd,EAAqBhjH,GAArB,EAA0B,IAA1B;AAEAmiH,MAAAA,OAAO,CAACxqH,gBAAR,CAA0B,MAA1B,EAAkC,UAAWH,KAAX,EAAmB;AAEpD,cAAMgrH,QAAQ,GAAG,KAAKA,QAAtB;AAEA,cAAMS,SAAS,GAAGnB,OAAO,CAAE9hH,GAAF,CAAzB;AAEA,eAAO8hH,OAAO,CAAE9hH,GAAF,CAAd;;AAEA,YAAK,KAAK8qE,MAAL,KAAgB,GAAhB,IAAuB,KAAKA,MAAL,KAAgB,CAA5C,EAAgD;AAE/C;AACA;AAEA,cAAK,KAAKA,MAAL,KAAgB,CAArB,EAAyBttD,OAAO,CAACC,IAAR,CAAc,2CAAd,EALsB,CAO/C;AACA;;AACA+hG,UAAAA,KAAK,CAAC94G,GAAN,CAAW1G,GAAX,EAAgBwiH,QAAhB;;AAEA,eAAM,IAAIzzH,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyiF,SAAS,CAACv1H,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD,kBAAM+R,QAAQ,GAAGmiH,SAAS,CAAEl0H,CAAF,CAA1B;AACA,gBAAK+R,QAAQ,CAAC8+G,MAAd,EAAuB9+G,QAAQ,CAAC8+G,MAAT,CAAiB4C,QAAjB;AAEvB;;AAEDtzH,UAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,SApBD,MAoBO;AAEN,eAAM,IAAIjR,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyiF,SAAS,CAACv1H,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD,kBAAM+R,QAAQ,GAAGmiH,SAAS,CAAEl0H,CAAF,CAA1B;AACA,gBAAK+R,QAAQ,CAACg/G,OAAd,EAAwBh/G,QAAQ,CAACg/G,OAAT,CAAkBtoH,KAAlB;AAExB;;AAEDtI,UAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,UAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA;AAED,OA1CD,EA0CG,KA1CH;AA4CAmiH,MAAAA,OAAO,CAACxqH,gBAAR,CAA0B,UAA1B,EAAsC,UAAWH,KAAX,EAAmB;AAExD,cAAMyrH,SAAS,GAAGnB,OAAO,CAAE9hH,GAAF,CAAzB;;AAEA,aAAM,IAAIjR,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyiF,SAAS,CAACv1H,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD,gBAAM+R,QAAQ,GAAGmiH,SAAS,CAAEl0H,CAAF,CAA1B;AACA,cAAK+R,QAAQ,CAAC++G,UAAd,EAA2B/+G,QAAQ,CAAC++G,UAAT,CAAqBroH,KAArB;AAE3B;AAED,OAXD,EAWG,KAXH;AAaA2qH,MAAAA,OAAO,CAACxqH,gBAAR,CAA0B,OAA1B,EAAmC,UAAWH,KAAX,EAAmB;AAErD,cAAMyrH,SAAS,GAAGnB,OAAO,CAAE9hH,GAAF,CAAzB;AAEA,eAAO8hH,OAAO,CAAE9hH,GAAF,CAAd;;AAEA,aAAM,IAAIjR,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyiF,SAAS,CAACv1H,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD,gBAAM+R,QAAQ,GAAGmiH,SAAS,CAAEl0H,CAAF,CAA1B;AACA,cAAK+R,QAAQ,CAACg/G,OAAd,EAAwBh/G,QAAQ,CAACg/G,OAAT,CAAkBtoH,KAAlB;AAExB;;AAEDtI,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OAhBD,EAgBG,KAhBH;AAkBAmiH,MAAAA,OAAO,CAACxqH,gBAAR,CAA0B,OAA1B,EAAmC,UAAWH,KAAX,EAAmB;AAErD,cAAMyrH,SAAS,GAAGnB,OAAO,CAAE9hH,GAAF,CAAzB;AAEA,eAAO8hH,OAAO,CAAE9hH,GAAF,CAAd;;AAEA,aAAM,IAAIjR,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGyiF,SAAS,CAACv1H,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD,gBAAM+R,QAAQ,GAAGmiH,SAAS,CAAEl0H,CAAF,CAA1B;AACA,cAAK+R,QAAQ,CAACg/G,OAAd,EAAwBh/G,QAAQ,CAACg/G,OAAT,CAAkBtoH,KAAlB;AAExB;;AAEDtI,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OAhBD,EAgBG,KAhBH;AAkBA,UAAK,KAAKyiH,YAAL,KAAsB3yH,SAA3B,EAAuCqyH,OAAO,CAACM,YAAR,GAAuB,KAAKA,YAA5B;AACvC,UAAK,KAAKS,eAAL,KAAyBpzH,SAA9B,EAA0CqyH,OAAO,CAACe,eAAR,GAA0B,KAAKA,eAA/B;AAE1C,UAAKf,OAAO,CAACgB,gBAAb,EAAgChB,OAAO,CAACgB,gBAAR,CAA0B,KAAKf,QAAL,KAAkBtyH,SAAlB,GAA8B,KAAKsyH,QAAnC,GAA8C,YAAxE;;AAEhC,WAAM,MAAMgB,MAAZ,IAAsB,KAAK/B,aAA3B,EAA2C;AAE1Cc,QAAAA,OAAO,CAACN,gBAAR,CAA0BuB,MAA1B,EAAkC,KAAK/B,aAAL,CAAoB+B,MAApB,CAAlC;AAEA;;AAEDjB,MAAAA,OAAO,CAACkB,IAAR,CAAc,IAAd;AAEA;;AAEDn0H,IAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEA,WAAOmiH,OAAP;AAEA,GA5QuE;AA8QxEmB,EAAAA,eAAe,EAAE,UAAWnxH,KAAX,EAAmB;AAEnC,SAAKswH,YAAL,GAAoBtwH,KAApB;AACA,WAAO,IAAP;AAEA,GAnRuE;AAqRxEoxH,EAAAA,kBAAkB,EAAE,UAAWpxH,KAAX,EAAmB;AAEtC,SAAK+wH,eAAL,GAAuB/wH,KAAvB;AACA,WAAO,IAAP;AAEA,GA1RuE;AA4RxEqxH,EAAAA,WAAW,EAAE,UAAWrxH,KAAX,EAAmB;AAE/B,SAAKiwH,QAAL,GAAgBjwH,KAAhB;AACA,WAAO,IAAP;AAEA;AAjSuE,CAAlD,CAAvB;AAqSA;;;;AAIA,SAASsxH,eAAT,CAA0BvC,OAA1B,EAAoC;AAEnCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDuC,eAAe,CAAC51H,SAAhB,GAA4BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE7EoC,EAAAA,WAAW,EAAEwzH,eAFgE;AAI7EngH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAM0xH,MAAM,GAAG,IAAImB,UAAJ,CAAgB7yH,KAAK,CAACgyH,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAACe,OAAP,CAAgBzyH,KAAK,CAACs6E,IAAtB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAWpC,IAAX,EAAkB;AAEnC,UAAI;AAEHgiH,QAAAA,MAAM,CAAE1wH,KAAK,CAAC8V,KAAN,CAAaD,IAAI,CAACC,KAAL,CAAYpH,IAAZ,CAAb,CAAF,CAAN;AAEA,OAJD,CAIE,OAAQtJ,CAAR,EAAY;AAEb,YAAKwrH,OAAL,EAAe;AAEdA,UAAAA,OAAO,CAAExrH,CAAF,CAAP;AAEA,SAJD,MAIO;AAENkpB,UAAAA,OAAO,CAACyD,KAAR,CAAe3sB,CAAf;AAEA;;AAEDpF,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AAEA;AAED,KAtBD,EAsBG6/G,UAtBH,EAsBeC,OAtBf;AAwBA,GAlC4E;AAoC7E96G,EAAAA,KAAK,EAAE,UAAWo2G,IAAX,EAAkB;AAExB,UAAMgD,UAAU,GAAG,EAAnB;;AAEA,SAAM,IAAIrvH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGqsH,IAAI,CAAC1tH,MAA1B,EAAkCqB,CAAC,EAAnC,EAAyC;AAExC,YAAMmnH,IAAI,GAAGkH,aAAa,CAACp4G,KAAd,CAAqBo2G,IAAI,CAAErsH,CAAF,CAAzB,CAAb;AAEAqvH,MAAAA,UAAU,CAAClmH,IAAX,CAAiBg+G,IAAjB;AAEA;;AAED,WAAOkI,UAAP;AAEA;AAlD4E,CAAlD,CAA5B;AAsDA;;;;;;;;AAQA,SAASsF,uBAAT,CAAkCxC,OAAlC,EAA4C;AAE3CD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDwC,uBAAuB,CAAC71H,SAAxB,GAAoCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAErFoC,EAAAA,WAAW,EAAEyzH,uBAFwE;AAIrFpgH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAMk5B,MAAM,GAAG,EAAf;AAEA,UAAMoC,OAAO,GAAG,IAAI+1E,iBAAJ,EAAhB;AACA/1E,IAAAA,OAAO,CAAC/E,KAAR,GAAgB2C,MAAhB;AAEA,UAAMw4F,MAAM,GAAG,IAAImB,UAAJ,CAAgB,KAAKb,OAArB,CAAf;AACAN,IAAAA,MAAM,CAACe,OAAP,CAAgB,KAAKn4C,IAArB;AACAo3C,IAAAA,MAAM,CAAC0C,eAAP,CAAwB,aAAxB;AAEA,QAAIK,MAAM,GAAG,CAAb;;AAEA,aAASC,WAAT,CAAsB70H,CAAtB,EAA0B;AAEzB6xH,MAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAG,CAAEjR,CAAF,CAAhB,EAAuB,UAAW8/D,MAAX,EAAoB;AAE1C,cAAMg1D,QAAQ,GAAG30H,KAAK,CAAC8V,KAAN,CAAa6pD,MAAb,EAAqB,IAArB,CAAjB;AAEAzmC,QAAAA,MAAM,CAAEr5B,CAAF,CAAN,GAAc;AACb2J,UAAAA,KAAK,EAAEmrH,QAAQ,CAACnrH,KADH;AAEbC,UAAAA,MAAM,EAAEkrH,QAAQ,CAAClrH,MAFJ;AAGbguB,UAAAA,MAAM,EAAEk9F,QAAQ,CAACl9F,MAHJ;AAIbI,UAAAA,OAAO,EAAE88F,QAAQ,CAAC98F;AAJL,SAAd;AAOA48F,QAAAA,MAAM,IAAI,CAAV;;AAEA,YAAKA,MAAM,KAAK,CAAhB,EAAoB;AAEnB,cAAKE,QAAQ,CAACC,WAAT,KAAyB,CAA9B,EACCt5F,OAAO,CAAC9D,SAAR,GAAoBxU,YAApB;AAEDsY,UAAAA,OAAO,CAAC7D,MAAR,GAAiBk9F,QAAQ,CAACl9F,MAA1B;AACA6D,UAAAA,OAAO,CAACsuB,WAAR,GAAsB,IAAtB;AAEA,cAAK8mE,MAAL,EAAcA,MAAM,CAAEp1F,OAAF,CAAN;AAEd;AAED,OAzBD,EAyBGq1F,UAzBH,EAyBeC,OAzBf;AA2BA;;AAED,QAAKlyH,KAAK,CAACoC,OAAN,CAAegQ,GAAf,CAAL,EAA4B;AAE3B,WAAM,IAAIjR,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGxgC,GAAG,CAACtS,MAA1B,EAAkCqB,CAAC,GAAGyxC,EAAtC,EAA0C,EAAGzxC,CAA7C,EAAiD;AAEhD60H,QAAAA,WAAW,CAAE70H,CAAF,CAAX;AAEA;AAED,KARD,MAQO;AAEN;AAEA6xH,MAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAW6uD,MAAX,EAAoB;AAErC,cAAMg1D,QAAQ,GAAG30H,KAAK,CAAC8V,KAAN,CAAa6pD,MAAb,EAAqB,IAArB,CAAjB;;AAEA,YAAKg1D,QAAQ,CAACE,SAAd,EAA0B;AAEzB,gBAAMrtE,KAAK,GAAGmtE,QAAQ,CAAC98F,OAAT,CAAiBr5B,MAAjB,GAA0Bm2H,QAAQ,CAACC,WAAjD;;AAEA,eAAM,IAAItyH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGklD,KAArB,EAA4BllD,CAAC,EAA7B,EAAmC;AAElC42B,YAAAA,MAAM,CAAE52B,CAAF,CAAN,GAAc;AAAEu1B,cAAAA,OAAO,EAAE;AAAX,aAAd;;AAEA,iBAAM,IAAIh4B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG80H,QAAQ,CAACC,WAA9B,EAA2C/0H,CAAC,EAA5C,EAAkD;AAEjDq5B,cAAAA,MAAM,CAAE52B,CAAF,CAAN,CAAYu1B,OAAZ,CAAoB7uB,IAApB,CAA0B2rH,QAAQ,CAAC98F,OAAT,CAAkBv1B,CAAC,GAAGqyH,QAAQ,CAACC,WAAb,GAA2B/0H,CAA7C,CAA1B;AACAq5B,cAAAA,MAAM,CAAE52B,CAAF,CAAN,CAAYm1B,MAAZ,GAAqBk9F,QAAQ,CAACl9F,MAA9B;AACAyB,cAAAA,MAAM,CAAE52B,CAAF,CAAN,CAAYkH,KAAZ,GAAoBmrH,QAAQ,CAACnrH,KAA7B;AACA0vB,cAAAA,MAAM,CAAE52B,CAAF,CAAN,CAAYmH,MAAZ,GAAqBkrH,QAAQ,CAAClrH,MAA9B;AAEA;AAED;AAED,SAnBD,MAmBO;AAEN6xB,UAAAA,OAAO,CAAC/E,KAAR,CAAc/sB,KAAd,GAAsBmrH,QAAQ,CAACnrH,KAA/B;AACA8xB,UAAAA,OAAO,CAAC/E,KAAR,CAAc9sB,MAAd,GAAuBkrH,QAAQ,CAAClrH,MAAhC;AACA6xB,UAAAA,OAAO,CAACzD,OAAR,GAAkB88F,QAAQ,CAAC98F,OAA3B;AAEA;;AAED,YAAK88F,QAAQ,CAACC,WAAT,KAAyB,CAA9B,EAAkC;AAEjCt5F,UAAAA,OAAO,CAAC9D,SAAR,GAAoBxU,YAApB;AAEA;;AAEDsY,QAAAA,OAAO,CAAC7D,MAAR,GAAiBk9F,QAAQ,CAACl9F,MAA1B;AACA6D,QAAAA,OAAO,CAACsuB,WAAR,GAAsB,IAAtB;AAEA,YAAK8mE,MAAL,EAAcA,MAAM,CAAEp1F,OAAF,CAAN;AAEd,OA1CD,EA0CGq1F,UA1CH,EA0CeC,OA1Cf;AA4CA;;AAED,WAAOt1F,OAAP;AAEA;AA9GoF,CAAlD,CAApC;AAkHA;;;;;;;;AAQA,SAASw5F,iBAAT,CAA4B9C,OAA5B,EAAsC;AAErCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAED8C,iBAAiB,CAACn2H,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE/EoC,EAAAA,WAAW,EAAE+zH,iBAFkE;AAI/E1gH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAMs7B,OAAO,GAAG,IAAIm+B,WAAJ,EAAhB;AAEA,UAAMi4D,MAAM,GAAG,IAAImB,UAAJ,CAAgB,KAAKb,OAArB,CAAf;AACAN,IAAAA,MAAM,CAAC0C,eAAP,CAAwB,aAAxB;AACA1C,IAAAA,MAAM,CAACe,OAAP,CAAgB,KAAKn4C,IAArB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAW6uD,MAAX,EAAoB;AAErC,YAAMo1D,OAAO,GAAG/0H,KAAK,CAAC8V,KAAN,CAAa6pD,MAAb,CAAhB;AAEA,UAAK,CAAEo1D,OAAP,EAAiB;;AAEjB,UAAKA,OAAO,CAACx+F,KAAR,KAAkB31B,SAAvB,EAAmC;AAElC06B,QAAAA,OAAO,CAAC/E,KAAR,GAAgBw+F,OAAO,CAACx+F,KAAxB;AAEA,OAJD,MAIO,IAAKw+F,OAAO,CAAC/lF,IAAR,KAAiBpuC,SAAtB,EAAkC;AAExC06B,QAAAA,OAAO,CAAC/E,KAAR,CAAc/sB,KAAd,GAAsBurH,OAAO,CAACvrH,KAA9B;AACA8xB,QAAAA,OAAO,CAAC/E,KAAR,CAAc9sB,MAAd,GAAuBsrH,OAAO,CAACtrH,MAA/B;AACA6xB,QAAAA,OAAO,CAAC/E,KAAR,CAAcyY,IAAd,GAAqB+lF,OAAO,CAAC/lF,IAA7B;AAEA;;AAED1T,MAAAA,OAAO,CAACjE,KAAR,GAAgB09F,OAAO,CAAC19F,KAAR,KAAkBz2B,SAAlB,GAA8Bm0H,OAAO,CAAC19F,KAAtC,GAA8C5U,mBAA9D;AACA6Y,MAAAA,OAAO,CAAChE,KAAR,GAAgBy9F,OAAO,CAACz9F,KAAR,KAAkB12B,SAAlB,GAA8Bm0H,OAAO,CAACz9F,KAAtC,GAA8C7U,mBAA9D;AAEA6Y,MAAAA,OAAO,CAAC/D,SAAR,GAAoBw9F,OAAO,CAACx9F,SAAR,KAAsB32B,SAAtB,GAAkCm0H,OAAO,CAACx9F,SAA1C,GAAsDvU,YAA1E;AACAsY,MAAAA,OAAO,CAAC9D,SAAR,GAAoBu9F,OAAO,CAACv9F,SAAR,KAAsB52B,SAAtB,GAAkCm0H,OAAO,CAACv9F,SAA1C,GAAsDxU,YAA1E;AAEAsY,MAAAA,OAAO,CAAC5D,UAAR,GAAqBq9F,OAAO,CAACr9F,UAAR,KAAuB92B,SAAvB,GAAmCm0H,OAAO,CAACr9F,UAA3C,GAAwD,CAA7E;;AAEA,UAAKq9F,OAAO,CAACt9F,MAAR,KAAmB72B,SAAxB,EAAoC;AAEnC06B,QAAAA,OAAO,CAAC7D,MAAR,GAAiBs9F,OAAO,CAACt9F,MAAzB;AAEA;;AAED,UAAKs9F,OAAO,CAAC/qH,IAAR,KAAiBpJ,SAAtB,EAAkC;AAEjC06B,QAAAA,OAAO,CAACtxB,IAAR,GAAe+qH,OAAO,CAAC/qH,IAAvB;AAEA;;AAED,UAAK+qH,OAAO,CAACl9F,OAAR,KAAoBj3B,SAAzB,EAAqC;AAEpC06B,QAAAA,OAAO,CAACzD,OAAR,GAAkBk9F,OAAO,CAACl9F,OAA1B;AACAyD,QAAAA,OAAO,CAAC9D,SAAR,GAAoBrU,wBAApB,CAHoC,CAGU;AAE9C;;AAED,UAAK4xG,OAAO,CAACH,WAAR,KAAwB,CAA7B,EAAiC;AAEhCt5F,QAAAA,OAAO,CAAC9D,SAAR,GAAoBxU,YAApB;AAEA;;AAEDsY,MAAAA,OAAO,CAACsuB,WAAR,GAAsB,IAAtB;AAEA,UAAK8mE,MAAL,EAAcA,MAAM,CAAEp1F,OAAF,EAAWy5F,OAAX,CAAN;AAEd,KAvDD,EAuDGpE,UAvDH,EAuDeC,OAvDf;AA0DA,WAAOt1F,OAAP;AAEA;AAzE8E,CAAlD,CAA9B;AA6EA;;;;AAIA,SAAS05F,WAAT,CAAsBhD,OAAtB,EAAgC;AAE/BD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDgD,WAAW,CAACr2H,SAAZ,GAAwBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAEzEoC,EAAAA,WAAW,EAAEi0H,WAF4D;AAIzE5gH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,QAAK,KAAKt2C,IAAL,KAAc15E,SAAnB,EAA+BkQ,GAAG,GAAG,KAAKwpE,IAAL,GAAYxpE,GAAlB;AAE/BA,IAAAA,GAAG,GAAG,KAAKkhH,OAAL,CAAaV,UAAb,CAAyBxgH,GAAzB,CAAN;AAEA,UAAM9Q,KAAK,GAAG,IAAd;AAEA,UAAM8yH,MAAM,GAAGxC,KAAK,CAAC7yG,GAAN,CAAW3M,GAAX,CAAf;;AAEA,QAAKgiH,MAAM,KAAKlyH,SAAhB,EAA4B;AAE3BZ,MAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEApQ,MAAAA,UAAU,CAAE,YAAY;AAEvB,YAAKgwH,MAAL,EAAcA,MAAM,CAAEoC,MAAF,CAAN;AAEd9yH,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OANS,EAMP,CANO,CAAV;AAQA,aAAOgiH,MAAP;AAEA;;AAED,UAAMv8F,KAAK,GAAG7xB,QAAQ,CAACiyB,eAAT,CAA0B,8BAA1B,EAA0D,KAA1D,CAAd;;AAEA,aAASs+F,WAAT,GAAuB;AAEtB1+F,MAAAA,KAAK,CAAC5tB,mBAAN,CAA2B,MAA3B,EAAmCssH,WAAnC,EAAgD,KAAhD;AACA1+F,MAAAA,KAAK,CAAC5tB,mBAAN,CAA2B,OAA3B,EAAoCusH,YAApC,EAAkD,KAAlD;AAEA5E,MAAAA,KAAK,CAAC94G,GAAN,CAAW1G,GAAX,EAAgB,IAAhB;AAEA,UAAK4/G,MAAL,EAAcA,MAAM,CAAE,IAAF,CAAN;AAEd1wH,MAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA;;AAED,aAASokH,YAAT,CAAuB5sH,KAAvB,EAA+B;AAE9BiuB,MAAAA,KAAK,CAAC5tB,mBAAN,CAA2B,MAA3B,EAAmCssH,WAAnC,EAAgD,KAAhD;AACA1+F,MAAAA,KAAK,CAAC5tB,mBAAN,CAA2B,OAA3B,EAAoCusH,YAApC,EAAkD,KAAlD;AAEA,UAAKtE,OAAL,EAAeA,OAAO,CAAEtoH,KAAF,CAAP;AAEftI,MAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,MAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA;;AAEDylB,IAAAA,KAAK,CAAC9tB,gBAAN,CAAwB,MAAxB,EAAgCwsH,WAAhC,EAA6C,KAA7C;AACA1+F,IAAAA,KAAK,CAAC9tB,gBAAN,CAAwB,OAAxB,EAAiCysH,YAAjC,EAA+C,KAA/C;;AAEA,QAAKpkH,GAAG,CAACqkH,MAAJ,CAAY,CAAZ,EAAe,CAAf,MAAuB,OAA5B,EAAsC;AAErC,UAAK,KAAKlD,WAAL,KAAqBrxH,SAA1B,EAAsC21B,KAAK,CAAC07F,WAAN,GAAoB,KAAKA,WAAzB;AAEtC;;AAEDjyH,IAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEAylB,IAAAA,KAAK,CAACC,GAAN,GAAY1lB,GAAZ;AAEA,WAAOylB,KAAP;AAEA;AAxEwE,CAAlD,CAAxB;AA4EA;;;;AAKA,SAAS6+F,iBAAT,CAA4BpD,OAA5B,EAAsC;AAErCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDoD,iBAAiB,CAACz2H,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE/EoC,EAAAA,WAAW,EAAEq0H,iBAFkE;AAI/EhhH,EAAAA,IAAI,EAAE,UAAWihH,IAAX,EAAiB3E,MAAjB,EAAyBC,UAAzB,EAAqCC,OAArC,EAA+C;AAEpD,UAAMt1F,OAAO,GAAG,IAAIy5C,WAAJ,EAAhB;AAEA,UAAM28C,MAAM,GAAG,IAAIsD,WAAJ,CAAiB,KAAKhD,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAACc,cAAP,CAAuB,KAAKP,WAA5B;AACAP,IAAAA,MAAM,CAACe,OAAP,CAAgB,KAAKn4C,IAArB;AAEA,QAAIm6C,MAAM,GAAG,CAAb;;AAEA,aAASC,WAAT,CAAsB70H,CAAtB,EAA0B;AAEzB6xH,MAAAA,MAAM,CAACt9G,IAAP,CAAaihH,IAAI,CAAEx1H,CAAF,CAAjB,EAAwB,UAAW02B,KAAX,EAAmB;AAE1C+E,QAAAA,OAAO,CAACpC,MAAR,CAAgBr5B,CAAhB,IAAsB02B,KAAtB;AAEAk+F,QAAAA,MAAM;;AAEN,YAAKA,MAAM,KAAK,CAAhB,EAAoB;AAEnBn5F,UAAAA,OAAO,CAACsuB,WAAR,GAAsB,IAAtB;AAEA,cAAK8mE,MAAL,EAAcA,MAAM,CAAEp1F,OAAF,CAAN;AAEd;AAED,OAdD,EAcG16B,SAdH,EAccgwH,OAdd;AAgBA;;AAED,SAAM,IAAI/wH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGw1H,IAAI,CAAC72H,MAA1B,EAAkC,EAAGqB,CAArC,EAAyC;AAExC60H,MAAAA,WAAW,CAAE70H,CAAF,CAAX;AAEA;;AAED,WAAOy7B,OAAP;AAEA;AA1C8E,CAAlD,CAA9B;AA8CA;;;;AAIA,SAASg6F,aAAT,CAAwBtD,OAAxB,EAAkC;AAEjCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDsD,aAAa,CAAC32H,SAAd,GAA0BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE3EoC,EAAAA,WAAW,EAAEu0H,aAF8D;AAI3ElhH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAMt1F,OAAO,GAAG,IAAInE,OAAJ,EAAhB;AAEA,UAAMu6F,MAAM,GAAG,IAAIsD,WAAJ,CAAiB,KAAKhD,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAACc,cAAP,CAAuB,KAAKP,WAA5B;AACAP,IAAAA,MAAM,CAACe,OAAP,CAAgB,KAAKn4C,IAArB;AAEAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAWylB,KAAX,EAAmB;AAEpC+E,MAAAA,OAAO,CAAC/E,KAAR,GAAgBA,KAAhB,CAFoC,CAIpC;;AACA,YAAMg/F,MAAM,GAAGzkH,GAAG,CAAC0kH,MAAJ,CAAY,gBAAZ,IAAiC,CAAjC,IAAsC1kH,GAAG,CAAC0kH,MAAJ,CAAY,oBAAZ,MAAuC,CAA5F;AAEAl6F,MAAAA,OAAO,CAAC7D,MAAR,GAAiB89F,MAAM,GAAGrxG,SAAH,GAAeC,UAAtC;AACAmX,MAAAA,OAAO,CAACsuB,WAAR,GAAsB,IAAtB;;AAEA,UAAK8mE,MAAM,KAAK9vH,SAAhB,EAA4B;AAE3B8vH,QAAAA,MAAM,CAAEp1F,OAAF,CAAN;AAEA;AAED,KAhBD,EAgBGq1F,UAhBH,EAgBeC,OAhBf;AAkBA,WAAOt1F,OAAP;AAEA;AAhC0E,CAAlD,CAA1B;AAoCA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA;;;;AAIA,SAASm6F,KAAT,GAAiB;AAEhB,OAAKzrH,IAAL,GAAY,OAAZ;AAEA,OAAK0rH,kBAAL,GAA0B,GAA1B;AAEA;;AAEDn2H,MAAM,CAACme,MAAP,CAAe+3G,KAAK,CAAC92H,SAArB,EAAgC;AAE/B;AACA;AAEAg3H,EAAAA,QAAQ,EAAE;AAAW;AAA0B;AAE9CrnG,IAAAA,OAAO,CAACC,IAAR,CAAc,2CAAd;AACA,WAAO,IAAP;AAEA,GAV8B;AAY/B;AACA;AAEA8mF,EAAAA,UAAU,EAAE,UAAWn7D,CAAX,EAAc07E,cAAd,EAA+B;AAE1C,UAAMnzH,CAAC,GAAG,KAAKozH,cAAL,CAAqB37E,CAArB,CAAV;AACA,WAAO,KAAKy7E,QAAL,CAAelzH,CAAf,EAAkBmzH,cAAlB,CAAP;AAEA,GApB8B;AAsB/B;AAEAE,EAAAA,SAAS,EAAE,UAAWC,SAAX,EAAuB;AAEjC,QAAKA,SAAS,KAAKn1H,SAAnB,EAA+Bm1H,SAAS,GAAG,CAAZ;AAE/B,UAAM3kF,MAAM,GAAG,EAAf;;AAEA,SAAM,IAAI1c,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIqhG,SAAtB,EAAiCrhG,CAAC,EAAlC,EAAwC;AAEvC0c,MAAAA,MAAM,CAACpoC,IAAP,CAAa,KAAK2sH,QAAL,CAAejhG,CAAC,GAAGqhG,SAAnB,CAAb;AAEA;;AAED,WAAO3kF,MAAP;AAEA,GAtC8B;AAwC/B;AAEA2rE,EAAAA,eAAe,EAAE,UAAWgZ,SAAX,EAAuB;AAEvC,QAAKA,SAAS,KAAKn1H,SAAnB,EAA+Bm1H,SAAS,GAAG,CAAZ;AAE/B,UAAM3kF,MAAM,GAAG,EAAf;;AAEA,SAAM,IAAI1c,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIqhG,SAAtB,EAAiCrhG,CAAC,EAAlC,EAAwC;AAEvC0c,MAAAA,MAAM,CAACpoC,IAAP,CAAa,KAAKqsG,UAAL,CAAiB3gF,CAAC,GAAGqhG,SAArB,CAAb;AAEA;;AAED,WAAO3kF,MAAP;AAEA,GAxD8B;AA0D/B;AAEA4kF,EAAAA,SAAS,EAAE,YAAY;AAEtB,UAAMC,OAAO,GAAG,KAAKC,UAAL,EAAhB;AACA,WAAOD,OAAO,CAAEA,OAAO,CAACz3H,MAAR,GAAiB,CAAnB,CAAd;AAEA,GAjE8B;AAmE/B;AAEA03H,EAAAA,UAAU,EAAE,UAAWH,SAAX,EAAuB;AAElC,QAAKA,SAAS,KAAKn1H,SAAnB,EAA+Bm1H,SAAS,GAAG,KAAKL,kBAAjB;;AAE/B,QAAK,KAAKS,eAAL,IACF,KAAKA,eAAL,CAAqB33H,MAArB,KAAgCu3H,SAAS,GAAG,CAD1C,IAEJ,CAAE,KAAKnsE,WAFR,EAEsB;AAErB,aAAO,KAAKusE,eAAZ;AAEA;;AAED,SAAKvsE,WAAL,GAAmB,KAAnB;AAEA,UAAM9a,KAAK,GAAG,EAAd;AACA,QAAIsnF,OAAJ;AAAA,QAAahf,IAAI,GAAG,KAAKue,QAAL,CAAe,CAAf,CAApB;AACA,QAAI5a,GAAG,GAAG,CAAV;AAEAjsE,IAAAA,KAAK,CAAC9lC,IAAN,CAAY,CAAZ;;AAEA,SAAM,IAAIzG,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIwzH,SAAtB,EAAiCxzH,CAAC,EAAlC,EAAwC;AAEvC6zH,MAAAA,OAAO,GAAG,KAAKT,QAAL,CAAepzH,CAAC,GAAGwzH,SAAnB,CAAV;AACAhb,MAAAA,GAAG,IAAIqb,OAAO,CAACxlG,UAAR,CAAoBwmF,IAApB,CAAP;AACAtoE,MAAAA,KAAK,CAAC9lC,IAAN,CAAY+xG,GAAZ;AACA3D,MAAAA,IAAI,GAAGgf,OAAP;AAEA;;AAED,SAAKD,eAAL,GAAuBrnF,KAAvB;AAEA,WAAOA,KAAP,CA/BkC,CA+BpB;AAEd,GAtG8B;AAwG/BunF,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,SAAKzsE,WAAL,GAAmB,IAAnB;AACA,SAAKssE,UAAL;AAEA,GA7G8B;AA+G/B;AAEAL,EAAAA,cAAc,EAAE,UAAW37E,CAAX,EAAcjO,QAAd,EAAyB;AAExC,UAAMqqF,UAAU,GAAG,KAAKJ,UAAL,EAAnB;AAEA,QAAIr2H,CAAC,GAAG,CAAR;AAAA,QAAWyxC,EAAE,GAAGglF,UAAU,CAAC93H,MAA3B;AAEA,QAAI+3H,eAAJ,CANwC,CAMnB;;AAErB,QAAKtqF,QAAL,EAAgB;AAEfsqF,MAAAA,eAAe,GAAGtqF,QAAlB;AAEA,KAJD,MAIO;AAENsqF,MAAAA,eAAe,GAAGr8E,CAAC,GAAGo8E,UAAU,CAAEhlF,EAAE,GAAG,CAAP,CAAhC;AAEA,KAhBuC,CAkBxC;;;AAEA,QAAI3kB,GAAG,GAAG,CAAV;AAAA,QAAaC,IAAI,GAAG0kB,EAAE,GAAG,CAAzB;AAAA,QAA4BklF,UAA5B;;AAEA,WAAQ7pG,GAAG,IAAIC,IAAf,EAAsB;AAErB/sB,MAAAA,CAAC,GAAGhC,IAAI,CAACwE,KAAL,CAAYsqB,GAAG,GAAG,CAAEC,IAAI,GAAGD,GAAT,IAAiB,CAAnC,CAAJ,CAFqB,CAEuB;;AAE5C6pG,MAAAA,UAAU,GAAGF,UAAU,CAAEz2H,CAAF,CAAV,GAAkB02H,eAA/B;;AAEA,UAAKC,UAAU,GAAG,CAAlB,EAAsB;AAErB7pG,QAAAA,GAAG,GAAG9sB,CAAC,GAAG,CAAV;AAEA,OAJD,MAIO,IAAK22H,UAAU,GAAG,CAAlB,EAAsB;AAE5B5pG,QAAAA,IAAI,GAAG/sB,CAAC,GAAG,CAAX;AAEA,OAJM,MAIA;AAEN+sB,QAAAA,IAAI,GAAG/sB,CAAP;AACA,cAHM,CAKN;AAEA;AAED;;AAEDA,IAAAA,CAAC,GAAG+sB,IAAJ;;AAEA,QAAK0pG,UAAU,CAAEz2H,CAAF,CAAV,KAAoB02H,eAAzB,EAA2C;AAE1C,aAAO12H,CAAC,IAAKyxC,EAAE,GAAG,CAAV,CAAR;AAEA,KArDuC,CAuDxC;;;AAEA,UAAMmlF,YAAY,GAAGH,UAAU,CAAEz2H,CAAF,CAA/B;AACA,UAAM62H,WAAW,GAAGJ,UAAU,CAAEz2H,CAAC,GAAG,CAAN,CAA9B;AAEA,UAAM82H,aAAa,GAAGD,WAAW,GAAGD,YAApC,CA5DwC,CA8DxC;;AAEA,UAAMG,eAAe,GAAG,CAAEL,eAAe,GAAGE,YAApB,IAAqCE,aAA7D,CAhEwC,CAkExC;;AAEA,UAAMl0H,CAAC,GAAG,CAAE5C,CAAC,GAAG+2H,eAAN,KAA4BtlF,EAAE,GAAG,CAAjC,CAAV;AAEA,WAAO7uC,CAAP;AAEA,GAzL8B;AA2L/B;AACA;AACA;AACA;AAEAo0H,EAAAA,UAAU,EAAE,UAAWp0H,CAAX,EAAcmzH,cAAd,EAA+B;AAE1C,UAAM/yH,KAAK,GAAG,MAAd;AACA,QAAIuzC,EAAE,GAAG3zC,CAAC,GAAGI,KAAb;AACA,QAAIi0H,EAAE,GAAGr0H,CAAC,GAAGI,KAAb,CAJ0C,CAM1C;;AAEA,QAAKuzC,EAAE,GAAG,CAAV,EAAcA,EAAE,GAAG,CAAL;AACd,QAAK0gF,EAAE,GAAG,CAAV,EAAcA,EAAE,GAAG,CAAL;AAEd,UAAMC,GAAG,GAAG,KAAKpB,QAAL,CAAev/E,EAAf,CAAZ;AACA,UAAM4gF,GAAG,GAAG,KAAKrB,QAAL,CAAemB,EAAf,CAAZ;AAEA,UAAMjtE,OAAO,GAAG+rE,cAAc,KAAQmB,GAAG,CAACtoG,SAAN,GAAoB,IAAID,OAAJ,EAApB,GAAoC,IAAI4R,OAAJ,EAA1C,CAA9B;AAEAypB,IAAAA,OAAO,CAAC56B,IAAR,CAAc+nG,GAAd,EAAoB3nG,GAApB,CAAyB0nG,GAAzB,EAA+BtmG,SAA/B;AAEA,WAAOo5B,OAAP;AAEA,GApN8B;AAsN/BotE,EAAAA,YAAY,EAAE,UAAW/8E,CAAX,EAAc07E,cAAd,EAA+B;AAE5C,UAAMnzH,CAAC,GAAG,KAAKozH,cAAL,CAAqB37E,CAArB,CAAV;AACA,WAAO,KAAK28E,UAAL,CAAiBp0H,CAAjB,EAAoBmzH,cAApB,CAAP;AAEA,GA3N8B;AA6N/B5gB,EAAAA,mBAAmB,EAAE,UAAW8N,QAAX,EAAqB1tG,MAArB,EAA8B;AAElD;AAEA,UAAMotB,MAAM,GAAG,IAAIpC,OAAJ,EAAf;AAEA,UAAMy0E,QAAQ,GAAG,EAAjB;AACA,UAAMnuD,OAAO,GAAG,EAAhB;AACA,UAAMouD,SAAS,GAAG,EAAlB;AAEA,UAAMyI,GAAG,GAAG,IAAIn9E,OAAJ,EAAZ;AACA,UAAM82F,GAAG,GAAG,IAAI3zF,OAAJ,EAAZ,CAXkD,CAalD;;AAEA,SAAM,IAAI1jC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIijH,QAAtB,EAAgCjjH,CAAC,EAAjC,EAAuC;AAEtC,YAAMq6C,CAAC,GAAGr6C,CAAC,GAAGijH,QAAd;AAEAjO,MAAAA,QAAQ,CAAEh1G,CAAF,CAAR,GAAgB,KAAKo3H,YAAL,CAAmB/8E,CAAnB,EAAsB,IAAI9Z,OAAJ,EAAtB,CAAhB;AACAy0E,MAAAA,QAAQ,CAAEh1G,CAAF,CAAR,CAAc4wB,SAAd;AAEA,KAtBiD,CAwBlD;AACA;;;AAEAi2B,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,IAAItmB,OAAJ,EAAf;AACA00E,IAAAA,SAAS,CAAE,CAAF,CAAT,GAAiB,IAAI10E,OAAJ,EAAjB;AACA,QAAIz9B,GAAG,GAAGya,MAAM,CAAC+5G,SAAjB;AACA,UAAM1hG,EAAE,GAAG53B,IAAI,CAACwO,GAAL,CAAUwoG,QAAQ,CAAE,CAAF,CAAR,CAAc3tG,CAAxB,CAAX;AACA,UAAMwuB,EAAE,GAAG73B,IAAI,CAACwO,GAAL,CAAUwoG,QAAQ,CAAE,CAAF,CAAR,CAAcztG,CAAxB,CAAX;AACA,UAAMgwH,EAAE,GAAGv5H,IAAI,CAACwO,GAAL,CAAUwoG,QAAQ,CAAE,CAAF,CAAR,CAAct7E,CAAxB,CAAX;;AAEA,QAAK9D,EAAE,IAAI9yB,GAAX,EAAiB;AAEhBA,MAAAA,GAAG,GAAG8yB,EAAN;AACA+M,MAAAA,MAAM,CAACnU,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;AAEA;;AAED,QAAKqH,EAAE,IAAI/yB,GAAX,EAAiB;AAEhBA,MAAAA,GAAG,GAAG+yB,EAAN;AACA8M,MAAAA,MAAM,CAACnU,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;AAEA;;AAED,QAAK+oG,EAAE,IAAIz0H,GAAX,EAAiB;AAEhB6/B,MAAAA,MAAM,CAACnU,GAAP,CAAY,CAAZ,EAAe,CAAf,EAAkB,CAAlB;AAEA;;AAEDkvF,IAAAA,GAAG,CAAC37E,YAAJ,CAAkBizE,QAAQ,CAAE,CAAF,CAA1B,EAAiCryE,MAAjC,EAA0C/R,SAA1C;AAEAi2B,IAAAA,OAAO,CAAE,CAAF,CAAP,CAAa9kB,YAAb,CAA2BizE,QAAQ,CAAE,CAAF,CAAnC,EAA0C0I,GAA1C;AACAzI,IAAAA,SAAS,CAAE,CAAF,CAAT,CAAelzE,YAAf,CAA6BizE,QAAQ,CAAE,CAAF,CAArC,EAA4CnuD,OAAO,CAAE,CAAF,CAAnD,EAzDkD,CA4DlD;;AAEA,SAAM,IAAI7mD,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIijH,QAAtB,EAAgCjjH,CAAC,EAAjC,EAAuC;AAEtC6mD,MAAAA,OAAO,CAAE7mD,CAAF,CAAP,GAAe6mD,OAAO,CAAE7mD,CAAC,GAAG,CAAN,CAAP,CAAiBmvB,KAAjB,EAAf;AAEA8lF,MAAAA,SAAS,CAAEj1G,CAAF,CAAT,GAAiBi1G,SAAS,CAAEj1G,CAAC,GAAG,CAAN,CAAT,CAAmBmvB,KAAnB,EAAjB;AAEAuuF,MAAAA,GAAG,CAAC37E,YAAJ,CAAkBizE,QAAQ,CAAEh1G,CAAC,GAAG,CAAN,CAA1B,EAAqCg1G,QAAQ,CAAEh1G,CAAF,CAA7C;;AAEA,UAAK09G,GAAG,CAAC/+G,MAAJ,KAAe4e,MAAM,CAACC,OAA3B,EAAqC;AAEpCkgG,QAAAA,GAAG,CAAC9sF,SAAJ;AAEA,cAAMyF,KAAK,GAAGr4B,IAAI,CAACg8B,IAAL,CAAW3O,SAAS,CAACY,KAAV,CAAiB+oF,QAAQ,CAAEh1G,CAAC,GAAG,CAAN,CAAR,CAAkBuwB,GAAlB,CAAuBykF,QAAQ,CAAEh1G,CAAF,CAA/B,CAAjB,EAAyD,CAAE,CAA3D,EAA8D,CAA9D,CAAX,CAAd,CAJoC,CAI0D;;AAE9F6mD,QAAAA,OAAO,CAAE7mD,CAAF,CAAP,CAAa85B,YAAb,CAA2Bu9F,GAAG,CAACnwF,gBAAJ,CAAsBw2E,GAAtB,EAA2BrnF,KAA3B,CAA3B;AAEA;;AAED4+E,MAAAA,SAAS,CAAEj1G,CAAF,CAAT,CAAe+hC,YAAf,CAA6BizE,QAAQ,CAAEh1G,CAAF,CAArC,EAA4C6mD,OAAO,CAAE7mD,CAAF,CAAnD;AAEA,KAlFiD,CAoFlD;;;AAEA,QAAKuV,MAAM,KAAK,IAAhB,EAAuB;AAEtB,UAAI8gB,KAAK,GAAGr4B,IAAI,CAACg8B,IAAL,CAAW3O,SAAS,CAACY,KAAV,CAAiB46B,OAAO,CAAE,CAAF,CAAP,CAAat2B,GAAb,CAAkBs2B,OAAO,CAAEo8D,QAAF,CAAzB,CAAjB,EAA0D,CAAE,CAA5D,EAA+D,CAA/D,CAAX,CAAZ;AACA5sF,MAAAA,KAAK,IAAI4sF,QAAT;;AAEA,UAAKjO,QAAQ,CAAE,CAAF,CAAR,CAAczkF,GAAd,CAAmBmtF,GAAG,CAAC37E,YAAJ,CAAkB8kB,OAAO,CAAE,CAAF,CAAzB,EAAgCA,OAAO,CAAEo8D,QAAF,CAAvC,CAAnB,IAA6E,CAAlF,EAAsF;AAErF5sF,QAAAA,KAAK,GAAG,CAAEA,KAAV;AAEA;;AAED,WAAM,IAAIr2B,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIijH,QAAtB,EAAgCjjH,CAAC,EAAjC,EAAuC;AAEtC;AACA6mD,QAAAA,OAAO,CAAE7mD,CAAF,CAAP,CAAa85B,YAAb,CAA2Bu9F,GAAG,CAACnwF,gBAAJ,CAAsB8tE,QAAQ,CAAEh1G,CAAF,CAA9B,EAAqCq2B,KAAK,GAAGr2B,CAA7C,CAA3B;AACAi1G,QAAAA,SAAS,CAAEj1G,CAAF,CAAT,CAAe+hC,YAAf,CAA6BizE,QAAQ,CAAEh1G,CAAF,CAArC,EAA4C6mD,OAAO,CAAE7mD,CAAF,CAAnD;AAEA;AAED;;AAED,WAAO;AACNg1G,MAAAA,QAAQ,EAAEA,QADJ;AAENnuD,MAAAA,OAAO,EAAEA,OAFH;AAGNouD,MAAAA,SAAS,EAAEA;AAHL,KAAP;AAMA,GA9U8B;AAgV/B9lF,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GApV8B;AAsV/BA,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAK63G,kBAAL,GAA0B73G,MAAM,CAAC63G,kBAAjC;AAEA,WAAO,IAAP;AAEA,GA5V8B;AA8V/B/8F,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAG;AACZjW,MAAAA,QAAQ,EAAE;AACTT,QAAAA,OAAO,EAAE,GADA;AAETtuB,QAAAA,IAAI,EAAE,OAFG;AAGTgvB,QAAAA,SAAS,EAAE;AAHF;AADE,KAAb;AAQAgW,IAAAA,IAAI,CAAC0mF,kBAAL,GAA0B,KAAKA,kBAA/B;AACA1mF,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AAEA,WAAOglC,IAAP;AAEA,GA7W8B;AA+W/BqoF,EAAAA,QAAQ,EAAE,UAAWnL,IAAX,EAAkB;AAE3B,SAAKwJ,kBAAL,GAA0BxJ,IAAI,CAACwJ,kBAA/B;AAEA,WAAO,IAAP;AAEA;AArX8B,CAAhC;;AAyXA,SAAS4B,YAAT,CAAuBC,EAAvB,EAA2BC,EAA3B,EAA+BC,OAA/B,EAAwCC,OAAxC,EAAiDC,WAAjD,EAA8DC,SAA9D,EAAyEC,UAAzE,EAAqFC,SAArF,EAAiG;AAEhGrC,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,cAAZ;AAEA,OAAKutH,EAAL,GAAUA,EAAE,IAAI,CAAhB;AACA,OAAKC,EAAL,GAAUA,EAAE,IAAI,CAAhB;AAEA,OAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;AACA,OAAKC,OAAL,GAAeA,OAAO,IAAI,CAA1B;AAEA,OAAKC,WAAL,GAAmBA,WAAW,IAAI,CAAlC;AACA,OAAKC,SAAL,GAAiBA,SAAS,IAAI,IAAI/5H,IAAI,CAACutB,EAAvC;AAEA,OAAKysG,UAAL,GAAkBA,UAAU,IAAI,KAAhC;AAEA,OAAKC,SAAL,GAAiBA,SAAS,IAAI,CAA9B;AAEA;;AAEDR,YAAY,CAAC34H,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAzB;AACA24H,YAAY,CAAC34H,SAAb,CAAuBoC,WAAvB,GAAqCu2H,YAArC;AAEAA,YAAY,CAAC34H,SAAb,CAAuBo5H,cAAvB,GAAwC,IAAxC;;AAEAT,YAAY,CAAC34H,SAAb,CAAuBg3H,QAAvB,GAAkC,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAEhE,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIpnG,OAAJ,EAAhC;AAEA,QAAMwpG,KAAK,GAAGn6H,IAAI,CAACutB,EAAL,GAAU,CAAxB;AACA,MAAI6sG,UAAU,GAAG,KAAKL,SAAL,GAAiB,KAAKD,WAAvC;AACA,QAAMO,UAAU,GAAGr6H,IAAI,CAACwO,GAAL,CAAU4rH,UAAV,IAAyB76G,MAAM,CAACC,OAAnD,CANgE,CAQhE;;AACA,SAAQ46G,UAAU,GAAG,CAArB,EAAyBA,UAAU,IAAID,KAAd;;AACzB,SAAQC,UAAU,GAAGD,KAArB,EAA6BC,UAAU,IAAID,KAAd;;AAE7B,MAAKC,UAAU,GAAG76G,MAAM,CAACC,OAAzB,EAAmC;AAElC,QAAK66G,UAAL,EAAkB;AAEjBD,MAAAA,UAAU,GAAG,CAAb;AAEA,KAJD,MAIO;AAENA,MAAAA,UAAU,GAAGD,KAAb;AAEA;AAED;;AAED,MAAK,KAAKH,UAAL,KAAoB,IAApB,IAA4B,CAAEK,UAAnC,EAAgD;AAE/C,QAAKD,UAAU,KAAKD,KAApB,EAA4B;AAE3BC,MAAAA,UAAU,GAAG,CAAED,KAAf;AAEA,KAJD,MAIO;AAENC,MAAAA,UAAU,GAAGA,UAAU,GAAGD,KAA1B;AAEA;AAED;;AAED,QAAMtnG,KAAK,GAAG,KAAKinG,WAAL,GAAmBl1H,CAAC,GAAGw1H,UAArC;AACA,MAAI/wH,CAAC,GAAG,KAAKqwH,EAAL,GAAU,KAAKE,OAAL,GAAe55H,IAAI,CAAC8vB,GAAL,CAAU+C,KAAV,CAAjC;AACA,MAAItpB,CAAC,GAAG,KAAKowH,EAAL,GAAU,KAAKE,OAAL,GAAe75H,IAAI,CAAC+vB,GAAL,CAAU8C,KAAV,CAAjC;;AAEA,MAAK,KAAKonG,SAAL,KAAmB,CAAxB,EAA4B;AAE3B,UAAMnqG,GAAG,GAAG9vB,IAAI,CAAC8vB,GAAL,CAAU,KAAKmqG,SAAf,CAAZ;AACA,UAAMlqG,GAAG,GAAG/vB,IAAI,CAAC+vB,GAAL,CAAU,KAAKkqG,SAAf,CAAZ;AAEA,UAAMriG,EAAE,GAAGvuB,CAAC,GAAG,KAAKqwH,EAApB;AACA,UAAM7hG,EAAE,GAAGtuB,CAAC,GAAG,KAAKowH,EAApB,CAN2B,CAQ3B;;AACAtwH,IAAAA,CAAC,GAAGuuB,EAAE,GAAG9H,GAAL,GAAW+H,EAAE,GAAG9H,GAAhB,GAAsB,KAAK2pG,EAA/B;AACAnwH,IAAAA,CAAC,GAAGquB,EAAE,GAAG7H,GAAL,GAAW8H,EAAE,GAAG/H,GAAhB,GAAsB,KAAK6pG,EAA/B;AAEA;;AAED,SAAOxlF,KAAK,CAAC3jB,GAAN,CAAWnnB,CAAX,EAAcE,CAAd,CAAP;AAEA,CA5DD;;AA8DAkwH,YAAY,CAAC34H,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAK05G,EAAL,GAAU15G,MAAM,CAAC05G,EAAjB;AACA,OAAKC,EAAL,GAAU35G,MAAM,CAAC25G,EAAjB;AAEA,OAAKC,OAAL,GAAe55G,MAAM,CAAC45G,OAAtB;AACA,OAAKC,OAAL,GAAe75G,MAAM,CAAC65G,OAAtB;AAEA,OAAKC,WAAL,GAAmB95G,MAAM,CAAC85G,WAA1B;AACA,OAAKC,SAAL,GAAiB/5G,MAAM,CAAC+5G,SAAxB;AAEA,OAAKC,UAAL,GAAkBh6G,MAAM,CAACg6G,UAAzB;AAEA,OAAKC,SAAL,GAAiBj6G,MAAM,CAACi6G,SAAxB;AAEA,SAAO,IAAP;AAEA,CAnBD;;AAsBAR,YAAY,CAAC34H,SAAb,CAAuBg6B,MAAvB,GAAgC,YAAY;AAE3C,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACuoF,EAAL,GAAU,KAAKA,EAAf;AACAvoF,EAAAA,IAAI,CAACwoF,EAAL,GAAU,KAAKA,EAAf;AAEAxoF,EAAAA,IAAI,CAACyoF,OAAL,GAAe,KAAKA,OAApB;AACAzoF,EAAAA,IAAI,CAAC0oF,OAAL,GAAe,KAAKA,OAApB;AAEA1oF,EAAAA,IAAI,CAAC2oF,WAAL,GAAmB,KAAKA,WAAxB;AACA3oF,EAAAA,IAAI,CAAC4oF,SAAL,GAAiB,KAAKA,SAAtB;AAEA5oF,EAAAA,IAAI,CAAC6oF,UAAL,GAAkB,KAAKA,UAAvB;AAEA7oF,EAAAA,IAAI,CAAC8oF,SAAL,GAAiB,KAAKA,SAAtB;AAEA,SAAO9oF,IAAP;AAEA,CAnBD;;AAqBAsoF,YAAY,CAAC34H,SAAb,CAAuB04H,QAAvB,GAAkC,UAAWnL,IAAX,EAAkB;AAEnDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAKqL,EAAL,GAAUrL,IAAI,CAACqL,EAAf;AACA,OAAKC,EAAL,GAAUtL,IAAI,CAACsL,EAAf;AAEA,OAAKC,OAAL,GAAevL,IAAI,CAACuL,OAApB;AACA,OAAKC,OAAL,GAAexL,IAAI,CAACwL,OAApB;AAEA,OAAKC,WAAL,GAAmBzL,IAAI,CAACyL,WAAxB;AACA,OAAKC,SAAL,GAAiB1L,IAAI,CAAC0L,SAAtB;AAEA,OAAKC,UAAL,GAAkB3L,IAAI,CAAC2L,UAAvB;AAEA,OAAKC,SAAL,GAAiB5L,IAAI,CAAC4L,SAAtB;AAEA,SAAO,IAAP;AAEA,CAnBD;;AAqBA,SAASK,QAAT,CAAmBZ,EAAnB,EAAuBC,EAAvB,EAA2BY,OAA3B,EAAoCT,WAApC,EAAiDC,SAAjD,EAA4DC,UAA5D,EAAyE;AAExEP,EAAAA,YAAY,CAACp4H,IAAb,CAAmB,IAAnB,EAAyBq4H,EAAzB,EAA6BC,EAA7B,EAAiCY,OAAjC,EAA0CA,OAA1C,EAAmDT,WAAnD,EAAgEC,SAAhE,EAA2EC,UAA3E;AAEA,OAAK7tH,IAAL,GAAY,UAAZ;AAEA;;AAEDmuH,QAAQ,CAACx5H,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAe8+F,YAAY,CAAC34H,SAA5B,CAArB;AACAw5H,QAAQ,CAACx5H,SAAT,CAAmBoC,WAAnB,GAAiCo3H,QAAjC;AAEAA,QAAQ,CAACx5H,SAAT,CAAmB05H,UAAnB,GAAgC,IAAhC;AAEA;;;;;;;;;;;AAYA;;;;;;;;;;AAUA,SAASC,SAAT,GAAqB;AAEpB,MAAIC,EAAE,GAAG,CAAT;AAAA,MAAYr6F,EAAE,GAAG,CAAjB;AAAA,MAAoBrQ,EAAE,GAAG,CAAzB;AAAA,MAA4BsQ,EAAE,GAAG,CAAjC;AAEA;;;;;;;;;AAQA,WAASz2B,IAAT,CAAeo1B,EAAf,EAAmBI,EAAnB,EAAuBiZ,EAAvB,EAA2BC,EAA3B,EAAgC;AAE/BmiF,IAAAA,EAAE,GAAGz7F,EAAL;AACAoB,IAAAA,EAAE,GAAGiY,EAAL;AACAtoB,IAAAA,EAAE,GAAG,CAAE,CAAF,GAAMiP,EAAN,GAAW,IAAII,EAAf,GAAoB,IAAIiZ,EAAxB,GAA6BC,EAAlC;AACAjY,IAAAA,EAAE,GAAG,IAAIrB,EAAJ,GAAS,IAAII,EAAb,GAAkBiZ,EAAlB,GAAuBC,EAA5B;AAEA;;AAED,SAAO;AAENoiF,IAAAA,cAAc,EAAE,UAAW17F,EAAX,EAAeI,EAAf,EAAmBgK,EAAnB,EAAuBuxF,EAAvB,EAA2BC,OAA3B,EAAqC;AAEpDhxH,MAAAA,IAAI,CAAEw1B,EAAF,EAAMgK,EAAN,EAAUwxF,OAAO,IAAKxxF,EAAE,GAAGpK,EAAV,CAAjB,EAAiC47F,OAAO,IAAKD,EAAE,GAAGv7F,EAAV,CAAxC,CAAJ;AAEA,KANK;AAQNy7F,IAAAA,wBAAwB,EAAE,UAAW77F,EAAX,EAAeI,EAAf,EAAmBgK,EAAnB,EAAuBuxF,EAAvB,EAA2BG,GAA3B,EAAgCC,GAAhC,EAAqCC,GAArC,EAA2C;AAEpE;AACA,UAAI1iF,EAAE,GAAG,CAAElZ,EAAE,GAAGJ,EAAP,IAAc87F,GAAd,GAAoB,CAAE1xF,EAAE,GAAGpK,EAAP,KAAgB87F,GAAG,GAAGC,GAAtB,CAApB,GAAkD,CAAE3xF,EAAE,GAAGhK,EAAP,IAAc27F,GAAzE;AACA,UAAI/B,EAAE,GAAG,CAAE5vF,EAAE,GAAGhK,EAAP,IAAc27F,GAAd,GAAoB,CAAEJ,EAAE,GAAGv7F,EAAP,KAAgB27F,GAAG,GAAGC,GAAtB,CAApB,GAAkD,CAAEL,EAAE,GAAGvxF,EAAP,IAAc4xF,GAAzE,CAJoE,CAMpE;;AACA1iF,MAAAA,EAAE,IAAIyiF,GAAN;AACA/B,MAAAA,EAAE,IAAI+B,GAAN;AAEAnxH,MAAAA,IAAI,CAAEw1B,EAAF,EAAMgK,EAAN,EAAUkP,EAAV,EAAc0gF,EAAd,CAAJ;AAEA,KApBK;AAsBNiC,IAAAA,IAAI,EAAE,UAAWt2H,CAAX,EAAe;AAEpB,YAAMq0H,EAAE,GAAGr0H,CAAC,GAAGA,CAAf;AACA,YAAMu2H,EAAE,GAAGlC,EAAE,GAAGr0H,CAAhB;AACA,aAAO81H,EAAE,GAAGr6F,EAAE,GAAGz7B,CAAV,GAAcorB,EAAE,GAAGipG,EAAnB,GAAwB34F,EAAE,GAAG66F,EAApC;AAEA;AA5BK,GAAP;AAgCA,EAED;;;AAEA,MAAM5jG,GAAG,GAAG,IAAIgL,OAAJ,EAAZ;AACA,MAAM65E,EAAE,GAAG,IAAIqe,SAAJ,EAAX;AAAA,MAA4Bpe,EAAE,GAAG,IAAIoe,SAAJ,EAAjC;AAAA,MAAkDW,EAAE,GAAG,IAAIX,SAAJ,EAAvD;;AAEA,SAASY,gBAAT,CAA2B9nF,MAA3B,EAAmCh8B,MAAnC,EAA2C+jH,SAA3C,EAAsDT,OAAtD,EAAgE;AAE/DjD,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,kBAAZ;AAEA,OAAKonC,MAAL,GAAcA,MAAM,IAAI,EAAxB;AACA,OAAKh8B,MAAL,GAAcA,MAAM,IAAI,KAAxB;AACA,OAAK+jH,SAAL,GAAiBA,SAAS,IAAI,aAA9B;AACA,OAAKT,OAAL,GAAeA,OAAO,IAAI,GAA1B;AAEA;;AAEDQ,gBAAgB,CAACv6H,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAA7B;AACAu6H,gBAAgB,CAACv6H,SAAjB,CAA2BoC,WAA3B,GAAyCm4H,gBAAzC;AAEAA,gBAAgB,CAACv6H,SAAjB,CAA2By6H,kBAA3B,GAAgD,IAAhD;;AAEAF,gBAAgB,CAACv6H,SAAjB,CAA2Bg3H,QAA3B,GAAsC,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAEpE,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIx1F,OAAJ,EAAhC;AAEA,QAAMgR,MAAM,GAAG,KAAKA,MAApB;AACA,QAAMnxC,CAAC,GAAGmxC,MAAM,CAAC5yC,MAAjB;AAEA,QAAM+D,CAAC,GAAG,CAAEtC,CAAC,IAAK,KAAKmV,MAAL,GAAc,CAAd,GAAkB,CAAvB,CAAH,IAAkC3S,CAA5C;AACA,MAAI42H,QAAQ,GAAGx7H,IAAI,CAACwE,KAAL,CAAYE,CAAZ,CAAf;AACA,MAAIyrG,MAAM,GAAGzrG,CAAC,GAAG82H,QAAjB;;AAEA,MAAK,KAAKjkH,MAAV,EAAmB;AAElBikH,IAAAA,QAAQ,IAAIA,QAAQ,GAAG,CAAX,GAAe,CAAf,GAAmB,CAAEx7H,IAAI,CAACwE,KAAL,CAAYxE,IAAI,CAACwO,GAAL,CAAUgtH,QAAV,IAAuBp5H,CAAnC,IAAyC,CAA3C,IAAiDA,CAAhF;AAEA,GAJD,MAIO,IAAK+tG,MAAM,KAAK,CAAX,IAAgBqrB,QAAQ,KAAKp5H,CAAC,GAAG,CAAtC,EAA0C;AAEhDo5H,IAAAA,QAAQ,GAAGp5H,CAAC,GAAG,CAAf;AACA+tG,IAAAA,MAAM,GAAG,CAAT;AAEA;;AAED,MAAIr6D,EAAJ,EAAQC,EAAR,EAAYC,EAAZ,EAAgBuG,EAAhB,CAtBoE,CAsBhD;;AAEpB,MAAK,KAAKhlC,MAAL,IAAeikH,QAAQ,GAAG,CAA/B,EAAmC;AAElC1lF,IAAAA,EAAE,GAAGvC,MAAM,CAAE,CAAEioF,QAAQ,GAAG,CAAb,IAAmBp5H,CAArB,CAAX;AAEA,GAJD,MAIO;AAEN;AACAm1B,IAAAA,GAAG,CAAC9F,UAAJ,CAAgB8hB,MAAM,CAAE,CAAF,CAAtB,EAA6BA,MAAM,CAAE,CAAF,CAAnC,EAA2C55B,GAA3C,CAAgD45B,MAAM,CAAE,CAAF,CAAtD;AACAuC,IAAAA,EAAE,GAAGve,GAAL;AAEA;;AAEDwe,EAAAA,EAAE,GAAGxC,MAAM,CAAEioF,QAAQ,GAAGp5H,CAAb,CAAX;AACA4zC,EAAAA,EAAE,GAAGzC,MAAM,CAAE,CAAEioF,QAAQ,GAAG,CAAb,IAAmBp5H,CAArB,CAAX;;AAEA,MAAK,KAAKmV,MAAL,IAAeikH,QAAQ,GAAG,CAAX,GAAep5H,CAAnC,EAAuC;AAEtCm6C,IAAAA,EAAE,GAAGhJ,MAAM,CAAE,CAAEioF,QAAQ,GAAG,CAAb,IAAmBp5H,CAArB,CAAX;AAEA,GAJD,MAIO;AAEN;AACAm1B,IAAAA,GAAG,CAAC9F,UAAJ,CAAgB8hB,MAAM,CAAEnxC,CAAC,GAAG,CAAN,CAAtB,EAAiCmxC,MAAM,CAAEnxC,CAAC,GAAG,CAAN,CAAvC,EAAmDuX,GAAnD,CAAwD45B,MAAM,CAAEnxC,CAAC,GAAG,CAAN,CAA9D;AACAm6C,IAAAA,EAAE,GAAGhlB,GAAL;AAEA;;AAED,MAAK,KAAK+jG,SAAL,KAAmB,aAAnB,IAAoC,KAAKA,SAAL,KAAmB,SAA5D,EAAwE;AAEvE;AACA,UAAMhtH,GAAG,GAAG,KAAKgtH,SAAL,KAAmB,SAAnB,GAA+B,GAA/B,GAAqC,IAAjD;AACA,QAAIP,GAAG,GAAG/6H,IAAI,CAACsO,GAAL,CAAUwnC,EAAE,CAAC9iB,iBAAH,CAAsB+iB,EAAtB,CAAV,EAAsCznC,GAAtC,CAAV;AACA,QAAI0sH,GAAG,GAAGh7H,IAAI,CAACsO,GAAL,CAAUynC,EAAE,CAAC/iB,iBAAH,CAAsBgjB,EAAtB,CAAV,EAAsC1nC,GAAtC,CAAV;AACA,QAAI2sH,GAAG,GAAGj7H,IAAI,CAACsO,GAAL,CAAU0nC,EAAE,CAAChjB,iBAAH,CAAsBupB,EAAtB,CAAV,EAAsCjuC,GAAtC,CAAV,CANuE,CAQvE;;AACA,QAAK0sH,GAAG,GAAG,IAAX,EAAkBA,GAAG,GAAG,GAAN;AAClB,QAAKD,GAAG,GAAG,IAAX,EAAkBA,GAAG,GAAGC,GAAN;AAClB,QAAKC,GAAG,GAAG,IAAX,EAAkBA,GAAG,GAAGD,GAAN;AAElB5e,IAAAA,EAAE,CAAC0e,wBAAH,CAA6BhlF,EAAE,CAACzsC,CAAhC,EAAmC0sC,EAAE,CAAC1sC,CAAtC,EAAyC2sC,EAAE,CAAC3sC,CAA5C,EAA+CkzC,EAAE,CAAClzC,CAAlD,EAAqD0xH,GAArD,EAA0DC,GAA1D,EAA+DC,GAA/D;AACA5e,IAAAA,EAAE,CAACye,wBAAH,CAA6BhlF,EAAE,CAACvsC,CAAhC,EAAmCwsC,EAAE,CAACxsC,CAAtC,EAAyCysC,EAAE,CAACzsC,CAA5C,EAA+CgzC,EAAE,CAAChzC,CAAlD,EAAqDwxH,GAArD,EAA0DC,GAA1D,EAA+DC,GAA/D;AACAG,IAAAA,EAAE,CAACN,wBAAH,CAA6BhlF,EAAE,CAACpa,CAAhC,EAAmCqa,EAAE,CAACra,CAAtC,EAAyCsa,EAAE,CAACta,CAA5C,EAA+C6gB,EAAE,CAAC7gB,CAAlD,EAAqDq/F,GAArD,EAA0DC,GAA1D,EAA+DC,GAA/D;AAEA,GAjBD,MAiBO,IAAK,KAAKK,SAAL,KAAmB,YAAxB,EAAuC;AAE7Clf,IAAAA,EAAE,CAACue,cAAH,CAAmB7kF,EAAE,CAACzsC,CAAtB,EAAyB0sC,EAAE,CAAC1sC,CAA5B,EAA+B2sC,EAAE,CAAC3sC,CAAlC,EAAqCkzC,EAAE,CAAClzC,CAAxC,EAA2C,KAAKwxH,OAAhD;AACAxe,IAAAA,EAAE,CAACse,cAAH,CAAmB7kF,EAAE,CAACvsC,CAAtB,EAAyBwsC,EAAE,CAACxsC,CAA5B,EAA+BysC,EAAE,CAACzsC,CAAlC,EAAqCgzC,EAAE,CAAChzC,CAAxC,EAA2C,KAAKsxH,OAAhD;AACAO,IAAAA,EAAE,CAACT,cAAH,CAAmB7kF,EAAE,CAACpa,CAAtB,EAAyBqa,EAAE,CAACra,CAA5B,EAA+Bsa,EAAE,CAACta,CAAlC,EAAqC6gB,EAAE,CAAC7gB,CAAxC,EAA2C,KAAKm/F,OAAhD;AAEA;;AAED1mF,EAAAA,KAAK,CAAC3jB,GAAN,CACC4rF,EAAE,CAAC8e,IAAH,CAAS/qB,MAAT,CADD,EAECkM,EAAE,CAAC6e,IAAH,CAAS/qB,MAAT,CAFD,EAGCirB,EAAE,CAACF,IAAH,CAAS/qB,MAAT,CAHD;AAMA,SAAOh8D,KAAP;AAEA,CApFD;;AAsFAknF,gBAAgB,CAACv6H,SAAjB,CAA2BswB,IAA3B,GAAkC,UAAWpR,MAAX,EAAoB;AAErD43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAKuzB,MAAL,GAAc,EAAd;;AAEA,OAAM,IAAIvxC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4d,MAAM,CAACuzB,MAAP,CAAc5yC,MAAnC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD,UAAMmyC,KAAK,GAAGn0B,MAAM,CAACuzB,MAAP,CAAevxC,CAAf,CAAd;AAEA,SAAKuxC,MAAL,CAAYpoC,IAAZ,CAAkBgpC,KAAK,CAAChjB,KAAN,EAAlB;AAEA;;AAED,OAAK5Z,MAAL,GAAcyI,MAAM,CAACzI,MAArB;AACA,OAAK+jH,SAAL,GAAiBt7G,MAAM,CAACs7G,SAAxB;AACA,OAAKT,OAAL,GAAe76G,MAAM,CAAC66G,OAAtB;AAEA,SAAO,IAAP;AAEA,CApBD;;AAsBAQ,gBAAgB,CAACv6H,SAAjB,CAA2Bg6B,MAA3B,GAAoC,YAAY;AAE/C,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACoC,MAAL,GAAc,EAAd;;AAEA,OAAM,IAAIvxC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKmxC,MAAL,CAAY5yC,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD,UAAMmyC,KAAK,GAAG,KAAKZ,MAAL,CAAavxC,CAAb,CAAd;AACAmvC,IAAAA,IAAI,CAACoC,MAAL,CAAYpoC,IAAZ,CAAkBgpC,KAAK,CAACrxC,OAAN,EAAlB;AAEA;;AAEDquC,EAAAA,IAAI,CAAC55B,MAAL,GAAc,KAAKA,MAAnB;AACA45B,EAAAA,IAAI,CAACmqF,SAAL,GAAiB,KAAKA,SAAtB;AACAnqF,EAAAA,IAAI,CAAC0pF,OAAL,GAAe,KAAKA,OAApB;AAEA,SAAO1pF,IAAP;AAEA,CAnBD;;AAqBAkqF,gBAAgB,CAACv6H,SAAjB,CAA2B04H,QAA3B,GAAsC,UAAWnL,IAAX,EAAkB;AAEvDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK96E,MAAL,GAAc,EAAd;;AAEA,OAAM,IAAIvxC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC96E,MAAL,CAAY5yC,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD,UAAMmyC,KAAK,GAAGk6E,IAAI,CAAC96E,MAAL,CAAavxC,CAAb,CAAd;AACA,SAAKuxC,MAAL,CAAYpoC,IAAZ,CAAkB,IAAIo3B,OAAJ,GAAc7O,SAAd,CAAyBygB,KAAzB,CAAlB;AAEA;;AAED,OAAK58B,MAAL,GAAc82G,IAAI,CAAC92G,MAAnB;AACA,OAAK+jH,SAAL,GAAiBjN,IAAI,CAACiN,SAAtB;AACA,OAAKT,OAAL,GAAexM,IAAI,CAACwM,OAApB;AAEA,SAAO,IAAP;AAEA,CAnBD;AAqBA;;;;;;;;AAOA,SAASY,UAAT,CAAqB72H,CAArB,EAAwBkxC,EAAxB,EAA4BC,EAA5B,EAAgCC,EAAhC,EAAoCuG,EAApC,EAAyC;AAExC,QAAM5G,EAAE,GAAG,CAAEK,EAAE,GAAGF,EAAP,IAAc,GAAzB;AACA,QAAMviB,EAAE,GAAG,CAAEgpB,EAAE,GAAGxG,EAAP,IAAc,GAAzB;AACA,QAAMkjF,EAAE,GAAGr0H,CAAC,GAAGA,CAAf;AACA,QAAMu2H,EAAE,GAAGv2H,CAAC,GAAGq0H,EAAf;AACA,SAAO,CAAE,IAAIljF,EAAJ,GAAS,IAAIC,EAAb,GAAkBL,EAAlB,GAAuBpiB,EAAzB,IAAgC4nG,EAAhC,GAAqC,CAAE,CAAE,CAAF,GAAMplF,EAAN,GAAW,IAAIC,EAAf,GAAoB,IAAIL,EAAxB,GAA6BpiB,EAA/B,IAAsC0lG,EAA3E,GAAgFtjF,EAAE,GAAG/wC,CAArF,GAAyFmxC,EAAhG;AAEA,EAED;;;AAEA,SAAS2lF,iBAAT,CAA4B92H,CAA5B,EAA+BF,CAA/B,EAAmC;AAElC,QAAM4C,CAAC,GAAG,IAAI1C,CAAd;AACA,SAAO0C,CAAC,GAAGA,CAAJ,GAAQ5C,CAAf;AAEA;;AAED,SAASi3H,iBAAT,CAA4B/2H,CAA5B,EAA+BF,CAA/B,EAAmC;AAElC,SAAO,KAAM,IAAIE,CAAV,IAAgBA,CAAhB,GAAoBF,CAA3B;AAEA;;AAED,SAASk3H,iBAAT,CAA4Bh3H,CAA5B,EAA+BF,CAA/B,EAAmC;AAElC,SAAOE,CAAC,GAAGA,CAAJ,GAAQF,CAAf;AAEA;;AAED,SAASm3H,eAAT,CAA0Bj3H,CAA1B,EAA6BkxC,EAA7B,EAAiCC,EAAjC,EAAqCC,EAArC,EAA0C;AAEzC,SAAO0lF,iBAAiB,CAAE92H,CAAF,EAAKkxC,EAAL,CAAjB,GAA6B6lF,iBAAiB,CAAE/2H,CAAF,EAAKmxC,EAAL,CAA9C,GACN6lF,iBAAiB,CAAEh3H,CAAF,EAAKoxC,EAAL,CADlB;AAGA,EAED;;;AAEA,SAAS8lF,aAAT,CAAwBl3H,CAAxB,EAA2BF,CAA3B,EAA+B;AAE9B,QAAM4C,CAAC,GAAG,IAAI1C,CAAd;AACA,SAAO0C,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAY5C,CAAnB;AAEA;;AAED,SAASq3H,aAAT,CAAwBn3H,CAAxB,EAA2BF,CAA3B,EAA+B;AAE9B,QAAM4C,CAAC,GAAG,IAAI1C,CAAd;AACA,SAAO,IAAI0C,CAAJ,GAAQA,CAAR,GAAY1C,CAAZ,GAAgBF,CAAvB;AAEA;;AAED,SAASs3H,aAAT,CAAwBp3H,CAAxB,EAA2BF,CAA3B,EAA+B;AAE9B,SAAO,KAAM,IAAIE,CAAV,IAAgBA,CAAhB,GAAoBA,CAApB,GAAwBF,CAA/B;AAEA;;AAED,SAASu3H,aAAT,CAAwBr3H,CAAxB,EAA2BF,CAA3B,EAA+B;AAE9B,SAAOE,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAYF,CAAnB;AAEA;;AAED,SAASw3H,WAAT,CAAsBt3H,CAAtB,EAAyBkxC,EAAzB,EAA6BC,EAA7B,EAAiCC,EAAjC,EAAqCuG,EAArC,EAA0C;AAEzC,SAAOu/E,aAAa,CAAEl3H,CAAF,EAAKkxC,EAAL,CAAb,GAAyBimF,aAAa,CAAEn3H,CAAF,EAAKmxC,EAAL,CAAtC,GAAkDimF,aAAa,CAAEp3H,CAAF,EAAKoxC,EAAL,CAA/D,GACNimF,aAAa,CAAEr3H,CAAF,EAAK23C,EAAL,CADd;AAGA;;AAED,SAAS4/E,gBAAT,CAA2BxmF,EAA3B,EAA+BpiB,EAA/B,EAAmCC,EAAnC,EAAuC4oG,EAAvC,EAA4C;AAE3CxE,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,kBAAZ;AAEA,OAAKwpC,EAAL,GAAUA,EAAE,IAAI,IAAIhlB,OAAJ,EAAhB;AACA,OAAK4C,EAAL,GAAUA,EAAE,IAAI,IAAI5C,OAAJ,EAAhB;AACA,OAAK6C,EAAL,GAAUA,EAAE,IAAI,IAAI7C,OAAJ,EAAhB;AACA,OAAKyrG,EAAL,GAAUA,EAAE,IAAI,IAAIzrG,OAAJ,EAAhB;AAEA;;AAEDwrG,gBAAgB,CAACr7H,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAA7B;AACAq7H,gBAAgB,CAACr7H,SAAjB,CAA2BoC,WAA3B,GAAyCi5H,gBAAzC;AAEAA,gBAAgB,CAACr7H,SAAjB,CAA2Bu7H,kBAA3B,GAAgD,IAAhD;;AAEAF,gBAAgB,CAACr7H,SAAjB,CAA2Bg3H,QAA3B,GAAsC,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAEpE,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIpnG,OAAJ,EAAhC;AAEA,QAAMglB,EAAE,GAAG,KAAKA,EAAhB;AAAA,QAAoBpiB,EAAE,GAAG,KAAKA,EAA9B;AAAA,QAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAAA,QAAgD4oG,EAAE,GAAG,KAAKA,EAA1D;AAEAjoF,EAAAA,KAAK,CAAC3jB,GAAN,CACC0rG,WAAW,CAAEt3H,CAAF,EAAK+wC,EAAE,CAACtsC,CAAR,EAAWkqB,EAAE,CAAClqB,CAAd,EAAiBmqB,EAAE,CAACnqB,CAApB,EAAuB+yH,EAAE,CAAC/yH,CAA1B,CADZ,EAEC6yH,WAAW,CAAEt3H,CAAF,EAAK+wC,EAAE,CAACpsC,CAAR,EAAWgqB,EAAE,CAAChqB,CAAd,EAAiBiqB,EAAE,CAACjqB,CAApB,EAAuB6yH,EAAE,CAAC7yH,CAA1B,CAFZ;AAKA,SAAO4qC,KAAP;AAEA,CAbD;;AAeAgoF,gBAAgB,CAACr7H,SAAjB,CAA2BswB,IAA3B,GAAkC,UAAWpR,MAAX,EAAoB;AAErD43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAK21B,EAAL,CAAQvkB,IAAR,CAAcpR,MAAM,CAAC21B,EAArB;AACA,OAAKpiB,EAAL,CAAQnC,IAAR,CAAcpR,MAAM,CAACuT,EAArB;AACA,OAAKC,EAAL,CAAQpC,IAAR,CAAcpR,MAAM,CAACwT,EAArB;AACA,OAAK4oG,EAAL,CAAQhrG,IAAR,CAAcpR,MAAM,CAACo8G,EAArB;AAEA,SAAO,IAAP;AAEA,CAXD;;AAaAD,gBAAgB,CAACr7H,SAAjB,CAA2Bg6B,MAA3B,GAAoC,YAAY;AAE/C,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACwE,EAAL,GAAU,KAAKA,EAAL,CAAQ7yC,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC5d,EAAL,GAAU,KAAKA,EAAL,CAAQzwB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC3d,EAAL,GAAU,KAAKA,EAAL,CAAQ1wB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAACirF,EAAL,GAAU,KAAKA,EAAL,CAAQt5H,OAAR,EAAV;AAEA,SAAOquC,IAAP;AAEA,CAXD;;AAaAgrF,gBAAgB,CAACr7H,SAAjB,CAA2B04H,QAA3B,GAAsC,UAAWnL,IAAX,EAAkB;AAEvDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK14E,EAAL,CAAQjiB,SAAR,CAAmB26F,IAAI,CAAC14E,EAAxB;AACA,OAAKpiB,EAAL,CAAQG,SAAR,CAAmB26F,IAAI,CAAC96F,EAAxB;AACA,OAAKC,EAAL,CAAQE,SAAR,CAAmB26F,IAAI,CAAC76F,EAAxB;AACA,OAAK4oG,EAAL,CAAQ1oG,SAAR,CAAmB26F,IAAI,CAAC+N,EAAxB;AAEA,SAAO,IAAP;AAEA,CAXD;;AAaA,SAASE,iBAAT,CAA4B3mF,EAA5B,EAAgCpiB,EAAhC,EAAoCC,EAApC,EAAwC4oG,EAAxC,EAA6C;AAE5CxE,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,mBAAZ;AAEA,OAAKwpC,EAAL,GAAUA,EAAE,IAAI,IAAIpT,OAAJ,EAAhB;AACA,OAAKhP,EAAL,GAAUA,EAAE,IAAI,IAAIgP,OAAJ,EAAhB;AACA,OAAK/O,EAAL,GAAUA,EAAE,IAAI,IAAI+O,OAAJ,EAAhB;AACA,OAAK65F,EAAL,GAAUA,EAAE,IAAI,IAAI75F,OAAJ,EAAhB;AAEA;;AAED+5F,iBAAiB,CAACx7H,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAA9B;AACAw7H,iBAAiB,CAACx7H,SAAlB,CAA4BoC,WAA5B,GAA0Co5H,iBAA1C;AAEAA,iBAAiB,CAACx7H,SAAlB,CAA4By7H,mBAA5B,GAAkD,IAAlD;;AAEAD,iBAAiB,CAACx7H,SAAlB,CAA4Bg3H,QAA5B,GAAuC,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAErE,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIx1F,OAAJ,EAAhC;AAEA,QAAMoT,EAAE,GAAG,KAAKA,EAAhB;AAAA,QAAoBpiB,EAAE,GAAG,KAAKA,EAA9B;AAAA,QAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAAA,QAAgD4oG,EAAE,GAAG,KAAKA,EAA1D;AAEAjoF,EAAAA,KAAK,CAAC3jB,GAAN,CACC0rG,WAAW,CAAEt3H,CAAF,EAAK+wC,EAAE,CAACtsC,CAAR,EAAWkqB,EAAE,CAAClqB,CAAd,EAAiBmqB,EAAE,CAACnqB,CAApB,EAAuB+yH,EAAE,CAAC/yH,CAA1B,CADZ,EAEC6yH,WAAW,CAAEt3H,CAAF,EAAK+wC,EAAE,CAACpsC,CAAR,EAAWgqB,EAAE,CAAChqB,CAAd,EAAiBiqB,EAAE,CAACjqB,CAApB,EAAuB6yH,EAAE,CAAC7yH,CAA1B,CAFZ,EAGC2yH,WAAW,CAAEt3H,CAAF,EAAK+wC,EAAE,CAACja,CAAR,EAAWnI,EAAE,CAACmI,CAAd,EAAiBlI,EAAE,CAACkI,CAApB,EAAuB0gG,EAAE,CAAC1gG,CAA1B,CAHZ;AAMA,SAAOyY,KAAP;AAEA,CAdD;;AAgBAmoF,iBAAiB,CAACx7H,SAAlB,CAA4BswB,IAA5B,GAAmC,UAAWpR,MAAX,EAAoB;AAEtD43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAK21B,EAAL,CAAQvkB,IAAR,CAAcpR,MAAM,CAAC21B,EAArB;AACA,OAAKpiB,EAAL,CAAQnC,IAAR,CAAcpR,MAAM,CAACuT,EAArB;AACA,OAAKC,EAAL,CAAQpC,IAAR,CAAcpR,MAAM,CAACwT,EAArB;AACA,OAAK4oG,EAAL,CAAQhrG,IAAR,CAAcpR,MAAM,CAACo8G,EAArB;AAEA,SAAO,IAAP;AAEA,CAXD;;AAaAE,iBAAiB,CAACx7H,SAAlB,CAA4Bg6B,MAA5B,GAAqC,YAAY;AAEhD,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACwE,EAAL,GAAU,KAAKA,EAAL,CAAQ7yC,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC5d,EAAL,GAAU,KAAKA,EAAL,CAAQzwB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC3d,EAAL,GAAU,KAAKA,EAAL,CAAQ1wB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAACirF,EAAL,GAAU,KAAKA,EAAL,CAAQt5H,OAAR,EAAV;AAEA,SAAOquC,IAAP;AAEA,CAXD;;AAaAmrF,iBAAiB,CAACx7H,SAAlB,CAA4B04H,QAA5B,GAAuC,UAAWnL,IAAX,EAAkB;AAExDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK14E,EAAL,CAAQjiB,SAAR,CAAmB26F,IAAI,CAAC14E,EAAxB;AACA,OAAKpiB,EAAL,CAAQG,SAAR,CAAmB26F,IAAI,CAAC96F,EAAxB;AACA,OAAKC,EAAL,CAAQE,SAAR,CAAmB26F,IAAI,CAAC76F,EAAxB;AACA,OAAK4oG,EAAL,CAAQ1oG,SAAR,CAAmB26F,IAAI,CAAC+N,EAAxB;AAEA,SAAO,IAAP;AAEA,CAXD;;AAaA,SAASI,SAAT,CAAoBjpG,EAApB,EAAwBC,EAAxB,EAA6B;AAE5BokG,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,WAAZ;AAEA,OAAKonB,EAAL,GAAUA,EAAE,IAAI,IAAI5C,OAAJ,EAAhB;AACA,OAAK6C,EAAL,GAAUA,EAAE,IAAI,IAAI7C,OAAJ,EAAhB;AAEA;;AAED6rG,SAAS,CAAC17H,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAtB;AACA07H,SAAS,CAAC17H,SAAV,CAAoBoC,WAApB,GAAkCs5H,SAAlC;AAEAA,SAAS,CAAC17H,SAAV,CAAoB27H,WAApB,GAAkC,IAAlC;;AAEAD,SAAS,CAAC17H,SAAV,CAAoBg3H,QAApB,GAA+B,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAE7D,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIpnG,OAAJ,EAAhC;;AAEA,MAAK/rB,CAAC,KAAK,CAAX,EAAe;AAEduvC,IAAAA,KAAK,CAAC/iB,IAAN,CAAY,KAAKoC,EAAjB;AAEA,GAJD,MAIO;AAEN2gB,IAAAA,KAAK,CAAC/iB,IAAN,CAAY,KAAKoC,EAAjB,EAAsBhC,GAAtB,CAA2B,KAAK+B,EAAhC;AACA4gB,IAAAA,KAAK,CAACviB,cAAN,CAAsBhtB,CAAtB,EAA0B+U,GAA1B,CAA+B,KAAK4Z,EAApC;AAEA;;AAED,SAAO4gB,KAAP;AAEA,CAjBD,EAmBA;;;AAEAqoF,SAAS,CAAC17H,SAAV,CAAoB02G,UAApB,GAAiC,UAAWn7D,CAAX,EAAc07E,cAAd,EAA+B;AAE/D,SAAO,KAAKD,QAAL,CAAez7E,CAAf,EAAkB07E,cAAlB,CAAP;AAEA,CAJD;;AAMAyE,SAAS,CAAC17H,SAAV,CAAoBk4H,UAApB,GAAiC,UAAWp0H,CAAX,EAAcmzH,cAAd,EAA+B;AAE/D,QAAM/rE,OAAO,GAAG+rE,cAAc,IAAI,IAAIpnG,OAAJ,EAAlC;AAEAq7B,EAAAA,OAAO,CAAC56B,IAAR,CAAc,KAAKoC,EAAnB,EAAwBhC,GAAxB,CAA6B,KAAK+B,EAAlC,EAAuCX,SAAvC;AAEA,SAAOo5B,OAAP;AAEA,CARD;;AAUAwwE,SAAS,CAAC17H,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAKuT,EAAL,CAAQnC,IAAR,CAAcpR,MAAM,CAACuT,EAArB;AACA,OAAKC,EAAL,CAAQpC,IAAR,CAAcpR,MAAM,CAACwT,EAArB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWAgpG,SAAS,CAAC17H,SAAV,CAAoBg6B,MAApB,GAA6B,YAAY;AAExC,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAAC5d,EAAL,GAAU,KAAKA,EAAL,CAAQzwB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC3d,EAAL,GAAU,KAAKA,EAAL,CAAQ1wB,OAAR,EAAV;AAEA,SAAOquC,IAAP;AAEA,CATD;;AAWAqrF,SAAS,CAAC17H,SAAV,CAAoB04H,QAApB,GAA+B,UAAWnL,IAAX,EAAkB;AAEhDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK96F,EAAL,CAAQG,SAAR,CAAmB26F,IAAI,CAAC96F,EAAxB;AACA,OAAKC,EAAL,CAAQE,SAAR,CAAmB26F,IAAI,CAAC76F,EAAxB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA,SAASkpG,UAAT,CAAqBnpG,EAArB,EAAyBC,EAAzB,EAA8B;AAE7BokG,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,YAAZ;AAEA,OAAKonB,EAAL,GAAUA,EAAE,IAAI,IAAIgP,OAAJ,EAAhB;AACA,OAAK/O,EAAL,GAAUA,EAAE,IAAI,IAAI+O,OAAJ,EAAhB;AAEA;;AAEDm6F,UAAU,CAAC57H,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAvB;AACA47H,UAAU,CAAC57H,SAAX,CAAqBoC,WAArB,GAAmCw5H,UAAnC;AAEAA,UAAU,CAAC57H,SAAX,CAAqB67H,YAArB,GAAoC,IAApC;;AAEAD,UAAU,CAAC57H,SAAX,CAAqBg3H,QAArB,GAAgC,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAE9D,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIx1F,OAAJ,EAAhC;;AAEA,MAAK39B,CAAC,KAAK,CAAX,EAAe;AAEduvC,IAAAA,KAAK,CAAC/iB,IAAN,CAAY,KAAKoC,EAAjB;AAEA,GAJD,MAIO;AAEN2gB,IAAAA,KAAK,CAAC/iB,IAAN,CAAY,KAAKoC,EAAjB,EAAsBhC,GAAtB,CAA2B,KAAK+B,EAAhC;AACA4gB,IAAAA,KAAK,CAACviB,cAAN,CAAsBhtB,CAAtB,EAA0B+U,GAA1B,CAA+B,KAAK4Z,EAApC;AAEA;;AAED,SAAO4gB,KAAP;AAEA,CAjBD,EAmBA;;;AAEAuoF,UAAU,CAAC57H,SAAX,CAAqB02G,UAArB,GAAkC,UAAWn7D,CAAX,EAAc07E,cAAd,EAA+B;AAEhE,SAAO,KAAKD,QAAL,CAAez7E,CAAf,EAAkB07E,cAAlB,CAAP;AAEA,CAJD;;AAMA2E,UAAU,CAAC57H,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAKuT,EAAL,CAAQnC,IAAR,CAAcpR,MAAM,CAACuT,EAArB;AACA,OAAKC,EAAL,CAAQpC,IAAR,CAAcpR,MAAM,CAACwT,EAArB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWAkpG,UAAU,CAAC57H,SAAX,CAAqBg6B,MAArB,GAA8B,YAAY;AAEzC,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAAC5d,EAAL,GAAU,KAAKA,EAAL,CAAQzwB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC3d,EAAL,GAAU,KAAKA,EAAL,CAAQ1wB,OAAR,EAAV;AAEA,SAAOquC,IAAP;AAEA,CATD;;AAWAurF,UAAU,CAAC57H,SAAX,CAAqB04H,QAArB,GAAgC,UAAWnL,IAAX,EAAkB;AAEjDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK96F,EAAL,CAAQG,SAAR,CAAmB26F,IAAI,CAAC96F,EAAxB;AACA,OAAKC,EAAL,CAAQE,SAAR,CAAmB26F,IAAI,CAAC76F,EAAxB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA,SAASopG,oBAAT,CAA+BjnF,EAA/B,EAAmCpiB,EAAnC,EAAuCC,EAAvC,EAA4C;AAE3CokG,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,sBAAZ;AAEA,OAAKwpC,EAAL,GAAUA,EAAE,IAAI,IAAIhlB,OAAJ,EAAhB;AACA,OAAK4C,EAAL,GAAUA,EAAE,IAAI,IAAI5C,OAAJ,EAAhB;AACA,OAAK6C,EAAL,GAAUA,EAAE,IAAI,IAAI7C,OAAJ,EAAhB;AAEA;;AAEDisG,oBAAoB,CAAC97H,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAjC;AACA87H,oBAAoB,CAAC97H,SAArB,CAA+BoC,WAA/B,GAA6C05H,oBAA7C;AAEAA,oBAAoB,CAAC97H,SAArB,CAA+B+7H,sBAA/B,GAAwD,IAAxD;;AAEAD,oBAAoB,CAAC97H,SAArB,CAA+Bg3H,QAA/B,GAA0C,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAExE,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIpnG,OAAJ,EAAhC;AAEA,QAAMglB,EAAE,GAAG,KAAKA,EAAhB;AAAA,QAAoBpiB,EAAE,GAAG,KAAKA,EAA9B;AAAA,QAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAEA2gB,EAAAA,KAAK,CAAC3jB,GAAN,CACCqrG,eAAe,CAAEj3H,CAAF,EAAK+wC,EAAE,CAACtsC,CAAR,EAAWkqB,EAAE,CAAClqB,CAAd,EAAiBmqB,EAAE,CAACnqB,CAApB,CADhB,EAECwyH,eAAe,CAAEj3H,CAAF,EAAK+wC,EAAE,CAACpsC,CAAR,EAAWgqB,EAAE,CAAChqB,CAAd,EAAiBiqB,EAAE,CAACjqB,CAApB,CAFhB;AAKA,SAAO4qC,KAAP;AAEA,CAbD;;AAeAyoF,oBAAoB,CAAC97H,SAArB,CAA+BswB,IAA/B,GAAsC,UAAWpR,MAAX,EAAoB;AAEzD43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAK21B,EAAL,CAAQvkB,IAAR,CAAcpR,MAAM,CAAC21B,EAArB;AACA,OAAKpiB,EAAL,CAAQnC,IAAR,CAAcpR,MAAM,CAACuT,EAArB;AACA,OAAKC,EAAL,CAAQpC,IAAR,CAAcpR,MAAM,CAACwT,EAArB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYAopG,oBAAoB,CAAC97H,SAArB,CAA+Bg6B,MAA/B,GAAwC,YAAY;AAEnD,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACwE,EAAL,GAAU,KAAKA,EAAL,CAAQ7yC,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC5d,EAAL,GAAU,KAAKA,EAAL,CAAQzwB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC3d,EAAL,GAAU,KAAKA,EAAL,CAAQ1wB,OAAR,EAAV;AAEA,SAAOquC,IAAP;AAEA,CAVD;;AAYAyrF,oBAAoB,CAAC97H,SAArB,CAA+B04H,QAA/B,GAA0C,UAAWnL,IAAX,EAAkB;AAE3DuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK14E,EAAL,CAAQjiB,SAAR,CAAmB26F,IAAI,CAAC14E,EAAxB;AACA,OAAKpiB,EAAL,CAAQG,SAAR,CAAmB26F,IAAI,CAAC96F,EAAxB;AACA,OAAKC,EAAL,CAAQE,SAAR,CAAmB26F,IAAI,CAAC76F,EAAxB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYA,SAASspG,qBAAT,CAAgCnnF,EAAhC,EAAoCpiB,EAApC,EAAwCC,EAAxC,EAA6C;AAE5CokG,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,uBAAZ;AAEA,OAAKwpC,EAAL,GAAUA,EAAE,IAAI,IAAIpT,OAAJ,EAAhB;AACA,OAAKhP,EAAL,GAAUA,EAAE,IAAI,IAAIgP,OAAJ,EAAhB;AACA,OAAK/O,EAAL,GAAUA,EAAE,IAAI,IAAI+O,OAAJ,EAAhB;AAEA;;AAEDu6F,qBAAqB,CAACh8H,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAlC;AACAg8H,qBAAqB,CAACh8H,SAAtB,CAAgCoC,WAAhC,GAA8C45H,qBAA9C;AAEAA,qBAAqB,CAACh8H,SAAtB,CAAgCi8H,uBAAhC,GAA0D,IAA1D;;AAEAD,qBAAqB,CAACh8H,SAAtB,CAAgCg3H,QAAhC,GAA2C,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAEzE,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIx1F,OAAJ,EAAhC;AAEA,QAAMoT,EAAE,GAAG,KAAKA,EAAhB;AAAA,QAAoBpiB,EAAE,GAAG,KAAKA,EAA9B;AAAA,QAAkCC,EAAE,GAAG,KAAKA,EAA5C;AAEA2gB,EAAAA,KAAK,CAAC3jB,GAAN,CACCqrG,eAAe,CAAEj3H,CAAF,EAAK+wC,EAAE,CAACtsC,CAAR,EAAWkqB,EAAE,CAAClqB,CAAd,EAAiBmqB,EAAE,CAACnqB,CAApB,CADhB,EAECwyH,eAAe,CAAEj3H,CAAF,EAAK+wC,EAAE,CAACpsC,CAAR,EAAWgqB,EAAE,CAAChqB,CAAd,EAAiBiqB,EAAE,CAACjqB,CAApB,CAFhB,EAGCsyH,eAAe,CAAEj3H,CAAF,EAAK+wC,EAAE,CAACja,CAAR,EAAWnI,EAAE,CAACmI,CAAd,EAAiBlI,EAAE,CAACkI,CAApB,CAHhB;AAMA,SAAOyY,KAAP;AAEA,CAdD;;AAgBA2oF,qBAAqB,CAACh8H,SAAtB,CAAgCswB,IAAhC,GAAuC,UAAWpR,MAAX,EAAoB;AAE1D43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAK21B,EAAL,CAAQvkB,IAAR,CAAcpR,MAAM,CAAC21B,EAArB;AACA,OAAKpiB,EAAL,CAAQnC,IAAR,CAAcpR,MAAM,CAACuT,EAArB;AACA,OAAKC,EAAL,CAAQpC,IAAR,CAAcpR,MAAM,CAACwT,EAArB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYAspG,qBAAqB,CAACh8H,SAAtB,CAAgCg6B,MAAhC,GAAyC,YAAY;AAEpD,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACwE,EAAL,GAAU,KAAKA,EAAL,CAAQ7yC,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC5d,EAAL,GAAU,KAAKA,EAAL,CAAQzwB,OAAR,EAAV;AACAquC,EAAAA,IAAI,CAAC3d,EAAL,GAAU,KAAKA,EAAL,CAAQ1wB,OAAR,EAAV;AAEA,SAAOquC,IAAP;AAEA,CAVD;;AAYA2rF,qBAAqB,CAACh8H,SAAtB,CAAgC04H,QAAhC,GAA2C,UAAWnL,IAAX,EAAkB;AAE5DuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK14E,EAAL,CAAQjiB,SAAR,CAAmB26F,IAAI,CAAC14E,EAAxB;AACA,OAAKpiB,EAAL,CAAQG,SAAR,CAAmB26F,IAAI,CAAC96F,EAAxB;AACA,OAAKC,EAAL,CAAQE,SAAR,CAAmB26F,IAAI,CAAC76F,EAAxB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYA,SAASwpG,WAAT,CAAsBzpF;AAAO;AAA7B,EAAsD;AAErDqkF,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,aAAZ;AAEA,OAAKonC,MAAL,GAAcA,MAAM,IAAI,EAAxB;AAEA;;AAEDypF,WAAW,CAACl8H,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAxB;AACAk8H,WAAW,CAACl8H,SAAZ,CAAsBoC,WAAtB,GAAoC85H,WAApC;AAEAA,WAAW,CAACl8H,SAAZ,CAAsBm8H,aAAtB,GAAsC,IAAtC;;AAEAD,WAAW,CAACl8H,SAAZ,CAAsBg3H,QAAtB,GAAiC,UAAWlzH,CAAX,EAAcmzH,cAAd,EAA+B;AAE/D,QAAM5jF,KAAK,GAAG4jF,cAAc,IAAI,IAAIpnG,OAAJ,EAAhC;AAEA,QAAM4iB,MAAM,GAAG,KAAKA,MAApB;AACA,QAAM7uC,CAAC,GAAG,CAAE6uC,MAAM,CAAC5yC,MAAP,GAAgB,CAAlB,IAAwBiE,CAAlC;AAEA,QAAM42H,QAAQ,GAAGx7H,IAAI,CAACwE,KAAL,CAAYE,CAAZ,CAAjB;AACA,QAAMyrG,MAAM,GAAGzrG,CAAC,GAAG82H,QAAnB;AAEA,QAAM1lF,EAAE,GAAGvC,MAAM,CAAEioF,QAAQ,KAAK,CAAb,GAAiBA,QAAjB,GAA4BA,QAAQ,GAAG,CAAzC,CAAjB;AACA,QAAMzlF,EAAE,GAAGxC,MAAM,CAAEioF,QAAF,CAAjB;AACA,QAAMxlF,EAAE,GAAGzC,MAAM,CAAEioF,QAAQ,GAAGjoF,MAAM,CAAC5yC,MAAP,GAAgB,CAA3B,GAA+B4yC,MAAM,CAAC5yC,MAAP,GAAgB,CAA/C,GAAmD66H,QAAQ,GAAG,CAAhE,CAAjB;AACA,QAAMj/E,EAAE,GAAGhJ,MAAM,CAAEioF,QAAQ,GAAGjoF,MAAM,CAAC5yC,MAAP,GAAgB,CAA3B,GAA+B4yC,MAAM,CAAC5yC,MAAP,GAAgB,CAA/C,GAAmD66H,QAAQ,GAAG,CAAhE,CAAjB;AAEArnF,EAAAA,KAAK,CAAC3jB,GAAN,CACCirG,UAAU,CAAEtrB,MAAF,EAAUr6D,EAAE,CAACzsC,CAAb,EAAgB0sC,EAAE,CAAC1sC,CAAnB,EAAsB2sC,EAAE,CAAC3sC,CAAzB,EAA4BkzC,EAAE,CAAClzC,CAA/B,CADX,EAECoyH,UAAU,CAAEtrB,MAAF,EAAUr6D,EAAE,CAACvsC,CAAb,EAAgBwsC,EAAE,CAACxsC,CAAnB,EAAsBysC,EAAE,CAACzsC,CAAzB,EAA4BgzC,EAAE,CAAChzC,CAA/B,CAFX;AAKA,SAAO4qC,KAAP;AAEA,CAtBD;;AAwBA6oF,WAAW,CAACl8H,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD43G,EAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,OAAKuzB,MAAL,GAAc,EAAd;;AAEA,OAAM,IAAIvxC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4d,MAAM,CAACuzB,MAAP,CAAc5yC,MAAnC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD,UAAMmyC,KAAK,GAAGn0B,MAAM,CAACuzB,MAAP,CAAevxC,CAAf,CAAd;AAEA,SAAKuxC,MAAL,CAAYpoC,IAAZ,CAAkBgpC,KAAK,CAAChjB,KAAN,EAAlB;AAEA;;AAED,SAAO,IAAP;AAEA,CAhBD;;AAkBA6rG,WAAW,CAACl8H,SAAZ,CAAsBg6B,MAAtB,GAA+B,YAAY;AAE1C,QAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,EAAAA,IAAI,CAACoC,MAAL,GAAc,EAAd;;AAEA,OAAM,IAAIvxC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKmxC,MAAL,CAAY5yC,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD,UAAMmyC,KAAK,GAAG,KAAKZ,MAAL,CAAavxC,CAAb,CAAd;AACAmvC,IAAAA,IAAI,CAACoC,MAAL,CAAYpoC,IAAZ,CAAkBgpC,KAAK,CAACrxC,OAAN,EAAlB;AAEA;;AAED,SAAOquC,IAAP;AAEA,CAfD;;AAiBA6rF,WAAW,CAACl8H,SAAZ,CAAsB04H,QAAtB,GAAiC,UAAWnL,IAAX,EAAkB;AAElDuJ,EAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,OAAK96E,MAAL,GAAc,EAAd;;AAEA,OAAM,IAAIvxC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC96E,MAAL,CAAY5yC,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD,UAAMmyC,KAAK,GAAGk6E,IAAI,CAAC96E,MAAL,CAAavxC,CAAb,CAAd;AACA,SAAKuxC,MAAL,CAAYpoC,IAAZ,CAAkB,IAAIwlB,OAAJ,GAAc+C,SAAd,CAAyBygB,KAAzB,CAAlB;AAEA;;AAED,SAAO,IAAP;AAEA,CAfD;;AAiBA,IAAI+oF,MAAM,GAAG,aAAax7H,MAAM,CAAC6lH,MAAP,CAAc;AACvCC,EAAAA,SAAS,EAAE,IAD4B;AAEvC8S,EAAAA,QAAQ,EAAEA,QAF6B;AAGvCe,EAAAA,gBAAgB,EAAEA,gBAHqB;AAIvCc,EAAAA,gBAAgB,EAAEA,gBAJqB;AAKvCG,EAAAA,iBAAiB,EAAEA,iBALoB;AAMvC7C,EAAAA,YAAY,EAAEA,YANyB;AAOvC+C,EAAAA,SAAS,EAAEA,SAP4B;AAQvCE,EAAAA,UAAU,EAAEA,UAR2B;AASvCE,EAAAA,oBAAoB,EAAEA,oBATiB;AAUvCE,EAAAA,qBAAqB,EAAEA,qBAVgB;AAWvCE,EAAAA,WAAW,EAAEA;AAX0B,CAAd,CAA1B;AAcA;;;;;AAKA;;;;;AAKA,SAASG,SAAT,GAAqB;AAEpBvF,EAAAA,KAAK,CAACv2H,IAAN,CAAY,IAAZ;AAEA,OAAK8K,IAAL,GAAY,WAAZ;AAEA,OAAKixH,MAAL,GAAc,EAAd;AACA,OAAKC,SAAL,GAAiB,KAAjB,CAPoB,CAOI;AAExB;;AAEDF,SAAS,CAACr8H,SAAV,GAAsBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAf,EAAiD;AAEtEoC,EAAAA,WAAW,EAAEi6H,SAFyD;AAItExjH,EAAAA,GAAG,EAAE,UAAW2jH,KAAX,EAAmB;AAEvB,SAAKF,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAlB;AAEA,GARqE;AAUtEC,EAAAA,SAAS,EAAE,YAAY;AAEtB;AACA,UAAMC,UAAU,GAAG,KAAKJ,MAAL,CAAa,CAAb,EAAiBtF,QAAjB,CAA2B,CAA3B,CAAnB;AACA,UAAM2F,QAAQ,GAAG,KAAKL,MAAL,CAAa,KAAKA,MAAL,CAAYz8H,MAAZ,GAAqB,CAAlC,EAAsCm3H,QAAtC,CAAgD,CAAhD,CAAjB;;AAEA,QAAK,CAAE0F,UAAU,CAAC/pG,MAAX,CAAmBgqG,QAAnB,CAAP,EAAuC;AAEtC,WAAKL,MAAL,CAAYjyH,IAAZ,CAAkB,IAAIqxH,SAAJ,CAAeiB,QAAf,EAAyBD,UAAzB,CAAlB;AAEA;AAED,GAtBqE;AAwBtE;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA1F,EAAAA,QAAQ,EAAE,UAAWlzH,CAAX,EAAe;AAExB,UAAMiyB,CAAC,GAAGjyB,CAAC,GAAG,KAAKuzH,SAAL,EAAd;AACA,UAAMuF,YAAY,GAAG,KAAKC,eAAL,EAArB;AACA,QAAI37H,CAAC,GAAG,CAAR,CAJwB,CAMxB;;AAEA,WAAQA,CAAC,GAAG07H,YAAY,CAAC/8H,MAAzB,EAAkC;AAEjC,UAAK+8H,YAAY,CAAE17H,CAAF,CAAZ,IAAqB60B,CAA1B,EAA8B;AAE7B,cAAMrnB,IAAI,GAAGkuH,YAAY,CAAE17H,CAAF,CAAZ,GAAoB60B,CAAjC;AACA,cAAMymG,KAAK,GAAG,KAAKF,MAAL,CAAap7H,CAAb,CAAd;AAEA,cAAM82H,aAAa,GAAGwE,KAAK,CAACnF,SAAN,EAAtB;AACA,cAAM97E,CAAC,GAAGy8E,aAAa,KAAK,CAAlB,GAAsB,CAAtB,GAA0B,IAAItpH,IAAI,GAAGspH,aAA/C;AAEA,eAAOwE,KAAK,CAAC9lB,UAAN,CAAkBn7D,CAAlB,CAAP;AAEA;;AAEDr6C,MAAAA,CAAC;AAED;;AAED,WAAO,IAAP,CA1BwB,CA4BxB;AAEA,GA/DqE;AAiEtE;AACA;AACA;AAEAm2H,EAAAA,SAAS,EAAE,YAAY;AAEtB,UAAMyF,IAAI,GAAG,KAAKD,eAAL,EAAb;AACA,WAAOC,IAAI,CAAEA,IAAI,CAACj9H,MAAL,GAAc,CAAhB,CAAX;AAEA,GA1EqE;AA4EtE;AACA63H,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,SAAKzsE,WAAL,GAAmB,IAAnB;AACA,SAAK8xE,YAAL,GAAoB,IAApB;AACA,SAAKF,eAAL;AAEA,GAnFqE;AAqFtE;AACA;AAEAA,EAAAA,eAAe,EAAE,YAAY;AAE5B;AAEA,QAAK,KAAKE,YAAL,IAAqB,KAAKA,YAAL,CAAkBl9H,MAAlB,KAA6B,KAAKy8H,MAAL,CAAYz8H,MAAnE,EAA4E;AAE3E,aAAO,KAAKk9H,YAAZ;AAEA,KAR2B,CAU5B;AACA;;;AAEA,UAAMzF,OAAO,GAAG,EAAhB;AACA,QAAI0F,IAAI,GAAG,CAAX;;AAEA,SAAM,IAAI97H,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKg7H,MAAL,CAAYz8H,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD87H,MAAAA,IAAI,IAAI,KAAKV,MAAL,CAAap7H,CAAb,EAAiBm2H,SAAjB,EAAR;AACAC,MAAAA,OAAO,CAACjtH,IAAR,CAAc2yH,IAAd;AAEA;;AAED,SAAKD,YAAL,GAAoBzF,OAApB;AAEA,WAAOA,OAAP;AAEA,GAnHqE;AAqHtElZ,EAAAA,eAAe,EAAE,UAAWgZ,SAAX,EAAuB;AAEvC,QAAKA,SAAS,KAAKn1H,SAAnB,EAA+Bm1H,SAAS,GAAG,EAAZ;AAE/B,UAAM3kF,MAAM,GAAG,EAAf;;AAEA,SAAM,IAAIvxC,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIk2H,SAAtB,EAAiCl2H,CAAC,EAAlC,EAAwC;AAEvCuxC,MAAAA,MAAM,CAACpoC,IAAP,CAAa,KAAK2sH,QAAL,CAAe91H,CAAC,GAAGk2H,SAAnB,CAAb;AAEA;;AAED,QAAK,KAAKmF,SAAV,EAAsB;AAErB9pF,MAAAA,MAAM,CAACpoC,IAAP,CAAaooC,MAAM,CAAE,CAAF,CAAnB;AAEA;;AAED,WAAOA,MAAP;AAEA,GAzIqE;AA2ItE0kF,EAAAA,SAAS,EAAE,UAAWC,SAAX,EAAuB;AAEjCA,IAAAA,SAAS,GAAGA,SAAS,IAAI,EAAzB;AAEA,UAAM3kF,MAAM,GAAG,EAAf;AACA,QAAIgmE,IAAJ;;AAEA,SAAM,IAAIv3G,CAAC,GAAG,CAAR,EAAWo7H,MAAM,GAAG,KAAKA,MAA/B,EAAuCp7H,CAAC,GAAGo7H,MAAM,CAACz8H,MAAlD,EAA0DqB,CAAC,EAA3D,EAAiE;AAEhE,YAAMs7H,KAAK,GAAGF,MAAM,CAAEp7H,CAAF,CAApB;AACA,YAAM2rF,UAAU,GAAK2vC,KAAK,IAAIA,KAAK,CAACpD,cAAjB,GAAoChC,SAAS,GAAG,CAAhD,GACdoF,KAAK,KAAMA,KAAK,CAACb,WAAN,IAAqBa,KAAK,CAACX,YAAjC,CAAP,GAA2D,CAA3D,GACGW,KAAK,IAAIA,KAAK,CAACL,aAAjB,GAAmC/E,SAAS,GAAGoF,KAAK,CAAC/pF,MAAN,CAAa5yC,MAA5D,GACCu3H,SAHL;AAKA,YAAM5a,GAAG,GAAGggB,KAAK,CAACrF,SAAN,CAAiBtqC,UAAjB,CAAZ;;AAEA,WAAM,IAAI93C,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGynE,GAAG,CAAC38G,MAAzB,EAAiCk1C,CAAC,EAAlC,EAAwC;AAEvC,cAAM1B,KAAK,GAAGmpE,GAAG,CAAEznE,CAAF,CAAjB;AAEA,YAAK0jE,IAAI,IAAIA,IAAI,CAAC9lF,MAAL,CAAa0gB,KAAb,CAAb,EAAoC,SAJG,CAIO;;AAE9CZ,QAAAA,MAAM,CAACpoC,IAAP,CAAagpC,KAAb;AACAolE,QAAAA,IAAI,GAAGplE,KAAP;AAEA;AAED;;AAED,QAAK,KAAKkpF,SAAL,IAAkB9pF,MAAM,CAAC5yC,MAAP,GAAgB,CAAlC,IAAuC,CAAE4yC,MAAM,CAAEA,MAAM,CAAC5yC,MAAP,GAAgB,CAAlB,CAAN,CAA4B8yB,MAA5B,CAAoC8f,MAAM,CAAE,CAAF,CAA1C,CAA9C,EAAkG;AAEjGA,MAAAA,MAAM,CAACpoC,IAAP,CAAaooC,MAAM,CAAE,CAAF,CAAnB;AAEA;;AAED,WAAOA,MAAP;AAEA,GAjLqE;AAmLtEniB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB43G,IAAAA,KAAK,CAAC92H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAKo9G,MAAL,GAAc,EAAd;;AAEA,SAAM,IAAIp7H,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4d,MAAM,CAACo9G,MAAP,CAAcz8H,MAAnC,EAA2CqB,CAAC,GAAGI,CAA/C,EAAkDJ,CAAC,EAAnD,EAAyD;AAExD,YAAMs7H,KAAK,GAAGt9G,MAAM,CAACo9G,MAAP,CAAep7H,CAAf,CAAd;AAEA,WAAKo7H,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAK,CAACnsG,KAAN,EAAlB;AAEA;;AAED,SAAKksG,SAAL,GAAiBr9G,MAAM,CAACq9G,SAAxB;AAEA,WAAO,IAAP;AAEA,GArMqE;AAuMtEviG,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAGymF,KAAK,CAAC92H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,CAAb;AAEA8vC,IAAAA,IAAI,CAACksF,SAAL,GAAiB,KAAKA,SAAtB;AACAlsF,IAAAA,IAAI,CAACisF,MAAL,GAAc,EAAd;;AAEA,SAAM,IAAIp7H,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKg7H,MAAL,CAAYz8H,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD,YAAMs7H,KAAK,GAAG,KAAKF,MAAL,CAAap7H,CAAb,CAAd;AACAmvC,MAAAA,IAAI,CAACisF,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAK,CAACxiG,MAAN,EAAlB;AAEA;;AAED,WAAOqW,IAAP;AAEA,GAvNqE;AAyNtEqoF,EAAAA,QAAQ,EAAE,UAAWnL,IAAX,EAAkB;AAE3BuJ,IAAAA,KAAK,CAAC92H,SAAN,CAAgB04H,QAAhB,CAAyBn4H,IAAzB,CAA+B,IAA/B,EAAqCgtH,IAArC;AAEA,SAAKgP,SAAL,GAAiBhP,IAAI,CAACgP,SAAtB;AACA,SAAKD,MAAL,GAAc,EAAd;;AAEA,SAAM,IAAIp7H,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC+O,MAAL,CAAYz8H,MAAjC,EAAyCqB,CAAC,GAAGI,CAA7C,EAAgDJ,CAAC,EAAjD,EAAuD;AAEtD,YAAMs7H,KAAK,GAAGjP,IAAI,CAAC+O,MAAL,CAAap7H,CAAb,CAAd;AACA,WAAKo7H,MAAL,CAAYjyH,IAAZ,CAAkB,IAAI+xH,MAAM,CAAEI,KAAK,CAACnxH,IAAR,CAAV,GAA2BqtH,QAA3B,CAAqC8D,KAArC,CAAlB;AAEA;;AAED,WAAO,IAAP;AAEA;AAzOqE,CAAjD,CAAtB;AA6OA;;;;;AAKA,SAASS,IAAT,CAAexqF,MAAf,EAAwB;AAEvB4pF,EAAAA,SAAS,CAAC97H,IAAV,CAAgB,IAAhB;AAEA,OAAK8K,IAAL,GAAY,MAAZ;AAEA,OAAK6xH,YAAL,GAAoB,IAAIrtG,OAAJ,EAApB;;AAEA,MAAK4iB,MAAL,EAAc;AAEb,SAAKD,aAAL,CAAoBC,MAApB;AAEA;AAED;;AAEDwqF,IAAI,CAACj9H,SAAL,GAAiBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAewiG,SAAS,CAACr8H,SAAzB,CAAf,EAAqD;AAErEoC,EAAAA,WAAW,EAAE66H,IAFwD;AAIrEzqF,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAoB;AAElC,SAAK0qF,MAAL,CAAa1qF,MAAM,CAAE,CAAF,CAAN,CAAYlqC,CAAzB,EAA4BkqC,MAAM,CAAE,CAAF,CAAN,CAAYhqC,CAAxC;;AAEA,SAAM,IAAIvH,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmxC,MAAM,CAAC5yC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,WAAKk8H,MAAL,CAAa3qF,MAAM,CAAEvxC,CAAF,CAAN,CAAYqH,CAAzB,EAA4BkqC,MAAM,CAAEvxC,CAAF,CAAN,CAAYuH,CAAxC;AAEA;;AAED,WAAO,IAAP;AAEA,GAhBoE;AAkBrE00H,EAAAA,MAAM,EAAE,UAAW50H,CAAX,EAAcE,CAAd,EAAkB;AAEzB,SAAKy0H,YAAL,CAAkBxtG,GAAlB,CAAuBnnB,CAAvB,EAA0BE,CAA1B,EAFyB,CAEM;;AAE/B,WAAO,IAAP;AAEA,GAxBoE;AA0BrE20H,EAAAA,MAAM,EAAE,UAAW70H,CAAX,EAAcE,CAAd,EAAkB;AAEzB,UAAM+zH,KAAK,GAAG,IAAId,SAAJ,CAAe,KAAKwB,YAAL,CAAkB7sG,KAAlB,EAAf,EAA0C,IAAIR,OAAJ,CAAatnB,CAAb,EAAgBE,CAAhB,CAA1C,CAAd;AACA,SAAK6zH,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAlB;AAEA,SAAKU,YAAL,CAAkBxtG,GAAlB,CAAuBnnB,CAAvB,EAA0BE,CAA1B;AAEA,WAAO,IAAP;AAEA,GAnCoE;AAqCrE40H,EAAAA,gBAAgB,EAAE,UAAWC,IAAX,EAAiBC,IAAjB,EAAuB3E,EAAvB,EAA2BC,EAA3B,EAAgC;AAEjD,UAAM2D,KAAK,GAAG,IAAIV,oBAAJ,CACb,KAAKoB,YAAL,CAAkB7sG,KAAlB,EADa,EAEb,IAAIR,OAAJ,CAAaytG,IAAb,EAAmBC,IAAnB,CAFa,EAGb,IAAI1tG,OAAJ,CAAa+oG,EAAb,EAAiBC,EAAjB,CAHa,CAAd;AAMA,SAAKyD,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAlB;AAEA,SAAKU,YAAL,CAAkBxtG,GAAlB,CAAuBkpG,EAAvB,EAA2BC,EAA3B;AAEA,WAAO,IAAP;AAEA,GAnDoE;AAqDrE2E,EAAAA,aAAa,EAAE,UAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuChF,EAAvC,EAA2CC,EAA3C,EAAgD;AAE9D,UAAM2D,KAAK,GAAG,IAAInB,gBAAJ,CACb,KAAK6B,YAAL,CAAkB7sG,KAAlB,EADa,EAEb,IAAIR,OAAJ,CAAa4tG,KAAb,EAAoBC,KAApB,CAFa,EAGb,IAAI7tG,OAAJ,CAAa8tG,KAAb,EAAoBC,KAApB,CAHa,EAIb,IAAI/tG,OAAJ,CAAa+oG,EAAb,EAAiBC,EAAjB,CAJa,CAAd;AAOA,SAAKyD,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAlB;AAEA,SAAKU,YAAL,CAAkBxtG,GAAlB,CAAuBkpG,EAAvB,EAA2BC,EAA3B;AAEA,WAAO,IAAP;AAEA,GApEoE;AAsErEgF,EAAAA,UAAU,EAAE,UAAWrhB;AAAI;AAAf,IAAqC;AAEhD,UAAMshB,IAAI,GAAG,CAAE,KAAKZ,YAAL,CAAkB7sG,KAAlB,EAAF,EAA8BpU,MAA9B,CAAsCugG,GAAtC,CAAb;AAEA,UAAMggB,KAAK,GAAG,IAAIN,WAAJ,CAAiB4B,IAAjB,CAAd;AACA,SAAKxB,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAlB;AAEA,SAAKU,YAAL,CAAkB5sG,IAAlB,CAAwBksF,GAAG,CAAEA,GAAG,CAAC38G,MAAJ,GAAa,CAAf,CAA3B;AAEA,WAAO,IAAP;AAEA,GAjFoE;AAmFrE63G,EAAAA,GAAG,EAAE,UAAWkhB,EAAX,EAAeC,EAAf,EAAmBY,OAAnB,EAA4BT,WAA5B,EAAyCC,SAAzC,EAAoDC,UAApD,EAAiE;AAErE,UAAM/6F,EAAE,GAAG,KAAK++F,YAAL,CAAkB30H,CAA7B;AACA,UAAM61B,EAAE,GAAG,KAAK8+F,YAAL,CAAkBz0H,CAA7B;AAEA,SAAKs1H,MAAL,CAAanF,EAAE,GAAGz6F,EAAlB,EAAsB06F,EAAE,GAAGz6F,EAA3B,EAA+Bq7F,OAA/B,EACCT,WADD,EACcC,SADd,EACyBC,UADzB;AAGA,WAAO,IAAP;AAEA,GA7FoE;AA+FrE6E,EAAAA,MAAM,EAAE,UAAWnF,EAAX,EAAeC,EAAf,EAAmBY,OAAnB,EAA4BT,WAA5B,EAAyCC,SAAzC,EAAoDC,UAApD,EAAiE;AAExE,SAAK8E,UAAL,CAAiBpF,EAAjB,EAAqBC,EAArB,EAAyBY,OAAzB,EAAkCA,OAAlC,EAA2CT,WAA3C,EAAwDC,SAAxD,EAAmEC,UAAnE;AAEA,WAAO,IAAP;AAEA,GArGoE;AAuGrE+E,EAAAA,OAAO,EAAE,UAAWrF,EAAX,EAAeC,EAAf,EAAmBC,OAAnB,EAA4BC,OAA5B,EAAqCC,WAArC,EAAkDC,SAAlD,EAA6DC,UAA7D,EAAyEC,SAAzE,EAAqF;AAE7F,UAAMh7F,EAAE,GAAG,KAAK++F,YAAL,CAAkB30H,CAA7B;AACA,UAAM61B,EAAE,GAAG,KAAK8+F,YAAL,CAAkBz0H,CAA7B;AAEA,SAAKu1H,UAAL,CAAiBpF,EAAE,GAAGz6F,EAAtB,EAA0B06F,EAAE,GAAGz6F,EAA/B,EAAmC06F,OAAnC,EAA4CC,OAA5C,EAAqDC,WAArD,EAAkEC,SAAlE,EAA6EC,UAA7E,EAAyFC,SAAzF;AAEA,WAAO,IAAP;AAEA,GAhHoE;AAkHrE6E,EAAAA,UAAU,EAAE,UAAWpF,EAAX,EAAeC,EAAf,EAAmBC,OAAnB,EAA4BC,OAA5B,EAAqCC,WAArC,EAAkDC,SAAlD,EAA6DC,UAA7D,EAAyEC,SAAzE,EAAqF;AAEhG,UAAMqD,KAAK,GAAG,IAAI7D,YAAJ,CAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,OAA1B,EAAmCC,OAAnC,EAA4CC,WAA5C,EAAyDC,SAAzD,EAAoEC,UAApE,EAAgFC,SAAhF,CAAd;;AAEA,QAAK,KAAKmD,MAAL,CAAYz8H,MAAZ,GAAqB,CAA1B,EAA8B;AAE7B;AACA,YAAMq+H,UAAU,GAAG1B,KAAK,CAACxF,QAAN,CAAgB,CAAhB,CAAnB;;AAEA,UAAK,CAAEkH,UAAU,CAACvrG,MAAX,CAAmB,KAAKuqG,YAAxB,CAAP,EAAgD;AAE/C,aAAKE,MAAL,CAAac,UAAU,CAAC31H,CAAxB,EAA2B21H,UAAU,CAACz1H,CAAtC;AAEA;AAED;;AAED,SAAK6zH,MAAL,CAAYjyH,IAAZ,CAAkBmyH,KAAlB;AAEA,UAAM2B,SAAS,GAAG3B,KAAK,CAACxF,QAAN,CAAgB,CAAhB,CAAlB;AACA,SAAKkG,YAAL,CAAkB5sG,IAAlB,CAAwB6tG,SAAxB;AAEA,WAAO,IAAP;AAEA,GA1IoE;AA4IrE7tG,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBm9G,IAAAA,SAAS,CAACr8H,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;AAEA,SAAKg+G,YAAL,CAAkB5sG,IAAlB,CAAwBpR,MAAM,CAACg+G,YAA/B;AAEA,WAAO,IAAP;AAEA,GApJoE;AAsJrEljG,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAGgsF,SAAS,CAACr8H,SAAV,CAAoBg6B,MAApB,CAA2Bz5B,IAA3B,CAAiC,IAAjC,CAAb;AAEA8vC,IAAAA,IAAI,CAAC6sF,YAAL,GAAoB,KAAKA,YAAL,CAAkBl7H,OAAlB,EAApB;AAEA,WAAOquC,IAAP;AAEA,GA9JoE;AAgKrEqoF,EAAAA,QAAQ,EAAE,UAAWnL,IAAX,EAAkB;AAE3B8O,IAAAA,SAAS,CAACr8H,SAAV,CAAoB04H,QAApB,CAA6Bn4H,IAA7B,CAAmC,IAAnC,EAAyCgtH,IAAzC;AAEA,SAAK2P,YAAL,CAAkBtqG,SAAlB,CAA6B26F,IAAI,CAAC2P,YAAlC;AAEA,WAAO,IAAP;AAEA;AAxKoE,CAArD,CAAjB;AA4KA;;;;AAKA;AACA;AACA;AACA;AACA;;AAEA,SAASkB,KAAT,CAAgB3rF,MAAhB,EAAyB;AAExBwqF,EAAAA,IAAI,CAAC18H,IAAL,CAAW,IAAX,EAAiBkyC,MAAjB;AAEA,OAAKxlB,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ;AAEA,OAAKthB,IAAL,GAAY,OAAZ;AAEA,OAAKqxG,KAAL,GAAa,EAAb;AAEA;;AAED0hB,KAAK,CAACp+H,SAAN,GAAkBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeojG,IAAI,CAACj9H,SAApB,CAAf,EAAgD;AAEjEoC,EAAAA,WAAW,EAAEg8H,KAFoD;AAIjEC,EAAAA,cAAc,EAAE,UAAWjH,SAAX,EAAuB;AAEtC,UAAMkH,QAAQ,GAAG,EAAjB;;AAEA,SAAM,IAAIp9H,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKo7G,KAAL,CAAW78G,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErDo9H,MAAAA,QAAQ,CAAEp9H,CAAF,CAAR,GAAgB,KAAKw7G,KAAL,CAAYx7G,CAAZ,EAAgBi2H,SAAhB,CAA2BC,SAA3B,CAAhB;AAEA;;AAED,WAAOkH,QAAP;AAEA,GAhBgE;AAkBjE;AAEAhgB,EAAAA,aAAa,EAAE,UAAW8Y,SAAX,EAAuB;AAErC,WAAO;AAENrnF,MAAAA,KAAK,EAAE,KAAKonF,SAAL,CAAgBC,SAAhB,CAFD;AAGN1a,MAAAA,KAAK,EAAE,KAAK2hB,cAAL,CAAqBjH,SAArB;AAHD,KAAP;AAOA,GA7BgE;AA+BjE9mG,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB+9G,IAAAA,IAAI,CAACj9H,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;AAEA,SAAKw9F,KAAL,GAAa,EAAb;;AAEA,SAAM,IAAIx7G,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4d,MAAM,CAACw9F,KAAP,CAAa78G,MAAlC,EAA0CqB,CAAC,GAAGI,CAA9C,EAAiDJ,CAAC,EAAlD,EAAwD;AAEvD,YAAMq5G,IAAI,GAAGr7F,MAAM,CAACw9F,KAAP,CAAcx7G,CAAd,CAAb;AAEA,WAAKw7G,KAAL,CAAWryG,IAAX,CAAiBkwG,IAAI,CAAClqF,KAAL,EAAjB;AAEA;;AAED,WAAO,IAAP;AAEA,GA/CgE;AAiDjE2J,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAG4sF,IAAI,CAACj9H,SAAL,CAAeg6B,MAAf,CAAsBz5B,IAAtB,CAA4B,IAA5B,CAAb;AAEA8vC,IAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,IAAAA,IAAI,CAACqsE,KAAL,GAAa,EAAb;;AAEA,SAAM,IAAIx7G,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKo7G,KAAL,CAAW78G,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErD,YAAMq5G,IAAI,GAAG,KAAKmC,KAAL,CAAYx7G,CAAZ,CAAb;AACAmvC,MAAAA,IAAI,CAACqsE,KAAL,CAAWryG,IAAX,CAAiBkwG,IAAI,CAACvgF,MAAL,EAAjB;AAEA;;AAED,WAAOqW,IAAP;AAEA,GAjEgE;AAmEjEqoF,EAAAA,QAAQ,EAAE,UAAWnL,IAAX,EAAkB;AAE3B0P,IAAAA,IAAI,CAACj9H,SAAL,CAAe04H,QAAf,CAAwBn4H,IAAxB,CAA8B,IAA9B,EAAoCgtH,IAApC;AAEA,SAAKtgG,IAAL,GAAYsgG,IAAI,CAACtgG,IAAjB;AACA,SAAKyvF,KAAL,GAAa,EAAb;;AAEA,SAAM,IAAIx7G,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC7Q,KAAL,CAAW78G,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErD,YAAMq5G,IAAI,GAAGgT,IAAI,CAAC7Q,KAAL,CAAYx7G,CAAZ,CAAb;AACA,WAAKw7G,KAAL,CAAWryG,IAAX,CAAiB,IAAI4yH,IAAJ,GAAWvE,QAAX,CAAqBne,IAArB,CAAjB;AAEA;;AAED,WAAO,IAAP;AAEA;AAnFgE,CAAhD,CAAlB;AAuFA;;;;;AAKA,SAASgkB,KAAT,CAAgB5/H,KAAhB,EAAuBsrF,SAAvB,EAAmC;AAElCz+C,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,OAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,CAAW5F,KAAX,CAAb;AACA,OAAKsrF,SAAL,GAAiBA,SAAS,KAAKhoF,SAAd,GAA0BgoF,SAA1B,GAAsC,CAAvD;AAEA,OAAK59C,aAAL,GAAqBpqC,SAArB;AAEA;;AAEDs8H,KAAK,CAACv+H,SAAN,GAAkBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAErEoC,EAAAA,WAAW,EAAEm8H,KAFwD;AAIrExwF,EAAAA,OAAO,EAAE,IAJ4D;AAMrEzd,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBssB,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;AAEA,SAAKvgB,KAAL,CAAW2xB,IAAX,CAAiBpR,MAAM,CAACvgB,KAAxB;AACA,SAAKsrF,SAAL,GAAiB/qE,MAAM,CAAC+qE,SAAxB;AAEA,WAAO,IAAP;AAEA,GAfoE;AAiBrEjwD,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAG7E,QAAQ,CAACxrC,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,EAAsC05B,IAAtC,CAAb;AAEAoW,IAAAA,IAAI,CAAC1qC,MAAL,CAAYhH,KAAZ,GAAoB,KAAKA,KAAL,CAAWy/C,MAAX,EAApB;AACA/N,IAAAA,IAAI,CAAC1qC,MAAL,CAAYskF,SAAZ,GAAwB,KAAKA,SAA7B;AAEA,QAAK,KAAKtqB,WAAL,KAAqB19D,SAA1B,EAAsCouC,IAAI,CAAC1qC,MAAL,CAAYg6D,WAAZ,GAA0B,KAAKA,WAAL,CAAiBvhB,MAAjB,EAA1B;AAEtC,QAAK,KAAK9Q,QAAL,KAAkBrrC,SAAvB,EAAmCouC,IAAI,CAAC1qC,MAAL,CAAY2nC,QAAZ,GAAuB,KAAKA,QAA5B;AACnC,QAAK,KAAKvb,KAAL,KAAe9vB,SAApB,EAAgCouC,IAAI,CAAC1qC,MAAL,CAAYosB,KAAZ,GAAoB,KAAKA,KAAzB;AAChC,QAAK,KAAKgtC,KAAL,KAAe98D,SAApB,EAAgCouC,IAAI,CAAC1qC,MAAL,CAAYo5D,KAAZ,GAAoB,KAAKA,KAAzB;AAChC,QAAK,KAAK6rB,QAAL,KAAkB3oF,SAAvB,EAAmCouC,IAAI,CAAC1qC,MAAL,CAAYilF,QAAZ,GAAuB,KAAKA,QAA5B;AAEnC,QAAK,KAAK7f,MAAL,KAAgB9oE,SAArB,EAAiCouC,IAAI,CAAC1qC,MAAL,CAAYolE,MAAZ,GAAqB,KAAKA,MAAL,CAAY/wC,MAAZ,EAArB;AAEjC,WAAOqW,IAAP;AAEA;AAnCoE,CAApD,CAAlB;AAuCA;;;;AAIA,SAASmuF,eAAT,CAA0B9+D,QAA1B,EAAoCC,WAApC,EAAiDsqB,SAAjD,EAA6D;AAE5Ds0C,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkBm/D,QAAlB,EAA4BuqB,SAA5B;AAEA,OAAK5+E,IAAL,GAAY,iBAAZ;AAEA,OAAK+gC,UAAL,GAAkBnqC,SAAlB;AAEA,OAAKyF,QAAL,CAAc4oB,IAAd,CAAoBkb,QAAQ,CAACE,SAA7B;AACA,OAAK3R,YAAL;AAEA,OAAK4lC,WAAL,GAAmB,IAAIp7D,KAAJ,CAAWo7D,WAAX,CAAnB;AAEA;;AAED6+D,eAAe,CAACx+H,SAAhB,GAA4BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAE5EoC,EAAAA,WAAW,EAAEo8H,eAF+D;AAI5EzzC,EAAAA,iBAAiB,EAAE,IAJyD;AAM5Ez6D,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBq/G,IAAAA,KAAK,CAACv+H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAKygD,WAAL,CAAiBrvC,IAAjB,CAAuBpR,MAAM,CAACygD,WAA9B;AAEA,WAAO,IAAP;AAEA;AAd2E,CAAjD,CAA5B;AAkBA;;;;AAIA,SAAS8+D,WAAT,CAAsB/7F,MAAtB,EAA+B;AAE9B,OAAKA,MAAL,GAAcA,MAAd;AAEA,OAAK8nD,IAAL,GAAY,CAAZ;AACA,OAAKC,UAAL,GAAkB,CAAlB;AACA,OAAKxmD,MAAL,GAAc,CAAd;AAEA,OAAKymD,OAAL,GAAe,IAAI76D,OAAJ,CAAa,GAAb,EAAkB,GAAlB,CAAf;AAEA,OAAKzjB,GAAL,GAAW,IAAX;AACA,OAAKyhF,OAAL,GAAe,IAAf;AACA,OAAK53D,MAAL,GAAc,IAAI2O,OAAJ,EAAd;AAEA,OAAK+L,UAAL,GAAkB,IAAlB;AACA,OAAKsa,WAAL,GAAmB,KAAnB;AAEA,OAAKihC,QAAL,GAAgB,IAAIhxB,OAAJ,EAAhB;AACA,OAAKwjE,aAAL,GAAqB,IAAI7uG,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAArB;AAEA,OAAK8uG,cAAL,GAAsB,CAAtB;AAEA,OAAKC,UAAL,GAAkB,CAEjB,IAAIjkG,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAFiB,CAAlB;AAMA;;AAED/5B,MAAM,CAACme,MAAP,CAAe0/G,WAAW,CAACz+H,SAA3B,EAAsC;AAErColG,EAAAA,iBAAiB,EAAE,IAAIxgE,OAAJ,EAFkB;AAIrCi6F,EAAAA,mBAAmB,EAAE,IAAIp9F,OAAJ,EAJgB;AAMrCq9F,EAAAA,WAAW,EAAE,IAAIr9F,OAAJ,EANwB;AAQrCssD,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,WAAO,KAAK4wC,cAAZ;AAEA,GAZoC;AAcrCxwC,EAAAA,UAAU,EAAE,YAAY;AAEvB,WAAO,KAAKjC,QAAZ;AAEA,GAlBoC;AAoBrCgC,EAAAA,cAAc,EAAE,UAAW1F,KAAX,EAAmB;AAElC,UAAM6G,YAAY,GAAG,KAAK3sD,MAA1B;AAAA,UACCq8F,YAAY,GAAG,KAAK9oG,MADrB;AAAA,UAEC+oG,gBAAgB,GAAG,KAAK55B,iBAFzB;AAAA,UAGC65B,UAAU,GAAG,KAAKH,WAHnB;AAAA,UAICI,kBAAkB,GAAG,KAAKL,mBAJ3B;AAMAK,IAAAA,kBAAkB,CAAC56F,qBAAnB,CAA0CkkD,KAAK,CAACzlD,WAAhD;AACAssD,IAAAA,YAAY,CAAC3nF,QAAb,CAAsB4oB,IAAtB,CAA4B4uG,kBAA5B;AAEAD,IAAAA,UAAU,CAAC36F,qBAAX,CAAkCkkD,KAAK,CAACnoF,MAAN,CAAa0iC,WAA/C;AACAssD,IAAAA,YAAY,CAAC5oD,MAAb,CAAqBw4F,UAArB;AACA5vC,IAAAA,YAAY,CAAC9gD,iBAAb;AAEAywF,IAAAA,gBAAgB,CAACxqG,gBAAjB,CAAmC66D,YAAY,CAACzsD,gBAAhD,EAAkEysD,YAAY,CAAC1sD,kBAA/E;;AACA,SAAKupD,QAAL,CAAc3wB,uBAAd,CAAuCyjE,gBAAvC;;AAEAD,IAAAA,YAAY,CAACrvG,GAAb,CACC,GADD,EACM,GADN,EACW,GADX,EACgB,GADhB,EAEC,GAFD,EAEM,GAFN,EAEW,GAFX,EAEgB,GAFhB,EAGC,GAHD,EAGM,GAHN,EAGW,GAHX,EAGgB,GAHhB,EAIC,GAJD,EAIM,GAJN,EAIW,GAJX,EAIgB,GAJhB;AAOAqvG,IAAAA,YAAY,CAACluG,QAAb,CAAuBw+D,YAAY,CAACzsD,gBAApC;AACAm8F,IAAAA,YAAY,CAACluG,QAAb,CAAuBw+D,YAAY,CAAC1sD,kBAApC;AAEA,GAhDoC;AAkDrCsrD,EAAAA,WAAW,EAAE,UAAWkxC,aAAX,EAA2B;AAEvC,WAAO,KAAKP,UAAL,CAAiBO,aAAjB,CAAP;AAEA,GAtDoC;AAwDrCxxC,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO,KAAK+wC,aAAZ;AAEA,GA5DoC;AA8DrCpuG,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAKwjB,MAAL,GAAcxjB,MAAM,CAACwjB,MAAP,CAAcrS,KAAd,EAAd;AAEA,SAAKm6D,IAAL,GAAYtrE,MAAM,CAACsrE,IAAnB;AACA,SAAKvmD,MAAL,GAAc/kB,MAAM,CAAC+kB,MAArB;AAEA,SAAKymD,OAAL,CAAap6D,IAAb,CAAmBpR,MAAM,CAACwrE,OAA1B;AAEA,WAAO,IAAP;AAEA,GAzEoC;AA2ErCr6D,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GA/EoC;AAiFrC0J,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMr0B,MAAM,GAAG,EAAf;AAEA,QAAK,KAAK6kF,IAAL,KAAc,CAAnB,EAAuB7kF,MAAM,CAAC6kF,IAAP,GAAc,KAAKA,IAAnB;AACvB,QAAK,KAAKC,UAAL,KAAoB,CAAzB,EAA6B9kF,MAAM,CAAC8kF,UAAP,GAAoB,KAAKA,UAAzB;AAC7B,QAAK,KAAKxmD,MAAL,KAAgB,CAArB,EAAyBt+B,MAAM,CAACs+B,MAAP,GAAgB,KAAKA,MAArB;AACzB,QAAK,KAAKymD,OAAL,CAAaniF,CAAb,KAAmB,GAAnB,IAA0B,KAAKmiF,OAAL,CAAajiF,CAAb,KAAmB,GAAlD,EAAwD9C,MAAM,CAAC+kF,OAAP,GAAiB,KAAKA,OAAL,CAAa1oF,OAAb,EAAjB;AAExD2D,IAAAA,MAAM,CAAC+8B,MAAP,GAAgB,KAAKA,MAAL,CAAY1I,MAAZ,CAAoB,KAApB,EAA4Br0B,MAA5C;AACA,WAAOA,MAAM,CAAC+8B,MAAP,CAAczM,MAArB;AAEA,WAAOtwB,MAAP;AAEA;AA/FoC,CAAtC;AAmGA;;;;AAIA,SAASy5H,eAAT,GAA2B;AAE1BX,EAAAA,WAAW,CAACl+H,IAAZ,CAAkB,IAAlB,EAAwB,IAAIs3D,iBAAJ,CAAuB,EAAvB,EAA2B,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC,CAAxB;AAEA;;AAEDunE,eAAe,CAACp/H,SAAhB,GAA4BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe4kG,WAAW,CAACz+H,SAA3B,CAAf,EAAuD;AAElFoC,EAAAA,WAAW,EAAEg9H,eAFqE;AAIlFC,EAAAA,iBAAiB,EAAE,IAJ+D;AAMlFnxC,EAAAA,cAAc,EAAE,UAAW1F,KAAX,EAAmB;AAElC,UAAM9lD,MAAM,GAAG,KAAKA,MAApB;AAEA,UAAMo1B,GAAG,GAAGvrC,SAAS,CAACG,OAAV,GAAoB,CAApB,GAAwB87D,KAAK,CAACz2D,KAA1C;AACA,UAAMgmC,MAAM,GAAG,KAAK2yB,OAAL,CAAa7/E,KAAb,GAAqB,KAAK6/E,OAAL,CAAa5/E,MAAjD;AACA,UAAMq+B,GAAG,GAAGq/C,KAAK,CAACl7C,QAAN,IAAkB5K,MAAM,CAACyG,GAArC;;AAEA,QAAK2uB,GAAG,KAAKp1B,MAAM,CAACo1B,GAAf,IAAsBC,MAAM,KAAKr1B,MAAM,CAACq1B,MAAxC,IAAkD5uB,GAAG,KAAKzG,MAAM,CAACyG,GAAtE,EAA4E;AAE3EzG,MAAAA,MAAM,CAACo1B,GAAP,GAAaA,GAAb;AACAp1B,MAAAA,MAAM,CAACq1B,MAAP,GAAgBA,MAAhB;AACAr1B,MAAAA,MAAM,CAACyG,GAAP,GAAaA,GAAb;AACAzG,MAAAA,MAAM,CAAC01B,sBAAP;AAEA;;AAEDqmE,IAAAA,WAAW,CAACz+H,SAAZ,CAAsBkuF,cAAtB,CAAqC3tF,IAArC,CAA2C,IAA3C,EAAiDioF,KAAjD;AAEA;AAzBiF,CAAvD,CAA5B;AA6BA;;;;AAIA,SAAS82C,SAAT,CAAoB3gI,KAApB,EAA2BsrF,SAA3B,EAAsC38C,QAAtC,EAAgDvb,KAAhD,EAAuD64D,QAAvD,EAAiE7rB,KAAjE,EAAyE;AAExEw/D,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkB5B,KAAlB,EAAyBsrF,SAAzB;AAEA,OAAK5+E,IAAL,GAAY,WAAZ;AAEA,OAAK3D,QAAL,CAAc4oB,IAAd,CAAoBkb,QAAQ,CAACE,SAA7B;AACA,OAAK3R,YAAL;AAEA,OAAK15B,MAAL,GAAc,IAAImrC,QAAJ,EAAd;AAEA5qC,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,OAA7B,EAAsC;AACrCga,IAAAA,GAAG,EAAE,YAAY;AAEhB;AACA;AACA,aAAO,KAAKmrE,SAAL,GAAiB/qF,IAAI,CAACutB,EAA7B;AAEA,KAPoC;AAQrCiD,IAAAA,GAAG,EAAE,UAAW6vG,KAAX,EAAmB;AAEvB;AACA;AACA,WAAKt1C,SAAL,GAAiBs1C,KAAK,GAAGrgI,IAAI,CAACutB,EAA9B;AAEA;AAdoC,GAAtC;AAiBA,OAAK6gB,QAAL,GAAkBA,QAAQ,KAAKrrC,SAAf,GAA6BqrC,QAA7B,GAAwC,CAAxD;AACA,OAAKvb,KAAL,GAAeA,KAAK,KAAK9vB,SAAZ,GAA0B8vB,KAA1B,GAAkC7yB,IAAI,CAACutB,EAAL,GAAU,CAAzD;AACA,OAAKm+D,QAAL,GAAkBA,QAAQ,KAAK3oF,SAAf,GAA6B2oF,QAA7B,GAAwC,CAAxD;AACA,OAAK7rB,KAAL,GAAeA,KAAK,KAAK98D,SAAZ,GAA0B88D,KAA1B,GAAkC,CAA/C,CA/BwE,CA+BtB;;AAElD,OAAKgM,MAAL,GAAc,IAAIq0D,eAAJ,EAAd;AAEA;;AAEDE,SAAS,CAACt/H,SAAV,GAAsBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAEtEoC,EAAAA,WAAW,EAAEk9H,SAFyD;AAItE30C,EAAAA,WAAW,EAAE,IAJyD;AAMtEr6D,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBq/G,IAAAA,KAAK,CAACv+H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAKouB,QAAL,GAAgBpuB,MAAM,CAACouB,QAAvB;AACA,SAAKvb,KAAL,GAAa7S,MAAM,CAAC6S,KAApB;AACA,SAAK64D,QAAL,GAAgB1rE,MAAM,CAAC0rE,QAAvB;AACA,SAAK7rB,KAAL,GAAa7/C,MAAM,CAAC6/C,KAApB;AAEA,SAAK1+D,MAAL,GAAc6e,MAAM,CAAC7e,MAAP,CAAcgwB,KAAd,EAAd;AAEA,SAAK06C,MAAL,GAAc7rD,MAAM,CAAC6rD,MAAP,CAAc16C,KAAd,EAAd;AAEA,WAAO,IAAP;AAEA;AArBqE,CAAjD,CAAtB;;AAyBA,SAASmvG,gBAAT,GAA4B;AAE3Bf,EAAAA,WAAW,CAACl+H,IAAZ,CAAkB,IAAlB,EAAwB,IAAIs3D,iBAAJ,CAAuB,EAAvB,EAA2B,CAA3B,EAA8B,GAA9B,EAAmC,GAAnC,CAAxB;AAEA,OAAK6mE,aAAL,GAAqB,IAAI7uG,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAArB;AAEA,OAAK8uG,cAAL,GAAsB,CAAtB;AAEA,OAAKC,UAAL,GAAkB,CACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA,MAAIjkG,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAfiB,EAgBjB;AACA,MAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAjBiB,EAkBjB;AACA,MAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAnBiB,EAoBjB;AACA,MAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CArBiB,EAsBjB;AACA,MAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAvBiB,EAwBjB;AACA,MAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAzBiB,CAAlB;AA4BA,OAAK8kG,eAAL,GAAuB,CACtB,IAAIh+F,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADsB,EACE,IAAIA,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CADF,EAC4B,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAD5B,EAEtB,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAFsB,EAEI,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFJ,EAE4B,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAArB,CAF5B,CAAvB;AAKA,OAAKi+F,QAAL,GAAgB,CACf,IAAIj+F,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADe,EACS,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADT,EACiC,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADjC,EAEf,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFe,EAES,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAFT,EAEiC,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAFjC,CAAhB;AAKA;;AAED+9F,gBAAgB,CAACx/H,SAAjB,GAA6BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe4kG,WAAW,CAACz+H,SAA3B,CAAf,EAAuD;AAEnFoC,EAAAA,WAAW,EAAEo9H,gBAFsE;AAInF5xC,EAAAA,kBAAkB,EAAE,IAJ+D;AAMnFM,EAAAA,cAAc,EAAE,UAAW1F,KAAX,EAAkB22C,aAAlB,EAAkC;AAEjD,QAAKA,aAAa,KAAKl9H,SAAvB,EAAmCk9H,aAAa,GAAG,CAAhB;AAEnC,UAAMz8F,MAAM,GAAG,KAAKA,MAApB;AAAA,UACCq8F,YAAY,GAAG,KAAK9oG,MADrB;AAAA,UAECipG,kBAAkB,GAAG,KAAKL,mBAF3B;AAAA,UAGCI,UAAU,GAAG,KAAKH,WAHnB;AAAA,UAICE,gBAAgB,GAAG,KAAK55B,iBAJzB;AAMA85B,IAAAA,kBAAkB,CAAC56F,qBAAnB,CAA0CkkD,KAAK,CAACzlD,WAAhD;AACAL,IAAAA,MAAM,CAACh7B,QAAP,CAAgB4oB,IAAhB,CAAsB4uG,kBAAtB;AAEAD,IAAAA,UAAU,CAAC3uG,IAAX,CAAiBoS,MAAM,CAACh7B,QAAxB;AACAu3H,IAAAA,UAAU,CAACpmH,GAAX,CAAgB,KAAK4mH,eAAL,CAAsBN,aAAtB,CAAhB;AACAz8F,IAAAA,MAAM,CAACiE,EAAP,CAAUrW,IAAV,CAAgB,KAAKovG,QAAL,CAAeP,aAAf,CAAhB;AACAz8F,IAAAA,MAAM,CAAC+D,MAAP,CAAew4F,UAAf;AACAv8F,IAAAA,MAAM,CAAC6L,iBAAP;AAEAwwF,IAAAA,YAAY,CAAC/2F,eAAb,CAA8B,CAAEk3F,kBAAkB,CAAC32H,CAAnD,EAAsD,CAAE22H,kBAAkB,CAACz2H,CAA3E,EAA8E,CAAEy2H,kBAAkB,CAACtkG,CAAnG;AAEAokG,IAAAA,gBAAgB,CAACxqG,gBAAjB,CAAmCkO,MAAM,CAACE,gBAA1C,EAA4DF,MAAM,CAACC,kBAAnE;;AACA,SAAKupD,QAAL,CAAc3wB,uBAAd,CAAuCyjE,gBAAvC;AAEA;AA9BkF,CAAvD,CAA7B;AAkCA;;;;AAKA,SAASW,UAAT,CAAqBhhI,KAArB,EAA4BsrF,SAA5B,EAAuC38C,QAAvC,EAAiDyxB,KAAjD,EAAyD;AAExDw/D,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkB5B,KAAlB,EAAyBsrF,SAAzB;AAEA,OAAK5+E,IAAL,GAAY,YAAZ;AAEAzK,EAAAA,MAAM,CAACkE,cAAP,CAAuB,IAAvB,EAA6B,OAA7B,EAAsC;AACrCga,IAAAA,GAAG,EAAE,YAAY;AAEhB;AACA;AACA,aAAO,KAAKmrE,SAAL,GAAiB,CAAjB,GAAqB/qF,IAAI,CAACutB,EAAjC;AAEA,KAPoC;AAQrCiD,IAAAA,GAAG,EAAE,UAAW6vG,KAAX,EAAmB;AAEvB;AACA;AACA,WAAKt1C,SAAL,GAAiBs1C,KAAK,IAAK,IAAIrgI,IAAI,CAACutB,EAAd,CAAtB;AAEA;AAdoC,GAAtC;AAiBA,OAAK6gB,QAAL,GAAkBA,QAAQ,KAAKrrC,SAAf,GAA6BqrC,QAA7B,GAAwC,CAAxD;AACA,OAAKyxB,KAAL,GAAeA,KAAK,KAAK98D,SAAZ,GAA0B88D,KAA1B,GAAkC,CAA/C,CAxBwD,CAwBN;;AAElD,OAAKgM,MAAL,GAAc,IAAIy0D,gBAAJ,EAAd;AAEA;;AAEDG,UAAU,CAAC3/H,SAAX,GAAuBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAEvEoC,EAAAA,WAAW,EAAEu9H,UAF0D;AAIvE70C,EAAAA,YAAY,EAAE,IAJyD;AAMvEx6D,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBq/G,IAAAA,KAAK,CAACv+H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAKouB,QAAL,GAAgBpuB,MAAM,CAACouB,QAAvB;AACA,SAAKyxB,KAAL,GAAa7/C,MAAM,CAAC6/C,KAApB;AAEA,SAAKgM,MAAL,GAAc7rD,MAAM,CAAC6rD,MAAP,CAAc16C,KAAd,EAAd;AAEA,WAAO,IAAP;AAEA;AAjBsE,CAAjD,CAAvB;AAqBA;;;;;AAKA,SAASuvG,kBAAT,CAA6Bj4H,IAA7B,EAAmCC,KAAnC,EAA0CC,GAA1C,EAA+CC,MAA/C,EAAuDohC,IAAvD,EAA6DC,GAA7D,EAAmE;AAElEyuB,EAAAA,MAAM,CAACr3D,IAAP,CAAa,IAAb;AAEA,OAAK8K,IAAL,GAAY,oBAAZ;AAEA,OAAK2sD,IAAL,GAAY,CAAZ;AACA,OAAKC,IAAL,GAAY,IAAZ;AAEA,OAAKtwD,IAAL,GAAcA,IAAI,KAAK1F,SAAX,GAAyB0F,IAAzB,GAAgC,CAAE,CAA9C;AACA,OAAKC,KAAL,GAAeA,KAAK,KAAK3F,SAAZ,GAA0B2F,KAA1B,GAAkC,CAA/C;AACA,OAAKC,GAAL,GAAaA,GAAG,KAAK5F,SAAV,GAAwB4F,GAAxB,GAA8B,CAAzC;AACA,OAAKC,MAAL,GAAgBA,MAAM,KAAK7F,SAAb,GAA2B6F,MAA3B,GAAoC,CAAE,CAApD;AAEA,OAAKohC,IAAL,GAAcA,IAAI,KAAKjnC,SAAX,GAAyBinC,IAAzB,GAAgC,GAA5C;AACA,OAAKC,GAAL,GAAaA,GAAG,KAAKlnC,SAAV,GAAwBknC,GAAxB,GAA8B,IAAzC;AAEA,OAAKivB,sBAAL;AAEA;;AAEDwnE,kBAAkB,CAAC5/H,SAAnB,GAA+BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe+9B,MAAM,CAAC53D,SAAtB,CAAf,EAAkD;AAEhFoC,EAAAA,WAAW,EAAEw9H,kBAFmE;AAIhF90B,EAAAA,oBAAoB,EAAE,IAJ0D;AAMhFx6E,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAmBoxB,SAAnB,EAA+B;AAEpCsnB,IAAAA,MAAM,CAAC53D,SAAP,CAAiBswB,IAAjB,CAAsB/vB,IAAtB,CAA4B,IAA5B,EAAkC2e,MAAlC,EAA0CoxB,SAA1C;AAEA,SAAK3oC,IAAL,GAAYuX,MAAM,CAACvX,IAAnB;AACA,SAAKC,KAAL,GAAasX,MAAM,CAACtX,KAApB;AACA,SAAKC,GAAL,GAAWqX,MAAM,CAACrX,GAAlB;AACA,SAAKC,MAAL,GAAcoX,MAAM,CAACpX,MAArB;AACA,SAAKohC,IAAL,GAAYhqB,MAAM,CAACgqB,IAAnB;AACA,SAAKC,GAAL,GAAWjqB,MAAM,CAACiqB,GAAlB;AAEA,SAAK6uB,IAAL,GAAY94C,MAAM,CAAC84C,IAAnB;AACA,SAAKC,IAAL,GAAY/4C,MAAM,CAAC+4C,IAAP,KAAgB,IAAhB,GAAuB,IAAvB,GAA8Br3D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBG,MAAM,CAAC+4C,IAA1B,CAA1C;AAEA,WAAO,IAAP;AAEA,GAtB+E;AAwBhFc,EAAAA,aAAa,EAAE,UAAWC,SAAX,EAAsBC,UAAtB,EAAkC1wD,CAAlC,EAAqCE,CAArC,EAAwCoC,KAAxC,EAA+CC,MAA/C,EAAwD;AAEtE,QAAK,KAAKmtD,IAAL,KAAc,IAAnB,EAA0B;AAEzB,WAAKA,IAAL,GAAY;AACXtD,QAAAA,OAAO,EAAE,IADE;AAEXqE,QAAAA,SAAS,EAAE,CAFA;AAGXC,QAAAA,UAAU,EAAE,CAHD;AAIXC,QAAAA,OAAO,EAAE,CAJE;AAKXC,QAAAA,OAAO,EAAE,CALE;AAMXtuD,QAAAA,KAAK,EAAE,CANI;AAOXC,QAAAA,MAAM,EAAE;AAPG,OAAZ;AAUA;;AAED,SAAKmtD,IAAL,CAAUtD,OAAV,GAAoB,IAApB;AACA,SAAKsD,IAAL,CAAUe,SAAV,GAAsBA,SAAtB;AACA,SAAKf,IAAL,CAAUgB,UAAV,GAAuBA,UAAvB;AACA,SAAKhB,IAAL,CAAUiB,OAAV,GAAoB3wD,CAApB;AACA,SAAK0vD,IAAL,CAAUkB,OAAV,GAAoB1wD,CAApB;AACA,SAAKwvD,IAAL,CAAUptD,KAAV,GAAkBA,KAAlB;AACA,SAAKotD,IAAL,CAAUntD,MAAV,GAAmBA,MAAnB;AAEA,SAAKstD,sBAAL;AAEA,GAlD+E;AAoDhFgB,EAAAA,eAAe,EAAE,YAAY;AAE5B,QAAK,KAAKnB,IAAL,KAAc,IAAnB,EAA0B;AAEzB,WAAKA,IAAL,CAAUtD,OAAV,GAAoB,KAApB;AAEA;;AAED,SAAKyD,sBAAL;AAEA,GA9D+E;AAgEhFA,EAAAA,sBAAsB,EAAE,YAAY;AAEnC,UAAMjmC,EAAE,GAAG,CAAE,KAAKvqB,KAAL,GAAa,KAAKD,IAApB,KAA+B,IAAI,KAAKqwD,IAAxC,CAAX;AACA,UAAM5lC,EAAE,GAAG,CAAE,KAAKvqB,GAAL,GAAW,KAAKC,MAAlB,KAA+B,IAAI,KAAKkwD,IAAxC,CAAX;AACA,UAAM7gC,EAAE,GAAG,CAAE,KAAKvvB,KAAL,GAAa,KAAKD,IAApB,IAA6B,CAAxC;AACA,UAAMyvB,EAAE,GAAG,CAAE,KAAKvvB,GAAL,GAAW,KAAKC,MAAlB,IAA6B,CAAxC;AAEA,QAAIH,IAAI,GAAGwvB,EAAE,GAAGhF,EAAhB;AACA,QAAIvqB,KAAK,GAAGuvB,EAAE,GAAGhF,EAAjB;AACA,QAAItqB,GAAG,GAAGuvB,EAAE,GAAGhF,EAAf;AACA,QAAItqB,MAAM,GAAGsvB,EAAE,GAAGhF,EAAlB;;AAEA,QAAK,KAAK6lC,IAAL,KAAc,IAAd,IAAsB,KAAKA,IAAL,CAAUtD,OAArC,EAA+C;AAE9C,YAAMkrE,MAAM,GAAG,CAAE,KAAKj4H,KAAL,GAAa,KAAKD,IAApB,IAA6B,KAAKswD,IAAL,CAAUe,SAAvC,GAAmD,KAAKhB,IAAvE;AACA,YAAM8nE,MAAM,GAAG,CAAE,KAAKj4H,GAAL,GAAW,KAAKC,MAAlB,IAA6B,KAAKmwD,IAAL,CAAUgB,UAAvC,GAAoD,KAAKjB,IAAxE;AAEArwD,MAAAA,IAAI,IAAIk4H,MAAM,GAAG,KAAK5nE,IAAL,CAAUiB,OAA3B;AACAtxD,MAAAA,KAAK,GAAGD,IAAI,GAAGk4H,MAAM,GAAG,KAAK5nE,IAAL,CAAUptD,KAAlC;AACAhD,MAAAA,GAAG,IAAIi4H,MAAM,GAAG,KAAK7nE,IAAL,CAAUkB,OAA1B;AACArxD,MAAAA,MAAM,GAAGD,GAAG,GAAGi4H,MAAM,GAAG,KAAK7nE,IAAL,CAAUntD,MAAlC;AAEA;;AAED,SAAK83B,gBAAL,CAAsBwG,gBAAtB,CAAwCzhC,IAAxC,EAA8CC,KAA9C,EAAqDC,GAArD,EAA0DC,MAA1D,EAAkE,KAAKohC,IAAvE,EAA6E,KAAKC,GAAlF;AAEA,SAAKrG,uBAAL,CAA6B9M,UAA7B,CAAyC,KAAK4M,gBAA9C;AAEA,GA5F+E;AA8FhF5I,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAG7E,QAAQ,CAACxrC,SAAT,CAAmBg6B,MAAnB,CAA0Bz5B,IAA1B,CAAgC,IAAhC,EAAsC05B,IAAtC,CAAb;AAEAoW,IAAAA,IAAI,CAAC1qC,MAAL,CAAYqyD,IAAZ,GAAmB,KAAKA,IAAxB;AACA3nB,IAAAA,IAAI,CAAC1qC,MAAL,CAAYgC,IAAZ,GAAmB,KAAKA,IAAxB;AACA0oC,IAAAA,IAAI,CAAC1qC,MAAL,CAAYiC,KAAZ,GAAoB,KAAKA,KAAzB;AACAyoC,IAAAA,IAAI,CAAC1qC,MAAL,CAAYkC,GAAZ,GAAkB,KAAKA,GAAvB;AACAwoC,IAAAA,IAAI,CAAC1qC,MAAL,CAAYmC,MAAZ,GAAqB,KAAKA,MAA1B;AACAuoC,IAAAA,IAAI,CAAC1qC,MAAL,CAAYujC,IAAZ,GAAmB,KAAKA,IAAxB;AACAmH,IAAAA,IAAI,CAAC1qC,MAAL,CAAYwjC,GAAZ,GAAkB,KAAKA,GAAvB;AAEA,QAAK,KAAK8uB,IAAL,KAAc,IAAnB,EAA0B5nB,IAAI,CAAC1qC,MAAL,CAAYsyD,IAAZ,GAAmBr3D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmB,KAAKk5C,IAAxB,CAAnB;AAE1B,WAAO5nB,IAAP;AAEA;AA9G+E,CAAlD,CAA/B;AAkHA;;;;AAIA,SAAS0vF,sBAAT,GAAkC;AAEjCtB,EAAAA,WAAW,CAACl+H,IAAZ,CAAkB,IAAlB,EAAwB,IAAIq/H,kBAAJ,CAAwB,CAAE,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAE,CAArC,EAAwC,GAAxC,EAA6C,GAA7C,CAAxB;AAEA;;AAEDG,sBAAsB,CAAC//H,SAAvB,GAAmCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe4kG,WAAW,CAACz+H,SAA3B,CAAf,EAAuD;AAEzFoC,EAAAA,WAAW,EAAE29H,sBAF4E;AAIzFC,EAAAA,wBAAwB,EAAE,IAJ+D;AAMzF9xC,EAAAA,cAAc,EAAE,UAAW1F,KAAX,EAAmB;AAElCi2C,IAAAA,WAAW,CAACz+H,SAAZ,CAAsBkuF,cAAtB,CAAqC3tF,IAArC,CAA2C,IAA3C,EAAiDioF,KAAjD;AAEA;AAVwF,CAAvD,CAAnC;AAcA;;;;;AAKA,SAASy3C,gBAAT,CAA2BthI,KAA3B,EAAkCsrF,SAAlC,EAA8C;AAE7Cs0C,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkB5B,KAAlB,EAAyBsrF,SAAzB;AAEA,OAAK5+E,IAAL,GAAY,kBAAZ;AAEA,OAAK3D,QAAL,CAAc4oB,IAAd,CAAoBkb,QAAQ,CAACE,SAA7B;AACA,OAAK3R,YAAL;AAEA,OAAK15B,MAAL,GAAc,IAAImrC,QAAJ,EAAd;AAEA,OAAKu/B,MAAL,GAAc,IAAIg1D,sBAAJ,EAAd;AAEA;;AAEDE,gBAAgB,CAACjgI,SAAjB,GAA6BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAE7EoC,EAAAA,WAAW,EAAE69H,gBAFgE;AAI7E31C,EAAAA,kBAAkB,EAAE,IAJyD;AAM7Eh6D,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBq/G,IAAAA,KAAK,CAACv+H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAK7e,MAAL,GAAc6e,MAAM,CAAC7e,MAAP,CAAcgwB,KAAd,EAAd;AAEA,SAAK06C,MAAL,GAAc7rD,MAAM,CAAC6rD,MAAP,CAAc16C,KAAd,EAAd;AAEA,WAAO,IAAP;AAEA;AAhB4E,CAAjD,CAA7B;AAoBA;;;;AAIA,SAAS6vG,YAAT,CAAuBvhI,KAAvB,EAA8BsrF,SAA9B,EAA0C;AAEzCs0C,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkB5B,KAAlB,EAAyBsrF,SAAzB;AAEA,OAAK5+E,IAAL,GAAY,cAAZ;AAEA,OAAK+gC,UAAL,GAAkBnqC,SAAlB;AAEA;;AAEDi+H,YAAY,CAAClgI,SAAb,GAAyBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAEzEoC,EAAAA,WAAW,EAAE89H,YAF4D;AAIzEh2C,EAAAA,cAAc,EAAE;AAJyD,CAAjD,CAAzB;AAQA;;;;AAIA,SAASi2C,aAAT,CAAwBxhI,KAAxB,EAA+BsrF,SAA/B,EAA0Cp/E,KAA1C,EAAiDC,MAAjD,EAA0D;AAEzDyzH,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkB5B,KAAlB,EAAyBsrF,SAAzB;AAEA,OAAK5+E,IAAL,GAAY,eAAZ;AAEA,OAAKR,KAAL,GAAeA,KAAK,KAAK5I,SAAZ,GAA0B4I,KAA1B,GAAkC,EAA/C;AACA,OAAKC,MAAL,GAAgBA,MAAM,KAAK7I,SAAb,GAA2B6I,MAA3B,GAAoC,EAAlD;AAEA;;AAEDq1H,aAAa,CAACngI,SAAd,GAA0BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAE1EoC,EAAAA,WAAW,EAAE+9H,aAF6D;AAI1Et1C,EAAAA,eAAe,EAAE,IAJyD;AAM1Ev6D,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBq/G,IAAAA,KAAK,CAACv+H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAKrU,KAAL,GAAaqU,MAAM,CAACrU,KAApB;AACA,SAAKC,MAAL,GAAcoU,MAAM,CAACpU,MAArB;AAEA,WAAO,IAAP;AAEA,GAfyE;AAiB1EkvB,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAGkuF,KAAK,CAACv+H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,EAAmC05B,IAAnC,CAAb;AAEAoW,IAAAA,IAAI,CAAC1qC,MAAL,CAAYkF,KAAZ,GAAoB,KAAKA,KAAzB;AACAwlC,IAAAA,IAAI,CAAC1qC,MAAL,CAAYmF,MAAZ,GAAqB,KAAKA,MAA1B;AAEA,WAAOulC,IAAP;AAEA;AA1ByE,CAAjD,CAA1B;AA8BA;;;;;;;;;;AAWA;;AAEA,SAAS+vF,mBAAT,GAA+B;AAE9B,OAAK/1C,YAAL,GAAoB,EAApB;;AAEA,OAAM,IAAInpF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,SAAKmpF,YAAL,CAAkBhgF,IAAlB,CAAwB,IAAIo3B,OAAJ,EAAxB;AAEA;AAED;;AAED7gC,MAAM,CAACme,MAAP,CAAeqhH,mBAAmB,CAACpgI,SAAnC,EAA8C;AAE7CqgI,EAAAA,qBAAqB,EAAE,IAFsB;AAI7C3wG,EAAAA,GAAG,EAAE,UAAW26D,YAAX,EAA0B;AAE9B,SAAM,IAAInpF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuBovB,IAAvB,CAA6B+5D,YAAY,CAAEnpF,CAAF,CAAzC;AAEA;;AAED,WAAO,IAAP;AAEA,GAd4C;AAgB7Co/H,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAM,IAAIp/H,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuBwuB,GAAvB,CAA4B,CAA5B,EAA+B,CAA/B,EAAkC,CAAlC;AAEA;;AAED,WAAO,IAAP;AAEA,GA1B4C;AA4B7C;AACA;AACA6wG,EAAAA,KAAK,EAAE,UAAW18F,MAAX,EAAmBxjC,MAAnB,EAA4B;AAElC;AAEA,UAAMkI,CAAC,GAAGs7B,MAAM,CAACt7B,CAAjB;AAAA,UAAoBE,CAAC,GAAGo7B,MAAM,CAACp7B,CAA/B;AAAA,UAAkCmyB,CAAC,GAAGiJ,MAAM,CAACjJ,CAA7C;AAEA,UAAM4lG,KAAK,GAAG,KAAKn2C,YAAnB,CANkC,CAQlC;;AACAhqF,IAAAA,MAAM,CAACiwB,IAAP,CAAakwG,KAAK,CAAE,CAAF,CAAlB,EAA0B1vG,cAA1B,CAA0C,QAA1C,EATkC,CAWlC;;AACAzwB,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAW/3H,CAA/C;AACApI,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAW5lG,CAA/C;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAWj4H,CAA/C,EAdkC,CAgBlC;;AACAlI,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAaj4H,CAAC,GAAGE,CAAjB,CAApC;AACApI,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa/3H,CAAC,GAAGmyB,CAAjB,CAApC;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAa,MAAM5lG,CAAN,GAAUA,CAAV,GAAc,GAA3B,CAApC;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAaj4H,CAAC,GAAGqyB,CAAjB,CAApC;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAaj4H,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAzB,CAApC;AAEA,WAAOpI,MAAP;AAEA,GAvD4C;AAyD7C;AACA;AACA;AACAogI,EAAAA,eAAe,EAAE,UAAW58F,MAAX,EAAmBxjC,MAAnB,EAA4B;AAE5C;AAEA,UAAMkI,CAAC,GAAGs7B,MAAM,CAACt7B,CAAjB;AAAA,UAAoBE,CAAC,GAAGo7B,MAAM,CAACp7B,CAA/B;AAAA,UAAkCmyB,CAAC,GAAGiJ,MAAM,CAACjJ,CAA7C;AAEA,UAAM4lG,KAAK,GAAG,KAAKn2C,YAAnB,CAN4C,CAQ5C;;AACAhqF,IAAAA,MAAM,CAACiwB,IAAP,CAAakwG,KAAK,CAAE,CAAF,CAAlB,EAA0B1vG,cAA1B,CAA0C,QAA1C,EAT4C,CASU;AAEtD;;AACAzwB,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB/3H,CAArD,EAZ4C,CAYc;;AAC1DpI,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB5lG,CAArD;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiBj4H,CAArD,EAd4C,CAgB5C;;AACAlI,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiBj4H,CAAjB,GAAqBE,CAAzD,EAjB4C,CAiBkB;;AAC9DpI,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiB/3H,CAAjB,GAAqBmyB,CAAzD;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,WAAW5lG,CAAX,GAAeA,CAAf,GAAmB,QAAvD,EAnB4C,CAmBuB;;AACnEv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,MAAM,QAAN,GAAiBj4H,CAAjB,GAAqBqyB,CAAzD;AACAv6B,IAAAA,MAAM,CAACowB,eAAP,CAAwB+vG,KAAK,CAAE,CAAF,CAA7B,EAAoC,YAAaj4H,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAzB,CAApC,EArB4C,CAqBwB;;AAEpE,WAAOpI,MAAP;AAEA,GArF4C;AAuF7CwY,EAAAA,GAAG,EAAE,UAAWuxE,EAAX,EAAgB;AAEpB,SAAM,IAAIlpF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuB2X,GAAvB,CAA4BuxE,EAAE,CAACC,YAAH,CAAiBnpF,CAAjB,CAA5B;AAEA;;AAED,WAAO,IAAP;AAEA,GAjG4C;AAmG7Cw/H,EAAAA,WAAW,EAAE,UAAWt2C,EAAX,EAAe5qF,CAAf,EAAmB;AAE/B,SAAM,IAAI0B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuBuvB,eAAvB,CAAwC25D,EAAE,CAACC,YAAH,CAAiBnpF,CAAjB,CAAxC,EAA8D1B,CAA9D;AAEA;;AAED,WAAO,IAAP;AAEA,GA7G4C;AA+G7C63B,EAAAA,KAAK,EAAE,UAAW73B,CAAX,EAAe;AAErB,SAAM,IAAI0B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuB4vB,cAAvB,CAAuCtxB,CAAvC;AAEA;;AAED,WAAO,IAAP;AAEA,GAzH4C;AA2H7CouB,EAAAA,IAAI,EAAE,UAAWw8D,EAAX,EAAe73D,KAAf,EAAuB;AAE5B,SAAM,IAAIrxB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,WAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuB0sB,IAAvB,CAA6Bw8D,EAAE,CAACC,YAAH,CAAiBnpF,CAAjB,CAA7B,EAAmDqxB,KAAnD;AAEA;;AAED,WAAO,IAAP;AAEA,GArI4C;AAuI7CI,EAAAA,MAAM,EAAE,UAAWy3D,EAAX,EAAgB;AAEvB,SAAM,IAAIlpF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,UAAK,CAAE,KAAKmpF,YAAL,CAAmBnpF,CAAnB,EAAuByxB,MAAvB,CAA+By3D,EAAE,CAACC,YAAH,CAAiBnpF,CAAjB,CAA/B,CAAP,EAA+D;AAE9D,eAAO,KAAP;AAEA;AAED;;AAED,WAAO,IAAP;AAEA,GArJ4C;AAuJ7CovB,EAAAA,IAAI,EAAE,UAAW85D,EAAX,EAAgB;AAErB,WAAO,KAAK16D,GAAL,CAAU06D,EAAE,CAACC,YAAb,CAAP;AAEA,GA3J4C;AA6J7Ch6D,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAjK4C;AAmK7CsC,EAAAA,SAAS,EAAE,UAAWvG,KAAX,EAAkBrhB,MAAlB,EAA2B;AAErC,QAAKA,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,UAAMq/E,YAAY,GAAG,KAAKA,YAA1B;;AAEA,SAAM,IAAInpF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9BmpF,MAAAA,YAAY,CAAEnpF,CAAF,CAAZ,CAAkB0xB,SAAlB,CAA6BvG,KAA7B,EAAoCrhB,MAAM,GAAK9J,CAAC,GAAG,CAAnD;AAEA;;AAED,WAAO,IAAP;AAEA,GAjL4C;AAmL7Cc,EAAAA,OAAO,EAAE,UAAWqqB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEnC,QAAKqhB,KAAK,KAAKpqB,SAAf,EAA2BoqB,KAAK,GAAG,EAAR;AAC3B,QAAKrhB,MAAM,KAAK/I,SAAhB,EAA4B+I,MAAM,GAAG,CAAT;AAE5B,UAAMq/E,YAAY,GAAG,KAAKA,YAA1B;;AAEA,SAAM,IAAInpF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9BmpF,MAAAA,YAAY,CAAEnpF,CAAF,CAAZ,CAAkBc,OAAlB,CAA2BqqB,KAA3B,EAAkCrhB,MAAM,GAAK9J,CAAC,GAAG,CAAjD;AAEA;;AAED,WAAOmrB,KAAP;AAEA;AAlM4C,CAA9C;AAsMAzrB,MAAM,CAACme,MAAP,CAAeqhH,mBAAf,EAAoC;AAEnC;AACA;AACAO,EAAAA,UAAU,EAAE,UAAW98F,MAAX,EAAmB+8F,OAAnB,EAA6B;AAExC;AAEA,UAAMr4H,CAAC,GAAGs7B,MAAM,CAACt7B,CAAjB;AAAA,UAAoBE,CAAC,GAAGo7B,MAAM,CAACp7B,CAA/B;AAAA,UAAkCmyB,CAAC,GAAGiJ,MAAM,CAACjJ,CAA7C,CAJwC,CAMxC;;AACAgmG,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,QAAf,CAPwC,CASxC;;AACAA,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,WAAWn4H,CAA1B;AACAm4H,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,WAAWhmG,CAA1B;AACAgmG,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,WAAWr4H,CAA1B,CAZwC,CAcxC;;AACAq4H,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,WAAWr4H,CAAX,GAAeE,CAA9B;AACAm4H,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,WAAWn4H,CAAX,GAAemyB,CAA9B;AACAgmG,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,YAAa,IAAIhmG,CAAJ,GAAQA,CAAR,GAAY,CAAzB,CAAf;AACAgmG,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,WAAWr4H,CAAX,GAAeqyB,CAA9B;AACAgmG,IAAAA,OAAO,CAAE,CAAF,CAAP,GAAe,YAAar4H,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAzB,CAAf;AAEA;AAzBkC,CAApC;AA6BA;;;;;;AAMA,SAASo4H,UAAT,CAAqBz2C,EAArB,EAAyBH,SAAzB,EAAqC;AAEpCs0C,EAAAA,KAAK,CAACh+H,IAAN,CAAY,IAAZ,EAAkB0B,SAAlB,EAA6BgoF,SAA7B;AAEA,OAAK5+E,IAAL,GAAY,YAAZ;AAEA,OAAK++E,EAAL,GAAYA,EAAE,KAAKnoF,SAAT,GAAuBmoF,EAAvB,GAA4B,IAAIg2C,mBAAJ,EAAtC;AAEA;;AAEDS,UAAU,CAAC7gI,SAAX,GAAuBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe0kG,KAAK,CAACv+H,SAArB,CAAf,EAAiD;AAEvEoC,EAAAA,WAAW,EAAEy+H,UAF0D;AAIvE12C,EAAAA,YAAY,EAAE,IAJyD;AAMvE75D,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBq/G,IAAAA,KAAK,CAACv+H,SAAN,CAAgBswB,IAAhB,CAAqB/vB,IAArB,CAA2B,IAA3B,EAAiC2e,MAAjC;AAEA,SAAKkrE,EAAL,CAAQ95D,IAAR,CAAcpR,MAAM,CAACkrE,EAArB;AAEA,WAAO,IAAP;AAEA,GAdsE;AAgBvEsuC,EAAAA,QAAQ,EAAE,UAAWnL,IAAX,EAAkB;AAE3B,SAAKtjC,SAAL,GAAiBsjC,IAAI,CAACtjC,SAAtB,CAF2B,CAEM;;AACjC,SAAKG,EAAL,CAAQx3D,SAAR,CAAmB26F,IAAI,CAACnjC,EAAxB;AAEA,WAAO,IAAP;AAEA,GAvBsE;AAyBvEpwD,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAGkuF,KAAK,CAACv+H,SAAN,CAAgBg6B,MAAhB,CAAuBz5B,IAAvB,CAA6B,IAA7B,EAAmC05B,IAAnC,CAAb;AAEAoW,IAAAA,IAAI,CAAC1qC,MAAL,CAAYykF,EAAZ,GAAiB,KAAKA,EAAL,CAAQpoF,OAAR,EAAjB;AAEA,WAAOquC,IAAP;AAEA;AAjCsE,CAAjD,CAAvB;AAqCA;;;;AAIA,SAASywF,cAAT,CAAyBzN,OAAzB,EAAmC;AAElCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA,OAAKl5F,QAAL,GAAgB,EAAhB;AAEA;;AAED2mG,cAAc,CAAC9gI,SAAf,GAA2BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE5EoC,EAAAA,WAAW,EAAE0+H,cAF+D;AAI5ErrH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAM0xH,MAAM,GAAG,IAAImB,UAAJ,CAAgB7yH,KAAK,CAACgyH,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAACe,OAAP,CAAgBzyH,KAAK,CAACs6E,IAAtB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAWpC,IAAX,EAAkB;AAEnC,UAAI;AAEHgiH,QAAAA,MAAM,CAAE1wH,KAAK,CAAC8V,KAAN,CAAaD,IAAI,CAACC,KAAL,CAAYpH,IAAZ,CAAb,CAAF,CAAN;AAEA,OAJD,CAIE,OAAQtJ,CAAR,EAAY;AAEb,YAAKwrH,OAAL,EAAe;AAEdA,UAAAA,OAAO,CAAExrH,CAAF,CAAP;AAEA,SAJD,MAIO;AAENkpB,UAAAA,OAAO,CAACyD,KAAR,CAAe3sB,CAAf;AAEA;;AAEDpF,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AAEA;AAED,KAtBD,EAsBG6/G,UAtBH,EAsBeC,OAtBf;AAwBA,GAlC2E;AAoC5E96G,EAAAA,KAAK,EAAE,UAAWo2G,IAAX,EAAkB;AAExB,UAAMpzF,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,aAAS4mG,UAAT,CAAqBvqH,IAArB,EAA4B;AAE3B,UAAK2jB,QAAQ,CAAE3jB,IAAF,CAAR,KAAqBvU,SAA1B,EAAsC;AAErC0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,yCAAd,EAAyDpZ,IAAzD;AAEA;;AAED,aAAO2jB,QAAQ,CAAE3jB,IAAF,CAAf;AAEA;;AAED,UAAMw5B,QAAQ,GAAG,IAAI42E,SAAS,CAAE2G,IAAI,CAACliH,IAAP,CAAb,EAAjB;AAEA,QAAKkiH,IAAI,CAACtgG,IAAL,KAAchrB,SAAnB,EAA+B+tC,QAAQ,CAAC/iB,IAAT,GAAgBsgG,IAAI,CAACtgG,IAArB;AAC/B,QAAKsgG,IAAI,CAAC/2G,IAAL,KAAcvU,SAAnB,EAA+B+tC,QAAQ,CAACx5B,IAAT,GAAgB+2G,IAAI,CAAC/2G,IAArB;AAC/B,QAAK+2G,IAAI,CAAC5uH,KAAL,KAAesD,SAApB,EAAgC+tC,QAAQ,CAACrxC,KAAT,CAAes+C,MAAf,CAAuBswE,IAAI,CAAC5uH,KAA5B;AAChC,QAAK4uH,IAAI,CAACvrE,SAAL,KAAmB//C,SAAxB,EAAoC+tC,QAAQ,CAACgS,SAAT,GAAqBurE,IAAI,CAACvrE,SAA1B;AACpC,QAAKurE,IAAI,CAACtrE,SAAL,KAAmBhgD,SAAxB,EAAoC+tC,QAAQ,CAACiS,SAAT,GAAqBsrE,IAAI,CAACtrE,SAA1B;AACpC,QAAKsrE,IAAI,CAACrrE,KAAL,KAAejgD,SAApB,EAAgC+tC,QAAQ,CAACkS,KAAT,GAAiB,IAAI39C,KAAJ,GAAY04C,MAAZ,CAAoBswE,IAAI,CAACrrE,KAAzB,CAAjB;AAChC,QAAKqrE,IAAI,CAACprE,QAAL,KAAkBlgD,SAAvB,EAAmC+tC,QAAQ,CAACmS,QAAT,CAAkBlF,MAAlB,CAA0BswE,IAAI,CAACprE,QAA/B;AACnC,QAAKorE,IAAI,CAAClrE,QAAL,KAAkBpgD,SAAvB,EAAmC+tC,QAAQ,CAACqS,QAAT,CAAkBpF,MAAlB,CAA0BswE,IAAI,CAAClrE,QAA/B;AACnC,QAAKkrE,IAAI,CAACjrE,SAAL,KAAmBrgD,SAAxB,EAAoC+tC,QAAQ,CAACsS,SAAT,GAAqBirE,IAAI,CAACjrE,SAA1B;AACpC,QAAKirE,IAAI,CAAChrE,SAAL,KAAmBtgD,SAAxB,EAAoC+tC,QAAQ,CAACuS,SAAT,GAAqBgrE,IAAI,CAAChrE,SAA1B;AACpC,QAAKgrE,IAAI,CAAC/qE,kBAAL,KAA4BvgD,SAAjC,EAA6C+tC,QAAQ,CAACwS,kBAAT,GAA8B+qE,IAAI,CAAC/qE,kBAAnC;AAC7C,QAAK+qE,IAAI,CAAC98E,GAAL,KAAaxuC,SAAlB,EAA8B+tC,QAAQ,CAACS,GAAT,GAAe88E,IAAI,CAAC98E,GAApB;AAC9B,QAAK88E,IAAI,CAAC7tE,WAAL,KAAqBz9C,SAA1B,EAAsC+tC,QAAQ,CAAC0P,WAAT,GAAuB6tE,IAAI,CAAC7tE,WAA5B;AACtC,QAAK6tE,IAAI,CAAC/tE,QAAL,KAAkBv9C,SAAvB,EAAmC+tC,QAAQ,CAACwP,QAAT,GAAoB+tE,IAAI,CAAC/tE,QAAzB;AACnC,QAAK+tE,IAAI,CAACtpE,OAAL,KAAiBhiD,SAAtB,EAAkC+tC,QAAQ,CAACiU,OAAT,GAAmBspE,IAAI,CAACtpE,OAAxB;AAClC,QAAKspE,IAAI,CAAC9tE,IAAL,KAAcx9C,SAAnB,EAA+B+tC,QAAQ,CAACyP,IAAT,GAAgB8tE,IAAI,CAAC9tE,IAArB;AAC/B,QAAK8tE,IAAI,CAAC35G,OAAL,KAAiB3R,SAAtB,EAAkC+tC,QAAQ,CAACp8B,OAAT,GAAmB25G,IAAI,CAAC35G,OAAxB;AAClC,QAAK25G,IAAI,CAAC5tE,WAAL,KAAqB19C,SAA1B,EAAsC+tC,QAAQ,CAAC2P,WAAT,GAAuB4tE,IAAI,CAAC5tE,WAA5B;AACtC,QAAK4tE,IAAI,CAAChsE,SAAL,KAAmBt/C,SAAxB,EAAoC+tC,QAAQ,CAACuR,SAAT,GAAqBgsE,IAAI,CAAChsE,SAA1B;AACpC,QAAKgsE,IAAI,CAACptE,SAAL,KAAmBl+C,SAAxB,EAAoC+tC,QAAQ,CAACmQ,SAAT,GAAqBotE,IAAI,CAACptE,SAA1B;AACpC,QAAKotE,IAAI,CAACntE,UAAL,KAAoBn+C,SAAzB,EAAqC+tC,QAAQ,CAACoQ,UAAT,GAAsBmtE,IAAI,CAACntE,UAA3B;AACrC,QAAKmtE,IAAI,CAACtsE,UAAL,KAAoBh/C,SAAzB,EAAqC+tC,QAAQ,CAACiR,UAAT,GAAsBssE,IAAI,CAACtsE,UAA3B;AAErC,QAAKssE,IAAI,CAAC3sE,YAAL,KAAsB3+C,SAA3B,EAAuC+tC,QAAQ,CAAC4Q,YAAT,GAAwB2sE,IAAI,CAAC3sE,YAA7B;AACvC,QAAK2sE,IAAI,CAACltE,gBAAL,KAA0Bp+C,SAA/B,EAA2C+tC,QAAQ,CAACqQ,gBAAT,GAA4BktE,IAAI,CAACltE,gBAAjC;AAC3C,QAAKktE,IAAI,CAACjtE,WAAL,KAAqBr+C,SAA1B,EAAsC+tC,QAAQ,CAACsQ,WAAT,GAAuBitE,IAAI,CAACjtE,WAA5B;AACtC,QAAKitE,IAAI,CAAChtE,UAAL,KAAoBt+C,SAAzB,EAAqC+tC,QAAQ,CAACuQ,UAAT,GAAsBgtE,IAAI,CAAChtE,UAA3B;AACrC,QAAKgtE,IAAI,CAAC/sE,eAAL,KAAyBv+C,SAA9B,EAA0C+tC,QAAQ,CAACwQ,eAAT,GAA2B+sE,IAAI,CAAC/sE,eAAhC;AAC1C,QAAK+sE,IAAI,CAAC9sE,WAAL,KAAqBx+C,SAA1B,EAAsC+tC,QAAQ,CAACyQ,WAAT,GAAuB8sE,IAAI,CAAC9sE,WAA5B;AACtC,QAAK8sE,IAAI,CAAC7sE,YAAL,KAAsBz+C,SAA3B,EAAuC+tC,QAAQ,CAAC0Q,YAAT,GAAwB6sE,IAAI,CAAC7sE,YAA7B;AACvC,QAAK6sE,IAAI,CAAC5sE,YAAL,KAAsB1+C,SAA3B,EAAuC+tC,QAAQ,CAAC2Q,YAAT,GAAwB4sE,IAAI,CAAC5sE,YAA7B;AAEvC,QAAK4sE,IAAI,CAAC/oE,SAAL,KAAmBviD,SAAxB,EAAoC+tC,QAAQ,CAACwU,SAAT,GAAqB+oE,IAAI,CAAC/oE,SAA1B;AACpC,QAAK+oE,IAAI,CAAC9oE,kBAAL,KAA4BxiD,SAAjC,EAA6C+tC,QAAQ,CAACyU,kBAAT,GAA8B8oE,IAAI,CAAC9oE,kBAAnC;AAC7C,QAAK8oE,IAAI,CAAC7oE,gBAAL,KAA0BziD,SAA/B,EAA2C+tC,QAAQ,CAAC0U,gBAAT,GAA4B6oE,IAAI,CAAC7oE,gBAAjC;AAC3C,QAAK6oE,IAAI,CAAC5oE,iBAAL,KAA2B1iD,SAAhC,EAA4C+tC,QAAQ,CAAC2U,iBAAT,GAA6B4oE,IAAI,CAAC5oE,iBAAlC;AAE5C,QAAK4oE,IAAI,CAACr2F,QAAL,KAAkBj1B,SAAvB,EAAmC+tC,QAAQ,CAAC9Y,QAAT,GAAoBq2F,IAAI,CAACr2F,QAAzB;AAEnC,QAAKq2F,IAAI,CAAClpE,SAAL,KAAmB,CAAxB,EAA4BrU,QAAQ,CAACqU,SAAT,GAAqBkpE,IAAI,CAAClpE,SAA1B;AAC5B,QAAKkpE,IAAI,CAACjpE,QAAL,KAAkBriD,SAAvB,EAAmC+tC,QAAQ,CAACsU,QAAT,GAAoBipE,IAAI,CAACjpE,QAAzB;AACnC,QAAKipE,IAAI,CAAChpE,OAAL,KAAiBtiD,SAAtB,EAAkC+tC,QAAQ,CAACuU,OAAT,GAAmBgpE,IAAI,CAAChpE,OAAxB;AAClC,QAAKgpE,IAAI,CAACl2F,KAAL,KAAep1B,SAApB,EAAgC+tC,QAAQ,CAAC3Y,KAAT,GAAiBk2F,IAAI,CAACl2F,KAAtB;AAEhC,QAAKk2F,IAAI,CAACpsE,aAAL,KAAuBl/C,SAA5B,EAAwC+tC,QAAQ,CAACmR,aAAT,GAAyBosE,IAAI,CAACpsE,aAA9B;AACxC,QAAKosE,IAAI,CAACnsE,mBAAL,KAA6Bn/C,SAAlC,EAA8C+tC,QAAQ,CAACoR,mBAAT,GAA+BmsE,IAAI,CAACnsE,mBAApC;AAC9C,QAAKmsE,IAAI,CAAClsE,kBAAL,KAA4Bp/C,SAAjC,EAA6C+tC,QAAQ,CAACqR,kBAAT,GAA8BksE,IAAI,CAAClsE,kBAAnC;AAE7C,QAAKksE,IAAI,CAACzoE,QAAL,KAAkB7iD,SAAvB,EAAmC+tC,QAAQ,CAAC8U,QAAT,GAAoByoE,IAAI,CAACzoE,QAAzB;AACnC,QAAKyoE,IAAI,CAAC3oE,YAAL,KAAsB3iD,SAA3B,EAAuC+tC,QAAQ,CAAC4U,YAAT,GAAwB2oE,IAAI,CAAC3oE,YAA7B;AACvC,QAAK2oE,IAAI,CAAC1oE,YAAL,KAAsB5iD,SAA3B,EAAuC+tC,QAAQ,CAAC6U,YAAT,GAAwB0oE,IAAI,CAAC1oE,YAA7B;AACvC,QAAK0oE,IAAI,CAACjsE,SAAL,KAAmBr/C,SAAxB,EAAoC+tC,QAAQ,CAACsR,SAAT,GAAqBisE,IAAI,CAACjsE,SAA1B;AAEpC,QAAKisE,IAAI,CAACxrC,cAAL,KAAwB9/E,SAA7B,EAAyC+tC,QAAQ,CAAC+xC,cAAT,GAA0BwrC,IAAI,CAACxrC,cAA/B;AAEzC,QAAKwrC,IAAI,CAACphF,OAAL,KAAiBlqC,SAAtB,EAAkC+tC,QAAQ,CAAC7D,OAAT,GAAmBohF,IAAI,CAACphF,OAAxB;AAElC,QAAKohF,IAAI,CAAC9rE,UAAL,KAAoBx/C,SAAzB,EAAqC+tC,QAAQ,CAACyR,UAAT,GAAsB8rE,IAAI,CAAC9rE,UAA3B;AAErC,QAAK8rE,IAAI,CAAC/gF,QAAL,KAAkBvqC,SAAvB,EAAmC+tC,QAAQ,CAACxD,QAAT,GAAoB+gF,IAAI,CAAC/gF,QAAzB;;AAEnC,QAAK+gF,IAAI,CAACluE,YAAL,KAAsBp9C,SAA3B,EAAuC;AAEtC,UAAK,OAAOsrH,IAAI,CAACluE,YAAZ,KAA6B,QAAlC,EAA6C;AAE5CrP,QAAAA,QAAQ,CAACqP,YAAT,GAA0BkuE,IAAI,CAACluE,YAAL,GAAoB,CAAtB,GAA4B,IAA5B,GAAmC,KAA3D;AAEA,OAJD,MAIO;AAENrP,QAAAA,QAAQ,CAACqP,YAAT,GAAwBkuE,IAAI,CAACluE,YAA7B;AAEA;AAED,KA3FuB,CA6FxB;;;AAEA,QAAKkuE,IAAI,CAACh3D,QAAL,KAAkBt0D,SAAvB,EAAmC;AAElC,WAAM,MAAMuU,IAAZ,IAAoB+2G,IAAI,CAACh3D,QAAzB,EAAoC;AAEnC,cAAMoB,OAAO,GAAG41D,IAAI,CAACh3D,QAAL,CAAe//C,IAAf,CAAhB;AAEAw5B,QAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,IAA4B,EAA5B;;AAEA,gBAASmhD,OAAO,CAACtsD,IAAjB;AAEC,eAAK,GAAL;AACC2kC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkCy8H,UAAU,CAAEppE,OAAO,CAACrzD,KAAV,CAA5C;AACA;;AAED,eAAK,GAAL;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkC,IAAIC,KAAJ,GAAY04C,MAAZ,CAAoB0a,OAAO,CAACrzD,KAA5B,CAAlC;AACA;;AAED,eAAK,IAAL;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkC,IAAIurB,OAAJ,GAAc+C,SAAd,CAAyB+kC,OAAO,CAACrzD,KAAjC,CAAlC;AACA;;AAED,eAAK,IAAL;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkC,IAAIm9B,OAAJ,GAAc7O,SAAd,CAAyB+kC,OAAO,CAACrzD,KAAjC,CAAlC;AACA;;AAED,eAAK,IAAL;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkC,IAAIq2B,OAAJ,GAAc/H,SAAd,CAAyB+kC,OAAO,CAACrzD,KAAjC,CAAlC;AACA;;AAED,eAAK,IAAL;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkC,IAAI6uB,OAAJ,GAAcP,SAAd,CAAyB+kC,OAAO,CAACrzD,KAAjC,CAAlC;;AAED,eAAK,IAAL;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkC,IAAIsgC,OAAJ,GAAchS,SAAd,CAAyB+kC,OAAO,CAACrzD,KAAjC,CAAlC;AACA;;AAED;AACC0rC,YAAAA,QAAQ,CAACumB,QAAT,CAAmB//C,IAAnB,EAA0BlS,KAA1B,GAAkCqzD,OAAO,CAACrzD,KAA1C;AA9BF;AAkCA;AAED;;AAED,QAAKipH,IAAI,CAAC12D,OAAL,KAAiB50D,SAAtB,EAAkC+tC,QAAQ,CAAC6mB,OAAT,GAAmB02D,IAAI,CAAC12D,OAAxB;AAClC,QAAK02D,IAAI,CAACz2D,YAAL,KAAsB70D,SAA3B,EAAuC+tC,QAAQ,CAAC8mB,YAAT,GAAwBy2D,IAAI,CAACz2D,YAA7B;AACvC,QAAKy2D,IAAI,CAACx2D,cAAL,KAAwB90D,SAA7B,EAAyC+tC,QAAQ,CAAC+mB,cAAT,GAA0Bw2D,IAAI,CAACx2D,cAA/B;;AAEzC,QAAKw2D,IAAI,CAACr2D,UAAL,KAAoBj1D,SAAzB,EAAqC;AAEpC,WAAM,MAAMpB,GAAZ,IAAmB0sH,IAAI,CAACr2D,UAAxB,EAAqC;AAEpClnB,QAAAA,QAAQ,CAACknB,UAAT,CAAqBr2D,GAArB,IAA6B0sH,IAAI,CAACr2D,UAAL,CAAiBr2D,GAAjB,CAA7B;AAEA;AAED,KAzJuB,CA2JxB;;;AAEA,QAAK0sH,IAAI,CAACyT,OAAL,KAAiB/+H,SAAtB,EAAkC+tC,QAAQ,CAAC0P,WAAT,GAAuB6tE,IAAI,CAACyT,OAAL,KAAiB,CAAxC,CA7JV,CA6JqD;AAE7E;;AAEA,QAAKzT,IAAI,CAACz6E,IAAL,KAAc7wC,SAAnB,EAA+B+tC,QAAQ,CAAC8C,IAAT,GAAgBy6E,IAAI,CAACz6E,IAArB;AAC/B,QAAKy6E,IAAI,CAACnpE,eAAL,KAAyBniD,SAA9B,EAA0C+tC,QAAQ,CAACoU,eAAT,GAA2BmpE,IAAI,CAACnpE,eAAhC,CAlKlB,CAoKxB;;AAEA,QAAKmpE,IAAI,CAACnhH,GAAL,KAAanK,SAAlB,EAA8B+tC,QAAQ,CAAC5jC,GAAT,GAAe20H,UAAU,CAAExT,IAAI,CAACnhH,GAAP,CAAzB;AAC9B,QAAKmhH,IAAI,CAAC1qE,MAAL,KAAgB5gD,SAArB,EAAiC+tC,QAAQ,CAAC6S,MAAT,GAAkBk+E,UAAU,CAAExT,IAAI,CAAC1qE,MAAP,CAA5B;AAEjC,QAAK0qE,IAAI,CAACzqE,QAAL,KAAkB7gD,SAAvB,EAAmC+tC,QAAQ,CAAC8S,QAAT,GAAoBi+E,UAAU,CAAExT,IAAI,CAACzqE,QAAP,CAA9B;AAEnC,QAAKyqE,IAAI,CAACrqE,OAAL,KAAiBjhD,SAAtB,EAAkC+tC,QAAQ,CAACkT,OAAT,GAAmB69E,UAAU,CAAExT,IAAI,CAACrqE,OAAP,CAA7B;AAClC,QAAKqqE,IAAI,CAACpqE,SAAL,KAAmBlhD,SAAxB,EAAoC+tC,QAAQ,CAACmT,SAAT,GAAqBoqE,IAAI,CAACpqE,SAA1B;AAEpC,QAAKoqE,IAAI,CAACnqE,SAAL,KAAmBnhD,SAAxB,EAAoC+tC,QAAQ,CAACoT,SAAT,GAAqB29E,UAAU,CAAExT,IAAI,CAACnqE,SAAP,CAA/B;AACpC,QAAKmqE,IAAI,CAAClqE,aAAL,KAAuBphD,SAA5B,EAAwC+tC,QAAQ,CAACqT,aAAT,GAAyBkqE,IAAI,CAAClqE,aAA9B;;AACxC,QAAKkqE,IAAI,CAACjqE,WAAL,KAAqBrhD,SAA1B,EAAsC;AAErC,UAAIqhD,WAAW,GAAGiqE,IAAI,CAACjqE,WAAvB;;AAEA,UAAKvjD,KAAK,CAACoC,OAAN,CAAemhD,WAAf,MAAiC,KAAtC,EAA8C;AAE7C;AAEAA,QAAAA,WAAW,GAAG,CAAEA,WAAF,EAAeA,WAAf,CAAd;AAEA;;AAEDtT,MAAAA,QAAQ,CAACsT,WAAT,GAAuB,IAAIzzB,OAAJ,GAAc+C,SAAd,CAAyB0wB,WAAzB,CAAvB;AAEA;;AAED,QAAKiqE,IAAI,CAAChqE,eAAL,KAAyBthD,SAA9B,EAA0C+tC,QAAQ,CAACuT,eAAT,GAA2Bw9E,UAAU,CAAExT,IAAI,CAAChqE,eAAP,CAArC;AAC1C,QAAKgqE,IAAI,CAAC/pE,iBAAL,KAA2BvhD,SAAhC,EAA4C+tC,QAAQ,CAACwT,iBAAT,GAA6B+pE,IAAI,CAAC/pE,iBAAlC;AAC5C,QAAK+pE,IAAI,CAAC9pE,gBAAL,KAA0BxhD,SAA/B,EAA2C+tC,QAAQ,CAACyT,gBAAT,GAA4B8pE,IAAI,CAAC9pE,gBAAjC;AAE3C,QAAK8pE,IAAI,CAAC7pE,YAAL,KAAsBzhD,SAA3B,EAAuC+tC,QAAQ,CAAC0T,YAAT,GAAwBq9E,UAAU,CAAExT,IAAI,CAAC7pE,YAAP,CAAlC;AACvC,QAAK6pE,IAAI,CAAC5pE,YAAL,KAAsB1hD,SAA3B,EAAuC+tC,QAAQ,CAAC2T,YAAT,GAAwBo9E,UAAU,CAAExT,IAAI,CAAC5pE,YAAP,CAAlC;AAEvC,QAAK4pE,IAAI,CAAC3pE,WAAL,KAAqB3hD,SAA1B,EAAsC+tC,QAAQ,CAAC4T,WAAT,GAAuBm9E,UAAU,CAAExT,IAAI,CAAC3pE,WAAP,CAAjC;AACtC,QAAK2pE,IAAI,CAACnrE,iBAAL,KAA2BngD,SAAhC,EAA4C+tC,QAAQ,CAACoS,iBAAT,GAA6BmrE,IAAI,CAACnrE,iBAAlC;AAE5C,QAAKmrE,IAAI,CAAC1pE,WAAL,KAAqB5hD,SAA1B,EAAsC+tC,QAAQ,CAAC6T,WAAT,GAAuBk9E,UAAU,CAAExT,IAAI,CAAC1pE,WAAP,CAAjC;AAEtC,QAAK0pE,IAAI,CAACzpE,MAAL,KAAgB7hD,SAArB,EAAiC+tC,QAAQ,CAAC8T,MAAT,GAAkBi9E,UAAU,CAAExT,IAAI,CAACzpE,MAAP,CAA5B;AACjC,QAAKypE,IAAI,CAACrpE,eAAL,KAAyBjiD,SAA9B,EAA0C+tC,QAAQ,CAACkU,eAAT,GAA2BqpE,IAAI,CAACrpE,eAAhC;AAE1C,QAAKqpE,IAAI,CAACxpE,YAAL,KAAsB9hD,SAA3B,EAAuC+tC,QAAQ,CAAC+T,YAAT,GAAwBwpE,IAAI,CAACxpE,YAA7B;AACvC,QAAKwpE,IAAI,CAACvpE,eAAL,KAAyB/hD,SAA9B,EAA0C+tC,QAAQ,CAACgU,eAAT,GAA2BupE,IAAI,CAACvpE,eAAhC;AAE1C,QAAKupE,IAAI,CAACxqE,QAAL,KAAkB9gD,SAAvB,EAAmC+tC,QAAQ,CAAC+S,QAAT,GAAoBg+E,UAAU,CAAExT,IAAI,CAACxqE,QAAP,CAA9B;AACnC,QAAKwqE,IAAI,CAACroE,iBAAL,KAA2BjjD,SAAhC,EAA4C+tC,QAAQ,CAACkV,iBAAT,GAA6BqoE,IAAI,CAACroE,iBAAlC;AAE5C,QAAKqoE,IAAI,CAACvqE,KAAL,KAAe/gD,SAApB,EAAgC+tC,QAAQ,CAACgT,KAAT,GAAiB+9E,UAAU,CAAExT,IAAI,CAACvqE,KAAP,CAA3B;AAChC,QAAKuqE,IAAI,CAACtqE,cAAL,KAAwBhhD,SAA7B,EAAyC+tC,QAAQ,CAACiT,cAAT,GAA0BsqE,IAAI,CAACtqE,cAA/B;AAEzC,QAAKsqE,IAAI,CAACppE,WAAL,KAAqBliD,SAA1B,EAAsC+tC,QAAQ,CAACmU,WAAT,GAAuB48E,UAAU,CAAExT,IAAI,CAACppE,WAAP,CAAjC;AAEtC,QAAKopE,IAAI,CAAC9qE,YAAL,KAAsBxgD,SAA3B,EAAuC+tC,QAAQ,CAACyS,YAAT,GAAwBs+E,UAAU,CAAExT,IAAI,CAAC9qE,YAAP,CAAlC;AACvC,QAAK8qE,IAAI,CAAC7qE,qBAAL,KAA+BzgD,SAApC,EAAgD+tC,QAAQ,CAAC0S,qBAAT,GAAiCq+E,UAAU,CAAExT,IAAI,CAAC7qE,qBAAP,CAA3C;AAChD,QAAK6qE,IAAI,CAAC5qE,kBAAL,KAA4B1gD,SAAjC,EAA6C+tC,QAAQ,CAAC2S,kBAAT,GAA8Bo+E,UAAU,CAAExT,IAAI,CAAC5qE,kBAAP,CAAxC;AAC7C,QAAK4qE,IAAI,CAAC3qE,oBAAL,KAA8B3gD,SAAnC,EAA+C+tC,QAAQ,CAAC4S,oBAAT,GAAgC,IAAI/yB,OAAJ,GAAc+C,SAAd,CAAyB26F,IAAI,CAAC3qE,oBAA9B,CAAhC;AAE/C,WAAO5S,QAAP;AAEA,GArQ2E;AAuQ5EixF,EAAAA,WAAW,EAAE,UAAW38H,KAAX,EAAmB;AAE/B,SAAK61B,QAAL,GAAgB71B,KAAhB;AACA,WAAO,IAAP;AAEA;AA5Q2E,CAAlD,CAA3B;AAgRA;;;;AAIA,MAAM48H,WAAW,GAAG;AAEnBC,EAAAA,UAAU,EAAE,UAAW90G,KAAX,EAAmB;AAE9B,QAAK,OAAO+0G,WAAP,KAAuB,WAA5B,EAA0C;AAEzC,aAAO,IAAIA,WAAJ,GAAkBC,MAAlB,CAA0Bh1G,KAA1B,CAAP;AAEA,KAN6B,CAQ9B;AACA;;;AAEA,QAAI7sB,CAAC,GAAG,EAAR;;AAEA,SAAM,IAAI0B,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGtmB,KAAK,CAACxsB,MAA5B,EAAoCqB,CAAC,GAAGyxC,EAAxC,EAA4CzxC,CAAC,EAA7C,EAAmD;AAElD;AACA1B,MAAAA,CAAC,IAAI+vD,MAAM,CAAC+xE,YAAP,CAAqBj1G,KAAK,CAAEnrB,CAAF,CAA1B,CAAL;AAEA;;AAED,QAAI;AAEH;AAEA,aAAOuzH,kBAAkB,CAAE8M,MAAM,CAAE/hI,CAAF,CAAR,CAAzB;AAEA,KAND,CAME,OAAQiH,CAAR,EAAY;AAAE;AAEf,aAAOjH,CAAP;AAEA;AAED,GAlCkB;AAoCnBgiI,EAAAA,cAAc,EAAE,UAAWrvH,GAAX,EAAiB;AAEhC,UAAM1H,KAAK,GAAG0H,GAAG,CAACsvH,WAAJ,CAAiB,GAAjB,CAAd;AAEA,QAAKh3H,KAAK,KAAK,CAAE,CAAjB,EAAqB,OAAO,IAAP;AAErB,WAAO0H,GAAG,CAACqkH,MAAJ,CAAY,CAAZ,EAAe/rH,KAAK,GAAG,CAAvB,CAAP;AAEA;AA5CkB,CAApB;AAgDA;;;;;;AAIA,SAASi3H,uBAAT,GAAmC;AAElCt3E,EAAAA,cAAc,CAAC7pD,IAAf,CAAqB,IAArB;AAEA,OAAK8K,IAAL,GAAY,yBAAZ;AACA,OAAK+pE,aAAL,GAAqBtjC,QAArB;AAEA;;AAED4vF,uBAAuB,CAAC1hI,SAAxB,GAAoCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeuwB,cAAc,CAACpqD,SAA9B,CAAf,EAA0D;AAE7FoC,EAAAA,WAAW,EAAEs/H,uBAFgF;AAI7FlyD,EAAAA,yBAAyB,EAAE,IAJkE;AAM7Fl/C,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBkrC,IAAAA,cAAc,CAACpqD,SAAf,CAAyBswB,IAAzB,CAA8B/vB,IAA9B,CAAoC,IAApC,EAA0C2e,MAA1C;AAEA,SAAKk2D,aAAL,GAAqBl2D,MAAM,CAACk2D,aAA5B;AAEA,WAAO,IAAP;AAEA,GAd4F;AAgB7F/kD,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GApB4F;AAsB7F0J,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAG+Z,cAAc,CAACpqD,SAAf,CAAyBg6B,MAAzB,CAAgCz5B,IAAhC,CAAsC,IAAtC,CAAb;AAEA8vC,IAAAA,IAAI,CAAC+kC,aAAL,GAAqB,KAAKA,aAA1B;AAEA/kC,IAAAA,IAAI,CAACm/B,yBAAL,GAAiC,IAAjC;AAEA,WAAOn/B,IAAP;AAEA;AAhC4F,CAA1D,CAApC;AAoCA;;;;AAIA,SAASsxF,wBAAT,CAAmCt1G,KAAnC,EAA0Ck5B,QAA1C,EAAoDvG,UAApD,EAAgEiwB,gBAAhE,EAAmF;AAElF,MAAK,OAASjwB,UAAT,KAA0B,QAA/B,EAA0C;AAEzCiwB,IAAAA,gBAAgB,GAAGjwB,UAAnB;AAEAA,IAAAA,UAAU,GAAG,KAAb;AAEArvB,IAAAA,OAAO,CAACyD,KAAR,CAAe,+FAAf;AAEA;;AAEDkyB,EAAAA,eAAe,CAAC/kD,IAAhB,CAAsB,IAAtB,EAA4B8rB,KAA5B,EAAmCk5B,QAAnC,EAA6CvG,UAA7C;AAEA,OAAKiwB,gBAAL,GAAwBA,gBAAgB,IAAI,CAA5C;AAEA;;AAED0yD,wBAAwB,CAAC3hI,SAAzB,GAAqCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeyrB,eAAe,CAACtlD,SAA/B,CAAf,EAA2D;AAE/FoC,EAAAA,WAAW,EAAEu/H,wBAFkF;AAI/F5xD,EAAAA,0BAA0B,EAAE,IAJmE;AAM/Fz/C,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzBomC,IAAAA,eAAe,CAACtlD,SAAhB,CAA0BswB,IAA1B,CAA+B/vB,IAA/B,CAAqC,IAArC,EAA2C2e,MAA3C;AAEA,SAAK+vD,gBAAL,GAAwB/vD,MAAM,CAAC+vD,gBAA/B;AAEA,WAAO,IAAP;AAEA,GAd8F;AAgB/Fj1C,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMqW,IAAI,GAAGiV,eAAe,CAACtlD,SAAhB,CAA0Bg6B,MAA1B,CAAiCz5B,IAAjC,CAAuC,IAAvC,CAAb;AAEA8vC,IAAAA,IAAI,CAAC4+B,gBAAL,GAAwB,KAAKA,gBAA7B;AAEA5+B,IAAAA,IAAI,CAAC0/B,0BAAL,GAAkC,IAAlC;AAEA,WAAO1/B,IAAP;AAEA;AA1B8F,CAA3D,CAArC;AA8BA;;;;AAIA,SAASuxF,oBAAT,CAA+BvO,OAA/B,EAAyC;AAExCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDuO,oBAAoB,CAAC5hI,SAArB,GAAiCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAElFoC,EAAAA,WAAW,EAAEw/H,oBAFqE;AAIlFnsH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAM0xH,MAAM,GAAG,IAAImB,UAAJ,CAAgB7yH,KAAK,CAACgyH,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAACe,OAAP,CAAgBzyH,KAAK,CAACs6E,IAAtB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAWpC,IAAX,EAAkB;AAEnC,UAAI;AAEHgiH,QAAAA,MAAM,CAAE1wH,KAAK,CAAC8V,KAAN,CAAaD,IAAI,CAACC,KAAL,CAAYpH,IAAZ,CAAb,CAAF,CAAN;AAEA,OAJD,CAIE,OAAQtJ,CAAR,EAAY;AAEb,YAAKwrH,OAAL,EAAe;AAEdA,UAAAA,OAAO,CAAExrH,CAAF,CAAP;AAEA,SAJD,MAIO;AAENkpB,UAAAA,OAAO,CAACyD,KAAR,CAAe3sB,CAAf;AAEA;;AAEDpF,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AAEA;AAED,KAtBD,EAsBG6/G,UAtBH,EAsBeC,OAtBf;AAwBA,GAlCiF;AAoClF96G,EAAAA,KAAK,EAAE,UAAWo2G,IAAX,EAAkB;AAExB,UAAMsU,oBAAoB,GAAG,EAA7B;AACA,UAAMC,cAAc,GAAG,EAAvB;;AAEA,aAASC,oBAAT,CAA+BxU,IAA/B,EAAqCtgG,IAArC,EAA4C;AAE3C,UAAK40G,oBAAoB,CAAE50G,IAAF,CAApB,KAAiChrB,SAAtC,EAAkD,OAAO4/H,oBAAoB,CAAE50G,IAAF,CAA3B;AAElD,YAAMggF,kBAAkB,GAAGsgB,IAAI,CAACtgB,kBAAhC;AACA,YAAMD,iBAAiB,GAAGC,kBAAkB,CAAEhgF,IAAF,CAA5C;AAEA,YAAM+zC,MAAM,GAAGghE,cAAc,CAAEzU,IAAF,EAAQvgB,iBAAiB,CAAChsC,MAA1B,CAA7B;AAEA,YAAM30C,KAAK,GAAG,IAAI41G,YAAY,CAAEj1B,iBAAiB,CAAC3hG,IAApB,CAAhB,CAA4C21D,MAA5C,CAAd;AACA,YAAM6rC,EAAE,GAAG,IAAIJ,iBAAJ,CAAuBpgF,KAAvB,EAA8B2gF,iBAAiB,CAAC19B,MAAhD,CAAX;AACAu9B,MAAAA,EAAE,CAAC5/E,IAAH,GAAU+/E,iBAAiB,CAAC//E,IAA5B;AAEA40G,MAAAA,oBAAoB,CAAE50G,IAAF,CAApB,GAA+B4/E,EAA/B;AAEA,aAAOA,EAAP;AAEA;;AAED,aAASm1B,cAAT,CAAyBzU,IAAzB,EAA+BtgG,IAA/B,EAAsC;AAErC,UAAK60G,cAAc,CAAE70G,IAAF,CAAd,KAA2BhrB,SAAhC,EAA4C,OAAO6/H,cAAc,CAAE70G,IAAF,CAArB;AAE5C,YAAM0/E,YAAY,GAAG4gB,IAAI,CAAC5gB,YAA1B;AACA,YAAMu1B,WAAW,GAAGv1B,YAAY,CAAE1/E,IAAF,CAAhC;AAEA,YAAM2/B,EAAE,GAAG,IAAIpF,WAAJ,CAAiB06E,WAAjB,EAA+BlhE,MAA1C;AAEA8gE,MAAAA,cAAc,CAAE70G,IAAF,CAAd,GAAyB2/B,EAAzB;AAEA,aAAOA,EAAP;AAEA;;AAED,UAAM/c,QAAQ,GAAG09E,IAAI,CAAC/9C,yBAAL,GAAiC,IAAIkyD,uBAAJ,EAAjC,GAAiE,IAAIt3E,cAAJ,EAAlF;AAEA,UAAM3/C,KAAK,GAAG8iH,IAAI,CAACl9E,IAAL,CAAU5lC,KAAxB;;AAEA,QAAKA,KAAK,KAAKxI,SAAf,EAA2B;AAE1B,YAAMkgI,UAAU,GAAG,IAAIF,YAAY,CAAEx3H,KAAK,CAACY,IAAR,CAAhB,CAAgCZ,KAAK,CAAC4hB,KAAtC,CAAnB;AACAwjB,MAAAA,QAAQ,CAAC8a,QAAT,CAAmB,IAAIrF,eAAJ,CAAqB68E,UAArB,EAAiC,CAAjC,CAAnB;AAEA;;AAED,UAAM93E,UAAU,GAAGkjE,IAAI,CAACl9E,IAAL,CAAUga,UAA7B;;AAEA,SAAM,MAAMxpD,GAAZ,IAAmBwpD,UAAnB,EAAgC;AAE/B,YAAMv3B,SAAS,GAAGu3B,UAAU,CAAExpD,GAAF,CAA5B;AACA,UAAIuhI,eAAJ;;AAEA,UAAKtvG,SAAS,CAAC0uC,4BAAf,EAA8C;AAE7C,cAAMwrC,iBAAiB,GAAG+0B,oBAAoB,CAAExU,IAAI,CAACl9E,IAAP,EAAavd,SAAS,CAACud,IAAvB,CAA9C;AACA+xF,QAAAA,eAAe,GAAG,IAAIr1B,0BAAJ,CAAgCC,iBAAhC,EAAmDl6E,SAAS,CAACyyB,QAA7D,EAAuEzyB,SAAS,CAAC9nB,MAAjF,EAAyF8nB,SAAS,CAACksB,UAAnG,CAAlB;AAEA,OALD,MAKO;AAEN,cAAMmjF,UAAU,GAAG,IAAIF,YAAY,CAAEnvG,SAAS,CAACznB,IAAZ,CAAhB,CAAoCynB,SAAS,CAACzG,KAA9C,CAAnB;AACA,cAAMg2G,qBAAqB,GAAGvvG,SAAS,CAACi9C,0BAAV,GAAuC4xD,wBAAvC,GAAkEr8E,eAAhG;AACA88E,QAAAA,eAAe,GAAG,IAAIC,qBAAJ,CAA2BF,UAA3B,EAAuCrvG,SAAS,CAACyyB,QAAjD,EAA2DzyB,SAAS,CAACksB,UAArE,CAAlB;AAEA;;AAED,UAAKlsB,SAAS,CAACtc,IAAV,KAAmBvU,SAAxB,EAAoCmgI,eAAe,CAAC5rH,IAAhB,GAAuBsc,SAAS,CAACtc,IAAjC;AACpCq5B,MAAAA,QAAQ,CAAClkC,YAAT,CAAuB9K,GAAvB,EAA4BuhI,eAA5B;AAEA;;AAED,UAAM93E,eAAe,GAAGijE,IAAI,CAACl9E,IAAL,CAAUia,eAAlC;;AAEA,QAAKA,eAAL,EAAuB;AAEtB,WAAM,MAAMzpD,GAAZ,IAAmBypD,eAAnB,EAAqC;AAEpC,cAAM0D,cAAc,GAAG1D,eAAe,CAAEzpD,GAAF,CAAtC;AAEA,cAAMwrB,KAAK,GAAG,EAAd;;AAEA,aAAM,IAAInrB,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGqb,cAAc,CAACnuD,MAArC,EAA6CqB,CAAC,GAAGyxC,EAAjD,EAAqDzxC,CAAC,EAAtD,EAA4D;AAE3D,gBAAM4xB,SAAS,GAAGk7B,cAAc,CAAE9sD,CAAF,CAAhC;AACA,cAAIkhI,eAAJ;;AAEA,cAAKtvG,SAAS,CAAC0uC,4BAAf,EAA8C;AAE7C,kBAAMwrC,iBAAiB,GAAG+0B,oBAAoB,CAAExU,IAAI,CAACl9E,IAAP,EAAavd,SAAS,CAACud,IAAvB,CAA9C;AACA+xF,YAAAA,eAAe,GAAG,IAAIr1B,0BAAJ,CAAgCC,iBAAhC,EAAmDl6E,SAAS,CAACyyB,QAA7D,EAAuEzyB,SAAS,CAAC9nB,MAAjF,EAAyF8nB,SAAS,CAACksB,UAAnG,CAAlB;AAEA,WALD,MAKO;AAEN,kBAAMmjF,UAAU,GAAG,IAAIF,YAAY,CAAEnvG,SAAS,CAACznB,IAAZ,CAAhB,CAAoCynB,SAAS,CAACzG,KAA9C,CAAnB;AACA+1G,YAAAA,eAAe,GAAG,IAAI98E,eAAJ,CAAqB68E,UAArB,EAAiCrvG,SAAS,CAACyyB,QAA3C,EAAqDzyB,SAAS,CAACksB,UAA/D,CAAlB;AAEA;;AAED,cAAKlsB,SAAS,CAACtc,IAAV,KAAmBvU,SAAxB,EAAoCmgI,eAAe,CAAC5rH,IAAhB,GAAuBsc,SAAS,CAACtc,IAAjC;AACpC6V,UAAAA,KAAK,CAAChiB,IAAN,CAAY+3H,eAAZ;AAEA;;AAEDvyF,QAAAA,QAAQ,CAACya,eAAT,CAA0BzpD,GAA1B,IAAkCwrB,KAAlC;AAEA;AAED;;AAED,UAAMk+B,oBAAoB,GAAGgjE,IAAI,CAACl9E,IAAL,CAAUka,oBAAvC;;AAEA,QAAKA,oBAAL,EAA4B;AAE3B1a,MAAAA,QAAQ,CAAC0a,oBAAT,GAAgC,IAAhC;AAEA;;AAED,UAAMrC,MAAM,GAAGqlE,IAAI,CAACl9E,IAAL,CAAU6X,MAAV,IAAoBqlE,IAAI,CAACl9E,IAAL,CAAUiyF,SAA9B,IAA2C/U,IAAI,CAACl9E,IAAL,CAAUkyF,OAApE;;AAEA,QAAKr6E,MAAM,KAAKjmD,SAAhB,EAA4B;AAE3B,WAAM,IAAIf,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG66B,MAAM,CAACroD,MAA5B,EAAoCqB,CAAC,KAAKmsB,CAA1C,EAA6C,EAAGnsB,CAAhD,EAAoD;AAEnD,cAAM0nD,KAAK,GAAGV,MAAM,CAAEhnD,CAAF,CAApB;AAEA2uC,QAAAA,QAAQ,CAACib,QAAT,CAAmBlC,KAAK,CAAClP,KAAzB,EAAgCkP,KAAK,CAACtZ,KAAtC,EAA6CsZ,KAAK,CAACzJ,aAAnD;AAEA;AAED;;AAED,UAAMkJ,cAAc,GAAGklE,IAAI,CAACl9E,IAAL,CAAUgY,cAAjC;;AAEA,QAAKA,cAAc,KAAKpmD,SAAxB,EAAoC;AAEnC,YAAMixB,MAAM,GAAG,IAAIuO,OAAJ,EAAf;;AAEA,UAAK4mB,cAAc,CAACn1B,MAAf,KAA0BjxB,SAA/B,EAA2C;AAE1CixB,QAAAA,MAAM,CAACN,SAAP,CAAkBy1B,cAAc,CAACn1B,MAAjC;AAEA;;AAED2c,MAAAA,QAAQ,CAACwY,cAAT,GAA0B,IAAIjT,MAAJ,CAAYliB,MAAZ,EAAoBm1B,cAAc,CAACpkB,MAAnC,CAA1B;AAEA;;AAED,QAAKspF,IAAI,CAAC/2G,IAAV,EAAiBq5B,QAAQ,CAACr5B,IAAT,GAAgB+2G,IAAI,CAAC/2G,IAArB;AACjB,QAAK+2G,IAAI,CAAC/gF,QAAV,EAAqBqD,QAAQ,CAACrD,QAAT,GAAoB+gF,IAAI,CAAC/gF,QAAzB;AAErB,WAAOqD,QAAP;AAEA;AAhMiF,CAAlD,CAAjC;AAoMA,MAAMoyF,YAAY,GAAG;AACpBr7E,EAAAA,SAAS,EAAEA,SADS;AAEpBE,EAAAA,UAAU,EAAEA,UAFQ;AAGpB;AACAE,EAAAA,iBAAiB,EAAE,OAAOA,iBAAP,KAA6B,WAA7B,GAA2CA,iBAA3C,GAA+DF,UAJ9D;AAKpBI,EAAAA,UAAU,EAAEA,UALQ;AAMpBE,EAAAA,WAAW,EAAEA,WANO;AAOpBE,EAAAA,UAAU,EAAEA,UAPQ;AAQpBE,EAAAA,WAAW,EAAEA,WARO;AASpBE,EAAAA,YAAY,EAAEA,YATM;AAUpBE,EAAAA,YAAY,EAAEA;AAVM,CAArB;AAaA;;;;AAIA,SAAS46E,YAAT,CAAuBnP,OAAvB,EAAiC;AAEhCD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDmP,YAAY,CAACxiI,SAAb,GAAyBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE1EoC,EAAAA,WAAW,EAAEogI,YAF6D;AAI1E/sH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAMs6E,IAAI,GAAK,KAAKA,IAAL,KAAc,EAAhB,GAAuBulD,WAAW,CAACM,cAAZ,CAA4BrvH,GAA5B,CAAvB,GAA2D,KAAKwpE,IAA7E;AACA,SAAK43C,YAAL,GAAoB,KAAKA,YAAL,IAAqB53C,IAAzC;AAEA,UAAMo3C,MAAM,GAAG,IAAImB,UAAJ,CAAgB7yH,KAAK,CAACgyH,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAACe,OAAP,CAAgB,KAAKn4C,IAArB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAWpC,IAAX,EAAkB;AAEnC,UAAIw9G,IAAI,GAAG,IAAX;;AAEA,UAAI;AAEHA,QAAAA,IAAI,GAAGr2G,IAAI,CAACC,KAAL,CAAYpH,IAAZ,CAAP;AAEA,OAJD,CAIE,OAAQqjB,KAAR,EAAgB;AAEjB,YAAK6+F,OAAO,KAAKhwH,SAAjB,EAA6BgwH,OAAO,CAAE7+F,KAAF,CAAP;AAE7BzD,QAAAA,OAAO,CAACyD,KAAR,CAAe,sCAAsCjhB,GAAtC,GAA4C,GAA3D,EAAgEihB,KAAK,CAAC2yE,OAAtE;AAEA;AAEA;;AAED,YAAM3rE,QAAQ,GAAGmzF,IAAI,CAACnzF,QAAtB;;AAEA,UAAKA,QAAQ,KAAKn4B,SAAb,IAA0Bm4B,QAAQ,CAAC/uB,IAAT,KAAkBpJ,SAA5C,IAAyDm4B,QAAQ,CAAC/uB,IAAT,CAAcskH,WAAd,OAAgC,UAA9F,EAA2G;AAE1GhgG,QAAAA,OAAO,CAACyD,KAAR,CAAe,qCAAqCjhB,GAApD;AACA;AAEA;;AAED9Q,MAAAA,KAAK,CAAC8V,KAAN,CAAao2G,IAAb,EAAmBwE,MAAnB;AAEA,KA7BD,EA6BGC,UA7BH,EA6BeC,OA7Bf;AA+BA,GA5CyE;AA8C1E96G,EAAAA,KAAK,EAAE,UAAWo2G,IAAX,EAAiBwE,MAAjB,EAA0B;AAEhC,UAAM3iF,MAAM,GAAG,KAAKqzF,UAAL,CAAiBlV,IAAI,CAACn+E,MAAtB,CAAf;AACA,UAAMF,UAAU,GAAG,KAAKwzF,eAAL,CAAsBnV,IAAI,CAACr+E,UAA3B,EAAuCE,MAAvC,CAAnB;AAEA,UAAM7U,MAAM,GAAG,KAAKooG,WAAL,CAAkBpV,IAAI,CAAChzF,MAAvB,EAA+B,YAAY;AAEzD,UAAKw3F,MAAM,KAAK9vH,SAAhB,EAA4B8vH,MAAM,CAAEpsH,MAAF,CAAN;AAE5B,KAJc,CAAf;AAMA,UAAMw0B,QAAQ,GAAG,KAAKyoG,aAAL,CAAoBrV,IAAI,CAACpzF,QAAzB,EAAmCI,MAAnC,CAAjB;AACA,UAAM4U,SAAS,GAAG,KAAK0zF,cAAL,CAAqBtV,IAAI,CAACp+E,SAA1B,EAAqChV,QAArC,CAAlB;AAEA,UAAMx0B,MAAM,GAAG,KAAKm9H,WAAL,CAAkBvV,IAAI,CAAC5nH,MAAvB,EAA+BupC,UAA/B,EAA2CC,SAA3C,CAAf;;AAEA,QAAKo+E,IAAI,CAACgD,UAAV,EAAuB;AAEtB5qH,MAAAA,MAAM,CAAC4qH,UAAP,GAAoB,KAAKwS,eAAL,CAAsBxV,IAAI,CAACgD,UAA3B,CAApB;AAEA;;AAED,QAAKhD,IAAI,CAAChzF,MAAL,KAAgBt4B,SAAhB,IAA6BsrH,IAAI,CAAChzF,MAAL,CAAY16B,MAAZ,KAAuB,CAAzD,EAA6D;AAE5D,UAAKkyH,MAAM,KAAK9vH,SAAhB,EAA4B8vH,MAAM,CAAEpsH,MAAF,CAAN;AAE5B;;AAED,WAAOA,MAAP;AAEA,GA5EyE;AA8E1E88H,EAAAA,UAAU,EAAE,UAAWlV,IAAX,EAAkB;AAE7B,UAAMn+E,MAAM,GAAG,EAAf;;AAEA,QAAKm+E,IAAI,KAAKtrH,SAAd,EAA0B;AAEzB,WAAM,IAAIf,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC1tH,MAA1B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyCJ,CAAC,EAA1C,EAAgD;AAE/C,cAAM6uC,KAAK,GAAG,IAAIquF,KAAJ,GAAY1F,QAAZ,CAAsBnL,IAAI,CAAErsH,CAAF,CAA1B,CAAd;AAEAkuC,QAAAA,MAAM,CAAEW,KAAK,CAAC9iB,IAAR,CAAN,GAAuB8iB,KAAvB;AAEA;AAED;;AAED,WAAOX,MAAP;AAEA,GAhGyE;AAkG1EszF,EAAAA,eAAe,EAAE,UAAWnV,IAAX,EAAiBn+E,MAAjB,EAA0B;AAE1C,UAAMF,UAAU,GAAG,EAAnB;AACA,QAAI8zF,cAAJ;;AAEA,QAAKzV,IAAI,KAAKtrH,SAAd,EAA0B;AAEzB,YAAMghI,oBAAoB,GAAG,IAAIrB,oBAAJ,EAA7B;;AAEA,WAAM,IAAI1gI,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC1tH,MAA1B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyCJ,CAAC,EAA1C,EAAgD;AAE/C,YAAI2uC,QAAJ;AACA,cAAMQ,IAAI,GAAGk9E,IAAI,CAAErsH,CAAF,CAAjB;;AAEA,gBAASmvC,IAAI,CAAChlC,IAAd;AAEC,eAAK,eAAL;AACA,eAAK,qBAAL;AAECwkC,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACxlC,KADK,EAEVwlC,IAAI,CAACvlC,MAFK,EAGVulC,IAAI,CAAC4kB,aAHK,EAIV5kB,IAAI,CAAC6kB,cAJK,CAAX;AAOA;;AAED,eAAK,aAAL;AACA,eAAK,mBAAL;AACA,eAAK,cAAL;AAAqB;AAEpBrlB,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACxlC,KADK,EAEVwlC,IAAI,CAACvlC,MAFK,EAGVulC,IAAI,CAAC2kB,KAHK,EAIV3kB,IAAI,CAAC4kB,aAJK,EAKV5kB,IAAI,CAAC6kB,cALK,EAMV7kB,IAAI,CAAC8kB,aANK,CAAX;AASA;;AAED,eAAK,gBAAL;AACA,eAAK,sBAAL;AAECtlB,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACpM,MADK,EAEVoM,IAAI,CAAC8zE,QAFK,EAGV9zE,IAAI,CAAC6yE,UAHK,EAIV7yE,IAAI,CAAC8yE,WAJK,CAAX;AAOA;;AAED,eAAK,kBAAL;AACA,eAAK,wBAAL;AAECtzE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACk1E,SADK,EAEVl1E,IAAI,CAACm1E,YAFK,EAGVn1E,IAAI,CAACvlC,MAHK,EAIVulC,IAAI,CAACylE,cAJK,EAKVzlE,IAAI,CAAC6kB,cALK,EAMV7kB,IAAI,CAACo1E,SANK,EAOVp1E,IAAI,CAAC6yE,UAPK,EAQV7yE,IAAI,CAAC8yE,WARK,CAAX;AAWA;;AAED,eAAK,cAAL;AACA,eAAK,oBAAL;AAECtzE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACpM,MADK,EAEVoM,IAAI,CAACvlC,MAFK,EAGVulC,IAAI,CAACylE,cAHK,EAIVzlE,IAAI,CAAC6kB,cAJK,EAKV7kB,IAAI,CAACo1E,SALK,EAMVp1E,IAAI,CAAC6yE,UANK,EAOV7yE,IAAI,CAAC8yE,WAPK,CAAX;AAUA;;AAED,eAAK,gBAAL;AACA,eAAK,sBAAL;AAECtzE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACpM,MADK,EAEVoM,IAAI,CAAC4kB,aAFK,EAGV5kB,IAAI,CAAC6kB,cAHK,EAIV7kB,IAAI,CAAC2yE,QAJK,EAKV3yE,IAAI,CAAC4yE,SALK,EAMV5yE,IAAI,CAAC6yE,UANK,EAOV7yE,IAAI,CAAC8yE,WAPK,CAAX;AAUA;;AAED,eAAK,sBAAL;AACA,eAAK,4BAAL;AACA,eAAK,qBAAL;AACA,eAAK,2BAAL;AACA,eAAK,oBAAL;AACA,eAAK,0BAAL;AACA,eAAK,qBAAL;AACA,eAAK,2BAAL;AAECtzE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACpM,MADK,EAEVoM,IAAI,CAACS,MAFK,CAAX;AAKA;;AAED,eAAK,cAAL;AACA,eAAK,oBAAL;AAECjB,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACqzE,WADK,EAEVrzE,IAAI,CAACszE,WAFK,EAGVtzE,IAAI,CAACuzE,aAHK,EAIVvzE,IAAI,CAACwzE,WAJK,EAKVxzE,IAAI,CAAC6yE,UALK,EAMV7yE,IAAI,CAAC8yE,WANK,CAAX;AASA;;AAED,eAAK,eAAL;AACA,eAAK,qBAAL;AAECtzE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACpM,MADK,EAEVoM,IAAI,CAACymE,IAFK,EAGVzmE,IAAI,CAACylE,cAHK,EAIVzlE,IAAI,CAACwlE,eAJK,EAKVxlE,IAAI,CAACqnE,GALK,CAAX;AAQA;;AAED,eAAK,mBAAL;AACA,eAAK,yBAAL;AAEC7nE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACpM,MADK,EAEVoM,IAAI,CAACymE,IAFK,EAGVzmE,IAAI,CAACwlE,eAHK,EAIVxlE,IAAI,CAACylE,cAJK,EAKVzlE,IAAI,CAACzsC,CALK,EAMVysC,IAAI,CAACxsC,CANK,CAAX;AASA;;AAED,eAAK,cAAL;AACA,eAAK,oBAAL;AAEC;AACA;AACAgsC,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACV,IAAI+wH,MAAM,CAAE/rF,IAAI,CAACsrC,IAAL,CAAUtwE,IAAZ,CAAV,GAA+BqtH,QAA/B,CAAyCroF,IAAI,CAACsrC,IAA9C,CADU,EAEVtrC,IAAI,CAACwlE,eAFK,EAGVxlE,IAAI,CAACpM,MAHK,EAIVoM,IAAI,CAACylE,cAJK,EAKVzlE,IAAI,CAAC55B,MALK,CAAX;AAQA;;AAED,eAAK,eAAL;AACA,eAAK,qBAAL;AAECo5B,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACoC,MADK,EAEVpC,IAAI,CAAC8zE,QAFK,EAGV9zE,IAAI,CAAC2yE,QAHK,EAIV3yE,IAAI,CAAC4yE,SAJK,CAAX;AAOA;;AAED,eAAK,oBAAL;AACA,eAAK,0BAAL;AAECpzE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACVglC,IAAI,CAACyX,QADK,EAEVzX,IAAI,CAACod,OAFK,EAGVpd,IAAI,CAACpM,MAHK,EAIVoM,IAAI,CAAC6yF,OAJK,CAAX;AAOA;;AAED,eAAK,eAAL;AACA,eAAK,qBAAL;AAECF,YAAAA,cAAc,GAAG,EAAjB;;AAEA,iBAAM,IAAIjuF,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAG3b,IAAI,CAACjB,MAAL,CAAYvvC,MAAlC,EAA0Ck1C,CAAC,GAAGiX,EAA9C,EAAkDjX,CAAC,EAAnD,EAAyD;AAExD,oBAAMhF,KAAK,GAAGX,MAAM,CAAEiB,IAAI,CAACjB,MAAL,CAAa2F,CAAb,CAAF,CAApB;AAEAiuF,cAAAA,cAAc,CAAC34H,IAAf,CAAqB0lC,KAArB;AAEA;;AAEDF,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACV23H,cADU,EAEV3yF,IAAI,CAAC8sE,aAFK,CAAX;AAKA;;AAGD,eAAK,iBAAL;AACA,eAAK,uBAAL;AAEC6lB,YAAAA,cAAc,GAAG,EAAjB;;AAEA,iBAAM,IAAIjuF,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAG3b,IAAI,CAACjB,MAAL,CAAYvvC,MAAlC,EAA0Ck1C,CAAC,GAAGiX,EAA9C,EAAkDjX,CAAC,EAAnD,EAAyD;AAExD,oBAAMhF,KAAK,GAAGX,MAAM,CAAEiB,IAAI,CAACjB,MAAL,CAAa2F,CAAb,CAAF,CAApB;AAEAiuF,cAAAA,cAAc,CAAC34H,IAAf,CAAqB0lC,KAArB;AAEA;;AAED,kBAAM2tE,WAAW,GAAGrtE,IAAI,CAACnkC,OAAL,CAAawxG,WAAjC;;AAEA,gBAAKA,WAAW,KAAKz7G,SAArB,EAAiC;AAEhCouC,cAAAA,IAAI,CAACnkC,OAAL,CAAawxG,WAAb,GAA2B,IAAI0e,MAAM,CAAE1e,WAAW,CAACryG,IAAd,CAAV,GAAiCqtH,QAAjC,CAA2Chb,WAA3C,CAA3B;AAEA;;AAED7tE,YAAAA,QAAQ,GAAG,IAAI22E,UAAU,CAAEn2E,IAAI,CAAChlC,IAAP,CAAd,CACV23H,cADU,EAEV3yF,IAAI,CAACnkC,OAFK,CAAX;AAKA;;AAED,eAAK,gBAAL;AACA,eAAK,yBAAL;AAEC2jC,YAAAA,QAAQ,GAAGozF,oBAAoB,CAAC9rH,KAArB,CAA4Bk5B,IAA5B,CAAX;AAEA;;AAED,eAAK,UAAL;AAEC1gB,YAAAA,OAAO,CAACyD,KAAR,CAAe,kEAAf;AAEA;;AAED;AAECzD,YAAAA,OAAO,CAACC,IAAR,CAAc,oDAAoDygB,IAAI,CAAChlC,IAAzD,GAAgE,GAA9E;AAEA;AAzPF;;AA6PAwkC,QAAAA,QAAQ,CAAC5iB,IAAT,GAAgBojB,IAAI,CAACpjB,IAArB;AAEA,YAAKojB,IAAI,CAAC75B,IAAL,KAAcvU,SAAnB,EAA+B4tC,QAAQ,CAACr5B,IAAT,GAAgB65B,IAAI,CAAC75B,IAArB;AAC/B,YAAKq5B,QAAQ,CAAC4a,gBAAT,KAA8B,IAA9B,IAAsCpa,IAAI,CAAC7D,QAAL,KAAkBvqC,SAA7D,EAAyE4tC,QAAQ,CAACrD,QAAT,GAAoB6D,IAAI,CAAC7D,QAAzB;AAEzE0C,QAAAA,UAAU,CAAEmB,IAAI,CAACpjB,IAAP,CAAV,GAA0B4iB,QAA1B;AAEA;AAED;;AAED,WAAOX,UAAP;AAEA,GA1XyE;AA4X1E2zF,EAAAA,cAAc,EAAE,UAAWtV,IAAX,EAAiBpzF,QAAjB,EAA4B;AAE3C,UAAMgW,KAAK,GAAG,EAAd,CAF2C,CAEzB;;AAClB,UAAMhB,SAAS,GAAG,EAAlB;;AAEA,QAAKo+E,IAAI,KAAKtrH,SAAd,EAA0B;AAEzB,YAAM8wH,MAAM,GAAG,IAAI+N,cAAJ,EAAf;AACA/N,MAAAA,MAAM,CAACkO,WAAP,CAAoB9mG,QAApB;;AAEA,WAAM,IAAIj5B,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC1tH,MAA1B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyCJ,CAAC,EAA1C,EAAgD;AAE/C,cAAMmvC,IAAI,GAAGk9E,IAAI,CAAErsH,CAAF,CAAjB;;AAEA,YAAKmvC,IAAI,CAAChlC,IAAL,KAAc,eAAnB,EAAqC;AAEpC;AAEA,gBAAMghB,KAAK,GAAG,EAAd;;AAEA,eAAM,IAAI0oB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG1E,IAAI,CAAClB,SAAL,CAAetvC,MAApC,EAA4Ck1C,CAAC,EAA7C,EAAmD;AAElD,kBAAM/E,QAAQ,GAAGK,IAAI,CAAClB,SAAL,CAAgB4F,CAAhB,CAAjB;;AAEA,gBAAK5E,KAAK,CAAEH,QAAQ,CAAC/iB,IAAX,CAAL,KAA2BhrB,SAAhC,EAA4C;AAE3CkuC,cAAAA,KAAK,CAAEH,QAAQ,CAAC/iB,IAAX,CAAL,GAAyB8lG,MAAM,CAAC57G,KAAP,CAAc64B,QAAd,CAAzB;AAEA;;AAED3jB,YAAAA,KAAK,CAAChiB,IAAN,CAAY8lC,KAAK,CAAEH,QAAQ,CAAC/iB,IAAX,CAAjB;AAEA;;AAEDkiB,UAAAA,SAAS,CAAEkB,IAAI,CAACpjB,IAAP,CAAT,GAAyBZ,KAAzB;AAEA,SAtBD,MAsBO;AAEN,cAAK8jB,KAAK,CAAEE,IAAI,CAACpjB,IAAP,CAAL,KAAuBhrB,SAA5B,EAAwC;AAEvCkuC,YAAAA,KAAK,CAAEE,IAAI,CAACpjB,IAAP,CAAL,GAAqB8lG,MAAM,CAAC57G,KAAP,CAAck5B,IAAd,CAArB;AAEA;;AAEDlB,UAAAA,SAAS,CAAEkB,IAAI,CAACpjB,IAAP,CAAT,GAAyBkjB,KAAK,CAAEE,IAAI,CAACpjB,IAAP,CAA9B;AAEA;AAED;AAED;;AAED,WAAOkiB,SAAP;AAEA,GAlbyE;AAob1E4zF,EAAAA,eAAe,EAAE,UAAWxV,IAAX,EAAkB;AAElC,UAAMgD,UAAU,GAAG,EAAnB;;AAEA,SAAM,IAAIrvH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGqsH,IAAI,CAAC1tH,MAA1B,EAAkCqB,CAAC,EAAnC,EAAyC;AAExC,YAAMmvC,IAAI,GAAGk9E,IAAI,CAAErsH,CAAF,CAAjB;AAEA,YAAMmnH,IAAI,GAAGkH,aAAa,CAACp4G,KAAd,CAAqBk5B,IAArB,CAAb;AAEA,UAAKA,IAAI,CAACpjB,IAAL,KAAchrB,SAAnB,EAA+BomH,IAAI,CAACp7F,IAAL,GAAYojB,IAAI,CAACpjB,IAAjB;AAE/BsjG,MAAAA,UAAU,CAAClmH,IAAX,CAAiBg+G,IAAjB;AAEA;;AAED,WAAOkI,UAAP;AAEA,GAtcyE;AAwc1EoS,EAAAA,WAAW,EAAE,UAAWpV,IAAX,EAAiBwE,MAAjB,EAA0B;AAEtC,UAAM1wH,KAAK,GAAG,IAAd;AACA,UAAMk5B,MAAM,GAAG,EAAf;AAEA,QAAIw4F,MAAJ;;AAEA,aAASoQ,SAAT,CAAoBhxH,GAApB,EAA0B;AAEzB9Q,MAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEA,aAAO4gH,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,YAAY;AAEpC9Q,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OAJM,EAIJlQ,SAJI,EAIO,YAAY;AAEzBZ,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OATM,CAAP;AAWA;;AAED,QAAKo7G,IAAI,KAAKtrH,SAAT,IAAsBsrH,IAAI,CAAC1tH,MAAL,GAAc,CAAzC,EAA6C;AAE5C,YAAMwzH,OAAO,GAAG,IAAIvB,cAAJ,CAAoBC,MAApB,CAAhB;AAEAgB,MAAAA,MAAM,GAAG,IAAIsD,WAAJ,CAAiBhD,OAAjB,CAAT;AACAN,MAAAA,MAAM,CAACc,cAAP,CAAuB,KAAKP,WAA5B;;AAEA,WAAM,IAAIpyH,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG46E,IAAI,CAAC1tH,MAA3B,EAAmCqB,CAAC,GAAGyxC,EAAvC,EAA2CzxC,CAAC,EAA5C,EAAkD;AAEjD,cAAM02B,KAAK,GAAG21F,IAAI,CAAErsH,CAAF,CAAlB;AACA,cAAMiR,GAAG,GAAGylB,KAAK,CAACzlB,GAAlB;;AAEA,YAAKpS,KAAK,CAACoC,OAAN,CAAegQ,GAAf,CAAL,EAA4B;AAE3B;AAEAooB,UAAAA,MAAM,CAAE3C,KAAK,CAAC3K,IAAR,CAAN,GAAuB,EAAvB;;AAEA,eAAM,IAAI8nB,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAG75C,GAAG,CAACtS,MAA1B,EAAkCk1C,CAAC,GAAGiX,EAAtC,EAA0CjX,CAAC,EAA3C,EAAiD;AAEhD,kBAAMquF,UAAU,GAAGjxH,GAAG,CAAE4iC,CAAF,CAAtB;AAEA,kBAAM4mC,IAAI,GAAG,4BAA4Bj5E,IAA5B,CAAkC0gI,UAAlC,IAAiDA,UAAjD,GAA8D/hI,KAAK,CAACkyH,YAAN,GAAqB6P,UAAhG;AAEA7oG,YAAAA,MAAM,CAAE3C,KAAK,CAAC3K,IAAR,CAAN,CAAqB5iB,IAArB,CAA2B84H,SAAS,CAAExnD,IAAF,CAApC;AAEA;AAED,SAhBD,MAgBO;AAEN;AAEA,gBAAMA,IAAI,GAAG,4BAA4Bj5E,IAA5B,CAAkCk1B,KAAK,CAACzlB,GAAxC,IAAgDylB,KAAK,CAACzlB,GAAtD,GAA4D9Q,KAAK,CAACkyH,YAAN,GAAqB37F,KAAK,CAACzlB,GAApG;AAEAooB,UAAAA,MAAM,CAAE3C,KAAK,CAAC3K,IAAR,CAAN,GAAuBk2G,SAAS,CAAExnD,IAAF,CAAhC;AAEA;AAED;AAED;;AAED,WAAOphD,MAAP;AAEA,GA5gByE;AA8gB1EqoG,EAAAA,aAAa,EAAE,UAAWrV,IAAX,EAAiBhzF,MAAjB,EAA0B;AAExC,aAAS8oG,aAAT,CAAwB/+H,KAAxB,EAA+B+G,IAA/B,EAAsC;AAErC,UAAK,OAAO/G,KAAP,KAAiB,QAAtB,EAAiC,OAAOA,KAAP;AAEjCqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd,EAAsFtrB,KAAtF;AAEA,aAAO+G,IAAI,CAAE/G,KAAF,CAAX;AAEA;;AAED,UAAM61B,QAAQ,GAAG,EAAjB;;AAEA,QAAKozF,IAAI,KAAKtrH,SAAd,EAA0B;AAEzB,WAAM,IAAIf,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGisH,IAAI,CAAC1tH,MAA1B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyCJ,CAAC,EAA1C,EAAgD;AAE/C,cAAMmvC,IAAI,GAAGk9E,IAAI,CAAErsH,CAAF,CAAjB;;AAEA,YAAKmvC,IAAI,CAACzY,KAAL,KAAe31B,SAApB,EAAgC;AAE/B0tB,UAAAA,OAAO,CAACC,IAAR,CAAc,8CAAd,EAA8DygB,IAAI,CAACpjB,IAAnE;AAEA;;AAED,YAAKsN,MAAM,CAAE8V,IAAI,CAACzY,KAAP,CAAN,KAAyB31B,SAA9B,EAA0C;AAEzC0tB,UAAAA,OAAO,CAACC,IAAR,CAAc,qCAAd,EAAqDygB,IAAI,CAACzY,KAA1D;AAEA;;AAED,YAAI+E,OAAJ;;AAEA,YAAK58B,KAAK,CAACoC,OAAN,CAAeo4B,MAAM,CAAE8V,IAAI,CAACzY,KAAP,CAArB,CAAL,EAA6C;AAE5C+E,UAAAA,OAAO,GAAG,IAAIy5C,WAAJ,CAAiB77C,MAAM,CAAE8V,IAAI,CAACzY,KAAP,CAAvB,CAAV;AAEA,SAJD,MAIO;AAEN+E,UAAAA,OAAO,GAAG,IAAInE,OAAJ,CAAa+B,MAAM,CAAE8V,IAAI,CAACzY,KAAP,CAAnB,CAAV;AAEA;;AAED+E,QAAAA,OAAO,CAACsuB,WAAR,GAAsB,IAAtB;AAEAtuB,QAAAA,OAAO,CAAC1P,IAAR,GAAeojB,IAAI,CAACpjB,IAApB;AAEA,YAAKojB,IAAI,CAAC75B,IAAL,KAAcvU,SAAnB,EAA+B06B,OAAO,CAACnmB,IAAR,GAAe65B,IAAI,CAAC75B,IAApB;AAE/B,YAAK65B,IAAI,CAAC5X,OAAL,KAAiBx2B,SAAtB,EAAkC06B,OAAO,CAAClE,OAAR,GAAkB4qG,aAAa,CAAEhzF,IAAI,CAAC5X,OAAP,EAAgB6qG,eAAhB,CAA/B;AAElC,YAAKjzF,IAAI,CAACrlC,MAAL,KAAgB/I,SAArB,EAAiC06B,OAAO,CAAC3xB,MAAR,CAAe4nB,SAAf,CAA0Byd,IAAI,CAACrlC,MAA/B;AACjC,YAAKqlC,IAAI,CAAChX,MAAL,KAAgBp3B,SAArB,EAAiC06B,OAAO,CAACtD,MAAR,CAAezG,SAAf,CAA0Byd,IAAI,CAAChX,MAA/B;AACjC,YAAKgX,IAAI,CAACnd,MAAL,KAAgBjxB,SAArB,EAAiC06B,OAAO,CAACzJ,MAAR,CAAeN,SAAf,CAA0Byd,IAAI,CAACnd,MAA/B;AACjC,YAAKmd,IAAI,CAACnZ,QAAL,KAAkBj1B,SAAvB,EAAmC06B,OAAO,CAACzF,QAAR,GAAmBmZ,IAAI,CAACnZ,QAAxB;;AAEnC,YAAKmZ,IAAI,CAAC/V,IAAL,KAAcr4B,SAAnB,EAA+B;AAE9B06B,UAAAA,OAAO,CAACjE,KAAR,GAAgB2qG,aAAa,CAAEhzF,IAAI,CAAC/V,IAAL,CAAW,CAAX,CAAF,EAAkBipG,gBAAlB,CAA7B;AACA5mG,UAAAA,OAAO,CAAChE,KAAR,GAAgB0qG,aAAa,CAAEhzF,IAAI,CAAC/V,IAAL,CAAW,CAAX,CAAF,EAAkBipG,gBAAlB,CAA7B;AAEA;;AAED,YAAKlzF,IAAI,CAACvX,MAAL,KAAgB72B,SAArB,EAAiC06B,OAAO,CAAC7D,MAAR,GAAiBuX,IAAI,CAACvX,MAAtB;AACjC,YAAKuX,IAAI,CAAChlC,IAAL,KAAcpJ,SAAnB,EAA+B06B,OAAO,CAACtxB,IAAR,GAAeglC,IAAI,CAAChlC,IAApB;AAC/B,YAAKglC,IAAI,CAACrX,QAAL,KAAkB/2B,SAAvB,EAAmC06B,OAAO,CAAC3D,QAAR,GAAmBqX,IAAI,CAACrX,QAAxB;AAEnC,YAAKqX,IAAI,CAACxX,SAAL,KAAmB52B,SAAxB,EAAoC06B,OAAO,CAAC9D,SAAR,GAAoBwqG,aAAa,CAAEhzF,IAAI,CAACxX,SAAP,EAAkB2qG,cAAlB,CAAjC;AACpC,YAAKnzF,IAAI,CAACzX,SAAL,KAAmB32B,SAAxB,EAAoC06B,OAAO,CAAC/D,SAAR,GAAoByqG,aAAa,CAAEhzF,IAAI,CAACzX,SAAP,EAAkB4qG,cAAlB,CAAjC;AACpC,YAAKnzF,IAAI,CAACtX,UAAL,KAAoB92B,SAAzB,EAAqC06B,OAAO,CAAC5D,UAAR,GAAqBsX,IAAI,CAACtX,UAA1B;AAErC,YAAKsX,IAAI,CAAC5W,KAAL,KAAex3B,SAApB,EAAgC06B,OAAO,CAAClD,KAAR,GAAgB4W,IAAI,CAAC5W,KAArB;AAEhC,YAAK4W,IAAI,CAAC7W,gBAAL,KAA0Bv3B,SAA/B,EAA2C06B,OAAO,CAACnD,gBAAR,GAA2B6W,IAAI,CAAC7W,gBAAhC;AAC3C,YAAK6W,IAAI,CAAC3W,eAAL,KAAyBz3B,SAA9B,EAA0C06B,OAAO,CAACjD,eAAR,GAA0B2W,IAAI,CAAC3W,eAA/B;AAE1CS,QAAAA,QAAQ,CAAEkW,IAAI,CAACpjB,IAAP,CAAR,GAAwB0P,OAAxB;AAEA;AAED;;AAED,WAAOxC,QAAP;AAEA,GAnmByE;AAqmB1E2oG,EAAAA,WAAW,EAAE,UAAWzyF,IAAX,EAAiBnB,UAAjB,EAA6BC,SAA7B,EAAyC;AAErD,QAAIxpC,MAAJ;;AAEA,aAAS89H,WAAT,CAAsBjtH,IAAtB,EAA6B;AAE5B,UAAK04B,UAAU,CAAE14B,IAAF,CAAV,KAAuBvU,SAA5B,EAAwC;AAEvC0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,wCAAd,EAAwDpZ,IAAxD;AAEA;;AAED,aAAO04B,UAAU,CAAE14B,IAAF,CAAjB;AAEA;;AAED,aAASktH,WAAT,CAAsBltH,IAAtB,EAA6B;AAE5B,UAAKA,IAAI,KAAKvU,SAAd,EAA0B,OAAOA,SAAP;;AAE1B,UAAKlC,KAAK,CAACoC,OAAN,CAAeqU,IAAf,CAAL,EAA6B;AAE5B,cAAM6V,KAAK,GAAG,EAAd;;AAEA,aAAM,IAAInrB,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGkV,IAAI,CAAC3W,MAA1B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyCJ,CAAC,EAA1C,EAAgD;AAE/C,gBAAM+rB,IAAI,GAAGzW,IAAI,CAAEtV,CAAF,CAAjB;;AAEA,cAAKiuC,SAAS,CAAEliB,IAAF,CAAT,KAAsBhrB,SAA3B,EAAuC;AAEtC0tB,YAAAA,OAAO,CAACC,IAAR,CAAc,wCAAd,EAAwD3C,IAAxD;AAEA;;AAEDZ,UAAAA,KAAK,CAAChiB,IAAN,CAAY8kC,SAAS,CAAEliB,IAAF,CAArB;AAEA;;AAED,eAAOZ,KAAP;AAEA;;AAED,UAAK8iB,SAAS,CAAE34B,IAAF,CAAT,KAAsBvU,SAA3B,EAAuC;AAEtC0tB,QAAAA,OAAO,CAACC,IAAR,CAAc,wCAAd,EAAwDpZ,IAAxD;AAEA;;AAED,aAAO24B,SAAS,CAAE34B,IAAF,CAAhB;AAEA;;AAED,QAAIq5B,QAAJ,EAAcG,QAAd;;AAEA,YAASK,IAAI,CAAChlC,IAAd;AAEC,WAAK,OAAL;AAEC1F,QAAAA,MAAM,GAAG,IAAI4qC,KAAJ,EAAT;;AAEA,YAAKF,IAAI,CAACv+B,UAAL,KAAoB7P,SAAzB,EAAqC;AAEpC,cAAKwc,MAAM,CAACE,SAAP,CAAkB0xB,IAAI,CAACv+B,UAAvB,CAAL,EAA2C;AAE1CnM,YAAAA,MAAM,CAACmM,UAAP,GAAoB,IAAIvN,KAAJ,CAAW8rC,IAAI,CAACv+B,UAAhB,CAApB;AAEA;AAED;;AAED,YAAKu+B,IAAI,CAACI,GAAL,KAAaxuC,SAAlB,EAA8B;AAE7B,cAAKouC,IAAI,CAACI,GAAL,CAASplC,IAAT,KAAkB,KAAvB,EAA+B;AAE9B1F,YAAAA,MAAM,CAAC8qC,GAAP,GAAa,IAAI+7D,GAAJ,CAASn8D,IAAI,CAACI,GAAL,CAAS9xC,KAAlB,EAAyB0xC,IAAI,CAACI,GAAL,CAASvH,IAAlC,EAAwCmH,IAAI,CAACI,GAAL,CAAStH,GAAjD,CAAb;AAEA,WAJD,MAIO,IAAKkH,IAAI,CAACI,GAAL,CAASplC,IAAT,KAAkB,SAAvB,EAAmC;AAEzC1F,YAAAA,MAAM,CAAC8qC,GAAP,GAAa,IAAI87D,OAAJ,CAAal8D,IAAI,CAACI,GAAL,CAAS9xC,KAAtB,EAA6B0xC,IAAI,CAACI,GAAL,CAASswD,OAAtC,CAAb;AAEA;AAED;;AAED;;AAED,WAAK,mBAAL;AAECp7F,QAAAA,MAAM,GAAG,IAAIkyD,iBAAJ,CAAuBxnB,IAAI,CAACynB,GAA5B,EAAiCznB,IAAI,CAAC0nB,MAAtC,EAA8C1nB,IAAI,CAACnH,IAAnD,EAAyDmH,IAAI,CAAClH,GAA9D,CAAT;AAEA,YAAKkH,IAAI,CAAC/yB,KAAL,KAAerb,SAApB,EAAgC0D,MAAM,CAAC2X,KAAP,GAAe+yB,IAAI,CAAC/yB,KAApB;AAChC,YAAK+yB,IAAI,CAAC2nB,IAAL,KAAc/1D,SAAnB,EAA+B0D,MAAM,CAACqyD,IAAP,GAAc3nB,IAAI,CAAC2nB,IAAnB;AAC/B,YAAK3nB,IAAI,CAAC6nB,SAAL,KAAmBj2D,SAAxB,EAAoC0D,MAAM,CAACuyD,SAAP,GAAmB7nB,IAAI,CAAC6nB,SAAxB;AACpC,YAAK7nB,IAAI,CAAC8nB,UAAL,KAAoBl2D,SAAzB,EAAqC0D,MAAM,CAACwyD,UAAP,GAAoB9nB,IAAI,CAAC8nB,UAAzB;AACrC,YAAK9nB,IAAI,CAAC4nB,IAAL,KAAch2D,SAAnB,EAA+B0D,MAAM,CAACsyD,IAAP,GAAcr3D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBsxB,IAAI,CAAC4nB,IAAxB,CAAd;AAE/B;;AAED,WAAK,oBAAL;AAECtyD,QAAAA,MAAM,GAAG,IAAIi6H,kBAAJ,CAAwBvvF,IAAI,CAAC1oC,IAA7B,EAAmC0oC,IAAI,CAACzoC,KAAxC,EAA+CyoC,IAAI,CAACxoC,GAApD,EAAyDwoC,IAAI,CAACvoC,MAA9D,EAAsEuoC,IAAI,CAACnH,IAA3E,EAAiFmH,IAAI,CAAClH,GAAtF,CAAT;AAEA,YAAKkH,IAAI,CAAC2nB,IAAL,KAAc/1D,SAAnB,EAA+B0D,MAAM,CAACqyD,IAAP,GAAc3nB,IAAI,CAAC2nB,IAAnB;AAC/B,YAAK3nB,IAAI,CAAC4nB,IAAL,KAAch2D,SAAnB,EAA+B0D,MAAM,CAACsyD,IAAP,GAAcr3D,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmBsxB,IAAI,CAAC4nB,IAAxB,CAAd;AAE/B;;AAED,WAAK,cAAL;AAECtyD,QAAAA,MAAM,GAAG,IAAIu6H,YAAJ,CAAkB7vF,IAAI,CAAC1xC,KAAvB,EAA8B0xC,IAAI,CAAC45C,SAAnC,CAAT;AAEA;;AAED,WAAK,kBAAL;AAECtkF,QAAAA,MAAM,GAAG,IAAIs6H,gBAAJ,CAAsB5vF,IAAI,CAAC1xC,KAA3B,EAAkC0xC,IAAI,CAAC45C,SAAvC,CAAT;AAEA;;AAED,WAAK,YAAL;AAECtkF,QAAAA,MAAM,GAAG,IAAIg6H,UAAJ,CAAgBtvF,IAAI,CAAC1xC,KAArB,EAA4B0xC,IAAI,CAAC45C,SAAjC,EAA4C55C,IAAI,CAAC/C,QAAjD,EAA2D+C,IAAI,CAAC0uB,KAAhE,CAAT;AAEA;;AAED,WAAK,eAAL;AAECp5D,QAAAA,MAAM,GAAG,IAAIw6H,aAAJ,CAAmB9vF,IAAI,CAAC1xC,KAAxB,EAA+B0xC,IAAI,CAAC45C,SAApC,EAA+C55C,IAAI,CAACxlC,KAApD,EAA2DwlC,IAAI,CAACvlC,MAAhE,CAAT;AAEA;;AAED,WAAK,WAAL;AAECnF,QAAAA,MAAM,GAAG,IAAI25H,SAAJ,CAAejvF,IAAI,CAAC1xC,KAApB,EAA2B0xC,IAAI,CAAC45C,SAAhC,EAA2C55C,IAAI,CAAC/C,QAAhD,EAA0D+C,IAAI,CAACte,KAA/D,EAAsEse,IAAI,CAACu6C,QAA3E,EAAqFv6C,IAAI,CAAC0uB,KAA1F,CAAT;AAEA;;AAED,WAAK,iBAAL;AAECp5D,QAAAA,MAAM,GAAG,IAAI64H,eAAJ,CAAqBnuF,IAAI,CAAC1xC,KAA1B,EAAiC0xC,IAAI,CAACsvB,WAAtC,EAAmDtvB,IAAI,CAAC45C,SAAxD,CAAT;AAEA;;AAED,WAAK,YAAL;AAECtkF,QAAAA,MAAM,GAAG,IAAIk7H,UAAJ,GAAiBnI,QAAjB,CAA2BroF,IAA3B,CAAT;AAEA;;AAED,WAAK,aAAL;AAEC1gB,QAAAA,OAAO,CAACC,IAAR,CAAc,oEAAd;;AAED,WAAK,MAAL;AAECigB,QAAAA,QAAQ,GAAG4zF,WAAW,CAAEpzF,IAAI,CAACR,QAAP,CAAtB;AACAG,QAAAA,QAAQ,GAAG0zF,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAAtB;AAEArqC,QAAAA,MAAM,GAAG,IAAIupD,IAAJ,CAAUrf,QAAV,EAAoBG,QAApB,CAAT;AAEA;;AAED,WAAK,eAAL;AAECH,QAAAA,QAAQ,GAAG4zF,WAAW,CAAEpzF,IAAI,CAACR,QAAP,CAAtB;AACAG,QAAAA,QAAQ,GAAG0zF,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAAtB;AACA,cAAMV,KAAK,GAAGe,IAAI,CAACf,KAAnB;AACA,cAAMC,cAAc,GAAGc,IAAI,CAACd,cAA5B;AAEA5pC,QAAAA,MAAM,GAAG,IAAIwqG,aAAJ,CAAmBtgE,QAAnB,EAA6BG,QAA7B,EAAuCV,KAAvC,CAAT;AACA3pC,QAAAA,MAAM,CAAC4pC,cAAP,GAAwB,IAAI+V,eAAJ,CAAqB,IAAIoC,YAAJ,CAAkBnY,cAAc,CAACljB,KAAjC,CAArB,EAA+D,EAA/D,CAAxB;AAEA;;AAED,WAAK,KAAL;AAEC1mB,QAAAA,MAAM,GAAG,IAAI2oG,GAAJ,EAAT;AAEA;;AAED,WAAK,MAAL;AAEC3oG,QAAAA,MAAM,GAAG,IAAIorG,IAAJ,CAAU0yB,WAAW,CAAEpzF,IAAI,CAACR,QAAP,CAArB,EAAwC6zF,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAAnD,EAAsEK,IAAI,CAACugC,IAA3E,CAAT;AAEA;;AAED,WAAK,UAAL;AAECjrE,QAAAA,MAAM,GAAG,IAAIisG,QAAJ,CAAc6xB,WAAW,CAAEpzF,IAAI,CAACR,QAAP,CAAzB,EAA4C6zF,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAAvD,CAAT;AAEA;;AAED,WAAK,cAAL;AAECrqC,QAAAA,MAAM,GAAG,IAAIgsG,YAAJ,CAAkB8xB,WAAW,CAAEpzF,IAAI,CAACR,QAAP,CAA7B,EAAgD6zF,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAA3D,CAAT;AAEA;;AAED,WAAK,YAAL;AACA,WAAK,QAAL;AAECrqC,QAAAA,MAAM,GAAG,IAAIssG,MAAJ,CAAYwxB,WAAW,CAAEpzF,IAAI,CAACR,QAAP,CAAvB,EAA0C6zF,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAArD,CAAT;AAEA;;AAED,WAAK,QAAL;AAECrqC,QAAAA,MAAM,GAAG,IAAIooG,MAAJ,CAAY21B,WAAW,CAAErzF,IAAI,CAACL,QAAP,CAAvB,CAAT;AAEA;;AAED,WAAK,OAAL;AAECrqC,QAAAA,MAAM,GAAG,IAAIg2F,KAAJ,EAAT;AAEA;;AAED;AAECh2F,QAAAA,MAAM,GAAG,IAAI6lC,QAAJ,EAAT;AArKF;;AAyKA7lC,IAAAA,MAAM,CAACsnB,IAAP,GAAcojB,IAAI,CAACpjB,IAAnB;AAEA,QAAKojB,IAAI,CAAC75B,IAAL,KAAcvU,SAAnB,EAA+B0D,MAAM,CAAC6Q,IAAP,GAAc65B,IAAI,CAAC75B,IAAnB;;AAE/B,QAAK65B,IAAI,CAACpa,MAAL,KAAgBh0B,SAArB,EAAiC;AAEhC0D,MAAAA,MAAM,CAACswB,MAAP,CAAcrD,SAAd,CAAyByd,IAAI,CAACpa,MAA9B;AAEA,UAAKoa,IAAI,CAAC/W,gBAAL,KAA0Br3B,SAA/B,EAA2C0D,MAAM,CAAC2zB,gBAAP,GAA0B+W,IAAI,CAAC/W,gBAA/B;AAC3C,UAAK3zB,MAAM,CAAC2zB,gBAAZ,EAA+B3zB,MAAM,CAACswB,MAAP,CAAc4S,SAAd,CAAyBljC,MAAM,CAAC+B,QAAhC,EAA0C/B,MAAM,CAACu5B,UAAjD,EAA6Dv5B,MAAM,CAAC0xB,KAApE;AAE/B,KAPD,MAOO;AAEN,UAAKgZ,IAAI,CAAC3oC,QAAL,KAAkBzF,SAAvB,EAAmC0D,MAAM,CAAC+B,QAAP,CAAgBkrB,SAAhB,CAA2Byd,IAAI,CAAC3oC,QAAhC;AACnC,UAAK2oC,IAAI,CAACnZ,QAAL,KAAkBj1B,SAAvB,EAAmC0D,MAAM,CAACuxB,QAAP,CAAgBtE,SAAhB,CAA2Byd,IAAI,CAACnZ,QAAhC;AACnC,UAAKmZ,IAAI,CAACnR,UAAL,KAAoBj9B,SAAzB,EAAqC0D,MAAM,CAACu5B,UAAP,CAAkBtM,SAAlB,CAA6Byd,IAAI,CAACnR,UAAlC;AACrC,UAAKmR,IAAI,CAAChZ,KAAL,KAAep1B,SAApB,EAAgC0D,MAAM,CAAC0xB,KAAP,CAAazE,SAAb,CAAwByd,IAAI,CAAChZ,KAA7B;AAEhC;;AAED,QAAKgZ,IAAI,CAACjE,UAAL,KAAoBnqC,SAAzB,EAAqC0D,MAAM,CAACymC,UAAP,GAAoBiE,IAAI,CAACjE,UAAzB;AACrC,QAAKiE,IAAI,CAAChE,aAAL,KAAuBpqC,SAA5B,EAAwC0D,MAAM,CAAC0mC,aAAP,GAAuBgE,IAAI,CAAChE,aAA5B;;AAExC,QAAKgE,IAAI,CAAC06B,MAAV,EAAmB;AAElB,UAAK16B,IAAI,CAAC06B,MAAL,CAAYyf,IAAZ,KAAqBvoF,SAA1B,EAAsC0D,MAAM,CAAColE,MAAP,CAAcyf,IAAd,GAAqBn6C,IAAI,CAAC06B,MAAL,CAAYyf,IAAjC;AACtC,UAAKn6C,IAAI,CAAC06B,MAAL,CAAY0f,UAAZ,KAA2BxoF,SAAhC,EAA4C0D,MAAM,CAAColE,MAAP,CAAc0f,UAAd,GAA2Bp6C,IAAI,CAAC06B,MAAL,CAAY0f,UAAvC;AAC5C,UAAKp6C,IAAI,CAAC06B,MAAL,CAAY9mC,MAAZ,KAAuBhiC,SAA5B,EAAwC0D,MAAM,CAAColE,MAAP,CAAc9mC,MAAd,GAAuBoM,IAAI,CAAC06B,MAAL,CAAY9mC,MAAnC;AACxC,UAAKoM,IAAI,CAAC06B,MAAL,CAAY2f,OAAZ,KAAwBzoF,SAA7B,EAAyC0D,MAAM,CAAColE,MAAP,CAAc2f,OAAd,CAAsB93D,SAAtB,CAAiCyd,IAAI,CAAC06B,MAAL,CAAY2f,OAA7C;AACzC,UAAKr6C,IAAI,CAAC06B,MAAL,CAAYroC,MAAZ,KAAuBzgC,SAA5B,EAAwC0D,MAAM,CAAColE,MAAP,CAAcroC,MAAd,GAAuB,KAAKogG,WAAL,CAAkBzyF,IAAI,CAAC06B,MAAL,CAAYroC,MAA9B,CAAvB;AAExC;;AAED,QAAK2N,IAAI,CAAClE,OAAL,KAAiBlqC,SAAtB,EAAkC0D,MAAM,CAACwmC,OAAP,GAAiBkE,IAAI,CAAClE,OAAtB;AAClC,QAAKkE,IAAI,CAAC/D,aAAL,KAAuBrqC,SAA5B,EAAwC0D,MAAM,CAAC2mC,aAAP,GAAuB+D,IAAI,CAAC/D,aAA5B;AACxC,QAAK+D,IAAI,CAAC9D,WAAL,KAAqBtqC,SAA1B,EAAsC0D,MAAM,CAAC4mC,WAAP,GAAqB8D,IAAI,CAAC9D,WAA1B;AACtC,QAAK8D,IAAI,CAAC7D,QAAL,KAAkBvqC,SAAvB,EAAmC0D,MAAM,CAAC6mC,QAAP,GAAkB6D,IAAI,CAAC7D,QAAvB;AACnC,QAAK6D,IAAI,CAAC3F,MAAL,KAAgBzoC,SAArB,EAAiC0D,MAAM,CAAC+kC,MAAP,CAAcP,IAAd,GAAqBkG,IAAI,CAAC3F,MAA1B;;AAEjC,QAAK2F,IAAI,CAAC5E,QAAL,KAAkBxpC,SAAvB,EAAmC;AAElC,YAAMwpC,QAAQ,GAAG4E,IAAI,CAAC5E,QAAtB;;AAEA,WAAM,IAAIvqC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGuqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,EAAvC,EAA6C;AAE5CyE,QAAAA,MAAM,CAACkT,GAAP,CAAY,KAAKiqH,WAAL,CAAkBr3F,QAAQ,CAAEvqC,CAAF,CAA1B,EAAiCguC,UAAjC,EAA6CC,SAA7C,CAAZ;AAEA;AAED;;AAED,QAAKkB,IAAI,CAAChlC,IAAL,KAAc,KAAnB,EAA2B;AAE1B,UAAKglC,IAAI,CAACM,UAAL,KAAoB1uC,SAAzB,EAAqC0D,MAAM,CAACgrC,UAAP,GAAoBN,IAAI,CAACM,UAAzB;AAErC,YAAM69D,MAAM,GAAGn+D,IAAI,CAACm+D,MAApB;;AAEA,WAAM,IAAIltG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGktG,MAAM,CAAC3uG,MAA5B,EAAoCyB,CAAC,EAArC,EAA2C;AAE1C,cAAMwqG,KAAK,GAAG0C,MAAM,CAAEltG,CAAF,CAApB;AACA,cAAM+sC,KAAK,GAAG1oC,MAAM,CAACwoC,mBAAP,CAA4B,MAA5B,EAAoC29D,KAAK,CAACnmG,MAA1C,CAAd;;AAEA,YAAK0oC,KAAK,KAAKpsC,SAAf,EAA2B;AAE1B0D,UAAAA,MAAM,CAAC8oG,QAAP,CAAiBpgE,KAAjB,EAAwBy9D,KAAK,CAACx+D,QAA9B;AAEA;AAED;AAED;;AAED,WAAO3nC,MAAP;AAEA;AA94ByE,CAAlD,CAAzB;AAk5BA,MAAM29H,eAAe,GAAG;AACvBhgH,EAAAA,SAAS,EAAEA,SADY;AAEvBC,EAAAA,qBAAqB,EAAEA,qBAFA;AAGvBC,EAAAA,qBAAqB,EAAEA,qBAHA;AAIvBC,EAAAA,gCAAgC,EAAEA,gCAJX;AAKvBC,EAAAA,gCAAgC,EAAEA,gCALX;AAMvBC,EAAAA,uBAAuB,EAAEA,uBANF;AAOvBC,EAAAA,uBAAuB,EAAEA;AAPF,CAAxB;AAUA,MAAM2/G,gBAAgB,GAAG;AACxB1/G,EAAAA,cAAc,EAAEA,cADQ;AAExBC,EAAAA,mBAAmB,EAAEA,mBAFG;AAGxBC,EAAAA,sBAAsB,EAAEA;AAHA,CAAzB;AAMA,MAAMy/G,cAAc,GAAG;AACtBx/G,EAAAA,aAAa,EAAEA,aADO;AAEtBC,EAAAA,0BAA0B,EAAEA,0BAFN;AAGtBE,EAAAA,yBAAyB,EAAEA,yBAHL;AAItBE,EAAAA,YAAY,EAAEA,YAJQ;AAKtBC,EAAAA,yBAAyB,EAAEA,yBALL;AAMtBE,EAAAA,wBAAwB,EAAEA;AANJ,CAAvB;AASA;;;;AAKA,SAASm/G,iBAAT,CAA4BtQ,OAA5B,EAAsC;AAErC,MAAK,OAAOuQ,iBAAP,KAA6B,WAAlC,EAAgD;AAE/Cj0G,IAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AAEA;;AAED,MAAK,OAAOi0G,KAAP,KAAiB,WAAtB,EAAoC;AAEnCl0G,IAAAA,OAAO,CAACC,IAAR,CAAc,iDAAd;AAEA;;AAEDwjG,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA,OAAKnnH,OAAL,GAAe;AAAEstB,IAAAA,gBAAgB,EAAE;AAApB,GAAf;AAEA;;AAEDmqG,iBAAiB,CAAC3jI,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAE/EoC,EAAAA,WAAW,EAAEuhI,iBAFkE;AAI/EG,EAAAA,mBAAmB,EAAE,IAJ0D;AAM/EC,EAAAA,UAAU,EAAE,SAASA,UAAT,CAAqB73H,OAArB,EAA+B;AAE1C,SAAKA,OAAL,GAAeA,OAAf;AAEA,WAAO,IAAP;AAEA,GAZ8E;AAc/EuJ,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,QAAK9/G,GAAG,KAAKlQ,SAAb,EAAyBkQ,GAAG,GAAG,EAAN;AAEzB,QAAK,KAAKwpE,IAAL,KAAc15E,SAAnB,EAA+BkQ,GAAG,GAAG,KAAKwpE,IAAL,GAAYxpE,GAAlB;AAE/BA,IAAAA,GAAG,GAAG,KAAKkhH,OAAL,CAAaV,UAAb,CAAyBxgH,GAAzB,CAAN;AAEA,UAAM9Q,KAAK,GAAG,IAAd;AAEA,UAAM8yH,MAAM,GAAGxC,KAAK,CAAC7yG,GAAN,CAAW3M,GAAX,CAAf;;AAEA,QAAKgiH,MAAM,KAAKlyH,SAAhB,EAA4B;AAE3BZ,MAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEApQ,MAAAA,UAAU,CAAE,YAAY;AAEvB,YAAKgwH,MAAL,EAAcA,MAAM,CAAEoC,MAAF,CAAN;AAEd9yH,QAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,OANS,EAMP,CANO,CAAV;AAQA,aAAOgiH,MAAP;AAEA;;AAED0P,IAAAA,KAAK,CAAE1xH,GAAF,CAAL,CAAa0sF,IAAb,CAAmB,UAAWmlC,GAAX,EAAiB;AAEnC,aAAOA,GAAG,CAACC,IAAJ,EAAP;AAEA,KAJD,EAIIplC,IAJJ,CAIU,UAAWolC,IAAX,EAAkB;AAE3B,aAAOL,iBAAiB,CAAEK,IAAF,EAAQ5iI,KAAK,CAAC6K,OAAd,CAAxB;AAEA,KARD,EAQI2yF,IARJ,CAQU,UAAWqlC,WAAX,EAAyB;AAElCvS,MAAAA,KAAK,CAAC94G,GAAN,CAAW1G,GAAX,EAAgB+xH,WAAhB;AAEA,UAAKnS,MAAL,EAAcA,MAAM,CAAEmS,WAAF,CAAN;AAEd7iI,MAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,KAhBD,EAgBIgyH,KAhBJ,CAgBW,UAAW19H,CAAX,EAAe;AAEzB,UAAKwrH,OAAL,EAAeA,OAAO,CAAExrH,CAAF,CAAP;AAEfpF,MAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AACA9Q,MAAAA,KAAK,CAACgyH,OAAN,CAAcZ,OAAd,CAAuBtgH,GAAvB;AAEA,KAvBD;AAyBA9Q,IAAAA,KAAK,CAACgyH,OAAN,CAAcb,SAAd,CAAyBrgH,GAAzB;AAEA;AArE8E,CAAlD,CAA9B;AAyEA;;;;;AAKA,SAASiyH,SAAT,GAAqB;AAEpB,OAAK/4H,IAAL,GAAY,WAAZ;AAEA,OAAK1M,KAAL,GAAa,IAAI4F,KAAJ,EAAb;AAEA,OAAK8/H,QAAL,GAAgB,EAAhB;AACA,OAAKC,WAAL,GAAmB,IAAnB;AAEA;;AAED1jI,MAAM,CAACme,MAAP,CAAeqlH,SAAS,CAACpkI,SAAzB,EAAoC;AAEnCm9H,EAAAA,MAAM,EAAE,UAAW50H,CAAX,EAAcE,CAAd,EAAkB;AAEzB,SAAK67H,WAAL,GAAmB,IAAIrH,IAAJ,EAAnB;AACA,SAAKoH,QAAL,CAAch6H,IAAd,CAAoB,KAAKi6H,WAAzB;AACA,SAAKA,WAAL,CAAiBnH,MAAjB,CAAyB50H,CAAzB,EAA4BE,CAA5B;AAEA,WAAO,IAAP;AAEA,GAVkC;AAYnC20H,EAAAA,MAAM,EAAE,UAAW70H,CAAX,EAAcE,CAAd,EAAkB;AAEzB,SAAK67H,WAAL,CAAiBlH,MAAjB,CAAyB70H,CAAzB,EAA4BE,CAA5B;AAEA,WAAO,IAAP;AAEA,GAlBkC;AAoBnC40H,EAAAA,gBAAgB,EAAE,UAAWC,IAAX,EAAiBC,IAAjB,EAAuB3E,EAAvB,EAA2BC,EAA3B,EAAgC;AAEjD,SAAKyL,WAAL,CAAiBjH,gBAAjB,CAAmCC,IAAnC,EAAyCC,IAAzC,EAA+C3E,EAA/C,EAAmDC,EAAnD;AAEA,WAAO,IAAP;AAEA,GA1BkC;AA4BnC2E,EAAAA,aAAa,EAAE,UAAWC,KAAX,EAAkBC,KAAlB,EAAyBC,KAAzB,EAAgCC,KAAhC,EAAuChF,EAAvC,EAA2CC,EAA3C,EAAgD;AAE9D,SAAKyL,WAAL,CAAiB9G,aAAjB,CAAgCC,KAAhC,EAAuCC,KAAvC,EAA8CC,KAA9C,EAAqDC,KAArD,EAA4DhF,EAA5D,EAAgEC,EAAhE;AAEA,WAAO,IAAP;AAEA,GAlCkC;AAoCnCgF,EAAAA,UAAU,EAAE,UAAWrhB,GAAX,EAAiB;AAE5B,SAAK8nB,WAAL,CAAiBzG,UAAjB,CAA6BrhB,GAA7B;AAEA,WAAO,IAAP;AAEA,GA1CkC;AA4CnC+nB,EAAAA,QAAQ,EAAE,UAAWC,KAAX,EAAkBC,OAAlB,EAA4B;AAErC,aAASC,eAAT,CAA0BC,UAA1B,EAAuC;AAEtC,YAAMv1F,MAAM,GAAG,EAAf;;AAEA,WAAM,IAAIluC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGqjI,UAAU,CAAC9kI,MAAhC,EAAwCqB,CAAC,GAAGI,CAA5C,EAA+CJ,CAAC,EAAhD,EAAsD;AAErD,cAAM0jI,OAAO,GAAGD,UAAU,CAAEzjI,CAAF,CAA1B;AAEA,cAAM2jI,QAAQ,GAAG,IAAIzG,KAAJ,EAAjB;AACAyG,QAAAA,QAAQ,CAACvI,MAAT,GAAkBsI,OAAO,CAACtI,MAA1B;AAEAltF,QAAAA,MAAM,CAAC/kC,IAAP,CAAaw6H,QAAb;AAEA;;AAED,aAAOz1F,MAAP;AAEA;;AAED,aAAS01F,oBAAT,CAA+B9lB,IAA/B,EAAqC+lB,SAArC,EAAiD;AAEhD,YAAMC,OAAO,GAAGD,SAAS,CAACllI,MAA1B,CAFgD,CAIhD;AACA;AACA;AACA;;AACA,UAAIm8G,MAAM,GAAG,KAAb;;AACA,WAAM,IAAIp4G,CAAC,GAAGohI,OAAO,GAAG,CAAlB,EAAqBnhI,CAAC,GAAG,CAA/B,EAAkCA,CAAC,GAAGmhI,OAAtC,EAA+CphI,CAAC,GAAGC,CAAC,EAApD,EAA0D;AAEzD,YAAIohI,SAAS,GAAGF,SAAS,CAAEnhI,CAAF,CAAzB;AACA,YAAIshI,UAAU,GAAGH,SAAS,CAAElhI,CAAF,CAA1B;AAEA,YAAIshI,MAAM,GAAGD,UAAU,CAAC38H,CAAX,GAAe08H,SAAS,CAAC18H,CAAtC;AACA,YAAI68H,MAAM,GAAGF,UAAU,CAACz8H,CAAX,GAAew8H,SAAS,CAACx8H,CAAtC;;AAEA,YAAKvJ,IAAI,CAACwO,GAAL,CAAU03H,MAAV,IAAqB3mH,MAAM,CAACC,OAAjC,EAA2C;AAE1C;AACA,cAAK0mH,MAAM,GAAG,CAAd,EAAkB;AAEjBH,YAAAA,SAAS,GAAGF,SAAS,CAAElhI,CAAF,CAArB;AAA4BshI,YAAAA,MAAM,GAAG,CAAEA,MAAX;AAC5BD,YAAAA,UAAU,GAAGH,SAAS,CAAEnhI,CAAF,CAAtB;AAA6BwhI,YAAAA,MAAM,GAAG,CAAEA,MAAX;AAE7B;;AAED,cAAOpmB,IAAI,CAACv2G,CAAL,GAASw8H,SAAS,CAACx8H,CAArB,IAA8Bu2G,IAAI,CAACv2G,CAAL,GAASy8H,UAAU,CAACz8H,CAAvD,EAA+D;;AAE/D,cAAKu2G,IAAI,CAACv2G,CAAL,KAAWw8H,SAAS,CAACx8H,CAA1B,EAA8B;AAE7B,gBAAKu2G,IAAI,CAACz2G,CAAL,KAAW08H,SAAS,CAAC18H,CAA1B,EAA+B,OAAO,IAAP,CAFF,CAEgB;AAC7C;AAEA,WALD,MAKO;AAEN,kBAAM88H,QAAQ,GAAGD,MAAM,IAAKpmB,IAAI,CAACz2G,CAAL,GAAS08H,SAAS,CAAC18H,CAAxB,CAAN,GAAoC48H,MAAM,IAAKnmB,IAAI,CAACv2G,CAAL,GAASw8H,SAAS,CAACx8H,CAAxB,CAA3D;AACA,gBAAK48H,QAAQ,KAAK,CAAlB,EAAyB,OAAO,IAAP,CAHnB,CAGiC;;AACvC,gBAAKA,QAAQ,GAAG,CAAhB,EAAwB;AACxBrpB,YAAAA,MAAM,GAAG,CAAEA,MAAX,CALM,CAKc;AAEpB;AAED,SA1BD,MA0BO;AAEN;AACA,cAAKgD,IAAI,CAACv2G,CAAL,KAAWw8H,SAAS,CAACx8H,CAA1B,EAAgC,SAH1B,CAGsC;AAC5C;;AACA,cAASy8H,UAAU,CAAC38H,CAAX,IAAgBy2G,IAAI,CAACz2G,CAAvB,IAAgCy2G,IAAI,CAACz2G,CAAL,IAAU08H,SAAS,CAAC18H,CAAtD,IACC08H,SAAS,CAAC18H,CAAV,IAAey2G,IAAI,CAACz2G,CAAtB,IAA+By2G,IAAI,CAACz2G,CAAL,IAAU28H,UAAU,CAAC38H,CADxD,EACiE,OAAO,IAAP,CAN3D,CAMwE;AAC9E;AAEA;AAED;;AAED,aAAOyzG,MAAP;AAEA;;AAED,UAAMO,WAAW,GAAGF,UAAU,CAACE,WAA/B;AAEA,UAAM8nB,QAAQ,GAAG,KAAKA,QAAtB;AACA,QAAKA,QAAQ,CAACxkI,MAAT,KAAoB,CAAzB,EAA6B,OAAO,EAAP;AAE7B,QAAK4kI,OAAO,KAAK,IAAjB,EAAwB,OAAOC,eAAe,CAAEL,QAAF,CAAtB;AAGxB,QAAIiB,KAAJ;AAAA,QAAWV,OAAX;AAAA,QAAoBC,QAApB;AAAA,QAA8Bz1F,MAAM,GAAG,EAAvC;;AAEA,QAAKi1F,QAAQ,CAACxkI,MAAT,KAAoB,CAAzB,EAA6B;AAE5B+kI,MAAAA,OAAO,GAAGP,QAAQ,CAAE,CAAF,CAAlB;AACAQ,MAAAA,QAAQ,GAAG,IAAIzG,KAAJ,EAAX;AACAyG,MAAAA,QAAQ,CAACvI,MAAT,GAAkBsI,OAAO,CAACtI,MAA1B;AACAltF,MAAAA,MAAM,CAAC/kC,IAAP,CAAaw6H,QAAb;AACA,aAAOz1F,MAAP;AAEA;;AAED,QAAIm2F,UAAU,GAAG,CAAEhpB,WAAW,CAAE8nB,QAAQ,CAAE,CAAF,CAAR,CAAclN,SAAd,EAAF,CAA9B;AACAoO,IAAAA,UAAU,GAAGf,KAAK,GAAG,CAAEe,UAAL,GAAkBA,UAApC,CAtGqC,CAwGrC;;AAEA,UAAMC,gBAAgB,GAAG,EAAzB;AACA,UAAMC,SAAS,GAAG,EAAlB;AACA,QAAIC,aAAa,GAAG,EAApB;AACA,QAAIC,OAAO,GAAG,CAAd;AACA,QAAIC,SAAJ;AAEAH,IAAAA,SAAS,CAAEE,OAAF,CAAT,GAAuB1jI,SAAvB;AACAyjI,IAAAA,aAAa,CAAEC,OAAF,CAAb,GAA2B,EAA3B;;AAEA,SAAM,IAAIzkI,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+iI,QAAQ,CAACxkI,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnD0jI,MAAAA,OAAO,GAAGP,QAAQ,CAAEnjI,CAAF,CAAlB;AACA0kI,MAAAA,SAAS,GAAGhB,OAAO,CAACzN,SAAR,EAAZ;AACAmO,MAAAA,KAAK,GAAG/oB,WAAW,CAAEqpB,SAAF,CAAnB;AACAN,MAAAA,KAAK,GAAGd,KAAK,GAAG,CAAEc,KAAL,GAAaA,KAA1B;;AAEA,UAAKA,KAAL,EAAa;AAEZ,YAAO,CAAEC,UAAJ,IAAsBE,SAAS,CAAEE,OAAF,CAApC,EAAoDA,OAAO;AAE3DF,QAAAA,SAAS,CAAEE,OAAF,CAAT,GAAuB;AAAEnmI,UAAAA,CAAC,EAAE,IAAI4+H,KAAJ,EAAL;AAAkBx6H,UAAAA,CAAC,EAAEgiI;AAArB,SAAvB;AACAH,QAAAA,SAAS,CAAEE,OAAF,CAAT,CAAqBnmI,CAArB,CAAuB88H,MAAvB,GAAgCsI,OAAO,CAACtI,MAAxC;AAEA,YAAKiJ,UAAL,EAAkBI,OAAO;AACzBD,QAAAA,aAAa,CAAEC,OAAF,CAAb,GAA2B,EAA3B,CARY,CAUZ;AAEA,OAZD,MAYO;AAEND,QAAAA,aAAa,CAAEC,OAAF,CAAb,CAAyBt7H,IAAzB,CAA+B;AAAE9K,UAAAA,CAAC,EAAEqlI,OAAL;AAAchhI,UAAAA,CAAC,EAAEgiI,SAAS,CAAE,CAAF;AAA1B,SAA/B,EAFM,CAIN;AAEA;AAED,KA9IoC,CAgJrC;;;AACA,QAAK,CAAEH,SAAS,CAAE,CAAF,CAAhB,EAAwB,OAAOf,eAAe,CAAEL,QAAF,CAAtB;;AAGxB,QAAKoB,SAAS,CAAC5lI,MAAV,GAAmB,CAAxB,EAA4B;AAE3B,UAAIgmI,SAAS,GAAG,KAAhB;AACA,YAAMC,QAAQ,GAAG,EAAjB;;AAEA,WAAM,IAAIC,IAAI,GAAG,CAAX,EAAcC,IAAI,GAAGP,SAAS,CAAC5lI,MAArC,EAA6CkmI,IAAI,GAAGC,IAApD,EAA0DD,IAAI,EAA9D,EAAoE;AAEnEP,QAAAA,gBAAgB,CAAEO,IAAF,CAAhB,GAA2B,EAA3B;AAEA;;AAED,WAAM,IAAIA,IAAI,GAAG,CAAX,EAAcC,IAAI,GAAGP,SAAS,CAAC5lI,MAArC,EAA6CkmI,IAAI,GAAGC,IAApD,EAA0DD,IAAI,EAA9D,EAAoE;AAEnE,cAAME,GAAG,GAAGP,aAAa,CAAEK,IAAF,CAAzB;;AAEA,aAAM,IAAIG,IAAI,GAAG,CAAjB,EAAoBA,IAAI,GAAGD,GAAG,CAACpmI,MAA/B,EAAuCqmI,IAAI,EAA3C,EAAiD;AAEhD,gBAAMC,EAAE,GAAGF,GAAG,CAAEC,IAAF,CAAd;AACA,cAAIE,eAAe,GAAG,IAAtB;;AAEA,eAAM,IAAIC,KAAK,GAAG,CAAlB,EAAqBA,KAAK,GAAGZ,SAAS,CAAC5lI,MAAvC,EAA+CwmI,KAAK,EAApD,EAA0D;AAEzD,gBAAKvB,oBAAoB,CAAEqB,EAAE,CAACviI,CAAL,EAAQ6hI,SAAS,CAAEY,KAAF,CAAT,CAAmBziI,CAA3B,CAAzB,EAA0D;AAEzD,kBAAKmiI,IAAI,KAAKM,KAAd,EAAsBP,QAAQ,CAACz7H,IAAT,CAAe;AAAEi8H,gBAAAA,KAAK,EAAEP,IAAT;AAAeQ,gBAAAA,GAAG,EAAEF,KAApB;AAA2B9rB,gBAAAA,IAAI,EAAE2rB;AAAjC,eAAf;;AACtB,kBAAKE,eAAL,EAAuB;AAEtBA,gBAAAA,eAAe,GAAG,KAAlB;AACAZ,gBAAAA,gBAAgB,CAAEa,KAAF,CAAhB,CAA0Bh8H,IAA1B,CAAgC87H,EAAhC;AAEA,eALD,MAKO;AAENN,gBAAAA,SAAS,GAAG,IAAZ;AAEA;AAED;AAED;;AAED,cAAKO,eAAL,EAAuB;AAEtBZ,YAAAA,gBAAgB,CAAEO,IAAF,CAAhB,CAAyB17H,IAAzB,CAA+B87H,EAA/B;AAEA;AAED;AAED,OAhD0B,CAiD3B;;;AAEA,UAAKL,QAAQ,CAACjmI,MAAT,GAAkB,CAAvB,EAA2B;AAE1B;AACA,YAAK,CAAEgmI,SAAP,EAAmBH,aAAa,GAAGF,gBAAhB;AAEnB;AAED;;AAED,QAAIgB,QAAJ;;AAEA,SAAM,IAAItlI,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAG8yF,SAAS,CAAC5lI,MAAhC,EAAwCqB,CAAC,GAAGyxC,EAA5C,EAAgDzxC,CAAC,EAAjD,EAAuD;AAEtD2jI,MAAAA,QAAQ,GAAGY,SAAS,CAAEvkI,CAAF,CAAT,CAAe1B,CAA1B;AACA4vC,MAAAA,MAAM,CAAC/kC,IAAP,CAAaw6H,QAAb;AACA2B,MAAAA,QAAQ,GAAGd,aAAa,CAAExkI,CAAF,CAAxB;;AAEA,WAAM,IAAI6zC,CAAC,GAAG,CAAR,EAAWiX,EAAE,GAAGw6E,QAAQ,CAAC3mI,MAA/B,EAAuCk1C,CAAC,GAAGiX,EAA3C,EAA+CjX,CAAC,EAAhD,EAAsD;AAErD8vF,QAAAA,QAAQ,CAACnoB,KAAT,CAAeryG,IAAf,CAAqBm8H,QAAQ,CAAEzxF,CAAF,CAAR,CAAcx1C,CAAnC;AAEA;AAED,KA9NoC,CAgOrC;;;AAEA,WAAO6vC,MAAP;AAEA;AAhRkC,CAApC;AAoRA;;;;;AAMA,SAASq3F,IAAT,CAAep2F,IAAf,EAAsB;AAErB,OAAKhlC,IAAL,GAAY,MAAZ;AAEA,OAAKglC,IAAL,GAAYA,IAAZ;AAEA;;AAEDzvC,MAAM,CAACme,MAAP,CAAe0nH,IAAI,CAACzmI,SAApB,EAA+B;AAE9B6iH,EAAAA,MAAM,EAAE,IAFsB;AAI9BC,EAAAA,cAAc,EAAE,UAAW/yG,IAAX,EAAiB+iC,IAAjB,EAAwB;AAEvC,QAAKA,IAAI,KAAK7wC,SAAd,EAA0B6wC,IAAI,GAAG,GAAP;AAE1B,UAAM1D,MAAM,GAAG,EAAf;AACA,UAAMs3F,KAAK,GAAGC,WAAW,CAAE52H,IAAF,EAAQ+iC,IAAR,EAAc,KAAKzC,IAAnB,CAAzB;;AAEA,SAAM,IAAIzsC,CAAC,GAAG,CAAR,EAAWojF,EAAE,GAAG0/C,KAAK,CAAC7mI,MAA5B,EAAoC+D,CAAC,GAAGojF,EAAxC,EAA4CpjF,CAAC,EAA7C,EAAmD;AAElD7D,MAAAA,KAAK,CAACC,SAAN,CAAgBqK,IAAhB,CAAqBlJ,KAArB,CAA4BiuC,MAA5B,EAAoCs3F,KAAK,CAAE9iI,CAAF,CAAL,CAAW2gI,QAAX,EAApC;AAEA;;AAED,WAAOn1F,MAAP;AAEA;AAnB6B,CAA/B;;AAuBA,SAASu3F,WAAT,CAAsB52H,IAAtB,EAA4B+iC,IAA5B,EAAkCzC,IAAlC,EAAyC;AAExC,QAAMu2F,KAAK,GAAG7mI,KAAK,CAACgnH,IAAN,GAAahnH,KAAK,CAACgnH,IAAN,CAAYh3G,IAAZ,CAAb,GAAkCw/C,MAAM,CAAEx/C,IAAF,CAAN,CAAe5F,KAAf,CAAsB,EAAtB,CAAhD,CAFwC,CAEoC;;AAC5E,QAAMktB,KAAK,GAAGyb,IAAI,GAAGzC,IAAI,CAACw8C,UAA1B;AACA,QAAMg6C,WAAW,GAAG,CAAEx2F,IAAI,CAACmD,WAAL,CAAiBszF,IAAjB,GAAwBz2F,IAAI,CAACmD,WAAL,CAAiBuzF,IAAzC,GAAgD12F,IAAI,CAAC22F,kBAAvD,IAA8E3vG,KAAlG;AAEA,QAAMqvG,KAAK,GAAG,EAAd;AAEA,MAAIxtE,OAAO,GAAG,CAAd;AAAA,MAAiBC,OAAO,GAAG,CAA3B;;AAEA,OAAM,IAAIj4D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG0lI,KAAK,CAAC/mI,MAA3B,EAAmCqB,CAAC,EAApC,EAA0C;AAEzC,UAAM+lI,IAAI,GAAGL,KAAK,CAAE1lI,CAAF,CAAlB;;AAEA,QAAK+lI,IAAI,KAAK,IAAd,EAAqB;AAEpB/tE,MAAAA,OAAO,GAAG,CAAV;AACAC,MAAAA,OAAO,IAAI0tE,WAAX;AAEA,KALD,MAKO;AAEN,YAAMK,GAAG,GAAGC,UAAU,CAAEF,IAAF,EAAQ5vG,KAAR,EAAe6hC,OAAf,EAAwBC,OAAxB,EAAiC9oB,IAAjC,CAAtB;AACA6oB,MAAAA,OAAO,IAAIguE,GAAG,CAAChuE,OAAf;AACAwtE,MAAAA,KAAK,CAACr8H,IAAN,CAAY68H,GAAG,CAACvrD,IAAhB;AAEA;AAED;;AAED,SAAO+qD,KAAP;AAEA;;AAED,SAASS,UAAT,CAAqBF,IAArB,EAA2B5vG,KAA3B,EAAkC6hC,OAAlC,EAA2CC,OAA3C,EAAoD9oB,IAApD,EAA2D;AAE1D,QAAM+2F,KAAK,GAAG/2F,IAAI,CAACg3F,MAAL,CAAaJ,IAAb,KAAuB52F,IAAI,CAACg3F,MAAL,CAAa,GAAb,CAArC;;AAEA,MAAK,CAAED,KAAP,EAAe;AAEdz3G,IAAAA,OAAO,CAACyD,KAAR,CAAe,4BAA4B6zG,IAA5B,GAAmC,mCAAnC,GAAyE52F,IAAI,CAACi3F,UAA9E,GAA2F,GAA1G;AAEA;AAEA;;AAED,QAAM3rD,IAAI,GAAG,IAAIyoD,SAAJ,EAAb;AAEA,MAAI77H,CAAJ,EAAOE,CAAP,EAAU8+H,GAAV,EAAeC,GAAf,EAAoBC,IAApB,EAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,IAAtC;;AAEA,MAAKR,KAAK,CAACj0B,CAAX,EAAe;AAEd,UAAM00B,OAAO,GAAGT,KAAK,CAACU,cAAN,KAA0BV,KAAK,CAACU,cAAN,GAAuBV,KAAK,CAACj0B,CAAN,CAAQhpG,KAAR,CAAe,GAAf,CAAjD,CAAhB;;AAEA,SAAM,IAAIjJ,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGumI,OAAO,CAAChoI,MAA7B,EAAqCqB,CAAC,GAAGI,CAAzC,GAA8C;AAE7C,YAAMymI,MAAM,GAAGF,OAAO,CAAE3mI,CAAC,EAAH,CAAtB;;AAEA,cAAS6mI,MAAT;AAEC,aAAK,GAAL;AAAU;AAETx/H,UAAAA,CAAC,GAAGs/H,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAA9B;AACAzwD,UAAAA,CAAC,GAAGo/H,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAA9B;AAEAwiB,UAAAA,IAAI,CAACwhD,MAAL,CAAa50H,CAAb,EAAgBE,CAAhB;AAEA;;AAED,aAAK,GAAL;AAAU;AAETF,UAAAA,CAAC,GAAGs/H,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAA9B;AACAzwD,UAAAA,CAAC,GAAGo/H,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAA9B;AAEAwiB,UAAAA,IAAI,CAACyhD,MAAL,CAAa70H,CAAb,EAAgBE,CAAhB;AAEA;;AAED,aAAK,GAAL;AAAU;AAET8+H,UAAAA,GAAG,GAAGM,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAAhC;AACAsuE,UAAAA,GAAG,GAAGK,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAAhC;AACAsuE,UAAAA,IAAI,GAAGI,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAAjC;AACAwuE,UAAAA,IAAI,GAAGG,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAAjC;AAEAwiB,UAAAA,IAAI,CAAC0hD,gBAAL,CAAuBoK,IAAvB,EAA6BC,IAA7B,EAAmCH,GAAnC,EAAwCC,GAAxC;AAEA;;AAED,aAAK,GAAL;AAAU;AAETD,UAAAA,GAAG,GAAGM,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAAhC;AACAsuE,UAAAA,GAAG,GAAGK,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAAhC;AACAsuE,UAAAA,IAAI,GAAGI,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAAjC;AACAwuE,UAAAA,IAAI,GAAGG,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAAjC;AACAwuE,UAAAA,IAAI,GAAGE,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B6hC,OAAjC;AACA0uE,UAAAA,IAAI,GAAGC,OAAO,CAAE3mI,CAAC,EAAH,CAAP,GAAkBm2B,KAAlB,GAA0B8hC,OAAjC;AAEAwiB,UAAAA,IAAI,CAAC6hD,aAAL,CAAoBiK,IAApB,EAA0BC,IAA1B,EAAgCC,IAAhC,EAAsCC,IAAtC,EAA4CL,GAA5C,EAAiDC,GAAjD;AAEA;AA1CF;AA8CA;AAED;;AAED,SAAO;AAAEtuE,IAAAA,OAAO,EAAEkuE,KAAK,CAACY,EAAN,GAAW3wG,KAAtB;AAA6BskD,IAAAA,IAAI,EAAEA;AAAnC,GAAP;AAEA;AAED;;;;;AAIA,SAASssD,UAAT,CAAqB5U,OAArB,EAA+B;AAE9BD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAED4U,UAAU,CAACjoI,SAAX,GAAuBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAExEoC,EAAAA,WAAW,EAAE6lI,UAF2D;AAIxExyH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAM0xH,MAAM,GAAG,IAAImB,UAAJ,CAAgB,KAAKb,OAArB,CAAf;AACAN,IAAAA,MAAM,CAACe,OAAP,CAAgB,KAAKn4C,IAArB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAWpC,IAAX,EAAkB;AAEnC,UAAIw9G,IAAJ;;AAEA,UAAI;AAEHA,QAAAA,IAAI,GAAGr2G,IAAI,CAACC,KAAL,CAAYpH,IAAZ,CAAP;AAEA,OAJD,CAIE,OAAQtJ,CAAR,EAAY;AAEbkpB,QAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA29F,QAAAA,IAAI,GAAGr2G,IAAI,CAACC,KAAL,CAAYpH,IAAI,CAACm4H,SAAL,CAAgB,EAAhB,EAAoBn4H,IAAI,CAAClQ,MAAL,GAAc,CAAlC,CAAZ,CAAP;AAEA;;AAED,YAAM+iH,IAAI,GAAGvhH,KAAK,CAAC8V,KAAN,CAAao2G,IAAb,CAAb;AAEA,UAAKwE,MAAL,EAAcA,MAAM,CAAEnP,IAAF,CAAN;AAEd,KAnBD,EAmBGoP,UAnBH,EAmBeC,OAnBf;AAqBA,GA/BuE;AAiCxE96G,EAAAA,KAAK,EAAE,UAAWo2G,IAAX,EAAkB;AAExB,WAAO,IAAIkZ,IAAJ,CAAUlZ,IAAV,CAAP;AAEA;AArCuE,CAAlD,CAAvB;AAyCA;;;;AAIA,IAAIzqB,QAAJ;;AAEA,MAAMqlC,YAAY,GAAG;AAEpBjwG,EAAAA,UAAU,EAAE,YAAY;AAEvB,QAAK4qE,QAAQ,KAAK7gG,SAAlB,EAA8B;AAE7B6gG,MAAAA,QAAQ,GAAG,KAAMj6F,MAAM,CAACs/H,YAAP,IAAuBt/H,MAAM,CAACu/H,kBAApC,GAAX;AAEA;;AAED,WAAOtlC,QAAP;AAEA,GAZmB;AAcpBviC,EAAAA,UAAU,EAAE,UAAWj8D,KAAX,EAAmB;AAE9Bw+F,IAAAA,QAAQ,GAAGx+F,KAAX;AAEA;AAlBmB,CAArB;AAsBA;;;;;;AAIA,SAAS+jI,WAAT,CAAsBhV,OAAtB,EAAgC;AAE/BD,EAAAA,MAAM,CAAC7yH,IAAP,CAAa,IAAb,EAAmB8yH,OAAnB;AAEA;;AAEDgV,WAAW,CAACroI,SAAZ,GAAwBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeu5F,MAAM,CAACpzH,SAAtB,CAAf,EAAkD;AAEzEoC,EAAAA,WAAW,EAAEimI,WAF4D;AAIzE5yH,EAAAA,IAAI,EAAE,UAAWtD,GAAX,EAAgB4/G,MAAhB,EAAwBC,UAAxB,EAAoCC,OAApC,EAA8C;AAEnD,UAAM5wH,KAAK,GAAG,IAAd;AAEA,UAAM0xH,MAAM,GAAG,IAAImB,UAAJ,CAAgB7yH,KAAK,CAACgyH,OAAtB,CAAf;AACAN,IAAAA,MAAM,CAAC0C,eAAP,CAAwB,aAAxB;AACA1C,IAAAA,MAAM,CAACe,OAAP,CAAgBzyH,KAAK,CAACs6E,IAAtB;AACAo3C,IAAAA,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB,UAAW6uD,MAAX,EAAoB;AAErC,UAAI;AAEH;AACA;AACA,cAAMsnE,UAAU,GAAGtnE,MAAM,CAAC7gE,KAAP,CAAc,CAAd,CAAnB;AAEA,cAAM83B,OAAO,GAAGkwG,YAAY,CAACjwG,UAAb,EAAhB;AACAD,QAAAA,OAAO,CAACswG,eAAR,CAAyBD,UAAzB,EAAqC,UAAWE,WAAX,EAAyB;AAE7DzW,UAAAA,MAAM,CAAEyW,WAAF,CAAN;AAEA,SAJD;AAMA,OAbD,CAaE,OAAQ/hI,CAAR,EAAY;AAEb,YAAKwrH,OAAL,EAAe;AAEdA,UAAAA,OAAO,CAAExrH,CAAF,CAAP;AAEA,SAJD,MAIO;AAENkpB,UAAAA,OAAO,CAACyD,KAAR,CAAe3sB,CAAf;AAEA;;AAEDpF,QAAAA,KAAK,CAACgyH,OAAN,CAAcX,SAAd,CAAyBvgH,GAAzB;AAEA;AAED,KA/BD,EA+BG6/G,UA/BH,EA+BeC,OA/Bf;AAiCA;AA5CwE,CAAlD,CAAxB;AAgDA;;;;AAIA,SAASwW,oBAAT,CAA+B/oE,QAA/B,EAAyCC,WAAzC,EAAsDsqB,SAAtD,EAAkE;AAEjE42C,EAAAA,UAAU,CAACtgI,IAAX,CAAiB,IAAjB,EAAuB0B,SAAvB,EAAkCgoF,SAAlC;AAEA,QAAMprC,MAAM,GAAG,IAAIt6C,KAAJ,GAAYmrB,GAAZ,CAAiBgwC,QAAjB,CAAf;AACA,QAAM5gB,MAAM,GAAG,IAAIv6C,KAAJ,GAAYmrB,GAAZ,CAAiBiwC,WAAjB,CAAf;AAEA,QAAM+oE,GAAG,GAAG,IAAIjnG,OAAJ,CAAaod,MAAM,CAAC5/C,CAApB,EAAuB4/C,MAAM,CAACz/C,CAA9B,EAAiCy/C,MAAM,CAACx/C,CAAxC,CAAZ;AACA,QAAMspI,MAAM,GAAG,IAAIlnG,OAAJ,CAAaqd,MAAM,CAAC7/C,CAApB,EAAuB6/C,MAAM,CAAC1/C,CAA9B,EAAiC0/C,MAAM,CAACz/C,CAAxC,CAAf,CARiE,CAUjE;;AACA,QAAMu6H,EAAE,GAAG16H,IAAI,CAAC0yB,IAAL,CAAW1yB,IAAI,CAACutB,EAAhB,CAAX;AACA,QAAM8S,EAAE,GAAGq6F,EAAE,GAAG16H,IAAI,CAAC0yB,IAAL,CAAW,IAAX,CAAhB;AAEA,OAAKw4D,EAAL,CAAQC,YAAR,CAAsB,CAAtB,EAA0B/5D,IAA1B,CAAgCo4G,GAAhC,EAAsC7vH,GAAtC,CAA2C8vH,MAA3C,EAAoD73G,cAApD,CAAoE8oG,EAApE;AACA,OAAKxvC,EAAL,CAAQC,YAAR,CAAsB,CAAtB,EAA0B/5D,IAA1B,CAAgCo4G,GAAhC,EAAsCh4G,GAAtC,CAA2Ci4G,MAA3C,EAAoD73G,cAApD,CAAoEyO,EAApE;AAEA;;AAEDkpG,oBAAoB,CAACzoI,SAArB,GAAiCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAegnG,UAAU,CAAC7gI,SAA1B,CAAf,EAAsD;AAEtFoC,EAAAA,WAAW,EAAEqmI,oBAFyE;AAItFG,EAAAA,sBAAsB,EAAE,IAJ8D;AAMtFt4G,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAAE;AAE3B2hH,IAAAA,UAAU,CAAC7gI,SAAX,CAAqBswB,IAArB,CAA0B/vB,IAA1B,CAAgC,IAAhC,EAAsC2e,MAAtC;AAEA,WAAO,IAAP;AAEA,GAZqF;AActF8a,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAGwwF,UAAU,CAAC7gI,SAAX,CAAqBg6B,MAArB,CAA4Bz5B,IAA5B,CAAkC,IAAlC,EAAwC05B,IAAxC,CAAb,CAFyB,CAIzB;;AAEA,WAAOoW,IAAP;AAEA;AAtBqF,CAAtD,CAAjC;AA0BA;;;;AAIA,SAASw4F,iBAAT,CAA4BlqI,KAA5B,EAAmCsrF,SAAnC,EAA+C;AAE9C42C,EAAAA,UAAU,CAACtgI,IAAX,CAAiB,IAAjB,EAAuB0B,SAAvB,EAAkCgoF,SAAlC;AAEA,QAAMprC,MAAM,GAAG,IAAIt6C,KAAJ,GAAYmrB,GAAZ,CAAiB/wB,KAAjB,CAAf,CAJ8C,CAM9C;;AACA,OAAKyrF,EAAL,CAAQC,YAAR,CAAsB,CAAtB,EAA0B36D,GAA1B,CAA+BmvB,MAAM,CAAC5/C,CAAtC,EAAyC4/C,MAAM,CAACz/C,CAAhD,EAAmDy/C,MAAM,CAACx/C,CAA1D,EAA8DyxB,cAA9D,CAA8E,IAAI5xB,IAAI,CAAC0yB,IAAL,CAAW1yB,IAAI,CAACutB,EAAhB,CAAlF;AAEA;;AAEDo8G,iBAAiB,CAAC7oI,SAAlB,GAA8BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAegnG,UAAU,CAAC7gI,SAA1B,CAAf,EAAsD;AAEnFoC,EAAAA,WAAW,EAAEymI,iBAFsE;AAInFC,EAAAA,mBAAmB,EAAE,IAJ8D;AAMnFx4G,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAAE;AAE3B2hH,IAAAA,UAAU,CAAC7gI,SAAX,CAAqBswB,IAArB,CAA0B/vB,IAA1B,CAAgC,IAAhC,EAAsC2e,MAAtC;AAEA,WAAO,IAAP;AAEA,GAZkF;AAcnF8a,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,UAAMoW,IAAI,GAAGwwF,UAAU,CAAC7gI,SAAX,CAAqBg6B,MAArB,CAA4Bz5B,IAA5B,CAAkC,IAAlC,EAAwC05B,IAAxC,CAAb,CAFyB,CAIzB;;AAEA,WAAOoW,IAAP;AAEA;AAtBkF,CAAtD,CAA9B;;AA0BA,MAAM04F,SAAS,GAAG,IAAInkG,OAAJ,EAAlB;;AACA,MAAMokG,QAAQ,GAAG,IAAIpkG,OAAJ,EAAjB;AAEA;;;;;AAIA,SAASqkG,YAAT,GAAwB;AAEvB,OAAK59H,IAAL,GAAY,cAAZ;AAEA,OAAK0sD,MAAL,GAAc,CAAd;AAEA,OAAKmxE,MAAL,GAAc,KAAd;AAEA,OAAK/rC,OAAL,GAAe,IAAItlC,iBAAJ,EAAf;AACA,OAAKslC,OAAL,CAAazyD,MAAb,CAAoBL,MAApB,CAA4B,CAA5B;AACA,OAAK8yD,OAAL,CAAa7jE,gBAAb,GAAgC,KAAhC;AAEA,OAAK8jE,OAAL,GAAe,IAAIvlC,iBAAJ,EAAf;AACA,OAAKulC,OAAL,CAAa1yD,MAAb,CAAoBL,MAApB,CAA4B,CAA5B;AACA,OAAK+yD,OAAL,CAAa9jE,gBAAb,GAAgC,KAAhC;AAEA,OAAK6vG,MAAL,GAAc;AACb7rH,IAAAA,KAAK,EAAE,IADM;AAEbw6C,IAAAA,GAAG,EAAE,IAFQ;AAGbC,IAAAA,MAAM,EAAE,IAHK;AAIb7uB,IAAAA,IAAI,EAAE,IAJO;AAKbC,IAAAA,GAAG,EAAE,IALQ;AAMb6uB,IAAAA,IAAI,EAAE,IANO;AAObkxE,IAAAA,MAAM,EAAE;AAPK,GAAd;AAUA;;AAEDtoI,MAAM,CAACme,MAAP,CAAekqH,YAAY,CAACjpI,SAA5B,EAAuC;AAEtCq/B,EAAAA,MAAM,EAAE,UAAWqD,MAAX,EAAoB;AAE3B,UAAMyN,KAAK,GAAG,KAAKg5F,MAAnB;AAEA,UAAMl+E,WAAW,GAAG9a,KAAK,CAAC7yB,KAAN,KAAgBolB,MAAM,CAACplB,KAAvB,IAAgC6yB,KAAK,CAAC2nB,GAAN,KAAcp1B,MAAM,CAACo1B,GAArD,IACnB3nB,KAAK,CAAC4nB,MAAN,KAAiBr1B,MAAM,CAACq1B,MAAP,GAAgB,KAAKA,MADnB,IAC6B5nB,KAAK,CAACjH,IAAN,KAAexG,MAAM,CAACwG,IADnD,IAEnBiH,KAAK,CAAChH,GAAN,KAAczG,MAAM,CAACyG,GAFF,IAESgH,KAAK,CAAC6nB,IAAN,KAAet1B,MAAM,CAACs1B,IAF/B,IAEuC7nB,KAAK,CAAC+4F,MAAN,KAAiB,KAAKA,MAFjF;;AAIA,QAAKj+E,WAAL,EAAmB;AAElB9a,MAAAA,KAAK,CAAC7yB,KAAN,GAAcolB,MAAM,CAACplB,KAArB;AACA6yB,MAAAA,KAAK,CAAC2nB,GAAN,GAAYp1B,MAAM,CAACo1B,GAAnB;AACA3nB,MAAAA,KAAK,CAAC4nB,MAAN,GAAer1B,MAAM,CAACq1B,MAAP,GAAgB,KAAKA,MAApC;AACA5nB,MAAAA,KAAK,CAACjH,IAAN,GAAaxG,MAAM,CAACwG,IAApB;AACAiH,MAAAA,KAAK,CAAChH,GAAN,GAAYzG,MAAM,CAACyG,GAAnB;AACAgH,MAAAA,KAAK,CAAC6nB,IAAN,GAAat1B,MAAM,CAACs1B,IAApB;AACA7nB,MAAAA,KAAK,CAAC+4F,MAAN,GAAe,KAAKA,MAApB,CARkB,CAUlB;AACA;;AAEA,YAAMtmG,gBAAgB,GAAGF,MAAM,CAACE,gBAAP,CAAwBvS,KAAxB,EAAzB;AACA,YAAM+4G,UAAU,GAAGj5F,KAAK,CAAC+4F,MAAN,GAAe,CAAlC;AACA,YAAMG,kBAAkB,GAAGD,UAAU,GAAGj5F,KAAK,CAACjH,IAAnB,GAA0BiH,KAAK,CAAC7yB,KAA3D;AACA,YAAMgsH,IAAI,GAAKn5F,KAAK,CAACjH,IAAN,GAAahqC,IAAI,CAAC05D,GAAL,CAAUrsC,SAAS,CAACC,OAAV,GAAoB2jB,KAAK,CAAC2nB,GAA1B,GAAgC,GAA1C,CAAf,GAAmE3nB,KAAK,CAAC6nB,IAAtF;AACA,UAAIuxE,IAAJ,EAAUC,IAAV,CAjBkB,CAmBlB;;AAEAR,MAAAA,QAAQ,CAAC93G,QAAT,CAAmB,EAAnB,IAA0B,CAAEk4G,UAA5B;AACAL,MAAAA,SAAS,CAAC73G,QAAV,CAAoB,EAApB,IAA2Bk4G,UAA3B,CAtBkB,CAwBlB;;AAEAG,MAAAA,IAAI,GAAG,CAAED,IAAF,GAASn5F,KAAK,CAAC4nB,MAAf,GAAwBsxE,kBAA/B;AACAG,MAAAA,IAAI,GAAGF,IAAI,GAAGn5F,KAAK,CAAC4nB,MAAb,GAAsBsxE,kBAA7B;AAEAzmG,MAAAA,gBAAgB,CAAC1R,QAAjB,CAA2B,CAA3B,IAAiC,IAAIif,KAAK,CAACjH,IAAV,IAAmBsgG,IAAI,GAAGD,IAA1B,CAAjC;AACA3mG,MAAAA,gBAAgB,CAAC1R,QAAjB,CAA2B,CAA3B,IAAiC,CAAEs4G,IAAI,GAAGD,IAAT,KAAoBC,IAAI,GAAGD,IAA3B,CAAjC;AAEA,WAAKpsC,OAAL,CAAav6D,gBAAb,CAA8BtS,IAA9B,CAAoCsS,gBAApC,EAhCkB,CAkClB;;AAEA2mG,MAAAA,IAAI,GAAG,CAAED,IAAF,GAASn5F,KAAK,CAAC4nB,MAAf,GAAwBsxE,kBAA/B;AACAG,MAAAA,IAAI,GAAGF,IAAI,GAAGn5F,KAAK,CAAC4nB,MAAb,GAAsBsxE,kBAA7B;AAEAzmG,MAAAA,gBAAgB,CAAC1R,QAAjB,CAA2B,CAA3B,IAAiC,IAAIif,KAAK,CAACjH,IAAV,IAAmBsgG,IAAI,GAAGD,IAA1B,CAAjC;AACA3mG,MAAAA,gBAAgB,CAAC1R,QAAjB,CAA2B,CAA3B,IAAiC,CAAEs4G,IAAI,GAAGD,IAAT,KAAoBC,IAAI,GAAGD,IAA3B,CAAjC;AAEA,WAAKnsC,OAAL,CAAax6D,gBAAb,CAA8BtS,IAA9B,CAAoCsS,gBAApC;AAEA;;AAED,SAAKu6D,OAAL,CAAap6D,WAAb,CAAyBzS,IAAzB,CAA+BoS,MAAM,CAACK,WAAtC,EAAoDlS,QAApD,CAA8Dm4G,QAA9D;AACA,SAAK5rC,OAAL,CAAar6D,WAAb,CAAyBzS,IAAzB,CAA+BoS,MAAM,CAACK,WAAtC,EAAoDlS,QAApD,CAA8Dk4G,SAA9D;AAEA;AA3DqC,CAAvC;AA+DA;;;;AAIA,SAASU,KAAT,CAAgBC,SAAhB,EAA4B;AAE3B,OAAKA,SAAL,GAAmBA,SAAS,KAAKznI,SAAhB,GAA8BynI,SAA9B,GAA0C,IAA3D;AAEA,OAAK3b,SAAL,GAAiB,CAAjB;AACA,OAAK4b,OAAL,GAAe,CAAf;AACA,OAAKC,WAAL,GAAmB,CAAnB;AAEA,OAAKC,OAAL,GAAe,KAAf;AAEA;;AAEDjpI,MAAM,CAACme,MAAP,CAAe0qH,KAAK,CAACzpI,SAArB,EAAgC;AAE/B05C,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAKq0E,SAAL,GAAiB,CAAE,OAAO+b,WAAP,KAAuB,WAAvB,GAAqCC,IAArC,GAA4CD,WAA9C,EAA4DE,GAA5D,EAAjB,CAFkB,CAEkE;;AAEpF,SAAKL,OAAL,GAAe,KAAK5b,SAApB;AACA,SAAK6b,WAAL,GAAmB,CAAnB;AACA,SAAKC,OAAL,GAAe,IAAf;AAEA,GAV8B;AAY/BzpE,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAK6pE,cAAL;AACA,SAAKJ,OAAL,GAAe,KAAf;AACA,SAAKH,SAAL,GAAiB,KAAjB;AAEA,GAlB8B;AAoB/BO,EAAAA,cAAc,EAAE,YAAY;AAE3B,SAAKC,QAAL;AACA,WAAO,KAAKN,WAAZ;AAEA,GAzB8B;AA2B/BM,EAAAA,QAAQ,EAAE,YAAY;AAErB,QAAIx7H,IAAI,GAAG,CAAX;;AAEA,QAAK,KAAKg7H,SAAL,IAAkB,CAAE,KAAKG,OAA9B,EAAwC;AAEvC,WAAKnwF,KAAL;AACA,aAAO,CAAP;AAEA;;AAED,QAAK,KAAKmwF,OAAV,EAAoB;AAEnB,YAAMM,OAAO,GAAG,CAAE,OAAOL,WAAP,KAAuB,WAAvB,GAAqCC,IAArC,GAA4CD,WAA9C,EAA4DE,GAA5D,EAAhB;AAEAt7H,MAAAA,IAAI,GAAG,CAAEy7H,OAAO,GAAG,KAAKR,OAAjB,IAA6B,IAApC;AACA,WAAKA,OAAL,GAAeQ,OAAf;AAEA,WAAKP,WAAL,IAAoBl7H,IAApB;AAEA;;AAED,WAAOA,IAAP;AAEA;AAnD8B,CAAhC;AAuDA;;;;AAIA,MAAM07H,WAAW,GAAG,IAAI3oG,OAAJ,EAApB;;AACA,MAAM4oG,aAAa,GAAG,IAAIjtG,UAAJ,EAAtB;;AACA,MAAMktG,QAAQ,GAAG,IAAI7oG,OAAJ,EAAjB;;AACA,MAAM8oG,YAAY,GAAG,IAAI9oG,OAAJ,EAArB;;AAEA,SAAS+oG,aAAT,GAAyB;AAExBh/F,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,eAAZ;AAEA,OAAK4sB,OAAL,GAAekwG,YAAY,CAACjwG,UAAb,EAAf;AAEA,OAAKuyG,IAAL,GAAY,KAAKxyG,OAAL,CAAayyG,UAAb,EAAZ;AACA,OAAKD,IAAL,CAAUE,OAAV,CAAmB,KAAK1yG,OAAL,CAAa2yG,WAAhC;AAEA,OAAKrsD,MAAL,GAAc,IAAd;AAEA,OAAKssD,SAAL,GAAiB,CAAjB,CAbwB,CAexB;;AAEA,OAAKC,MAAL,GAAc,IAAIrB,KAAJ,EAAd;AAEA;;AAEDe,aAAa,CAACxqI,SAAd,GAA0BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAE7EoC,EAAAA,WAAW,EAAEooI,aAFgE;AAI7EO,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKN,IAAZ;AAEA,GAR4E;AAU7EO,EAAAA,YAAY,EAAE,YAAa;AAE1B,QAAK,KAAKzsD,MAAL,KAAgB,IAArB,EAA4B;AAE3B,WAAKksD,IAAL,CAAUvuC,UAAV,CAAsB,KAAK3d,MAA3B;AACA,WAAKA,MAAL,CAAY2d,UAAZ,CAAwB,KAAKjkE,OAAL,CAAa2yG,WAArC;AACA,WAAKH,IAAL,CAAUE,OAAV,CAAmB,KAAK1yG,OAAL,CAAa2yG,WAAhC;AACA,WAAKrsD,MAAL,GAAc,IAAd;AAEA;;AAED,WAAO,IAAP;AAEA,GAvB4E;AAyB7E0sD,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAK1sD,MAAZ;AAEA,GA7B4E;AA+B7E2sD,EAAAA,SAAS,EAAE,UAAW5mI,KAAX,EAAmB;AAE7B,QAAK,KAAKi6E,MAAL,KAAgB,IAArB,EAA4B;AAE3B,WAAKksD,IAAL,CAAUvuC,UAAV,CAAsB,KAAK3d,MAA3B;AACA,WAAKA,MAAL,CAAY2d,UAAZ,CAAwB,KAAKjkE,OAAL,CAAa2yG,WAArC;AAEA,KALD,MAKO;AAEN,WAAKH,IAAL,CAAUvuC,UAAV,CAAsB,KAAKjkE,OAAL,CAAa2yG,WAAnC;AAEA;;AAED,SAAKrsD,MAAL,GAAcj6E,KAAd;AACA,SAAKmmI,IAAL,CAAUE,OAAV,CAAmB,KAAKpsD,MAAxB;AACA,SAAKA,MAAL,CAAYosD,OAAZ,CAAqB,KAAK1yG,OAAL,CAAa2yG,WAAlC;AAEA,WAAO,IAAP;AAEA,GAlD4E;AAoD7EO,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO,KAAKV,IAAL,CAAUA,IAAV,CAAenmI,KAAtB;AAEA,GAxD4E;AA0D7E8mI,EAAAA,eAAe,EAAE,UAAW9mI,KAAX,EAAmB;AAEnC,SAAKmmI,IAAL,CAAUA,IAAV,CAAeY,eAAf,CAAgC/mI,KAAhC,EAAuC,KAAK2zB,OAAL,CAAaqzG,WAApD,EAAiE,IAAjE;AAEA,WAAO,IAAP;AAEA,GAhE4E;AAkE7E/8F,EAAAA,iBAAiB,EAAE,UAAWQ,KAAX,EAAmB;AAErCvD,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBuuC,iBAAnB,CAAqChuC,IAArC,CAA2C,IAA3C,EAAiDwuC,KAAjD;AAEA,UAAM/iB,QAAQ,GAAG,KAAKiM,OAAL,CAAajM,QAA9B;AACA,UAAM2a,EAAE,GAAG,KAAKA,EAAhB;AAEA,SAAKkkG,SAAL,GAAiB,KAAKC,MAAL,CAAYZ,QAAZ,EAAjB;AAEA,SAAKnnG,WAAL,CAAiB8F,SAAjB,CAA4BuhG,WAA5B,EAAyCC,aAAzC,EAAwDC,QAAxD;;AAEAC,IAAAA,YAAY,CAAC76G,GAAb,CAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAE,CAA1B,EAA8BoS,eAA9B,CAA+CuoG,aAA/C;;AAEA,QAAKr+G,QAAQ,CAACu/G,SAAd,EAA0B;AAEzB;AAEA,YAAMvd,OAAO,GAAG,KAAK/1F,OAAL,CAAaqzG,WAAb,GAA2B,KAAKT,SAAhD;AAEA7+G,MAAAA,QAAQ,CAACu/G,SAAT,CAAmBC,uBAAnB,CAA4CpB,WAAW,CAAC7hI,CAAxD,EAA2DylH,OAA3D;AACAhiG,MAAAA,QAAQ,CAACy/G,SAAT,CAAmBD,uBAAnB,CAA4CpB,WAAW,CAAC3hI,CAAxD,EAA2DulH,OAA3D;AACAhiG,MAAAA,QAAQ,CAAC0/G,SAAT,CAAmBF,uBAAnB,CAA4CpB,WAAW,CAACxvG,CAAxD,EAA2DozF,OAA3D;AACAhiG,MAAAA,QAAQ,CAAC2/G,QAAT,CAAkBH,uBAAlB,CAA2CjB,YAAY,CAAChiI,CAAxD,EAA2DylH,OAA3D;AACAhiG,MAAAA,QAAQ,CAAC4/G,QAAT,CAAkBJ,uBAAlB,CAA2CjB,YAAY,CAAC9hI,CAAxD,EAA2DulH,OAA3D;AACAhiG,MAAAA,QAAQ,CAAC6/G,QAAT,CAAkBL,uBAAlB,CAA2CjB,YAAY,CAAC3vG,CAAxD,EAA2DozF,OAA3D;AACAhiG,MAAAA,QAAQ,CAAC8/G,GAAT,CAAaN,uBAAb,CAAsC7kG,EAAE,CAACp+B,CAAzC,EAA4CylH,OAA5C;AACAhiG,MAAAA,QAAQ,CAAC+/G,GAAT,CAAaP,uBAAb,CAAsC7kG,EAAE,CAACl+B,CAAzC,EAA4CulH,OAA5C;AACAhiG,MAAAA,QAAQ,CAACggH,GAAT,CAAaR,uBAAb,CAAsC7kG,EAAE,CAAC/L,CAAzC,EAA4CozF,OAA5C;AAEA,KAhBD,MAgBO;AAENhiG,MAAAA,QAAQ,CAAC0b,WAAT,CAAsB0iG,WAAW,CAAC7hI,CAAlC,EAAqC6hI,WAAW,CAAC3hI,CAAjD,EAAoD2hI,WAAW,CAACxvG,CAAhE;AACA5O,MAAAA,QAAQ,CAACigH,cAAT,CAAyB1B,YAAY,CAAChiI,CAAtC,EAAyCgiI,YAAY,CAAC9hI,CAAtD,EAAyD8hI,YAAY,CAAC3vG,CAAtE,EAAyE+L,EAAE,CAACp+B,CAA5E,EAA+Eo+B,EAAE,CAACl+B,CAAlF,EAAqFk+B,EAAE,CAAC/L,CAAxF;AAEA;AAED;AAtG4E,CAApD,CAA1B;AA0GA;;;;;AAKA,SAASsxG,KAAT,CAAgBlgH,QAAhB,EAA2B;AAE1Bwf,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,OAAZ;AAEA,OAAK2gB,QAAL,GAAgBA,QAAhB;AACA,OAAKiM,OAAL,GAAejM,QAAQ,CAACiM,OAAxB;AAEA,OAAKwyG,IAAL,GAAY,KAAKxyG,OAAL,CAAayyG,UAAb,EAAZ;AACA,OAAKD,IAAL,CAAUE,OAAV,CAAmB3+G,QAAQ,CAAC++G,QAAT,EAAnB;AAEA,OAAKoB,QAAL,GAAgB,KAAhB;AAEA,OAAKnrE,MAAL,GAAc,IAAd;AACA,OAAKorE,MAAL,GAAc,CAAd;AACA,OAAKC,IAAL,GAAY,KAAZ;AACA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAKC,OAAL,GAAe,CAAf;AACA,OAAKvhI,MAAL,GAAc,CAAd;AACA,OAAKwkH,QAAL,GAAgBvtH,SAAhB;AACA,OAAKuqI,YAAL,GAAoB,CAApB;AACA,OAAKC,SAAL,GAAiB,KAAjB;AACA,OAAKC,kBAAL,GAA0B,IAA1B;AACA,OAAKC,UAAL,GAAkB,OAAlB;AAEA,OAAKC,UAAL,GAAkB,CAAlB;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,OAAL,GAAe,EAAf;AAEA;;AAEDZ,KAAK,CAAClsI,SAAN,GAAkBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAf,EAAoD;AAErEoC,EAAAA,WAAW,EAAE8pI,KAFwD;AAIrEa,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKtC,IAAZ;AAEA,GARoE;AAUrEuC,EAAAA,aAAa,EAAE,UAAWC,SAAX,EAAuB;AAErC,SAAKP,kBAAL,GAA0B,KAA1B;AACA,SAAKC,UAAL,GAAkB,WAAlB;AACA,SAAKztH,MAAL,GAAc+tH,SAAd;AACA,SAAKtC,OAAL;AAEA,WAAO,IAAP;AAEA,GAnBoE;AAqBrEuC,EAAAA,qBAAqB,EAAE,UAAWC,YAAX,EAA0B;AAEhD,SAAKT,kBAAL,GAA0B,KAA1B;AACA,SAAKC,UAAL,GAAkB,WAAlB;AACA,SAAKztH,MAAL,GAAc,KAAK+Y,OAAL,CAAam1G,wBAAb,CAAuCD,YAAvC,CAAd;AACA,SAAKxC,OAAL;AAEA,WAAO,IAAP;AAEA,GA9BoE;AAgCrE0C,EAAAA,oBAAoB,EAAE,UAAWC,WAAX,EAAyB;AAE9C,SAAKZ,kBAAL,GAA0B,KAA1B;AACA,SAAKC,UAAL,GAAkB,iBAAlB;AACA,SAAKztH,MAAL,GAAc,KAAK+Y,OAAL,CAAas1G,uBAAb,CAAsCD,WAAtC,CAAd;AACA,SAAK3C,OAAL;AAEA,WAAO,IAAP;AAEA,GAzCoE;AA2CrE6C,EAAAA,SAAS,EAAE,UAAWhF,WAAX,EAAyB;AAEnC,SAAKxnE,MAAL,GAAcwnE,WAAd;AACA,SAAKmE,UAAL,GAAkB,QAAlB;AAEA,QAAK,KAAKR,QAAV,EAAqB,KAAKsB,IAAL;AAErB,WAAO,IAAP;AAEA,GApDoE;AAsDrEA,EAAAA,IAAI,EAAE,UAAWC,KAAX,EAAmB;AAExB,QAAKA,KAAK,KAAKzrI,SAAf,EAA2ByrI,KAAK,GAAG,CAAR;;AAE3B,QAAK,KAAKjB,SAAL,KAAmB,IAAxB,EAA+B;AAE9B98G,MAAAA,OAAO,CAACC,IAAR,CAAc,wCAAd;AACA;AAEA;;AAED,QAAK,KAAK88G,kBAAL,KAA4B,KAAjC,EAAyC;AAExC/8G,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAKg9G,UAAL,GAAkB,KAAK30G,OAAL,CAAaqzG,WAAb,GAA2BoC,KAA7C;AAEA,UAAMxuH,MAAM,GAAG,KAAK+Y,OAAL,CAAa01G,kBAAb,EAAf;AACAzuH,IAAAA,MAAM,CAAC8hD,MAAP,GAAgB,KAAKA,MAArB;AACA9hD,IAAAA,MAAM,CAACmtH,IAAP,GAAc,KAAKA,IAAnB;AACAntH,IAAAA,MAAM,CAACotH,SAAP,GAAmB,KAAKA,SAAxB;AACAptH,IAAAA,MAAM,CAACqtH,OAAP,GAAiB,KAAKA,OAAtB;AACArtH,IAAAA,MAAM,CAAC0uH,OAAP,GAAiB,KAAKC,OAAL,CAAa9sI,IAAb,CAAmB,IAAnB,CAAjB;AACAme,IAAAA,MAAM,CAACw6B,KAAP,CAAc,KAAKkzF,UAAnB,EAA+B,KAAKC,SAAL,GAAiB,KAAK7hI,MAArD,EAA6D,KAAKwkH,QAAlE;AAEA,SAAKid,SAAL,GAAiB,IAAjB;AAEA,SAAKvtH,MAAL,GAAcA,MAAd;AAEA,SAAK4uH,SAAL,CAAgB,KAAK1B,MAArB;AACA,SAAK2B,eAAL,CAAsB,KAAKvB,YAA3B;AAEA,WAAO,KAAK7B,OAAL,EAAP;AAEA,GA3FoE;AA6FrEqD,EAAAA,KAAK,EAAE,YAAY;AAElB,QAAK,KAAKtB,kBAAL,KAA4B,KAAjC,EAAyC;AAExC/8G,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,QAAK,KAAK68G,SAAL,KAAmB,IAAxB,EAA+B;AAE9B;AAEA,WAAKI,SAAL,IAAkB3tI,IAAI,CAAC+E,GAAL,CAAU,KAAKg0B,OAAL,CAAaqzG,WAAb,GAA2B,KAAKsB,UAA1C,EAAsD,CAAtD,IAA4D,KAAKJ,YAAnF;;AAEA,UAAK,KAAKH,IAAL,KAAc,IAAnB,EAA0B;AAEzB;AAEA,aAAKQ,SAAL,GAAiB,KAAKA,SAAL,IAAmB,KAAKrd,QAAL,IAAiB,KAAKxuD,MAAL,CAAYwuD,QAAhD,CAAjB;AAEA;;AAED,WAAKtwG,MAAL,CAAYkhD,IAAZ;AACA,WAAKlhD,MAAL,CAAY0uH,OAAZ,GAAsB,IAAtB;AAEA,WAAKnB,SAAL,GAAiB,KAAjB;AAEA;;AAED,WAAO,IAAP;AAEA,GA7HoE;AA+HrErsE,EAAAA,IAAI,EAAE,YAAY;AAEjB,QAAK,KAAKssE,kBAAL,KAA4B,KAAjC,EAAyC;AAExC/8G,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAKi9G,SAAL,GAAiB,CAAjB;AAEA,SAAK3tH,MAAL,CAAYkhD,IAAZ;AACA,SAAKlhD,MAAL,CAAY0uH,OAAZ,GAAsB,IAAtB;AACA,SAAKnB,SAAL,GAAiB,KAAjB;AAEA,WAAO,IAAP;AAEA,GAhJoE;AAkJrE9B,EAAAA,OAAO,EAAE,YAAY;AAEpB,QAAK,KAAKmC,OAAL,CAAajtI,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,WAAKqf,MAAL,CAAYyrH,OAAZ,CAAqB,KAAKmC,OAAL,CAAc,CAAd,CAArB;;AAEA,WAAM,IAAI5rI,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKwrI,OAAL,CAAajtI,MAAlC,EAA0CqB,CAAC,GAAGI,CAA9C,EAAiDJ,CAAC,EAAlD,EAAwD;AAEvD,aAAK4rI,OAAL,CAAc5rI,CAAC,GAAG,CAAlB,EAAsBypI,OAAtB,CAA+B,KAAKmC,OAAL,CAAc5rI,CAAd,CAA/B;AAEA;;AAED,WAAK4rI,OAAL,CAAc,KAAKA,OAAL,CAAajtI,MAAb,GAAsB,CAApC,EAAwC8qI,OAAxC,CAAiD,KAAKoC,SAAL,EAAjD;AAEA,KAZD,MAYO;AAEN,WAAK7tH,MAAL,CAAYyrH,OAAZ,CAAqB,KAAKoC,SAAL,EAArB;AAEA;;AAED,WAAO,IAAP;AAEA,GAxKoE;AA0KrE7wC,EAAAA,UAAU,EAAE,YAAY;AAEvB,QAAK,KAAK4wC,OAAL,CAAajtI,MAAb,GAAsB,CAA3B,EAA+B;AAE9B,WAAKqf,MAAL,CAAYg9E,UAAZ,CAAwB,KAAK4wC,OAAL,CAAc,CAAd,CAAxB;;AAEA,WAAM,IAAI5rI,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG,KAAKwrI,OAAL,CAAajtI,MAAlC,EAA0CqB,CAAC,GAAGI,CAA9C,EAAiDJ,CAAC,EAAlD,EAAwD;AAEvD,aAAK4rI,OAAL,CAAc5rI,CAAC,GAAG,CAAlB,EAAsBg7F,UAAtB,CAAkC,KAAK4wC,OAAL,CAAc5rI,CAAd,CAAlC;AAEA;;AAED,WAAK4rI,OAAL,CAAc,KAAKA,OAAL,CAAajtI,MAAb,GAAsB,CAApC,EAAwCq8F,UAAxC,CAAoD,KAAK6wC,SAAL,EAApD;AAEA,KAZD,MAYO;AAEN,WAAK7tH,MAAL,CAAYg9E,UAAZ,CAAwB,KAAK6wC,SAAL,EAAxB;AAEA;;AAED,WAAO,IAAP;AAEA,GAhMoE;AAkMrEkB,EAAAA,UAAU,EAAE,YAAY;AAEvB,WAAO,KAAKnB,OAAZ;AAEA,GAtMoE;AAwMrEoB,EAAAA,UAAU,EAAE,UAAW5pI,KAAX,EAAmB;AAE9B,QAAK,CAAEA,KAAP,EAAeA,KAAK,GAAG,EAAR;;AAEf,QAAK,KAAKmoI,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKvwC,UAAL;AACA,WAAK4wC,OAAL,GAAexoI,KAAf;AACA,WAAKqmI,OAAL;AAEA,KAND,MAMO;AAEN,WAAKmC,OAAL,GAAexoI,KAAf;AAEA;;AAED,WAAO,IAAP;AAEA,GA1NoE;AA4NrEwpI,EAAAA,SAAS,EAAE,UAAWxpI,KAAX,EAAmB;AAE7B,SAAK8nI,MAAL,GAAc9nI,KAAd;AAEA,QAAK,KAAK4a,MAAL,CAAYktH,MAAZ,KAAuBnqI,SAA5B,EAAwC,OAJX,CAImB;;AAEhD,QAAK,KAAKwqI,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKvtH,MAAL,CAAYktH,MAAZ,CAAmBf,eAAnB,CAAoC,KAAKe,MAAzC,EAAiD,KAAKn0G,OAAL,CAAaqzG,WAA9D,EAA2E,IAA3E;AAEA;;AAED,WAAO,IAAP;AAEA,GA1OoE;AA4OrE6C,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAK/B,MAAZ;AAEA,GAhPoE;AAkPrEnB,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKgD,UAAL,GAAmB,CAAnB,CAAP;AAEA,GAtPoE;AAwPrE/C,EAAAA,SAAS,EAAE,UAAW3sD,MAAX,EAAoB;AAE9B,WAAO,KAAK2vD,UAAL,CAAiB3vD,MAAM,GAAG,CAAEA,MAAF,CAAH,GAAgB,EAAvC,CAAP;AAEA,GA5PoE;AA8PrEwvD,EAAAA,eAAe,EAAE,UAAWzpI,KAAX,EAAmB;AAEnC,QAAK,KAAKooI,kBAAL,KAA4B,KAAjC,EAAyC;AAExC/8G,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAK48G,YAAL,GAAoBloI,KAApB;;AAEA,QAAK,KAAKmoI,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKvtH,MAAL,CAAYstH,YAAZ,CAAyBnB,eAAzB,CAA0C,KAAKmB,YAA/C,EAA6D,KAAKv0G,OAAL,CAAaqzG,WAA1E,EAAuF,IAAvF;AAEA;;AAED,WAAO,IAAP;AAEA,GAjRoE;AAmRrE8C,EAAAA,eAAe,EAAE,YAAY;AAE5B,WAAO,KAAK5B,YAAZ;AAEA,GAvRoE;AAyRrEqB,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAKpB,SAAL,GAAiB,KAAjB;AAEA,GA7RoE;AA+RrE4B,EAAAA,OAAO,EAAE,YAAY;AAEpB,QAAK,KAAK3B,kBAAL,KAA4B,KAAjC,EAAyC;AAExC/8G,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA,aAAO,KAAP;AAEA;;AAED,WAAO,KAAKy8G,IAAZ;AAEA,GA1SoE;AA4SrEiC,EAAAA,OAAO,EAAE,UAAWhqI,KAAX,EAAmB;AAE3B,QAAK,KAAKooI,kBAAL,KAA4B,KAAjC,EAAyC;AAExC/8G,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA;AAEA;;AAED,SAAKy8G,IAAL,GAAY/nI,KAAZ;;AAEA,QAAK,KAAKmoI,SAAL,KAAmB,IAAxB,EAA+B;AAE9B,WAAKvtH,MAAL,CAAYmtH,IAAZ,GAAmB,KAAKA,IAAxB;AAEA;;AAED,WAAO,IAAP;AAEA,GA/ToE;AAiUrEkC,EAAAA,YAAY,EAAE,UAAWjqI,KAAX,EAAmB;AAEhC,SAAKgoI,SAAL,GAAiBhoI,KAAjB;AAEA,WAAO,IAAP;AAEA,GAvUoE;AAyUrEkqI,EAAAA,UAAU,EAAE,UAAWlqI,KAAX,EAAmB;AAE9B,SAAKioI,OAAL,GAAejoI,KAAf;AAEA,WAAO,IAAP;AAEA,GA/UoE;AAiVrEmqI,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKhE,IAAL,CAAUA,IAAV,CAAenmI,KAAtB;AAEA,GArVoE;AAuVrEoqI,EAAAA,SAAS,EAAE,UAAWpqI,KAAX,EAAmB;AAE7B,SAAKmmI,IAAL,CAAUA,IAAV,CAAeY,eAAf,CAAgC/mI,KAAhC,EAAuC,KAAK2zB,OAAL,CAAaqzG,WAApD,EAAiE,IAAjE;AAEA,WAAO,IAAP;AAEA;AA7VoE,CAApD,CAAlB;AAiWA;;;;AAIA,MAAMqD,WAAW,GAAG,IAAIltG,OAAJ,EAApB;;AACA,MAAMmtG,aAAa,GAAG,IAAIxxG,UAAJ,EAAtB;;AACA,MAAMyxG,QAAQ,GAAG,IAAIptG,OAAJ,EAAjB;;AACA,MAAMqtG,cAAc,GAAG,IAAIrtG,OAAJ,EAAvB;;AAEA,SAASstG,eAAT,CAA0B/iH,QAA1B,EAAqC;AAEpCkgH,EAAAA,KAAK,CAAC3rI,IAAN,CAAY,IAAZ,EAAkByrB,QAAlB;AAEA,OAAKgjH,MAAL,GAAc,KAAK/2G,OAAL,CAAag3G,YAAb,EAAd;AACA,OAAKD,MAAL,CAAYE,YAAZ,GAA2B,MAA3B;AACA,OAAKF,MAAL,CAAYrE,OAAZ,CAAqB,KAAKF,IAA1B;AAEA;;AAEDsE,eAAe,CAAC/uI,SAAhB,GAA4BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeqyG,KAAK,CAAClsI,SAArB,CAAf,EAAiD;AAE5EoC,EAAAA,WAAW,EAAE2sI,eAF+D;AAI5EhC,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAKiC,MAAZ;AAEA,GAR2E;AAU5EG,EAAAA,cAAc,EAAE,YAAY;AAE3B,WAAO,KAAKH,MAAL,CAAYI,WAAnB;AAEA,GAd2E;AAgB5EC,EAAAA,cAAc,EAAE,UAAW/qI,KAAX,EAAmB;AAElC,SAAK0qI,MAAL,CAAYI,WAAZ,GAA0B9qI,KAA1B;AAEA,WAAO,IAAP;AAEA,GAtB2E;AAwB5EgrI,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,WAAO,KAAKN,MAAL,CAAYO,aAAnB;AAEA,GA5B2E;AA8B5EC,EAAAA,gBAAgB,EAAE,UAAWlrI,KAAX,EAAmB;AAEpC,SAAK0qI,MAAL,CAAYO,aAAZ,GAA4BjrI,KAA5B;AAEA,WAAO,IAAP;AAEA,GApC2E;AAsC5EmrI,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,WAAO,KAAKT,MAAL,CAAYU,aAAnB;AAEA,GA1C2E;AA4C5EC,EAAAA,gBAAgB,EAAE,UAAWrrI,KAAX,EAAmB;AAEpC,SAAK0qI,MAAL,CAAYU,aAAZ,GAA4BprI,KAA5B;AAEA,WAAO,IAAP;AAEA,GAlD2E;AAoD5EsrI,EAAAA,cAAc,EAAE,YAAY;AAE3B,WAAO,KAAKZ,MAAL,CAAYa,WAAnB;AAEA,GAxD2E;AA0D5EC,EAAAA,cAAc,EAAE,UAAWxrI,KAAX,EAAmB;AAElC,SAAK0qI,MAAL,CAAYa,WAAZ,GAA0BvrI,KAA1B;AAEA,WAAO,IAAP;AAEA,GAhE2E;AAkE5EyrI,EAAAA,kBAAkB,EAAE,UAAWC,cAAX,EAA2BC,cAA3B,EAA2CC,aAA3C,EAA2D;AAE9E,SAAKlB,MAAL,CAAYgB,cAAZ,GAA6BA,cAA7B;AACA,SAAKhB,MAAL,CAAYiB,cAAZ,GAA6BA,cAA7B;AACA,SAAKjB,MAAL,CAAYkB,aAAZ,GAA4BA,aAA5B;AAEA,WAAO,IAAP;AAEA,GA1E2E;AA4E5E3hG,EAAAA,iBAAiB,EAAE,UAAWQ,KAAX,EAAmB;AAErCvD,IAAAA,QAAQ,CAACxrC,SAAT,CAAmBuuC,iBAAnB,CAAqChuC,IAArC,CAA2C,IAA3C,EAAiDwuC,KAAjD;AAEA,QAAK,KAAK29F,kBAAL,KAA4B,IAA5B,IAAoC,KAAKD,SAAL,KAAmB,KAA5D,EAAoE;AAEpE,SAAK1pG,WAAL,CAAiB8F,SAAjB,CAA4B8lG,WAA5B,EAAyCC,aAAzC,EAAwDC,QAAxD;;AAEAC,IAAAA,cAAc,CAACp/G,GAAf,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA8BoS,eAA9B,CAA+C8sG,aAA/C;;AAEA,UAAMI,MAAM,GAAG,KAAKA,MAApB;;AAEA,QAAKA,MAAM,CAACzD,SAAZ,EAAwB;AAEvB;AAEA,YAAMvd,OAAO,GAAG,KAAK/1F,OAAL,CAAaqzG,WAAb,GAA2B,KAAKt/G,QAAL,CAAc6+G,SAAzD;AAEAmE,MAAAA,MAAM,CAACzD,SAAP,CAAiBC,uBAAjB,CAA0CmD,WAAW,CAACpmI,CAAtD,EAAyDylH,OAAzD;AACAghB,MAAAA,MAAM,CAACvD,SAAP,CAAiBD,uBAAjB,CAA0CmD,WAAW,CAAClmI,CAAtD,EAAyDulH,OAAzD;AACAghB,MAAAA,MAAM,CAACtD,SAAP,CAAiBF,uBAAjB,CAA0CmD,WAAW,CAAC/zG,CAAtD,EAAyDozF,OAAzD;AACAghB,MAAAA,MAAM,CAACmB,YAAP,CAAoB3E,uBAApB,CAA6CsD,cAAc,CAACvmI,CAA5D,EAA+DylH,OAA/D;AACAghB,MAAAA,MAAM,CAACoB,YAAP,CAAoB5E,uBAApB,CAA6CsD,cAAc,CAACrmI,CAA5D,EAA+DulH,OAA/D;AACAghB,MAAAA,MAAM,CAACqB,YAAP,CAAoB7E,uBAApB,CAA6CsD,cAAc,CAACl0G,CAA5D,EAA+DozF,OAA/D;AAEA,KAbD,MAaO;AAENghB,MAAAA,MAAM,CAACtnG,WAAP,CAAoBinG,WAAW,CAACpmI,CAAhC,EAAmComI,WAAW,CAAClmI,CAA/C,EAAkDkmI,WAAW,CAAC/zG,CAA9D;AACAo0G,MAAAA,MAAM,CAAC/C,cAAP,CAAuB6C,cAAc,CAACvmI,CAAtC,EAAyCumI,cAAc,CAACrmI,CAAxD,EAA2DqmI,cAAc,CAACl0G,CAA1E;AAEA;AAED;AA5G2E,CAAjD,CAA5B;AAgHA;;;;AAIA,SAAS01G,aAAT,CAAwBC,KAAxB,EAA+BC,OAA/B,EAAyC;AAExC,OAAKC,QAAL,GAAgBF,KAAK,CAACt4G,OAAN,CAAcy4G,cAAd,EAAhB;AACA,OAAKD,QAAL,CAAcD,OAAd,GAAwBA,OAAO,KAAKvuI,SAAZ,GAAwBuuI,OAAxB,GAAkC,IAA1D;AAEA,OAAKngG,IAAL,GAAY,IAAIyW,UAAJ,CAAgB,KAAK2pF,QAAL,CAAcE,iBAA9B,CAAZ;AAEAJ,EAAAA,KAAK,CAACxD,SAAN,GAAkBpC,OAAlB,CAA2B,KAAK8F,QAAhC;AAEA;;AAED7vI,MAAM,CAACme,MAAP,CAAeuxH,aAAa,CAACtwI,SAA7B,EAAwC;AAEvC4wI,EAAAA,gBAAgB,EAAE,YAAY;AAE7B,SAAKH,QAAL,CAAcI,oBAAd,CAAoC,KAAKxgG,IAAzC;AAEA,WAAO,KAAKA,IAAZ;AAEA,GARsC;AAUvCygG,EAAAA,mBAAmB,EAAE,YAAY;AAEhC,QAAIxsI,KAAK,GAAG,CAAZ;AACA,UAAM+rC,IAAI,GAAG,KAAKugG,gBAAL,EAAb;;AAEA,SAAM,IAAI1vI,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGmvC,IAAI,CAACxwC,MAA1B,EAAkCqB,CAAC,EAAnC,EAAyC;AAExCoD,MAAAA,KAAK,IAAI+rC,IAAI,CAAEnvC,CAAF,CAAb;AAEA;;AAED,WAAOoD,KAAK,GAAG+rC,IAAI,CAACxwC,MAApB;AAEA;AAvBsC,CAAxC;AA2BA;;;;;;;;;;AAUA,SAASkxI,aAAT,CAAwBC,OAAxB,EAAiCthB,QAAjC,EAA2ClH,SAA3C,EAAuD;AAEtD,OAAKwoB,OAAL,GAAeA,OAAf;AACA,OAAKxoB,SAAL,GAAiBA,SAAjB;AAEA,MAAIyoB,WAAJ,EACCC,mBADD,EAECC,WAFD,CALsD,CAStD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,UAASzhB,QAAT;AAEC,SAAK,YAAL;AACCuhB,MAAAA,WAAW,GAAG,KAAKG,MAAnB;AACAF,MAAAA,mBAAmB,GAAG,KAAKG,cAA3B;AACAF,MAAAA,WAAW,GAAG,KAAKG,8BAAnB;AAEA,WAAKtwE,MAAL,GAAc,IAAIpZ,YAAJ,CAAkB4gE,SAAS,GAAG,CAA9B,CAAd;AACA,WAAK+oB,UAAL,GAAkB,CAAlB;AACA;;AAED,SAAK,QAAL;AACA,SAAK,MAAL;AACCN,MAAAA,WAAW,GAAG,KAAKO,OAAnB,CADD,CAGC;AACA;;AACAN,MAAAA,mBAAmB,GAAG,KAAKM,OAA3B;AAEAL,MAAAA,WAAW,GAAG,KAAKM,yBAAnB;AAEA,WAAKzwE,MAAL,GAAc,IAAIjhE,KAAJ,CAAWyoH,SAAS,GAAG,CAAvB,CAAd;AACA;;AAED;AACCyoB,MAAAA,WAAW,GAAG,KAAKS,KAAnB;AACAR,MAAAA,mBAAmB,GAAG,KAAKS,aAA3B;AACAR,MAAAA,WAAW,GAAG,KAAKS,2BAAnB;AAEA,WAAK5wE,MAAL,GAAc,IAAIpZ,YAAJ,CAAkB4gE,SAAS,GAAG,CAA9B,CAAd;AA7BF;;AAiCA,OAAKqpB,gBAAL,GAAwBZ,WAAxB;AACA,OAAKa,wBAAL,GAAgCZ,mBAAhC;AACA,OAAKa,YAAL,GAAoBZ,WAApB;AACA,OAAKa,UAAL,GAAkB,CAAlB;AACA,OAAKC,SAAL,GAAiB,CAAjB;AAEA,OAAKC,gBAAL,GAAwB,CAAxB;AACA,OAAKC,wBAAL,GAAgC,CAAhC;AAEA,OAAKC,QAAL,GAAgB,CAAhB;AACA,OAAKC,cAAL,GAAsB,CAAtB;AAEA;;AAEDzxI,MAAM,CAACme,MAAP,CAAegyH,aAAa,CAAC/wI,SAA7B,EAAwC;AAEvC;AACAsyI,EAAAA,UAAU,EAAE,UAAWC,SAAX,EAAsBljC,MAAtB,EAA+B;AAE1C;AACA;AAEA,UAAMruC,MAAM,GAAG,KAAKA,MAApB;AAAA,UACCsO,MAAM,GAAG,KAAKk5C,SADf;AAAA,UAECx9G,MAAM,GAAGunI,SAAS,GAAGjjE,MAAZ,GAAqBA,MAF/B;AAIA,QAAIkjE,aAAa,GAAG,KAAKN,gBAAzB;;AAEA,QAAKM,aAAa,KAAK,CAAvB,EAA2B;AAE1B;AAEA,WAAM,IAAItxI,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC8/D,QAAAA,MAAM,CAAEh2D,MAAM,GAAG9J,CAAX,CAAN,GAAuB8/D,MAAM,CAAE9/D,CAAF,CAA7B;AAEA;;AAEDsxI,MAAAA,aAAa,GAAGnjC,MAAhB;AAEA,KAZD,MAYO;AAEN;AAEAmjC,MAAAA,aAAa,IAAInjC,MAAjB;AACA,YAAMojC,GAAG,GAAGpjC,MAAM,GAAGmjC,aAArB;;AACA,WAAKX,gBAAL,CAAuB7wE,MAAvB,EAA+Bh2D,MAA/B,EAAuC,CAAvC,EAA0CynI,GAA1C,EAA+CnjE,MAA/C;AAEA;;AAED,SAAK4iE,gBAAL,GAAwBM,aAAxB;AAEA,GAtCsC;AAwCvC;AACAE,EAAAA,kBAAkB,EAAE,UAAWrjC,MAAX,EAAoB;AAEvC,UAAMruC,MAAM,GAAG,KAAKA,MAApB;AAAA,UACCsO,MAAM,GAAG,KAAKk5C,SADf;AAAA,UAECx9G,MAAM,GAAGskE,MAAM,GAAG,KAAK2iE,SAFxB;;AAIA,QAAK,KAAKE,wBAAL,KAAkC,CAAvC,EAA2C;AAE1C;AAEA,WAAKJ,YAAL;AAEA,KAZsC,CAcvC;;;AAEA,SAAKD,wBAAL,CAA+B9wE,MAA/B,EAAuCh2D,MAAvC,EAA+C,CAA/C,EAAkDqkG,MAAlD,EAA0D//B,MAA1D;;AACA,SAAK6iE,wBAAL,IAAiC9iC,MAAjC;AAEA,GA5DsC;AA8DvC;AACAluG,EAAAA,KAAK,EAAE,UAAWoxI,SAAX,EAAuB;AAE7B,UAAMjjE,MAAM,GAAG,KAAKk5C,SAApB;AAAA,UACCxnD,MAAM,GAAG,KAAKA,MADf;AAAA,UAECh2D,MAAM,GAAGunI,SAAS,GAAGjjE,MAAZ,GAAqBA,MAF/B;AAAA,UAIC+/B,MAAM,GAAG,KAAK6iC,gBAJf;AAAA,UAKCS,cAAc,GAAG,KAAKR,wBALvB;AAAA,UAOCnB,OAAO,GAAG,KAAKA,OAPhB;AASA,SAAKkB,gBAAL,GAAwB,CAAxB;AACA,SAAKC,wBAAL,GAAgC,CAAhC;;AAEA,QAAK9iC,MAAM,GAAG,CAAd,EAAkB;AAEjB;AAEA,YAAMujC,mBAAmB,GAAGtjE,MAAM,GAAG,KAAK0iE,UAA1C;;AAEA,WAAKH,gBAAL,CACC7wE,MADD,EACSh2D,MADT,EACiB4nI,mBADjB,EACsC,IAAIvjC,MAD1C,EACkD//B,MADlD;AAGA;;AAED,QAAKqjE,cAAc,GAAG,CAAtB,EAA0B;AAEzB;AAEA,WAAKb,wBAAL,CAA+B9wE,MAA/B,EAAuCh2D,MAAvC,EAA+C,KAAKinI,SAAL,GAAiB3iE,MAAhE,EAAwE,CAAxE,EAA2EA,MAA3E;AAEA;;AAED,SAAM,IAAIpuE,CAAC,GAAGouE,MAAR,EAAgB7oE,CAAC,GAAG6oE,MAAM,GAAGA,MAAnC,EAA2CpuE,CAAC,KAAKuF,CAAjD,EAAoD,EAAGvF,CAAvD,EAA2D;AAE1D,UAAK8/D,MAAM,CAAE9/D,CAAF,CAAN,KAAgB8/D,MAAM,CAAE9/D,CAAC,GAAGouE,MAAN,CAA3B,EAA4C;AAE3C;AAEA0hE,QAAAA,OAAO,CAACnlI,QAAR,CAAkBm1D,MAAlB,EAA0Bh2D,MAA1B;AACA;AAEA;AAED;AAED,GA7GsC;AA+GvC;AACA6nI,EAAAA,iBAAiB,EAAE,YAAY;AAE9B,UAAM7B,OAAO,GAAG,KAAKA,OAArB;AAEA,UAAMhwE,MAAM,GAAG,KAAKA,MAApB;AAAA,UACCsO,MAAM,GAAG,KAAKk5C,SADf;AAAA,UAGCoqB,mBAAmB,GAAGtjE,MAAM,GAAG,KAAK0iE,UAHrC;AAKAhB,IAAAA,OAAO,CAAC3qI,QAAR,CAAkB26D,MAAlB,EAA0B4xE,mBAA1B,EAT8B,CAW9B;;AACA,SAAM,IAAI1xI,CAAC,GAAGouE,MAAR,EAAgB7oE,CAAC,GAAGmsI,mBAA1B,EAA+C1xI,CAAC,KAAKuF,CAArD,EAAwD,EAAGvF,CAA3D,EAA+D;AAE9D8/D,MAAAA,MAAM,CAAE9/D,CAAF,CAAN,GAAc8/D,MAAM,CAAE4xE,mBAAmB,GAAK1xI,CAAC,GAAGouE,MAA9B,CAApB;AAEA,KAhB6B,CAkB9B;;;AACA,SAAKyiE,YAAL;;AAEA,SAAKG,gBAAL,GAAwB,CAAxB;AACA,SAAKC,wBAAL,GAAgC,CAAhC;AAEA,GAxIsC;AA0IvC;AACAW,EAAAA,oBAAoB,EAAE,YAAY;AAEjC,UAAMF,mBAAmB,GAAG,KAAKpqB,SAAL,GAAiB,CAA7C;AACA,SAAKwoB,OAAL,CAAanlI,QAAb,CAAuB,KAAKm1D,MAA5B,EAAoC4xE,mBAApC;AAEA,GAhJsC;AAkJvChB,EAAAA,2BAA2B,EAAE,YAAY;AAExC,UAAMpoB,UAAU,GAAG,KAAKyoB,SAAL,GAAiB,KAAKzpB,SAAzC;AACA,UAAMuqB,QAAQ,GAAGvpB,UAAU,GAAG,KAAKhB,SAAnC;;AAEA,SAAM,IAAItnH,CAAC,GAAGsoH,UAAd,EAA0BtoH,CAAC,GAAG6xI,QAA9B,EAAwC7xI,CAAC,EAAzC,EAA+C;AAE9C,WAAK8/D,MAAL,CAAa9/D,CAAb,IAAmB,CAAnB;AAEA;AAED,GA7JsC;AA+JvCowI,EAAAA,8BAA8B,EAAE,YAAY;AAE3C,SAAKM,2BAAL;;AACA,SAAK5wE,MAAL,CAAa,KAAKixE,SAAL,GAAiB,CAAjB,GAAqB,CAAlC,IAAwC,CAAxC;AAEA,GApKsC;AAsKvCR,EAAAA,yBAAyB,EAAE,YAAY;AAEtC,UAAMjoB,UAAU,GAAG,KAAKwoB,UAAL,GAAkB,KAAKxpB,SAA1C;AACA,UAAMwqB,WAAW,GAAG,KAAKf,SAAL,GAAiB,KAAKzpB,SAA1C;;AAEA,SAAM,IAAItnH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKsnH,SAA1B,EAAqCtnH,CAAC,EAAtC,EAA4C;AAE3C,WAAK8/D,MAAL,CAAagyE,WAAW,GAAG9xI,CAA3B,IAAiC,KAAK8/D,MAAL,CAAawoD,UAAU,GAAGtoH,CAA1B,CAAjC;AAEA;AAED,GAjLsC;AAoLvC;AAEAswI,EAAAA,OAAO,EAAE,UAAWxwE,MAAX,EAAmBljC,SAAnB,EAA8B8pF,SAA9B,EAAyC9jH,CAAzC,EAA4CwrE,MAA5C,EAAqD;AAE7D,QAAKxrE,CAAC,IAAI,GAAV,EAAgB;AAEf,WAAM,IAAI5C,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC8/D,QAAAA,MAAM,CAAEljC,SAAS,GAAG58B,CAAd,CAAN,GAA0B8/D,MAAM,CAAE4mD,SAAS,GAAG1mH,CAAd,CAAhC;AAEA;AAED;AAED,GAlMsC;AAoMvCkwI,EAAAA,MAAM,EAAE,UAAWpwE,MAAX,EAAmBljC,SAAnB,EAA8B8pF,SAA9B,EAAyC9jH,CAAzC,EAA6C;AAEpDs5B,IAAAA,UAAU,CAACQ,SAAX,CAAsBojC,MAAtB,EAA8BljC,SAA9B,EAAyCkjC,MAAzC,EAAiDljC,SAAjD,EAA4DkjC,MAA5D,EAAoE4mD,SAApE,EAA+E9jH,CAA/E;AAEA,GAxMsC;AA0MvCutI,EAAAA,cAAc,EAAE,UAAWrwE,MAAX,EAAmBljC,SAAnB,EAA8B8pF,SAA9B,EAAyC9jH,CAAzC,EAA4CwrE,MAA5C,EAAqD;AAEpE,UAAM2jE,UAAU,GAAG,KAAK1B,UAAL,GAAkBjiE,MAArC,CAFoE,CAIpE;;AACAlyC,IAAAA,UAAU,CAAC2B,uBAAX,CAAoCiiC,MAApC,EAA4CiyE,UAA5C,EAAwDjyE,MAAxD,EAAgEljC,SAAhE,EAA2EkjC,MAA3E,EAAmF4mD,SAAnF,EALoE,CAOpE;;AACAxqF,IAAAA,UAAU,CAACQ,SAAX,CAAsBojC,MAAtB,EAA8BljC,SAA9B,EAAyCkjC,MAAzC,EAAiDljC,SAAjD,EAA4DkjC,MAA5D,EAAoEiyE,UAApE,EAAgFnvI,CAAhF;AAEA,GApNsC;AAsNvC4tI,EAAAA,KAAK,EAAE,UAAW1wE,MAAX,EAAmBljC,SAAnB,EAA8B8pF,SAA9B,EAAyC9jH,CAAzC,EAA4CwrE,MAA5C,EAAqD;AAE3D,UAAM9vE,CAAC,GAAG,IAAIsE,CAAd;;AAEA,SAAM,IAAI5C,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC,YAAM6zC,CAAC,GAAGjX,SAAS,GAAG58B,CAAtB;AAEA8/D,MAAAA,MAAM,CAAEjsB,CAAF,CAAN,GAAcisB,MAAM,CAAEjsB,CAAF,CAAN,GAAcv1C,CAAd,GAAkBwhE,MAAM,CAAE4mD,SAAS,GAAG1mH,CAAd,CAAN,GAA0B4C,CAA1D;AAEA;AAED,GAlOsC;AAoOvC6tI,EAAAA,aAAa,EAAE,UAAW3wE,MAAX,EAAmBljC,SAAnB,EAA8B8pF,SAA9B,EAAyC9jH,CAAzC,EAA4CwrE,MAA5C,EAAqD;AAEnE,SAAM,IAAIpuE,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKouE,MAAvB,EAA+B,EAAGpuE,CAAlC,EAAsC;AAErC,YAAM6zC,CAAC,GAAGjX,SAAS,GAAG58B,CAAtB;AAEA8/D,MAAAA,MAAM,CAAEjsB,CAAF,CAAN,GAAcisB,MAAM,CAAEjsB,CAAF,CAAN,GAAcisB,MAAM,CAAE4mD,SAAS,GAAG1mH,CAAd,CAAN,GAA0B4C,CAAtD;AAEA;AAED;AA9OsC,CAAxC;AAkPA;;;;;;;;;AAUA;;AACA,MAAMovI,kBAAkB,GAAG,eAA3B;;AACA,MAAMC,WAAW,GAAG,IAAIxoI,MAAJ,CAAY,MAAMuoI,kBAAN,GAA2B,GAAvC,EAA4C,GAA5C,CAApB,EAEA;AACA;AACA;;;AACA,MAAME,SAAS,GAAG,OAAOF,kBAAP,GAA4B,GAA9C;;AACA,MAAMG,cAAc,GAAG,OAAOH,kBAAkB,CAAC3oI,OAAnB,CAA4B,KAA5B,EAAmC,EAAnC,CAAP,GAAiD,GAAxE,EAEA;AACA;;;AACA,MAAM+oI,YAAY,GAAG,kBAAkBp0H,MAAlB,CAAyB3U,OAAzB,CAAkC,IAAlC,EAAwC6oI,SAAxC,CAArB,EAEA;;;AACA,MAAMG,OAAO,GAAG,WAAWr0H,MAAX,CAAkB3U,OAAlB,CAA2B,MAA3B,EAAmC8oI,cAAnC,CAAhB,EAEA;AACA;;;AACA,MAAMG,SAAS,GAAG,4BAA4Bt0H,MAA5B,CAAmC3U,OAAnC,CAA4C,IAA5C,EAAkD6oI,SAAlD,CAAlB,EAEA;AACA;;;AACA,MAAMK,WAAW,GAAG,uBAAuBv0H,MAAvB,CAA8B3U,OAA9B,CAAuC,IAAvC,EAA6C6oI,SAA7C,CAApB;;AAEA,MAAMM,QAAQ,GAAG,IAAI/oI,MAAJ,CAAY,KAC1B,GAD0B,GAE1B2oI,YAF0B,GAG1BC,OAH0B,GAI1BC,SAJ0B,GAK1BC,WAL0B,GAM1B,GANc,CAAjB;;AASA,MAAME,qBAAqB,GAAG,CAAE,UAAF,EAAc,WAAd,EAA2B,OAA3B,CAA9B;;AAEA,SAASC,SAAT,CAAoBC,WAApB,EAAiCl4D,IAAjC,EAAuCm4D,kBAAvC,EAA4D;AAE3D,QAAMC,UAAU,GAAGD,kBAAkB,IAAIE,eAAe,CAACC,cAAhB,CAAgCt4D,IAAhC,CAAzC;AAEA,OAAKu4D,YAAL,GAAoBL,WAApB;AACA,OAAKM,SAAL,GAAiBN,WAAW,CAACO,UAAZ,CAAwBz4D,IAAxB,EAA8Bo4D,UAA9B,CAAjB;AAEA;;AAEDnzI,MAAM,CAACme,MAAP,CAAe60H,SAAS,CAAC5zI,SAAzB,EAAoC;AAEnCqG,EAAAA,QAAQ,EAAE,UAAWgmB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEpC,SAAKjK,IAAL,GAFoC,CAEvB;;AAEb,UAAMszI,eAAe,GAAG,KAAKH,YAAL,CAAkBI,eAA1C;AAAA,UACCtD,OAAO,GAAG,KAAKmD,SAAL,CAAgBE,eAAhB,CADX,CAJoC,CAOpC;;AACA,QAAKrD,OAAO,KAAK/uI,SAAjB,EAA6B+uI,OAAO,CAAC3qI,QAAR,CAAkBgmB,KAAlB,EAAyBrhB,MAAzB;AAE7B,GAZkC;AAcnCa,EAAAA,QAAQ,EAAE,UAAWwgB,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEpC,UAAMupI,QAAQ,GAAG,KAAKJ,SAAtB;;AAEA,SAAM,IAAIjzI,CAAC,GAAG,KAAKgzI,YAAL,CAAkBI,eAA1B,EAA2CjnH,CAAC,GAAGknH,QAAQ,CAAC10I,MAA9D,EAAsEqB,CAAC,KAAKmsB,CAA5E,EAA+E,EAAGnsB,CAAlF,EAAsF;AAErFqzI,MAAAA,QAAQ,CAAErzI,CAAF,CAAR,CAAc2K,QAAd,CAAwBwgB,KAAxB,EAA+BrhB,MAA/B;AAEA;AAED,GAxBkC;AA0BnCjK,EAAAA,IAAI,EAAE,YAAY;AAEjB,UAAMwzI,QAAQ,GAAG,KAAKJ,SAAtB;;AAEA,SAAM,IAAIjzI,CAAC,GAAG,KAAKgzI,YAAL,CAAkBI,eAA1B,EAA2CjnH,CAAC,GAAGknH,QAAQ,CAAC10I,MAA9D,EAAsEqB,CAAC,KAAKmsB,CAA5E,EAA+E,EAAGnsB,CAAlF,EAAsF;AAErFqzI,MAAAA,QAAQ,CAAErzI,CAAF,CAAR,CAAcH,IAAd;AAEA;AAED,GApCkC;AAsCnC6N,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAM2lI,QAAQ,GAAG,KAAKJ,SAAtB;;AAEA,SAAM,IAAIjzI,CAAC,GAAG,KAAKgzI,YAAL,CAAkBI,eAA1B,EAA2CjnH,CAAC,GAAGknH,QAAQ,CAAC10I,MAA9D,EAAsEqB,CAAC,KAAKmsB,CAA5E,EAA+E,EAAGnsB,CAAlF,EAAsF;AAErFqzI,MAAAA,QAAQ,CAAErzI,CAAF,CAAR,CAAc0N,MAAd;AAEA;AAED;AAhDkC,CAApC;;AAqDA,SAASolI,eAAT,CAA0BQ,QAA1B,EAAoC74D,IAApC,EAA0Co4D,UAA1C,EAAuD;AAEtD,OAAKp4D,IAAL,GAAYA,IAAZ;AACA,OAAKo4D,UAAL,GAAkBA,UAAU,IAAIC,eAAe,CAACC,cAAhB,CAAgCt4D,IAAhC,CAAhC;AAEA,OAAKliE,IAAL,GAAYu6H,eAAe,CAACS,QAAhB,CAA0BD,QAA1B,EAAoC,KAAKT,UAAL,CAAgBW,QAApD,KAAkEF,QAA9E;AAEA,OAAKA,QAAL,GAAgBA,QAAhB;AAEA;;AAED5zI,MAAM,CAACme,MAAP,CAAei1H,eAAf,EAAgC;AAE/BJ,EAAAA,SAAS,EAAEA,SAFoB;AAI/B/5G,EAAAA,MAAM,EAAE,UAAWxhB,IAAX,EAAiBsjE,IAAjB,EAAuBo4D,UAAvB,EAAoC;AAE3C,QAAK,EAAI17H,IAAI,IAAIA,IAAI,CAACs8H,sBAAjB,CAAL,EAAiD;AAEhD,aAAO,IAAIX,eAAJ,CAAqB37H,IAArB,EAA2BsjE,IAA3B,EAAiCo4D,UAAjC,CAAP;AAEA,KAJD,MAIO;AAEN,aAAO,IAAIC,eAAe,CAACJ,SAApB,CAA+Bv7H,IAA/B,EAAqCsjE,IAArC,EAA2Co4D,UAA3C,CAAP;AAEA;AAED,GAhB8B;;AAkB/B;;;;;;;AAOAa,EAAAA,gBAAgB,EAAE,UAAWp+H,IAAX,EAAkB;AAEnC,WAAOA,IAAI,CAACjM,OAAL,CAAc,KAAd,EAAqB,GAArB,EAA2BA,OAA3B,CAAoC4oI,WAApC,EAAiD,EAAjD,CAAP;AAEA,GA7B8B;AA+B/Bc,EAAAA,cAAc,EAAE,UAAWjjB,SAAX,EAAuB;AAEtC,UAAM6jB,OAAO,GAAGnB,QAAQ,CAACp2F,IAAT,CAAe0zE,SAAf,CAAhB;;AAEA,QAAK,CAAE6jB,OAAP,EAAiB;AAEhB,YAAM,IAAIrwI,KAAJ,CAAW,8CAA8CwsH,SAAzD,CAAN;AAEA;;AAED,UAAM8jB,OAAO,GAAG;AACf;AACAJ,MAAAA,QAAQ,EAAEG,OAAO,CAAE,CAAF,CAFF;AAGfE,MAAAA,UAAU,EAAEF,OAAO,CAAE,CAAF,CAHJ;AAIfG,MAAAA,WAAW,EAAEH,OAAO,CAAE,CAAF,CAJL;AAKf3jB,MAAAA,YAAY,EAAE2jB,OAAO,CAAE,CAAF,CALN;AAKa;AAC5BI,MAAAA,aAAa,EAAEJ,OAAO,CAAE,CAAF;AANP,KAAhB;AASA,UAAMK,OAAO,GAAGJ,OAAO,CAACJ,QAAR,IAAoBI,OAAO,CAACJ,QAAR,CAAiBjT,WAAjB,CAA8B,GAA9B,CAApC;;AAEA,QAAKyT,OAAO,KAAKjzI,SAAZ,IAAyBizI,OAAO,KAAK,CAAE,CAA5C,EAAgD;AAE/C,YAAMH,UAAU,GAAGD,OAAO,CAACJ,QAAR,CAAiBxM,SAAjB,CAA4BgN,OAAO,GAAG,CAAtC,CAAnB,CAF+C,CAI/C;AACA;AACA;AACA;;AACA,UAAKvB,qBAAqB,CAACvpI,OAAtB,CAA+B2qI,UAA/B,MAAgD,CAAE,CAAvD,EAA2D;AAE1DD,QAAAA,OAAO,CAACJ,QAAR,GAAmBI,OAAO,CAACJ,QAAR,CAAiBxM,SAAjB,CAA4B,CAA5B,EAA+BgN,OAA/B,CAAnB;AACAJ,QAAAA,OAAO,CAACC,UAAR,GAAqBA,UAArB;AAEA;AAED;;AAED,QAAKD,OAAO,CAAC5jB,YAAR,KAAyB,IAAzB,IAAiC4jB,OAAO,CAAC5jB,YAAR,CAAqBrxH,MAArB,KAAgC,CAAtE,EAA0E;AAEzE,YAAM,IAAI2E,KAAJ,CAAW,iEAAiEwsH,SAA5E,CAAN;AAEA;;AAED,WAAO8jB,OAAP;AAEA,GA7E8B;AA+E/BL,EAAAA,QAAQ,EAAE,UAAWp8H,IAAX,EAAiBq8H,QAAjB,EAA4B;AAErC,QAAK,CAAEA,QAAF,IAAcA,QAAQ,KAAK,EAA3B,IAAiCA,QAAQ,KAAK,GAA9C,IAAqDA,QAAQ,KAAK,CAAE,CAApE,IAAyEA,QAAQ,KAAKr8H,IAAI,CAAC7B,IAA3F,IAAmGk+H,QAAQ,KAAKr8H,IAAI,CAAC4U,IAA1H,EAAiI;AAEhI,aAAO5U,IAAP;AAEA,KANoC,CAQrC;;;AACA,QAAKA,IAAI,CAACutE,QAAV,EAAqB;AAEpB,YAAM+pB,IAAI,GAAGt3F,IAAI,CAACutE,QAAL,CAAciqB,aAAd,CAA6B6kC,QAA7B,CAAb;;AAEA,UAAK/kC,IAAI,KAAK1tG,SAAd,EAA0B;AAEzB,eAAO0tG,IAAP;AAEA;AAED,KAnBoC,CAqBrC;;;AACA,QAAKt3F,IAAI,CAACozB,QAAV,EAAqB;AAEpB,YAAM0pG,iBAAiB,GAAG,UAAW1pG,QAAX,EAAsB;AAE/C,aAAM,IAAIvqC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGuqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,EAAvC,EAA6C;AAE5C,gBAAMk0I,SAAS,GAAG3pG,QAAQ,CAAEvqC,CAAF,CAA1B;;AAEA,cAAKk0I,SAAS,CAAC5+H,IAAV,KAAmBk+H,QAAnB,IAA+BU,SAAS,CAACnoH,IAAV,KAAmBynH,QAAvD,EAAkE;AAEjE,mBAAOU,SAAP;AAEA;;AAED,gBAAMryI,MAAM,GAAGoyI,iBAAiB,CAAEC,SAAS,CAAC3pG,QAAZ,CAAhC;AAEA,cAAK1oC,MAAL,EAAc,OAAOA,MAAP;AAEd;;AAED,eAAO,IAAP;AAEA,OApBD;;AAsBA,YAAMsyI,WAAW,GAAGF,iBAAiB,CAAE98H,IAAI,CAACozB,QAAP,CAArC;;AAEA,UAAK4pG,WAAL,EAAmB;AAElB,eAAOA,WAAP;AAEA;AAED;;AAED,WAAO,IAAP;AAEA;AAzI8B,CAAhC;AA6IAz0I,MAAM,CAACme,MAAP,CAAei1H,eAAe,CAACh0I,SAA/B,EAA0C;AAAE;AAE3C;AACAs1I,EAAAA,qBAAqB,EAAE,YAAY,CAAE,CAHI;AAIzCC,EAAAA,qBAAqB,EAAE,YAAY,CAAE,CAJI;AAMzCC,EAAAA,WAAW,EAAE;AACZC,IAAAA,MAAM,EAAE,CADI;AAEZC,IAAAA,WAAW,EAAE,CAFD;AAGZC,IAAAA,YAAY,EAAE,CAHF;AAIZC,IAAAA,cAAc,EAAE;AAJJ,GAN4B;AAazCC,EAAAA,UAAU,EAAE;AACXC,IAAAA,IAAI,EAAE,CADK;AAEXC,IAAAA,WAAW,EAAE,CAFF;AAGXC,IAAAA,sBAAsB,EAAE;AAHb,GAb6B;AAmBzCC,EAAAA,mBAAmB,EAAE,CAEpB,SAASC,eAAT,CAA0Bl1E,MAA1B,EAAkCh2D,MAAlC,EAA2C;AAE1Cg2D,IAAAA,MAAM,CAAEh2D,MAAF,CAAN,GAAmB,KAAKyO,IAAL,CAAW,KAAKy3G,YAAhB,CAAnB;AAEA,GANmB,EAQpB,SAASilB,cAAT,CAAyBn1E,MAAzB,EAAiCh2D,MAAjC,EAA0C;AAEzC,UAAMkU,MAAM,GAAG,KAAKk3H,gBAApB;;AAEA,SAAM,IAAIl1I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGnO,MAAM,CAACrf,MAA5B,EAAoCqB,CAAC,KAAKmsB,CAA1C,EAA6C,EAAGnsB,CAAhD,EAAoD;AAEnD8/D,MAAAA,MAAM,CAAEh2D,MAAM,EAAR,CAAN,GAAsBkU,MAAM,CAAEhe,CAAF,CAA5B;AAEA;AAED,GAlBmB,EAoBpB,SAASm1I,qBAAT,CAAgCr1E,MAAhC,EAAwCh2D,MAAxC,EAAiD;AAEhDg2D,IAAAA,MAAM,CAAEh2D,MAAF,CAAN,GAAmB,KAAKorI,gBAAL,CAAuB,KAAKnB,aAA5B,CAAnB;AAEA,GAxBmB,EA0BpB,SAASqB,gBAAT,CAA2Bt1E,MAA3B,EAAmCh2D,MAAnC,EAA4C;AAE3C,SAAKorI,gBAAL,CAAsBp0I,OAAtB,CAA+Bg/D,MAA/B,EAAuCh2D,MAAvC;AAEA,GA9BmB,CAnBoB;AAqDzCurI,EAAAA,gCAAgC,EAAE,CAEjC,CACC;AAEA,WAASC,eAAT,CAA0Bx1E,MAA1B,EAAkCh2D,MAAlC,EAA2C;AAE1C,SAAKyrI,YAAL,CAAmB,KAAKvlB,YAAxB,IAAyClwD,MAAM,CAAEh2D,MAAF,CAA/C;AAEA,GAPF,EASC,SAAS0rI,8BAAT,CAAyC11E,MAAzC,EAAiDh2D,MAAjD,EAA0D;AAEzD,SAAKyrI,YAAL,CAAmB,KAAKvlB,YAAxB,IAAyClwD,MAAM,CAAEh2D,MAAF,CAA/C;AACA,SAAKyrI,YAAL,CAAkBxrF,WAAlB,GAAgC,IAAhC;AAEA,GAdF,EAgBC,SAAS0rF,yCAAT,CAAoD31E,MAApD,EAA4Dh2D,MAA5D,EAAqE;AAEpE,SAAKyrI,YAAL,CAAmB,KAAKvlB,YAAxB,IAAyClwD,MAAM,CAAEh2D,MAAF,CAA/C;AACA,SAAKyrI,YAAL,CAAkBvqG,sBAAlB,GAA2C,IAA3C;AAEA,GArBF,CAFiC,EAyB9B,CAEF;AAEA,WAAS0qG,cAAT,CAAyB51E,MAAzB,EAAiCh2D,MAAjC,EAA0C;AAEzC,UAAM6rI,IAAI,GAAG,KAAKT,gBAAlB;;AAEA,SAAM,IAAIl1I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGwpH,IAAI,CAACh3I,MAA1B,EAAkCqB,CAAC,KAAKmsB,CAAxC,EAA2C,EAAGnsB,CAA9C,EAAkD;AAEjD21I,MAAAA,IAAI,CAAE31I,CAAF,CAAJ,GAAY8/D,MAAM,CAAEh2D,MAAM,EAAR,CAAlB;AAEA;AAED,GAdC,EAgBF,SAAS8rI,6BAAT,CAAwC91E,MAAxC,EAAgDh2D,MAAhD,EAAyD;AAExD,UAAM6rI,IAAI,GAAG,KAAKT,gBAAlB;;AAEA,SAAM,IAAIl1I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGwpH,IAAI,CAACh3I,MAA1B,EAAkCqB,CAAC,KAAKmsB,CAAxC,EAA2C,EAAGnsB,CAA9C,EAAkD;AAEjD21I,MAAAA,IAAI,CAAE31I,CAAF,CAAJ,GAAY8/D,MAAM,CAAEh2D,MAAM,EAAR,CAAlB;AAEA;;AAED,SAAKyrI,YAAL,CAAkBxrF,WAAlB,GAAgC,IAAhC;AAEA,GA5BC,EA8BF,SAAS8rF,wCAAT,CAAmD/1E,MAAnD,EAA2Dh2D,MAA3D,EAAoE;AAEnE,UAAM6rI,IAAI,GAAG,KAAKT,gBAAlB;;AAEA,SAAM,IAAIl1I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGwpH,IAAI,CAACh3I,MAA1B,EAAkCqB,CAAC,KAAKmsB,CAAxC,EAA2C,EAAGnsB,CAA9C,EAAkD;AAEjD21I,MAAAA,IAAI,CAAE31I,CAAF,CAAJ,GAAY8/D,MAAM,CAAEh2D,MAAM,EAAR,CAAlB;AAEA;;AAED,SAAKyrI,YAAL,CAAkBvqG,sBAAlB,GAA2C,IAA3C;AAEA,GA1CC,CAzB8B,EAqE9B,CAEF;AAEA,WAAS8qG,qBAAT,CAAgCh2E,MAAhC,EAAwCh2D,MAAxC,EAAiD;AAEhD,SAAKorI,gBAAL,CAAuB,KAAKnB,aAA5B,IAA8Cj0E,MAAM,CAAEh2D,MAAF,CAApD;AAEA,GARC,EAUF,SAASisI,oCAAT,CAA+Cj2E,MAA/C,EAAuDh2D,MAAvD,EAAgE;AAE/D,SAAKorI,gBAAL,CAAuB,KAAKnB,aAA5B,IAA8Cj0E,MAAM,CAAEh2D,MAAF,CAApD;AACA,SAAKyrI,YAAL,CAAkBxrF,WAAlB,GAAgC,IAAhC;AAEA,GAfC,EAiBF,SAASisF,+CAAT,CAA0Dl2E,MAA1D,EAAkEh2D,MAAlE,EAA2E;AAE1E,SAAKorI,gBAAL,CAAuB,KAAKnB,aAA5B,IAA8Cj0E,MAAM,CAAEh2D,MAAF,CAApD;AACA,SAAKyrI,YAAL,CAAkBvqG,sBAAlB,GAA2C,IAA3C;AAEA,GAtBC,CArE8B,EA6F9B,CAEF;AAEA,WAASirG,kBAAT,CAA6Bn2E,MAA7B,EAAqCh2D,MAArC,EAA8C;AAE7C,SAAKorI,gBAAL,CAAsBxjH,SAAtB,CAAiCouC,MAAjC,EAAyCh2D,MAAzC;AAEA,GARC,EAUF,SAASosI,iCAAT,CAA4Cp2E,MAA5C,EAAoDh2D,MAApD,EAA6D;AAE5D,SAAKorI,gBAAL,CAAsBxjH,SAAtB,CAAiCouC,MAAjC,EAAyCh2D,MAAzC;AACA,SAAKyrI,YAAL,CAAkBxrF,WAAlB,GAAgC,IAAhC;AAEA,GAfC,EAiBF,SAASosF,4CAAT,CAAuDr2E,MAAvD,EAA+Dh2D,MAA/D,EAAwE;AAEvE,SAAKorI,gBAAL,CAAsBxjH,SAAtB,CAAiCouC,MAAjC,EAAyCh2D,MAAzC;AACA,SAAKyrI,YAAL,CAAkBvqG,sBAAlB,GAA2C,IAA3C;AAEA,GAtBC,CA7F8B,CArDO;AA8KzC7lC,EAAAA,QAAQ,EAAE,SAASixI,gBAAT,CAA2BC,WAA3B,EAAwCvsI,MAAxC,EAAiD;AAE1D,SAAKjK,IAAL;AACA,SAAKsF,QAAL,CAAekxI,WAAf,EAA4BvsI,MAA5B,EAH0D,CAK1D;AACA;AACA;AACA;AACA;AAEA,GAzLwC;AA2LzCa,EAAAA,QAAQ,EAAE,SAASyrI,gBAAT,CAA2BE,WAA3B,EAAwCxsI,MAAxC,EAAiD;AAE1D,SAAKjK,IAAL;AACA,SAAK8K,QAAL,CAAe2rI,WAAf,EAA4BxsI,MAA5B;AAEA,GAhMwC;AAkMzC;AACAjK,EAAAA,IAAI,EAAE,YAAY;AAEjB,QAAI01I,YAAY,GAAG,KAAKh9H,IAAxB;AAAA,QACCs6H,UAAU,GAAG,KAAKA,UADnB;AAAA,QAGCgB,UAAU,GAAGhB,UAAU,CAACgB,UAHzB;AAAA,QAIC7jB,YAAY,GAAG6iB,UAAU,CAAC7iB,YAJ3B;AAAA,QAKC+jB,aAAa,GAAGlB,UAAU,CAACkB,aAL5B;;AAOA,QAAK,CAAEwB,YAAP,EAAsB;AAErBA,MAAAA,YAAY,GAAGzC,eAAe,CAACS,QAAhB,CAA0B,KAAKD,QAA/B,EAAyCT,UAAU,CAACW,QAApD,KAAkE,KAAKF,QAAtF;AAEA,WAAK/6H,IAAL,GAAYg9H,YAAZ;AAEA,KAfgB,CAiBjB;;;AACA,SAAKpwI,QAAL,GAAgB,KAAKivI,qBAArB;AACA,SAAKzpI,QAAL,GAAgB,KAAK0pI,qBAArB,CAnBiB,CAqBjB;;AACA,QAAK,CAAEkB,YAAP,EAAsB;AAErB9mH,MAAAA,OAAO,CAACyD,KAAR,CAAe,6DAA6D,KAAKuoD,IAAlE,GAAyE,wBAAxF;AACA;AAEA;;AAED,QAAKo5D,UAAL,EAAkB;AAEjB,UAAIC,WAAW,GAAGjB,UAAU,CAACiB,WAA7B,CAFiB,CAIjB;;AACA,cAASD,UAAT;AAEC,aAAK,WAAL;AAEC,cAAK,CAAE0B,YAAY,CAACzmG,QAApB,EAA+B;AAE9BrgB,YAAAA,OAAO,CAACyD,KAAR,CAAe,mFAAf,EAAoG,IAApG;AACA;AAEA;;AAED,cAAK,CAAEqjH,YAAY,CAACzmG,QAAb,CAAsBb,SAA7B,EAAyC;AAExCxf,YAAAA,OAAO,CAACyD,KAAR,CAAe,6GAAf,EAA8H,IAA9H;AACA;AAEA;;AAEDqjH,UAAAA,YAAY,GAAGA,YAAY,CAACzmG,QAAb,CAAsBb,SAArC;AAEA;;AAED,aAAK,OAAL;AAEC,cAAK,CAAEsnG,YAAY,CAAC7wD,QAApB,EAA+B;AAE9Bj2D,YAAAA,OAAO,CAACyD,KAAR,CAAe,gFAAf,EAAiG,IAAjG;AACA;AAEA,WAPF,CASC;AACA;;;AAEAqjH,UAAAA,YAAY,GAAGA,YAAY,CAAC7wD,QAAb,CAAsBC,KAArC,CAZD,CAcC;;AACA,eAAM,IAAI3kF,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGu1I,YAAY,CAAC52I,MAAlC,EAA0CqB,CAAC,EAA3C,EAAiD;AAEhD,gBAAKu1I,YAAY,CAAEv1I,CAAF,CAAZ,CAAkBsV,IAAlB,KAA2Bw+H,WAAhC,EAA8C;AAE7CA,cAAAA,WAAW,GAAG9zI,CAAd;AACA;AAEA;AAED;;AAED;;AAED;AAEC,cAAKu1I,YAAY,CAAE1B,UAAF,CAAZ,KAA+B9yI,SAApC,EAAgD;AAE/C0tB,YAAAA,OAAO,CAACyD,KAAR,CAAe,sEAAf,EAAuF,IAAvF;AACA;AAEA;;AAEDqjH,UAAAA,YAAY,GAAGA,YAAY,CAAE1B,UAAF,CAA3B;AA3DF;;AAgEA,UAAKC,WAAW,KAAK/yI,SAArB,EAAiC;AAEhC,YAAKw0I,YAAY,CAAEzB,WAAF,CAAZ,KAAgC/yI,SAArC,EAAiD;AAEhD0tB,UAAAA,OAAO,CAACyD,KAAR,CAAe,uFAAf,EAAwG,IAAxG,EAA8GqjH,YAA9G;AACA;AAEA;;AAEDA,QAAAA,YAAY,GAAGA,YAAY,CAAEzB,WAAF,CAA3B;AAEA;AAED,KA/GgB,CAiHjB;;;AACA,UAAMyC,YAAY,GAAGhB,YAAY,CAAEvlB,YAAF,CAAjC;;AAEA,QAAKumB,YAAY,KAAKx1I,SAAtB,EAAkC;AAEjC,YAAMyyI,QAAQ,GAAGX,UAAU,CAACW,QAA5B;AAEA/kH,MAAAA,OAAO,CAACyD,KAAR,CAAe,iEAAiEshH,QAAjE,GACd,GADc,GACRxjB,YADQ,GACO,wBADtB,EACgDulB,YADhD;AAEA;AAEA,KA5HgB,CA8HjB;;;AACA,QAAIiB,UAAU,GAAG,KAAK7B,UAAL,CAAgBC,IAAjC;AAEA,SAAKW,YAAL,GAAoBA,YAApB;;AAEA,QAAKA,YAAY,CAACxrF,WAAb,KAA6BhpD,SAAlC,EAA8C;AAAE;AAE/Cy1I,MAAAA,UAAU,GAAG,KAAK7B,UAAL,CAAgBE,WAA7B;AAEA,KAJD,MAIO,IAAKU,YAAY,CAACvqG,sBAAb,KAAwCjqC,SAA7C,EAAyD;AAAE;AAEjEy1I,MAAAA,UAAU,GAAG,KAAK7B,UAAL,CAAgBG,sBAA7B;AAEA,KA3IgB,CA6IjB;;;AACA,QAAI2B,WAAW,GAAG,KAAKnC,WAAL,CAAiBC,MAAnC;;AAEA,QAAKR,aAAa,KAAKhzI,SAAvB,EAAmC;AAElC;AAEA,UAAKivH,YAAY,KAAK,uBAAtB,EAAgD;AAE/C;AAEA;AACA,YAAK,CAAEulB,YAAY,CAAC5mG,QAApB,EAA+B;AAE9BlgB,UAAAA,OAAO,CAACyD,KAAR,CAAe,qGAAf,EAAsH,IAAtH;AACA;AAEA;;AAED,YAAKqjH,YAAY,CAAC5mG,QAAb,CAAsB4a,gBAA3B,EAA8C;AAE7C,cAAK,CAAEgsF,YAAY,CAAC5mG,QAAb,CAAsBya,eAA7B,EAA+C;AAE9C36B,YAAAA,OAAO,CAACyD,KAAR,CAAe,qHAAf,EAAsI,IAAtI;AACA;AAEA;;AAED,cAAKqjH,YAAY,CAACpnF,qBAAb,CAAoC4lF,aAApC,MAAwDhzI,SAA7D,EAAyE;AAExEgzI,YAAAA,aAAa,GAAGwB,YAAY,CAACpnF,qBAAb,CAAoC4lF,aAApC,CAAhB;AAEA;AAGD,SAhBD,MAgBO;AAENtlH,UAAAA,OAAO,CAACyD,KAAR,CAAe,mHAAf,EAAoI,IAApI;AACA;AAEA;AAED;;AAEDukH,MAAAA,WAAW,GAAG,KAAKnC,WAAL,CAAiBG,YAA/B;AAEA,WAAKS,gBAAL,GAAwBqB,YAAxB;AACA,WAAKxC,aAAL,GAAqBA,aAArB;AAEA,KA9CD,MA8CO,IAAKwC,YAAY,CAAC7kH,SAAb,KAA2B3wB,SAA3B,IAAwCw1I,YAAY,CAACz1I,OAAb,KAAyBC,SAAtE,EAAkF;AAExF;AAEA01I,MAAAA,WAAW,GAAG,KAAKnC,WAAL,CAAiBI,cAA/B;AAEA,WAAKQ,gBAAL,GAAwBqB,YAAxB;AAEA,KARM,MAQA,IAAK13I,KAAK,CAACoC,OAAN,CAAes1I,YAAf,CAAL,EAAqC;AAE3CE,MAAAA,WAAW,GAAG,KAAKnC,WAAL,CAAiBE,WAA/B;AAEA,WAAKU,gBAAL,GAAwBqB,YAAxB;AAEA,KANM,MAMA;AAEN,WAAKvmB,YAAL,GAAoBA,YAApB;AAEA,KAhNgB,CAkNjB;;;AACA,SAAK7qH,QAAL,GAAgB,KAAK4vI,mBAAL,CAA0B0B,WAA1B,CAAhB;AACA,SAAK9rI,QAAL,GAAgB,KAAK0qI,gCAAL,CAAuCoB,WAAvC,EAAsDD,UAAtD,CAAhB;AAEA,GAzZwC;AA2ZzC9oI,EAAAA,MAAM,EAAE,YAAY;AAEnB,SAAK6K,IAAL,GAAY,IAAZ,CAFmB,CAInB;AACA;;AACA,SAAKpT,QAAL,GAAgB,KAAKuxI,iBAArB;AACA,SAAK/rI,QAAL,GAAgB,KAAKgsI,iBAArB;AAEA;AApawC,CAA1C,GAwaA;;AACAj3I,MAAM,CAACme,MAAP,CAAei1H,eAAe,CAACh0I,SAA/B,EAA0C;AAEzC;AACA43I,EAAAA,iBAAiB,EAAE5D,eAAe,CAACh0I,SAAhB,CAA0BqG,QAHJ;AAIzCwxI,EAAAA,iBAAiB,EAAE7D,eAAe,CAACh0I,SAAhB,CAA0B6L;AAJJ,CAA1C;AAQA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,SAASisI,oBAAT,GAAgC;AAE/B,OAAK7qH,IAAL,GAAYV,SAAS,CAACI,YAAV,EAAZ,CAF+B,CAI/B;;AACA,OAAKs/D,QAAL,GAAgBlsF,KAAK,CAACC,SAAN,CAAgBG,KAAhB,CAAsBI,IAAtB,CAA4BC,SAA5B,CAAhB;AAEA,OAAK8zI,eAAL,GAAuB,CAAvB,CAP+B,CAOL;AAC1B;;AAEA,QAAM7mF,OAAO,GAAG,EAAhB;AACA,OAAKsqF,cAAL,GAAsBtqF,OAAtB,CAX+B,CAWA;;AAE/B,OAAM,IAAIvsD,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG7sB,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,KAAKmsB,CAA7C,EAAgD,EAAGnsB,CAAnD,EAAuD;AAEtDusD,IAAAA,OAAO,CAAEjtD,SAAS,CAAEU,CAAF,CAAT,CAAe+rB,IAAjB,CAAP,GAAiC/rB,CAAjC;AAEA;;AAED,OAAK82I,MAAL,GAAc,EAAd,CAnB+B,CAmBb;;AAClB,OAAKC,YAAL,GAAoB,EAApB,CApB+B,CAoBP;;AACxB,OAAK9D,SAAL,GAAiB,EAAjB,CArB+B,CAqBV;;AACrB,OAAK+D,sBAAL,GAA8B,EAA9B,CAtB+B,CAsBG;;AAElC,QAAM72I,KAAK,GAAG,IAAd;AAEA,OAAK82I,KAAL,GAAa;AAEZ/sE,IAAAA,OAAO,EAAE;AACR,UAAIgtE,KAAJ,GAAY;AAEX,eAAO/2I,KAAK,CAAC4qF,QAAN,CAAepsF,MAAtB;AAEA,OALO;;AAMR,UAAIw4I,KAAJ,GAAY;AAEX,eAAO,KAAKD,KAAL,GAAa/2I,KAAK,CAACizI,eAA1B;AAEA;;AAVO,KAFG;;AAcZ,QAAIgE,iBAAJ,GAAwB;AAEvB,aAAOj3I,KAAK,CAAC8yI,SAAN,CAAgBt0I,MAAvB;AAEA;;AAlBW,GAAb;AAsBA;;AAEDe,MAAM,CAACme,MAAP,CAAe+4H,oBAAoB,CAAC93I,SAApC,EAA+C;AAE9C20I,EAAAA,sBAAsB,EAAE,IAFsB;AAI9C97H,EAAAA,GAAG,EAAE,YAAY;AAEhB,UAAMuyD,OAAO,GAAG,KAAK6gB,QAArB;AAAA,UACCssD,aAAa,GAAG,KAAKR,cADtB;AAAA,UAECrR,KAAK,GAAG,KAAKsR,MAFd;AAAA,UAGCQ,WAAW,GAAG,KAAKP,YAHpB;AAAA,UAIC1D,QAAQ,GAAG,KAAKJ,SAJjB;AAAA,UAKCsE,SAAS,GAAGlE,QAAQ,CAAC10I,MALtB;AAOA,QAAI64I,WAAW,GAAGz2I,SAAlB;AAAA,QACC02I,QAAQ,GAAGvtE,OAAO,CAACvrE,MADpB;AAAA,QAEC+4I,cAAc,GAAG,KAAKtE,eAFvB;;AAIA,SAAM,IAAIpzI,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG7sB,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,KAAKmsB,CAA7C,EAAgD,EAAGnsB,CAAnD,EAAuD;AAEtD,YAAMyE,MAAM,GAAGnF,SAAS,CAAEU,CAAF,CAAxB;AAAA,YACC+rB,IAAI,GAAGtnB,MAAM,CAACsnB,IADf;AAEA,UAAIxiB,KAAK,GAAG8tI,aAAa,CAAEtrH,IAAF,CAAzB;;AAEA,UAAKxiB,KAAK,KAAKxI,SAAf,EAA2B;AAE1B;AAEAwI,QAAAA,KAAK,GAAGkuI,QAAQ,EAAhB;AACAJ,QAAAA,aAAa,CAAEtrH,IAAF,CAAb,GAAwBxiB,KAAxB;AACA2gE,QAAAA,OAAO,CAAC/gE,IAAR,CAAc1E,MAAd,EAN0B,CAQ1B;;AAEA,aAAM,IAAIovC,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAGmrH,SAArB,EAAgC1jG,CAAC,KAAKznB,CAAtC,EAAyC,EAAGynB,CAA5C,EAAgD;AAE/Cw/F,UAAAA,QAAQ,CAAEx/F,CAAF,CAAR,CAAc1qC,IAAd,CAAoB,IAAI2pI,eAAJ,CAAqBruI,MAArB,EAA6B+gI,KAAK,CAAE3xF,CAAF,CAAlC,EAAyCyjG,WAAW,CAAEzjG,CAAF,CAApD,CAApB;AAEA;AAED,OAhBD,MAgBO,IAAKtqC,KAAK,GAAGmuI,cAAb,EAA8B;AAEpCF,QAAAA,WAAW,GAAGttE,OAAO,CAAE3gE,KAAF,CAArB,CAFoC,CAIpC;;AAEA,cAAMouI,gBAAgB,GAAG,EAAGD,cAA5B;AAAA,cACCE,gBAAgB,GAAG1tE,OAAO,CAAEytE,gBAAF,CAD3B;AAGAN,QAAAA,aAAa,CAAEO,gBAAgB,CAAC7rH,IAAnB,CAAb,GAAyCxiB,KAAzC;AACA2gE,QAAAA,OAAO,CAAE3gE,KAAF,CAAP,GAAmBquI,gBAAnB;AAEAP,QAAAA,aAAa,CAAEtrH,IAAF,CAAb,GAAwB4rH,gBAAxB;AACAztE,QAAAA,OAAO,CAAEytE,gBAAF,CAAP,GAA8BlzI,MAA9B,CAboC,CAepC;;AAEA,aAAM,IAAIovC,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAGmrH,SAArB,EAAgC1jG,CAAC,KAAKznB,CAAtC,EAAyC,EAAGynB,CAA5C,EAAgD;AAE/C,gBAAMgkG,eAAe,GAAGxE,QAAQ,CAAEx/F,CAAF,CAAhC;AAAA,gBACCikG,UAAU,GAAGD,eAAe,CAAEF,gBAAF,CAD7B;AAGA,cAAI7H,OAAO,GAAG+H,eAAe,CAAEtuI,KAAF,CAA7B;AAEAsuI,UAAAA,eAAe,CAAEtuI,KAAF,CAAf,GAA2BuuI,UAA3B;;AAEA,cAAKhI,OAAO,KAAK/uI,SAAjB,EAA6B;AAE5B;AACA;AACA;AAEA+uI,YAAAA,OAAO,GAAG,IAAIgD,eAAJ,CAAqBruI,MAArB,EAA6B+gI,KAAK,CAAE3xF,CAAF,CAAlC,EAAyCyjG,WAAW,CAAEzjG,CAAF,CAApD,CAAV;AAEA;;AAEDgkG,UAAAA,eAAe,CAAEF,gBAAF,CAAf,GAAsC7H,OAAtC;AAEA;AAED,OAxCM,MAwCA,IAAK5lE,OAAO,CAAE3gE,KAAF,CAAP,KAAqBiuI,WAA1B,EAAwC;AAE9C/oH,QAAAA,OAAO,CAACyD,KAAR,CAAe,sEACd,mFADD;AAGA,OAnEqD,CAmEpD;;AAEF,KAlFe,CAkFd;;;AAEF,SAAKkhH,eAAL,GAAuBsE,cAAvB;AAEA,GA1F6C;AA4F9Ch+H,EAAAA,MAAM,EAAE,YAAY;AAEnB,UAAMwwD,OAAO,GAAG,KAAK6gB,QAArB;AAAA,UACCssD,aAAa,GAAG,KAAKR,cADtB;AAAA,UAECxD,QAAQ,GAAG,KAAKJ,SAFjB;AAAA,UAGCsE,SAAS,GAAGlE,QAAQ,CAAC10I,MAHtB;AAKA,QAAI+4I,cAAc,GAAG,KAAKtE,eAA1B;;AAEA,SAAM,IAAIpzI,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG7sB,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,KAAKmsB,CAA7C,EAAgD,EAAGnsB,CAAnD,EAAuD;AAEtD,YAAMyE,MAAM,GAAGnF,SAAS,CAAEU,CAAF,CAAxB;AAAA,YACC+rB,IAAI,GAAGtnB,MAAM,CAACsnB,IADf;AAAA,YAECxiB,KAAK,GAAG8tI,aAAa,CAAEtrH,IAAF,CAFtB;;AAIA,UAAKxiB,KAAK,KAAKxI,SAAV,IAAuBwI,KAAK,IAAImuI,cAArC,EAAsD;AAErD;AAEA,cAAMK,eAAe,GAAGL,cAAc,EAAtC;AAAA,cACCM,iBAAiB,GAAG9tE,OAAO,CAAE6tE,eAAF,CAD5B;AAGAV,QAAAA,aAAa,CAAEW,iBAAiB,CAACjsH,IAApB,CAAb,GAA0CxiB,KAA1C;AACA2gE,QAAAA,OAAO,CAAE3gE,KAAF,CAAP,GAAmByuI,iBAAnB;AAEAX,QAAAA,aAAa,CAAEtrH,IAAF,CAAb,GAAwBgsH,eAAxB;AACA7tE,QAAAA,OAAO,CAAE6tE,eAAF,CAAP,GAA6BtzI,MAA7B,CAXqD,CAarD;;AAEA,aAAM,IAAIovC,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAGmrH,SAArB,EAAgC1jG,CAAC,KAAKznB,CAAtC,EAAyC,EAAGynB,CAA5C,EAAgD;AAE/C,gBAAMgkG,eAAe,GAAGxE,QAAQ,CAAEx/F,CAAF,CAAhC;AAAA,gBACCokG,WAAW,GAAGJ,eAAe,CAAEE,eAAF,CAD9B;AAAA,gBAECjI,OAAO,GAAG+H,eAAe,CAAEtuI,KAAF,CAF1B;AAIAsuI,UAAAA,eAAe,CAAEtuI,KAAF,CAAf,GAA2B0uI,WAA3B;AACAJ,UAAAA,eAAe,CAAEE,eAAF,CAAf,GAAqCjI,OAArC;AAEA;AAED;AAED,KA3CkB,CA2CjB;;;AAEF,SAAKsD,eAAL,GAAuBsE,cAAvB;AAEA,GA3I6C;AA6I9C;AACAQ,EAAAA,OAAO,EAAE,YAAY;AAEpB,UAAMhuE,OAAO,GAAG,KAAK6gB,QAArB;AAAA,UACCssD,aAAa,GAAG,KAAKR,cADtB;AAAA,UAECxD,QAAQ,GAAG,KAAKJ,SAFjB;AAAA,UAGCsE,SAAS,GAAGlE,QAAQ,CAAC10I,MAHtB;AAKA,QAAI+4I,cAAc,GAAG,KAAKtE,eAA1B;AAAA,QACCqE,QAAQ,GAAGvtE,OAAO,CAACvrE,MADpB;;AAGA,SAAM,IAAIqB,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAG7sB,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,KAAKmsB,CAA7C,EAAgD,EAAGnsB,CAAnD,EAAuD;AAEtD,YAAMyE,MAAM,GAAGnF,SAAS,CAAEU,CAAF,CAAxB;AAAA,YACC+rB,IAAI,GAAGtnB,MAAM,CAACsnB,IADf;AAAA,YAECxiB,KAAK,GAAG8tI,aAAa,CAAEtrH,IAAF,CAFtB;;AAIA,UAAKxiB,KAAK,KAAKxI,SAAf,EAA2B;AAE1B,eAAOs2I,aAAa,CAAEtrH,IAAF,CAApB;;AAEA,YAAKxiB,KAAK,GAAGmuI,cAAb,EAA8B;AAE7B;AAEA,gBAAMC,gBAAgB,GAAG,EAAGD,cAA5B;AAAA,gBACCE,gBAAgB,GAAG1tE,OAAO,CAAEytE,gBAAF,CAD3B;AAAA,gBAECh9D,SAAS,GAAG,EAAG88D,QAFhB;AAAA,gBAGCU,UAAU,GAAGjuE,OAAO,CAAEyQ,SAAF,CAHrB,CAJ6B,CAS7B;;AACA08D,UAAAA,aAAa,CAAEO,gBAAgB,CAAC7rH,IAAnB,CAAb,GAAyCxiB,KAAzC;AACA2gE,UAAAA,OAAO,CAAE3gE,KAAF,CAAP,GAAmBquI,gBAAnB,CAX6B,CAa7B;;AACAP,UAAAA,aAAa,CAAEc,UAAU,CAACpsH,IAAb,CAAb,GAAmC4rH,gBAAnC;AACAztE,UAAAA,OAAO,CAAEytE,gBAAF,CAAP,GAA8BQ,UAA9B;AACAjuE,UAAAA,OAAO,CAAC+b,GAAR,GAhB6B,CAkB7B;;AAEA,eAAM,IAAIpyC,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAGmrH,SAArB,EAAgC1jG,CAAC,KAAKznB,CAAtC,EAAyC,EAAGynB,CAA5C,EAAgD;AAE/C,kBAAMgkG,eAAe,GAAGxE,QAAQ,CAAEx/F,CAAF,CAAhC;AAAA,kBACCikG,UAAU,GAAGD,eAAe,CAAEF,gBAAF,CAD7B;AAAA,kBAECpgC,IAAI,GAAGsgC,eAAe,CAAEl9D,SAAF,CAFvB;AAIAk9D,YAAAA,eAAe,CAAEtuI,KAAF,CAAf,GAA2BuuI,UAA3B;AACAD,YAAAA,eAAe,CAAEF,gBAAF,CAAf,GAAsCpgC,IAAtC;AACAsgC,YAAAA,eAAe,CAAC5xD,GAAhB;AAEA;AAED,SAhCD,MAgCO;AAEN;AAEA,gBAAMtL,SAAS,GAAG,EAAG88D,QAArB;AAAA,gBACCU,UAAU,GAAGjuE,OAAO,CAAEyQ,SAAF,CADrB;AAGA08D,UAAAA,aAAa,CAAEc,UAAU,CAACpsH,IAAb,CAAb,GAAmCxiB,KAAnC;AACA2gE,UAAAA,OAAO,CAAE3gE,KAAF,CAAP,GAAmB4uI,UAAnB;AACAjuE,UAAAA,OAAO,CAAC+b,GAAR,GATM,CAWN;;AAEA,eAAM,IAAIpyC,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAGmrH,SAArB,EAAgC1jG,CAAC,KAAKznB,CAAtC,EAAyC,EAAGynB,CAA5C,EAAgD;AAE/C,kBAAMgkG,eAAe,GAAGxE,QAAQ,CAAEx/F,CAAF,CAAhC;AAEAgkG,YAAAA,eAAe,CAAEtuI,KAAF,CAAf,GAA2BsuI,eAAe,CAAEl9D,SAAF,CAA1C;AACAk9D,YAAAA,eAAe,CAAC5xD,GAAhB;AAEA;AAED,SA1DyB,CA0DxB;;AAEF,OAlEqD,CAkEpD;;AAEF,KA9EmB,CA8ElB;;;AAEF,SAAKmtD,eAAL,GAAuBsE,cAAvB;AAEA,GAhO6C;AAkO9C;AAEAxE,EAAAA,UAAU,EAAE,UAAWz4D,IAAX,EAAiBo4D,UAAjB,EAA8B;AAEzC;AACA;AAEA,QAAIuF,aAAa,GAAG,KAAKpB,sBAAzB;AAAA,QACCztI,KAAK,GAAG6uI,aAAa,CAAE39D,IAAF,CADtB;AAAA,QAEC44D,QAAQ,GAAG,KAAKJ,SAFjB;AAIA,QAAK1pI,KAAK,KAAKxI,SAAf,EAA2B,OAAOsyI,QAAQ,CAAE9pI,KAAF,CAAf;AAE3B,UAAMi8H,KAAK,GAAG,KAAKsR,MAAnB;AAAA,UACCQ,WAAW,GAAG,KAAKP,YADpB;AAAA,UAEC7sE,OAAO,GAAG,KAAK6gB,QAFhB;AAAA,UAGC0sD,QAAQ,GAAGvtE,OAAO,CAACvrE,MAHpB;AAAA,UAIC+4I,cAAc,GAAG,KAAKtE,eAJvB;AAAA,UAKCyE,eAAe,GAAG,IAAIh5I,KAAJ,CAAW44I,QAAX,CALnB;AAOAluI,IAAAA,KAAK,GAAG8pI,QAAQ,CAAC10I,MAAjB;AAEAy5I,IAAAA,aAAa,CAAE39D,IAAF,CAAb,GAAwBlxE,KAAxB;AAEAi8H,IAAAA,KAAK,CAACr8H,IAAN,CAAYsxE,IAAZ;AACA68D,IAAAA,WAAW,CAACnuI,IAAZ,CAAkB0pI,UAAlB;AACAQ,IAAAA,QAAQ,CAAClqI,IAAT,CAAe0uI,eAAf;;AAEA,SAAM,IAAI73I,CAAC,GAAG03I,cAAR,EAAwBvrH,CAAC,GAAG+9C,OAAO,CAACvrE,MAA1C,EAAkDqB,CAAC,KAAKmsB,CAAxD,EAA2D,EAAGnsB,CAA9D,EAAkE;AAEjE,YAAMyE,MAAM,GAAGylE,OAAO,CAAElqE,CAAF,CAAtB;AACA63I,MAAAA,eAAe,CAAE73I,CAAF,CAAf,GAAuB,IAAI8yI,eAAJ,CAAqBruI,MAArB,EAA6Bg2E,IAA7B,EAAmCo4D,UAAnC,CAAvB;AAEA;;AAED,WAAOgF,eAAP;AAEA,GAvQ6C;AAyQ9CQ,EAAAA,YAAY,EAAE,UAAW59D,IAAX,EAAkB;AAE/B;AACA;AAEA,UAAM29D,aAAa,GAAG,KAAKpB,sBAA3B;AAAA,UACCztI,KAAK,GAAG6uI,aAAa,CAAE39D,IAAF,CADtB;;AAGA,QAAKlxE,KAAK,KAAKxI,SAAf,EAA2B;AAE1B,YAAMykI,KAAK,GAAG,KAAKsR,MAAnB;AAAA,YACCQ,WAAW,GAAG,KAAKP,YADpB;AAAA,YAEC1D,QAAQ,GAAG,KAAKJ,SAFjB;AAAA,YAGCqF,iBAAiB,GAAGjF,QAAQ,CAAC10I,MAAT,GAAkB,CAHvC;AAAA,YAIC45I,YAAY,GAAGlF,QAAQ,CAAEiF,iBAAF,CAJxB;AAAA,YAKCE,gBAAgB,GAAG/9D,IAAI,CAAE69D,iBAAF,CALxB;AAOAF,MAAAA,aAAa,CAAEI,gBAAF,CAAb,GAAoCjvI,KAApC;AAEA8pI,MAAAA,QAAQ,CAAE9pI,KAAF,CAAR,GAAoBgvI,YAApB;AACAlF,MAAAA,QAAQ,CAACptD,GAAT;AAEAqxD,MAAAA,WAAW,CAAE/tI,KAAF,CAAX,GAAuB+tI,WAAW,CAAEgB,iBAAF,CAAlC;AACAhB,MAAAA,WAAW,CAACrxD,GAAZ;AAEAu/C,MAAAA,KAAK,CAAEj8H,KAAF,CAAL,GAAiBi8H,KAAK,CAAE8S,iBAAF,CAAtB;AACA9S,MAAAA,KAAK,CAACv/C,GAAN;AAEA;AAED;AAvS6C,CAA/C;AA2SA;;;;;;;;;;;AAWA,SAASwyD,eAAT,CAA0BC,KAA1B,EAAiCvxB,IAAjC,EAAuCwxB,SAAvC,EAAkD7vB,SAAlD,EAA8D;AAE7D,OAAK8vB,MAAL,GAAcF,KAAd;AACA,OAAKG,KAAL,GAAa1xB,IAAb;AACA,OAAK2xB,UAAL,GAAkBH,SAAS,IAAI,IAA/B;AACA,OAAK7vB,SAAL,GAAiBA,SAAS,IAAI3B,IAAI,CAAC2B,SAAnC;AAEA,QAAM1B,MAAM,GAAGD,IAAI,CAACC,MAApB;AAAA,QACC2xB,OAAO,GAAG3xB,MAAM,CAACzoH,MADlB;AAAA,QAECq6I,YAAY,GAAG,IAAIn6I,KAAJ,CAAWk6I,OAAX,CAFhB;AAIA,QAAME,mBAAmB,GAAG;AAC3BxuB,IAAAA,WAAW,EAAEziG,mBADc;AAE3B0iG,IAAAA,SAAS,EAAE1iG;AAFgB,GAA5B;;AAKA,OAAM,IAAIhoB,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAK+4I,OAAvB,EAAgC,EAAG/4I,CAAnC,EAAuC;AAEtC,UAAMuoH,WAAW,GAAGnB,MAAM,CAAEpnH,CAAF,CAAN,CAAYwoH,iBAAZ,CAA+B,IAA/B,CAApB;AACAwwB,IAAAA,YAAY,CAAEh5I,CAAF,CAAZ,GAAoBuoH,WAApB;AACAA,IAAAA,WAAW,CAACyB,QAAZ,GAAuBivB,mBAAvB;AAEA;;AAED,OAAKC,oBAAL,GAA4BD,mBAA5B;AAEA,OAAKE,aAAL,GAAqBH,YAArB,CA1B6D,CA0B1B;AAEnC;;AACA,OAAKI,iBAAL,GAAyB,IAAIv6I,KAAJ,CAAWk6I,OAAX,CAAzB;AAEA,OAAKM,WAAL,GAAmB,IAAnB,CA/B6D,CA+BpC;;AACzB,OAAKC,iBAAL,GAAyB,IAAzB,CAhC6D,CAgC9B;;AAE/B,OAAKC,qBAAL,GAA6B,IAA7B;AACA,OAAKC,kBAAL,GAA0B,IAA1B;AAEA,OAAKrO,IAAL,GAAYxjH,UAAZ;AACA,OAAK8xH,UAAL,GAAkB,CAAE,CAApB,CAtC6D,CAwC7D;AACA;;AACA,OAAKC,UAAL,GAAkB,IAAlB,CA1C6D,CA4C7D;AACA;;AACA,OAAK16E,IAAL,GAAY,CAAZ;AAEA,OAAK4tD,SAAL,GAAiB,CAAjB;AACA,OAAK+sB,mBAAL,GAA2B,CAA3B;AAEA,OAAKxrC,MAAL,GAAc,CAAd;AACA,OAAKyrC,gBAAL,GAAwB,CAAxB;AAEA,OAAKC,WAAL,GAAmBjpG,QAAnB,CAtD6D,CAsDhC;;AAE7B,OAAKkpG,MAAL,GAAc,KAAd,CAxD6D,CAwDxC;;AACrB,OAAKrmF,OAAL,GAAe,IAAf,CAzD6D,CAyDxC;;AAErB,OAAKsmF,iBAAL,GAAyB,KAAzB,CA3D6D,CA2D9B;;AAE/B,OAAKC,gBAAL,GAAwB,IAAxB,CA7D6D,CA6DhC;;AAC7B,OAAKC,cAAL,GAAsB,IAAtB,CA9D6D,CA8DlC;AAE3B;;AAEDv6I,MAAM,CAACme,MAAP,CAAe46H,eAAe,CAAC35I,SAA/B,EAA0C;AAEzC;AAEAytI,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAKqM,MAAL,CAAYsB,eAAZ,CAA6B,IAA7B;;AAEA,WAAO,IAAP;AAEA,GAVwC;AAYzCh7E,EAAAA,IAAI,EAAE,YAAY;AAEjB,SAAK05E,MAAL,CAAYuB,iBAAZ,CAA+B,IAA/B;;AAEA,WAAO,KAAKjrE,KAAL,EAAP;AAEA,GAlBwC;AAoBzCA,EAAAA,KAAK,EAAE,YAAY;AAElB,SAAK4qE,MAAL,GAAc,KAAd;AACA,SAAKrmF,OAAL,GAAe,IAAf;AAEA,SAAKuL,IAAL,GAAY,CAAZ,CALkB,CAKH;;AACf,SAAKy6E,UAAL,GAAkB,CAAE,CAApB,CANkB,CAMI;;AACtB,SAAKC,UAAL,GAAkB,IAAlB,CAPkB,CAOK;;AAEvB,WAAO,KAAKU,UAAL,GAAkBC,WAAlB,EAAP;AAEA,GA/BwC;AAiCzCC,EAAAA,SAAS,EAAE,YAAY;AAEtB,WAAO,KAAK7mF,OAAL,IAAgB,CAAE,KAAKqmF,MAAvB,IAAiC,KAAKltB,SAAL,KAAmB,CAApD,IACN,KAAK8sB,UAAL,KAAoB,IADd,IACsB,KAAKd,MAAL,CAAY2B,eAAZ,CAA6B,IAA7B,CAD7B;AAGA,GAtCwC;AAwCzC;AACAC,EAAAA,WAAW,EAAE,YAAY;AAExB,WAAO,KAAK5B,MAAL,CAAY2B,eAAZ,CAA6B,IAA7B,CAAP;AAEA,GA7CwC;AA+CzCE,EAAAA,OAAO,EAAE,UAAWz7E,IAAX,EAAkB;AAE1B,SAAK06E,UAAL,GAAkB16E,IAAlB;AAEA,WAAO,IAAP;AAEA,GArDwC;AAuDzCouE,EAAAA,OAAO,EAAE,UAAW19D,IAAX,EAAiBmqE,WAAjB,EAA+B;AAEvC,SAAK1O,IAAL,GAAYz7D,IAAZ;AACA,SAAKmqE,WAAL,GAAmBA,WAAnB;AAEA,WAAO,IAAP;AAEA,GA9DwC;AAgEzC;AAEA;AACA;AACA;AACAa,EAAAA,kBAAkB,EAAE,UAAWvsC,MAAX,EAAoB;AAEvC,SAAKA,MAAL,GAAcA,MAAd,CAFuC,CAIvC;;AACA,SAAKyrC,gBAAL,GAAwB,KAAKnmF,OAAL,GAAe06C,MAAf,GAAwB,CAAhD;AAEA,WAAO,KAAKisC,UAAL,EAAP;AAEA,GA9EwC;AAgFzC;AACAO,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,WAAO,KAAKf,gBAAZ;AAEA,GArFwC;AAuFzCgB,EAAAA,MAAM,EAAE,UAAWtsB,QAAX,EAAsB;AAE7B,WAAO,KAAKusB,eAAL,CAAsBvsB,QAAtB,EAAgC,CAAhC,EAAmC,CAAnC,CAAP;AAEA,GA3FwC;AA6FzCwsB,EAAAA,OAAO,EAAE,UAAWxsB,QAAX,EAAsB;AAE9B,WAAO,KAAKusB,eAAL,CAAsBvsB,QAAtB,EAAgC,CAAhC,EAAmC,CAAnC,CAAP;AAEA,GAjGwC;AAmGzCysB,EAAAA,aAAa,EAAE,UAAWC,aAAX,EAA0B1sB,QAA1B,EAAoC2sB,IAApC,EAA2C;AAEzDD,IAAAA,aAAa,CAACF,OAAd,CAAuBxsB,QAAvB;AACA,SAAKssB,MAAL,CAAatsB,QAAb;;AAEA,QAAK2sB,IAAL,EAAY;AAEX,YAAMC,cAAc,GAAG,KAAKrC,KAAL,CAAWvqB,QAAlC;AAAA,YACC6sB,eAAe,GAAGH,aAAa,CAACnC,KAAd,CAAoBvqB,QADvC;AAAA,YAGC8sB,aAAa,GAAGD,eAAe,GAAGD,cAHnC;AAAA,YAICG,aAAa,GAAGH,cAAc,GAAGC,eAJlC;AAMAH,MAAAA,aAAa,CAACC,IAAd,CAAoB,GAApB,EAAyBG,aAAzB,EAAwC9sB,QAAxC;AACA,WAAK2sB,IAAL,CAAWI,aAAX,EAA0B,GAA1B,EAA+B/sB,QAA/B;AAEA;;AAED,WAAO,IAAP;AAEA,GAvHwC;AAyHzCgtB,EAAAA,WAAW,EAAE,UAAWC,YAAX,EAAyBjtB,QAAzB,EAAmC2sB,IAAnC,EAA0C;AAEtD,WAAOM,YAAY,CAACR,aAAb,CAA4B,IAA5B,EAAkCzsB,QAAlC,EAA4C2sB,IAA5C,CAAP;AAEA,GA7HwC;AA+HzCb,EAAAA,UAAU,EAAE,YAAY;AAEvB,QAAIoB,iBAAiB,GAAG,KAAKhC,kBAA7B;;AAEA,QAAKgC,iBAAiB,KAAK,IAA3B,EAAkC;AAEjC,WAAKhC,kBAAL,GAA0B,IAA1B;;AACA,WAAKZ,MAAL,CAAY6C,2BAAZ,CAAyCD,iBAAzC;AAEA;;AAED,WAAO,IAAP;AAEA,GA5IwC;AA8IzC;AAEA;AACA;AACA;AACAE,EAAAA,qBAAqB,EAAE,UAAW9uB,SAAX,EAAuB;AAE7C,SAAKA,SAAL,GAAiBA,SAAjB;AACA,SAAK+sB,mBAAL,GAA2B,KAAKG,MAAL,GAAc,CAAd,GAAkBltB,SAA7C;AAEA,WAAO,KAAKytB,WAAL,EAAP;AAEA,GA1JwC;AA4JzC;AACAsB,EAAAA,qBAAqB,EAAE,YAAY;AAElC,WAAO,KAAKhC,mBAAZ;AAEA,GAjKwC;AAmKzCiC,EAAAA,WAAW,EAAE,UAAWttB,QAAX,EAAsB;AAElC,SAAK1B,SAAL,GAAiB,KAAKisB,KAAL,CAAWvqB,QAAX,GAAsBA,QAAvC;AAEA,WAAO,KAAK+rB,WAAL,EAAP;AAEA,GAzKwC;AA2KzCwB,EAAAA,QAAQ,EAAE,UAAWhV,MAAX,EAAoB;AAE7B,SAAK7nE,IAAL,GAAY6nE,MAAM,CAAC7nE,IAAnB;AACA,SAAK4tD,SAAL,GAAiBia,MAAM,CAACja,SAAxB;AAEA,WAAO,KAAKytB,WAAL,EAAP;AAEA,GAlLwC;AAoLzCyB,EAAAA,IAAI,EAAE,UAAWxtB,QAAX,EAAsB;AAE3B,WAAO,KAAK2sB,IAAL,CAAW,KAAKtB,mBAAhB,EAAqC,CAArC,EAAwCrrB,QAAxC,CAAP;AAEA,GAxLwC;AA0LzC2sB,EAAAA,IAAI,EAAE,UAAWc,cAAX,EAA2BC,YAA3B,EAAyC1tB,QAAzC,EAAoD;AAEzD,UAAMoqB,KAAK,GAAG,KAAKE,MAAnB;AAAA,UACC9P,GAAG,GAAG4P,KAAK,CAAC15E,IADb;AAAA,UAEC4tD,SAAS,GAAG,KAAKA,SAFlB;AAIA,QAAIrE,WAAW,GAAG,KAAKgxB,qBAAvB;;AAEA,QAAKhxB,WAAW,KAAK,IAArB,EAA4B;AAE3BA,MAAAA,WAAW,GAAGmwB,KAAK,CAACuD,uBAAN,EAAd;AACA,WAAK1C,qBAAL,GAA6BhxB,WAA7B;AAEA;;AAED,UAAMjC,KAAK,GAAGiC,WAAW,CAACS,kBAA1B;AAAA,UACC95E,MAAM,GAAGq5E,WAAW,CAACU,YADtB;AAGA3C,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAawiB,GAAb;AACAxiB,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAawiB,GAAG,GAAGxa,QAAnB;AAEAp/E,IAAAA,MAAM,CAAE,CAAF,CAAN,GAAc6sG,cAAc,GAAGnvB,SAA/B;AACA19E,IAAAA,MAAM,CAAE,CAAF,CAAN,GAAc8sG,YAAY,GAAGpvB,SAA7B;AAEA,WAAO,IAAP;AAEA,GApNwC;AAsNzCytB,EAAAA,WAAW,EAAE,YAAY;AAExB,QAAI6B,oBAAoB,GAAG,KAAK3C,qBAAhC;;AAEA,QAAK2C,oBAAoB,KAAK,IAA9B,EAAqC;AAEpC,WAAK3C,qBAAL,GAA6B,IAA7B;;AACA,WAAKX,MAAL,CAAY6C,2BAAZ,CAAyCS,oBAAzC;AAEA;;AAED,WAAO,IAAP;AAEA,GAnOwC;AAqOzC;AAEAC,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKvD,MAAZ;AAEA,GA3OwC;AA6OzCwD,EAAAA,OAAO,EAAE,YAAY;AAEpB,WAAO,KAAKvD,KAAZ;AAEA,GAjPwC;AAmPzCzjI,EAAAA,OAAO,EAAE,YAAY;AAEpB,WAAO,KAAK0jI,UAAL,IAAmB,KAAKF,MAAL,CAAYyD,KAAtC;AAEA,GAvPwC;AAyPzC;AAEAC,EAAAA,OAAO,EAAE,UAAWt9E,IAAX,EAAiBu9E,SAAjB,EAA4BC,aAA5B,EAA2CnL,SAA3C,EAAuD;AAE/D;AAEA,QAAK,CAAE,KAAK59E,OAAZ,EAAsB;AAErB;AAEA,WAAKgpF,aAAL,CAAoBz9E,IAApB;;AACA;AAEA;;AAED,UAAM6tD,SAAS,GAAG,KAAK6sB,UAAvB;;AAEA,QAAK7sB,SAAS,KAAK,IAAnB,EAA0B;AAEzB;AAEA,YAAM6vB,WAAW,GAAG,CAAE19E,IAAI,GAAG6tD,SAAT,IAAuB2vB,aAA3C;;AACA,UAAKE,WAAW,GAAG,CAAd,IAAmBF,aAAa,KAAK,CAA1C,EAA8C;AAE7C,eAF6C,CAErC;AAER,OATwB,CAWzB;;;AAEA,WAAK9C,UAAL,GAAkB,IAAlB,CAbyB,CAaD;;AACxB6C,MAAAA,SAAS,GAAGC,aAAa,GAAGE,WAA5B;AAEA,KA/B8D,CAiC/D;;;AAEAH,IAAAA,SAAS,IAAI,KAAKI,gBAAL,CAAuB39E,IAAvB,CAAb;;AACA,UAAM49E,QAAQ,GAAG,KAAKC,WAAL,CAAkBN,SAAlB,CAAjB,CApC+D,CAsC/D;AACA;;;AAEA,UAAMpuC,MAAM,GAAG,KAAKsuC,aAAL,CAAoBz9E,IAApB,CAAf;;AAEA,QAAKmvC,MAAM,GAAG,CAAd,EAAkB;AAEjB,YAAM6qC,YAAY,GAAG,KAAKG,aAA1B;AACA,YAAM2D,cAAc,GAAG,KAAK1D,iBAA5B;;AAEA,cAAS,KAAKtwB,SAAd;AAEC,aAAK1gG,0BAAL;AAEC,eAAM,IAAIyrB,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAG4sH,YAAY,CAACr6I,MAAlC,EAA0Ck1C,CAAC,KAAKznB,CAAhD,EAAmD,EAAGynB,CAAtD,EAA0D;AAEzDmlG,YAAAA,YAAY,CAAEnlG,CAAF,CAAZ,CAAkB40E,QAAlB,CAA4Bm0B,QAA5B;AACAE,YAAAA,cAAc,CAAEjpG,CAAF,CAAd,CAAoB29F,kBAApB,CAAwCrjC,MAAxC;AAEA;;AAED;;AAED,aAAKhmF,wBAAL;AACA;AAEC,eAAM,IAAI0rB,CAAC,GAAG,CAAR,EAAWznB,CAAC,GAAG4sH,YAAY,CAACr6I,MAAlC,EAA0Ck1C,CAAC,KAAKznB,CAAhD,EAAmD,EAAGynB,CAAtD,EAA0D;AAEzDmlG,YAAAA,YAAY,CAAEnlG,CAAF,CAAZ,CAAkB40E,QAAlB,CAA4Bm0B,QAA5B;AACAE,YAAAA,cAAc,CAAEjpG,CAAF,CAAd,CAAoBu9F,UAApB,CAAgCC,SAAhC,EAA2CljC,MAA3C;AAEA;;AArBH;AAyBA;AAED,GAtUwC;AAwUzCsuC,EAAAA,aAAa,EAAE,UAAWz9E,IAAX,EAAkB;AAEhC,QAAImvC,MAAM,GAAG,CAAb;;AAEA,QAAK,KAAK16C,OAAV,EAAoB;AAEnB06C,MAAAA,MAAM,GAAG,KAAKA,MAAd;AACA,YAAMoa,WAAW,GAAG,KAAKixB,kBAAzB;;AAEA,UAAKjxB,WAAW,KAAK,IAArB,EAA4B;AAE3B,cAAMw0B,gBAAgB,GAAGx0B,WAAW,CAACE,QAAZ,CAAsBzpD,IAAtB,EAA8B,CAA9B,CAAzB;AAEAmvC,QAAAA,MAAM,IAAI4uC,gBAAV;;AAEA,YAAK/9E,IAAI,GAAGupD,WAAW,CAACS,kBAAZ,CAAgC,CAAhC,CAAZ,EAAkD;AAEjD,eAAKoxB,UAAL;;AAEA,cAAK2C,gBAAgB,KAAK,CAA1B,EAA8B;AAE7B;AACA,iBAAKtpF,OAAL,GAAe,KAAf;AAEA;AAED;AAED;AAED;;AAED,SAAKmmF,gBAAL,GAAwBzrC,MAAxB;AACA,WAAOA,MAAP;AAEA,GA3WwC;AA6WzCwuC,EAAAA,gBAAgB,EAAE,UAAW39E,IAAX,EAAkB;AAEnC,QAAI4tD,SAAS,GAAG,CAAhB;;AAEA,QAAK,CAAE,KAAKktB,MAAZ,EAAqB;AAEpBltB,MAAAA,SAAS,GAAG,KAAKA,SAAjB;AAEA,YAAMrE,WAAW,GAAG,KAAKgxB,qBAAzB;;AAEA,UAAKhxB,WAAW,KAAK,IAArB,EAA4B;AAE3B,cAAMw0B,gBAAgB,GAAGx0B,WAAW,CAACE,QAAZ,CAAsBzpD,IAAtB,EAA8B,CAA9B,CAAzB;AAEA4tD,QAAAA,SAAS,IAAImwB,gBAAb;;AAEA,YAAK/9E,IAAI,GAAGupD,WAAW,CAACS,kBAAZ,CAAgC,CAAhC,CAAZ,EAAkD;AAEjD,eAAKqxB,WAAL;;AAEA,cAAKztB,SAAS,KAAK,CAAnB,EAAuB;AAEtB;AACA,iBAAKktB,MAAL,GAAc,IAAd;AAEA,WALD,MAKO;AAEN;AACA,iBAAKltB,SAAL,GAAiBA,SAAjB;AAEA;AAED;AAED;AAED;;AAED,SAAK+sB,mBAAL,GAA2B/sB,SAA3B;AACA,WAAOA,SAAP;AAEA,GAtZwC;AAwZzCiwB,EAAAA,WAAW,EAAE,UAAWN,SAAX,EAAuB;AAEnC,UAAMjuB,QAAQ,GAAG,KAAKuqB,KAAL,CAAWvqB,QAA5B;AACA,UAAM6c,IAAI,GAAG,KAAKA,IAAlB;AAEA,QAAInsE,IAAI,GAAG,KAAKA,IAAL,GAAYu9E,SAAvB;AACA,QAAIS,SAAS,GAAG,KAAKvD,UAArB;AAEA,UAAMwD,QAAQ,GAAK9R,IAAI,KAAKvjH,YAA5B;;AAEA,QAAK20H,SAAS,KAAK,CAAnB,EAAuB;AAEtB,UAAKS,SAAS,KAAK,CAAE,CAArB,EAAyB,OAAOh+E,IAAP;AAEzB,aAASi+E,QAAQ,IAAI,CAAED,SAAS,GAAG,CAAd,MAAsB,CAApC,GAA0C1uB,QAAQ,GAAGtvD,IAArD,GAA4DA,IAAnE;AAEA;;AAED,QAAKmsE,IAAI,KAAKzjH,QAAd,EAAyB;AAExB,UAAKs1H,SAAS,KAAK,CAAE,CAArB,EAAyB;AAExB;AAEA,aAAKvD,UAAL,GAAkB,CAAlB;;AACA,aAAKyD,WAAL,CAAkB,IAAlB,EAAwB,IAAxB,EAA8B,KAA9B;AAEA;;AAEDC,MAAAA,WAAW,EAAE;AAEZ,YAAKn+E,IAAI,IAAIsvD,QAAb,EAAwB;AAEvBtvD,UAAAA,IAAI,GAAGsvD,QAAP;AAEA,SAJD,MAIO,IAAKtvD,IAAI,GAAG,CAAZ,EAAgB;AAEtBA,UAAAA,IAAI,GAAG,CAAP;AAEA,SAJM,MAIA;AAEN,eAAKA,IAAL,GAAYA,IAAZ;AAEA,gBAAMm+E,WAAN;AAEA;;AAED,YAAK,KAAKpD,iBAAV,EAA8B,KAAKD,MAAL,GAAc,IAAd,CAA9B,KACK,KAAKrmF,OAAL,GAAe,KAAf;AAEL,aAAKuL,IAAL,GAAYA,IAAZ;;AAEA,aAAK45E,MAAL,CAAYpwI,aAAZ,CAA2B;AAC1B2B,UAAAA,IAAI,EAAE,UADoB;AACR08H,UAAAA,MAAM,EAAE,IADA;AAE1B5xF,UAAAA,SAAS,EAAEsnG,SAAS,GAAG,CAAZ,GAAgB,CAAE,CAAlB,GAAsB;AAFP,SAA3B;AAKA;AAED,KAzCD,MAyCO;AAAE;AAER,UAAKS,SAAS,KAAK,CAAE,CAArB,EAAyB;AAExB;AAEA,YAAKT,SAAS,IAAI,CAAlB,EAAsB;AAErBS,UAAAA,SAAS,GAAG,CAAZ;;AAEA,eAAKE,WAAL,CAAkB,IAAlB,EAAwB,KAAKrD,WAAL,KAAqB,CAA7C,EAAgDoD,QAAhD;AAEA,SAND,MAMO;AAEN;AACA;AACA;AAEA,eAAKC,WAAL,CAAkB,KAAKrD,WAAL,KAAqB,CAAvC,EAA0C,IAA1C,EAAgDoD,QAAhD;AAEA;AAED;;AAED,UAAKj+E,IAAI,IAAIsvD,QAAR,IAAoBtvD,IAAI,GAAG,CAAhC,EAAoC;AAEnC;AAEA,cAAMo+E,SAAS,GAAGp/I,IAAI,CAACwE,KAAL,CAAYw8D,IAAI,GAAGsvD,QAAnB,CAAlB,CAJmC,CAIc;;AACjDtvD,QAAAA,IAAI,IAAIsvD,QAAQ,GAAG8uB,SAAnB;AAEAJ,QAAAA,SAAS,IAAIh/I,IAAI,CAACwO,GAAL,CAAU4wI,SAAV,CAAb;AAEA,cAAMC,OAAO,GAAG,KAAKxD,WAAL,GAAmBmD,SAAnC;;AAEA,YAAKK,OAAO,IAAI,CAAhB,EAAoB;AAEnB;AAEA,cAAK,KAAKtD,iBAAV,EAA8B,KAAKD,MAAL,GAAc,IAAd,CAA9B,KACK,KAAKrmF,OAAL,GAAe,KAAf;AAELuL,UAAAA,IAAI,GAAGu9E,SAAS,GAAG,CAAZ,GAAgBjuB,QAAhB,GAA2B,CAAlC;AAEA,eAAKtvD,IAAL,GAAYA,IAAZ;;AAEA,eAAK45E,MAAL,CAAYpwI,aAAZ,CAA2B;AAC1B2B,YAAAA,IAAI,EAAE,UADoB;AACR08H,YAAAA,MAAM,EAAE,IADA;AAE1B5xF,YAAAA,SAAS,EAAEsnG,SAAS,GAAG,CAAZ,GAAgB,CAAhB,GAAoB,CAAE;AAFP,WAA3B;AAKA,SAhBD,MAgBO;AAEN;AAEA,cAAKc,OAAO,KAAK,CAAjB,EAAqB;AAEpB;AAEA,kBAAMC,OAAO,GAAGf,SAAS,GAAG,CAA5B;;AACA,iBAAKW,WAAL,CAAkBI,OAAlB,EAA2B,CAAEA,OAA7B,EAAsCL,QAAtC;AAEA,WAPD,MAOO;AAEN,iBAAKC,WAAL,CAAkB,KAAlB,EAAyB,KAAzB,EAAgCD,QAAhC;AAEA;;AAED,eAAKxD,UAAL,GAAkBuD,SAAlB;AAEA,eAAKh+E,IAAL,GAAYA,IAAZ;;AAEA,eAAK45E,MAAL,CAAYpwI,aAAZ,CAA2B;AAC1B2B,YAAAA,IAAI,EAAE,MADoB;AACZ08H,YAAAA,MAAM,EAAE,IADI;AACEuW,YAAAA,SAAS,EAAEA;AADb,WAA3B;AAIA;AAED,OAtDD,MAsDO;AAEN,aAAKp+E,IAAL,GAAYA,IAAZ;AAEA;;AAED,UAAKi+E,QAAQ,IAAI,CAAED,SAAS,GAAG,CAAd,MAAsB,CAAvC,EAA2C;AAE1C;AAEA,eAAO1uB,QAAQ,GAAGtvD,IAAlB;AAEA;AAED;;AAED,WAAOA,IAAP;AAEA,GAnjBwC;AAqjBzCk+E,EAAAA,WAAW,EAAE,UAAWI,OAAX,EAAoBC,KAApB,EAA2BN,QAA3B,EAAsC;AAElD,UAAMjzB,QAAQ,GAAG,KAAKkvB,oBAAtB;;AAEA,QAAK+D,QAAL,EAAgB;AAEfjzB,MAAAA,QAAQ,CAACS,WAAT,GAAuBxiG,eAAvB;AACA+hG,MAAAA,QAAQ,CAACU,SAAT,GAAqBziG,eAArB;AAEA,KALD,MAKO;AAEN;AAEA,UAAKq1H,OAAL,EAAe;AAEdtzB,QAAAA,QAAQ,CAACS,WAAT,GAAuB,KAAKuvB,gBAAL,GAAwB/xH,eAAxB,GAA0CD,mBAAjE;AAEA,OAJD,MAIO;AAENgiG,QAAAA,QAAQ,CAACS,WAAT,GAAuBviG,gBAAvB;AAEA;;AAED,UAAKq1H,KAAL,EAAa;AAEZvzB,QAAAA,QAAQ,CAACU,SAAT,GAAqB,KAAKuvB,cAAL,GAAsBhyH,eAAtB,GAAwCD,mBAA7D;AAEA,OAJD,MAIO;AAENgiG,QAAAA,QAAQ,CAACU,SAAT,GAAuBxiG,gBAAvB;AAEA;AAED;AAED,GAxlBwC;AA0lBzC2yH,EAAAA,eAAe,EAAE,UAAWvsB,QAAX,EAAqBkvB,SAArB,EAAgCC,UAAhC,EAA6C;AAE7D,UAAM/E,KAAK,GAAG,KAAKE,MAAnB;AAAA,UAA2B9P,GAAG,GAAG4P,KAAK,CAAC15E,IAAvC;AACA,QAAIupD,WAAW,GAAG,KAAKixB,kBAAvB;;AAEA,QAAKjxB,WAAW,KAAK,IAArB,EAA4B;AAE3BA,MAAAA,WAAW,GAAGmwB,KAAK,CAACuD,uBAAN,EAAd;AACA,WAAKzC,kBAAL,GAA0BjxB,WAA1B;AAEA;;AAED,UAAMjC,KAAK,GAAGiC,WAAW,CAACS,kBAA1B;AAAA,UACC95E,MAAM,GAAGq5E,WAAW,CAACU,YADtB;AAGA3C,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAawiB,GAAb;AACA55F,IAAAA,MAAM,CAAE,CAAF,CAAN,GAAcsuG,SAAd;AACAl3B,IAAAA,KAAK,CAAE,CAAF,CAAL,GAAawiB,GAAG,GAAGxa,QAAnB;AACAp/E,IAAAA,MAAM,CAAE,CAAF,CAAN,GAAcuuG,UAAd;AAEA,WAAO,IAAP;AAEA;AAhnBwC,CAA1C;AAonBA;;;;;;;;;;AAUA,SAASC,cAAT,CAAyBvmI,IAAzB,EAAgC;AAE/B,OAAKklI,KAAL,GAAallI,IAAb;;AACA,OAAKwmI,kBAAL;;AACA,OAAKC,UAAL,GAAkB,CAAlB;AAEA,OAAK5+E,IAAL,GAAY,CAAZ;AAEA,OAAK4tD,SAAL,GAAiB,GAAjB;AAEA;;AAED8wB,cAAc,CAAC5+I,SAAf,GAA2BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe9N,eAAe,CAAC/rB,SAA/B,CAAf,EAA2D;AAErFoC,EAAAA,WAAW,EAAEw8I,cAFwE;AAIrFG,EAAAA,WAAW,EAAE,UAAWhX,MAAX,EAAmBiX,eAAnB,EAAqC;AAEjD,UAAM3mI,IAAI,GAAG0vH,MAAM,CAACiS,UAAP,IAAqB,KAAKuD,KAAvC;AAAA,UACCj1B,MAAM,GAAGyf,MAAM,CAACgS,KAAP,CAAazxB,MADvB;AAAA,UAEC2xB,OAAO,GAAG3xB,MAAM,CAACzoH,MAFlB;AAAA,UAGC00I,QAAQ,GAAGxM,MAAM,CAACuS,iBAHnB;AAAA,UAICJ,YAAY,GAAGnS,MAAM,CAACsS,aAJvB;AAAA,UAKC4E,QAAQ,GAAG5mI,IAAI,CAAC4U,IALjB;AAAA,UAMCiyH,cAAc,GAAG,KAAKC,sBANvB;AAQA,QAAIC,cAAc,GAAGF,cAAc,CAAED,QAAF,CAAnC;;AAEA,QAAKG,cAAc,KAAKn9I,SAAxB,EAAoC;AAEnCm9I,MAAAA,cAAc,GAAG,EAAjB;AACAF,MAAAA,cAAc,CAAED,QAAF,CAAd,GAA6BG,cAA7B;AAEA;;AAED,SAAM,IAAIl+I,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAK+4I,OAAvB,EAAgC,EAAG/4I,CAAnC,EAAuC;AAEtC,YAAMqnH,KAAK,GAAGD,MAAM,CAAEpnH,CAAF,CAApB;AAAA,YACC8vH,SAAS,GAAGzI,KAAK,CAAC/xG,IADnB;AAGA,UAAIw6H,OAAO,GAAGoO,cAAc,CAAEpuB,SAAF,CAA5B;;AAEA,UAAKggB,OAAO,KAAK/uI,SAAjB,EAA6B;AAE5BsyI,QAAAA,QAAQ,CAAErzI,CAAF,CAAR,GAAgB8vI,OAAhB;AAEA,OAJD,MAIO;AAENA,QAAAA,OAAO,GAAGuD,QAAQ,CAAErzI,CAAF,CAAlB;;AAEA,YAAK8vI,OAAO,KAAK/uI,SAAjB,EAA6B;AAE5B;AAEA,cAAK+uI,OAAO,CAACuJ,WAAR,KAAwB,IAA7B,EAAoC;AAEnC,cAAGvJ,OAAO,CAACqB,cAAX;;AACA,iBAAKgN,mBAAL,CAA0BrO,OAA1B,EAAmCiO,QAAnC,EAA6CjuB,SAA7C;AAEA;;AAED;AAEA;;AAED,cAAMr1C,IAAI,GAAGqjE,eAAe,IAAIA,eAAe,CAC9C1E,iBAD+B,CACZp5I,CADY,EACR8vI,OADQ,CACA+C,UADhC;AAGA/C,QAAAA,OAAO,GAAG,IAAID,aAAJ,CACTiD,eAAe,CAACn6G,MAAhB,CAAwBxhB,IAAxB,EAA8B24G,SAA9B,EAAyCr1C,IAAzC,CADS,EAET4sC,KAAK,CAACa,aAFG,EAEYb,KAAK,CAACE,YAAN,EAFZ,CAAV;AAIA,UAAGuoB,OAAO,CAACqB,cAAX;;AACA,aAAKgN,mBAAL,CAA0BrO,OAA1B,EAAmCiO,QAAnC,EAA6CjuB,SAA7C;;AAEAujB,QAAAA,QAAQ,CAAErzI,CAAF,CAAR,GAAgB8vI,OAAhB;AAEA;;AAEDkJ,MAAAA,YAAY,CAAEh5I,CAAF,CAAZ,CAAkB0oH,YAAlB,GAAiConB,OAAO,CAAChwE,MAAzC;AAEA;AAED,GAvEoF;AAyErFo6E,EAAAA,eAAe,EAAE,UAAWrT,MAAX,EAAoB;AAEpC,QAAK,CAAE,KAAK0T,eAAL,CAAsB1T,MAAtB,CAAP,EAAwC;AAEvC,UAAKA,MAAM,CAACwS,WAAP,KAAuB,IAA5B,EAAmC;AAElC;AACA;AAEA,cAAM0E,QAAQ,GAAG,CAAElX,MAAM,CAACiS,UAAP,IAAqB,KAAKuD,KAA5B,EAAoCtwH,IAArD;AAAA,cACCqyH,QAAQ,GAAGvX,MAAM,CAACgS,KAAP,CAAa9sH,IADzB;AAAA,cAECsyH,cAAc,GAAG,KAAKC,cAAL,CAAqBF,QAArB,CAFlB;;AAIA,aAAKP,WAAL,CAAkBhX,MAAlB,EACCwX,cAAc,IAAIA,cAAc,CAACE,YAAf,CAA6B,CAA7B,CADnB;;AAGA,aAAKC,kBAAL,CAAyB3X,MAAzB,EAAiCuX,QAAjC,EAA2CL,QAA3C;AAEA;;AAED,YAAM1K,QAAQ,GAAGxM,MAAM,CAACuS,iBAAxB,CAlBuC,CAoBvC;;AACA,WAAM,IAAIp5I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGknH,QAAQ,CAAC10I,MAA9B,EAAsCqB,CAAC,KAAKmsB,CAA5C,EAA+C,EAAGnsB,CAAlD,EAAsD;AAErD,cAAM8vI,OAAO,GAAGuD,QAAQ,CAAErzI,CAAF,CAAxB;;AAEA,YAAK8vI,OAAO,CAACoB,QAAR,OAAwB,CAA7B,EAAiC;AAEhC,eAAKuN,YAAL,CAAmB3O,OAAnB;;AACAA,UAAAA,OAAO,CAAC6B,iBAAR;AAEA;AAED;;AAED,WAAK+M,WAAL,CAAkB7X,MAAlB;AAEA;AAED,GAjHoF;AAmHrFsT,EAAAA,iBAAiB,EAAE,UAAWtT,MAAX,EAAoB;AAEtC,QAAK,KAAK0T,eAAL,CAAsB1T,MAAtB,CAAL,EAAsC;AAErC,YAAMwM,QAAQ,GAAGxM,MAAM,CAACuS,iBAAxB,CAFqC,CAIrC;;AACA,WAAM,IAAIp5I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGknH,QAAQ,CAAC10I,MAA9B,EAAsCqB,CAAC,KAAKmsB,CAA5C,EAA+C,EAAGnsB,CAAlD,EAAsD;AAErD,cAAM8vI,OAAO,GAAGuD,QAAQ,CAAErzI,CAAF,CAAxB;;AAEA,YAAK,EAAG8vI,OAAO,CAACoB,QAAX,KAAwB,CAA7B,EAAiC;AAEhCpB,UAAAA,OAAO,CAAC8B,oBAAR;;AACA,eAAK+M,gBAAL,CAAuB7O,OAAvB;AAEA;AAED;;AAED,WAAK8O,eAAL,CAAsB/X,MAAtB;AAEA;AAED,GA3IoF;AA6IrF;AAEA8W,EAAAA,kBAAkB,EAAE,YAAY;AAE/B,SAAKkB,QAAL,GAAgB,EAAhB,CAF+B,CAEX;;AACpB,SAAKC,eAAL,GAAuB,CAAvB;AAEA,SAAKR,cAAL,GAAsB,EAAtB,CAL+B,CAM/B;AACA;AACA;AACA;AACA;;AAGA,SAAKrL,SAAL,GAAiB,EAAjB,CAb+B,CAaV;;AACrB,SAAK8L,gBAAL,GAAwB,CAAxB;AAEA,SAAKd,sBAAL,GAA8B,EAA9B,CAhB+B,CAgBG;;AAGlC,SAAKe,oBAAL,GAA4B,EAA5B,CAnB+B,CAmBC;;AAChC,SAAKC,2BAAL,GAAmC,CAAnC;AAEA,UAAM9+I,KAAK,GAAG,IAAd;AAEA,SAAK82I,KAAL,GAAa;AAEZiI,MAAAA,OAAO,EAAE;AACR,YAAIhI,KAAJ,GAAY;AAEX,iBAAO/2I,KAAK,CAAC0+I,QAAN,CAAelgJ,MAAtB;AAEA,SALO;;AAMR,YAAIw4I,KAAJ,GAAY;AAEX,iBAAOh3I,KAAK,CAAC2+I,eAAb;AAEA;;AAVO,OAFG;AAcZzL,MAAAA,QAAQ,EAAE;AACT,YAAI6D,KAAJ,GAAY;AAEX,iBAAO/2I,KAAK,CAAC8yI,SAAN,CAAgBt0I,MAAvB;AAEA,SALQ;;AAMT,YAAIw4I,KAAJ,GAAY;AAEX,iBAAOh3I,KAAK,CAAC4+I,gBAAb;AAEA;;AAVQ,OAdE;AA0BZI,MAAAA,mBAAmB,EAAE;AACpB,YAAIjI,KAAJ,GAAY;AAEX,iBAAO/2I,KAAK,CAAC6+I,oBAAN,CAA2BrgJ,MAAlC;AAEA,SALmB;;AAMpB,YAAIw4I,KAAJ,GAAY;AAEX,iBAAOh3I,KAAK,CAAC8+I,2BAAb;AAEA;;AAVmB;AA1BT,KAAb;AAyCA,GAhNoF;AAkNrF;AAEA1E,EAAAA,eAAe,EAAE,UAAW1T,MAAX,EAAoB;AAEpC,UAAMt9H,KAAK,GAAGs9H,MAAM,CAACwS,WAArB;AACA,WAAO9vI,KAAK,KAAK,IAAV,IAAkBA,KAAK,GAAG,KAAKu1I,eAAtC;AAEA,GAzNoF;AA2NrFN,EAAAA,kBAAkB,EAAE,UAAW3X,MAAX,EAAmBuX,QAAnB,EAA6BL,QAA7B,EAAwC;AAE3D,UAAMmB,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCO,aAAa,GAAG,KAAKd,cADtB;AAGA,QAAID,cAAc,GAAGe,aAAa,CAAEhB,QAAF,CAAlC;;AAEA,QAAKC,cAAc,KAAKt9I,SAAxB,EAAoC;AAEnCs9I,MAAAA,cAAc,GAAG;AAEhBE,QAAAA,YAAY,EAAE,CAAE1X,MAAF,CAFE;AAGhBwY,QAAAA,YAAY,EAAE;AAHE,OAAjB;AAOAxY,MAAAA,MAAM,CAACyS,iBAAP,GAA2B,CAA3B;AAEA8F,MAAAA,aAAa,CAAEhB,QAAF,CAAb,GAA4BC,cAA5B;AAEA,KAbD,MAaO;AAEN,YAAME,YAAY,GAAGF,cAAc,CAACE,YAApC;AAEA1X,MAAAA,MAAM,CAACyS,iBAAP,GAA2BiF,YAAY,CAAC5/I,MAAxC;AACA4/I,MAAAA,YAAY,CAACp1I,IAAb,CAAmB09H,MAAnB;AAEA;;AAEDA,IAAAA,MAAM,CAACwS,WAAP,GAAqB6F,OAAO,CAACvgJ,MAA7B;AACAugJ,IAAAA,OAAO,CAAC/1I,IAAR,CAAc09H,MAAd;AAEAwX,IAAAA,cAAc,CAACgB,YAAf,CAA6BtB,QAA7B,IAA0ClX,MAA1C;AAEA,GA7PoF;AA+PrFyY,EAAAA,qBAAqB,EAAE,UAAWzY,MAAX,EAAoB;AAE1C,UAAMqY,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCU,kBAAkB,GAAGL,OAAO,CAAEA,OAAO,CAACvgJ,MAAR,GAAiB,CAAnB,CAD7B;AAAA,UAEC6gJ,UAAU,GAAG3Y,MAAM,CAACwS,WAFrB;AAIAkG,IAAAA,kBAAkB,CAAClG,WAAnB,GAAiCmG,UAAjC;AACAN,IAAAA,OAAO,CAAEM,UAAF,CAAP,GAAwBD,kBAAxB;AACAL,IAAAA,OAAO,CAACj5D,GAAR;AAEA4gD,IAAAA,MAAM,CAACwS,WAAP,GAAqB,IAArB;AAGA,UAAM+E,QAAQ,GAAGvX,MAAM,CAACgS,KAAP,CAAa9sH,IAA9B;AAAA,UACCqzH,aAAa,GAAG,KAAKd,cADtB;AAAA,UAECD,cAAc,GAAGe,aAAa,CAAEhB,QAAF,CAF/B;AAAA,UAGCqB,mBAAmB,GAAGpB,cAAc,CAACE,YAHtC;AAAA,UAKCmB,eAAe,GACdD,mBAAmB,CAAEA,mBAAmB,CAAC9gJ,MAApB,GAA6B,CAA/B,CANrB;AAAA,UAQCghJ,gBAAgB,GAAG9Y,MAAM,CAACyS,iBAR3B;AAUAoG,IAAAA,eAAe,CAACpG,iBAAhB,GAAoCqG,gBAApC;AACAF,IAAAA,mBAAmB,CAAEE,gBAAF,CAAnB,GAA0CD,eAA1C;AACAD,IAAAA,mBAAmB,CAACx5D,GAApB;AAEA4gD,IAAAA,MAAM,CAACyS,iBAAP,GAA2B,IAA3B;AAGA,UAAM+F,YAAY,GAAGhB,cAAc,CAACgB,YAApC;AAAA,UACCtB,QAAQ,GAAG,CAAElX,MAAM,CAACiS,UAAP,IAAqB,KAAKuD,KAA5B,EAAoCtwH,IADhD;AAGA,WAAOszH,YAAY,CAAEtB,QAAF,CAAnB;;AAEA,QAAK0B,mBAAmB,CAAC9gJ,MAApB,KAA+B,CAApC,EAAwC;AAEvC,aAAOygJ,aAAa,CAAEhB,QAAF,CAApB;AAEA;;AAED,SAAKwB,gCAAL,CAAuC/Y,MAAvC;AAEA,GA1SoF;AA4SrF+Y,EAAAA,gCAAgC,EAAE,UAAW/Y,MAAX,EAAoB;AAErD,UAAMwM,QAAQ,GAAGxM,MAAM,CAACuS,iBAAxB;;AAEA,SAAM,IAAIp5I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGknH,QAAQ,CAAC10I,MAA9B,EAAsCqB,CAAC,KAAKmsB,CAA5C,EAA+C,EAAGnsB,CAAlD,EAAsD;AAErD,YAAM8vI,OAAO,GAAGuD,QAAQ,CAAErzI,CAAF,CAAxB;;AAEA,UAAK,EAAG8vI,OAAO,CAACqB,cAAX,KAA8B,CAAnC,EAAuC;AAEtC,aAAK0O,sBAAL,CAA6B/P,OAA7B;AAEA;AAED;AAED,GA5ToF;AA8TrF4O,EAAAA,WAAW,EAAE,UAAW7X,MAAX,EAAoB;AAEhC;AACA;AACA;AACA;AACA;AAEA,UAAMqY,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCiB,SAAS,GAAGjZ,MAAM,CAACwS,WADpB;AAAA,UAGC0G,eAAe,GAAG,KAAKjB,eAAL,EAHnB;AAAA,UAKCkB,mBAAmB,GAAGd,OAAO,CAAEa,eAAF,CAL9B;AAOAlZ,IAAAA,MAAM,CAACwS,WAAP,GAAqB0G,eAArB;AACAb,IAAAA,OAAO,CAAEa,eAAF,CAAP,GAA6BlZ,MAA7B;AAEAmZ,IAAAA,mBAAmB,CAAC3G,WAApB,GAAkCyG,SAAlC;AACAZ,IAAAA,OAAO,CAAEY,SAAF,CAAP,GAAuBE,mBAAvB;AAEA,GAnVoF;AAqVrFpB,EAAAA,eAAe,EAAE,UAAW/X,MAAX,EAAoB;AAEpC;AACA;AACA;AACA;AACA;AAEA,UAAMqY,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCiB,SAAS,GAAGjZ,MAAM,CAACwS,WADpB;AAAA,UAGC4G,kBAAkB,GAAG,EAAG,KAAKnB,eAH9B;AAAA,UAKCoB,gBAAgB,GAAGhB,OAAO,CAAEe,kBAAF,CAL3B;AAOApZ,IAAAA,MAAM,CAACwS,WAAP,GAAqB4G,kBAArB;AACAf,IAAAA,OAAO,CAAEe,kBAAF,CAAP,GAAgCpZ,MAAhC;AAEAqZ,IAAAA,gBAAgB,CAAC7G,WAAjB,GAA+ByG,SAA/B;AACAZ,IAAAA,OAAO,CAAEY,SAAF,CAAP,GAAuBI,gBAAvB;AAEA,GA1WoF;AA4WrF;AAEA/B,EAAAA,mBAAmB,EAAE,UAAWrO,OAAX,EAAoBiO,QAApB,EAA8BjuB,SAA9B,EAA0C;AAE9D,UAAMkuB,cAAc,GAAG,KAAKC,sBAA5B;AAAA,UACC5K,QAAQ,GAAG,KAAKJ,SADjB;AAGA,QAAIkN,aAAa,GAAGnC,cAAc,CAAED,QAAF,CAAlC;;AAEA,QAAKoC,aAAa,KAAKp/I,SAAvB,EAAmC;AAElCo/I,MAAAA,aAAa,GAAG,EAAhB;AACAnC,MAAAA,cAAc,CAAED,QAAF,CAAd,GAA6BoC,aAA7B;AAEA;;AAEDA,IAAAA,aAAa,CAAErwB,SAAF,CAAb,GAA6BggB,OAA7B;AAEAA,IAAAA,OAAO,CAACuJ,WAAR,GAAsBhG,QAAQ,CAAC10I,MAA/B;AACA00I,IAAAA,QAAQ,CAAClqI,IAAT,CAAe2mI,OAAf;AAEA,GAjYoF;AAmYrF+P,EAAAA,sBAAsB,EAAE,UAAW/P,OAAX,EAAqB;AAE5C,UAAMuD,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,UACCmN,WAAW,GAAGtQ,OAAO,CAACA,OADvB;AAAA,UAECiO,QAAQ,GAAGqC,WAAW,CAAC9M,QAAZ,CAAqBvnH,IAFjC;AAAA,UAGC+jG,SAAS,GAAGswB,WAAW,CAAC3lE,IAHzB;AAAA,UAICujE,cAAc,GAAG,KAAKC,sBAJvB;AAAA,UAKCkC,aAAa,GAAGnC,cAAc,CAAED,QAAF,CAL/B;AAAA,UAOCsC,mBAAmB,GAAGhN,QAAQ,CAAEA,QAAQ,CAAC10I,MAAT,GAAkB,CAApB,CAP/B;AAAA,UAQC6gJ,UAAU,GAAG1P,OAAO,CAACuJ,WARtB;AAUAgH,IAAAA,mBAAmB,CAAChH,WAApB,GAAkCmG,UAAlC;AACAnM,IAAAA,QAAQ,CAAEmM,UAAF,CAAR,GAAyBa,mBAAzB;AACAhN,IAAAA,QAAQ,CAACptD,GAAT;AAEA,WAAOk6D,aAAa,CAAErwB,SAAF,CAApB;;AAEA,QAAKpwH,MAAM,CAACF,IAAP,CAAa2gJ,aAAb,EAA6BxhJ,MAA7B,KAAwC,CAA7C,EAAiD;AAEhD,aAAOq/I,cAAc,CAAED,QAAF,CAArB;AAEA;AAED,GA3ZoF;AA6ZrFU,EAAAA,YAAY,EAAE,UAAW3O,OAAX,EAAqB;AAElC,UAAMuD,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,UACC6M,SAAS,GAAGhQ,OAAO,CAACuJ,WADrB;AAAA,UAGC0G,eAAe,GAAG,KAAKhB,gBAAL,EAHnB;AAAA,UAKCuB,oBAAoB,GAAGjN,QAAQ,CAAE0M,eAAF,CALhC;AAOAjQ,IAAAA,OAAO,CAACuJ,WAAR,GAAsB0G,eAAtB;AACA1M,IAAAA,QAAQ,CAAE0M,eAAF,CAAR,GAA8BjQ,OAA9B;AAEAwQ,IAAAA,oBAAoB,CAACjH,WAArB,GAAmCyG,SAAnC;AACAzM,IAAAA,QAAQ,CAAEyM,SAAF,CAAR,GAAwBQ,oBAAxB;AAEA,GA5aoF;AA8arF3B,EAAAA,gBAAgB,EAAE,UAAW7O,OAAX,EAAqB;AAEtC,UAAMuD,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,UACC6M,SAAS,GAAGhQ,OAAO,CAACuJ,WADrB;AAAA,UAGC4G,kBAAkB,GAAG,EAAG,KAAKlB,gBAH9B;AAAA,UAKCwB,iBAAiB,GAAGlN,QAAQ,CAAE4M,kBAAF,CAL7B;AAOAnQ,IAAAA,OAAO,CAACuJ,WAAR,GAAsB4G,kBAAtB;AACA5M,IAAAA,QAAQ,CAAE4M,kBAAF,CAAR,GAAiCnQ,OAAjC;AAEAyQ,IAAAA,iBAAiB,CAAClH,WAAlB,GAAgCyG,SAAhC;AACAzM,IAAAA,QAAQ,CAAEyM,SAAF,CAAR,GAAwBS,iBAAxB;AAEA,GA7boF;AAgcrF;AAEAtE,EAAAA,uBAAuB,EAAE,YAAY;AAEpC,UAAMjD,YAAY,GAAG,KAAKgG,oBAA1B;AAAA,UACCe,eAAe,GAAG,KAAKd,2BAAL,EADnB;AAGA,QAAI12B,WAAW,GAAGywB,YAAY,CAAE+G,eAAF,CAA9B;;AAEA,QAAKx3B,WAAW,KAAKxnH,SAArB,EAAiC;AAEhCwnH,MAAAA,WAAW,GAAG,IAAIiD,iBAAJ,CACb,IAAIhlE,YAAJ,CAAkB,CAAlB,CADa,EACU,IAAIA,YAAJ,CAAkB,CAAlB,CADV,EAEb,CAFa,EAEV,KAAKg6F,gCAFK,CAAd;AAIAj4B,MAAAA,WAAW,CAACk4B,YAAZ,GAA2BV,eAA3B;AACA/G,MAAAA,YAAY,CAAE+G,eAAF,CAAZ,GAAkCx3B,WAAlC;AAEA;;AAED,WAAOA,WAAP;AAEA,GAtdoF;AAwdrFkzB,EAAAA,2BAA2B,EAAE,UAAWlzB,WAAX,EAAyB;AAErD,UAAMywB,YAAY,GAAG,KAAKgG,oBAA1B;AAAA,UACCc,SAAS,GAAGv3B,WAAW,CAACk4B,YADzB;AAAA,UAGCR,kBAAkB,GAAG,EAAG,KAAKhB,2BAH9B;AAAA,UAKCyB,qBAAqB,GAAG1H,YAAY,CAAEiH,kBAAF,CALrC;AAOA13B,IAAAA,WAAW,CAACk4B,YAAZ,GAA2BR,kBAA3B;AACAjH,IAAAA,YAAY,CAAEiH,kBAAF,CAAZ,GAAqC13B,WAArC;AAEAm4B,IAAAA,qBAAqB,CAACD,YAAtB,GAAqCX,SAArC;AACA9G,IAAAA,YAAY,CAAE8G,SAAF,CAAZ,GAA4BY,qBAA5B;AAEA,GAveoF;AAyerFF,EAAAA,gCAAgC,EAAE,IAAIh6F,YAAJ,CAAkB,CAAlB,CAzemD;AA2erF;AACA;AACA;AACAm6F,EAAAA,UAAU,EAAE,UAAWx5B,IAAX,EAAiBy5B,YAAjB,EAA+B93B,SAA/B,EAA2C;AAEtD,UAAM3xG,IAAI,GAAGypI,YAAY,IAAI,KAAKvE,KAAlC;AAAA,UACC0B,QAAQ,GAAG5mI,IAAI,CAAC4U,IADjB;AAGA,QAAI80H,UAAU,GAAG,OAAO15B,IAAP,KAAgB,QAAhB,GAA2BkH,aAAa,CAACa,UAAd,CAA0B/3G,IAA1B,EAAgCgwG,IAAhC,CAA3B,GAAoEA,IAArF;AAEA,UAAMi3B,QAAQ,GAAGyC,UAAU,KAAK,IAAf,GAAsBA,UAAU,CAAC90H,IAAjC,GAAwCo7F,IAAzD;AAEA,QAAIk3B,cAAc,GAAG,KAAKC,cAAL,CAAqBF,QAArB,CAArB;AAAA,QACCN,eAAe,GAAG,IADnB;;AAGA,QAAKh1B,SAAS,KAAK/nH,SAAnB,EAA+B;AAE9B,UAAK8/I,UAAU,KAAK,IAApB,EAA2B;AAE1B/3B,QAAAA,SAAS,GAAG+3B,UAAU,CAAC/3B,SAAvB;AAEA,OAJD,MAIO;AAENA,QAAAA,SAAS,GAAG3gG,wBAAZ;AAEA;AAED;;AAED,QAAKk2H,cAAc,KAAKt9I,SAAxB,EAAoC;AAEnC,YAAM+/I,cAAc,GAAGzC,cAAc,CAACgB,YAAf,CAA6BtB,QAA7B,CAAvB;;AAEA,UAAK+C,cAAc,KAAK//I,SAAnB,IAAgC+/I,cAAc,CAACh4B,SAAf,KAA6BA,SAAlE,EAA8E;AAE7E,eAAOg4B,cAAP;AAEA,OARkC,CAUnC;AACA;;;AACAhD,MAAAA,eAAe,GAAGO,cAAc,CAACE,YAAf,CAA6B,CAA7B,CAAlB,CAZmC,CAcnC;;AACA,UAAKsC,UAAU,KAAK,IAApB,EACCA,UAAU,GAAG/C,eAAe,CAACjF,KAA7B;AAED,KA5CqD,CA8CtD;;;AACA,QAAKgI,UAAU,KAAK,IAApB,EAA2B,OAAO,IAAP,CA/C2B,CAiDtD;;AACA,UAAME,SAAS,GAAG,IAAItI,eAAJ,CAAqB,IAArB,EAA2BoI,UAA3B,EAAuCD,YAAvC,EAAqD93B,SAArD,CAAlB;;AAEA,SAAK+0B,WAAL,CAAkBkD,SAAlB,EAA6BjD,eAA7B,EApDsD,CAsDtD;;;AACA,SAAKU,kBAAL,CAAyBuC,SAAzB,EAAoC3C,QAApC,EAA8CL,QAA9C;;AAEA,WAAOgD,SAAP;AAEA,GAziBoF;AA2iBrF;AACAD,EAAAA,cAAc,EAAE,UAAW35B,IAAX,EAAiBy5B,YAAjB,EAAgC;AAE/C,UAAMzpI,IAAI,GAAGypI,YAAY,IAAI,KAAKvE,KAAlC;AAAA,UACC0B,QAAQ,GAAG5mI,IAAI,CAAC4U,IADjB;AAAA,UAGC80H,UAAU,GAAG,OAAO15B,IAAP,KAAgB,QAAhB,GACZkH,aAAa,CAACa,UAAd,CAA0B/3G,IAA1B,EAAgCgwG,IAAhC,CADY,GAC6BA,IAJ3C;AAAA,UAMCi3B,QAAQ,GAAGyC,UAAU,GAAGA,UAAU,CAAC90H,IAAd,GAAqBo7F,IAN3C;AAAA,UAQCk3B,cAAc,GAAG,KAAKC,cAAL,CAAqBF,QAArB,CARlB;;AAUA,QAAKC,cAAc,KAAKt9I,SAAxB,EAAoC;AAEnC,aAAOs9I,cAAc,CAACgB,YAAf,CAA6BtB,QAA7B,KAA2C,IAAlD;AAEA;;AAED,WAAO,IAAP;AAEA,GAhkBoF;AAkkBrF;AACAiD,EAAAA,aAAa,EAAE,YAAY;AAE1B,UAAM9B,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCoC,QAAQ,GAAG,KAAKnC,eADjB;;AAGA,SAAM,IAAI9+I,CAAC,GAAGihJ,QAAQ,GAAG,CAAzB,EAA4BjhJ,CAAC,IAAI,CAAjC,EAAoC,EAAGA,CAAvC,EAA2C;AAE1Ck/I,MAAAA,OAAO,CAAEl/I,CAAF,CAAP,CAAak/D,IAAb;AAEA;;AAED,WAAO,IAAP;AAEA,GAhlBoF;AAklBrF;AACA/gC,EAAAA,MAAM,EAAE,UAAWo+G,SAAX,EAAuB;AAE9BA,IAAAA,SAAS,IAAI,KAAK3vB,SAAlB;AAEA,UAAMsyB,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCoC,QAAQ,GAAG,KAAKnC,eADjB;AAAA,UAGC9/E,IAAI,GAAG,KAAKA,IAAL,IAAau9E,SAHrB;AAAA,UAICC,aAAa,GAAGx+I,IAAI,CAAC2f,IAAL,CAAW4+H,SAAX,CAJjB;AAAA,UAMClL,SAAS,GAAG,KAAKuM,UAAL,IAAmB,CANhC,CAJ8B,CAY9B;;AAEA,SAAM,IAAI59I,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKihJ,QAAvB,EAAiC,EAAGjhJ,CAApC,EAAwC;AAEvC,YAAM6mI,MAAM,GAAGqY,OAAO,CAAEl/I,CAAF,CAAtB;;AAEA6mI,MAAAA,MAAM,CAACyV,OAAP,CAAgBt9E,IAAhB,EAAsBu9E,SAAtB,EAAiCC,aAAjC,EAAgDnL,SAAhD;AAEA,KApB6B,CAsB9B;;;AAEA,UAAMgC,QAAQ,GAAG,KAAKJ,SAAtB;AAAA,UACCsE,SAAS,GAAG,KAAKwH,gBADlB;;AAGA,SAAM,IAAI/+I,CAAC,GAAG,CAAd,EAAiBA,CAAC,KAAKu3I,SAAvB,EAAkC,EAAGv3I,CAArC,EAAyC;AAExCqzI,MAAAA,QAAQ,CAAErzI,CAAF,CAAR,CAAcC,KAAd,CAAqBoxI,SAArB;AAEA;;AAED,WAAO,IAAP;AAEA,GAtnBoF;AAwnBrF;AACA6P,EAAAA,OAAO,EAAE,UAAWC,aAAX,EAA2B;AAEnC,SAAKniF,IAAL,GAAY,CAAZ,CAFmC,CAEpB;;AACf,SAAM,IAAIh/D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAK6+I,QAAL,CAAclgJ,MAAnC,EAA2CqB,CAAC,EAA5C,EAAkD;AAEjD,WAAK6+I,QAAL,CAAe7+I,CAAf,EAAmBg/D,IAAnB,GAA0B,CAA1B,CAFiD,CAEpB;AAE7B;;AAED,WAAO,KAAK7gC,MAAL,CAAagjH,aAAb,CAAP,CATmC,CASE;AAErC,GApoBoF;AAsoBrF;AACA/rI,EAAAA,OAAO,EAAE,YAAY;AAEpB,WAAO,KAAKinI,KAAZ;AAEA,GA3oBoF;AA6oBrF;AACA+E,EAAAA,WAAW,EAAE,UAAWj6B,IAAX,EAAkB;AAE9B,UAAM+3B,OAAO,GAAG,KAAKL,QAArB;AAAA,UACCT,QAAQ,GAAGj3B,IAAI,CAACp7F,IADjB;AAAA,UAECqzH,aAAa,GAAG,KAAKd,cAFtB;AAAA,UAGCD,cAAc,GAAGe,aAAa,CAAEhB,QAAF,CAH/B;;AAKA,QAAKC,cAAc,KAAKt9I,SAAxB,EAAoC;AAEnC;AACA;AACA;AAEA,YAAMsgJ,eAAe,GAAGhD,cAAc,CAACE,YAAvC;;AAEA,WAAM,IAAIv+I,CAAC,GAAG,CAAR,EAAWmsB,CAAC,GAAGk1H,eAAe,CAAC1iJ,MAArC,EAA6CqB,CAAC,KAAKmsB,CAAnD,EAAsD,EAAGnsB,CAAzD,EAA6D;AAE5D,cAAM6mI,MAAM,GAAGwa,eAAe,CAAErhJ,CAAF,CAA9B;;AAEA,aAAKm6I,iBAAL,CAAwBtT,MAAxB;;AAEA,cAAM2Y,UAAU,GAAG3Y,MAAM,CAACwS,WAA1B;AAAA,cACCkG,kBAAkB,GAAGL,OAAO,CAAEA,OAAO,CAACvgJ,MAAR,GAAiB,CAAnB,CAD7B;AAGAkoI,QAAAA,MAAM,CAACwS,WAAP,GAAqB,IAArB;AACAxS,QAAAA,MAAM,CAACyS,iBAAP,GAA2B,IAA3B;AAEAiG,QAAAA,kBAAkB,CAAClG,WAAnB,GAAiCmG,UAAjC;AACAN,QAAAA,OAAO,CAAEM,UAAF,CAAP,GAAwBD,kBAAxB;AACAL,QAAAA,OAAO,CAACj5D,GAAR;;AAEA,aAAK25D,gCAAL,CAAuC/Y,MAAvC;AAEA;;AAED,aAAOuY,aAAa,CAAEhB,QAAF,CAApB;AAEA;AAED,GArrBoF;AAurBrF;AACAkD,EAAAA,WAAW,EAAE,UAAWnqI,IAAX,EAAkB;AAE9B,UAAM4mI,QAAQ,GAAG5mI,IAAI,CAAC4U,IAAtB;AAAA,UACCqzH,aAAa,GAAG,KAAKd,cADtB;;AAGA,SAAM,MAAMF,QAAZ,IAAwBgB,aAAxB,EAAwC;AAEvC,YAAMC,YAAY,GAAGD,aAAa,CAAEhB,QAAF,CAAb,CAA0BiB,YAA/C;AAAA,YACCxY,MAAM,GAAGwY,YAAY,CAAEtB,QAAF,CADtB;;AAGA,UAAKlX,MAAM,KAAK9lI,SAAhB,EAA4B;AAE3B,aAAKo5I,iBAAL,CAAwBtT,MAAxB;;AACA,aAAKyY,qBAAL,CAA4BzY,MAA5B;AAEA;AAED;;AAED,UAAMmX,cAAc,GAAG,KAAKC,sBAA5B;AAAA,UACCkC,aAAa,GAAGnC,cAAc,CAAED,QAAF,CAD/B;;AAGA,QAAKoC,aAAa,KAAKp/I,SAAvB,EAAmC;AAElC,WAAM,MAAM+uH,SAAZ,IAAyBqwB,aAAzB,EAAyC;AAExC,cAAMrQ,OAAO,GAAGqQ,aAAa,CAAErwB,SAAF,CAA7B;AACAggB,QAAAA,OAAO,CAAC8B,oBAAR;;AACA,aAAKiO,sBAAL,CAA6B/P,OAA7B;AAEA;AAED;AAED,GA1tBoF;AA4tBrF;AACAyR,EAAAA,aAAa,EAAE,UAAWp6B,IAAX,EAAiBy5B,YAAjB,EAAgC;AAE9C,UAAM/Z,MAAM,GAAG,KAAKia,cAAL,CAAqB35B,IAArB,EAA2By5B,YAA3B,CAAf;;AAEA,QAAK/Z,MAAM,KAAK,IAAhB,EAAuB;AAEtB,WAAKsT,iBAAL,CAAwBtT,MAAxB;;AACA,WAAKyY,qBAAL,CAA4BzY,MAA5B;AAEA;AAED;AAxuBoF,CAA3D,CAA3B;AA4uBA;;;;AAIA,SAAS2a,OAAT,CAAkBp+I,KAAlB,EAA0B;AAEzB,MAAK,OAAOA,KAAP,KAAiB,QAAtB,EAAiC;AAEhCqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AACAtrB,IAAAA,KAAK,GAAG9D,SAAS,CAAE,CAAF,CAAjB;AAEA;;AAED,OAAK8D,KAAL,GAAaA,KAAb;AAEA;;AAEDo+I,OAAO,CAAC1iJ,SAAR,CAAkBqwB,KAAlB,GAA0B,YAAY;AAErC,SAAO,IAAIqyH,OAAJ,CAAa,KAAKp+I,KAAL,CAAW+rB,KAAX,KAAqBpuB,SAArB,GAAiC,KAAKqC,KAAtC,GAA8C,KAAKA,KAAL,CAAW+rB,KAAX,EAA3D,CAAP;AAEA,CAJD;AAMA;;;;;AAIA,SAASsyH,0BAAT,CAAqCt2H,KAArC,EAA4CijD,MAA5C,EAAoDL,gBAApD,EAAuE;AAEtEw9B,EAAAA,iBAAiB,CAAClsG,IAAlB,CAAwB,IAAxB,EAA8B8rB,KAA9B,EAAqCijD,MAArC;AAEA,OAAKL,gBAAL,GAAwBA,gBAAgB,IAAI,CAA5C;AAEA;;AAED0zE,0BAA0B,CAAC3iJ,SAA3B,GAAuCY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe4yE,iBAAiB,CAACzsG,SAAjC,CAAf,EAA6D;AAEnGoC,EAAAA,WAAW,EAAEugJ,0BAFsF;AAInG9yE,EAAAA,4BAA4B,EAAE,IAJqE;AAMnGv/C,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzButF,IAAAA,iBAAiB,CAACzsG,SAAlB,CAA4BswB,IAA5B,CAAiC/vB,IAAjC,CAAuC,IAAvC,EAA6C2e,MAA7C;AAEA,SAAK+vD,gBAAL,GAAwB/vD,MAAM,CAAC+vD,gBAA/B;AAEA,WAAO,IAAP;AAEA,GAdkG;AAgBnG5+C,EAAAA,KAAK,EAAE,UAAWggB,IAAX,EAAkB;AAExB,UAAMw8D,EAAE,GAAGJ,iBAAiB,CAACzsG,SAAlB,CAA4BqwB,KAA5B,CAAkC9vB,IAAlC,CAAwC,IAAxC,EAA8C8vC,IAA9C,CAAX;AAEAw8D,IAAAA,EAAE,CAAC59B,gBAAH,GAAsB,KAAKA,gBAA3B;AAEA,WAAO49B,EAAP;AAEA,GAxBkG;AA0BnG7yE,EAAAA,MAAM,EAAE,UAAWqW,IAAX,EAAkB;AAEzB,UAAMk9E,IAAI,GAAG9gB,iBAAiB,CAACzsG,SAAlB,CAA4Bg6B,MAA5B,CAAmCz5B,IAAnC,CAAyC,IAAzC,EAA+C8vC,IAA/C,CAAb;AAEAk9E,IAAAA,IAAI,CAAC19C,4BAAL,GAAoC,IAApC;AACA09C,IAAAA,IAAI,CAACt+C,gBAAL,GAAwB,KAAKA,gBAA7B;AAEA,WAAOs+C,IAAP;AAEA;AAnCkG,CAA7D,CAAvC;AAuCA;;;;;;AAMA,SAASq1B,SAAT,CAAoB1sG,MAApB,EAA4BC,SAA5B,EAAuCjN,IAAvC,EAA6CC,GAA7C,EAAmD;AAElD,OAAKiN,GAAL,GAAW,IAAIH,GAAJ,CAASC,MAAT,EAAiBC,SAAjB,CAAX,CAFkD,CAGlD;;AAEA,OAAKjN,IAAL,GAAYA,IAAI,IAAI,CAApB;AACA,OAAKC,GAAL,GAAWA,GAAG,IAAI2I,QAAlB;AACA,OAAKpP,MAAL,GAAc,IAAd;AACA,OAAKgI,MAAL,GAAc,IAAIR,MAAJ,EAAd;AAEA,OAAKhiC,MAAL,GAAc;AACbgnD,IAAAA,IAAI,EAAE,EADO;AAEb6hD,IAAAA,IAAI,EAAE;AAAErvG,MAAAA,SAAS,EAAE;AAAb,KAFO;AAGb4sG,IAAAA,GAAG,EAAE,EAHQ;AAIb2D,IAAAA,MAAM,EAAE;AAAEvwG,MAAAA,SAAS,EAAE;AAAb,KAJK;AAKbqsG,IAAAA,MAAM,EAAE;AALK,GAAd;AAQAntG,EAAAA,MAAM,CAACwV,gBAAP,CAAyB,KAAKlO,MAA9B,EAAsC;AACrC26I,IAAAA,UAAU,EAAE;AACX/jI,MAAAA,GAAG,EAAE,YAAY;AAEhB6Q,QAAAA,OAAO,CAACC,IAAR,CAAc,uEAAd;AACA,eAAO,KAAKqiF,MAAZ;AAEA;AANU;AADyB,GAAtC;AAWA;;AAED,SAAS6wC,OAAT,CAAkBxjJ,CAAlB,EAAqBD,CAArB,EAAyB;AAExB,SAAOC,CAAC,CAACguC,QAAF,GAAajuC,CAAC,CAACiuC,QAAtB;AAEA;;AAED,SAASy1G,eAAT,CAA0Bp9I,MAA1B,EAAkC6pD,SAAlC,EAA6CC,UAA7C,EAAyDnf,SAAzD,EAAqE;AAEpE,MAAK3qC,MAAM,CAAC+kC,MAAP,CAAchoC,IAAd,CAAoB8sD,SAAS,CAAC9kB,MAA9B,CAAL,EAA8C;AAE7C/kC,IAAAA,MAAM,CAACgpC,OAAP,CAAgB6gB,SAAhB,EAA2BC,UAA3B;AAEA;;AAED,MAAKnf,SAAS,KAAK,IAAnB,EAA0B;AAEzB,UAAM7E,QAAQ,GAAG9lC,MAAM,CAAC8lC,QAAxB;;AAEA,SAAM,IAAIvqC,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmqC,QAAQ,CAAC5rC,MAA9B,EAAsCqB,CAAC,GAAGI,CAA1C,EAA6CJ,CAAC,EAA9C,EAAoD;AAEnD6hJ,MAAAA,eAAe,CAAEt3G,QAAQ,CAAEvqC,CAAF,CAAV,EAAiBsuD,SAAjB,EAA4BC,UAA5B,EAAwC,IAAxC,CAAf;AAEA;AAED;AAED;;AAED7uD,MAAM,CAACme,MAAP,CAAe6jI,SAAS,CAAC5iJ,SAAzB,EAAoC;AAEnC0vB,EAAAA,GAAG,EAAE,UAAWwmB,MAAX,EAAmBC,SAAnB,EAA+B;AAEnC;AAEA,SAAKC,GAAL,CAAS1mB,GAAT,CAAcwmB,MAAd,EAAsBC,SAAtB;AAEA,GARkC;AAUnC6sG,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAmBvgH,MAAnB,EAA4B;AAE1C,QAAOA,MAAM,IAAIA,MAAM,CAAC21B,mBAAxB,EAAgD;AAE/C,WAAKjiB,GAAL,CAASF,MAAT,CAAgB5R,qBAAhB,CAAuC5B,MAAM,CAACK,WAA9C;AACA,WAAKqT,GAAL,CAASD,SAAT,CAAmBzmB,GAAnB,CAAwBuzH,MAAM,CAAC16I,CAA/B,EAAkC06I,MAAM,CAACx6I,CAAzC,EAA4C,GAA5C,EAAkDo6B,SAAlD,CAA6DH,MAA7D,EAAsEhS,GAAtE,CAA2E,KAAK0lB,GAAL,CAASF,MAApF,EAA6FpkB,SAA7F;AACA,WAAK4Q,MAAL,GAAcA,MAAd;AAEA,KAND,MAMO,IAAOA,MAAM,IAAIA,MAAM,CAACooE,oBAAxB,EAAiD;AAEvD,WAAK10D,GAAL,CAASF,MAAT,CAAgBxmB,GAAhB,CAAqBuzH,MAAM,CAAC16I,CAA5B,EAA+B06I,MAAM,CAACx6I,CAAtC,EAAyC,CAAEi6B,MAAM,CAACwG,IAAP,GAAcxG,MAAM,CAACyG,GAAvB,KAAiCzG,MAAM,CAACwG,IAAP,GAAcxG,MAAM,CAACyG,GAAtD,CAAzC,EAAuGtG,SAAvG,CAAkHH,MAAlH,EAFuD,CAEqE;;AAC5H,WAAK0T,GAAL,CAASD,SAAT,CAAmBzmB,GAAnB,CAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAAE,CAAhC,EAAoCsT,kBAApC,CAAwDN,MAAM,CAACK,WAA/D;AACA,WAAKL,MAAL,GAAcA,MAAd;AAEA,KANM,MAMA;AAEN/S,MAAAA,OAAO,CAACyD,KAAR,CAAe,2CAAf;AAEA;AAED,GA9BkC;AAgCnC2vH,EAAAA,eAAe,EAAE,UAAWp9I,MAAX,EAAmB2qC,SAAnB,EAA8B2mF,cAA9B,EAA+C;AAE/D,UAAMxnE,UAAU,GAAGwnE,cAAc,IAAI,EAArC;AAEA8rB,IAAAA,eAAe,CAAEp9I,MAAF,EAAU,IAAV,EAAgB8pD,UAAhB,EAA4Bnf,SAA5B,CAAf;AAEAmf,IAAAA,UAAU,CAACgE,IAAX,CAAiBqvF,OAAjB;AAEA,WAAOrzF,UAAP;AAEA,GA1CkC;AA4CnCyzF,EAAAA,gBAAgB,EAAE,UAAW93E,OAAX,EAAoB96B,SAApB,EAA+B2mF,cAA/B,EAAgD;AAEjE,UAAMxnE,UAAU,GAAGwnE,cAAc,IAAI,EAArC;;AAEA,QAAKl3H,KAAK,CAACoC,OAAN,CAAeipE,OAAf,MAA6B,KAAlC,EAA0C;AAEzCz7C,MAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AACA,aAAO6/B,UAAP;AAEA;;AAED,SAAM,IAAIvuD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG8pE,OAAO,CAACvrE,MAA7B,EAAqCqB,CAAC,GAAGI,CAAzC,EAA4CJ,CAAC,EAA7C,EAAmD;AAElD6hJ,MAAAA,eAAe,CAAE33E,OAAO,CAAElqE,CAAF,CAAT,EAAgB,IAAhB,EAAsBuuD,UAAtB,EAAkCnf,SAAlC,CAAf;AAEA;;AAEDmf,IAAAA,UAAU,CAACgE,IAAX,CAAiBqvF,OAAjB;AAEA,WAAOrzF,UAAP;AAEA;AAjEkC,CAApC;AAqEA;;;;;;;;;;AAUA,SAAS0zF,SAAT,CAAoBl/G,MAApB,EAA4BC,GAA5B,EAAiC3M,KAAjC,EAAyC;AAExC,OAAK0M,MAAL,GAAgBA,MAAM,KAAKhiC,SAAb,GAA2BgiC,MAA3B,GAAoC,GAAlD;AACA,OAAKC,GAAL,GAAaA,GAAG,KAAKjiC,SAAV,GAAwBiiC,GAAxB,GAA8B,CAAzC,CAHwC,CAGI;;AAC5C,OAAK3M,KAAL,GAAeA,KAAK,KAAKt1B,SAAZ,GAA0Bs1B,KAA1B,GAAkC,CAA/C,CAJwC,CAIU;;AAElD,SAAO,IAAP;AAEA;;AAED32B,MAAM,CAACme,MAAP,CAAeokI,SAAS,CAACnjJ,SAAzB,EAAoC;AAEnC0vB,EAAAA,GAAG,EAAE,UAAWuU,MAAX,EAAmBC,GAAnB,EAAwB3M,KAAxB,EAAgC;AAEpC,SAAK0M,MAAL,GAAcA,MAAd;AACA,SAAKC,GAAL,GAAWA,GAAX;AACA,SAAK3M,KAAL,GAAaA,KAAb;AAEA,WAAO,IAAP;AAEA,GAVkC;AAYnClH,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAhBkC;AAkBnCA,EAAAA,IAAI,EAAE,UAAW8yH,KAAX,EAAmB;AAExB,SAAKn/G,MAAL,GAAcm/G,KAAK,CAACn/G,MAApB;AACA,SAAKC,GAAL,GAAWk/G,KAAK,CAACl/G,GAAjB;AACA,SAAK3M,KAAL,GAAa6rH,KAAK,CAAC7rH,KAAnB;AAEA,WAAO,IAAP;AAEA,GA1BkC;AA4BnC;AACA8rH,EAAAA,QAAQ,EAAE,YAAY;AAErB,UAAMljH,GAAG,GAAG,QAAZ;AACA,SAAK+D,GAAL,GAAWhlC,IAAI,CAAC+E,GAAL,CAAUk8B,GAAV,EAAejhC,IAAI,CAAC8E,GAAL,CAAU9E,IAAI,CAACutB,EAAL,GAAU0T,GAApB,EAAyB,KAAK+D,GAA9B,CAAf,CAAX;AAEA,WAAO,IAAP;AAEA,GApCkC;AAsCnC2F,EAAAA,cAAc,EAAE,UAAWnqC,CAAX,EAAe;AAE9B,WAAO,KAAK4jJ,sBAAL,CAA6B5jJ,CAAC,CAAC6I,CAA/B,EAAkC7I,CAAC,CAAC+I,CAApC,EAAuC/I,CAAC,CAACk7B,CAAzC,CAAP;AAEA,GA1CkC;AA4CnC0oH,EAAAA,sBAAsB,EAAE,UAAW/6I,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE5C,SAAKqJ,MAAL,GAAc/kC,IAAI,CAAC0yB,IAAL,CAAWrpB,CAAC,GAAGA,CAAJ,GAAQE,CAAC,GAAGA,CAAZ,GAAgBmyB,CAAC,GAAGA,CAA/B,CAAd;;AAEA,QAAK,KAAKqJ,MAAL,KAAgB,CAArB,EAAyB;AAExB,WAAK1M,KAAL,GAAa,CAAb;AACA,WAAK2M,GAAL,GAAW,CAAX;AAEA,KALD,MAKO;AAEN,WAAK3M,KAAL,GAAar4B,IAAI,CAAC8yB,KAAL,CAAYzpB,CAAZ,EAAeqyB,CAAf,CAAb;AACA,WAAKsJ,GAAL,GAAWhlC,IAAI,CAACg8B,IAAL,CAAW3O,SAAS,CAACY,KAAV,CAAiB1kB,CAAC,GAAG,KAAKw7B,MAA1B,EAAkC,CAAE,CAApC,EAAuC,CAAvC,CAAX,CAAX;AAEA;;AAED,WAAO,IAAP;AAEA;AA9DkC,CAApC;AAkEA;;;;;;;AAOA,SAASs/G,WAAT,CAAsBt/G,MAAtB,EAA8B1M,KAA9B,EAAqC9uB,CAArC,EAAyC;AAExC,OAAKw7B,MAAL,GAAgBA,MAAM,KAAKhiC,SAAb,GAA2BgiC,MAA3B,GAAoC,GAAlD,CAFwC,CAEe;;AACvD,OAAK1M,KAAL,GAAeA,KAAK,KAAKt1B,SAAZ,GAA0Bs1B,KAA1B,GAAkC,CAA/C,CAHwC,CAGU;;AAClD,OAAK9uB,CAAL,GAAWA,CAAC,KAAKxG,SAAR,GAAsBwG,CAAtB,GAA0B,CAAnC,CAJwC,CAIF;;AAEtC,SAAO,IAAP;AAEA;;AAED7H,MAAM,CAACme,MAAP,CAAewkI,WAAW,CAACvjJ,SAA3B,EAAsC;AAErC0vB,EAAAA,GAAG,EAAE,UAAWuU,MAAX,EAAmB1M,KAAnB,EAA0B9uB,CAA1B,EAA8B;AAElC,SAAKw7B,MAAL,GAAcA,MAAd;AACA,SAAK1M,KAAL,GAAaA,KAAb;AACA,SAAK9uB,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA,GAVoC;AAYrC4nB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAhBoC;AAkBrCA,EAAAA,IAAI,EAAE,UAAW8yH,KAAX,EAAmB;AAExB,SAAKn/G,MAAL,GAAcm/G,KAAK,CAACn/G,MAApB;AACA,SAAK1M,KAAL,GAAa6rH,KAAK,CAAC7rH,KAAnB;AACA,SAAK9uB,CAAL,GAAS26I,KAAK,CAAC36I,CAAf;AAEA,WAAO,IAAP;AAEA,GA1BoC;AA4BrCohC,EAAAA,cAAc,EAAE,UAAWnqC,CAAX,EAAe;AAE9B,WAAO,KAAK4jJ,sBAAL,CAA6B5jJ,CAAC,CAAC6I,CAA/B,EAAkC7I,CAAC,CAAC+I,CAApC,EAAuC/I,CAAC,CAACk7B,CAAzC,CAAP;AAEA,GAhCoC;AAkCrC0oH,EAAAA,sBAAsB,EAAE,UAAW/6I,CAAX,EAAcE,CAAd,EAAiBmyB,CAAjB,EAAqB;AAE5C,SAAKqJ,MAAL,GAAc/kC,IAAI,CAAC0yB,IAAL,CAAWrpB,CAAC,GAAGA,CAAJ,GAAQqyB,CAAC,GAAGA,CAAvB,CAAd;AACA,SAAKrD,KAAL,GAAar4B,IAAI,CAAC8yB,KAAL,CAAYzpB,CAAZ,EAAeqyB,CAAf,CAAb;AACA,SAAKnyB,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA;AA1CoC,CAAtC;AA8CA;;;;AAIA,MAAM+6I,SAAS,GAAG,IAAI3zH,OAAJ,EAAlB;;AAEA,SAAS4zH,IAAT,CAAez/I,GAAf,EAAoBC,GAApB,EAA0B;AAEzB,OAAKD,GAAL,GAAaA,GAAG,KAAK/B,SAAV,GAAwB+B,GAAxB,GAA8B,IAAI6rB,OAAJ,CAAa,CAAEiiB,QAAf,EAAyB,CAAEA,QAA3B,CAAzC;AACA,OAAK7tC,GAAL,GAAaA,GAAG,KAAKhC,SAAV,GAAwBgC,GAAxB,GAA8B,IAAI4rB,OAAJ,CAAa,CAAEiiB,QAAf,EAAyB,CAAEA,QAA3B,CAAzC;AAEA;;AAEDlxC,MAAM,CAACme,MAAP,CAAe0kI,IAAI,CAACzjJ,SAApB,EAA+B;AAE9B0vB,EAAAA,GAAG,EAAE,UAAW1rB,GAAX,EAAgBC,GAAhB,EAAsB;AAE1B,SAAKD,GAAL,CAASssB,IAAT,CAAetsB,GAAf;AACA,SAAKC,GAAL,CAASqsB,IAAT,CAAersB,GAAf;AAEA,WAAO,IAAP;AAEA,GAT6B;AAW9BuuC,EAAAA,aAAa,EAAE,UAAWC,MAAX,EAAoB;AAElC,SAAKC,SAAL;;AAEA,SAAM,IAAIxxC,CAAC,GAAG,CAAR,EAAWyxC,EAAE,GAAGF,MAAM,CAAC5yC,MAA7B,EAAqCqB,CAAC,GAAGyxC,EAAzC,EAA6CzxC,CAAC,EAA9C,EAAoD;AAEnD,WAAK0xC,aAAL,CAAoBH,MAAM,CAAEvxC,CAAF,CAA1B;AAEA;;AAED,WAAO,IAAP;AAEA,GAvB6B;AAyB9B2xC,EAAAA,oBAAoB,EAAE,UAAW3f,MAAX,EAAmB4f,IAAnB,EAA0B;AAE/C,UAAMC,QAAQ,GAAGywG,SAAS,CAAClzH,IAAV,CAAgBwiB,IAAhB,EAAuBhiB,cAAvB,CAAuC,GAAvC,CAAjB;;AACA,SAAK9sB,GAAL,CAASssB,IAAT,CAAe4C,MAAf,EAAwBxC,GAAxB,CAA6BqiB,QAA7B;AACA,SAAK9uC,GAAL,CAASqsB,IAAT,CAAe4C,MAAf,EAAwBra,GAAxB,CAA6Bk6B,QAA7B;AAEA,WAAO,IAAP;AAEA,GAjC6B;AAmC9B1iB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAvC6B;AAyC9BA,EAAAA,IAAI,EAAE,UAAWvV,GAAX,EAAiB;AAEtB,SAAK/W,GAAL,CAASssB,IAAT,CAAevV,GAAG,CAAC/W,GAAnB;AACA,SAAKC,GAAL,CAASqsB,IAAT,CAAevV,GAAG,CAAC9W,GAAnB;AAEA,WAAO,IAAP;AAEA,GAhD6B;AAkD9ByuC,EAAAA,SAAS,EAAE,YAAY;AAEtB,SAAK1uC,GAAL,CAASuE,CAAT,GAAa,KAAKvE,GAAL,CAASyE,CAAT,GAAa,CAAEqpC,QAA5B;AACA,SAAK7tC,GAAL,CAASsE,CAAT,GAAa,KAAKtE,GAAL,CAASwE,CAAT,GAAa,CAAEqpC,QAA5B;AAEA,WAAO,IAAP;AAEA,GAzD6B;AA2D9BoB,EAAAA,OAAO,EAAE,YAAY;AAEpB;AAEA,WAAS,KAAKjvC,GAAL,CAASsE,CAAT,GAAa,KAAKvE,GAAL,CAASuE,CAAxB,IAAiC,KAAKtE,GAAL,CAASwE,CAAT,GAAa,KAAKzE,GAAL,CAASyE,CAA9D;AAEA,GAjE6B;AAmE9B0qC,EAAAA,SAAS,EAAE,UAAW9yC,MAAX,EAAoB;AAE9B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,iDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIwvB,OAAJ,EAAT;AAEA;;AAED,WAAO,KAAKqjB,OAAL,KAAiB7yC,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf,CAAjB,GAAsCrvB,MAAM,CAACkwB,UAAP,CAAmB,KAAKvsB,GAAxB,EAA6B,KAAKC,GAAlC,EAAwC6sB,cAAxC,CAAwD,GAAxD,CAA7C;AAEA,GA9E6B;AAgF9BsiB,EAAAA,OAAO,EAAE,UAAW/yC,MAAX,EAAoB;AAE5B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIwvB,OAAJ,EAAT;AAEA;;AAED,WAAO,KAAKqjB,OAAL,KAAiB7yC,MAAM,CAACqvB,GAAP,CAAY,CAAZ,EAAe,CAAf,CAAjB,GAAsCrvB,MAAM,CAACswB,UAAP,CAAmB,KAAK1sB,GAAxB,EAA6B,KAAKD,GAAlC,CAA7C;AAEA,GA3F6B;AA6F9B4uC,EAAAA,aAAa,EAAE,UAAWS,KAAX,EAAmB;AAEjC,SAAKrvC,GAAL,CAASA,GAAT,CAAcqvC,KAAd;AACA,SAAKpvC,GAAL,CAASA,GAAT,CAAcovC,KAAd;AAEA,WAAO,IAAP;AAEA,GApG6B;AAsG9BC,EAAAA,cAAc,EAAE,UAAW3F,MAAX,EAAoB;AAEnC,SAAK3pC,GAAL,CAAS0sB,GAAT,CAAcid,MAAd;AACA,SAAK1pC,GAAL,CAAS4U,GAAT,CAAc80B,MAAd;AAEA,WAAO,IAAP;AAEA,GA7G6B;AA+G9B4F,EAAAA,cAAc,EAAE,UAAWvjB,MAAX,EAAoB;AAEnC,SAAKhsB,GAAL,CAASwsB,SAAT,CAAoB,CAAER,MAAtB;AACA,SAAK/rB,GAAL,CAASusB,SAAT,CAAoBR,MAApB;AAEA,WAAO,IAAP;AAEA,GAtH6B;AAwH9B2jB,EAAAA,aAAa,EAAE,UAAWN,KAAX,EAAmB;AAEjC,WAAOA,KAAK,CAAC9qC,CAAN,GAAU,KAAKvE,GAAL,CAASuE,CAAnB,IAAwB8qC,KAAK,CAAC9qC,CAAN,GAAU,KAAKtE,GAAL,CAASsE,CAA3C,IACN8qC,KAAK,CAAC5qC,CAAN,GAAU,KAAKzE,GAAL,CAASyE,CADb,IACkB4qC,KAAK,CAAC5qC,CAAN,GAAU,KAAKxE,GAAL,CAASwE,CADrC,GACyC,KADzC,GACiD,IADxD;AAGA,GA7H6B;AA+H9BmrC,EAAAA,WAAW,EAAE,UAAW74B,GAAX,EAAiB;AAE7B,WAAO,KAAK/W,GAAL,CAASuE,CAAT,IAAcwS,GAAG,CAAC/W,GAAJ,CAAQuE,CAAtB,IAA2BwS,GAAG,CAAC9W,GAAJ,CAAQsE,CAAR,IAAa,KAAKtE,GAAL,CAASsE,CAAjD,IACN,KAAKvE,GAAL,CAASyE,CAAT,IAAcsS,GAAG,CAAC/W,GAAJ,CAAQyE,CADhB,IACqBsS,GAAG,CAAC9W,GAAJ,CAAQwE,CAAR,IAAa,KAAKxE,GAAL,CAASwE,CADlD;AAGA,GApI6B;AAsI9BorC,EAAAA,YAAY,EAAE,UAAWR,KAAX,EAAkBhzC,MAAlB,EAA2B;AAExC;AACA;AAEA,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIwvB,OAAJ,EAAT;AAEA;;AAED,WAAOxvB,MAAM,CAACqvB,GAAP,CACN,CAAE2jB,KAAK,CAAC9qC,CAAN,GAAU,KAAKvE,GAAL,CAASuE,CAArB,KAA6B,KAAKtE,GAAL,CAASsE,CAAT,GAAa,KAAKvE,GAAL,CAASuE,CAAnD,CADM,EAEN,CAAE8qC,KAAK,CAAC5qC,CAAN,GAAU,KAAKzE,GAAL,CAASyE,CAArB,KAA6B,KAAKxE,GAAL,CAASwE,CAAT,GAAa,KAAKzE,GAAL,CAASyE,CAAnD,CAFM,CAAP;AAKA,GAvJ6B;AAyJ9BqrC,EAAAA,aAAa,EAAE,UAAW/4B,GAAX,EAAiB;AAE/B;AAEA,WAAOA,GAAG,CAAC9W,GAAJ,CAAQsE,CAAR,GAAY,KAAKvE,GAAL,CAASuE,CAArB,IAA0BwS,GAAG,CAAC/W,GAAJ,CAAQuE,CAAR,GAAY,KAAKtE,GAAL,CAASsE,CAA/C,IACNwS,GAAG,CAAC9W,GAAJ,CAAQwE,CAAR,GAAY,KAAKzE,GAAL,CAASyE,CADf,IACoBsS,GAAG,CAAC/W,GAAJ,CAAQyE,CAAR,GAAY,KAAKxE,GAAL,CAASwE,CADzC,GAC6C,KAD7C,GACqD,IAD5D;AAGA,GAhK6B;AAkK9BwrC,EAAAA,UAAU,EAAE,UAAWZ,KAAX,EAAkBhzC,MAAlB,EAA2B;AAEtC,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIwvB,OAAJ,EAAT;AAEA;;AAED,WAAOxvB,MAAM,CAACiwB,IAAP,CAAa+iB,KAAb,EAAqBlmB,KAArB,CAA4B,KAAKnpB,GAAjC,EAAsC,KAAKC,GAA3C,CAAP;AAEA,GA7K6B;AA+K9BwwC,EAAAA,eAAe,EAAE,UAAWpB,KAAX,EAAmB;AAEnC,UAAMqB,YAAY,GAAG8uG,SAAS,CAAClzH,IAAV,CAAgB+iB,KAAhB,EAAwBlmB,KAAxB,CAA+B,KAAKnpB,GAApC,EAAyC,KAAKC,GAA9C,CAArB;;AACA,WAAOywC,YAAY,CAAChkB,GAAb,CAAkB2iB,KAAlB,EAA0BxzC,MAA1B,EAAP;AAEA,GApL6B;AAsL9B+0C,EAAAA,SAAS,EAAE,UAAW75B,GAAX,EAAiB;AAE3B,SAAK/W,GAAL,CAASC,GAAT,CAAc8W,GAAG,CAAC/W,GAAlB;AACA,SAAKC,GAAL,CAASD,GAAT,CAAc+W,GAAG,CAAC9W,GAAlB;AAEA,WAAO,IAAP;AAEA,GA7L6B;AA+L9ByvC,EAAAA,KAAK,EAAE,UAAW34B,GAAX,EAAiB;AAEvB,SAAK/W,GAAL,CAASA,GAAT,CAAc+W,GAAG,CAAC/W,GAAlB;AACA,SAAKC,GAAL,CAASA,GAAT,CAAc8W,GAAG,CAAC9W,GAAlB;AAEA,WAAO,IAAP;AAEA,GAtM6B;AAwM9BuzB,EAAAA,SAAS,EAAE,UAAWxsB,MAAX,EAAoB;AAE9B,SAAKhH,GAAL,CAAS6U,GAAT,CAAc7N,MAAd;AACA,SAAK/G,GAAL,CAAS4U,GAAT,CAAc7N,MAAd;AAEA,WAAO,IAAP;AAEA,GA/M6B;AAiN9B2nB,EAAAA,MAAM,EAAE,UAAW5X,GAAX,EAAiB;AAExB,WAAOA,GAAG,CAAC/W,GAAJ,CAAQ2uB,MAAR,CAAgB,KAAK3uB,GAArB,KAA8B+W,GAAG,CAAC9W,GAAJ,CAAQ0uB,MAAR,CAAgB,KAAK1uB,GAArB,CAArC;AAEA;AArN6B,CAA/B;AAyNA;;;;AAIA,MAAMy/I,OAAO,GAAG,IAAIjiH,OAAJ,EAAhB;;AACA,MAAMkiH,SAAS,GAAG,IAAIliH,OAAJ,EAAlB;;AAEA,SAASmiH,KAAT,CAAgBlqG,KAAhB,EAAuBI,GAAvB,EAA6B;AAE5B,OAAKJ,KAAL,GAAeA,KAAK,KAAKz3C,SAAZ,GAA0By3C,KAA1B,GAAkC,IAAIjY,OAAJ,EAA/C;AACA,OAAKqY,GAAL,GAAaA,GAAG,KAAK73C,SAAV,GAAwB63C,GAAxB,GAA8B,IAAIrY,OAAJ,EAAzC;AAEA;;AAED7gC,MAAM,CAACme,MAAP,CAAe6kI,KAAK,CAAC5jJ,SAArB,EAAgC;AAE/B0vB,EAAAA,GAAG,EAAE,UAAWgqB,KAAX,EAAkBI,GAAlB,EAAwB;AAE5B,SAAKJ,KAAL,CAAWppB,IAAX,CAAiBopB,KAAjB;AACA,SAAKI,GAAL,CAASxpB,IAAT,CAAewpB,GAAf;AAEA,WAAO,IAAP;AAEA,GAT8B;AAW/BzpB,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,GAf8B;AAiB/BA,EAAAA,IAAI,EAAE,UAAWmpB,IAAX,EAAkB;AAEvB,SAAKC,KAAL,CAAWppB,IAAX,CAAiBmpB,IAAI,CAACC,KAAtB;AACA,SAAKI,GAAL,CAASxpB,IAAT,CAAempB,IAAI,CAACK,GAApB;AAEA,WAAO,IAAP;AAEA,GAxB8B;AA0B/B3G,EAAAA,SAAS,EAAE,UAAW9yC,MAAX,EAAoB;AAE9B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACkwB,UAAP,CAAmB,KAAKmpB,KAAxB,EAA+B,KAAKI,GAApC,EAA0ChpB,cAA1C,CAA0D,GAA1D,CAAP;AAEA,GArC8B;AAuC/B5sB,EAAAA,KAAK,EAAE,UAAW7D,MAAX,EAAoB;AAE1B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,8CAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAOphC,MAAM,CAACswB,UAAP,CAAmB,KAAKmpB,GAAxB,EAA6B,KAAKJ,KAAlC,CAAP;AAEA,GAlD8B;AAoD/BmqG,EAAAA,UAAU,EAAE,YAAY;AAEvB,WAAO,KAAKnqG,KAAL,CAAWxnB,iBAAX,CAA8B,KAAK4nB,GAAnC,CAAP;AAEA,GAxD8B;AA0D/BxM,EAAAA,QAAQ,EAAE,YAAY;AAErB,WAAO,KAAKoM,KAAL,CAAWznB,UAAX,CAAuB,KAAK6nB,GAA5B,CAAP;AAEA,GA9D8B;AAgE/BzD,EAAAA,EAAE,EAAE,UAAWvyC,CAAX,EAAczD,MAAd,EAAuB;AAE1B,QAAKA,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,2CAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAO,KAAKv9B,KAAL,CAAY7D,MAAZ,EAAqBywB,cAArB,CAAqChtB,CAArC,EAAyC+U,GAAzC,CAA8C,KAAK6gC,KAAnD,CAAP;AAEA,GA3E8B;AA6E/BoqG,EAAAA,4BAA4B,EAAE,UAAWzwG,KAAX,EAAkB0wG,WAAlB,EAAgC;AAE7DL,IAAAA,OAAO,CAAC/yH,UAAR,CAAoB0iB,KAApB,EAA2B,KAAKqG,KAAhC;;AACAiqG,IAAAA,SAAS,CAAChzH,UAAV,CAAsB,KAAKmpB,GAA3B,EAAgC,KAAKJ,KAArC;;AAEA,UAAMsqG,SAAS,GAAGL,SAAS,CAAClyH,GAAV,CAAekyH,SAAf,CAAlB;;AACA,UAAMM,eAAe,GAAGN,SAAS,CAAClyH,GAAV,CAAeiyH,OAAf,CAAxB;;AAEA,QAAI5/I,CAAC,GAAGmgJ,eAAe,GAAGD,SAA1B;;AAEA,QAAKD,WAAL,EAAmB;AAElBjgJ,MAAAA,CAAC,GAAGyoB,SAAS,CAACY,KAAV,CAAiBrpB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,CAAJ;AAEA;;AAED,WAAOA,CAAP;AAEA,GA/F8B;AAiG/ByyC,EAAAA,mBAAmB,EAAE,UAAWlD,KAAX,EAAkB0wG,WAAlB,EAA+B1jJ,MAA/B,EAAwC;AAE5D,UAAMyD,CAAC,GAAG,KAAKggJ,4BAAL,CAAmCzwG,KAAnC,EAA0C0wG,WAA1C,CAAV;;AAEA,QAAK1jJ,MAAM,KAAK4B,SAAhB,EAA4B;AAE3B0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AACAvvB,MAAAA,MAAM,GAAG,IAAIohC,OAAJ,EAAT;AAEA;;AAED,WAAO,KAAKv9B,KAAL,CAAY7D,MAAZ,EAAqBywB,cAArB,CAAqChtB,CAArC,EAAyC+U,GAAzC,CAA8C,KAAK6gC,KAAnD,CAAP;AAEA,GA9G8B;AAgH/B1e,EAAAA,YAAY,EAAE,UAAW/E,MAAX,EAAoB;AAEjC,SAAKyjB,KAAL,CAAW1e,YAAX,CAAyB/E,MAAzB;AACA,SAAK6jB,GAAL,CAAS9e,YAAT,CAAuB/E,MAAvB;AAEA,WAAO,IAAP;AAEA,GAvH8B;AAyH/BtD,EAAAA,MAAM,EAAE,UAAW8mB,IAAX,EAAkB;AAEzB,WAAOA,IAAI,CAACC,KAAL,CAAW/mB,MAAX,CAAmB,KAAK+mB,KAAxB,KAAmCD,IAAI,CAACK,GAAL,CAASnnB,MAAT,CAAiB,KAAKmnB,GAAtB,CAA1C;AAEA;AA7H8B,CAAhC;AAiIA;;;;AAIA,SAASoqG,qBAAT,CAAgCl0G,QAAhC,EAA2C;AAE1CxE,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAKyvC,QAAL,GAAgBA,QAAhB;;AACA,OAAKsqB,MAAL,GAAc;AAAW;AAAuB,GAAE,CAAlD;;AAEA,OAAKwtC,YAAL,GAAoB,KAApB;AACA,OAAKC,UAAL,GAAkB,KAAlB;AACA,OAAKE,SAAL,GAAiB,KAAjB;AACA,OAAKD,MAAL,GAAc,KAAd;AAEA,OAAKE,aAAL,GAAqB,IAArB;AACA,OAAKC,WAAL,GAAmB,IAAnB;AACA,OAAKE,UAAL,GAAkB,IAAlB;AACA,OAAKD,OAAL,GAAe,IAAf;AAEA,OAAK94D,KAAL,GAAa,CAAb;AAEA;;AAED40G,qBAAqB,CAAClkJ,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAlC;AACAkkJ,qBAAqB,CAAClkJ,SAAtB,CAAgCoC,WAAhC,GAA8C8hJ,qBAA9C;AAEAA,qBAAqB,CAAClkJ,SAAtB,CAAgC0pG,uBAAhC,GAA0D,IAA1D;AAEA;;;;;;AAMA,MAAMy6C,SAAS,GAAG,IAAI1iH,OAAJ,EAAlB;;AAEA,SAAS2iH,eAAT,CAA0B57D,KAA1B,EAAiC7pF,KAAjC,EAAyC;AAExC6sC,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAKioF,KAAL,GAAaA,KAAb;AACA,OAAKA,KAAL,CAAWj6C,iBAAX;AAEA,OAAKtY,MAAL,GAAcuyD,KAAK,CAACzlD,WAApB;AACA,OAAKzJ,gBAAL,GAAwB,KAAxB;AAEA,OAAK36B,KAAL,GAAaA,KAAb;AAEA,QAAMkxC,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AAEA,QAAMgB,SAAS,GAAG,CACjB,CADiB,EACd,CADc,EACX,CADW,EACP,CADO,EACJ,CADI,EACD,CADC,EAEjB,CAFiB,EAEd,CAFc,EAEX,CAFW,EAEP,CAFO,EAEJ,CAFI,EAED,CAFC,EAGjB,CAHiB,EAGd,CAHc,EAGX,CAHW,EAGR,CAAE,CAHM,EAGH,CAHG,EAGA,CAHA,EAIjB,CAJiB,EAId,CAJc,EAIX,CAJW,EAIP,CAJO,EAIJ,CAJI,EAID,CAJC,EAKjB,CALiB,EAKd,CALc,EAKX,CALW,EAKP,CALO,EAKJ,CAAE,CALE,EAKC,CALD,CAAlB;;AAQA,OAAM,IAAIlqD,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAG,CAAf,EAAkBzzC,CAAC,GAAG,EAA5B,EAAgCJ,CAAC,GAAGI,CAApC,EAAuCJ,CAAC,IAAK6zC,CAAC,EAA9C,EAAoD;AAEnD,UAAME,EAAE,GAAK/zC,CAAC,GAAGI,CAAN,GAAYpC,IAAI,CAACutB,EAAjB,GAAsB,CAAjC;AACA,UAAMyoB,EAAE,GAAKH,CAAC,GAAGzzC,CAAN,GAAYpC,IAAI,CAACutB,EAAjB,GAAsB,CAAjC;AAEA2+B,IAAAA,SAAS,CAAC/gD,IAAV,CACCnL,IAAI,CAAC8vB,GAAL,CAAUimB,EAAV,CADD,EACiB/1C,IAAI,CAAC+vB,GAAL,CAAUgmB,EAAV,CADjB,EACiC,CADjC,EAEC/1C,IAAI,CAAC8vB,GAAL,CAAUkmB,EAAV,CAFD,EAEiBh2C,IAAI,CAAC+vB,GAAL,CAAUimB,EAAV,CAFjB,EAEiC,CAFjC;AAKA;;AAEDrF,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4B2D,SAA5B,EAAuC,CAAvC,CAAnC;AAEA,QAAMpb,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAE10C,IAAAA,GAAG,EAAE,KAAP;AAAcgR,IAAAA,UAAU,EAAE;AAA1B,GAAvB,CAAjB;AAEA,OAAK4iG,IAAL,GAAY,IAAI1yC,YAAJ,CAAkB9hE,QAAlB,EAA4BG,QAA5B,CAAZ;AACA,OAAKn3B,GAAL,CAAU,KAAKwrI,IAAf;AAEA,OAAKhlH,MAAL;AAEA;;AAED+kH,eAAe,CAACpkJ,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAA5B;AACAokJ,eAAe,CAACpkJ,SAAhB,CAA0BoC,WAA1B,GAAwCgiJ,eAAxC;;AAEAA,eAAe,CAACpkJ,SAAhB,CAA0Bw6B,OAA1B,GAAoC,YAAY;AAE/C,OAAK6pH,IAAL,CAAUx0G,QAAV,CAAmBrV,OAAnB;AACA,OAAK6pH,IAAL,CAAUr0G,QAAV,CAAmBxV,OAAnB;AAEA,CALD;;AAOA4pH,eAAe,CAACpkJ,SAAhB,CAA0Bq/B,MAA1B,GAAmC,YAAY;AAE9C,OAAKmpD,KAAL,CAAWj6C,iBAAX;AAEA,QAAM+1G,UAAU,GAAG,KAAK97D,KAAL,CAAWl7C,QAAX,GAAsB,KAAKk7C,KAAL,CAAWl7C,QAAjC,GAA4C,IAA/D;AACA,QAAMi3G,SAAS,GAAGD,UAAU,GAAGplJ,IAAI,CAAC05D,GAAL,CAAU,KAAK4vB,KAAL,CAAWz2D,KAArB,CAA/B;AAEA,OAAKsyH,IAAL,CAAUhtH,KAAV,CAAgB3H,GAAhB,CAAqB60H,SAArB,EAAgCA,SAAhC,EAA2CD,UAA3C;;AAEAH,EAAAA,SAAS,CAAC7/G,qBAAV,CAAiC,KAAKkkD,KAAL,CAAWnoF,MAAX,CAAkB0iC,WAAnD;;AAEA,OAAKshH,IAAL,CAAU59G,MAAV,CAAkB09G,SAAlB;;AAEA,MAAK,KAAKxlJ,KAAL,KAAesD,SAApB,EAAgC;AAE/B,SAAKoiJ,IAAL,CAAUr0G,QAAV,CAAmBrxC,KAAnB,CAAyB+wB,GAAzB,CAA8B,KAAK/wB,KAAnC;AAEA,GAJD,MAIO;AAEN,SAAK0lJ,IAAL,CAAUr0G,QAAV,CAAmBrxC,KAAnB,CAAyB2xB,IAAzB,CAA+B,KAAKk4D,KAAL,CAAW7pF,KAA1C;AAEA;AAED,CAvBD;AAyBA;;;;;;;;;AAQA,MAAM6lJ,SAAS,GAAG,IAAI/iH,OAAJ,EAAlB;;AACA,MAAMgjH,WAAW,GAAG,IAAI7/G,OAAJ,EAApB;;AACA,MAAM8/G,eAAe,GAAG,IAAI9/G,OAAJ,EAAxB;;AAEA,SAAS+/G,WAAT,CAAsBh/I,MAAtB,EAA+B;AAE9B,QAAMi/I,QAAQ,GAAG,EAAjB;;AAEA,MAAKj/I,MAAM,IAAIA,MAAM,CAACiqG,MAAtB,EAA+B;AAE9Bg1C,IAAAA,QAAQ,CAACv6I,IAAT,CAAe1E,MAAf;AAEA;;AAED,OAAM,IAAIzE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGyE,MAAM,CAAC8lC,QAAP,CAAgB5rC,MAArC,EAA6CqB,CAAC,EAA9C,EAAoD;AAEnD0jJ,IAAAA,QAAQ,CAACv6I,IAAT,CAAclJ,KAAd,CAAqByjJ,QAArB,EAA+BD,WAAW,CAAEh/I,MAAM,CAAC8lC,QAAP,CAAiBvqC,CAAjB,CAAF,CAA1C;AAEA;;AAED,SAAO0jJ,QAAP;AAEA;;AAED,SAASC,cAAT,CAAyBl/I,MAAzB,EAAkC;AAEjC,QAAMkgF,KAAK,GAAG8+D,WAAW,CAAEh/I,MAAF,CAAzB;AAEA,QAAMkqC,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AAEA,QAAMtC,QAAQ,GAAG,EAAjB;AACA,QAAM5B,MAAM,GAAG,EAAf;AAEA,QAAMrH,MAAM,GAAG,IAAIt6C,KAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAf;AACA,QAAMu6C,MAAM,GAAG,IAAIv6C,KAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAf;;AAEA,OAAM,IAAIrD,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2kF,KAAK,CAAChmF,MAA3B,EAAmCqB,CAAC,EAApC,EAA0C;AAEzC,UAAMyuG,IAAI,GAAG9pB,KAAK,CAAE3kF,CAAF,CAAlB;;AAEA,QAAKyuG,IAAI,CAACh6F,MAAL,IAAeg6F,IAAI,CAACh6F,MAAL,CAAYi6F,MAAhC,EAAyC;AAExC9nD,MAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAy9C,MAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACA67C,MAAAA,MAAM,CAAC77C,IAAP,CAAaw0C,MAAM,CAAC5/C,CAApB,EAAuB4/C,MAAM,CAACz/C,CAA9B,EAAiCy/C,MAAM,CAACx/C,CAAxC;AACA6mD,MAAAA,MAAM,CAAC77C,IAAP,CAAay0C,MAAM,CAAC7/C,CAApB,EAAuB6/C,MAAM,CAAC1/C,CAA9B,EAAiC0/C,MAAM,CAACz/C,CAAxC;AAEA;AAED;;AAEDwwC,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAAnC;AACAjY,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,OAAvB,EAAgC,IAAI87C,sBAAJ,CAA4BvB,MAA5B,EAAoC,CAApC,CAAhC;AAEA,QAAMlW,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAE9lC,IAAAA,YAAY,EAAE,IAAhB;AAAsBc,IAAAA,SAAS,EAAE,KAAjC;AAAwCC,IAAAA,UAAU,EAAE,KAApD;AAA2DqB,IAAAA,UAAU,EAAE,KAAvE;AAA8E9B,IAAAA,WAAW,EAAE;AAA3F,GAAvB,CAAjB;AAEAgyD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmCG,QAAnC;AAEA,OAAK3kC,IAAL,GAAY,gBAAZ;AAEA,OAAKgN,IAAL,GAAY1S,MAAZ;AACA,OAAKkgF,KAAL,GAAaA,KAAb;AAEA,OAAK5vD,MAAL,GAActwB,MAAM,CAACo9B,WAArB;AACA,OAAKzJ,gBAAL,GAAwB,KAAxB;AAEA;;AAEDurH,cAAc,CAAC7kJ,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAA3B;AACA6kJ,cAAc,CAAC7kJ,SAAf,CAAyBoC,WAAzB,GAAuCyiJ,cAAvC;AAEAA,cAAc,CAAC7kJ,SAAf,CAAyB8kJ,gBAAzB,GAA4C,IAA5C;;AAEAD,cAAc,CAAC7kJ,SAAf,CAAyBuuC,iBAAzB,GAA6C,UAAWQ,KAAX,EAAmB;AAE/D,QAAM82C,KAAK,GAAG,KAAKA,KAAnB;AAEA,QAAMh2C,QAAQ,GAAG,KAAKA,QAAtB;AACA,QAAMnoC,QAAQ,GAAGmoC,QAAQ,CAAC+a,YAAT,CAAuB,UAAvB,CAAjB;;AAEA85F,EAAAA,eAAe,CAAC1uH,UAAhB,CAA4B,KAAK3d,IAAL,CAAU0qB,WAAtC;;AAEA,OAAM,IAAI7hC,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAG,CAArB,EAAwB7zC,CAAC,GAAG2kF,KAAK,CAAChmF,MAAlC,EAA0CqB,CAAC,EAA3C,EAAiD;AAEhD,UAAMyuG,IAAI,GAAG9pB,KAAK,CAAE3kF,CAAF,CAAlB;;AAEA,QAAKyuG,IAAI,CAACh6F,MAAL,IAAeg6F,IAAI,CAACh6F,MAAL,CAAYi6F,MAAhC,EAAyC;AAExC60C,MAAAA,WAAW,CAACjwH,gBAAZ,CAA8BkwH,eAA9B,EAA+C/0C,IAAI,CAAC5sE,WAApD;;AACAyhH,MAAAA,SAAS,CAAClgH,qBAAV,CAAiCmgH,WAAjC;;AACA/8I,MAAAA,QAAQ,CAAC8+C,MAAT,CAAiBzR,CAAjB,EAAoByvG,SAAS,CAACj8I,CAA9B,EAAiCi8I,SAAS,CAAC/7I,CAA3C,EAA8C+7I,SAAS,CAAC5pH,CAAxD;;AAEA6pH,MAAAA,WAAW,CAACjwH,gBAAZ,CAA8BkwH,eAA9B,EAA+C/0C,IAAI,CAACh6F,MAAL,CAAYotB,WAA3D;;AACAyhH,MAAAA,SAAS,CAAClgH,qBAAV,CAAiCmgH,WAAjC;;AACA/8I,MAAAA,QAAQ,CAAC8+C,MAAT,CAAiBzR,CAAC,GAAG,CAArB,EAAwByvG,SAAS,CAACj8I,CAAlC,EAAqCi8I,SAAS,CAAC/7I,CAA/C,EAAkD+7I,SAAS,CAAC5pH,CAA5D;AAEAma,MAAAA,CAAC,IAAI,CAAL;AAEA;AAED;;AAEDlF,EAAAA,QAAQ,CAAC+a,YAAT,CAAuB,UAAvB,EAAoCK,WAApC,GAAkD,IAAlD;AAEAzf,EAAAA,QAAQ,CAACxrC,SAAT,CAAmBuuC,iBAAnB,CAAqChuC,IAArC,CAA2C,IAA3C,EAAiDwuC,KAAjD;AAEA,CAjCD;AAmCA;;;;;;AAKA,SAASg2G,gBAAT,CAA2Bv8D,KAA3B,EAAkCw8D,UAAlC,EAA8CrmJ,KAA9C,EAAsD;AAErD,OAAK6pF,KAAL,GAAaA,KAAb;AACA,OAAKA,KAAL,CAAWj6C,iBAAX;AAEA,OAAK5vC,KAAL,GAAaA,KAAb;AAEA,QAAMkxC,QAAQ,GAAG,IAAIuzE,oBAAJ,CAA0B4hC,UAA1B,EAAsC,CAAtC,EAAyC,CAAzC,CAAjB;AACA,QAAMh1G,QAAQ,GAAG,IAAIiV,iBAAJ,CAAuB;AAAET,IAAAA,SAAS,EAAE,IAAb;AAAmB/T,IAAAA,GAAG,EAAE,KAAxB;AAA+BgR,IAAAA,UAAU,EAAE;AAA3C,GAAvB,CAAjB;AAEAyN,EAAAA,IAAI,CAAC3uD,IAAL,CAAW,IAAX,EAAiBsvC,QAAjB,EAA2BG,QAA3B;AAEA,OAAK3kC,IAAL,GAAY,kBAAZ;AAEA,OAAK4qB,MAAL,GAAc,KAAKuyD,KAAL,CAAWzlD,WAAzB;AACA,OAAKzJ,gBAAL,GAAwB,KAAxB;AAEA,OAAK+F,MAAL;AAGA;;;;;;;;;;;;;AAsBA;;AAED0lH,gBAAgB,CAAC/kJ,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAeq1B,IAAI,CAAClvD,SAApB,CAA7B;AACA+kJ,gBAAgB,CAAC/kJ,SAAjB,CAA2BoC,WAA3B,GAAyC2iJ,gBAAzC;;AAEAA,gBAAgB,CAAC/kJ,SAAjB,CAA2Bw6B,OAA3B,GAAqC,YAAY;AAEhD,OAAKqV,QAAL,CAAcrV,OAAd;AACA,OAAKwV,QAAL,CAAcxV,OAAd;AAEA,CALD;;AAOAuqH,gBAAgB,CAAC/kJ,SAAjB,CAA2Bq/B,MAA3B,GAAoC,YAAY;AAE/C,MAAK,KAAK1gC,KAAL,KAAesD,SAApB,EAAgC;AAE/B,SAAK+tC,QAAL,CAAcrxC,KAAd,CAAoB+wB,GAApB,CAAyB,KAAK/wB,KAA9B;AAEA,GAJD,MAIO;AAEN,SAAKqxC,QAAL,CAAcrxC,KAAd,CAAoB2xB,IAApB,CAA0B,KAAKk4D,KAAL,CAAW7pF,KAArC;AAEA;AAED;;;;;;;;;;AAeA,CA3BD;AA6BA;;;;;;;AAMA,MAAMsmJ,SAAS,GAAG,IAAIxjH,OAAJ,EAAlB;;AACA,MAAMyjH,OAAO,GAAG,IAAI3gJ,KAAJ,EAAhB;;AACA,MAAM4gJ,OAAO,GAAG,IAAI5gJ,KAAJ,EAAhB;;AAEA,SAAS6gJ,qBAAT,CAAgC58D,KAAhC,EAAuC11C,IAAvC,EAA6Cn0C,KAA7C,EAAqD;AAEpD6sC,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAKioF,KAAL,GAAaA,KAAb;AACA,OAAKA,KAAL,CAAWj6C,iBAAX;AAEA,OAAKtY,MAAL,GAAcuyD,KAAK,CAACzlD,WAApB;AACA,OAAKzJ,gBAAL,GAAwB,KAAxB;AAEA,OAAK36B,KAAL,GAAaA,KAAb;AAEA,QAAMkxC,QAAQ,GAAG,IAAI0lE,wBAAJ,CAA8BziE,IAA9B,CAAjB;AACAjD,EAAAA,QAAQ,CAAC1C,OAAT,CAAkBjuC,IAAI,CAACutB,EAAL,GAAU,GAA5B;AAEA,OAAKujB,QAAL,GAAgB,IAAIiV,iBAAJ,CAAuB;AAAET,IAAAA,SAAS,EAAE,IAAb;AAAmB/T,IAAAA,GAAG,EAAE,KAAxB;AAA+BgR,IAAAA,UAAU,EAAE;AAA3C,GAAvB,CAAhB;AACA,MAAK,KAAK9iD,KAAL,KAAesD,SAApB,EAAgC,KAAK+tC,QAAL,CAAcqP,YAAd,GAA6B,IAA7B;AAEhC,QAAM33C,QAAQ,GAAGmoC,QAAQ,CAAC+a,YAAT,CAAuB,UAAvB,CAAjB;AACA,QAAM1E,MAAM,GAAG,IAAIwB,YAAJ,CAAkBhgD,QAAQ,CAAC4nC,KAAT,GAAiB,CAAnC,CAAf;AAEAO,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,OAAvB,EAAgC,IAAI25C,eAAJ,CAAqBY,MAArB,EAA6B,CAA7B,CAAhC;AAEA,OAAKrtC,GAAL,CAAU,IAAIq2C,IAAJ,CAAUrf,QAAV,EAAoB,KAAKG,QAAzB,CAAV;AAEA,OAAK3Q,MAAL;AAEA;;AAED+lH,qBAAqB,CAACplJ,SAAtB,GAAkCY,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAlC;AACAolJ,qBAAqB,CAACplJ,SAAtB,CAAgCoC,WAAhC,GAA8CgjJ,qBAA9C;;AAEAA,qBAAqB,CAACplJ,SAAtB,CAAgCw6B,OAAhC,GAA0C,YAAY;AAErD,OAAKiR,QAAL,CAAe,CAAf,EAAmBoE,QAAnB,CAA4BrV,OAA5B;AACA,OAAKiR,QAAL,CAAe,CAAf,EAAmBuE,QAAnB,CAA4BxV,OAA5B;AAEA,CALD;;AAOA4qH,qBAAqB,CAACplJ,SAAtB,CAAgCq/B,MAAhC,GAAyC,YAAY;AAEpD,QAAMyzB,IAAI,GAAG,KAAKrnB,QAAL,CAAe,CAAf,CAAb;;AAEA,MAAK,KAAK9sC,KAAL,KAAesD,SAApB,EAAgC;AAE/B,SAAK+tC,QAAL,CAAcrxC,KAAd,CAAoB+wB,GAApB,CAAyB,KAAK/wB,KAA9B;AAEA,GAJD,MAIO;AAEN,UAAMunD,MAAM,GAAG4M,IAAI,CAACjjB,QAAL,CAAc+a,YAAd,CAA4B,OAA5B,CAAf;;AAEAs6F,IAAAA,OAAO,CAAC50H,IAAR,CAAc,KAAKk4D,KAAL,CAAW7pF,KAAzB;;AACAwmJ,IAAAA,OAAO,CAAC70H,IAAR,CAAc,KAAKk4D,KAAL,CAAW7oB,WAAzB;;AAEA,SAAM,IAAIz+D,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG4kD,MAAM,CAAC5W,KAA5B,EAAmCpuC,CAAC,GAAGI,CAAvC,EAA0CJ,CAAC,EAA3C,EAAiD;AAEhD,YAAMvC,KAAK,GAAKuC,CAAC,GAAKI,CAAC,GAAG,CAAZ,GAAoB4jJ,OAApB,GAA8BC,OAA5C;AAEAj/F,MAAAA,MAAM,CAACM,MAAP,CAAetlD,CAAf,EAAkBvC,KAAK,CAACM,CAAxB,EAA2BN,KAAK,CAACS,CAAjC,EAAoCT,KAAK,CAACU,CAA1C;AAEA;;AAED6mD,IAAAA,MAAM,CAAC+E,WAAP,GAAqB,IAArB;AAEA;;AAED6H,EAAAA,IAAI,CAACrsB,MAAL,CAAaw+G,SAAS,CAAC3gH,qBAAV,CAAiC,KAAKkkD,KAAL,CAAWzlD,WAA5C,EAA0DvR,MAA1D,EAAb;AAEA,CA7BD;AA+BA;;;;;AAIA,SAAS6zH,UAAT,CAAqBvyG,IAArB,EAA2BskF,SAA3B,EAAsCv4E,MAAtC,EAA8CC,MAA9C,EAAuD;AAEtDhM,EAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;AACAskF,EAAAA,SAAS,GAAGA,SAAS,IAAI,EAAzB;AACAv4E,EAAAA,MAAM,GAAG,IAAIt6C,KAAJ,CAAWs6C,MAAM,KAAK58C,SAAX,GAAuB48C,MAAvB,GAAgC,QAA3C,CAAT;AACAC,EAAAA,MAAM,GAAG,IAAIv6C,KAAJ,CAAWu6C,MAAM,KAAK78C,SAAX,GAAuB68C,MAAvB,GAAgC,QAA3C,CAAT;AAEA,QAAM5rB,MAAM,GAAGkkG,SAAS,GAAG,CAA3B;AACA,QAAM9pH,IAAI,GAAGwlC,IAAI,GAAGskF,SAApB;AACA,QAAMrkF,QAAQ,GAAGD,IAAI,GAAG,CAAxB;AAEA,QAAMgV,QAAQ,GAAG,EAAjB;AAAA,QAAqB5B,MAAM,GAAG,EAA9B;;AAEA,OAAM,IAAIhlD,CAAC,GAAG,CAAR,EAAW6zC,CAAC,GAAG,CAAf,EAAkBvuC,CAAC,GAAG,CAAEusC,QAA9B,EAAwC7xC,CAAC,IAAIk2H,SAA7C,EAAwDl2H,CAAC,IAAKsF,CAAC,IAAI8G,IAAnE,EAA0E;AAEzEw6C,IAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAE0oC,QAAjB,EAA2B,CAA3B,EAA8BvsC,CAA9B,EAAiCusC,QAAjC,EAA2C,CAA3C,EAA8CvsC,CAA9C;AACAshD,IAAAA,QAAQ,CAACz9C,IAAT,CAAe7D,CAAf,EAAkB,CAAlB,EAAqB,CAAEusC,QAAvB,EAAiCvsC,CAAjC,EAAoC,CAApC,EAAuCusC,QAAvC;AAEA,UAAMp0C,KAAK,GAAGuC,CAAC,KAAKgyB,MAAN,GAAe2rB,MAAf,GAAwBC,MAAtC;AAEAngD,IAAAA,KAAK,CAACqD,OAAN,CAAekkD,MAAf,EAAuBnR,CAAvB;AAA4BA,IAAAA,CAAC,IAAI,CAAL;AAC5Bp2C,IAAAA,KAAK,CAACqD,OAAN,CAAekkD,MAAf,EAAuBnR,CAAvB;AAA4BA,IAAAA,CAAC,IAAI,CAAL;AAC5Bp2C,IAAAA,KAAK,CAACqD,OAAN,CAAekkD,MAAf,EAAuBnR,CAAvB;AAA4BA,IAAAA,CAAC,IAAI,CAAL;AAC5Bp2C,IAAAA,KAAK,CAACqD,OAAN,CAAekkD,MAAf,EAAuBnR,CAAvB;AAA4BA,IAAAA,CAAC,IAAI,CAAL;AAE5B;;AAED,QAAMlF,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AACAva,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAAnC;AACAjY,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,OAAvB,EAAgC,IAAI87C,sBAAJ,CAA4BvB,MAA5B,EAAoC,CAApC,CAAhC;AAEA,QAAMlW,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAE9lC,IAAAA,YAAY,EAAE,IAAhB;AAAsBoC,IAAAA,UAAU,EAAE;AAAlC,GAAvB,CAAjB;AAEAkwD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmCG,QAAnC;AAEA,OAAK3kC,IAAL,GAAY,YAAZ;AAEA;;AAEDg6I,UAAU,CAACrlJ,SAAX,GAAuBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAAf,EAAwD;AAE9EoC,EAAAA,WAAW,EAAEijJ,UAFiE;AAI9E/0H,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzByyF,IAAAA,YAAY,CAAC3xG,SAAb,CAAuBswB,IAAvB,CAA4B/vB,IAA5B,CAAkC,IAAlC,EAAwC2e,MAAxC;AAEA,SAAK2wB,QAAL,CAAcvf,IAAd,CAAoBpR,MAAM,CAAC2wB,QAA3B;AACA,SAAKG,QAAL,CAAc1f,IAAd,CAAoBpR,MAAM,CAAC8wB,QAA3B;AAEA,WAAO,IAAP;AAEA,GAb6E;AAe9E3f,EAAAA,KAAK,EAAE,YAAY;AAElB,WAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA;AAnB6E,CAAxD,CAAvB;AAuBA;;;;;;AAMA,SAASg1H,eAAT,CAA0BrhH,MAA1B,EAAkCshH,OAAlC,EAA2CC,OAA3C,EAAoDpuB,SAApD,EAA+Dv4E,MAA/D,EAAuEC,MAAvE,EAAgF;AAE/E7a,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACAshH,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AACAC,EAAAA,OAAO,GAAGA,OAAO,IAAI,CAArB;AACApuB,EAAAA,SAAS,GAAGA,SAAS,IAAI,EAAzB;AACAv4E,EAAAA,MAAM,GAAG,IAAIt6C,KAAJ,CAAWs6C,MAAM,KAAK58C,SAAX,GAAuB48C,MAAvB,GAAgC,QAA3C,CAAT;AACAC,EAAAA,MAAM,GAAG,IAAIv6C,KAAJ,CAAWu6C,MAAM,KAAK78C,SAAX,GAAuB68C,MAAvB,GAAgC,QAA3C,CAAT;AAEA,QAAMgJ,QAAQ,GAAG,EAAjB;AACA,QAAM5B,MAAM,GAAG,EAAf,CAV+E,CAY/E;;AAEA,OAAM,IAAIhlD,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIqkJ,OAAtB,EAA+BrkJ,CAAC,EAAhC,EAAsC;AAErC,UAAMxB,CAAC,GAAKwB,CAAC,GAAGqkJ,OAAN,IAAoBrmJ,IAAI,CAACutB,EAAL,GAAU,CAA9B,CAAV;AAEA,UAAMlkB,CAAC,GAAGrJ,IAAI,CAAC+vB,GAAL,CAAUvvB,CAAV,IAAgBukC,MAA1B;AACA,UAAMrJ,CAAC,GAAG17B,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,IAAgBukC,MAA1B;AAEA6jB,IAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACAy9C,IAAAA,QAAQ,CAACz9C,IAAT,CAAe9B,CAAf,EAAkB,CAAlB,EAAqBqyB,CAArB;AAEA,UAAMj8B,KAAK,GAAKuC,CAAC,GAAG,CAAN,GAAY29C,MAAZ,GAAqBC,MAAnC;AAEAoH,IAAAA,MAAM,CAAC77C,IAAP,CAAa1L,KAAK,CAACM,CAAnB,EAAsBN,KAAK,CAACS,CAA5B,EAA+BT,KAAK,CAACU,CAArC;AACA6mD,IAAAA,MAAM,CAAC77C,IAAP,CAAa1L,KAAK,CAACM,CAAnB,EAAsBN,KAAK,CAACS,CAA5B,EAA+BT,KAAK,CAACU,CAArC;AAEA,GA7B8E,CA+B/E;;;AAEA,OAAM,IAAI6B,CAAC,GAAG,CAAd,EAAiBA,CAAC,IAAIskJ,OAAtB,EAA+BtkJ,CAAC,EAAhC,EAAsC;AAErC,UAAMvC,KAAK,GAAKuC,CAAC,GAAG,CAAN,GAAY29C,MAAZ,GAAqBC,MAAnC;AAEA,UAAM7/C,CAAC,GAAGglC,MAAM,GAAKA,MAAM,GAAGuhH,OAAT,GAAmBtkJ,CAAxC;;AAEA,SAAM,IAAI6zC,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGqiF,SAArB,EAAgCriF,CAAC,EAAjC,EAAuC;AAEtC;AAEA,UAAIr1C,CAAC,GAAKq1C,CAAC,GAAGqiF,SAAN,IAAsBl4H,IAAI,CAACutB,EAAL,GAAU,CAAhC,CAAR;AAEA,UAAIlkB,CAAC,GAAGrJ,IAAI,CAAC+vB,GAAL,CAAUvvB,CAAV,IAAgBT,CAAxB;AACA,UAAI27B,CAAC,GAAG17B,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,IAAgBT,CAAxB;AAEA6oD,MAAAA,QAAQ,CAACz9C,IAAT,CAAe9B,CAAf,EAAkB,CAAlB,EAAqBqyB,CAArB;AACAsrB,MAAAA,MAAM,CAAC77C,IAAP,CAAa1L,KAAK,CAACM,CAAnB,EAAsBN,KAAK,CAACS,CAA5B,EAA+BT,KAAK,CAACU,CAArC,EAVsC,CAYtC;;AAEAK,MAAAA,CAAC,GAAK,CAAEq1C,CAAC,GAAG,CAAN,IAAYqiF,SAAd,IAA8Bl4H,IAAI,CAACutB,EAAL,GAAU,CAAxC,CAAJ;AAEAlkB,MAAAA,CAAC,GAAGrJ,IAAI,CAAC+vB,GAAL,CAAUvvB,CAAV,IAAgBT,CAApB;AACA27B,MAAAA,CAAC,GAAG17B,IAAI,CAAC8vB,GAAL,CAAUtvB,CAAV,IAAgBT,CAApB;AAEA6oD,MAAAA,QAAQ,CAACz9C,IAAT,CAAe9B,CAAf,EAAkB,CAAlB,EAAqBqyB,CAArB;AACAsrB,MAAAA,MAAM,CAAC77C,IAAP,CAAa1L,KAAK,CAACM,CAAnB,EAAsBN,KAAK,CAACS,CAA5B,EAA+BT,KAAK,CAACU,CAArC;AAEA;AAED;;AAED,QAAMwwC,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AACAva,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAAnC;AACAjY,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,OAAvB,EAAgC,IAAI87C,sBAAJ,CAA4BvB,MAA5B,EAAoC,CAApC,CAAhC;AAEA,QAAMlW,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAE9lC,IAAAA,YAAY,EAAE,IAAhB;AAAsBoC,IAAAA,UAAU,EAAE;AAAlC,GAAvB,CAAjB;AAEAkwD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmCG,QAAnC;AAEA,OAAK3kC,IAAL,GAAY,iBAAZ;AAEA;;AAEDi6I,eAAe,CAACtlJ,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAA5B;AACAslJ,eAAe,CAACtlJ,SAAhB,CAA0BoC,WAA1B,GAAwCkjJ,eAAxC;AAEA;;;;;;AAMA,MAAMG,KAAK,GAAG,IAAIhkH,OAAJ,EAAd;;AACA,MAAMikH,KAAK,GAAG,IAAIjkH,OAAJ,EAAd;;AACA,MAAMkkH,KAAK,GAAG,IAAIlkH,OAAJ,EAAd;;AAEA,SAASmkH,sBAAT,CAAiCp9D,KAAjC,EAAwC11C,IAAxC,EAA8Cn0C,KAA9C,EAAsD;AAErD6sC,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAKioF,KAAL,GAAaA,KAAb;AACA,OAAKA,KAAL,CAAWj6C,iBAAX;AAEA,OAAKtY,MAAL,GAAcuyD,KAAK,CAACzlD,WAApB;AACA,OAAKzJ,gBAAL,GAAwB,KAAxB;AAEA,OAAK36B,KAAL,GAAaA,KAAb;AAEA,MAAKm0C,IAAI,KAAK7wC,SAAd,EAA0B6wC,IAAI,GAAG,CAAP;AAE1B,MAAIjD,QAAQ,GAAG,IAAIua,cAAJ,EAAf;AACAva,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4B,CAC9D,CAAE3U,IAD4D,EACtDA,IADsD,EAChD,CADgD,EAE9DA,IAF8D,EAExDA,IAFwD,EAElD,CAFkD,EAG9DA,IAH8D,EAGxD,CAAEA,IAHsD,EAGhD,CAHgD,EAI9D,CAAEA,IAJ4D,EAItD,CAAEA,IAJoD,EAI9C,CAJ8C,EAK9D,CAAEA,IAL4D,EAKtDA,IALsD,EAKhD,CALgD,CAA5B,EAMhC,CANgC,CAAnC;AAQA,QAAM9C,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAE10C,IAAAA,GAAG,EAAE,KAAP;AAAcgR,IAAAA,UAAU,EAAE;AAA1B,GAAvB,CAAjB;AAEA,OAAKokG,UAAL,GAAkB,IAAI90C,IAAJ,CAAUlhE,QAAV,EAAoBG,QAApB,CAAlB;AACA,OAAKn3B,GAAL,CAAU,KAAKgtI,UAAf;AAEAh2G,EAAAA,QAAQ,GAAG,IAAIua,cAAJ,EAAX;AACAva,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4B,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAA5B,EAAkD,CAAlD,CAAnC;AAEA,OAAKq+F,UAAL,GAAkB,IAAI/0C,IAAJ,CAAUlhE,QAAV,EAAoBG,QAApB,CAAlB;AACA,OAAKn3B,GAAL,CAAU,KAAKitI,UAAf;AAEA,OAAKzmH,MAAL;AAEA;;AAEDumH,sBAAsB,CAAC5lJ,SAAvB,GAAmCY,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAnC;AACA4lJ,sBAAsB,CAAC5lJ,SAAvB,CAAiCoC,WAAjC,GAA+CwjJ,sBAA/C;;AAEAA,sBAAsB,CAAC5lJ,SAAvB,CAAiCw6B,OAAjC,GAA2C,YAAY;AAEtD,OAAKqrH,UAAL,CAAgBh2G,QAAhB,CAAyBrV,OAAzB;AACA,OAAKqrH,UAAL,CAAgB71G,QAAhB,CAAyBxV,OAAzB;AACA,OAAKsrH,UAAL,CAAgBj2G,QAAhB,CAAyBrV,OAAzB;AACA,OAAKsrH,UAAL,CAAgB91G,QAAhB,CAAyBxV,OAAzB;AAEA,CAPD;;AASAorH,sBAAsB,CAAC5lJ,SAAvB,CAAiCq/B,MAAjC,GAA0C,YAAY;AAErDomH,EAAAA,KAAK,CAACnhH,qBAAN,CAA6B,KAAKkkD,KAAL,CAAWzlD,WAAxC;;AACA2iH,EAAAA,KAAK,CAACphH,qBAAN,CAA6B,KAAKkkD,KAAL,CAAWnoF,MAAX,CAAkB0iC,WAA/C;;AACA4iH,EAAAA,KAAK,CAACh1H,UAAN,CAAkB+0H,KAAlB,EAAyBD,KAAzB;;AAEA,OAAKI,UAAL,CAAgBp/G,MAAhB,CAAwBi/G,KAAxB;;AAEA,MAAK,KAAK/mJ,KAAL,KAAesD,SAApB,EAAgC;AAE/B,SAAK4jJ,UAAL,CAAgB71G,QAAhB,CAAyBrxC,KAAzB,CAA+B+wB,GAA/B,CAAoC,KAAK/wB,KAAzC;AACA,SAAKmnJ,UAAL,CAAgB91G,QAAhB,CAAyBrxC,KAAzB,CAA+B+wB,GAA/B,CAAoC,KAAK/wB,KAAzC;AAEA,GALD,MAKO;AAEN,SAAKknJ,UAAL,CAAgB71G,QAAhB,CAAyBrxC,KAAzB,CAA+B2xB,IAA/B,CAAqC,KAAKk4D,KAAL,CAAW7pF,KAAhD;AACA,SAAKmnJ,UAAL,CAAgB91G,QAAhB,CAAyBrxC,KAAzB,CAA+B2xB,IAA/B,CAAqC,KAAKk4D,KAAL,CAAW7pF,KAAhD;AAEA;;AAED,OAAKmnJ,UAAL,CAAgBr/G,MAAhB,CAAwBi/G,KAAxB;AACA,OAAKI,UAAL,CAAgBzuH,KAAhB,CAAsBuD,CAAtB,GAA0B+qH,KAAK,CAAC9lJ,MAAN,EAA1B;AAEA,CAvBD;AAyBA;;;;;;;;;;;AAUA,MAAMkmJ,SAAS,GAAG,IAAItkH,OAAJ,EAAlB;;AACA,MAAMukH,OAAO,GAAG,IAAIpuF,MAAJ,EAAhB;;AAEA,SAASquF,YAAT,CAAuBvjH,MAAvB,EAAgC;AAE/B,QAAMmN,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AACA,QAAMpa,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAE,QAAT;AAAmB0gD,IAAAA,YAAY,EAAE,IAAjC;AAAuCoC,IAAAA,UAAU,EAAE;AAAnD,GAAvB,CAAjB;AAEA,QAAMqG,QAAQ,GAAG,EAAjB;AACA,QAAM5B,MAAM,GAAG,EAAf;AAEA,QAAMggG,QAAQ,GAAG,EAAjB,CAR+B,CAU/B;;AAEA,QAAMC,YAAY,GAAG,IAAI5hJ,KAAJ,CAAW,QAAX,CAArB;AACA,QAAM6hJ,SAAS,GAAG,IAAI7hJ,KAAJ,CAAW,QAAX,CAAlB;AACA,QAAM8hJ,OAAO,GAAG,IAAI9hJ,KAAJ,CAAW,QAAX,CAAhB;AACA,QAAM+hJ,WAAW,GAAG,IAAI/hJ,KAAJ,CAAW,QAAX,CAApB;AACA,QAAMgiJ,UAAU,GAAG,IAAIhiJ,KAAJ,CAAW,QAAX,CAAnB,CAhB+B,CAkB/B;;AAEAiiJ,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP,CAvB+B,CAyB/B;;AAEAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP,CA9B+B,CAgC/B;;AAEAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP;AACAK,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcL,YAAd,CAAP,CArC+B,CAuC/B;;AAEAK,EAAAA,OAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP;AACAI,EAAAA,OAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP;AACAI,EAAAA,OAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP;AACAI,EAAAA,OAAO,CAAE,GAAF,EAAO,IAAP,EAAaJ,SAAb,CAAP,CA5C+B,CA8C/B;;AAEAI,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcH,OAAd,CAAP;AACAG,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcH,OAAd,CAAP;AACAG,EAAAA,OAAO,CAAE,IAAF,EAAQ,IAAR,EAAcH,OAAd,CAAP,CAlD+B,CAoD/B;;AAEAG,EAAAA,OAAO,CAAE,GAAF,EAAO,GAAP,EAAYF,WAAZ,CAAP;AACAE,EAAAA,OAAO,CAAE,GAAF,EAAO,GAAP,EAAYD,UAAZ,CAAP,CAvD+B,CAyD/B;;AAEAC,EAAAA,OAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;AACAC,EAAAA,OAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;AAEAC,EAAAA,OAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;AACAC,EAAAA,OAAO,CAAE,KAAF,EAAS,KAAT,EAAgBD,UAAhB,CAAP;;AAEA,WAASC,OAAT,CAAkBlnJ,CAAlB,EAAqBD,CAArB,EAAwBV,KAAxB,EAAgC;AAE/B8nJ,IAAAA,QAAQ,CAAEnnJ,CAAF,EAAKX,KAAL,CAAR;AACA8nJ,IAAAA,QAAQ,CAAEpnJ,CAAF,EAAKV,KAAL,CAAR;AAEA;;AAED,WAAS8nJ,QAAT,CAAmBv4G,EAAnB,EAAuBvvC,KAAvB,EAA+B;AAE9BmpD,IAAAA,QAAQ,CAACz9C,IAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AACA67C,IAAAA,MAAM,CAAC77C,IAAP,CAAa1L,KAAK,CAACM,CAAnB,EAAsBN,KAAK,CAACS,CAA5B,EAA+BT,KAAK,CAACU,CAArC;;AAEA,QAAK6mJ,QAAQ,CAAEh4G,EAAF,CAAR,KAAmBjsC,SAAxB,EAAoC;AAEnCikJ,MAAAA,QAAQ,CAAEh4G,EAAF,CAAR,GAAiB,EAAjB;AAEA;;AAEDg4G,IAAAA,QAAQ,CAAEh4G,EAAF,CAAR,CAAe7jC,IAAf,CAAuBy9C,QAAQ,CAACjoD,MAAT,GAAkB,CAApB,GAA0B,CAA/C;AAEA;;AAEDgwC,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAAnC;AACAjY,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,OAAvB,EAAgC,IAAI87C,sBAAJ,CAA4BvB,MAA5B,EAAoC,CAApC,CAAhC;AAEAyrD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmCG,QAAnC;AAEA,OAAK3kC,IAAL,GAAY,cAAZ;AAEA,OAAKq3B,MAAL,GAAcA,MAAd;AACA,MAAK,KAAKA,MAAL,CAAY01B,sBAAjB,EAA0C,KAAK11B,MAAL,CAAY01B,sBAAZ;AAE1C,OAAKniC,MAAL,GAAcyM,MAAM,CAACK,WAArB;AACA,OAAKzJ,gBAAL,GAAwB,KAAxB;AAEA,OAAK4sH,QAAL,GAAgBA,QAAhB;AAEA,OAAK7mH,MAAL;AAEA;;AAED4mH,YAAY,CAACjmJ,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAAzB;AACAimJ,YAAY,CAACjmJ,SAAb,CAAuBoC,WAAvB,GAAqC6jJ,YAArC;;AAEAA,YAAY,CAACjmJ,SAAb,CAAuBq/B,MAAvB,GAAgC,YAAY;AAE3C,QAAMwQ,QAAQ,GAAG,KAAKA,QAAtB;AACA,QAAMq2G,QAAQ,GAAG,KAAKA,QAAtB;AAEA,QAAMloI,CAAC,GAAG,CAAV;AAAA,QAAaze,CAAC,GAAG,CAAjB,CAL2C,CAO3C;AACA;;AAEAymJ,EAAAA,OAAO,CAACljH,uBAAR,CAAgCxS,IAAhC,CAAsC,KAAKoS,MAAL,CAAYI,uBAAlD,EAV2C,CAY3C;;;AAEA4jH,EAAAA,QAAQ,CAAE,GAAF,EAAOR,QAAP,EAAiBr2G,QAAjB,EAA2Bm2G,OAA3B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAAE,CAA5C,CAAR;AACAU,EAAAA,QAAQ,CAAE,GAAF,EAAOR,QAAP,EAAiBr2G,QAAjB,EAA2Bm2G,OAA3B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,CAAR,CAf2C,CAiB3C;;AAEAU,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqC,CAAEhoI,CAAvC,EAA0C,CAAEze,CAA5C,EAA+C,CAAE,CAAjD,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqChoI,CAArC,EAAwC,CAAEze,CAA1C,EAA6C,CAAE,CAA/C,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqC,CAAEhoI,CAAvC,EAA0Cze,CAA1C,EAA6C,CAAE,CAA/C,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqChoI,CAArC,EAAwCze,CAAxC,EAA2C,CAAE,CAA7C,CAAR,CAtB2C,CAwB3C;;AAEAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqC,CAAEhoI,CAAvC,EAA0C,CAAEze,CAA5C,EAA+C,CAA/C,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqChoI,CAArC,EAAwC,CAAEze,CAA1C,EAA6C,CAA7C,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqC,CAAEhoI,CAAvC,EAA0Cze,CAA1C,EAA6C,CAA7C,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqChoI,CAArC,EAAwCze,CAAxC,EAA2C,CAA3C,CAAR,CA7B2C,CA+B3C;;AAEAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqChoI,CAAC,GAAG,GAAzC,EAA8Cze,CAAC,GAAG,GAAlD,EAAuD,CAAE,CAAzD,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqC,CAAEhoI,CAAF,GAAM,GAA3C,EAAgDze,CAAC,GAAG,GAApD,EAAyD,CAAE,CAA3D,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,IAAF,EAAQR,QAAR,EAAkBr2G,QAAlB,EAA4Bm2G,OAA5B,EAAqC,CAArC,EAAwCzmJ,CAAC,GAAG,CAA5C,EAA+C,CAAE,CAAjD,CAAR,CAnC2C,CAqC3C;;AAEAmnJ,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsC,CAAEhoI,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,CAAR;AACA0oI,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsChoI,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,CAAR;AACA0oI,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsC,CAAtC,EAAyC,CAAEzmJ,CAA3C,EAA8C,CAA9C,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsC,CAAtC,EAAyCzmJ,CAAzC,EAA4C,CAA5C,CAAR;AAEAmnJ,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsC,CAAEhoI,CAAxC,EAA2C,CAA3C,EAA8C,CAAE,CAAhD,CAAR;AACA0oI,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsChoI,CAAtC,EAAyC,CAAzC,EAA4C,CAAE,CAA9C,CAAR;AACA0oI,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsC,CAAtC,EAAyC,CAAEzmJ,CAA3C,EAA8C,CAAE,CAAhD,CAAR;AACAmnJ,EAAAA,QAAQ,CAAE,KAAF,EAASR,QAAT,EAAmBr2G,QAAnB,EAA6Bm2G,OAA7B,EAAsC,CAAtC,EAAyCzmJ,CAAzC,EAA4C,CAAE,CAA9C,CAAR;AAEAswC,EAAAA,QAAQ,CAAC+a,YAAT,CAAuB,UAAvB,EAAoCK,WAApC,GAAkD,IAAlD;AAEA,CAnDD;;AAqDA,SAASy7F,QAAT,CAAmBrzG,KAAnB,EAA0B6yG,QAA1B,EAAoCr2G,QAApC,EAA8CnN,MAA9C,EAAsDn6B,CAAtD,EAAyDE,CAAzD,EAA4DmyB,CAA5D,EAAgE;AAE/DmrH,EAAAA,SAAS,CAACr2H,GAAV,CAAennB,CAAf,EAAkBE,CAAlB,EAAqBmyB,CAArB,EAAyBiI,SAAzB,CAAoCH,MAApC;;AAEA,QAAM+P,MAAM,GAAGyzG,QAAQ,CAAE7yG,KAAF,CAAvB;;AAEA,MAAKZ,MAAM,KAAKxwC,SAAhB,EAA4B;AAE3B,UAAMyF,QAAQ,GAAGmoC,QAAQ,CAAC+a,YAAT,CAAuB,UAAvB,CAAjB;;AAEA,SAAM,IAAI1pD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmxC,MAAM,CAAC5yC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjDwG,MAAAA,QAAQ,CAAC8+C,MAAT,CAAiB/T,MAAM,CAAEvxC,CAAF,CAAvB,EAA8B6kJ,SAAS,CAACx9I,CAAxC,EAA2Cw9I,SAAS,CAACt9I,CAArD,EAAwDs9I,SAAS,CAACnrH,CAAlE;AAEA;AAED;AAED;AAED;;;;;;AAKA,MAAM+rH,MAAM,GAAG,IAAIx1G,IAAJ,EAAf;;AAEA,SAASy1G,SAAT,CAAoBjhJ,MAApB,EAA4BhH,KAA5B,EAAoC;AAEnC,OAAKgH,MAAL,GAAcA,MAAd;AAEA,MAAKhH,KAAK,KAAKsD,SAAf,EAA2BtD,KAAK,GAAG,QAAR;AAE3B,QAAM8uD,OAAO,GAAG,IAAIrG,WAAJ,CAAiB,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,CAA9D,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,CAAvE,CAAjB,CAAhB;AACA,QAAMgE,SAAS,GAAG,IAAI1D,YAAJ,CAAkB,IAAI,CAAtB,CAAlB;AAEA,QAAM7X,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AACAva,EAAAA,QAAQ,CAAC8a,QAAT,CAAmB,IAAIrF,eAAJ,CAAqBmI,OAArB,EAA8B,CAA9B,CAAnB;AACA5d,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI25C,eAAJ,CAAqB8F,SAArB,EAAgC,CAAhC,CAAnC;AAEAumD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmC,IAAIs1C,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAEA,KAAT;AAAgB8iD,IAAAA,UAAU,EAAE;AAA5B,GAAvB,CAAnC;AAEA,OAAKp2C,IAAL,GAAY,WAAZ;AAEA,OAAKiuB,gBAAL,GAAwB,KAAxB;AAEA,OAAK+F,MAAL;AAEA;;AAEDunH,SAAS,CAAC5mJ,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAAtB;AACA4mJ,SAAS,CAAC5mJ,SAAV,CAAoBoC,WAApB,GAAkCwkJ,SAAlC;;AAEAA,SAAS,CAAC5mJ,SAAV,CAAoBq/B,MAApB,GAA6B,UAAW15B,MAAX,EAAoB;AAEhD,MAAKA,MAAM,KAAK1D,SAAhB,EAA4B;AAE3B0tB,IAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AAEA;;AAED,MAAK,KAAKjqB,MAAL,KAAgB1D,SAArB,EAAiC;AAEhC0kJ,IAAAA,MAAM,CAAC3zG,aAAP,CAAsB,KAAKrtC,MAA3B;AAEA;;AAED,MAAKghJ,MAAM,CAACzzG,OAAP,EAAL,EAAwB;AAExB,QAAMlvC,GAAG,GAAG2iJ,MAAM,CAAC3iJ,GAAnB;AACA,QAAMC,GAAG,GAAG0iJ,MAAM,CAAC1iJ,GAAnB;AAEA;;;;;;;;;;;;;;;AAgBA,QAAMyD,QAAQ,GAAG,KAAKmoC,QAAL,CAAcwa,UAAd,CAAyB3iD,QAA1C;AACA,QAAM2kB,KAAK,GAAG3kB,QAAQ,CAAC2kB,KAAvB;AAEAA,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAACsE,CAAjB;AAAoB8jB,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAACwE,CAAjB;AAAoB4jB,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAAC22B,CAAjB;AACxCvO,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAaroB,GAAG,CAACuE,CAAjB;AAAoB8jB,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAACwE,CAAjB;AAAoB4jB,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAAC22B,CAAjB;AACxCvO,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAaroB,GAAG,CAACuE,CAAjB;AAAoB8jB,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAaroB,GAAG,CAACyE,CAAjB;AAAoB4jB,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAAC22B,CAAjB;AACxCvO,EAAAA,KAAK,CAAE,CAAF,CAAL,GAAapoB,GAAG,CAACsE,CAAjB;AAAoB8jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAACyE,CAAlB;AAAqB4jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcpoB,GAAG,CAAC22B,CAAlB;AACzCvO,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcpoB,GAAG,CAACsE,CAAlB;AAAqB8jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcpoB,GAAG,CAACwE,CAAlB;AAAqB4jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAAC42B,CAAlB;AAC1CvO,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAACuE,CAAlB;AAAqB8jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcpoB,GAAG,CAACwE,CAAlB;AAAqB4jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAAC42B,CAAlB;AAC1CvO,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAACuE,CAAlB;AAAqB8jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAACyE,CAAlB;AAAqB4jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAAC42B,CAAlB;AAC1CvO,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcpoB,GAAG,CAACsE,CAAlB;AAAqB8jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAACyE,CAAlB;AAAqB4jB,EAAAA,KAAK,CAAE,EAAF,CAAL,GAAcroB,GAAG,CAAC42B,CAAlB;AAE1ClzB,EAAAA,QAAQ,CAACujD,WAAT,GAAuB,IAAvB;AAEA,OAAKpb,QAAL,CAAcsb,qBAAd;AAGA,CApDD;;AAsDAy7F,SAAS,CAAC5mJ,SAAV,CAAoBgzC,aAApB,GAAoC,UAAWrtC,MAAX,EAAoB;AAEvD,OAAKA,MAAL,GAAcA,MAAd;AACA,OAAK05B,MAAL;AAEA,SAAO,IAAP;AAEA,CAPD;;AASAunH,SAAS,CAAC5mJ,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9CyyF,EAAAA,YAAY,CAAC3xG,SAAb,CAAuBswB,IAAvB,CAA4B/vB,IAA5B,CAAkC,IAAlC,EAAwC2e,MAAxC;AAEA,OAAKvZ,MAAL,GAAcuZ,MAAM,CAACvZ,MAArB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAihJ,SAAS,CAAC5mJ,SAAV,CAAoBqwB,KAApB,GAA4B,YAAY;AAEvC,SAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,CAJD;AAMA;;;;;AAIA,SAASu2H,UAAT,CAAqB9rI,GAArB,EAA0Bpc,KAA1B,EAAkC;AAEjC,OAAK0M,IAAL,GAAY,YAAZ;AAEA,OAAK0P,GAAL,GAAWA,GAAX;AAEApc,EAAAA,KAAK,GAAGA,KAAK,IAAI,QAAjB;AAEA,QAAM8uD,OAAO,GAAG,IAAIrG,WAAJ,CAAiB,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,EAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAA5C,EAA+C,CAA/C,EAAkD,CAAlD,EAAqD,CAArD,EAAwD,CAAxD,EAA2D,CAA3D,EAA8D,CAA9D,EAAiE,CAAjE,EAAoE,CAApE,EAAuE,CAAvE,CAAjB,CAAhB;AAEA,QAAMgE,SAAS,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAE,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAE,CAAxB,EAA2B,CAAE,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAE,CAAxC,EAA2C,CAA3C,EAA8C,CAA9C,EAAiD,CAAjD,EAAoD,CAAE,CAAtD,EAAyD,CAAE,CAA3D,EAA8D,CAA9D,EAAiE,CAAE,CAAnE,EAAsE,CAAE,CAAxE,EAA2E,CAAE,CAA7E,EAAgF,CAAE,CAAlF,EAAqF,CAArF,EAAwF,CAAE,CAA1F,EAA6F,CAAE,CAA/F,CAAlB;AAEA,QAAMvb,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AAEAva,EAAAA,QAAQ,CAAC8a,QAAT,CAAmB,IAAIrF,eAAJ,CAAqBmI,OAArB,EAA8B,CAA9B,CAAnB;AAEA5d,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4B2D,SAA5B,EAAuC,CAAvC,CAAnC;AAEAumD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmC,IAAIs1C,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAEA,KAAT;AAAgB8iD,IAAAA,UAAU,EAAE;AAA5B,GAAvB,CAAnC;AAEA,OAAKp2C,IAAL,GAAY,YAAZ;AAEA,OAAKwkC,QAAL,CAAcsb,qBAAd;AAEA;;AAED07F,UAAU,CAAC7mJ,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAAvB;AACA6mJ,UAAU,CAAC7mJ,SAAX,CAAqBoC,WAArB,GAAmCykJ,UAAnC;;AAEAA,UAAU,CAAC7mJ,SAAX,CAAqBuuC,iBAArB,GAAyC,UAAWQ,KAAX,EAAmB;AAE3D,QAAMh0B,GAAG,GAAG,KAAKA,GAAjB;AAEA,MAAKA,GAAG,CAACm4B,OAAJ,EAAL,EAAqB;AAErBn4B,EAAAA,GAAG,CAACo4B,SAAJ,CAAe,KAAKzrC,QAApB;AAEAqT,EAAAA,GAAG,CAACq4B,OAAJ,CAAa,KAAK/b,KAAlB;AAEA,OAAKA,KAAL,CAAWvG,cAAX,CAA2B,GAA3B;AAEA0a,EAAAA,QAAQ,CAACxrC,SAAT,CAAmBuuC,iBAAnB,CAAqChuC,IAArC,CAA2C,IAA3C,EAAiDwuC,KAAjD;AAEA,CAdD;AAgBA;;;;;AAIA,SAAS+3G,WAAT,CAAsB3yG,KAAtB,EAA6BrB,IAA7B,EAAmClzC,GAAnC,EAAyC;AAExC,OAAKu0C,KAAL,GAAaA,KAAb;AAEA,OAAKrB,IAAL,GAAcA,IAAI,KAAK7wC,SAAX,GAAyB,CAAzB,GAA6B6wC,IAAzC;AAEA,QAAMn0C,KAAK,GAAKiB,GAAG,KAAKqC,SAAV,GAAwBrC,GAAxB,GAA8B,QAA5C;AAEA,QAAMwrD,SAAS,GAAG,CAAE,CAAF,EAAK,CAAE,CAAP,EAAU,CAAV,EAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,CAAE,CAA1B,EAA6B,CAAE,CAA/B,EAAkC,CAAlC,EAAqC,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,EAA8C,CAAE,CAAhD,EAAmD,CAAnD,EAAsD,CAAtD,EAAyD,CAAE,CAA3D,EAA8D,CAAE,CAAhE,EAAmE,CAAnE,EAAsE,CAAtE,EAAyE,CAAE,CAA3E,EAA8E,CAA9E,EAAiF,CAAjF,EAAoF,CAApF,EAAuF,CAAvF,EAA0F,CAA1F,EAA6F,CAA7F,EAAgG,CAAhG,EAAmG,CAAnG,EAAsG,CAAtG,EAAyG,CAAzG,CAAlB;AAEA,QAAMvb,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AACAva,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4B2D,SAA5B,EAAuC,CAAvC,CAAnC;AACAvb,EAAAA,QAAQ,CAACsb,qBAAT;AAEA4lD,EAAAA,IAAI,CAACxwG,IAAL,CAAW,IAAX,EAAiBsvC,QAAjB,EAA2B,IAAIs1C,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAEA,KAAT;AAAgB8iD,IAAAA,UAAU,EAAE;AAA5B,GAAvB,CAA3B;AAEA,OAAKp2C,IAAL,GAAY,aAAZ,CAhBwC,CAkBxC;;AAEA,QAAM07I,UAAU,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAE,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAE,CAAxB,EAA2B,CAAE,CAA7B,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyC,CAAzC,EAA4C,CAAE,CAA9C,EAAiD,CAAE,CAAnD,EAAsD,CAAtD,EAAyD,CAAzD,EAA4D,CAAE,CAA9D,EAAiE,CAAjE,CAAnB;AAEA,QAAMp5F,SAAS,GAAG,IAAIvD,cAAJ,EAAlB;AACAuD,EAAAA,SAAS,CAAChiD,YAAV,CAAwB,UAAxB,EAAoC,IAAI87C,sBAAJ,CAA4Bs/F,UAA5B,EAAwC,CAAxC,CAApC;AACAp5F,EAAAA,SAAS,CAACxC,qBAAV;AAEA,OAAKtyC,GAAL,CAAU,IAAIq2C,IAAJ,CAAUvB,SAAV,EAAqB,IAAI1I,iBAAJ,CAAuB;AAAEtmD,IAAAA,KAAK,EAAEA,KAAT;AAAgBiV,IAAAA,OAAO,EAAE,GAAzB;AAA8B+rC,IAAAA,WAAW,EAAE,IAA3C;AAAiDS,IAAAA,UAAU,EAAE,KAA7D;AAAoEqB,IAAAA,UAAU,EAAE;AAAhF,GAAvB,CAArB,CAAV;AAEA;;AAEDqlG,WAAW,CAAC9mJ,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAek3E,IAAI,CAAC/wG,SAApB,CAAxB;AACA8mJ,WAAW,CAAC9mJ,SAAZ,CAAsBoC,WAAtB,GAAoC0kJ,WAApC;;AAEAA,WAAW,CAAC9mJ,SAAZ,CAAsBuuC,iBAAtB,GAA0C,UAAWQ,KAAX,EAAmB;AAE5D,MAAI1X,KAAK,GAAG,CAAE,KAAK8c,KAAL,CAAWC,QAAzB;AAEA,MAAKl1C,IAAI,CAACwO,GAAL,CAAU2pB,KAAV,IAAoB,IAAzB,EAAgCA,KAAK,GAAG,IAAR,CAJ4B,CAId;;AAE9C,OAAKA,KAAL,CAAW3H,GAAX,CAAgB,MAAM,KAAKojB,IAA3B,EAAiC,MAAM,KAAKA,IAA5C,EAAkDzb,KAAlD;AAEA,OAAKoU,QAAL,CAAe,CAAf,EAAmBuE,QAAnB,CAA4ByP,IAA5B,GAAqCpoB,KAAK,GAAG,CAAV,GAAgB1W,QAAhB,GAA2BD,SAA9D,CAR4D,CAQa;;AAEzE,OAAK+lB,MAAL,CAAa,KAAK0N,KAAL,CAAWtQ,MAAxB;AAEA2H,EAAAA,QAAQ,CAACxrC,SAAT,CAAmBuuC,iBAAnB,CAAqChuC,IAArC,CAA2C,IAA3C,EAAiDwuC,KAAjD;AAEA,CAdD;AAgBA;;;;;;;;;;;;;;;;;AAgBA,MAAMi4G,KAAK,GAAG,IAAIvlH,OAAJ,EAAd;;AACA,IAAIwlH,aAAJ,EAAmBC,aAAnB;;AAEA,SAASC,WAAT,CAAsBxoH,GAAtB,EAA2BuX,MAA3B,EAAmCr2C,MAAnC,EAA2ClB,KAA3C,EAAkDyoJ,UAAlD,EAA8DC,SAA9D,EAA0E;AAEzE;AAEA77G,EAAAA,QAAQ,CAACjrC,IAAT,CAAe,IAAf;AAEA,OAAK8K,IAAL,GAAY,aAAZ;AAEA,MAAKszB,GAAG,KAAK18B,SAAb,EAAyB08B,GAAG,GAAG,IAAI8C,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAN;AACzB,MAAKyU,MAAM,KAAKj0C,SAAhB,EAA4Bi0C,MAAM,GAAG,IAAIzU,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAT;AAC5B,MAAK5hC,MAAM,KAAKoC,SAAhB,EAA4BpC,MAAM,GAAG,CAAT;AAC5B,MAAKlB,KAAK,KAAKsD,SAAf,EAA2BtD,KAAK,GAAG,QAAR;AAC3B,MAAKyoJ,UAAU,KAAKnlJ,SAApB,EAAgCmlJ,UAAU,GAAG,MAAMvnJ,MAAnB;AAChC,MAAKwnJ,SAAS,KAAKplJ,SAAnB,EAA+BolJ,SAAS,GAAG,MAAMD,UAAlB;;AAE/B,MAAKH,aAAa,KAAKhlJ,SAAvB,EAAmC;AAElCglJ,IAAAA,aAAa,GAAG,IAAI78F,cAAJ,EAAhB;;AACA68F,IAAAA,aAAa,CAACt7I,YAAd,CAA4B,UAA5B,EAAwC,IAAI87C,sBAAJ,CAA4B,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAA5B,EAAkD,CAAlD,CAAxC;;AAEAy/F,IAAAA,aAAa,GAAG,IAAIxhC,sBAAJ,CAA4B,CAA5B,EAA+B,GAA/B,EAAoC,CAApC,EAAuC,CAAvC,EAA0C,CAA1C,CAAhB;;AACAwhC,IAAAA,aAAa,CAAC1vH,SAAd,CAAyB,CAAzB,EAA4B,CAAE,GAA9B,EAAmC,CAAnC;AAEA;;AAED,OAAK9vB,QAAL,CAAc4oB,IAAd,CAAoB4lB,MAApB;AAEA,OAAKuD,IAAL,GAAY,IAAIs3D,IAAJ,CAAUk2C,aAAV,EAAyB,IAAI9hE,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAEA,KAAT;AAAgB8iD,IAAAA,UAAU,EAAE;AAA5B,GAAvB,CAAzB,CAAZ;AACA,OAAKhI,IAAL,CAAUngB,gBAAV,GAA6B,KAA7B;AACA,OAAKzgB,GAAL,CAAU,KAAK4gC,IAAf;AAEA,OAAK4qG,IAAL,GAAY,IAAIn1F,IAAJ,CAAUg4F,aAAV,EAAyB,IAAIjiG,iBAAJ,CAAuB;AAAEtmD,IAAAA,KAAK,EAAEA,KAAT;AAAgB8iD,IAAAA,UAAU,EAAE;AAA5B,GAAvB,CAAzB,CAAZ;AACA,OAAK4iG,IAAL,CAAU/qH,gBAAV,GAA6B,KAA7B;AACA,OAAKzgB,GAAL,CAAU,KAAKwrI,IAAf;AAEA,OAAKiD,YAAL,CAAmB3oH,GAAnB;AACA,OAAKrM,SAAL,CAAgBzyB,MAAhB,EAAwBunJ,UAAxB,EAAoCC,SAApC;AAEA;;AAEDF,WAAW,CAACnnJ,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAe2R,QAAQ,CAACxrC,SAAxB,CAAxB;AACAmnJ,WAAW,CAACnnJ,SAAZ,CAAsBoC,WAAtB,GAAoC+kJ,WAApC;;AAEAA,WAAW,CAACnnJ,SAAZ,CAAsBsnJ,YAAtB,GAAqC,UAAW3oH,GAAX,EAAiB;AAErD;AAEA,MAAKA,GAAG,CAACl2B,CAAJ,GAAQ,OAAb,EAAuB;AAEtB,SAAKy2B,UAAL,CAAgBxP,GAAhB,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B;AAEA,GAJD,MAIO,IAAKiP,GAAG,CAACl2B,CAAJ,GAAQ,CAAE,OAAf,EAAyB;AAE/B,SAAKy2B,UAAL,CAAgBxP,GAAhB,CAAqB,CAArB,EAAwB,CAAxB,EAA2B,CAA3B,EAA8B,CAA9B;AAEA,GAJM,MAIA;AAENs3H,IAAAA,KAAK,CAACt3H,GAAN,CAAWiP,GAAG,CAAC/D,CAAf,EAAkB,CAAlB,EAAqB,CAAE+D,GAAG,CAACp2B,CAA3B,EAA+BupB,SAA/B;;AAEA,UAAMtD,OAAO,GAAGtvB,IAAI,CAACg8B,IAAL,CAAWyD,GAAG,CAACl2B,CAAf,CAAhB;AAEA,SAAKy2B,UAAL,CAAgBS,gBAAhB,CAAkCqnH,KAAlC,EAAyCx4H,OAAzC;AAEA;AAED,CAtBD;;AAwBA24H,WAAW,CAACnnJ,SAAZ,CAAsBsyB,SAAtB,GAAkC,UAAWzyB,MAAX,EAAmBunJ,UAAnB,EAA+BC,SAA/B,EAA2C;AAE5E,MAAKD,UAAU,KAAKnlJ,SAApB,EAAgCmlJ,UAAU,GAAG,MAAMvnJ,MAAnB;AAChC,MAAKwnJ,SAAS,KAAKplJ,SAAnB,EAA+BolJ,SAAS,GAAG,MAAMD,UAAlB;AAE/B,OAAK3tG,IAAL,CAAUpiB,KAAV,CAAgB3H,GAAhB,CAAqB,CAArB,EAAwBxwB,IAAI,CAAC+E,GAAL,CAAU,MAAV,EAAkBpE,MAAM,GAAGunJ,UAA3B,CAAxB,EAAiE,CAAjE,EAL4E,CAKN;;AACtE,OAAK3tG,IAAL,CAAU1f,YAAV;AAEA,OAAKsqH,IAAL,CAAUhtH,KAAV,CAAgB3H,GAAhB,CAAqB23H,SAArB,EAAgCD,UAAhC,EAA4CC,SAA5C;AACA,OAAKhD,IAAL,CAAU38I,QAAV,CAAmBe,CAAnB,GAAuB5I,MAAvB;AACA,OAAKwkJ,IAAL,CAAUtqH,YAAV;AAEA,CAZD;;AAcAotH,WAAW,CAACnnJ,SAAZ,CAAsBunJ,QAAtB,GAAiC,UAAW5oJ,KAAX,EAAmB;AAEnD,OAAK86C,IAAL,CAAUzJ,QAAV,CAAmBrxC,KAAnB,CAAyB+wB,GAAzB,CAA8B/wB,KAA9B;AACA,OAAK0lJ,IAAL,CAAUr0G,QAAV,CAAmBrxC,KAAnB,CAAyB+wB,GAAzB,CAA8B/wB,KAA9B;AAEA,CALD;;AAOAwoJ,WAAW,CAACnnJ,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhDssB,EAAAA,QAAQ,CAACxrC,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC,EAA4C,KAA5C;AAEA,OAAKu6B,IAAL,CAAUnpB,IAAV,CAAgBpR,MAAM,CAACu6B,IAAvB;AACA,OAAK4qG,IAAL,CAAU/zH,IAAV,CAAgBpR,MAAM,CAACmlI,IAAvB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA8C,WAAW,CAACnnJ,SAAZ,CAAsBqwB,KAAtB,GAA8B,YAAY;AAEzC,SAAO,IAAI,KAAKjuB,WAAT,GAAuBkuB,IAAvB,CAA6B,IAA7B,CAAP;AAEA,CAJD;AAMA;;;;;;AAKA,SAASk3H,UAAT,CAAqB10G,IAArB,EAA4B;AAE3BA,EAAAA,IAAI,GAAGA,IAAI,IAAI,CAAf;AAEA,QAAMgV,QAAQ,GAAG,CAChB,CADgB,EACb,CADa,EACV,CADU,EACPhV,IADO,EACD,CADC,EACE,CADF,EAEhB,CAFgB,EAEb,CAFa,EAEV,CAFU,EAEP,CAFO,EAEJA,IAFI,EAEE,CAFF,EAGhB,CAHgB,EAGb,CAHa,EAGV,CAHU,EAGP,CAHO,EAGJ,CAHI,EAGDA,IAHC,CAAjB;AAMA,QAAMoT,MAAM,GAAG,CACd,CADc,EACX,CADW,EACR,CADQ,EACL,CADK,EACF,GADE,EACG,CADH,EAEd,CAFc,EAEX,CAFW,EAER,CAFQ,EAEL,GAFK,EAEA,CAFA,EAEG,CAFH,EAGd,CAHc,EAGX,CAHW,EAGR,CAHQ,EAGL,CAHK,EAGF,GAHE,EAGG,CAHH,CAAf;AAMA,QAAMrW,QAAQ,GAAG,IAAIua,cAAJ,EAAjB;AACAva,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,UAAvB,EAAmC,IAAI87C,sBAAJ,CAA4BK,QAA5B,EAAsC,CAAtC,CAAnC;AACAjY,EAAAA,QAAQ,CAAClkC,YAAT,CAAuB,OAAvB,EAAgC,IAAI87C,sBAAJ,CAA4BvB,MAA5B,EAAoC,CAApC,CAAhC;AAEA,QAAMlW,QAAQ,GAAG,IAAIm1C,iBAAJ,CAAuB;AAAE9lC,IAAAA,YAAY,EAAE,IAAhB;AAAsBoC,IAAAA,UAAU,EAAE;AAAlC,GAAvB,CAAjB;AAEAkwD,EAAAA,YAAY,CAACpxG,IAAb,CAAmB,IAAnB,EAAyBsvC,QAAzB,EAAmCG,QAAnC;AAEA,OAAK3kC,IAAL,GAAY,YAAZ;AAEA;;AAEDm8I,UAAU,CAACxnJ,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAe83E,YAAY,CAAC3xG,SAA5B,CAAvB;AACAwnJ,UAAU,CAACxnJ,SAAX,CAAqBoC,WAArB,GAAmColJ,UAAnC;AAEA;;;;;;;;;;;;;;AAcA,MAAMC,OAAO,GAAG,CAAhB;AACA,MAAMC,OAAO,GAAG,CAAhB;AACA,MAAMC,QAAQ,GAAGzoJ,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAak6I,OAAb,CAAjB,EAEA;AACA;AACA;AACA;;AACA,MAAME,eAAe,GAAG,CAAE,KAAF,EAAS,KAAT,EAAgB,IAAhB,EAAsB,KAAtB,EAA6B,KAA7B,EAAoC,KAApC,CAAxB;AAEA,MAAMC,UAAU,GAAGH,OAAO,GAAGD,OAAV,GAAoB,CAApB,GAAwBG,eAAe,CAAC/nJ,MAA3D,EAEA;AACA;;AACA,MAAMioJ,WAAW,GAAG,EAApB;AAEA,MAAMC,SAAS,GAAG;AACjB,GAAEr+H,cAAF,GAAoB,CADH;AAEjB,GAAEC,YAAF,GAAkB,CAFD;AAGjB,GAAEE,YAAF,GAAkB,CAHD;AAIjB,GAAEE,aAAF,GAAmB,CAJF;AAKjB,GAAEC,cAAF,GAAoB,CALH;AAMjB,GAAEC,YAAF,GAAkB,CAND;AAOjB,GAAEL,aAAF,GAAmB;AAPF,CAAlB;;AAUA,MAAMo+H,WAAW,GAAG,IAAIpoB,kBAAJ,EAApB;;AACA,MAAM;AAAEqoB,EAAAA,UAAF;AAAcC,EAAAA,SAAd;AAAyBC,EAAAA;AAAzB,IAAqCC,aAAa,EAAxD;;AACA,IAAIC,UAAU,GAAG,IAAjB,EAEA;;AACA,MAAMC,GAAG,GAAG,CAAE,IAAIppJ,IAAI,CAAC0yB,IAAL,CAAW,CAAX,CAAN,IAAyB,CAArC;AACA,MAAM22H,OAAO,GAAG,IAAID,GAApB,EAEA;AACA;;AACA,MAAME,eAAe,GAAG,CACvB,IAAI/mH,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADuB,EAEvB,IAAIA,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAArB,CAFuB,EAGvB,IAAIA,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAE,CAArB,CAHuB,EAIvB,IAAIA,OAAJ,CAAa,CAAE,CAAf,EAAkB,CAAlB,EAAqB,CAAE,CAAvB,CAJuB,EAKvB,IAAIA,OAAJ,CAAa,CAAb,EAAgB6mH,GAAhB,EAAqBC,OAArB,CALuB,EAMvB,IAAI9mH,OAAJ,CAAa,CAAb,EAAgB6mH,GAAhB,EAAqB,CAAEC,OAAvB,CANuB,EAOvB,IAAI9mH,OAAJ,CAAa8mH,OAAb,EAAsB,CAAtB,EAAyBD,GAAzB,CAPuB,EAQvB,IAAI7mH,OAAJ,CAAa,CAAE8mH,OAAf,EAAwB,CAAxB,EAA2BD,GAA3B,CARuB,EASvB,IAAI7mH,OAAJ,CAAa6mH,GAAb,EAAkBC,OAAlB,EAA2B,CAA3B,CATuB,EAUvB,IAAI9mH,OAAJ,CAAa,CAAE6mH,GAAf,EAAoBC,OAApB,EAA6B,CAA7B,CAVuB,CAAxB;;AAYA,SAASE,cAAT,CAAyB1uF,QAAzB,EAAoC;AAEnC,OAAKiyB,SAAL,GAAiBjyB,QAAjB;AACA,OAAK2uF,qBAAL,GAA6B,IAA7B;AAEA,OAAKC,aAAL,GAAqBC,cAAc,CAAEd,WAAF,CAAnC;AACA,OAAKe,eAAL,GAAuB,IAAvB;AACA,OAAKC,cAAL,GAAsB,IAAtB;;AAEA,OAAKC,gBAAL,CAAuB,KAAKJ,aAA5B;AAEA;;AAEDF,cAAc,CAACzoJ,SAAf,GAA2B;AAE1BoC,EAAAA,WAAW,EAAEqmJ,cAFa;;AAI1B;;;;;;;AAOAO,EAAAA,SAAS,EAAE,UAAWhvF,KAAX,EAAkBivF,KAAK,GAAG,CAA1B,EAA6B//G,IAAI,GAAG,GAApC,EAAyCC,GAAG,GAAG,GAA/C,EAAqD;AAE/Dk/G,IAAAA,UAAU,GAAG,KAAKr8D,SAAL,CAAe5xB,eAAf,EAAb;;AACA,UAAM8uF,kBAAkB,GAAG,KAAKC,gBAAL,EAA3B;;AAEA,SAAKC,cAAL,CAAqBpvF,KAArB,EAA4B9wB,IAA5B,EAAkCC,GAAlC,EAAuC+/G,kBAAvC;;AACA,QAAKD,KAAK,GAAG,CAAb,EAAiB;AAEhB,WAAKI,KAAL,CAAYH,kBAAZ,EAAgC,CAAhC,EAAmC,CAAnC,EAAsCD,KAAtC;AAEA;;AAED,SAAKK,WAAL,CAAkBJ,kBAAlB;;AACA,SAAKK,QAAL,CAAeL,kBAAf;;AAEA,WAAOA,kBAAP;AAEA,GA5ByB;;AA8B1B;;;;;AAKAM,EAAAA,mBAAmB,EAAE,UAAWC,eAAX,EAA6B;AAEjD,WAAO,KAAKC,YAAL,CAAmBD,eAAnB,CAAP;AAEA,GAvCyB;;AAyC1B;;;;;AAKAE,EAAAA,WAAW,EAAE,UAAWC,OAAX,EAAqB;AAEjC,WAAO,KAAKF,YAAL,CAAmBE,OAAnB,CAAP;AAEA,GAlDyB;;AAoD1B;;;;AAIAC,EAAAA,oBAAoB,EAAE,YAAY;AAEjC,QAAK,KAAKf,cAAL,KAAwB,IAA7B,EAAoC;AAEnC,WAAKA,cAAL,GAAsBgB,iBAAiB,EAAvC;;AACA,WAAKf,gBAAL,CAAuB,KAAKD,cAA5B;AAEA;AAED,GAjEyB;;AAmE1B;;;;AAIAiB,EAAAA,4BAA4B,EAAE,YAAY;AAEzC,QAAK,KAAKlB,eAAL,KAAyB,IAA9B,EAAqC;AAEpC,WAAKA,eAAL,GAAuBmB,kBAAkB,EAAzC;;AACA,WAAKjB,gBAAL,CAAuB,KAAKF,eAA5B;AAEA;AAED,GAhFyB;;AAkF1B;;;;;AAKAruH,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAKmuH,aAAL,CAAmBnuH,OAAnB;;AAEA,QAAK,KAAKsuH,cAAL,KAAwB,IAA7B,EAAoC,KAAKA,cAAL,CAAoBtuH,OAApB;AACpC,QAAK,KAAKquH,eAAL,KAAyB,IAA9B,EAAqC,KAAKA,eAAL,CAAqBruH,OAArB;;AAErC,SAAM,IAAIt5B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG+mJ,UAAU,CAACpoJ,MAAhC,EAAwCqB,CAAC,EAAzC,EAA+C;AAE9C+mJ,MAAAA,UAAU,CAAE/mJ,CAAF,CAAV,CAAgBs5B,OAAhB;AAEA;AAED,GApGyB;AAsG1B;AAEA+uH,EAAAA,QAAQ,EAAE,UAAWU,YAAX,EAA0B;AAEnC,SAAKvB,qBAAL,CAA2BluH,OAA3B;;AACA,SAAKwxD,SAAL,CAAe3xB,eAAf,CAAgCguF,UAAhC;;AACA4B,IAAAA,YAAY,CAACxtH,WAAb,GAA2B,KAA3B;;AACAytH,IAAAA,YAAY,CAAED,YAAF,EAAgB,CAAhB,EAAmB,CAAnB,EAAsBA,YAAY,CAACp/I,KAAnC,EAA0Co/I,YAAY,CAACn/I,MAAvD,CAAZ;AAEA,GA/GyB;AAiH1B4+I,EAAAA,YAAY,EAAE,UAAW/sH,OAAX,EAAqB;AAElC0rH,IAAAA,UAAU,GAAG,KAAKr8D,SAAL,CAAe5xB,eAAf,EAAb;;AACA,UAAM8uF,kBAAkB,GAAG,KAAKC,gBAAL,CAAuBxsH,OAAvB,CAA3B;;AACA,SAAKwtH,gBAAL,CAAuBxtH,OAAvB,EAAgCusH,kBAAhC;;AACA,SAAKI,WAAL,CAAkBJ,kBAAlB;;AACA,SAAKK,QAAL,CAAeL,kBAAf;;AAEA,WAAOA,kBAAP;AAEA,GA3HyB;AA6H1BC,EAAAA,gBAAgB,EAAE,UAAWxsH,OAAX,EAAqB;AAAE;AAExC,UAAMz0B,MAAM,GAAG;AACd0wB,MAAAA,SAAS,EAAE5U,aADG;AAEd6U,MAAAA,SAAS,EAAE7U,aAFG;AAGduV,MAAAA,eAAe,EAAE,KAHH;AAIdluB,MAAAA,IAAI,EAAEqZ,gBAJQ;AAKdoU,MAAAA,MAAM,EAAEnT,UALM;AAMdqT,MAAAA,QAAQ,EAAEoxH,MAAM,CAAEztH,OAAF,CAAN,GAAoBA,OAAO,CAAC3D,QAA5B,GAAuCnP,YANnC;AAOd+S,MAAAA,WAAW,EAAE,KAPC;AAQdC,MAAAA,aAAa,EAAE;AARD,KAAf;;AAWA,UAAMqsH,kBAAkB,GAAGmB,mBAAmB,CAAEniJ,MAAF,CAA9C;;AACAghJ,IAAAA,kBAAkB,CAACtsH,WAAnB,GAAiCD,OAAO,GAAG,KAAH,GAAW,IAAnD;AACA,SAAK+rH,qBAAL,GAA6B2B,mBAAmB,CAAEniJ,MAAF,CAAhD;AACA,WAAOghJ,kBAAP;AAEA,GA/IyB;AAiJ1BH,EAAAA,gBAAgB,EAAE,UAAW/4G,QAAX,EAAsB;AAEvC,UAAMs6G,OAAO,GAAG,IAAIp7F,IAAJ,CAAU+4F,UAAU,CAAE,CAAF,CAApB,EAA2Bj4G,QAA3B,CAAhB;;AACA,SAAKg8C,SAAL,CAAeid,OAAf,CAAwBqhD,OAAxB,EAAiCtC,WAAjC;AAEA,GAtJyB;AAwJ1BoB,EAAAA,cAAc,EAAE,UAAWpvF,KAAX,EAAkB9wB,IAAlB,EAAwBC,GAAxB,EAA6B+/G,kBAA7B,EAAkD;AAEjE,UAAMpxF,GAAG,GAAG,EAAZ;AACA,UAAMC,MAAM,GAAG,CAAf;AACA,UAAMwyF,UAAU,GAAG,IAAI1yF,iBAAJ,CAAuBC,GAAvB,EAA4BC,MAA5B,EAAoC7uB,IAApC,EAA0CC,GAA1C,CAAnB;AACA,UAAMqhH,MAAM,GAAG,CAAE,CAAF,EAAK,CAAE,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAf;AACA,UAAMC,WAAW,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAE,CAAb,EAAgB,CAAE,CAAlB,EAAqB,CAAE,CAAvB,CAApB;AACA,UAAM1wF,QAAQ,GAAG,KAAKiyB,SAAtB;AAEA,UAAMrJ,cAAc,GAAG5oB,QAAQ,CAAC4oB,cAAhC;AACA,UAAMpW,WAAW,GAAGxS,QAAQ,CAACwS,WAA7B;AACA,UAAMlB,UAAU,GAAGtR,QAAQ,CAAC0S,aAAT,EAAnB;AACA,UAAMnB,UAAU,GAAGvR,QAAQ,CAAC4S,aAAT,EAAnB;AAEA5S,IAAAA,QAAQ,CAACwS,WAAT,GAAuBvpD,aAAvB;AACA+2C,IAAAA,QAAQ,CAAC4oB,cAAT,GAA0Bj5D,cAA1B;AAEA,QAAI5X,UAAU,GAAGkoD,KAAK,CAACloD,UAAvB;;AACA,QAAKA,UAAU,IAAIA,UAAU,CAACkrC,OAA9B,EAAwC;AAEvClrC,MAAAA,UAAU,CAACosC,mBAAX,GAFuC,CAGvC;;AACA,YAAMwsG,YAAY,GAAGxrJ,IAAI,CAAC+E,GAAL,CAAU6N,UAAU,CAAC7S,CAArB,EAAwB6S,UAAU,CAAC1S,CAAnC,EAAsC0S,UAAU,CAACzS,CAAjD,CAArB;AACA,YAAMsrJ,IAAI,GAAGzrJ,IAAI,CAAC8E,GAAL,CAAU9E,IAAI,CAAC+E,GAAL,CAAU/E,IAAI,CAACyvB,IAAL,CAAWzvB,IAAI,CAAC0rJ,IAAL,CAAWF,YAAX,CAAX,CAAV,EAAkD,CAAE,KAApD,CAAV,EAAuE,KAAvE,CAAb;AACA54I,MAAAA,UAAU,GAAGA,UAAU,CAACgf,cAAX,CAA2B5xB,IAAI,CAACsO,GAAL,CAAU,GAAV,EAAe,CAAEm9I,IAAjB,CAA3B,CAAb;AACA,YAAMp4H,KAAK,GAAG,CAAEo4H,IAAI,GAAG,KAAT,IAAmB,KAAjC;AACA5wF,MAAAA,QAAQ,CAAC2S,aAAT,CAAwB56D,UAAxB,EAAoCygB,KAApC;AACAynC,MAAAA,KAAK,CAACloD,UAAN,GAAmB,IAAnB;AAEA;;AAED,SAAM,IAAI5Q,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,CAArB,EAAwBA,CAAC,EAAzB,EAA+B;AAE9B,YAAM2pJ,GAAG,GAAG3pJ,CAAC,GAAG,CAAhB;;AACA,UAAK2pJ,GAAG,IAAI,CAAZ,EAAgB;AAEfN,QAAAA,UAAU,CAAC5jH,EAAX,CAAcjX,GAAd,CAAmB,CAAnB,EAAsB86H,MAAM,CAAEtpJ,CAAF,CAA5B,EAAmC,CAAnC;AACAqpJ,QAAAA,UAAU,CAAC9jH,MAAX,CAAmBgkH,WAAW,CAAEvpJ,CAAF,CAA9B,EAAqC,CAArC,EAAwC,CAAxC;AAEA,OALD,MAKO,IAAK2pJ,GAAG,IAAI,CAAZ,EAAgB;AAEtBN,QAAAA,UAAU,CAAC5jH,EAAX,CAAcjX,GAAd,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB86H,MAAM,CAAEtpJ,CAAF,CAA/B;AACAqpJ,QAAAA,UAAU,CAAC9jH,MAAX,CAAmB,CAAnB,EAAsBgkH,WAAW,CAAEvpJ,CAAF,CAAjC,EAAwC,CAAxC;AAEA,OALM,MAKA;AAENqpJ,QAAAA,UAAU,CAAC5jH,EAAX,CAAcjX,GAAd,CAAmB,CAAnB,EAAsB86H,MAAM,CAAEtpJ,CAAF,CAA5B,EAAmC,CAAnC;AACAqpJ,QAAAA,UAAU,CAAC9jH,MAAX,CAAmB,CAAnB,EAAsB,CAAtB,EAAyBgkH,WAAW,CAAEvpJ,CAAF,CAApC;AAEA;;AAEDgpJ,MAAAA,YAAY,CAAEhB,kBAAF,EACX2B,GAAG,GAAGlD,QADK,EACKzmJ,CAAC,GAAG,CAAJ,GAAQymJ,QAAR,GAAmB,CADxB,EAC2BA,QAD3B,EACqCA,QADrC,CAAZ;;AAEA5tF,MAAAA,QAAQ,CAACM,eAAT,CAA0B6uF,kBAA1B;AACAnvF,MAAAA,QAAQ,CAACO,MAAT,CAAiBN,KAAjB,EAAwBuwF,UAAxB;AAEA;;AAEDxwF,IAAAA,QAAQ,CAACwS,WAAT,GAAuBA,WAAvB;AACAxS,IAAAA,QAAQ,CAAC4oB,cAAT,GAA0BA,cAA1B;AACA5oB,IAAAA,QAAQ,CAAC2S,aAAT,CAAwBrB,UAAxB,EAAoCC,UAApC;AAEA,GAtNyB;AAwN1B6+E,EAAAA,gBAAgB,EAAE,UAAWxtH,OAAX,EAAoBusH,kBAApB,EAAyC;AAE1D,UAAMnvF,QAAQ,GAAG,KAAKiyB,SAAtB;;AAEA,QAAKrvD,OAAO,CAAC2vC,aAAb,EAA6B;AAE5B,UAAK,KAAKw8E,cAAL,IAAuB,IAA5B,EAAmC;AAElC,aAAKA,cAAL,GAAsBgB,iBAAiB,EAAvC;AAEA;AAED,KARD,MAQO;AAEN,UAAK,KAAKjB,eAAL,IAAwB,IAA7B,EAAoC;AAEnC,aAAKA,eAAL,GAAuBmB,kBAAkB,EAAzC;AAEA;AAED;;AAED,UAAMh6G,QAAQ,GAAGrT,OAAO,CAAC2vC,aAAR,GAAwB,KAAKw8E,cAA7B,GAA8C,KAAKD,eAApE;AACA,UAAM/1F,IAAI,GAAG,IAAI5D,IAAJ,CAAU+4F,UAAU,CAAE,CAAF,CAApB,EAA2Bj4G,QAA3B,CAAb;AAEA,UAAMumB,QAAQ,GAAGvmB,QAAQ,CAACumB,QAA1B;AAEAA,IAAAA,QAAQ,CAAE,QAAF,CAAR,CAAqBjyD,KAArB,GAA6Bq4B,OAA7B;;AAEA,QAAK,CAAEA,OAAO,CAAC2vC,aAAf,EAA+B;AAE9B/V,MAAAA,QAAQ,CAAE,WAAF,CAAR,CAAwBjyD,KAAxB,CAA8BorB,GAA9B,CAAmC,MAAMiN,OAAO,CAAC/E,KAAR,CAAc/sB,KAAvD,EAA8D,MAAM8xB,OAAO,CAAC/E,KAAR,CAAc9sB,MAAlF;AAEA;;AAEDyrD,IAAAA,QAAQ,CAAE,eAAF,CAAR,CAA4BjyD,KAA5B,GAAoCyjJ,SAAS,CAAEprH,OAAO,CAAC3D,QAAV,CAA7C;AACAu9B,IAAAA,QAAQ,CAAE,gBAAF,CAAR,CAA6BjyD,KAA7B,GAAqCyjJ,SAAS,CAAEmB,kBAAkB,CAACvsH,OAAnB,CAA2B3D,QAA7B,CAA9C;;AAEAkxH,IAAAA,YAAY,CAAEhB,kBAAF,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,IAAIvB,QAAhC,EAA0C,IAAIA,QAA9C,CAAZ;;AAEA5tF,IAAAA,QAAQ,CAACM,eAAT,CAA0B6uF,kBAA1B;AACAnvF,IAAAA,QAAQ,CAACO,MAAT,CAAiBxH,IAAjB,EAAuBk1F,WAAvB;AAEA,GAnQyB;AAqQ1BsB,EAAAA,WAAW,EAAE,UAAWJ,kBAAX,EAAgC;AAE5C,UAAMnvF,QAAQ,GAAG,KAAKiyB,SAAtB;AACA,UAAM9f,SAAS,GAAGnS,QAAQ,CAACmS,SAA3B;AACAnS,IAAAA,QAAQ,CAACmS,SAAT,GAAqB,KAArB;;AAEA,SAAM,IAAIhrE,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2mJ,UAArB,EAAiC3mJ,CAAC,EAAlC,EAAwC;AAEvC,YAAM+nJ,KAAK,GAAG/pJ,IAAI,CAAC0yB,IAAL,CAAWu2H,OAAO,CAAEjnJ,CAAF,CAAP,GAAeinJ,OAAO,CAAEjnJ,CAAF,CAAtB,GAA8BinJ,OAAO,CAAEjnJ,CAAC,GAAG,CAAN,CAAP,GAAmBinJ,OAAO,CAAEjnJ,CAAC,GAAG,CAAN,CAAnE,CAAd;AAEA,YAAM4pJ,QAAQ,GAAGtC,eAAe,CAAE,CAAEtnJ,CAAC,GAAG,CAAN,IAAYsnJ,eAAe,CAAC3oJ,MAA9B,CAAhC;;AAEA,WAAKwpJ,KAAL,CAAYH,kBAAZ,EAAgChoJ,CAAC,GAAG,CAApC,EAAuCA,CAAvC,EAA0C+nJ,KAA1C,EAAiD6B,QAAjD;AAEA;;AAED/wF,IAAAA,QAAQ,CAACmS,SAAT,GAAqBA,SAArB;AAEA,GAvRyB;;AAyR1B;;;;;;;AAOAm9E,EAAAA,KAAK,EAAE,UAAWH,kBAAX,EAA+B6B,KAA/B,EAAsCC,MAAtC,EAA8C/B,KAA9C,EAAqD6B,QAArD,EAAgE;AAEtE,UAAMG,oBAAoB,GAAG,KAAKvC,qBAAlC;;AAEA,SAAKwC,SAAL,CACChC,kBADD,EAEC+B,oBAFD,EAGCF,KAHD,EAICC,MAJD,EAKC/B,KALD,EAMC,aAND,EAOC6B,QAPD;;AASA,SAAKI,SAAL,CACCD,oBADD,EAEC/B,kBAFD,EAGC8B,MAHD,EAICA,MAJD,EAKC/B,KALD,EAMC,cAND,EAOC6B,QAPD;AASA,GAtTyB;AAwT1BI,EAAAA,SAAS,EAAE,UAAWC,QAAX,EAAqBC,SAArB,EAAgCL,KAAhC,EAAuCC,MAAvC,EAA+CK,YAA/C,EAA6Dl1G,SAA7D,EAAwE20G,QAAxE,EAAmF;AAE7F,UAAM/wF,QAAQ,GAAG,KAAKiyB,SAAtB;AACA,UAAMs/D,YAAY,GAAG,KAAK3C,aAA1B;;AAEA,QAAKxyG,SAAS,KAAK,aAAd,IAA+BA,SAAS,KAAK,cAAlD,EAAmE;AAElExmB,MAAAA,OAAO,CAACyD,KAAR,CACC,4DADD;AAGA,KAV4F,CAY7F;;;AACA,UAAMm4H,mBAAmB,GAAG,CAA5B;AAEA,UAAMC,QAAQ,GAAG,IAAIt8F,IAAJ,CAAU+4F,UAAU,CAAE+C,MAAF,CAApB,EAAgCM,YAAhC,CAAjB;AACA,UAAMG,YAAY,GAAGH,YAAY,CAAC/0F,QAAlC;AAEA,UAAMm1F,MAAM,GAAGxD,SAAS,CAAE6C,KAAF,CAAT,GAAqB,CAApC;AACA,UAAMY,eAAe,GAAG/sI,QAAQ,CAAEysI,YAAF,CAAR,GAA2BnsJ,IAAI,CAACutB,EAAL,IAAY,IAAIi/H,MAAhB,CAA3B,GAAsD,IAAIxsJ,IAAI,CAACutB,EAAT,IAAgB,IAAIq7H,WAAJ,GAAkB,CAAlC,CAA9E;AACA,UAAM8D,WAAW,GAAGP,YAAY,GAAGM,eAAnC;AACA,UAAMzuH,OAAO,GAAGte,QAAQ,CAAEysI,YAAF,CAAR,GAA2B,IAAInsJ,IAAI,CAACwE,KAAL,CAAY6nJ,mBAAmB,GAAGK,WAAlC,CAA/B,GAAiF9D,WAAjG;;AAEA,QAAK5qH,OAAO,GAAG4qH,WAAf,EAA6B;AAE5Bn4H,MAAAA,OAAO,CAACC,IAAR,CAAe,iBACdy7H,YAAa,iDACbnuH,OAAQ,uCAAsC4qH,WAAY,EAF3D;AAIA;;AAED,UAAM+D,OAAO,GAAG,EAAhB;AACA,QAAIzvC,GAAG,GAAG,CAAV;;AAEA,SAAM,IAAIl7G,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG4mJ,WAArB,EAAkC,EAAG5mJ,CAArC,EAAyC;AAExC,YAAMqH,CAAC,GAAGrH,CAAC,GAAG0qJ,WAAd;AACA,YAAMv8C,MAAM,GAAGnwG,IAAI,CAAC4sJ,GAAL,CAAU,CAAEvjJ,CAAF,GAAMA,CAAN,GAAU,CAApB,CAAf;AACAsjJ,MAAAA,OAAO,CAACxhJ,IAAR,CAAcglG,MAAd;;AAEA,UAAKnuG,CAAC,IAAI,CAAV,EAAc;AAEbk7G,QAAAA,GAAG,IAAI/M,MAAP;AAEA,OAJD,MAIO,IAAKnuG,CAAC,GAAGg8B,OAAT,EAAmB;AAEzBk/E,QAAAA,GAAG,IAAI,IAAI/M,MAAX;AAEA;AAED;;AAED,SAAM,IAAInuG,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2qJ,OAAO,CAAChsJ,MAA7B,EAAqCqB,CAAC,EAAtC,EAA4C;AAE3C2qJ,MAAAA,OAAO,CAAE3qJ,CAAF,CAAP,GAAe2qJ,OAAO,CAAE3qJ,CAAF,CAAP,GAAek7G,GAA9B;AAEA;;AAEDqvC,IAAAA,YAAY,CAAE,QAAF,CAAZ,CAAyBnnJ,KAAzB,GAAiC6mJ,QAAQ,CAACxuH,OAA1C;AACA8uH,IAAAA,YAAY,CAAE,SAAF,CAAZ,CAA0BnnJ,KAA1B,GAAkC44B,OAAlC;AACAuuH,IAAAA,YAAY,CAAE,SAAF,CAAZ,CAA0BnnJ,KAA1B,GAAkCunJ,OAAlC;AACAJ,IAAAA,YAAY,CAAE,aAAF,CAAZ,CAA8BnnJ,KAA9B,GAAsC6xC,SAAS,KAAK,aAApD;;AAEA,QAAK20G,QAAL,EAAgB;AAEfW,MAAAA,YAAY,CAAE,UAAF,CAAZ,CAA2BnnJ,KAA3B,GAAmCwmJ,QAAnC;AAEA;;AAEDW,IAAAA,YAAY,CAAE,QAAF,CAAZ,CAAyBnnJ,KAAzB,GAAiCqnJ,eAAjC;AACAF,IAAAA,YAAY,CAAE,QAAF,CAAZ,CAAyBnnJ,KAAzB,GAAiCojJ,OAAO,GAAGqD,KAA3C;AACAU,IAAAA,YAAY,CAAE,eAAF,CAAZ,CAAgCnnJ,KAAhC,GAAwCyjJ,SAAS,CAAEoD,QAAQ,CAACxuH,OAAT,CAAiB3D,QAAnB,CAAjD;AACAyyH,IAAAA,YAAY,CAAE,gBAAF,CAAZ,CAAiCnnJ,KAAjC,GAAyCyjJ,SAAS,CAAEoD,QAAQ,CAACxuH,OAAT,CAAiB3D,QAAnB,CAAlD;AAEA,UAAM+yH,UAAU,GAAG7D,SAAS,CAAE8C,MAAF,CAA5B;AACA,UAAMziJ,CAAC,GAAG,IAAIrJ,IAAI,CAAC+E,GAAL,CAAU,CAAV,EAAa0jJ,QAAQ,GAAG,IAAIoE,UAA5B,CAAd;AACA,UAAMtjJ,CAAC,GAAG,CAAEuiJ,MAAM,KAAK,CAAX,GAAe,CAAf,GAAmB,IAAIrD,QAAzB,IAAsC,IAAIoE,UAAJ,IAAmBf,MAAM,GAAGtD,OAAO,GAAGD,OAAnB,GAA6BuD,MAAM,GAAGtD,OAAT,GAAmBD,OAAhD,GAA0D,CAA7E,CAAhD;;AAEAyC,IAAAA,YAAY,CAAEkB,SAAF,EAAa7iJ,CAAb,EAAgBE,CAAhB,EAAmB,IAAIsjJ,UAAvB,EAAmC,IAAIA,UAAvC,CAAZ;;AACAhyF,IAAAA,QAAQ,CAACM,eAAT,CAA0B+wF,SAA1B;AACArxF,IAAAA,QAAQ,CAACO,MAAT,CAAiBkxF,QAAjB,EAA2BxD,WAA3B;AAEA;AA1YyB,CAA3B;;AA8YA,SAASoC,MAAT,CAAiBztH,OAAjB,EAA2B;AAE1B,MAAKA,OAAO,KAAK16B,SAAZ,IAAyB06B,OAAO,CAACtxB,IAAR,KAAiBqZ,gBAA/C,EAAkE,OAAO,KAAP;AAElE,SAAOiY,OAAO,CAAC3D,QAAR,KAAqBtP,cAArB,IAAuCiT,OAAO,CAAC3D,QAAR,KAAqBrP,YAA5D,IAA4EgT,OAAO,CAAC3D,QAAR,KAAqBpP,aAAxG;AAEA;;AAED,SAASw+H,aAAT,GAAyB;AAExB,QAAMH,UAAU,GAAG,EAAnB;AACA,QAAMC,SAAS,GAAG,EAAlB;AACA,QAAMC,OAAO,GAAG,EAAhB;AAEA,MAAI6D,GAAG,GAAGtE,OAAV;;AAEA,OAAM,IAAIxmJ,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2mJ,UAArB,EAAiC3mJ,CAAC,EAAlC,EAAwC;AAEvC,UAAM+qJ,OAAO,GAAG/sJ,IAAI,CAACsO,GAAL,CAAU,CAAV,EAAaw+I,GAAb,CAAhB;;AACA9D,IAAAA,SAAS,CAAC79I,IAAV,CAAgB4hJ,OAAhB;;AACA,QAAIhD,KAAK,GAAG,MAAMgD,OAAlB;;AAEA,QAAK/qJ,CAAC,GAAGwmJ,OAAO,GAAGD,OAAnB,EAA6B;AAE5BwB,MAAAA,KAAK,GAAGrB,eAAe,CAAE1mJ,CAAC,GAAGwmJ,OAAJ,GAAcD,OAAd,GAAwB,CAA1B,CAAvB;AAEA,KAJD,MAIO,IAAKvmJ,CAAC,IAAI,CAAV,EAAc;AAEpB+nJ,MAAAA,KAAK,GAAG,CAAR;AAEA;;AAEDd,IAAAA,OAAO,CAAC99I,IAAR,CAAc4+I,KAAd;;AAEA,UAAMiD,SAAS,GAAG,OAAQD,OAAO,GAAG,CAAlB,CAAlB;AACA,UAAMjoJ,GAAG,GAAG,CAAEkoJ,SAAF,GAAc,CAA1B;AACA,UAAMjoJ,GAAG,GAAG,IAAIioJ,SAAS,GAAG,CAA5B;AACA,UAAMxwG,GAAG,GAAG,CAAE13C,GAAF,EAAOA,GAAP,EAAYC,GAAZ,EAAiBD,GAAjB,EAAsBC,GAAtB,EAA2BA,GAA3B,EAAgCD,GAAhC,EAAqCA,GAArC,EAA0CC,GAA1C,EAA+CA,GAA/C,EAAoDD,GAApD,EAAyDC,GAAzD,CAAZ;AAEA,UAAMkoJ,SAAS,GAAG,CAAlB;AACA,UAAMrkG,QAAQ,GAAG,CAAjB;AACA,UAAMskG,YAAY,GAAG,CAArB;AACA,UAAMC,MAAM,GAAG,CAAf;AACA,UAAMC,aAAa,GAAG,CAAtB;AAEA,UAAM5kJ,QAAQ,GAAG,IAAIggD,YAAJ,CAAkB0kG,YAAY,GAAGtkG,QAAf,GAA0BqkG,SAA5C,CAAjB;AACA,UAAMzxH,EAAE,GAAG,IAAIgtB,YAAJ,CAAkB2kG,MAAM,GAAGvkG,QAAT,GAAoBqkG,SAAtC,CAAX;AACA,UAAMr8F,SAAS,GAAG,IAAIpI,YAAJ,CAAkB4kG,aAAa,GAAGxkG,QAAhB,GAA2BqkG,SAA7C,CAAlB;;AAEA,SAAM,IAAIrjG,IAAI,GAAG,CAAjB,EAAoBA,IAAI,GAAGqjG,SAA3B,EAAsCrjG,IAAI,EAA1C,EAAgD;AAE/C,YAAMvgD,CAAC,GAAKugD,IAAI,GAAG,CAAT,GAAe,CAAf,GAAmB,CAAnB,GAAuB,CAAjC;AACA,YAAMrgD,CAAC,GAAGqgD,IAAI,GAAG,CAAP,GAAW,CAAX,GAAe,CAAE,CAA3B;AACA,YAAMyjG,WAAW,GAAG,CACnBhkJ,CADmB,EAChBE,CADgB,EACb,CADa,EAEnBF,CAAC,GAAG,IAAI,CAFW,EAERE,CAFQ,EAEL,CAFK,EAGnBF,CAAC,GAAG,IAAI,CAHW,EAGRE,CAAC,GAAG,CAHI,EAGD,CAHC,EAInBF,CAJmB,EAIhBE,CAJgB,EAIb,CAJa,EAKnBF,CAAC,GAAG,IAAI,CALW,EAKRE,CAAC,GAAG,CALI,EAKD,CALC,EAMnBF,CANmB,EAMhBE,CAAC,GAAG,CANY,EAMT,CANS,CAApB;AAQAf,MAAAA,QAAQ,CAACgoB,GAAT,CAAc68H,WAAd,EAA2BH,YAAY,GAAGtkG,QAAf,GAA0BgB,IAArD;AACApuB,MAAAA,EAAE,CAAChL,GAAH,CAAQgsB,GAAR,EAAa2wG,MAAM,GAAGvkG,QAAT,GAAoBgB,IAAjC;AACA,YAAM0jG,IAAI,GAAG,CAAE1jG,IAAF,EAAQA,IAAR,EAAcA,IAAd,EAAoBA,IAApB,EAA0BA,IAA1B,EAAgCA,IAAhC,CAAb;AACAgH,MAAAA,SAAS,CAACpgC,GAAV,CAAe88H,IAAf,EAAqBF,aAAa,GAAGxkG,QAAhB,GAA2BgB,IAAhD;AAEA;;AAED,UAAMuS,MAAM,GAAG,IAAIjR,cAAJ,EAAf;AACAiR,IAAAA,MAAM,CAAC1vD,YAAP,CAAqB,UAArB,EAAiC,IAAI25C,eAAJ,CAAqB59C,QAArB,EAA+B0kJ,YAA/B,CAAjC;AACA/wF,IAAAA,MAAM,CAAC1vD,YAAP,CAAqB,IAArB,EAA2B,IAAI25C,eAAJ,CAAqB5qB,EAArB,EAAyB2xH,MAAzB,CAA3B;AACAhxF,IAAAA,MAAM,CAAC1vD,YAAP,CAAqB,WAArB,EAAkC,IAAI25C,eAAJ,CAAqBwK,SAArB,EAAgCw8F,aAAhC,CAAlC;;AACArE,IAAAA,UAAU,CAAC59I,IAAX,CAAiBgxD,MAAjB;;AAEA,QAAK2wF,GAAG,GAAGvE,OAAX,EAAqB;AAEpBuE,MAAAA,GAAG;AAEH;AAED;;AAED,SAAO;AAAE/D,IAAAA,UAAF;AAAcC,IAAAA,SAAd;AAAyBC,IAAAA;AAAzB,GAAP;AAEA;;AAED,SAASkC,mBAAT,CAA8BniJ,MAA9B,EAAuC;AAEtC,QAAMghJ,kBAAkB,GAAG,IAAI3sH,iBAAJ,CAAuB,IAAIorH,QAA3B,EAAqC,IAAIA,QAAzC,EAAmDz/I,MAAnD,CAA3B;AACAghJ,EAAAA,kBAAkB,CAACvsH,OAAnB,CAA2BlE,OAA3B,GAAqC9U,uBAArC;AACAulI,EAAAA,kBAAkB,CAACvsH,OAAnB,CAA2BnmB,IAA3B,GAAkC,cAAlC;AACA0yI,EAAAA,kBAAkB,CAACzsH,WAAnB,GAAiC,IAAjC;AACA,SAAOysH,kBAAP;AAEA;;AAED,SAASgB,YAAT,CAAuB7pJ,MAAvB,EAA+BkI,CAA/B,EAAkCE,CAAlC,EAAqCoC,KAArC,EAA4CC,MAA5C,EAAqD;AAEpDzK,EAAAA,MAAM,CAACq8B,QAAP,CAAgBhN,GAAhB,CAAqBnnB,CAArB,EAAwBE,CAAxB,EAA2BoC,KAA3B,EAAkCC,MAAlC;AACAzK,EAAAA,MAAM,CAACm8B,OAAP,CAAe9M,GAAf,CAAoBnnB,CAApB,EAAuBE,CAAvB,EAA0BoC,KAA1B,EAAiCC,MAAjC;AAEA;;AAED,SAAS89I,cAAT,CAAyBr2E,UAAzB,EAAsC;AAErC,QAAMs5E,OAAO,GAAG,IAAInkG,YAAJ,CAAkB6qB,UAAlB,CAAhB;AACA,QAAMu4E,QAAQ,GAAG,IAAIrpH,OAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAjB;AACA,QAAMgrH,cAAc,GAAG,IAAI9lC,iBAAJ,CAAuB;AAE7CnwG,IAAAA,IAAI,EAAE,uBAFuC;AAI7CqgD,IAAAA,OAAO,EAAE;AAAE,WAAK0b;AAAP,KAJoC;AAM7Chc,IAAAA,QAAQ,EAAE;AACT,gBAAU;AAAEjyD,QAAAA,KAAK,EAAE;AAAT,OADD;AAET,iBAAW;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAFF;AAGT,iBAAW;AAAEA,QAAAA,KAAK,EAAEunJ;AAAT,OAHF;AAIT,qBAAe;AAAEvnJ,QAAAA,KAAK,EAAE;AAAT,OAJN;AAKT,gBAAU;AAAEA,QAAAA,KAAK,EAAE;AAAT,OALD;AAMT,gBAAU;AAAEA,QAAAA,KAAK,EAAE;AAAT,OAND;AAOT,kBAAY;AAAEA,QAAAA,KAAK,EAAEwmJ;AAAT,OAPH;AAQT,uBAAiB;AAAExmJ,QAAAA,KAAK,EAAEyjJ,SAAS,CAAEr+H,cAAF;AAAlB,OARR;AAST,wBAAkB;AAAEplB,QAAAA,KAAK,EAAEyjJ,SAAS,CAAEr+H,cAAF;AAAlB;AATT,KANmC;AAkB7CotC,IAAAA,YAAY,EAAE41F,sBAAsB,EAlBS;AAoB7C31F,IAAAA,cAAc,EAAG;;;;;;;;;;;;EAYjB41F,aAAa,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAhC6B;AAgE7CntG,IAAAA,QAAQ,EAAEz+B,UAhEmC;AAiE7Co/B,IAAAA,SAAS,EAAE,KAjEkC;AAkE7CC,IAAAA,UAAU,EAAE;AAlEiC,GAAvB,CAAvB;AAsEA,SAAOqsG,cAAP;AAEA;;AAED,SAASzC,kBAAT,GAA8B;AAE7B,QAAMkC,SAAS,GAAG,IAAIr8H,OAAJ,CAAa,CAAb,EAAgB,CAAhB,CAAlB;AACA,QAAM48H,cAAc,GAAG,IAAI9lC,iBAAJ,CAAuB;AAE7CnwG,IAAAA,IAAI,EAAE,yBAFuC;AAI7C+/C,IAAAA,QAAQ,EAAE;AACT,gBAAU;AAAEjyD,QAAAA,KAAK,EAAE;AAAT,OADD;AAET,mBAAa;AAAEA,QAAAA,KAAK,EAAE4nJ;AAAT,OAFJ;AAGT,uBAAiB;AAAE5nJ,QAAAA,KAAK,EAAEyjJ,SAAS,CAAEr+H,cAAF;AAAlB,OAHR;AAIT,wBAAkB;AAAEplB,QAAAA,KAAK,EAAEyjJ,SAAS,CAAEr+H,cAAF;AAAlB;AAJT,KAJmC;AAW7CotC,IAAAA,YAAY,EAAE41F,sBAAsB,EAXS;AAa7C31F,IAAAA,cAAc,EAAG;;;;;;;EAOjB41F,aAAa,EAAG;;;;;;;;;;;;;;;;;;;;;;GApB6B;AA4C7CntG,IAAAA,QAAQ,EAAEz+B,UA5CmC;AA6C7Co/B,IAAAA,SAAS,EAAE,KA7CkC;AA8C7CC,IAAAA,UAAU,EAAE;AA9CiC,GAAvB,CAAvB;AAkDA,SAAOqsG,cAAP;AAEA;;AAED,SAAS3C,iBAAT,GAA6B;AAE5B,QAAM2C,cAAc,GAAG,IAAI9lC,iBAAJ,CAAuB;AAE7CnwG,IAAAA,IAAI,EAAE,iBAFuC;AAI7C+/C,IAAAA,QAAQ,EAAE;AACT,gBAAU;AAAEjyD,QAAAA,KAAK,EAAE;AAAT,OADD;AAET,uBAAiB;AAAEA,QAAAA,KAAK,EAAEyjJ,SAAS,CAAEr+H,cAAF;AAAlB,OAFR;AAGT,wBAAkB;AAAEplB,QAAAA,KAAK,EAAEyjJ,SAAS,CAAEr+H,cAAF;AAAlB;AAHT,KAJmC;AAU7CotC,IAAAA,YAAY,EAAE41F,sBAAsB,EAVS;AAY7C31F,IAAAA,cAAc,EAAG;;;;;;EAMjB41F,aAAa,EAAG;;;;;;;GAlB6B;AA2B7CntG,IAAAA,QAAQ,EAAEz+B,UA3BmC;AA4B7Co/B,IAAAA,SAAS,EAAE,KA5BkC;AA6B7CC,IAAAA,UAAU,EAAE;AA7BiC,GAAvB,CAAvB;AAiCA,SAAOqsG,cAAP;AAEA;;AAED,SAASC,sBAAT,GAAkC;AAEjC,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAR;AAqCA;;AAED,SAASC,aAAT,GAAyB;AAExB,SAAQ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EAAR;AA+CA;AAED;;;;;AAIA,SAASC,KAAT,CAAgBttJ,CAAhB,EAAmBD,CAAnB,EAAsB0E,CAAtB,EAAyBgyB,CAAzB,EAA4B8N,MAA5B,EAAoCllC,KAApC,EAA2CwgD,aAA3C,EAA2D;AAE1DxvB,EAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd;AACA,SAAO,IAAIsvB,KAAJ,CAAW5/C,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAoB8/B,MAApB,EAA4BllC,KAA5B,EAAmCwgD,aAAnC,CAAP;AAEA;;AAED,MAAM0tG,SAAS,GAAG,CAAlB;;AACA,MAAMC,UAAU,GAAG,CAAnB;;AACA,MAAMC,QAAQ,GAAG,CAAjB;;AACA,MAAMC,UAAU,GAAG,CAAnB;;AACA,MAAMC,YAAY,GAAG,CAArB;;;AAEA,SAASC,gBAAT,CAA2B/9G,SAA3B,EAAuC;AAEtCxf,EAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,SAAOuf,SAAP;AAEA;;AAED,SAASg+G,aAAT,CAAwBh+G,SAAxB,EAAoC;AAEnC,MAAKA,SAAS,KAAKltC,SAAnB,EAA+BktC,SAAS,GAAG,EAAZ;AAE/Bxf,EAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACAuf,EAAAA,SAAS,CAAC4gB,eAAV,GAA4B,IAA5B;AACA5gB,EAAAA,SAAS,CAACA,SAAV,GAAsBA,SAAtB;;AACAA,EAAAA,SAAS,CAAC9e,KAAV,GAAkB,YAAY;AAE7B,WAAO8e,SAAS,CAAChvC,KAAV,EAAP;AAEA,GAJD;;AAMA,SAAOgvC,SAAP;AAEA;;AAED,SAAS0zG,UAAT,CAAqBhzG,QAArB,EAA+BG,QAA/B,EAA0C;AAEzCrgB,EAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AACA,SAAO,IAAIqiF,MAAJ,CAAYpiE,QAAZ,EAAsBG,QAAtB,CAAP;AAEA;;AAED,SAASo9G,QAAT,CAAmBp9G,QAAnB,EAA8B;AAE7BrgB,EAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA,SAAO,IAAIm+E,MAAJ,CAAY/9D,QAAZ,CAAP;AAEA;;AAED,SAASq9G,cAAT,CAAyBx9G,QAAzB,EAAmCG,QAAnC,EAA8C;AAE7CrgB,EAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,SAAO,IAAIqiF,MAAJ,CAAYpiE,QAAZ,EAAsBG,QAAtB,CAAP;AAEA;;AAED,SAASs9G,kBAAT,CAA6Bx9G,UAA7B,EAA0C;AAEzCngB,EAAAA,OAAO,CAACC,IAAR,CAAc,oEAAd;AACA,SAAO,IAAIy1D,cAAJ,CAAoBv1C,UAApB,CAAP;AAEA;;AAED,SAASy9G,qBAAT,CAAgCz9G,UAAhC,EAA6C;AAE5CngB,EAAAA,OAAO,CAACC,IAAR,CAAc,uEAAd;AACA,SAAO,IAAIy1D,cAAJ,CAAoBv1C,UAApB,CAAP;AAEA;;AAED,SAAS09G,sBAAT,CAAiC19G,UAAjC,EAA8C;AAE7CngB,EAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA,SAAO,IAAIy1D,cAAJ,CAAoBv1C,UAApB,CAAP;AAEA;;AAED,SAAS29G,MAAT,CAAiBllJ,CAAjB,EAAoBE,CAApB,EAAuBmyB,CAAvB,EAA2B;AAE1BjL,EAAAA,OAAO,CAACC,IAAR,CAAc,2DAAd;AACA,SAAO,IAAI6R,OAAJ,CAAal5B,CAAb,EAAgBE,CAAhB,EAAmBmyB,CAAnB,CAAP;AAEA,EAED;;;AAEA,SAAS8yH,sBAAT,CAAiCrhI,KAAjC,EAAwCk5B,QAAxC,EAAmD;AAElD51B,EAAAA,OAAO,CAACC,IAAR,CAAc,4HAAd;AACA,SAAO,IAAI01B,eAAJ,CAAqBj5B,KAArB,EAA4Bk5B,QAA5B,EAAuCK,QAAvC,CAAiDr6B,gBAAjD,CAAP;AAEA;;AAED,SAASoiI,aAAT,CAAwBthI,KAAxB,EAA+Bk5B,QAA/B,EAA0C;AAEzC51B,EAAAA,OAAO,CAACC,IAAR,CAAc,oFAAd;AACA,SAAO,IAAI+2B,mBAAJ,CAAyBt6B,KAAzB,EAAgCk5B,QAAhC,CAAP;AAEA;;AAED,SAASqoG,cAAT,CAAyBvhI,KAAzB,EAAgCk5B,QAAhC,EAA2C;AAE1C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,sFAAd;AACA,SAAO,IAAIi3B,oBAAJ,CAA0Bx6B,KAA1B,EAAiCk5B,QAAjC,CAAP;AAEA;;AAED,SAASsoG,qBAAT,CAAgCxhI,KAAhC,EAAuCk5B,QAAvC,EAAkD;AAEjD51B,EAAAA,OAAO,CAACC,IAAR,CAAc,oGAAd;AACA,SAAO,IAAIm3B,2BAAJ,CAAiC16B,KAAjC,EAAwCk5B,QAAxC,CAAP;AAEA;;AAED,SAASuoG,cAAT,CAAyBzhI,KAAzB,EAAgCk5B,QAAhC,EAA2C;AAE1C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,sFAAd;AACA,SAAO,IAAIq3B,oBAAJ,CAA0B56B,KAA1B,EAAiCk5B,QAAjC,CAAP;AAEA;;AAED,SAASwoG,eAAT,CAA0B1hI,KAA1B,EAAiCk5B,QAAjC,EAA4C;AAE3C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,wFAAd;AACA,SAAO,IAAIu3B,qBAAJ,CAA2B96B,KAA3B,EAAkCk5B,QAAlC,CAAP;AAEA;;AAED,SAASyoG,cAAT,CAAyB3hI,KAAzB,EAAgCk5B,QAAhC,EAA2C;AAE1C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,sFAAd;AACA,SAAO,IAAIy3B,oBAAJ,CAA0Bh7B,KAA1B,EAAiCk5B,QAAjC,CAAP;AAEA;;AAED,SAAS0oG,eAAT,CAA0B5hI,KAA1B,EAAiCk5B,QAAjC,EAA4C;AAE3C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,wFAAd;AACA,SAAO,IAAI23B,qBAAJ,CAA2Bl7B,KAA3B,EAAkCk5B,QAAlC,CAAP;AAEA;;AAED,SAAS2oG,gBAAT,CAA2B7hI,KAA3B,EAAkCk5B,QAAlC,EAA6C;AAE5C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,0FAAd;AACA,SAAO,IAAI63B,sBAAJ,CAA4Bp7B,KAA5B,EAAmCk5B,QAAnC,CAAP;AAEA;;AAED,SAAS4oG,gBAAT,CAA2B9hI,KAA3B,EAAkCk5B,QAAlC,EAA6C;AAE5C51B,EAAAA,OAAO,CAACC,IAAR,CAAc,0FAAd;AACA,SAAO,IAAI+3B,sBAAJ,CAA4Bt7B,KAA5B,EAAmCk5B,QAAnC,CAAP;AAEA,EAED;;;AAEAuxE,KAAK,CAACj9F,MAAN,GAAe,UAAWu0H,SAAX,EAAsBp3B,QAAtB,EAAiC;AAE/CrnG,EAAAA,OAAO,CAACliB,GAAR,CAAa,0CAAb;AAEA2gJ,EAAAA,SAAS,CAACpuJ,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAei9F,KAAK,CAAC92H,SAArB,CAAtB;AACAouJ,EAAAA,SAAS,CAACpuJ,SAAV,CAAoBoC,WAApB,GAAkCgsJ,SAAlC;AACAA,EAAAA,SAAS,CAACpuJ,SAAV,CAAoBg3H,QAApB,GAA+BA,QAA/B;AAEA,SAAOo3B,SAAP;AAEA,CAVD,EAYA;;;AAEAxtJ,MAAM,CAACme,MAAP,CAAes9G,SAAS,CAACr8H,SAAzB,EAAoC;AAEnCquJ,EAAAA,oBAAoB,EAAE,UAAWj3B,SAAX,EAAuB;AAE5CznG,IAAAA,OAAO,CAACC,IAAR,CAAc,sHAAd,EAF4C,CAI5C;;AAEA,UAAM4sF,GAAG,GAAG,KAAK2a,SAAL,CAAgBC,SAAhB,CAAZ;AACA,WAAO,KAAKk3B,cAAL,CAAqB9xC,GAArB,CAAP;AAEA,GAXkC;AAanC+xC,EAAAA,0BAA0B,EAAE,UAAWn3B,SAAX,EAAuB;AAElDznG,IAAAA,OAAO,CAACC,IAAR,CAAc,4HAAd,EAFkD,CAIlD;;AAEA,UAAM4sF,GAAG,GAAG,KAAK4B,eAAL,CAAsBgZ,SAAtB,CAAZ;AACA,WAAO,KAAKk3B,cAAL,CAAqB9xC,GAArB,CAAP;AAEA,GAtBkC;AAwBnC8xC,EAAAA,cAAc,EAAE,UAAW77G,MAAX,EAAoB;AAEnC9iB,IAAAA,OAAO,CAACC,IAAR,CAAc,gHAAd;AAEA,UAAMigB,QAAQ,GAAG,IAAIkhB,QAAJ,EAAjB;;AAEA,SAAM,IAAI7vD,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGmxC,MAAM,CAAC5yC,MAA5B,EAAoCqB,CAAC,GAAGI,CAAxC,EAA2CJ,CAAC,EAA5C,EAAkD;AAEjD,YAAMmyC,KAAK,GAAGZ,MAAM,CAAEvxC,CAAF,CAApB;AACA2uC,MAAAA,QAAQ,CAACiY,QAAT,CAAkBz9C,IAAlB,CAAwB,IAAIo3B,OAAJ,CAAa4R,KAAK,CAAC9qC,CAAnB,EAAsB8qC,KAAK,CAAC5qC,CAA5B,EAA+B4qC,KAAK,CAACzY,CAAN,IAAW,CAA1C,CAAxB;AAEA;;AAED,WAAOiV,QAAP;AAEA;AAvCkC,CAApC,GA2CA;;AAEAjvC,MAAM,CAACme,MAAP,CAAek+G,IAAI,CAACj9H,SAApB,EAA+B;AAE9BwuJ,EAAAA,UAAU,EAAE,UAAW/7G,MAAX,EAAoB;AAE/B9iB,IAAAA,OAAO,CAACC,IAAR,CAAc,iEAAd;AACA,WAAO,KAAK4iB,aAAL,CAAoBC,MAApB,CAAP;AAEA;AAP6B,CAA/B,GAWA;;AAEA,SAASg8G,kBAAT,CAA6Bh8G,MAA7B,EAAsC;AAErC9iB,EAAAA,OAAO,CAACC,IAAR,CAAc,mFAAd;AAEA2qG,EAAAA,gBAAgB,CAACh6H,IAAjB,CAAuB,IAAvB,EAA6BkyC,MAA7B;AACA,OAAKpnC,IAAL,GAAY,YAAZ;AACA,OAAKoL,MAAL,GAAc,IAAd;AAEA;;AAEDg4I,kBAAkB,CAACzuJ,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAe0gG,gBAAgB,CAACv6H,SAAhC,CAA/B,EAEA;;AAEA,SAAS0uJ,YAAT,CAAuBj8G,MAAvB,EAAgC;AAE/B9iB,EAAAA,OAAO,CAACC,IAAR,CAAc,6EAAd;AAEA2qG,EAAAA,gBAAgB,CAACh6H,IAAjB,CAAuB,IAAvB,EAA6BkyC,MAA7B;AACA,OAAKpnC,IAAL,GAAY,YAAZ;AAEA;;AAEDqjJ,YAAY,CAAC1uJ,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAe0gG,gBAAgB,CAACv6H,SAAhC,CAAzB,EAEA;;AAEA,SAAS2uJ,MAAT,CAAiBl8G,MAAjB,EAA0B;AAEzB9iB,EAAAA,OAAO,CAACC,IAAR,CAAc,oEAAd;AAEA2qG,EAAAA,gBAAgB,CAACh6H,IAAjB,CAAuB,IAAvB,EAA6BkyC,MAA7B;AACA,OAAKpnC,IAAL,GAAY,YAAZ;AAEA;;AAEDsjJ,MAAM,CAAC3uJ,SAAP,GAAmBY,MAAM,CAACi5B,MAAP,CAAe0gG,gBAAgB,CAACv6H,SAAhC,CAAnB;AAEAY,MAAM,CAACme,MAAP,CAAe4vI,MAAM,CAAC3uJ,SAAtB,EAAiC;AAEhC4uJ,EAAAA,aAAa,EAAE;AAAW;AAAU;AAEnCj/H,IAAAA,OAAO,CAACyD,KAAR,CAAe,kDAAf;AAEA,GAN+B;AAOhCy7H,EAAAA,qBAAqB,EAAE;AAAW;AAAuB;AAExDl/H,IAAAA,OAAO,CAACyD,KAAR,CAAe,0DAAf;AAEA,GAX+B;AAYhC07H,EAAAA,wBAAwB,EAAE;AAAW;AAAqB;AAEzDn/H,IAAAA,OAAO,CAACyD,KAAR,CAAe,6DAAf;AAEA;AAhB+B,CAAjC,GAoBA;;AAEA,SAAS27H,UAAT,CAAqBj8G,IAArB,EAA4B;AAE3BnjB,EAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,SAAO,IAAI43H,UAAJ,CAAgB10G,IAAhB,CAAP;AAEA;;AAED,SAASk8G,iBAAT,CAA4BrpJ,MAA5B,EAAoChH,KAApC,EAA4C;AAE3CgxB,EAAAA,OAAO,CAACC,IAAR,CAAc,kFAAd;AACA,SAAO,IAAIg3H,SAAJ,CAAejhJ,MAAf,EAAuBhH,KAAvB,CAAP;AAEA;;AAED,SAASswJ,WAAT,CAAsBtpJ,MAAtB,EAA8B/F,GAA9B,EAAoC;AAEnC+vB,EAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd;AACA,SAAO,IAAI+hF,YAAJ,CAAkB,IAAIqT,aAAJ,CAAmBr/G,MAAM,CAACkqC,QAA1B,CAAlB,EAAwD,IAAIs1C,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAEiB,GAAG,KAAKqC,SAAR,GAAoBrC,GAApB,GAA0B;AAAnC,GAAvB,CAAxD,CAAP;AAEA;;AAEDylJ,UAAU,CAACrlJ,SAAX,CAAqBkvJ,SAArB,GAAiC,YAAY;AAE5Cv/H,EAAAA,OAAO,CAACyD,KAAR,CAAe,0FAAf;AAEA,CAJD;;AAMAyxH,cAAc,CAAC7kJ,SAAf,CAAyBq/B,MAAzB,GAAkC,YAAY;AAE7C1P,EAAAA,OAAO,CAACyD,KAAR,CAAe,8DAAf;AAEA,CAJD;;AAMA,SAAS+7H,eAAT,CAA0BxpJ,MAA1B,EAAkC/F,GAAlC,EAAwC;AAEvC+vB,EAAAA,OAAO,CAACC,IAAR,CAAc,8EAAd;AACA,SAAO,IAAI+hF,YAAJ,CAAkB,IAAImB,iBAAJ,CAAuBntG,MAAM,CAACkqC,QAA9B,CAAlB,EAA4D,IAAIs1C,iBAAJ,CAAuB;AAAExmF,IAAAA,KAAK,EAAEiB,GAAG,KAAKqC,SAAR,GAAoBrC,GAApB,GAA0B;AAAnC,GAAvB,CAA5D,CAAP;AAEA,EAED;;;AAEAgB,MAAM,CAACme,MAAP,CAAeq0G,MAAM,CAACpzH,SAAtB,EAAiC;AAEhCwhI,EAAAA,cAAc,EAAE,UAAWrvH,GAAX,EAAiB;AAEhCwd,IAAAA,OAAO,CAACC,IAAR,CAAc,sGAAd;AACA,WAAOsxG,WAAW,CAACM,cAAZ,CAA4BrvH,GAA5B,CAAP;AAEA;AAP+B,CAAjC;AAWAihH,MAAM,CAACg8B,QAAP,GAAkB;AAEjBv2I,EAAAA,GAAG,EAAE;AAAW;AAAsB;AAErC8W,IAAAA,OAAO,CAACyD,KAAR,CAAe,yFAAf;AAEA,GANgB;AAQjBtU,EAAAA,GAAG,EAAE;AAAW;AAAa;AAE5B6Q,IAAAA,OAAO,CAACyD,KAAR,CAAe,yFAAf;AAEA;AAZgB,CAAlB;;AAgBA,SAASi8H,SAAT,CAAoBh8B,OAApB,EAA8B;AAE7B1jG,EAAAA,OAAO,CAACC,IAAR,CAAc,uDAAd;AACA,SAAO,IAAIskG,UAAJ,CAAgBb,OAAhB,CAAP;AAEA;;AAED,SAASi8B,mBAAT,CAA8Bj8B,OAA9B,EAAwC;AAEvC1jG,EAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA,SAAO,IAAIumG,iBAAJ,CAAuB9C,OAAvB,CAAP;AAEA;;AAEDzyH,MAAM,CAACme,MAAP,CAAeyjH,YAAY,CAACxiI,SAA5B,EAAuC;AAEtCuvJ,EAAAA,cAAc,EAAE,UAAWjrJ,KAAX,EAAmB;AAElCqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,+EAAd;AACA,WAAO,KAAKmkG,eAAL,CAAsBzvH,KAAtB,CAAP;AAEA;AAPqC,CAAvC,GAWA;;AAEA1D,MAAM,CAACme,MAAP,CAAe0kI,IAAI,CAACzjJ,SAApB,EAA+B;AAE9BkzB,EAAAA,MAAM,EAAE,UAAW+jG,cAAX,EAA4B;AAEnCtnG,IAAAA,OAAO,CAACC,IAAR,CAAc,yDAAd;AACA,WAAO,KAAKujB,SAAL,CAAgB8jF,cAAhB,CAAP;AAEA,GAP6B;AAQ9Bu4B,EAAAA,KAAK,EAAE,YAAY;AAElB7/H,IAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACA,WAAO,KAAKsjB,OAAL,EAAP;AAEA,GAb6B;AAc9Bu8G,EAAAA,iBAAiB,EAAE,UAAW10I,GAAX,EAAiB;AAEnC4U,IAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA,WAAO,KAAKkkB,aAAL,CAAoB/4B,GAApB,CAAP;AAEA,GAnB6B;AAoB9B+3B,EAAAA,IAAI,EAAE,UAAWmkF,cAAX,EAA4B;AAEjCtnG,IAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AACA,WAAO,KAAKwjB,OAAL,CAAc6jF,cAAd,CAAP;AAEA;AAzB6B,CAA/B;AA4BAr2H,MAAM,CAACme,MAAP,CAAeoyB,IAAI,CAACnxC,SAApB,EAA+B;AAE9BkzB,EAAAA,MAAM,EAAE,UAAW+jG,cAAX,EAA4B;AAEnCtnG,IAAAA,OAAO,CAACC,IAAR,CAAc,yDAAd;AACA,WAAO,KAAKujB,SAAL,CAAgB8jF,cAAhB,CAAP;AAEA,GAP6B;AAQ9Bu4B,EAAAA,KAAK,EAAE,YAAY;AAElB7/H,IAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACA,WAAO,KAAKsjB,OAAL,EAAP;AAEA,GAb6B;AAc9Bu8G,EAAAA,iBAAiB,EAAE,UAAW10I,GAAX,EAAiB;AAEnC4U,IAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA,WAAO,KAAKkkB,aAAL,CAAoB/4B,GAApB,CAAP;AAEA,GAnB6B;AAoB9B20I,EAAAA,oBAAoB,EAAE,UAAW17G,MAAX,EAAoB;AAEzCrkB,IAAAA,OAAO,CAACC,IAAR,CAAc,8EAAd;AACA,WAAO,KAAKmkB,gBAAL,CAAuBC,MAAvB,CAAP;AAEA,GAzB6B;AA0B9BlB,EAAAA,IAAI,EAAE,UAAWmkF,cAAX,EAA4B;AAEjCtnG,IAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AACA,WAAO,KAAKwjB,OAAL,CAAc6jF,cAAd,CAAP;AAEA;AA/B6B,CAA/B;AAkCAr2H,MAAM,CAACme,MAAP,CAAeq2B,MAAM,CAACp1C,SAAtB,EAAiC;AAEhCwvJ,EAAAA,KAAK,EAAE,YAAY;AAElB7/H,IAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,WAAO,KAAKsjB,OAAL,EAAP;AAEA;AAP+B,CAAjC;;AAWAgoB,OAAO,CAACl7D,SAAR,CAAkB2vJ,aAAlB,GAAkC,UAAWriI,CAAX,EAAe;AAEhDqC,EAAAA,OAAO,CAACC,IAAR,CAAc,iFAAd;AACA,SAAO,KAAK2rC,uBAAL,CAA8BjuC,CAA9B,CAAP;AAEA,CALD;;AAOAs2H,KAAK,CAAC5jJ,SAAN,CAAgBkzB,MAAhB,GAAyB,UAAW+jG,cAAX,EAA4B;AAEpDtnG,EAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,SAAO,KAAKujB,SAAL,CAAgB8jF,cAAhB,CAAP;AAEA,CALD;;AAOAr2H,MAAM,CAACme,MAAP,CAAewN,SAAf,EAA0B;AAEzBqjI,EAAAA,QAAQ,EAAE,YAAY;AAErBjgI,IAAAA,OAAO,CAACC,IAAR,CAAc,yEAAd;AACA,WAAO1wB,IAAI,CAAC2tB,MAAL,EAAP;AAEA,GAPwB;AASzBgjI,EAAAA,iBAAiB,EAAE,UAAWvrJ,KAAX,EAAmB;AAErCqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,0EAAd;AACA,WAAOrD,SAAS,CAACsC,eAAV,CAA2BvqB,KAA3B,CAAP;AAEA,GAdwB;AAgBzBwrJ,EAAAA,cAAc,EAAE,UAAWxrJ,KAAX,EAAmB;AAElCqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd;AACA,WAAOrD,SAAS,CAACmC,cAAV,CAA0BpqB,KAA1B,CAAP;AAEA;AArBwB,CAA1B;AAyBA1D,MAAM,CAACme,MAAP,CAAeoU,OAAO,CAACnzB,SAAvB,EAAkC;AAEjC+vJ,EAAAA,oBAAoB,EAAE,UAAW1jI,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEhD2kB,IAAAA,OAAO,CAACC,IAAR,CAAc,qFAAd;AACA,WAAO,KAAK5tB,OAAL,CAAcqqB,KAAd,EAAqBrhB,MAArB,CAAP;AAEA,GAPgC;AAQjCglJ,EAAAA,eAAe,EAAE,UAAWriH,MAAX,EAAoB;AAEpChe,IAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AACA,WAAO+d,MAAM,CAAC1c,YAAP,CAAqB,IAArB,CAAP;AAEA,GAbgC;AAcjCg/H,EAAAA,oBAAoB,EAAE;AAAW;AAAU;AAE1CtgI,IAAAA,OAAO,CAACyD,KAAR,CAAe,0DAAf;AAEA,GAlBgC;AAmBjC88H,EAAAA,sBAAsB,EAAE,UAAWp9H,SAAX,EAAuB;AAE9CnD,IAAAA,OAAO,CAACC,IAAR,CAAc,0GAAd;AACA,WAAOkD,SAAS,CAAC7B,YAAV,CAAwB,IAAxB,CAAP;AAEA,GAxBgC;AAyBjCk/H,EAAAA,mBAAmB,EAAE;AAAW;AAA8B;AAE7DxgI,IAAAA,OAAO,CAACyD,KAAR,CAAe,yDAAf;AAEA;AA7BgC,CAAlC;AAiCAxyB,MAAM,CAACme,MAAP,CAAe6lB,OAAO,CAAC5kC,SAAvB,EAAkC;AAEjCowJ,EAAAA,eAAe,EAAE,UAAW9iI,CAAX,EAAe;AAE/BqC,IAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA,WAAO,KAAK2V,YAAL,CAAmBjY,CAAnB,CAAP;AAEA,GAPgC;AAQjCyiI,EAAAA,oBAAoB,EAAE,UAAW1jI,KAAX,EAAkBrhB,MAAlB,EAA2B;AAEhD2kB,IAAAA,OAAO,CAACC,IAAR,CAAc,qFAAd;AACA,WAAO,KAAK5tB,OAAL,CAAcqqB,KAAd,EAAqBrhB,MAArB,CAAP;AAEA,GAbgC;AAcjCqlJ,EAAAA,WAAW,EAAE,YAAY;AAExB1gI,IAAAA,OAAO,CAACC,IAAR,CAAc,sGAAd;AACA,WAAO,IAAI6R,OAAJ,GAAc+C,mBAAd,CAAmC,IAAnC,EAAyC,CAAzC,CAAP;AAEA,GAnBgC;AAoBjCuI,EAAAA,yBAAyB,EAAE,UAAWlpC,CAAX,EAAe;AAEzC8rB,IAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AACA,WAAO,KAAK4W,0BAAL,CAAiC3iC,CAAjC,CAAP;AAEA,GAzBgC;AA0BjCysJ,EAAAA,eAAe,EAAE,YAAY;AAE5B3gI,IAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AAEA,GA9BgC;AA+BjCogI,EAAAA,eAAe,EAAE,UAAWriH,MAAX,EAAoB;AAEpChe,IAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AACA,WAAO+d,MAAM,CAAC3S,YAAP,CAAqB,IAArB,CAAP;AAEA,GApCgC;AAqCjCu1H,EAAAA,eAAe,EAAE,UAAW5iH,MAAX,EAAoB;AAEpChe,IAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AACA,WAAO+d,MAAM,CAAC3S,YAAP,CAAqB,IAArB,CAAP;AAEA,GA1CgC;AA2CjCi1H,EAAAA,oBAAoB,EAAE;AAAW;AAAU;AAE1CtgI,IAAAA,OAAO,CAACyD,KAAR,CAAe,0DAAf;AAEA,GA/CgC;AAgDjCo9H,EAAAA,UAAU,EAAE,UAAW9wJ,CAAX,EAAe;AAE1BiwB,IAAAA,OAAO,CAACC,IAAR,CAAc,kGAAd;AACAlwB,IAAAA,CAAC,CAACsjC,kBAAF,CAAsB,IAAtB;AAEA,GArDgC;AAsDjCytH,EAAAA,WAAW,EAAE,UAAW9iH,MAAX,EAAoB;AAEhChe,IAAAA,OAAO,CAACC,IAAR,CAAc,4FAAd;AACA,WAAO+d,MAAM,CAAC3S,YAAP,CAAqB,IAArB,CAAP;AAEA,GA3DgC;AA4DjCxD,EAAAA,SAAS,EAAE,YAAY;AAEtB7H,IAAAA,OAAO,CAACyD,KAAR,CAAe,+CAAf;AAEA,GAhEgC;AAiEjC8Z,EAAAA,OAAO,EAAE,YAAY;AAEpBvd,IAAAA,OAAO,CAACyD,KAAR,CAAe,6CAAf;AAEA,GArEgC;AAsEjC+Z,EAAAA,OAAO,EAAE,YAAY;AAEpBxd,IAAAA,OAAO,CAACyD,KAAR,CAAe,6CAAf;AAEA,GA1EgC;AA2EjCga,EAAAA,OAAO,EAAE,YAAY;AAEpBzd,IAAAA,OAAO,CAACyD,KAAR,CAAe,6CAAf;AAEA,GA/EgC;AAgFjCs9H,EAAAA,YAAY,EAAE,YAAY;AAEzB/gI,IAAAA,OAAO,CAACyD,KAAR,CAAe,kDAAf;AAEA,GApFgC;AAqFjC88H,EAAAA,sBAAsB,EAAE,UAAWp9H,SAAX,EAAuB;AAE9CnD,IAAAA,OAAO,CAACC,IAAR,CAAc,0GAAd;AACA,WAAOkD,SAAS,CAACkI,YAAV,CAAwB,IAAxB,CAAP;AAEA,GA1FgC;AA2FjCm1H,EAAAA,mBAAmB,EAAE;AAAW;AAA8B;AAE7DxgI,IAAAA,OAAO,CAACyD,KAAR,CAAe,yDAAf;AAEA,GA/FgC;AAgGjCu9H,EAAAA,WAAW,EAAE,UAAWhpJ,IAAX,EAAiBC,KAAjB,EAAwBE,MAAxB,EAAgCD,GAAhC,EAAqCqhC,IAArC,EAA2CC,GAA3C,EAAiD;AAE7DxZ,IAAAA,OAAO,CAACC,IAAR,CAAc,sHAAd;AACA,WAAO,KAAKqZ,eAAL,CAAsBthC,IAAtB,EAA4BC,KAA5B,EAAmCC,GAAnC,EAAwCC,MAAxC,EAAgDohC,IAAhD,EAAsDC,GAAtD,CAAP;AAEA;AArGgC,CAAlC;;AAyGA6P,KAAK,CAACh5C,SAAN,CAAgB4wJ,kBAAhB,GAAqC,UAAWn3G,IAAX,EAAkB;AAEtD9pB,EAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,SAAO,KAAK+pB,cAAL,CAAqBF,IAArB,CAAP;AAEA,CALD;;AAOArc,UAAU,CAACp9B,SAAX,CAAqBgwJ,eAArB,GAAuC,UAAWriH,MAAX,EAAoB;AAE1Dhe,EAAAA,OAAO,CAACC,IAAR,CAAc,iHAAd;AACA,SAAO+d,MAAM,CAAC7L,eAAP,CAAwB,IAAxB,CAAP;AAEA,CALD;;AAOAlhC,MAAM,CAACme,MAAP,CAAek3B,GAAG,CAACj2C,SAAnB,EAA8B;AAE7ByvJ,EAAAA,iBAAiB,EAAE,UAAW10I,GAAX,EAAiB;AAEnC4U,IAAAA,OAAO,CAACC,IAAR,CAAc,uEAAd;AACA,WAAO,KAAKkkB,aAAL,CAAoB/4B,GAApB,CAAP;AAEA,GAP4B;AAQ7B81I,EAAAA,mBAAmB,EAAE,UAAW18G,KAAX,EAAmB;AAEvCxkB,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKskB,eAAL,CAAsBC,KAAtB,CAAP;AAEA,GAb4B;AAc7Bu7G,EAAAA,oBAAoB,EAAE,UAAW17G,MAAX,EAAoB;AAEzCrkB,IAAAA,OAAO,CAACC,IAAR,CAAc,6EAAd;AACA,WAAO,KAAKmkB,gBAAL,CAAuBC,MAAvB,CAAP;AAEA;AAnB4B,CAA9B;AAuBApzC,MAAM,CAACme,MAAP,CAAe67B,QAAQ,CAAC56C,SAAxB,EAAmC;AAElCg5G,EAAAA,IAAI,EAAE,YAAY;AAEjBrpF,IAAAA,OAAO,CAACC,IAAR,CAAc,yDAAd;AACA,WAAO,KAAKosB,OAAL,EAAP;AAEA,GAPiC;AAQlC80G,EAAAA,kBAAkB,EAAE,UAAWz9G,KAAX,EAAkBhzC,MAAlB,EAA2B;AAE9CsvB,IAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;AACA,WAAO,KAAKmrB,YAAL,CAAmB1H,KAAnB,EAA0BhzC,MAA1B,CAAP;AAEA,GAbiC;AAclC0wJ,EAAAA,QAAQ,EAAE,UAAW1wJ,MAAX,EAAoB;AAE7BsvB,IAAAA,OAAO,CAACC,IAAR,CAAc,iEAAd;AACA,WAAO,KAAKqsB,WAAL,CAAkB57C,MAAlB,CAAP;AAEA,GAnBiC;AAoBlCwjC,EAAAA,MAAM,EAAE,UAAWxjC,MAAX,EAAoB;AAE3BsvB,IAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,WAAO,KAAKirB,SAAL,CAAgBx6C,MAAhB,CAAP;AAEA,GAzBiC;AA0BlC8zC,EAAAA,KAAK,EAAE,UAAW9zC,MAAX,EAAoB;AAE1BsvB,IAAAA,OAAO,CAACC,IAAR,CAAc,2DAAd;AACA,WAAO,KAAKssB,QAAL,CAAe77C,MAAf,CAAP;AAEA;AA/BiC,CAAnC;AAmCAO,MAAM,CAACme,MAAP,CAAe67B,QAAf,EAAyB;AAExBk2G,EAAAA,kBAAkB,EAAE,UAAWz9G,KAAX,EAAkB/zC,CAAlB,EAAqBD,CAArB,EAAwB0E,CAAxB,EAA2B1D,MAA3B,EAAoC;AAEvDsvB,IAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;AACA,WAAOgrB,QAAQ,CAACG,YAAT,CAAuB1H,KAAvB,EAA8B/zC,CAA9B,EAAiCD,CAAjC,EAAoC0E,CAApC,EAAuC1D,MAAvC,CAAP;AAEA,GAPuB;AAQxBwjC,EAAAA,MAAM,EAAE,UAAWvkC,CAAX,EAAcD,CAAd,EAAiB0E,CAAjB,EAAoB1D,MAApB,EAA6B;AAEpCsvB,IAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,WAAOgrB,QAAQ,CAACC,SAAT,CAAoBv7C,CAApB,EAAuBD,CAAvB,EAA0B0E,CAA1B,EAA6B1D,MAA7B,CAAP;AAEA;AAbuB,CAAzB;AAiBAO,MAAM,CAACme,MAAP,CAAeq/G,KAAK,CAACp+H,SAArB,EAAgC;AAE/BgxJ,EAAAA,gBAAgB,EAAE,UAAW55B,SAAX,EAAuB;AAExCznG,IAAAA,OAAO,CAACC,IAAR,CAAc,kFAAd;AACA,WAAO,KAAK0uF,aAAL,CAAoB8Y,SAApB,CAAP;AAEA,GAP8B;AAQ/B65B,EAAAA,OAAO,EAAE,UAAW/kJ,OAAX,EAAqB;AAE7ByjB,IAAAA,OAAO,CAACC,IAAR,CAAc,0EAAd;AACA,WAAO,IAAIktF,eAAJ,CAAqB,IAArB,EAA2B5wG,OAA3B,CAAP;AAEA,GAb8B;AAc/BglJ,EAAAA,YAAY,EAAE,UAAWhlJ,OAAX,EAAqB;AAElCyjB,IAAAA,OAAO,CAACC,IAAR,CAAc,6EAAd;AACA,WAAO,IAAI60F,aAAJ,CAAmB,IAAnB,EAAyBv4G,OAAzB,CAAP;AAEA;AAnB8B,CAAhC;AAuBAtL,MAAM,CAACme,MAAP,CAAe8Q,OAAO,CAAC7vB,SAAvB,EAAkC;AAEjCmxJ,EAAAA,aAAa,EAAE,UAAWr+H,SAAX,EAAsBroB,KAAtB,EAA6BO,MAA7B,EAAsC;AAEpD2kB,IAAAA,OAAO,CAACC,IAAR,CAAc,6EAAd;AACA,WAAO,KAAKiD,mBAAL,CAA0BC,SAA1B,EAAqCroB,KAArC,EAA4CO,MAA5C,CAAP;AAEA,GAPgC;AAQjComJ,EAAAA,mBAAmB,EAAE,UAAW1xJ,CAAX,EAAe;AAEnCiwB,IAAAA,OAAO,CAACC,IAAR,CAAc,mFAAd;AACA,WAAO,KAAKyC,mBAAL,CAA0B3yB,CAA1B,CAAP;AAEA,GAbgC;AAcjC2xJ,EAAAA,eAAe,EAAE,YAAY;AAE5B1hI,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKiC,eAAL,EAAP;AAEA;AAnBgC,CAAlC;AAuBAjxB,MAAM,CAACme,MAAP,CAAe0iB,OAAO,CAACzhC,SAAvB,EAAkC;AAEjCsxJ,EAAAA,0BAA0B,EAAE,YAAY;AAEvC3hI,IAAAA,OAAO,CAACyD,KAAR,CAAe,2GAAf;AAEA,GANgC;AAOjCm+H,EAAAA,sBAAsB,EAAE,YAAY;AAEnC5hI,IAAAA,OAAO,CAACyD,KAAR,CAAe,mGAAf;AAEA,GAXgC;AAYjCo+H,EAAAA,qBAAqB,EAAE,UAAWlkI,CAAX,EAAe;AAErCqC,IAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,WAAO,KAAK0U,qBAAL,CAA4BhX,CAA5B,CAAP;AAEA,GAjBgC;AAkBjCmkI,EAAAA,kBAAkB,EAAE,UAAWnkI,CAAX,EAAe;AAElCqC,IAAAA,OAAO,CAACC,IAAR,CAAc,iFAAd;AACA,WAAO,KAAK2U,kBAAL,CAAyBjX,CAAzB,CAAP;AAEA,GAvBgC;AAwBjCokI,EAAAA,mBAAmB,EAAE,UAAWjnJ,KAAX,EAAkBwrB,MAAlB,EAA2B;AAE/CtG,IAAAA,OAAO,CAACC,IAAR,CAAc,mFAAd;AACA,WAAO,KAAK4U,mBAAL,CAA0BvO,MAA1B,EAAkCxrB,KAAlC,CAAP;AAEA,GA7BgC;AA8BjCknJ,EAAAA,eAAe,EAAE,UAAWrkI,CAAX,EAAe;AAE/BqC,IAAAA,OAAO,CAACC,IAAR,CAAc,qFAAd;AACA,WAAO,KAAKoL,YAAL,CAAmB1N,CAAnB,CAAP;AAEA,GAnCgC;AAoCjC6jI,EAAAA,aAAa,EAAE,UAAWr+H,SAAX,EAAsBroB,KAAtB,EAA6BO,MAA7B,EAAsC;AAEpD2kB,IAAAA,OAAO,CAACC,IAAR,CAAc,6EAAd;AACA,WAAO,KAAKiD,mBAAL,CAA0BC,SAA1B,EAAqCroB,KAArC,EAA4CO,MAA5C,CAAP;AAEA,GAzCgC;AA0CjComJ,EAAAA,mBAAmB,EAAE,UAAW1xJ,CAAX,EAAe;AAEnCiwB,IAAAA,OAAO,CAACC,IAAR,CAAc,mFAAd;AACA,WAAO,KAAKyC,mBAAL,CAA0B3yB,CAA1B,CAAP;AAEA,GA/CgC;AAgDjC2xJ,EAAAA,eAAe,EAAE,YAAY;AAE5B1hI,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKiC,eAAL,EAAP;AAEA;AArDgC,CAAlC;AAyDAjxB,MAAM,CAACme,MAAP,CAAe4b,OAAO,CAAC36B,SAAvB,EAAkC;AAEjCmxJ,EAAAA,aAAa,EAAE,UAAWr+H,SAAX,EAAsBroB,KAAtB,EAA6BO,MAA7B,EAAsC;AAEpD2kB,IAAAA,OAAO,CAACC,IAAR,CAAc,6EAAd;AACA,WAAO,KAAKiD,mBAAL,CAA0BC,SAA1B,EAAqCroB,KAArC,EAA4CO,MAA5C,CAAP;AAEA,GAPgC;AAQjCqmJ,EAAAA,eAAe,EAAE,YAAY;AAE5B1hI,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKiC,eAAL,EAAP;AAEA;AAbgC,CAAlC,GAiBA;;AAEAjxB,MAAM,CAACme,MAAP,CAAegyC,QAAQ,CAAC/wD,SAAxB,EAAmC;AAElC4xJ,EAAAA,eAAe,EAAE,YAAY;AAE5BjiI,IAAAA,OAAO,CAACyD,KAAR,CAAe,sDAAf;AAEA,GANiC;AAOlC49E,EAAAA,oBAAoB,EAAE,YAAY;AAEjCrhF,IAAAA,OAAO,CAACyD,KAAR,CAAe,0GAAf;AAEA,GAXiC;AAYlCy+H,EAAAA,WAAW,EAAE,UAAW57H,MAAX,EAAoB;AAEhCtG,IAAAA,OAAO,CAACC,IAAR,CAAc,qEAAd;AACA,WAAO,KAAKoL,YAAL,CAAmB/E,MAAnB,CAAP;AAEA;AAjBiC,CAAnC;AAqBAr1B,MAAM,CAACme,MAAP,CAAeysB,QAAQ,CAACxrC,SAAxB,EAAmC;AAElC8xJ,EAAAA,cAAc,EAAE,UAAWt7I,IAAX,EAAkB;AAEjCmZ,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKwe,eAAL,CAAsB53B,IAAtB,CAAP;AAEA,GAPiC;AAQlCu7I,EAAAA,WAAW,EAAE,YAAY;AAExBpiI,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AAEA,GAZiC;AAalC4H,EAAAA,SAAS,EAAE,UAAW8V,QAAX,EAAqB1N,IAArB,EAA4B;AAEtCjQ,IAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AACA,WAAO,KAAKyd,eAAL,CAAsBzN,IAAtB,EAA4B0N,QAA5B,CAAP;AAEA,GAlBiC;AAmBlC0kH,EAAAA,gBAAgB,EAAE,YAAY;AAE7BriI,IAAAA,OAAO,CAACyD,KAAR,CAAe,gHAAf;AAEA,GAvBiC;AAwBlCy+H,EAAAA,WAAW,EAAE,UAAW57H,MAAX,EAAoB;AAEhCtG,IAAAA,OAAO,CAACC,IAAR,CAAc,qEAAd;AACA,WAAO,KAAKoL,YAAL,CAAmB/E,MAAnB,CAAP;AAEA;AA7BiC,CAAnC;AAiCAr1B,MAAM,CAACwV,gBAAP,CAAyBo1B,QAAQ,CAACxrC,SAAlC,EAA6C;AAE5CiyJ,EAAAA,UAAU,EAAE;AACXnzI,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AACA,aAAO,KAAKsH,QAAL,CAAcnI,KAArB;AAEA,KANU;AAOXW,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,qDAAd;AACA,WAAKsH,QAAL,CAAcnI,KAAd,GAAsBzqB,KAAtB;AAEA;AAZU,GAFgC;AAgB5C4tJ,EAAAA,aAAa,EAAE;AACdpzI,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,+FAAd;AAEA,KALa;AAMdF,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,+FAAd;AAEA;AAVa;AAhB6B,CAA7C;AA+BAhvB,MAAM,CAACme,MAAP,CAAemwC,IAAI,CAAClvD,SAApB,EAA+B;AAE9BmyJ,EAAAA,WAAW,EAAE,YAAY;AAExBxiI,IAAAA,OAAO,CAACyD,KAAR,CAAe,2LAAf;AAEA;AAN6B,CAA/B;AAUAxyB,MAAM,CAACwV,gBAAP,CAAyB84C,IAAI,CAAClvD,SAA9B,EAAyC;AAExCoyJ,EAAAA,QAAQ,EAAE;AACTtzI,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACyD,KAAR,CAAe,kGAAf;AACA,aAAO7J,iBAAP;AAEA,KANQ;AAOTmG,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACyD,KAAR,CAAe,sLAAf;AAEA;AAXQ;AAF8B,CAAzC;AAkBAxyB,MAAM,CAACwV,gBAAP,CAAyBk4F,GAAG,CAACtuG,SAA7B,EAAwC;AAEvCorE,EAAAA,OAAO,EAAE;AACRtsD,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA,aAAO,KAAK4+E,MAAZ;AAEA;AANO;AAF8B,CAAxC;AAaA5tG,MAAM,CAACkE,cAAP,CAAuB4qG,QAAQ,CAAC1vG,SAAhC,EAA2C,kBAA3C,EAA+D;AAE9D8e,EAAAA,GAAG,EAAE,YAAY;AAEhB6Q,IAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AAEA,GAN6D;AAO9DF,EAAAA,GAAG,EAAE,YAAY;AAEhBC,IAAAA,OAAO,CAACC,IAAR,CAAc,oDAAd;AAEA;AAX6D,CAA/D;;AAeAg/E,WAAW,CAAC5uG,SAAZ,CAAsBqyJ,SAAtB,GAAkC,YAAY;AAE7C1iI,EAAAA,OAAO,CAACyD,KAAR,CAAe,kDAAf;AAEA,CAJD;;AAMAxyB,MAAM,CAACkE,cAAP,CAAuBgyH,KAAK,CAAC92H,SAA7B,EAAwC,sBAAxC,EAAgE;AAE/D8e,EAAAA,GAAG,EAAE,YAAY;AAEhB6Q,IAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,WAAO,KAAKmnG,kBAAZ;AAEA,GAP8D;AAQ/DrnG,EAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,SAAKmnG,kBAAL,GAA0BzyH,KAA1B;AAEA;AAb8D,CAAhE,GAiBA;;AAEAuzD,iBAAiB,CAAC73D,SAAlB,CAA4BsyJ,OAA5B,GAAsC,UAAW/5F,WAAX,EAAwBL,SAAxB,EAAoC;AAEzEvoC,EAAAA,OAAO,CAACC,IAAR,CAAc,oDACZ,8DADF;AAGA,MAAKsoC,SAAS,KAAKj2D,SAAnB,EAA+B,KAAKi2D,SAAL,GAAiBA,SAAjB;AAC/B,OAAKI,cAAL,CAAqBC,WAArB;AAEA,CARD,EAUA;;;AAEA33D,MAAM,CAACwV,gBAAP,CAAyBmoH,KAAK,CAACv+H,SAA/B,EAA0C;AACzCuyJ,EAAAA,UAAU,EAAE;AACX7iI,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,4CAAd;AAEA;AALU,GAD6B;AAQzC4iI,EAAAA,eAAe,EAAE;AAChB9iI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmBo1B,GAAnB,GAAyBxzD,KAAzB;AAEA;AANe,GARwB;AAgBzCmuJ,EAAAA,gBAAgB,EAAE;AACjB/iI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmB/6B,IAAnB,GAA0BrD,KAA1B;AAEA;AANgB,GAhBuB;AAwBzCouJ,EAAAA,iBAAiB,EAAE;AAClBhjI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,8DAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmB96B,KAAnB,GAA2BtD,KAA3B;AAEA;AANiB,GAxBsB;AAgCzCquJ,EAAAA,eAAe,EAAE;AAChBjjI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmB76B,GAAnB,GAAyBvD,KAAzB;AAEA;AANe,GAhCwB;AAwCzCsuJ,EAAAA,kBAAkB,EAAE;AACnBljI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmB56B,MAAnB,GAA4BxD,KAA5B;AAEA;AANkB,GAxCqB;AAgDzC+6D,EAAAA,gBAAgB,EAAE;AACjB3vC,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmBwG,IAAnB,GAA0B5kC,KAA1B;AAEA;AANgB,GAhDuB;AAwDzCg7D,EAAAA,eAAe,EAAE;AAChB5vC,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,WAAKm7C,MAAL,CAAYroC,MAAZ,CAAmByG,GAAnB,GAAyB7kC,KAAzB;AAEA;AANe,GAxDwB;AAgEzCuuJ,EAAAA,mBAAmB,EAAE;AACpBnjI,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,gHAAd;AAEA;AALmB,GAhEoB;AAuEzC0uC,EAAAA,UAAU,EAAE;AACX5uC,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAAd;AACA,WAAKm7C,MAAL,CAAYyf,IAAZ,GAAmBlmF,KAAnB;AAEA;AANU,GAvE6B;AA+EzCwuJ,EAAAA,cAAc,EAAE;AACfpjI,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,gDAAd;AAEA;AALc,GA/EyB;AAsFzCmjI,EAAAA,cAAc,EAAE;AACfrjI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AACA,WAAKm7C,MAAL,CAAY2f,OAAZ,CAAoB7/E,KAApB,GAA4BvG,KAA5B;AAEA;AANc,GAtFyB;AA8FzC0uJ,EAAAA,eAAe,EAAE;AAChBtjI,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,8DAAd;AACA,WAAKm7C,MAAL,CAAY2f,OAAZ,CAAoB5/E,MAApB,GAA6BxG,KAA7B;AAEA;AANe;AA9FwB,CAA1C,GAwGA;;AAEA1D,MAAM,CAACwV,gBAAP,CAAyBkvC,eAAe,CAACtlD,SAAzC,EAAoD;AAEnDH,EAAAA,MAAM,EAAE;AACPif,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,yEAAd;AACA,aAAO,KAAKvD,KAAL,CAAWxsB,MAAlB;AAEA;AANM,GAF2C;AAUnDozJ,EAAAA,OAAO,EAAE;AACRn0I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,0EAAd;AACA,aAAO,KAAK41B,KAAL,KAAej6B,gBAAtB;AAEA,KANO;AAORmE,IAAAA,GAAG,EAAE;AAAW;AAAc;AAE7BC,MAAAA,OAAO,CAACC,IAAR,CAAc,0EAAd;AACA,WAAKg2B,QAAL,CAAer6B,gBAAf;AAEA;AAZO;AAV0C,CAApD;AA2BA3qB,MAAM,CAACme,MAAP,CAAeumC,eAAe,CAACtlD,SAA/B,EAA0C;AACzCkzJ,EAAAA,UAAU,EAAE,UAAW5uJ,KAAX,EAAmB;AAE9BqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,oFAAd;AACA,SAAKg2B,QAAL,CAAethD,KAAK,KAAK,IAAV,GAAiBinB,gBAAjB,GAAoCD,eAAnD;AACA,WAAO,IAAP;AAEA,GAPwC;AAQzC6nI,EAAAA,gBAAgB,EAAE;AAAW;AAAgB;AAE5CxjI,IAAAA,OAAO,CAACyD,KAAR,CAAe,8DAAf;AAEA,GAZwC;AAazCggI,EAAAA,QAAQ,EAAE;AAAW;AAAc;AAElCzjI,IAAAA,OAAO,CAACyD,KAAR,CAAe,yHAAf;AAEA;AAjBwC,CAA1C;AAoBAxyB,MAAM,CAACme,MAAP,CAAeqrC,cAAc,CAACpqD,SAA9B,EAAyC;AAExCqzJ,EAAAA,QAAQ,EAAE,UAAW5oJ,KAAX,EAAmB;AAE5BklB,IAAAA,OAAO,CAACC,IAAR,CAAc,oEAAd;AACA,SAAK+6B,QAAL,CAAelgD,KAAf;AAEA,GAPuC;AAQxC6oJ,EAAAA,YAAY,EAAE,UAAW98I,IAAX,EAAiBsc,SAAjB,EAA6B;AAE1CnD,IAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;;AAEA,QAAK,EAAIkD,SAAS,IAAIA,SAAS,CAAC4yB,iBAA3B,KAAkD,EAAI5yB,SAAS,IAAIA,SAAS,CAAC0uC,4BAA3B,CAAvD,EAAmH;AAElH7xC,MAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AAEA,aAAO,KAAKjkB,YAAL,CAAmB6K,IAAnB,EAAyB,IAAI8uC,eAAJ,CAAqB9kD,SAAS,CAAE,CAAF,CAA9B,EAAqCA,SAAS,CAAE,CAAF,CAA9C,CAAzB,CAAP;AAEA;;AAED,QAAKgW,IAAI,KAAK,OAAd,EAAwB;AAEvBmZ,MAAAA,OAAO,CAACC,IAAR,CAAc,yEAAd;AACA,WAAK+6B,QAAL,CAAe73B,SAAf;AAEA,aAAO,IAAP;AAEA;;AAED,WAAO,KAAKnnB,YAAL,CAAmB6K,IAAnB,EAAyBsc,SAAzB,CAAP;AAEA,GA/BuC;AAgCxCygI,EAAAA,WAAW,EAAE,UAAW75G,KAAX,EAAkBpK,KAAlB,EAAyBs1E,WAAzB,EAAuC;AAEnD,QAAKA,WAAW,KAAK3iH,SAArB,EAAiC;AAEhC0tB,MAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd;AAEA;;AAEDD,IAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,SAAKk7B,QAAL,CAAepR,KAAf,EAAsBpK,KAAtB;AAEA,GA3CuC;AA4CxCkkH,EAAAA,cAAc,EAAE,YAAY;AAE3B7jI,IAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,SAAKm7B,WAAL;AAEA,GAjDuC;AAkDxC6mG,EAAAA,eAAe,EAAE,YAAY;AAE5BjiI,IAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AAEA,GAtDuC;AAuDxC6jI,EAAAA,cAAc,EAAE,YAAY;AAE3B9jI,IAAAA,OAAO,CAACC,IAAR,CAAc,2DAAd;AAEA,GA3DuC;AA4DxCplB,EAAAA,eAAe,EAAE,UAAWgM,IAAX,EAAkB;AAElCmZ,IAAAA,OAAO,CAACC,IAAR,CAAc,kFAAd;AAEA,WAAO,KAAKi7B,eAAL,CAAsBr0C,IAAtB,CAAP;AAEA,GAlEuC;AAmExCq7I,EAAAA,WAAW,EAAE,UAAW57H,MAAX,EAAoB;AAEhCtG,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKoL,YAAL,CAAmB/E,MAAnB,CAAP;AAEA;AAxEuC,CAAzC;AA4EAr1B,MAAM,CAACwV,gBAAP,CAAyBg0C,cAAc,CAACpqD,SAAxC,EAAmD;AAElDsiI,EAAAA,SAAS,EAAE;AACVxjH,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACyD,KAAR,CAAe,+DAAf;AACA,aAAO,KAAK80B,MAAZ;AAEA;AANS,GAFuC;AAUlDq6E,EAAAA,OAAO,EAAE;AACRzjH,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,aAAO,KAAKs4B,MAAZ;AAEA;AANO;AAVyC,CAAnD;AAqBAtnD,MAAM,CAACwV,gBAAP,CAAyBsrH,uBAAuB,CAAC1hI,SAAjD,EAA4D;AAE3D0zJ,EAAAA,iBAAiB,EAAE;AAClB50I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,aAAO,KAAKwlD,aAAZ;AAEA,KANiB;AAOlB1lD,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,uFAAd;AACA,WAAKwlD,aAAL,GAAqB9wE,KAArB;AAEA;AAZiB;AAFwC,CAA5D;AAmBA1D,MAAM,CAACwV,gBAAP,CAAyBwsI,SAAS,CAAC5iJ,SAAnC,EAA8C;AAE7C2zJ,EAAAA,aAAa,EAAE;AACd70I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,0FAAd;AACA,aAAO,KAAK1nB,MAAL,CAAY6oG,IAAZ,CAAiBrvG,SAAxB;AAEA,KANa;AAOdguB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0FAAd;AACA,WAAK1nB,MAAL,CAAY6oG,IAAZ,CAAiBrvG,SAAjB,GAA6B4C,KAA7B;AAEA;AAZa;AAF8B,CAA9C;AAmBA1D,MAAM,CAACwV,gBAAP,CAAyBq2F,iBAAiB,CAACzsG,SAA3C,EAAsD;AAErDizJ,EAAAA,OAAO,EAAE;AACRn0I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,aAAO,KAAK41B,KAAL,KAAej6B,gBAAtB;AAEA,KANO;AAORmE,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAKg2B,QAAL,CAAethD,KAAf;AAEA;AAZO;AAF4C,CAAtD;AAmBA1D,MAAM,CAACme,MAAP,CAAe0tF,iBAAiB,CAACzsG,SAAjC,EAA4C;AAC3CkzJ,EAAAA,UAAU,EAAE,UAAW5uJ,KAAX,EAAmB;AAE9BqrB,IAAAA,OAAO,CAACC,IAAR,CAAc,sFAAd;AACA,SAAKg2B,QAAL,CAAethD,KAAK,KAAK,IAAV,GAAiBinB,gBAAjB,GAAoCD,eAAnD;AACA,WAAO,IAAP;AAEA,GAP0C;AAQ3C8nI,EAAAA,QAAQ,EAAE;AAAW;AAAc;AAElCzjI,IAAAA,OAAO,CAACyD,KAAR,CAAe,2HAAf;AAEA;AAZ0C,CAA5C,GAeA;;AAEAxyB,MAAM,CAACme,MAAP,CAAeg+F,qBAAqB,CAAC/8G,SAArC,EAAgD;AAE/C4zJ,EAAAA,SAAS,EAAE,YAAY;AAEtBjkI,IAAAA,OAAO,CAACyD,KAAR,CAAe,6DAAf;AAEA,GAN8C;AAQ/CygI,EAAAA,YAAY,EAAE,YAAY;AAEzBlkI,IAAAA,OAAO,CAACyD,KAAR,CAAe,gEAAf;AAEA,GAZ8C;AAc/C6pF,EAAAA,QAAQ,EAAE,YAAY;AAErBttF,IAAAA,OAAO,CAACyD,KAAR,CAAe,4DAAf;AAEA;AAlB8C,CAAhD,GAsBA;;AAEAxyB,MAAM,CAACwV,gBAAP,CAAyBssI,OAAO,CAAC1iJ,SAAjC,EAA4C;AAE3CizJ,EAAAA,OAAO,EAAE;AACRvjI,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,gFAAd;AAEA;AALO,GAFkC;AAS3CgK,EAAAA,QAAQ,EAAE;AACTt1B,IAAAA,KAAK,EAAE,YAAY;AAElBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,mFAAd;AACA,aAAO,IAAP;AAEA;AANQ;AATiC,CAA5C,GAoBA;;AAEAhvB,MAAM,CAACwV,gBAAP,CAAyBmpC,QAAQ,CAACv/C,SAAlC,EAA6C;AAE5C8zJ,EAAAA,UAAU,EAAE;AACXh1I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAAd;AAEA,KALU;AAMXF,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,+CAAd;AAEA;AAVU,GAFgC;AAe5CmkI,EAAAA,QAAQ,EAAE;AACTj1I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,6CAAd;AAEA,KALQ;AAMTF,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,6CAAd;AAEA;AAVQ,GAfkC;AA4B5CokI,EAAAA,OAAO,EAAE;AACRl1I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,4CAAd;AACA,aAAO,IAAIrrB,KAAJ,EAAP;AAEA;AANO,GA5BmC;AAqC5Cy8H,EAAAA,OAAO,EAAE;AACRliH,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACyD,KAAR,CAAe,WAAW,KAAK/nB,IAAhB,GAAuB,oEAAtC;AAEA,KALO;AAMRqkB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,WAAW,KAAKvkB,IAAhB,GAAuB,oEAArC;AACA,WAAKq0C,WAAL,GAAqBp7C,KAAK,KAAKuc,WAA/B;AAEA;AAXO,GArCmC;AAmD5CowE,EAAAA,WAAW,EAAE;AACZnyE,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,WAAW,KAAKvkB,IAAhB,GAAuB,gEAArC;AACA,aAAO,KAAKm1C,eAAZ;AAEA,KANW;AAOZ9wB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,WAAW,KAAKvkB,IAAhB,GAAuB,gEAArC;AACA,WAAKm1C,eAAL,GAAuBl8C,KAAvB;AAEA;AAZW;AAnD+B,CAA7C;AAoEA1D,MAAM,CAACwV,gBAAP,CAAyB0uE,iBAAiB,CAAC9kF,SAA3C,EAAsD;AAErDi0J,EAAAA,KAAK,EAAE;AACNn1I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,2FAAd;AACA,aAAO,KAAP;AAEA,KANK;AAONF,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,0FAAd;AAEA;AAXK;AAF8C,CAAtD;AAkBAhvB,MAAM,CAACwV,gBAAP,CAAyBwgD,cAAc,CAAC52D,SAAxC,EAAmD;AAElDm3D,EAAAA,WAAW,EAAE;AACZr4C,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,+EAAd;AACA,aAAO,KAAKsnC,UAAL,CAAgBC,WAAvB;AAEA,KANW;AAOZznC,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,gFAAd;AACA,WAAKsnC,UAAL,CAAgBC,WAAhB,GAA8B7yD,KAA9B;AAEA;AAZW;AAFqC,CAAnD,GAmBA;;AAEA1D,MAAM,CAACme,MAAP,CAAe8jF,aAAa,CAAC7iG,SAA7B,EAAwC;AAEvCk0J,EAAAA,WAAW,EAAE,UAAW36F,YAAX,EAAyB56D,KAAzB,EAAgCq2D,KAAhC,EAAuCwF,OAAvC,EAAiD;AAE7D7qC,IAAAA,OAAO,CAACC,IAAR,CAAc,uGAAd;AACA,SAAKyqC,eAAL,CAAsBd,YAAtB;AACA,SAAKgB,KAAL,CAAY57D,KAAZ,EAAmBq2D,KAAnB,EAA0BwF,OAA1B;AAEA,GARsC;AASvC25F,EAAAA,OAAO,EAAE,UAAWlhJ,QAAX,EAAsB;AAE9B0c,IAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,SAAK0wC,gBAAL,CAAuBrtD,QAAvB;AAEA,GAdsC;AAevCmhJ,EAAAA,sBAAsB,EAAE,YAAY;AAEnCzkI,IAAAA,OAAO,CAACC,IAAR,CAAc,2EAAd;AACA,WAAO,KAAKwqC,eAAL,EAAP;AAEA,GApBsC;AAqBvCgX,EAAAA,gBAAgB,EAAE,YAAY;AAE7BzhD,IAAAA,OAAO,CAACC,IAAR,CAAc,mFAAd;AACA,WAAO,KAAK8wC,YAAL,CAAkB0Q,gBAAlB,EAAP;AAEA,GA1BsC;AA2BvCijF,EAAAA,YAAY,EAAE,YAAY;AAEzB1kI,IAAAA,OAAO,CAACC,IAAR,CAAc,sEAAd;AACA,WAAO,KAAK8wC,YAAL,CAAkBxf,SAAzB;AAEA,GAhCsC;AAiCvCozG,EAAAA,YAAY,EAAE,YAAY;AAEzB3kI,IAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,WAAO,KAAKu7C,KAAL,CAAWiF,KAAX,EAAP;AAEA,GAtCsC;AAuCvCmkF,EAAAA,qBAAqB,EAAE,YAAY;AAElC5kI,IAAAA,OAAO,CAACC,IAAR,CAAc,gGAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,mBAArB,CAAP;AAEA,GA5CsC;AA6CvC01I,EAAAA,yBAAyB,EAAE,YAAY;AAEtC7kI,IAAAA,OAAO,CAACC,IAAR,CAAc,yGAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,wBAArB,CAAP;AAEA,GAlDsC;AAmDvC21I,EAAAA,2BAA2B,EAAE,YAAY;AAExC9kI,IAAAA,OAAO,CAACC,IAAR,CAAc,6GAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,0BAArB,CAAP;AAEA,GAxDsC;AAyDvC41I,EAAAA,6BAA6B,EAAE,YAAY;AAE1C/kI,IAAAA,OAAO,CAACC,IAAR,CAAc,oHAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,+BAArB,CAAP;AAEA,GA9DsC;AA+DvC61I,EAAAA,8BAA8B,EAAE,YAAY;AAE3ChlI,IAAAA,OAAO,CAACC,IAAR,CAAc,sHAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,gCAArB,CAAP;AAEA,GApEsC;AAqEvC81I,EAAAA,mBAAmB,EAAE,YAAY;AAEhCjlI,IAAAA,OAAO,CAACC,IAAR,CAAc,6FAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,kBAArB,CAAP;AAEA,GA1EsC;AA2EvC4iE,EAAAA,sBAAsB,EAAE,YAAY;AAEnC/xD,IAAAA,OAAO,CAACC,IAAR,CAAc,qFAAd;AACA,WAAO,KAAK8wC,YAAL,CAAkB0R,cAAzB;AAEA,GAhFsC;AAiFvCyiF,EAAAA,uBAAuB,EAAE,YAAY;AAEpCllI,IAAAA,OAAO,CAACC,IAAR,CAAc,uGAAd;AACA,WAAO,KAAKsnC,UAAL,CAAgBp4C,GAAhB,CAAqB,wBAArB,CAAP;AAEA,GAtFsC;AAuFvCg2I,EAAAA,iBAAiB,EAAE,UAAW1tD,OAAX,EAAqB;AAEvCz3E,IAAAA,OAAO,CAACC,IAAR,CAAc,qEAAd;AACA,SAAK69D,cAAL,CAAqB2Z,OAArB;AAEA,GA5FsC;AA6FvCgC,EAAAA,YAAY,EAAE,YAAY;AAEzBz5E,IAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AAEA,GAjGsC;AAkGvCmlI,EAAAA,YAAY,EAAE,YAAY;AAEzBplI,IAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AAEA,GAtGsC;AAuGvColI,EAAAA,aAAa,EAAE,YAAY;AAE1BrlI,IAAAA,OAAO,CAACC,IAAR,CAAc,yDAAd;AAEA,GA3GsC;AA4GvCqlI,EAAAA,eAAe,EAAE,YAAY;AAE5BtlI,IAAAA,OAAO,CAACC,IAAR,CAAc,2DAAd;AAEA,GAhHsC;AAiHvCslI,EAAAA,cAAc,EAAE,YAAY;AAE3BvlI,IAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AAEA,GArHsC;AAsHvCulI,EAAAA,gBAAgB,EAAE,YAAY;AAE7BxlI,IAAAA,OAAO,CAACC,IAAR,CAAc,4DAAd;AAEA,GA1HsC;AA2HvCwlI,EAAAA,UAAU,EAAE,YAAY;AAEvBzlI,IAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AAEA,GA/HsC;AAgIvC4nE,EAAAA,YAAY,EAAE,YAAY;AAEzB7nE,IAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AAEA,GApIsC;AAqIvCkoE,EAAAA,cAAc,EAAE,YAAY;AAE3BnoE,IAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AAEA,GAzIsC;AA0IvCylI,EAAAA,oBAAoB,EAAE,YAAY;AAEjC1lI,IAAAA,OAAO,CAACC,IAAR,CAAc,8EAAd;AACA,WAAO,KAAKy9D,oBAAL,EAAP;AAEA;AA/IsC,CAAxC;AAmJAzsF,MAAM,CAACwV,gBAAP,CAAyBysF,aAAa,CAAC7iG,SAAvC,EAAkD;AAEjDoiF,EAAAA,gBAAgB,EAAE;AACjBtjE,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK+nE,SAAL,CAAelyB,OAAtB;AAEA,KALgB;AAMjBjlC,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,mEAAd;AACA,WAAKi3D,SAAL,CAAelyB,OAAf,GAAyBrwD,KAAzB;AAEA;AAXgB,GAF+B;AAejDi8E,EAAAA,aAAa,EAAE;AACdzhE,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAK+nE,SAAL,CAAex7E,IAAtB;AAEA,KALa;AAMdqkB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,WAAKi3D,SAAL,CAAex7E,IAAf,GAAsB/G,KAAtB;AAEA;AAXa,GAfkC;AA4BjDgxJ,EAAAA,iBAAiB,EAAE;AAClBx2I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,4FAAd;AACA,aAAO3tB,SAAP;AAEA,KANiB;AAOlBytB,IAAAA,GAAG,EAAE;AAAW;AAAc;AAE7BC,MAAAA,OAAO,CAACC,IAAR,CAAc,4FAAd;AAEA;AAXiB,GA5B8B;AAyCjDqI,EAAAA,OAAO,EAAE;AACRnZ,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;AACA,aAAO,KAAKsI,UAAL,EAAP;AAEA;AANO,GAzCwC;AAiDjDq9H,EAAAA,EAAE,EAAE;AACHz2I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,kDAAd;AACA,aAAO,KAAKsqC,EAAZ;AAEA;AANE,GAjD6C;AAyDjDs7F,EAAAA,UAAU,EAAE;AACX12I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,gHAAd;AACA,aAAO,KAAP;AAEA,KANU;AAOXF,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,gHAAd;AAEA;AAXU,GAzDqC;AAsEjD6lI,EAAAA,WAAW,EAAE;AACZ32I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,+FAAd;AACA,aAAO,KAAP;AAEA,KANW;AAOZF,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,+FAAd;AACA,WAAK+yD,cAAL,GAAwBr+E,KAAK,KAAK,IAAZ,GAAqBqlB,YAArB,GAAoCD,cAA1D;AAEA;AAZW,GAtEoC;AAoFjDgsI,EAAAA,qBAAqB,EAAE;AACtB52I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,+DAAd;AACA,aAAO,GAAP;AAEA,KANqB;AAOtBF,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,+DAAd;AAEA;AAXqB;AApF0B,CAAlD;AAoGAhvB,MAAM,CAACwV,gBAAP,CAAyB21E,cAAc,CAAC/rF,SAAxC,EAAmD;AAElD+zF,EAAAA,QAAQ,EAAE;AACTj1E,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,6FAAd;AACA,aAAO3tB,SAAP;AAEA,KANQ;AAOTytB,IAAAA,GAAG,EAAE;AAAW;AAAiB;AAEhCC,MAAAA,OAAO,CAACC,IAAR,CAAc,6FAAd;AAEA;AAXQ,GAFwC;AAelD+lI,EAAAA,kBAAkB,EAAE;AACnB72I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,uGAAd;AACA,aAAO3tB,SAAP;AAEA,KANkB;AAOnBytB,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,uGAAd;AAEA;AAXkB,GAf8B;AA4BlDgmI,EAAAA,iBAAiB,EAAE;AAClB92I,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,sGAAd;AACA,aAAO3tB,SAAP;AAEA,KANiB;AAOlBytB,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,sGAAd;AAEA;AAXiB;AA5B+B,CAAnD;;AA4CA,SAASimI,qBAAT,CAAgChrJ,KAAhC,EAAuCC,MAAvC,EAA+CoB,OAA/C,EAAyD;AAExDyjB,EAAAA,OAAO,CAACC,IAAR,CAAc,sGAAd;AACA,SAAO,IAAI6qC,qBAAJ,CAA2B5vD,KAA3B,EAAkCqB,OAAlC,CAAP;AAEA,EAED;;;AAEAtL,MAAM,CAACwV,gBAAP,CAAyBmmB,iBAAiB,CAACv8B,SAA3C,EAAsD;AAErD04B,EAAAA,KAAK,EAAE;AACN5Z,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,aAAO,KAAK+M,OAAL,CAAajE,KAApB;AAEA,KANK;AAONhJ,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,WAAK+M,OAAL,CAAajE,KAAb,GAAqBp0B,KAArB;AAEA;AAZK,GAF8C;AAgBrDq0B,EAAAA,KAAK,EAAE;AACN7Z,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,aAAO,KAAK+M,OAAL,CAAahE,KAApB;AAEA,KANK;AAONjJ,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,wDAAd;AACA,WAAK+M,OAAL,CAAahE,KAAb,GAAqBr0B,KAArB;AAEA;AAZK,GAhB8C;AA8BrDs0B,EAAAA,SAAS,EAAE;AACV9Z,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,aAAO,KAAK+M,OAAL,CAAa/D,SAApB;AAEA,KANS;AAOVlJ,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,WAAK+M,OAAL,CAAa/D,SAAb,GAAyBt0B,KAAzB;AAEA;AAZS,GA9B0C;AA4CrDu0B,EAAAA,SAAS,EAAE;AACV/Z,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,aAAO,KAAK+M,OAAL,CAAa9D,SAApB;AAEA,KANS;AAOVnJ,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,gEAAd;AACA,WAAK+M,OAAL,CAAa9D,SAAb,GAAyBv0B,KAAzB;AAEA;AAZS,GA5C0C;AA0DrDy0B,EAAAA,UAAU,EAAE;AACXja,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,kEAAd;AACA,aAAO,KAAK+M,OAAL,CAAa5D,UAApB;AAEA,KANU;AAOXrJ,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,kEAAd;AACA,WAAK+M,OAAL,CAAa5D,UAAb,GAA0Bz0B,KAA1B;AAEA;AAZU,GA1DyC;AAwErD0G,EAAAA,MAAM,EAAE;AACP8T,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,aAAO,KAAK+M,OAAL,CAAa3xB,MAApB;AAEA,KANM;AAOP0kB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,WAAK+M,OAAL,CAAa3xB,MAAb,GAAsB1G,KAAtB;AAEA;AAZM,GAxE6C;AAsFrD+0B,EAAAA,MAAM,EAAE;AACPva,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,aAAO,KAAK+M,OAAL,CAAatD,MAApB;AAEA,KANM;AAOP3J,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,WAAK+M,OAAL,CAAatD,MAAb,GAAsB/0B,KAAtB;AAEA;AAZM,GAtF6C;AAoGrDw0B,EAAAA,MAAM,EAAE;AACPha,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,aAAO,KAAK+M,OAAL,CAAa7D,MAApB;AAEA,KANM;AAOPpJ,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AACA,WAAK+M,OAAL,CAAa7D,MAAb,GAAsBx0B,KAAtB;AAEA;AAZM,GApG6C;AAkHrD+G,EAAAA,IAAI,EAAE;AACLyT,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACA,aAAO,KAAK+M,OAAL,CAAatxB,IAApB;AAEA,KANI;AAOLqkB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACA,WAAK+M,OAAL,CAAatxB,IAAb,GAAoB/G,KAApB;AAEA;AAZI,GAlH+C;AAgIrDi1B,EAAAA,eAAe,EAAE;AAChBza,IAAAA,GAAG,EAAE,YAAY;AAEhB6Q,MAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;AACA,aAAO,KAAK+M,OAAL,CAAapD,eAApB;AAEA,KANe;AAOhB7J,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvBqrB,MAAAA,OAAO,CAACC,IAAR,CAAc,4EAAd;AACA,WAAK+M,OAAL,CAAapD,eAAb,GAA+Bj1B,KAA/B;AAEA;AAZe;AAhIoC,CAAtD,GAiJA;;AAEA1D,MAAM,CAACwV,gBAAP,CAAyB81H,KAAK,CAAClsI,SAA/B,EAA0C;AAEzCyV,EAAAA,IAAI,EAAE;AACLnR,IAAAA,KAAK,EAAE,UAAWutH,IAAX,EAAkB;AAExBliG,MAAAA,OAAO,CAACC,IAAR,CAAc,wEAAd;AACA,YAAMvuB,KAAK,GAAG,IAAd;AACA,YAAMy0J,WAAW,GAAG,IAAIztB,WAAJ,EAApB;AACAytB,MAAAA,WAAW,CAACrgJ,IAAZ,CAAkBo8G,IAAlB,EAAwB,UAAW7wD,MAAX,EAAoB;AAE3C3/D,QAAAA,KAAK,CAACmsI,SAAN,CAAiBxsE,MAAjB;AAEA,OAJD;AAKA,aAAO,IAAP;AAEA;AAbI,GAFmC;AAiBzC+sD,EAAAA,SAAS,EAAE;AACVr+F,IAAAA,GAAG,EAAE,YAAY;AAEhBC,MAAAA,OAAO,CAACC,IAAR,CAAc,gDAAd;AAEA;AALS;AAjB8B,CAA1C;;AA2BA0gH,aAAa,CAACtwI,SAAd,CAAwB+1J,OAAxB,GAAkC,YAAY;AAE7CpmI,EAAAA,OAAO,CAACC,IAAR,CAAc,6DAAd;AACA,SAAO,KAAKghH,gBAAL,EAAP;AAEA,CALD,EAOA;;;AAEAt3E,UAAU,CAACt5D,SAAX,CAAqBg2J,aAArB,GAAqC,UAAWj8F,QAAX,EAAqBC,KAArB,EAA6B;AAEjErqC,EAAAA,OAAO,CAACC,IAAR,CAAc,sDAAd;AACA,SAAO,KAAKyP,MAAL,CAAa06B,QAAb,EAAuBC,KAAvB,CAAP;AAEA,CALD,EAOA;;;AAEA,MAAMi8F,aAAa,GAAG;AAErBhpG,EAAAA,KAAK,EAAE,UAAWipG,SAAX,EAAsBvoG,SAAtB,EAAiCmE,mBAAjC,EAAuD;AAE7DniC,IAAAA,OAAO,CAACC,IAAR,CAAc,iIAAd;AACA,QAAIqG,MAAJ;;AAEA,QAAK03B,SAAS,CAACje,MAAf,EAAwB;AAEvBie,MAAAA,SAAS,CAACr0B,gBAAV,IAA8Bq0B,SAAS,CAAC5zB,YAAV,EAA9B;AAEA9D,MAAAA,MAAM,GAAG03B,SAAS,CAAC13B,MAAnB;AACA03B,MAAAA,SAAS,GAAGA,SAAS,CAAC9d,QAAtB;AAEA;;AAEDqmH,IAAAA,SAAS,CAACjpG,KAAV,CAAiBU,SAAjB,EAA4B13B,MAA5B,EAAoC67B,mBAApC;AAEA,GAlBoB;AAoBrB5+B,EAAAA,MAAM,EAAE,UAAW2c,QAAX,EAAsB;AAE7BlgB,IAAAA,OAAO,CAACC,IAAR,CAAc,2FAAd;AACA,WAAOigB,QAAQ,CAAC3c,MAAT,EAAP;AAEA;AAzBoB,CAAtB;;AA6BAwE,UAAU,CAAC47F,WAAX,GAAyBrxH,SAAzB;;AAEAy1B,UAAU,CAACq+F,WAAX,GAAyB,UAAW5jH,GAAX,EAAgBsmB,OAAhB,EAAyBs5F,MAAzB,EAAiCE,OAAjC,EAA2C;AAEnEtiG,EAAAA,OAAO,CAACC,IAAR,CAAc,sFAAd;AAEA,QAAMmjG,MAAM,GAAG,IAAI4D,aAAJ,EAAf;AACA5D,EAAAA,MAAM,CAACc,cAAP,CAAuB,KAAKP,WAA5B;AAEA,QAAM32F,OAAO,GAAGo2F,MAAM,CAACt9G,IAAP,CAAatD,GAAb,EAAkB4/G,MAAlB,EAA0B9vH,SAA1B,EAAqCgwH,OAArC,CAAhB;AAEA,MAAKx5F,OAAL,EAAekE,OAAO,CAAClE,OAAR,GAAkBA,OAAlB;AAEf,SAAOkE,OAAP;AAEA,CAbD;;AAeAjF,UAAU,CAACy+H,eAAX,GAA6B,UAAWz/B,IAAX,EAAiBj+F,OAAjB,EAA0Bs5F,MAA1B,EAAkCE,OAAlC,EAA4C;AAExEtiG,EAAAA,OAAO,CAACC,IAAR,CAAc,8FAAd;AAEA,QAAMmjG,MAAM,GAAG,IAAI0D,iBAAJ,EAAf;AACA1D,EAAAA,MAAM,CAACc,cAAP,CAAuB,KAAKP,WAA5B;AAEA,QAAM32F,OAAO,GAAGo2F,MAAM,CAACt9G,IAAP,CAAaihH,IAAb,EAAmB3E,MAAnB,EAA2B9vH,SAA3B,EAAsCgwH,OAAtC,CAAhB;AAEA,MAAKx5F,OAAL,EAAekE,OAAO,CAAClE,OAAR,GAAkBA,OAAlB;AAEf,SAAOkE,OAAP;AAEA,CAbD;;AAeAjF,UAAU,CAAC0+H,qBAAX,GAAmC,YAAY;AAE9CzmI,EAAAA,OAAO,CAACyD,KAAR,CAAe,uFAAf;AAEA,CAJD;;AAMAsE,UAAU,CAAC2+H,yBAAX,GAAuC,YAAY;AAElD1mI,EAAAA,OAAO,CAACyD,KAAR,CAAe,2FAAf;AAEA,CAJD,EAMA;;;AAEA,SAASkjI,cAAT,GAA0B;AAEzB3mI,EAAAA,OAAO,CAACyD,KAAR,CAAe,uCAAf;AAEA,EAED;;;AAEA,SAASmjI,UAAT,GAAsB;AAErB5mI,EAAAA,OAAO,CAACyD,KAAR,CAAe,oCAAf;AAEA,EAED;;;AAEA,MAAMojI,UAAU,GAAG;AAElBC,EAAAA,yBAAyB,EAAE;AAAW;AAA4B;AAEjE9mI,IAAAA,OAAO,CAACyD,KAAR,CAAe,sEAAf;AAEA,GANiB;AAQlBsjI,EAAAA,MAAM,EAAE;AAAW;AAA6B;AAE/C/mI,IAAAA,OAAO,CAACyD,KAAR,CAAe,sEAAf;AAEA,GAZiB;AAclB4a,EAAAA,MAAM,EAAE;AAAW;AAA6B;AAE/Cre,IAAAA,OAAO,CAACyD,KAAR,CAAe,sEAAf;AAEA;AAlBiB,CAAnB,EAsBA;;;;AAEA,SAASujI,SAAT,GAAqB;AAEpBhnI,EAAAA,OAAO,CAACyD,KAAR,CAAe,sEAAf;AAEA;;AAED,IAAK,OAAOwd,kBAAP,KAA8B,WAAnC,EAAiD;AAEhD;AACAA,EAAAA,kBAAkB,CAAClnC,aAAnB,CAAkC,IAAImnC,WAAJ,CAAiB,UAAjB,EAA6B;AAAEC,IAAAA,MAAM,EAAE;AACxE8lH,MAAAA,QAAQ,EAAEv3I;AAD8D;AAAV,GAA7B,CAAlC;AAGA;;AAEA;;;;;;;;;ACv0kDD;;AANA;;;;;;;AAQA;;;;;;;;;AAUA,MAAMw3I,YAAY,GAAG;AAEpBC,EAAAA,GAAG,EAAE,CAFe;AAGpBC,EAAAA,KAAK,EAAE,CAHa;AAIpBC,EAAAA,IAAI,EAAE,CAJc;AAKpBC,EAAAA,KAAK,EAAE;AALa,CAArB;AASA;;;;;;;;;;AAQA,MAAMC,UAAN,CAAiB;AAEhB;;;AAIA18H,EAAAA,OAAO,GAAG,CAAE;;AANI;;;AAUjB,IAAIu8B,cAAc,GAAG,0jBAArB;AAEA,IAAID,YAAY,GAAG,8FAAnB;AAEA;;;;AAIA,MAAMqgG,yBAAN,SAAwCvgG,qBAAxC,CAAuD;AAEtD;;;AAIAx0D,EAAAA,WAAW,GAAG;AAEb,UAAM;AAELiJ,MAAAA,IAAI,EAAE,2BAFD;AAILwrD,MAAAA,OAAO,EAAE;AACRugG,QAAAA,aAAa,EAAE;AADP,OAJJ;AAQL7gG,MAAAA,QAAQ,EAAE;AACT8gG,QAAAA,uBAAuB,EAAE,IAAI3U,cAAJ,CAAY,IAAZ,CADhB;AAET4U,QAAAA,sBAAsB,EAAE,IAAI5U,cAAJ,CAAY,IAAZ,CAFf;AAGT6U,QAAAA,YAAY,EAAE,IAAI7U,cAAJ,CAAY,IAAZ,CAHL;AAITjF,QAAAA,SAAS,EAAE,IAAIiF,cAAJ,CAAY,GAAZ,CAJF;AAKT8U,QAAAA,GAAG,EAAE,IAAI9U,cAAJ,CAAY,GAAZ;AALI,OARL;AAgBL3rF,MAAAA,cAhBK;AAiBLD,MAAAA,YAjBK;AAmBL1W,MAAAA,UAAU,EAAE,KAnBP;AAoBLD,MAAAA,SAAS,EAAE;AApBN,KAAN;AAwBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;;AAnCqD;;;AAuCvD,IAAIg2G,gBAAgB,GAAG,q5BAAvB;AAEA;;;;;;;;;;AAUA,MAAMC,aAAN,SAA4B9gG,qBAA5B,CAA2C;AAE1C;;;;;;AAOAx0D,EAAAA,WAAW,CAACoqJ,IAAI,GAAG,KAAR,EAAemL,UAAU,GAAG,KAA5B,EAAmC;AAE7C,UAAM;AAELtsJ,MAAAA,IAAI,EAAE,eAFD;AAILwrD,MAAAA,OAAO,EAAE;AACR+gG,QAAAA,IAAI,EAAEpL,IAAI,GAAG,GAAH,GAAS;AADX,OAJJ;AAQLj2F,MAAAA,QAAQ,EAAE;AACTshG,QAAAA,QAAQ,EAAE,IAAInV,cAAJ,CAAY,IAAIh7F,YAAJ,CAAiB,GAAjB,CAAZ,CADD;AAETowG,QAAAA,QAAQ,EAAE,IAAIpV,cAAJ,CAAY,IAAIh7F,YAAJ,CAAiB,EAAjB,CAAZ,CAFD;AAGTqwG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CAHJ;AAITsV,QAAAA,SAAS,EAAE,IAAItV,cAAJ,CAAY,IAAZ,CAJF;AAKTwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CALF;AAMT5gI,QAAAA,KAAK,EAAE,IAAIqrH,cAAJ,CAAY,GAAZ;AANE,OARL;AAiBL3rF,MAAAA,cAAc,EAAE0gG,gBAjBX;AAkBL3gG,MAAAA,YAlBK;AAoBL1W,MAAAA,UAAU,EAAE,KApBP;AAqBLD,MAAAA,SAAS,EAAE;AArBN,KAAN;AAyBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;;AAEA,QAAGk2G,UAAH,EAAe;AAEd,WAAK9gG,OAAL,CAAaqhG,UAAb,GAA0B,GAA1B;AAEA;;AAED,SAAKC,cAAL;AAEA;AAED;;;;;;;AAMAA,EAAAA,cAAc,GAAG;AAEhB,UAAMC,YAAY,GAAG,UAArB;AACA,UAAMC,QAAQ,GAAG,KAAK9hG,QAAL,CAAcshG,QAAd,CAAuBvzJ,KAAxC;AACA,UAAMg0J,QAAQ,GAAG,KAAK/hG,QAAL,CAAcuhG,QAAd,CAAuBxzJ,KAAxC;AAEA,QAAIi0J,GAAG,GAAG,CAAV;AAAA,QAAaC,GAAG,GAAG,CAAnB;;AAEA,SAAI,IAAIt3J,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAG,EAAnB,EAAuB,EAAEA,CAAzB,EAA4B;AAE3B,YAAMq2B,KAAK,GAAGr2B,CAAC,GAAGk3J,YAAlB;AACA,YAAMn5J,CAAC,GAAGC,IAAI,CAAC0yB,IAAL,CAAU1wB,CAAV,IAAehC,IAAI,CAAC0yB,IAAL,CAAU,EAAV,CAAzB;AACA,YAAM2pB,CAAC,GAAGt8C,CAAC,GAAGC,IAAI,CAAC8vB,GAAL,CAASuI,KAAT,CAAd;AAAA,YAA+B73B,CAAC,GAAGT,CAAC,GAAGC,IAAI,CAAC+vB,GAAL,CAASsI,KAAT,CAAvC;;AAEA,UAAGr2B,CAAC,GAAG,CAAJ,KAAU,CAAb,EAAgB;AAEfo3J,QAAAA,QAAQ,CAACE,GAAG,EAAJ,CAAR,GAAkBj9G,CAAlB;AACA+8G,QAAAA,QAAQ,CAACE,GAAG,EAAJ,CAAR,GAAkB94J,CAAlB;AAEA,OALD,MAKO;AAEN24J,QAAAA,QAAQ,CAACE,GAAG,EAAJ,CAAR,GAAkBh9G,CAAlB;AACA88G,QAAAA,QAAQ,CAACE,GAAG,EAAJ,CAAR,GAAkB74J,CAAlB;AAEA;AAED;AAED;AAED;;;;;;;;AAOA+4J,EAAAA,YAAY,CAAClwJ,CAAD,EAAIE,CAAJ,EAAO;AAElB,SAAK8tD,QAAL,CAAc21F,SAAd,CAAwB5nJ,KAAxB,CAA8BorB,GAA9B,CAAkCnnB,CAAlC,EAAqCE,CAArC;AAEA;;AAhGyC;;;AAoG3C,IAAIiwJ,gBAAgB,GAAG,64BAAvB;AAEA;;;;AAIA,MAAMC,yBAAN,SAAwC/hG,qBAAxC,CAAuD;AAEtD;;;;;AAMAx0D,EAAAA,WAAW,CAACsgC,MAAD,EAAS;AAEnB,UAAM;AAELr3B,MAAAA,IAAI,EAAE,2BAFD;AAILwrD,MAAAA,OAAO,EAAE;AACR+hG,QAAAA,aAAa,EAAE;AADP,OAJJ;AAQLriG,MAAAA,QAAQ,EAAE;AACT35B,QAAAA,WAAW,EAAE,IAAI8lH,cAAJ,CAAY,IAAZ,CADJ;AAETmW,QAAAA,aAAa,EAAE,IAAInW,cAAJ,CAAY,GAAZ,CAFN;AAGTnqF,QAAAA,WAAW,EAAE,IAAImqF,cAAJ,CAAY,GAAZ,CAHJ;AAIToW,QAAAA,UAAU,EAAE,IAAIpW,cAAJ,CAAY,GAAZ,CAJH;AAKTqW,QAAAA,SAAS,EAAE,IAAIrW,cAAJ,CAAY,IAAZ;AALF,OARL;AAgBL3rF,MAAAA,cAAc,EAAE2hG,gBAhBX;AAiBL5hG,MAAAA,YAjBK;AAmBL1W,MAAAA,UAAU,EAAE,KAnBP;AAoBLD,MAAAA,SAAS,EAAE;AApBN,KAAN;AAwBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAKu3G,mBAAL,CAAyBt2H,MAAzB;AAEA;AAED;;;;;;;AAMA,MAAIkgD,YAAJ,GAAmB;AAElB,WAAOnkE,MAAM,CAAC,KAAKo4C,OAAL,CAAa+hG,aAAd,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIh2E,YAAJ,CAAiBt+E,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa+hG,aAAb,GAA6Bt0J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;AAMA+tG,EAAAA,mBAAmB,CAACt2H,MAAM,GAAG,IAAV,EAAgB;AAElC,QAAGA,MAAM,KAAK,IAAd,EAAoB;AAEnB,WAAK6zB,QAAL,CAAcuiG,UAAd,CAAyBx0J,KAAzB,GAAiCo+B,MAAM,CAACwG,IAAxC;AACA,WAAKqtB,QAAL,CAAcwiG,SAAd,CAAwBz0J,KAAxB,GAAgCo+B,MAAM,CAACyG,GAAvC;;AAEA,UAAGzG,MAAM,YAAYm1B,wBAArB,EAAwC;AAEvC,aAAKhB,OAAL,CAAaoiG,kBAAb,GAAkC,GAAlC;AAEA,OAJD,MAIO;AAEN,eAAO,KAAKpiG,OAAL,CAAaoiG,kBAApB;AAEA;;AAED,WAAKhuG,WAAL,GAAmB,IAAnB;AAEA;AAED;;AA7FqD;;;AAiGvD,IAAIiuG,mBAAmB,GAAG,4kCAA1B;AAEA,IAAIC,cAAc,GAAG,+fAArB;AAEA;;;;;;AAMA,MAAMC,kBAAN,SAAiCxiG,qBAAjC,CAAgD;AAE/C;;;;;AAMAx0D,EAAAA,WAAW,CAAC8pJ,SAAS,GAAG,IAAI+L,cAAJ,EAAb,EAA8B;AAExC,UAAM;AAEL5sJ,MAAAA,IAAI,EAAE,oBAFD;AAILwrD,MAAAA,OAAO,EAAE;AACRwiG,QAAAA,gCAAgC,EAAE,KAD1B;AAERC,QAAAA,cAAc,EAAE;AAFR,OAJJ;AASL/iG,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAETwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAYwJ,SAAZ;AAFF,OATL;AAcLn1F,MAAAA,cAAc,EAAEmiG,mBAdX;AAeLpiG,MAAAA,YAAY,EAAEqiG,cAfT;AAiBL/4G,MAAAA,UAAU,EAAE,KAjBP;AAkBLD,MAAAA,SAAS,EAAE;AAlBN,KAAN;AAsBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;AAED;;;;;;;;;;;;;;AAaA83G,EAAAA,gCAAgC,CAACrlE,MAAD,EAAS;AAExC,SAAKr9B,OAAL,CAAawiG,gCAAb,GAAgDnlE,MAAM,CAACz0F,OAAP,CAAe,GAAf,CAAhD;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;;;;;;;;AAeAuuG,EAAAA,yBAAyB,CAAC93J,SAAD,EAAY;AAEpC,UAAMoC,CAAC,GAAG5E,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASvC,SAAT,EAAoB,IAApB,CAAT,EAAoC,GAApC,CAAV;AACA,SAAKm1D,OAAL,CAAayiG,cAAb,GAA8Bx1J,CAAC,CAACrE,OAAF,CAAU,GAAV,CAA9B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;;AA9E8C;;;AAkFhD,IAAIwuG,gBAAgB,GAAG,2WAAvB;AAEA,IAAIC,cAAc,GAAG,wkBAArB;AAEA;;;;;;;;;;;;;;;;AAgBA,MAAMC,mBAAN,SAAkC/iG,qBAAlC,CAAiD;AAEhD;;;;;AAMAx0D,EAAAA,WAAW,CAAC8pJ,SAAS,GAAG,IAAI+L,cAAJ,EAAb,EAA8B;AAExC,UAAM;AAEL5sJ,MAAAA,IAAI,EAAE,qBAFD;AAILkrD,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAETwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAFF;AAGT2B,QAAAA,aAAa,EAAE,IAAIlX,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAHN;AAIT4B,QAAAA,MAAM,EAAE,IAAInX,cAAJ,CAAY,GAAZ,CAJC;AAKTrrH,QAAAA,KAAK,EAAE,IAAIqrH,cAAJ,CAAY,GAAZ;AALE,OAJL;AAYL3rF,MAAAA,cAAc,EAAE0iG,gBAZX;AAaL3iG,MAAAA,YAAY,EAAE4iG,cAbT;AAeLt5G,MAAAA,UAAU,EAAE,KAfP;AAgBLD,MAAAA,SAAS,EAAE;AAhBN,KAAN;AAoBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAKg3G,YAAL,CAAkBvM,SAAS,CAAC3jJ,CAA5B,EAA+B2jJ,SAAS,CAACzjJ,CAAzC;AAEA;;;;;;AAMA,SAAKqxJ,UAAL,GAAkBC,UAAU,CAACC,KAA7B;AAEA;AAED;;;;;;;AAMAC,EAAAA,SAAS,GAAG;AAEX,WAAOC,aAAa,CAAC,KAAKJ,UAAN,CAApB;AAEA;AAED;;;;;;;;AAOArB,EAAAA,YAAY,CAAClwJ,CAAD,EAAIE,CAAJ,EAAO;AAElB,SAAK8tD,QAAL,CAAc21F,SAAd,CAAwB5nJ,KAAxB,CAA8BorB,GAA9B,CAAkCnnB,CAAlC,EAAqCE,CAArC;AACA,SAAK8tD,QAAL,CAAcqjG,aAAd,CAA4Bt1J,KAA5B,CAAkCorB,GAAlC,CAAsCnnB,CAAtC,EAAyCE,CAAzC,EAA4CqoB,cAA5C,CAA2D,GAA3D;AAEA;;AArE+C;AAyEjD;;;;;;;;;AAOA,MAAMopI,aAAa,GAAG,CACrB,IAAIxyG,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,CAAjB,CADqB,EAErB,IAAIA,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,CAAjB,CAFqB,EAGrB,IAAIA,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAjB,CAHqB,EAIrB,IAAIA,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,CAAjB,CAJqB,EAKrB,IAAIA,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,CAAjB,CALqB,EAMrB,IAAIA,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,IAA9C,CAAjB,CANqB,CAAtB;AASA;;;;;;;;;;;;AAYA,MAAMqyG,UAAU,GAAG;AAElBI,EAAAA,UAAU,EAAE,CAFM;AAGlBC,EAAAA,KAAK,EAAE,CAHW;AAIlBC,EAAAA,MAAM,EAAE,CAJU;AAKlBL,EAAAA,KAAK,EAAE,CALW;AAMlBM,EAAAA,UAAU,EAAE,CANM;AAOlBC,EAAAA,IAAI,EAAE;AAPY,CAAnB;;AAWA,IAAIC,gBAAgB,GAAG,sLAAvB;AAEA;;;;AAIA,MAAMC,YAAN,SAA2B7jG,qBAA3B,CAA0C;AAEzC;;;AAIAx0D,EAAAA,WAAW,GAAG;AAEb,UAAM;AAELiJ,MAAAA,IAAI,EAAE,cAFD;AAILkrD,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAET9uI,QAAAA,OAAO,EAAE,IAAI8uI,cAAJ,CAAY,GAAZ;AAFA,OAJL;AASL3rF,MAAAA,cAAc,EAAEyjG,gBATX;AAUL1jG,MAAAA,YAVK;AAYL1W,MAAAA,UAAU,EAAE,KAZP;AAaLD,MAAAA,SAAS,EAAE;AAbN,KAAN;AAiBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;;AA5BwC;;;AAgC1C,IAAIi5G,gBAAgB,GAAG,kxBAAvB;AAEA,IAAIC,cAAc,GAAG,+ZAArB;AAEA;;;;AAIA,MAAMC,uBAAN,SAAsChkG,qBAAtC,CAAqD;AAEpD;;;;;;AAOAx0D,EAAAA,WAAW,CAAC06B,YAAY,GAAG,IAAhB,EAAsB4F,MAAtB,EAA8B;AAExC,UAAM;AAELr3B,MAAAA,IAAI,EAAE,yBAFD;AAILkrD,MAAAA,QAAQ,EAAE;AACT35B,QAAAA,WAAW,EAAE,IAAI8lH,cAAJ,CAAY5lH,YAAZ,CADJ;AAETg8H,QAAAA,UAAU,EAAE,IAAIpW,cAAJ,CAAY,GAAZ,CAFH;AAGTqW,QAAAA,SAAS,EAAE,IAAIrW,cAAJ,CAAY,IAAZ;AAHF,OAJL;AAUL3rF,MAAAA,cAAc,EAAE2jG,gBAVX;AAWL5jG,MAAAA,YAAY,EAAE6jG,cAXT;AAaLv6G,MAAAA,UAAU,EAAE,KAbP;AAcLD,MAAAA,SAAS,EAAE,KAdN;AAgBLyE,MAAAA,YAAY,EAAE,IAhBT;AAiBLE,MAAAA,QAAQ,EAAE;AAjBL,KAAN;AAqBA;;AACA,SAAKrD,UAAL,GAAkB,KAAlB;AAEA,SAAKu3G,mBAAL,CAAyBt2H,MAAzB;AAEA;AAED;;;;;;;AAMAs2H,EAAAA,mBAAmB,CAACt2H,MAAM,GAAG,IAAV,EAAgB;AAElC,QAAGA,MAAM,KAAK,IAAd,EAAoB;AAEnB,WAAK6zB,QAAL,CAAcuiG,UAAd,CAAyBx0J,KAAzB,GAAiCo+B,MAAM,CAACwG,IAAxC;AACA,WAAKqtB,QAAL,CAAcwiG,SAAd,CAAwBz0J,KAAxB,GAAgCo+B,MAAM,CAACyG,GAAvC;;AAEA,UAAGzG,MAAM,YAAYm1B,wBAArB,EAAwC;AAEvC,aAAKhB,OAAL,CAAaoiG,kBAAb,GAAkC,GAAlC;AAEA,OAJD,MAIO;AAEN,eAAO,KAAKpiG,OAAL,CAAaoiG,kBAApB;AAEA;AAED;AAED;;AAhEmD;;;AAoErD,IAAI4B,gBAAgB,GAAG,4lDAAvB;AAEA,IAAIC,cAAc,GAAG,4QAArB;AAEA;;;;;;;AAOA,MAAMC,yBAAN,SAAwCnkG,qBAAxC,CAAuD;AAEtD;;;AAIAx0D,EAAAA,WAAW,GAAG;AAEb,UAAM;AAELiJ,MAAAA,IAAI,EAAE,2BAFD;AAILwrD,MAAAA,OAAO,EAAE;AACR+hG,QAAAA,aAAa,EAAE;AADP,OAJJ;AAQLriG,MAAAA,QAAQ,EAAE;AACT35B,QAAAA,WAAW,EAAE,IAAI8lH,cAAJ,CAAY,IAAZ,CADJ;AAETsY,QAAAA,YAAY,EAAE,IAAItY,cAAJ,CAAY,IAAZ,CAFL;AAGTwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ;AAHF,OARL;AAcLlhG,MAAAA,cAAc,EAAE8jG,gBAdX;AAeL/jG,MAAAA,YAAY,EAAEgkG,cAfT;AAiBL16G,MAAAA,UAAU,EAAE,KAjBP;AAkBLD,MAAAA,SAAS,EAAE;AAlBN,KAAN;AAsBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;AAED;;;;;;;AAMA,MAAImhC,YAAJ,GAAmB;AAElB,WAAOnkE,MAAM,CAAC,KAAKo4C,OAAL,CAAa+hG,aAAd,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIh2E,YAAJ,CAAiBt+E,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa+hG,aAAb,GAA6Bt0J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;AAOAwtG,EAAAA,YAAY,CAAClwJ,CAAD,EAAIE,CAAJ,EAAO;AAElB,SAAK8tD,QAAL,CAAc21F,SAAd,CAAwB5nJ,KAAxB,CAA8BorB,GAA9B,CAAkCnnB,CAAlC,EAAqCE,CAArC;AAEA;;AAvEqD;;;AA2EvD,IAAIwyJ,gBAAgB,GAAG,8oBAAvB;AAEA;;;;;;AAMA,MAAMC,iBAAN,SAAgCtkG,qBAAhC,CAA+C;AAE9C;;;AAIAx0D,EAAAA,WAAW,GAAG;AAEb,UAAM;AAELiJ,MAAAA,IAAI,EAAE,mBAFD;AAILwrD,MAAAA,OAAO,EAAE;AACRskG,QAAAA,eAAe,EAAE,GADT;AAERC,QAAAA,eAAe,EAAE;AAFT,OAJJ;AASL7kG,MAAAA,QAAQ,EAAE;AACT8kG,QAAAA,YAAY,EAAE,IAAI3Y,cAAJ,CAAY,IAAZ,CADL;AAET4Y,QAAAA,YAAY,EAAE,IAAI5Y,cAAJ,CAAY,IAAZ,CAFL;AAGTqV,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ;AAHJ,OATL;AAeL3rF,MAAAA,cAAc,EAAEkkG,gBAfX;AAgBLnkG,MAAAA,YAhBK;AAkBL1W,MAAAA,UAAU,EAAE,KAlBP;AAmBLD,MAAAA,SAAS,EAAE;AAnBN,KAAN;AAuBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;;AAlC6C;;;AAsC/C,IAAI85G,mBAAmB,GAAG,6yBAA1B;AAEA,IAAIC,kBAAkB,GAAG,woCAAzB;AAEA;;;;;;AAMA,MAAMC,qBAAN,SAAoC7kG,qBAApC,CAAmD;AAElD;;;;;;;AAQAx0D,EAAAA,WAAW,CAAC8pJ,SAAS,GAAG,IAAI+L,cAAJ,EAAb,EAA8BrnF,IAAI,GAAG8qF,iBAAiB,CAACC,KAAvD,EAA8D;AAExE,UAAM;AAELtwJ,MAAAA,IAAI,EAAE,uBAFD;AAILwrD,MAAAA,OAAO,EAAE;AACRwiG,QAAAA,gCAAgC,EAAE,KAD1B;AAERC,QAAAA,cAAc,EAAE,KAFR;AAGRsC,QAAAA,eAAe,EAAE,MAHT;AAIRhD,QAAAA,aAAa,EAAE;AAJP,OAJJ;AAWLriG,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAET9lH,QAAAA,WAAW,EAAE,IAAI8lH,cAAJ,CAAY,IAAZ,CAFJ;AAGTwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAYwJ,SAAZ;AAHF,OAXL;AAiBLp1F,MAAAA,YAAY,EAAEqiG,cAjBT;AAkBL/4G,MAAAA,UAAU,EAAE,KAlBP;AAmBLD,MAAAA,SAAS,EAAE;AAnBN,KAAN;AAuBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAKo6G,oBAAL,CAA0BjrF,IAA1B;AAEA;AAED;;;;;;;AAMA,MAAIgS,YAAJ,GAAmB;AAElB,WAAOnkE,MAAM,CAAC,KAAKo4C,OAAL,CAAa+hG,aAAd,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIh2E,YAAJ,CAAiBt+E,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa+hG,aAAb,GAA6Bt0J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;;;AAUA4wG,EAAAA,oBAAoB,CAACjrF,IAAD,EAAO;AAE1B,YAAOA,IAAP;AAEC,WAAK8qF,iBAAiB,CAACI,KAAvB;AACC,aAAK/kG,cAAL,GAAsBwkG,mBAAtB;AACA;;AAED,WAAKG,iBAAiB,CAACK,IAAvB;AACC,aAAKhlG,cAAL,GAAsBykG,kBAAtB;AACA;;AAED,WAAKE,iBAAiB,CAACC,KAAvB;AACA;AACC,aAAK5kG,cAAL,GAAsBmiG,mBAAtB;AACA;AAbF;;AAiBA,SAAKriG,OAAL,CAAamlG,mBAAb,GAAmCprF,IAAI,CAACnxE,OAAL,CAAa,CAAb,CAAnC;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;;;;;;;AAcAsuG,EAAAA,gCAAgC,CAACrlE,MAAD,EAAS;AAExC,SAAKr9B,OAAL,CAAawiG,gCAAb,GAAgDnlE,MAAM,CAACz0F,OAAP,CAAe,GAAf,CAAhD;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;;;;;;;;AAeAuuG,EAAAA,yBAAyB,CAAC93J,SAAD,EAAY;AAEpC,UAAMoC,CAAC,GAAG5E,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASvC,SAAT,EAAoB,IAApB,CAAT,EAAoC,GAApC,CAAV;AAEA,SAAKm1D,OAAL,CAAayiG,cAAb,GAA8Bx1J,CAAC,CAACrE,OAAF,CAAU,GAAV,CAA9B;AACA,SAAKo3D,OAAL,CAAa+kG,eAAb,GAA+B,CAAC93J,CAAC,GAAG,GAAL,EAAUrE,OAAV,CAAkB,GAAlB,CAA/B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;;AAjJiD;AAqJnD;;;;;;;;;;;AASA,MAAMywG,iBAAiB,GAAG;AAEzBI,EAAAA,KAAK,EAAE,CAFkB;AAGzBC,EAAAA,IAAI,EAAE,CAHmB;AAIzBJ,EAAAA,KAAK,EAAE;AAJkB,CAA1B;;AAQA,IAAIM,gBAAgB,GAAG,w+BAAvB;AAEA,IAAIC,cAAc,GAAG,oQAArB;AAEA;;;;;;;;AAQA,MAAMC,cAAN,SAA6BvlG,qBAA7B,CAA4C;AAE3C;;;;;;;;;AAUAx0D,EAAAA,WAAW,CAACg6J,WAAW,GAAG,IAAf,EAAqBvlG,OAAO,GAAG,IAA/B,EAAqCN,QAAQ,GAAG,IAAhD,EAAsD7zB,MAAM,GAAG,IAA/D,EAAqE4e,SAAS,GAAG,KAAjF,EAAwF;AAElG,UAAM;AAELj2C,MAAAA,IAAI,EAAE,gBAFD;AAILwrD,MAAAA,OAAO,EAAE;AACR+hG,QAAAA,aAAa,EAAE,GADP;AAERyD,QAAAA,aAAa,EAAE;AAFP,OAJJ;AASL9lG,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAET9lH,QAAAA,WAAW,EAAE,IAAI8lH,cAAJ,CAAY,IAAZ,CAFJ;AAGT71D,QAAAA,UAAU,EAAE,IAAI61D,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAHH;AAIT/L,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAJF;AAKTa,QAAAA,UAAU,EAAE,IAAIpW,cAAJ,CAAY,GAAZ,CALH;AAMTqW,QAAAA,SAAS,EAAE,IAAIrW,cAAJ,CAAY,MAAZ,CANF;AAOT3qF,QAAAA,MAAM,EAAE,IAAI2qF,cAAJ,CAAY,GAAZ,CAPC;AAQTxiF,QAAAA,IAAI,EAAE,IAAIwiF,cAAJ,CAAY,GAAZ;AARG,OATL;AAoBLtiG,MAAAA,UAAU,EAAE,KApBP;AAqBLD,MAAAA,SAAS,EAAE,KArBN;AAsBLmB,MAAAA;AAtBK,KAAN;AA0BA;;AACA,SAAKG,UAAL,GAAkB,KAAlB;;AAEA,QAAG26G,WAAW,KAAK,IAAnB,EAAyB;AAExB,WAAKE,cAAL,CAAoBF,WAApB;AAEA;;AAED,QAAGvlG,OAAO,KAAK,IAAf,EAAqB;AAEpB,WAAK0lG,UAAL,CAAgB1lG,OAAhB;AAEA;;AAED,QAAGN,QAAQ,KAAK,IAAhB,EAAsB;AAErB,WAAKimG,WAAL,CAAiBjmG,QAAjB;AAEA;;AAED,SAAKyiG,mBAAL,CAAyBt2H,MAAzB;AAEA;AAED;;;;;;;AAMA,MAAIkgD,YAAJ,GAAmB;AAElB,WAAOnkE,MAAM,CAAC,KAAKo4C,OAAL,CAAa+hG,aAAd,CAAb;AAEA;AAED;;;;;;;;;;AASA,MAAIh2E,YAAJ,CAAiBt+E,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa+hG,aAAb,GAA6Bt0J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;AAOAqxG,EAAAA,cAAc,CAACF,WAAD,EAAc;AAE3B,SAAKrlG,cAAL,GAAsBklG,gBAAgB,CACpC1xJ,OADoB,CACZkyJ,OAAO,CAACC,aADI,EACWN,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACC,aAAxB,CADX,EAEpBnyJ,OAFoB,CAEZkyJ,OAAO,CAACE,gBAFI,EAEcP,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACE,gBAAxB,CAFd,EAGpBpyJ,OAHoB,CAGZkyJ,OAAO,CAACG,mBAHI,EAGiBR,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACG,mBAAxB,CAHjB,CAAtB;AAKA,SAAK9lG,YAAL,GAAoBolG,cAAc,CAChC3xJ,OADkB,CACVkyJ,OAAO,CAACI,WADE,EACWT,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACI,WAAxB,CADX,EAElBtyJ,OAFkB,CAEVkyJ,OAAO,CAACK,mBAFE,EAEmBV,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACK,mBAAxB,CAFnB,CAApB;AAIA,SAAK7xG,WAAL,GAAmB,IAAnB;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;AAOAsxG,EAAAA,UAAU,CAAC1lG,OAAD,EAAU;AAEnB,SAAI,MAAMkmG,KAAV,IAAmBlmG,OAAO,CAACmmG,OAAR,EAAnB,EAAsC;AAErC,WAAKnmG,OAAL,CAAakmG,KAAK,CAAC,CAAD,CAAlB,IAAyBA,KAAK,CAAC,CAAD,CAA9B;AAEA;;AAED,SAAK9xG,WAAL,GAAmB,IAAnB;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;AAOAuxG,EAAAA,WAAW,CAACjmG,QAAD,EAAW;AAErB,SAAI,MAAMwmG,KAAV,IAAmBxmG,QAAQ,CAACymG,OAAT,EAAnB,EAAuC;AAEtC,WAAKzmG,QAAL,CAAcwmG,KAAK,CAAC,CAAD,CAAnB,IAA0BA,KAAK,CAAC,CAAD,CAA/B;AAEA;;AAED,WAAO,IAAP;AAEA;AAED;;;;;;;AAMA/D,EAAAA,mBAAmB,CAACt2H,MAAM,GAAG,IAAV,EAAgB;AAElC,QAAGA,MAAM,KAAK,IAAd,EAAoB;AAEnB,WAAK6zB,QAAL,CAAcuiG,UAAd,CAAyBx0J,KAAzB,GAAiCo+B,MAAM,CAACwG,IAAxC;AACA,WAAKqtB,QAAL,CAAcwiG,SAAd,CAAwBz0J,KAAxB,GAAgCo+B,MAAM,CAACyG,GAAvC;;AAEA,UAAGzG,MAAM,YAAYm1B,wBAArB,EAAwC;AAEvC,aAAKhB,OAAL,CAAaoiG,kBAAb,GAAkC,GAAlC;AAEA,OAJD,MAIO;AAEN,eAAO,KAAKpiG,OAAL,CAAaoiG,kBAApB;AAEA;;AAED,WAAKhuG,WAAL,GAAmB,IAAnB;AAEA;AAED;AAED;;;;;;;;AAOAjuB,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAMkT,CAAC,GAAG9e,IAAI,CAAC+E,GAAL,CAAS4G,KAAT,EAAgB,CAAhB,CAAV;AACA,UAAMtL,CAAC,GAAGL,IAAI,CAAC+E,GAAL,CAAS6G,MAAT,EAAiB,CAAjB,CAAV;AAEA,SAAKyrD,QAAL,CAAcs2B,UAAd,CAAyBvoF,KAAzB,CAA+BorB,GAA/B,CAAmC1R,CAAnC,EAAsCze,CAAtC;AACA,SAAKg3D,QAAL,CAAc21F,SAAd,CAAwB5nJ,KAAxB,CAA8BorB,GAA9B,CAAkC,MAAM1R,CAAxC,EAA2C,MAAMze,CAAjD;AACA,SAAKg3D,QAAL,CAAcwB,MAAd,CAAqBzzD,KAArB,GAA6B0Z,CAAC,GAAGze,CAAjC;AAEA;;AA1M0C;AA8M5C;;;;;;;;;;;;;AAWA,MAAMk9J,OAAO,GAAG;AAEfC,EAAAA,aAAa,EAAE,eAFA;AAGfC,EAAAA,gBAAgB,EAAE,kBAHH;AAIfC,EAAAA,mBAAmB,EAAE,qBAJN;AAKfC,EAAAA,WAAW,EAAE,aALE;AAMfC,EAAAA,mBAAmB,EAAE;AANN,CAAhB;;AAUA,IAAIG,gBAAgB,GAAG,qtBAAvB;AAEA;;;;;;;;;;;;;;;;;;AAkBA,MAAMC,eAAN,SAA8BtmG,qBAA9B,CAA6C;AAE5C;;;;;AAMAx0D,EAAAA,WAAW,CAAC+6J,aAAD,EAAgB;AAE1B,UAAM;AAEL9xJ,MAAAA,IAAI,EAAE,iBAFD;AAILwrD,MAAAA,OAAO,EAAE;AACRumG,QAAAA,WAAW,EAAE,IADL;AAERC,QAAAA,aAAa,EAAE;AAFP,OAJJ;AASL9mG,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAETya,QAAAA,aAAa,EAAE,IAAIza,cAAJ,CAAYya,aAAZ,CAFN;AAGTp8D,QAAAA,OAAO,EAAE,IAAI2hD,cAAJ,CAAY,GAAZ,CAHA;AAIT3jF,QAAAA,KAAK,EAAE,IAAI2jF,cAAJ,CAAY,GAAZ,CAJE;AAKTrzC,QAAAA,MAAM,EAAE,IAAIqzC,cAAJ,CAAY,GAAZ,CALC;AAMT4a,QAAAA,QAAQ,EAAE,IAAI5a,cAAJ,CAAY,GAAZ,CAND;AAOT6a,QAAAA,QAAQ,EAAE,IAAI7a,cAAJ,CAAY,GAAZ;AAPD,OATL;AAmBL3rF,MAAAA,cAAc,EAAEkmG,gBAnBX;AAoBLnmG,MAAAA,YApBK;AAsBL1W,MAAAA,UAAU,EAAE,KAtBP;AAuBLD,MAAAA,SAAS,EAAE;AAvBN,KAAN;AA2BA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;AAED;;;;;;;AAMA,MAAIvkB,OAAJ,GAAc;AAEb,WAAOze,MAAM,CAAC,KAAKo4C,OAAL,CAAaumG,WAAd,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIlgI,OAAJ,CAAY54B,KAAZ,EAAmB;AAElB,UAAM9E,CAAC,GAAGN,IAAI,CAACwE,KAAL,CAAWY,KAAX,CAAV;AAEA,SAAKuyD,OAAL,CAAaumG,WAAb,GAA2B59J,CAAC,CAACC,OAAF,CAAU,CAAV,CAA3B;AACA,SAAKo3D,OAAL,CAAawmG,aAAb,GAA6B79J,CAAC,CAACC,OAAF,CAAU,CAAV,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;;AApE2C;;;AAwE7C,IAAIuyG,gBAAgB,GAAG,yhBAAvB;AAEA;;;;;;;;;;;;;;;;;;;;AAoBA,MAAMC,iBAAN,SAAgC7mG,qBAAhC,CAA+C;AAE9C;;;;;;AAOAx0D,EAAAA,WAAW,CAACs7J,WAAW,GAAG,KAAf,EAAsBC,cAAc,GAAG,IAAvC,EAA6C;AAEvD,UAAMC,QAAQ,GAAID,cAAc,KAAK,IAArC;AAEA,UAAM;AAELtyJ,MAAAA,IAAI,EAAE,mBAFD;AAILkrD,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAEThhJ,QAAAA,SAAS,EAAE,IAAIghJ,cAAJ,CAAY,GAAZ,CAFF;AAGTmb,QAAAA,SAAS,EAAE,IAAInb,cAAJ,CAAY,GAAZ,CAHF;AAITt0H,QAAAA,KAAK,EAAE,IAAIs0H,cAAJ,CAAYkb,QAAQ,GAAGD,cAAH,GAAoB,IAAI1F,cAAJ,EAAxC;AAJE,OAJL;AAWLlhG,MAAAA,cAAc,EAAEymG,gBAXX;AAYL1mG,MAAAA,YAZK;AAcL1W,MAAAA,UAAU,EAAE,KAdP;AAeLD,MAAAA,SAAS,EAAE;AAfN,KAAN;AAmBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAKi8G,WAAL,GAAmBA,WAAnB;AACA,SAAKI,YAAL,GAAoB,IAApB;AACA,SAAKF,QAAL,GAAgBA,QAAhB;AAEA;AAED;;;;;;;AAMA,MAAIl8J,SAAJ,GAAgB;AAEf,WAAO,KAAK60D,QAAL,CAAc70D,SAAd,CAAwB4C,KAA/B;AAEA;AAED;;;;;;;AAMA,MAAI5C,SAAJ,CAAc4C,KAAd,EAAqB;AAEpB,SAAKiyD,QAAL,CAAc70D,SAAd,CAAwB4C,KAAxB,GAAgCA,KAAhC;AAEA;AAED;;;;;;;AAMA,MAAIu5J,SAAJ,GAAgB;AAEf,WAAO,KAAKtnG,QAAL,CAAcsnG,SAAd,CAAwBv5J,KAA/B;AAEA;AAED;;;;;;;AAMA,MAAIu5J,SAAJ,CAAcv5J,KAAd,EAAqB;AAEpB,SAAKiyD,QAAL,CAAcsnG,SAAd,CAAwBv5J,KAAxB,GAAgCA,KAAhC;AAEA;AAED;;;;;;;AAMA,MAAIw5J,YAAJ,GAAmB;AAElB,WAAQ,KAAKjnG,OAAL,CAAaknG,SAAb,KAA2B97J,SAAnC;AAEA;AAED;;;;;;;AAMA,MAAI67J,YAAJ,CAAiBx5J,KAAjB,EAAwB;AAEvB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAaknG,SAAb,GAAyB,GAAzB;AAEA,KAJD,MAIO;AAEN,aAAO,KAAKlnG,OAAL,CAAaknG,SAApB;AAEA;;AAED,SAAK9yG,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;AAMA,MAAIyyG,WAAJ,GAAkB;AAEjB,WAAQ,KAAK7mG,OAAL,CAAa8kG,KAAb,KAAuB15J,SAA/B;AAEA;AAED;;;;;;;AAMA,MAAIy7J,WAAJ,CAAgBp5J,KAAhB,EAAuB;AAEtB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAa8kG,KAAb,GAAqB,GAArB;AAEA,KAJD,MAIO;AAEN,aAAO,KAAK9kG,OAAL,CAAa8kG,KAApB;AAEA;;AAED,SAAK1wG,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;AAOA+yG,EAAAA,qBAAqB,CAACrpG,OAAD,EAAU;AAE9B,SAAK+oG,WAAL,GAAmB/oG,OAAnB;AAEA;AAED;;;;;;;AAMA,MAAIipG,QAAJ,GAAe;AAEd,WAAQ,KAAK/mG,OAAL,CAAaonG,KAAb,KAAuBh8J,SAA/B;AAEA;AAED;;;;;;;;;AAQA,MAAI27J,QAAJ,CAAat5J,KAAb,EAAoB;AAEnB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAaonG,KAAb,GAAqB,GAArB;AAEA,KAJD,MAIO;AAEN,aAAO,KAAKpnG,OAAL,CAAaonG,KAApB;AAEA;;AAED,SAAKhzG,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;AAOA,MAAI0yG,cAAJ,GAAqB;AAEpB,WAAO,KAAKC,QAAZ;AAEA;AAED;;;;;;;;AAOA,MAAID,cAAJ,CAAmBr5J,KAAnB,EAA0B;AAEzB,SAAKs5J,QAAL,GAAgBt5J,KAAhB;AAEA;AAED;;;;;;;;AAOA45J,EAAAA,wBAAwB,CAACvpG,OAAD,EAAU;AAEjC,SAAKipG,QAAL,GAAgBjpG,OAAhB;AAEA;;AAnP6C;;;AAuP/C,IAAIwpG,gBAAgB,GAAG,uvBAAvB;AAEA;;;;;;AAMA,MAAMC,YAAN,SAA2BxnG,qBAA3B,CAA0C;AAEzC;;;;;AAMAx0D,EAAAA,WAAW,CAACi8J,WAAW,GAAG,IAAf,EAAqB;AAE/B,UAAM;AAELhzJ,MAAAA,IAAI,EAAE,cAFD;AAILkrD,MAAAA,QAAQ,EAAE;AACT8nG,QAAAA,WAAW,EAAE,IAAI3b,cAAJ,CAAY2b,WAAZ,CADJ;AAETtG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CAFJ;AAGT4b,QAAAA,QAAQ,EAAE,IAAI5b,cAAJ,CAAY,GAAZ;AAHD,OAJL;AAUL3rF,MAAAA,cAAc,EAAEonG,gBAVX;AAWLrnG,MAAAA,YAXK;AAaL1W,MAAAA,UAAU,EAAE,KAbP;AAcLD,MAAAA,SAAS,EAAE;AAdN,KAAN;AAkBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAK88G,YAAL,GAAoB1H,YAAY,CAACC,GAAjC;AACA,SAAK0H,YAAL,GAAoBC,YAAY,CAACC,OAAjC;AAEA;AAED;;;;;;;AAMA,MAAIL,WAAJ,CAAgB/5J,KAAhB,EAAuB;AAEtB,SAAKiyD,QAAL,CAAc8nG,WAAd,CAA0B/5J,KAA1B,GAAkCA,KAAlC;AAEA;AAED;;;;;;;;;AAQA,MAAIi6J,YAAJ,CAAiBj6J,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa8nG,aAAb,GAA6Br6J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;AAQA,MAAIuzG,YAAJ,CAAiBl6J,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa+nG,aAAb,GAA6Bt6J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;AAMA,MAAI4zG,QAAJ,GAAe;AAEd,WAAQ,KAAKhoG,OAAL,CAAaioG,QAAb,KAA0B78J,SAAlC;AAEA;AAED;;;;;;;AAMA,MAAI48J,QAAJ,CAAav6J,KAAb,EAAoB;AAEnB,QAAG,KAAKu6J,QAAL,IAAiB,CAACv6J,KAArB,EAA4B;AAE3B,aAAO,KAAKuyD,OAAL,CAAaioG,QAApB;AAEA,KAJD,MAIO,IAAGx6J,KAAH,EAAU;AAEhB,WAAKuyD,OAAL,CAAaioG,QAAb,GAAwB,GAAxB;AAEA;;AAED,SAAK7zG,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;AAQA,MAAIqzG,QAAJ,GAAe;AAEd,WAAO,KAAK/nG,QAAL,CAAc+nG,QAAd,CAAuBh6J,KAA9B;AAEA;AAED;;;;;;;;;AAQA,MAAIg6J,QAAJ,CAAah6J,KAAb,EAAoB;AAEnB,SAAKiyD,QAAL,CAAc+nG,QAAd,CAAuBh6J,KAAvB,GAA+BA,KAA/B;AAEA;;AA1IwC;AA8I1C;;;;;;;;;;;AASA,MAAMm6J,YAAY,GAAG;AAEpBC,EAAAA,OAAO,EAAE,CAFW;AAGpBK,EAAAA,QAAQ,EAAE,CAHU;AAIpBC,EAAAA,sBAAsB,EAAE;AAJJ,CAArB;;AAQA,IAAIC,gBAAgB,GAAG,wfAAvB;AAEA,IAAIC,cAAc,GAAG,oTAArB;AAEA;;;;AAIA,MAAMC,eAAN,SAA8BvoG,qBAA9B,CAA6C;AAE5C;;;;;AAMAx0D,EAAAA,WAAW,CAAC8pJ,SAAS,GAAG,IAAI+L,cAAJ,EAAb,EAA8B;AAExC,UAAM;AAEL5sJ,MAAAA,IAAI,EAAE,iBAFD;AAILkrD,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAETwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ;AAFF,OAJL;AASLlhG,MAAAA,cAAc,EAAEkoG,gBATX;AAULnoG,MAAAA,YAAY,EAAEooG,cAVT;AAYL9+G,MAAAA,UAAU,EAAE,KAZP;AAaLD,MAAAA,SAAS,EAAE;AAbN,KAAN;AAiBA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAKg3G,YAAL,CAAkBvM,SAAS,CAAC3jJ,CAA5B,EAA+B2jJ,SAAS,CAACzjJ,CAAzC,EAtBwC,CAwBxC;;AACA,SAAK8tD,QAAL,CAAc8nG,WAAd,GAA4B,KAAK9nG,QAAL,CAAcwhG,WAA1C;AAEA;AAED;;;;;;;;AAOAU,EAAAA,YAAY,CAAClwJ,CAAD,EAAIE,CAAJ,EAAO;AAElB,SAAK8tD,QAAL,CAAc21F,SAAd,CAAwB5nJ,KAAxB,CAA8BorB,GAA9B,CAAkCnnB,CAAlC,EAAqCE,CAArC;AAEA;;AAhD2C;AAoD7C;;;;;;;;AAMA,MAAM22J,oBAAoB,GAAGD,eAA7B;;AAEA,IAAIE,gBAAgB,GAAG,uvSAAvB;AAEA,IAAIC,cAAc,GAAG,ocAArB;AAEA;;;;;;AAMA,MAAMC,mBAAN,SAAkC3oG,qBAAlC,CAAiD;AAEhD;;;;;;AAOAx0D,EAAAA,WAAW,CAAC8pJ,SAAS,GAAG,IAAI+L,cAAJ,EAAb,EAA8BprE,UAAU,GAAG,IAAIorE,cAAJ,EAA3C,EAA4D;AAEtE,UAAM;AAEL5sJ,MAAAA,IAAI,EAAE,qBAFD;AAILwrD,MAAAA,OAAO,EAAE;AAER;AACA2oG,QAAAA,oBAAoB,EAAE,IAHd;AAIRC,QAAAA,sBAAsB,EAAE,MAJhB;AAKRC,QAAAA,yBAAyB,EAAE,GALnB;AAMRC,QAAAA,2BAA2B,EAAE,KANrB;AAORC,QAAAA,eAAe,EAAE,IAPT;AAQRC,QAAAA,oBAAoB,EAAE,MARd;AAUR;AACAC,QAAAA,oBAAoB,EAAE,MAXd;AAYRC,QAAAA,yBAAyB,EAAE,MAZnB;AAaRC,QAAAA,kBAAkB,EAAE,4BAbZ;AAcRC,QAAAA,mBAAmB,EAAE,aAdb;AAeRC,QAAAA,cAAc,EAAE,kBAfR;AAgBRC,QAAAA,qBAAqB,EAAE;AAhBf,OAJJ;AAwBL5pG,MAAAA,QAAQ,EAAE;AACTwhG,QAAAA,WAAW,EAAE,IAAIrV,cAAJ,CAAY,IAAZ,CADJ;AAET0d,QAAAA,WAAW,EAAE,IAAI1d,cAAJ,CAAY,IAAZ,CAFJ;AAGT2d,QAAAA,aAAa,EAAE,IAAI3d,cAAJ,CAAY,IAAZ,CAHN;AAITwJ,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAYwJ,SAAZ,CAJF;AAKTr/D,QAAAA,UAAU,EAAE,IAAI61D,cAAJ,CAAY71D,UAAZ;AALH,OAxBL;AAgCL91B,MAAAA,cAAc,EAAEsoG,gBAhCX;AAiCLvoG,MAAAA,YAAY,EAAEwoG,cAjCT;AAmCLl/G,MAAAA,UAAU,EAAE,KAnCP;AAoCLD,MAAAA,SAAS,EAAE;AApCN,KAAN;AAwCA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA;AAED;;;;;;;;;;;;AAWA6+G,EAAAA,wBAAwB,CAACljD,KAAD,EAAQ;AAE/B,UAAM59G,CAAC,GAAGN,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASm5G,KAAT,EAAgB,CAAhB,CAAT,EAA6B,GAA7B,CAAV;AAEA,SAAKvmD,OAAL,CAAa2oG,oBAAb,GAAoChgK,CAAC,CAACC,OAAF,CAAU,GAAV,CAApC;AACA,SAAKo3D,OAAL,CAAa4oG,sBAAb,GAAsCjgK,CAAC,CAACC,OAAF,CAAU,GAAV,CAAtC;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;;;;AAUAs1G,EAAAA,sBAAsB,CAACnjD,KAAD,EAAQ;AAE7B,UAAM59G,CAAC,GAAGN,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASm5G,KAAT,EAAgB,CAAhB,CAAT,EAA6B,EAA7B,CAAV;AAEA,SAAKvmD,OAAL,CAAa6oG,yBAAb,GAAyClgK,CAAC,CAACC,OAAF,CAAU,GAAV,CAAzC;AACA,SAAKo3D,OAAL,CAAa8oG,2BAAb,GAA2CngK,CAAC,CAACC,OAAF,CAAU,GAAV,CAA3C;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;AAMAu1G,EAAAA,iBAAiB,CAACC,QAAD,EAAW;AAE3B,UAAMxhK,CAAC,GAAGC,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASw8J,QAAT,EAAmB,CAAnB,CAAT,EAAgC,GAAhC,CAAV;AAEA,SAAK5pG,OAAL,CAAa+oG,eAAb,GAA+B3gK,CAAC,CAACQ,OAAF,CAAU,GAAV,CAA/B;AACA,SAAKo3D,OAAL,CAAagpG,oBAAb,GAAoC,CAAC5gK,CAAC,GAAG,KAAL,EAAYQ,OAAZ,CAAoB,GAApB,CAApC;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;AAMA,MAAIy1G,iBAAJ,GAAwB;AAEvB,WAAQ,KAAK7pG,OAAL,CAAa8pG,sBAAb,KAAwC1+J,SAAhD;AAEA;AAED;;;;;;;AAMA,MAAIy+J,iBAAJ,CAAsBp8J,KAAtB,EAA6B;AAE5B,QAAGA,KAAH,EAAU;AAET,aAAO,KAAKuyD,OAAL,CAAa8pG,sBAApB;AAEA,KAJD,MAIO;AAEN,WAAK9pG,OAAL,CAAa8pG,sBAAb,GAAsC,GAAtC;AAEA;;AAED,SAAK11G,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;AAMA,MAAI21G,cAAJ,GAAqB;AAEpB,WAAQ,KAAK/pG,OAAL,CAAagqG,wBAAb,KAA0C5+J,SAAlD;AAEA;AAED;;;;;;;AAMA,MAAI2+J,cAAJ,CAAmBt8J,KAAnB,EAA0B;AAEzB,QAAGA,KAAH,EAAU;AAET,aAAO,KAAKuyD,OAAL,CAAagqG,wBAApB;AAEA,KAJD,MAIO;AAEN,WAAKhqG,OAAL,CAAagqG,wBAAb,GAAwC,GAAxC;AAEA;;AAED,SAAK51G,WAAL,GAAmB,IAAnB;AAEA;;AAnL+C;;;AAuLjD,IAAI61G,gBAAgB,GAAG,k3GAAvB;AAEA,IAAIC,cAAc,GAAG,4JAArB;AAEA;;;;AAIA,MAAMC,YAAN,SAA2BpqG,qBAA3B,CAA0C;AAEzC;;;;;AAMAx0D,EAAAA,WAAW,CAACsgC,MAAD,EAAS;AAEnB,UAAM;AAELr3B,MAAAA,IAAI,EAAE,cAFD;AAILwrD,MAAAA,OAAO,EAAE;AACRumG,QAAAA,WAAW,EAAE,GADL;AAERC,QAAAA,aAAa,EAAE,KAFP;AAGR4D,QAAAA,YAAY,EAAE,KAHN;AAIRC,QAAAA,MAAM,EAAE,KAJA;AAKRC,QAAAA,SAAS,EAAE,KALH;AAMRC,QAAAA,gBAAgB,EAAE,GANV;AAORxI,QAAAA,aAAa,EAAE;AAPP,OAJJ;AAcLriG,MAAAA,QAAQ,EAAE;AAETykG,QAAAA,YAAY,EAAE,IAAItY,cAAJ,CAAY,IAAZ,CAFL;AAGT2e,QAAAA,iBAAiB,EAAE,IAAI3e,cAAJ,CAAY,IAAZ,CAHV;AAIT4e,QAAAA,YAAY,EAAE,IAAI5e,cAAJ,CAAY,IAAZ,CAJL;AAMT6e,QAAAA,uBAAuB,EAAE,IAAI7e,cAAJ,CAAY,IAAI99G,cAAJ,EAAZ,CANhB;AAOThC,QAAAA,gBAAgB,EAAE,IAAI8/G,cAAJ,CAAY,IAAI99G,cAAJ,EAAZ,CAPT;AAQTsnH,QAAAA,SAAS,EAAE,IAAIxJ,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CARF;AASTa,QAAAA,UAAU,EAAE,IAAIpW,cAAJ,CAAY,GAAZ,CATH;AAUTqW,QAAAA,SAAS,EAAE,IAAIrW,cAAJ,CAAY,GAAZ,CAVF;AAYT8e,QAAAA,cAAc,EAAE,IAAI9e,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAZP;AAaTwJ,QAAAA,eAAe,EAAE,IAAI/e,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAbR;AAcTyJ,QAAAA,UAAU,EAAE,IAAIhf,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAdH;AAeT0J,QAAAA,cAAc,EAAE,IAAIjf,cAAJ,CAAY,IAAZ,CAfP;AAgBTz4D,QAAAA,SAAS,EAAE,IAAIy4D,cAAJ,CAAY,GAAZ,CAhBF;AAiBTkf,QAAAA,IAAI,EAAE,IAAIlf,cAAJ,CAAY,IAAZ,CAjBG;AAkBTl4D,QAAAA,IAAI,EAAE,IAAIk4D,cAAJ,CAAY,GAAZ;AAlBG,OAdL;AAoCL3rF,MAAAA,cAAc,EAAE+pG,gBApCX;AAqCLhqG,MAAAA,YAAY,EAAEiqG,cArCT;AAuCL3gH,MAAAA,UAAU,EAAE,KAvCP;AAwCLD,MAAAA,SAAS,EAAE;AAxCN,KAAN;AA4CA;;AACA,SAAKsB,UAAL,GAAkB,KAAlB;AAEA,SAAKu3G,mBAAL,CAAyBt2H,MAAzB;AAEA;AAED;;;;;;;AAMA,MAAIkgD,YAAJ,GAAmB;AAElB,WAAOnkE,MAAM,CAAC,KAAKo4C,OAAL,CAAa+hG,aAAd,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIh2E,YAAJ,CAAiBt+E,KAAjB,EAAwB;AAEvB,SAAKuyD,OAAL,CAAa+hG,aAAb,GAA6Bt0J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA7B;AACA,SAAKwrD,WAAL,GAAmB,IAAnB;AAEA;AAED;;;;;;;;AAOAwtG,EAAAA,YAAY,CAAClwJ,CAAD,EAAIE,CAAJ,EAAO;AAElB,SAAK8tD,QAAL,CAAc21F,SAAd,CAAwB5nJ,KAAxB,CAA8BorB,GAA9B,CAAkCnnB,CAAlC,EAAqCE,CAArC;AAEA;AAED;;;;;;;AAMAuwJ,EAAAA,mBAAmB,CAACt2H,MAAM,GAAG,IAAV,EAAgB;AAElC,QAAGA,MAAM,KAAK,IAAd,EAAoB;AAEnB,YAAM6zB,QAAQ,GAAG,KAAKA,QAAtB;AAEAA,MAAAA,QAAQ,CAACuiG,UAAT,CAAoBx0J,KAApB,GAA4Bo+B,MAAM,CAACwG,IAAnC;AACAqtB,MAAAA,QAAQ,CAACwiG,SAAT,CAAmBz0J,KAAnB,GAA2Bo+B,MAAM,CAACyG,GAAlC;;AAEA,UAAGzG,MAAM,YAAYm1B,wBAArB,EAAwC;AAEvC,aAAKhB,OAAL,CAAaoiG,kBAAb,GAAkC,GAAlC;AAEA,OAJD,MAIO;AAEN,eAAO,KAAKpiG,OAAL,CAAaoiG,kBAApB;AAEA;;AAED,WAAKhuG,WAAL,GAAmB,IAAnB;AAEA;AAED;;AAhIwC;AAoI1C;;;;;;;;;AAOA,MAAM42G,SAAS,GAAG,CAAC,CAAnB;AAEA;;;;;;;;AAQA,MAAMC,OAAN,CAAc;AAEb;;;;;;;;AASA1/J,EAAAA,WAAW,CAACyT,SAAD,EAAYhL,KAAK,GAAGg3J,SAApB,EAA+B/2J,MAAM,GAAG+2J,SAAxC,EAAmDxqI,KAAK,GAAG,GAA3D,EAAgE;AAE1E;;;;;AAMA,SAAKxhB,SAAL,GAAiBA,SAAjB;AAEA;;;;;;;;;AASA,SAAKyuG,IAAL,GAAY,IAAI2zC,cAAJ,CAAc,CAAd,EAAiB,CAAjB,CAAZ;AAEA;;;;;;;AAOA,SAAK53J,MAAL,GAAc,IAAI43J,cAAJ,CAAcptJ,KAAd,EAAqBC,MAArB,CAAd;AAEA;;;;;;;;;;AAUA,SAAKtL,CAAL,GAAS63B,KAAT;AAEA;AAED;;;;;;;AAMA,MAAIA,KAAJ,GAAY;AAEX,WAAO,KAAK73B,CAAZ;AAEA;AAED;;;;;;;;;AAQA,MAAI63B,KAAJ,CAAU/yB,KAAV,EAAiB;AAEhB,SAAK9E,CAAL,GAAS8E,KAAT;AAEA,SAAKjE,MAAL,CAAYkI,CAAZ,GAAgBs5J,SAAhB;AACA,SAAKxhK,MAAL,CAAYoI,CAAZ,GAAgBo5J,SAAhB;AAEA,SAAKhsJ,SAAL,CAAemnB,OAAf,CAAuB,KAAKsnF,IAAL,CAAU/7G,CAAjC,EAAoC,KAAK+7G,IAAL,CAAU77G,CAA9C;AAEA;AAED;;;;;;;;;;AASA,MAAIoC,KAAJ,GAAY;AAEX,UAAMy5G,IAAI,GAAG,KAAKA,IAAlB;AACA,UAAMjkH,MAAM,GAAG,KAAKA,MAApB;AAEA,QAAI0C,MAAJ;;AAEA,QAAG1C,MAAM,CAACkI,CAAP,KAAas5J,SAAhB,EAA2B;AAE1B9+J,MAAAA,MAAM,GAAG1C,MAAM,CAACkI,CAAhB;AAEA,KAJD,MAIO,IAAGlI,MAAM,CAACoI,CAAP,KAAao5J,SAAhB,EAA2B;AAEjC9+J,MAAAA,MAAM,GAAG7D,IAAI,CAACC,KAAL,CAAWkB,MAAM,CAACoI,CAAP,IAAY67G,IAAI,CAAC/7G,CAAL,GAAS+7G,IAAI,CAAC77G,CAA1B,CAAX,CAAT;AAEA,KAJM,MAIA;AAEN1F,MAAAA,MAAM,GAAG7D,IAAI,CAACC,KAAL,CAAWmlH,IAAI,CAAC/7G,CAAL,GAAS,KAAK/I,CAAzB,CAAT;AAEA;;AAED,WAAOuD,MAAP;AAEA;AAED;;;;;;;;;;AASA,MAAI8H,KAAJ,CAAUvG,KAAV,EAAiB;AAEhB,SAAKjE,MAAL,CAAYkI,CAAZ,GAAgBjE,KAAhB;AACA,SAAKuR,SAAL,CAAemnB,OAAf,CAAuB,KAAKsnF,IAAL,CAAU/7G,CAAjC,EAAoC,KAAK+7G,IAAL,CAAU77G,CAA9C;AAEA;AAED;;;;;;;;;;AASA,MAAIqC,MAAJ,GAAa;AAEZ,UAAMw5G,IAAI,GAAG,KAAKA,IAAlB;AACA,UAAMjkH,MAAM,GAAG,KAAKA,MAApB;AAEA,QAAI0C,MAAJ;;AAEA,QAAG1C,MAAM,CAACoI,CAAP,KAAao5J,SAAhB,EAA2B;AAE1B9+J,MAAAA,MAAM,GAAG1C,MAAM,CAACoI,CAAhB;AAEA,KAJD,MAIO,IAAGpI,MAAM,CAACkI,CAAP,KAAas5J,SAAhB,EAA2B;AAEjC9+J,MAAAA,MAAM,GAAG7D,IAAI,CAACC,KAAL,CAAWkB,MAAM,CAACkI,CAAP,IAAY+7G,IAAI,CAAC/7G,CAAL,GAAS+7G,IAAI,CAAC77G,CAA1B,CAAX,CAAT;AAEA,KAJM,MAIA;AAEN1F,MAAAA,MAAM,GAAG7D,IAAI,CAACC,KAAL,CAAWmlH,IAAI,CAAC77G,CAAL,GAAS,KAAKjJ,CAAzB,CAAT;AAEA;;AAED,WAAOuD,MAAP;AAEA;AAED;;;;;;;;;;AASA,MAAI+H,MAAJ,CAAWxG,KAAX,EAAkB;AAEjB,SAAKjE,MAAL,CAAYoI,CAAZ,GAAgBnE,KAAhB;AACA,SAAKuR,SAAL,CAAemnB,OAAf,CAAuB,KAAKsnF,IAAL,CAAU/7G,CAAjC,EAAoC,KAAK+7G,IAAL,CAAU77G,CAA9C;AAEA;AAED;;;;;;;;;;AASA,aAAWo5J,SAAX,GAAuB;AAEtB,WAAOA,SAAP;AAEA;;AAvMY;AA2Md;;;;;;;;;AAOA,MAAME,WAAW,GAAG,IAAInqG,aAAJ,EAApB;AAEA;;;;;;;AAOA,IAAI/nB,QAAQ,GAAG,IAAf;AAEA;;;;;;;;;;AAUA,SAASmyH,qBAAT,GAAiC;AAEhC,MAAGnyH,QAAQ,KAAK,IAAhB,EAAsB;AAErB,UAAMiY,QAAQ,GAAG,IAAIJ,YAAJ,CAAiB,CAAC,CAAC,CAAF,EAAK,CAAC,CAAN,EAAS,CAAT,EAAY,CAAZ,EAAe,CAAC,CAAhB,EAAmB,CAAnB,EAAsB,CAAC,CAAvB,EAA0B,CAA1B,EAA6B,CAA7B,CAAjB,CAAjB;AACA,UAAMM,GAAG,GAAG,IAAIN,YAAJ,CAAiB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,CAAjB,CAAZ;AACA7X,IAAAA,QAAQ,GAAG,IAAIua,qBAAJ,EAAX,CAJqB,CAMrB;;AACA,QAAGva,QAAQ,CAAClkC,YAAT,KAA0B1J,SAA7B,EAAwC;AAEvC4tC,MAAAA,QAAQ,CAAClkC,YAAT,CAAsB,UAAtB,EAAkC,IAAI25C,sBAAJ,CAAoBwC,QAApB,EAA8B,CAA9B,CAAlC;AACAjY,MAAAA,QAAQ,CAAClkC,YAAT,CAAsB,IAAtB,EAA4B,IAAI25C,sBAAJ,CAAoB0C,GAApB,EAAyB,CAAzB,CAA5B;AAEA,KALD,MAKO;AAENnY,MAAAA,QAAQ,CAACyjH,YAAT,CAAsB,UAAtB,EAAkC,IAAIhuG,sBAAJ,CAAoBwC,QAApB,EAA8B,CAA9B,CAAlC;AACAjY,MAAAA,QAAQ,CAACyjH,YAAT,CAAsB,IAAtB,EAA4B,IAAIhuG,sBAAJ,CAAoB0C,GAApB,EAAyB,CAAzB,CAA5B;AAEA;AAED;;AAED,SAAOnY,QAAP;AAEA;AAED;;;;;;;;;;;;;;;AAcA,MAAMoyH,IAAN,CAAW;AAEV;;;;;;;AAQA7/J,EAAAA,WAAW,CAACoU,IAAI,GAAG,MAAR,EAAgBwjD,KAAK,GAAG,IAAIzpB,YAAJ,EAAxB,EAAqC7N,MAAM,GAAGq/H,WAA9C,EAA2D;AAErE;;;;;AAMA,SAAKvrJ,IAAL,GAAYA,IAAZ;AAEA;;;;;;;AAOA,SAAKwjD,KAAL,GAAaA,KAAb;AAEA;;;;;;;AAOA,SAAKt3B,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAKw/H,MAAL,GAAc,IAAd;AAEA;;;;;;;AAOA,SAAKC,GAAL,GAAW,IAAX;AAEA;;;;;;;;;;;;AAYA,SAAKC,SAAL,GAAiB,IAAjB;AAEA;;;;;;;;;;AAUA,SAAKC,iBAAL,GAAyB,KAAzB;AAEA;;;;;;AAMA,SAAK1tG,OAAL,GAAe,IAAf;AAEA;AAED;;;;;;;AAMA,MAAI2tG,cAAJ,GAAqB;AAEpB,WAAO,CAAC,KAAKH,GAAb;AAEA;AAED;;;;;;;;;;AASA,MAAIG,cAAJ,CAAmBh+J,KAAnB,EAA0B;AAEzB,QAAG,KAAK69J,GAAL,KAAa79J,KAAhB,EAAuB;AAEtB,YAAM0rC,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;;AAEA,UAAGvyH,QAAQ,KAAK,IAAhB,EAAsB;AAErBA,QAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;;AAED,WAAKk3G,GAAL,GAAW,CAAC79J,KAAZ;AAEA;AAED;AAED;;;;;;;AAMAi+J,EAAAA,qBAAqB,GAAG;AAEvB,WAAQ,KAAKL,MAAL,KAAgB,IAAjB,GAAyB,KAAKA,MAAL,CAAYlyH,QAArC,GAAgD,IAAvD;AAEA;AAED;;;;;;;;;;;AAUAwyH,EAAAA,qBAAqB,CAACxyH,QAAD,EAAW;AAE/B,QAAIkyH,MAAM,GAAG,KAAKA,MAAlB;;AAEA,QAAGA,MAAM,KAAK,IAAd,EAAoB;AAEnBA,MAAAA,MAAM,CAAClyH,QAAP,GAAkBA,QAAlB;AAEA,KAJD,MAIO;AAENkyH,MAAAA,MAAM,GAAG,IAAIhzG,WAAJ,CAAS8yG,qBAAqB,EAA9B,EAAkChyH,QAAlC,CAAT;AACAkyH,MAAAA,MAAM,CAAC51H,aAAP,GAAuB,KAAvB;;AAEA,UAAG,KAAK0tB,KAAL,KAAe,IAAlB,EAAwB;AAEvB,aAAKA,KAAL,GAAa,IAAIzpB,YAAJ,EAAb;AAEA;;AAED,WAAKypB,KAAL,CAAWnhD,GAAX,CAAeqpJ,MAAf;AACA,WAAKA,MAAL,GAAcA,MAAd;AAEA;AAED;AAED;;;;;;;AAMAO,EAAAA,eAAe,GAAG;AAEjB,WAAO,IAAP;AAEA;AAED;;;;;;;;;;;;;AAYAC,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC,CAAE;AAElD;;;;;;;;;;;;;;;AAcAtoB,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAM,IAAIxsF,KAAJ,CAAU,gCAAV,CAAN;AAEA;AAED;;;;;;;;;;;;;;;AAcAw4B,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB,CAAE;AAEzB;;;;;;;;;;;;;;;;;;;;AAmBA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC,CAAE;AAE/C;;;;;;;;;;;;;;;AAcAroI,EAAAA,OAAO,GAAG;AAET,UAAMwV,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;;AAEA,QAAGvyH,QAAQ,KAAK,IAAhB,EAAsB;AAErBA,MAAAA,QAAQ,CAACxV,OAAT;AAEA;;AAED,SAAI,MAAM35B,GAAV,IAAiBD,MAAM,CAACF,IAAP,CAAY,IAAZ,CAAjB,EAAoC;AAEnC,UAAG,KAAKG,GAAL,MAAc,IAAd,IAAsB,OAAO,KAAKA,GAAL,EAAU25B,OAAjB,KAA6B,UAAtD,EAAkE;AAEjE;AACA,aAAK35B,GAAL,EAAU25B,OAAV;AAEA;AAED;AAED;;AAzSS;AA6SX;;;;;;;AAIA,MAAMsoI,QAAN,SAAuBb,IAAvB,CAA4B;AAE3B;;;;;;;;;AAUA7/J,EAAAA,WAAW,CAAC;AACX2gK,IAAAA,eAAe,GAAG,GADP;AAEXl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SAFL;AAGX/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD,SAHN;AAIX/H,IAAAA,UAAU,GAAGC,UAAU,CAACC;AAJb,MAKR,EALO,EAKH;AAEP,UAAM,UAAN;AAEA;;;;;;;AAOA,SAAKgJ,aAAL,GAAqB,IAAIzmI,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAChD1D,MAAAA,SAAS,EAAExU,mBADqC;AAEhDuU,MAAAA,SAAS,EAAEvU,mBAFqC;AAGhDwY,MAAAA,aAAa,EAAE,KAHiC;AAIhDD,MAAAA,WAAW,EAAE;AAJmC,KAA5B,CAArB;AAOA,SAAKomI,aAAL,CAAmBrmI,OAAnB,CAA2BnmB,IAA3B,GAAkC,eAAlC;AAEA;;;;;;;AAOA,SAAKysJ,aAAL,GAAqB,KAAKD,aAAL,CAAmB3yI,KAAnB,EAArB;AACA,SAAK4yI,aAAL,CAAmBtmI,OAAnB,CAA2BnmB,IAA3B,GAAkC,eAAlC;AAEA;;;;;;;;;AASA,SAAKq2E,UAAL,GAAkB,IAAIi1E,OAAJ,CAAY,IAAZ,EAAkBj3J,KAAlB,EAAyBC,MAAzB,EAAiCi4J,eAAjC,CAAlB;AAEA;;;;;;;AAOA,SAAKG,mBAAL,GAA2B,IAAIvJ,mBAAJ,EAA3B;AAEA;;;;;;;AAOA,SAAKwJ,2BAAL,GAAmC,IAAIxJ,mBAAJ,EAAnC;AACA,SAAKwJ,2BAAL,CAAiC7hH,SAAjC,GAA6C,IAA7C;AAEA;;;;;;;AAOA,SAAKA,SAAL,GAAiB,KAAjB;AAEA,SAAKw4G,UAAL,GAAkBA,UAAlB;AAEA;AAED;;;;;;;;AAOA,MAAIjvJ,KAAJ,GAAY;AAEX,WAAO,KAAKgiF,UAAL,CAAgBhiF,KAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,KAAJ,CAAUvG,KAAV,EAAiB;AAEhB,SAAKuoF,UAAL,CAAgBhiF,KAAhB,GAAwBvG,KAAxB;AAEA;AAED;;;;;;;;AAOA,MAAIwG,MAAJ,GAAa;AAEZ,WAAO,KAAK+hF,UAAL,CAAgB/hF,MAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,MAAJ,CAAWxG,KAAX,EAAkB;AAEjB,SAAKuoF,UAAL,CAAgB/hF,MAAhB,GAAyBxG,KAAzB;AAEA;AAED;;;;;;;AAMA,MAAI+yB,KAAJ,GAAY;AAEX,WAAO,KAAK6rI,mBAAL,CAAyB3sG,QAAzB,CAAkCl/B,KAAlC,CAAwC/yB,KAA/C;AAEA;AAED;;;;;;;;;;;;;;AAaA,MAAI+yB,KAAJ,CAAU/yB,KAAV,EAAiB;AAEhB,SAAK4+J,mBAAL,CAAyB3sG,QAAzB,CAAkCl/B,KAAlC,CAAwC/yB,KAAxC,GAAgDA,KAAhD;AACA,SAAK6+J,2BAAL,CAAiC5sG,QAAjC,CAA0Cl/B,KAA1C,CAAgD/yB,KAAhD,GAAwDA,KAAxD;AAEA;AAED;;;;;;;AAMA,MAAIw1J,UAAJ,GAAiB;AAEhB,WAAO,KAAKoJ,mBAAL,CAAyBpJ,UAAhC;AAEA;AAED;;;;;;;;;;AASA,MAAIA,UAAJ,CAAex1J,KAAf,EAAsB;AAErB,SAAK4+J,mBAAL,CAAyBpJ,UAAzB,GAAsCx1J,KAAtC;AACA,SAAK6+J,2BAAL,CAAiCrJ,UAAjC,GAA8Cx1J,KAA9C;AAEA;AAED;;;;;;;;AAOA8+J,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKv2E,UAAL,CAAgBx1D,KAAvB;AAEA;AAED;;;;;;;;AAOAgsI,EAAAA,kBAAkB,CAAChsI,KAAD,EAAQ;AAEzB,SAAKw1D,UAAL,CAAgBx1D,KAAhB,GAAwBA,KAAxB;AAEA;AAED;;;;;;;;;;;;AAWAijC,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAMh3B,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMt3B,MAAM,GAAG,KAAKA,MAApB;AAEA,UAAMsgI,aAAa,GAAG,KAAKA,aAA3B;AACA,UAAMC,aAAa,GAAG,KAAKA,aAA3B;AAEA,QAAIjzH,QAAQ,GAAG,KAAKkzH,mBAApB;AACA,QAAI3sG,QAAQ,GAAGvmB,QAAQ,CAACumB,QAAxB;AACA,UAAMsjG,MAAM,GAAG7pH,QAAQ,CAACiqH,SAAT,EAAf;AAEA,QAAIqJ,MAAM,GAAGvL,WAAb;AACA,QAAIwL,MAAJ;AACA,QAAIriK,CAAJ,EAAOI,CAAP;AAEA,SAAKkhK,qBAAL,CAA2BxyH,QAA3B,EAhBmE,CAkBnE;;AACA,SAAI9uC,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAGu4J,MAAM,CAACh6J,MAAP,GAAgB,CAA/B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyC,EAAEJ,CAA3C,EAA8C;AAE7C;AACAqiK,MAAAA,MAAM,GAAI,CAACriK,CAAC,GAAG,CAAL,MAAY,CAAb,GAAkB8hK,aAAlB,GAAkCC,aAA3C;AAEA1sG,MAAAA,QAAQ,CAACsjG,MAAT,CAAgBv1J,KAAhB,GAAwBu1J,MAAM,CAAC34J,CAAD,CAA9B;AACAq1D,MAAAA,QAAQ,CAACwhG,WAAT,CAAqBzzJ,KAArB,GAA6Bg/J,MAAM,CAAC3mI,OAApC;AACAo9B,MAAAA,QAAQ,CAACM,eAAT,CAAyBkpG,MAAzB;AACAxpG,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AAEA4gI,MAAAA,MAAM,GAAGC,MAAT;AAEA;;AAED,QAAG,KAAKjiH,SAAR,EAAmB;AAElBtR,MAAAA,QAAQ,GAAG,KAAKmzH,2BAAhB;AACA5sG,MAAAA,QAAQ,GAAGvmB,QAAQ,CAACumB,QAApB;AACA,WAAKisG,qBAAL,CAA2BxyH,QAA3B;AAEA;;AAEDumB,IAAAA,QAAQ,CAACsjG,MAAT,CAAgBv1J,KAAhB,GAAwBu1J,MAAM,CAAC34J,CAAD,CAA9B;AACAq1D,IAAAA,QAAQ,CAACwhG,WAAT,CAAqBzzJ,KAArB,GAA6Bg/J,MAAM,CAAC3mI,OAApC;AACAo9B,IAAAA,QAAQ,CAACM,eAAT,CAAyB,KAAKioG,cAAL,GAAsB,IAAtB,GAA6BK,YAAtD;AACA5oG,IAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AAEA;AAED;;;;;;;;AAOA1F,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAM+hF,UAAU,GAAG,KAAKA,UAAxB;AACAA,IAAAA,UAAU,CAACy3B,IAAX,CAAgB50F,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AAEA,UAAMkT,CAAC,GAAG6uE,UAAU,CAAChiF,KAArB;AACA,UAAMtL,CAAC,GAAGstF,UAAU,CAAC/hF,MAArB;AAEA,SAAKk4J,aAAL,CAAmBhmI,OAAnB,CAA2Bhf,CAA3B,EAA8Bze,CAA9B;AACA,SAAK0jK,aAAL,CAAmBjmI,OAAnB,CAA2Bhf,CAA3B,EAA8Bze,CAA9B;AAEA,SAAK2jK,mBAAL,CAAyBzK,YAAzB,CAAsC,MAAMz6I,CAA5C,EAA+C,MAAMze,CAArD;AACA,SAAK4jK,2BAAL,CAAiC1K,YAAjC,CAA8C,MAAMz6I,CAApD,EAAuD,MAAMze,CAA7D;AAEA;AAED;;;;;;;;;AAQAqjK,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,QAAG,CAACtwI,KAAD,IAAUswI,eAAe,KAAKn+I,uBAAjC,EAAmD;AAElD,WAAKs+I,aAAL,CAAmBrmI,OAAnB,CAA2B7D,MAA3B,GAAoCvT,gBAApC;AACA,WAAK09I,aAAL,CAAmBtmI,OAAnB,CAA2B7D,MAA3B,GAAoCvT,gBAApC;AAEA;;AAED,QAAGs9I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC,WAAK+gK,aAAL,CAAmBrmI,OAAnB,CAA2BtxB,IAA3B,GAAkCw3J,eAAlC;AACA,WAAKI,aAAL,CAAmBtmI,OAAnB,CAA2BtxB,IAA3B,GAAkCw3J,eAAlC;AAEA;AAED;AAED;;;;;;;;AAOA,aAAWhB,SAAX,GAAuB;AAEtB,WAAOC,OAAO,CAACD,SAAf;AAEA;;AA3V0B;AA+V5B;;;;;;;AAIA,MAAM2B,aAAN,SAA4BvB,IAA5B,CAAiC;AAEhC;;;AAIA7/J,EAAAA,WAAW,GAAG;AAEb,UAAM,eAAN,EAAuB,IAAvB,EAA6B,IAA7B;AAEA,SAAKggK,SAAL,GAAiB,KAAjB;AAEA;AAED;;;;;;;;;;;AAUA9nG,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAMx2B,OAAO,GAAGT,QAAQ,CAACoR,KAAT,CAAevK,OAAf,CAAuBpG,OAAvC;AAEAA,IAAAA,OAAO,CAACs1B,SAAR,CAAkB,KAAlB;AACAt1B,IAAAA,OAAO,CAACgzB,OAAR,CAAgB,KAAhB;AAEA;;AA/B+B;AAmCjC;;;;;;;;;AAOA,MAAM7uF,KAAK,GAAG,IAAI4F,YAAJ,EAAd;AAEA;;;;AAIA,MAAMk/J,SAAN,SAAwBxB,IAAxB,CAA6B;AAE5B;;;;;;;AAQA7/J,EAAAA,WAAW,CAACzD,KAAK,GAAG,IAAT,EAAeq2D,KAAK,GAAG,IAAvB,EAA6BwF,OAAO,GAAG,KAAvC,EAA8C;AAExD,UAAM,WAAN,EAAmB,IAAnB,EAAyB,IAAzB;AAEA,SAAK4nG,SAAL,GAAiB,KAAjB;AAEA;;;;;;AAMA,SAAKzjK,KAAL,GAAaA,KAAb;AAEA;;;;;;AAMA,SAAKq2D,KAAL,GAAaA,KAAb;AAEA;;;;;;AAMA,SAAKwF,OAAL,GAAeA,OAAf;AAEA;;;;;;;;AAQA,SAAKkpG,kBAAL,GAA0B,IAA1B;AAEA;;;;;;;;AAQA,SAAKC,kBAAL,GAA0B,CAAC,GAA3B;AAEA;AAED;;;;;;;;;;;AAUArpG,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAM0yE,kBAAkB,GAAG,KAAKA,kBAAhC;AACA,UAAMC,kBAAkB,GAAG,KAAKA,kBAAhC;AACA,UAAMr4F,UAAU,GAAGvR,QAAQ,CAAC4S,aAAT,EAAnB;AAEA,UAAMi3F,qBAAqB,GAAIF,kBAAkB,KAAK,IAAtD;AACA,UAAMG,qBAAqB,GAAIF,kBAAkB,IAAI,GAArD;;AAEA,QAAGC,qBAAH,EAA0B;AAEzBjlK,MAAAA,KAAK,CAAC2xB,IAAN,CAAWypC,QAAQ,CAAC0S,aAAT,EAAX;AACA1S,MAAAA,QAAQ,CAAC2S,aAAT,CAAuBg3F,kBAAvB,EAA2CG,qBAAqB,GAC/DF,kBAD+D,GAC1Cr4F,UADtB;AAGA,KAND,MAMO,IAAGu4F,qBAAH,EAA0B;AAEhC9pG,MAAAA,QAAQ,CAAC6S,aAAT,CAAuB+2F,kBAAvB;AAEA;;AAED5pG,IAAAA,QAAQ,CAACM,eAAT,CAAyB,KAAKioG,cAAL,GAAsB,IAAtB,GAA6BvK,WAAtD;AACAh+F,IAAAA,QAAQ,CAACQ,KAAT,CAAe,KAAK57D,KAApB,EAA2B,KAAKq2D,KAAhC,EAAuC,KAAKwF,OAA5C;;AAEA,QAAGopG,qBAAH,EAA0B;AAEzB7pG,MAAAA,QAAQ,CAAC2S,aAAT,CAAuB/tE,KAAvB,EAA8B2sE,UAA9B;AAEA,KAJD,MAIO,IAAGu4F,qBAAH,EAA0B;AAEhC9pG,MAAAA,QAAQ,CAAC6S,aAAT,CAAuBtB,UAAvB;AAEA;AAED;;AA1G2B;AA8G7B;;;;;;;;;AAOA,IAAIw4F,iBAAiB,GAAG,KAAxB;AAEA;;;;;;;;;;;AAWA,MAAMC,uBAAN,CAA8B;AAE7B;;;;;AAMA3hK,EAAAA,WAAW,CAAC4tC,QAAQ,GAAG,IAAZ,EAAkB;AAE5B;;;;;;AAOA,SAAKg0H,iBAAL,GAAyB,IAAI9mE,GAAJ,EAAzB;AAEA;;;;;;;AAOA,SAAKltD,QAAL,GAAgB,IAAhB;AAEA;;;;;;;AAOA,SAAKi0H,iBAAL,GAAyB,IAAzB;AAEA;;;;;;;AAOA,SAAKC,gBAAL,GAAwB,IAAxB;AAEA,SAAKvwE,WAAL,CAAiB3jD,QAAjB;AAEA;AAED;;;;;;;AAMA2jD,EAAAA,WAAW,CAAC3jD,QAAD,EAAW;AAErB,SAAKm0H,gBAAL;;AAEA,QAAGn0H,QAAQ,KAAK,IAAhB,EAAsB;AAErB,WAAKA,QAAL,GAAgBA,QAAhB;AAEA,WAAKi0H,iBAAL,GAAyBj0H,QAAQ,CAAC3f,KAAT,EAAzB;AACA,WAAK4zI,iBAAL,CAAuB1tG,QAAvB,GAAkC31D,MAAM,CAACme,MAAP,CAAc,EAAd,EAAkBixB,QAAQ,CAACumB,QAA3B,CAAlC;AAEA,WAAK2tG,gBAAL,GAAwBl0H,QAAQ,CAAC3f,KAAT,EAAxB;AACA,WAAK6zI,gBAAL,CAAsB3tG,QAAtB,GAAiC31D,MAAM,CAACme,MAAP,CAAc,EAAd,EAAkBixB,QAAQ,CAACumB,QAA3B,CAAjC;AACA,WAAK2tG,gBAAL,CAAsBp/G,QAAtB,GAAiC,IAAjC;AAEA;AAED;AAED;;;;;;;;;;AASAwV,EAAAA,MAAM,CAACP,QAAD,EAAWC,KAAX,EAAkBt3B,MAAlB,EAA0B;AAE/B,UAAMsN,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAMk0H,gBAAgB,GAAG,KAAKA,gBAA9B;AACA,UAAMD,iBAAiB,GAAG,KAAKA,iBAA/B;AACA,UAAMD,iBAAiB,GAAG,KAAKA,iBAA/B;AAEA,UAAM5hF,gBAAgB,GAAGroB,QAAQ,CAAC8sB,SAAT,CAAmBlyB,OAA5C;AACA,UAAMivC,WAAW,GAAG7pC,QAAQ,CAAC6pC,WAA7B,CAR+B,CAU/B;;AACA7pC,IAAAA,QAAQ,CAAC8sB,SAAT,CAAmBlyB,OAAnB,GAA6B,KAA7B;AACAoF,IAAAA,QAAQ,CAAC6pC,WAAT,GAAuB,KAAvB;;AAEA,QAAGkgE,iBAAH,EAAsB;AAErB,UAAIM,SAAS,GAAG,CAAhB,CAFqB,CAIrB;;AACApqG,MAAAA,KAAK,CAACprB,QAAN,CAAgBn1B,IAAD,IAAU;AAExB,YAAGA,IAAI,CAACi2B,MAAR,EAAgB;AAEfs0H,UAAAA,iBAAiB,CAACt0I,GAAlB,CAAsBjW,IAAtB,EAA4BA,IAAI,CAACu2B,QAAjC;;AAEA,cAAGv2B,IAAI,CAAC41B,eAAR,EAAyB;AAExB51B,YAAAA,IAAI,CAACu2B,QAAL,GAAgBi0H,iBAAhB;AAEA,WAJD,MAIO,IAAGxqJ,IAAI,CAACg3C,aAAR,EAAuB;AAE7Bh3C,YAAAA,IAAI,CAACu2B,QAAL,GAAgBk0H,gBAAhB;AAEA,WAJM,MAIA;AAENzqJ,YAAAA,IAAI,CAACu2B,QAAL,GAAgBA,QAAhB;AAEA;;AAED,YAAEo0H,SAAF;AAEA;AAED,OAxBD;AA0BArqG,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;;AAEA,WAAI,MAAMq6H,KAAV,IAAmBiH,iBAAnB,EAAsC;AAErCjH,QAAAA,KAAK,CAAC,CAAD,CAAL,CAAS/sH,QAAT,GAAoB+sH,KAAK,CAAC,CAAD,CAAzB;AAEA;;AAED,UAAGqH,SAAS,KAAKJ,iBAAiB,CAAClxH,IAAnC,EAAyC;AAExCkxH,QAAAA,iBAAiB,CAACzpG,KAAlB;AAEA;AAED,KA7CD,MA6CO;AAEN,YAAM7pB,gBAAgB,GAAGspB,KAAK,CAACtpB,gBAA/B;AACAspB,MAAAA,KAAK,CAACtpB,gBAAN,GAAyBV,QAAzB;AACA+pB,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AACAs3B,MAAAA,KAAK,CAACtpB,gBAAN,GAAyBA,gBAAzB;AAEA;;AAEDqpB,IAAAA,QAAQ,CAAC8sB,SAAT,CAAmBlyB,OAAnB,GAA6BytB,gBAA7B;AACAroB,IAAAA,QAAQ,CAAC6pC,WAAT,GAAuBA,WAAvB;AAEA;AAED;;;;;;;AAMAugE,EAAAA,gBAAgB,GAAG;AAElB,QAAG,KAAKF,iBAAL,KAA2B,IAA9B,EAAoC;AAEnC,WAAKA,iBAAL,CAAuBzpI,OAAvB;AAEA;;AAED,QAAG,KAAK0pI,gBAAL,KAA0B,IAA7B,EAAmC;AAElC,WAAKA,gBAAL,CAAsB1pI,OAAtB;AAEA;AAED;AAED;;;;;AAIAA,EAAAA,OAAO,GAAG;AAET,SAAKwpI,iBAAL,CAAuBzpG,KAAvB;AACA,SAAK4pG,gBAAL;AAEA;AAED;;;;;;;AAMA,aAAWL,iBAAX,GAA+B;AAE9B,WAAOA,iBAAP;AAEA;AAED;;;;;;;;;AAQA,aAAWA,iBAAX,CAA6Bx/J,KAA7B,EAAoC;AAEnCw/J,IAAAA,iBAAiB,GAAGx/J,KAApB;AAEA;;AAtN4B;AA0N9B;;;;;;;;;AAMA,MAAM+/J,UAAN,SAAyBpC,IAAzB,CAA8B;AAE7B;;;;;;;AAQA7/J,EAAAA,WAAW,CAAC43D,KAAD,EAAQt3B,MAAR,EAAgBgO,gBAAgB,GAAG,IAAnC,EAAyC;AAEnD,UAAM,YAAN,EAAoBspB,KAApB,EAA2Bt3B,MAA3B;AAEA,SAAK0/H,SAAL,GAAiB,KAAjB;AAEA;;;;;;;AAOA,SAAKkC,SAAL,GAAiB,IAAIb,SAAJ,EAAjB;AAEA;;;;;;;AAOA,SAAK3mI,YAAL,GAAoB,IAApB;AAEA;;;;;;;AAOA,SAAKynI,uBAAL,GAAgC7zH,gBAAgB,KAAK,IAAtB,GAA8B,IAA9B,GAC9B,IAAIqzH,uBAAJ,CAA4BrzH,gBAA5B,CADD;AAGA;AAED;;;;;;;AAMA,MAAI4xH,cAAJ,GAAqB;AAEpB,WAAO,MAAMA,cAAb;AAEA;AAED;;;;;;;AAMA,MAAIA,cAAJ,CAAmBh+J,KAAnB,EAA0B;AAEzB,UAAMg+J,cAAN,GAAuBh+J,KAAvB;AACA,SAAKggK,SAAL,CAAehC,cAAf,GAAgCh+J,KAAhC;AAEA;AAED;;;;;;;AAMA,MAAIosC,gBAAJ,GAAuB;AAEtB,UAAM2iF,OAAO,GAAG,KAAKkxC,uBAArB;AAEA,WAAQlxC,OAAO,KAAK,IAAb,GAAqBA,OAAO,CAACrjF,QAA7B,GAAwC,IAA/C;AAEA;AAED;;;;;;;AAMA,MAAIU,gBAAJ,CAAqBpsC,KAArB,EAA4B;AAE3B,UAAM+uH,OAAO,GAAG,KAAKkxC,uBAArB;;AAEA,QAAGjgK,KAAK,KAAK,IAAV,IAAkB+uH,OAAO,KAAK,IAAjC,EAAuC;AAEtCA,MAAAA,OAAO,CAAC1/B,WAAR,CAAoBrvF,KAApB;AAEA,KAJD,MAIO,IAAGA,KAAK,KAAK,IAAb,EAAmB;AAEzB+uH,MAAAA,OAAO,CAAC74F,OAAR;AACA,WAAK+pI,uBAAL,GAA+B,IAA/B;AAEA,KALM,MAKA;AAEN,WAAKA,uBAAL,GAA+B,IAAIR,uBAAJ,CAA4Bz/J,KAA5B,CAA/B;AAEA;AAED;AAED;;;;;;;AAMA,MAAIi2D,KAAJ,GAAY;AAEX,WAAO,KAAK+pG,SAAL,CAAe3vG,OAAtB;AAEA;AAED;;;;;;;AAMA,MAAI4F,KAAJ,CAAUj2D,KAAV,EAAiB;AAEhB,SAAKggK,SAAL,CAAe3vG,OAAf,GAAyBrwD,KAAzB;AAEA;AAED;;;;;;;AAMAkgK,EAAAA,YAAY,GAAG;AAEd,WAAO,KAAKF,SAAZ;AAEA;AAED;;;;;;;AAMA7B,EAAAA,eAAe,GAAG;AAEjB,WAAO,KAAK3lI,YAAZ;AAEA;AAED;;;;;;;;;;;AAUA4lI,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,SAAK9lD,YAAL,GAAoBA,YAApB;AAEA;AAED;;;;;;;;;;;AAUAw9B,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAMh3B,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMt3B,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM62B,YAAY,GAAG,KAAK+oG,cAAL,GAAsB,IAAtB,GAA6BvK,WAAlD;;AAEA,QAAG,KAAKj7H,YAAL,KAAsB,IAAtB,IAA8B,CAAC,KAAKwlI,cAAvC,EAAuD;AAEtDvK,MAAAA,WAAW,CAACj7H,YAAZ,GAA2B,KAAKA,YAAhC;AACA6lI,MAAAA,YAAY,CAAC7lI,YAAb,GAA4B,IAA5B;AAEA;;AAED,QAAG,KAAKy9B,KAAR,EAAe;AAEd,WAAK+pG,SAAL,CAAehqG,MAAf,CAAsBP,QAAtB,EAAgCg+F,WAAhC;AAEA;;AAEDh+F,IAAAA,QAAQ,CAACM,eAAT,CAAyBd,YAAzB;;AAEA,QAAG,KAAKgrG,uBAAL,KAAiC,IAApC,EAA0C;AAEzC,WAAKA,uBAAL,CAA6BjqG,MAA7B,CAAoCP,QAApC,EAA8CC,KAA9C,EAAqDt3B,MAArD;AAEA,KAJD,MAIO;AAENq3B,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AAEA;AAED;;AAzN4B;AA6N9B;;;;;;;AAIA,MAAM+hI,SAAN,SAAwBxC,IAAxB,CAA6B;AAE5B;;;;;;;;;;;AAYA7/J,EAAAA,WAAW,CAAC43D,KAAD,EAAQt3B,MAAR,EAAgB;AAC1BqgI,IAAAA,eAAe,GAAG,GADQ;AAE1Bl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SAFU;AAG1B/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD,SAHS;AAI1BtoG,IAAAA;AAJ0B,MAKvB,EALO,EAKH;AAEP,UAAM,WAAN;AAEA,SAAK6oG,SAAL,GAAiB,KAAjB;AAEA;;;;;;;AAOA,SAAKsC,UAAL,GAAkB,IAAIL,UAAJ,CAAerqG,KAAf,EAAsBt3B,MAAtB,EAA8B,IAAIgiD,wBAAJ,CAAsB;AACrE9B,MAAAA,YAAY,EAAEz4D,uBADuD;AAErEy6B,MAAAA,YAAY,EAAE,IAFuD;AAGrEE,MAAAA,QAAQ,EAAE;AAH2D,KAAtB,CAA9B,CAAlB;AAMA,UAAMw/G,SAAS,GAAG,KAAKI,UAAL,CAAgBF,YAAhB,EAAlB;AACAF,IAAAA,SAAS,CAACZ,kBAAV,GAA+B,IAAIn/J,YAAJ,CAAU,QAAV,CAA/B;AACA+/J,IAAAA,SAAS,CAACX,kBAAV,GAA+B,GAA/B;AAEA;;;;;;AAMA,SAAKpqG,YAAL,GAAoBA,YAApB;;AAEA,QAAG,KAAKA,YAAL,KAAsBt3D,SAAzB,EAAoC;AAEnC,WAAKs3D,YAAL,GAAoB,IAAIh9B,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAC/C1D,QAAAA,SAAS,EAAE7U,oBADoC;AAE/C4U,QAAAA,SAAS,EAAE5U,oBAFoC;AAG/C6Y,QAAAA,aAAa,EAAE;AAHgC,OAA5B,CAApB;AAMA,WAAK08B,YAAL,CAAkB58B,OAAlB,CAA0BnmB,IAA1B,GAAiC,kBAAjC;AAEA;AAED;;;;;;;;;;AASA,SAAKq2E,UAAL,GAAkB,IAAIi1E,OAAJ,CAAY,IAAZ,EAAkBj3J,KAAlB,EAAyBC,MAAzB,EAAiCi4J,eAAjC,CAAlB;AAEA;AAED;;;;;;;AAMA,MAAIpmI,OAAJ,GAAc;AAEb,WAAO,KAAK48B,YAAL,CAAkB58B,OAAzB;AAEA;AAED;;;;;;;;AAOAymI,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKL,eAAZ;AAEA;AAED;;;;;;;;AAOAM,EAAAA,kBAAkB,CAAChsI,KAAD,EAAQ;AAEzB,SAAK0rI,eAAL,GAAuB1rI,KAAvB;AACA,SAAK2F,OAAL,CAAa,KAAK6vD,UAAL,CAAgBy3B,IAAhB,CAAqB/7G,CAAlC,EAAqC,KAAKskF,UAAL,CAAgBy3B,IAAhB,CAAqB77G,CAA1D;AAEA;AAED;;;;;;;;;;;AAUA6xD,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAMz3B,YAAY,GAAG,KAAK+oG,cAAL,GAAsB,IAAtB,GAA6B,KAAK/oG,YAAvD;AACA,SAAKmrG,UAAL,CAAgBpqG,MAAhB,CAAuBP,QAAvB,EAAiCR,YAAjC;AAEA;AAED;;;;;;;;AAOAv8B,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAM+hF,UAAU,GAAG,KAAKA,UAAxB;AACAA,IAAAA,UAAU,CAACy3B,IAAX,CAAgB50F,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AAEA,SAAKyuD,YAAL,CAAkBv8B,OAAlB,CAA0B6vD,UAAU,CAAChiF,KAArC,EAA4CgiF,UAAU,CAAC/hF,MAAvD;AAEA;;AAjJ2B;AAqJ7B;;;;;;;;;;;AAQA,MAAM65J,qBAAN,SAAoC1C,IAApC,CAAyC;AAExC;;;;;;;;;AAUA7/J,EAAAA,WAAW,CAAC;AACX44J,IAAAA,YAAY,GAAG,IADJ;AAEX+H,IAAAA,eAAe,GAAG,GAFP;AAGXl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SAHL;AAIX/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD;AAJN,MAKR,EALO,EAKH;AAEP,UAAM,uBAAN;AAEA,SAAKW,qBAAL,CAA2B,IAAIzH,yBAAJ,EAA3B;AACA,SAAKsH,iBAAL,GAAyB,IAAzB;AACA,SAAKD,SAAL,GAAiB,KAAjB;;AAEA,QAAGpH,YAAY,KAAK,IAApB,EAA0B;AAEzB,YAAMhrH,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AACAvyH,MAAAA,QAAQ,CAACumB,QAAT,CAAkBykG,YAAlB,CAA+B12J,KAA/B,GAAuC02J,YAAvC;AACAhrH,MAAAA,QAAQ,CAAC6mB,OAAT,CAAiB+tG,kBAAjB,GAAsC,GAAtC;AAEA;AAED;;;;;;;;;AAQA,SAAKrrG,YAAL,GAAoB,IAAIh9B,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAC/C1D,MAAAA,SAAS,EAAE7U,oBADoC;AAE/C4U,MAAAA,SAAS,EAAE5U,oBAFoC;AAG/C6Y,MAAAA,aAAa,EAAE,KAHgC;AAI/CD,MAAAA,WAAW,EAAE,KAJkC;AAK/CvxB,MAAAA,IAAI,EAAE2Z;AALyC,KAA5B,CAApB;AAQA,SAAKu0C,YAAL,CAAkB58B,OAAlB,CAA0BnmB,IAA1B,GAAiC,8BAAjC;AACA,SAAK+iD,YAAL,CAAkB58B,OAAlB,CAA0BpD,eAA1B,GAA4C,KAA5C;AAEA;;;;;;AAMA,SAAKszD,UAAL,GAAkB,IAAIi1E,OAAJ,CAAY,IAAZ,EAAkBj3J,KAAlB,EAAyBC,MAAzB,CAAlB;AACA,SAAK+hF,UAAL,CAAgBx1D,KAAhB,GAAwB0rI,eAAxB;AAEA;AAED;;;;;;;AAMA,MAAIpmI,OAAJ,GAAc;AAEb,WAAO,KAAK48B,YAAL,CAAkB58B,OAAzB;AAEA;AAED;;;;;;;;AAOA+lI,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,UAAM5yC,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AACAvyH,IAAAA,QAAQ,CAACumB,QAAT,CAAkB35B,WAAlB,CAA8Bt4B,KAA9B,GAAsCw4B,YAAtC;AACAkT,IAAAA,QAAQ,CAAC4yC,YAAT,GAAwBA,YAAxB;AAEA;AAED;;;;;;;;;;;AAUAtoB,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnEj3B,IAAAA,QAAQ,CAACM,eAAT,CAAyB,KAAKioG,cAAL,GAAsB,IAAtB,GAA6B,KAAK/oG,YAA3D;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAgB,KAAKN,KAArB,EAA4B,KAAKt3B,MAAjC;AAEA;AAED;;;;;;;;AAOA1F,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAM+hF,UAAU,GAAG,KAAKA,UAAxB;AACAA,IAAAA,UAAU,CAACy3B,IAAX,CAAgB50F,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B,EAHsB,CAKtB;;AACA,SAAKy3J,qBAAL,GAA6B9J,YAA7B,CAA0C,MAAM5tJ,KAAhD,EAAuD,MAAMC,MAA7D;AAEA,SAAKyuD,YAAL,CAAkBv8B,OAAlB,CAA0B6vD,UAAU,CAAChiF,KAArC,EAA4CgiF,UAAU,CAAC/hF,MAAvD;AAEA;AAED;;;;;;;;;AAQA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,QAAG,CAAC9oG,QAAQ,CAAC2G,YAAT,CAAsBC,QAA1B,EAAoC;AAEnC5G,MAAAA,QAAQ,CAAC7hC,UAAT,GAAsB+7C,YAAtB,CAAmC,mBAAnC;AAEA;AAED;;AA9IuC;AAkJzC;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA,MAAM4wF,aAAa,GAAG;AAErBC,EAAAA,IAAI,EAAE,CAFe;AAGrBC,EAAAA,GAAG,EAAE,CAHgB;AAIrB9N,EAAAA,KAAK,EAAE,CAJc;AAKrB+N,EAAAA,OAAO,EAAE,CALY;AAMrBC,EAAAA,UAAU,EAAE,CANS;AAOrBC,EAAAA,WAAW,EAAE,CAPQ;AAQrBC,EAAAA,MAAM,EAAE,CARa;AASrBC,EAAAA,UAAU,EAAE,CATS;AAUrBC,EAAAA,SAAS,EAAE,CAVU;AAWrBC,EAAAA,OAAO,EAAE,CAXY;AAYrBvG,EAAAA,QAAQ,EAAE,EAZW;AAarBwG,EAAAA,MAAM,EAAE,EAba;AAcrBC,EAAAA,QAAQ,EAAE,EAdW;AAerBC,EAAAA,MAAM,EAAE,EAfa;AAgBrBC,EAAAA,OAAO,EAAE,EAhBY;AAiBrBC,EAAAA,OAAO,EAAE,EAjBY;AAkBrBC,EAAAA,MAAM,EAAE,EAlBa;AAmBrBC,EAAAA,UAAU,EAAE,EAnBS;AAoBrBC,EAAAA,QAAQ,EAAE;AApBW,CAAtB;;AAwBA,IAAIC,gBAAgB,GAAG,kHAAvB;AAEA,IAAIC,kBAAkB,GAAG,iPAAzB;AAEA,IAAIC,oBAAoB,GAAG,8GAA3B;AAEA,IAAIC,sBAAsB,GAAG,2QAA7B;AAEA,IAAIC,uBAAuB,GAAG,uQAA9B;AAEA,IAAIC,mBAAmB,GAAG,8GAA1B;AAEA,IAAIC,uBAAuB,GAAG,8GAA9B;AAEA,IAAIC,sBAAsB,GAAG,kHAA7B;AAEA,IAAIC,oBAAoB,GAAG,8GAA3B;AAEA,IAAIC,qBAAqB,GAAG,yGAA5B;AAEA,IAAIC,mBAAmB,GAAG,iQAA1B;AAEA,IAAIC,qBAAqB,GAAG,uHAA5B;AAEA,IAAIC,mBAAmB,GAAG,uGAA1B;AAEA,IAAIC,oBAAoB,GAAG,kRAA3B;AAEA,IAAIC,oBAAoB,GAAG,yQAA3B;AAEA,IAAIC,mBAAmB,GAAG,0HAA1B;AAEA,IAAIC,sBAAsB,GAAG,4SAA7B;AAEA,IAAIC,qBAAqB,GAAG,sHAA5B;AAEA;;;;;;;AAOA,MAAMC,cAAc,GAAG,IAAI/pE,GAAJ,CAAQ,CAC9B,CAAC2nE,aAAa,CAACC,IAAf,EAAqB,IAArB,CAD8B,EAE9B,CAACD,aAAa,CAACE,GAAf,EAAoBgB,gBAApB,CAF8B,EAG9B,CAAClB,aAAa,CAAC5N,KAAf,EAAsB+O,kBAAtB,CAH8B,EAI9B,CAACnB,aAAa,CAACG,OAAf,EAAwBiB,oBAAxB,CAJ8B,EAK9B,CAACpB,aAAa,CAACI,UAAf,EAA2BiB,sBAA3B,CAL8B,EAM9B,CAACrB,aAAa,CAACK,WAAf,EAA4BiB,uBAA5B,CAN8B,EAO9B,CAACtB,aAAa,CAACM,MAAf,EAAuBiB,mBAAvB,CAP8B,EAQ9B,CAACvB,aAAa,CAACO,UAAf,EAA2BiB,uBAA3B,CAR8B,EAS9B,CAACxB,aAAa,CAACQ,SAAf,EAA0BiB,sBAA1B,CAT8B,EAU9B,CAACzB,aAAa,CAACS,OAAf,EAAwBiB,oBAAxB,CAV8B,EAW9B,CAAC1B,aAAa,CAAC9F,QAAf,EAAyByH,qBAAzB,CAX8B,EAY9B,CAAC3B,aAAa,CAACU,MAAf,EAAuBkB,mBAAvB,CAZ8B,EAa9B,CAAC5B,aAAa,CAACW,QAAf,EAAyBkB,qBAAzB,CAb8B,EAc9B,CAAC7B,aAAa,CAACY,MAAf,EAAuBkB,mBAAvB,CAd8B,EAe9B,CAAC9B,aAAa,CAACa,OAAf,EAAwBkB,oBAAxB,CAf8B,EAgB9B,CAAC/B,aAAa,CAACc,OAAf,EAAwBkB,oBAAxB,CAhB8B,EAiB9B,CAAChC,aAAa,CAACe,MAAf,EAAuBkB,mBAAvB,CAjB8B,EAkB9B,CAACjC,aAAa,CAACgB,UAAf,EAA2BkB,sBAA3B,CAlB8B,EAmB9B,CAAClC,aAAa,CAACiB,QAAf,EAAyBkB,qBAAzB,CAnB8B,CAAR,CAAvB;AAsBA;;;;AAIA,MAAME,SAAN,CAAgB;AAEf;;;;;;AAOA9kK,EAAAA,WAAW,CAAC+kK,aAAD,EAAgBvzJ,OAAO,GAAG,GAA1B,EAA+B;AAEzC;;;;;AAMA,SAAKuzJ,aAAL,GAAqBA,aAArB;AAEA;;;;;;AAMA,SAAKvzJ,OAAL,GAAe,IAAI8uI,cAAJ,CAAY9uI,OAAZ,CAAf;AAEA;AAED;;;;;;;AAMAwzJ,EAAAA,aAAa,GAAG;AAEf,WAAOH,cAAc,CAACnoJ,GAAf,CAAmB,KAAKqoJ,aAAxB,CAAP;AAEA;;AAvCc;AA2ChB;;;;;;;;;;;;;AAUA,MAAME,MAAN,CAAa;AAEZ;;;;;;;;;;;;;AAcAjlK,EAAAA,WAAW,CAACoU,IAAD,EAAOugD,cAAP,EAAuB;AACjC1M,IAAAA,UAAU,GAAGi9G,eAAe,CAACC,IADI;AAEjCJ,IAAAA,aAAa,GAAGtC,aAAa,CAACe,MAFG;AAGjC/uG,IAAAA,OAAO,GAAG,IAAIqmC,GAAJ,EAHuB;AAIjC3mC,IAAAA,QAAQ,GAAG,IAAI2mC,GAAJ,EAJsB;AAKjChmC,IAAAA,UAAU,GAAG,IALoB;AAMjCJ,IAAAA,YAAY,GAAG;AANkB,MAO9B,EAPO,EAOH;AAEP;;;;;AAMA,SAAKtgD,IAAL,GAAYA,IAAZ;AAEA;;;;;;;;;AASA,SAAK6zC,UAAL,GAAkBA,UAAlB;AAEA;;;;;;AAMA,SAAK0M,cAAL,GAAsBA,cAAtB;AAEA;;;;;;AAMA,SAAKD,YAAL,GAAoBA,YAApB;AAEA;;;;;;;;AAQA,SAAKD,OAAL,GAAeA,OAAf;AAEA;;;;;;;;;AASA,SAAKN,QAAL,GAAgBA,QAAhB;AAEA;;;;;;;;;AASA,SAAKW,UAAL,GAAkBA,UAAlB;AAEA;;;;;;;;;;;;;AAaA,SAAK8yD,SAAL,GAAiB,IAAIk9C,SAAJ,CAAcC,aAAd,CAAjB;AAEA;AAED;;;;;;;;;;;AAUAzE,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC,CAAE;AAElD;;;;;;;;;;;;;;;AAcAvjD,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC,CAAE;AAE3C;;;;;;;;;;;;;;;AAcAzgH,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB,CAAE;AAEzB;;;;;;;;;;;;;;;;;;;;AAmBA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC,CAAE;AAE/C;;;;;;;;;;;;;;AAaAroI,EAAAA,OAAO,GAAG;AAET,SAAI,MAAM35B,GAAV,IAAiBD,MAAM,CAACF,IAAP,CAAY,IAAZ,CAAjB,EAAoC;AAEnC,UAAG,KAAKG,GAAL,MAAc,IAAd,IAAsB,OAAO,KAAKA,GAAL,EAAU25B,OAAjB,KAA6B,UAAtD,EAAkE;AAEjE;AACA,aAAK35B,GAAL,EAAU25B,OAAV;AAEA;AAED;AAED;;AAxMW;AA4Mb;;;;;;;;;;;;;;AAYA,MAAM8sI,eAAe,GAAG;AAEvBE,EAAAA,WAAW,EAAE,CAFU;AAGvB1L,EAAAA,KAAK,EAAE,CAHgB;AAIvByL,EAAAA,IAAI,EAAE;AAJiB,CAAxB;AAQA;;;;;;;;;;;AAUA,MAAME,cAAc,GAAG;AAEtBC,EAAAA,WAAW,EAAE,aAFS;AAGtBC,EAAAA,UAAU,EAAE,WAHU;AAItBC,EAAAA,YAAY,EAAE,aAJQ;AAKtBC,EAAAA,kBAAkB,EAAE;AALE,CAAvB;AASA;;;;;;;;;;;AASA,SAASC,cAAT,CAAwBC,MAAxB,EAAgC1qH,MAAhC,EAAwC;AAEvC,QAAM2qH,UAAU,GAAG,EAAnB;AACA,MAAIjlK,MAAJ;;AAEA,SAAM,CAACA,MAAM,GAAGglK,MAAM,CAACzqH,IAAP,CAAYD,MAAZ,CAAV,MAAmC,IAAzC,EAA+C;AAE9C2qH,IAAAA,UAAU,CAAC39J,IAAX,CAAgBtH,MAAM,CAAC,CAAD,CAAtB;AAEA;;AAED,SAAOilK,UAAP;AAEA;AAED;;;;;;;;;;AASA,SAASC,gBAAT,CAA0B/jF,MAA1B,EAAkC8jF,UAAlC,EAA8CE,OAA9C,EAAuD;AAEtD,MAAIC,QAAJ,EAAcJ,MAAd;;AAEA,OAAI,MAAM7/B,SAAV,IAAuB8/B,UAAvB,EAAmC;AAElCG,IAAAA,QAAQ,GAAG,OAAOjkF,MAAP,GAAgBgkD,SAAS,CAAC1qF,MAAV,CAAiB,CAAjB,EAAoBtwB,WAApB,EAAhB,GAAoDg7G,SAAS,CAAC/nI,KAAV,CAAgB,CAAhB,CAA/D;AACA4nK,IAAAA,MAAM,GAAG,IAAIp9J,MAAJ,CAAW,iBAAiBu9H,SAAjB,GAA6B,MAAxC,EAAgD,GAAhD,CAAT;;AAEA,SAAI,MAAM60B,KAAV,IAAmBmL,OAAO,CAAClL,OAAR,EAAnB,EAAsC;AAErC,UAAGD,KAAK,CAAC,CAAD,CAAL,KAAa,IAAhB,EAAsB;AAErBmL,QAAAA,OAAO,CAACx4I,GAAR,CAAYqtI,KAAK,CAAC,CAAD,CAAjB,EAAsBA,KAAK,CAAC,CAAD,CAAL,CAASxyJ,OAAT,CAAiBw9J,MAAjB,EAAyBI,QAAzB,CAAtB;AAEA;AAED;AAED;AAED;AAED;;;;;;;;;;;;;;;;;;AAiBA,SAASC,eAAT,CAAyBlkF,MAAzB,EAAiCmkF,MAAjC,EAAyCjM,WAAzC,EAAsDkM,UAAtD,EAAkEzxG,OAAlE,EAA2EN,QAA3E,EAAqFlM,UAArF,EAAiG;AAEhG,QAAMk+G,cAAc,GAAG,wCAAvB;AACA,QAAMC,aAAa,GAAG,4BAAtB;AAEA,QAAMx+C,SAAS,GAAGq+C,MAAM,CAACr+C,SAAzB;AACA,QAAMy+C,OAAO,GAAG,IAAIvrE,GAAJ,CAAQ,CACvB,CAAC,UAAD,EAAamrE,MAAM,CAACtxG,cAApB,CADuB,EAEvB,CAAC,QAAD,EAAWsxG,MAAM,CAACvxG,YAAlB,CAFuB,CAAR,CAAhB;AAKA,QAAM4xG,eAAe,GAAID,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,MAA4B7c,SAA5B,IAAyCwmK,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,EAAwB1U,OAAxB,CAAgC,WAAhC,KAAgD,CAAlH;AACA,QAAMu+J,YAAY,GAAIF,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,MAA4B7c,SAA5B,IAAyCwmK,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,EAAwB1U,OAAxB,CAAgC,QAAhC,KAA6C,CAA5G;AAEA,MAAIw+J,QAAQ,GAAG,EAAf;AAAA,MAAmBC,KAAK,GAAG,EAA3B;AACA,MAAIC,aAAa,GAAG,KAApB;AACA,MAAIC,SAAS,GAAG,KAAhB;;AAEA,MAAGN,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,MAA4B7c,SAA/B,EAA0C;AAEzC0tB,IAAAA,OAAO,CAACyD,KAAR,CAAc,yBAAd,EAAyCi1I,MAAzC;AAEA,GAJD,MAIO,IAAGM,YAAY,IAAI,CAACt+G,UAAU,GAAGi9G,eAAe,CAACE,WAA9B,MAA+C,CAAlE,EAAqE;AAE3E73I,IAAAA,OAAO,CAACyD,KAAR,CAAc,iFAAd,EAAiGi1I,MAAjG;AAEA,GAJM,MAIA,IAAG,CAACK,eAAD,IAAoB,CAACC,YAAxB,EAAsC;AAE5Ch5I,IAAAA,OAAO,CAACyD,KAAR,CAAc,wEAAd,EAAwFi1I,MAAxF;AAEA,GAJM,MAIA;AAEN,QAAGM,YAAH,EAAiB;AAEhBvM,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACE,gBAAxB,EAA0CP,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACE,gBAAxB,IACzC,IADyC,GAClCz4E,MADkC,GACzB,eADjB;AAGA4kF,MAAAA,aAAa,GAAG,IAAhB;AAEA;;AAED,QAAGL,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,MAA0B,IAA1B,IAAkC2pJ,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,EAAsB1U,OAAtB,CAA8B,aAA9B,KAAgD,CAArF,EAAwF;AAEvF,UAAIizC,MAAM,GAAG,OAAO6mC,MAAP,GAAgB,cAA7B,CAFuF,CAIvF;;AACA,UAAGukF,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,EAAsB1U,OAAtB,CAA8B,IAA9B,KAAuC,CAA1C,EAA6C;AAE5CizC,QAAAA,MAAM,IAAI,KAAV;AAEA;;AAEDA,MAAAA,MAAM,IAAI,MAAV;AAEA++G,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACK,mBAAxB,EACCV,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACK,mBAAxB,IAA+Cz/G,MADhD;AAGAurH,MAAAA,QAAQ,GAAGA,QAAQ,CAAC3sJ,MAAT,CAAgB6rJ,cAAc,CAACU,aAAD,EAAgBC,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,CAAhB,CAA9B,CAAX;AACA+pJ,MAAAA,KAAK,GAAGA,KAAK,CAAC5sJ,MAAN,CAAa2sJ,QAAb,EAAuB3sJ,MAAvB,CAA8B6rJ,cAAc,CAACS,cAAD,EAAiBE,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,CAAjB,CAA5C,CAAR;AAEA,KA9BK,CAgCN;;;AACA+pJ,IAAAA,KAAK,GAAGA,KAAK,CAAC5sJ,MAAN,CAAa6rJ,cAAc,CAACS,cAAD,EAAiBE,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,CAAjB,CAA3B,EACN7C,MADM,CACClc,KAAK,CAACgnH,IAAN,CAAWshD,MAAM,CAACxxG,OAAP,CAAen2D,IAAf,EAAX,EAAkC0L,GAAlC,CAAuC5M,CAAD,IAAOA,CAAC,CAAC+K,OAAF,CAAU,eAAV,EAA2B,EAA3B,CAA7C,CADD,EAEN0R,MAFM,CAEClc,KAAK,CAACgnH,IAAN,CAAWshD,MAAM,CAAC9xG,QAAP,CAAgB71D,IAAhB,EAAX,CAFD,CAAR,CAjCM,CAqCN;;AACA2nK,IAAAA,MAAM,CAAC9xG,QAAP,CAAgBt2D,OAAhB,CAAwB,CAACqE,KAAD,EAAQzD,GAAR,KAAgB01D,QAAQ,CAAC7mC,GAAT,CAAaw0D,MAAM,GAAGrjF,GAAG,CAAC28C,MAAJ,CAAW,CAAX,EAActwB,WAAd,EAAT,GAAuCrsB,GAAG,CAACV,KAAJ,CAAU,CAAV,CAApD,EAAkEmE,KAAlE,CAAxC;AACA+jK,IAAAA,MAAM,CAACxxG,OAAP,CAAe52D,OAAf,CAAuB,CAACqE,KAAD,EAAQzD,GAAR,KAAgBg2D,OAAO,CAACnnC,GAAR,CAAYw0D,MAAM,GAAGrjF,GAAG,CAAC28C,MAAJ,CAAW,CAAX,EAActwB,WAAd,EAAT,GAAuCrsB,GAAG,CAACV,KAAJ,CAAU,CAAV,CAAnD,EAAiEmE,KAAjE,CAAvC,EAvCM,CAyCN;;AACA2jK,IAAAA,gBAAgB,CAAC/jF,MAAD,EAAS2kF,KAAT,EAAgBhyG,OAAhB,CAAhB;AACAoxG,IAAAA,gBAAgB,CAAC/jF,MAAD,EAAS2kF,KAAT,EAAgBJ,OAAhB,CAAhB,CA3CM,CA6CN;;AACAH,IAAAA,UAAU,CAAC54I,GAAX,CAAes6F,SAAS,CAACm9C,aAAzB,EAAwCn9C,SAAxC;;AAEA,QAAG0+C,eAAH,EAAoB;AAEnB,UAAIrrH,MAAM,GAAG6mC,MAAM,GAAG,wBAAtB,CAFmB,CAInB;;AACA,UAAG,CAAC75B,UAAU,GAAGi9G,eAAe,CAACxL,KAA9B,MAAyC,CAAzC,IAA8C2M,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,EAAwB1U,OAAxB,CAAgC,OAAhC,KAA4C,CAA7F,EAAgG;AAE/FizC,QAAAA,MAAM,IAAI,SAAV;AACA0rH,QAAAA,SAAS,GAAG,IAAZ;AAEA;;AAED1rH,MAAAA,MAAM,IAAI,cAAV,CAZmB,CAcnB;;AACA,YAAM2rH,YAAY,GAAG9kF,MAAM,GAAG,cAA9B;AACA3tB,MAAAA,QAAQ,CAAC7mC,GAAT,CAAas5I,YAAb,EAA2Bh/C,SAAS,CAACp2G,OAArC,EAhBmB,CAkBnB;;AACAypC,MAAAA,MAAM,IAAI,mBAAmB2sE,SAAS,CAACm9C,aAA7B,GACT,mBADS,GACa6B,YADb,GAC4B,UADtC;AAGA5M,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACG,mBAAxB,EACCR,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACG,mBAAxB,IAA+Cv/G,MADhD;AAGA++G,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACC,aAAxB,EAAuCN,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACC,aAAxB,IACtC,gBADsC,GACnBsM,YADmB,GACJ,OADnC;AAGA,KA5EK,CA8EN;;;AACA5M,IAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACC,aAAxB,EAAuCN,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACC,aAAxB,IACtC+L,OAAO,CAAC3pJ,GAAR,CAAY,UAAZ,CADsC,GACZ,IAD3B;;AAGA,QAAG2pJ,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,MAA0B,IAA7B,EAAmC;AAElCs9I,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACI,WAAxB,EAAqCT,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACI,WAAxB,IACpC4L,OAAO,CAAC3pJ,GAAR,CAAY,QAAZ,CADoC,GACZ,IADzB;AAGA;AAED;;AAED,SAAO;AAAE8pJ,IAAAA,QAAF;AAAYE,IAAAA,aAAZ;AAA2BC,IAAAA;AAA3B,GAAP;AAEA;AAED;;;;;;;AAMA,MAAME,UAAN,SAAyBhH,IAAzB,CAA8B;AAE7B;;;;;;;;AASA7/J,EAAAA,WAAW,CAACsgC,MAAD,EAAS,GAAGwmI,OAAZ,EAAqB;AAE/B,UAAM,YAAN;AAEA,SAAK1G,qBAAL,CAA2B,IAAIrG,cAAJ,CAAmB,IAAnB,EAAyB,IAAzB,EAA+B,IAA/B,EAAqCz5H,MAArC,CAA3B;AAEA;;;;;;;AAOA,SAAKwmI,OAAL,GAAeA,OAAO,CAACz1G,IAAR,CAAa,CAACn0D,CAAD,EAAID,CAAJ,KAAWA,CAAC,CAACgrD,UAAF,GAAe/qD,CAAC,CAAC+qD,UAAzC,CAAf;AAEA;;;;;;;;;AASA,SAAK8+G,aAAL,GAAqB,KAArB;AAEA;;;;;;;AAOA,SAAK5yG,QAAL,GAAgB,CAAhB;AAEA;;;;;;;AAOA,SAAKqyG,QAAL,GAAgB,CAAhB;AAEA;;;;;;;;AAQA,SAAKQ,OAAL,GAAe,GAAf;AAEA;;;;;;;;AAQA,SAAKC,OAAL,GAAe,GAAf;AAEA;AAED;;;;;;;AAMA,MAAIC,YAAJ,GAAmB;AAElB,WAAQ,KAAK/G,qBAAL,GAA6B1rG,OAA7B,CAAqCwlG,aAArC,KAAuDp6J,SAA/D;AAEA;AAED;;;;;;;AAMA,MAAIqnK,YAAJ,CAAiBhlK,KAAjB,EAAwB;AAEvB,QAAG,KAAKglK,YAAL,KAAsBhlK,KAAzB,EAAgC;AAE/B,YAAM0rC,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AACAvyH,MAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;;AAEA,UAAG3mD,KAAH,EAAU;AAET0rC,QAAAA,QAAQ,CAAC6mB,OAAT,CAAiBwlG,aAAjB,GAAiC,GAAjC;AAEA,OAJD,MAIO;AAEN,eAAOrsH,QAAQ,CAAC6mB,OAAT,CAAiBwlG,aAAxB;AAEA;AAED;AAED;AAED;;;;;;;;;AAQA,MAAI/6G,SAAJ,GAAgB;AAEf,WAAO,KAAKihH,qBAAL,GAA6BjhH,SAApC;AAEA;AAED;;;;;;;AAMA,MAAIA,SAAJ,CAAch9C,KAAd,EAAqB;AAEpB,UAAM0rC,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;;AAEA,QAAGvyH,QAAQ,CAACsR,SAAT,KAAuBh9C,KAA1B,EAAiC;AAEhC0rC,MAAAA,QAAQ,CAACsR,SAAT,GAAqBh9C,KAArB;AACA0rC,MAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;AAED;AAED;;;;;;;AAMAs+G,EAAAA,cAAc,GAAG;AAEhB,UAAMC,WAAW,GAAG,YAApB;AAEA,UAAMpN,WAAW,GAAG,IAAIl/D,GAAJ,CAAQ,CAC3B,CAACu/D,OAAO,CAACC,aAAT,EAAwB,EAAxB,CAD2B,EAE3B,CAACD,OAAO,CAACE,gBAAT,EAA2B,EAA3B,CAF2B,EAG3B,CAACF,OAAO,CAACG,mBAAT,EAA8B,EAA9B,CAH2B,EAI3B,CAACH,OAAO,CAACI,WAAT,EAAsB,EAAtB,CAJ2B,EAK3B,CAACJ,OAAO,CAACK,mBAAT,EAA8B,EAA9B,CAL2B,CAAR,CAApB;AAQA,UAAMwL,UAAU,GAAG,IAAIprE,GAAJ,EAAnB;AACA,UAAMrmC,OAAO,GAAG,IAAIqmC,GAAJ,EAAhB;AACA,UAAM3mC,QAAQ,GAAG,IAAI2mC,GAAJ,EAAjB;AACA,UAAMhmC,UAAU,GAAG,IAAIuyG,GAAJ,EAAnB;AAEA,QAAIv7H,EAAE,GAAG,CAAT;AAAA,QAAY06H,QAAQ,GAAG,CAAvB;AAAA,QAA0Bv+G,UAAU,GAAG,CAAvC;AACA,QAAIy+G,aAAa,GAAG,KAApB;AACA,QAAIC,SAAS,GAAG,KAAhB;AACA,QAAIhmK,MAAJ;;AAEA,SAAI,MAAMslK,MAAV,IAAoB,KAAKa,OAAzB,EAAkC;AAEjC,UAAGb,MAAM,CAACr+C,SAAP,CAAiBm9C,aAAjB,KAAmCtC,aAAa,CAACC,IAApD,EAA0D;AAEzD;AACAz6G,QAAAA,UAAU,IAAKg+G,MAAM,CAACh+G,UAAP,GAAoBi9G,eAAe,CAACxL,KAAnD;AAEA,OALD,MAKO,IAAG,CAACzxG,UAAU,GAAGi9G,eAAe,CAACE,WAA9B,MAA+C,CAA/C,IAAoD,CAACa,MAAM,CAACh+G,UAAP,GAAoBi9G,eAAe,CAACE,WAArC,MAAsD,CAA7G,EAAgH;AAEtH73I,QAAAA,OAAO,CAACyD,KAAR,CAAc,sCAAd,EAAsDi1I,MAAtD;AAEA,OAJM,MAIA;AAENh+G,QAAAA,UAAU,IAAIg+G,MAAM,CAACh+G,UAArB;AAEAtnD,QAAAA,MAAM,GAAGqlK,eAAe,CAAE,MAAMl6H,EAAE,EAAV,EAAem6H,MAAf,EAAuBjM,WAAvB,EAAoCkM,UAApC,EAAgDzxG,OAAhD,EAAyDN,QAAzD,EAAmElM,UAAnE,CAAxB;AAEAu+G,QAAAA,QAAQ,IAAI7lK,MAAM,CAAC6lK,QAAP,CAAgB/oK,MAA5B;AACAipK,QAAAA,aAAa,GAAGA,aAAa,IAAI/lK,MAAM,CAAC+lK,aAAxC;AACAC,QAAAA,SAAS,GAAGA,SAAS,IAAIhmK,MAAM,CAACgmK,SAAhC;;AAEA,YAAGV,MAAM,CAACnxG,UAAP,KAAsB,IAAzB,EAA+B;AAE9B;AACA,eAAI,MAAM6V,SAAV,IAAuBs7F,MAAM,CAACnxG,UAA9B,EAA0C;AAEzCA,YAAAA,UAAU,CAACr+C,GAAX,CAAek0D,SAAf;AAEA;AAED;AAED;AAED,KAxDe,CA0DhB;;;AACA,SAAI,MAAMi9C,SAAV,IAAuBs+C,UAAU,CAACl4H,MAAX,EAAvB,EAA4C;AAE3CgsH,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACC,aAAxB,EAAuCN,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACC,aAAxB,IACtC1yC,SAAS,CAACo9C,aAAV,GAA0B78J,OAA1B,CAAkCi/J,WAAlC,EAA+C,UAAUx/C,SAAS,CAACm9C,aAAnE,CADsC,GAC8C,IADrF;AAGA,KAhEe,CAkEhB;;;AACA,QAAG,CAAC98G,UAAU,GAAGi9G,eAAe,CAACxL,KAA9B,MAAyC,CAA5C,EAA+C;AAE9C;AACA,UAAGiN,SAAH,EAAc;AAEb3M,QAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACG,mBAAxB,EAA6C,uCAC5CR,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACG,mBAAxB,CADD;AAGA,OAR6C,CAU9C;;;AACA,WAAKyF,iBAAL,GAA0B,KAAKI,eAAL,OAA2B,IAArD;AAEA,KAbD,MAaO;AAEN,WAAKJ,iBAAL,GAAyB,KAAzB;AAEA,KApFe,CAsFhB;;;AACA,QAAGyG,aAAH,EAAkB;AAEjB1M,MAAAA,WAAW,CAAC1sI,GAAZ,CAAgB+sI,OAAO,CAACE,gBAAxB,EAA0C,gCACzCP,WAAW,CAACt9I,GAAZ,CAAgB29I,OAAO,CAACE,gBAAxB,CADD;AAGA9lG,MAAAA,OAAO,CAACnnC,GAAR,CAAY,IAAZ,EAAkB,eAAlB;AAEA,KAPD,MAOO;AAENmnC,MAAAA,OAAO,CAACnnC,GAAR,CAAY,IAAZ,EAAkB,KAAlB;AAEA,KAlGe,CAoGhB;;;AACA0sI,IAAAA,WAAW,CAACn8J,OAAZ,CAAoB,CAACqE,KAAD,EAAQzD,GAAR,EAAauL,GAAb,KAAqBA,GAAG,CAACsjB,GAAJ,CAAQ7uB,GAAR,EAAayD,KAAK,CAAC84E,IAAN,GAAa7yE,OAAb,CAAqB,IAArB,EAA2B,KAA3B,CAAb,CAAzC;AAEA,SAAKgsD,QAAL,GAAgBA,QAAQ,CAACzjB,IAAzB;AACA,SAAK81H,QAAL,GAAgBA,QAAhB;AAEA,SAAKO,aAAL,GAAsBj7H,EAAE,KAAK,CAA7B;AACA,SAAKk0H,SAAL,GAAiB,CAAC,KAAK+G,aAAvB;AAEA,UAAMn5H,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AACAvyH,IAAAA,QAAQ,CAACssH,cAAT,CAAwBF,WAAxB,EAAqCG,UAArC,CAAgD1lG,OAAhD,EAAyD2lG,WAAzD,CAAqEjmG,QAArE;AACAvmB,IAAAA,QAAQ,CAACknB,UAAT,GAAsB,EAAtB;;AAEA,QAAGA,UAAU,CAACpkB,IAAX,GAAkB,CAArB,EAAwB;AAEvB;AACA,WAAI,MAAMi6B,SAAV,IAAuB7V,UAAvB,EAAmC;AAElClnB,QAAAA,QAAQ,CAACknB,UAAT,CAAoB6V,SAApB,IAAiC,IAAjC;AAEA;AAED;AAED;AAED;;;;;;;AAMA28F,EAAAA,SAAS,GAAG;AAEX,SAAKH,cAAL;AAEA;AAED;;;;;;;AAMA9G,EAAAA,eAAe,GAAG;AAEjB,WAAO,KAAKF,qBAAL,GAA6BhsG,QAA7B,CAAsC35B,WAAtC,CAAkDt4B,KAAzD;AAEA;AAED;;;;;;;;AAOAo+J,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,UAAM5yC,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AACAvyH,IAAAA,QAAQ,CAACumB,QAAT,CAAkB35B,WAAlB,CAA8Bt4B,KAA9B,GAAsCw4B,YAAtC;AACAkT,IAAAA,QAAQ,CAAC4yC,YAAT,GAAwBA,YAAxB;AACA5yC,IAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;;AAEA,SAAI,MAAMo9G,MAAV,IAAoB,KAAKa,OAAzB,EAAkC;AAEjCb,MAAAA,MAAM,CAAC3F,eAAP,CAAuB5lI,YAAvB,EAAqC8lD,YAArC;AAEA;AAED;AAED;;;;;;;;;;;AAUAtoB,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAMhhD,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AACA,UAAMriG,IAAI,GAAGlwB,QAAQ,CAACumB,QAAT,CAAkB2J,IAAlB,CAAuB57D,KAAvB,GAA+Bm5I,SAA5C;;AAEA,SAAI,MAAM4qB,MAAV,IAAoB,KAAKa,OAAzB,EAAkC;AAEjCb,MAAAA,MAAM,CAAChpI,MAAP,CAAc06B,QAAd,EAAwBg+F,WAAxB,EAAqCta,SAArC;AAEA;;AAED,QAAG,CAAC,KAAK0rB,aAAN,IAAuB,KAAK7G,cAA/B,EAA+C;AAE9CtyH,MAAAA,QAAQ,CAACumB,QAAT,CAAkBwhG,WAAlB,CAA8BzzJ,KAA9B,GAAsCyzJ,WAAW,CAACp7H,OAAlD;AACAqT,MAAAA,QAAQ,CAACumB,QAAT,CAAkB2J,IAAlB,CAAuB57D,KAAvB,GAAgC47D,IAAI,IAAI,KAAKmpG,OAAd,GAAyBnpG,IAAzB,GAAgC,KAAKkpG,OAApE;AACArvG,MAAAA,QAAQ,CAACM,eAAT,CAAyB,KAAKioG,cAAL,GAAsB,IAAtB,GAA6BK,YAAtD;AACA5oG,MAAAA,QAAQ,CAACO,MAAT,CAAgB,KAAKN,KAArB,EAA4B,KAAKt3B,MAAjC;AAEA;AAED;AAED;;;;;;;;AAOA1F,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAKy3J,qBAAL,GAA6BvlI,OAA7B,CAAqCnyB,KAArC,EAA4CC,MAA5C;;AAEA,SAAI,MAAMu9J,MAAV,IAAoB,KAAKa,OAAzB,EAAkC;AAEjCb,MAAAA,MAAM,CAACrrI,OAAP,CAAenyB,KAAf,EAAsBC,MAAtB;AAEA;AAED;AAED;;;;;;;;;AAQA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C;AACA,SAAI,MAAMwF,MAAV,IAAoB,KAAKa,OAAzB,EAAkC;AAEjCb,MAAAA,MAAM,CAACzF,UAAP,CAAkB7oG,QAAlB,EAA4BxnC,KAA5B,EAAmCswI,eAAnC;AAEA,KAP2C,CAS5C;;;AACA,SAAK0G,cAAL,GAV4C,CAY5C;;AACA,UAAM7oG,YAAY,GAAG3G,QAAQ,CAAC2G,YAA9B;AACA,QAAIz8D,GAAG,GAAG/E,IAAI,CAAC8E,GAAL,CAAS08D,YAAY,CAACyR,mBAAtB,EAA2CzR,YAAY,CAACuR,iBAAxD,CAAV;;AAEA,QAAG,KAAK1b,QAAL,GAAgBtyD,GAAnB,EAAwB;AAEvB0rB,MAAAA,OAAO,CAACC,IAAR,CAAa,6DAA6D3rB,GAA7D,GAAmE,iBAAnE,GAAuF,KAAKsyD,QAA5F,GAAuG,eAApH;AAEA;;AAEDtyD,IAAAA,GAAG,GAAGy8D,YAAY,CAACwR,WAAnB;;AAEA,QAAG,KAAK02F,QAAL,GAAgB3kK,GAAnB,EAAwB;AAEvB0rB,MAAAA,OAAO,CAACC,IAAR,CAAa,6DAA6D3rB,GAA7D,GAAmE,iBAAnE,GAAuF,KAAK2kK,QAA5F,GAAuG,eAApH;AAEA;AAED;AAED;;;;;;;AAMApuI,EAAAA,OAAO,GAAG;AAET,UAAMA,OAAN;;AAEA,SAAI,MAAM6tI,MAAV,IAAoB,KAAKa,OAAzB,EAAkC;AAEjCb,MAAAA,MAAM,CAAC7tI,OAAP;AAEA;AAED;;AAlb4B;AAsb9B;;;;;;;;;;AAOA,MAAMmvI,QAAN,SAAuB1H,IAAvB,CAA4B;AAE3B;;;;;;AAOA7/J,EAAAA,WAAW,CAAC43D,KAAD,EAAQt3B,MAAR,EAAgB;AAE1B,UAAM,UAAN,EAAkBs3B,KAAlB,EAAyBt3B,MAAzB;AAEA,SAAK0/H,SAAL,GAAiB,KAAjB;AAEA;;;;;;;AAOA,SAAKkC,SAAL,GAAiB,IAAIb,SAAJ,CAAc,KAAd,EAAqB,KAArB,EAA4B,IAA5B,CAAjB;AAEA;;;;;;AAMA,SAAKnjI,OAAL,GAAe,KAAf;AAEA;AAED;;;;;;;AAMA,MAAIi6B,KAAJ,GAAY;AAEX,WAAO,KAAK+pG,SAAL,CAAe3vG,OAAtB;AAEA;AAED;;;;;;;AAMA,MAAI4F,KAAJ,CAAUj2D,KAAV,EAAiB;AAEhB,SAAKggK,SAAL,CAAe3vG,OAAf,GAAyBrwD,KAAzB;AAEA;AAED;;;;;;;;;;;AAUAg2D,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAM/4D,OAAO,GAAG8hC,QAAQ,CAAC7hC,UAAT,EAAhB;AACA,UAAM0oC,OAAO,GAAG7G,QAAQ,CAACoR,KAAT,CAAevK,OAA/B;AAEA,UAAM5G,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMt3B,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM4hI,SAAS,GAAG,KAAKA,SAAvB;AAEA,UAAMsF,UAAU,GAAG,KAAKtpI,OAAL,GAAe,CAAf,GAAmB,CAAtC;AACA,UAAMupI,UAAU,GAAG,IAAID,UAAvB,CAVmE,CAYnE;;AACAhpG,IAAAA,OAAO,CAACjiE,KAAR,CAAcixF,OAAd,CAAsB,KAAtB;AACAhvB,IAAAA,OAAO,CAAC5L,KAAR,CAAc46B,OAAd,CAAsB,KAAtB,EAdmE,CAgBnE;;AACAhvB,IAAAA,OAAO,CAACjiE,KAAR,CAAcmxF,SAAd,CAAwB,IAAxB;AACAlvB,IAAAA,OAAO,CAAC5L,KAAR,CAAc86B,SAAd,CAAwB,IAAxB,EAlBmE,CAoBnE;;AACAlvB,IAAAA,OAAO,CAACpG,OAAR,CAAgBgzB,OAAhB,CAAwB,IAAxB;AACA5sB,IAAAA,OAAO,CAACpG,OAAR,CAAgB02B,KAAhB,CAAsBj5D,OAAO,CAAC6xI,OAA9B,EAAuC7xI,OAAO,CAAC6xI,OAA/C,EAAwD7xI,OAAO,CAAC6xI,OAAhE;AACAlpG,IAAAA,OAAO,CAACpG,OAAR,CAAgB61B,OAAhB,CAAwBp4D,OAAO,CAAC8xI,MAAhC,EAAwCH,UAAxC,EAAoD,UAApD;AACAhpG,IAAAA,OAAO,CAACpG,OAAR,CAAgByR,QAAhB,CAAyB49F,UAAzB;AACAjpG,IAAAA,OAAO,CAACpG,OAAR,CAAgBs1B,SAAhB,CAA0B,IAA1B,EAzBmE,CA2BnE;;AACA,QAAG,KAAKv1B,KAAR,EAAe;AAEd,UAAG,KAAK+nG,cAAR,EAAwB;AAEvBgC,QAAAA,SAAS,CAAChqG,MAAV,CAAiBP,QAAjB,EAA2B,IAA3B;AAEA,OAJD,MAIO;AAENuqG,QAAAA,SAAS,CAAChqG,MAAV,CAAiBP,QAAjB,EAA2Bg+F,WAA3B;AACAuM,QAAAA,SAAS,CAAChqG,MAAV,CAAiBP,QAAjB,EAA2B4oG,YAA3B;AAEA;AAED,KAzCkE,CA2CnE;;;AACA,QAAG,KAAKL,cAAR,EAAwB;AAEvBvoG,MAAAA,QAAQ,CAACM,eAAT,CAAyB,IAAzB;AACAN,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AAEA,KALD,MAKO;AAENq3B,MAAAA,QAAQ,CAACM,eAAT,CAAyB09F,WAAzB;AACAh+F,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AACAq3B,MAAAA,QAAQ,CAACM,eAAT,CAAyBsoG,YAAzB;AACA5oG,MAAAA,QAAQ,CAACO,MAAT,CAAgBN,KAAhB,EAAuBt3B,MAAvB;AAEA,KAxDkE,CA0DnE;;;AACAk+B,IAAAA,OAAO,CAACjiE,KAAR,CAAcmxF,SAAd,CAAwB,KAAxB;AACAlvB,IAAAA,OAAO,CAAC5L,KAAR,CAAc86B,SAAd,CAAwB,KAAxB,EA5DmE,CA8DnE;;AACAlvB,IAAAA,OAAO,CAACpG,OAAR,CAAgBs1B,SAAhB,CAA0B,KAA1B;AACAlvB,IAAAA,OAAO,CAACpG,OAAR,CAAgB61B,OAAhB,CAAwBp4D,OAAO,CAAC+xI,KAAhC,EAAuC,CAAvC,EAA0C,UAA1C;AACAppG,IAAAA,OAAO,CAACpG,OAAR,CAAgB02B,KAAhB,CAAsBj5D,OAAO,CAACgyI,IAA9B,EAAoChyI,OAAO,CAACgyI,IAA5C,EAAkDhyI,OAAO,CAACgyI,IAA1D;AACArpG,IAAAA,OAAO,CAACpG,OAAR,CAAgBs1B,SAAhB,CAA0B,IAA1B;AAEA;;AAxI0B;AA4I5B;;;;;;;AAIA,MAAMo6E,UAAN,SAAyBjI,IAAzB,CAA8B;AAE7B;;;;;;;;;;;AAYA7/J,EAAAA,WAAW,CAAC43D,KAAD,EAAQt3B,MAAR,EAAgB;AAC1BqgI,IAAAA,eAAe,GAAG,GADQ;AAE1Bl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SAFU;AAG1B/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD,SAHS;AAI1BtoG,IAAAA;AAJ0B,MAKvB,EALO,EAKH;AAEP,UAAM,YAAN;AAEA,SAAK6oG,SAAL,GAAiB,KAAjB;AAEA;;;;;;;AAOA,SAAKsC,UAAL,GAAkB,IAAIL,UAAJ,CAAerqG,KAAf,EAAsBt3B,MAAtB,EAA8B,IAAIkiD,yBAAJ,CAAuB;AACtEhgC,MAAAA,YAAY,EAAE,IADwD;AAEtEC,MAAAA,YAAY,EAAE,IAFwD;AAGtEC,MAAAA,QAAQ,EAAE;AAH4D,KAAvB,CAA9B,CAAlB;AAMA,UAAMw/G,SAAS,GAAG,KAAKI,UAAL,CAAgBF,YAAhB,EAAlB;AACAF,IAAAA,SAAS,CAACZ,kBAAV,GAA+B,IAAIn/J,YAAJ,CAAU,QAAV,CAA/B;AACA+/J,IAAAA,SAAS,CAACX,kBAAV,GAA+B,GAA/B;AAEA;;;;;;AAMA,SAAKpqG,YAAL,GAAoBA,YAApB;;AAEA,QAAG,KAAKA,YAAL,KAAsBt3D,SAAzB,EAAoC;AAEnC,WAAKs3D,YAAL,GAAoB,IAAIh9B,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAC/C1D,QAAAA,SAAS,EAAE7U,oBADoC;AAE/C4U,QAAAA,SAAS,EAAE5U,oBAFoC;AAG/C8U,QAAAA,MAAM,EAAEvT,gBAHuC;AAI/CsX,QAAAA,aAAa,EAAE;AAJgC,OAA5B,CAApB;AAOA,WAAK08B,YAAL,CAAkB58B,OAAlB,CAA0BnmB,IAA1B,GAAiC,mBAAjC;AAEA;AAED;;;;;;;;;;AASA,SAAKq2E,UAAL,GAAkB,IAAIi1E,OAAJ,CAAY,IAAZ,EAAkBj3J,KAAlB,EAAyBC,MAAzB,EAAiCi4J,eAAjC,CAAlB;AAEA;AAED;;;;;;;AAMA,MAAIpmI,OAAJ,GAAc;AAEb,WAAO,KAAK48B,YAAL,CAAkB58B,OAAzB;AAEA;AAED;;;;;;;;AAOAymI,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKL,eAAZ;AAEA;AAED;;;;;;;;AAOAM,EAAAA,kBAAkB,CAAChsI,KAAD,EAAQ;AAEzB,SAAK0rI,eAAL,GAAuB1rI,KAAvB;AACA,SAAK2F,OAAL,CAAa,KAAK6vD,UAAL,CAAgBy3B,IAAhB,CAAqB/7G,CAAlC,EAAqC,KAAKskF,UAAL,CAAgBy3B,IAAhB,CAAqB77G,CAA1D;AAEA;AAED;;;;;;;;;;;AAUA6xD,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,UAAMz3B,YAAY,GAAG,KAAK+oG,cAAL,GAAsB,IAAtB,GAA6B,KAAK/oG,YAAvD;AACA,SAAKmrG,UAAL,CAAgBpqG,MAAhB,CAAuBP,QAAvB,EAAiCR,YAAjC,EAA+CA,YAA/C;AAEA;AAED;;;;;;;;AAOAv8B,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAM+hF,UAAU,GAAG,KAAKA,UAAxB;AACAA,IAAAA,UAAU,CAACy3B,IAAX,CAAgB50F,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AAEA,SAAKyuD,YAAL,CAAkBv8B,OAAlB,CAA0B6vD,UAAU,CAAChiF,KAArC,EAA4CgiF,UAAU,CAAC/hF,MAAvD;AAEA;;AAlJ4B;AAsJ9B;;;;;;;AAIA,MAAMq/J,QAAN,SAAuBlI,IAAvB,CAA4B;AAE3B;;;;;;AAOA7/J,EAAAA,WAAW,CAACm3D,YAAD,EAAe6wG,MAAM,GAAG,IAAxB,EAA8B;AAExC,UAAM,UAAN;AAEA,SAAK5H,qBAAL,CAA2B,IAAI/H,YAAJ,EAA3B;AAEA,SAAK2H,SAAL,GAAiB,KAAjB;AAEA;;;;;;AAMA,SAAK7oG,YAAL,GAAoBA,YAApB;;AAEA,QAAGA,YAAY,KAAKt3D,SAApB,EAA+B;AAE9B,WAAKs3D,YAAL,GAAoB,IAAIh9B,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAC/C1D,QAAAA,SAAS,EAAExU,mBADoC;AAE/CuU,QAAAA,SAAS,EAAEvU,mBAFoC;AAG/CwY,QAAAA,aAAa,EAAE,KAHgC;AAI/CD,QAAAA,WAAW,EAAE;AAJkC,OAA5B,CAApB;AAOA,WAAK28B,YAAL,CAAkB58B,OAAlB,CAA0BnmB,IAA1B,GAAiC,iBAAjC;AAEA;AAED;;;;;;;AAMA,SAAK4zJ,MAAL,GAAcA,MAAd;AAEA;AAED;;;;;;;;;;;AAUA9vG,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,SAAKuxE,qBAAL,GAA6BhsG,QAA7B,CAAsCwhG,WAAtC,CAAkDzzJ,KAAlD,GAA0DyzJ,WAAW,CAACp7H,OAAtE;AAEAo9B,IAAAA,QAAQ,CAACM,eAAT,CAAyB,KAAKioG,cAAL,GAAsB,IAAtB,GAA6B,KAAK/oG,YAA3D;AACAQ,IAAAA,QAAQ,CAACO,MAAT,CAAgB,KAAKN,KAArB,EAA4B,KAAKt3B,MAAjC;AAEA;AAED;;;;;;;;AAOA1F,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,QAAG,KAAKs/J,MAAR,EAAgB;AAEf,YAAMpsJ,CAAC,GAAG9e,IAAI,CAAC+E,GAAL,CAAS4G,KAAT,EAAgB,CAAhB,CAAV;AACA,YAAMtL,CAAC,GAAGL,IAAI,CAAC+E,GAAL,CAAS6G,MAAT,EAAiB,CAAjB,CAAV;AAEA,WAAKyuD,YAAL,CAAkBv8B,OAAlB,CAA0Bhf,CAA1B,EAA6Bze,CAA7B;AAEA;AAED;AAED;;;;;;;;;AAQAqjK,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,QAAG,CAACtwI,KAAD,IAAUswI,eAAe,KAAKn+I,uBAAjC,EAAmD;AAElD,WAAK60C,YAAL,CAAkB58B,OAAlB,CAA0B7D,MAA1B,GAAmCvT,gBAAnC;AAEA;;AAED,QAAGs9I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC,WAAKs3D,YAAL,CAAkB58B,OAAlB,CAA0BtxB,IAA1B,GAAiCw3J,eAAjC;AAEA;AAED;;AA7G0B;AAiH5B;;;;;;;;;;;;AASA,MAAMwH,UAAN,SAAyBpI,IAAzB,CAA8B;AAE7B;;;;;;AAOA7/J,EAAAA,WAAW,CAAC4tC,QAAD,EAAWs6H,KAAK,GAAG,aAAnB,EAAkC;AAE5C,UAAM,YAAN;AAEA,SAAK9H,qBAAL,CAA2BxyH,QAA3B;AAEA;;;;;;;AAOA,SAAK2nB,OAAL,GAAe,IAAf;AACA,SAAK4yG,QAAL,CAAcD,KAAd;AAEA;AAED;;;;;;;;;;;AAUAC,EAAAA,QAAQ,CAACD,KAAD,EAAQ;AAEf,UAAMt6H,QAAQ,GAAG,KAAKuyH,qBAAL,EAAjB;AAEA,SAAK5qG,OAAL,GAAe,IAAf;;AAEA,QAAG3nB,QAAQ,KAAK,IAAhB,EAAsB;AAErB,YAAMumB,QAAQ,GAAGvmB,QAAQ,CAACumB,QAA1B;;AAEA,UAAGA,QAAQ,KAAKt0D,SAAb,IAA0Bs0D,QAAQ,CAAC+zG,KAAD,CAAR,KAAoBroK,SAAjD,EAA4D;AAE3D,aAAK01D,OAAL,GAAepB,QAAQ,CAAC+zG,KAAD,CAAvB;AAEA;AAED;AAED;AAED;;;;;;;;;;;AAUAhwG,EAAAA,MAAM,CAACP,QAAD,EAAWg+F,WAAX,EAAwB4K,YAAxB,EAAsCllB,SAAtC,EAAiDzsD,WAAjD,EAA8D;AAEnE,QAAG,KAAKr5B,OAAL,KAAiB,IAAjB,IAAyBogG,WAAW,KAAK,IAA5C,EAAkD;AAEjD,WAAKpgG,OAAL,CAAarzD,KAAb,GAAqByzJ,WAAW,CAACp7H,OAAjC;AAEA;;AAEDo9B,IAAAA,QAAQ,CAACM,eAAT,CAAyB,KAAKioG,cAAL,GAAsB,IAAtB,GAA6BK,YAAtD;AACA5oG,IAAAA,QAAQ,CAACO,MAAT,CAAgB,KAAKN,KAArB,EAA4B,KAAKt3B,MAAjC;AAEA;;AA9E4B;AAkF9B;;;;;;;;;;;;;;;;AAaA,MAAM8nI,cAAN,CAAqB;AAEpB;;;;;;;;;;AAWApoK,EAAAA,WAAW,CAAC23D,QAAQ,GAAG,IAAZ,EAAkB;AAC5Bn9B,IAAAA,WAAW,GAAG,IADc;AAE5BC,IAAAA,aAAa,GAAG,KAFY;AAG5B4tI,IAAAA,aAAa,GAAG,CAHY;AAI5B5H,IAAAA;AAJ4B,MAKzB,EALO,EAKH;AAEP;;;;;;AAOA,SAAK9oG,QAAL,GAAgBA,QAAhB;AAEA;;;;;;;;;;AAUA,SAAKg+F,WAAL,GAAmB,IAAnB;AAEA;;;;;;;AAOA,SAAK4K,YAAL,GAAoB,IAApB;;AAEA,QAAG,KAAK5oG,QAAL,KAAkB,IAArB,EAA2B;AAE1B,WAAKA,QAAL,CAAcmS,SAAd,GAA0B,KAA1B;AACA,WAAK6rF,WAAL,GAAmB,KAAKj3F,YAAL,CAAkBlkC,WAAlB,EAA+BC,aAA/B,EAA8CgmI,eAA9C,EAA+D4H,aAA/D,CAAnB;AACA,WAAK9H,YAAL,GAAoB,KAAK5K,WAAL,CAAiB1nI,KAAjB,EAApB;AACA,WAAKq6I,gBAAL;AAEA;AAED;;;;;;;;AAOA,SAAKC,QAAL,GAAgB,IAAIN,UAAJ,CAAe,IAAI5P,YAAJ,EAAf,CAAhB;AAEA;;;;;;;AAOA,SAAK39H,YAAL,GAAoB,IAApB;AAEA;;;;;;;AAOA,SAAK8tI,MAAL,GAAc,EAAd;AAEA;;;;;;AAMA,SAAKC,kBAAL,GAA0B,IAA1B;AAEA;AAED;;;;;;;AAMA,MAAIJ,aAAJ,GAAoB;AAEnB,WAAQ,KAAK1S,WAAL,YAA4B96H,mCAA7B,GACN,KAAK86H,WAAL,CAAiB76H,OADX,GACqB,CAD5B;AAGA;AAED;;;;;;;;;AAQA,MAAIutI,aAAJ,CAAkBnmK,KAAlB,EAAyB;AAExB,UAAM08D,MAAM,GAAG,KAAK+2F,WAApB;AACA,UAAM0S,aAAa,GAAG,KAAKA,aAA3B;;AAEA,QAAGA,aAAa,GAAG,CAAhB,IAAqBnmK,KAAK,GAAG,CAAhC,EAAmC;AAElC,WAAKyzJ,WAAL,CAAiB76H,OAAjB,GAA2B54B,KAA3B;AACA,WAAKq+J,YAAL,CAAkBzlI,OAAlB,GAA4B54B,KAA5B;AAEA,KALD,MAKO,IAAGmmK,aAAa,KAAKnmK,KAArB,EAA4B;AAElC,WAAKyzJ,WAAL,CAAiBv9H,OAAjB;AACA,WAAKmoI,YAAL,CAAkBnoI,OAAlB,GAHkC,CAKlC;;AACA,WAAKu9H,WAAL,GAAmB,KAAKj3F,YAAL,CAClBE,MAAM,CAACpkC,WADW,EAElBokC,MAAM,CAACnkC,aAFW,EAGlBmkC,MAAM,CAACrkC,OAAP,CAAetxB,IAHG,EAIlB/G,KAJkB,CAAnB;AAOA,WAAKq+J,YAAL,GAAoB,KAAK5K,WAAL,CAAiB1nI,KAAjB,EAApB;AAEA;AAED;AAED;;;;;;;;;;AASAy6I,EAAAA,WAAW,GAAG;AAEb,WAAO,KAAK/wG,QAAZ;AAEA;AAED;;;;;;;AAMA2wG,EAAAA,gBAAgB,GAAG;AAElB,UAAM7H,eAAe,GAAG,KAAK9K,WAAL,CAAiBp7H,OAAjB,CAAyBtxB,IAAjD;AACA,UAAMq1D,YAAY,GAAG,KAAK3G,QAAL,CAAc2G,YAAnC;AACA,UAAMzoC,OAAO,GAAG,KAAK8hC,QAAL,CAAc7hC,UAAd,EAAhB;;AAEA,QAAG2qI,eAAe,KAAKn+I,uBAAvB,EAAyC;AAExC,UAAGg8C,YAAY,CAACC,QAAhB,EAA0B;AAEzB1oC,QAAAA,OAAO,CAACg8C,YAAR,CAAqB,wBAArB;AAEA,OAJD,MAIO;AAENh8C,QAAAA,OAAO,CAACg8C,YAAR,CAAqB,6BAArB;AAEA;AAED;AAED;AAED;;;;;;;;;;;;;;;;AAeA82F,EAAAA,eAAe,CAAChxG,QAAD,EAAWixG,SAAS,GAAG,IAAvB,EAA6B;AAE3C,UAAMC,WAAW,GAAG,KAAKlxG,QAAzB;;AAEA,QAAGkxG,WAAW,KAAK,IAAhB,IAAwBA,WAAW,KAAKlxG,QAA3C,EAAqD;AAEpD,YAAMmxG,OAAO,GAAGD,WAAW,CAAC73H,OAAZ,CAAoB,IAAI6kH,cAAJ,EAApB,CAAhB;AACA,YAAMkT,OAAO,GAAGpxG,QAAQ,CAAC3mB,OAAT,CAAiB,IAAI6kH,cAAJ,EAAjB,CAAhB;AACA,YAAMtiJ,MAAM,GAAGs1J,WAAW,CAACnlK,UAAZ,CAAuBslK,UAAtC;AAEA,WAAKrxG,QAAL,GAAgBA,QAAhB;AACA,WAAKA,QAAL,CAAcmS,SAAd,GAA0B,KAA1B;;AAEA,UAAG,CAACg/F,OAAO,CAACv4I,MAAR,CAAew4I,OAAf,CAAJ,EAA6B;AAE5B,aAAKnuI,OAAL;AAEA;;AAED,UAAGguI,SAAS,IAAIr1J,MAAM,KAAK,IAA3B,EAAiC;AAEhCA,QAAAA,MAAM,CAACoD,WAAP,CAAmBkyJ,WAAW,CAACnlK,UAA/B;AACA6P,QAAAA,MAAM,CAAC7J,WAAP,CAAmBiuD,QAAQ,CAACj0D,UAA5B;AAEA;;AAED,WAAK4kK,gBAAL;AAEA;;AAED,WAAOO,WAAP;AAEA;AAED;;;;;;;;;;;;AAWAI,EAAAA,kBAAkB,GAAG;AAEpB,UAAMvuI,YAAY,GAAG,KAAKA,YAAL,GAAoB,IAAI+1E,mBAAJ,EAAzC;;AAEA,QAAG,KAAKklD,WAAL,CAAiBl7H,aAApB,EAAmC;AAElCC,MAAAA,YAAY,CAAChE,MAAb,GAAsBjT,yBAAtB;AACAiX,MAAAA,YAAY,CAACzxB,IAAb,GAAoBga,yBAApB;AAEA,KALD,MAKO;AAENyX,MAAAA,YAAY,CAACzxB,IAAb,GAAoB0Z,sBAApB;AAEA;;AAED,WAAO+X,YAAP;AAEA;AAED;;;;;;;;;;;;;;;;;;AAiBAgkC,EAAAA,YAAY,CAAClkC,WAAD,EAAcC,aAAd,EAA6BxxB,IAA7B,EAAmCo/J,aAAnC,EAAkD;AAE7D,UAAM33H,IAAI,GAAG,KAAKinB,QAAL,CAAc+sC,oBAAd,CAAmC,IAAImxD,cAAJ,EAAnC,CAAb;AACA,UAAM1lI,KAAK,GAAG,KAAKwnC,QAAL,CAAc7hC,UAAd,GAA2BkmE,oBAA3B,GAAkD7rE,KAAhE;AAEA,UAAMrmB,OAAO,GAAG;AACf4sB,MAAAA,MAAM,EAAG,CAACvG,KAAD,IAAUlnB,IAAI,KAAKqZ,uBAApB,GAAwCa,gBAAxC,GAAoDC,iBAD7C;AAEfqT,MAAAA,SAAS,EAAExU,mBAFI;AAGfuU,MAAAA,SAAS,EAAEvU,mBAHI;AAIfwY,MAAAA,aAJe;AAKfD,MAAAA,WALe;AAMfvxB,MAAAA;AANe,KAAhB;AASA,UAAMkuD,YAAY,GAAIkxG,aAAa,GAAG,CAAjB,GACpB,IAAIxtI,mCAAJ,CAAiC6V,IAAI,CAACjoC,KAAtC,EAA6CioC,IAAI,CAAChoC,MAAlD,EAA0DoB,OAA1D,CADoB,GAEpB,IAAIqwB,wBAAJ,CAAsBuW,IAAI,CAACjoC,KAA3B,EAAkCioC,IAAI,CAAChoC,MAAvC,EAA+CoB,OAA/C,CAFD;;AAIA,QAAGu+J,aAAa,GAAG,CAAnB,EAAsB;AAErBlxG,MAAAA,YAAY,CAACr8B,OAAb,GAAuButI,aAAvB;AAEA;;AAEDlxG,IAAAA,YAAY,CAAC58B,OAAb,CAAqBnmB,IAArB,GAA4B,uBAA5B;AACA+iD,IAAAA,YAAY,CAAC58B,OAAb,CAAqBpD,eAArB,GAAuC,KAAvC;AAEA,WAAOggC,YAAP;AAEA;AAED;;;;;;;;AAOA+xG,EAAAA,OAAO,CAACpyD,IAAD,EAAOzuG,KAAP,EAAc;AAEpB,UAAMmgK,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM7wG,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAMxnC,KAAK,GAAGwnC,QAAQ,CAAC7hC,UAAT,GAAsBkmE,oBAAtB,GAA6C7rE,KAA3D;AACA,UAAMswI,eAAe,GAAG,KAAK9K,WAAL,CAAiBp7H,OAAjB,CAAyBtxB,IAAjD;AACA,UAAMkgK,iBAAiB,GAAGxxG,QAAQ,CAAC+sC,oBAAT,CAA8B,IAAImxD,cAAJ,EAA9B,CAA1B;AAEA/+C,IAAAA,IAAI,CAACl8E,OAAL,CAAauuI,iBAAiB,CAAC1gK,KAA/B,EAAsC0gK,iBAAiB,CAACzgK,MAAxD;AACAouG,IAAAA,IAAI,CAAC0pD,UAAL,CAAgB7oG,QAAhB,EAA0BxnC,KAA1B,EAAiCswI,eAAjC;;AAEA,QAAG,KAAKgI,kBAAR,EAA4B;AAE3B,UAAGD,MAAM,CAAC/qK,MAAP,GAAgB,CAAnB,EAAsB;AAErB+qK,QAAAA,MAAM,CAACA,MAAM,CAAC/qK,MAAP,GAAgB,CAAjB,CAAN,CAA0ByiK,cAA1B,GAA2C,KAA3C;AAEA;;AAED,UAAGppD,IAAI,CAACopD,cAAR,EAAwB;AAEvB,aAAKuI,kBAAL,GAA0B,KAA1B;AAEA;AAED;;AAED,QAAGpgK,KAAK,KAAKxI,SAAb,EAAwB;AAEvB2oK,MAAAA,MAAM,CAAClgK,MAAP,CAAcD,KAAd,EAAqB,CAArB,EAAwByuG,IAAxB;AAEA,KAJD,MAIO;AAEN0xD,MAAAA,MAAM,CAACvgK,IAAP,CAAY6uG,IAAZ;AAEA;;AAED,QAAG,KAAK2xD,kBAAR,EAA4B;AAE3BD,MAAAA,MAAM,CAACA,MAAM,CAAC/qK,MAAP,GAAgB,CAAjB,CAAN,CAA0ByiK,cAA1B,GAA2C,IAA3C;AAEA;;AAED,QAAGppD,IAAI,CAACmpD,iBAAL,IAA0B,KAAKvlI,YAAL,KAAsB,IAAnD,EAAyD;AAExD,UAAG,KAAKA,YAAL,KAAsB,IAAzB,EAA+B;AAE9B,cAAMA,YAAY,GAAG,KAAKuuI,kBAAL,EAArB;;AAEA,aAAInyD,IAAJ,IAAY0xD,MAAZ,EAAoB;AAEnB1xD,UAAAA,IAAI,CAACwpD,eAAL,CAAqB5lI,YAArB;AAEA;AAED,OAVD,MAUO;AAENo8E,QAAAA,IAAI,CAACwpD,eAAL,CAAqB,KAAK5lI,YAA1B;AAEA;AAED;AAED;AAED;;;;;;;AAMA0uI,EAAAA,UAAU,CAACtyD,IAAD,EAAO;AAEhB,UAAM0xD,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMngK,KAAK,GAAGmgK,MAAM,CAACxgK,OAAP,CAAe8uG,IAAf,CAAd;AACA,UAAMla,OAAO,GAAI4rE,MAAM,CAAClgK,MAAP,CAAcD,KAAd,EAAqB,CAArB,EAAwB5K,MAAxB,GAAiC,CAAlD;;AAEA,QAAGm/F,OAAH,EAAY;AAEX,UAAG,KAAKliE,YAAL,KAAsB,IAAzB,EAA+B;AAE9B;AACA,cAAM2uI,OAAO,GAAG,CAACnsK,CAAD,EAAID,CAAJ,KAAWC,CAAC,IAAID,CAAC,CAACgjK,iBAAlC;;AACA,cAAMqJ,oBAAoB,GAAGd,MAAM,CAACe,MAAP,CAAcF,OAAd,EAAuB,KAAvB,CAA7B;;AAEA,YAAG,CAACC,oBAAJ,EAA0B;AAEzB,eAAK5uI,YAAL,CAAkBtC,OAAlB;AACA,eAAKsC,YAAL,GAAoB,IAApB;AAEA,eAAKi7H,WAAL,CAAiBj7H,YAAjB,GAAgC,IAAhC;AACA,eAAK6lI,YAAL,CAAkB7lI,YAAlB,GAAiC,IAAjC;AAEAo8E,UAAAA,IAAI,CAACwpD,eAAL,CAAqB,IAArB;;AAEA,eAAIxpD,IAAJ,IAAY0xD,MAAZ,EAAoB;AAEnB1xD,YAAAA,IAAI,CAACwpD,eAAL,CAAqB,IAArB;AAEA;AAED;AAED;;AAED,UAAG,KAAKmI,kBAAL,IAA2BD,MAAM,CAAC/qK,MAAP,GAAgB,CAA9C,EAAiD;AAEhD;AACA,YAAG4K,KAAK,KAAKmgK,MAAM,CAAC/qK,MAApB,EAA4B;AAE3B+qK,UAAAA,MAAM,CAACA,MAAM,CAAC/qK,MAAP,GAAgB,CAAjB,CAAN,CAA0ByiK,cAA1B,GAA2C,IAA3C;AAEA;AAED;AAED;AAED;AAED;;;;;;;AAMAhoG,EAAAA,MAAM,CAACmjF,SAAD,EAAY;AAEjB,UAAM1jF,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAM4wG,QAAQ,GAAG,KAAKA,QAAtB;AAEA,QAAI5S,WAAW,GAAG,KAAKA,WAAvB;AACA,QAAI4K,YAAY,GAAG,KAAKA,YAAxB;AAEA,QAAI3xE,WAAW,GAAG,KAAlB;AACA,QAAI/4D,OAAJ,EAAauiC,OAAb,EAAsBwG,MAAtB;;AAEA,SAAI,MAAMk4C,IAAV,IAAkB,KAAK0xD,MAAvB,EAA+B;AAE9B,UAAG1xD,IAAI,CAACvkD,OAAR,EAAiB;AAEhBukD,QAAAA,IAAI,CAAC5+C,MAAL,CAAYP,QAAZ,EAAsBg+F,WAAtB,EAAmC4K,YAAnC,EAAiDllB,SAAjD,EAA4DzsD,WAA5D;;AAEA,YAAGkoB,IAAI,CAACkpD,SAAR,EAAmB;AAElB,cAAGpxE,WAAH,EAAgB;AAEf25E,YAAAA,QAAQ,CAACrI,cAAT,GAA0BppD,IAAI,CAACopD,cAA/B;AACArqI,YAAAA,OAAO,GAAG8hC,QAAQ,CAAC7hC,UAAT,EAAV;AACAsiC,YAAAA,OAAO,GAAGT,QAAQ,CAACoR,KAAT,CAAevK,OAAf,CAAuBpG,OAAjC,CAJe,CAMf;;AACAA,YAAAA,OAAO,CAAC61B,OAAR,CAAgBp4D,OAAO,CAAC2zI,QAAxB,EAAkC,CAAlC,EAAqC,UAArC;AACAjB,YAAAA,QAAQ,CAACrwG,MAAT,CAAgBP,QAAhB,EAA0Bg+F,WAA1B,EAAuC4K,YAAvC,EAAqDllB,SAArD,EAAgEzsD,WAAhE;AACAx2B,YAAAA,OAAO,CAAC61B,OAAR,CAAgBp4D,OAAO,CAAC+xI,KAAxB,EAA+B,CAA/B,EAAkC,UAAlC;AAEA;;AAEDhpG,UAAAA,MAAM,GAAG+2F,WAAT;AACAA,UAAAA,WAAW,GAAG4K,YAAd;AACAA,UAAAA,YAAY,GAAG3hG,MAAf;AAEA;;AAED,YAAGk4C,IAAI,YAAYywD,QAAnB,EAA6B;AAE5B34E,UAAAA,WAAW,GAAG,IAAd;AAEA,SAJD,MAIO,IAAGkoB,IAAI,YAAYsqD,aAAnB,EAAkC;AAExCxyE,UAAAA,WAAW,GAAG,KAAd;AAEA;AAED;AAED;AAED;AAED;;;;;;;;;;;;;;;AAcAh0D,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB87F,WAAhB,EAA6B;AAEnC,UAAM7sC,QAAQ,GAAG,KAAKA,QAAtB;;AAEA,QAAGlvD,KAAK,KAAK5I,SAAV,IAAuB6I,MAAM,KAAK7I,SAArC,EAAgD;AAE/C,YAAM6wC,IAAI,GAAGinB,QAAQ,CAAC3mB,OAAT,CAAiB,IAAI6kH,cAAJ,EAAjB,CAAb;AACAptJ,MAAAA,KAAK,GAAGioC,IAAI,CAACjoC,KAAb;AAAoBC,MAAAA,MAAM,GAAGgoC,IAAI,CAAChoC,MAAd;AAEpB,KATkC,CAWnC;;;AACAivD,IAAAA,QAAQ,CAAC/8B,OAAT,CAAiBnyB,KAAjB,EAAwBC,MAAxB,EAAgC87F,WAAhC,EAZmC,CAcnC;;AACA,UAAM2kE,iBAAiB,GAAGxxG,QAAQ,CAAC+sC,oBAAT,CAA8B,IAAImxD,cAAJ,EAA9B,CAA1B;AAEA,SAAKF,WAAL,CAAiB/6H,OAAjB,CAAyBuuI,iBAAiB,CAAC1gK,KAA3C,EAAkD0gK,iBAAiB,CAACzgK,MAApE;AACA,SAAK63J,YAAL,CAAkB3lI,OAAlB,CAA0BuuI,iBAAiB,CAAC1gK,KAA5C,EAAmD0gK,iBAAiB,CAACzgK,MAArE;;AAEA,SAAI,MAAMouG,IAAV,IAAkB,KAAK0xD,MAAvB,EAA+B;AAE9B1xD,MAAAA,IAAI,CAACl8E,OAAL,CAAauuI,iBAAiB,CAAC1gK,KAA/B,EAAsC0gK,iBAAiB,CAACzgK,MAAxD;AAEA;AAED;AAED;;;;;AAIAslE,EAAAA,KAAK,GAAG;AAEP,UAAM7W,YAAY,GAAG,KAAKw+F,WAAL,CAAiB1nI,KAAjB,EAArB;AAEA,SAAKmK,OAAL,GAJO,CAMP;;AACA,SAAKu9H,WAAL,GAAmBx+F,YAAnB;AACA,SAAKopG,YAAL,GAAoBppG,YAAY,CAAClpC,KAAb,EAApB;AACA,SAAKyM,YAAL,GAAoB,IAApB;AACA,SAAK6tI,QAAL,GAAgB,IAAIN,UAAJ,CAAe,IAAI5P,YAAJ,EAAf,CAAhB;AACA,SAAKoQ,kBAAL,GAA0B,IAA1B;AAEA;AAED;;;;;;;;AAOArwI,EAAAA,OAAO,GAAG;AAET,SAAI,MAAM0+E,IAAV,IAAkB,KAAK0xD,MAAvB,EAA+B;AAE9B1xD,MAAAA,IAAI,CAAC1+E,OAAL;AAEA;;AAED,SAAKowI,MAAL,GAAc,EAAd;;AAEA,QAAG,KAAK7S,WAAL,KAAqB,IAAxB,EAA8B;AAE7B,WAAKA,WAAL,CAAiBv9H,OAAjB;AACA,WAAKu9H,WAAL,GAAmB,IAAnB;AAEA;;AAED,QAAG,KAAK4K,YAAL,KAAsB,IAAzB,EAA+B;AAE9B,WAAKA,YAAL,CAAkBnoI,OAAlB;AACA,WAAKmoI,YAAL,GAAoB,IAApB;AAEA;;AAED,QAAG,KAAK7lI,YAAL,KAAsB,IAAzB,EAA+B;AAE9B,WAAKA,YAAL,CAAkBtC,OAAlB;AAEA;;AAED,SAAKmwI,QAAL,CAAcnwI,OAAd;AAEA;;AA3lBmB;AA+lBrB;;;;;;;;;;;AAQA,MAAMqxI,aAAN,CAAoB;AAEnB;;;;;;;AAQAjJ,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC,CAAE;;AAV5B;AAcpB;;;;;;;;;;;AAQA,MAAMiJ,SAAN,CAAgB;AAEf;;;;;;AAOA9uI,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB,CAAE;;AATV;AAahB;;;;;;;;;;AAOA,MAAMihK,SAAN,SAAwBtC,GAAxB,CAA4B;AAE3B;;;;;;AAOArnK,EAAAA,WAAW,CAAC4pK,QAAD,EAAWprD,KAAK,GAAG,EAAnB,EAAuB;AAEjC;AAEA;;;;;;;AAOA,SAAKqrD,YAAL,GAAoBrrD,KAApB;;AAEA,QAAGorD,QAAQ,KAAK/pK,SAAhB,EAA2B;AAE1B,WAAKytB,GAAL,CAASs8I,QAAT;AAEA;AAED;AAED;;;;;;;;;;AASA,MAAIprD,KAAJ,GAAY;AAEX,WAAO,KAAKqrD,YAAZ;AAEA;AAED;;;;;;;;;AAQA,MAAIrrD,KAAJ,CAAUt8G,KAAV,EAAiB;AAEhB,UAAM2nK,YAAY,GAAG,KAAKA,YAA1B;;AAEA,SAAI,MAAMtmK,MAAV,IAAoB,IAApB,EAA0B;AAEzBA,MAAAA,MAAM,CAAC+kC,MAAP,CAAcF,OAAd,CAAsByhI,YAAtB;AACAtmK,MAAAA,MAAM,CAAC+kC,MAAP,CAAcL,MAAd,CAAqB/lC,KAArB;AAEA;;AAED,SAAK2nK,YAAL,GAAoB3nK,KAApB;AAEA;AAED;;;;;;;AAMAi2D,EAAAA,KAAK,GAAG;AAEP,UAAMqmD,KAAK,GAAG,KAAKA,KAAnB;;AAEA,SAAI,MAAMj7G,MAAV,IAAoB,IAApB,EAA0B;AAEzBA,MAAAA,MAAM,CAAC+kC,MAAP,CAAcF,OAAd,CAAsBo2E,KAAtB;AAEA;;AAED,WAAO,MAAMrmD,KAAN,EAAP;AAEA;AAED;;;;;;;;AAOA7qC,EAAAA,GAAG,CAAC07C,OAAD,EAAU;AAEZ,SAAK7Q,KAAL;;AAEA,SAAI,MAAM50D,MAAV,IAAoBylE,OAApB,EAA6B;AAE5B,WAAKvyD,GAAL,CAASlT,MAAT;AAEA;;AAED,WAAO,IAAP;AAEA;AAED;;;;;;;;;AAQAyE,EAAAA,OAAO,CAACzE,MAAD,EAAS;AAEf,WAAO,KAAK+lF,GAAL,CAAS/lF,MAAT,IAAmB,CAAnB,GAAuB,CAAC,CAA/B;AAEA;AAED;;;;;;;;AAOAkT,EAAAA,GAAG,CAAClT,MAAD,EAAS;AAEXA,IAAAA,MAAM,CAAC+kC,MAAP,CAAcL,MAAd,CAAqB,KAAKu2E,KAA1B;AACA,UAAM/nG,GAAN,CAAUlT,MAAV;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;AAOA+7D,EAAAA,MAAM,CAAC/7D,MAAD,EAAS;AAEd,QAAG,KAAK+lF,GAAL,CAAS/lF,MAAT,CAAH,EAAqB;AAEpBA,MAAAA,MAAM,CAAC+kC,MAAP,CAAcF,OAAd,CAAsB,KAAKo2E,KAA3B;AAEA;;AAED,WAAO,MAAMl/C,MAAN,CAAa/7D,MAAb,CAAP;AAEA;AAED;;;;;;;;;;AASAumK,EAAAA,UAAU,CAAC//H,OAAD,EAAU;AAEnB,SAAI,MAAMxmC,MAAV,IAAoB,IAApB,EAA0B;AAEzB,UAAGwmC,OAAH,EAAY;AAEXxmC,QAAAA,MAAM,CAAC+kC,MAAP,CAAcL,MAAd,CAAqB,CAArB;AAEA,OAJD,MAIO;AAEN1kC,QAAAA,MAAM,CAAC+kC,MAAP,CAAcF,OAAd,CAAsB,CAAtB;AAEA;AAED;;AAED,WAAO,IAAP;AAEA;;AAzL0B;;;AA6L5B,IAAI2hI,gBAAgB,GAAG,+LAAvB;AAEA;;;;;;;AAOA,MAAMC,WAAN,SAA0B/E,MAA1B,CAAiC;AAEhC;;;;;;;;;;;;;AAcAjlK,EAAAA,WAAW,CAAC;AACX+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACe,MADnB;AAEXyG,IAAAA,kBAAkB,GAAG,GAFV;AAGXC,IAAAA,kBAAkB,GAAG,KAHV;AAIXvJ,IAAAA,eAAe,GAAG,GAJP;AAKX94E,IAAAA,SAAS,GAAG,GALD;AAMXp/E,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SANL;AAOX/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD,SAPN;AAQX/H,IAAAA,UAAU,GAAGC,UAAU,CAACC;AARb,MASR,EATO,EASH;AAEP,UAAM,aAAN,EAAqBmS,gBAArB,EAAuC;AAEtChF,MAAAA,aAFsC;AAItC5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,SAAD,EAAY,IAAIwlD,cAAJ,CAAY,IAAZ,CAAZ,CADiB,EAEjB,CAAC,WAAD,EAAc,IAAIA,cAAJ,CAAYz4D,SAAZ,CAAd,CAFiB,CAAR;AAJ4B,KAAvC;AAWA;;;;;;;AAOA,SAAK1wB,YAAL,GAAoB,IAAIh9B,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAC/C1D,MAAAA,SAAS,EAAExU,mBADoC;AAE/CuU,MAAAA,SAAS,EAAEvU,mBAFoC;AAG/CwY,MAAAA,aAAa,EAAE,KAHgC;AAI/CD,MAAAA,WAAW,EAAE;AAJkC,KAA5B,CAApB;AAOA,SAAK28B,YAAL,CAAkB58B,OAAlB,CAA0BnmB,IAA1B,GAAiC,cAAjC;AACA,SAAK+iD,YAAL,CAAkB58B,OAAlB,CAA0BpD,eAA1B,GAA4C,KAA5C;AAEA,SAAKg9B,QAAL,CAAcz3C,GAAd,CAAkB,SAAlB,EAA6Bxa,KAA7B,GAAqC,KAAKi1D,YAAL,CAAkB58B,OAAvD;AAEA;;;;;;AAMA,SAAK4vI,QAAL,GAAgB,IAAIzJ,QAAJ,CAAa;AAAEC,MAAAA,eAAF;AAAmBl4J,MAAAA,KAAnB;AAA0BC,MAAAA,MAA1B;AAAkCgvJ,MAAAA;AAAlC,KAAb,CAAhB;AACA,SAAKyS,QAAL,CAAc1/E,UAAd,CAAyBh3E,SAAzB,GAAqC,IAArC;AAEA;;;;;;;;AAQA,SAAK22J,aAAL,GAAqB,IAAInC,UAAJ,CAAe,IAAI5M,iBAAJ,CAAsB,IAAtB,CAAf,CAArB;AAEA,SAAKgP,iBAAL,CAAuB/qK,SAAvB,GAAmC2qK,kBAAnC;AACA,SAAKI,iBAAL,CAAuB5O,SAAvB,GAAmCyO,kBAAnC;AAEA;AAED;;;;;;;;;;AASA,MAAI3vI,OAAJ,GAAc;AAEb,WAAO,KAAK48B,YAAL,CAAkB58B,OAAzB;AAEA;AAED;;;;;;;AAMA,MAAI8vI,iBAAJ,GAAwB;AAEvB,WAAO,KAAKD,aAAL,CAAmBjK,qBAAnB,EAAP;AAEA;AAED;;;;;;;AAMA,MAAI11E,UAAJ,GAAiB;AAEhB,WAAO,KAAK0/E,QAAL,CAAc1/E,UAArB;AAEA;AAED;;;;;;;;AAOA,MAAIhiF,KAAJ,GAAY;AAEX,WAAO,KAAKgiF,UAAL,CAAgBhiF,KAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,KAAJ,CAAUvG,KAAV,EAAiB;AAEhB,SAAKuoF,UAAL,CAAgBhiF,KAAhB,GAAwBvG,KAAxB;AAEA;AAED;;;;;;;;AAOA,MAAIwG,MAAJ,GAAa;AAEZ,WAAO,KAAK+hF,UAAL,CAAgB/hF,MAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,MAAJ,CAAWxG,KAAX,EAAkB;AAEjB,SAAKuoF,UAAL,CAAgB/hF,MAAhB,GAAyBxG,KAAzB;AAEA;AAED;;;;;;;;AAOA,MAAIg9C,SAAJ,GAAgB;AAEf,WAAO,KAAKirH,QAAL,CAAcjrH,SAArB;AAEA;AAED;;;;;;;;AAOA,MAAIA,SAAJ,CAAch9C,KAAd,EAAqB;AAEpB,SAAKioK,QAAL,CAAcjrH,SAAd,GAA0Bh9C,KAA1B;AAEA;AAED;;;;;;;;AAOA,MAAIw1J,UAAJ,GAAiB;AAEhB,WAAO,KAAKyS,QAAL,CAAczS,UAArB;AAEA;AAED;;;;;;AAKA,MAAIA,UAAJ,CAAex1J,KAAf,EAAsB;AAErB,SAAKioK,QAAL,CAAczS,UAAd,GAA2Bx1J,KAA3B;AAEA;AAED;;;;;;AAKA,MAAIooK,WAAJ,GAAkB;AAEjB/8I,IAAAA,OAAO,CAACC,IAAR,CAAa,KAAKpZ,IAAlB,EAAwB,kHAAxB;AAEA,WAAO,GAAP;AAEA;AAED;;;;;;AAKA,MAAIk2J,WAAJ,CAAgBpoK,KAAhB,EAAuB;AAEtBqrB,IAAAA,OAAO,CAACC,IAAR,CAAa,KAAKpZ,IAAlB,EAAwB,kHAAxB;AAEA;AAED;;;;;;;AAMA,MAAIyzE,SAAJ,GAAgB;AAEf,WAAO,KAAK1zB,QAAL,CAAcz3C,GAAd,CAAkB,WAAlB,EAA+Bxa,KAAtC;AAEA;AAED;;;;;;;AAMA,MAAI2lF,SAAJ,CAAc3lF,KAAd,EAAqB;AAEpB,SAAKiyD,QAAL,CAAcz3C,GAAd,CAAkB,WAAlB,EAA+Bxa,KAA/B,GAAuCA,KAAvC;AAEA;AAED;;;;;;;;AAOA8+J,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKv2E,UAAL,CAAgBx1D,KAAvB;AAEA;AAED;;;;;;;;AAOAgsI,EAAAA,kBAAkB,CAAChsI,KAAD,EAAQ;AAEzB,SAAKw1D,UAAL,CAAgBx1D,KAAhB,GAAwBA,KAAxB;AAEA;AAED;;;;;;;;;AAQAgI,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAMlkF,YAAY,GAAG,KAAKA,YAA1B;;AAEA,QAAG,KAAKizG,aAAL,CAAmB73G,OAAtB,EAA+B;AAE9B,WAAK63G,aAAL,CAAmBlyG,MAAnB,CAA0BP,QAA1B,EAAoCg+F,WAApC,EAAiDx+F,YAAjD;AACA,WAAKgzG,QAAL,CAAcjyG,MAAd,CAAqBP,QAArB,EAA+BR,YAA/B,EAA6CA,YAA7C;AAEA,KALD,MAKO;AAEN,WAAKgzG,QAAL,CAAcjyG,MAAd,CAAqBP,QAArB,EAA+Bg+F,WAA/B,EAA4Cx+F,YAA5C;AAEA;AAED;AAED;;;;;;;;AAOAv8B,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAKyhK,QAAL,CAAcvvI,OAAd,CAAsBnyB,KAAtB,EAA6BC,MAA7B;AACA,SAAKyuD,YAAL,CAAkBv8B,OAAlB,CAA0B,KAAK6vD,UAAL,CAAgBhiF,KAA1C,EAAiD,KAAKgiF,UAAL,CAAgB/hF,MAAjE;AAEA;AAED;;;;;;;;;AAQA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,SAAK0J,QAAL,CAAc3J,UAAd,CAAyB7oG,QAAzB,EAAmCxnC,KAAnC,EAA0CswI,eAA1C;;AAEA,QAAG,CAACtwI,KAAD,IAAUswI,eAAe,KAAKn+I,uBAAjC,EAAmD;AAElD,WAAK60C,YAAL,CAAkB58B,OAAlB,CAA0B7D,MAA1B,GAAmCvT,gBAAnC;AAEA;;AAED,QAAGs9I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC,WAAKs3D,YAAL,CAAkB58B,OAAlB,CAA0BtxB,IAA1B,GAAiCw3J,eAAjC;AAEA;AAED;;AAvW+B;;;AA2WjC,IAAI8J,gBAAgB,GAAG,40HAAvB;AAEA;;;;;;;;;AASA,MAAMC,WAAN,SAA0BvF,MAA1B,CAAiC;AAEhC;;;;;;;;;;AAWAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwCnoJ,IAAAA,KAAK,GAAG,GAAhD;AAAqDuvJ,IAAAA,GAAG,GAAG,IAA3D;AAAiEC,IAAAA,QAAQ,GAAG,KAA5E;AAAmFC,IAAAA,OAAO,GAAG;AAA7F,MAAqG,EAAtG,EAA0G;AAEpH,UAAM,aAAN,EAAqBJ,gBAArB,EAAuC;AAEtCxF,MAAAA,aAFsC;AAGtC98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACE,WAAhB,GAA8BF,eAAe,CAACxL,KAHpB;AAKtCvlG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,OAAD,EAAU,IAAIwlD,cAAJ,CAAYplI,KAAZ,CAAV,CADiB,EAEjB,CAAC,KAAD,EAAQ,IAAIolI,cAAJ,CAAYmqB,GAAZ,CAAR,CAFiB,EAGjB,CAAC,UAAD,EAAa,IAAInqB,cAAJ,CAAYoqB,QAAZ,CAAb,CAHiB,EAIjB,CAAC,SAAD,EAAY,IAAIpqB,cAAJ,CAAYqqB,OAAZ,CAAZ,CAJiB,CAAR;AAL4B,KAAvC;AAcA;;AA7B+B;;;AAiCjC,IAAIC,gBAAgB,GAAG,qTAAvB;AAEA;;;;;;AAMA,MAAMC,wBAAN,SAAuC5F,MAAvC,CAA8C;AAE7C;;;;;;;;AASAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwCyH,IAAAA,UAAU,GAAG,GAArD;AAA0DC,IAAAA,QAAQ,GAAG;AAArE,MAA6E,EAA9E,EAAkF;AAE5F,UAAM,0BAAN,EAAkCH,gBAAlC,EAAoD;AAEnD7F,MAAAA,aAFmD;AAInD5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,YAAD,EAAe,IAAIwlD,cAAJ,CAAYwqB,UAAZ,CAAf,CADiB,EAEjB,CAAC,UAAD,EAAa,IAAIxqB,cAAJ,CAAYyqB,QAAZ,CAAb,CAFiB,CAAR;AAJyC,KAApD;AAWA;;AAxB4C;;;AA4B9C,IAAIC,gBAAgB,GAAG,gLAAvB;AAEA;;;;AAIA,MAAMC,kBAAN,SAAiChG,MAAjC,CAAwC;AAEvC;;;;;AAMAjlK,EAAAA,WAAW,CAAC+kK,aAAa,GAAGtC,aAAa,CAACY,MAA/B,EAAuC;AAEjD,UAAM,oBAAN,EAA4B2H,gBAA5B,EAA8C;AAAEjG,MAAAA;AAAF,KAA9C;AAEA;;AAZsC;;;AAgBxC,IAAImG,gBAAgB,GAAG,8KAAvB;AAEA;;;;;;AAMA,MAAMC,gBAAN,SAA+BlG,MAA/B,CAAsC;AAErC;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwCl+D,IAAAA,IAAI,GAAG;AAA/C,MAAsD,EAAvD,EAA2D;AAErE,UAAM,kBAAN,EAA0B+lE,gBAA1B,EAA4C;AAE3CnG,MAAAA,aAF2C;AAI3C5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,QAAD,EAAW,IAAIwlD,cAAJ,CAAY,GAAZ,CAAX,CADiB,CAAR;AAJiC,KAA5C;AAUA;;;;;;;AAOA,SAAKn7C,IAAL,GAAY,CAAZ;AAEA,SAAKimE,WAAL,CAAiBjmE,IAAjB;AAEA;AAED;;;;;;;AAMAkmE,EAAAA,WAAW,GAAG;AAEb,WAAO,KAAKlmE,IAAZ;AAEA;AAED;;;;;;;;;;;;AAWAimE,EAAAA,WAAW,CAACjmE,IAAD,EAAO;AAEjB,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKhxC,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAA5B,GAAoCpF,IAAI,CAACsO,GAAL,CAAS,GAAT,EAAc+5F,IAAI,GAAG,GAArB,CAApC;AAEA;;AA/DoC;;;AAmEtC,IAAImmE,gBAAgB,GAAG,8ZAAvB;AAEA,IAAIC,cAAc,GAAG,4HAArB;AAEA;;;;AAIA,MAAMC,yBAAN,SAAwCvG,MAAxC,CAA+C;AAE9C;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwCz6J,IAAAA,MAAM,GAAG,IAAIitJ,cAAJ,CAAc,KAAd,EAAqB,MAArB;AAAjD,MAAkF,EAAnF,EAAuF;AAEjG,UAAM,2BAAN,EAAmCyV,gBAAnC,EAAqD;AAEpD52G,MAAAA,YAAY,EAAE62G,cAFsC;AAGpDxG,MAAAA,aAHoD;AAIpD98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACE,WAJwB;AAMpDjxG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,QAAD,EAAW,IAAIwlD,cAAJ,CAAY13I,MAAZ,CAAX,CADiB,CAAR;AAN0C,KAArD;AAYA;AAED;;;;;;;AAMA,MAAIA,MAAJ,GAAa;AAEZ,WAAO,KAAKurD,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAAnC;AAEA;AAED;;;;;AAIA,MAAI0G,MAAJ,CAAW1G,KAAX,EAAkB;AAEjB,SAAKiyD,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAA5B,GAAoCA,KAApC;AAEA;AAED;;;;;;;;;AAQAs+J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,QAAGtwI,KAAH,EAAU;AAET,WAAKskC,OAAL,CAAannC,GAAb,CAAiB,OAAjB,EAA0B,GAA1B;AAEA,KAJD,MAIO;AAEN,WAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,OAApB;AAEA;AAED;;AApE6C;;;AAwE/C,IAAImsG,gBAAgB,GAAG,oOAAvB;AAEA;;;;;;AAMA,MAAMC,WAAN,SAA0BzG,MAA1B,CAAiC;AAEhC;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwC5G,IAAAA,QAAQ,GAAG;AAAnD,MAA6D,EAA9D,EAAkE;AAE5E,UAAM,aAAN,EAAqBgP,gBAArB,EAAuC;AAEtC1G,MAAAA,aAFsC;AAGtC98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACxL;AAHU,KAAvC;AAOA,SAAK+C,QAAL,GAAgBA,QAAhB;AAEA;AAED;;;;;;;AAMA,MAAIA,QAAJ,GAAe;AAEd,WAAO,KAAKhoG,OAAL,CAAa60B,GAAb,CAAiB,UAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAImzE,QAAJ,CAAav6J,KAAb,EAAoB;AAEnBA,IAAAA,KAAK,GAAG,KAAKuyD,OAAL,CAAannC,GAAb,CAAiB,UAAjB,EAA6B,GAA7B,CAAH,GAAuC,KAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,UAApB,CAA5C;AAEA;;AA/C+B;;;AAmDjC,IAAIqsG,gBAAgB,GAAG,0eAAvB;AAEA;;;;;;;;AAQA,MAAMC,kBAAN,SAAiC3G,MAAjC,CAAwC;AAEvC;;;;;;;;;;;;AAaAjlK,EAAAA,WAAW,CAACsgC,MAAD,EAAS;AACnBykI,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MADX;AAEnB5M,IAAAA,aAAa,GAAG,GAFG;AAGnBtgG,IAAAA,WAAW,GAAG,GAHK;AAInB01G,IAAAA,UAAU,GAAG,GAJM;AAKnBpjK,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SALG;AAMnB/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD;AANE,MAOhB,EAPO,EAOH;AAEP,UAAM,oBAAN,EAA4BkM,gBAA5B,EAA8C;AAE7C5G,MAAAA,aAF6C;AAG7C98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACxL,KAHiB;AAK7CvlG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,iBAAD,EAAoB,IAAIwlD,cAAJ,CAAY,IAAZ,CAApB,CADiB,EAEjB,CAAC,gBAAD,EAAmB,IAAIA,cAAJ,CAAY,IAAZ,CAAnB,CAFiB,EAGjB,CAAC,eAAD,EAAkB,IAAIA,cAAJ,CAAY,IAAZ,CAAlB,CAHiB,EAIjB,CAAC,OAAD,EAAU,IAAIA,cAAJ,CAAY,GAAZ,CAAV,CAJiB,CAAR;AALmC,KAA9C;AAcA;;;;;;;AAOA,SAAKhgH,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAK62B,YAAL,GAAoB,IAAIh9B,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAC/C1D,MAAAA,SAAS,EAAExU,mBADoC;AAE/CuU,MAAAA,SAAS,EAAEvU,mBAFoC;AAG/CwY,MAAAA,aAAa,EAAE,KAHgC;AAI/CD,MAAAA,WAAW,EAAE;AAJkC,KAA5B,CAApB;AAOA,SAAK28B,YAAL,CAAkB58B,OAAlB,CAA0BnmB,IAA1B,GAAiC,kBAAjC;AACA,SAAK+iD,YAAL,CAAkB58B,OAAlB,CAA0BpD,eAA1B,GAA4C,KAA5C;AAEA;;;;;;;AAOA,SAAK20I,kBAAL,GAA0B,KAAK30G,YAAL,CAAkBlpC,KAAlB,EAA1B;AACA,SAAK69I,kBAAL,CAAwBvxI,OAAxB,CAAgCnmB,IAAhC,GAAuC,gBAAvC;AAEA;;;;;;;AAOA,SAAK23J,gBAAL,GAAwB,KAAK50G,YAAL,CAAkBlpC,KAAlB,EAAxB;AACA,SAAK89I,gBAAL,CAAsBxxI,OAAtB,CAA8BnmB,IAA9B,GAAqC,gBAArC;AAEA,SAAK+/C,QAAL,CAAcz3C,GAAd,CAAkB,iBAAlB,EAAqCxa,KAArC,GAA6C,KAAK6pK,gBAAL,CAAsBxxI,OAAnE;AAEA;;;;;;;AAOA,SAAKyxI,eAAL,GAAuB,KAAK70G,YAAL,CAAkBlpC,KAAlB,EAAvB;AACA,SAAK+9I,eAAL,CAAqBzxI,OAArB,CAA6BnmB,IAA7B,GAAoC,eAApC;AAEA,SAAK+/C,QAAL,CAAcz3C,GAAd,CAAkB,gBAAlB,EAAoCxa,KAApC,GAA4C,KAAK8pK,eAAL,CAAqBzxI,OAAjE;AAEA;;;;;;;;;;AAUA,SAAK0xI,eAAL,GAAuB,KAAK90G,YAAL,CAAkBlpC,KAAlB,EAAvB;AACA,SAAKg+I,eAAL,CAAqB1xI,OAArB,CAA6B7D,MAA7B,GAAsCvT,gBAAtC;AACA,SAAK8oJ,eAAL,CAAqB1xI,OAArB,CAA6BnmB,IAA7B,GAAoC,SAApC;AAEA;;;;;;;AAOA,SAAK83J,sBAAL,GAA8B,KAAKD,eAAL,CAAqBh+I,KAArB,EAA9B;AACA,SAAKi+I,sBAAL,CAA4B3xI,OAA5B,CAAoCnmB,IAApC,GAA2C,iBAA3C;AAEA,SAAK+/C,QAAL,CAAcz3C,GAAd,CAAkB,eAAlB,EAAmCxa,KAAnC,GAA2C,KAAKgqK,sBAAL,CAA4B3xI,OAAvE;AAEA;;;;;;;AAOA,SAAK4xI,OAAL,GAAe,IAAIlE,UAAJ,CAAe,IAAI1R,yBAAJ,CAA8Bj2H,MAA9B,CAAf,CAAf;AACA,UAAM8rI,WAAW,GAAG,KAAKC,yBAAzB;AACAD,IAAAA,WAAW,CAACj4G,QAAZ,CAAqBsiG,aAArB,CAAmCv0J,KAAnC,GAA2Cu0J,aAA3C;AACA2V,IAAAA,WAAW,CAACj4G,QAAZ,CAAqBgC,WAArB,CAAiCj0D,KAAjC,GAAyCi0D,WAAzC;AAEA;;;;;;AAMA,SAAKg0G,QAAL,GAAgB,IAAIzJ,QAAJ,CAAa;AAAEj4J,MAAAA,KAAF;AAASC,MAAAA,MAAT;AAAiBgvJ,MAAAA,UAAU,EAAEC,UAAU,CAACM;AAAxC,KAAb,CAAhB;AACA,SAAKkS,QAAL,CAAc1/E,UAAd,CAAyBh3E,SAAzB,GAAqC,IAArC;AAEA;;;;;;;AAOA,SAAK64J,QAAL,GAAgB,IAAIrE,UAAJ,CAAe,IAAIjM,YAAJ,CAAiB,KAAKiQ,eAAL,CAAqB1xI,OAAtC,CAAf,CAAhB;AACA,UAAMgyI,YAAY,GAAG,KAAKD,QAAL,CAAcnM,qBAAd,EAArB;AACAoM,IAAAA,YAAY,CAACnQ,YAAb,GAA4BC,YAAY,CAACO,sBAAzC;AACA2P,IAAAA,YAAY,CAACpQ,YAAb,GAA4B1H,YAAY,CAACE,KAAzC;AAEA;;;;;;;AAOA,SAAK6X,iBAAL,GAAyB,IAAIvE,UAAJ,CAAe,IAAI3S,aAAJ,CAAkB,KAAlB,EAAyB,IAAzB,CAAf,CAAzB;AAEA;;;;;;;AAOA,SAAKmX,iBAAL,GAAyB,IAAIxE,UAAJ,CAAe,IAAI3S,aAAJ,CAAkB,IAAlB,EAAwB,IAAxB,CAAf,CAAzB;AAEA;;;;;;;AAOA,SAAKoX,gBAAL,GAAwB,IAAIzE,UAAJ,CAAe,IAAI3S,aAAJ,CAAkB,KAAlB,EAAyB,KAAzB,CAAf,CAAxB;AAEA;;;;;;;AAOA,SAAKqX,gBAAL,GAAwB,IAAI1E,UAAJ,CAAe,IAAI3S,aAAJ,CAAkB,IAAlB,EAAwB,KAAxB,CAAf,CAAxB;AAEA,SAAKuW,UAAL,GAAkBA,UAAlB;AAEA;;;;;;;;AAQA,SAAK5tK,MAAL,GAAc,IAAd;AAEA;AAED;;;;;;;AAMA,MAAIouK,yBAAJ,GAAgC;AAE/B,WAAO,KAAKF,OAAL,CAAahM,qBAAb,EAAP;AAEA;AAED;;;;;;;AAMA,MAAI11E,UAAJ,GAAiB;AAEhB,WAAO,KAAK0/E,QAAL,CAAc1/E,UAArB;AAEA;AAED;;;;;;;AAMA,MAAIohF,UAAJ,GAAiB;AAEhB,WAAO,KAAK13G,QAAL,CAAcz3C,GAAd,CAAkB,OAAlB,EAA2Bxa,KAAlC;AAEA;AAED;;;;;;;AAMA,MAAI2pK,UAAJ,CAAe3pK,KAAf,EAAsB;AAErB,UAAMsmK,MAAM,GAAG,CACd,KAAKgE,iBADS,EAEd,KAAKC,iBAFS,EAGd,KAAKC,gBAHS,EAId,KAAKC,gBAJS,CAAf;AAOAnE,IAAAA,MAAM,CAACx+J,GAAP,CAAYxI,CAAD,IAAOA,CAAC,CAAC2+J,qBAAF,GAA0BhsG,QAA1B,CAAmCl/B,KAArD,EAA4Dp3B,OAA5D,CAAqEs7C,CAAD,IAAO;AAE1EA,MAAAA,CAAC,CAACj3C,KAAF,GAAUA,KAAV;AAEA,KAJD;AAMA,SAAKoqK,QAAL,CAAcnM,qBAAd,GAAsChsG,QAAtC,CAA+C+nG,QAA/C,CAAwDh6J,KAAxD,GAAgEA,KAAhE;AACA,SAAKiyD,QAAL,CAAcz3C,GAAd,CAAkB,OAAlB,EAA2Bxa,KAA3B,GAAmCA,KAAnC;AAEA;AAED;;;;;;;;AAOA0qK,EAAAA,sBAAsB,CAAC3uK,MAAD,EAAS;AAE9B,UAAMqiC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAMusI,YAAY,GAAGvsI,MAAM,CAACyG,GAAP,GAAazG,MAAM,CAACwG,IAAzC;AACA,UAAMoE,QAAQ,GAAG5K,MAAM,CAACh7B,QAAP,CAAgBuqB,UAAhB,CAA2B5xB,MAA3B,CAAjB;AAEA,WAAOnB,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAAUqpC,QAAQ,GAAG2hI,YAArB,EAAoC,GAApC,CAAT,EAAmD,GAAnD,CAAP;AAEA;AAED;;;;;;;;AAOAvM,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,UAAM5yC,QAAQ,GAAG,KAAKy+H,yBAAtB;AACAz+H,IAAAA,QAAQ,CAACumB,QAAT,CAAkB35B,WAAlB,CAA8Bt4B,KAA9B,GAAsCw4B,YAAtC;AACAkT,IAAAA,QAAQ,CAAC4yC,YAAT,GAAwBA,YAAxB;AAEA;AAED;;;;;;;;;AAQAvjD,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAMlkF,YAAY,GAAG,KAAKA,YAA1B;AACA,UAAM80G,eAAe,GAAG,KAAKA,eAA7B;AACA,UAAMC,sBAAsB,GAAG,KAAKA,sBAApC;AACA,UAAMJ,kBAAkB,GAAG,KAAKA,kBAAhC;AAEA,UAAMY,gBAAgB,GAAG,KAAKA,gBAA9B;AACA,UAAMC,gBAAgB,GAAG,KAAKA,gBAA9B;AACA,UAAMG,eAAe,GAAGJ,gBAAgB,CAACvM,qBAAjB,GAAyChsG,QAAjE;AACA,UAAM44G,eAAe,GAAGJ,gBAAgB,CAACxM,qBAAjB,GAAyChsG,QAAjE;AAEA,UAAMq4G,iBAAiB,GAAG,KAAKA,iBAA/B;AACA,UAAMC,iBAAiB,GAAG,KAAKA,iBAA/B;AACA,UAAMO,gBAAgB,GAAGR,iBAAiB,CAACrM,qBAAlB,GAA0ChsG,QAAnE;AACA,UAAM84G,gBAAgB,GAAGR,iBAAiB,CAACtM,qBAAlB,GAA0ChsG,QAAnE,CAfwC,CAiBxC;;AACA,QAAG,KAAKl2D,MAAL,KAAgB,IAAnB,EAAyB;AAExB,YAAMitC,QAAQ,GAAG,KAAK0hI,sBAAL,CAA4B,KAAK3uK,MAAjC,CAAjB;AACA,WAAKouK,yBAAL,CAA+Bl4G,QAA/B,CAAwCsiG,aAAxC,CAAsDv0J,KAAtD,GAA8DgpC,QAA9D;AAEA,KAvBuC,CAyBxC;;;AACA,SAAKihI,OAAL,CAAaj0G,MAAb,CAAoBP,QAApB,EAA8B,IAA9B,EAAoCs0G,eAApC;AACA,SAAK9B,QAAL,CAAcjyG,MAAd,CAAqBP,QAArB,EAA+Bs0G,eAA/B,EAAgDC,sBAAhD,EA3BwC,CA6BxC;;AACA,SAAKI,QAAL,CAAcp0G,MAAd,CAAqBP,QAArB,EAA+Bg+F,WAA/B,EAA4CmW,kBAA5C,EA9BwC,CAgCxC;;AACAgB,IAAAA,eAAe,CAAClX,SAAhB,CAA0B1zJ,KAA1B,GAAkC6qK,eAAe,CAACnX,SAAhB,CAA0B1zJ,KAA1B,GAAkC+pK,eAAe,CAAC1xI,OAApF;AACAmyI,IAAAA,gBAAgB,CAACx0G,MAAjB,CAAwBP,QAAxB,EAAkCm0G,kBAAlC,EAAsD30G,YAAtD;AACAw1G,IAAAA,gBAAgB,CAACz0G,MAAjB,CAAwBP,QAAxB,EAAkCR,YAAlC,EAAgD,KAAK60G,eAArD,EAnCwC,CAqCxC;;AACAgB,IAAAA,gBAAgB,CAACpX,SAAjB,CAA2B1zJ,KAA3B,GAAmC+qK,gBAAgB,CAACrX,SAAjB,CAA2B1zJ,KAA3B,GAAmCgqK,sBAAsB,CAAC3xI,OAA7F;AACAiyI,IAAAA,iBAAiB,CAACt0G,MAAlB,CAAyBP,QAAzB,EAAmCg+F,WAAnC,EAAgDx+F,YAAhD;AACAs1G,IAAAA,iBAAiB,CAACv0G,MAAlB,CAAyBP,QAAzB,EAAmCR,YAAnC,EAAiD,KAAK40G,gBAAtD;AAEA;AAED;;;;;;;;AAOAnxI,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAM+hF,UAAU,GAAG,KAAKA,UAAxB;AAEA,QAAIyiF,UAAU,GAAG,CAChB,KAAKf,OADW,EAEhB,KAAKhC,QAFW,EAGhB,KAAKmC,QAHW,EAIhB,KAAKE,iBAJW,EAKhB,KAAKC,iBALW,EAMhB,KAAKC,gBANW,EAOhB,KAAKC,gBAPW,CAAjB,CAJsB,CActB;;AACAO,IAAAA,UAAU,CAACjlK,IAAX,CAAgB,KAAKgkK,eAArB,EAAsC,KAAKH,kBAA3C;AACAoB,IAAAA,UAAU,CAACrvK,OAAX,CAAoBhB,CAAD,IAAOA,CAAC,CAAC+9B,OAAF,CAAUnyB,KAAV,EAAiBC,MAAjB,CAA1B;AAEA,UAAMkT,CAAC,GAAG6uE,UAAU,CAAChiF,KAArB;AACA,UAAMtL,CAAC,GAAGstF,UAAU,CAAC/hF,MAArB;AAEAwkK,IAAAA,UAAU,GAAG,CACZ,KAAK/1G,YADO,EAEZ,KAAK40G,gBAFO,EAGZ,KAAKC,eAHO,EAIZ,KAAKE,sBAJO,CAAb;AAOAgB,IAAAA,UAAU,CAACrvK,OAAX,CAAoBhB,CAAD,IAAOA,CAAC,CAAC+9B,OAAF,CAAUhf,CAAV,EAAaze,CAAb,CAA1B,EA5BsB,CA8BtB;;AACA,UAAMqrK,MAAM,GAAG,CACd,KAAKgE,iBADS,EAEd,KAAKC,iBAFS,EAGd,KAAKC,gBAHS,EAId,KAAKC,gBAJS,CAAf;AAOAnE,IAAAA,MAAM,CAAC3qK,OAAP,CAAgB2D,CAAD,IAAOA,CAAC,CAAC2+J,qBAAF,GAA0B9J,YAA1B,CAAuC,MAAMz6I,CAA7C,EAAgD,MAAMze,CAAtD,CAAtB;AAEA;AAED;;;;;;;;;AAQAqjK,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,UAAM0M,cAAc,GAAG,CACtB,KAAKhB,OADiB,EAEtB,KAAKG,QAFiB,EAGtB,KAAKE,iBAHiB,EAItB,KAAKC,iBAJiB,EAKtB,KAAKC,gBALiB,EAMtB,KAAKC,gBANiB,CAAvB;AASAQ,IAAAA,cAAc,CAACtvK,OAAf,CAAwBiB,CAAD,IAAOA,CAAC,CAAC0hK,UAAF,CAAa7oG,QAAb,EAAuBxnC,KAAvB,EAA8BswI,eAA9B,CAA9B,EAX4C,CAa5C;;AACA,SAAK0J,QAAL,CAAc3J,UAAd,CAAyB7oG,QAAzB,EAAmCxnC,KAAnC,EAA0C7N,uBAA1C;;AAEA,QAAG,CAAC6N,KAAD,IAAUswI,eAAe,KAAKn+I,uBAAjC,EAAmD;AAElD,WAAKypJ,gBAAL,CAAsBxxI,OAAtB,CAA8BtxB,IAA9B,GAAqCka,gBAArC;AAEA;;AAED,QAAGs9I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC,WAAKs3D,YAAL,CAAkB58B,OAAlB,CAA0BtxB,IAA1B,GAAiCw3J,eAAjC;AACA,WAAKsL,gBAAL,CAAsBxxI,OAAtB,CAA8BtxB,IAA9B,GAAqCw3J,eAArC;AACA,WAAKuL,eAAL,CAAqBzxI,OAArB,CAA6BtxB,IAA7B,GAAoCw3J,eAApC;AACA,WAAKqL,kBAAL,CAAwBvxI,OAAxB,CAAgCtxB,IAAhC,GAAuCw3J,eAAvC;AAEA;AAED;;AAzbsC;;;AA6bxC,IAAI2M,gBAAgB,GAAG,yWAAvB;AAEA;;;;AAIA,MAAMC,eAAN,SAA8BpI,MAA9B,CAAqC;AAEpC;;;;;;;;AASAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwC1zI,IAAAA,KAAK,GAAG7yB,IAAI,CAACutB,EAAL,GAAU,GAA1D;AAA+D4K,IAAAA,KAAK,GAAG;AAAvE,MAA+E,EAAhF,EAAoF;AAE9F,UAAM,iBAAN,EAAyBm4I,gBAAzB,EAA2C;AAE1CrI,MAAAA,aAF0C;AAI1C5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,OAAD,EAAU,IAAIwlD,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAAV,CADiB,EAEjB,CAAC,OAAD,EAAU,IAAIvV,cAAJ,CAAYrrH,KAAZ,CAAV,CAFiB,CAAR;AAJgC,KAA3C;AAWA,SAAKq4I,QAAL,CAAc39I,KAAd;AAEA;AAED;;;;;;;AAMA29I,EAAAA,QAAQ,CAAC39I,KAAD,EAAQ;AAEf,SAAKwkC,QAAL,CAAcz3C,GAAd,CAAkB,OAAlB,EAA2Bxa,KAA3B,CAAiCorB,GAAjC,CAAqCxwB,IAAI,CAAC+vB,GAAL,CAAS8C,KAAT,CAArC,EAAsD7yB,IAAI,CAAC8vB,GAAL,CAAS+C,KAAT,CAAtD;AAEA;;AAtCmC;;;AA0CrC,IAAI49I,gBAAgB,GAAG,2JAAvB;AAEA;;;;;;AAMA,MAAMC,qBAAN,SAAoCvI,MAApC,CAA2C;AAE1C;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwCoK,IAAAA,KAAK,GAAG;AAAhD,MAAwD,EAAzD,EAA6D;AAEvE,UAAM,uBAAN,EAA+BF,gBAA/B,EAAiD;AAEhDxI,MAAAA,aAFgD;AAIhD5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,OAAD,EAAU,IAAIwlD,cAAJ,CAAYmtB,KAAZ,CAAV,CADiB,CAAR;AAJsC,KAAjD;AAUA;;AAtByC;AA0B3C;;;;;;;;;;;;;AAUA,SAASC,QAAT,CAAkBh9H,IAAlB,EAAwBha,MAAxB,EAAgCztB,IAAhC,EAAsC;AAErC,QAAM0kK,QAAQ,GAAG,IAAI7yE,GAAJ,CAAQ,CACxB,CAACz3E,sBAAD,EAAkB,CAAlB,CADwB,EAExB,CAACK,gBAAD,EAAY,CAAZ,CAFwB,EAGxB,CAACE,eAAD,EAAW,CAAX,CAHwB,EAIxB,CAACT,gBAAD,EAAY,CAAZ,CAJwB,EAKxB,CAACC,iBAAD,EAAa,CAAb,CALwB,CAAR,CAAjB;AAQA,MAAI6qB,IAAJ;;AAEA,MAAG,CAAC0/H,QAAQ,CAACrkF,GAAT,CAAa5yD,MAAb,CAAJ,EAA0B;AAEzBnJ,IAAAA,OAAO,CAACyD,KAAR,CAAc,8BAAd;AAEA;;AAED,MAAG/nB,IAAI,KAAKqZ,uBAAZ,EAA8B;AAE7B2rB,IAAAA,IAAI,GAAG,IAAIyW,UAAJ,CAAehU,IAAI,GAAGi9H,QAAQ,CAACjxJ,GAAT,CAAaga,MAAb,CAAtB,CAAP;;AAEA,SAAI,IAAI53B,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+uC,IAAI,CAACxwC,MAAxB,EAAgCqB,CAAC,GAAGI,CAApC,EAAuC,EAAEJ,CAAzC,EAA4C;AAE3CmvC,MAAAA,IAAI,CAACnvC,CAAD,CAAJ,GAAUhC,IAAI,CAAC2tB,MAAL,KAAgB,GAA1B;AAEA;AAED,GAVD,MAUO;AAENwjB,IAAAA,IAAI,GAAG,IAAIqX,YAAJ,CAAiB5U,IAAI,GAAGi9H,QAAQ,CAACjxJ,GAAT,CAAaga,MAAb,CAAxB,CAAP;;AAEA,SAAI,IAAI53B,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAG+uC,IAAI,CAACxwC,MAAxB,EAAgCqB,CAAC,GAAGI,CAApC,EAAuC,EAAEJ,CAAzC,EAA4C;AAE3CmvC,MAAAA,IAAI,CAACnvC,CAAD,CAAJ,GAAUhC,IAAI,CAAC2tB,MAAL,EAAV;AAEA;AAED;;AAED,SAAOwjB,IAAP;AAEA;AAED;;;;;AAIA,MAAM2/H,YAAN,SAA2Bl1G,kBAA3B,CAAuC;AAEtC;;;;;;;;;;;;AAaA14D,EAAAA,WAAW,CAACyI,KAAD,EAAQC,MAAR,EAAgBguB,MAAM,GAAGrT,sBAAzB,EAA0Cpa,IAAI,GAAGqZ,uBAAjD,EAAmE;AAE7E,UAAMorJ,QAAQ,CAACjlK,KAAK,GAAGC,MAAT,EAAiBguB,MAAjB,EAAyBztB,IAAzB,CAAd,EAA8CR,KAA9C,EAAqDC,MAArD,EAA6DguB,MAA7D,EAAqEztB,IAArE;AAEA;;AAnBqC;AAuBvC;;;;;;;;;;;;;AAUA,SAAS6pF,YAAT,CAAsBrqF,KAAtB,EAA6BC,MAA7B,EAAqCulC,IAArC,EAA2C;AAE1C,QAAMtY,MAAM,GAAGhyB,QAAQ,CAACiyB,eAAT,CAAyB,8BAAzB,EAAyD,QAAzD,CAAf;AACA,QAAMC,OAAO,GAAGF,MAAM,CAACG,UAAP,CAAkB,IAAlB,CAAhB;AAEA,QAAM+3I,SAAS,GAAGh4I,OAAO,CAACi4I,eAAR,CAAwBrlK,KAAxB,EAA+BC,MAA/B,CAAlB;AACAmlK,EAAAA,SAAS,CAAC5/H,IAAV,CAAe3gB,GAAf,CAAmB2gB,IAAnB;AAEAtY,EAAAA,MAAM,CAACltB,KAAP,GAAeA,KAAf;AACAktB,EAAAA,MAAM,CAACjtB,MAAP,GAAgBA,MAAhB;AAEAmtB,EAAAA,OAAO,CAACG,YAAR,CAAqB63I,SAArB,EAAgC,CAAhC,EAAmC,CAAnC;AAEA,SAAOl4I,MAAP;AAEA;AAED;;;;;AAIA,MAAMo4I,YAAN,CAAmB;AAElB;;;;;;;AAQA/tK,EAAAA,WAAW,CAACyI,KAAK,GAAG,CAAT,EAAYC,MAAM,GAAG,CAArB,EAAwBulC,IAAI,GAAG,IAA/B,EAAqC;AAE/C;;;;;AAMA,SAAKxlC,KAAL,GAAaA,KAAb;AAEA;;;;;;AAMA,SAAKC,MAAL,GAAcA,MAAd;AAEA;;;;;;AAMA,SAAKulC,IAAL,GAAYA,IAAZ;AAEA;AAED;;;;;;;AAMA+/H,EAAAA,QAAQ,GAAG;AAEV,WAAQ,OAAOrqK,QAAP,KAAoB,WAArB,GAAoC,IAApC,GAA2CmvF,YAAY,CAC7D,KAAKrqF,KADwD,EAE7D,KAAKC,MAFwD,EAG7D,KAAKulC,IAHwD,CAA9D;AAMA;AAED;;;;;;;;AAOA,SAAO02E,IAAP,CAAY12E,IAAZ,EAAkB;AAEjB,WAAO,IAAI8/H,YAAJ,CAAiB9/H,IAAI,CAACxlC,KAAtB,EAA6BwlC,IAAI,CAACvlC,MAAlC,EAA0CulC,IAAI,CAACA,IAA/C,CAAP;AAEA;;AAjEiB;;;AAqEnB,IAAIggI,aAAa,GAAG,i8QAApB;AAEA;;;;;;;;AAQA,SAASC,QAAT,CAAkBC,YAAY,GAAG,KAAjC,EAAwC;AAEvC,QAAMC,SAAS,GAAGC,GAAG,CAACC,eAAJ,CAAoB,IAAI57C,IAAJ,CAAS,CAACu7C,aAAD,CAAT,EAA0B;AAAEhlK,IAAAA,IAAI,EAAE;AAAR,GAA1B,CAApB,CAAlB;AACA,QAAMslK,MAAM,GAAG,IAAIC,MAAJ,CAAWJ,SAAX,CAAf;AAEA,SAAO,IAAI98C,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEvC+8C,IAAAA,MAAM,CAAC7mK,gBAAP,CAAwB,OAAxB,EAAkCH,KAAD,IAAWiqH,MAAM,CAACjqH,KAAK,CAACypB,KAAP,CAAlD;AACAu9I,IAAAA,MAAM,CAAC7mK,gBAAP,CAAwB,SAAxB,EAAoCH,KAAD,IAAW;AAE7C,YAAMknK,eAAe,GAAGV,YAAY,CAACppD,IAAb,CAAkBp9G,KAAK,CAAC0mC,IAAN,CAAWwgI,eAA7B,CAAxB;AACA,YAAMC,aAAa,GAAGX,YAAY,CAACppD,IAAb,CAAkBp9G,KAAK,CAAC0mC,IAAN,CAAWygI,aAA7B,CAAtB;AAEA,YAAMp6C,IAAI,GAAG,CACZm6C,eAAe,CAACT,QAAhB,GAA2B93I,SAA3B,EADY,EAEZw4I,aAAa,CAACV,QAAd,GAAyB93I,SAAzB,EAFY,CAAb;;AAKA,UAAG,CAACi4I,YAAD,IAAiB1nK,MAAM,CAAC8L,YAAP,KAAwB1S,SAA5C,EAAuD;AAEtD0S,QAAAA,YAAY,CAACoC,OAAb,CAAqB,aAArB,EAAoC2/G,IAAI,CAAC,CAAD,CAAxC;AACA/hH,QAAAA,YAAY,CAACoC,OAAb,CAAqB,WAArB,EAAkC2/G,IAAI,CAAC,CAAD,CAAtC;AAEA;;AAED+5C,MAAAA,GAAG,CAACM,eAAJ,CAAoBP,SAApB;AACA78C,MAAAA,OAAO,CAAC+C,IAAD,CAAP;AAEA,KApBD;AAsBAi6C,IAAAA,MAAM,CAACK,WAAP,CAAmB,IAAnB;AAEA,GA3BM,CAAP;AA6BA;AAED;;;;;;;;;;;AAUA,MAAMC,eAAN,SAA8B79C,aAA9B,CAAqC;AAEpC;;;;;AAMAhxH,EAAAA,WAAW,CAACixH,OAAD,EAAU;AAEpB,UAAMA,OAAN;AAEA;;;;;;AAMA,SAAKk9C,YAAL,GAAoB,KAApB;AAEA;AAED;;;;;;;;;AAQA96J,EAAAA,IAAI,CAACs8G,MAAM,GAAG,MAAM,CAAE,CAAlB,EAAoBE,OAAO,GAAG,MAAM,CAAE,CAAtC,EAAwC;AAE3C;AACA,QAAGzxH,SAAS,CAACX,MAAV,KAAqB,CAAxB,EAA2B;AAE1BkyH,MAAAA,MAAM,GAAGvxH,SAAS,CAAC,CAAD,CAAlB;AACAyxH,MAAAA,OAAO,GAAGzxH,SAAS,CAAC,CAAD,CAAnB;AAEA,KALD,MAKO,IAAGA,SAAS,CAACX,MAAV,KAAqB,CAArB,IAA0B,OAAOW,SAAS,CAAC,CAAD,CAAhB,KAAwB,UAArD,EAAiE;AAEvEuxH,MAAAA,MAAM,GAAGvxH,SAAS,CAAC,CAAD,CAAlB;;AACAyxH,MAAAA,OAAO,GAAG,MAAM,CAAE,CAAlB;AAEA;;AAED,UAAMi/C,eAAe,GAAG,KAAK79C,OAA7B;AACA,UAAM89C,eAAe,GAAG,IAAIr/C,qBAAJ,EAAxB;AAEAo/C,IAAAA,eAAe,CAAC1+C,SAAhB,CAA0B,aAA1B;AACA0+C,IAAAA,eAAe,CAAC1+C,SAAhB,CAA0B,WAA1B;AACA2+C,IAAAA,eAAe,CAAC3+C,SAAhB,CAA0B,aAA1B;AACA2+C,IAAAA,eAAe,CAAC3+C,SAAhB,CAA0B,WAA1B;AAEA,WAAO,IAAIkB,OAAJ,CAAY,CAACC,OAAD,EAAUC,MAAV,KAAqB;AAEvC,YAAMw9C,UAAU,GAAI,CAAC,KAAKb,YAAN,IAAsB1nK,MAAM,CAAC8L,YAAP,KAAwB1S,SAA/C,GAA4D,CAC9E0S,YAAY,CAACqB,OAAb,CAAqB,aAArB,CAD8E,EAE9ErB,YAAY,CAACqB,OAAb,CAAqB,WAArB,CAF8E,CAA5D,GAGf,CAAC,IAAD,EAAO,IAAP,CAHJ;AAKA,YAAMq7J,OAAO,GAAID,UAAU,CAAC,CAAD,CAAV,KAAkB,IAAlB,IAA0BA,UAAU,CAAC,CAAD,CAAV,KAAkB,IAA7C,GACf19C,OAAO,CAACC,OAAR,CAAgBy9C,UAAhB,CADe,GACed,QAAQ,CAAC,KAAKC,YAAN,CADvC;AAGAc,MAAAA,OAAO,CAACxyE,IAAR,CAAc63B,IAAD,IAAU;AAEtB,cAAM3zH,MAAM,GAAG,CAAC,IAAIuuK,KAAJ,EAAD,EAAc,IAAIA,KAAJ,EAAd,CAAf;;AAEAH,QAAAA,eAAe,CAACp/C,MAAhB,GAAyB,MAAM;AAE9BA,UAAAA,MAAM,CAAChvH,MAAD,CAAN;AACA4wH,UAAAA,OAAO,CAAC5wH,MAAD,CAAP;AAEA,SALD;;AAOAA,QAAAA,MAAM,CAAC,CAAD,CAAN,CAAU+G,gBAAV,CAA2B,MAA3B,EAAmC,MAAM;AAExConK,UAAAA,eAAe,CAACz+C,OAAhB,CAAwB,aAAxB;AACA0+C,UAAAA,eAAe,CAAC1+C,OAAhB,CAAwB,aAAxB;AAEA,SALD;AAOA1vH,QAAAA,MAAM,CAAC,CAAD,CAAN,CAAU+G,gBAAV,CAA2B,MAA3B,EAAmC,MAAM;AAExConK,UAAAA,eAAe,CAACz+C,OAAhB,CAAwB,WAAxB;AACA0+C,UAAAA,eAAe,CAAC1+C,OAAhB,CAAwB,WAAxB;AAEA,SALD;AAOA1vH,QAAAA,MAAM,CAAC,CAAD,CAAN,CAAU80B,GAAV,GAAgB6+F,IAAI,CAAC,CAAD,CAApB;AACA3zH,QAAAA,MAAM,CAAC,CAAD,CAAN,CAAU80B,GAAV,GAAgB6+F,IAAI,CAAC,CAAD,CAApB;AAEA,OA5BD,EA4BGyN,KA5BH,CA4BU/wG,KAAD,IAAW;AAEnB89I,QAAAA,eAAe,CAACx+C,SAAhB,CAA0B,aAA1B;AACAw+C,QAAAA,eAAe,CAACx+C,SAAhB,CAA0B,WAA1B;AAEAT,QAAAA,OAAO,CAAC7+F,KAAD,CAAP;AACAwgG,QAAAA,MAAM,CAACxgG,KAAD,CAAN;AAEA,OApCD;AAsCA,KAhDM,CAAP;AAkDA;;AAvGmC;AA2GrC;;;;;;;;;AAMA,MAAMvD,OAAN,CAAc;AAEb;;;;;;AAOAztB,EAAAA,WAAW,CAACmG,CAAC,GAAG,CAAL,EAAQE,CAAC,GAAG,CAAZ,EAAe;AAEzB;;;;;AAMA,SAAKF,CAAL,GAASA,CAAT;AAEA;;;;;;AAMA,SAAKE,CAAL,GAASA,CAAT;AAEA;AAED;;;;;;;;;AAQAinB,EAAAA,GAAG,CAACnnB,CAAD,EAAIE,CAAJ,EAAO;AAET,SAAKF,CAAL,GAASA,CAAT;AACA,SAAKE,CAAL,GAASA,CAAT;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;AAOAkqB,EAAAA,MAAM,CAACjzB,CAAD,EAAI;AAET,WAAQ,SAASA,CAAT,IAAe,KAAK6I,CAAL,KAAW7I,CAAC,CAAC6I,CAAb,IAAkB,KAAKE,CAAL,KAAW/I,CAAC,CAAC+I,CAAtD;AAEA;;AAzDY;AA6Dd;;;;;;;AAMA,MAAMg7I,IAAN,CAAW;AAEV;;;AAIArhJ,EAAAA,WAAW,GAAG;AAEb,SAAK4B,GAAL,GAAW,IAAI6rB,OAAJ,EAAX;AACA,SAAK5rB,GAAL,GAAW,IAAI4rB,OAAJ,EAAX;AAEA;;AAXS;AAeX;;;;;;;;AAOA,MAAMknB,EAAE,GAAG,IAAI0sG,IAAJ,EAAX;AAEA;;;;;;;AAOA,MAAM/1H,EAAE,GAAG,IAAI+1H,IAAJ,EAAX;AAEA;;;;;;;AAOA,MAAM8tB,eAAe,GAAG,EAAxB;AAEA;;;;;;;AAOA,MAAMC,aAAa,GAAG,EAAtB;AAEA;;;;;;;;AAQA,MAAMC,gBAAgB,GAAG,EAAzB;AAEA;;;;;;;AAOA,MAAMC,mBAAmB,GAAG,EAA5B;AAEA;;;;;;;AAOA,MAAMC,4BAA4B,GAAG,IAAIjqH,YAAJ,CAAiB,CACrD,GADqD,EAChD,CAAC,IAD+C,EACzC,IADyC,EACnC,CAAC,KADkC,EAC3B,KAD2B,EACpB,CAAC,KADmB,EACZ,KADY,CAAjB,CAArC;AAIA;;;;;;;AAOA,MAAMkqH,0BAA0B,GAAG,CAElC,IAAIlqH,YAAJ,CAAiB,CAAC,GAAD,EAAM,GAAN,CAAjB,CAFkC,EAGlC,IAAIA,YAAJ,CAAiB,CAAC,IAAD,EAAO,CAAC,IAAR,CAAjB,CAHkC,EAIlC,IAAIA,YAAJ,CAAiB,CAAC,CAAC,IAAF,EAAQ,IAAR,CAAjB,CAJkC,EAKlC,IAAIA,YAAJ,CAAiB,CAAC,KAAD,EAAQ,CAAC,KAAT,CAAjB,CALkC,EAMlC,IAAIA,YAAJ,CAAiB,CAAC,CAAC,KAAF,EAAS,KAAT,CAAjB,CANkC,CAAnC;AAUA;;;;;;;;;AASA,MAAMmqH,eAAe,GAAG,CAEvB,IAAI/qH,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAFuB,EAGvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAHuB,EAIvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAJuB,EAKvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CALuB,EAOvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAPuB,EAQvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CARuB,EASvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CATuB,EAUvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAVuB,EAYvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAZuB,EAavB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAbuB,EAcvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAduB,EAevB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAfuB,EAiBvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAjBuB,EAkBvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAlBuB,EAmBvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAnBuB,EAoBvB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CApBuB,CAAxB;AAwBA;;;;;;;;;AASA,MAAMgrH,aAAa,GAAG,CAErB,IAAIhrH,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAFqB,EAGrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAHqB,EAIrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAJqB,EAKrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CALqB,EAOrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAPqB,EAQrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CARqB,EASrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CATqB,EAUrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAVqB,EAYrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAZqB,EAarB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAbqB,EAcrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAdqB,EAerB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAfqB,EAiBrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAjBqB,EAkBrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAlBqB,EAmBrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CAnBqB,EAoBrB,IAAIA,UAAJ,CAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,CApBqB,CAAtB;AAwBA;;;;;;;;;;AAUA,SAASl5B,IAAT,CAActuB,CAAd,EAAiBD,CAAjB,EAAoBuE,CAApB,EAAuB;AAEtB,SAAOtE,CAAC,GAAG,CAACD,CAAC,GAAGC,CAAL,IAAUsE,CAArB;AAEA;AAED;;;;;;;;;AAQA,SAASmuK,QAAT,CAAkBzyK,CAAlB,EAAqB;AAEpB,SAAOJ,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAAS3E,CAAT,EAAY,GAAZ,CAAT,EAA2B,GAA3B,CAAP;AAEA;AAED;;;;;;;;;;AASA,SAAS0yK,UAAT,CAAoBj8I,CAApB,EAAuB12B,CAAvB,EAA0B;AAEzB,QAAMmuB,EAAE,GAAGnuB,CAAC,CAAC2E,GAAb;AACA,QAAMypB,EAAE,GAAGpuB,CAAC,CAAC4E,GAAb;AAEA,QAAMguK,GAAG,GAAG/yK,IAAI,CAAC0yB,IAAL,CAAUpE,EAAE,CAACjlB,CAAH,GAAO,GAAjB,IAAwB,GAApC;AACA,QAAM2pK,GAAG,GAAGhzK,IAAI,CAAC0yB,IAAL,CAAUpE,EAAE,CAAC/kB,CAAH,GAAO,GAAjB,IAAwB,GAApC;AACA,QAAM0pK,GAAG,GAAGjzK,IAAI,CAAC0yB,IAAL,CAAUnE,EAAE,CAACllB,CAAH,GAAO,GAAjB,IAAwB,GAApC;AACA,QAAM6pK,GAAG,GAAGlzK,IAAI,CAAC0yB,IAAL,CAAUnE,EAAE,CAAChlB,CAAH,GAAO,GAAjB,IAAwB,GAApC;AAEA,QAAM7E,CAAC,GAAGmuK,QAAQ,CAACh8I,CAAC,GAAG27I,mBAAL,CAAlB;AAEAlkJ,EAAAA,EAAE,CAACkC,GAAH,CAAO9B,IAAI,CAACqkJ,GAAD,EAAMzkJ,EAAE,CAACjlB,CAAT,EAAY3E,CAAZ,CAAX,EAA2BgqB,IAAI,CAACskJ,GAAD,EAAM1kJ,EAAE,CAAC/kB,CAAT,EAAY7E,CAAZ,CAA/B;AACA6pB,EAAAA,EAAE,CAACiC,GAAH,CAAO9B,IAAI,CAACukJ,GAAD,EAAM1kJ,EAAE,CAACllB,CAAT,EAAY3E,CAAZ,CAAX,EAA2BgqB,IAAI,CAACwkJ,GAAD,EAAM3kJ,EAAE,CAAChlB,CAAT,EAAY7E,CAAZ,CAA/B;AAEA,SAAOvE,CAAP;AAEA;AAED;;;;;;;;;;;;AAWA,SAASgzK,uBAAT,CAAiCp9H,EAAjC,EAAqCC,EAArC,EAAyC3sC,CAAzC,EAA4CxF,MAA5C,EAAoD;AAEnD,QAAMuvK,EAAE,GAAGp9H,EAAE,CAAC3sC,CAAH,GAAO0sC,EAAE,CAAC1sC,CAArB;AACA,QAAMgqK,EAAE,GAAGr9H,EAAE,CAACzsC,CAAH,GAAOwsC,EAAE,CAACxsC,CAArB;AAEA,QAAM81B,EAAE,GAAGh2B,CAAX;AACA,QAAMggC,EAAE,GAAGhgC,CAAC,GAAG,GAAf;AAEA,QAAMi2B,EAAE,GAAGyW,EAAE,CAACxsC,CAAH,GAAO8pK,EAAE,IAAIh0I,EAAE,GAAG0W,EAAE,CAAC1sC,CAAZ,CAAF,GAAmB+pK,EAArC;AACA,QAAM9pI,EAAE,GAAGyM,EAAE,CAACxsC,CAAH,GAAO8pK,EAAE,IAAIhqI,EAAE,GAAG0M,EAAE,CAAC1sC,CAAZ,CAAF,GAAmB+pK,EAArC;AAEA,MAAIhzK,CAAJ,EAAOkuB,EAAP,EAAWC,EAAX,EAAe3pB,CAAf,CAXmD,CAanD;;AACA,MAAIy6B,EAAE,IAAI0W,EAAE,CAAC1sC,CAAT,IAAcg2B,EAAE,GAAG2W,EAAE,CAAC3sC,CAAvB,IAA8BggC,EAAE,GAAG0M,EAAE,CAAC1sC,CAAR,IAAaggC,EAAE,IAAI2M,EAAE,CAAC3sC,CAAvD,EAA2D;AAE1D;AACA,QAAGrJ,IAAI,CAAC2f,IAAL,CAAU2f,EAAV,MAAkBt/B,IAAI,CAAC2f,IAAL,CAAU2pB,EAAV,CAAlB,IAAmCtpC,IAAI,CAACwO,GAAL,CAAS8wB,EAAT,IAAe,IAAlD,IAA0Dt/B,IAAI,CAACwO,GAAL,CAAS86B,EAAT,IAAe,IAA5E,EAAkF;AAEjFlpC,MAAAA,CAAC,GAAG,CAACk/B,EAAE,GAAGgK,EAAN,IAAY,GAAhB;;AAEA,UAAGlpC,CAAC,GAAG,GAAP,EAAY;AAEXyD,QAAAA,MAAM,CAAC2sB,GAAP,CAAWxwB,IAAI,CAACwO,GAAL,CAASpO,CAAT,CAAX,EAAwB,GAAxB;AAEA,OAJD,MAIO;AAENyD,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,GAAX,EAAgBxwB,IAAI,CAACwO,GAAL,CAASpO,CAAT,CAAhB;AAEA;AAED,KAdD,MAcO;AAEN;AACAwE,MAAAA,CAAC,GAAG,CAACmxC,EAAE,CAACxsC,CAAJ,GAAQ6pK,EAAR,GAAaC,EAAb,GAAkBt9H,EAAE,CAAC1sC,CAAzB;AAEAilB,MAAAA,EAAE,GAAI1pB,CAAC,GAAGmxC,EAAE,CAAC1sC,CAAR,GAAai2B,EAAE,IAAI16B,CAAC,GAAG5E,IAAI,CAACszK,KAAL,CAAW1uK,CAAX,CAAR,CAAF,GAA2B,GAAxC,GAA8C,GAAnD;AACA2pB,MAAAA,EAAE,GAAI3pB,CAAC,GAAGoxC,EAAE,CAAC3sC,CAAR,GAAaigC,EAAE,IAAI,OAAO1kC,CAAC,GAAG5E,IAAI,CAACszK,KAAL,CAAW1uK,CAAX,CAAX,CAAJ,CAAF,GAAmC,GAAhD,GAAsD,GAA3D;AAEAxE,MAAAA,CAAC,GAAIJ,IAAI,CAACwO,GAAL,CAAS8f,EAAT,IAAetuB,IAAI,CAACwO,GAAL,CAAS+f,EAAT,CAAhB,GAAgCD,EAAhC,GAAqC,CAACC,EAA1C;;AAEA,UAAGnuB,CAAC,GAAG,GAAP,EAAY;AAEXyD,QAAAA,MAAM,CAAC2sB,GAAP,CAAWxwB,IAAI,CAACwO,GAAL,CAAS8f,EAAT,CAAX,EAAyBtuB,IAAI,CAACwO,GAAL,CAAS+f,EAAT,CAAzB;AAEA,OAJD,MAIO;AAEN1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAWxwB,IAAI,CAACwO,GAAL,CAAS+f,EAAT,CAAX,EAAyBvuB,IAAI,CAACwO,GAAL,CAAS8f,EAAT,CAAzB;AAEA;AAED;AAED,GAvCD,MAuCO;AAENzqB,IAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;;AAED,SAAO3sB,MAAP;AAEA;AAED;;;;;;;;;;;;;;AAaA,SAAS0vK,iCAAT,CAA2C/hD,OAA3C,EAAoD/oH,IAApD,EAA0DC,KAA1D,EAAiEoD,MAAjE,EAAyEjI,MAAzE,EAAiF;AAEhF,QAAMkyC,EAAE,GAAG8B,EAAE,CAAC/yC,GAAd;AACA,QAAMkxC,EAAE,GAAG6B,EAAE,CAAC9yC,GAAd;AACA,QAAMupB,EAAE,GAAGE,EAAE,CAAC1pB,GAAd;AACA,QAAMypB,EAAE,GAAGC,EAAE,CAACzpB,GAAd;AACA,QAAM3E,CAAC,GAAGouB,EAAV;AAEA;;;;;;;AAOA,QAAM1e,EAAE,GAAG,MAAMhE,MAAjB;AACA,QAAMiE,EAAE,GAAG,MAAMjE,MAAN,GAAe,GAA1B;AACA,QAAM+qB,CAAC,GAAGpuB,IAAI,GAAGC,KAAP,GAAe,CAAzB;;AAEA,UAAO8oH,OAAP;AAEC,SAAK,CAAL;AAAQ;AAEP;AAEA3tH,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;AAQA,YAAG/nB,IAAI,IAAIC,KAAX,EAAkB;AAEjByqK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAlB,EAAwCpuB,IAAxC,EAA8C5E,MAA9C,CAAvB;AAEA,SAJD,MAIO;AAENA,UAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;;AAED;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;AAIA,YAAG/nB,IAAI,IAAIC,KAAX,EAAkB;AAEjByqK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAD,EAAuBmf,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAvB,EAAsCtH,IAAtC,EAA4C5E,MAA5C,CAAvB;AAEA,SAJD,MAIO;AAENA,UAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;;AAED;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;AAIA2iJ,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAlB,EAAwCpuB,IAAxC,EAA8C6lB,EAA9C,CAAvB;AACA6kJ,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAD,EAAuBmf,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAvB,EAAsCtH,IAAtC,EAA4C8lB,EAA5C,CAAvB;AAEAukJ,QAAAA,UAAU,CAACj8I,CAAD,EAAIz2B,CAAJ,CAAV;AAEAyD,QAAAA,MAAM,CAAC2sB,GAAP,CAAWlC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAArB,EAAwBilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAlC;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;AAIA,YAAGd,IAAI,IAAIC,KAAX,EAAkB;AAEjByqK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAlB,EAAwCpuB,IAAxC,EAA8C5E,MAA9C,CAAvB;AAEA,SAJD,MAIO;AAENA,UAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;;AAED;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;AAKA3sB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;;;;AAWA,YAAGxwB,IAAI,CAACwO,GAAL,CAAS1C,MAAT,IAAmB,GAAtB,EAA2B;AAE1BqnK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAlB,EAAiCtH,IAAjC,EAAuC6lB,EAAvC,CAAvB;AACA6kJ,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAlB,EAAwCpuB,IAAxC,EAA8C8lB,EAA9C,CAAvB;AACA4kJ,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAD,EAAuBmf,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAvB,EAAsCtH,IAAtC,EAA4C5E,MAA5C,CAAvB;AACA0qB,UAAAA,EAAE,CAACiC,GAAH,CAAOjC,EAAE,CAACllB,CAAH,GAAOxF,MAAM,CAACwF,CAArB,EAAwBklB,EAAE,CAAChlB,CAAH,GAAO1F,MAAM,CAAC0F,CAAtC;AAEA1F,UAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA,SATD,MASO;AAEN4pK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAlB,EAAiCtH,IAAjC,EAAuC5E,MAAvC,CAAvB;AAEA;;AAED;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;AAKAsvK,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAlB,EAAiCtH,IAAjC,EAAuC5E,MAAvC,CAAvB;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;AAIA,YAAG4E,IAAI,IAAIC,KAAX,EAAkB;AAEjByqK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAD,EAAuBmf,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAvB,EAAsCrH,IAAtC,EAA4C5E,MAA5C,CAAvB;AAEA,SAJD,MAIO;AAENA,UAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;;AAED;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;AAKA,YAAGxwB,IAAI,CAACwO,GAAL,CAAS1C,MAAT,IAAmB,GAAtB,EAA2B;AAE1BqnK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAlB,EAAiCrH,IAAjC,EAAuC6lB,EAAvC,CAAvB;AACA6kJ,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAlB,EAAwCpuB,IAAxC,EAA8C8lB,EAA9C,CAAvB;AACA4kJ,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAD,EAAuBmf,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAvB,EAAsCrH,IAAtC,EAA4C5E,MAA5C,CAAvB;AACA0qB,UAAAA,EAAE,CAACiC,GAAH,CAAOjC,EAAE,CAACllB,CAAH,GAAOxF,MAAM,CAACwF,CAArB,EAAwBklB,EAAE,CAAChlB,CAAH,GAAO1F,MAAM,CAAC0F,CAAtC;AAEA1F,UAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA,SATD,MASO;AAEN4pK,UAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAlB,EAAiCrH,IAAjC,EAAuC5E,MAAvC,CAAvB;AAEA;;AAED;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;AAKAA,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;AAKA2iJ,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAlB,EAAiCrH,IAAjC,EAAuC5E,MAAvC,CAAvB;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;AAIAsvK,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAlB,EAAwCpuB,IAAxC,EAA8C6lB,EAA9C,CAAvB;AACA6kJ,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAOqG,CAAC,GAAG,GAAX,EAAgB,GAAhB,CAAD,EAAuBmf,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAvB,EAAsCrH,IAAtC,EAA4C8lB,EAA5C,CAAvB;AAEAukJ,QAAAA,UAAU,CAACj8I,CAAD,EAAIz2B,CAAJ,CAAV;AAEAyD,QAAAA,MAAM,CAAC2sB,GAAP,CAAWlC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAArB,EAAwBilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAlC;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;AAKA4pK,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAYzgB,EAAZ,CAAD,EAAkBimC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU/mB,EAAV,CAAlB,EAAiCrH,IAAjC,EAAuC5E,MAAvC,CAAvB;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;AAKAsvK,QAAAA,uBAAuB,CAACp9H,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY1gB,EAAZ,CAAD,EAAkBkmC,EAAE,CAACxlB,GAAH,CAAOqG,CAAP,EAAU9mB,EAAV,CAAlB,EAAiCtH,IAAjC,EAAuC5E,MAAvC,CAAvB;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;AAKAA,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAX,EAAc,CAAd;AAEA;AAEA;AArRF;;AAyRA,SAAO3sB,MAAP;AAEA;AAED;;;;;;;;;;;;AAWA,SAAS2vK,YAAT,CAAsBz9H,EAAtB,EAA0BC,EAA1B,EAA8B3sC,CAA9B,EAAiCE,CAAjC,EAAoC;AAEnC,MAAI1F,MAAM,GAAGkyC,EAAE,CAACtiB,MAAH,CAAUuiB,EAAV,CAAb;;AAEA,MAAG,CAACnyC,MAAJ,EAAY;AAEX,QAAI4vK,EAAE,GAAG,CAAC19H,EAAE,CAAC1sC,CAAH,GAAO2sC,EAAE,CAAC3sC,CAAX,IAAgB,GAAzB;AACA,QAAIqqK,EAAE,GAAG,CAAC39H,EAAE,CAACxsC,CAAH,GAAOysC,EAAE,CAACzsC,CAAX,IAAgB,GAAzB;AAEA,QAAInJ,CAAC,GAAG41C,EAAE,CAACzsC,CAAH,GAAOwsC,EAAE,CAACxsC,CAAlB;AACA,QAAIpJ,CAAC,GAAG41C,EAAE,CAAC1sC,CAAH,GAAO2sC,EAAE,CAAC3sC,CAAlB;AAEA,QAAIxE,CAAC,GAAGzE,CAAC,IAAIiJ,CAAC,GAAGoqK,EAAR,CAAD,GAAetzK,CAAC,IAAIoJ,CAAC,GAAGmqK,EAAR,CAAxB;AAEA7vK,IAAAA,MAAM,GAAIgB,CAAC,GAAG,GAAd;AAEA;;AAED,SAAOhB,MAAP;AAEA;AAED;;;;;;;;;;;;;AAYA,SAAS8vK,6BAAT,CAAuC59H,EAAvC,EAA2CC,EAA3C,EAA+C49H,EAA/C,EAAmDC,EAAnD,EAAuD;AAEtD,MAAIzzK,CAAJ;AACA,MAAIiJ,CAAJ,EAAOE,CAAP;AACA,MAAIywD,OAAJ,EAAaC,OAAb;;AAEA,OAAI75D,CAAC,GAAG,CAAJ,EAAOmJ,CAAC,GAAG,CAAf,EAAkBA,CAAC,GAAGgpK,gBAAtB,EAAwC,EAAEhpK,CAA1C,EAA6C;AAE5C,SAAIF,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGkpK,gBAAf,EAAiC,EAAElpK,CAAnC,EAAsC;AAErC2wD,MAAAA,OAAO,GAAG3wD,CAAC,IAAIkpK,gBAAgB,GAAG,GAAvB,CAAX;AACAt4G,MAAAA,OAAO,GAAG1wD,CAAC,IAAIgpK,gBAAgB,GAAG,GAAvB,CAAX;;AAEA,UAAGiB,YAAY,CAACz9H,EAAD,EAAKC,EAAL,EAAS49H,EAAE,GAAG55G,OAAd,EAAuB65G,EAAE,GAAG55G,OAA5B,CAAf,EAAqD;AAEpD,UAAE75D,CAAF;AAEA;AAED;AAED;;AAED,SAAOA,CAAC,IAAImyK,gBAAgB,GAAGA,gBAAvB,CAAR;AAEA;AAED;;;;;;;;;;;;;;;AAcA,SAASuB,qBAAT,CAA+BtiD,OAA/B,EAAwCz7E,EAAxC,EAA4CC,EAA5C,EAAgDvtC,IAAhD,EAAsDqD,MAAtD,EAA8DjI,MAA9D,EAAsE;AAErE,QAAM0D,CAAC,GAAGqrK,aAAa,CAACphD,OAAD,CAAvB;AACA,QAAMuiD,EAAE,GAAGxsK,CAAC,CAAC,CAAD,CAAZ;AACA,QAAMysK,EAAE,GAAGzsK,CAAC,CAAC,CAAD,CAAZ;;AAEA,MAAGwsK,EAAE,GAAG,CAAR,EAAW;AAEVh+H,IAAAA,EAAE,CAAC1sC,CAAH,IAAQyC,MAAM,CAAC,CAAD,CAAd;AACAiqC,IAAAA,EAAE,CAACxsC,CAAH,IAAQuC,MAAM,CAAC,CAAD,CAAd;AAEA;;AAED,MAAGkoK,EAAE,GAAG,CAAR,EAAW;AAEVh+H,IAAAA,EAAE,CAAC3sC,CAAH,IAAQyC,MAAM,CAAC,CAAD,CAAd;AACAkqC,IAAAA,EAAE,CAACzsC,CAAH,IAAQuC,MAAM,CAAC,CAAD,CAAd;AAEA;;AAED,SAAOjI,MAAM,CAAC2sB,GAAP,CACN,MAAMmjJ,6BAA6B,CAAC59H,EAAD,EAAKC,EAAL,EAAS,MAAMvtC,IAAf,EAAqB,MAAMA,IAA3B,CAD7B,EAENkrK,6BAA6B,CAAC59H,EAAD,EAAKC,EAAL,EAAS,MAAMvtC,IAAf,EAAqB,MAAMA,IAA3B,CAFvB,CAAP;AAKA;AAED;;;;;;;;;;;;;;AAaA,SAASwrK,+BAAT,CAAyCziD,OAAzC,EAAkD/oH,IAAlD,EAAwDC,KAAxD,EAA+DoD,MAA/D,EAAuEjI,MAAvE,EAA+E;AAE9E,QAAMkyC,EAAE,GAAG8B,EAAE,CAAC/yC,GAAd;AACA,QAAMkxC,EAAE,GAAG6B,EAAE,CAAC9yC,GAAd;AACA,QAAMupB,EAAE,GAAGE,EAAE,CAAC1pB,GAAd;AACA,QAAMypB,EAAE,GAAGC,EAAE,CAACzpB,GAAd;AAEA,QAAM8xB,CAAC,GAAGpuB,IAAI,GAAGC,KAAP,GAAe,CAAzB;AAEA;;;;;;;;AAQA,UAAO8oH,OAAP;AAEC,SAAK,CAAL;AAAQ;AAEP;;;;;;AAOA;AACAsiD,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB,CAVO,CAYP;;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB,CAbO,CAeP;;AACA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;AAQAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;AAOAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;;AASAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEjI,MAApE,CAArB;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;AAMAiwK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;AAQAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;AAMAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEjI,MAApE,CAArB;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;AAQAiwK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;AAQAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,CAAL;AAAQ;AAEP;;;;;;;;AASAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEjI,MAApE,CAArB;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;;;;AAQAiwK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;;;;;AASAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;;;AAOAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEjI,MAApE,CAArB;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;;;;;AASAiwK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;;;AAOAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;;AAED,SAAK,EAAL;AAAS;AAER;;;;;;;;AASAuqK,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEwiB,EAApE,CAArB;AACAwlJ,QAAAA,qBAAqB,CAACtiD,OAAD,EAAUz7E,EAAE,CAACvlB,GAAH,CAAO,GAAP,EAAY,GAAZ,CAAV,EAA4BwlB,EAAE,CAACxlB,GAAH,CAAO,MAAMqG,CAAb,EAAgB,MAAMA,CAAtB,CAA5B,EAAsDpuB,IAAtD,EAA4DqD,MAA5D,EAAoEyiB,EAApE,CAArB;AAEA1qB,QAAAA,MAAM,CAAC2sB,GAAP,CAAW,CAAClC,EAAE,CAACjlB,CAAH,GAAOklB,EAAE,CAACllB,CAAX,IAAgB,GAA3B,EAAgC,CAACilB,EAAE,CAAC/kB,CAAH,GAAOglB,EAAE,CAAChlB,CAAX,IAAgB,GAAhD;AAEA;AAEA;AArSF;;AAySA,SAAO1F,MAAP;AAEA;AAED;;;;;;;;;;AASA,SAASqwK,gBAAT,CAA0BC,QAA1B,EAAoCroK,MAApC,EAA4CsoK,UAA5C,EAAwD;AAEvD,QAAMvwK,MAAM,GAAG,IAAI8sB,OAAJ,EAAf;AAEA,MAAI3uB,CAAJ,EAAOI,CAAP;AACA,MAAIiH,CAAJ,EAAOE,CAAP;AACA,MAAI1E,CAAJ;AAEA,MAAI2sH,OAAJ;AACA,MAAIrgF,IAAJ,EAAUyC,IAAV;;AAEA,OAAI5xC,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAG+xK,QAAQ,CAACxzK,MAAxB,EAAgCqB,CAAC,GAAGI,CAApC,EAAuC,EAAEJ,CAAzC,EAA4C;AAE3CwvH,IAAAA,OAAO,GAAG2iD,QAAQ,CAACnyK,CAAD,CAAlB;AAEAmvC,IAAAA,IAAI,GAAGqgF,OAAO,CAACrgF,IAAf;AACAyC,IAAAA,IAAI,GAAG49E,OAAO,CAAC7lH,KAAf;;AAEA,SAAIpC,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGqqC,IAAf,EAAqB,EAAErqC,CAAvB,EAA0B;AAEzB,WAAIF,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGuqC,IAAf,EAAqB,EAAEvqC,CAAvB,EAA0B;AAEzB,YAAG+qK,UAAH,EAAe;AAEdb,UAAAA,iCAAiC,CAACvxK,CAAD,EAAIqH,CAAJ,EAAOE,CAAP,EAAUuC,MAAV,EAAkBjI,MAAlB,CAAjC;AAEA,SAJD,MAIO;AAENowK,UAAAA,+BAA+B,CAACjyK,CAAD,EAAIqH,CAAJ,EAAOE,CAAP,EAAUuC,MAAV,EAAkBjI,MAAlB,CAA/B;AAEA;;AAEDgB,QAAAA,CAAC,GAAG,CAAC0E,CAAC,GAAGqqC,IAAJ,GAAWvqC,CAAZ,IAAiB,CAArB;AAEA8nC,QAAAA,IAAI,CAACtsC,CAAD,CAAJ,GAAUhB,MAAM,CAACwF,CAAP,GAAW,GAArB;AACA8nC,QAAAA,IAAI,CAACtsC,CAAC,GAAG,CAAL,CAAJ,GAAchB,MAAM,CAAC0F,CAAP,GAAW,GAAzB;AAEA;AAED;AAED;AAED;AAED;;;;;;;;;;;;;AAYA,SAAS8qK,QAAT,CAAkBjvD,IAAlB,EAAwB+uD,QAAxB,EAAkCrgE,KAAlC,EAAyClgE,IAAzC,EAA+CwgI,UAA/C,EAA2DjzK,MAA3D,EAAmE;AAElE,QAAMuD,CAAC,GAAG,IAAIisB,OAAJ,EAAV;AAEA,QAAM2jJ,OAAO,GAAGnzK,MAAM,CAACgwC,IAAvB;AACA,QAAMojI,QAAQ,GAAGpzK,MAAM,CAACwK,KAAxB;AAEA,MAAI3J,CAAJ,EAAOI,CAAP;AACA,MAAIiH,CAAJ,EAAOE,CAAP;AACA,MAAI1E,CAAJ,EAAOgyB,CAAP;AAEA,MAAIg9E,IAAJ;AACA,MAAI2d,OAAJ;AACA,MAAIgjD,OAAJ,EAAaC,QAAb;;AAEA,OAAIzyK,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAG+xK,QAAQ,CAACxzK,MAAxB,EAAgCqB,CAAC,GAAGI,CAApC,EAAuC,EAAEJ,CAAzC,EAA4C;AAE3C6xG,IAAAA,IAAI,GAAGC,KAAK,CAAC9xG,CAAD,CAAZ;AACAwvH,IAAAA,OAAO,GAAG2iD,QAAQ,CAACnyK,CAAD,CAAlB;AAEAwyK,IAAAA,OAAO,GAAGhjD,OAAO,CAACrgF,IAAlB;AACAsjI,IAAAA,QAAQ,GAAGjjD,OAAO,CAAC7lH,KAAnB;;AAEA,SAAIpC,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGqqC,IAAf,EAAqB,EAAErqC,CAAvB,EAA0B;AAEzB,WAAIF,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGuqC,IAAf,EAAqB,EAAEvqC,CAAvB,EAA0B;AAEzB3E,QAAAA,CAAC,CAAC8rB,GAAF,CACCqjF,IAAI,CAAC,CAAD,CAAJ,GAAUjgE,IAAV,GAAiBwxE,IAAI,CAAC/7G,CAAtB,GAA0BA,CAD3B,EAECwqG,IAAI,CAAC,CAAD,CAAJ,GAAUjgE,IAAV,GAAiBwxE,IAAI,CAAC77G,CAAtB,GAA0BA,CAF3B;AAKA1E,QAAAA,CAAC,GAAG,CAACH,CAAC,CAAC6E,CAAF,GAAMgrK,QAAN,GAAiB7vK,CAAC,CAAC2E,CAApB,IAAyB,CAA7B;AAEA;;;AAEAwtB,QAAAA,CAAC,GAAGu9I,UAAU,GAAI,CAAC7qK,CAAC,GAAGA,CAAJ,GAAQkrK,QAAR,GAAmBprK,CAAC,GAAGA,CAAxB,IAA6B,CAAjC,GACZ,CAACE,CAAC,GAAGkrK,QAAJ,GAAeprK,CAAhB,IAAqB,CADvB;AAGAirK,QAAAA,OAAO,CAACzvK,CAAD,CAAP,GAAa2vK,OAAO,CAAC39I,CAAD,CAApB;AACAy9I,QAAAA,OAAO,CAACzvK,CAAC,GAAG,CAAL,CAAP,GAAiB2vK,OAAO,CAAC39I,CAAC,GAAG,CAAL,CAAxB;AACAy9I,QAAAA,OAAO,CAACzvK,CAAC,GAAG,CAAL,CAAP,GAAiB,CAAjB;AACAyvK,QAAAA,OAAO,CAACzvK,CAAC,GAAG,CAAL,CAAP,GAAiB,GAAjB;AAEA;AAED;AAED;AAED;AAED;;;;;;;;;;;AAUA,MAAM6vK,iBAAN,CAAwB;AAEvB;;;;;AAMA,SAAOtD,QAAP,GAAkB;AAEjB,UAAMzlK,KAAK,GAAG,IAAI,CAAJ,GAAQ0mK,eAAtB;AACA,UAAMzmK,MAAM,GAAG6mK,4BAA4B,CAAC9xK,MAA7B,GAAsC,CAAtC,GAA0C0xK,eAAzD;AAEA,UAAMlhI,IAAI,GAAG,IAAI2W,iBAAJ,CAAsBn8C,KAAK,GAAGC,MAAR,GAAiB,CAAvC,CAAb;AACA,UAAM/H,MAAM,GAAG,IAAIotK,YAAJ,CAAiBtlK,KAAjB,EAAwBC,MAAxB,EAAgCulC,IAAhC,CAAf;AAEA,UAAMwjI,qBAAqB,GAAG30K,IAAI,CAACsO,GAAL,CAAS+jK,eAAe,GAAG,CAA3B,EAA8B,CAA9B,IAAmC,CAAjE;AACA,UAAMuC,mBAAmB,GAAGtC,aAA5B;AAEA,UAAMuC,kBAAkB,GAAG,EAA3B;AACA,UAAMC,gBAAgB,GAAG,EAAzB;AAEA,UAAM1vD,IAAI,GAAG,IAAIz0F,OAAJ,EAAb;AAEA,QAAI3uB,CAAJ,EAAOI,CAAP,CAhBiB,CAkBjB;;AACA,SAAIJ,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG,EAAf,EAAmB,EAAEA,CAArB,EAAwB;AAEvB6yK,MAAAA,kBAAkB,CAAC1pK,IAAnB,CAAwB,IAAI8lK,YAAJ,CAAiB0D,qBAAjB,EAAwCA,qBAAxC,EACvB,IAAI7sH,iBAAJ,CAAsB6sH,qBAAqB,GAAGA,qBAAxB,GAAgD,CAAtE,CADuB,EACmD,CADnD,CAAxB;AAGAG,MAAAA,gBAAgB,CAAC3pK,IAAjB,CAAsB,IAAI8lK,YAAJ,CAAiB2D,mBAAjB,EAAsCA,mBAAtC,EACrB,IAAI9sH,iBAAJ,CAAsB8sH,mBAAmB,GAAGA,mBAAtB,GAA4C,CAAlE,CADqB,EACiD,CADjD,CAAtB;AAGA;;AAED,SAAI5yK,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAGqwK,4BAA4B,CAAC9xK,MAA5C,EAAoDqB,CAAC,GAAGI,CAAxD,EAA2D,EAAEJ,CAA7D,EAAgE;AAE/D;AACAkyK,MAAAA,gBAAgB,CAACW,kBAAD,EAAqBpC,4BAA4B,CAACzwK,CAAD,CAAjD,EAAsD,IAAtD,CAAhB,CAH+D,CAK/D;;AACAojH,MAAAA,IAAI,CAAC50F,GAAL,CAAS,CAAT,EAAY,IAAI6hJ,eAAJ,GAAsBrwK,CAAlC;AACAqyK,MAAAA,QAAQ,CAACjvD,IAAD,EAAOyvD,kBAAP,EAA2BlC,eAA3B,EAA4CN,eAA5C,EAA6D,IAA7D,EAAmExuK,MAAnE,CAAR;AAEA;;AAED,SAAI7B,CAAC,GAAG,CAAJ,EAAOI,CAAC,GAAGswK,0BAA0B,CAAC/xK,MAA1C,EAAkDqB,CAAC,GAAGI,CAAtD,EAAyD,EAAEJ,CAA3D,EAA8D;AAE7D;AACAkyK,MAAAA,gBAAgB,CAACY,gBAAD,EAAmBpC,0BAA0B,CAAC1wK,CAAD,CAA7C,EAAkD,KAAlD,CAAhB,CAH6D,CAK7D;;AACAojH,MAAAA,IAAI,CAAC50F,GAAL,CAAS,IAAI6hJ,eAAb,EAA8B,IAAIC,aAAJ,GAAoBtwK,CAAlD;AACAqyK,MAAAA,QAAQ,CAACjvD,IAAD,EAAO0vD,gBAAP,EAAyBlC,aAAzB,EAAwCN,aAAxC,EAAuD,KAAvD,EAA8DzuK,MAA9D,CAAR;AAEA;;AAED,WAAOA,MAAP;AAEA;;AA7DsB;AAiExB;;;;;;;;;;AAQA,MAAMiwG,KAAK,GAAG,IAAI9V,GAAJ,CAAQ,CAErB,CAAC+2E,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAFqB,EAGrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAHqB,EAIrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAJqB,EAKrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CALqB,EAOrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAPqB,EAQrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CARqB,EASrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CATqB,EAUrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAVqB,EAYrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAZqB,EAarB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAbqB,EAcrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAdqB,EAerB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAfqB,EAiBrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAjBqB,EAkBrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAlBqB,EAmBrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CAnBqB,EAoBrB,CAACA,QAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAD,CAAT,EAAyB,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,CAAzB,CApBqB,CAAR,CAAd;AAwBA;;;;;;;;;;AAUA,SAASC,MAAT,CAAgB50K,CAAhB,EAAmBD,CAAnB,EAAsBuE,CAAtB,EAAyB;AAExB,SAAOtE,CAAC,GAAG,CAACD,CAAC,GAAGC,CAAL,IAAUsE,CAArB;AAEA;AAED;;;;;;;;;;;;;;AAaA,SAASqwK,QAAT,CAAkBxtK,CAAlB,EAAqB;AAEpB,QAAMnH,CAAC,GAAG40K,MAAM,CAACztK,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAa,MAAM,IAAnB,CAAhB;AACA,QAAMpH,CAAC,GAAG60K,MAAM,CAACztK,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,EAAa,MAAM,IAAnB,CAAhB;AAEA,SAAOytK,MAAM,CAAC50K,CAAD,EAAID,CAAJ,EAAO,MAAM,KAAb,CAAb;AAEA;AAED;;;;;;;;;;AASA,SAAS80K,SAAT,CAAmBxsK,IAAnB,EAAyBE,GAAzB,EAA8B;AAE7B,MAAIkuB,CAAC,GAAG,CAAR,CAF6B,CAI7B;;AACA,MAAGluB,GAAG,CAAC,CAAD,CAAH,KAAW,CAAd,EAAiB;AAEhBkuB,IAAAA,CAAC,IAAI,CAAL;AAEA;AAED;;;;AAEA,MAAGA,CAAC,KAAK,CAAN,IAAWluB,GAAG,CAAC,CAAD,CAAH,KAAW,CAAtB,IAA2BF,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAvC,IAA4CA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAA3D,EAA8D;AAE7DouB,IAAAA,CAAC,IAAI,CAAL;AAEA;;AAED,SAAOA,CAAP;AAEA;AAED;;;;;;;;;;AASA,SAASq+I,UAAT,CAAoBzsK,IAApB,EAA0BE,GAA1B,EAA+B;AAE9B,MAAIkuB,CAAC,GAAG,CAAR,CAF8B,CAI9B;;AACA,MAAGluB,GAAG,CAAC,CAAD,CAAH,KAAW,CAAX,IAAgBF,IAAI,CAAC,CAAD,CAAJ,KAAY,CAA5B,IAAiCA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAhD,EAAmD;AAElDouB,IAAAA,CAAC,IAAI,CAAL;AAEA;AAED;;;;AAEA,MAAGA,CAAC,KAAK,CAAN,IAAWluB,GAAG,CAAC,CAAD,CAAH,KAAW,CAAtB,IAA2BF,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAvC,IAA4CA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAA3D,EAA8D;AAE7DouB,IAAAA,CAAC,IAAI,CAAL;AAEA;;AAED,SAAOA,CAAP;AAEA;AAED;;;;;;;;;;;AAUA,MAAMs+I,mBAAN,CAA0B;AAEzB;;;;;AAMA,SAAO/D,QAAP,GAAkB;AAEjB,UAAMzlK,KAAK,GAAG,EAAd;AACA,UAAMC,MAAM,GAAG,EAAf;AACA,UAAM29E,SAAS,GAAG59E,KAAK,GAAG,CAA1B;AAEA,UAAMypK,YAAY,GAAG,EAArB;AACA,UAAMC,aAAa,GAAG,EAAtB;AAEA,UAAMlkI,IAAI,GAAG,IAAI2W,iBAAJ,CAAsBn8C,KAAK,GAAGC,MAA9B,CAAb;AACA,UAAM0pK,WAAW,GAAG,IAAIxtH,iBAAJ,CAAsBstH,YAAY,GAAGC,aAAf,GAA+B,CAArD,CAApB;AAEA,QAAIhsK,CAAJ,EAAOE,CAAP;AACA,QAAIjJ,CAAJ,EAAOsE,CAAP,EAAU5C,CAAV;AACA,QAAI+xK,EAAJ,EAAQC,EAAR,CAdiB,CAgBjB;;AACA,SAAIzqK,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGqC,MAAf,EAAuB,EAAErC,CAAzB,EAA4B;AAE3B,WAAIF,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAGsC,KAAf,EAAsB,EAAEtC,CAAxB,EAA2B;AAE1B/I,QAAAA,CAAC,GAAG,UAAU+I,CAAd;AACAzE,QAAAA,CAAC,GAAG,UAAU2E,CAAd;;AAEA,YAAGuqG,KAAK,CAACtnB,GAAN,CAAUlsF,CAAV,KAAgBwzG,KAAK,CAACtnB,GAAN,CAAU5nF,CAAV,CAAnB,EAAiC;AAEhCmvK,UAAAA,EAAE,GAAGjgE,KAAK,CAACl0F,GAAN,CAAUtf,CAAV,CAAL;AACA0zK,UAAAA,EAAE,GAAGlgE,KAAK,CAACl0F,GAAN,CAAUhb,CAAV,CAAL;AAEA5C,UAAAA,CAAC,GAAGuH,CAAC,GAAGoC,KAAJ,GAAYtC,CAAhB,CALgC,CAOhC;;AACA8nC,UAAAA,IAAI,CAACnvC,CAAD,CAAJ,GAAW,MAAMizK,SAAS,CAAClB,EAAD,EAAKC,EAAL,CAA1B;AACA7iI,UAAAA,IAAI,CAACnvC,CAAC,GAAGunF,SAAL,CAAJ,GAAuB,MAAM2rF,UAAU,CAACnB,EAAD,EAAKC,EAAL,CAAvC;AAEA;AAED;AAED,KAvCgB,CAyCjB;;;AACA,SAAIhyK,CAAC,GAAG,CAAJ,EAAOuH,CAAC,GAAGqC,MAAM,GAAGypK,aAAxB,EAAuC9rK,CAAC,GAAGqC,MAA3C,EAAmD,EAAErC,CAArD,EAAwD;AAEvD,WAAIF,CAAC,GAAG,CAAR,EAAWA,CAAC,GAAG+rK,YAAf,EAA6B,EAAE/rK,CAAF,EAAKrH,CAAC,IAAI,CAAvC,EAA0C;AAEzCszK,QAAAA,WAAW,CAACtzK,CAAD,CAAX,GAAiBmvC,IAAI,CAAC5nC,CAAC,GAAGoC,KAAJ,GAAYtC,CAAb,CAArB;AACAisK,QAAAA,WAAW,CAACtzK,CAAC,GAAG,CAAL,CAAX,GAAqB,GAArB;AAEA;AAED;;AAED,WAAO,IAAIivK,YAAJ,CAAiBmE,YAAjB,EAA+BC,aAA/B,EAA8CC,WAA9C,CAAP;AAEA;;AA/DwB;;;AAmE1B,IAAIC,gBAAgB,GAAG,ykBAAvB;AAEA;;;;;;;AAOA,MAAMC,GAAG,GAAG,kBAAZ;AAEA;;;;;;;;;AASA,SAASC,WAAT,CAAqB3mJ,GAArB,EAA0BC,IAA1B,EAAgC;AAE/B,SAAOD,GAAG,GAAG9uB,IAAI,CAAC2tB,MAAL,MAAiBoB,IAAI,GAAGD,GAAxB,CAAb;AAEA;AAED;;;;;;;;;;;AAUA,MAAM4mJ,YAAN,SAA2BvN,MAA3B,CAAkC;AAEjC;;;;;;;;;;;;;;AAeAjlK,EAAAA,WAAW,CAAC;AACX+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MADnB;AAEXoP,IAAAA,yBAAyB,GAAG,IAFjB;AAGXnnC,IAAAA,KAAK,GAAG,IAAIuqB,cAAJ,CAAc,GAAd,EAAmB,GAAnB,CAHG;AAIXzoC,IAAAA,QAAQ,GAAG,IAAIyoC,cAAJ,CAAc,GAAd,EAAmB,GAAnB,CAJA;AAKXqG,IAAAA,QAAQ,GAAG,IAAIrG,cAAJ,CAAc,GAAd,EAAmB,GAAnB,CALA;AAMX6c,IAAAA,OAAO,GAAG,IANC;AAOXC,IAAAA,KAAK,GAAG,IAPG;AAQXC,IAAAA,eAAe,GAAG,IARP;AASXC,IAAAA,MAAM,GAAG;AATE,MAUR,EAVO,EAUH;AAEP,UAAM,cAAN,EAAsBR,gBAAtB,EAAwC;AAEvCtN,MAAAA,aAFuC;AAIvC5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,iBAAD,EAAoB,IAAIwlD,cAAJ,CAAY,IAAZ,CAApB,CADiB,EAEjB,CAAC,SAAD,EAAY,IAAIA,cAAJ,CAAYoyB,OAAZ,CAAZ,CAFiB,EAGjB,CAAC,QAAD,EAAW,IAAIpyB,cAAJ,CAAY,KAAZ,CAAX,CAHiB,EAIjB,CAAC,QAAD,EAAW,IAAIA,cAAJ,CAAY,GAAZ,CAAX,CAJiB,EAKjB,CAAC,MAAD,EAAS,IAAIA,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAAT,CALiB,EAMjB,CAAC,YAAD,EAAe,IAAIvV,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAAf,CANiB,CAAR;AAJ6B,KAAxC;AAeA,SAAKid,kBAAL,CAAyBF,eAAe,KAAK,IAArB,GACvB,KAAKG,uBAAL,CAA6BF,MAA7B,CADuB,GAEvBD,eAFD;AAKA;;;;;;AAMA,SAAKtnC,KAAL,GAAaA,KAAb;AAEA;;;;;;AAMA,SAAKle,QAAL,GAAgBA,QAAhB;AAEA;;;;;;;AAOA,SAAK4lD,UAAL,GAAkB,IAAInd,cAAJ,CACjB0c,WAAW,CAAC,KAAKjnC,KAAL,CAAWnlI,CAAZ,EAAe,KAAKmlI,KAAL,CAAWjlI,CAA1B,CADM,EAEjBksK,WAAW,CAAC,KAAKnlD,QAAL,CAAcjnH,CAAf,EAAkB,KAAKinH,QAAL,CAAc/mH,CAAhC,CAFM,CAAlB;AAKA;;;;;;;AAOA,SAAKy3D,IAAL,GAAY,CAAZ;AAEA;;;;;;;AAOA,SAAKm1G,IAAL,GAAY,KAAK9+G,QAAL,CAAcz3C,GAAd,CAAkB,MAAlB,EAA0Bxa,KAAtC;AAEA;;;;;;;AAOA,SAAKgxK,UAAL,GAAkB,KAAK/+G,QAAL,CAAcz3C,GAAd,CAAkB,YAAlB,EAAgCxa,KAAlD;AAEA;;;;;;AAMA,SAAKssE,IAAL,GAAY2kG,UAAU,CAACC,QAAvB;AAEA;;;;;;AAMA,SAAKlX,QAAL,GAAgBA,QAAhB;AAEA;;;;;;;;AAQA,SAAKyW,KAAL,GAAaA,KAAb;AAEA;;;;;;AAMA,SAAKF,yBAAL,GAAiCA,yBAAjC;AAEA;AAED;;;;;;;AAMA,MAAIY,MAAJ,GAAa;AAEZ,WAAO,KAAKl/G,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAAnC;AAEA;AAED;;;;;;;AAMAoxK,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKn/G,QAAL,CAAcz3C,GAAd,CAAkB,iBAAlB,EAAqCxa,KAA5C;AAEA;AAED;;;;;;;;;AAQA4wK,EAAAA,kBAAkB,CAAC9oK,GAAD,EAAM;AAEvB,UAAMupK,UAAU,GAAG,KAAKD,kBAAL,EAAnB;;AAEA,QAAGC,UAAU,KAAK,IAAf,IAAuBA,UAAU,CAACn/J,IAAX,KAAoBk+J,GAA9C,EAAmD;AAElDiB,MAAAA,UAAU,CAACn7I,OAAX;AAEA;;AAEDpuB,IAAAA,GAAG,CAACysB,SAAJ,GAAgBzsB,GAAG,CAACwsB,SAAJ,GAAgB5U,oBAAhC;AACA5X,IAAAA,GAAG,CAACssB,KAAJ,GAAYtsB,GAAG,CAACusB,KAAJ,GAAY9U,qBAAxB;AACAzX,IAAAA,GAAG,CAACmtB,eAAJ,GAAsB,KAAtB;AAEA,SAAKg9B,QAAL,CAAcz3C,GAAd,CAAkB,iBAAlB,EAAqCxa,KAArC,GAA6C8H,GAA7C;AAEA;AAED;;;;;;;;AAOA+oK,EAAAA,uBAAuB,CAACriI,IAAI,GAAG,EAAR,EAAY;AAElC,UAAM1mC,GAAG,GAAG,IAAI4jK,YAAJ,CAAiBl9H,IAAjB,EAAuBA,IAAvB,EAA6BvtB,gBAA7B,CAAZ;AACAnZ,IAAAA,GAAG,CAACoK,IAAJ,GAAWk+J,GAAX;AAEA,WAAOtoK,GAAP;AAEA;AAED;;;;;;;;;AAQAizB,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAM7sE,IAAI,GAAG,KAAKA,IAAlB;AACA,UAAMwkG,UAAU,GAAG,KAAKA,UAAxB;AACA,UAAMpqK,MAAM,GAAG,KAAK6pK,yBAApB;AACA,UAAMr1K,CAAC,GAAG,KAAK8+J,QAAf;AAEA,QAAIp+F,IAAI,GAAG,KAAKA,IAAhB;AACA,QAAIu1G,MAAM,GAAG,KAAb;AACA,QAAIx2K,CAAC,GAAG,GAAR;AAAA,QAAaK,CAAC,GAAG,GAAjB;AACA,QAAIs2K,OAAJ;;AAEA,QAAGhlG,IAAI,KAAK2kG,UAAU,CAACM,QAAvB,EAAiC;AAEhC,UAAGjlG,IAAI,KAAK2kG,UAAU,CAACC,QAAvB,EAAiC;AAEhCt1G,QAAAA,IAAI,IAAIu9E,SAAR;AACAm4B,QAAAA,OAAO,GAAI11G,IAAI,GAAGk1G,UAAU,CAAC7sK,CAA7B;;AAEA,YAAG23D,IAAI,IAAKk1G,UAAU,CAAC7sK,CAAX,GAAe6sK,UAAU,CAAC3sK,CAAtC,EAA0C;AAEzC2sK,UAAAA,UAAU,CAAC1lJ,GAAX,CACCilJ,WAAW,CAAC,KAAKjnC,KAAL,CAAWnlI,CAAZ,EAAe,KAAKmlI,KAAL,CAAWjlI,CAA1B,CADZ,EAECksK,WAAW,CAAC,KAAKnlD,QAAL,CAAcjnH,CAAf,EAAkB,KAAKinH,QAAL,CAAc/mH,CAAhC,CAFZ;AAKAy3D,UAAAA,IAAI,GAAG,CAAP;AAEA;AAED;;AAEDjhE,MAAAA,CAAC,GAAGC,IAAI,CAAC2tB,MAAL,EAAJ;AACA,WAAK0pC,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAA5B,GAAoCrF,CAApC;;AAEA,UAAI22K,OAAO,IAAI32K,CAAC,GAAG,KAAK81K,KAArB,IAA+BnkG,IAAI,KAAK2kG,UAAU,CAACO,aAAtD,EAAqE;AAEpEL,QAAAA,MAAM,GAAG,IAAT;AAEAx2K,QAAAA,CAAC,IAAIO,CAAC,CAACiJ,CAAF,GAAM,IAAX;AACAnJ,QAAAA,CAAC,GAAGq1K,WAAW,CAAC,CAACz1K,IAAI,CAACutB,EAAP,EAAWvtB,IAAI,CAACutB,EAAhB,CAAf;AAEA,aAAK4oJ,IAAL,CAAU3lJ,GAAV,CAAcilJ,WAAW,CAAC,CAACn1K,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACiJ,CAAT,CAAzB,EAAsCksK,WAAW,CAAC,CAACn1K,CAAC,CAACiJ,CAAJ,EAAOjJ,CAAC,CAACiJ,CAAT,CAAjD;AACA,aAAK6sK,UAAL,CAAgB5lJ,GAAhB,CAAoBilJ,WAAW,CAAC,GAAD,EAAM,GAAN,CAA/B,EAA2CA,WAAW,CAAC,GAAD,EAAM,GAAN,CAAtD;AAEA,OAVD,MAUO,IAAGiB,OAAO,IAAIhlG,IAAI,KAAK2kG,UAAU,CAACQ,aAAlC,EAAiD;AAEvDN,QAAAA,MAAM,GAAG,IAAT;AAEAx2K,QAAAA,CAAC,IAAIO,CAAC,CAAC+I,CAAF,GAAM,IAAX;AACAjJ,QAAAA,CAAC,GAAGq1K,WAAW,CAAC,CAACz1K,IAAI,CAACutB,EAAP,EAAWvtB,IAAI,CAACutB,EAAhB,CAAf;AAEA,aAAK4oJ,IAAL,CAAU3lJ,GAAV,CAAcilJ,WAAW,CAAC,CAACn1K,CAAC,CAAC+I,CAAJ,EAAO/I,CAAC,CAAC+I,CAAT,CAAzB,EAAsCosK,WAAW,CAAC,CAACn1K,CAAC,CAAC+I,CAAJ,EAAO/I,CAAC,CAAC+I,CAAT,CAAjD;AACA,aAAK+sK,UAAL,CAAgB5lJ,GAAhB,CAAoBilJ,WAAW,CAAC,GAAD,EAAM,GAAN,CAA/B,EAA2CA,WAAW,CAAC,GAAD,EAAM,GAAN,CAAtD;AAEA;;AAED,WAAKz0G,IAAL,GAAYA,IAAZ;AAEA;;AAED,QAAGl1D,MAAM,KAAK,IAAd,EAAoB;AAEnB,UAAGyqK,MAAH,EAAW;AAEVzqK,QAAAA,MAAM,CAAC0kB,GAAP,CAAWxwB,IAAI,CAAC8vB,GAAL,CAAS1vB,CAAT,CAAX,EAAwBJ,IAAI,CAAC+vB,GAAL,CAAS3vB,CAAT,CAAxB,EAAqCwxB,cAArC,CAAoD7xB,CAApD;AAEA,OAJD,MAIO;AAEN+L,QAAAA,MAAM,CAAC0kB,GAAP,CAAW,GAAX,EAAgB,GAAhB;AAEA;AAED;;AAED,SAAK6mC,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAA5B,GAAoCmxK,MAApC;AAEA;;AAnSgC;AAuSlC;;;;;;;;;;;;AAUA,MAAMF,UAAU,GAAG;AAElBM,EAAAA,QAAQ,EAAE,CAFQ;AAGlBL,EAAAA,QAAQ,EAAE,CAHQ;AAIlBO,EAAAA,aAAa,EAAE,CAJG;AAKlBD,EAAAA,aAAa,EAAE;AALG,CAAnB;;AASA,IAAIE,gBAAgB,GAAG,8IAAvB;AAEA;;;;;;;AAOA,MAAMt2K,CAAC,GAAG,IAAI+hC,cAAJ,EAAV;AAEA;;;;;;;AAOA,MAAMnU,CAAC,GAAG,IAAIsX,cAAJ,EAAV;AAEA;;;;AAIA,MAAMqxI,aAAN,SAA4B5O,MAA5B,CAAmC;AAElC;;;;;;;;;;;;;;;;;;;AAoBAjlK,EAAAA,WAAW,CAACsgC,MAAD,EAASwzI,WAAT,EAAsB;AAChC/O,IAAAA,aAAa,GAAGtC,aAAa,CAACe,MADE;AAEhC1oI,IAAAA,OAAO,GAAG,IAFsB;AAGhC6jE,IAAAA,OAAO,GAAG,IAHsB;AAIhChiC,IAAAA,KAAK,GAAG,GAJwB;AAKhCswC,IAAAA,MAAM,GAAG,GALuB;AAMhCiuD,IAAAA,QAAQ,GAAG,GANqB;AAOhCC,IAAAA,QAAQ,GAAG,GAPqB;AAQhCwF,IAAAA,eAAe,GAAG,GARc;AAShCl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SATgB;AAUhC/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD,SAVe;AAWhC/H,IAAAA,UAAU,GAAGC,UAAU,CAACK,KAXQ;AAYhCttJ,IAAAA,IAAI,GAAG;AAZyB,MAa7B,EAbO,EAaH;AAEP,UAAM,eAAN,EAAuBkpK,gBAAvB,EAAyC;AAExC7O,MAAAA,aAFwC;AAGxC98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACxL,KAHY;AAKxCvlG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,SAAD,EAAY,IAAIwlD,cAAJ,CAAY,IAAZ,CAAZ,CADiB,CAAR;AAL8B,KAAzC;AAWA;;;;;;;AAOA,SAAKhgH,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAKwzI,WAAL,GAAmBA,WAAnB;AACA,SAAKA,WAAL,CAAiBlmI,QAAjB,CAA0BoQ,UAA1B,GAAuC,KAAvC;AACA,SAAK81H,WAAL,CAAiBlmI,QAAjB,CAA0B2P,WAA1B,GAAwC,IAAxC;AAEA;;;;;;;AAOA,SAAKw2H,UAAL,GAAkB,IAAI5lI,YAAJ,EAAlB;AAEA;;;;;;;AAOA,SAAK6lI,cAAL,GAAsB,IAAIne,cAAJ,EAAtB;AAEA;;;;;;;AAOA,SAAK+K,aAAL,GAAqB,IAAIzmI,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AAChD1D,MAAAA,SAAS,EAAExU,mBADqC;AAEhDuU,MAAAA,SAAS,EAAEvU,mBAFqC;AAGhDwY,MAAAA,aAAa,EAAE,KAHiC;AAIhDD,MAAAA,WAAW,EAAE;AAJmC,KAA5B,CAArB;AAOA,SAAKomI,aAAL,CAAmBrmI,OAAnB,CAA2BnmB,IAA3B,GAAkC,kBAAlC;AAEA;;;;;;;AAOA,SAAKysJ,aAAL,GAAqB,KAAKD,aAAL,CAAmB3yI,KAAnB,EAArB;AACA,SAAK4yI,aAAL,CAAmBtmI,OAAnB,CAA2BnmB,IAA3B,GAAkC,kBAAlC;AACA,SAAK+/C,QAAL,CAAcz3C,GAAd,CAAkB,SAAlB,EAA6Bxa,KAA7B,GAAqC,KAAK2+J,aAAL,CAAmBtmI,OAAxD;AAEA;;;;;;;AAOA,SAAK05I,iBAAL,GAAyB,KAAKrT,aAAL,CAAmB3yI,KAAnB,EAAzB;AACA,SAAKgmJ,iBAAL,CAAuB15I,OAAvB,CAA+BnmB,IAA/B,GAAsC,eAAtC;AACA,SAAK6/J,iBAAL,CAAuBz5I,WAAvB,GAAqC,IAArC;AACA,SAAKy5I,iBAAL,CAAuBv5I,YAAvB,GAAsC,IAAI+1E,mBAAJ,EAAtC;AAEA;;;;;;;AAOA,SAAKyjE,eAAL,GAAuB,IAAIjS,UAAJ,CAAe,KAAK8R,UAApB,EAAgCzzI,MAAhC,CAAvB;AACA,SAAK4zI,eAAL,CAAqB9R,YAArB,GAAoCd,kBAApC,GAAyD,IAAIn/J,YAAJ,CAAU,QAAV,CAAzD;AAEA;;;;;;;AAOA,SAAK+/J,SAAL,GAAiB,IAAIb,SAAJ,CAAc,IAAd,EAAoB,KAApB,EAA2B,KAA3B,CAAjB;AACA,SAAKa,SAAL,CAAeZ,kBAAf,GAAoC,IAAIn/J,YAAJ,CAAU,QAAV,CAApC;AAEA;;;;;;;;AAQA,SAAKgoK,QAAL,GAAgB,IAAIzJ,QAAJ,CAAa;AAAEC,MAAAA,eAAF;AAAmBl4J,MAAAA,KAAnB;AAA0BC,MAAAA,MAA1B;AAAkCgvJ,MAAAA;AAAlC,KAAb,CAAhB;AACA,SAAKyS,QAAL,CAAc1/E,UAAd,CAAyBh3E,SAAzB,GAAqC,IAArC;AAEA;;;;;;;AAOA,SAAK0gK,aAAL,GAAqB,IAAIlM,UAAJ,CAAe,CAAEvtI,YAAD,IAAkB;AAEtD,YAAMkT,QAAQ,GAAG,IAAIkrH,iBAAJ,EAAjB;AACAlrH,MAAAA,QAAQ,CAACumB,QAAT,CAAkB+kG,YAAlB,CAA+Bh3J,KAA/B,GAAuCw4B,YAAvC;AAEA,aAAOkT,QAAP;AAEA,KAPmC,EAOjC,KAAKqmI,iBAAL,CAAuBv5I,YAPU,CAAf,CAArB;AASA;;;;;;;AAOA,SAAK05I,WAAL,GAAmB,IAAInM,UAAJ,CAAe,CAAC,MAAM;AAExC,YAAMr6H,QAAQ,GAAG,IAAIktH,eAAJ,CAAoB,KAAKkZ,cAAzB,CAAjB;AACApmI,MAAAA,QAAQ,CAACumB,QAAT,CAAkBwqC,OAAlB,CAA0Bz8F,KAA1B,GAAkCy8F,OAAlC;AACA/wD,MAAAA,QAAQ,CAACumB,QAAT,CAAkBwI,KAAlB,CAAwBz6D,KAAxB,GAAgCy6D,KAAhC;AACA/uB,MAAAA,QAAQ,CAACumB,QAAT,CAAkB84C,MAAlB,CAAyB/qG,KAAzB,GAAiC+qG,MAAjC;AACAr/D,MAAAA,QAAQ,CAACumB,QAAT,CAAkB+mG,QAAlB,CAA2Bh5J,KAA3B,GAAmCg5J,QAAnC;AACAttH,MAAAA,QAAQ,CAACumB,QAAT,CAAkBgnG,QAAlB,CAA2Bj5J,KAA3B,GAAmCi5J,QAAnC;AAEA,aAAOvtH,QAAP;AAEA,KAXiC,GAAf,CAAnB;AAaA,SAAK9S,OAAL,GAAeA,OAAf;AACA,SAAKpwB,IAAL,GAAYA,IAAZ;AAEA;AAED;;;;;;;;;;AASA,MAAI6vB,OAAJ,GAAc;AAEb,WAAO,KAAKsmI,aAAL,CAAmBtmI,OAA1B;AAEA;AAED;;;;;;;AAMA,MAAI85I,eAAJ,GAAsB;AAErB,WAAO,KAAKD,WAAL,CAAiBjU,qBAAjB,EAAP;AAEA;AAED;;;;;;;AAMA,MAAI11E,UAAJ,GAAiB;AAEhB,WAAO,KAAK0/E,QAAL,CAAc1/E,UAArB;AAEA;AAED;;;;;;;;AAOA,MAAIhiF,KAAJ,GAAY;AAEX,WAAO,KAAKgiF,UAAL,CAAgBhiF,KAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,KAAJ,CAAUvG,KAAV,EAAiB;AAEhB,SAAKuoF,UAAL,CAAgBhiF,KAAhB,GAAwBvG,KAAxB;AAEA;AAED;;;;;;;;AAOA,MAAIwG,MAAJ,GAAa;AAEZ,WAAO,KAAK+hF,UAAL,CAAgB/hF,MAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,MAAJ,CAAWxG,KAAX,EAAkB;AAEjB,SAAKuoF,UAAL,CAAgB/hF,MAAhB,GAAyBxG,KAAzB;AAEA;AAED;;;;;;;;AAOA,MAAIg9C,SAAJ,GAAgB;AAEf,WAAO,KAAKm1H,eAAL,CAAqBn1H,SAA5B;AAEA;AAED;;;;;;;;AAOA,MAAIA,SAAJ,CAAch9C,KAAd,EAAqB;AAEpB,UAAM0rC,QAAQ,GAAG,KAAKymI,eAAtB;AAEAzmI,IAAAA,QAAQ,CAACsR,SAAT,GAAqBh9C,KAArB;AACA0rC,IAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;AAED;;;;;;;AAMA,MAAIn+C,IAAJ,GAAW;AAEV,WAAO,KAAKy/J,QAAL,CAAc53G,OAArB;AAEA;AAED;;;;;AAIA,MAAI7nD,IAAJ,CAASxI,KAAT,EAAgB;AAEf,SAAKioK,QAAL,CAAc53G,OAAd,GAAwBrwD,KAAxB;AAEA;AAED;;;;;;;;AAOA,MAAIw1J,UAAJ,GAAiB;AAEhB,WAAO,KAAKyS,QAAL,CAAczS,UAArB;AAEA;AAED;;;;;;;;AAOA,MAAIA,UAAJ,CAAex1J,KAAf,EAAsB;AAErB,SAAKioK,QAAL,CAAczS,UAAd,GAA2Bx1J,KAA3B;AAEA;AAED;;;;;;;;AAOA8+J,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKv2E,UAAL,CAAgBx1D,KAAvB;AAEA;AAED;;;;;;;;AAOAgsI,EAAAA,kBAAkB,CAAChsI,KAAD,EAAQ;AAEzB,SAAKw1D,UAAL,CAAgBx1D,KAAhB,GAAwBA,KAAxB;AAEA;AAED;;;;;;;AAMA,MAAI6F,OAAJ,GAAc;AAEb,WAAO,KAAKu5I,eAAL,CAAqBv5I,OAA5B;AAEA;AAED;;;;;;;AAMA,MAAIA,OAAJ,CAAY54B,KAAZ,EAAmB;AAElB,SAAKmyK,eAAL,CAAqBv5I,OAArB,GAA+B54B,KAA/B;AAEA;AAED;;;;;;;;AAOAo+J,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,UAAM5yC,QAAQ,GAAG,KAAKumI,aAAL,CAAmBhU,qBAAnB,EAAjB;AACAvyH,IAAAA,QAAQ,CAACumB,QAAT,CAAkB8kG,YAAlB,CAA+B/2J,KAA/B,GAAuCw4B,YAAvC;AACAkT,IAAAA,QAAQ,CAAC6mB,OAAT,CAAiBskG,eAAjB,GAAmCv4E,YAAY,CAACnjF,OAAb,CAAqB,CAArB,CAAnC;AAEA;AAED;;;;;;;;;AAQA4/B,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAMy4B,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMvgK,MAAM,GAAGugK,WAAW,CAACvgK,MAA3B;AACA,UAAM2jB,gBAAgB,GAAG48I,WAAW,CAAC58I,gBAArC;AAEA,UAAM0pI,aAAa,GAAG,KAAKA,aAA3B;AACA,UAAMqT,iBAAiB,GAAG,KAAKA,iBAA/B,CAPwC,CASxC;;AACAH,IAAAA,WAAW,CAAClmI,QAAZ,CAAqBoQ,UAArB,GAAkC,IAAlC,CAVwC,CAYxC;;AACA81H,IAAAA,WAAW,CAAC58I,gBAAZ,GAA+B,KAA/B;AACA48I,IAAAA,WAAW,CAACroI,iBAAZ,CAA8B,IAA9B,EAAoC,KAApC;;AAEA,QAAGl4B,MAAM,KAAK,IAAd,EAAoB;AAEnB,UAAG,CAAC2jB,gBAAJ,EAAsB;AAErB;AACAhM,QAAAA,CAAC,CAACgD,IAAF,CAAO4lJ,WAAW,CAACjgJ,MAAnB;AAEA,OAPkB,CASnB;;;AACAigJ,MAAAA,WAAW,CAACjgJ,MAAZ,CAAmB3F,IAAnB,CAAwB4lJ,WAAW,CAACnzI,WAApC;AAEA,KA5BuC,CA8BxC;;;AACA,SAAKozI,UAAL,CAAgBt9J,GAAhB,CAAoBq9J,WAApB;AACA,SAAKI,eAAL,CAAqBh8G,MAArB,CAA4BP,QAA5B,EAAsCs8G,iBAAtC;AACA,SAAK/R,SAAL,CAAehqG,MAAf,CAAsBP,QAAtB,EAAgCipG,aAAhC;AACA,SAAKuT,aAAL,CAAmBj8G,MAAnB,CAA0BP,QAA1B,EAAoCs8G,iBAApC,EAAuDrT,aAAvD,EAlCwC,CAoCxC;;AACAkT,IAAAA,WAAW,CAAClmI,QAAZ,CAAqBoQ,UAArB,GAAkC,KAAlC;AACA81H,IAAAA,WAAW,CAAC58I,gBAAZ,GAA+BA,gBAA/B;;AAEA,QAAG3jB,MAAM,KAAK,IAAd,EAAoB;AAEnB,UAAG,CAAC2jB,gBAAJ,EAAsB;AAErB48I,QAAAA,WAAW,CAACjgJ,MAAZ,CAAmB3F,IAAnB,CAAwBhD,CAAxB;AAEA;;AAED3X,MAAAA,MAAM,CAACkD,GAAP,CAAWq9J,WAAX;AAEA,KAlDuC,CAoDxC;;;AACAx2K,IAAAA,CAAC,CAAC4kC,qBAAF,CAAwB4xI,WAAW,CAACnzI,WAApC,EAAiDN,OAAjD,CAAyD,KAAKC,MAA9D,EArDwC,CAuDxC;;AACA,SAAK0zI,cAAL,CAAoB1mJ,GAApB,CACCxwB,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAAS,CAACvE,CAAC,CAAC6I,CAAF,GAAM,GAAP,IAAc,GAAvB,EAA4B,CAAC,GAA7B,CAAT,EAA4C,GAA5C,CADD,EAECrJ,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAAS,CAACvE,CAAC,CAAC+I,CAAF,GAAM,GAAP,IAAc,GAAvB,EAA4B,CAAC,GAA7B,CAAT,EAA4C,GAA5C,CAFD;;AAKA,QAAG,KAAKqE,IAAR,EAAc;AAEb;AACA,WAAKy/J,QAAL,CAAcjyG,MAAd,CAAqBP,QAArB,EAA+BipG,aAA/B,EAA8CA,aAA9C;AAEA,KAlEuC,CAoExC;;;AACA,SAAKwT,WAAL,CAAiBl8G,MAAjB,CAAwBP,QAAxB,EAAkCipG,aAAlC,EAAiD,KAAKC,aAAtD;AAEA;AAED;;;;;;;;AAOAjmI,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAKyhK,QAAL,CAAcvvI,OAAd,CAAsBnyB,KAAtB,EAA6BC,MAA7B;AACA,SAAKwrK,eAAL,CAAqBt5I,OAArB,CAA6BnyB,KAA7B,EAAoCC,MAApC;AACA,SAAKyrK,aAAL,CAAmBv5I,OAAnB,CAA2BnyB,KAA3B,EAAkCC,MAAlC;AACA,SAAK0rK,WAAL,CAAiBx5I,OAAjB,CAAyBnyB,KAAzB,EAAgCC,MAAhC;AAEA,UAAMkT,CAAC,GAAG,KAAK6uE,UAAL,CAAgBhiF,KAA1B;AACA,UAAMtL,CAAC,GAAG,KAAKstF,UAAL,CAAgB/hF,MAA1B;AAEA,SAAKk4J,aAAL,CAAmBhmI,OAAnB,CAA2Bhf,CAA3B,EAA8Bze,CAA9B;AACA,SAAK0jK,aAAL,CAAmBjmI,OAAnB,CAA2Bhf,CAA3B,EAA8Bze,CAA9B;AACA,SAAK82K,iBAAL,CAAuBr5I,OAAvB,CAA+Bhf,CAA/B,EAAkCze,CAAlC;AAEA;AAED;;;;;;;;;AAQAqjK,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,SAAK0J,QAAL,CAAc3J,UAAd,CAAyB7oG,QAAzB,EAAmCxnC,KAAnC,EAA0CswI,eAA1C;AACA,SAAKyT,eAAL,CAAqB1T,UAArB,CAAgC7oG,QAAhC,EAA0CxnC,KAA1C,EAAiDswI,eAAjD;AACA,SAAK0T,aAAL,CAAmB3T,UAAnB,CAA8B7oG,QAA9B,EAAwCxnC,KAAxC,EAA+CswI,eAA/C;AACA,SAAK2T,WAAL,CAAiB5T,UAAjB,CAA4B7oG,QAA5B,EAAsCxnC,KAAtC,EAA6CswI,eAA7C;;AAEA,QAAG,CAACtwI,KAAD,IAAUswI,eAAe,KAAKn+I,uBAAjC,EAAmD;AAElD,WAAKs+I,aAAL,CAAmBrmI,OAAnB,CAA2B7D,MAA3B,GAAoCvT,gBAApC;AACA,WAAK09I,aAAL,CAAmBtmI,OAAnB,CAA2B7D,MAA3B,GAAoCvT,gBAApC;AACA,WAAK8wJ,iBAAL,CAAuB15I,OAAvB,CAA+B7D,MAA/B,GAAwCvT,gBAAxC;AAEA;;AAED,QAAGs9I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC,WAAK+gK,aAAL,CAAmBrmI,OAAnB,CAA2BtxB,IAA3B,GAAkCw3J,eAAlC;AACA,WAAKI,aAAL,CAAmBtmI,OAAnB,CAA2BtxB,IAA3B,GAAkCw3J,eAAlC;AACA,WAAKwT,iBAAL,CAAuB15I,OAAvB,CAA+BtxB,IAA/B,GAAsCw3J,eAAtC;AAEA;AAED;;AArjBiC;;;AAyjBnC,IAAI6T,gBAAgB,GAAG,mRAAvB;AAEA;;;;AAIA,MAAMC,UAAN,SAAyBtP,MAAzB,CAAgC;AAE/B;;;;;;;;AASAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACa,OAAhC;AAAyCruI,IAAAA,KAAK,GAAG,GAAjD;AAAsD48D,IAAAA,SAAS,GAAG;AAAlE,MAA0E,EAA3E,EAA+E;AAEzF,UAAM,YAAN,EAAoByiF,gBAApB,EAAsC;AAErCvP,MAAAA,aAFqC;AAIrC5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,OAAD,EAAU,IAAIwlD,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAAV,CADiB,EAEjB,CAAC,WAAD,EAAc,IAAIvV,cAAJ,CAAYzuD,SAAZ,CAAd,CAFiB,CAAR;AAJ2B,KAAtC;AAWA;;;;;;;AAOA,SAAKpH,UAAL,GAAkB,IAAIorE,cAAJ,EAAlB;AAEA;;;;;;;AAOA,SAAK5gI,KAAL,GAAan4B,IAAI,CAAC+E,GAAL,CAASozB,KAAT,EAAgB,IAAhB,CAAb;AAEA;;;;;;;AAOA,SAAK48D,SAAL,GAAiB/0F,IAAI,CAAC+E,GAAL,CAASgwF,SAAT,EAAoB,GAApB,CAAjB;AAEA;AAED;;;;;;;AAMA2iF,EAAAA,QAAQ,GAAG;AAEV,WAAO,KAAKv/I,KAAZ;AAEA;AAED;;;;;;;AAMAw/I,EAAAA,QAAQ,CAACx/I,KAAD,EAAQ;AAEf,SAAKA,KAAL,GAAaA,KAAb;AACA,SAAK2F,OAAL,CAAa,KAAK6vD,UAAL,CAAgBtkF,CAA7B,EAAgC,KAAKskF,UAAL,CAAgBpkF,CAAhD;AAEA;AAED;;;;;;;AAMAquK,EAAAA,YAAY,GAAG;AAEd,WAAO,KAAK7iF,SAAZ;AAEA;AAED;;;;;;;AAMAD,EAAAA,YAAY,CAACC,SAAD,EAAY;AAEvB,SAAKA,SAAL,GAAiBA,SAAjB;AACA,SAAKj3D,OAAL,CAAa,KAAK6vD,UAAL,CAAgBtkF,CAA7B,EAAgC,KAAKskF,UAAL,CAAgBpkF,CAAhD;AAEA;AAED;;;;;;;;AAOAu0B,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAK+hF,UAAL,CAAgBn9D,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AAEA,UAAMitD,MAAM,GAAGltD,KAAK,GAAGC,MAAvB;AACA,UAAMusB,KAAK,GAAG,KAAKA,KAAL,IAAcvsB,MAAM,GAAG,KAAvB,CAAd;AAEA,SAAKyrD,QAAL,CAAcz3C,GAAd,CAAkB,OAAlB,EAA2Bxa,KAA3B,CAAiCorB,GAAjC,CAAqCqoC,MAAM,GAAG1gC,KAA9C,EAAqDA,KAArD;AACA,SAAKk/B,QAAL,CAAcz3C,GAAd,CAAkB,WAAlB,EAA+Bxa,KAA/B,GAAwC+yB,KAAK,GAAGvsB,MAAT,GAAmB,KAAKmpF,SAA/D;AAEA;;AAxH8B;;;AA4HhC,IAAI8iF,gBAAgB,GAAG,8aAAvB;AAEA;;;;;;AAMA,MAAMC,mBAAN,SAAkC3P,MAAlC,CAAyC;AAExC;;;;;;;;AASAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwClnH,IAAAA,GAAG,GAAG,GAA9C;AAAmDC,IAAAA,UAAU,GAAG;AAAhE,MAAwE,EAAzE,EAA6E;AAEvF,UAAM,qBAAN,EAA6Bu4H,gBAA7B,EAA+C;AAE9C5P,MAAAA,aAF8C;AAI9C5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,KAAD,EAAQ,IAAIwlD,cAAJ,CAAY,IAAIjhH,cAAJ,EAAZ,CAAR,CADiB,EAEjB,CAAC,YAAD,EAAe,IAAIihH,cAAJ,CAAYlkG,UAAZ,CAAf,CAFiB,CAAR;AAJoC,KAA/C;AAWA,SAAKy4H,MAAL,CAAY14H,GAAZ;AAEA;AAED;;;;;;;AAMA04H,EAAAA,MAAM,CAAC14H,GAAD,EAAM;AAEX,UAAM/+C,CAAC,GAAGN,IAAI,CAAC+vB,GAAL,CAASsvB,GAAT,CAAV;AAAA,UAAyBx6C,CAAC,GAAG7E,IAAI,CAAC8vB,GAAL,CAASuvB,GAAT,CAA7B;AAEA,SAAKgY,QAAL,CAAcz3C,GAAd,CAAkB,KAAlB,EAAyBxa,KAAzB,CAA+BorB,GAA/B,CACC,MAAM3rB,CADP,EACU,CAAC7E,IAAI,CAAC0yB,IAAL,CAAU,GAAV,CAAD,GAAkBpyB,CAAlB,GAAsBuE,CADhC,EACmC7E,IAAI,CAAC0yB,IAAL,CAAU,GAAV,IAAiBpyB,CAAjB,GAAqBuE,CADxD,EAEEysB,SAFF,CAEY,GAFZ,EAEiBQ,YAFjB,CAE8B,GAF9B;AAIA;;AA1CuC;;;AA8CzC,IAAIkmJ,gBAAgB,GAAG,kQAAvB;AAEA;;;;AAIA,MAAMC,WAAN,SAA0B9P,MAA1B,CAAiC;AAEhC;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACe,MAAhC;AAAwCnxI,IAAAA,WAAW,GAAG;AAAtD,MAAgE,EAAjE,EAAqE;AAE/E,UAAM,aAAN,EAAqByiJ,gBAArB,EAAuC;AAAE/P,MAAAA;AAAF,KAAvC;AAEA,SAAK1yI,WAAL,GAAmBA,WAAnB;AAEA;AAED;;;;;;;AAMA,MAAIA,WAAJ,GAAkB;AAEjB,WAAO,KAAKoiC,OAAL,CAAa60B,GAAb,CAAiB,aAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAIj3D,WAAJ,CAAgBnwB,KAAhB,EAAuB;AAEtB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAannC,GAAb,CAAiB,aAAjB,EAAgC,GAAhC;AAEA,KAJD,MAIO;AAEN,WAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,aAApB;AAEA;AAED;;AAlD+B;;;AAsDjC,IAAI01G,gBAAgB,GAAG,uhCAAvB;AAEA,IAAIC,cAAc,GAAG,qIAArB;AAEA;;;;AAIA,MAAMC,aAAN,SAA4BjQ,MAA5B,CAAmC;AAElC;;;;;;;;;;;;;;;;;;;;;AAsBAjlK,EAAAA,WAAW,CAAC43D,KAAD,EAAQt3B,MAAR,EAAgB;AAC1BykI,IAAAA,aAAa,GAAGtC,aAAa,CAACe,MADJ;AAE1B2R,IAAAA,cAAc,GAAG,IAFS;AAG1BC,IAAAA,YAAY,GAAG,GAHW;AAI1BC,IAAAA,UAAU,GAAG,GAJa;AAK1BC,IAAAA,gBAAgB,GAAG,QALO;AAM1BC,IAAAA,eAAe,GAAG,QANQ;AAO1B5U,IAAAA,eAAe,GAAG,GAPQ;AAQ1Bl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SARU;AAS1B/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD,SATS;AAU1B/H,IAAAA,UAAU,GAAGC,UAAU,CAACI,UAVE;AAW1BrtJ,IAAAA,IAAI,GAAG,KAXmB;AAY1B8qK,IAAAA,IAAI,GAAG;AAZmB,MAavB,EAbO,EAaH;AAEP,UAAM,eAAN,EAAuBR,gBAAvB,EAAyC;AAExC7gH,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,aAAD,EAAgB,IAAIwlD,cAAJ,CAAY,IAAZ,CAAhB,CADiB,EAEjB,CAAC,aAAD,EAAgB,IAAIA,cAAJ,CAAY,IAAZ,CAAhB,CAFiB,EAGjB,CAAC,cAAD,EAAiB,IAAIA,cAAJ,CAAY80B,YAAZ,CAAjB,CAHiB,EAIjB,CAAC,kBAAD,EAAqB,IAAI90B,cAAJ,CAAY,IAAIn+I,YAAJ,CAAUmzK,gBAAV,CAAZ,CAArB,CAJiB,EAKjB,CAAC,iBAAD,EAAoB,IAAIh1B,cAAJ,CAAY,IAAIn+I,YAAJ,CAAUozK,eAAV,CAAZ,CAApB,CALiB,EAMjB,CAAC,OAAD,EAAU,IAAIj1B,cAAJ,CAAY,GAAZ,CAAV,CANiB,CAAR;AAF8B,KAAzC,EAFO,CAeP;;AACA,SAAK14B,SAAL,GAAiB,CAAEnzD,OAAD,IAAc,IAAIghH,KAAJ,CAAU,KAAK7tD,SAAf,EAA0B;AAEzDt6F,MAAAA,GAAG,CAACrvB,MAAD,EAASmW,IAAT,EAAelS,KAAf,EAAsB;AAExB,YAAGA,KAAK,KAAKugK,aAAa,CAAC5N,KAA3B,EAAkC;AAEjCpgG,UAAAA,OAAO,CAACnnC,GAAR,CAAY,OAAZ,EAAqB,GAArB;AAEA,SAJD,MAIO;AAENmnC,UAAAA,OAAO,CAAC6K,MAAR,CAAe,OAAf;AAEA;;AAEDrhE,QAAAA,MAAM,CAACmW,IAAD,CAAN,GAAelS,KAAf;AAEA,eAAO,IAAP;AAEA;;AAlBwD,KAA1B,CAAf,EAoBZ,KAAKuyD,OApBO,CAAjB;;AAsBA,SAAKmzD,SAAL,CAAem9C,aAAf,GAA+BA,aAA/B;AACA,SAAK2Q,iBAAL,CAAuBP,cAAvB;AACA,SAAKK,IAAL,GAAYA,IAAZ;AAEA;;;;;;;AAOA,SAAK59G,KAAL,GAAaA,KAAb;AAEA;;;;;;;AAOA,SAAKt3B,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAKq1I,gBAAL,GAAwB,IAAIx7I,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AACnD1D,MAAAA,SAAS,EAAExU,mBADwC;AAEnDuU,MAAAA,SAAS,EAAEvU,mBAFwC;AAGnDwY,MAAAA,aAAa,EAAE,KAHoC;AAInD/D,MAAAA,MAAM,EAAEvT;AAJ2C,KAA5B,CAAxB;AAOA,SAAKwyJ,gBAAL,CAAsBp7I,OAAtB,CAA8BnmB,IAA9B,GAAqC,cAArC;AAEA,SAAK+/C,QAAL,CAAcz3C,GAAd,CAAkB,aAAlB,EAAiCxa,KAAjC,GAAyC,KAAKyzK,gBAAL,CAAsBp7I,OAA/D;AAEA;;;;;;;AAOA,SAAKq7I,mBAAL,GAA2B,KAAKD,gBAAL,CAAsB1nJ,KAAtB,EAA3B;AACA,SAAK2nJ,mBAAL,CAAyBr7I,OAAzB,CAAiCnmB,IAAjC,GAAwC,eAAxC;AACA,SAAKwhK,mBAAL,CAAyBp7I,WAAzB,GAAuC,KAAvC;AAEA;;;;;;;AAOA,SAAKq7I,0BAAL,GAAkC,KAAKD,mBAAL,CAAyB3nJ,KAAzB,EAAlC;AACA,SAAK4nJ,0BAAL,CAAgCt7I,OAAhC,CAAwCnmB,IAAxC,GAA+C,sBAA/C;AAEA;;;;;;;AAOA,SAAK8tJ,SAAL,GAAiB,IAAIb,SAAJ,EAAjB;AACA,SAAKa,SAAL,CAAeZ,kBAAf,GAAoC,IAAIn/J,YAAJ,CAAU,QAAV,CAApC;AACA,SAAK+/J,SAAL,CAAeX,kBAAf,GAAoC,GAApC;AAEA;;;;;;;AAOA,SAAKuU,SAAL,GAAiB,IAAIzT,SAAJ,CAAczqG,KAAd,EAAqBt3B,MAArB,CAAjB;AAEA;;;;;;;AAOA,SAAKgsI,QAAL,GAAgB,IAAIrK,UAAJ,CAAerqG,KAAf,EAAsBt3B,MAAtB,EACf,IAAIk4H,uBAAJ,CAA4B,KAAKsd,SAAL,CAAev7I,OAA3C,EAAoD+F,MAApD,CADe,CAAhB;AAGA,UAAM4hI,SAAS,GAAG,KAAKoK,QAAL,CAAclK,YAAd,EAAlB;AACAF,IAAAA,SAAS,CAACZ,kBAAV,GAA+B,IAAIn/J,YAAJ,CAAU,QAAV,CAA/B;AACA+/J,IAAAA,SAAS,CAACX,kBAAV,GAA+B,GAA/B;AAEA;;;;;;AAMA,SAAK4I,QAAL,GAAgB,IAAIzJ,QAAJ,CAAa;AAAEC,MAAAA,eAAF;AAAmBl4J,MAAAA,KAAnB;AAA0BC,MAAAA,MAA1B;AAAkCgvJ,MAAAA;AAAlC,KAAb,CAAhB;AACA,SAAKyS,QAAL,CAAc1/E,UAAd,CAAyBh3E,SAAzB,GAAqC,IAArC;AACA,SAAK/I,IAAL,GAAYA,IAAZ;AAEA;;;;;;;AAOA,SAAKqrK,WAAL,GAAmB,IAAI9N,UAAJ,CAAe,IAAIlL,eAAJ,EAAf,CAAnB;AACA,SAAKgZ,WAAL,CAAiB5V,qBAAjB,GAAyChsG,QAAzC,CAAkDwhG,WAAlD,CAA8DzzJ,KAA9D,GAAsE,KAAKyzK,gBAAL,CAAsBp7I,OAA5F;AAEA;;;;;;;AAOA,SAAKujC,IAAL,GAAY,GAAZ;AAEA;;;;;;AAMA,SAAKk4G,SAAL,GAAiB,IAAIrM,SAAJ,EAAjB;AAEA;;;;;;AAMA,SAAK0L,UAAL,GAAkBA,UAAlB;AAEA;AAED;;;;;;;AAMA,MAAI5qF,UAAJ,GAAiB;AAEhB,WAAO,KAAK0/E,QAAL,CAAc1/E,UAArB;AAEA;AAED;;;;;;;;AAOA,MAAIhiF,KAAJ,GAAY;AAEX,WAAO,KAAKgiF,UAAL,CAAgBhiF,KAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,KAAJ,CAAUvG,KAAV,EAAiB;AAEhB,SAAKuoF,UAAL,CAAgBhiF,KAAhB,GAAwBvG,KAAxB;AAEA;AAED;;;;;;;;AAOA,MAAIwG,MAAJ,GAAa;AAEZ,WAAO,KAAK+hF,UAAL,CAAgB/hF,MAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIA,MAAJ,CAAWxG,KAAX,EAAkB;AAEjB,SAAKuoF,UAAL,CAAgB/hF,MAAhB,GAAyBxG,KAAzB;AAEA;AAED;;;;;;AAKA,MAAI+zK,cAAJ,GAAqB;AAEpB,WAAO,KAAKD,SAAL,CAAex3D,KAAtB;AAEA;AAED;;;;;;AAKA,MAAIy3D,cAAJ,CAAmB/zK,KAAnB,EAA0B;AAEzB,SAAK8zK,SAAL,CAAex3D,KAAf,GAAuBt8G,KAAvB;AAEA;AAED;;;;;;;;AAOA,MAAIg9C,SAAJ,GAAgB;AAEf,WAAO,KAAKirH,QAAL,CAAcjrH,SAArB;AAEA;AAED;;;;;;;;AAOA,MAAIA,SAAJ,CAAch9C,KAAd,EAAqB;AAEpB,SAAKioK,QAAL,CAAcjrH,SAAd,GAA0Bh9C,KAA1B;AAEA;AAED;;;;;;;;AAOA,MAAIw1J,UAAJ,GAAiB;AAEhB,WAAO,KAAKyS,QAAL,CAAczS,UAArB;AAEA;AAED;;;;;;;;AAOA,MAAIA,UAAJ,CAAex1J,KAAf,EAAsB;AAErB,SAAKioK,QAAL,CAAczS,UAAd,GAA2Bx1J,KAA3B;AAEA;AAED;;;;;;;AAMA,MAAIwI,IAAJ,GAAW;AAEV,WAAO,KAAKy/J,QAAL,CAAc53G,OAArB;AAEA;AAED;;;;;AAIA,MAAI7nD,IAAJ,CAASxI,KAAT,EAAgB;AAEf,SAAKioK,QAAL,CAAc53G,OAAd,GAAwBrwD,KAAxB;AAEA,SAAKiyD,QAAL,CAAcz3C,GAAd,CAAkB,aAAlB,EAAiCxa,KAAjC,GAAyCA,KAAK,GAC7C,KAAK2zK,0BAAL,CAAgCt7I,OADa,GAE7C,KAAKq7I,mBAAL,CAAyBr7I,OAF1B;AAIA;AAED;;;;;;;AAMA,MAAIi7I,IAAJ,GAAW;AAEV,WAAO,KAAK/gH,OAAL,CAAa60B,GAAb,CAAiB,OAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAIksF,IAAJ,CAAStzK,KAAT,EAAgB;AAEfA,IAAAA,KAAK,GAAG,KAAKuyD,OAAL,CAAannC,GAAb,CAAiB,OAAjB,EAA0B,GAA1B,CAAH,GAAoC,KAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,OAApB,CAAzC;AAEA;AAED;;;;;;;;;;AASAo2G,EAAAA,iBAAiB,CAACn7I,OAAD,EAAU;AAE1B,QAAGA,OAAO,KAAK,IAAf,EAAqB;AAEpBA,MAAAA,OAAO,CAACjE,KAAR,GAAgBiE,OAAO,CAAChE,KAAR,GAAgB9U,qBAAhC;AAEA,WAAKgzC,OAAL,CAAannC,GAAb,CAAiB,aAAjB,EAAgC,GAAhC;AACA,WAAK6mC,QAAL,CAAc7mC,GAAd,CAAkB,cAAlB,EAAkC,IAAIgzH,cAAJ,CAAY,GAAZ,CAAlC;AACA,WAAKnsF,QAAL,CAAc7mC,GAAd,CAAkB,gBAAlB,EAAoC,IAAIgzH,cAAJ,CAAY/lH,OAAZ,CAApC;AACA,WAAKm6B,YAAL,GAAoBugH,cAApB;AAEA,KATD,MASO;AAEN,WAAKxgH,OAAL,CAAa6K,MAAb,CAAoB,aAApB;AACA,WAAKnL,QAAL,CAAcmL,MAAd,CAAqB,cAArB;AACA,WAAKnL,QAAL,CAAcmL,MAAd,CAAqB,gBAArB;AACA,WAAK5K,YAAL,GAAoB,IAApB;AAEA;AAED;AAED;;;;;;;;AAOAssG,EAAAA,kBAAkB,GAAG;AAEpB,WAAO,KAAKv2E,UAAL,CAAgBx1D,KAAvB;AAEA;AAED;;;;;;;;AAOAgsI,EAAAA,kBAAkB,CAAChsI,KAAD,EAAQ;AAEzB,SAAKw1D,UAAL,CAAgBx1D,KAAhB,GAAwBA,KAAxB;AAEA;AAED;;;;;;;;;AAQAihJ,EAAAA,YAAY,CAACltG,OAAD,EAAU;AAErB,SAAKgtG,SAAL,CAAe1oJ,GAAf,CAAmB07C,OAAnB;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;AAOAmtG,EAAAA,cAAc,GAAG;AAEhB,SAAKH,SAAL,CAAe79G,KAAf;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;;AAQAi+G,EAAAA,YAAY,CAAC7yK,MAAD,EAAS;AAEpB,SAAKyyK,SAAL,CAAev/J,GAAf,CAAmBlT,MAAnB;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;;AAQA8yK,EAAAA,cAAc,CAAC9yK,MAAD,EAAS;AAEtB,SAAKyyK,SAAL,CAAe12G,MAAf,CAAsB/7D,MAAtB;AAEA,WAAO,IAAP;AAEA;AAED;;;;;;;;;AAQA05B,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAMzjF,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMt3B,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM01I,SAAS,GAAG,KAAKA,SAAvB;AACA,UAAMM,KAAK,GAAG,KAAKniH,QAAL,CAAcz3C,GAAd,CAAkB,OAAlB,CAAd;AAEA,UAAMhN,UAAU,GAAGkoD,KAAK,CAACloD,UAAzB;AACA,UAAMq4B,IAAI,GAAGzH,MAAM,CAACgI,MAAP,CAAcP,IAA3B;;AAEA,QAAGiuI,SAAS,CAACtlI,IAAV,GAAiB,CAApB,EAAuB;AAEtBknB,MAAAA,KAAK,CAACloD,UAAN,GAAmB,IAAnB;AACA4mK,MAAAA,KAAK,CAACp0K,KAAN,GAAc,GAAd;;AAEA,UAAG,KAAKmzK,UAAL,GAAkB,GAArB,EAA0B;AAEzBiB,QAAAA,KAAK,CAACp0K,KAAN,GAAc,QAAQpF,IAAI,CAAC8vB,GAAL,CAAS,KAAKkxC,IAAL,GAAY,KAAKu3G,UAAjB,GAA8B,IAAvC,IAA+C,KAArE;AAEA;;AAED,WAAKv3G,IAAL,IAAau9E,SAAb,CAXsB,CAatB;;AACA26B,MAAAA,SAAS,CAAClM,UAAV,CAAqB,KAArB;AACA,WAAKgM,SAAL,CAAe59G,MAAf,CAAsBP,QAAtB;AACAq+G,MAAAA,SAAS,CAAClM,UAAV,CAAqB,IAArB,EAhBsB,CAkBtB;;AACAxpI,MAAAA,MAAM,CAACgI,MAAP,CAAchb,GAAd,CAAkB0oJ,SAAS,CAACx3D,KAA5B;AACA,WAAK8tD,QAAL,CAAcp0G,MAAd,CAAqBP,QAArB,EAA+B,KAAKg+G,gBAApC,EApBsB,CAsBtB;;AACAr1I,MAAAA,MAAM,CAACgI,MAAP,CAAcP,IAAd,GAAqBA,IAArB;AACA6vB,MAAAA,KAAK,CAACloD,UAAN,GAAmBA,UAAnB,CAxBsB,CA0BtB;;AACA,WAAKqmK,WAAL,CAAiB79G,MAAjB,CAAwBP,QAAxB,EAAkC,IAAlC,EAAwC,KAAKi+G,mBAA7C;;AAEA,UAAG,KAAKlrK,IAAR,EAAc;AAEb,aAAKy/J,QAAL,CAAcjyG,MAAd,CAAqBP,QAArB,EAA+B,KAAKi+G,mBAApC,EAAyD,KAAKC,0BAA9D;AAEA;AAED,KAnCD,MAmCO,IAAG,KAAK/3G,IAAL,GAAY,GAAf,EAAoB;AAE1B,WAAKokG,SAAL,CAAehqG,MAAf,CAAsBP,QAAtB,EAAgC,KAAKg+G,gBAArC;AACA,WAAK73G,IAAL,GAAY,GAAZ;AAEA;AAED;AAED;;;;;;;;AAOAljC,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAKyhK,QAAL,CAAcvvI,OAAd,CAAsBnyB,KAAtB,EAA6BC,MAA7B;AACA,SAAKitK,gBAAL,CAAsB/6I,OAAtB,CAA8BnyB,KAA9B,EAAqCC,MAArC;AAEA,UAAMkT,CAAC,GAAG,KAAK6uE,UAAL,CAAgBhiF,KAA1B;AACA,UAAMtL,CAAC,GAAG,KAAKstF,UAAL,CAAgB/hF,MAA1B;AAEA,SAAKotK,SAAL,CAAel7I,OAAf,CAAuBhf,CAAvB,EAA0Bze,CAA1B;AACA,SAAKy4K,mBAAL,CAAyBh7I,OAAzB,CAAiChf,CAAjC,EAAoCze,CAApC;AACA,SAAK04K,0BAAL,CAAgCj7I,OAAhC,CAAwChf,CAAxC,EAA2Cze,CAA3C;AACA,SAAK44K,WAAL,CAAiB5V,qBAAjB,GAAyC9J,YAAzC,CAAsD,MAAMz6I,CAA5D,EAA+D,MAAMze,CAArE;AAEA;AAED;;;;;;;;;AAQAqjK,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C;AACA,SAAK0J,QAAL,CAAc3J,UAAd,CAAyB7oG,QAAzB,EAAmCxnC,KAAnC,EAA0C7N,uBAA1C;;AAEA,QAAGm+I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC;AACA,WAAKi2K,SAAL,CAAetV,UAAf,CAA0B7oG,QAA1B,EAAoCxnC,KAApC,EAA2CswI,eAA3C;AACA,WAAK6L,QAAL,CAAc9L,UAAd,CAAyB7oG,QAAzB,EAAmCxnC,KAAnC,EAA0CswI,eAA1C;AACA,WAAKsV,WAAL,CAAiBvV,UAAjB,CAA4B7oG,QAA5B,EAAsCxnC,KAAtC,EAA6CswI,eAA7C;AAEA;AAED;;AAznBiC;;;AA6nBnC,IAAI8V,gBAAgB,GAAG,0IAAvB;AAEA;;;;;;AAMA,MAAMC,gBAAN,SAA+BvR,MAA/B,CAAsC;AAErC;;;;;AAMAjlK,EAAAA,WAAW,CAACy2K,WAAW,GAAG,IAAf,EAAqB;AAE/B,UAAM,kBAAN,EAA0BF,gBAA1B,EAA4C;AAE3CpiH,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,QAAD,EAAW,IAAIwlD,cAAJ,CAAY,KAAZ,CAAX,CADiB,EAEjB,CAAC,GAAD,EAAM,IAAIA,cAAJ,CAAY,IAAIuV,cAAJ,EAAZ,CAAN,CAFiB,CAAR;AAFiC,KAA5C;AASA;;;;;;;AAOA,SAAKprE,UAAL,GAAkB,IAAIorE,cAAJ,EAAlB;AAEA;;;;;;;AAOA,SAAK4gB,WAAL,GAAmBA,WAAnB;AAEA;AAED;;;;;;;AAMAC,EAAAA,cAAc,GAAG;AAEhB,WAAO,KAAKD,WAAZ;AAEA;AAED;;;;;;;;;AAQAE,EAAAA,cAAc,CAACF,WAAD,EAAc;AAE3BA,IAAAA,WAAW,GAAG35K,IAAI,CAACwE,KAAL,CAAWm1K,WAAX,CAAd;;AAEA,QAAGA,WAAW,GAAG,CAAd,GAAkB,CAArB,EAAwB;AAEvBA,MAAAA,WAAW,IAAI,CAAf;AAEA;;AAED,UAAMtiH,QAAQ,GAAG,KAAKA,QAAtB;AACAA,IAAAA,QAAQ,CAACz3C,GAAT,CAAa,QAAb,EAAuBxa,KAAvB,GAAgCu0K,WAAW,GAAG,GAA9C;AACAtiH,IAAAA,QAAQ,CAACz3C,GAAT,CAAa,GAAb,EAAkBxa,KAAlB,CAAwBorB,GAAxB,CAA4BmpJ,WAA5B,EAAyCA,WAAzC,EAAsD9nJ,MAAtD,CAA6D,KAAK87D,UAAlE;AAEA,SAAKgsF,WAAL,GAAmBA,WAAnB;AAEA;AAED;;;;;;;;AAOA77I,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAK+hF,UAAL,CAAgBn9D,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AACA,SAAKiuK,cAAL,CAAoB,KAAKF,WAAzB;AAEA;;AAzFoC;;;AA6FtC,IAAIG,gBAAgB,GAAG,0yGAAvB;AAEA;;;;;;;;;;;AAWA,MAAMC,oBAAN,SAAmC5R,MAAnC,CAA0C;AAEzC;;;;;;;;;;;;;;;;;;;AAoBAjlK,EAAAA,WAAW,CAAC;AACX+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MADnB;AAEXnoJ,IAAAA,KAAK,GAAG,GAFG;AAGXi7C,IAAAA,WAAW,GAAG,IAHH;AAIX2gH,IAAAA,KAAK,GAAG,GAJG;AAKX7M,IAAAA,kBAAkB,GAAG,GALV;AAMX8M,IAAAA,aAAa,GAAG,GANL;AAOX3uF,IAAAA,IAAI,GAAG,GAPI;AAQX4uF,IAAAA,MAAM,GAAG,GARE;AASXrM,IAAAA,OAAO,GAAG,GATC;AAUXsM,IAAAA,KAAK,GAAG,CAVG;AAWXn8I,IAAAA,OAAO,GAAG,CAXC;AAYXo8I,IAAAA,SAAS,GAAG,KAZD;AAaXC,IAAAA,SAAS,GAAG,KAbD;AAcXC,IAAAA,QAAQ,GAAG;AAdA,MAeR,EAfO,EAeH;AAEP,UAAM,sBAAN,EAA8BR,gBAA9B,EAAgD;AAE/C7R,MAAAA,aAF+C;AAG/C98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACE,WAAhB,GAA8BF,eAAe,CAACxL,KAHX;AAK/CvlG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,OAAD,EAAU,IAAIwlD,cAAJ,CAAYplI,KAAZ,CAAV,CADiB,EAEjB,CAAC,aAAD,EAAgB,IAAIolI,cAAJ,CAAYnqF,WAAZ,CAAhB,CAFiB,EAGjB,CAAC,OAAD,EAAU,IAAImqF,cAAJ,CAAYw2B,KAAZ,CAAV,CAHiB,EAIjB,CAAC,oBAAD,EAAuB,IAAIx2B,cAAJ,CAAY2pB,kBAAZ,CAAvB,CAJiB,EAKjB,CAAC,eAAD,EAAkB,IAAI3pB,cAAJ,CAAYy2B,aAAZ,CAAlB,CALiB,EAMjB,CAAC,MAAD,EAAS,IAAIz2B,cAAJ,CAAYl4D,IAAZ,CAAT,CANiB,EAOjB,CAAC,QAAD,EAAW,IAAIk4D,cAAJ,CAAY02B,MAAZ,CAAX,CAPiB,EAQjB,CAAC,SAAD,EAAY,IAAI12B,cAAJ,CAAYqqB,OAAZ,CAAZ,CARiB,CAAR;AALqC,KAAhD;AAkBA,SAAKsM,KAAL,GAAaA,KAAb;AACA,SAAKn8I,OAAL,GAAeA,OAAf;AACA,SAAKo8I,SAAL,GAAiBA,SAAjB;AACA,SAAKC,SAAL,GAAiBA,SAAjB;AACA,SAAKC,QAAL,GAAgBA,QAAhB;AAEA;AAED;;;;;;;AAMA,MAAIH,KAAJ,GAAY;AAEX,WAAO56J,MAAM,CAAC7b,QAAP,CAAgB,KAAKi0D,OAAL,CAAa/3C,GAAb,CAAiB,WAAjB,CAAhB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAIu6J,KAAJ,CAAU/0K,KAAV,EAAiB;AAEhBA,IAAAA,KAAK,GAAGpF,IAAI,CAACwE,KAAL,CAAWY,KAAX,CAAR;AAEA,SAAKuyD,OAAL,CAAannC,GAAb,CAAiB,WAAjB,EAA8BprB,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA9B;AACA,SAAKo3D,OAAL,CAAannC,GAAb,CAAiB,aAAjB,EAAgCprB,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAAhC;AAEA;AAED;;;;;;;AAMA,MAAIy9B,OAAJ,GAAc;AAEb,WAAOze,MAAM,CAAC7b,QAAP,CAAgB,KAAKi0D,OAAL,CAAa/3C,GAAb,CAAiB,aAAjB,CAAhB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAIoe,OAAJ,CAAY54B,KAAZ,EAAmB;AAElBA,IAAAA,KAAK,GAAGpF,IAAI,CAACwE,KAAL,CAAWY,KAAX,CAAR;AAEA,SAAKuyD,OAAL,CAAannC,GAAb,CAAiB,aAAjB,EAAgCprB,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAAhC;AACA,SAAKo3D,OAAL,CAAannC,GAAb,CAAiB,eAAjB,EAAkCprB,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAAlC;AAEA;AAED;;;;;;;AAMA,MAAI65K,SAAJ,GAAgB;AAEf,WAAO,KAAKziH,OAAL,CAAa60B,GAAb,CAAiB,YAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAI4tF,SAAJ,CAAch1K,KAAd,EAAqB;AAEpBA,IAAAA,KAAK,GAAG,KAAKuyD,OAAL,CAAannC,GAAb,CAAiB,YAAjB,EAA+B,GAA/B,CAAH,GAAyC,KAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,YAApB,CAA9C;AAEA;AAED;;;;;;;;;AAQA,MAAI63G,SAAJ,GAAgB;AAEf,WAAO,KAAK1iH,OAAL,CAAa60B,GAAb,CAAiB,YAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAI6tF,SAAJ,CAAcj1K,KAAd,EAAqB;AAEpB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAannC,GAAb,CAAiB,YAAjB,EAA+B,GAA/B;AACA,WAAK6mC,QAAL,CAAc7mC,GAAd,CAAkB,KAAlB,EAAyB,IAAIgzH,cAAJ,CAAY,IAAI/nH,cAAJ,CAAY,GAAZ,EAAiB,GAAjB,EAAsB,GAAtB,EAA2B,GAA3B,CAAZ,CAAzB;AAEA,KALD,MAKO;AAEN,WAAKk8B,OAAL,CAAa6K,MAAb,CAAoB,YAApB;AACA,WAAKnL,QAAL,CAAcmL,MAAd,CAAqB,KAArB;AAEA;AAED;AAED;;;;;;;AAMA,MAAI83G,QAAJ,GAAe;AAEd,WAAO,KAAK3iH,OAAL,CAAa60B,GAAb,CAAiB,UAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAI8tF,QAAJ,CAAal1K,KAAb,EAAoB;AAEnBA,IAAAA,KAAK,GAAG,KAAKuyD,OAAL,CAAannC,GAAb,CAAiB,UAAjB,EAA6B,GAA7B,CAAH,GAAuC,KAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,UAApB,CAA5C;AAEA;;AAnNwC;;;AAuN1C,IAAI+3G,gBAAgB,GAAG,iOAAvB;AAEA;;;;AAIA,MAAMC,cAAN,SAA6BrS,MAA7B,CAAoC;AAEnC;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACa,OAAhC;AAAyC3kE,IAAAA,OAAO,GAAG;AAAnD,MAA4D,EAA7D,EAAiE;AAE3E,UAAM,gBAAN,EAAwB04E,gBAAxB,EAA0C;AAEzCtS,MAAAA,aAFyC;AAIzC5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,OAAD,EAAU,IAAIwlD,cAAJ,CAAY,GAAZ,CAAV,CADiB,CAAR;AAJ+B,KAA1C;AAUA;;;;;;;AAOA,SAAK71D,UAAL,GAAkB,IAAIorE,cAAJ,EAAlB;AAEA;;;;;;;AAOA,SAAKl3D,OAAL,GAAeA,OAAf;AAEA;AAED;;;;;;;AAMA44E,EAAAA,UAAU,GAAG;AAEZ,WAAO,KAAK54E,OAAZ;AAEA;AAED;;;;;;;AAMA64E,EAAAA,UAAU,CAAC74E,OAAD,EAAU;AAEnB,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAK/jE,OAAL,CAAa,KAAK6vD,UAAL,CAAgBtkF,CAA7B,EAAgC,KAAKskF,UAAL,CAAgBpkF,CAAhD;AAEA;AAED;;;;;;;;AAOAu0B,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAK+hF,UAAL,CAAgBn9D,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AACA,SAAKyrD,QAAL,CAAcz3C,GAAd,CAAkB,OAAlB,EAA2Bxa,KAA3B,GAAmCpF,IAAI,CAACC,KAAL,CAAW2L,MAAM,GAAG,KAAKi2F,OAAzB,CAAnC;AAEA;;AA/EkC;;;AAmFpC,IAAI84E,gBAAgB,GAAG,mmBAAvB;AAEA,IAAIC,cAAc,GAAG,0HAArB;AAEA;;;;;;;AAOA,MAAMC,OAAO,GAAG76K,IAAI,CAACutB,EAAL,GAAU,GAA1B;AAEA;;;;;;;AAOA,MAAMutJ,GAAG,GAAG,IAAIv4I,cAAJ,EAAZ;AAEA;;;;;;;AAOA,MAAMmrB,EAAE,GAAG,IAAInrB,cAAJ,EAAX;AAEA;;;;;;;;;AASA,MAAMw4I,eAAN,SAA8B5S,MAA9B,CAAqC;AAEpC;;;;;;;;;;;AAYAjlK,EAAAA,WAAW,CAACsgC,MAAD,EAASw3I,SAAS,GAAG,IAAIz4I,cAAJ,EAArB,EAAoC;AAC9C04I,IAAAA,KAAK,GAAG,GADsC;AAE9CC,IAAAA,SAAS,GAAG,GAFkC;AAG9CC,IAAAA,QAAQ,GAAG,GAHmC;AAI9CC,IAAAA,SAAS,GAAG;AAJkC,MAK3C,EALO,EAKH;AAEP,UAAM,iBAAN,EAAyBT,gBAAzB,EAA2C;AAE1C/iH,MAAAA,YAAY,EAAEgjH,cAF4B;AAI1CvjH,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,QAAD,EAAW,IAAIwlD,cAAJ,CAAY,KAAZ,CAAX,CADiB,EAEjB,CAAC,QAAD,EAAW,IAAIA,cAAJ,CAAY,IAAIuV,cAAJ,CAAc,GAAd,EAAmB,GAAnB,CAAZ,CAAX,CAFiB,EAGjB,CAAC,gBAAD,EAAmB,IAAIvV,cAAJ,CAAY,GAAZ,CAAnB,CAHiB,EAIjB,CAAC,MAAD,EAAS,IAAIA,cAAJ,CAAY,GAAZ,CAAT,CAJiB,EAKjB,CAAC,QAAD,EAAW,IAAIA,cAAJ,CAAY,CAAC23B,QAAb,CAAX,CALiB,EAMjB,CAAC,WAAD,EAAc,IAAI33B,cAAJ,CAAY03B,SAAZ,CAAd,CANiB,EAOjB,CAAC,UAAD,EAAa,IAAI13B,cAAJ,CAAY23B,QAAZ,CAAb,CAPiB,EAQjB,CAAC,WAAD,EAAc,IAAI33B,cAAJ,CAAY43B,SAAZ,CAAd,CARiB,CAAR;AAJgC,KAA3C;AAiBA;;;;;;AAMA,SAAK53I,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAKw3I,SAAL,GAAiBA,SAAjB;AAEA;;;;;;;AAOA,SAAK9D,cAAL,GAAsB,KAAK7/G,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAAlD;AAEA;;;;;;AAMA,SAAK61K,KAAL,GAAaA,KAAb;AAEA;;;;;;;AAOA,SAAKj6G,IAAL,GAAY,GAAZ;AAEA;;;;;;;AAOA,SAAKu1G,MAAL,GAAc,KAAd;AAEA;AAED;;;;;AAIA8E,EAAAA,OAAO,GAAG;AAET,SAAKr6G,IAAL,GAAY,GAAZ;AACA,SAAKu1G,MAAL,GAAc,IAAd;AACA,SAAKl/G,QAAL,CAAcz3C,GAAd,CAAkB,QAAlB,EAA4Bxa,KAA5B,GAAoC,IAApC;AAEA;AAED;;;;;;;;;AAQA+6B,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwB7zJ,KAAxB,EAA+B;AAEpC,UAAMg2K,SAAS,GAAG,KAAKA,SAAvB;AACA,UAAMx3I,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM6zB,QAAQ,GAAG,KAAKA,QAAtB;AACA,UAAMikH,aAAa,GAAGjkH,QAAQ,CAACz3C,GAAT,CAAa,QAAb,CAAtB;;AAEA,QAAG,KAAK22J,MAAR,EAAgB;AAEf,YAAM4E,QAAQ,GAAG9jH,QAAQ,CAACz3C,GAAT,CAAa,UAAb,EAAyBxa,KAA1C,CAFe,CAIf;;AACAo+B,MAAAA,MAAM,CAACgM,iBAAP,CAAyBsrI,GAAzB;AACAptH,MAAAA,EAAE,CAACt8B,IAAH,CAAQoS,MAAM,CAACh7B,QAAf,EAAyBgpB,GAAzB,CAA6BwpJ,SAA7B,EANe,CAQf;;AACAM,MAAAA,aAAa,CAACl2K,KAAd,GAAuB01K,GAAG,CAAC55I,OAAJ,CAAYwsB,EAAZ,IAAkBmtH,OAAzC;;AAEA,UAAGS,aAAa,CAACl2K,KAAjB,EAAwB;AAEvB;AACAiyD,QAAAA,QAAQ,CAACz3C,GAAT,CAAa,gBAAb,EAA+Bxa,KAA/B,GAAuCo+B,MAAM,CAACh7B,QAAP,CAAgBuqB,UAAhB,CAA2BioJ,SAA3B,CAAvC,CAHuB,CAKvB;;AACAF,QAAAA,GAAG,CAAC1pJ,IAAJ,CAAS4pJ,SAAT,EAAoBz3I,OAApB,CAA4BC,MAA5B;AACA,aAAK0zI,cAAL,CAAoB1mJ,GAApB,CAAwB,CAACsqJ,GAAG,CAACzxK,CAAJ,GAAQ,GAAT,IAAgB,GAAxC,EAA6C,CAACyxK,GAAG,CAACvxK,CAAJ,GAAQ,GAAT,IAAgB,GAA7D;AAEA,OApBc,CAsBf;;;AACA,WAAKy3D,IAAL,IAAah8D,KAAK,GAAG,KAAKi2K,KAA1B;AACA,YAAMl2I,MAAM,GAAG,KAAKi8B,IAAL,GAAYm6G,QAA3B;AACA9jH,MAAAA,QAAQ,CAACz3C,GAAT,CAAa,QAAb,EAAuBxa,KAAvB,GAA+B2/B,MAA/B;;AAEA,UAAGA,MAAM,IAAI,CAACsyB,QAAQ,CAACz3C,GAAT,CAAa,WAAb,EAA0Bxa,KAA1B,GAAkC+1K,QAAnC,IAA+C,GAA5D,EAAiE;AAEhE,aAAK5E,MAAL,GAAc,KAAd;AACA+E,QAAAA,aAAa,CAACl2K,KAAd,GAAsB,KAAtB;AAEA;AAED;AAED;;AA3JmC;AA+JrC;;;;;;;;;;;;;;;AAYA,MAAMm2K,oBAAN,SAAmCrO,WAAnC,CAA+C;AAE9C;;;;;;;AAQAhqK,EAAAA,WAAW,CAAC43D,KAAD,EAAQt3B,MAAR,EAAgBx2B,OAAhB,EAAyB;AAEnC,UAAMA,OAAN;AAEA;;;;;;;AAOA,SAAK8tD,KAAL,GAAaA,KAAb;AAEA;;;;;;;AAOA,SAAKt3B,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAK4hI,SAAL,GAAiB,IAAIb,SAAJ,CAAc,IAAd,EAAoB,IAApB,EAA0B,KAA1B,CAAjB;AACA,SAAKa,SAAL,CAAeZ,kBAAf,GAAoC,IAAIn/J,YAAJ,CAAU,QAAV,CAApC;AAEA;;;;;;;AAOA,SAAKmgK,UAAL,GAAkB,IAAIL,UAAJ,CAAerqG,KAAf,EAAsBt3B,MAAtB,CAAlB;AACA,SAAKgiI,UAAL,CAAgBnqG,KAAhB,GAAwB,KAAxB;AAEA;;;;;;;AAOA,SAAKmgH,YAAL,GAAoB,IAAIrW,UAAJ,CAAerqG,KAAf,EAAsBt3B,MAAtB,EAA8B,IAAIuiB,wBAAJ,CAAsB;AAAEtmD,MAAAA,KAAK,EAAE;AAAT,KAAtB,CAA9B,CAApB;AACA,SAAK+7K,YAAL,CAAkBngH,KAAlB,GAA0B,KAA1B;AAEA;;;;;;;AAOA,SAAKogH,cAAL,GAAsB,CAAC,MAAM;AAE5B,YAAMC,eAAe,GAAG,IAAIrqI,YAAJ,EAAxB;AACA,YAAM2oE,IAAI,GAAG,IAAImrD,UAAJ,CAAeuW,eAAf,EAAgCl4I,MAAhC,CAAb;AAEAk4I,MAAAA,eAAe,CAAC9oK,UAAhB,GAA6BkoD,KAAK,CAACloD,UAAnC;AACAonG,MAAAA,IAAI,CAAC3+C,KAAL,GAAa,KAAb;AAEA,aAAO2+C,IAAP;AAEA,KAVqB,GAAtB;AAYA;;;;;;;;AAOA,SAAK2hE,qBAAL,GAA6B,IAAIt+I,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AACxD1D,MAAAA,SAAS,EAAExU,mBAD6C;AAExDuU,MAAAA,SAAS,EAAEvU,mBAF6C;AAGxDwY,MAAAA,aAAa,EAAE,KAHyC;AAIxDD,MAAAA,WAAW,EAAE;AAJ2C,KAA5B,CAA7B;AAOA,SAAKi+I,qBAAL,CAA2Bl+I,OAA3B,CAAmCnmB,IAAnC,GAA0C,iBAA1C;AACA,SAAKqkK,qBAAL,CAA2Bl+I,OAA3B,CAAmCpD,eAAnC,GAAqD,KAArD;AAEA;;;;;;AAMA,SAAK6+I,SAAL,GAAiB,IAAIrM,SAAJ,EAAjB;AAEA;;;;;;AAMA,SAAKlN,QAAL,GAAgB,KAAhB;AAEA;AAED;;;;;;;AAMA,MAAIic,gBAAJ,GAAuB;AAEtB,WAAO,CAAC,KAAKH,cAAL,CAAoBhmH,OAA5B;AAEA;AAED;;;;;;;AAMA,MAAImmH,gBAAJ,CAAqBx2K,KAArB,EAA4B;AAE3B,SAAKq2K,cAAL,CAAoBhmH,OAApB,GAA8B,CAACrwD,KAA/B;AAEA;AAED;;;;;;;;;AAQA+6B,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAMzjF,KAAK,GAAG,KAAKA,KAAnB;AACA,UAAMt3B,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM01I,SAAS,GAAG,KAAKA,SAAvB;AACA,UAAM7+G,YAAY,GAAG,KAAKshH,qBAA1B;AAEA,UAAM/oK,UAAU,GAAGkoD,KAAK,CAACloD,UAAzB;AACA,UAAMq4B,IAAI,GAAGzH,MAAM,CAACgI,MAAP,CAAcP,IAA3B;AAEA,SAAKm6H,SAAL,CAAehqG,MAAf,CAAsBP,QAAtB,EAAgCR,YAAhC;;AAEA,QAAG,CAAC,KAAKuhH,gBAAT,EAA2B;AAE1B,WAAKH,cAAL,CAAoBrgH,MAApB,CAA2BP,QAA3B,EAAqCR,YAArC;AAEA;;AAEDS,IAAAA,KAAK,CAACloD,UAAN,GAAmB,IAAnB;;AAEA,QAAG,KAAK+sJ,QAAR,EAAkB;AAEjBn8H,MAAAA,MAAM,CAACgI,MAAP,CAAchb,GAAd,CAAkB0oJ,SAAS,CAACx3D,KAA5B;AACA,WAAK85D,YAAL,CAAkBpgH,MAAlB,CAAyBP,QAAzB,EAAmCR,YAAnC;AACA72B,MAAAA,MAAM,CAACgI,MAAP,CAAcP,IAAd,GAAqBA,IAArB;AAEAiuI,MAAAA,SAAS,CAAClM,UAAV,CAAqB,KAArB;AACA,WAAKxH,UAAL,CAAgBpqG,MAAhB,CAAuBP,QAAvB,EAAiCR,YAAjC;AACA6+G,MAAAA,SAAS,CAAClM,UAAV,CAAqB,IAArB;AAEA,KAVD,MAUO;AAENkM,MAAAA,SAAS,CAAClM,UAAV,CAAqB,KAArB;AACA,WAAKwO,YAAL,CAAkBpgH,MAAlB,CAAyBP,QAAzB,EAAmCR,YAAnC;AACA6+G,MAAAA,SAAS,CAAClM,UAAV,CAAqB,IAArB;AAEAxpI,MAAAA,MAAM,CAACgI,MAAP,CAAchb,GAAd,CAAkB0oJ,SAAS,CAACx3D,KAA5B;AACA,WAAK8jD,UAAL,CAAgBpqG,MAAhB,CAAuBP,QAAvB,EAAiCR,YAAjC;AACA72B,MAAAA,MAAM,CAACgI,MAAP,CAAcP,IAAd,GAAqBA,IAArB;AAEA;;AAED6vB,IAAAA,KAAK,CAACloD,UAAN,GAAmBA,UAAnB;AACA,UAAMutB,MAAN,CAAa06B,QAAb,EAAuBR,YAAvB,EAAqCkkF,SAArC;AAEA;AAED;;;;;;;;AAOAzgH,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAMkyB,OAAN,CAAcnyB,KAAd,EAAqBC,MAArB;AAEA,SAAK6vK,cAAL,CAAoB39I,OAApB,CAA4BnyB,KAA5B,EAAmCC,MAAnC;AACA,SAAK4vK,YAAL,CAAkB19I,OAAlB,CAA0BnyB,KAA1B,EAAiCC,MAAjC;AACA,SAAK45J,UAAL,CAAgB1nI,OAAhB,CAAwBnyB,KAAxB,EAA+BC,MAA/B;AAEA,SAAK+vK,qBAAL,CAA2B79I,OAA3B,CACC,KAAK6vD,UAAL,CAAgBhiF,KADjB,EAEC,KAAKgiF,UAAL,CAAgB/hF,MAFjB;AAKA;AAED;;;;;;;;;AAQA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,UAAMD,UAAN,CAAiB7oG,QAAjB,EAA2BxnC,KAA3B,EAAkCswI,eAAlC;AAEA,SAAK8X,cAAL,CAAoB/X,UAApB,CAA+B7oG,QAA/B,EAAyCxnC,KAAzC,EAAgDswI,eAAhD;AACA,SAAK6X,YAAL,CAAkB9X,UAAlB,CAA6B7oG,QAA7B,EAAuCxnC,KAAvC,EAA8CswI,eAA9C;AACA,SAAK6B,UAAL,CAAgB9B,UAAhB,CAA2B7oG,QAA3B,EAAqCxnC,KAArC,EAA4CswI,eAA5C;;AAEA,QAAG,CAACtwI,KAAD,IAAUswI,eAAe,KAAKn+I,uBAAjC,EAAmD;AAElD,WAAKm2J,qBAAL,CAA2Bl+I,OAA3B,CAAmC7D,MAAnC,GAA4CvT,gBAA5C;AAEA;;AAED,QAAGs9I,eAAe,KAAK5gK,SAAvB,EAAkC;AAEjC,WAAK44K,qBAAL,CAA2Bl+I,OAA3B,CAAmCtxB,IAAnC,GAA0Cw3J,eAA1C;AAEA;AAED;;AArP6C;;;AAyP/C,IAAIkY,gBAAgB,GAAG,0YAAvB;AAEA;;;;AAIA,MAAMC,WAAN,SAA0B3T,MAA1B,CAAiC;AAEhC;;;;;;;AAQAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwCx7E,IAAAA,SAAS,GAAG;AAApD,MAA4D,EAA7D,EAAiE;AAE3E,UAAM,aAAN,EAAqB8wF,gBAArB,EAAuC;AAEtC5T,MAAAA,aAFsC;AAItC5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,WAAD,EAAc,IAAIwlD,cAAJ,CAAYz4D,SAAZ,CAAd,CADiB,CAAR;AAJ4B,KAAvC;AAUA;;AAtB+B,EA0BjC;;;;AACA,IAAIgxF,kBAAkB,GAAG,oQAAzB,EAEA;;AACA,IAAIC,gBAAgB,GAAG,4tiEAAvB;AAEA,IAAIC,gBAAgB,GAAG,4kCAAvB;AAEA,IAAIC,cAAc,GAAG,0JAArB;AAEA;;;;;;AAMA,MAAMC,UAAN,SAAyBhU,MAAzB,CAAgC;AAE/B;;;;;;;;AASAjlK,EAAAA,WAAW,CAACk5K,WAAD,EAAcC,SAAd,EAAyB7lK,MAAM,GAAG8lK,UAAU,CAACC,IAA7C,EAAmDC,iBAAiB,GAAGhgB,iBAAiB,CAACC,KAAzF,EAAgG;AAE1G,UAAM,YAAN,EAAoBwf,gBAApB,EAAsC;AAErCrkH,MAAAA,YAAY,EAAEskH,cAFuB;AAGrCjU,MAAAA,aAAa,EAAEtC,aAAa,CAACY,MAHQ;AAIrCp7G,MAAAA,UAAU,EAAEi9G,eAAe,CAACE,WAJS;AAMrCjxG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,WAAD,EAAc,IAAIwlD,cAAJ,CAAY,IAAZ,CAAd,CADiB,CAAR;AAN2B,KAAtC;AAYA;;;;;;;AAOA,SAAKi5B,iBAAL,GAAyB,IAAIp/I,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AACpD1D,MAAAA,SAAS,EAAExU,mBADyC;AAEpDwY,MAAAA,aAAa,EAAE,KAFqC;AAGpDD,MAAAA,WAAW,EAAE,KAHuC;AAIpD9D,MAAAA,MAAM,EAAEvT;AAJ4C,KAA5B,CAAzB;AAOA,SAAKo2J,iBAAL,CAAuBh/I,OAAvB,CAA+BnmB,IAA/B,GAAsC,YAAtC;AAEA;;;;;;;AAOA,SAAKolK,mBAAL,GAA2B,KAAKD,iBAAL,CAAuBtrJ,KAAvB,EAA3B;AAEA,SAAKurJ,mBAAL,CAAyBj/I,OAAzB,CAAiCnmB,IAAjC,GAAwC,cAAxC;AACA,SAAKolK,mBAAL,CAAyBj/I,OAAzB,CAAiC7D,MAAjC,GAA0CtT,iBAA1C;AAEA,SAAK+wC,QAAL,CAAcz3C,GAAd,CAAkB,WAAlB,EAA+Bxa,KAA/B,GAAuC,KAAKs3K,mBAAL,CAAyBj/I,OAAhE;AAEA;;;;;;;AAOA,SAAK2nI,SAAL,GAAiB,IAAIb,SAAJ,CAAc,IAAd,EAAoB,KAApB,EAA2B,KAA3B,CAAjB;AACA,SAAKa,SAAL,CAAeZ,kBAAf,GAAoC,IAAIn/J,YAAJ,CAAU,QAAV,CAApC;AACA,SAAK+/J,SAAL,CAAeX,kBAAf,GAAoC,GAApC;AAEA;;;;;;;AAOA,SAAKkY,iBAAL,GAAyB,IAAIxR,UAAJ,CACxB,IAAI5O,qBAAJ,CAA0B,IAAIxD,cAAJ,EAA1B,EAA2CyjB,iBAA3C,CADwB,CAAzB;;AAIA,QAAGA,iBAAiB,KAAKhgB,iBAAiB,CAACI,KAA3C,EAAkD;AAEjD,WAAKzxG,UAAL,IAAmBi9G,eAAe,CAACxL,KAAnC;AAEA;AAED;;;;;;;;AAOA,SAAKggB,WAAL,GAAmB,IAAIzR,UAAJ,CAAe,IAAI9K,mBAAJ,EAAf,CAAnB;;AAEA,SAAKuc,WAAL,CAAiBvZ,qBAAjB,GAAyChsG,QAAzC,CAAkD8pG,aAAlD,CAAgE/7J,KAAhE,GAAwE,CAAC,MAAM;AAE9E,YAAM+7J,aAAa,GAAG,IAAI7nI,cAAJ,CAAY8iJ,WAAZ,CAAtB;AACAjb,MAAAA,aAAa,CAAC7pJ,IAAd,GAAqB,aAArB;AACA6pJ,MAAAA,aAAa,CAACznI,SAAd,GAA0B5U,oBAA1B;AACAq8I,MAAAA,aAAa,CAACxnI,SAAd,GAA0B7U,oBAA1B;AACAq8I,MAAAA,aAAa,CAACvnI,MAAd,GAAuBtT,iBAAvB;AACA66I,MAAAA,aAAa,CAAC9mI,eAAd,GAAgC,KAAhC;AACA8mI,MAAAA,aAAa,CAACp1G,WAAd,GAA4B,IAA5B;AACAo1G,MAAAA,aAAa,CAAC5mI,KAAd,GAAsB,IAAtB;AAEA,aAAO4mI,aAAP;AAEA,KAbuE,GAAxE;;AAeA,SAAKyb,WAAL,CAAiBvZ,qBAAjB,GAAyChsG,QAAzC,CAAkD6pG,WAAlD,CAA8D97J,KAA9D,GAAsE,CAAC,MAAM;AAE5E,YAAM87J,WAAW,GAAG,IAAI5nI,cAAJ,CAAY+iJ,SAAZ,CAApB;AACAnb,MAAAA,WAAW,CAAC5pJ,IAAZ,GAAmB,WAAnB;AACA4pJ,MAAAA,WAAW,CAACvnI,SAAZ,GAAwBxU,mBAAxB;AACA+7I,MAAAA,WAAW,CAACtnI,MAAZ,GAAqBtT,iBAArB;AACA46I,MAAAA,WAAW,CAAC7mI,eAAZ,GAA8B,KAA9B;AACA6mI,MAAAA,WAAW,CAACn1G,WAAZ,GAA0B,IAA1B;AACAm1G,MAAAA,WAAW,CAAC3mI,KAAZ,GAAoB,KAApB;AAEA,aAAO2mI,WAAP;AAEA,KAZqE,GAAtE;;AAcA,SAAK2b,WAAL,CAAiBrmK,MAAjB;AAEA;AAED;;;;;;;AAMA,MAAIsmK,qBAAJ,GAA4B;AAE3B,WAAO,KAAKH,iBAAL,CAAuBtZ,qBAAvB,EAAP;AAEA;AAED;;;;;;;;AAOA,MAAI0Z,kBAAJ,GAAyB;AAExB,WAAO,KAAKD,qBAAZ;AAEA;AAED;;;;;;;AAMA,MAAIE,eAAJ,GAAsB;AAErB,WAAO,KAAKJ,WAAL,CAAiBvZ,qBAAjB,EAAP;AAEA;AAED;;;;;;;;;;AASA/I,EAAAA,yBAAyB,CAAC93J,SAAD,EAAY;AAEpC,SAAKm6K,iBAAL,CAAuBtZ,qBAAvB,GAA+C/I,yBAA/C,CAAyE93J,SAAzE;AAEA;AAED;;;;;;;;;;AASA4+J,EAAAA,wBAAwB,CAACljD,KAAD,EAAQ;AAE/B,SAAK0+D,WAAL,CAAiBvZ,qBAAjB,GAAyCjC,wBAAzC,CAAkEljD,KAAlE;AAEA;AAED;;;;;;;AAMA2+D,EAAAA,WAAW,CAACrmK,MAAD,EAAS;AAEnB,UAAMsmK,qBAAqB,GAAG,KAAKA,qBAAnC;AACA,UAAME,eAAe,GAAG,KAAKA,eAA7B;;AAEA,YAAOxmK,MAAP;AAEC,WAAK8lK,UAAU,CAACW,GAAhB;AACCH,QAAAA,qBAAqB,CAACxiB,yBAAtB,CAAgD,IAAhD;AACA0iB,QAAAA,eAAe,CAAC5b,wBAAhB,CAAyC,CAAzC;AACA4b,QAAAA,eAAe,CAACxb,iBAAhB,GAAoC,KAApC;AACAwb,QAAAA,eAAe,CAACtb,cAAhB,GAAiC,KAAjC;AACA;;AAED,WAAK4a,UAAU,CAACnhB,MAAhB;AACC2hB,QAAAA,qBAAqB,CAACxiB,yBAAtB,CAAgD,GAAhD;AACA0iB,QAAAA,eAAe,CAAC5b,wBAAhB,CAAyC,CAAzC;AACA4b,QAAAA,eAAe,CAACxb,iBAAhB,GAAoC,KAApC;AACAwb,QAAAA,eAAe,CAACtb,cAAhB,GAAiC,KAAjC;AACA;;AAED,WAAK4a,UAAU,CAACC,IAAhB;AACCO,QAAAA,qBAAqB,CAACxiB,yBAAtB,CAAgD,GAAhD;AACA0iB,QAAAA,eAAe,CAAC5b,wBAAhB,CAAyC,EAAzC;AACA4b,QAAAA,eAAe,CAAC3b,sBAAhB,CAAuC,CAAvC;AACA2b,QAAAA,eAAe,CAAC1b,iBAAhB,CAAkC,EAAlC;AACA0b,QAAAA,eAAe,CAACxb,iBAAhB,GAAoC,IAApC;AACAwb,QAAAA,eAAe,CAACtb,cAAhB,GAAiC,IAAjC;AACA;;AAED,WAAK4a,UAAU,CAACY,KAAhB;AACCJ,QAAAA,qBAAqB,CAACxiB,yBAAtB,CAAgD,IAAhD;AACA0iB,QAAAA,eAAe,CAAC5b,wBAAhB,CAAyC,EAAzC;AACA4b,QAAAA,eAAe,CAAC3b,sBAAhB,CAAuC,EAAvC;AACA2b,QAAAA,eAAe,CAAC1b,iBAAhB,CAAkC,EAAlC;AACA0b,QAAAA,eAAe,CAACxb,iBAAhB,GAAoC,IAApC;AACAwb,QAAAA,eAAe,CAACtb,cAAhB,GAAiC,IAAjC;AACA;AAhCF;AAoCA;AAED;;;;;;;;AAOA8B,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,UAAM5yC,QAAQ,GAAG,KAAKgsI,qBAAtB;AACAhsI,IAAAA,QAAQ,CAACumB,QAAT,CAAkB35B,WAAlB,CAA8Bt4B,KAA9B,GAAsCw4B,YAAtC;AACAkT,IAAAA,QAAQ,CAAC4yC,YAAT,GAAwBA,YAAxB;AAEA;AAED;;;;;;;;;AAQAvjD,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,SAAK6mB,SAAL,CAAehqG,MAAf,CAAsBP,QAAtB,EAAgC,KAAK4hH,iBAArC;AACA,SAAKE,iBAAL,CAAuBvhH,MAAvB,CAA8BP,QAA9B,EAAwCg+F,WAAxC,EAAqD,KAAK4jB,iBAA1D;AACA,SAAKG,WAAL,CAAiBxhH,MAAjB,CAAwBP,QAAxB,EAAkC,KAAK4hH,iBAAvC,EAA0D,KAAKC,mBAA/D;AAEA;AAED;;;;;;;;AAOA5+I,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAMkxK,qBAAqB,GAAG,KAAKH,iBAAL,CAAuBtZ,qBAAvB,EAA9B;AACA,UAAM2Z,eAAe,GAAG,KAAKJ,WAAL,CAAiBvZ,qBAAjB,EAAxB;AAEA,SAAKoZ,iBAAL,CAAuB3+I,OAAvB,CAA+BnyB,KAA/B,EAAsCC,MAAtC;AACA,SAAK8wK,mBAAL,CAAyB5+I,OAAzB,CAAiCnyB,KAAjC,EAAwCC,MAAxC;AAEAoxK,IAAAA,eAAe,CAAC3lH,QAAhB,CAAyBs2B,UAAzB,CAAoCvoF,KAApC,CAA0CorB,GAA1C,CAA8C7kB,KAA9C,EAAqDC,MAArD;AACAoxK,IAAAA,eAAe,CAAC3lH,QAAhB,CAAyB21F,SAAzB,CAAmC5nJ,KAAnC,CAAyCorB,GAAzC,CAA6C,MAAM7kB,KAAnD,EAA0D,MAAMC,MAAhE;AACAkxK,IAAAA,qBAAqB,CAACzlH,QAAtB,CAA+B21F,SAA/B,CAAyC5nJ,KAAzC,CAA+CgsB,IAA/C,CAAoD4rJ,eAAe,CAAC3lH,QAAhB,CAAyB21F,SAAzB,CAAmC5nJ,KAAvF;AAEA;AAED;;;;;AAIAk2B,EAAAA,OAAO,GAAG;AAET,UAAM+7B,QAAQ,GAAG,KAAKulH,WAAL,CAAiBvZ,qBAAjB,GAAyChsG,QAA1D;AACAA,IAAAA,QAAQ,CAAC8pG,aAAT,CAAuB/7J,KAAvB,CAA6Bk2B,OAA7B;AACA+7B,IAAAA,QAAQ,CAAC6pG,WAAT,CAAqB97J,KAArB,CAA2Bk2B,OAA3B;AAEA,UAAMA,OAAN;AAEA;AAED;;;;;;;;;;;;;;;AAcA,aAAWygJ,kBAAX,GAAgC;AAE/B,WAAOA,kBAAP;AAEA;AAED;;;;;;;;;;;;;;;AAcA,aAAWC,gBAAX,GAA8B;AAE7B,WAAOA,gBAAP;AAEA;;AAzV8B;AA6VhC;;;;;;;;;;;;AAUA,MAAMM,UAAU,GAAG;AAElBW,EAAAA,GAAG,EAAE,CAFa;AAGlB9hB,EAAAA,MAAM,EAAE,CAHU;AAIlBohB,EAAAA,IAAI,EAAE,CAJY;AAKlBW,EAAAA,KAAK,EAAE;AALW,CAAnB;;AASA,IAAIC,gBAAgB,GAAG,u6CAAvB;AAEA;;;;;;;;;;;;;;;;;;;;;AAqBA,MAAMC,UAAN,SAAyBjV,MAAzB,CAAgC;AAE/B;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BAjlK,EAAAA,WAAW,CAACsgC,MAAD,EAASs4H,YAAT,EAAuB;AACjCmM,IAAAA,aAAa,GAAGtC,aAAa,CAAC9F,QADG;AAEjCwd,IAAAA,eAAe,GAAG,IAFe;AAGjCC,IAAAA,oBAAoB,GAAG,IAHU;AAIjCnb,IAAAA,iBAAiB,GAAG,IAJa;AAKjCnkI,IAAAA,OAAO,GAAG,CALuB;AAMjCm8I,IAAAA,KAAK,GAAG,CANyB;AAOjCoD,IAAAA,iBAAiB,GAAG,IAPa;AAQjCC,IAAAA,eAAe,GAAG,IARe;AASjCC,IAAAA,cAAc,GAAG,MATgB;AAUjCC,IAAAA,YAAY,GAAG,KAVkB;AAWjCjb,IAAAA,cAAc,GAAG,IAXgB;AAYjCkb,IAAAA,kBAAkB,GAAG,GAZY;AAajC54I,IAAAA,MAAM,GAAG,MAbwB;AAcjCgmD,IAAAA,SAAS,GAAG,GAdqB;AAejCO,IAAAA,IAAI,GAAG,KAf0B;AAgBjCo3E,IAAAA,IAAI,GAAG,IAhB0B;AAiBjCmB,IAAAA,eAAe,GAAG,GAjBe;AAkBjCl4J,IAAAA,KAAK,GAAGi3J,OAAO,CAACD,SAlBiB;AAmBjC/2J,IAAAA,MAAM,GAAGg3J,OAAO,CAACD;AAnBgB,MAoB9B,EApBO,EAoBH;AAEP,UAAM,YAAN,EAAoBwa,gBAApB,EAAsC;AAErClV,MAAAA,aAFqC;AAGrC98G,MAAAA,UAAU,EAAEi9G,eAAe,CAACxL,KAHS;AAKrCvlG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,UAAD,EAAa,IAAIwlD,cAAJ,CAAY,IAAZ,CAAb,CADiB,EAEjB,CAAC,oBAAD,EAAuB,IAAIA,cAAJ,CAAYm6B,kBAAZ,CAAvB,CAFiB,EAGjB,CAAC,OAAD,EAAU,IAAIn6B,cAAJ,CAAY,GAAZ,CAAV,CAHiB,CAGW;AAHX,OAAR;AAL2B,KAAtC;AAaA;;;;;;;AAOA,SAAKo6B,cAAL,GAAsB,IAAIvgJ,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AACjD1D,MAAAA,SAAS,EAAExU,mBADsC;AAEjDuU,MAAAA,SAAS,EAAEvU,mBAFsC;AAGjDwY,MAAAA,aAAa,EAAE,KAHkC;AAIjDD,MAAAA,WAAW,EAAE,KAJoC;AAKjD9D,MAAAA,MAAM,EAAEvT;AALyC,KAA5B,CAAtB;AAQA,SAAKu3J,cAAL,CAAoBngJ,OAApB,CAA4BnmB,IAA5B,GAAmC,WAAnC;AACA,SAAKsmK,cAAL,CAAoBngJ,OAApB,CAA4BpD,eAA5B,GAA8C,KAA9C;AAEA,SAAKg9B,QAAL,CAAcz3C,GAAd,CAAkB,UAAlB,EAA8Bxa,KAA9B,GAAsC,KAAKw4K,cAAL,CAAoBngJ,OAA1D;AAEA;;;;;;AAMA,SAAKkwD,UAAL,GAAkB,IAAIi1E,OAAJ,CAAY,IAAZ,EAAkBj3J,KAAlB,EAAyBC,MAAzB,EAAiCi4J,eAAjC,CAAlB;AAEA;;;;;;;AAOA,SAAK9jK,CAAL,GAAS,GAAT;AAEA;;;;;;;AAOA,SAAKyjC,MAAL,GAAcA,MAAd;AAEA;;;;;;;AAOA,SAAKq6I,QAAL,GAAgB,IAAI1S,UAAJ,CAAe,CAAC,MAAM;AAErC,YAAM/I,YAAY,GAAG,IAAI0O,YAAJ,CAAiB,EAAjB,EAAqB,EAArB,CAArB;AACA1O,MAAAA,YAAY,CAAC5oI,KAAb,GAAqB4oI,YAAY,CAAC3oI,KAAb,GAAqB9U,qBAA1C;AAEA,YAAMmsB,QAAQ,GAAG,IAAIgxH,YAAJ,CAAiBt+H,MAAjB,CAAjB;AACAsN,MAAAA,QAAQ,CAACumB,QAAT,CAAkB+qG,YAAlB,CAA+Bh9J,KAA/B,GAAuCg9J,YAAvC;AACAtxH,MAAAA,QAAQ,CAACumB,QAAT,CAAkB0zB,SAAlB,CAA4B3lF,KAA5B,GAAoC2lF,SAApC;AACAj6C,MAAAA,QAAQ,CAACumB,QAAT,CAAkBorG,cAAlB,CAAiCr9J,KAAjC,GAAyCq9J,cAAzC;AACA3xH,MAAAA,QAAQ,CAACumB,QAAT,CAAkBqrG,IAAlB,CAAuBt9J,KAAvB,GAA+Bs9J,IAA/B;AACA5xH,MAAAA,QAAQ,CAACumB,QAAT,CAAkBi0B,IAAlB,CAAuBlmF,KAAvB,GAA+BkmF,IAA/B;;AAEA,UAAG62E,iBAAiB,KAAK,IAAzB,EAA+B;AAE9BrxH,QAAAA,QAAQ,CAACumB,QAAT,CAAkB8qG,iBAAlB,CAAoC/8J,KAApC,GAA4C+8J,iBAA5C;AACArxH,QAAAA,QAAQ,CAAC6mB,OAAT,CAAiBmmH,YAAjB,GAAgC,GAAhC;;AAEA,YAAGR,oBAAH,EAAyB;AAExB,eAAKjmH,QAAL,CAAc7mC,GAAd,CAAkB,mBAAlB,EAAuC,IAAIgzH,cAAJ,CAAY2e,iBAAZ,CAAvC;AACA,eAAKxqG,OAAL,CAAannC,GAAb,CAAiB,wBAAjB,EAA2C,GAA3C;AACA,eAAKmnC,OAAL,CAAannC,GAAb,CAAiB,WAAjB,EAA8B,OAA9B;AAEA;AAED,OAbD,MAaO;AAENsgB,QAAAA,QAAQ,CAACumB,QAAT,CAAkBykG,YAAlB,CAA+B12J,KAA/B,GAAuC02J,YAAvC;AAEA;;AAED,aAAOhrH,QAAP;AAEA,KAjC8B,GAAf,CAAhB;AAmCA,SAAKusI,eAAL,GAAuBA,eAAvB;AACA,SAAKr/I,OAAL,GAAeA,OAAf;AACA,SAAKm8I,KAAL,GAAaA,KAAb,CAzGO,CA2GP;;AACA,SAAKp1I,MAAL,GAAeA,MAAM,GAAG,GAAV,GAAkBA,MAAM,GAAG,KAA3B,GAAoCA,MAAlD;AAEA,SAAKg5I,iBAAL,CAAuBR,iBAAvB,EAA0CC,eAA1C;AACA,SAAKQ,kBAAL,CAAwBP,cAAxB,EAAwCC,YAAxC;AAEA;AAED;;;;;;;AAMA,MAAIO,YAAJ,GAAmB;AAElB,WAAO,KAAKJ,QAAL,CAAcxa,qBAAd,EAAP;AAEA;AAED;;;;;;;AAMA,MAAIrlI,OAAJ,GAAc;AAEb,WAAOze,MAAM,CAAC,KAAK0+J,YAAL,CAAkBtmH,OAAlB,CAA0BumG,WAA3B,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIlgI,OAAJ,CAAY54B,KAAZ,EAAmB;AAElB,UAAM0rC,QAAQ,GAAG,KAAKmtI,YAAtB;AACAntI,IAAAA,QAAQ,CAAC6mB,OAAT,CAAiBumG,WAAjB,GAA+B94J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAA/B;AACAuwC,IAAAA,QAAQ,CAAC6mB,OAAT,CAAiBwmG,aAAjB,GAAiC/4J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAAjC;AACAuwC,IAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;AAED;;;;;;;AAMA,MAAIouH,KAAJ,GAAY;AAEX,WAAO56J,MAAM,CAAC,KAAK0+J,YAAL,CAAkBtmH,OAAlB,CAA0BoqG,YAA3B,CAAb;AAEA;AAED;;;;;;;AAMA,MAAIoY,KAAJ,CAAU/0K,KAAV,EAAiB;AAEhB,UAAM0rC,QAAQ,GAAG,KAAKmtI,YAAtB;AACAntI,IAAAA,QAAQ,CAAC6mB,OAAT,CAAiBoqG,YAAjB,GAAgC38J,KAAK,CAAC7E,OAAN,CAAc,CAAd,CAAhC;AACAuwC,IAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;AAED;;;;;;;AAMA,MAAIhnB,MAAJ,GAAa;AAEZ,WAAO,KAAKhlC,CAAZ;AAEA;AAED;;;;;;;AAMA,MAAIglC,MAAJ,CAAW3/B,KAAX,EAAkB;AAEjB,SAAKrF,CAAL,GAASC,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASK,KAAT,EAAgB,IAAhB,CAAT,EAAgC,GAAhC,CAAT;AAEA,UAAM2/B,MAAM,GAAG,KAAKhlC,CAAL,GAAS,KAAK4tF,UAAL,CAAgB/hF,MAAxC;AACA,UAAMklC,QAAQ,GAAG,KAAKmtI,YAAtB;AACAntI,IAAAA,QAAQ,CAAC6mB,OAAT,CAAiBqqG,MAAjB,GAA0Bj9H,MAAM,CAACxkC,OAAP,CAAe,EAAf,CAA1B;AACAuwC,IAAAA,QAAQ,CAAC6mB,OAAT,CAAiBsqG,SAAjB,GAA6B,CAACl9H,MAAM,GAAGA,MAAV,EAAkBxkC,OAAlB,CAA0B,EAA1B,CAA7B;AACAuwC,IAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;AAED;;;;;;;AAMA,MAAIsxH,eAAJ,GAAsB;AAErB,WAAQ,KAAKY,YAAL,CAAkBtmH,OAAlB,CAA0BuqG,gBAA1B,KAA+Cn/J,SAAvD;AAEA;AAED;;;;;;;AAMA,MAAIs6K,eAAJ,CAAoBj4K,KAApB,EAA2B;AAE1B,QAAG,KAAKi4K,eAAL,KAAyBj4K,KAA5B,EAAmC;AAElC,YAAM0rC,QAAQ,GAAG,KAAKmtI,YAAtB;;AAEA,UAAG74K,KAAH,EAAU;AAET0rC,QAAAA,QAAQ,CAAC6mB,OAAT,CAAiBuqG,gBAAjB,GAAoC,GAApC;AAEA,OAJD,MAIO;AAEN,eAAOpxH,QAAQ,CAAC6mB,OAAT,CAAiBuqG,gBAAxB;AAEA;;AAEDpxH,MAAAA,QAAQ,CAACib,WAAT,GAAuB,IAAvB;AAEA;AAED;AAED;;;;;;;;AAOAgyH,EAAAA,iBAAiB,CAACv7K,SAAD,EAAY07K,OAAZ,EAAqB;AAErC,SAAKD,YAAL,CAAkB5mH,QAAlB,CAA2BirG,cAA3B,CAA0Cl9J,KAA1C,CAAgDorB,GAAhD,CACCxwB,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASvC,SAAT,EAAoB,GAApB,CAAT,EAAmC,GAAnC,CADD,EAECxC,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASvC,SAAS,GAAG07K,OAArB,EAA8B,GAA9B,CAAT,EAA6C,GAA7C,CAFD;AAKA;AAED;;;;;;;;AAOAF,EAAAA,kBAAkB,CAACx7K,SAAD,EAAY07K,OAAZ,EAAqB;AAEtC,SAAKD,YAAL,CAAkB5mH,QAAlB,CAA2BkrG,eAA3B,CAA2Cn9J,KAA3C,CAAiDorB,GAAjD,CACCxwB,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASvC,SAAT,EAAoB,GAApB,CAAT,EAAmC,GAAnC,CADD,EAECxC,IAAI,CAAC8E,GAAL,CAAS9E,IAAI,CAAC+E,GAAL,CAASvC,SAAS,GAAG07K,OAArB,EAA8B,GAA9B,CAAT,EAA6C,GAA7C,CAFD;AAKA;AAED;;;;;;;;AAOA1a,EAAAA,eAAe,CAAC5lI,YAAD,EAAe8lD,YAAY,GAAG,CAA9B,EAAiC;AAE/C,UAAM5yC,QAAQ,GAAG,KAAKmtI,YAAtB;;AAEA,QAAGntI,QAAQ,CAAC6mB,OAAT,CAAiBmmH,YAAjB,KAAkC/6K,SAArC,EAAgD;AAE/C+tC,MAAAA,QAAQ,CAACumB,QAAT,CAAkB8qG,iBAAlB,CAAoC/8J,KAApC,GAA4Cw4B,YAA5C;AACAkT,MAAAA,QAAQ,CAAC4yC,YAAT,GAAwBA,YAAxB;AAEA;AAED;AAED;;;;;;;;;AAQAvjD,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,SAAKs/B,QAAL,CAAcziH,MAAd,CAAqBP,QAArB,EAA+B,IAA/B,EAAqC,KAAK+iH,cAA1C;AAEA;AAED;;;;;;;;;AAQA9/I,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,UAAM+hF,UAAU,GAAG,KAAKA,UAAxB;AACAA,IAAAA,UAAU,CAACy3B,IAAX,CAAgB50F,GAAhB,CAAoB7kB,KAApB,EAA2BC,MAA3B;AAEA,UAAMkT,CAAC,GAAG6uE,UAAU,CAAChiF,KAArB;AACA,UAAMtL,CAAC,GAAGstF,UAAU,CAAC/hF,MAArB;AAEA,SAAKgyK,cAAL,CAAoB9/I,OAApB,CAA4Bhf,CAA5B,EAA+Bze,CAA/B;AACA,SAAK49K,YAAL,CAAkB1kB,YAAlB,CAA+B,MAAMz6I,CAArC,EAAwC,MAAMze,CAA9C;AAEA,UAAMmjC,MAAM,GAAG,KAAKA,MAApB;AACA,UAAM6zB,QAAQ,GAAG,KAAK4mH,YAAL,CAAkB5mH,QAAnC;AACAA,IAAAA,QAAQ,CAACmrG,UAAT,CAAoBp9J,KAApB,CAA0BorB,GAA1B,CAA8B1R,CAA9B,EAAiCze,CAAjC,EAAoCyxB,YAApC,CAAiD,IAAjD;AACAulC,IAAAA,QAAQ,CAACgrG,uBAAT,CAAiCj9J,KAAjC,CAAuC0xB,UAAvC,CAAkD0M,MAAM,CAACE,gBAAzD;AACA2zB,IAAAA,QAAQ,CAAC3zB,gBAAT,CAA0Bt+B,KAA1B,CAAgCgsB,IAAhC,CAAqCoS,MAAM,CAACE,gBAA5C,EAfsB,CAiBtB;;AACA,SAAKqB,MAAL,GAAc,KAAKhlC,CAAnB;AAEA;;AA1Y8B;;;AA8YhC,IAAIo+K,gBAAgB,GAAG,qYAAvB;AAEA,IAAIC,cAAc,GAAG,mQAArB;AAEA;;;;AAIA,MAAMC,aAAN,SAA4BlW,MAA5B,CAAmC;AAElC;;;;;;;;AASAjlK,EAAAA,WAAW,CAAC;AAAE+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MAAhC;AAAwC9oI,IAAAA,OAAO,GAAG,IAAlD;AAAwD6gJ,IAAAA,gBAAgB,GAAG;AAA3E,MAAqF,EAAtF,EAA0F;AAEpG,UAAM,eAAN,EAAuBH,gBAAvB,EAAyC;AAExClW,MAAAA,aAFwC;AAIxCtwG,MAAAA,OAAO,EAAE,IAAIqmC,GAAJ,CAAQ,CAChB,CAAC,OAAD,EAAU,OAAV,CADgB,CAAR,CAJ+B;AAQxC3mC,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,SAAD,EAAY,IAAIwlD,cAAJ,CAAY,IAAZ,CAAZ,CADiB,CAAR;AAR8B,KAAzC;AAcA,SAAK/lH,OAAL,GAAeA,OAAf;AACA,SAAK6gJ,gBAAL,GAAwBA,gBAAxB;AAEA;AAED;;;;;;;AAMA,MAAI7gJ,OAAJ,GAAc;AAEb,WAAO,KAAK45B,QAAL,CAAcz3C,GAAd,CAAkB,SAAlB,EAA6Bxa,KAApC;AAEA;AAED;;;;;;;;;;AASA,MAAIq4B,OAAJ,CAAYr4B,KAAZ,EAAmB;AAElB,SAAKiyD,QAAL,CAAcz3C,GAAd,CAAkB,SAAlB,EAA6Bxa,KAA7B,GAAqCA,KAArC;;AAEA,QAAGA,KAAK,KAAK,IAAb,EAAmB;AAElB,UAAGA,KAAK,CAAC00B,QAAN,KAAmBrP,mBAAtB,EAAoC;AAEnC,aAAKktC,OAAL,CAAannC,GAAb,CAAiB,sBAAjB,EAAyC,qBAAzC;AAEA,OAJD,MAIO,IAAGprB,KAAK,CAAC00B,QAAN,KAAmBtP,qBAAtB,EAAsC;AAE5C,aAAKmtC,OAAL,CAAannC,GAAb,CAAiB,sBAAjB,EAAyC,OAAzC;AAEA,OAJM,MAIA;AAENC,QAAAA,OAAO,CAACliB,GAAR,CAAY,2BAA2BnJ,KAAK,CAAC00B,QAA7C;AAEA;AAED;AAED;AAED;;;;;;;;;;AASA,MAAIwkJ,gBAAJ,GAAuB;AAEtB,WAAO,KAAK3mH,OAAL,CAAa60B,GAAb,CAAiB,mBAAjB,CAAP;AAEA;AAED;;;;;;;;;;AASA,MAAI8xF,gBAAJ,CAAqBl5K,KAArB,EAA4B;AAE3B,QAAGA,KAAH,EAAU;AAET,UAAG,KAAKw4D,WAAR,EAAqB;AAEpB,aAAKA,WAAL,GAAmB,KAAnB;AAEA;;AAED,WAAKjG,OAAL,CAAannC,GAAb,CAAiB,mBAAjB,EAAsC,GAAtC;AACA,WAAK6mC,QAAL,CAAc7mC,GAAd,CAAkB,OAAlB,EAA2B,IAAIgzH,cAAJ,CAAY,GAAZ,CAA3B;AACA,WAAK5rF,YAAL,GAAoBwmH,cAApB;AAEA,KAZD,MAYO;AAEN,WAAKzmH,OAAL,CAAa6K,MAAb,CAAoB,mBAApB;AACA,WAAKnL,QAAL,CAAcmL,MAAd,CAAqB,OAArB;AACA,WAAK5K,YAAL,GAAoB,IAApB;AAEA;AAED;AAED;;;;;;;;;;AASA,MAAIgG,WAAJ,GAAkB;AAEjB,WAAO,KAAKjG,OAAL,CAAa60B,GAAb,CAAiB,cAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAI5uB,WAAJ,CAAgBx4D,KAAhB,EAAuB;AAEtB,QAAGA,KAAH,EAAU;AAET,UAAG,KAAKk5K,gBAAR,EAA0B;AAEzB,aAAKA,gBAAL,GAAwB,KAAxB;AAEA;;AAED,WAAK3mH,OAAL,CAAannC,GAAb,CAAiB,cAAjB,EAAiC,GAAjC;AACA,WAAK6mC,QAAL,CAAc7mC,GAAd,CAAkB,aAAlB,EAAiC,IAAIgzH,cAAJ,CAAY,IAAIvvH,cAAJ,EAAZ,CAAjC;AACA,WAAK2jC,YAAL,GAAoBwmH,cAApB;AAEA,KAZD,MAYO;AAEN,WAAKzmH,OAAL,CAAa6K,MAAb,CAAoB,cAApB;AACA,WAAKnL,QAAL,CAAcmL,MAAd,CAAqB,aAArB;AACA,WAAK5K,YAAL,GAAoB,IAApB;AAEA;AAED;AAED;;;;;;;;;;;;;;AAaA2mH,EAAAA,qBAAqB,CAACx+K,CAAD,EAAIG,CAAC,GAAGH,CAAR,EAAWI,CAAC,GAAGJ,CAAf,EAAkBK,CAAC,GAAGL,CAAtB,EAAyB;AAE7C,UAAMy+K,IAAI,GAAG,MAAb;AACA,QAAIC,OAAO,GAAG,EAAd;;AAEA,QAAG1+K,CAAC,KAAK43J,YAAY,CAACC,GAAnB,IAA0B13J,CAAC,KAAKy3J,YAAY,CAACE,KAA7C,IACF13J,CAAC,KAAKw3J,YAAY,CAACG,IADjB,IACyB13J,CAAC,KAAKu3J,YAAY,CAACI,KAD/C,EACsD;AAErD0mB,MAAAA,OAAO,GAAG,CAAC,GAAD,EAAMD,IAAI,CAACz+K,CAAD,CAAV,EAAey+K,IAAI,CAACt+K,CAAD,CAAnB,EAAwBs+K,IAAI,CAACr+K,CAAD,CAA5B,EAAiCq+K,IAAI,CAACp+K,CAAD,CAArC,EAA0CgL,IAA1C,CAA+C,EAA/C,CAAV;AAEA;;AAED,SAAKusD,OAAL,CAAannC,GAAb,CAAiB,OAAjB,EAA0B,UAAUiuJ,OAApC;AAEA;AAED;;;;;;;;;AAQAt+I,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,UAAM9gH,OAAO,GAAG,KAAK45B,QAAL,CAAcz3C,GAAd,CAAkB,SAAlB,EAA6Bxa,KAA7C;;AAEA,QAAG,KAAKw4D,WAAL,IAAoBngC,OAAO,CAACrD,gBAA/B,EAAiD;AAEhDqD,MAAAA,OAAO,CAAC5C,YAAR;AACA,WAAKw8B,QAAL,CAAcz3C,GAAd,CAAkB,aAAlB,EAAiCxa,KAAjC,CAAuCgsB,IAAvC,CAA4CqM,OAAO,CAAC1G,MAApD;AAEA;AAED;;AA5NiC;;;AAgOnC,IAAI2nJ,gBAAgB,GAAG,6lBAAvB;AAEA;;;;;;;;;;;;AAYA,MAAMC,iBAAN,SAAgCxW,MAAhC,CAAuC;AAEtC;;;;;;;;;;;;AAaAjlK,EAAAA,WAAW,CAAC;AACX+kK,IAAAA,aAAa,GAAGtC,aAAa,CAACY,MADnB;AAEXqY,IAAAA,QAAQ,GAAG,IAFA;AAGXjxF,IAAAA,UAAU,GAAG,GAHF;AAIXkxF,IAAAA,UAAU,GAAG,GAJF;AAKXC,IAAAA,YAAY,GAAG,IALJ;AAMXC,IAAAA,gBAAgB,GAAG,GANR;AAOXC,IAAAA,cAAc,GAAG;AAPN,MAQR,EARO,EAQH;AAEP,UAAM,mBAAN,EAA2BN,gBAA3B,EAA6C;AAE5CzW,MAAAA,aAF4C;AAI5C5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,cAAD,EAAiB,IAAIwlD,cAAJ,CAAY,IAAZ,CAAjB,CADiB,EAEjB,CAAC,YAAD,EAAe,IAAIA,cAAJ,CAAYq7B,UAAZ,CAAf,CAFiB,EAGjB,CAAC,cAAD,EAAiB,IAAIr7B,cAAJ,CAAYs7B,YAAZ,CAAjB,CAHiB,EAIjB,CAAC,kBAAD,EAAqB,IAAIt7B,cAAJ,CAAYu7B,gBAAZ,CAArB,CAJiB,CAAR;AAJkC,KAA7C;AAaA;;;;;;;;AAQA,SAAKE,qBAAL,GAA6B,IAAI5hJ,wBAAJ,CAAsB,CAAtB,EAAyB,CAAzB,EAA4B;AACxD1D,MAAAA,SAAS,EAAGrU,oCAA6BviB,SAA9B,GAA2CuiB,+BAA3C,GAAsEC,+BADzB;AAExDmU,MAAAA,SAAS,EAAEvU,mBAF6C;AAGxDwY,MAAAA,aAAa,EAAE,KAHyC;AAIxDD,MAAAA,WAAW,EAAE,KAJ2C;AAKxD9D,MAAAA,MAAM,EAAEvT;AALgD,KAA5B,CAA7B;AAQA,SAAK44J,qBAAL,CAA2BxhJ,OAA3B,CAAmCnmB,IAAnC,GAA0C,uBAA1C;AACA,SAAK2nK,qBAAL,CAA2BxhJ,OAA3B,CAAmCpD,eAAnC,GAAqD,IAArD;AAEA;;;;;;;AAOA,SAAK6kJ,mBAAL,GAA2B,KAAKD,qBAAL,CAA2B9tJ,KAA3B,EAA3B;AACA,SAAK+tJ,mBAAL,CAAyBzhJ,OAAzB,CAAiCnmB,IAAjC,GAAwC,8BAAxC;AACA,SAAK4nK,mBAAL,CAAyBzhJ,OAAzB,CAAiCpD,eAAjC,GAAmD,KAAnD;AACA,SAAK6kJ,mBAAL,CAAyBzhJ,OAAzB,CAAiC9D,SAAjC,GAA6CxU,mBAA7C;AAEA;;;;;;;AAOA,SAAKg6J,oBAAL,GAA4B,KAAKD,mBAAL,CAAyB/tJ,KAAzB,EAA5B;AACA,SAAKguJ,oBAAL,CAA0B1hJ,OAA1B,CAAkCnmB,IAAlC,GAAyC,+BAAzC;AAEA;;;;;;;AAOA,SAAK8nK,QAAL,GAAgB,IAAInU,QAAJ,CAAa,KAAKkU,oBAAlB,EAAwC,KAAxC,CAAhB;AAEA;;;;;;;AAOA,SAAK7R,aAAL,GAAqB,IAAInC,UAAJ,CAAe,IAAI5M,iBAAJ,EAAf,CAArB;AAEA,UAAMgP,iBAAiB,GAAG,KAAKD,aAAL,CAAmBjK,qBAAnB,EAA1B;AACAkK,IAAAA,iBAAiB,CAAC3O,YAAlB,GAAiC,KAAjC;AAEA;;;;;;;AAOA,SAAKygB,qBAAL,GAA6B,IAAIlU,UAAJ,CAAe,IAAIlT,yBAAJ,EAAf,CAA7B;AAEA,UAAM5gG,QAAQ,GAAG,KAAKgoH,qBAAL,CAA2Bhc,qBAA3B,GAAmDhsG,QAApE;AACAA,IAAAA,QAAQ,CAAC8gG,uBAAT,CAAiC/yJ,KAAjC,GAAyC,KAAK+5K,oBAAL,CAA0B1hJ,OAAnE;AACA45B,IAAAA,QAAQ,CAAC+gG,sBAAT,CAAgChzJ,KAAhC,GAAwC,KAAK65K,qBAAL,CAA2BxhJ,OAAnE;AAEA,SAAKuhJ,cAAL,GAAsBA,cAAtB;AACA,SAAKrxF,UAAL,GAAkBA,UAAlB;AACA,SAAKixF,QAAL,GAAgBA,QAAhB;AAEA;AAED;;;;;;;AAMA,MAAIjxF,UAAJ,GAAiB;AAEhB,WAAO,KAAKsxF,qBAAL,CAA2BtzK,KAAlC;AAEA;AAED;;;;;;;;;AAQA,MAAIgiF,UAAJ,CAAevoF,KAAf,EAAsB;AAErB;AACA,UAAMk6K,QAAQ,GAAGt/K,IAAI,CAAC+E,GAAL,CAAS,CAAT,EAAY/E,IAAI,CAACyvB,IAAL,CAAUzvB,IAAI,CAAC0rJ,IAAL,CAAUtmJ,KAAV,CAAV,CAAZ,CAAjB;AACAA,IAAAA,KAAK,GAAGpF,IAAI,CAACsO,GAAL,CAAS,CAAT,EAAYgxK,QAAZ,CAAR;AAEA,SAAKL,qBAAL,CAA2BnhJ,OAA3B,CAAmC14B,KAAnC,EAA0CA,KAA1C;AACA,SAAK+5K,oBAAL,CAA0BrhJ,OAA1B,CAAkC14B,KAAlC,EAAyCA,KAAzC;AACA,SAAK85K,mBAAL,CAAyBphJ,OAAzB,CAAiC14B,KAAjC,EAAwCA,KAAxC;AAEA,SAAKi6K,qBAAL,CAA2Bhc,qBAA3B,GAAmD1rG,OAAnD,CAA2DugG,aAA3D,GAA2EonB,QAAQ,CAAC/+K,OAAT,CAAiB,CAAjB,CAA3E;AAEA;AAED;;;;;;;AAMA,MAAIq+K,QAAJ,GAAe;AAEd,WAAO,KAAKjnH,OAAL,CAAa60B,GAAb,CAAiB,mBAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAIoyF,QAAJ,CAAax5K,KAAb,EAAoB;AAEnB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAannC,GAAb,CAAiB,mBAAjB,EAAsC,GAAtC;AACA,WAAK6mC,QAAL,CAAcz3C,GAAd,CAAkB,cAAlB,EAAkCxa,KAAlC,GAA0C,KAAK85K,mBAAL,CAAyBzhJ,OAAnE;AAEA,KALD,MAKO;AAEN,WAAKk6B,OAAL,CAAa6K,MAAb,CAAoB,mBAApB;AACA,WAAKnL,QAAL,CAAcz3C,GAAd,CAAkB,cAAlB,EAAkCxa,KAAlC,GAA0C,IAA1C;AAEA;AAED;AAED;;;;;;;AAMA,MAAI45K,cAAJ,GAAqB;AAEpB,WAAO,KAAKK,qBAAL,CAA2Bhc,qBAA3B,GAAmDhsG,QAAnD,CAA4DihG,GAA5D,CAAgElzJ,KAAvE;AAEA;AAED;;;;;AAIA,MAAI45K,cAAJ,CAAmB55K,KAAnB,EAA0B;AAEzB,SAAKi6K,qBAAL,CAA2Bhc,qBAA3B,GAAmDhsG,QAAnD,CAA4DihG,GAA5D,CAAgElzJ,KAAhE,GAAwEA,KAAxE;AAEA;AAED;;;;;;AAKA,MAAIooK,WAAJ,GAAkB;AAEjB/8I,IAAAA,OAAO,CAACC,IAAR,CAAa,KAAKpZ,IAAlB,EAAwB,yCAAxB;AAEA,WAAO,GAAP;AAEA;AAED;;;;;;AAKA,MAAIk2J,WAAJ,CAAgBpoK,KAAhB,EAAuB;AAEtBqrB,IAAAA,OAAO,CAACC,IAAR,CAAa,KAAKpZ,IAAlB,EAAwB,yCAAxB;AAEA;AAED;;;;;;;;;AAQA6oB,EAAAA,MAAM,CAAC06B,QAAD,EAAWg+F,WAAX,EAAwBta,SAAxB,EAAmC;AAExC,QAAG,KAAKqgC,QAAR,EAAkB;AAEjB;AACA,WAAKtR,aAAL,CAAmBlyG,MAAnB,CAA0BP,QAA1B,EAAoCg+F,WAApC,EAAiD,KAAKomB,qBAAtD,EAHiB,CAKjB;;AACA,YAAM5nH,QAAQ,GAAG,KAAKgoH,qBAAL,CAA2Bhc,qBAA3B,GAAmDhsG,QAApE;AACAA,MAAAA,QAAQ,CAACknF,SAAT,CAAmBn5I,KAAnB,GAA2Bm5I,SAA3B;AACA,WAAK8gC,qBAAL,CAA2BjkH,MAA3B,CAAkCP,QAAlC,EAA4C,IAA5C,EAAkD,KAAKqkH,mBAAvD,EARiB,CAUjB;;AACA,WAAKE,QAAL,CAAchkH,MAAd,CAAqBP,QAArB,EAA+B,KAAKqkH,mBAApC;AAEA;AAED;AAED;;;;;;;;AAOAphJ,EAAAA,OAAO,CAACnyB,KAAD,EAAQC,MAAR,EAAgB;AAEtB,SAAKwzK,QAAL,CAActhJ,OAAd,CAAsBnyB,KAAtB,EAA6BC,MAA7B;AAEA;AAED;;;;;;;;;AAQA83J,EAAAA,UAAU,CAAC7oG,QAAD,EAAWxnC,KAAX,EAAkBswI,eAAlB,EAAmC;AAE5C,UAAMyB,SAAS,GAAG,IAAIb,SAAJ,CAAc,IAAd,EAAoB,KAApB,EAA2B,KAA3B,CAAlB;AACAa,IAAAA,SAAS,CAACZ,kBAAV,GAA+B,IAAIn/J,YAAJ,CAAU,QAAV,CAA/B;AACA+/J,IAAAA,SAAS,CAAChqG,MAAV,CAAiBP,QAAjB,EAA2B,KAAKskH,oBAAhC;AACA/Z,IAAAA,SAAS,CAAC9pI,OAAV;AAEA;;AAlSqC;;;AAsSvC,IAAIikJ,gBAAgB,GAAG,yaAAvB;AAEA;;;;AAIA,MAAMC,cAAN,SAA6BrX,MAA7B,CAAoC;AAEnC;;;;;;;;;AAUAjlK,EAAAA,WAAW,CAAC8J,OAAO,GAAG,EAAX,EAAe;AAEzB,UAAMg/G,QAAQ,GAAGtqH,MAAM,CAACme,MAAP,CAAc;AAC9BooJ,MAAAA,aAAa,EAAEtC,aAAa,CAACY,MADC;AAE9BkZ,MAAAA,KAAK,EAAE,KAFuB;AAG9B3zK,MAAAA,MAAM,EAAE,GAHsB;AAI9B4zK,MAAAA,QAAQ,EAAE;AAJoB,KAAd,EAKd1yK,OALc,CAAjB;AAOA,UAAM,gBAAN,EAAwBuyK,gBAAxB,EAA0C;AAEzCtX,MAAAA,aAAa,EAAEj8C,QAAQ,CAACi8C,aAFiB;AAIzC5wG,MAAAA,QAAQ,EAAE,IAAI2mC,GAAJ,CAAQ,CACjB,CAAC,QAAD,EAAW,IAAIwlD,cAAJ,CAAYx3B,QAAQ,CAAClgH,MAArB,CAAX,CADiB,EAEjB,CAAC,UAAD,EAAa,IAAI03I,cAAJ,CAAYx3B,QAAQ,CAAC0zD,QAArB,CAAb,CAFiB,CAAR;AAJ+B,KAA1C;AAWA,SAAKD,KAAL,GAAazzD,QAAQ,CAACyzD,KAAtB;AAEA;AAED;;;;;;;AAMA,MAAIA,KAAJ,GAAY;AAEX,WAAO,KAAK9nH,OAAL,CAAa60B,GAAb,CAAiB,OAAjB,CAAP;AAEA;AAED;;;;;;;;;AAQA,MAAIizF,KAAJ,CAAUr6K,KAAV,EAAiB;AAEhB,QAAGA,KAAH,EAAU;AAET,WAAKuyD,OAAL,CAAannC,GAAb,CAAiB,OAAjB,EAA0B,GAA1B;AAEA,KAJD,MAIO;AAEN,WAAKmnC,OAAL,CAAa6K,MAAb,CAAoB,OAApB;AAEA;AAED;;AApEkC;;;;;;;;;;;ACpzapC;;AAMA,SAASugG,IAAT,GAAgB;AAEf;AACA,OAAKttG,OAAL,GAAe,IAAf,CAHe,CAKf;;AACA,OAAKytG,SAAL,GAAiB,IAAjB,CANe,CAQf;;AACA,OAAK7nG,KAAL,GAAa,KAAb,CATe,CAWf;;AACA,OAAK+nG,cAAL,GAAsB,KAAtB;AAEA;;AAED1hK,MAAM,CAACme,MAAP,CAAekjJ,IAAI,CAACjiK,SAApB,EAA+B;AAE9Bg9B,EAAAA,OAAO,EAAE;AAAW;AAAsB,GAAE,CAFd;AAI9Bs9B,EAAAA,MAAM,EAAE;AAAW;AAAiE;AAEnF3qC,IAAAA,OAAO,CAACyD,KAAR,CAAe,4DAAf;AAEA;AAR6B,CAA/B,GAYA;;AAEA6uI,IAAI,CAAC4c,cAAL,GAAwB,YAAY;AAEnC,MAAIn8I,MAAM,GAAG,IAAIk9F,+BAAJ,CAAwB,CAAE,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAE,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAAb;AACA,MAAI/vF,QAAQ,GAAG,IAAI+xB,gCAAJ,CAAyB,CAAzB,EAA4B,CAA5B,CAAf;;AAEA,MAAIi9G,cAAc,GAAG,UAAW7uI,QAAX,EAAsB;AAE1C,SAAKkgE,KAAL,GAAa,IAAIhhD,iBAAJ,CAAUrf,QAAV,EAAoBG,QAApB,CAAb;AAEA,GAJD;;AAMApvC,EAAAA,MAAM,CAACkE,cAAP,CAAuB+5K,cAAc,CAAC7+K,SAAtC,EAAiD,UAAjD,EAA6D;AAE5D8e,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKoxF,KAAL,CAAWlgE,QAAlB;AAEA,KAN2D;AAQ5DtgB,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,WAAK4rG,KAAL,CAAWlgE,QAAX,GAAsB1rC,KAAtB;AAEA;AAZ2D,GAA7D;AAgBA1D,EAAAA,MAAM,CAACme,MAAP,CAAe8/J,cAAc,CAAC7+K,SAA9B,EAAyC;AAExCw6B,IAAAA,OAAO,EAAE,YAAY;AAEpB,WAAK01E,KAAL,CAAWrgE,QAAX,CAAoBrV,OAApB;AAEA,KANuC;AAQxC8/B,IAAAA,MAAM,EAAE,UAAWP,QAAX,EAAsB;AAE7BA,MAAAA,QAAQ,CAACO,MAAT,CAAiB,KAAK41C,KAAtB,EAA6BxtE,MAA7B;AAEA;AAZuC,GAAzC;AAgBA,SAAOm8I,cAAP;AAEA,CA7CqB,EAAtB;;;;;;;;;ACpCA;;;;;AAQA,IAAIC,UAAU,GAAG;AAEhBvoH,EAAAA,QAAQ,EAAE;AAET,gBAAY;AAAEjyD,MAAAA,KAAK,EAAE;AAAT,KAFH;AAGT,eAAW;AAAEA,MAAAA,KAAK,EAAE;AAAT;AAHF,GAFM;AAShBwyD,EAAAA,YAAY,EAAE,CAEb,mBAFa,EAIb,eAJa,EAMb,YANa,EAOb,4EAPa,EASb,GATa,EAWZxsD,IAXY,CAWN,IAXM,CATE;AAsBhBysD,EAAAA,cAAc,EAAE,CAEf,wBAFe,EAIf,6BAJe,EAMf,mBANe,EAQf,eARe,EAUf,2CAVe,EAWf,kCAXe,EAaf,GAbe,EAedzsD,IAfc,CAeR,IAfQ;AAtBA,CAAjB;;;;;;;;;;ACDA;;AAPA;;;;;;AAWA,IAAIy0K,wBAAwB,GAAG;AAE9B/gG,EAAAA,QAAQ,EAAE,oBAFoB;AAI9BznB,EAAAA,QAAQ,EAAE;AAET,gBAAY;AAAEjyD,MAAAA,KAAK,EAAE;AAAT,KAFH;AAGT,2BAAuB;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAHd;AAIT,mBAAe;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAJN;AAKT,oBAAgB;AAAEA,MAAAA,KAAK,EAAE,IAAIC,kBAAJ,CAAW,QAAX;AAAT,KALP;AAMT,sBAAkB;AAAED,MAAAA,KAAK,EAAE;AAAT;AANT,GAJoB;AAc9BwyD,EAAAA,YAAY,EAAE,CAEb,mBAFa,EAIb,eAJa,EAMb,YANa,EAQb,4EARa,EAUb,GAVa,EAYZxsD,IAZY,CAYN,IAZM,CAdgB;AA4B9BysD,EAAAA,cAAc,EAAE,CAEf,6BAFe,EAGf,4BAHe,EAIf,+BAJe,EAKf,oCALe,EAMf,4BANe,EAQf,mBARe,EAUf,eAVe,EAYf,2CAZe,EAcf,2CAde,EAgBf,oCAhBe,EAkBf,+DAlBe,EAoBf,yFApBe,EAsBf,mDAtBe,EAwBf,GAxBe,EA0BdzsD,IA1Bc,CA0BR,IA1BQ;AA5Bc,CAA/B;;;;;;;;;;ACPA;;AAYA;;AACA;;AACA;;AAlBA;;;;AAoBA;;;;;;;;;AASA,IAAI00K,eAAe,GAAG,SAAlBA,eAAkB,CAAWnyF,UAAX,EAAuByxE,QAAvB,EAAiCr6H,MAAjC,EAAyCviC,SAAzC,EAAqD;AAE1EugK,aAAK1hK,IAAL,CAAW,IAAX;;AAEAovB,EAAAA,OAAO,CAACliB,GAAR,CAAYo/E,UAAZ;AACA,OAAKyxE,QAAL,GAAkBA,QAAQ,KAAKr8J,SAAf,GAA6Bq8J,QAA7B,GAAwC,CAAxD;AACA,OAAKr6H,MAAL,GAAcA,MAAd;AACA,OAAKviC,SAAL,GAAiBA,SAAjB;AACA,OAAKmrF,UAAL,GAAoBA,UAAU,KAAK5qF,SAAjB,GAA+B,IAAI4tB,oBAAJ,CAAag9D,UAAU,CAACtkF,CAAxB,EAA2BskF,UAAU,CAACpkF,CAAtC,CAA/B,GAA2E,IAAIonB,oBAAJ,CAAa,GAAb,EAAkB,GAAlB,CAA7F,CAR0E,CAU1E;;AACA,OAAKw7C,UAAL,GAAkB,IAAI9mE,kBAAJ,CAAW,CAAX,EAAc,CAAd,EAAiB,CAAjB,CAAlB,CAX0E,CAa1E;;AACA,MAAIyD,IAAI,GAAG;AAAE6wB,IAAAA,SAAS,EAAExU,yBAAb;AAA2BuU,IAAAA,SAAS,EAAEvU,yBAAtC;AAAoDyU,IAAAA,MAAM,EAAEtT,uBAA5D;AAAwEna,IAAAA,IAAI,EAAE4zK,KAAK,CAACh6J;AAApF,GAAX;AACA,OAAKi6J,uBAAL,GAA+B,EAA/B;AACA,OAAKC,qBAAL,GAA6B,EAA7B;AACA,OAAKC,KAAL,GAAa,CAAb;AACA,MAAIC,IAAI,GAAGngL,IAAI,CAACC,KAAL,CAAY,KAAK0tF,UAAL,CAAgBtkF,CAAhB,GAAoB,CAAhC,CAAX;AACA,MAAI+2K,IAAI,GAAGpgL,IAAI,CAACC,KAAL,CAAY,KAAK0tF,UAAL,CAAgBpkF,CAAhB,GAAoB,CAAhC,CAAX;AAEA,OAAK82K,kBAAL,GAA0B,IAAIhjJ,8BAAJ,CAAuB8iJ,IAAvB,EAA6BC,IAA7B,EAAmCt3K,IAAnC,CAA1B;AACA,OAAKu3K,kBAAL,CAAwB5iJ,OAAxB,CAAgCnmB,IAAhC,GAAuC,wBAAvC;AACA,OAAK+oK,kBAAL,CAAwB5iJ,OAAxB,CAAgCpD,eAAhC,GAAkD,KAAlD;;AAEA,OAAM,IAAIr4B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKk+K,KAA1B,EAAiCl+K,CAAC,EAAlC,EAAwC;AAEvC,QAAIs+K,qBAAqB,GAAG,IAAIjjJ,8BAAJ,CAAuB8iJ,IAAvB,EAA6BC,IAA7B,EAAmCt3K,IAAnC,CAA5B;AAEAw3K,IAAAA,qBAAqB,CAAC7iJ,OAAtB,CAA8BnmB,IAA9B,GAAqC,sBAAsBtV,CAA3D;AACAs+K,IAAAA,qBAAqB,CAAC7iJ,OAAtB,CAA8BpD,eAA9B,GAAgD,KAAhD;AAEA,SAAK2lJ,uBAAL,CAA6B70K,IAA7B,CAAmCm1K,qBAAnC;AAEA,QAAIC,oBAAoB,GAAG,IAAIljJ,8BAAJ,CAAuB8iJ,IAAvB,EAA6BC,IAA7B,EAAmCt3K,IAAnC,CAA3B;AAEAy3K,IAAAA,oBAAoB,CAAC9iJ,OAArB,CAA6BnmB,IAA7B,GAAoC,sBAAsBtV,CAA1D;AACAu+K,IAAAA,oBAAoB,CAAC9iJ,OAArB,CAA6BpD,eAA7B,GAA+C,KAA/C;AAEA,SAAK4lJ,qBAAL,CAA2B90K,IAA3B,CAAiCo1K,oBAAjC;AAEAJ,IAAAA,IAAI,GAAGngL,IAAI,CAACC,KAAL,CAAYkgL,IAAI,GAAG,CAAnB,CAAP;AAEAC,IAAAA,IAAI,GAAGpgL,IAAI,CAACC,KAAL,CAAYmgL,IAAI,GAAG,CAAnB,CAAP;AAEA,GA7CyE,CA+C1E;;;AAEA,MAAKP,uDAA6B98K,SAAlC,EACC0tB,OAAO,CAACyD,KAAR,CAAe,oDAAf;AAED,MAAIssJ,cAAc,GAAGX,kDAArB;AACA,OAAKY,gBAAL,GAAwBlpH,2BAAcpmC,KAAd,CAAqBqvJ,cAAc,CAACnpH,QAApC,CAAxB;AAEA,OAAKopH,gBAAL,CAAuB,qBAAvB,EAA+Cr7K,KAA/C,GAAuD5C,SAAvD;AACA,OAAKi+K,gBAAL,CAAuB,aAAvB,EAAuCr7K,KAAvC,GAA+C,IAA/C;AAEA,OAAKs7K,sBAAL,GAA8B,IAAIhpH,2BAAJ,CAAoB;AACjDL,IAAAA,QAAQ,EAAE,KAAKopH,gBADkC;AAEjD7oH,IAAAA,YAAY,EAAE4oH,cAAc,CAAC5oH,YAFoB;AAGjDC,IAAAA,cAAc,EAAE2oH,cAAc,CAAC3oH,cAHkB;AAIjDF,IAAAA,OAAO,EAAE;AAJwC,GAApB,CAA9B;AAOA,OAAK+oH,sBAAL,CAA4Bn+H,UAA5B,GAAyC,KAAzC,CAjE0E,CAkE1E;;AACA,OAAKo+H,sBAAL,GAA8B,EAA9B;AACA,MAAIC,eAAe,GAAG,CAAE,CAAF,EAAK,CAAL,EAAQ,CAAR,EAAW,CAAX,EAAc,EAAd,CAAtB;AACA,MAAIT,IAAI,GAAGngL,IAAI,CAACC,KAAL,CAAY,KAAK0tF,UAAL,CAAgBtkF,CAAhB,GAAoB,CAAhC,CAAX;AACA,MAAI+2K,IAAI,GAAGpgL,IAAI,CAACC,KAAL,CAAY,KAAK0tF,UAAL,CAAgBpkF,CAAhB,GAAoB,CAAhC,CAAX;;AAEA,OAAM,IAAIvH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKk+K,KAA1B,EAAiCl+K,CAAC,EAAlC,EAAwC;AAEvC,SAAK2+K,sBAAL,CAA4Bx1K,IAA5B,CAAkC,KAAK01K,wBAAL,CAA+BD,eAAe,CAAE5+K,CAAF,CAA9C,CAAlC;AAEA,SAAK2+K,sBAAL,CAA6B3+K,CAA7B,EAAiCugD,UAAjC,GAA8C,KAA9C;AACA,SAAKo+H,sBAAL,CAA6B3+K,CAA7B,EAAiCq1D,QAAjC,CAA2C,SAA3C,EAAuDjyD,KAAvD,GAA+D,IAAIurB,oBAAJ,CAAawvJ,IAAb,EAAmBC,IAAnB,CAA/D;AAEAD,IAAAA,IAAI,GAAGngL,IAAI,CAACC,KAAL,CAAYkgL,IAAI,GAAG,CAAnB,CAAP;AAEAC,IAAAA,IAAI,GAAGpgL,IAAI,CAACC,KAAL,CAAYmgL,IAAI,GAAG,CAAnB,CAAP;AAEA,GAnFyE,CAqF1E;;;AACA,OAAKU,iBAAL,GAAyB,KAAKC,oBAAL,CAA2B,KAAKb,KAAhC,CAAzB;AACA,OAAKY,iBAAL,CAAuBzpH,QAAvB,CAAiC,cAAjC,EAAkDjyD,KAAlD,GAA0D,KAAK66K,qBAAL,CAA4B,CAA5B,EAAgCxiJ,OAA1F;AACA,OAAKqjJ,iBAAL,CAAuBzpH,QAAvB,CAAiC,cAAjC,EAAkDjyD,KAAlD,GAA0D,KAAK66K,qBAAL,CAA4B,CAA5B,EAAgCxiJ,OAA1F;AACA,OAAKqjJ,iBAAL,CAAuBzpH,QAAvB,CAAiC,cAAjC,EAAkDjyD,KAAlD,GAA0D,KAAK66K,qBAAL,CAA4B,CAA5B,EAAgCxiJ,OAA1F;AACA,OAAKqjJ,iBAAL,CAAuBzpH,QAAvB,CAAiC,cAAjC,EAAkDjyD,KAAlD,GAA0D,KAAK66K,qBAAL,CAA4B,CAA5B,EAAgCxiJ,OAA1F;AACA,OAAKqjJ,iBAAL,CAAuBzpH,QAAvB,CAAiC,cAAjC,EAAkDjyD,KAAlD,GAA0D,KAAK66K,qBAAL,CAA4B,CAA5B,EAAgCxiJ,OAA1F;AACA,OAAKqjJ,iBAAL,CAAuBzpH,QAAvB,CAAiC,eAAjC,EAAmDjyD,KAAnD,GAA2Dg6J,QAA3D;AACA,OAAK0hB,iBAAL,CAAuBzpH,QAAvB,CAAiC,aAAjC,EAAiDjyD,KAAjD,GAAyD,GAAzD;AACA,OAAK07K,iBAAL,CAAuB/0H,WAAvB,GAAqC,IAArC;AAEA,OAAK+0H,iBAAL,CAAuBv+H,UAAvB,GAAoC,KAApC;AAEA,MAAIy+H,YAAY,GAAG,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,EAAsB,GAAtB,CAAnB;AACA,OAAKF,iBAAL,CAAuBzpH,QAAvB,CAAiC,cAAjC,EAAkDjyD,KAAlD,GAA0D47K,YAA1D;AACA,OAAKC,eAAL,GAAuB,CAAE,IAAI1+I,oBAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAF,EAA0B,IAAIA,oBAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAA1B,EAAkD,IAAIA,oBAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAlD,EAChB,IAAIA,oBAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADgB,EACQ,IAAIA,oBAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CADR,CAAvB;AAEA,OAAKu+I,iBAAL,CAAuBzpH,QAAvB,CAAiC,iBAAjC,EAAqDjyD,KAArD,GAA6D,KAAK67K,eAAlE,CAtG0E,CAwG1E;;AACA,MAAKrB,2BAAe78K,SAApB,EAAgC;AAE/B0tB,IAAAA,OAAO,CAACyD,KAAR,CAAe,sCAAf;AAEA;;AAED,MAAIgtJ,UAAU,GAAGtB,sBAAjB;AAEA,OAAKuB,YAAL,GAAoB5pH,2BAAcpmC,KAAd,CAAqB+vJ,UAAU,CAAC7pH,QAAhC,CAApB;AACA,OAAK8pH,YAAL,CAAmB,SAAnB,EAA+B/7K,KAA/B,GAAuC,GAAvC;AAEA,OAAKg8K,YAAL,GAAoB,IAAI1pH,2BAAJ,CAAoB;AACvCL,IAAAA,QAAQ,EAAE,KAAK8pH,YADwB;AAEvCvpH,IAAAA,YAAY,EAAEspH,UAAU,CAACtpH,YAFc;AAGvCC,IAAAA,cAAc,EAAEqpH,UAAU,CAACrpH,cAHY;AAIvCvX,IAAAA,QAAQ,EAAEv+B,6BAJ6B;AAKvCk/B,IAAAA,SAAS,EAAE,KAL4B;AAMvCC,IAAAA,UAAU,EAAE,KAN2B;AAOvCT,IAAAA,WAAW,EAAE;AAP0B,GAApB,CAApB;AASA,OAAK2gI,YAAL,CAAkB7+H,UAAlB,GAA+B,KAA/B;AAEA,OAAKkT,OAAL,GAAe,IAAf;AACA,OAAKytG,SAAL,GAAiB,KAAjB;AAEA,OAAKme,aAAL,GAAqB,IAAIh8K,kBAAJ,EAArB;AACA,OAAKi8K,aAAL,GAAqB,CAArB;AAEA,OAAKv2G,KAAL,GAAa,IAAIhlB,8BAAJ,EAAb;AACA,OAAKglB,KAAL,CAAWxoB,UAAX,GAAwB,KAAxB;AAEA,OAAKg/H,MAAL,GAAc,IAAIxe,WAAK4c,cAAT,CAAyB,IAAzB,CAAd;AAEA,CA1ID;;;AA4IAG,eAAe,CAACh/K,SAAhB,GAA4BY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeooI,WAAKjiK,SAApB,CAAf,EAAgD;AAE3EoC,EAAAA,WAAW,EAAE48K,eAF8D;AAI3ExkJ,EAAAA,OAAO,EAAE,mBAAY;AAEpB,SAAM,IAAIt5B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKg+K,uBAAL,CAA6Br/K,MAAlD,EAA0DqB,CAAC,EAA3D,EAAiE;AAEhE,WAAKg+K,uBAAL,CAA8Bh+K,CAA9B,EAAkCs5B,OAAlC;AAEA;;AAED,SAAM,IAAIt5B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKi+K,qBAAL,CAA2Bt/K,MAAhD,EAAwDqB,CAAC,EAAzD,EAA+D;AAE9D,WAAKi+K,qBAAL,CAA4Bj+K,CAA5B,EAAgCs5B,OAAhC;AAEA;;AAED,SAAK+kJ,kBAAL,CAAwB/kJ,OAAxB;AAEA,GApB0E;AAsB3EwC,EAAAA,OAAO,EAAE,iBAAWnyB,KAAX,EAAkBC,MAAlB,EAA2B;AAEnC,QAAIu0K,IAAI,GAAGngL,IAAI,CAACC,KAAL,CAAY0L,KAAK,GAAG,CAApB,CAAX;AACA,QAAIy0K,IAAI,GAAGpgL,IAAI,CAACC,KAAL,CAAY2L,MAAM,GAAG,CAArB,CAAX;AAEA,SAAKy0K,kBAAL,CAAwBviJ,OAAxB,CAAiCqiJ,IAAjC,EAAuCC,IAAvC;;AAEA,SAAM,IAAIp+K,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKk+K,KAA1B,EAAiCl+K,CAAC,EAAlC,EAAwC;AAEvC,WAAKg+K,uBAAL,CAA8Bh+K,CAA9B,EAAkC87B,OAAlC,CAA2CqiJ,IAA3C,EAAiDC,IAAjD;AACA,WAAKH,qBAAL,CAA4Bj+K,CAA5B,EAAgC87B,OAAhC,CAAyCqiJ,IAAzC,EAA+CC,IAA/C;AAEA,WAAKO,sBAAL,CAA6B3+K,CAA7B,EAAiCq1D,QAAjC,CAA2C,SAA3C,EAAuDjyD,KAAvD,GAA+D,IAAIurB,oBAAJ,CAAawvJ,IAAb,EAAmBC,IAAnB,CAA/D;AAEAD,MAAAA,IAAI,GAAGngL,IAAI,CAACC,KAAL,CAAYkgL,IAAI,GAAG,CAAnB,CAAP;AACAC,MAAAA,IAAI,GAAGpgL,IAAI,CAACC,KAAL,CAAYmgL,IAAI,GAAG,CAAnB,CAAP;AAEA;AAED,GAzC0E;AA2C3EhlH,EAAAA,MAAM,EAAE,gBAAWP,QAAX,EAAqB2mH,WAArB,EAAkCC,UAAlC,EAA8CljC,SAA9C,EAAyDmjC,UAAzD,EAAsE;AAE7E,SAAKL,aAAL,CAAmBjwJ,IAAnB,CAAyBypC,QAAQ,CAAC0S,aAAT,EAAzB;AACA,SAAK+zG,aAAL,GAAqBzmH,QAAQ,CAAC4S,aAAT,EAArB;AACA,QAAIk0G,YAAY,GAAG9mH,QAAQ,CAACmS,SAA5B;AACAnS,IAAAA,QAAQ,CAACmS,SAAT,GAAqB,KAArB;AAEAnS,IAAAA,QAAQ,CAAC2S,aAAT,CAAwB,KAAKrB,UAA7B,EAAyC,CAAzC;AAEA,QAAKu1G,UAAL,EAAkB7mH,QAAQ,CAACoR,KAAT,CAAevK,OAAf,CAAuBpG,OAAvB,CAA+BgzB,OAA/B,CAAwC,KAAxC,EAT2D,CAW7E;;AAEA,QAAK,KAAK80E,cAAV,EAA2B;AAE1B,WAAKme,MAAL,CAAYzwI,QAAZ,GAAuB,KAAKi6B,KAA5B;AACA,WAAKA,KAAL,CAAW79D,GAAX,GAAiBu0K,UAAU,CAAChkJ,OAA5B;AAEAo9B,MAAAA,QAAQ,CAACM,eAAT,CAA0B,IAA1B;AACAN,MAAAA,QAAQ,CAACQ,KAAT;AACA,WAAKkmH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA,KAtB4E,CAwB7E;;;AAEA,SAAK4lH,gBAAL,CAAuB,UAAvB,EAAoCr7K,KAApC,GAA4Cq8K,UAAU,CAAChkJ,OAAvD;AACA,SAAKgjJ,gBAAL,CAAuB,qBAAvB,EAA+Cr7K,KAA/C,GAAuD,KAAK5C,SAA5D;AACA,SAAK++K,MAAL,CAAYzwI,QAAZ,GAAuB,KAAK4vI,sBAA5B;AAEA7lH,IAAAA,QAAQ,CAACM,eAAT,CAA0B,KAAKklH,kBAA/B;AACAxlH,IAAAA,QAAQ,CAACQ,KAAT;AACA,SAAKkmH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB,EAhC6E,CAkC7E;;AAEA,QAAI+mH,iBAAiB,GAAG,KAAKvB,kBAA7B;;AAEA,SAAM,IAAIr+K,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKk+K,KAA1B,EAAiCl+K,CAAC,EAAlC,EAAwC;AAEvC,WAAKu/K,MAAL,CAAYzwI,QAAZ,GAAuB,KAAK6vI,sBAAL,CAA6B3+K,CAA7B,CAAvB;AAEA,WAAK2+K,sBAAL,CAA6B3+K,CAA7B,EAAiCq1D,QAAjC,CAA2C,cAA3C,EAA4DjyD,KAA5D,GAAoEw8K,iBAAiB,CAACnkJ,OAAtF;AACA,WAAKkjJ,sBAAL,CAA6B3+K,CAA7B,EAAiCq1D,QAAjC,CAA2C,WAA3C,EAAyDjyD,KAAzD,GAAiE06K,eAAe,CAAC+B,cAAjF;AACAhnH,MAAAA,QAAQ,CAACM,eAAT,CAA0B,KAAK6kH,uBAAL,CAA8Bh+K,CAA9B,CAA1B;AACA64D,MAAAA,QAAQ,CAACQ,KAAT;AACA,WAAKkmH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA,WAAK8lH,sBAAL,CAA6B3+K,CAA7B,EAAiCq1D,QAAjC,CAA2C,cAA3C,EAA4DjyD,KAA5D,GAAoE,KAAK46K,uBAAL,CAA8Bh+K,CAA9B,EAAkCy7B,OAAtG;AACA,WAAKkjJ,sBAAL,CAA6B3+K,CAA7B,EAAiCq1D,QAAjC,CAA2C,WAA3C,EAAyDjyD,KAAzD,GAAiE06K,eAAe,CAACgC,cAAjF;AACAjnH,MAAAA,QAAQ,CAACM,eAAT,CAA0B,KAAK8kH,qBAAL,CAA4Bj+K,CAA5B,CAA1B;AACA64D,MAAAA,QAAQ,CAACQ,KAAT;AACA,WAAKkmH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA+mH,MAAAA,iBAAiB,GAAG,KAAK3B,qBAAL,CAA4Bj+K,CAA5B,CAApB;AAEA,KAxD4E,CA0D7E;;;AAEA,SAAKu/K,MAAL,CAAYzwI,QAAZ,GAAuB,KAAKgwI,iBAA5B;AACA,SAAKA,iBAAL,CAAuBzpH,QAAvB,CAAiC,eAAjC,EAAmDjyD,KAAnD,GAA2D,KAAKg6J,QAAhE;AACA,SAAK0hB,iBAAL,CAAuBzpH,QAAvB,CAAiC,aAAjC,EAAiDjyD,KAAjD,GAAyD,KAAK2/B,MAA9D;AACA,SAAK+7I,iBAAL,CAAuBzpH,QAAvB,CAAiC,iBAAjC,EAAqDjyD,KAArD,GAA6D,KAAK67K,eAAlE;AAEApmH,IAAAA,QAAQ,CAACM,eAAT,CAA0B,KAAK6kH,uBAAL,CAA8B,CAA9B,CAA1B;AACAnlH,IAAAA,QAAQ,CAACQ,KAAT;AACA,SAAKkmH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB,EAnE6E,CAqE7E;;AAEA,SAAK0mH,MAAL,CAAYzwI,QAAZ,GAAuB,KAAKswI,YAA5B;AACA,SAAKD,YAAL,CAAmB,UAAnB,EAAgC/7K,KAAhC,GAAwC,KAAK46K,uBAAL,CAA8B,CAA9B,EAAkCviJ,OAA1E;AAEA,QAAKikJ,UAAL,EAAkB7mH,QAAQ,CAACoR,KAAT,CAAevK,OAAf,CAAuBpG,OAAvB,CAA+BgzB,OAA/B,CAAwC,IAAxC;;AAElB,QAAK,KAAK80E,cAAV,EAA2B;AAE1BvoG,MAAAA,QAAQ,CAACM,eAAT,CAA0B,IAA1B;AACA,WAAKomH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA,KALD,MAKO;AAENA,MAAAA,QAAQ,CAACM,eAAT,CAA0BsmH,UAA1B;AACA,WAAKF,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA,KAtF4E,CAwF7E;;;AAEAA,IAAAA,QAAQ,CAAC2S,aAAT,CAAwB,KAAK6zG,aAA7B,EAA4C,KAAKC,aAAjD;AACAzmH,IAAAA,QAAQ,CAACmS,SAAT,GAAqB20G,YAArB;AAEA,GAxI0E;AA0I3Ed,EAAAA,wBAAwB,EAAE,kCAAWkB,YAAX,EAA0B;AAEnD,WAAO,IAAIrqH,2BAAJ,CAAoB;AAE1BC,MAAAA,OAAO,EAAE;AACR,yBAAiBoqH,YADT;AAER,iBAASA;AAFD,OAFiB;AAO1B1qH,MAAAA,QAAQ,EAAE;AACT,wBAAgB;AAAEjyD,UAAAA,KAAK,EAAE;AAAT,SADP;AAET,mBAAW;AAAEA,UAAAA,KAAK,EAAE,IAAIurB,oBAAJ,CAAa,GAAb,EAAkB,GAAlB;AAAT,SAFF;AAGT,qBAAa;AAAEvrB,UAAAA,KAAK,EAAE,IAAIurB,oBAAJ,CAAa,GAAb,EAAkB,GAAlB;AAAT;AAHJ,OAPgB;AAa1BinC,MAAAA,YAAY,EACX;;;;MAdyB;AAoB1BC,MAAAA,cAAc,EACb;;;;;;;;;;;;;;;;;;;;;;;;;AArByB,KAApB,CAAP;AAgDA,GA5L0E;AA8L3EkpH,EAAAA,oBAAoB,EAAE,8BAAWb,KAAX,EAAmB;AAExC,WAAO,IAAIxoH,2BAAJ,CAAoB;AAE1BC,MAAAA,OAAO,EAAE;AACR,oBAAYuoH;AADJ,OAFiB;AAM1B7oH,MAAAA,QAAQ,EAAE;AACT,wBAAgB;AAAEjyD,UAAAA,KAAK,EAAE;AAAT,SADP;AAET,wBAAgB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SAFP;AAGT,wBAAgB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SAHP;AAIT,wBAAgB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SAJP;AAKT,wBAAgB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SALP;AAMT,uBAAe;AAAEA,UAAAA,KAAK,EAAE;AAAT,SANN;AAOT,yBAAiB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SAPR;AAQT,wBAAgB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SARP;AAST,2BAAmB;AAAEA,UAAAA,KAAK,EAAE;AAAT,SATV;AAUT,uBAAe;AAAEA,UAAAA,KAAK,EAAE;AAAT;AAVN,OANgB;AAmB1BwyD,MAAAA,YAAY,EACX;;;;MApByB;AA0B1BC,MAAAA,cAAc,EACb;;;;;;;;;;;;;;;;;;;;;;;;AA3ByB,KAApB,CAAP;AAqDA;AArP0E,CAAhD,CAA5B;AAyPAioH,eAAe,CAAC+B,cAAhB,GAAiC,IAAIlxJ,oBAAJ,CAAa,GAAb,EAAkB,GAAlB,CAAjC;AACAmvJ,eAAe,CAACgC,cAAhB,GAAiC,IAAInxJ,oBAAJ,CAAa,GAAb,EAAkB,GAAlB,CAAjC;;;;;;;;;ACnaA;;;;;;;;;;;;;;;;;;;;;AAwBA,IAAIqxJ,UAAU,GAAG;AAEhB3qH,EAAAA,QAAQ,EAAE;AAET,gBAAY;AAAEjyD,MAAAA,KAAK,EAAE;AAAT,KAFH;AAGT,YAAQ;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAHC;AAIT,kBAAc;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAJL;AAKT,kBAAc;AAAEA,MAAAA,KAAK,EAAE;AAAT,KALL;AAMT,cAAU;AAAEA,MAAAA,KAAK,EAAE;AAAT,KAND;AAOT,iBAAa;AAAEA,MAAAA,KAAK,EAAE;AAAT;AAPJ,GAFM;AAahBwyD,EAAAA,YAAY,EAAE,CAEb,mBAFa,EAIb,eAJa,EAMb,YANa,EAOb,4EAPa,EASb,GATa,EAWZxsD,IAXY,CAWN,IAXM,CAbE;AA0BhBysD,EAAAA,cAAc,EAAE,CAEf,mBAFe,EAIf;AACA,uBALe,EAOf,yBAPe,EASf;AACA,6BAVe,EAYf;AACA,6BAbe,EAef;AACA,yBAhBe,EAkBf,6BAlBe,EAoBf,mBApBe,EAsBf,eAtBe,EAwBf;AACA,sDAzBe,EA2Bf;AACA,mCA5Be,EA8Bf;AACA,0FA/Be,EAiCf;AACA,oEAlCe,EAoCf;AACA,2EArCe,EAuCf;AACA,oGAxCe,EA0Cf;AACA,sBA3Ce,EA6Cf,4EA7Ce,EA+Cf,IA/Ce,EAiDf,qDAjDe,EAmDf,GAnDe,EAqDdzsD,IArDc,CAqDR,IArDQ;AA1BA,CAAjB;;;;;;;;;;ACpBA;;AAIA;;AACA;;AATA;;;AAWA,IAAI62K,QAAQ,GAAG,UAAWC,cAAX,EAA2BC,kBAA3B,EAA+CC,cAA/C,EAA+DC,SAA/D,EAA2E;AAEzFtf,aAAK1hK,IAAL,CAAW,IAAX;;AAEA,MAAK2gL,2BAAej/K,SAApB,EACC0tB,OAAO,CAACyD,KAAR,CAAe,+BAAf;AAED,MAAIwnC,MAAM,GAAGsmH,sBAAb;AAEA,OAAK3qH,QAAL,GAAgBE,2BAAcpmC,KAAd,CAAqBuqC,MAAM,CAACrE,QAA5B,CAAhB;AAEA,OAAKvmB,QAAL,GAAgB,IAAI4mB,2BAAJ,CAAoB;AAEnCL,IAAAA,QAAQ,EAAE,KAAKA,QAFoB;AAGnCO,IAAAA,YAAY,EAAE8D,MAAM,CAAC9D,YAHc;AAInCC,IAAAA,cAAc,EAAE6D,MAAM,CAAC7D;AAJY,GAApB,CAAhB;AAQA,MAAKwqH,SAAS,KAAKt/K,SAAnB,EAA+B,KAAKs0D,QAAL,CAAcgrH,SAAd,CAAwBj9K,KAAxB,GAAgCi9K,SAAhC;AAC/B,MAAKH,cAAc,KAAKn/K,SAAxB,EAAoC,KAAKs0D,QAAL,CAAcirH,UAAd,CAAyBl9K,KAAzB,GAAiC88K,cAAjC;AACpC,MAAKC,kBAAkB,KAAKp/K,SAA5B,EAAwC,KAAKs0D,QAAL,CAAckrH,UAAd,CAAyBn9K,KAAzB,GAAiC+8K,kBAAjC;AACxC,MAAKC,cAAc,KAAKr/K,SAAxB,EAAoC,KAAKs0D,QAAL,CAAcmrH,MAAd,CAAqBp9K,KAArB,GAA6Bg9K,cAA7B;AAEpC,OAAKb,MAAL,GAAc,IAAIxe,WAAK4c,cAAT,CAAyB,KAAK7uI,QAA9B,CAAd;AAEA,CA1BD;;;AA4BAmxI,QAAQ,CAACnhL,SAAT,GAAqBY,MAAM,CAACme,MAAP,CAAene,MAAM,CAACi5B,MAAP,CAAeooI,WAAKjiK,SAApB,CAAf,EAAgD;AAEpEoC,EAAAA,WAAW,EAAE++K,QAFuD;AAIpE7mH,EAAAA,MAAM,EAAE,UAAWP,QAAX,EAAqB2mH,WAArB,EAAkCC,UAAlC,EAA8CljC;AAAU;AAAxD,IAA4E;AAEnF,SAAKlnF,QAAL,CAAe,UAAf,EAA4BjyD,KAA5B,GAAoCq8K,UAAU,CAAChkJ,OAA/C;AACA,SAAK45B,QAAL,CAAe,MAAf,EAAwBjyD,KAAxB,IAAiCm5I,SAAjC;;AAEA,QAAK,KAAK6kB,cAAV,EAA2B;AAE1BvoG,MAAAA,QAAQ,CAACM,eAAT,CAA0B,IAA1B;AACA,WAAKomH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA,KALD,MAKO;AAENA,MAAAA,QAAQ,CAACM,eAAT,CAA0BqmH,WAA1B;AACA,UAAK,KAAKnmH,KAAV,EAAkBR,QAAQ,CAACQ,KAAT;AAClB,WAAKkmH,MAAL,CAAYnmH,MAAZ,CAAoBP,QAApB;AAEA;AAED;AAtBmE,CAAhD,CAArB;;;;;;;;;;;;ACvCA;;AAEA;;AACA;;AACA;;AACA;;;;;;;;AAEA;AACO,SAAS4nH,6BAAT,CAAuC5nH,QAAvC,EAAiD;AACpDilH,2CAAgBh/K,SAAhB,GAA4BY,MAAM,CAACme,MAAP,CAAcigK,yCAAgBh/K,SAA9B,EAAyC;AACjE4iK,IAAAA,UADiE,wBACpD,CAAG,CADiD;AAEjEgf,IAAAA,cAAc,EAAE5C,yCAAgBh/K,SAAhB,CAA0Bs6D,MAFuB;AAGjEA,IAAAA,MAHiE,kBAG1DP,QAH0D,EAGhDg+F,WAHgD,EAGnC4K,YAHmC,EAGrBz+J,KAHqB,EAGd08K,UAHc,EAGF;AAC3D,WAAKgB,cAAL,CAAoB7nH,QAApB,EAA8B4oG,YAA9B,EAA4C5K,WAA5C,EAAyD7zJ,KAAzD,EAAgE08K,UAAhE;AACH;AALgE,GAAzC,CAA5B;AAQAO,qBAASnhL,SAAT,GAAqBY,MAAM,CAACme,MAAP,CAAcoiK,mBAASnhL,SAAvB,EAAkC;AACnD4iK,IAAAA,UADmD,wBACtC,CAAG,CADmC;AAEnDgf,IAAAA,cAAc,EAAET,mBAASnhL,SAAT,CAAmBs6D,MAFgB;AAGnDA,IAAAA,MAHmD,kBAG5CP,QAH4C,EAGlCg+F,WAHkC,EAGrB4K,YAHqB,EAGPz+J,KAHO,EAGA08K,UAHA,EAGY;AAC3D,WAAKgB,cAAL,CAAoB7nH,QAApB,EAA8B4oG,YAA9B,EAA4C5K,WAA5C,EAAyD7zJ,KAAzD,EAAgE08K,UAAhE;AACH;AALkD,GAAlC,CAArB;AAOH;;AAEM,SAASiB,uBAAT,CAAiC9nH,QAAjC,EAA2C+nH,GAA3C,EAAgD;AACnDA,EAAAA,GAAG,GAAGA,GAAG,IAAIj5K,MAAM,CAACk5K,gBAApB;AACAhoH,EAAAA,QAAQ,CAAC/8B,OAAT,CAAiBn0B,MAAM,CAACmL,UAAxB,EAAoCnL,MAAM,CAACqL,WAA3C;AACA6lD,EAAAA,QAAQ,CAAC4sC,aAAT,CAAuBm7E,GAAvB;AACH;;AAEM,SAASE,mBAAT,CAA6BjoH,QAA7B,EAAuC;AAC1CA,EAAAA,QAAQ,CAAC8sB,SAAT,CAAmBlyB,OAAnB,GAA6B,IAA7B;AACAoF,EAAAA,QAAQ,CAAC8sB,SAAT,CAAmBx7E,IAAnB,GAA0B4zK,KAAK,CAACx+J,YAAhC;AACH;;AAED,SAASwhK,uBAAT,CAAiCxhL,GAAjC,EAAsCyhL,QAAtC,EAAgD3kC,KAAhD,EAAuD4kC,KAAvD,EAA8D;AAC1D,MAAIC,UAAU,GAAG7kC,KAAK,IAAI,IAAI8kC,GAAG,CAACrtK,GAAR,EAA1B;;AACA,MAAImtK,KAAK,GAAGA,KAAK,IAAI,EAArB;;AACA,OAAK,IAAIjhL,CAAT,IAAcT,GAAd,EAAmB;AACf,QAAI,QAAQA,GAAG,CAACS,CAAD,CAAX,KAAmB,QAAnB,IAAgCihL,KAAK,CAACjhL,CAAD,CAAL,KAAa,IAAjD,EAAwD;AACpD,UAAIjC,CAAC,GAAGmjL,UAAU,CAACE,SAAX,CAAqBphL,CAArB,CAAR;AACA+gL,MAAAA,uBAAuB,CAACxhL,GAAG,CAACS,CAAD,CAAJ,EAASghL,QAAT,EAAmBjjL,CAAnB,EAAsBkjL,KAAK,CAACjhL,CAAD,CAA3B,CAAvB;AACH;;AACD,QAAIihL,KAAK,CAACjhL,CAAD,CAAT,EAAc,SAAd,KACK;AACD,UAAIA,CAAC,CAACyuH,WAAF,GAAgB4yD,QAAhB,CAAyB,OAAzB,KACArhL,CAAC,CAACyuH,WAAF,GAAgB6yD,UAAhB,CAA2B,OAA3B,CADJ,EACyC;AACrCJ,QAAAA,UAAU,CAACK,QAAX,CAAoBhiL,GAApB,EAAyBS,CAAzB,EAA4BwhL,cAA5B,CAA2CR,QAA3C;AACH,OAHD,MAIK;AACDE,QAAAA,UAAU,CAACvpK,GAAX,CAAepY,GAAf,EAAoBS,CAApB,EAAuBwhL,cAAvB,CAAsCR,QAAtC;AACH;AACJ;AACJ;;AACD,SAAOE,UAAP;AACH,EAED;;;AACO,SAASO,qBAAT,CAA+B5oH,QAA/B,EAAyCC,KAAzC,EAAgD4oH,WAAhD,EAA6DC,QAA7D,EAAuE;AAC1Eh6K,EAAAA,MAAM,CAACkxD,QAAP,GAAkBA,QAAlB;AAEA,MAAI+oH,kBAAkB,GAAG;AACrBhtC,IAAAA,IAAI,EAAEmpC,KAAK,CAACj8J,aADS;AAErB+/J,IAAAA,MAAM,EAAE9D,KAAK,CAACh8J,iBAFO;AAGrB+/J,IAAAA,QAAQ,EAAE/D,KAAK,CAAC/7J,mBAHK;AAIrB+/J,IAAAA,MAAM,EAAEhE,KAAK,CAAC97J,iBAJO;AAKrB+/J,IAAAA,UAAU,EAAEjE,KAAK,CAAC77J,qBALG;AAMrB+/J,IAAAA,MAAM,EAAElE,KAAK,CAAC57J;AANO,GAAzB;AASA,MAAI+/J,MAAM,GAAG;AACTzuH,IAAAA,OAAO,EAAE,IADA;AAET0uH,IAAAA,aAAa,EAAE,CAFN;AAGT92G,IAAAA,WAAW,EAAE,YAHJ;AAITsjG,IAAAA,KAAK,EAAE,GAJE;AAKThsE,IAAAA,mBAAmB,EAAE,CALZ;AAMTxhB,IAAAA,uBAAuB,EAAE;AANhB,GAAb;;AASA,OAAK,IAAInhF,CAAT,IAAc0hL,WAAd,EAA2B;AACvBQ,IAAAA,MAAM,CAACliL,CAAD,CAAN,GAAY0hL,WAAW,CAAC1hL,CAAD,CAAvB;AACH;;AAED,MAAIuqG,OAAO,GAAG;AACVokE,IAAAA,KAAK,EAAE,CADG;AAEVwT,IAAAA,aAAa,EAAE,CAFL;AAGVx/E,IAAAA,mBAAmB,EAAE,CAHX;AAIVxhB,IAAAA,uBAAuB,EAAE;AAJf,GAAd;AAOA1yD,EAAAA,OAAO,CAACC,IAAR,CAAa,wEAAb;AACAmqC,EAAAA,QAAQ,CAAC4oB,cAAT,GAA0Bs8F,KAAK,CAACt1J,YAAhC,CAjC0E,CAmC1E;;AACA25J,EAAAA,KAAK,CAACv5G,WAAN,CAAkBxC,yBAAlB,GAA8C+7G,KAAK,CAACv5G,WAAN,CAAkBxC,yBAAlB,CAA4Ch9D,OAA5C,CAC1C,wDAD0C,saAA9C;AAUA,MAAIg5K,SAAS,GAAGD,KAAK,CAACv5G,WAAN,CAAkBxC,yBAAlC;;AAEA,WAASi8G,YAAT,GAAwB;AACpB,QAAIJ,MAAM,CAACzuH,OAAX,EAAoB;AAChBoF,MAAAA,QAAQ,CAACwS,WAAT,GAAuBu2G,kBAAkB,CAACM,MAAM,CAAC72G,WAAR,CAAzC;;AACA,WAAK,IAAIrrE,CAAT,IAAcuqG,OAAd,EAAuB;AACnB1xC,QAAAA,QAAQ,CAAC74D,CAAD,CAAR,GAAckiL,MAAM,CAACliL,CAAD,CAApB;AACH;AACJ,KALD,MAMK;AACD64D,MAAAA,QAAQ,CAACwS,WAAT,GAAuB+2G,KAAK,CAACtgK,aAA7B;;AACA,WAAK,IAAI9hB,CAAT,IAAcuqG,OAAd,EAAuB;AACnB1xC,QAAAA,QAAQ,CAAC74D,CAAD,CAAR,GAAcuqG,OAAO,CAACvqG,CAAD,CAArB;AACH;AACJ;;AACDoiL,IAAAA,KAAK,CAACv5G,WAAN,CAAkBxC,yBAAlB,GAA8Cg8G,SAAS,CAACh5K,OAAV,CAAkB,2BAAlB,EAA+C,oBAAoB,CAACrL,IAAI,CAACC,KAAL,CAAWikL,MAAM,CAACC,aAAP,GAAuB,EAAlC,IAAwC,EAAzC,EAA6C5jL,OAA7C,CAAqD,CAArD,CAApB,GAA8E,GAA7H,CAA9C;AACAu6D,IAAAA,KAAK,CAACprB,QAAN,CAAe,UAAAjpC,MAAM,EAAI;AACrB,UAAIA,MAAM,CAAC0F,IAAP,KAAgB,MAApB,EAA4B1F,MAAM,CAACqqC,QAAP,CAAgBib,WAAhB,GAA8B,IAA9B;AAC/B,KAFD;AAGH;;AACDu4H,EAAAA,YAAY;AACZ,MAAIC,SAAS,GAAGxB,uBAAuB,CAACmB,MAAD,EAASI,YAAT,EAAuBX,QAAvB,EAAiC;AAAEt2G,IAAAA,WAAW,EAAE;AAAf,GAAjC,CAAvC;AACAk3G,EAAAA,SAAS,CAAC5qK,GAAV,CAAcuqK,MAAd,EAAsB,aAAtB,EAAqCxiL,MAAM,CAACF,IAAP,CAAYoiL,kBAAZ,CAArC,EAAsEl3K,QAAtE,CAA+E43K,YAA/E;AACA,SAAO;AACHC,IAAAA,SAAS,EAAEA,SADR;AAEHL,IAAAA,MAAM,EAAEA,MAFL;AAGHjiL,IAAAA,KAAK,EAAEqiL;AAHJ,GAAP;AAKH;;;;;;;;;AC7HD;;AATA;;;;;;;;AAmBA;AACA;AACA;AACA;AACA;AACA;AAEA,IAAIE,aAAa,GAAG,UAAW/9K,MAAX,EAAmBG,UAAnB,EAAgC;AAEnD,MAAKA,UAAU,KAAK7D,SAApB,EAAgC0tB,OAAO,CAACC,IAAR,CAAc,0EAAd;AAChC,MAAK9pB,UAAU,KAAKC,QAApB,EAA+B4pB,OAAO,CAACyD,KAAR,CAAe,0HAAf;AAE/B,OAAKztB,MAAL,GAAcA,MAAd;AACA,OAAKG,UAAL,GAAkBA,UAAlB,CANmD,CAQnD;;AACA,OAAK6uD,OAAL,GAAe,IAAf,CATmD,CAWnD;;AACA,OAAKt0D,MAAL,GAAc,IAAIohC,oBAAJ,EAAd,CAZmD,CAcnD;;AACA,OAAKkiJ,WAAL,GAAmB,CAAnB;AACA,OAAK9zC,WAAL,GAAmB/9F,QAAnB,CAhBmD,CAkBnD;;AACA,OAAK8xI,OAAL,GAAe,CAAf;AACA,OAAKC,OAAL,GAAe/xI,QAAf,CApBmD,CAsBnD;AACA;;AACA,OAAKgyI,aAAL,GAAqB,CAArB,CAxBmD,CAwB3B;;AACxB,OAAKC,aAAL,GAAqB7kL,IAAI,CAACutB,EAA1B,CAzBmD,CAyBrB;AAE9B;AACA;;AACA,OAAKu3J,eAAL,GAAuB,CAAElyI,QAAzB,CA7BmD,CA6BhB;;AACnC,OAAKmyI,eAAL,GAAuBnyI,QAAvB,CA9BmD,CA8BlB;AAEjC;AACA;;AACA,OAAKoyI,aAAL,GAAqB,KAArB;AACA,OAAKC,aAAL,GAAqB,IAArB,CAnCmD,CAqCnD;AACA;;AACA,OAAKC,UAAL,GAAkB,IAAlB;AACA,OAAKC,SAAL,GAAiB,GAAjB,CAxCmD,CA0CnD;;AACA,OAAKC,YAAL,GAAoB,IAApB;AACA,OAAKC,WAAL,GAAmB,GAAnB,CA5CmD,CA8CnD;;AACA,OAAKC,SAAL,GAAiB,IAAjB;AACA,OAAKC,QAAL,GAAgB,GAAhB;AACA,OAAKC,kBAAL,GAA0B,IAA1B,CAjDmD,CAiDnB;;AAChC,OAAKC,WAAL,GAAmB,GAAnB,CAlDmD,CAkD3B;AAExB;AACA;;AACA,OAAKC,UAAL,GAAkB,KAAlB;AACA,OAAKC,eAAL,GAAuB,GAAvB,CAvDmD,CAuDvB;AAE5B;;AACA,OAAKC,UAAL,GAAkB,IAAlB,CA1DmD,CA4DnD;;AACA,OAAKpkL,IAAL,GAAY;AAAE6e,IAAAA,IAAI,EAAE,EAAR;AAAYwlK,IAAAA,EAAE,EAAE,EAAhB;AAAoBtlK,IAAAA,KAAK,EAAE,EAA3B;AAA+BulK,IAAAA,MAAM,EAAE;AAAvC,GAAZ,CA7DmD,CA+DnD;;AACA,OAAKC,YAAL,GAAoB;AAAE1lK,IAAAA,IAAI,EAAED,mBAAMI,MAAd;AAAsBF,IAAAA,MAAM,EAAEF,mBAAMK,KAApC;AAA2CF,IAAAA,KAAK,EAAEH,mBAAMM;AAAxD,GAApB,CAhEmD,CAkEnD;;AACA,OAAKlQ,OAAL,GAAe;AAAEw1K,IAAAA,GAAG,EAAErlK,mBAAMH,MAAb;AAAqBylK,IAAAA,GAAG,EAAEtlK,mBAAMC;AAAhC,GAAf,CAnEmD,CAqEnD;;AACA,OAAKslK,OAAL,GAAe,KAAK/kL,MAAL,CAAYgwB,KAAZ,EAAf;AACA,OAAKg1J,SAAL,GAAiB,KAAK1/K,MAAL,CAAY+B,QAAZ,CAAqB2oB,KAArB,EAAjB;AACA,OAAKi1J,KAAL,GAAa,KAAK3/K,MAAL,CAAYqyD,IAAzB,CAxEmD,CA0EnD;AACA;AACA;;AAEA,OAAKutH,aAAL,GAAqB,YAAY;AAEhC,WAAOC,SAAS,CAACthJ,GAAjB;AAEA,GAJD;;AAMA,OAAKuhJ,iBAAL,GAAyB,YAAY;AAEpC,WAAOD,SAAS,CAACjuJ,KAAjB;AAEA,GAJD;;AAMA,OAAKmuJ,SAAL,GAAiB,YAAY;AAE5BrkL,IAAAA,KAAK,CAAC+jL,OAAN,CAAc90J,IAAd,CAAoBjvB,KAAK,CAAChB,MAA1B;AACAgB,IAAAA,KAAK,CAACgkL,SAAN,CAAgB/0J,IAAhB,CAAsBjvB,KAAK,CAACsE,MAAN,CAAa+B,QAAnC;AACArG,IAAAA,KAAK,CAACikL,KAAN,GAAcjkL,KAAK,CAACsE,MAAN,CAAaqyD,IAA3B;AAEA,GAND;;AAQA,OAAKoY,KAAL,GAAa,YAAY;AAExB/uE,IAAAA,KAAK,CAAChB,MAAN,CAAaiwB,IAAb,CAAmBjvB,KAAK,CAAC+jL,OAAzB;AACA/jL,IAAAA,KAAK,CAACsE,MAAN,CAAa+B,QAAb,CAAsB4oB,IAAtB,CAA4BjvB,KAAK,CAACgkL,SAAlC;AACAhkL,IAAAA,KAAK,CAACsE,MAAN,CAAaqyD,IAAb,GAAoB32D,KAAK,CAACikL,KAA1B;AAEAjkL,IAAAA,KAAK,CAACsE,MAAN,CAAayyD,sBAAb;AACA/2D,IAAAA,KAAK,CAACqI,aAAN,CAAqBi8K,WAArB;AAEAtkL,IAAAA,KAAK,CAACg+B,MAAN;AAEA8rC,IAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AAEA,GAbD,CAlGmD,CAiHnD;;;AACA,OAAKloI,MAAL,GAAc,YAAY;AAEzB,QAAIr0B,MAAM,GAAG,IAAIy2B,oBAAJ,EAAb,CAFyB,CAIzB;;AACA,QAAIokJ,IAAI,GAAG,IAAIzoJ,uBAAJ,GAAiB4C,kBAAjB,CAAqCr6B,MAAM,CAACghC,EAA5C,EAAgD,IAAIlF,oBAAJ,CAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,CAAhD,CAAX;AACA,QAAIqkJ,WAAW,GAAGD,IAAI,CAACx1J,KAAL,GAAaiQ,OAAb,EAAlB;AAEA,QAAIylJ,YAAY,GAAG,IAAItkJ,oBAAJ,EAAnB;AACA,QAAIukJ,cAAc,GAAG,IAAI5oJ,uBAAJ,EAArB;AAEA,QAAI6oJ,KAAK,GAAG,IAAI/mL,IAAI,CAACutB,EAArB;AAEA,WAAO,SAAS4S,MAAT,GAAkB;AAExB,UAAI33B,QAAQ,GAAGrG,KAAK,CAACsE,MAAN,CAAa+B,QAA5B;AAEAsD,MAAAA,MAAM,CAACslB,IAAP,CAAa5oB,QAAb,EAAwBgpB,GAAxB,CAA6BrvB,KAAK,CAAChB,MAAnC,EAJwB,CAMxB;;AACA2K,MAAAA,MAAM,CAAC82B,eAAP,CAAwB+jJ,IAAxB,EAPwB,CASxB;;AACAL,MAAAA,SAAS,CAAC37I,cAAV,CAA0B7+B,MAA1B;;AAEA,UAAK3J,KAAK,CAACujL,UAAN,IAAoBz5G,KAAK,KAAKy6G,KAAK,CAACre,IAAzC,EAAgD;AAE/C2e,QAAAA,UAAU,CAAEC,oBAAoB,EAAtB,CAAV;AAEA;;AAED,UAAK9kL,KAAK,CAAC6iL,aAAX,EAA2B;AAE1BsB,QAAAA,SAAS,CAACjuJ,KAAV,IAAmB6uJ,cAAc,CAAC7uJ,KAAf,GAAuBl2B,KAAK,CAAC8iL,aAAhD;AACAqB,QAAAA,SAAS,CAACthJ,GAAV,IAAiBkiJ,cAAc,CAACliJ,GAAf,GAAqB7iC,KAAK,CAAC8iL,aAA5C;AAEA,OALD,MAKO;AAENqB,QAAAA,SAAS,CAACjuJ,KAAV,IAAmB6uJ,cAAc,CAAC7uJ,KAAlC;AACAiuJ,QAAAA,SAAS,CAACthJ,GAAV,IAAiBkiJ,cAAc,CAACliJ,GAAhC;AAEA,OA5BuB,CA8BxB;;;AAEA,UAAIlgC,GAAG,GAAG3C,KAAK,CAAC2iL,eAAhB;AACA,UAAI//K,GAAG,GAAG5C,KAAK,CAAC4iL,eAAhB;;AAEA,UAAKrlK,QAAQ,CAAG5a,GAAH,CAAR,IAAoB4a,QAAQ,CAAE3a,GAAF,CAAjC,EAA2C;AAE1C,YAAKD,GAAG,GAAG,CAAE9E,IAAI,CAACutB,EAAlB,EAAuBzoB,GAAG,IAAIiiL,KAAP,CAAvB,KAA0C,IAAKjiL,GAAG,GAAG9E,IAAI,CAACutB,EAAhB,EAAqBzoB,GAAG,IAAIiiL,KAAP;AAE/D,YAAKhiL,GAAG,GAAG,CAAE/E,IAAI,CAACutB,EAAlB,EAAuBxoB,GAAG,IAAIgiL,KAAP,CAAvB,KAA0C,IAAKhiL,GAAG,GAAG/E,IAAI,CAACutB,EAAhB,EAAqBxoB,GAAG,IAAIgiL,KAAP;;AAE/D,YAAKjiL,GAAG,GAAGC,GAAX,EAAiB;AAEhBuhL,UAAAA,SAAS,CAACjuJ,KAAV,GAAkBr4B,IAAI,CAAC+E,GAAL,CAAUD,GAAV,EAAe9E,IAAI,CAAC8E,GAAL,CAAUC,GAAV,EAAeuhL,SAAS,CAACjuJ,KAAzB,CAAf,CAAlB;AAEA,SAJD,MAIO;AAENiuJ,UAAAA,SAAS,CAACjuJ,KAAV,GAAoBiuJ,SAAS,CAACjuJ,KAAV,GAAkB,CAAEvzB,GAAG,GAAGC,GAAR,IAAgB,CAApC,GACjB/E,IAAI,CAAC+E,GAAL,CAAUD,GAAV,EAAewhL,SAAS,CAACjuJ,KAAzB,CADiB,GAEjBr4B,IAAI,CAAC8E,GAAL,CAAUC,GAAV,EAAeuhL,SAAS,CAACjuJ,KAAzB,CAFD;AAIA;AAED,OArDuB,CAuDxB;;;AACAiuJ,MAAAA,SAAS,CAACthJ,GAAV,GAAgBhlC,IAAI,CAAC+E,GAAL,CAAU5C,KAAK,CAACyiL,aAAhB,EAA+B5kL,IAAI,CAAC8E,GAAL,CAAU3C,KAAK,CAAC0iL,aAAhB,EAA+ByB,SAAS,CAACthJ,GAAzC,CAA/B,CAAhB;AAEAshJ,MAAAA,SAAS,CAACniC,QAAV;AAGAmiC,MAAAA,SAAS,CAACvhJ,MAAV,IAAoB5M,KAApB,CA7DwB,CA+DxB;;AACAmuJ,MAAAA,SAAS,CAACvhJ,MAAV,GAAmB/kC,IAAI,CAAC+E,GAAL,CAAU5C,KAAK,CAACsiL,WAAhB,EAA6BzkL,IAAI,CAAC8E,GAAL,CAAU3C,KAAK,CAACwuI,WAAhB,EAA6B21C,SAAS,CAACvhJ,MAAvC,CAA7B,CAAnB,CAhEwB,CAkExB;;AAEA,UAAK5iC,KAAK,CAAC6iL,aAAN,KAAwB,IAA7B,EAAoC;AAEnC7iL,QAAAA,KAAK,CAAChB,MAAN,CAAaowB,eAAb,CAA8B41J,SAA9B,EAAyChlL,KAAK,CAAC8iL,aAA/C;AAEA,OAJD,MAIO;AAEN9iL,QAAAA,KAAK,CAAChB,MAAN,CAAawY,GAAb,CAAkBwtK,SAAlB;AAEA;;AAEDr7K,MAAAA,MAAM,CAAC+4B,gBAAP,CAAyByhJ,SAAzB,EA9EwB,CAgFxB;;AACAx6K,MAAAA,MAAM,CAAC82B,eAAP,CAAwBgkJ,WAAxB;AAEAp+K,MAAAA,QAAQ,CAAC4oB,IAAT,CAAejvB,KAAK,CAAChB,MAArB,EAA8BwY,GAA9B,CAAmC7N,MAAnC;AAEA3J,MAAAA,KAAK,CAACsE,MAAN,CAAa8gC,MAAb,CAAqBplC,KAAK,CAAChB,MAA3B;;AAEA,UAAKgB,KAAK,CAAC6iL,aAAN,KAAwB,IAA7B,EAAoC;AAEnCkC,QAAAA,cAAc,CAAC7uJ,KAAf,IAA0B,IAAIl2B,KAAK,CAAC8iL,aAApC;AACAiC,QAAAA,cAAc,CAACliJ,GAAf,IAAwB,IAAI7iC,KAAK,CAAC8iL,aAAlC;AAEAkC,QAAAA,SAAS,CAACv1J,cAAV,CAA0B,IAAIzvB,KAAK,CAAC8iL,aAApC;AAEA,OAPD,MAOO;AAENiC,QAAAA,cAAc,CAAC12J,GAAf,CAAoB,CAApB,EAAuB,CAAvB,EAA0B,CAA1B;AAEA22J,QAAAA,SAAS,CAAC32J,GAAV,CAAe,CAAf,EAAkB,CAAlB,EAAqB,CAArB;AAEA;;AAED2H,MAAAA,KAAK,GAAG,CAAR,CAtGwB,CAwGxB;AACA;AACA;;AAEA,UAAKivJ,WAAW,IACfP,YAAY,CAAC7zJ,iBAAb,CAAgC7wB,KAAK,CAACsE,MAAN,CAAa+B,QAA7C,IAA0Dy4B,GADtD,IAEJ,KAAM,IAAI6lJ,cAAc,CAACv0J,GAAf,CAAoBpwB,KAAK,CAACsE,MAAN,CAAau5B,UAAjC,CAAV,IAA4DiB,GAF7D,EAEmE;AAElE9+B,QAAAA,KAAK,CAACqI,aAAN,CAAqBi8K,WAArB;AAEAI,QAAAA,YAAY,CAACz1J,IAAb,CAAmBjvB,KAAK,CAACsE,MAAN,CAAa+B,QAAhC;AACAs+K,QAAAA,cAAc,CAAC11J,IAAf,CAAqBjvB,KAAK,CAACsE,MAAN,CAAau5B,UAAlC;AACAonJ,QAAAA,WAAW,GAAG,KAAd;AAEA,eAAO,IAAP;AAEA;;AAED,aAAO,KAAP;AAEA,KA5HD;AA8HA,GA3Ia,EAAd;;AA6IA,OAAK9rJ,OAAL,GAAe,YAAY;AAE1Bn5B,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,aAAtC,EAAqDu8K,aAArD,EAAoE,KAApE;AACAllL,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,WAAtC,EAAmD6E,WAAnD,EAAgE,KAAhE;AACAxN,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,OAAtC,EAA+Cw8K,YAA/C,EAA6D,KAA7D;AAEAnlL,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,YAAtC,EAAoDqF,YAApD,EAAkE,KAAlE;AACAhO,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,UAAtC,EAAkD4F,UAAlD,EAA8D,KAA9D;AACAvO,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,WAAtC,EAAmD2F,WAAnD,EAAgE,KAAhE;AAEAtO,IAAAA,KAAK,CAACyE,UAAN,CAAiB2gL,aAAjB,CAA+Bz8K,mBAA/B,CAAoD,WAApD,EAAiE08K,WAAjE,EAA8E,KAA9E;AACArlL,IAAAA,KAAK,CAACyE,UAAN,CAAiB2gL,aAAjB,CAA+Bz8K,mBAA/B,CAAoD,SAApD,EAA+D2E,SAA/D,EAA0E,KAA1E;AAEAtN,IAAAA,KAAK,CAACyE,UAAN,CAAiBkE,mBAAjB,CAAsC,SAAtC,EAAiD28K,SAAjD,EAA4D,KAA5D,EAb0B,CAe1B;AAEA,GAjBD,CA/PmD,CAkRnD;AACA;AACA;;;AAEA,MAAItlL,KAAK,GAAG,IAAZ;AAEA,MAAIskL,WAAW,GAAG;AAAEt6K,IAAAA,IAAI,EAAE;AAAR,GAAlB;AACA,MAAIu7K,UAAU,GAAG;AAAEv7K,IAAAA,IAAI,EAAE;AAAR,GAAjB;AACA,MAAIw7K,QAAQ,GAAG;AAAEx7K,IAAAA,IAAI,EAAE;AAAR,GAAf;AAEA,MAAIu6K,KAAK,GAAG;AACXre,IAAAA,IAAI,EAAE,CAAE,CADG;AAEX7nJ,IAAAA,MAAM,EAAE,CAFG;AAGXC,IAAAA,KAAK,EAAE,CAHI;AAIXC,IAAAA,GAAG,EAAE,CAJM;AAKXknK,IAAAA,YAAY,EAAE,CALH;AAMXC,IAAAA,SAAS,EAAE,CANA;AAOXC,IAAAA,eAAe,EAAE,CAPN;AAQXC,IAAAA,kBAAkB,EAAE;AART,GAAZ;AAWA,MAAI97G,KAAK,GAAGy6G,KAAK,CAACre,IAAlB;AAEA,MAAIpnI,GAAG,GAAG,QAAV,CAzSmD,CA2SnD;;AACA,MAAIqlJ,SAAS,GAAG,IAAIriC,sBAAJ,EAAhB;AACA,MAAIijC,cAAc,GAAG,IAAIjjC,sBAAJ,EAArB;AAEA,MAAI9rH,KAAK,GAAG,CAAZ;AACA,MAAIgvJ,SAAS,GAAG,IAAI5kJ,oBAAJ,EAAhB;AACA,MAAI6kJ,WAAW,GAAG,KAAlB;AAEA,MAAIY,WAAW,GAAG,IAAIr3J,oBAAJ,EAAlB;AACA,MAAIs3J,SAAS,GAAG,IAAIt3J,oBAAJ,EAAhB;AACA,MAAIu3J,WAAW,GAAG,IAAIv3J,oBAAJ,EAAlB;AAEA,MAAIw3J,QAAQ,GAAG,IAAIx3J,oBAAJ,EAAf;AACA,MAAIy3J,MAAM,GAAG,IAAIz3J,oBAAJ,EAAb;AACA,MAAI03J,QAAQ,GAAG,IAAI13J,oBAAJ,EAAf;AAEA,MAAI23J,UAAU,GAAG,IAAI33J,oBAAJ,EAAjB;AACA,MAAI43J,QAAQ,GAAG,IAAI53J,oBAAJ,EAAf;AACA,MAAI63J,UAAU,GAAG,IAAI73J,oBAAJ,EAAjB;;AAEA,WAASs2J,oBAAT,GAAgC;AAE/B,WAAO,IAAIjnL,IAAI,CAACutB,EAAT,GAAc,EAAd,GAAmB,EAAnB,GAAwBprB,KAAK,CAACwjL,eAArC;AAEA;;AAED,WAAS8C,YAAT,GAAwB;AAEvB,WAAOzoL,IAAI,CAACsO,GAAL,CAAU,IAAV,EAAgBnM,KAAK,CAACgjL,SAAtB,CAAP;AAEA;;AAED,WAAS6B,UAAT,CAAqBn0J,KAArB,EAA6B;AAE5Bq0J,IAAAA,cAAc,CAAC7uJ,KAAf,IAAwBxF,KAAxB;AAEA;;AAED,WAAS61J,QAAT,CAAmB71J,KAAnB,EAA2B;AAE1Bq0J,IAAAA,cAAc,CAACliJ,GAAf,IAAsBnS,KAAtB;AAEA;;AAED,MAAI81J,OAAO,GAAG,YAAY;AAEzB,QAAInoL,CAAC,GAAG,IAAI+hC,oBAAJ,EAAR;AAEA,WAAO,SAASomJ,OAAT,CAAkBv6I,QAAlB,EAA4Bw6I,YAA5B,EAA2C;AAEjDpoL,MAAAA,CAAC,CAAC8kC,mBAAF,CAAuBsjJ,YAAvB,EAAqC,CAArC,EAFiD,CAEP;;AAC1CpoL,MAAAA,CAAC,CAACoxB,cAAF,CAAkB,CAAEwc,QAApB;AAEA+4I,MAAAA,SAAS,CAACxtK,GAAV,CAAenZ,CAAf;AAEA,KAPD;AASA,GAba,EAAd;;AAeA,MAAIqoL,KAAK,GAAG,YAAY;AAEvB,QAAIroL,CAAC,GAAG,IAAI+hC,oBAAJ,EAAR;AAEA,WAAO,SAASsmJ,KAAT,CAAgBz6I,QAAhB,EAA0Bw6I,YAA1B,EAAyC;AAE/C,UAAKzmL,KAAK,CAACqjL,kBAAN,KAA6B,IAAlC,EAAyC;AAExChlL,QAAAA,CAAC,CAAC8kC,mBAAF,CAAuBsjJ,YAAvB,EAAqC,CAArC;AAEA,OAJD,MAIO;AAENpoL,QAAAA,CAAC,CAAC8kC,mBAAF,CAAuBsjJ,YAAvB,EAAqC,CAArC;AACApoL,QAAAA,CAAC,CAACujC,YAAF,CAAgB5hC,KAAK,CAACsE,MAAN,CAAaghC,EAA7B,EAAiCjnC,CAAjC;AAEA;;AAEDA,MAAAA,CAAC,CAACoxB,cAAF,CAAkBwc,QAAlB;AAEA+4I,MAAAA,SAAS,CAACxtK,GAAV,CAAenZ,CAAf;AAEA,KAjBD;AAmBA,GAvBW,EAAZ,CAtWmD,CA+XnD;;;AACA,MAAIsoL,GAAG,GAAG,YAAY;AAErB,QAAIh9K,MAAM,GAAG,IAAIy2B,oBAAJ,EAAb;AAEA,WAAO,SAASumJ,GAAT,CAAcC,MAAd,EAAsBC,MAAtB,EAA+B;AAErC,UAAI77K,OAAO,GAAGhL,KAAK,CAACyE,UAApB;;AAEA,UAAKzE,KAAK,CAACsE,MAAN,CAAa0yD,mBAAlB,EAAwC;AAEvC;AACA,YAAI3wD,QAAQ,GAAGrG,KAAK,CAACsE,MAAN,CAAa+B,QAA5B;AACAsD,QAAAA,MAAM,CAACslB,IAAP,CAAa5oB,QAAb,EAAwBgpB,GAAxB,CAA6BrvB,KAAK,CAAChB,MAAnC;AACA,YAAI8nL,cAAc,GAAGn9K,MAAM,CAACnL,MAAP,EAArB,CALuC,CAOvC;;AACAsoL,QAAAA,cAAc,IAAIjpL,IAAI,CAAC05D,GAAL,CAAYv3D,KAAK,CAACsE,MAAN,CAAamyD,GAAb,GAAmB,CAArB,GAA2B54D,IAAI,CAACutB,EAAhC,GAAqC,KAA/C,CAAlB,CARuC,CAUvC;;AACAo7J,QAAAA,OAAO,CAAE,IAAII,MAAJ,GAAaE,cAAb,GAA8B97K,OAAO,CAAC+7K,YAAxC,EAAsD/mL,KAAK,CAACsE,MAAN,CAAaswB,MAAnE,CAAP;AACA8xJ,QAAAA,KAAK,CAAE,IAAIG,MAAJ,GAAaC,cAAb,GAA8B97K,OAAO,CAAC+7K,YAAxC,EAAsD/mL,KAAK,CAACsE,MAAN,CAAaswB,MAAnE,CAAL;AAEA,OAdD,MAcO,IAAK50B,KAAK,CAACsE,MAAN,CAAamlG,oBAAlB,EAAyC;AAE/C;AACA+8E,QAAAA,OAAO,CAAEI,MAAM,IAAK5mL,KAAK,CAACsE,MAAN,CAAaiC,KAAb,GAAqBvG,KAAK,CAACsE,MAAN,CAAagC,IAAvC,CAAN,GAAsDtG,KAAK,CAACsE,MAAN,CAAaqyD,IAAnE,GAA0E3rD,OAAO,CAACg8K,WAApF,EAAiGhnL,KAAK,CAACsE,MAAN,CAAaswB,MAA9G,CAAP;AACA8xJ,QAAAA,KAAK,CAAEG,MAAM,IAAK7mL,KAAK,CAACsE,MAAN,CAAakC,GAAb,GAAmBxG,KAAK,CAACsE,MAAN,CAAamC,MAArC,CAAN,GAAsDzG,KAAK,CAACsE,MAAN,CAAaqyD,IAAnE,GAA0E3rD,OAAO,CAAC+7K,YAApF,EAAkG/mL,KAAK,CAACsE,MAAN,CAAaswB,MAA/G,CAAL;AAEA,OANM,MAMA;AAEN;AACAtG,QAAAA,OAAO,CAACC,IAAR,CAAc,8EAAd;AACAvuB,QAAAA,KAAK,CAACmjL,SAAN,GAAkB,KAAlB;AAEA;AAED,KAhCD;AAkCA,GAtCS,EAAV;;AAwCA,WAAS8D,QAAT,CAAmBC,UAAnB,EAAgC;AAE/B,QAAKlnL,KAAK,CAACsE,MAAN,CAAa0yD,mBAAlB,EAAwC;AAEvChhC,MAAAA,KAAK,IAAIkxJ,UAAT;AAEA,KAJD,MAIO,IAAKlnL,KAAK,CAACsE,MAAN,CAAamlG,oBAAlB,EAAyC;AAE/CzpG,MAAAA,KAAK,CAACsE,MAAN,CAAaqyD,IAAb,GAAoB94D,IAAI,CAAC+E,GAAL,CAAU5C,KAAK,CAACuiL,OAAhB,EAAyB1kL,IAAI,CAAC8E,GAAL,CAAU3C,KAAK,CAACwiL,OAAhB,EAAyBxiL,KAAK,CAACsE,MAAN,CAAaqyD,IAAb,GAAoBuwH,UAA7C,CAAzB,CAApB;AACAlnL,MAAAA,KAAK,CAACsE,MAAN,CAAayyD,sBAAb;AACAkuH,MAAAA,WAAW,GAAG,IAAd;AAEA,KANM,MAMA;AAEN32J,MAAAA,OAAO,CAACC,IAAR,CAAc,qFAAd;AACAvuB,MAAAA,KAAK,CAAC+iL,UAAN,GAAmB,KAAnB;AAEA;AAED;;AAED,WAASoE,OAAT,CAAkBD,UAAlB,EAA+B;AAE9B,QAAKlnL,KAAK,CAACsE,MAAN,CAAa0yD,mBAAlB,EAAwC;AAEvChhC,MAAAA,KAAK,IAAIkxJ,UAAT;AAEA,KAJD,MAIO,IAAKlnL,KAAK,CAACsE,MAAN,CAAamlG,oBAAlB,EAAyC;AAE/CzpG,MAAAA,KAAK,CAACsE,MAAN,CAAaqyD,IAAb,GAAoB94D,IAAI,CAAC+E,GAAL,CAAU5C,KAAK,CAACuiL,OAAhB,EAAyB1kL,IAAI,CAAC8E,GAAL,CAAU3C,KAAK,CAACwiL,OAAhB,EAAyBxiL,KAAK,CAACsE,MAAN,CAAaqyD,IAAb,GAAoBuwH,UAA7C,CAAzB,CAApB;AACAlnL,MAAAA,KAAK,CAACsE,MAAN,CAAayyD,sBAAb;AACAkuH,MAAAA,WAAW,GAAG,IAAd;AAEA,KANM,MAMA;AAEN32J,MAAAA,OAAO,CAACC,IAAR,CAAc,qFAAd;AACAvuB,MAAAA,KAAK,CAAC+iL,UAAN,GAAmB,KAAnB;AAEA;AAED,GAhdkD,CAkdnD;AACA;AACA;;;AAEA,WAASqE,qBAAT,CAAgC9+K,KAAhC,EAAwC;AAEvCu9K,IAAAA,WAAW,CAACx3J,GAAZ,CAAiB/lB,KAAK,CAACrB,OAAvB,EAAgCqB,KAAK,CAACnB,OAAtC;AAEA;;AAED,WAASkgL,oBAAT,CAA+B/+K,KAA/B,EAAuC;AAEtC69K,IAAAA,UAAU,CAAC93J,GAAX,CAAgB/lB,KAAK,CAACrB,OAAtB,EAA+BqB,KAAK,CAACnB,OAArC;AAEA;;AAED,WAASmgL,kBAAT,CAA6Bh/K,KAA7B,EAAqC;AAEpC09K,IAAAA,QAAQ,CAAC33J,GAAT,CAAc/lB,KAAK,CAACrB,OAApB,EAA6BqB,KAAK,CAACnB,OAAnC;AAEA;;AAED,WAASogL,qBAAT,CAAgCj/K,KAAhC,EAAwC;AAEvCw9K,IAAAA,SAAS,CAACz3J,GAAV,CAAe/lB,KAAK,CAACrB,OAArB,EAA8BqB,KAAK,CAACnB,OAApC;AAEA4+K,IAAAA,WAAW,CAACz2J,UAAZ,CAAwBw2J,SAAxB,EAAmCD,WAAnC,EAAiDp2J,cAAjD,CAAiEzvB,KAAK,CAACkjL,WAAvE;AAEA,QAAIl4K,OAAO,GAAGhL,KAAK,CAACyE,UAApB;AAEAogL,IAAAA,UAAU,CAAE,IAAIhnL,IAAI,CAACutB,EAAT,GAAc26J,WAAW,CAAC7+K,CAA1B,GAA8B8D,OAAO,CAAC+7K,YAAxC,CAAV,CARuC,CAQ2B;;AAElER,IAAAA,QAAQ,CAAE,IAAI1oL,IAAI,CAACutB,EAAT,GAAc26J,WAAW,CAAC3+K,CAA1B,GAA8B4D,OAAO,CAAC+7K,YAAxC,CAAR;AAEAlB,IAAAA,WAAW,CAAC52J,IAAZ,CAAkB62J,SAAlB;AAEA9lL,IAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAASwpJ,oBAAT,CAA+Bl/K,KAA/B,EAAuC;AAEtC89K,IAAAA,QAAQ,CAAC/3J,GAAT,CAAc/lB,KAAK,CAACrB,OAApB,EAA6BqB,KAAK,CAACnB,OAAnC;AAEAk/K,IAAAA,UAAU,CAAC/2J,UAAX,CAAuB82J,QAAvB,EAAiCD,UAAjC;;AAEA,QAAKE,UAAU,CAACj/K,CAAX,GAAe,CAApB,EAAwB;AAEvB6/K,MAAAA,QAAQ,CAAEX,YAAY,EAAd,CAAR;AAEA,KAJD,MAIO,IAAKD,UAAU,CAACj/K,CAAX,GAAe,CAApB,EAAwB;AAE9B+/K,MAAAA,OAAO,CAAEb,YAAY,EAAd,CAAP;AAEA;;AAEDH,IAAAA,UAAU,CAACl3J,IAAX,CAAiBm3J,QAAjB;AAEApmL,IAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAASypJ,kBAAT,CAA6Bn/K,KAA7B,EAAqC;AAEpC29K,IAAAA,MAAM,CAAC53J,GAAP,CAAY/lB,KAAK,CAACrB,OAAlB,EAA2BqB,KAAK,CAACnB,OAAjC;AAEA++K,IAAAA,QAAQ,CAAC52J,UAAT,CAAqB22J,MAArB,EAA6BD,QAA7B,EAAwCv2J,cAAxC,CAAwDzvB,KAAK,CAACojL,QAA9D;AAEAuD,IAAAA,GAAG,CAAET,QAAQ,CAACh/K,CAAX,EAAcg/K,QAAQ,CAAC9+K,CAAvB,CAAH;AAEA4+K,IAAAA,QAAQ,CAAC/2J,IAAT,CAAeg3J,MAAf;AAEAjmL,IAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAAS0pJ,aAAT;AAAwB;AAAY,GAEnC;AAEA;;AAED,WAASC,gBAAT,CAA2Br/K,KAA3B,EAAmC;AAElC,QAAKA,KAAK,CAACu+K,MAAN,GAAe,CAApB,EAAwB;AAEvBM,MAAAA,OAAO,CAAEb,YAAY,EAAd,CAAP;AAEA,KAJD,MAIO,IAAKh+K,KAAK,CAACu+K,MAAN,GAAe,CAApB,EAAwB;AAE9BI,MAAAA,QAAQ,CAAEX,YAAY,EAAd,CAAR;AAEA;;AAEDtmL,IAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAAS4pJ,aAAT,CAAwBt/K,KAAxB,EAAgC;AAE/B,QAAIshD,WAAW,GAAG,KAAlB;;AAEA,YAASthD,KAAK,CAACJ,OAAf;AAEC,WAAKlI,KAAK,CAACX,IAAN,CAAWqkL,EAAhB;AACCiD,QAAAA,GAAG,CAAE,CAAF,EAAK3mL,KAAK,CAACsjL,WAAX,CAAH;AACA15H,QAAAA,WAAW,GAAG,IAAd;AACA;;AAED,WAAK5pD,KAAK,CAACX,IAAN,CAAWskL,MAAhB;AACCgD,QAAAA,GAAG,CAAE,CAAF,EAAK,CAAE3mL,KAAK,CAACsjL,WAAb,CAAH;AACA15H,QAAAA,WAAW,GAAG,IAAd;AACA;;AAED,WAAK5pD,KAAK,CAACX,IAAN,CAAW6e,IAAhB;AACCyoK,QAAAA,GAAG,CAAE3mL,KAAK,CAACsjL,WAAR,EAAqB,CAArB,CAAH;AACA15H,QAAAA,WAAW,GAAG,IAAd;AACA;;AAED,WAAK5pD,KAAK,CAACX,IAAN,CAAW+e,KAAhB;AACCuoK,QAAAA,GAAG,CAAE,CAAE3mL,KAAK,CAACsjL,WAAV,EAAuB,CAAvB,CAAH;AACA15H,QAAAA,WAAW,GAAG,IAAd;AACA;AApBF;;AAwBA,QAAKA,WAAL,EAAmB;AAElB;AACAthD,MAAAA,KAAK,CAAC4F,cAAN;AAEAlO,MAAAA,KAAK,CAACg+B,MAAN;AAEA;AAGD;;AAED,WAAS6pJ,sBAAT,CAAiCv/K,KAAjC,EAAyC;AAExC,QAAKA,KAAK,CAAC+F,OAAN,CAAc7P,MAAd,IAAwB,CAA7B,EAAiC;AAEhCqnL,MAAAA,WAAW,CAACx3J,GAAZ,CAAiB/lB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAApC,EAA2Cx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAA9D;AAEA,KAJD,MAIO;AAEN,UAAI7gL,CAAC,GAAG,OAAQoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAnB,GAA2Bx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAtD,CAAR;AACA,UAAI1gL,CAAC,GAAG,OAAQkB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAnB,GAA2Bz/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAtD,CAAR;AAEAlC,MAAAA,WAAW,CAACx3J,GAAZ,CAAiBnnB,CAAjB,EAAoBE,CAApB;AAEA;AAED;;AAED,WAAS4gL,mBAAT,CAA8B1/K,KAA9B,EAAsC;AAErC,QAAKA,KAAK,CAAC+F,OAAN,CAAc7P,MAAd,IAAwB,CAA7B,EAAiC;AAEhCwnL,MAAAA,QAAQ,CAAC33J,GAAT,CAAc/lB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAjC,EAAwCx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAA3D;AAEA,KAJD,MAIO;AAEN,UAAI7gL,CAAC,GAAG,OAAQoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAnB,GAA2Bx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAtD,CAAR;AACA,UAAI1gL,CAAC,GAAG,OAAQkB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAnB,GAA2Bz/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAtD,CAAR;AAEA/B,MAAAA,QAAQ,CAAC33J,GAAT,CAAcnnB,CAAd,EAAiBE,CAAjB;AAEA;AAED;;AAED,WAAS6gL,qBAAT,CAAgC3/K,KAAhC,EAAwC;AAEvC,QAAIwoB,EAAE,GAAGxoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAnB,GAA2Bx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAvD;AACA,QAAI/2J,EAAE,GAAGzoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAnB,GAA2Bz/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAvD;AAEA,QAAI97I,QAAQ,GAAGpuC,IAAI,CAAC0yB,IAAL,CAAWO,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAA1B,CAAf;AAEAo1J,IAAAA,UAAU,CAAC93J,GAAX,CAAgB,CAAhB,EAAmB4d,QAAnB;AAEA;;AAED,WAASi8I,wBAAT,CAAmC5/K,KAAnC,EAA2C;AAE1C,QAAKtI,KAAK,CAAC+iL,UAAX,EAAwBkF,qBAAqB,CAAE3/K,KAAF,CAArB;AAExB,QAAKtI,KAAK,CAACmjL,SAAX,EAAuB6E,mBAAmB,CAAE1/K,KAAF,CAAnB;AAEvB;;AAED,WAAS6/K,2BAAT,CAAsC7/K,KAAtC,EAA8C;AAE7C,QAAKtI,KAAK,CAAC+iL,UAAX,EAAwBkF,qBAAqB,CAAE3/K,KAAF,CAArB;AAExB,QAAKtI,KAAK,CAACijL,YAAX,EAA0B4E,sBAAsB,CAAEv/K,KAAF,CAAtB;AAE1B;;AAED,WAAS8/K,qBAAT,CAAgC9/K,KAAhC,EAAwC;AAEvC,QAAKA,KAAK,CAAC+F,OAAN,CAAc7P,MAAd,IAAwB,CAA7B,EAAiC;AAEhCsnL,MAAAA,SAAS,CAACz3J,GAAV,CAAe/lB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAlC,EAAyCx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAA5D;AAEA,KAJD,MAIO;AAEN,UAAI7gL,CAAC,GAAG,OAAQoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAnB,GAA2Bx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAtD,CAAR;AACA,UAAI1gL,CAAC,GAAG,OAAQkB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAnB,GAA2Bz/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAtD,CAAR;AAEAjC,MAAAA,SAAS,CAACz3J,GAAV,CAAennB,CAAf,EAAkBE,CAAlB;AAEA;;AAED2+K,IAAAA,WAAW,CAACz2J,UAAZ,CAAwBw2J,SAAxB,EAAmCD,WAAnC,EAAiDp2J,cAAjD,CAAiEzvB,KAAK,CAACkjL,WAAvE;AAEA,QAAIl4K,OAAO,GAAGhL,KAAK,CAACyE,UAApB;AAEAogL,IAAAA,UAAU,CAAE,IAAIhnL,IAAI,CAACutB,EAAT,GAAc26J,WAAW,CAAC7+K,CAA1B,GAA8B8D,OAAO,CAAC+7K,YAAxC,CAAV,CAnBuC,CAmB2B;;AAElER,IAAAA,QAAQ,CAAE,IAAI1oL,IAAI,CAACutB,EAAT,GAAc26J,WAAW,CAAC3+K,CAA1B,GAA8B4D,OAAO,CAAC+7K,YAAxC,CAAR;AAEAlB,IAAAA,WAAW,CAAC52J,IAAZ,CAAkB62J,SAAlB;AAEA;;AAED,WAASuC,kBAAT,CAA6B//K,KAA7B,EAAqC;AAEpC,QAAKA,KAAK,CAAC+F,OAAN,CAAc7P,MAAd,IAAwB,CAA7B,EAAiC;AAEhCynL,MAAAA,MAAM,CAAC53J,GAAP,CAAY/lB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAA/B,EAAsCx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAzD;AAEA,KAJD,MAIO;AAEN,UAAI7gL,CAAC,GAAG,OAAQoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAnB,GAA2Bx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAtD,CAAR;AACA,UAAI1gL,CAAC,GAAG,OAAQkB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAnB,GAA2Bz/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAtD,CAAR;AAEA9B,MAAAA,MAAM,CAAC53J,GAAP,CAAYnnB,CAAZ,EAAeE,CAAf;AAEA;;AAED8+K,IAAAA,QAAQ,CAAC52J,UAAT,CAAqB22J,MAArB,EAA6BD,QAA7B,EAAwCv2J,cAAxC,CAAwDzvB,KAAK,CAACojL,QAA9D;AAEAuD,IAAAA,GAAG,CAAET,QAAQ,CAACh/K,CAAX,EAAcg/K,QAAQ,CAAC9+K,CAAvB,CAAH;AAEA4+K,IAAAA,QAAQ,CAAC/2J,IAAT,CAAeg3J,MAAf;AAEA;;AAED,WAASqC,oBAAT,CAA+BhgL,KAA/B,EAAuC;AAEtC,QAAIwoB,EAAE,GAAGxoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAnB,GAA2Bx/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmBy5K,KAAvD;AACA,QAAI/2J,EAAE,GAAGzoB,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAnB,GAA2Bz/K,KAAK,CAAC+F,OAAN,CAAe,CAAf,EAAmB05K,KAAvD;AAEA,QAAI97I,QAAQ,GAAGpuC,IAAI,CAAC0yB,IAAL,CAAWO,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAA1B,CAAf;AAEAq1J,IAAAA,QAAQ,CAAC/3J,GAAT,CAAc,CAAd,EAAiB4d,QAAjB;AAEAo6I,IAAAA,UAAU,CAACh4J,GAAX,CAAgB,CAAhB,EAAmBxwB,IAAI,CAACsO,GAAL,CAAUi6K,QAAQ,CAACh/K,CAAT,GAAa++K,UAAU,CAAC/+K,CAAlC,EAAqCpH,KAAK,CAACgjL,SAA3C,CAAnB;AAEAiE,IAAAA,QAAQ,CAAEZ,UAAU,CAACj/K,CAAb,CAAR;AAEA++K,IAAAA,UAAU,CAACl3J,IAAX,CAAiBm3J,QAAjB;AAEA;;AAED,WAASmC,uBAAT,CAAkCjgL,KAAlC,EAA0C;AAEzC,QAAKtI,KAAK,CAAC+iL,UAAX,EAAwBuF,oBAAoB,CAAEhgL,KAAF,CAApB;AAExB,QAAKtI,KAAK,CAACmjL,SAAX,EAAuBkF,kBAAkB,CAAE//K,KAAF,CAAlB;AAEvB;;AAED,WAASkgL,0BAAT,CAAqClgL,KAArC,EAA6C;AAE5C,QAAKtI,KAAK,CAAC+iL,UAAX,EAAwBuF,oBAAoB,CAAEhgL,KAAF,CAApB;AAExB,QAAKtI,KAAK,CAACijL,YAAX,EAA0BmF,qBAAqB,CAAE9/K,KAAF,CAArB;AAE1B;;AAED,WAASmgL,cAAT;AAAyB;AAAY,GAIpC,CAJD,CAEC;AAID;AACA;AACA;;;AAEA,WAASj7K,WAAT,CAAsBlF,KAAtB,EAA8B;AAE7B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B,OAFF,CAI7B;;AACAhrD,IAAAA,KAAK,CAAC4F,cAAN,GAL6B,CAO7B;AACA;;AAEAlO,IAAAA,KAAK,CAACyE,UAAN,CAAiBwX,KAAjB,GAAyBjc,KAAK,CAACyE,UAAN,CAAiBwX,KAAjB,EAAzB,GAAoDzU,MAAM,CAACyU,KAAP,EAApD;AAEA,QAAIysK,WAAJ;;AAEA,YAASpgL,KAAK,CAACkT,MAAf;AAEC,WAAK,CAAL;AAECktK,QAAAA,WAAW,GAAG1oL,KAAK,CAAC4jL,YAAN,CAAmB1lK,IAAjC;AACA;;AAED,WAAK,CAAL;AAECwqK,QAAAA,WAAW,GAAG1oL,KAAK,CAAC4jL,YAAN,CAAmBzlK,MAAjC;AACA;;AAED,WAAK,CAAL;AAECuqK,QAAAA,WAAW,GAAG1oL,KAAK,CAAC4jL,YAAN,CAAmBxlK,KAAjC;AACA;;AAED;AAECsqK,QAAAA,WAAW,GAAG,CAAE,CAAhB;AAnBF;;AAuBA,YAASA,WAAT;AAEC,WAAKzqK,mBAAMK,KAAX;AAEC,YAAKte,KAAK,CAAC+iL,UAAN,KAAqB,KAA1B,EAAkC;AAElCsE,QAAAA,oBAAoB,CAAE/+K,KAAF,CAApB;AAEAwhE,QAAAA,KAAK,GAAGy6G,KAAK,CAACjmK,KAAd;AAEA;;AAED,WAAKL,mBAAMI,MAAX;AAEC,YAAK/V,KAAK,CAACR,OAAN,IAAiBQ,KAAK,CAACL,OAAvB,IAAkCK,KAAK,CAACN,QAA7C,EAAwD;AAEvD,cAAKhI,KAAK,CAACmjL,SAAN,KAAoB,KAAzB,EAAiC;AAEjCmE,UAAAA,kBAAkB,CAAEh/K,KAAF,CAAlB;AAEAwhE,UAAAA,KAAK,GAAGy6G,KAAK,CAAChmK,GAAd;AAEA,SARD,MAQO;AAEN,cAAKve,KAAK,CAACijL,YAAN,KAAuB,KAA5B,EAAoC;AAEpCmE,UAAAA,qBAAqB,CAAE9+K,KAAF,CAArB;AAEAwhE,UAAAA,KAAK,GAAGy6G,KAAK,CAAClmK,MAAd;AAEA;;AAED;;AAED,WAAKJ,mBAAMM,GAAX;AAEC,YAAKjW,KAAK,CAACR,OAAN,IAAiBQ,KAAK,CAACL,OAAvB,IAAkCK,KAAK,CAACN,QAA7C,EAAwD;AAEvD,cAAKhI,KAAK,CAACijL,YAAN,KAAuB,KAA5B,EAAoC;AAEpCmE,UAAAA,qBAAqB,CAAE9+K,KAAF,CAArB;AAEAwhE,UAAAA,KAAK,GAAGy6G,KAAK,CAAClmK,MAAd;AAEA,SARD,MAQO;AAEN,cAAKre,KAAK,CAACmjL,SAAN,KAAoB,KAAzB,EAAiC;AAEjCmE,UAAAA,kBAAkB,CAAEh/K,KAAF,CAAlB;AAEAwhE,UAAAA,KAAK,GAAGy6G,KAAK,CAAChmK,GAAd;AAEA;;AAED;;AAED;AAECurD,QAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AA1DF;;AA8DA,QAAKp8F,KAAK,KAAKy6G,KAAK,CAACre,IAArB,EAA4B;AAE3BlmK,MAAAA,KAAK,CAACyE,UAAN,CAAiB2gL,aAAjB,CAA+B38K,gBAA/B,CAAiD,WAAjD,EAA8D48K,WAA9D,EAA2E,KAA3E;AACArlL,MAAAA,KAAK,CAACyE,UAAN,CAAiB2gL,aAAjB,CAA+B38K,gBAA/B,CAAiD,SAAjD,EAA4D6E,SAA5D,EAAuE,KAAvE;AAEAtN,MAAAA,KAAK,CAACqI,aAAN,CAAqBk9K,UAArB;AAEA;AAED;;AAED,WAASF,WAAT,CAAsB/8K,KAAtB,EAA8B;AAE7B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAE/BhrD,IAAAA,KAAK,CAAC4F,cAAN;;AAEA,YAAS47D,KAAT;AAEC,WAAKy6G,KAAK,CAAClmK,MAAX;AAEC,YAAKre,KAAK,CAACijL,YAAN,KAAuB,KAA5B,EAAoC;AAEpCsE,QAAAA,qBAAqB,CAAEj/K,KAAF,CAArB;AAEA;;AAED,WAAKi8K,KAAK,CAACjmK,KAAX;AAEC,YAAKte,KAAK,CAAC+iL,UAAN,KAAqB,KAA1B,EAAkC;AAElCyE,QAAAA,oBAAoB,CAAEl/K,KAAF,CAApB;AAEA;;AAED,WAAKi8K,KAAK,CAAChmK,GAAX;AAEC,YAAKve,KAAK,CAACmjL,SAAN,KAAoB,KAAzB,EAAiC;AAEjCsE,QAAAA,kBAAkB,CAAEn/K,KAAF,CAAlB;AAEA;AAxBF;AA4BA;;AAED,WAASgF,SAAT,CAAoBhF,KAApB,EAA4B;AAE3B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAE/Bo0H,IAAAA,aAAa,CAAEp/K,KAAF,CAAb;AAEAtI,IAAAA,KAAK,CAACyE,UAAN,CAAiB2gL,aAAjB,CAA+Bz8K,mBAA/B,CAAoD,WAApD,EAAiE08K,WAAjE,EAA8E,KAA9E;AACArlL,IAAAA,KAAK,CAACyE,UAAN,CAAiB2gL,aAAjB,CAA+Bz8K,mBAA/B,CAAoD,SAApD,EAA+D2E,SAA/D,EAA0E,KAA1E;AAEAtN,IAAAA,KAAK,CAACqI,aAAN,CAAqBm9K,QAArB;AAEA17G,IAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AAEA;;AAED,WAASif,YAAT,CAAuB78K,KAAvB,EAA+B;AAE9B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAlB,IAA2BtzD,KAAK,CAAC+iL,UAAN,KAAqB,KAAhD,IAA2Dj5G,KAAK,KAAKy6G,KAAK,CAACre,IAAhB,IAAwBp8F,KAAK,KAAKy6G,KAAK,CAAClmK,MAAxG,EAAmH;AAEnH/V,IAAAA,KAAK,CAAC4F,cAAN;AACA5F,IAAAA,KAAK,CAAC8R,eAAN;AAEApa,IAAAA,KAAK,CAACqI,aAAN,CAAqBk9K,UAArB;AAEAoC,IAAAA,gBAAgB,CAAEr/K,KAAF,CAAhB;AAEAtI,IAAAA,KAAK,CAACqI,aAAN,CAAqBm9K,QAArB;AAEA;;AAED,WAASF,SAAT,CAAoBh9K,KAApB,EAA4B;AAE3B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAlB,IAA2BtzD,KAAK,CAACyjL,UAAN,KAAqB,KAAhD,IAAyDzjL,KAAK,CAACmjL,SAAN,KAAoB,KAAlF,EAA0F;AAE1FyE,IAAAA,aAAa,CAAEt/K,KAAF,CAAb;AAEA;;AAED,WAAS0F,YAAT,CAAuB1F,KAAvB,EAA+B;AAE9B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAE/BhrD,IAAAA,KAAK,CAAC4F,cAAN,GAJ8B,CAIN;;AAExB,YAAS5F,KAAK,CAAC+F,OAAN,CAAc7P,MAAvB;AAEC,WAAK,CAAL;AAEC,gBAASwB,KAAK,CAACqO,OAAN,CAAcw1K,GAAvB;AAEC,eAAKrlK,mBAAMH,MAAX;AAEC,gBAAKre,KAAK,CAACijL,YAAN,KAAuB,KAA5B,EAAoC;AAEpC4E,YAAAA,sBAAsB,CAAEv/K,KAAF,CAAtB;AAEAwhE,YAAAA,KAAK,GAAGy6G,KAAK,CAACkB,YAAd;AAEA;;AAED,eAAKjnK,mBAAMD,GAAX;AAEC,gBAAKve,KAAK,CAACmjL,SAAN,KAAoB,KAAzB,EAAiC;AAEjC6E,YAAAA,mBAAmB,CAAE1/K,KAAF,CAAnB;AAEAwhE,YAAAA,KAAK,GAAGy6G,KAAK,CAACmB,SAAd;AAEA;;AAED;AAEC57G,YAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AAxBF;;AA4BA;;AAED,WAAK,CAAL;AAEC,gBAASlmK,KAAK,CAACqO,OAAN,CAAcy1K,GAAvB;AAEC,eAAKtlK,mBAAMC,SAAX;AAEC,gBAAKze,KAAK,CAAC+iL,UAAN,KAAqB,KAArB,IAA8B/iL,KAAK,CAACmjL,SAAN,KAAoB,KAAvD,EAA+D;AAE/D+E,YAAAA,wBAAwB,CAAE5/K,KAAF,CAAxB;AAEAwhE,YAAAA,KAAK,GAAGy6G,KAAK,CAACoB,eAAd;AAEA;;AAED,eAAKnnK,mBAAME,YAAX;AAEC,gBAAK1e,KAAK,CAAC+iL,UAAN,KAAqB,KAArB,IAA8B/iL,KAAK,CAACijL,YAAN,KAAuB,KAA1D,EAAkE;AAElEkF,YAAAA,2BAA2B,CAAE7/K,KAAF,CAA3B;AAEAwhE,YAAAA,KAAK,GAAGy6G,KAAK,CAACqB,kBAAd;AAEA;;AAED;AAEC97G,YAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AAxBF;;AA4BA;;AAED;AAECp8F,QAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AApEF;;AAwEA,QAAKp8F,KAAK,KAAKy6G,KAAK,CAACre,IAArB,EAA4B;AAE3BlmK,MAAAA,KAAK,CAACqI,aAAN,CAAqBk9K,UAArB;AAEA;AAED;;AAED,WAASj3K,WAAT,CAAsBhG,KAAtB,EAA8B;AAE7B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAE/BhrD,IAAAA,KAAK,CAAC4F,cAAN,GAJ6B,CAIL;;AACxB5F,IAAAA,KAAK,CAAC8R,eAAN;;AAEA,YAAS0vD,KAAT;AAEC,WAAKy6G,KAAK,CAACkB,YAAX;AAEC,YAAKzlL,KAAK,CAACijL,YAAN,KAAuB,KAA5B,EAAoC;AAEpCmF,QAAAA,qBAAqB,CAAE9/K,KAAF,CAArB;AAEAtI,QAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAAKumJ,KAAK,CAACmB,SAAX;AAEC,YAAK1lL,KAAK,CAACmjL,SAAN,KAAoB,KAAzB,EAAiC;AAEjCkF,QAAAA,kBAAkB,CAAE//K,KAAF,CAAlB;AAEAtI,QAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAAKumJ,KAAK,CAACoB,eAAX;AAEC,YAAK3lL,KAAK,CAAC+iL,UAAN,KAAqB,KAArB,IAA8B/iL,KAAK,CAACmjL,SAAN,KAAoB,KAAvD,EAA+D;AAE/DoF,QAAAA,uBAAuB,CAAEjgL,KAAF,CAAvB;AAEAtI,QAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED,WAAKumJ,KAAK,CAACqB,kBAAX;AAEC,YAAK5lL,KAAK,CAAC+iL,UAAN,KAAqB,KAArB,IAA8B/iL,KAAK,CAACijL,YAAN,KAAuB,KAA1D,EAAkE;AAElEuF,QAAAA,0BAA0B,CAAElgL,KAAF,CAA1B;AAEAtI,QAAAA,KAAK,CAACg+B,MAAN;AAEA;;AAED;AAEC8rC,QAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AA5CF;AAgDA;;AAED,WAAS33J,UAAT,CAAqBjG,KAArB,EAA6B;AAE5B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAE/Bm1H,IAAAA,cAAc,CAAEngL,KAAF,CAAd;AAEAtI,IAAAA,KAAK,CAACqI,aAAN,CAAqBm9K,QAArB;AAEA17G,IAAAA,KAAK,GAAGy6G,KAAK,CAACre,IAAd;AAEA;;AAED,WAASgf,aAAT,CAAwB58K,KAAxB,EAAgC;AAE/B,QAAKtI,KAAK,CAACszD,OAAN,KAAkB,KAAvB,EAA+B;AAE/BhrD,IAAAA,KAAK,CAAC4F,cAAN;AAEA,GA/kCkD,CAilCnD;;;AAEAlO,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,aAAnC,EAAkDy8K,aAAlD,EAAiE,KAAjE;AAEAllL,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,WAAnC,EAAgD+E,WAAhD,EAA6D,KAA7D;AACAxN,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,OAAnC,EAA4C08K,YAA5C,EAA0D,KAA1D;AAEAnlL,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,YAAnC,EAAiDuF,YAAjD,EAA+D,KAA/D;AACAhO,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,UAAnC,EAA+C8F,UAA/C,EAA2D,KAA3D;AACAvO,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,WAAnC,EAAgD6F,WAAhD,EAA6D,KAA7D;AAEAtO,EAAAA,KAAK,CAACyE,UAAN,CAAiBgE,gBAAjB,CAAmC,SAAnC,EAA8C68K,SAA9C,EAAyD,KAAzD,EA5lCmD,CA8lCnD;;AAEA,MAAKtlL,KAAK,CAACyE,UAAN,CAAiBkkL,QAAjB,KAA8B,CAAE,CAArC,EAAyC;AAExC3oL,IAAAA,KAAK,CAACyE,UAAN,CAAiBkkL,QAAjB,GAA4B,CAA5B;AAEA,GApmCkD,CAsmCnD;;;AAEA,OAAK3qJ,MAAL;AAEA,CA1mCD;;;AA4mCAqkJ,aAAa,CAAC1jL,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAe9N,6BAAgB/rB,SAA/B,CAA1B;AACA0jL,aAAa,CAAC1jL,SAAd,CAAwBoC,WAAxB,GAAsCshL,aAAtC,EAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIuG,WAAW,GAAG,UAAWtkL,MAAX,EAAmBG,UAAnB,EAAgC;AAEjD49K,EAAAA,aAAa,CAACnjL,IAAd,CAAoB,IAApB,EAA0BoF,MAA1B,EAAkCG,UAAlC;AAEA,OAAK4+K,kBAAL,GAA0B,KAA1B,CAJiD,CAIhB;;AAEjC,OAAKO,YAAL,CAAkB1lK,IAAlB,GAAyBD,mBAAMM,GAA/B;AACA,OAAKqlK,YAAL,CAAkBxlK,KAAlB,GAA0BH,mBAAMI,MAAhC;AAEA,OAAKhQ,OAAL,CAAaw1K,GAAb,GAAmBrlK,mBAAMD,GAAzB;AACA,OAAKlQ,OAAL,CAAay1K,GAAb,GAAmBtlK,mBAAME,YAAzB;AAEA,CAZD;;;AAcAkqK,WAAW,CAACjqL,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAe9N,6BAAgB/rB,SAA/B,CAAxB;AACAiqL,WAAW,CAACjqL,SAAZ,CAAsBoC,WAAtB,GAAoC6nL,WAApC;;;;;;;;;AC7pCA;;AAJA;;;AAMA,SAAShuE,IAAT,CAAe5wG,IAAf,EAAsB;AAErB,OAAK4hB,IAAL,GAAYV,uBAAUI,YAAV,EAAZ;AAEA,OAAKnW,IAAL,GAAY,EAAZ;AAEA,OAAKnL,IAAL,GAAYA,IAAZ;AAEA,OAAKmhC,QAAL,GAAgB,EAAhB;AAEA;;AAEDyvE,IAAI,CAACj8G,SAAL,GAAiB;AAEhBoC,EAAAA,WAAW,EAAE65G,IAFG;AAIhBiuE,EAAAA,MAAM,EAAE,IAJQ;AAMhBC,EAAAA,OAAO,EAAE,UAAWC,OAAX,EAAoBl/D,QAApB,EAA+B;AAEvCA,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,EAAvB;AAEAk/D,IAAAA,OAAO,CAACC,SAAR,GAAoB,IAApB;AAEA,SAAKC,KAAL,CAAYF,OAAO,CAACG,OAAR,CAAiBr/D,QAAQ,CAACzzB,IAA1B,EAAgCyzB,QAAQ,CAAC/6E,KAAzC,EAAgD+6E,QAAQ,CAACjzF,OAAzD,CAAZ,EAAgF,IAAhF;AAEAmyJ,IAAAA,OAAO,CAACI,mBAAR;AACAJ,IAAAA,OAAO,CAACK,qBAAR;AAEAL,IAAAA,OAAO,CAACM,UAAR;AAEAN,IAAAA,OAAO,CAACC,SAAR,GAAoB,KAApB;AAEA,GArBe;AAuBhBM,EAAAA,cAAc,EAAE,UAAWP,OAAX,EAAoBnrK,MAApB,EAA4BisG,QAA5B,EAAuC;AAEtDA,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,EAAvB;AAEA,SAAKi/D,OAAL,CAAcC,OAAd,EAAuBl/D,QAAvB;AAEA,WAAO,KAAK0/D,IAAL,CAAWR,OAAX,EAAoBnrK,MAApB,EAA4BisG,QAA5B,CAAP;AAEA,GA/Be;AAiChB0/D,EAAAA,IAAI,EAAE,UAAWR,OAAX,EAAoBnrK,MAApB,EAA4BisG,QAA5B,EAAuC;AAE5CA,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,EAAvB;AAEAk/D,IAAAA,OAAO,CAACG,OAAR,CAAiBr/D,QAAQ,CAACzzB,IAA1B,EAAgCyzB,QAAQ,CAAC/6E,KAAzC,EAAgD+6E,QAAQ,CAACjzF,OAAzD;AAEA,QAAI2yJ,IAAI,GAAG,EAAX;AACAA,IAAAA,IAAI,CAAC7nL,MAAL,GAAc,KAAKunL,KAAL,CAAYF,OAAZ,EAAqBnrK,MAArB,CAAd;AACA2rK,IAAAA,IAAI,CAACC,IAAL,GAAYT,OAAO,CAACU,aAAR,EAAZ;AACAF,IAAAA,IAAI,CAACG,KAAL,GAAaX,OAAO,CAACnyJ,OAAR,CAAgB8yJ,KAA7B;AAEAX,IAAAA,OAAO,CAACM,UAAR;AAEA,WAAOE,IAAP;AAEA,GAhDe;AAkDhBN,EAAAA,KAAK,EAAE,UAAWF,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAmC;AAEzChO,IAAAA,MAAM,GAAGA,MAAM,IAAI,KAAK+rK,OAAL,CAAcZ,OAAd,EAAuBnrK,MAAvB,CAAnB;AAEA,QAAIoxB,IAAI,GAAG+5I,OAAO,CAACa,WAAR,CAAqBh+J,IAAI,IAAI,IAA7B,CAAX;;AAEA,QAAKm9J,OAAO,CAACC,SAAb,EAAyB;AAExB,WAAKa,cAAL,CAAqBd,OAArB,EAA8B/5I,IAA9B,EAAoCpxB,MAApC;AAEA;;AAED,QAAKmrK,OAAO,CAACe,KAAR,CAAc/gL,OAAd,CAAuB,IAAvB,MAAkC,CAAE,CAAzC,EAA6C;AAE5CggL,MAAAA,OAAO,CAACe,KAAR,CAAc9gL,IAAd,CAAoB,IAApB;AAEA;;AAED,QAAK,KAAK+gL,WAAL,KAAqBnpL,SAArB,IAAkCmoL,OAAO,CAACiB,QAAR,CAAiBjhL,OAAjB,CAA0B,IAA1B,MAAqC,CAAE,CAA9E,EAAkF;AAEjFggL,MAAAA,OAAO,CAACiB,QAAR,CAAiBhhL,IAAjB,CAAuB,IAAvB;AAEA;;AAED,WAAO,KAAKimK,QAAL,CAAe8Z,OAAf,EAAwBnrK,MAAxB,EAAgCgO,IAAhC,CAAP;AAEA,GA5Ee;AA8EhBqjJ,EAAAA,QAAQ,EAAE;AAAW;AAAwC,GAE5D;AAEA,GAlFe;AAoFhB4a,EAAAA,cAAc,EAAE,UAAWd,OAAX,EAAoB/5I,IAApB,EAA0BpxB,MAA1B,EAAmC;AAElDoxB,IAAAA,IAAI,CAACi7I,IAAL,GAAY,CAAEj7I,IAAI,CAACi7I,IAAL,IAAa,CAAf,IAAqB,CAAjC;AAEA,QAAIC,SAAS,GAAGnB,OAAO,CAACoB,aAAR,CAAuBvsK,MAAvB,CAAhB;;AAEA,QAAKssK,SAAS,IAAKl7I,IAAI,CAACo7I,SAAL,IAAkB,CAAvB,CAAT,IAAuC,KAAKT,OAAL,CAAcZ,OAAd,EAAuBnrK,MAAvB,CAA5C,EAA8E;AAE7EoxB,MAAAA,IAAI,CAACo7I,SAAL,GAAiBF,SAAjB;AACAl7I,MAAAA,IAAI,CAACpxB,MAAL,GAAcA,MAAd;AAEA;AAED,GAjGe;AAmGhBysK,EAAAA,OAAO,EAAE,UAAWl1K,IAAX,EAAkB;AAE1B,SAAKA,IAAL,GAAYA,IAAZ;AAEA,WAAO,IAAP;AAEA,GAzGe;AA2GhBm1K,EAAAA,OAAO,EAAE;AAAW;AAAgB;AAEnC,WAAO,KAAKn1K,IAAZ;AAEA,GA/Ge;AAiHhBw0K,EAAAA,OAAO,EAAE,UAAWZ,OAAX,EAAoBnrK,MAApB,EAA6B;AAErC,WAAOA,MAAM,KAAK,WAAX,IAA0BA,MAAM,KAAK,aAArC,GAAqDA,MAArD,GAA8D,KAAK5T,IAA1E;AAEA,GArHe;AAuHhBugL,EAAAA,WAAW,EAAE,UAAW3xJ,IAAX,EAAkB;AAE9B,QAAIC,YAAY,GAAKD,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAA3D;;AAEA,QAAK,CAAEC,YAAF,IAAkBD,IAAI,CAACkxJ,KAAL,CAAY,KAAKl+J,IAAjB,MAA4BhrB,SAAnD,EAA+D;AAE9D,aAAOg4B,IAAI,CAACkxJ,KAAL,CAAY,KAAKl+J,IAAjB,CAAP;AAEA;AAED,GAjIe;AAmIhBqD,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,QAAKA,MAAM,CAAC1I,IAAP,KAAgBvU,SAArB,EAAiC,KAAKuU,IAAL,GAAY0I,MAAM,CAAC1I,IAAnB;AAEjC,QAAK0I,MAAM,CAACstB,QAAP,KAAoBvqC,SAAzB,EAAqC,KAAKuqC,QAAL,GAAgBt1B,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgBiH,MAAM,CAACstB,QAAvB,CAAZ,CAAhB;AAErC,WAAO,IAAP;AAEA,GA3Ie;AA6IhBq/I,EAAAA,cAAc,EAAE,UAAW5xJ,IAAX,EAAkB;AAEjC,QAAIC,YAAY,GAAKD,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAA3D;AAEA,QAAIoW,IAAI,GAAG,EAAX;AAEA,QAAK,OAAO,KAAKy7I,QAAZ,KAAyB,QAA9B,EAAyC,MAAM,IAAItnL,KAAJ,CAAW,oCAAX,CAAN;AAEzC6rC,IAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,IAAAA,IAAI,CAACy7I,QAAL,GAAgB,KAAKA,QAArB;AAEA,QAAK,KAAKt1K,IAAL,KAAc,EAAnB,EAAwB65B,IAAI,CAAC75B,IAAL,GAAY,KAAKA,IAAjB;AAExB,QAAKU,IAAI,CAACe,SAAL,CAAgB,KAAKu0B,QAArB,MAAoC,IAAzC,EAAgD6D,IAAI,CAAC7D,QAAL,GAAgB,KAAKA,QAArB;;AAEhD,QAAK,CAAEtS,YAAP,EAAsB;AAErBD,MAAAA,IAAI,CAACkxJ,KAAL,CAAY,KAAKl+J,IAAjB,IAA0BojB,IAA1B;AAEA;;AAED,WAAOA,IAAP;AAEA,GApKe;AAsKhBrW,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,WAAO,KAAK2xJ,WAAL,CAAkB3xJ,IAAlB,KAA4B,KAAK4xJ,cAAL,CAAqB5xJ,IAArB,CAAnC;AAEA;AA1Ke,CAAjB;;;;;;;;;ACbA;;AACA;;AANA;;;;AAQA,SAAS8xJ,QAAT,CAAmB1gL,IAAnB,EAAyBnD,MAAzB,EAAkC;AAEjC+zG,aAAK17G,IAAL,CAAW,IAAX,EAAiB8K,IAAjB;;AAEAnD,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AAEA,OAAK8jL,MAAL,GAAc9jL,MAAM,CAAC8jL,MAAP,KAAkB/pL,SAAlB,GAA8BiG,MAAM,CAAC8jL,MAArC,GAA8C,IAA5D;AACA,OAAK/4H,MAAL,GAAc/qD,MAAM,CAAC+qD,MAAP,KAAkBhxD,SAAlB,GAA8BiG,MAAM,CAAC+qD,MAArC,GAA8C,KAA5D;AAEA;;AAED84H,QAAQ,CAAC/rL,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAArB;AACA+rL,QAAQ,CAAC/rL,SAAT,CAAmBoC,WAAnB,GAAiC2pL,QAAjC;;AAEAA,QAAQ,CAAC/rL,SAAT,CAAmBsqL,KAAnB,GAA2B,UAAWF,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkCg/J,EAAlC,EAAuC;AAEjEhtK,EAAAA,MAAM,GAAGA,MAAM,IAAI,KAAK+rK,OAAL,CAAcZ,OAAd,CAAnB;;AAEA,MAAK,KAAK8B,SAAL,CAAgB9B,OAAhB,EAAyBnrK,MAAzB,CAAL,EAAyC;AAExC,QAAIktK,QAAQ,GAAG,KAAKC,SAAL,CAAgBhC,OAAhB,EAAyBnrK,MAAzB,CAAf;;AAEA,QAAKktK,QAAQ,IAAI,KAAK/pL,WAAL,CAAiB6qB,IAAjB,KAA0BhrB,SAA3C,EAAuD;AAEtD,WAAKG,WAAL,CAAiB6qB,IAAjB,GAAwBV,uBAAUI,YAAV,EAAxB;AAEA;;AAEDM,IAAAA,IAAI,GAAGm9J,OAAO,CAACiC,OAAR,CAAiBp/J,IAAI,IAAI,KAAKo/J,OAAL,EAAzB,EAAyC,CAAEF,QAA3C,CAAP;AAEA,QAAI97I,IAAI,GAAG+5I,OAAO,CAACa,WAAR,CAAqBh+J,IAArB,CAAX;AAAA,QACC5hB,IAAI,GAAGglC,IAAI,CAACpxB,MAAL,IAAe,KAAK+rK,OAAL,CAAcZ,OAAd,CADvB;;AAGA,QAAKA,OAAO,CAACC,SAAb,EAAyB;AAExB,UAAK,CAAEh6I,IAAI,CAACi7I,IAAL,IAAa,CAAf,IAAqB,CAArB,IAA0B,KAAKgB,QAAL,EAA/B,EAAiD;AAEhD,aAAKpB,cAAL,CAAqBd,OAArB,EAA8B/5I,IAA9B,EAAoCpxB,MAApC;AAEA,eAAO,KAAKqxJ,QAAL,CAAe8Z,OAAf,EAAwBnrK,MAAxB,EAAgCgO,IAAhC,CAAP;AAEA;;AAED,aAAOgvF,WAAKj8G,SAAL,CAAesqL,KAAf,CAAqB/pL,IAArB,CAA2B,IAA3B,EAAiC6pL,OAAjC,EAA0CnrK,MAA1C,EAAkDgO,IAAlD,CAAP;AAEA,KAZD,MAYO,IAAKk/J,QAAL,EAAgB;AAEtB97I,MAAAA,IAAI,CAAC75B,IAAL,GAAY65B,IAAI,CAAC75B,IAAL,IAAaylG,WAAKj8G,SAAL,CAAesqL,KAAf,CAAqB/pL,IAArB,CAA2B,IAA3B,EAAiC6pL,OAAjC,EAA0CnrK,MAA1C,EAAkDgO,IAAlD,CAAzB;AAEA,aAAOojB,IAAI,CAAC75B,IAAZ;AAEA,KANM,MAMA,IAAK,CAAE,KAAK81K,QAAL,EAAF,KAAuB,CAAE,KAAKJ,SAAL,CAAgB9B,OAAhB,EAAyB/+K,IAAzB,CAAF,IAAuC++K,OAAO,CAACnyJ,OAAR,CAAgBs0J,WAAhB,IAA+Bl8I,IAAI,CAACi7I,IAAL,KAAc,CAA3G,CAAL,EAAwH;AAE9H,aAAOrvE,WAAKj8G,SAAL,CAAesqL,KAAf,CAAqB/pL,IAArB,CAA2B,IAA3B,EAAiC6pL,OAAjC,EAA0CnrK,MAA1C,EAAkDgO,IAAlD,CAAP;AAEA;;AAEDA,IAAAA,IAAI,GAAG,KAAKo/J,OAAL,CAAc,KAAd,CAAP;AAEA,QAAI71K,IAAI,GAAG,KAAKg2K,OAAL,CAAcpC,OAAd,EAAuBn9J,IAAvB,CAAX;;AAEA,QAAKzW,IAAL,EAAY;AAEX,aAAO4zK,OAAO,CAACtxJ,MAAR,CAAgBtiB,IAAhB,EAAsBnL,IAAtB,EAA4B4T,MAA5B,CAAP;AAEA,KAJD,MAIO;AAENzI,MAAAA,IAAI,GAAGu1K,QAAQ,CAAC/rL,SAAT,CAAmBswK,QAAnB,CAA4B/vK,IAA5B,CAAkC,IAAlC,EAAwC6pL,OAAxC,EAAiDnrK,MAAjD,EAAyDgO,IAAzD,EAA+DojB,IAAI,CAACpxB,MAApE,EAA4EgtK,EAA5E,CAAP;AAEA,UAAIpB,IAAI,GAAG,KAAKva,QAAL,CAAe8Z,OAAf,EAAwB/+K,IAAxB,EAA8B4hB,IAA9B,CAAX;AAEAm9J,MAAAA,OAAO,CAACqC,WAAR,CAAqBj2K,IAAI,GAAG,KAAP,GAAeq0K,IAAf,GAAsB,GAA3C;AAEA,aAAOT,OAAO,CAACtxJ,MAAR,CAAgBtiB,IAAhB,EAAsBnL,IAAtB,EAA4B4T,MAA5B,CAAP;AAEA;AAED;;AAED,SAAOg9F,WAAKj8G,SAAL,CAAesqL,KAAf,CAAqB/pL,IAArB,CAA2B,IAA3B,EAAiC6pL,OAAjC,EAA0CnrK,MAA1C,EAAkDgO,IAAlD,CAAP;AAEA,CAnED;;AAqEA8+J,QAAQ,CAAC/rL,SAAT,CAAmBksL,SAAnB,GAA+B,UAAW9B,OAAX,EAAoBnrK,MAApB,EAA6B;AAE3D,SAAOA,MAAM,KAAK,WAAX,IAA0BA,MAAM,KAAK,aAArC,IAAsD,KAAK+sK,MAAlE;AAEA,CAJD;;AAMAD,QAAQ,CAAC/rL,SAAT,CAAmBosL,SAAnB,GAA+B;AAAW;AAAwB;AAEjE,SAAO,KAAKn5H,MAAZ;AAEA,CAJD;;AAMA84H,QAAQ,CAAC/rL,SAAT,CAAmB0sL,QAAnB,GAA8B,UAAWl2K,IAAX,EAAkB;AAE/C,OAAKm2K,KAAL,GAAan2K,IAAb;AAEA,SAAO,IAAP;AAEA,CAND;;AAQAu1K,QAAQ,CAAC/rL,SAAT,CAAmBssL,QAAnB,GAA8B;AAAW;AAAgB;AAExD,SAAO,KAAKK,KAAZ;AAEA,CAJD;;AAMAZ,QAAQ,CAAC/rL,SAAT,CAAmBqsL,OAAnB,GAA6B,UAAWp5H,MAAX,EAAoB;AAEhD,MAAIhmC,IAAI,GAAGgmC,MAAM,IAAIA,MAAM,IAAIhxD,SAApB,GAAgC,KAAKG,WAAL,CAAiB6qB,IAAjB,IAAyB,KAAKA,IAA9D,GAAqE,KAAKA,IAArF;AAEA,MAAK,OAAO,KAAK5rB,KAAZ,KAAsB,QAA3B,EAAsC4rB,IAAI,GAAG,KAAK5rB,KAAL,GAAa,GAAb,GAAmB4rB,IAA1B;AAEtC,SAAOA,IAAP;AAEA,CARD;;AAUA8+J,QAAQ,CAAC/rL,SAAT,CAAmBwsL,OAAnB,GAA6B,UAAWpC,OAAX,EAAoBn9J,IAApB,EAA2B;AAEvDA,EAAAA,IAAI,GAAGA,IAAI,IAAI,KAAKA,IAApB;AAEA,MAAI2/J,OAAO,GAAGxC,OAAO,CAACyC,OAAR,GAAmB5/J,IAAnB,CAAd;AAEA,SAAO2/J,OAAO,GAAGA,OAAO,CAACp2K,IAAX,GAAkBvU,SAAhC;AAEA,CARD;;AAUA8pL,QAAQ,CAAC/rL,SAAT,CAAmBswK,QAAnB,GAA8B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB,IAAlC,EAAwC4gL,EAAxC,EAA6C;AAE1E,MAAK,CAAE,KAAKC,SAAL,CAAgB9B,OAAhB,EAAyBnrK,MAAzB,CAAP,EAA2C0Q,OAAO,CAACyD,KAAR,CAAe,+BAAf;AAE3CnG,EAAAA,IAAI,GAAGA,IAAI,IAAI,KAAKA,IAApB;AAEA,SAAOm9J,OAAO,CAAC0C,UAAR,CAAoB7/J,IAApB,EAA0B5hB,IAAI,IAAI,KAAK2/K,OAAL,CAAcZ,OAAd,CAAlC,EAA2D6B,EAA3D,EAA+D,KAAKK,QAAL,EAA/D,EAAiF91K,IAAxF;AAEA,CARD;;;;;;;;;ACrIA;;AAJA;;;AAMA,SAASu2K,SAAT,CAAoB1hL,IAApB,EAA0BnD,MAA1B,EAAmC;AAElCA,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AACAA,EAAAA,MAAM,CAAC8jL,MAAP,GAAgB9jL,MAAM,CAAC8jL,MAAP,KAAkB/pL,SAAlB,GAA8BiG,MAAM,CAAC8jL,MAArC,GAA8C,KAA9D;;AAEAD,qBAASxrL,IAAT,CAAe,IAAf,EAAqB8K,IAArB,EAA2BnD,MAA3B;;AAEA,OAAK8kL,QAAL,GAAgB,KAAhB;AAEA;;AAEDD,SAAS,CAAC/sL,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAtB;AACA+sL,SAAS,CAAC/sL,SAAV,CAAoBoC,WAApB,GAAkC2qL,SAAlC;;AAEAA,SAAS,CAAC/sL,SAAV,CAAoBitL,WAApB,GAAkC,UAAW3oL,KAAX,EAAmB;AAEpD,OAAK0oL,QAAL,GAAgB1oL,KAAhB;AAEA,SAAO,IAAP;AAEA,CAND;;AAQAyoL,SAAS,CAAC/sL,SAAV,CAAoBktL,WAApB,GAAkC;AAAW;AAAgB;AAE5D,SAAO,KAAKF,QAAZ;AAEA,CAJD;;AAMAD,SAAS,CAAC/sL,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,MAAKA,MAAM,CAAC8tK,QAAP,KAAoB/qL,SAAzB,EAAqC,KAAK+qL,QAAL,GAAgB9tK,MAAM,CAAC8tK,QAAvB;AAErC,SAAO,IAAP;AAEA,CARD;;AAUAD,SAAS,CAAC/sL,SAAV,CAAoB6rL,cAApB,GAAqC,UAAW5xJ,IAAX,EAAkB;AAEtD,MAAIoW,IAAI,GAAG07I,mBAAS/rL,SAAT,CAAmB6rL,cAAnB,CAAkCtrL,IAAlC,CAAwC,IAAxC,EAA8C05B,IAA9C,CAAX;;AAEA,MAAK,KAAK+yJ,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,KAAKA,QAArB;AAE9B,SAAO38I,IAAP;AAEA,CARD;;AAUA08I,SAAS,CAAC/sL,SAAV,CAAoBswK,QAApB,GAA+B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB,IAAlC,EAAwC4gL,EAAxC,EAA4ChhI,WAA5C,EAA0D;AAExFh+B,EAAAA,IAAI,GAAGm9J,OAAO,CAACiC,OAAR,CAAiBp/J,IAAI,IAAI,KAAKo/J,OAAL,EAAzB,CAAP;AACAhhL,EAAAA,IAAI,GAAGA,IAAI,IAAI,KAAK2/K,OAAL,CAAcZ,OAAd,CAAf;AAEA,MAAI/5I,IAAI,GAAG+5I,OAAO,CAACa,WAAR,CAAqBh+J,IAArB,CAAX;AAAA,MACC+/J,QAAQ,GAAG,KAAKE,WAAL,CAAkB9C,OAAlB,KAA+B,KAAK+C,gBAAL,KAA0BlrL,SADrE;;AAGA,MAAK+qL,QAAL,EAAgB;AAEf,WAAO,KAAKG,gBAAL,CAAuB/C,OAAvB,EAAgCnrK,MAAhC,EAAwCgO,IAAxC,EAA8C5hB,IAA9C,EAAoD4gL,EAApD,EAAwDhhI,WAAxD,CAAP;AAEA,GAJD,MAIO;AAEN,QAAKm/H,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnC,UAAK,CAAE/8I,IAAI,CAAC2gB,MAAZ,EAAqB;AAEpB3gB,QAAAA,IAAI,CAAC2gB,MAAL,GAAco5H,OAAO,CAACiD,mBAAR,CAA6BhiL,IAA7B,EAAmC,IAAnC,EAAyC4gL,EAAzC,EAA6ChhI,WAA7C,EAA0D,KAAKqhI,QAAL,EAA1D,CAAd;AAEA;;AAED,aAAOlC,OAAO,CAACtxJ,MAAR,CAAgBuX,IAAI,CAAC2gB,MAAL,CAAYx6C,IAA5B,EAAkCnL,IAAlC,EAAwC4T,MAAxC,CAAP;AAEA,KAVD,MAUO;AAEN,UAAK,CAAEoxB,IAAI,CAACi9I,QAAZ,EAAuB;AAEtBj9I,QAAAA,IAAI,CAACi9I,QAAL,GAAgBlD,OAAO,CAACmD,qBAAR,CAA+BliL,IAA/B,EAAqC,IAArC,EAA2C4gL,EAA3C,EAA+ChhI,WAA/C,EAA4D,KAAKqhI,QAAL,EAA5D,CAAhB;AAEA;;AAED,aAAOlC,OAAO,CAACtxJ,MAAR,CAAgBuX,IAAI,CAACi9I,QAAL,CAAc92K,IAA9B,EAAoCnL,IAApC,EAA0C4T,MAA1C,CAAP;AAEA;AAED;AAED,CAtCD;;;;;;;;;AClDA;;AAJA;;;AAMA,IAAIuuK,iBAAiB,GAAG,kDAAxB;;AAEA,SAASC,SAAT,CAAoB51J,GAApB,EAAyB61J,SAAzB,EAAqC;AAEpC3B,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAK4W,KAAL,CAAY0gB,GAAG,IAAI41J,SAAS,CAAChhK,EAA7B,EAAiCihK,SAAjC;AAEA;;AAEDD,SAAS,CAAChhK,EAAV,GAAe,IAAf;AACAghK,SAAS,CAACE,GAAV,GAAgB,KAAhB;AACAF,SAAS,CAACG,aAAV,GAA0B,eAA1B;AACAH,SAAS,CAACI,cAAV,GAA2B,gBAA3B;AACAJ,SAAS,CAACK,IAAV,GAAiB,MAAjB;AACAL,SAAS,CAAC/uK,OAAV,GAAoB,SAApB;AAEA+uK,SAAS,CAACztL,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAtB;AACAytL,SAAS,CAACztL,SAAV,CAAoBoC,WAApB,GAAkCqrL,SAAlC;AACAA,SAAS,CAACztL,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEA2B,SAAS,CAACztL,SAAV,CAAoBgrL,OAApB,GAA8B,UAAWZ,OAAX,EAAqB;AAElD,SAAOA,OAAO,CAAC2D,eAAR,CAAyB,KAAK1iL,IAA9B,CAAP;AAEA,CAJD;;AAMAoiL,SAAS,CAACztL,SAAV,CAAoBmX,KAApB,GAA4B,UAAW0gB,GAAX,EAAgB61J,SAAhB,EAA4B;AAEvD,OAAK71J,GAAL,GAAWA,GAAG,IAAI,EAAlB;AAEA,MAAIrhB,IAAJ;AAAA,MAAUnL,IAAV;AAAA,MAAgB/G,KAAK,GAAG,EAAxB;AAEA,MAAI3B,KAAK,GAAG,KAAKk1B,GAAL,CAASl1B,KAAT,CAAgB6qL,iBAAhB,CAAZ;AAEA,OAAKE,SAAL,GAAiBA,SAAS,IAAI,KAAK71J,GAAL,CAAS2lB,MAAT,CAAiB,CAAjB,MAAyB,GAAvD;;AAEA,MAAK76C,KAAK,IAAIA,KAAK,CAAC9C,MAAN,GAAe,CAA7B,EAAiC;AAEhCwL,IAAAA,IAAI,GAAG1I,KAAK,CAAE,CAAF,CAAZ;AACA6T,IAAAA,IAAI,GAAG7T,KAAK,CAAE,CAAF,CAAZ;AACA2B,IAAAA,KAAK,GAAG3B,KAAK,CAAE,CAAF,CAAb;AAEA,GAND,MAMO;AAEN6T,IAAAA,IAAI,GAAG,KAAKqhB,GAAZ;AACAxsB,IAAAA,IAAI,GAAG,GAAP;AAEA;;AAED,OAAKmL,IAAL,GAAYA,IAAZ;AACA,OAAKnL,IAAL,GAAYA,IAAZ;AACA,OAAK/G,KAAL,GAAaA,KAAb;AAEA,CA3BD;;AA6BAmpL,SAAS,CAACztL,SAAV,CAAoBsqL,KAApB,GAA4B,UAAWF,OAAX,EAAoBnrK,MAApB,EAA6B;AAExD,MAAKA,MAAM,KAAK,QAAhB,EAA2B;AAE1B,QAAK,KAAK3a,KAAV,EAAkB;AAEjB,UAAK,KAAKopL,SAAV,EAAsB;AAErB,eAAO,aAAa,KAAKl3K,IAAlB,GAAyB,GAAzB,GAA+B,KAAKlS,KAA3C;AAEA;;AAED,aAAO,WAAW,KAAK+G,IAAhB,GAAuB,GAAvB,GAA6B,KAAKmL,IAAlC,GAAyC,KAAzC,GAAiD,KAAKlS,KAAtD,GAA8D,GAArE;AAEA,KAVD,MAUO,IAAK,KAAKopL,SAAV,EAAsB;AAE5B,aAAO,KAAK71J,GAAZ;AAEA;AAED,GAlBD,MAkBO;AAENuyJ,IAAAA,OAAO,CAACxqG,OAAR,CAAiB,IAAjB;AAEA,WAAOwqG,OAAO,CAACtxJ,MAAR,CAAgB,KAAKtiB,IAArB,EAA2B,KAAKw0K,OAAL,CAAcZ,OAAd,CAA3B,EAAoDnrK,MAApD,CAAP;AAEA;AAED,CA5BD;;AA8BAwuK,SAAS,CAACztL,SAAV,CAAoBswK,QAApB,GAA+B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE3D,SAAOmrK,OAAO,CAACtxJ,MAAR,CAAgB,KAAKtiB,IAArB,EAA2B,KAAKw0K,OAAL,CAAcZ,OAAd,CAA3B,EAAoDnrK,MAApD,CAAP;AAEA,CAJD;;AAMAwuK,SAAS,CAACztL,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK/H,KAAL,CAAY+H,MAAM,CAAC2Y,GAAnB,EAAwB3Y,MAAM,CAACwuK,SAA/B;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAD,SAAS,CAACztL,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACxY,GAAL,GAAW,KAAKA,GAAhB;AAEA,QAAKwY,IAAI,CAACq9I,SAAL,KAAmB,IAAxB,EAA+Br9I,IAAI,CAACq9I,SAAL,GAAiB,IAAjB;AAE/B;;AAED,SAAOr9I,IAAP;AAEA,CAhBD;;;;;;;;;ACxGA;;AAJA;;;AAMA,SAAS29I,OAAT,CAAkB3iL,IAAlB,EAAwB/G,KAAxB,EAAgC;AAE/B23G,aAAK17G,IAAL,CAAW,IAAX,EAAiB8K,IAAjB;;AAEA,OAAK/G,KAAL,GAAaA,KAAb;AAEA;;AAED0pL,OAAO,CAAChuL,SAAR,GAAoBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAApB;AACAguL,OAAO,CAAChuL,SAAR,CAAkBoC,WAAlB,GAAgC4rL,OAAhC;AACAA,OAAO,CAAChuL,SAAR,CAAkB8rL,QAAlB,GAA6B,KAA7B;;AAEAkC,OAAO,CAAChuL,SAAR,CAAkBgrL,OAAlB,GAA4B,UAAWZ,OAAX,EAAqB;AAEhD,SAAOA,OAAO,CAAC2D,eAAR,CAAyB,KAAK1iL,IAA9B,CAAP;AAEA,CAJD;;AAMA2iL,OAAO,CAAChuL,SAAR,CAAkBswK,QAAlB,GAA6B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEzD,MAAIgvK,OAAO,GAAG7D,OAAO,CAAC8D,MAAR,CAAgB,KAAKjhK,IAArB,EAA2B,KAAK5hB,IAAhC,CAAd;;AAEA,MAAK,KAAK/G,KAAL,IAAc8lL,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAnB,EAAkD;AAEjDhD,IAAAA,OAAO,CAACqC,WAAR,CAAqBwB,OAAO,CAACz3K,IAAR,GAAe,KAAf,GAAuB,KAAKlS,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2B,KAAKY,OAAL,CAAcZ,OAAd,CAA3B,CAAvB,GAA8E,GAAnG;AAEA;;AAED,SAAOA,OAAO,CAACtxJ,MAAR,CAAgBm1J,OAAO,CAACz3K,IAAxB,EAA8B,KAAKw0K,OAAL,CAAcZ,OAAd,CAA9B,EAAuDnrK,MAAvD,CAAP;AAEA,CAZD;;AAcA+uK,OAAO,CAAChuL,SAAR,CAAkBswB,IAAlB,GAAyB,UAAWpR,MAAX,EAAoB;AAE5C+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;;AAEA,OAAK7T,IAAL,GAAY6T,MAAM,CAAC7T,IAAnB;AACA,OAAK/G,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA0pL,OAAO,CAAChuL,SAAR,CAAkBg6B,MAAlB,GAA2B,UAAWC,IAAX,EAAkB;AAE5C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AAEA,QAAK,KAAK/G,KAAV,EAAkB+rC,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB;;AAED,SAAOojB,IAAP;AAEA,CAhBD;;;;;;;;;AC7CA;;AAJA;;;AAMA,IAAIm9I,iBAAiB,GAAG,6CAAxB;AAAA,IACCW,gBAAgB,GAAG,8BADpB;;AAGA,SAASC,UAAT,CAAqBv2J,GAArB,EAA2B;AAE1Bk0J,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAK4W,KAAL,CAAY0gB,GAAZ;AAEA;;AAEDu2J,UAAU,CAACpuL,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAvB;AACAouL,UAAU,CAACpuL,SAAX,CAAqBoC,WAArB,GAAmCgsL,UAAnC;AACAA,UAAU,CAACpuL,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEAsC,UAAU,CAACpuL,SAAX,CAAqBgrL,OAArB,GAA+B,UAAWZ,OAAX,EAAqB;AAEnD,SAAOA,OAAO,CAAC2D,eAAR,CAAyB,KAAKv3K,IAA9B,CAAP;AAEA,CAJD;;AAMA43K,UAAU,CAACpuL,SAAX,CAAqBquL,cAArB,GAAsC,UAAW73K,IAAX,EAAkB;AAEvD,MAAItV,CAAC,GAAG,KAAKotL,MAAL,CAAYzuL,MAApB;;AAEA,SAAQqB,CAAC,EAAT,EAAe;AAEd,QAAK,KAAKotL,MAAL,CAAaptL,CAAb,EAAiBsV,IAAjB,KAA0BA,IAA/B,EAAsC;AAErC,aAAO,KAAK83K,MAAL,CAAaptL,CAAb,CAAP;AAEA;AAED;AAED,CAdD;;AAgBAktL,UAAU,CAACpuL,SAAX,CAAqBswK,QAArB,GAAgC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5D,MAAKA,MAAM,KAAK,QAAhB,EAA2B;AAE1B,WAAO,KAAK4Y,GAAL,GAAW,GAAlB;AAEA,GAJD,MAIO;AAEN,WAAOuyJ,OAAO,CAACtxJ,MAAR,CAAgB,OAAO,KAAKjB,GAAZ,GAAkB,IAAlC,EAAwC,KAAKmzJ,OAAL,CAAcZ,OAAd,CAAxC,EAAiEnrK,MAAjE,CAAP;AAEA;AAED,CAZD;;AAcAmvK,UAAU,CAACpuL,SAAX,CAAqBmX,KAArB,GAA6B,UAAW0gB,GAAX,EAAiB;AAE7C,OAAKA,GAAL,GAAWA,GAAG,IAAI,EAAlB;AAEA,OAAKy2J,MAAL,GAAc,EAAd;AAEA,MAAIC,WAAW,GAAGf,iBAAiB,CAAClwI,IAAlB,CAAwB,KAAKzlB,GAA7B,CAAlB;;AAEA,MAAK02J,WAAL,EAAmB;AAElB,QAAInwH,UAAU,GAAGmwH,WAAW,CAAE,CAAF,CAA5B;AAAA,QAAmC5rL,KAAnC;;AAEA,WAAQA,KAAK,GAAGwrL,gBAAgB,CAAC7wI,IAAjB,CAAuB8gB,UAAvB,CAAhB,EAAsD;AAErD,WAAKkwH,MAAL,CAAYjkL,IAAZ,CAAkB;AACjBgB,QAAAA,IAAI,EAAE1I,KAAK,CAAE,CAAF,CADM;AAEjB6T,QAAAA,IAAI,EAAE7T,KAAK,CAAE,CAAF;AAFM,OAAlB;AAKA;;AAED,SAAK6T,IAAL,GAAY+3K,WAAW,CAAE,CAAF,CAAvB;AAEA,GAfD,MAeO;AAEN,SAAK/3K,IAAL,GAAY,EAAZ;AAEA;;AAED,OAAKnL,IAAL,GAAY,KAAKmL,IAAjB;AAEA,CA/BD;;AAiCA43K,UAAU,CAACpuL,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACxY,GAAL,GAAW,KAAKA,GAAhB;AAEA;;AAED,SAAOwY,IAAP;AAEA,CAdD;;;;;;;;;ACtFA;;AAJA;;;AAMA,SAASm+I,aAAT,CAAwBh4K,IAAxB,EAA8BnL,IAA9B,EAAqC;AAEpC4wG,aAAK17G,IAAL,CAAW,IAAX,EAAiB8K,IAAjB;;AAEA,OAAKmL,IAAL,GAAYA,IAAZ;AAEA;;AAEDg4K,aAAa,CAACxuL,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAA1B;AACAwuL,aAAa,CAACxuL,SAAd,CAAwBoC,WAAxB,GAAsCosL,aAAtC;AACAA,aAAa,CAACxuL,SAAd,CAAwB8rL,QAAxB,GAAmC,WAAnC;;AAEA0C,aAAa,CAACxuL,SAAd,CAAwByuL,gBAAxB,GAA2C,UAAWrE,OAAX,EAAqB;AAE/D,SAAO,OAAO,KAAK/+K,IAAZ,KAAqB,QAArB,GAAgC++K,OAAO,CAACsE,wBAAR,CAAkC,KAAKrjL,IAAvC,CAAhC,GAAgF,KAAKA,IAA5F;AAEA,CAJD;;AAMAmjL,aAAa,CAACxuL,SAAd,CAAwBgrL,OAAxB,GAAkC,UAAWZ,OAAX,EAAqB;AAEtD,MAAI/+K,IAAI,GAAG,KAAKojL,gBAAL,CAAuBrE,OAAvB,CAAX;AAEA,SAAOA,OAAO,CAAC2D,eAAR,CAAyB1iL,IAAzB,CAAP;AAEA,CAND;;AAQAmjL,aAAa,CAACxuL,SAAd,CAAwBswK,QAAxB,GAAmC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE/D,MAAI5T,IAAI,GAAG,KAAKojL,gBAAL,CAAuBrE,OAAvB,CAAX;AAEA,MAAIt3J,SAAS,GAAGs3J,OAAO,CAACx/H,YAAR,CAAsB,KAAKp0C,IAA3B,EAAiCnL,IAAjC,CAAhB;AAAA,MACCmL,IAAI,GAAG4zK,OAAO,CAACgD,QAAR,CAAkB,QAAlB,IAA+B,KAAK52K,IAApC,GAA2Csc,SAAS,CAACm7J,OAAV,CAAkBz3K,IADrE;AAGA,SAAO4zK,OAAO,CAACtxJ,MAAR,CAAgBtiB,IAAhB,EAAsB,KAAKw0K,OAAL,CAAcZ,OAAd,CAAtB,EAA+CnrK,MAA/C,CAAP;AAEA,CATD;;AAWAuvK,aAAa,CAACxuL,SAAd,CAAwBswB,IAAxB,GAA+B,UAAWpR,MAAX,EAAoB;AAElD+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;;AAEA,OAAK7T,IAAL,GAAY6T,MAAM,CAAC7T,IAAnB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAmjL,aAAa,CAACxuL,SAAd,CAAwBg6B,MAAxB,GAAiC,UAAWC,IAAX,EAAkB;AAElD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AAEA;;AAED,SAAOglC,IAAP;AAEA,CAdD;;;;;;;;;ACrDA;;;AAIA,IAAIs+I,OAAO,GAAG;AAEbxD,EAAAA,KAAK,EAAE,EAFM;AAGbyD,EAAAA,QAAQ,EAAE,EAHG;AAKb/1K,EAAAA,GAAG,EAAE,UAAWY,IAAX,EAAkB;AAEtB,SAAK0xK,KAAL,CAAY1xK,IAAI,CAACjD,IAAjB,IAA0BiD,IAA1B;AAEA,GATY;AAWbo1K,EAAAA,UAAU,EAAE,UAAWr4K,IAAX,EAAiBvD,QAAjB,EAA2Bk9B,KAA3B,EAAmC;AAE9CA,IAAAA,KAAK,GAAGA,KAAK,KAAKluC,SAAV,GAAsBkuC,KAAtB,GAA8B,IAAtC;AAEA,SAAKy+I,QAAL,CAAep4K,IAAf,IAAwB;AAAEvD,MAAAA,QAAQ,EAAEA,QAAZ;AAAsBk9B,MAAAA,KAAK,EAAEA;AAA7B,KAAxB;AAEA,GAjBY;AAmBbv1B,EAAAA,MAAM,EAAE,UAAWnB,IAAX,EAAkB;AAEzB,WAAO,KAAK0xK,KAAL,CAAY1xK,IAAI,CAACjD,IAAjB,CAAP;AAEA,GAvBY;AAyBbs4K,EAAAA,aAAa,EAAE,UAAWt4K,IAAX,EAAkB;AAEhC,WAAO,KAAKo4K,QAAL,CAAep4K,IAAf,CAAP;AAEA,GA7BY;AA+BbsI,EAAAA,GAAG,EAAE,UAAWtI,IAAX,EAAkB;AAEtB,WAAO,KAAK20K,KAAL,CAAY30K,IAAZ,CAAP;AAEA,GAnCY;AAqCbu4K,EAAAA,UAAU,EAAE,UAAWv4K,IAAX,EAAiB4zK,OAAjB,EAA2B;AAEtC,WAAO,KAAKwE,QAAL,CAAep4K,IAAf,EAAsBvD,QAAtB,CAA+B1S,IAA/B,CAAqC,IAArC,EAA2C6pL,OAA3C,CAAP;AAEA,GAzCY;AA2Cb4E,EAAAA,cAAc,EAAE,UAAWx4K,IAAX,EAAkB;AAEjC,WAAO,KAAKo4K,QAAL,CAAep4K,IAAf,CAAP;AAEA,GA/CY;AAiDby4K,EAAAA,QAAQ,EAAE,UAAWz4K,IAAX,EAAkB;AAE3B,WAAO,KAAK20K,KAAL,CAAY30K,IAAZ,MAAuBvU,SAA9B;AAEA,GArDY;AAuDbitL,EAAAA,eAAe,EAAE,UAAW14K,IAAX,EAAkB;AAElC,WAAO,KAAKo4K,QAAL,CAAep4K,IAAf,MAA0BvU,SAAjC;AAEA;AA3DY,CAAd;;;;;;;;;;ACCA;;AACA;;AANA;;;;AAQA,IAAIurL,iBAAiB,GAAG,6CAAxB;AAAA,IACCW,gBAAgB,GAAG,cADpB;;AAGA,SAASgB,YAAT,CAAuBt3J,GAAvB,EAA4Bu3J,QAA5B,EAAsCl4H,UAAtC,EAAkD03H,QAAlD,EAA4DvjL,IAA5D,EAAmE;AAElE,OAAKgkL,QAAL,GAAgBhkL,IAAI,KAAKpJ,SAAzB;AACA,OAAKqtL,WAAL,GAAmB,KAAnB;;AAEAvD,qBAASxrL,IAAT,CAAe,IAAf,EAAqB8K,IAArB;;AAEA,OAAK8L,KAAL,CAAY0gB,GAAZ,EAAiBu3J,QAAjB,EAA2Bl4H,UAA3B,EAAuC03H,QAAvC;AAEA;;AAEDO,YAAY,CAACnvL,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAzB;AACAmvL,YAAY,CAACnvL,SAAb,CAAuBoC,WAAvB,GAAqC+sL,YAArC;AACAA,YAAY,CAACnvL,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;AAEAqD,YAAY,CAACnvL,SAAb,CAAuBuvL,WAAvB,GAAqC,IAArC;;AAEAJ,YAAY,CAACnvL,SAAb,CAAuBksL,SAAvB,GAAmC;AAAW;AAAwB;AAErE,SAAO,CAAE,KAAKmD,QAAd;AAEA,CAJD;;AAMAF,YAAY,CAACnvL,SAAb,CAAuBgrL,OAAvB,GAAiC,UAAWZ,OAAX,EAAqB;AAErD,SAAOA,OAAO,CAAC2D,eAAR,CAAyB,KAAK1iL,IAA9B,CAAP;AAEA,CAJD;;AAMA8jL,YAAY,CAACnvL,SAAb,CAAuBquL,cAAvB,GAAwC,UAAW73K,IAAX,EAAkB;AAEzD,MAAItV,CAAC,GAAG,KAAKotL,MAAL,CAAYzuL,MAApB;;AAEA,SAAQqB,CAAC,EAAT,EAAe;AAEd,QAAK,KAAKotL,MAAL,CAAaptL,CAAb,EAAiBsV,IAAjB,KAA0BA,IAA/B,EAAsC;AAErC,aAAO,KAAK83K,MAAL,CAAaptL,CAAb,CAAP;AAEA;AAED;AAED,CAdD;;AAgBAiuL,YAAY,CAACnvL,SAAb,CAAuBwvL,gBAAvB,GAA0C,UAAWh5K,IAAX,EAAkB;AAE3D,MAAItV,CAAC,GAAG,KAAKkuL,QAAL,CAAcvvL,MAAtB;;AAEA,SAAQqB,CAAC,EAAT,EAAe;AAEd,QAAK,KAAKkuL,QAAL,CAAeluL,CAAf,EAAmBsV,IAAnB,KAA4BA,IAAjC,EAAwC;AAEvC,aAAO,KAAK44K,QAAL,CAAeluL,CAAf,CAAP;AAEA;AAED;AAED,CAdD;;AAgBAiuL,YAAY,CAACnvL,SAAb,CAAuBswK,QAAvB,GAAkC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE9D,MAAItc,KAAJ;AAAA,MAAWqI,MAAM,GAAG,CAApB;AAAA,MAAuB6sB,GAAG,GAAG,KAAKA,GAAlC;;AAEA,OAAM,IAAI32B,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKkuL,QAAL,CAAcvvL,MAAnC,EAA2CqB,CAAC,EAA5C,EAAkD;AAEjDkpL,IAAAA,OAAO,CAACxqG,OAAR,CAAiB,KAAKwvG,QAAL,CAAeluL,CAAf,CAAjB,EAAqC,IAArC;AAEA;;AAED,OAAM,IAAIuuL,GAAV,IAAiB,KAAKv4H,UAAtB,EAAmC;AAElCkzH,IAAAA,OAAO,CAAClzH,UAAR,CAAoBu4H,GAApB,IAA4B,IAA5B;AAEA;;AAED,MAAI56C,OAAO,GAAG,EAAd;;AAEA,SAAQlyI,KAAK,GAAGwrL,gBAAgB,CAAC7wI,IAAjB,CAAuB,KAAKzlB,GAA5B,CAAhB,EAAoDg9G,OAAO,CAACxqI,IAAR,CAAc1H,KAAd;;AAEpD,OAAM,IAAIzB,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG2zI,OAAO,CAACh1I,MAA7B,EAAqCqB,CAAC,EAAtC,EAA4C;AAE3C,QAAIyB,KAAK,GAAGkyI,OAAO,CAAE3zI,CAAF,CAAnB;AAEA,QAAIwuL,IAAI,GAAG/sL,KAAK,CAAE,CAAF,CAAhB;AAAA,QACCgtL,QAAQ,GAAG,KAAKN,QAAL,GAAgB,CAAE,KAAKhB,cAAL,CAAqBqB,IAArB,CAAlB,GAAgD,IAD5D;AAAA,QAECE,SAAS,GAAGF,IAFb;;AAIA,QAAK,KAAKd,QAAL,CAAec,IAAf,KAA2B,KAAKH,WAAL,IAAoBI,QAApB,IAAgChB,iBAAQO,eAAR,CAAyBQ,IAAzB,CAAhE,EAAoG;AAEnG,UAAIj2K,IAAI,GAAG,KAAKm1K,QAAL,CAAec,IAAf,CAAX;;AAEA,UAAK,CAAEj2K,IAAP,EAAc;AAEb,YAAIo2K,OAAO,GAAGlB,iBAAQK,cAAR,CAAwBU,IAAxB,CAAd;;AAEA,YAAKG,OAAO,CAAC1/I,KAAb,EAAqB12B,IAAI,GAAG2wK,OAAO,CAACwE,QAAR,CAAkBc,IAAlB,CAAP;AAErBj2K,QAAAA,IAAI,GAAGA,IAAI,IAAIk1K,iBAAQI,UAAR,CAAoBW,IAApB,EAA0BtF,OAA1B,CAAf;AAEA,YAAKyF,OAAO,CAAC1/I,KAAb,EAAqBi6I,OAAO,CAACwE,QAAR,CAAkBc,IAAlB,IAA2Bj2K,IAA3B;AAErB;;AAEDm2K,MAAAA,SAAS,GAAGn2K,IAAI,CAAC6wK,KAAL,CAAYF,OAAZ,CAAZ;AAEA;;AAED,QAAKsF,IAAI,KAAKE,SAAd,EAA0B;AAEzB/3J,MAAAA,GAAG,GAAGA,GAAG,CAACqwG,SAAJ,CAAe,CAAf,EAAkBvlI,KAAK,CAAC8H,KAAN,GAAcO,MAAhC,IAA2C4kL,SAA3C,GAAuD/3J,GAAG,CAACqwG,SAAJ,CAAevlI,KAAK,CAAC8H,KAAN,GAAcilL,IAAI,CAAC7vL,MAAnB,GAA4BmL,MAA3C,CAA7D;AAEAA,MAAAA,MAAM,IAAI4kL,SAAS,CAAC/vL,MAAV,GAAmB6vL,IAAI,CAAC7vL,MAAlC;AAEA;;AAED,QAAK,KAAK2vL,gBAAL,CAAuBI,SAAvB,MAAuC3tL,SAAvC,IAAoD0sL,iBAAQM,QAAR,CAAkBW,SAAlB,CAAzD,EAAyF;AAExFxF,MAAAA,OAAO,CAACxqG,OAAR,CAAiB+uG,iBAAQ7vK,GAAR,CAAa8wK,SAAb,CAAjB;AAEA;AAED;;AAED,MAAK3wK,MAAM,KAAK,QAAhB,EAA2B;AAE1B,WAAO4Y,GAAP;AAEA,GAJD,MAIO,IAAK,KAAKw3J,QAAV,EAAqB;AAE3B,QAAK,CAAE,KAAKC,WAAZ,EAA0B;AAEzBlF,MAAAA,OAAO,CAACxqG,OAAR,CAAiB,IAAjB,EAAuB,KAAvB,EAA8B/nD,GAA9B;AAEA;;AAED,WAAO,KAAKrhB,IAAZ;AAEA,GAVM,MAUA;AAEN,WAAO4zK,OAAO,CAACtxJ,MAAR,CAAgB,OAAOjB,GAAP,GAAa,IAA7B,EAAmC,KAAKmzJ,OAAL,CAAcZ,OAAd,CAAnC,EAA4DnrK,MAA5D,CAAP;AAEA;AAED,CApFD;;AAsFAkwK,YAAY,CAACnvL,SAAb,CAAuBmX,KAAvB,GAA+B,UAAW0gB,GAAX,EAAgBu3J,QAAhB,EAA0Bl4H,UAA1B,EAAsC03H,QAAtC,EAAiD;AAE/E,OAAK/2J,GAAL,GAAWA,GAAG,IAAI,EAAlB;AAEA,OAAKu3J,QAAL,GAAgBA,QAAQ,IAAI,EAA5B;AACA,OAAKl4H,UAAL,GAAkBA,UAAU,IAAI,EAAhC;AACA,OAAK03H,QAAL,GAAgBA,QAAQ,IAAI,EAA5B;;AAEA,MAAK,KAAKS,QAAV,EAAqB;AAEpB,QAAI1sL,KAAK,GAAG,KAAKk1B,GAAL,CAASl1B,KAAT,CAAgB6qL,iBAAhB,CAAZ;AAEA,SAAKc,MAAL,GAAc,EAAd;;AAEA,QAAK3rL,KAAK,IAAIA,KAAK,CAAC9C,MAAN,IAAgB,CAA9B,EAAkC;AAEjC,WAAKwL,IAAL,GAAY1I,KAAK,CAAE,CAAF,CAAjB;AACA,WAAK6T,IAAL,GAAY7T,KAAK,CAAE,CAAF,CAAjB;AAEA,UAAI2rL,MAAM,GAAG3rL,KAAK,CAAE,CAAF,CAAL,CAAWA,KAAX,CAAkBwrL,gBAAlB,CAAb;;AAEA,UAAKG,MAAL,EAAc;AAEb,YAAIptL,CAAC,GAAG,CAAR;;AAEA,eAAQA,CAAC,GAAGotL,MAAM,CAACzuL,MAAnB,EAA4B;AAE3B,cAAIiwL,SAAS,GAAGxB,MAAM,CAAEptL,CAAC,EAAH,CAAtB;AACA,cAAImK,IAAJ,EAAUmL,IAAV;;AAEA,cAAKs5K,SAAS,KAAK,IAAd,IAAsBA,SAAS,KAAK,KAApC,IAA6CA,SAAS,KAAK,OAAhE,EAA0E;AAEzEzkL,YAAAA,IAAI,GAAGijL,MAAM,CAAEptL,CAAC,EAAH,CAAb;AAEA,WAJD,MAIO;AAENmK,YAAAA,IAAI,GAAGykL,SAAP;AACAA,YAAAA,SAAS,GAAG,EAAZ;AAEA;;AAEDt5K,UAAAA,IAAI,GAAG83K,MAAM,CAAEptL,CAAC,EAAH,CAAb;AAEA,eAAKotL,MAAL,CAAYjkL,IAAZ,CAAkB;AACjBmM,YAAAA,IAAI,EAAEA,IADW;AAEjBnL,YAAAA,IAAI,EAAEA,IAFW;AAGjBykL,YAAAA,SAAS,EAAEA;AAHM,WAAlB;AAMA;AAED;;AAED,WAAKR,WAAL,GAAmB,KAAKz3J,GAAL,CAASztB,OAAT,CAAkB,GAAlB,MAA4B,CAAE,CAAjD;AAEA,KAzCD,MAyCO;AAEN,WAAKiB,IAAL,GAAY,EAAZ;AACA,WAAKmL,IAAL,GAAY,EAAZ;AAEA;AAED;AAED,CAhED;;AAkEA24K,YAAY,CAACnvL,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKmwK,QAAL,GAAgBnwK,MAAM,CAACmwK,QAAvB;AACA,OAAKE,WAAL,GAAmBrwK,MAAM,CAACqwK,WAA1B;AAEA,OAAKp4K,KAAL,CAAY+H,MAAM,CAAC2Y,GAAnB,EAAwB3Y,MAAM,CAACkwK,QAA/B,EAAyClwK,MAAM,CAACg4C,UAAhD,EAA4Dh4C,MAAM,CAAC0vK,QAAnE;AAEA,MAAK1vK,MAAM,CAAC7T,IAAP,KAAgBpJ,SAArB,EAAiC,KAAKoJ,IAAL,GAAY6T,MAAM,CAAC7T,IAAnB;AAEjC,SAAO,IAAP;AAEA,CAbD;;AAeA8jL,YAAY,CAACnvL,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACxY,GAAL,GAAW,KAAKA,GAAhB;AACAwY,IAAAA,IAAI,CAACg/I,QAAL,GAAgB,KAAKA,QAArB;AACAh/I,IAAAA,IAAI,CAACk/I,WAAL,GAAmB,KAAKA,WAAxB;AAEA,QAAK,CAAE,KAAKF,QAAZ,EAAuBh/I,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AAEvBglC,IAAAA,IAAI,CAAC6mB,UAAL,GAAkBhgD,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgB,KAAKi/C,UAArB,CAAZ,CAAlB;AACA7mB,IAAAA,IAAI,CAACu+I,QAAL,GAAgB,EAAhB;;AAEA,SAAM,IAAIiB,OAAV,IAAqB,KAAKjB,QAA1B,EAAqC;AAEpCv+I,MAAAA,IAAI,CAACu+I,QAAL,CAAeiB,OAAf,IAA2B,KAAKjB,QAAL,CAAeiB,OAAf,EAAyB71J,MAAzB,CAAiCC,IAAjC,EAAwChN,IAAnE;AAEA;;AAED,QAAK,KAAKmiK,QAAL,CAAcvvL,MAAnB,EAA4B;AAE3BwwC,MAAAA,IAAI,CAAC++I,QAAL,GAAgB,EAAhB;;AAEA,WAAM,IAAIluL,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKkuL,QAAL,CAAcvvL,MAAnC,EAA2CqB,CAAC,EAA5C,EAAkD;AAEjDmvC,QAAAA,IAAI,CAAC++I,QAAL,CAAc/kL,IAAd,CAAoB,KAAK+kL,QAAL,CAAeluL,CAAf,EAAmB84B,MAAnB,CAA2BC,IAA3B,EAAkChN,IAAtD;AAEA;AAED;AAED;;AAED,SAAOojB,IAAP;AAEA,CAvCD;;;;;;;;;AC3OA;;AAJA;;;AAMA,SAAS0/I,cAAT,CAAyBl4J,GAAzB,EAA8BxsB,IAA9B,EAAoCujL,QAApC,EAA8C13H,UAA9C,EAA0Dk4H,QAA1D,EAAqE;AAEpED,6BAAa5uL,IAAb,CAAmB,IAAnB,EAAyBs3B,GAAzB,EAA8Bu3J,QAA9B,EAAwCl4H,UAAxC,EAAoD03H,QAApD,EAA8DvjL,IAA9D;AAEA;;AAED0kL,cAAc,CAAC/vL,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAes1J,2BAAanvL,SAA5B,CAA3B;AACA+vL,cAAc,CAAC/vL,SAAf,CAAyBoC,WAAzB,GAAuC2tL,cAAvC;AACAA,cAAc,CAAC/vL,SAAf,CAAyB8rL,QAAzB,GAAoC,YAApC;;;;;;;;;ACVA;;AAJA;;;AAMA,SAASkE,gBAAT,CAA2BvuL,IAA3B,EAAiC6sL,MAAjC,EAA0C;AAEzCvC,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAK0vL,WAAL,CAAkBxuL,IAAlB,EAAwB6sL,MAAxB;AAEA;;AAED0B,gBAAgB,CAAChwL,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA7B;AACAgwL,gBAAgB,CAAChwL,SAAjB,CAA2BoC,WAA3B,GAAyC4tL,gBAAzC;AACAA,gBAAgB,CAAChwL,SAAjB,CAA2B8rL,QAA3B,GAAsC,cAAtC;;AAEAkE,gBAAgB,CAAChwL,SAAjB,CAA2BiwL,WAA3B,GAAyC,UAAWxuL,IAAX,EAAiB6sL,MAAjB,EAA0B;AAElE,OAAKhqL,KAAL,GAAa7C,IAAb;AACA,OAAK6sL,MAAL,GAAcA,MAAM,IAAI,EAAxB;AAEA,CALD;;AAOA0B,gBAAgB,CAAChwL,SAAjB,CAA2BkwL,WAA3B,GAAyC,YAAY;AAEpD,SAAO,KAAK5rL,KAAZ;AAEA,CAJD;;AAMA0rL,gBAAgB,CAAChwL,SAAjB,CAA2BgrL,OAA3B,GAAqC,UAAWZ,OAAX,EAAqB;AAEzD,SAAO,KAAK9lL,KAAL,CAAW0mL,OAAX,CAAoBZ,OAApB,CAAP;AAEA,CAJD;;AAMA4F,gBAAgB,CAAChwL,SAAjB,CAA2BswK,QAA3B,GAAsC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAElE,MAAI5T,IAAI,GAAG,KAAK2/K,OAAL,CAAcZ,OAAd,CAAX;AAAA,MACC3oL,IAAI,GAAG,KAAK6C,KADb;AAGA,MAAIumL,IAAI,GAAGppL,IAAI,CAAC6oL,KAAL,CAAYF,OAAZ,EAAqBnrK,MAArB,IAAgC,IAA3C;AAAA,MACC/W,MAAM,GAAG,EADV;;AAGA,OAAM,IAAIhH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGO,IAAI,CAAC6sL,MAAL,CAAYzuL,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C,QAAIivL,IAAI,GAAG1uL,IAAI,CAAC6sL,MAAL,CAAaptL,CAAb,CAAX;AAAA,QACCkvL,KAAK,GAAG,KAAK9B,MAAL,CAAaptL,CAAb,KAAoB,KAAKotL,MAAL,CAAa6B,IAAI,CAAC35K,IAAlB,CAD7B;AAGAtO,IAAAA,MAAM,CAACmC,IAAP,CAAa+lL,KAAK,CAAC9F,KAAN,CAAaF,OAAb,EAAsBA,OAAO,CAAC2D,eAAR,CAAyBoC,IAAI,CAAC9kL,IAA9B,CAAtB,CAAb;AAEA;;AAEDw/K,EAAAA,IAAI,IAAI3iL,MAAM,CAACoC,IAAP,CAAa,IAAb,IAAsB,IAA9B;AAEA,SAAO8/K,OAAO,CAACtxJ,MAAR,CAAgB+xJ,IAAhB,EAAsBx/K,IAAtB,EAA4B4T,MAA5B,CAAP;AAEA,CArBD;;AAuBA+wK,gBAAgB,CAAChwL,SAAjB,CAA2BswB,IAA3B,GAAkC,UAAWpR,MAAX,EAAoB;AAErD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAM,IAAIwwK,IAAV,IAAkBxwK,MAAM,CAACovK,MAAzB,EAAkC;AAEjC,SAAKA,MAAL,CAAaoB,IAAb,IAAsBxwK,MAAM,CAACovK,MAAP,CAAeoB,IAAf,CAAtB;AAEA;;AAED,OAAKprL,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CAdD;;AAgBA0rL,gBAAgB,CAAChwL,SAAjB,CAA2Bg6B,MAA3B,GAAoC,UAAWC,IAAX,EAAkB;AAErD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEb,QAAI5uC,IAAI,GAAG,KAAK6C,KAAhB;AAEA+rC,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;;AAEA,QAAKxrB,IAAI,CAAC6sL,MAAL,CAAYzuL,MAAjB,EAA0B;AAEzBwwC,MAAAA,IAAI,CAACi+I,MAAL,GAAc,EAAd;;AAEA,WAAM,IAAIptL,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGO,IAAI,CAAC6sL,MAAL,CAAYzuL,MAAjC,EAAyCqB,CAAC,EAA1C,EAAgD;AAE/C,YAAIivL,IAAI,GAAG1uL,IAAI,CAAC6sL,MAAL,CAAaptL,CAAb,CAAX;AAAA,YACCuY,IAAI,GAAG,KAAK60K,MAAL,CAAaptL,CAAb,KAAoB,KAAKotL,MAAL,CAAa6B,IAAI,CAAC35K,IAAlB,CAD5B;AAGA65B,QAAAA,IAAI,CAACi+I,MAAL,CAAa6B,IAAI,CAAC35K,IAAlB,IAA2BiD,IAAI,CAACugB,MAAL,CAAaC,IAAb,EAAoBhN,IAA/C;AAEA;AAED;AAED;;AAED,SAAOojB,IAAP;AAEA,CA/BD;;;;;;;;;AC5EA;;;AAIA,IAAIggJ,SAAS,GAAG;AAEfn/J,EAAAA,QAAQ,EAAE,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,CAFK;AAIfo/J,EAAAA,YAAY,EAAE,YAAY;AAEzB,aAASC,aAAT,CAAwBC,KAAxB,EAA+B5qL,QAA/B,EAAyC6qL,WAAzC,EAAuD;AAEtD,UAAKA,WAAL,EAAmB;AAElB,eAAO;AAEN3xK,UAAAA,GAAG,EAAE,YAAY;AAEhB,mBAAO,KAAM0xK,KAAN,EAAe5qL,QAAf,EAA2B6qL,WAA3B,CAAP;AAEA,WANK;AAQN/gK,UAAAA,GAAG,EAAE,UAAW9oB,GAAX,EAAiB;AAErB,iBAAM4pL,KAAN,EAAe5qL,QAAf,EAA2B6qL,WAA3B,IAA2C7pL,GAA3C;AAEA;AAZK,SAAP;AAgBA,OAlBD,MAkBO;AAEN,eAAO;AAENkY,UAAAA,GAAG,EAAE,YAAY;AAEhB,mBAAO,KAAM0xK,KAAN,EAAe5qL,QAAf,CAAP;AAEA,WANK;AAQN8pB,UAAAA,GAAG,EAAE,UAAW9oB,GAAX,EAAiB;AAErB,iBAAM4pL,KAAN,EAAe5qL,QAAf,IAA4BgB,GAA5B;AAEA;AAZK,SAAP;AAgBA;AAED;;AAED,WAAO,SAAS0pL,YAAT,CAAuBI,KAAvB,EAA8BF,KAA9B,EAAqCloG,IAArC,EAA4C;AAElD,UAAIqoG,SAAS,GAAG,EAAhB;;AAEA,WAAM,IAAIzvL,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGonF,IAAI,CAACzoF,MAA1B,EAAkC,EAAGqB,CAArC,EAAyC;AAExC,YAAImvC,IAAI,GAAGi4C,IAAI,CAAEpnF,CAAF,CAAJ,CAAUiJ,KAAV,CAAiB,GAAjB,CAAX;AAAA,YACCvE,QAAQ,GAAGyqC,IAAI,CAAE,CAAF,CADhB;AAAA,YAECogJ,WAAW,GAAGpgJ,IAAI,CAAE,CAAF,CAFnB;AAIAsgJ,QAAAA,SAAS,CAAE/qL,QAAF,CAAT,GAAwB2qL,aAAa,CAAEC,KAAF,EAAS5qL,QAAT,EAAmB6qL,WAAnB,CAArC;AAEA;;AAED7vL,MAAAA,MAAM,CAACwV,gBAAP,CAAyBs6K,KAAzB,EAAgCC,SAAhC;AAEA,KAhBD;AAkBA,GA9Da;AAJC,CAAhB;;;;;;;;;;ACJA;;;AAIA,SAASC,SAAT,CAAoB1wH,IAApB,EAA2B;AAE1B,OAAKA,IAAL,GAAYA,IAAI,KAAKj+D,SAAT,GAAqBi+D,IAArB,GAA4B,CAAxC;AAEA,OAAKhyB,EAAL,GAAU,CAAV;AAEA;;AAED0iJ,SAAS,CAAC5wL,SAAV,GAAsB;AAErBoC,EAAAA,WAAW,EAAEwuL,SAFQ;AAIrBvxJ,EAAAA,MAAM,EAAE,UAAWn7B,KAAX,EAAmB;AAE1B,MAAG,KAAKgqC,EAAR;AAEA,SAAKgyB,IAAL,IAAah8D,KAAb;AACA,SAAKA,KAAL,GAAaA,KAAb;AAEA,WAAO,IAAP;AAEA,GAboB;AAerB2sL,EAAAA,WAAW,EAAE,UAAW92H,QAAX,EAAsB;AAElC,SAAKA,QAAL,GAAgBA,QAAhB;AAEA,WAAO,IAAP;AAEA,GArBoB;AAuBrB+2H,EAAAA,gBAAgB,EAAE,UAAWC,aAAX,EAA2B;AAE5C,SAAKA,aAAL,GAAqBA,aAArB;AAEA,WAAO,IAAP;AAEA,GA7BoB;AA+BrBC,EAAAA,UAAU,EAAE,UAAWv3K,IAAX,EAAkB;AAE7B,QAAKA,IAAI,CAACw3K,OAAL,KAAiB,KAAK/iJ,EAA3B,EAAgC,OAAO,IAAP;AAEhCz0B,IAAAA,IAAI,CAAC2xK,WAAL,CAAkB,IAAlB;AAEA3xK,IAAAA,IAAI,CAACw3K,OAAL,GAAe,KAAK/iJ,EAApB;AAEA,WAAO,IAAP;AAEA;AAzCoB,CAAtB;;;;;;;;;ACZA;;;AAIA,SAASgjJ,WAAT,CAAsBhpL,MAAtB,EAA+B;AAE9BA,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AAEA,OAAKsO,IAAL,GAAYtO,MAAM,CAACsO,IAAnB;AACA,OAAKnL,IAAL,GAAYnD,MAAM,CAACmD,IAAnB;AACA,OAAKoO,IAAL,GAAYvR,MAAM,CAACuR,IAAnB;AACA,OAAKwxC,WAAL,GAAmB/iD,MAAM,CAAC+iD,WAA1B;AAEA;;AAEDrqD,MAAM,CAACwV,gBAAP,CAAyB86K,WAAW,CAAClxL,SAArC,EAAgD;AAE/CsE,EAAAA,KAAK,EAAE;AAENwa,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKrF,IAAL,CAAUnV,KAAjB;AAEA,KANK;AAQNorB,IAAAA,GAAG,EAAE,UAAW9oB,GAAX,EAAiB;AAErB,WAAK6S,IAAL,CAAUnV,KAAV,GAAkBsC,GAAlB;AAEA;AAZK;AAFwC,CAAhD;;;;;;;;;ACXA;;AAEA;;AACA;;AAPA;;;AASA,SAASuqL,WAAT,CAAsB5oL,CAAtB,EAAyBE,CAAzB,EAA6B;AAE5BskL,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB;;AAEA,OAAK+D,KAAL,GAAaiE,CAAC,YAAYsnB,oBAAb,GAAuBtnB,CAAvB,GAA2B,IAAIsnB,oBAAJ,CAAatnB,CAAb,EAAgBE,CAAhB,CAAxC;AAEA;;AAED0oL,WAAW,CAACnxL,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAxB;AACAmxL,WAAW,CAACnxL,SAAZ,CAAsBoC,WAAtB,GAAoC+uL,WAApC;AACAA,WAAW,CAACnxL,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEAuE,qBAAUC,YAAV,CAAwBa,WAAW,CAACnxL,SAApC,EAA+C,OAA/C,EAAwD,CAAE,GAAF,EAAO,GAAP,CAAxD;;AAEAmxL,WAAW,CAACnxL,SAAZ,CAAsBmtL,gBAAtB,GAAyC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA8D;AAEtG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,WAAW,KAAKvwB,CAAhB,GAAoB,IAApB,GAA2B,KAAKE,CAAhC,GAAoC,IAApD,EAA0D4C,IAA1D,EAAgE4T,MAAhE,CAAP;AAEA,CAJD;;AAMAkyK,WAAW,CAACnxL,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,CAAWgsB,IAAX,CAAiBpR,MAAjB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAiyK,WAAW,CAACnxL,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC9nC,CAAL,GAAS,KAAKA,CAAd;AACA8nC,IAAAA,IAAI,CAAC5nC,CAAL,GAAS,KAAKA,CAAd;AAEA,QAAK,KAAKukL,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAjBD;;;;;;;;;ACnCA;;AAEA;;AACA;;AAPA;;;AASA,SAAS+gJ,WAAT,CAAsB7oL,CAAtB,EAAyBE,CAAzB,EAA4BmyB,CAA5B,EAAgC;AAE/BmyJ,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB;;AAEA,OAAK+D,KAAL,GAAaiE,CAAC,YAAYk5B,oBAAb,GAAuBl5B,CAAvB,GAA2B,IAAIk5B,oBAAJ,CAAal5B,CAAb,EAAgBE,CAAhB,EAAmBmyB,CAAnB,CAAxC;AAEA;;AAEDw2J,WAAW,CAACpxL,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAxB;AACAoxL,WAAW,CAACpxL,SAAZ,CAAsBoC,WAAtB,GAAoCgvL,WAApC;AACAA,WAAW,CAACpxL,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEAuE,qBAAUC,YAAV,CAAwBc,WAAW,CAACpxL,SAApC,EAA+C,OAA/C,EAAwD,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAxD;;AAEAoxL,WAAW,CAACpxL,SAAZ,CAAsBmtL,gBAAtB,GAAyC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA8D;AAEtG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,WAAW,KAAKvwB,CAAhB,GAAoB,IAApB,GAA2B,KAAKE,CAAhC,GAAoC,IAApC,GAA2C,KAAKmyB,CAAhD,GAAoD,IAApE,EAA0EvvB,IAA1E,EAAgF4T,MAAhF,CAAP;AAEA,CAJD;;AAMAmyK,WAAW,CAACpxL,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,CAAWgsB,IAAX,CAAiBpR,MAAjB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAkyK,WAAW,CAACpxL,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC9nC,CAAL,GAAS,KAAKA,CAAd;AACA8nC,IAAAA,IAAI,CAAC5nC,CAAL,GAAS,KAAKA,CAAd;AACA4nC,IAAAA,IAAI,CAACzV,CAAL,GAAS,KAAKA,CAAd;AAEA,QAAK,KAAKoyJ,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAlBD;;;;;;;;;ACnCA;;AAEA;;AACA;;AAPA;;;AASA,SAASghJ,WAAT,CAAsB9oL,CAAtB,EAAyBE,CAAzB,EAA4BmyB,CAA5B,EAA+B5c,CAA/B,EAAmC;AAElC+uK,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB;;AAEA,OAAK+D,KAAL,GAAaiE,CAAC,YAAYoyB,oBAAb,GAAuBpyB,CAAvB,GAA2B,IAAIoyB,oBAAJ,CAAapyB,CAAb,EAAgBE,CAAhB,EAAmBmyB,CAAnB,EAAsB5c,CAAtB,CAAxC;AAEA;;AAEDqzK,WAAW,CAACrxL,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAxB;AACAqxL,WAAW,CAACrxL,SAAZ,CAAsBoC,WAAtB,GAAoCivL,WAApC;AACAA,WAAW,CAACrxL,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEAuE,qBAAUC,YAAV,CAAwBe,WAAW,CAACrxL,SAApC,EAA+C,OAA/C,EAAwD,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,EAAiB,GAAjB,CAAxD;;AAEAqxL,WAAW,CAACrxL,SAAZ,CAAsBmtL,gBAAtB,GAAyC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA8D;AAEtG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,WAAW,KAAKvwB,CAAhB,GAAoB,IAApB,GAA2B,KAAKE,CAAhC,GAAoC,IAApC,GAA2C,KAAKmyB,CAAhD,GAAoD,IAApD,GAA2D,KAAK5c,CAAhE,GAAoE,IAApF,EAA0F3S,IAA1F,EAAgG4T,MAAhG,CAAP;AAEA,CAJD;;AAMAoyK,WAAW,CAACrxL,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,CAAWgsB,IAAX,CAAiBpR,MAAjB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAmyK,WAAW,CAACrxL,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC9nC,CAAL,GAAS,KAAKA,CAAd;AACA8nC,IAAAA,IAAI,CAAC5nC,CAAL,GAAS,KAAKA,CAAd;AACA4nC,IAAAA,IAAI,CAACzV,CAAL,GAAS,KAAKA,CAAd;AACAyV,IAAAA,IAAI,CAACryB,CAAL,GAAS,KAAKA,CAAd;AAEA,QAAK,KAAKgvK,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAnBD;;;;;;;;;ACnCA;;AACA;;AALA;;;AAOA,SAASihJ,MAAT,CAAiB7mL,KAAjB,EAAyB;AAExBshL,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB,EAA2B;AAAEyrL,IAAAA,MAAM,EAAE;AAAV,GAA3B;;AAEA,OAAKvhL,KAAL,GAAaA,KAAK,IAAI,CAAtB;AAEA;;AAED6mL,MAAM,CAACtxL,SAAP,GAAmBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAnB;AACAsxL,MAAM,CAACtxL,SAAP,CAAiBoC,WAAjB,GAA+BkvL,MAA/B;AACAA,MAAM,CAACtxL,SAAP,CAAiB8rL,QAAjB,GAA4B,IAA5B;;AAEAwF,MAAM,CAACtxL,SAAP,CAAiBswK,QAAjB,GAA4B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAExDmrK,EAAAA,OAAO,CAACmH,QAAR,CAAiB72J,EAAjB,CAAqB,KAAKjwB,KAA1B,IAAoC,IAApC;AAEA,MAAI+mL,OAAO,GAAG,KAAK/mL,KAAL,GAAa,CAAb,GAAiB,KAAKA,KAAL,GAAa,CAA9B,GAAkC,EAAhD;AACA,MAAI1H,MAAM,GAAGqnL,OAAO,CAACgD,QAAR,CAAkB,QAAlB,IAA+B,OAAOoE,OAAtC,GAAgD,QAAQA,OAArE;AAEA,SAAOpH,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,CATD;;AAWAqyK,MAAM,CAACtxL,SAAP,CAAiBswB,IAAjB,GAAwB,UAAWpR,MAAX,EAAoB;AAE3C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKzU,KAAL,GAAayU,MAAM,CAACzU,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUA6mL,MAAM,CAACtxL,SAAP,CAAiBg6B,MAAjB,GAA0B,UAAWC,IAAX,EAAkB;AAE3C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC5lC,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAO4lC,IAAP;AAEA,CAdD;;AAgBAs+I,iBAAQE,UAAR,CAAoB,IAApB,EAA0B,YAAY;AAErC,SAAO,IAAIyC,MAAJ,EAAP;AAEA,CAJD;;AAMA3C,iBAAQE,UAAR,CAAoB,KAApB,EAA2B,YAAY;AAEtC,SAAO,IAAIyC,MAAJ,CAAY,CAAZ,CAAP;AAEA,CAJD;;;;;;;;;AC1DA;;AAJA;;;AAMA,SAASG,SAAT,CAAoBntL,KAApB,EAA4B;AAE3ByoL,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,GAAtB;;AAEA,OAAK+D,KAAL,GAAaA,KAAK,IAAI,CAAtB;AAEA;;AAEDmtL,SAAS,CAACzxL,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAtB;AACAyxL,SAAS,CAACzxL,SAAV,CAAoBoC,WAApB,GAAkCqvL,SAAlC;AACAA,SAAS,CAACzxL,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEA2F,SAAS,CAACzxL,SAAV,CAAoBmtL,gBAApB,GAAuC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA+D;AAErG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,KAAKx0B,KAAL,IAAe,KAAKA,KAAL,GAAa,CAAb,GAAiB,EAAjB,GAAsB,IAArC,CAAhB,EAA6D+G,IAA7D,EAAmE4T,MAAnE,CAAP;AAEA,CAJD;;AAMAwyK,SAAS,CAACzxL,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAmtL,SAAS,CAACzxL,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAlB;AAEA,QAAK,KAAK0oL,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAhBD;;;;;;;;;AC9BA;;AAUA;;AACA;;AACA;;AACA;;AACA;;AAlBA;;;AAoBA,SAASqhJ,cAAT,CAAyBpnB,KAAzB,EAAgCtvJ,MAAhC,EAAyC;AAExC+wK,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK+pK,KAAL,GAAaA,KAAb;AAEA,OAAKtvJ,MAAL,GAAcA,MAAM,IAAI02K,cAAc,CAACC,gBAAvC;AAEA;;AAEDD,cAAc,CAACE,KAAf,GAAyB,YAAY;AAEpC;AAEA,MAAIC,cAAc,GAAG,IAAI1C,0BAAJ,CAAkB,CACtC,wCADsC,EAGtC,gBAHsC,EAKtC,GALsC,EAMrC7kL,IANqC,CAM/B,IAN+B,CAAlB,CAArB;AAQA,MAAIwnL,aAAa,GAAG,IAAI3C,0BAAJ,CAAkB,CACrC,6DADqC,EAGrC,iEAHqC,EAKrC,GALqC,EAMpC7kL,IANoC,CAM9B,IAN8B,CAAlB,CAApB;AAQA,MAAIynL,aAAa,GAAG,IAAI5C,0BAAJ,CAAkB,CACrC,6DADqC,EAGrC,uEAHqC,EAKrC,GALqC,EAMpC7kL,IANoC,CAM9B,IAN8B,CAAlB,CAApB;AAQA,MAAI0nL,YAAY,GAAG,IAAI7C,0BAAJ,CAAkB,CACpC,sCADoC,EAGpC,qLAHoC,EAKpC,GALoC,EAMnC7kL,IANmC,CAM7B,IAN6B,CAAlB,CAAnB;AAQA,MAAI2nL,YAAY,GAAG,IAAI9C,0BAAJ,CAAkB,CACpC,sCADoC,EAGpC,sKAHoC,EAKpC,GALoC,EAMnC7kL,IANmC,CAM7B,IAN6B,CAAlB,CAAnB;AAQA,MAAI4nL,YAAY,GAAG,IAAI/C,0BAAJ,CAAkB,CACpC,sCADoC,EAGpC,mEAHoC,EAKpC,GALoC,EAMnC7kL,IANmC,CAM7B,IAN6B,CAAlB,CAAnB;AAQA,MAAI6nL,YAAY,GAAG,IAAIhD,0BAAJ,CAAkB,CACpC,sCADoC,EAGpC,gEAHoC,EAIpC,qEAJoC,EAKpC,qEALoC,EAMpC;AAEA,KARoC,EASnC7kL,IATmC,CAS7B,IAT6B,CAAlB,CAAnB,CApDoC,CA+DpC;;AAEA,MAAI8nL,YAAY,GAAG,IAAIjD,0BAAJ,CAAkB,CACpC,yDADoC,EAGpC,sDAHoC,EAKpC,GALoC,EAMnC7kL,IANmC,CAM7B,IAN6B,CAAlB,CAAnB;AAQA,MAAI+nL,YAAY,GAAG,IAAIlD,0BAAJ,CAAkB,CACpC,yDADoC,EAGpC,0DAHoC,EAIpC,uDAJoC,EAKpC,4CALoC,EAMpC,kDANoC,EAQpC,GARoC,EASnC7kL,IATmC,CAS7B,IAT6B,CAAlB,CAAnB,CAzEoC,CAoFpC;;AAEA,MAAIgoL,YAAY,GAAG,IAAInD,0BAAJ,CAAkB,CACpC,yDADoC,EAGpC,sEAHoC,EAKpC,GALoC,EAMnC7kL,IANmC,CAM7B,IAN6B,CAAlB,CAAnB;AASA,MAAIioL,YAAY,GAAG,IAAIpD,0BAAJ,CAAkB,CACpC,yDADoC,EAGpC,0DAHoC,EAIpC,gDAJoC,EAKpC,wDALoC,EAMpC,8DANoC,EAQpC,GARoC,EASnC7kL,IATmC,CAS7B,IAT6B,CAAlB,CAAnB,CA/FoC,CA0GpC;AAEA;;AAEA,MAAIkoL,QAAQ,GAAG,IAAI/E,oBAAJ,CAAe,uGAAf,CAAf;AAEA,MAAIgF,cAAc,GAAG,IAAItD,0BAAJ,CAAkB,CACtC,wCADsC,EAGtC,yCAHsC,EAItC,sDAJsC,EAKtC,gBALsC,EAMtC,2CANsC,EAOtC,8CAPsC,EAQtC,yBARsC,EAStC,2DATsC,EAUtC,kBAVsC,EAYtC,GAZsC,EAarC7kL,IAbqC,CAa/B,IAb+B,CAAlB,EAaL,CAAEkoL,QAAF,CAbK,CAArB,CAhHoC,CA+HpC;;AAEA,MAAIE,eAAe,GAAG,IAAIjF,oBAAJ,CAAe,mHAAf,CAAtB;AAEA,MAAIkF,cAAc,GAAG,IAAIxD,0BAAJ,CAAkB,CACtC,wCADsC,EAGtC,wCAHsC,EAItC,kBAJsC,EAKtC,0CALsC,EAMtC,uCANsC,EAOtC,uCAPsC,EAQtC,+CARsC,EAStC,sCATsC,EAWtC,GAXsC,EAYrC7kL,IAZqC,CAY/B,IAZ+B,CAAlB,EAYL,CAAEooL,eAAF,CAZK,CAArB;AAcA,SAAO;AACNb,IAAAA,cAAc,EAAEA,cADV;AAENC,IAAAA,aAAa,EAAEA,aAFT;AAGNC,IAAAA,aAAa,EAAEA,aAHT;AAINC,IAAAA,YAAY,EAAEA,YAJR;AAKNC,IAAAA,YAAY,EAAEA,YALR;AAMNC,IAAAA,YAAY,EAAEA,YANR;AAONC,IAAAA,YAAY,EAAEA,YAPR;AAQNC,IAAAA,YAAY,EAAEA,YARR;AASNC,IAAAA,YAAY,EAAEA,YATR;AAUNC,IAAAA,YAAY,EAAEA,YAVR;AAWNC,IAAAA,YAAY,EAAEA,YAXR;AAYNC,IAAAA,QAAQ,EAAEA,QAZJ;AAaNC,IAAAA,cAAc,EAAEA,cAbV;AAcNC,IAAAA,eAAe,EAAEA,eAdX;AAeNC,IAAAA,cAAc,EAAEA;AAfV,GAAP;AAkBA,CAnKsB,EAAvB;;AAqKAjB,cAAc,CAACC,gBAAf,GAAkC,gBAAlC;AAEAD,cAAc,CAACkB,eAAf,GAAiC,eAAjC;AACAlB,cAAc,CAACmB,eAAf,GAAiC,eAAjC;AAEAnB,cAAc,CAACoB,cAAf,GAAgC,cAAhC;AACApB,cAAc,CAACqB,cAAf,GAAgC,cAAhC;AAEArB,cAAc,CAACsB,cAAf,GAAgC,cAAhC;AACAtB,cAAc,CAACuB,cAAf,GAAgC,cAAhC;AAEAvB,cAAc,CAACwB,cAAf,GAAgC,cAAhC;AACAxB,cAAc,CAACyB,cAAf,GAAgC,cAAhC;AAEAzB,cAAc,CAAC0B,cAAf,GAAgC,cAAhC;AACA1B,cAAc,CAAC2B,cAAf,GAAgC,cAAhC;AAEA3B,cAAc,CAAC4B,iBAAf,GAAmC,gBAAnC;AACA5B,cAAc,CAAC6B,iBAAf,GAAmC,gBAAnC;;AAEA7B,cAAc,CAAC30G,qBAAf,GAAuC,UAAW/jD,QAAX,EAAsB;AAE5D,UAASA,QAAT;AAEC,SAAKtP,2BAAL;AACC,aAAO,CAAE,QAAF,CAAP;;AACD,SAAKC,yBAAL;AACC,aAAO,CAAE,MAAF,CAAP;;AACD,SAAKE,yBAAL;AACC,aAAO,CAAE,MAAF,CAAP;;AACD,SAAKE,0BAAL;AACC,aAAO,CAAE,MAAF,EAAU,IAAI0nK,oBAAJ,CAAe,GAAf,EAAqBxE,WAArB,CAAkC,IAAlC,CAAV,CAAP;;AACD,SAAKjjK,2BAAL;AACC,aAAO,CAAE,MAAF,EAAU,IAAIynK,oBAAJ,CAAe,IAAf,EAAsBxE,WAAtB,CAAmC,IAAnC,CAAV,CAAP;;AACD,SAAKhjK,yBAAL;AACC,aAAO,CAAE,MAAF,EAAU,IAAIwnK,oBAAJ,CAAe,KAAf,EAAuBxE,WAAvB,CAAoC,IAApC,CAAV,CAAP;;AACD,SAAKrjK,0BAAL;AACC,aAAO,CAAE,OAAF,EAAW,IAAImmK,8BAAJ,CAAoB,uBAApB,EAA6C,GAA7C,CAAX,CAAP;AAfF;AAmBA,CArBD;;AAuBA2B,cAAc,CAAC1xL,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA3B;AACA0xL,cAAc,CAAC1xL,SAAf,CAAyBoC,WAAzB,GAAuCsvL,cAAvC;AACAA,cAAc,CAAC1xL,SAAf,CAAyB8rL,QAAzB,GAAoC,YAApC;;AAEA4F,cAAc,CAAC1xL,SAAf,CAAyBswK,QAAzB,GAAoC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEhE,MAAIqrJ,KAAK,GAAG,KAAKA,KAAL,CAAWggB,KAAX,CAAkBF,OAAlB,EAA2B,IAA3B,CAAZ;AACA,MAAIoJ,UAAU,GAAG,KAAKxI,OAAL,CAAcZ,OAAd,CAAjB;AAEA,MAAIqJ,UAAU,GAAG/B,cAAc,CAACE,KAAf,CAAsB,KAAK52K,MAA3B,CAAjB;AACA,MAAIA,MAAM,GAAGovK,OAAO,CAACxqG,OAAR,CAAiB6zG,UAAjB,CAAb;;AAEA,MAAKz4K,MAAM,KAAK02K,cAAc,CAACC,gBAA/B,EAAkD;AAEjD,WAAOvH,OAAO,CAACtxJ,MAAR,CAAgBwxI,KAAhB,EAAuBkpB,UAAvB,EAAmCv0K,MAAnC,CAAP;AAEA,GAJD,MAIO;AAEN,QAAKw0K,UAAU,CAACnF,MAAX,CAAkBzuL,MAAlB,KAA6B,CAAlC,EAAsC;AAErC,UAAIq0F,MAAM,GAAG,KAAKA,MAAL,CAAYo2F,KAAZ,CAAmBF,OAAnB,EAA4B,GAA5B,CAAb;AAEA,aAAOA,OAAO,CAACtxJ,MAAR,CAAgB9d,MAAM,GAAG,IAAT,GAAgBsvJ,KAAhB,GAAwB,IAAxB,GAA+Bp2E,MAA/B,GAAwC,IAAxD,EAA8Ds/F,UAA9D,EAA0Ev0K,MAA1E,CAAP;AAEA,KAND,MAMO;AAEN,aAAOmrK,OAAO,CAACtxJ,MAAR,CAAgB9d,MAAM,GAAG,IAAT,GAAgBsvJ,KAAhB,GAAwB,IAAxC,EAA8CkpB,UAA9C,EAA0Dv0K,MAA1D,CAAP;AAEA;AAED;AAED,CA5BD;;AA8BAyyK,cAAc,CAAC1xL,SAAf,CAAyB0zL,YAAzB,GAAwC,UAAW16J,QAAX,EAAsB;AAE7D,MAAIukB,UAAU,GAAGm0I,cAAc,CAAC30G,qBAAf,CAAsC/jD,QAAtC,CAAjB;AAEA,OAAKhe,MAAL,GAAc,aAAauiC,UAAU,CAAE,CAAF,CAArC;AACA,OAAK22C,MAAL,GAAc32C,UAAU,CAAE,CAAF,CAAxB;AAEA,CAPD;;AASAm0I,cAAc,CAAC1xL,SAAf,CAAyB2zL,YAAzB,GAAwC,UAAW36J,QAAX,EAAsB;AAE7D,MAAIukB,UAAU,GAAGm0I,cAAc,CAAC30G,qBAAf,CAAsC/jD,QAAtC,CAAjB;AAEA,OAAKhe,MAAL,GAAcuiC,UAAU,CAAE,CAAF,CAAV,GAAkB,UAAhC;AACA,OAAK22C,MAAL,GAAc32C,UAAU,CAAE,CAAF,CAAxB;AAEA,CAPD;;AASAm0I,cAAc,CAAC1xL,SAAf,CAAyBswB,IAAzB,GAAgC,UAAWpR,MAAX,EAAoB;AAEnD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKorJ,KAAL,GAAaprJ,MAAM,CAACorJ,KAApB;AACA,OAAKtvJ,MAAL,GAAckE,MAAM,CAAClE,MAArB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA02K,cAAc,CAAC1xL,SAAf,CAAyBg6B,MAAzB,GAAkC,UAAWC,IAAX,EAAkB;AAEnD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACi6H,KAAL,GAAa,KAAKA,KAAL,CAAWtwI,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAACr1B,MAAL,GAAc,KAAKA,MAAnB;AAEA;;AAED,SAAOq1B,IAAP;AAEA,CAfD;;;;;;;;;ACzSA;;AACA;;AACA;;AACA;;AAPA;;;AASA,SAASujJ,WAAT,CAAsBtvL,KAAtB,EAA6Bo2B,EAA7B,EAAiC8vD,IAAjC,EAAuC/nD,OAAvC,EAAiD;AAEhDsqJ,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB,EAA4B;AAAEyrL,IAAAA,MAAM,EAAE;AAAV,GAA5B;;AAEA,OAAK1nL,KAAL,GAAaA,KAAb;AACA,OAAKo2B,EAAL,GAAUA,EAAE,IAAI,IAAI42J,cAAJ,EAAhB;AACA,OAAK9mG,IAAL,GAAYA,IAAZ;AACA,OAAK/nD,OAAL,GAAeA,OAAO,KAAKxgC,SAAZ,GAAwBwgC,OAAxB,GAAkC,KAAjD;AAEA;;AAEDmxJ,WAAW,CAAC5zL,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAxB;AACA4zL,WAAW,CAAC5zL,SAAZ,CAAsBoC,WAAtB,GAAoCwxL,WAApC;AACAA,WAAW,CAAC5zL,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEA8H,WAAW,CAAC5zL,SAAZ,CAAsB+gI,UAAtB,GAAmC,UAAWqpD,OAAX,EAAoBnrK,MAApB,EAA6B;AAE/D,SAAO8tK,qBAAU/sL,SAAV,CAAoBswK,QAApB,CAA6B/vK,IAA7B,CAAmC,IAAnC,EAAyC6pL,OAAzC,EAAkDnrK,MAAlD,EAA0D,KAAK3a,KAAL,CAAW2oB,IAArE,EAA2E,GAA3E,CAAP;AAEA,CAJD;;AAMA2mK,WAAW,CAAC5zL,SAAZ,CAAsBswK,QAAtB,GAAiC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE7D,MAAKA,MAAM,KAAK,WAAhB,EAA8B;AAE7B,WAAO,KAAK8hH,UAAL,CAAiBqpD,OAAjB,EAA0BnrK,MAA1B,CAAP;AAEA;;AAED,MAAI40K,GAAG,GAAG,KAAK9yD,UAAL,CAAiBqpD,OAAjB,EAA0BnrK,MAA1B,CAAV;AAAA,MACCyb,EAAE,GAAG,KAAKA,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,KAAK3nJ,OAAL,GAAe,IAAf,GAAsB,IAA9C,CADN;AAAA,MAEC+nD,IAAI,GAAG,KAAKA,IAAL,GAAY,KAAKA,IAAL,CAAU8/F,KAAV,CAAiBF,OAAjB,EAA0B,GAA1B,CAAZ,GAA8CnoL,SAFtD;;AAIA,MAAKuoF,IAAI,KAAKvoF,SAAT,IAAsBmoL,OAAO,CAACnyJ,OAAR,CAAgBuyD,IAA3C,EAAkD;AAEjDA,IAAAA,IAAI,GAAG4/F,OAAO,CAACnyJ,OAAR,CAAgBuyD,IAAhB,CAAqB4qE,UAArB,CAAiC,IAAjC,EAAwCk1B,KAAxC,CAA+CF,OAA/C,EAAwD,GAAxD,CAAP;AAEA;;AAED,MAAIpvK,MAAJ,EAAY6vK,IAAZ;AAEA,MAAK,KAAKpoJ,OAAV,EAAoBznB,MAAM,GAAG,eAAT,CAApB,KACKA,MAAM,GAAGwvE,IAAI,GAAG,WAAH,GAAiB,OAA9B;AAEL,MAAKA,IAAL,EAAYqgG,IAAI,GAAG7vK,MAAM,GAAG,IAAT,GAAgB64K,GAAhB,GAAsB,IAAtB,GAA6Bn5J,EAA7B,GAAkC,IAAlC,GAAyC8vD,IAAzC,GAAgD,IAAvD,CAAZ,KACKqgG,IAAI,GAAG7vK,MAAM,GAAG,IAAT,GAAgB64K,GAAhB,GAAsB,IAAtB,GAA6Bn5J,EAA7B,GAAkC,IAAzC,CAxBwD,CA0B7D;AACA;AACA;AACA;AACA;;AACA,MAAIzC,OAAO,GAAG;AAAE2nD,IAAAA,OAAO,EAAEwqG,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAX;AAAyCb,IAAAA,WAAW,EAAE;AAAtD,GAAd;AACA,MAAIiH,UAAU,GAAG,KAAKxI,OAAL,CAAcZ,OAAd,CAAjB;AAEAA,EAAAA,OAAO,CAAC0J,UAAR,CAAoB77J,OAApB;AAEA,OAAK87J,UAAL,GAAkB,KAAKA,UAAL,IAAmB,IAAIrC,8BAAJ,CAAoB,IAAI3B,8BAAJ,CAAoB,EAApB,EAAwByD,UAAxB,CAApB,CAArC;AACA,OAAKO,UAAL,CAAgBJ,YAAhB,CAA8BvJ,OAAO,CAACpkG,yBAAR,CAAmC,KAAK1hF,KAAxC,CAA9B;AACA,OAAKyvL,UAAL,CAAgBzpB,KAAhB,CAAsBnzJ,KAAtB,CAA6B0zK,IAA7B;AAEAA,EAAAA,IAAI,GAAG,KAAKkJ,UAAL,CAAgBzJ,KAAhB,CAAuBF,OAAvB,EAAgCoJ,UAAhC,CAAP,CAxC6D,CA0C7D;;AAEApJ,EAAAA,OAAO,CAAC4J,aAAR;AAEA,SAAO5J,OAAO,CAACtxJ,MAAR,CAAgB+xJ,IAAhB,EAAsB2I,UAAtB,EAAkCv0K,MAAlC,CAAP;AAEA,CAhDD;;AAkDA20K,WAAW,CAAC5zL,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,MAAKA,MAAM,CAAC5a,KAAZ,EAAoB,KAAKA,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEpB,OAAKo2B,EAAL,GAAUxb,MAAM,CAACwb,EAAjB;AAEA,MAAKxb,MAAM,CAACsrE,IAAZ,EAAmB,KAAKA,IAAL,GAAYtrE,MAAM,CAACsrE,IAAnB;AACnB,MAAKtrE,MAAM,CAACujB,OAAP,KAAmBxgC,SAAxB,EAAoC,KAAKwgC,OAAL,GAAevjB,MAAM,CAACujB,OAAtB;AAEpC,SAAO,IAAP;AAEA,CAbD;;AAeAmxJ,WAAW,CAAC5zL,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEA,QAAK,KAAK31B,KAAV,EAAkB+rC,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW2oB,IAAxB;AAElBojB,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AACAojB,IAAAA,IAAI,CAAC5N,OAAL,GAAe,KAAKA,OAApB;AAEA,QAAK,KAAK+nD,IAAV,EAAiBn6C,IAAI,CAACm6C,IAAL,GAAY,KAAKA,IAAL,CAAUxwD,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEjB;;AAED,SAAOojB,IAAP;AAEA,CAnBD;;;;;;;;;AC3FA;;AACA;;AALA;;;AAOA,SAAS4jJ,YAAT,CAAuB5yL,KAAvB,EAA+B;AAE9B0qL,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAKc,KAAL,GAAaA,KAAK,IAAI4yL,YAAY,CAACC,KAAnC;AAEA;;AAEDD,YAAY,CAACC,KAAb,GAAqB,OAArB;AACAD,YAAY,CAACE,KAAb,GAAqB,OAArB;AACAF,YAAY,CAACG,IAAb,GAAoB,MAApB;AACAH,YAAY,CAACI,UAAb,GAA0B,YAA1B;AAEAJ,YAAY,CAACj0L,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAzB;AACAi0L,YAAY,CAACj0L,SAAb,CAAuBoC,WAAvB,GAAqC6xL,YAArC;AACAA,YAAY,CAACj0L,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;;AAEAmI,YAAY,CAACj0L,SAAb,CAAuBgrL,OAAvB,GAAiC,YAAa;AAE7C,UAAS,KAAK3pL,KAAd;AAEC,SAAK4yL,YAAY,CAACI,UAAlB;AAEC,aAAO,IAAP;AAJF;;AAQA,SAAO,KAAKhpL,IAAZ;AAEA,CAZD;;AAcA4oL,YAAY,CAACj0L,SAAb,CAAuBksL,SAAvB,GAAmC;AAAW;AAAgB;AAE7D,UAAS,KAAK7qL,KAAd;AAEC,SAAK4yL,YAAY,CAACC,KAAlB;AACA,SAAKD,YAAY,CAACE,KAAlB;AAEC,aAAO,KAAP;AALF;;AASA,SAAO,IAAP;AAEA,CAbD;;AAeAF,YAAY,CAACj0L,SAAb,CAAuBswK,QAAvB,GAAkC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE9D,MAAIlc,MAAJ;;AAEA,UAAS,KAAK1B,KAAd;AAEC,SAAK4yL,YAAY,CAACC,KAAlB;AAEC,UAAK9J,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnCrqL,QAAAA,MAAM,GAAG,aAAT;AAEA,OAJD,MAIO;AAENqnL,QAAAA,OAAO,CAACmH,QAAR,CAAiB7pL,QAAjB,GAA4B,IAA5B;AAEA3E,QAAAA,MAAM,GAAG,WAAT;AAEA;;AAED;;AAED,SAAKkxL,YAAY,CAACE,KAAlB;AAEC,UAAK/J,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnC,eAAO,gDAAP;AAEA,OAJD,MAIO;AAENhD,QAAAA,OAAO,CAACmH,QAAR,CAAiB+C,aAAjB,GAAiC,IAAjC;AAEAvxL,QAAAA,MAAM,GAAG,YAAT;AAEA;;AAED;;AAED,SAAKkxL,YAAY,CAACG,IAAlB;AAECrxL,MAAAA,MAAM,GAAGqnL,OAAO,CAACgD,QAAR,CAAkB,QAAlB,IAA+B,iBAA/B,GAAmD,eAA5D;AAEA;;AAED,SAAK6G,YAAY,CAACI,UAAlB;AAECtxL,MAAAA,MAAM,GAAGqnL,OAAO,CAACgD,QAAR,CAAkB,QAAlB,IAA+B,gEAA/B,GAAkG,aAA3G;AAEA;AA5CF;;AAgDA,SAAOhD,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,CAtDD;;AAwDAg1K,YAAY,CAACj0L,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK7d,KAAL,GAAa6d,MAAM,CAAC7d,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUA4yL,YAAY,CAACj0L,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChvC,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAOgvC,IAAP;AAEA,CAdD;;AAgBAs+I,iBAAQE,UAAR,CAAoB,UAApB,EAAgC,YAAY;AAE3C,SAAO,IAAIoF,YAAJ,EAAP;AAEA,CAJD;;AAMAtF,iBAAQE,UAAR,CAAoB,eAApB,EAAqC,YAAY;AAEhD,SAAO,IAAIoF,YAAJ,CAAkBA,YAAY,CAACE,KAA/B,CAAP;AAEA,CAJD;;AAMAxF,iBAAQE,UAAR,CAAoB,cAApB,EAAoC,YAAY;AAE/C,SAAO,IAAIoF,YAAJ,CAAkBA,YAAY,CAACG,IAA/B,CAAP;AAEA,CAJD;;;;;;;;;AC/IA;;AACA;;AALA;;;AAOA,SAASG,UAAT,CAAqBlzL,KAArB,EAA6B;AAE5B0qL,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAKc,KAAL,GAAaA,KAAK,IAAIkzL,UAAU,CAACH,IAAjC;AAEA;;AAEDG,UAAU,CAACL,KAAX,GAAmB,OAAnB;AACAK,UAAU,CAACJ,KAAX,GAAmB,OAAnB;AACAI,UAAU,CAACH,IAAX,GAAkB,MAAlB;AAEAG,UAAU,CAACv0L,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAvB;AACAu0L,UAAU,CAACv0L,SAAX,CAAqBoC,WAArB,GAAmCmyL,UAAnC;AACAA,UAAU,CAACv0L,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEAyI,UAAU,CAACv0L,SAAX,CAAqBksL,SAArB,GAAiC,YAAY;AAE5C;AAEA,SAAO,KAAK7qL,KAAL,KAAekzL,UAAU,CAACJ,KAAjC;AAEA,CAND;;AAQAI,UAAU,CAACv0L,SAAX,CAAqBsqL,KAArB,GAA6B,UAAWF,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkCg/J,EAAlC,EAAuC;AAEnE,MAAIuI,aAAa,GAAGpK,OAAO,CAACnyJ,OAAR,CAAiB,KAAK52B,KAAL,GAAa,QAA9B,CAApB;;AAEA,MAAKmzL,aAAL,EAAqB;AAEpB,WAAOA,aAAa,CAAClK,KAAd,CAAqBF,OAArB,EAA8BnrK,MAA9B,EAAsCgO,IAAtC,EAA4Cg/J,EAA5C,CAAP;AAEA;;AAED,SAAOF,mBAAS/rL,SAAT,CAAmBsqL,KAAnB,CAAyB/pL,IAAzB,CAA+B,IAA/B,EAAqC6pL,OAArC,EAA8CnrK,MAA9C,EAAsDgO,IAAtD,CAAP;AAEA,CAZD;;AAcAsnK,UAAU,CAACv0L,SAAX,CAAqBswK,QAArB,GAAgC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5D,MAAIlc,MAAJ;;AAEA,UAAS,KAAK1B,KAAd;AAEC,SAAKkzL,UAAU,CAACH,IAAhB;AAEC,UAAKhK,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoCrqL,MAAM,GAAG,mBAAT,CAApC,KACKA,MAAM,GAAG,gBAAT;AAEL;;AAED,SAAKwxL,UAAU,CAACL,KAAhB;AAEC,UAAK9J,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnCrqL,QAAAA,MAAM,GAAG,cAAT;AAEA,OAJD,MAIO;AAENqnL,QAAAA,OAAO,CAACmH,QAAR,CAAiB1tJ,MAAjB,GAA0B,IAA1B;AAEA9gC,QAAAA,MAAM,GAAG,eAAT;AAEA;;AAED;;AAED,SAAKwxL,UAAU,CAACJ,KAAhB;AAEC,UAAK/J,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnCrqL,QAAAA,MAAM,GAAG,gEAAT;AAEA,OAJD,MAIO;AAENqnL,QAAAA,OAAO,CAACmH,QAAR,CAAiBkD,WAAjB,GAA+B,IAA/B;AAEA1xL,QAAAA,MAAM,GAAG,UAAT;AAEA;;AAED;AAvCF;;AA2CA,SAAOqnL,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,CAjDD;;AAmDAs1K,UAAU,CAACv0L,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK7d,KAAL,GAAa6d,MAAM,CAAC7d,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAkzL,UAAU,CAACv0L,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChvC,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAOgvC,IAAP;AAEA,CAdD;;AAgBAs+I,iBAAQE,UAAR,CAAoB,YAApB,EAAkC,YAAY;AAE7C,SAAO,IAAI0F,UAAJ,CAAgBA,UAAU,CAACH,IAA3B,CAAP;AAEA,CAJD;;AAMAzF,iBAAQE,UAAR,CAAoB,aAApB,EAAmC,YAAY;AAE9C,SAAO,IAAI0F,UAAJ,CAAgBA,UAAU,CAAC9uB,MAA3B,CAAP;AAEA,CAJD;;AAMAkpB,iBAAQE,UAAR,CAAoB,aAApB,EAAmC,YAAY;AAE9C,SAAO,IAAI0F,UAAJ,CAAgBA,UAAU,CAACJ,KAA3B,CAAP;AAEA,CAJD;;;;;;;;;AClIA;;AACA;;AACA;;AANA;;;AAQA,SAASO,WAAT,CAAsBrzL,KAAtB,EAA8B;AAE7B0qL,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAKc,KAAL,GAAaA,KAAK,IAAIqzL,WAAW,CAACC,IAAlC;AAEA;;AAEDD,WAAW,CAACC,IAAZ,GAAmB,MAAnB;AACAD,WAAW,CAACE,MAAZ,GAAqB,QAArB;AACAF,WAAW,CAACG,MAAZ,GAAqB,QAArB;AAEAH,WAAW,CAAC10L,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAxB;AACA00L,WAAW,CAAC10L,SAAZ,CAAsBoC,WAAtB,GAAoCsyL,WAApC;AACAA,WAAW,CAAC10L,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEA4I,WAAW,CAAC10L,SAAZ,CAAsBosL,SAAtB,GAAkC,UAAWhC,OAAX,EAAqB;AAEtD,SAAO,CAAEA,OAAO,CAACnyJ,OAAR,CAAgB68J,UAAzB;AAEA,CAJD;;AAMAJ,WAAW,CAAC10L,SAAZ,CAAsBgrL,OAAtB,GAAgC;AAAW;AAAgB;AAE1D,UAAS,KAAK3pL,KAAd;AAEC,SAAKqzL,WAAW,CAACE,MAAjB;AAEC,aAAO,IAAP;AAJF;;AAQA,SAAO,KAAKvpL,IAAZ;AAEA,CAZD;;AAcAqpL,WAAW,CAAC10L,SAAZ,CAAsBswK,QAAtB,GAAiC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE7D,MAAIktK,QAAQ,GAAG,KAAKC,SAAL,CAAgBhC,OAAhB,CAAf;;AAEA,MAAKA,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,QAAIrqL,MAAJ;;AAEA,YAAS,KAAK1B,KAAd;AAEC,WAAKqzL,WAAW,CAACG,MAAjB;AAEC,YAAIE,cAAc,GAAG,IAAIR,sBAAJ,CAAgBA,uBAAWH,IAA3B,CAArB;AACA,YAAIY,aAAa,GAAG5K,OAAO,CAACnyJ,OAAR,CAAgB+pB,SAApC;AAEA,YAAI8yI,UAAU,GAAGC,cAAc,CAACzK,KAAf,CAAsBF,OAAtB,EAA+B,IAA/B,CAAjB;AACA,YAAI6K,YAAY,GAAG,IAAIhB,0BAAJ,CAAkBA,2BAAaG,IAA/B,EAAsC9J,KAAtC,CAA6CF,OAA7C,EAAsD,IAAtD,CAAnB;AACA,YAAIpoI,SAAS,GAAGgzI,aAAa,GAAGA,aAAa,CAAC1K,KAAd,CAAqBF,OAArB,EAA8B,GAA9B,CAAH,GAAyCnoL,SAAtE;AAEA,YAAI+Y,MAAM,GAAI,wBAAuBi6K,YAAa,OAAMH,UAAW,IAAnE;;AAEA,YAAK9yI,SAAL,EAAiB;AAEhB;AACAhnC,UAAAA,MAAM,GAAI,mBAAkBA,MAAO,KAAI85K,UAAW,KAAI9yI,SAAU,MAAKA,SAAU,MAA/E;AAEA;;AAED,YAAI6oI,IAAI,GAAI,8BAA6B7vK,MAAO,gBAAhD;;AAEA,YAAKmxK,QAAL,EAAgB;AAEf/B,UAAAA,OAAO,CAACqC,WAAR,CAAsB,qBAAoB5B,IAAK,GAA/C;AAEA9nL,UAAAA,MAAM,GAAG,YAAT;AAEA,SAND,MAMO;AAENA,UAAAA,MAAM,GAAG8nL,IAAT;AAEA;;AAED;;AAED,WAAK6J,WAAW,CAACC,IAAjB;AAEC,YAAIO,UAAU,GAAG,IAAIR,WAAJ,CAAiBA,WAAW,CAACG,MAA7B,EAAsCvK,KAAtC,CAA6CF,OAA7C,EAAsD,IAAtD,CAAjB;AAEA,YAAIS,IAAI,GAAG,YAAYqK,UAAZ,GAAyB,MAAzB,GAAkCA,UAAlC,GAA+C,OAA1D;;AAEA,YAAK/I,QAAL,EAAgB;AAEf/B,UAAAA,OAAO,CAACqC,WAAR,CAAsB,yBAAwB5B,IAAK,GAAnD;AAEA9nL,UAAAA,MAAM,GAAG,gBAAT;AAEA,SAND,MAMO;AAENA,UAAAA,MAAM,GAAG8nL,IAAT;AAEA;;AAED;;AAED,WAAK6J,WAAW,CAACE,MAAjB;AAEC,YAAIM,UAAU,GAAG,IAAIR,WAAJ,CAAiBA,WAAW,CAACG,MAA7B,EAAsCvK,KAAtC,CAA6CF,OAA7C,EAAsD,IAAtD,CAAjB;AAEA,YAAIS,IAAI,GAAG,qCAAqCqK,UAArC,GAAkD,wDAA7D;;AAEA,YAAK/I,QAAL,EAAgB;AAEf/B,UAAAA,OAAO,CAACqC,WAAR,CAAsB,2BAA0B5B,IAAK,GAArD;AAEA9nL,UAAAA,MAAM,GAAG,kBAAT;AAEA,SAND,MAMO;AAENA,UAAAA,MAAM,GAAG8nL,IAAT;AAEA;;AAED;AA1EF;;AA8EA,WAAOT,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,GApFD,MAoFO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,8CAA8Cw6J,OAAO,CAACxvH,MAAtD,GAA+D,UAA7E;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKztB,IAApC,EAA0C4T,MAA1C,CAAP;AAEA;AAED,CAhGD;;AAkGAy1K,WAAW,CAAC10L,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChvC,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAOgvC,IAAP;AAEA,CAdD;;;;;;;;;AC1IA;;AACA;;AACA;;AACA;;AAPA;;;AASA,SAAS8kJ,eAAT,CAA0B7wL,KAA1B,EAAiCo2B,EAAjC,EAAqC8vD,IAArC,EAA4C;AAE3CuiG,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB,EAA4B;AAAEyrL,IAAAA,MAAM,EAAE;AAAV,GAA5B;;AAEA,OAAK1nL,KAAL,GAAaA,KAAb;AACA,OAAKo2B,EAAL,GAAUA,EAAE,IAAI,IAAIg6J,wBAAJ,EAAhB;AACA,OAAKlqG,IAAL,GAAYA,IAAZ;AAEA;;AAED2qG,eAAe,CAACn1L,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAA5B;AACAm1L,eAAe,CAACn1L,SAAhB,CAA0BoC,WAA1B,GAAwC+yL,eAAxC;AACAA,eAAe,CAACn1L,SAAhB,CAA0B8rL,QAA1B,GAAqC,aAArC;;AAEAqJ,eAAe,CAACn1L,SAAhB,CAA0B+gI,UAA1B,GAAuC,UAAWqpD,OAAX,EAAoBnrK,MAApB,EAA6B;AAEnE,SAAO8tK,qBAAU/sL,SAAV,CAAoBswK,QAApB,CAA6B/vK,IAA7B,CAAmC,IAAnC,EAAyC6pL,OAAzC,EAAkDnrK,MAAlD,EAA0D,KAAK3a,KAAL,CAAW2oB,IAArE,EAA2E,IAA3E,CAAP;AAEA,CAJD;;AAMAkoK,eAAe,CAACn1L,SAAhB,CAA0BswK,QAA1B,GAAqC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEjE,MAAKA,MAAM,KAAK,aAAhB,EAAgC;AAE/B,WAAO,KAAK8hH,UAAL,CAAiBqpD,OAAjB,EAA0BnrK,MAA1B,CAAP;AAEA;;AAED,MAAIm2K,OAAO,GAAG,KAAKr0D,UAAL,CAAiBqpD,OAAjB,EAA0BnrK,MAA1B,CAAd;AACA,MAAIyb,EAAE,GAAG,KAAKA,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,IAAxB,CAAT;AACA,MAAI5/F,IAAI,GAAG,KAAKA,IAAL,GAAY,KAAKA,IAAL,CAAU8/F,KAAV,CAAiBF,OAAjB,EAA0B,GAA1B,CAAZ,GAA8CnoL,SAAzD;;AAEA,MAAKuoF,IAAI,KAAKvoF,SAAT,IAAsBmoL,OAAO,CAACnyJ,OAAR,CAAgBuyD,IAA3C,EAAkD;AAEjDA,IAAAA,IAAI,GAAG4/F,OAAO,CAACnyJ,OAAR,CAAgBuyD,IAAhB,CAAqB4qE,UAArB,CAAiC,IAAjC,EAAwCk1B,KAAxC,CAA+CF,OAA/C,EAAwD,GAAxD,CAAP;AAEA;;AAED,MAAIS,IAAJ;AAEA,MAAKrgG,IAAL,EAAYqgG,IAAI,GAAG,kBAAkBuK,OAAlB,GAA4B,IAA5B,GAAmC16J,EAAnC,GAAwC,IAAxC,GAA+C8vD,IAA/C,GAAsD,IAA7D,CAAZ,KACKqgG,IAAI,GAAG,cAAcuK,OAAd,GAAwB,IAAxB,GAA+B16J,EAA/B,GAAoC,IAA3C,CArB4D,CAuBjE;AACA;AACA;AACA;AACA;;AACA,MAAIzC,OAAO,GAAG;AAAE2nD,IAAAA,OAAO,EAAEwqG,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAX;AAAyCb,IAAAA,WAAW,EAAE;AAAtD,GAAd;AACA,MAAIiH,UAAU,GAAG,KAAKxI,OAAL,CAAcZ,OAAd,CAAjB;AAEAA,EAAAA,OAAO,CAAC0J,UAAR,CAAoB77J,OAApB;AAEA,OAAK87J,UAAL,GAAkB,KAAKA,UAAL,IAAmB,IAAIrC,8BAAJ,CAAoB,IAAI3B,8BAAJ,CAAoB,EAApB,EAAwByD,UAAxB,CAApB,CAArC;AACA,OAAKO,UAAL,CAAgBJ,YAAhB,CAA8BvJ,OAAO,CAACpkG,yBAAR,CAAmC,KAAK1hF,KAAxC,CAA9B;AACA,OAAKyvL,UAAL,CAAgBzpB,KAAhB,CAAsBnzJ,KAAtB,CAA6B0zK,IAA7B;AAEAA,EAAAA,IAAI,GAAG,KAAKkJ,UAAL,CAAgBzJ,KAAhB,CAAuBF,OAAvB,EAAgCoJ,UAAhC,CAAP,CArCiE,CAuCjE;;AAEApJ,EAAAA,OAAO,CAAC4J,aAAR;AAEA,SAAO5J,OAAO,CAACtxJ,MAAR,CAAgB+xJ,IAAhB,EAAsB2I,UAAtB,EAAkCv0K,MAAlC,CAAP;AAEA,CA7CD;;AA+CAk2K,eAAe,CAACn1L,SAAhB,CAA0BswB,IAA1B,GAAiC,UAAWpR,MAAX,EAAoB;AAEpD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,MAAKA,MAAM,CAAC5a,KAAZ,EAAoB,KAAKA,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEpB,OAAKo2B,EAAL,GAAUxb,MAAM,CAACwb,EAAjB;AAEA,MAAKxb,MAAM,CAACsrE,IAAZ,EAAmB,KAAKA,IAAL,GAAYtrE,MAAM,CAACsrE,IAAnB;AAEnB,SAAO,IAAP;AAEA,CAZD;;AAcA2qG,eAAe,CAACn1L,SAAhB,CAA0Bg6B,MAA1B,GAAmC,UAAWC,IAAX,EAAkB;AAEpD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW2oB,IAAxB;AACAojB,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AAEA,QAAK,KAAKu9D,IAAV,EAAiBn6C,IAAI,CAACm6C,IAAL,GAAY,KAAKA,IAAL,CAAUxwD,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEjB;;AAED,SAAOojB,IAAP;AAEA,CAjBD;;;;;;;;;ACtFA;;AAJA;;;AAMA,SAASglJ,YAAT,CAAuB/1L,CAAvB,EAA0BD,CAA1B,EAA6Bi2L,EAA7B,EAAkC;AAEjCvJ,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAKjB,CAAL,GAASA,CAAT;AACA,OAAKD,CAAL,GAASA,CAAT;AACA,OAAKi2L,EAAL,GAAUA,EAAV;AAEA;;AAEDD,YAAY,CAACtwB,GAAb,GAAmB,GAAnB;AACAswB,YAAY,CAACE,GAAb,GAAmB,GAAnB;AACAF,YAAY,CAACG,GAAb,GAAmB,GAAnB;AACAH,YAAY,CAACI,GAAb,GAAmB,GAAnB;AAEAJ,YAAY,CAACr1L,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAzB;AACAq1L,YAAY,CAACr1L,SAAb,CAAuBoC,WAAvB,GAAqCizL,YAArC;AACAA,YAAY,CAACr1L,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;;AAEAuJ,YAAY,CAACr1L,SAAb,CAAuBgrL,OAAvB,GAAiC,UAAWZ,OAAX,EAAqB;AAErD,MAAI9qL,CAAC,GAAG,KAAKA,CAAL,CAAO0rL,OAAP,CAAgBZ,OAAhB,CAAR;AAAA,MACC/qL,CAAC,GAAG,KAAKA,CAAL,CAAO2rL,OAAP,CAAgBZ,OAAhB,CADL;;AAGA,MAAKA,OAAO,CAACsL,YAAR,CAAsBp2L,CAAtB,CAAL,EAAiC;AAEhC,WAAO,IAAP;AAEA,GAJD,MAIO,IAAK8qL,OAAO,CAACoB,aAAR,CAAuBnsL,CAAvB,IAA6B+qL,OAAO,CAACoB,aAAR,CAAuBlsL,CAAvB,CAAlC,EAA+D;AAErE;AAEA,WAAOD,CAAP;AAEA;;AAED,SAAOC,CAAP;AAEA,CAnBD;;AAqBA+1L,YAAY,CAACr1L,SAAb,CAAuBswK,QAAvB,GAAkC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE9D,MAAI5T,IAAI,GAAG,KAAK2/K,OAAL,CAAcZ,OAAd,CAAX;AAEA,MAAI9qL,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuB/+K,IAAvB,CAAR;AAAA,MACChM,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuB/+K,IAAvB,CADL;AAGA,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,OAAOx5B,CAAP,GAAW,GAAX,GAAiB,KAAKg2L,EAAtB,GAA2B,GAA3B,GAAiCj2L,CAAjC,GAAqC,IAArD,EAA2DgM,IAA3D,EAAiE4T,MAAjE,CAAP;AAEA,CATD;;AAWAo2K,YAAY,CAACr1L,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5f,CAAL,GAAS4f,MAAM,CAAC5f,CAAhB;AACA,OAAKD,CAAL,GAAS6f,MAAM,CAAC7f,CAAhB;AACA,OAAKi2L,EAAL,GAAUp2K,MAAM,CAACo2K,EAAjB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYAD,YAAY,CAACr1L,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/wC,CAAL,GAAS,KAAKA,CAAL,CAAO06B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AACAojB,IAAAA,IAAI,CAAChxC,CAAL,GAAS,KAAKA,CAAL,CAAO26B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AACAojB,IAAAA,IAAI,CAACilJ,EAAL,GAAU,KAAKA,EAAf;AAEA;;AAED,SAAOjlJ,IAAP;AAEA,CAhBD;;;;;;;;;ACjEA;;AAJA;;;AAMA,SAASslJ,QAAT,CAAmBr2L,CAAnB,EAAsBs2L,SAAtB,EAAiCC,SAAjC,EAA4C76K,MAA5C,EAAqD;AAEpD+wK,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAKjB,CAAL,GAASA,CAAT;AACA,SAAOs2L,SAAP,KAAqB,QAArB,GAAgC,KAAKv2L,CAAL,GAASu2L,SAAzC,GAAqD56K,MAAM,GAAG46K,SAA9D;AACA,SAAOC,SAAP,KAAqB,QAArB,GAAgC,KAAK9xL,CAAL,GAAS8xL,SAAzC,GAAqD76K,MAAM,GAAG66K,SAA9D;AAEA,OAAK76K,MAAL,GAAcA,MAAd;AAEA,EAED;;;AAEA26K,QAAQ,CAACG,GAAT,GAAe,SAAf;AACAH,QAAQ,CAACI,GAAT,GAAe,SAAf;AACAJ,QAAQ,CAACK,GAAT,GAAe,KAAf;AACAL,QAAQ,CAACM,IAAT,GAAgB,MAAhB;AACAN,QAAQ,CAACO,GAAT,GAAe,KAAf;AACAP,QAAQ,CAAC7H,IAAT,GAAgB,MAAhB;AACA6H,QAAQ,CAACQ,IAAT,GAAgB,MAAhB;AACAR,QAAQ,CAACS,QAAT,GAAoB,aAApB;AACAT,QAAQ,CAACU,KAAT,GAAiB,OAAjB;AACAV,QAAQ,CAACW,IAAT,GAAgB,MAAhB;AACAX,QAAQ,CAACY,SAAT,GAAqB,WAArB;AACAZ,QAAQ,CAACa,KAAT,GAAiB,OAAjB;AACAb,QAAQ,CAACc,QAAT,GAAoB,UAApB;AACAd,QAAQ,CAACe,GAAT,GAAe,KAAf;AACAf,QAAQ,CAACgB,GAAT,GAAe,KAAf;AACAhB,QAAQ,CAACiB,GAAT,GAAe,KAAf;AACAjB,QAAQ,CAACkB,IAAT,GAAgB,MAAhB;AACAlB,QAAQ,CAACmB,IAAT,GAAgB,MAAhB;AACAnB,QAAQ,CAACoB,MAAT,GAAkB,MAAlB;AACApB,QAAQ,CAACqB,GAAT,GAAe,KAAf;AACArB,QAAQ,CAACsB,IAAT,GAAgB,MAAhB;AACAtB,QAAQ,CAACuB,MAAT,GAAkB,QAAlB;AACAvB,QAAQ,CAACwB,MAAT,GAAkB,QAAlB;AACAxB,QAAQ,CAACyB,MAAT,GAAkB,QAAlB,EAEA;;AAEAzB,QAAQ,CAAC0B,GAAT,GAAe,KAAf;AACA1B,QAAQ,CAAC2B,GAAT,GAAe,KAAf;AACA3B,QAAQ,CAAC4B,GAAT,GAAe,KAAf;AACA5B,QAAQ,CAAC6B,IAAT,GAAgB,MAAhB;AACA7B,QAAQ,CAAChwB,OAAT,GAAmB,SAAnB;AACAgwB,QAAQ,CAAC8B,QAAT,GAAoB,UAApB;AACA9B,QAAQ,CAAC+B,GAAT,GAAe,KAAf;AACA/B,QAAQ,CAACgC,KAAT,GAAiB,OAAjB;AACAhC,QAAQ,CAACiC,GAAT,GAAe,KAAf,EAEA;;AAEAjC,QAAQ,CAACkC,GAAT,GAAe,KAAf;AACAlC,QAAQ,CAACmC,KAAT,GAAiB,OAAjB;AACAnC,QAAQ,CAACoC,OAAT,GAAmB,SAAnB;AACApC,QAAQ,CAACqC,UAAT,GAAsB,YAAtB;AACArC,QAAQ,CAACsC,WAAT,GAAuB,aAAvB;AAEAtC,QAAQ,CAAC31L,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAArB;AACA21L,QAAQ,CAAC31L,SAAT,CAAmBoC,WAAnB,GAAiCuzL,QAAjC;AACAA,QAAQ,CAAC31L,SAAT,CAAmB8rL,QAAnB,GAA8B,MAA9B;;AAEA6J,QAAQ,CAAC31L,SAAT,CAAmBk4L,YAAnB,GAAkC;AAAW;AAAc;AAE1D,UAAS,KAAKl9K,MAAd;AAEC,SAAK26K,QAAQ,CAACkC,GAAd;AACA,SAAKlC,QAAQ,CAACmC,KAAd;AACA,SAAKnC,QAAQ,CAACoC,OAAd;AACA,SAAKpC,QAAQ,CAACqC,UAAd;AACA,SAAKrC,QAAQ,CAACsC,WAAd;AAEC,aAAO,CAAP;;AAED,SAAKtC,QAAQ,CAAC0B,GAAd;AACA,SAAK1B,QAAQ,CAAC2B,GAAd;AACA,SAAK3B,QAAQ,CAAC4B,GAAd;AACA,SAAK5B,QAAQ,CAAC6B,IAAd;AACA,SAAK7B,QAAQ,CAAChwB,OAAd;AACA,SAAKgwB,QAAQ,CAAC8B,QAAd;AACA,SAAK9B,QAAQ,CAAC+B,GAAd;AACA,SAAK/B,QAAQ,CAACgC,KAAd;AACA,SAAKhC,QAAQ,CAACiC,GAAd;AAEC,aAAO,CAAP;;AAED;AAEC,aAAO,CAAP;AAxBF;AA4BA,CA9BD;;AAgCAjC,QAAQ,CAAC31L,SAAT,CAAmBm4L,YAAnB,GAAkC,UAAW/N,OAAX,EAAqB;AAEtD,MAAI9qL,CAAC,GAAG8qL,OAAO,CAACoB,aAAR,CAAuB,KAAKlsL,CAAL,CAAO0rL,OAAP,CAAgBZ,OAAhB,CAAvB,CAAR;AACA,MAAI/qL,CAAC,GAAG,KAAKA,CAAL,GAAS+qL,OAAO,CAACoB,aAAR,CAAuB,KAAKnsL,CAAL,CAAO2rL,OAAP,CAAgBZ,OAAhB,CAAvB,CAAT,GAA8D,CAAtE;AACA,MAAIrmL,CAAC,GAAG,KAAKA,CAAL,GAASqmL,OAAO,CAACoB,aAAR,CAAuB,KAAKznL,CAAL,CAAOinL,OAAP,CAAgBZ,OAAhB,CAAvB,CAAT,GAA8D,CAAtE;;AAEA,MAAK9qL,CAAC,GAAGD,CAAJ,IAASC,CAAC,GAAGyE,CAAlB,EAAsB;AAErB,WAAO,KAAKzE,CAAL,CAAO0rL,OAAP,CAAgBZ,OAAhB,CAAP;AAEA,GAJD,MAIO,IAAK/qL,CAAC,GAAG0E,CAAT,EAAa;AAEnB,WAAO,KAAK1E,CAAL,CAAO2rL,OAAP,CAAgBZ,OAAhB,CAAP;AAEA;;AAED,SAAO,KAAKrmL,CAAL,CAAOinL,OAAP,CAAgBZ,OAAhB,CAAP;AAEA,CAlBD;;AAoBAuL,QAAQ,CAAC31L,SAAT,CAAmBgrL,OAAnB,GAA6B,UAAWZ,OAAX,EAAqB;AAEjD,UAAS,KAAKpvK,MAAd;AAEC,SAAK26K,QAAQ,CAACuB,MAAd;AACA,SAAKvB,QAAQ,CAAC8B,QAAd;AACA,SAAK9B,QAAQ,CAAC+B,GAAd;AAEC,aAAO,GAAP;;AAED,SAAK/B,QAAQ,CAACgC,KAAd;AAEC,aAAO,IAAP;AAVF;;AAcA,SAAO,KAAKQ,YAAL,CAAmB/N,OAAnB,CAAP;AAEA,CAlBD;;AAoBAuL,QAAQ,CAAC31L,SAAT,CAAmBswK,QAAnB,GAA8B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE1D,MAAI3f,CAAJ;AAAA,MAAOD,CAAP;AAAA,MAAU0E,CAAV;AAAA,MACCq0L,EAAE,GAAG,KAAK94L,CAAL,GAAS8qL,OAAO,CAACoB,aAAR,CAAuB,KAAKlsL,CAAL,CAAO0rL,OAAP,CAAgBZ,OAAhB,CAAvB,CAAT,GAA8D,CADpE;AAAA,MAECiO,EAAE,GAAG,KAAKh5L,CAAL,GAAS+qL,OAAO,CAACoB,aAAR,CAAuB,KAAKnsL,CAAL,CAAO2rL,OAAP,CAAgBZ,OAAhB,CAAvB,CAAT,GAA8D,CAFpE;AAAA,MAGCkO,EAAE,GAAG,KAAKv0L,CAAL,GAASqmL,OAAO,CAACoB,aAAR,CAAuB,KAAKznL,CAAL,CAAOinL,OAAP,CAAgBZ,OAAhB,CAAvB,CAAT,GAA8D,CAHpE;AAAA,MAICmO,SAAS,GAAG,KAAKJ,YAAL,CAAmB/N,OAAnB,CAJb;AAAA,MAKC0B,QAAQ,GAAG,KAAKd,OAAL,CAAcZ,OAAd,CALZ;;AAOA,UAAS,KAAKpvK,MAAd;AAEC;AAEA,SAAK26K,QAAQ,CAACwB,MAAd;AAEC,aAAO/M,OAAO,CAACtxJ,MAAR,CAAgB,QAAQ,KAAKx5B,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAR,GAA6C,IAA7D,EAAmEA,SAAnE,EAA8Et5K,MAA9E,CAAP;;AAED,SAAK02K,QAAQ,CAACyB,MAAd;AAEC,aAAOhN,OAAO,CAACtxJ,MAAR,CAAgB,aAAa,KAAKx5B,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAb,GAAkD,IAAlE,EAAwEA,SAAxE,EAAmFt5K,MAAnF,CAAP;AAEA;;AAED,SAAK02K,QAAQ,CAACgC,KAAd;AAECr4L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuB,IAAvB,CAAJ;AACA/qL,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuB,IAAvB,CAAJ;AAEA;;AAED,SAAKuL,QAAQ,CAAC6B,IAAd;AAECl4L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBgO,EAAE,KAAK,CAAP,GAAW,GAAX,GAAiBG,SAAxC,CAAJ;AACAl5L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AAEA;;AAED,SAAK5C,QAAQ,CAAC0B,GAAd;AACA,SAAK1B,QAAQ,CAAC2B,GAAd;AACA,SAAK3B,QAAQ,CAAC4B,GAAd;AAECj4L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACAl5L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuBiO,EAAE,KAAK,CAAP,GAAW,GAAX,GAAiBE,SAAxC,CAAJ;AAEA;AAEA;;AAED,SAAK5C,QAAQ,CAACoC,OAAd;AAECz4L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACAl5L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACAx0L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOumL,KAAP,CAAcF,OAAd,EAAuB,GAAvB,CAAJ;AAEA;;AAED,SAAKuL,QAAQ,CAACkC,GAAd;AAECv4L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACAl5L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACAx0L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOumL,KAAP,CAAcF,OAAd,EAAuBkO,EAAE,KAAK,CAAP,GAAW,GAAX,GAAiBC,SAAxC,CAAJ;AAEA;AAEA;;AAED;AAECj5L,MAAAA,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACA,UAAK,KAAKl5L,CAAV,EAAcA,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AACd,UAAK,KAAKx0L,CAAV,EAAcA,CAAC,GAAG,KAAKA,CAAL,CAAOumL,KAAP,CAAcF,OAAd,EAAuBmO,SAAvB,CAAJ;AAEd;AA/DF,GAT0D,CA4E1D;;;AAEA,MAAIrwL,MAAM,GAAG,EAAb;AACAA,EAAAA,MAAM,CAACmC,IAAP,CAAa/K,CAAb;AACA,MAAKD,CAAL,EAAS6I,MAAM,CAACmC,IAAP,CAAahL,CAAb;AACT,MAAK0E,CAAL,EAASmE,MAAM,CAACmC,IAAP,CAAatG,CAAb;AAET,MAAIy0L,SAAS,GAAG,KAAKN,YAAL,CAAmB9N,OAAnB,CAAhB;;AAEA,MAAKliL,MAAM,CAACrI,MAAP,KAAkB24L,SAAvB,EAAmC;AAElC,UAAMh0L,KAAK,CAAG,gCAA+B,KAAKwW,MAAO,cAAaw9K,SAAU,eAActwL,MAAM,CAACrI,MAAO,GAAjG,CAAX;AAEA;;AAED,SAAOuqL,OAAO,CAACtxJ,MAAR,CAAgB,KAAK9d,MAAL,GAAc,IAAd,GAAqB9S,MAAM,CAACoC,IAAP,CAAa,IAAb,CAArB,GAA2C,IAA3D,EAAiEwhL,QAAjE,EAA2E7sK,MAA3E,CAAP;AAEA,CA7FD;;AA+FA02K,QAAQ,CAAC31L,SAAT,CAAmBswB,IAAnB,GAA0B,UAAWpR,MAAX,EAAoB;AAE7C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5f,CAAL,GAAS4f,MAAM,CAAC5f,CAAhB;AACA,OAAKD,CAAL,GAAS6f,MAAM,CAAC7f,CAAhB;AACA,OAAK0E,CAAL,GAASmb,MAAM,CAACnb,CAAhB;AACA,OAAKiX,MAAL,GAAckE,MAAM,CAAClE,MAArB;AAEA,SAAO,IAAP;AAEA,CAXD;;AAaA26K,QAAQ,CAAC31L,SAAT,CAAmBg6B,MAAnB,GAA4B,UAAWC,IAAX,EAAkB;AAE7C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/wC,CAAL,GAAS,KAAKA,CAAL,CAAO06B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AACA,QAAK,KAAK5tB,CAAV,EAAcgxC,IAAI,CAAChxC,CAAL,GAAS,KAAKA,CAAL,CAAO26B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AACd,QAAK,KAAKlpB,CAAV,EAAcssC,IAAI,CAACtsC,CAAL,GAAS,KAAKA,CAAL,CAAOi2B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AAEdojB,IAAAA,IAAI,CAACr1B,MAAL,GAAc,KAAKA,MAAnB;AAEA;;AAED,SAAOq1B,IAAP;AAEA,CAlBD;;;;;;;;;ACrPA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAbA;;;AAeA,SAASooJ,iBAAT,CAA4Bn0L,KAA5B,EAAmCo2B,EAAnC,EAAuC8vD,IAAvC,EAA8C;AAE7CuhG,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK+D,KAAL,GAAaA,KAAb,EACA,KAAKo2B,EAAL,GAAUA,EADV;AAEA,OAAK8vD,IAAL,GAAYA,IAAZ;AAEA;;AAEDiuG,iBAAiB,CAAC7G,KAAlB,GAA4B,YAAY;AAEvC,MAAI8G,iBAAiB,GAAG,IAAItK,sBAAJ,CACtB;;;;;;IADsB,CAAxB;AASA,MAAIuK,kBAAkB,GAAG,IAAIlL,oBAAJ,CAAgB,8BAAhB,EAA+C,IAA/C,CAAzB;AACA,MAAImL,kBAAkB,GAAG,IAAInL,oBAAJ,CAAgB,8BAAhB,EAA+C,IAA/C,CAAzB;AACA,MAAIoL,kBAAkB,GAAG,IAAIpL,oBAAJ,CAAgB,gCAAhB,EAAiD,IAAjD,CAAzB;AACA,MAAIqL,kBAAkB,GAAG,IAAIrL,oBAAJ,CAAgB,+BAAhB,EAAgD,IAAhD,CAAzB,CAduC,CAgBvC;AACA;AACA;;AAEA,MAAIsL,OAAO,GAAG,IAAI5J,0BAAJ,CACZ;;;;;;;;;;;;;;;IADY,CAAd;AAiBA4J,EAAAA,OAAO,CAACxJ,WAAR,GAAsB,KAAtB;AAEA,MAAI/zI,KAAK,GAAG,IAAI2zI,0BAAJ,CACV;;;;;;;;;;;;;;;;IADU,CAAZ;AAkBA3zI,EAAAA,KAAK,CAAC+zI,WAAN,GAAoB,KAApB;AAEA,MAAIyJ,cAAc,GAAG,IAAI7J,0BAAJ,CACnB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IADmB,EAkChB,CAAEuJ,iBAAF,EAAqBK,OAArB,EAA8Bv9I,KAA9B,EAAqCm9I,kBAArC,EAAyDC,kBAAzD,EAA6EC,kBAA7E,EAAiGC,kBAAjG,CAlCgB,CAArB;AAmCAE,EAAAA,cAAc,CAACzJ,WAAf,GAA6B,KAA7B,CA9FuC,CAgGvC;;AAEA,MAAI0J,EAAE,GAAG,IAAIxL,oBAAJ,CAAgB,cAAhB,EAA+B,IAA/B,CAAT;AACA,MAAI54I,EAAE,GAAG,IAAI44I,oBAAJ,CAAgB,gBAAhB,EAAiC,IAAjC,CAAT;AACA,MAAIyL,EAAE,GAAG,IAAIzL,oBAAJ,CAAgB,eAAhB,EAAgC,IAAhC,CAAT;AACA,MAAI0L,EAAE,GAAG,IAAI1L,oBAAJ,CAAgB,cAAhB,EAA+B,IAA/B,CAAT;AACA,MAAIh7J,EAAE,GAAG,IAAIg7J,oBAAJ,CAAgB,gBAAhB,EAAiC,IAAjC,CAAT;AACA,MAAI2L,EAAE,GAAG,IAAI3L,oBAAJ,CAAgB,eAAhB,EAAgC,IAAhC,CAAT;AACA,MAAI4L,EAAE,GAAG,IAAI5L,oBAAJ,CAAgB,cAAhB,EAA+B,IAA/B,CAAT;AACA,MAAI6L,EAAE,GAAG,IAAI7L,oBAAJ,CAAgB,gBAAhB,EAAiC,IAAjC,CAAT;AACA,MAAI8L,EAAE,GAAG,IAAI9L,oBAAJ,CAAgB,cAAhB,EAA+B,IAA/B,CAAT;AACA,MAAI+L,EAAE,GAAG,IAAI/L,oBAAJ,CAAgB,gBAAhB,EAAiC,IAAjC,CAAT;AACA,MAAIgM,EAAE,GAAG,IAAIhM,oBAAJ,CAAgB,gBAAhB,EAAiC,IAAjC,CAAT;AACA,MAAIiM,EAAE,GAAG,IAAIjM,oBAAJ,CAAgB,cAAhB,EAA+B,IAA/B,CAAT;AACA,MAAIkM,EAAE,GAAG,IAAIlM,oBAAJ,CAAgB,eAAhB,EAAgC,IAAhC,CAAT;AACA,MAAImM,EAAE,GAAG,IAAInM,oBAAJ,CAAgB,iBAAhB,EAAkC,IAAlC,CAAT;AACA,MAAIoM,EAAE,GAAG,IAAIpM,oBAAJ,CAAgB,cAAhB,EAA+B,IAA/B,CAAT;AAEA,MAAI52H,OAAO,GAAG,CAAEoiI,EAAF,EAAMpkJ,EAAN,EAAUqkJ,EAAV,EAAcC,EAAd,EAAkB1mK,EAAlB,EAAsB2mK,EAAtB,EAA0BC,EAA1B,EAA8BC,EAA9B,EAAkCC,EAAlC,EAAsCC,EAAtC,EAA0CC,EAA1C,EAA8CC,EAA9C,EAAkDC,EAAlD,EAAsDC,EAAtD,EAA0DC,EAA1D,CAAd;AAEA,MAAIC,cAAc,GAAG,IAAI3K,0BAAJ,CACnB;;;;;;;;;;;;;;IADmB,EAehBt4H,OAfgB,CAArB;AAiBA,SAAO;AACNmiI,IAAAA,cAAc,EAAEA,cADV;AAENc,IAAAA,cAAc,EAAEA,cAFV;AAGNZ,IAAAA,EAAE,EAAEA,EAHE;AAINP,IAAAA,kBAAkB,EAAEA;AAJd,GAAP;AAOA,CA5IyB,EAA1B;;AA8IAF,iBAAiB,CAACz4L,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA9B;AACAy4L,iBAAiB,CAACz4L,SAAlB,CAA4BoC,WAA5B,GAA0Cq2L,iBAA1C;AACAA,iBAAiB,CAACz4L,SAAlB,CAA4B8rL,QAA5B,GAAuC,eAAvC;;AAEA2M,iBAAiB,CAACz4L,SAAlB,CAA4Bg5L,cAA5B,GAA6C,UAAW5O,OAAX,EAAoBztJ,OAApB,EAA6BjC,EAA7B,EAAiCq/J,MAAjC,EAA0C;AAEtF,MAAIf,cAAc,GAAG,IAAIhJ,kCAAJ,CAAsByI,iBAAiB,CAAC7G,KAAlB,CAAwBoH,cAA9C,EAA8D,CAAEr8J,OAAF,EAAWjC,EAAX,EAAeq/J,MAAf,CAA9D,CAArB;AAEA,OAAKC,YAAL,GAAoB,KAAKA,YAAL,IAAqB,IAAItI,8BAAJ,CAAoB,IAAI3B,8BAAJ,CAAoB,EAApB,EAAwB,IAAxB,CAApB,CAAzC;AACA,OAAKiK,YAAL,CAAkBrG,YAAlB,CAAgCvJ,OAAO,CAACpkG,yBAAR,CAAmC,KAAK1hF,KAAL,CAAWA,KAA9C,CAAhC;AACA,OAAK01L,YAAL,CAAkB1vB,KAAlB,CAAwBnzJ,KAAxB,CAA+B6hL,cAAc,CAAC1O,KAAf,CAAsBF,OAAtB,IAAkC,KAAjE;AAEA,OAAK6P,YAAL,GAAoB,KAAKA,YAAL,IAAqB,IAAIvI,8BAAJ,CAAoB,IAAI3B,8BAAJ,CAAoB,EAApB,EAAwB,IAAxB,CAApB,CAAzC;AACA,OAAKkK,YAAL,CAAkBtG,YAAlB,CAAgCvJ,OAAO,CAACpkG,yBAAR,CAAmC,KAAK1hF,KAAL,CAAWA,KAA9C,CAAhC;AACA,OAAK21L,YAAL,CAAkB3vB,KAAlB,CAAwBnzJ,KAAxB,CAA+B6hL,cAAc,CAAC1O,KAAf,CAAsBF,OAAtB,IAAkC,KAAjE;AAEA,OAAK8P,YAAL,GAAoB,KAAKA,YAAL,IAAqB,IAAIxI,8BAAJ,CAAoB,IAAI3B,8BAAJ,CAAoB,EAApB,EAAwB,IAAxB,CAApB,CAAzC;AACA,OAAKmK,YAAL,CAAkBvG,YAAlB,CAAgCvJ,OAAO,CAACpkG,yBAAR,CAAmC,KAAK1hF,KAAL,CAAWA,KAA9C,CAAhC;AACA,OAAK41L,YAAL,CAAkB5vB,KAAlB,CAAwBnzJ,KAAxB,CAA+B6hL,cAAc,CAAC1O,KAAf,CAAsBF,OAAtB,IAAkC,KAAjE;AAEA,OAAK+P,YAAL,GAAoB,KAAKA,YAAL,IAAqB,IAAIzI,8BAAJ,CAAoB,IAAI3B,8BAAJ,CAAoB,EAApB,EAAwB,IAAxB,CAApB,CAAzC;AACA,OAAKoK,YAAL,CAAkBxG,YAAlB,CAAgCvJ,OAAO,CAACpkG,yBAAR,CAAmC,KAAK1hF,KAAL,CAAWA,KAA9C,CAAhC;AACA,OAAK61L,YAAL,CAAkB7vB,KAAlB,CAAwBnzJ,KAAxB,CAA+B6hL,cAAc,CAAC1O,KAAf,CAAsBF,OAAtB,IAAkC,KAAjE,EAlBsF,CAoBtF;AACA;AACA;AACA;AACA;;AACA,MAAInyJ,OAAO,GAAG;AAAE2nD,IAAAA,OAAO,EAAEwqG,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAX;AAAyCb,IAAAA,WAAW,EAAE;AAAtD,GAAd;AAEAnC,EAAAA,OAAO,CAAC0J,UAAR,CAAoB77J,OAApB;AAEA,OAAKmiK,eAAL,GAAuB,IAAIrK,8BAAJ,CAAoB,KAAKiK,YAAL,CAAkB1P,KAAlB,CAAyBF,OAAzB,EAAkC,IAAlC,CAApB,EAA8D,IAA9D,CAAvB;AACA,OAAKiQ,eAAL,GAAuB,IAAItK,8BAAJ,CAAoB,KAAKkK,YAAL,CAAkB3P,KAAlB,CAAyBF,OAAzB,EAAkC,IAAlC,CAApB,EAA8D,IAA9D,CAAvB;AACA,OAAKkQ,eAAL,GAAuB,IAAIvK,8BAAJ,CAAoB,KAAKmK,YAAL,CAAkB5P,KAAlB,CAAyBF,OAAzB,EAAkC,IAAlC,CAApB,EAA8D,IAA9D,CAAvB;AACA,OAAKmQ,eAAL,GAAuB,IAAIxK,8BAAJ,CAAoB,KAAKoK,YAAL,CAAkB7P,KAAlB,CAAyBF,OAAzB,EAAkC,IAAlC,CAApB,EAA8D,IAA9D,CAAvB,CAhCsF,CAkCtF;;AAEAA,EAAAA,OAAO,CAAC4J,aAAR,GApCsF,CAsCtF;;AAEA,MAAI/0K,MAAM,GAAG,IAAI8wK,8BAAJ,CAAqB,qGAArB,EAA2H,IAA3H,CAAb;AACA9wK,EAAAA,MAAM,CAAC2vK,QAAP,CAAiB,WAAjB,IAAiC,KAAKwL,eAAtC;AACAn7K,EAAAA,MAAM,CAAC2vK,QAAP,CAAiB,WAAjB,IAAiC,KAAKyL,eAAtC;AACAp7K,EAAAA,MAAM,CAAC2vK,QAAP,CAAiB,WAAjB,IAAiC,KAAK0L,eAAtC;AACAr7K,EAAAA,MAAM,CAAC2vK,QAAP,CAAiB,WAAjB,IAAiC,KAAK2L,eAAtC;AACAt7K,EAAAA,MAAM,CAAC2vK,QAAP,CAAiB,QAAjB,IAA8BoK,cAA9B;AAEA,SAAO/5K,MAAP;AAEA,CAjDD;;AAmDAw5K,iBAAiB,CAACz4L,SAAlB,CAA4BswK,QAA5B,GAAuC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEnE,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,QAAI1yJ,EAAE,GAAG,KAAKA,EAAd;AACA,QAAI8vD,IAAI,GAAG,KAAKA,IAAL,IAAa4/F,OAAO,CAACnyJ,OAAR,CAAgB+pB,SAAxC;AAEA,QAAIw4I,IAAI,GAAG,IAAIxK,kCAAJ,CAAsByI,iBAAiB,CAAC7G,KAAlB,CAAwBkI,cAA9C,EAA8D,CAAEtvG,IAAF,CAA9D,CAAX;AACA,QAAIiwG,GAAG,GAAG,IAAI9E,kBAAJ,CAAc6E,IAAd,EAAoB/B,iBAAiB,CAAC7G,KAAlB,CAAwBsH,EAA5C,EAAgDT,iBAAiB,CAAC7G,KAAlB,CAAwB+G,kBAAxE,EAA4FhD,mBAASmC,KAArG,CAAV;AACA,QAAIiC,MAAM,GAAG,IAAIpE,kBAAJ,CAAc8E,GAAd,EAAmB9E,mBAASU,KAA5B,CAAb;AACA,QAAIqE,IAAI,GAAG,IAAI/E,kBAAJ,CAAc8E,GAAd,EAAmB9E,mBAASa,KAA5B,CAAX;AAEA,QAAImE,MAAM,GAAG,KAAK3B,cAAL,CAAqB5O,OAArB,EAA8B,KAAK9lL,KAAnC,EAA0Co2B,EAA1C,EAA8Cq/J,MAA9C,CAAb;AACA,QAAIl7I,MAAM,GAAG,KAAKm6I,cAAL,CAAqB5O,OAArB,EAA8B,KAAK9lL,KAAnC,EAA0Co2B,EAA1C,EAA8C,IAAI26J,0BAAJ,CAC1D0E,MAD0D,EAE1D,IAAItI,oBAAJ,CAAe,CAAf,EAAmBxE,WAAnB,CAAgC,IAAhC,CAF0D,EAG1DoI,2BAAatwB,GAH6C,CAA9C,CAAb;AAMA,QAAI61B,SAAS,GAAG,IAAIjF,kBAAJ,CAAcgF,MAAd,EAAsB97I,MAAtB,EAA8B67I,IAA9B,EAAoC/E,mBAASkC,GAA7C,CAAhB;AAEA;;;;;;;;;;;AAWA,WAAOzN,OAAO,CAACtxJ,MAAR,CAAgB8hK,SAAS,CAACtQ,KAAV,CAAiBF,OAAjB,CAAhB,EAA4C,IAA5C,EAAkDnrK,MAAlD,CAAP;AAEA,GAhCD,MAgCO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,oDAAoDw6J,OAAO,CAACxvH,MAA5D,GAAqE,UAAnF;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKkyJ,OAAL,CAAcZ,OAAd,CAA/B,EAAwDnrK,MAAxD,CAAP;AAEA;AAED,CA1CD;;AA4CAw5K,iBAAiB,CAACz4L,SAAlB,CAA4Bg6B,MAA5B,GAAqC,UAAWC,IAAX,EAAkB;AAEtD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AACAojB,IAAAA,IAAI,CAACm6C,IAAL,GAAY,KAAKA,IAAL,CAAUxwD,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAhBD;;;;;;;;;ACtQA;;AACA;;AACA;;AACA;;AACA;;AARA;;;AAUA,SAASwqJ,eAAT,CAA0Bv2L,KAA1B,EAAiCo2B,EAAjC,EAAqC8vD,IAArC,EAA4C;AAE3CuhG,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK+D,KAAL,GAAaA,KAAb;AAEA,OAAKw2L,YAAL,GAAoB,IAAIrC,oCAAJ,CACnB,KAAKn0L,KADc,EAEnBo2B,EAAE,IAAI,IAAIg6J,wBAAJ,CAAiBA,yBAAYG,MAA7B,CAFa,EAGnB;AACArqG,EAAAA,IAJmB,CAApB;AAOA,OAAKuwG,cAAL,GAAsB,IAAItC,oCAAJ,CACrB,KAAKn0L,KADgB,EAErB,IAAIiwL,sBAAJ,CAAgBA,uBAAWJ,KAA3B,CAFqB,EAGrB,IAAI1C,oBAAJ,CAAe,CAAf,EAAmBxE,WAAnB,CAAgC,IAAhC,CAHqB,CAAtB;AAMA;;AAED4N,eAAe,CAAC76L,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA5B;AACA66L,eAAe,CAAC76L,SAAhB,CAA0BoC,WAA1B,GAAwCy4L,eAAxC;AACAA,eAAe,CAAC76L,SAAhB,CAA0B8rL,QAA1B,GAAqC,aAArC;;AAEA+O,eAAe,CAAC76L,SAAhB,CAA0BswK,QAA1B,GAAqC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEjE,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErChD,IAAAA,OAAO,CAAC4Q,OAAR,CAAiB,YAAjB;;AAEA,QAAK5Q,OAAO,CAACnyJ,OAAR,CAAgBuyD,IAArB,EAA4B;AAE3B4/F,MAAAA,OAAO,CAACnyJ,OAAR,CAAgBuyD,IAAhB,CAAqB4qE,UAArB,CAAiC,KAAK9wJ,KAAtC;AAEA;;AAED,QAAI22L,SAAS,GAAG7Q,OAAO,CAAC3yF,IAAR,KAAiB,YAAjB,GAAgC,KAAKsjG,cAArC,GAAsD,KAAKD,YAA3E;AAEA,WAAOG,SAAS,CAAC3Q,KAAV,CAAiBF,OAAjB,EAA0BnrK,MAA1B,CAAP;AAEA,GAdD,MAcO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,kDAAkDw6J,OAAO,CAACxvH,MAA1D,GAAmE,UAAjF;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKkyJ,OAAL,CAAcZ,OAAd,CAA/B,EAAwDnrK,MAAxD,CAAP;AAEA;AAED,CAxBD;;AA0BA47K,eAAe,CAAC76L,SAAhB,CAA0BswB,IAA1B,GAAiC,UAAWpR,MAAX,EAAoB;AAEpD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAu2L,eAAe,CAAC76L,SAAhB,CAA0Bg6B,MAA1B,GAAmC,UAAWC,IAAX,EAAkB;AAEpD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;ACnEA;;AASA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAxBA;;;AA2BA,IAAInf,QAAQ,GAAGm/J,qBAAUn/J,QAAzB;AAAA,IACCgqK,YAAY,GAAG,CAAE,OAAF,EAAW,MAAX,EAAmB,MAAnB,EAA2B,MAA3B,CADhB;AAAA,IAECC,mBAAmB,GAAG;AACrBC,EAAAA,KAAK,EAAE,GADc;AAErBC,EAAAA,IAAI,EAAE,IAFe;AAGrBC,EAAAA,IAAI,EAAE,IAHe;AAIrBC,EAAAA,IAAI,EAAE,IAJe;AAKrBC,EAAAA,IAAI,EAAE,IALe;AAMrBC,EAAAA,GAAG,EAAE,GANgB;AAOrB5xL,EAAAA,IAAI,EAAE;AAPe,CAFvB;AAAA,IAWC6xL,mBAAmB,GAAG;AACrB53L,EAAAA,CAAC,EAAE,WADkB;AAErB63L,EAAAA,EAAE,EAAE,aAFiB;AAGrBt8L,EAAAA,CAAC,EAAE,MAHkB;AAIrB6B,EAAAA,CAAC,EAAE,KAJkB;AAKrByC,EAAAA,CAAC,EAAE,OALkB;AAMrBI,EAAAA,CAAC,EAAE,MANkB;AAOrB2uB,EAAAA,EAAE,EAAE,MAPiB;AAQrB4oG,EAAAA,EAAE,EAAE,MARiB;AASrBg+D,EAAAA,EAAE,EAAE,MATiB;AAUrBsC,EAAAA,EAAE,EAAE,MAViB;AAWrBrC,EAAAA,EAAE,EAAE;AAXiB,CAXvB;;AAyBA,SAASsC,WAAT,GAAuB;AAEtB,OAAKC,KAAL,GAAa,EAAb;AACA,OAAKC,MAAL,GAAc,EAAd;AACA,OAAKC,QAAL,GAAgB,EAAhB;AAEA,OAAKpN,QAAL,GAAgB,EAAhB;AAEA,OAAKqN,QAAL,GAAgB,EAAhB;AAEA,OAAK1K,QAAL,GAAgB;AACf72J,IAAAA,EAAE,EAAE,EADW;AAEf/7B,IAAAA,KAAK,EAAE,EAFQ;AAGfq4D,IAAAA,MAAM,EAAE,KAHO;AAIfvmB,IAAAA,GAAG,EAAE;AAJU,GAAhB;AAOA,OAAK2+I,QAAL,GAAgB;AACf8M,IAAAA,MAAM,EAAE,EADO;AAEfC,IAAAA,SAAS,EAAE,EAFI;AAGfC,IAAAA,OAAO,EAAE;AAHM,GAAhB;AAMA,OAAK/xI,UAAL,GAAkB,EAAlB;AAEA,OAAKgyI,UAAL,GAAkB,CACjB,wBADiB,EAGjB,0CAHiB,EAIjB,0DAJiB,EAMjB,sCANiB,EAOjB,sDAPiB,EASjB,OATiB,EAWjB,0CAXiB,EAYjB,oDAZiB,EAcjB,sCAdiB,EAejB,gDAfiB,EAiBjB,QAjBiB,EAmBjB,oBAnBiB,EAoBjB,mBApBiB,EAsBhB/xL,IAtBgB,CAsBV,IAtBU,CAAlB;AAwBA,OAAKgyL,QAAL,GAAgB;AACftrI,IAAAA,MAAM,EAAE,EADO;AAEfs8H,IAAAA,QAAQ,EAAE;AAFK,GAAhB;AAKA,OAAKzC,IAAL,GAAY;AACX75H,IAAAA,MAAM,EAAE,EADG;AAEXs8H,IAAAA,QAAQ,EAAE;AAFC,GAAZ;AAKA,OAAKiP,QAAL,GAAgB;AACfvrI,IAAAA,MAAM,EAAE,EADO;AAEfs8H,IAAAA,QAAQ,EAAE;AAFK,GAAhB;AAKA,OAAKkP,UAAL,GAAkB;AACjBxrI,IAAAA,MAAM,EAAE,EADS;AAEjBs8H,IAAAA,QAAQ,EAAE;AAFO,GAAlB;AAKA,OAAKmP,SAAL,GAAiB;AAChBzrI,IAAAA,MAAM,EAAE,EADQ;AAEhBs8H,IAAAA,QAAQ,EAAE;AAFM,GAAjB;AAKA,OAAKgB,MAAL,GAAc;AACb/3H,IAAAA,QAAQ,EAAE;AACT+xB,MAAAA,IAAI,EAAE,EADG;AAETt3B,MAAAA,MAAM,EAAE,EAFC;AAGTs8H,MAAAA,QAAQ,EAAE;AAHD,KADG;AAMboP,IAAAA,IAAI,EAAE;AACLzO,MAAAA,OAAO,EAAE,EADJ;AAELj9H,MAAAA,MAAM,EAAE,EAFH;AAGLs8H,MAAAA,QAAQ,EAAE;AAHL;AANO,GAAd,CA1EsB,CAuFtB;;AAEA,OAAKz2H,OAAL,GAAe,EAAf;AAEA,OAAKN,QAAL,GAAgB,EAAhB;AAEA,OAAKW,UAAL,GAAkB,EAAlB;AAEA,OAAKm0H,QAAL,GAAgB,EAAhB;AAEA,OAAKF,KAAL,GAAa,EAAb,CAjGsB,CAmGtB;;AAEA,OAAKd,SAAL,GAAiB,KAAjB;AAEA;;AAEDwR,WAAW,CAAC77L,SAAZ,GAAwB;AAEvBoC,EAAAA,WAAW,EAAEy5L,WAFU;AAIvBvR,EAAAA,KAAK,EAAE,UAAWt5H,MAAX,EAAmBs8H,QAAnB,EAA8B;AAEpC,SAAKqP,WAAL,CAAkB,QAAlB,EAA4B3rI,MAA5B;AACA,SAAK2rI,WAAL,CAAkB,UAAlB,EAA8BrP,QAA9B;;AAEA,SAAM,IAAIpsL,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKqwL,QAAL,CAAc72J,EAAd,CAAiB76B,MAAtC,EAA8CqB,CAAC,EAA/C,EAAqD;AAEpD,UAAK,KAAKqwL,QAAL,CAAc72J,EAAd,CAAkBx5B,CAAlB,CAAL,EAA6B;AAE5B,YAAIswL,OAAO,GAAGtwL,CAAC,GAAG,CAAJ,GAAQA,CAAC,GAAG,CAAZ,GAAgB,EAA9B;AAEA,aAAK07L,WAAL,CAAkB,qBAAqBpL,OAArB,GAA+B,GAAjD;;AAEA,YAAKtwL,CAAC,GAAG,CAAT,EAAa;AAEZ,eAAK27L,iBAAL,CAAwB,sBAAsBrL,OAAtB,GAAgC,GAAxD;AAEA;;AAED,aAAKsL,kBAAL,CAAyB,QAAQtL,OAAR,GAAkB,OAAlB,GAA4BA,OAA5B,GAAsC,GAA/D;AAEA;AAED;;AAED,QAAK,KAAKD,QAAL,CAAc5yL,KAAd,CAAqB,CAArB,CAAL,EAAgC;AAE/B,WAAKi+L,WAAL,CAAkB,sBAAlB;AACA,WAAKC,iBAAL,CAAwB,uBAAxB;AAEA,WAAKC,kBAAL,CAAyB,iBAAzB;AAEA;;AAED,QAAK,KAAKvL,QAAL,CAAc5yL,KAAd,CAAqB,CAArB,CAAL,EAAgC;AAE/B,WAAKi+L,WAAL,CAAkB,uBAAlB;AACA,WAAKC,iBAAL,CAAwB,wBAAxB;AAEA,WAAKC,kBAAL,CAAyB,mBAAzB;AAEA;;AAED,QAAK,KAAKvL,QAAL,CAAc7pL,QAAnB,EAA8B;AAE7B,WAAKk1L,WAAL,CAAkB,yBAAlB;AAEA,WAAKE,kBAAL,CAAyB,0BAAzB;AAEA;;AAED,QAAK,KAAKvL,QAAL,CAAc+C,aAAnB,EAAmC;AAElC,WAAKsI,WAAL,CAAkB,0BAAlB;AAEA,WAAKE,kBAAL,CAAyB,8DAAzB;AAEA;;AAED,QAAK,KAAKvL,QAAL,CAAc1tJ,MAAnB,EAA4B;AAE3B,WAAK+4J,WAAL,CAAkB,6BAAlB;AAEA,WAAKE,kBAAL,CAAyB,yBAAzB;AAEA;;AAED,QAAK,KAAKvL,QAAL,CAAckD,WAAnB,EAAiC;AAEhC,WAAKmI,WAAL,CAAkB,wBAAlB;AAEA,WAAKE,kBAAL,CAAyB,4EAAzB;AAEA;;AAED,WAAO,IAAP;AAEA,GAjFsB;AAmFvBH,EAAAA,WAAW,EAAE,UAAW/hI,MAAX,EAAmBnhD,IAAnB,EAA0B;AAEtC,SAAK+iL,UAAL,CAAiB5hI,MAAjB,IAA4BnhD,IAAI,CAAC6wK,KAAL,CAAY,KAAKyS,SAAL,CAAgBniI,MAAhB,CAAZ,EAAsC,IAAtC,CAA5B;AAEA,GAvFsB;AAyFvB+4B,EAAAA,WAAW,EAAE,UAAW3jD,QAAX,EAAqB+pB,QAArB,EAAgC;AAE5C,SAAK/pB,QAAL,GAAgBA,QAAhB;AACA,SAAK+pB,QAAL,GAAgBA,QAAhB;AAEA,SAAKw3H,QAAL,CAAcv6H,MAAd,GAAuBhnB,QAAQ,CAACgnB,MAAhC;AACA,SAAKu6H,QAAL,CAAc9gJ,GAAd,GAAoBT,QAAQ,CAACS,GAA7B;AAEA,SAAKusJ,YAAL,CAAmBhtJ,QAAQ,CAAC6mB,OAA5B;AAEA,WAAO,IAAP;AAEA,GArGsB;AAuGvB0zH,EAAAA,OAAO,EAAE,UAAW9yF,IAAX,EAAiBtnD,KAAjB,EAAwBlY,OAAxB,EAAkC;AAE1C,WAAO,KAAKglK,OAAL,CAAcxlG,IAAd,EAAqBylG,QAArB,CAA+B/sJ,KAA/B,EAAuC2jJ,UAAvC,CAAmD77J,OAAnD,CAAP;AAEA,GA3GsB;AA6GvByyJ,EAAAA,UAAU,EAAE,YAAY;AAEvB,WAAO,KAAKyS,UAAL,GAAkBC,WAAlB,GAAgCpJ,aAAhC,EAAP;AAEA,GAjHsB;AAmHvBkJ,EAAAA,QAAQ,EAAE,UAAW1mL,IAAX,EAAkB;AAE3B,SAAK25B,KAAL,GAAa35B,IAAI,IAAI,EAArB;AACA,SAAKulL,MAAL,CAAY1xL,IAAZ,CAAkB,KAAK8lC,KAAvB;AAEA,WAAO,IAAP;AAEA,GA1HsB;AA4HvBitJ,EAAAA,WAAW,EAAE,YAAY;AAExB,SAAKrB,MAAL,CAAY50G,GAAZ;AACA,SAAKh3C,KAAL,GAAa,KAAK4rJ,MAAL,CAAa,KAAKA,MAAL,CAAYl8L,MAAZ,GAAqB,CAAlC,KAAyC,EAAtD;AAEA,WAAO,IAAP;AAEA,GAnIsB;AAqIvBi0L,EAAAA,UAAU,EAAE,UAAW77J,OAAX,EAAqB;AAEhC,SAAKA,OAAL,GAAer3B,MAAM,CAACme,MAAP,CAAe,EAAf,EAAmB,KAAKkZ,OAAxB,EAAiCA,OAAjC,CAAf;AACA,SAAKA,OAAL,CAAa8yJ,KAAb,GAAqB,KAAK9yJ,OAAL,CAAa8yJ,KAAb,IAAsB,EAA3C;AAEA,SAAKiR,QAAL,CAAc3xL,IAAd,CAAoB,KAAK4tB,OAAzB;AAEA,WAAO,IAAP;AAEA,GA9IsB;AAgJvB+7J,EAAAA,aAAa,EAAE,YAAY;AAE1B,SAAKgI,QAAL,CAAc70G,GAAd;AACA,SAAKlvD,OAAL,GAAe,KAAK+jK,QAAL,CAAe,KAAKA,QAAL,CAAcn8L,MAAd,GAAuB,CAAtC,KAA6C,EAA5D;AAEA,WAAO,IAAP;AAEA,GAvJsB;AAyJvBo9L,EAAAA,OAAO,EAAE,UAAWzmL,IAAX,EAAkB;AAE1B,SAAKihF,IAAL,GAAYjhF,IAAI,IAAI,EAApB;AACA,SAAKslL,KAAL,CAAWzxL,IAAX,CAAiB,KAAKotF,IAAtB;AAEA,WAAO,IAAP;AAEA,GAhKsB;AAkKvB0lG,EAAAA,UAAU,EAAE,YAAY;AAEvB,SAAKrB,KAAL,CAAW30G,GAAX;AACA,SAAKsQ,IAAL,GAAY,KAAKqkG,KAAL,CAAY,KAAKA,KAAL,CAAWj8L,MAAX,GAAoB,CAAhC,KAAuC,EAAnD;AAEA,WAAO,IAAP;AAEA,GAzKsB;AA4KvBw9L,EAAAA,aAAa,EAAE,UAAWxS,IAAX,EAAkB;AAEhC,SAAKyS,OAAL,CAAczS,IAAd,EAAoB,QAApB;AAEA,GAhLsB;AAkLvB0S,EAAAA,eAAe,EAAE,UAAW1S,IAAX,EAAkB;AAElC,SAAKyS,OAAL,CAAczS,IAAd,EAAoB,UAApB;AAEA,GAtLsB;AAwLvByS,EAAAA,OAAO,EAAE,UAAWzS,IAAX,EAAiBjwH,MAAjB,EAA0B;AAElC,SAAKiwH,IAAL,CAAWjwH,MAAM,IAAI,KAAKA,MAA1B,KAAsCiwH,IAAI,GAAG,IAA7C;AAEA,GA5LsB;AA+LvB2S,EAAAA,iBAAiB,EAAE,UAAW3S,IAAX,EAAkB;AAEpC,SAAK4B,WAAL,CAAkB5B,IAAlB,EAAwB,QAAxB;AAEA,GAnMsB;AAqMvB4S,EAAAA,mBAAmB,EAAE,UAAW5S,IAAX,EAAkB;AAEtC,SAAK4B,WAAL,CAAkB5B,IAAlB,EAAwB,UAAxB;AAEA,GAzMsB;AA2MvB4B,EAAAA,WAAW,EAAE,UAAW5B,IAAX,EAAiBjwH,MAAjB,EAA0B;AAEtC,SAAK2hI,QAAL,CAAe3hI,MAAM,IAAI,KAAKA,MAA9B,KAA0CiwH,IAAI,GAAG,IAAjD;AAEA,GA/MsB;AAiNvBC,EAAAA,aAAa,EAAE,UAAWlwH,MAAX,EAAoB;AAElCA,IAAAA,MAAM,GAAGA,MAAM,IAAI,KAAKA,MAAxB;AAEA,QAAIiwH,IAAI,GAAG,KAAK0R,QAAL,CAAe3hI,MAAf,CAAX;AAEA,SAAK2hI,QAAL,CAAe3hI,MAAf,IAA0B,EAA1B;AAEA,WAAOiwH,IAAP;AAEA,GA3NsB;AA6NvBL,EAAAA,mBAAmB,EAAE,YAAa;AAEjC,WAAO,KAAKM,aAAL,CAAoB,QAApB,CAAP;AAEA,GAjOsB;AAmOvBL,EAAAA,qBAAqB,EAAE,YAAa;AAEnC,WAAO,KAAKK,aAAL,CAAoB,UAApB,CAAP;AAEA,GAvOsB;AAyOvBgS,EAAAA,kBAAkB,EAAE,UAAWjS,IAAX,EAAkB;AAErC,SAAK6S,YAAL,CAAmB7S,IAAnB,EAAyB,QAAzB;AAEA,GA7OsB;AA+OvB8S,EAAAA,oBAAoB,EAAE,UAAW9S,IAAX,EAAkB;AAEvC,SAAK6S,YAAL,CAAmB7S,IAAnB,EAAyB,UAAzB;AAEA,GAnPsB;AAqPvB6S,EAAAA,YAAY,EAAE,UAAW7S,IAAX,EAAiBjwH,MAAjB,EAA0B;AAEvC,SAAK6hI,SAAL,CAAgB7hI,MAAM,IAAI,KAAKA,MAA/B,KAA2CiwH,IAAI,GAAG,IAAlD;AAEA,GAzPsB;AA4PvBgS,EAAAA,iBAAiB,EAAE,UAAWhS,IAAX,EAAkB;AAEpC,SAAK+S,WAAL,CAAkB/S,IAAlB,EAAwB,QAAxB;AAEA,GAhQsB;AAkQvBgT,EAAAA,mBAAmB,EAAE,UAAWhT,IAAX,EAAkB;AAEtC,SAAK+S,WAAL,CAAkB/S,IAAlB,EAAwB,UAAxB;AAEA,GAtQsB;AAwQvB+S,EAAAA,WAAW,EAAE,UAAW/S,IAAX,EAAiBjwH,MAAjB,EAA0B;AAEtC,SAAK0hI,QAAL,CAAe1hI,MAAM,IAAI,KAAKA,MAA9B,KAA0CiwH,IAAI,GAAG,IAAjD;AAEA,GA5QsB;AA+QvB+R,EAAAA,WAAW,EAAE,UAAW/R,IAAX,EAAkB;AAE9B,SAAKgS,iBAAL,CAAwBhS,IAAxB;AACA,SAAKgT,mBAAL,CAA0BhT,IAA1B;AAEA,GApRsB;AAuRvBiT,EAAAA,OAAO,EAAE,UAAWtnL,IAAX,EAAkB;AAE1B,WAAO,KAAKulL,MAAL,CAAY3xL,OAAZ,CAAqBoM,IAArB,MAAgC,CAAE,CAAzC;AAEA,GA3RsB;AA6RvBunL,EAAAA,MAAM,EAAE,UAAWvnL,IAAX,EAAkB;AAEzB,WAAO,KAAKslL,KAAL,CAAW1xL,OAAX,CAAoBoM,IAApB,MAA+B,CAAE,CAAxC;AAEA,GAjSsB;AAmSvBwnL,EAAAA,MAAM,EAAE,UAAWxnL,IAAX,EAAiBlS,KAAjB,EAAyB;AAEhC,SAAKuyD,OAAL,CAAcrgD,IAAd,IAAuBlS,KAAK,KAAKrC,SAAV,GAAsB,CAAtB,GAA0BqC,KAAjD;AAEA,GAvSsB;AAySvB02L,EAAAA,OAAO,EAAE,UAAWxkL,IAAX,EAAkB;AAE1B,SAAK+6K,QAAL,CAAe/6K,IAAf,IAAwB,IAAxB;AAEA,GA7SsB;AA+SvBynL,EAAAA,SAAS,EAAE,UAAWznL,IAAX,EAAkB;AAE5B,WAAO,KAAKqgD,OAAL,CAAcrgD,IAAd,MAAyBvU,SAAhC;AAEA,GAnTsB;AAqTvBisL,EAAAA,MAAM,EAAE,UAAWjhK,IAAX,EAAiB5hB,IAAjB,EAAuB4gL,EAAvB,EAA2BrxH,MAAM,GAAG,SAApC,EAA+CspB,MAAM,GAAG,GAAxD,EAA6DyoG,KAAK,GAAG,EAArE,EAA0E;AAEjF,QAAI+P,IAAI,GAAG,KAAK7P,OAAL,CAAcjyH,MAAd,CAAX;AAAA,QACCvqB,IAAI,GAAGqsJ,IAAI,CAAEzvK,IAAF,CADZ;;AAGA,QAAK,CAAEojB,IAAP,EAAc;AAEb,UAAI5lC,KAAK,GAAGiyL,IAAI,CAAC78L,MAAjB;AAAA,UACC2W,IAAI,GAAGy1K,EAAE,GAAGA,EAAH,GAAQ,SAAS/nG,MAAT,GAAkBz5E,KAAlB,IAA4BkiL,KAAK,GAAG,MAAMA,KAAT,GAAiB,EAAlD,CADlB;AAGAt8I,MAAAA,IAAI,GAAG;AAAE75B,QAAAA,IAAI,EAAEA,IAAR;AAAcnL,QAAAA,IAAI,EAAEA;AAApB,OAAP;AAEAqxL,MAAAA,IAAI,CAACryL,IAAL,CAAWgmC,IAAX;AACAqsJ,MAAAA,IAAI,CAAEzvK,IAAF,CAAJ,GAAeojB,IAAf;AAEA;;AAED,WAAOA,IAAP;AAEA,GAxUsB;AA0UvBy8I,EAAAA,UAAU,EAAE,UAAW7/J,IAAX,EAAiB5hB,IAAjB,EAAuB4gL,EAAvB,EAA2BU,KAA3B,EAAmC;AAE9C,WAAO,KAAKuB,MAAL,CAAajhK,IAAb,EAAmB5hB,IAAnB,EAAyB4gL,EAAzB,EAA6B,KAAKrxH,MAAlC,EAA0C,GAA1C,EAA+C+xH,KAA/C,CAAP;AAEA,GA9UsB;AAgVvB/hI,EAAAA,YAAY,EAAE,UAAWp0C,IAAX,EAAiBnL,IAAjB,EAAwB;AAErC,QAAK,CAAE,KAAKg/C,UAAL,CAAiB7zC,IAAjB,CAAP,EAAiC;AAEhC,UAAIy3K,OAAO,GAAG,KAAKC,MAAL,CAAa13K,IAAb,EAAmBnL,IAAnB,CAAd;AAEA,WAAKwxL,iBAAL,CAAwB,eAAexxL,IAAf,GAAsB,GAAtB,GAA4BmL,IAA5B,GAAmC,GAA3D;AACA,WAAKsmL,kBAAL,CAAyB7O,OAAO,CAACz3K,IAAR,GAAe,KAAf,GAAuBA,IAAvB,GAA8B,GAAvD;AAEA,WAAK6zC,UAAL,CAAiB7zC,IAAjB,IAA0B;AAAEy3K,QAAAA,OAAO,EAAEA,OAAX;AAAoBz3K,QAAAA,IAAI,EAAEA,IAA1B;AAAgCnL,QAAAA,IAAI,EAAEA;AAAtC,OAA1B;AAEA;;AAED,WAAO,KAAKg/C,UAAL,CAAiB7zC,IAAjB,CAAP;AAEA,GA/VsB;AAiWvB0nL,EAAAA,OAAO,EAAE,UAAWtjI,MAAX,EAAoB;AAE5B,WAAO,CACN,KAAKyhI,UADC,EAEN,KAAKC,QAAL,CAAe1hI,MAAf,CAFM,EAGN,KAAKujI,cAAL,CAAqB,KAAKtR,OAAL,CAAc,SAAd,CAArB,EAAgD,SAAhD,CAHM,EAIN,KAAKsR,cAAL,CAAqB,KAAK7P,MAAL,CAAY/3H,QAAZ,CAAsBqE,MAAtB,CAArB,EAAqD,SAArD,CAJM,EAKN,KAAKwjI,eAAL,CAAsB,QAAtB,EAAgCxjI,MAAhC,CALM,EAMN,KAAKwjI,eAAL,CAAsB,SAAtB,EAAiCxjI,MAAjC,CANM,EAON,KAAKwjI,eAAL,CAAsB,WAAtB,EAAmCxjI,MAAnC,CAPM,EAQN,eARM,EASN,KAAKujI,cAAL,CAAqB,KAAKtR,OAAL,CAAcjyH,MAAd,CAArB,CATM,EAUN,KAAKiwH,IAAL,CAAWjwH,MAAX,CAVM,EAWN,KAAK4hI,UAAL,CAAiB5hI,MAAjB,CAXM,EAYN,KAAK6hI,SAAL,CAAgB7hI,MAAhB,CAZM,EAaN,GAbM,EAcLtwD,IAdK,CAcC,IAdD,CAAP;AAgBA,GAnXsB;AAqXvB6zL,EAAAA,cAAc,EAAE,UAAWzB,IAAX,EAAiBx4G,MAAjB,EAA0B;AAEzCA,IAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AAEA,QAAI2mG,IAAI,GAAG,EAAX;;AAEA,SAAM,IAAI3pL,CAAC,GAAG,CAAR,EAAWI,CAAC,GAAGo7L,IAAI,CAAC78L,MAA1B,EAAkCqB,CAAC,GAAGI,CAAtC,EAAyC,EAAGJ,CAA5C,EAAgD;AAE/C,UAAIm9L,IAAI,GAAG3B,IAAI,CAAEx7L,CAAF,CAAf;AAAA,UACCmK,IAAI,GAAGgzL,IAAI,CAAChzL,IADb;AAAA,UAECmL,IAAI,GAAG6nL,IAAI,CAAC7nL,IAFb;AAIA,UAAI8nL,UAAU,GAAG,KAAKC,eAAL,CAAsBlzL,IAAtB,CAAjB;;AAEA,UAAKizL,UAAU,KAAKr8L,SAApB,EAAgC;AAE/B,cAAM,IAAIuC,KAAJ,CAAW,eAAe85L,UAAf,GAA4B,aAAvC,CAAN;AAEA;;AAEDzT,MAAAA,IAAI,IAAI3mG,MAAM,GAAG,GAAT,GAAeo6G,UAAf,GAA4B,GAA5B,GAAkC9nL,IAAlC,GAAyC,KAAjD;AAEA;;AAED,WAAOq0K,IAAP;AAEA,GA/YsB;AAiZvBgC,EAAAA,OAAO,EAAE,UAAWjyH,MAAX,EAAoB;AAE5B,WAAO,KAAK0zH,MAAL,CAAYoO,IAAZ,CAAkB9hI,MAAM,IAAI,KAAKA,MAAjC,CAAP;AAEA,GArZsB;AAuZvBqwH,EAAAA,WAAW,EAAE,UAAWxxK,IAAX,EAAkB;AAE9B,QAAIwT,IAAI,GAAGxT,IAAI,CAACywK,MAAL,GAAczwK,IAAI,CAACwT,IAAnB,GAA0BxT,IAArC;AAEA,WAAO,KAAKwiL,QAAL,CAAehvK,IAAf,IAAwB,KAAKgvK,QAAL,CAAehvK,IAAf,KAAyB,EAAxD;AAEA,GA7ZsB;AA+ZvBuxK,EAAAA,aAAa,EAAE,UAAW5jI,MAAX,EAAmBvvD,IAAnB,EAAyBoO,IAAzB,EAA+BwyK,EAA/B,EAAmChhI,WAAnC,EAAgD0hI,KAAhD,EAAwD;AAEtE,QAAIp2H,QAAQ,GAAG,KAAK+3H,MAAL,CAAY/3H,QAA3B;AAAA,QACC9rD,KAAK,GAAG8rD,QAAQ,CAAC+xB,IAAT,CAAczoF,MADvB;AAGA,QAAI83D,OAAO,GAAG,IAAIu5H,wBAAJ,CAAiB;AAC9B7lL,MAAAA,IAAI,EAAEA,IADwB;AAE9BmL,MAAAA,IAAI,EAAEy1K,EAAE,GAAGA,EAAH,GAAQ,UAAUxhL,KAAV,IAAoBkiL,KAAK,GAAG,MAAMA,KAAT,GAAiB,EAA1C,CAFc;AAG9BlzK,MAAAA,IAAI,EAAEA,IAHwB;AAI9BwxC,MAAAA,WAAW,EAAEA;AAJiB,KAAjB,CAAd;AAOAsL,IAAAA,QAAQ,CAAC+xB,IAAT,CAAcj+E,IAAd,CAAoBstD,OAApB;AAEApB,IAAAA,QAAQ,CAAEqE,MAAF,CAAR,CAAmBvwD,IAAnB,CAAyBstD,OAAzB;AACApB,IAAAA,QAAQ,CAAEqE,MAAF,CAAR,CAAoBjD,OAAO,CAACnhD,IAA5B,IAAqCmhD,OAArC;AAEA,SAAKpB,QAAL,CAAeoB,OAAO,CAACnhD,IAAvB,IAAgCmhD,OAAhC;AAEA,WAAOA,OAAP;AAEA,GApbsB;AAsbvB01H,EAAAA,mBAAmB,EAAE,UAAWhiL,IAAX,EAAiBoO,IAAjB,EAAuBwyK,EAAvB,EAA2BhhI,WAA3B,EAAwC0hI,KAAxC,EAAgD;AAEpE,WAAO,KAAK6R,aAAL,CAAoB,QAApB,EAA8BnzL,IAA9B,EAAoCoO,IAApC,EAA0CwyK,EAA1C,EAA8ChhI,WAA9C,EAA2D0hI,KAA3D,CAAP;AAEA,GA1bsB;AA4bvBY,EAAAA,qBAAqB,EAAE,UAAWliL,IAAX,EAAiBoO,IAAjB,EAAuBwyK,EAAvB,EAA2BhhI,WAA3B,EAAwC0hI,KAAxC,EAAgD;AAEtE,WAAO,KAAK6R,aAAL,CAAoB,UAApB,EAAgCnzL,IAAhC,EAAsCoO,IAAtC,EAA4CwyK,EAA5C,EAAgDhhI,WAAhD,EAA6D0hI,KAA7D,CAAP;AAEA,GAhcsB;AAkcvB/sG,EAAAA,OAAO,EAAE,UAAWnmE,IAAX,EAAiB9D,MAAjB,EAAyBuJ,MAAzB,EAAkC;AAE1C,QAAIu/K,cAAJ;AAEAhlL,IAAAA,IAAI,GAAG,OAAOA,IAAP,KAAgB,QAAhB,GAA2Bk1K,iBAAQ7vK,GAAR,CAAarF,IAAb,CAA3B,GAAiDA,IAAxD;;AAEA,QAAK,KAAKwe,OAAL,CAAa2nD,OAAb,KAAyB,KAA9B,EAAsC;AAErC,aAAOnmE,IAAI,CAACjD,IAAZ;AAEA;;AAGD,QAAKiD,IAAI,YAAY01K,0BAArB,EAAoC;AAEnCsP,MAAAA,cAAc,GAAG,KAAKrP,QAAL,CAAc+M,SAA/B;AAEA,KAJD,MAIO,IAAK1iL,IAAI,YAAYg0K,oBAArB,EAAiC;AAEvCgR,MAAAA,cAAc,GAAG,KAAKrP,QAAL,CAAc8M,MAA/B;AAEA,KAJM,MAIA,IAAKziL,IAAI,YAAY20K,sBAArB,EAAkC;AAExCqQ,MAAAA,cAAc,GAAG,KAAKrP,QAAL,CAAcgN,OAA/B;AAEA;;AAED,QAAIhN,QAAQ,GAAGqP,cAAc,CAAE,KAAK7jI,MAAP,CAAd,GAAgC6jI,cAAc,CAAE,KAAK7jI,MAAP,CAAd,IAAiC,EAAhF;;AAEA,QAAKnhD,IAAL,EAAY;AAEX,UAAIilL,QAAQ,GAAGtP,QAAQ,CAAE31K,IAAI,CAACjD,IAAP,CAAvB;;AAEA,UAAK,CAAEkoL,QAAP,EAAkB;AAEjBA,QAAAA,QAAQ,GAAGtP,QAAQ,CAAE31K,IAAI,CAACjD,IAAP,CAAR,GAAwB;AAClCiD,UAAAA,IAAI,EAAEA,IAD4B;AAElC6xK,UAAAA,IAAI,EAAE;AAF4B,SAAnC;AAKA8D,QAAAA,QAAQ,CAAC/kL,IAAT,CAAeq0L,QAAf;AAEAA,QAAAA,QAAQ,CAAC7mK,GAAT,GAAepe,IAAI,CAAC6wK,KAAL,CAAY,IAAZ,EAAkB,QAAlB,CAAf;AAEA;;AAED,UAAK7wK,IAAI,YAAY01K,0BAAhB,IAAgCx5K,MAAhC,IAA0Cy5K,QAAQ,CAAEz5K,MAAM,CAACa,IAAT,CAAlD,IAAqE44K,QAAQ,CAAEz5K,MAAM,CAACa,IAAT,CAAR,CAAwB80K,IAAxB,CAA6BlhL,OAA7B,CAAsCqP,IAAtC,KAAgD,CAAE,CAA5H,EAAgI;AAE/H21K,QAAAA,QAAQ,CAAEz5K,MAAM,CAACa,IAAT,CAAR,CAAwB80K,IAAxB,CAA6BjhL,IAA7B,CAAmCoP,IAAnC;;AAEA,YAAKA,IAAI,CAAC21K,QAAL,IAAiB31K,IAAI,CAAC21K,QAAL,CAAcvvL,MAApC,EAA6C;AAE5C,cAAIqB,CAAC,GAAG,CAAR;;AAEA,aAAG;AAEF,iBAAK0+E,OAAL,CAAcnmE,IAAI,CAAC21K,QAAL,CAAeluL,CAAC,EAAhB,CAAd,EAAqCyU,MAArC;AAEA,WAJD,QAIUzU,CAAC,GAAGuY,IAAI,CAAC21K,QAAL,CAAcvvL,MAJ5B;AAMA;AAED;;AAED,UAAKqf,MAAL,EAAc;AAEbw/K,QAAAA,QAAQ,CAAC7mK,GAAT,GAAe3Y,MAAf;AAEA;;AAED,aAAOzF,IAAI,CAACjD,IAAZ;AAEA,KA3CD,MA2CO;AAEN,YAAM,IAAIhS,KAAJ,CAAW,oBAAX,CAAN;AAEA;AAED,GAhhBsB;AAkhBvBm6L,EAAAA,uBAAuB,EAAE,UAAWhgM,KAAX,EAAmB;AAE3C,WAAOA,KAAK,CAAC4L,OAAN,CAAe,GAAf,EAAoB,GAApB,EAA0BA,OAA1B,CAAmC,GAAnC,EAAwC,GAAxC,EAA8CA,OAA9C,CAAuD,GAAvD,EAA4D,GAA5D,EAAkEA,OAAlE,CAA2E,GAA3E,EAAgF,GAAhF,CAAP;AAEA,GAthBsB;AAwhBvBq0L,EAAAA,aAAa,EAAE,UAAWjgM,KAAX,EAAmB;AAEjC,WAAOA,KAAK,CAAC4L,OAAN,CAAe,IAAf,EAAqB,IAArB,CAAP;AAEA,GA5hBsB;AA8hBvBs0L,EAAAA,WAAW,EAAE,UAAWxzL,IAAX,EAAiBuvD,MAAjB,EAA0B;AAEtC,WAAO,KAAKw0H,QAAL,CAAe/jL,IAAf,EAAuBuvD,MAAM,IAAI,KAAKA,MAAtC,CAAP;AAEA,GAliBsB;AAoiBvBwjI,EAAAA,eAAe,EAAE,YAAY;AAE5B,aAASU,cAAT,CAAyBx/L,CAAzB,EAA4BD,CAA5B,EAAgC;AAE/B,aAAOC,CAAC,CAACgsL,IAAF,CAAOzrL,MAAP,GAAgBR,CAAC,CAACisL,IAAF,CAAOzrL,MAA9B;AAEA;;AAED,WAAO,SAASu+L,eAAT,CAA0B/yL,IAA1B,EAAgCuvD,MAAhC,EAAyC;AAE/C,UAAIw0H,QAAQ,GAAG,KAAKyP,WAAL,CAAkBxzL,IAAlB,EAAwBuvD,MAAxB,CAAf;AAEA,UAAK,CAAEw0H,QAAP,EAAkB,OAAO,EAAP;AAElB,UAAIvE,IAAI,GAAG,EAAX;AAAA,UACCuE,QAAQ,GAAGA,QAAQ,CAAC37H,IAAT,CAAeqrI,cAAf,CADZ;;AAGA,WAAM,IAAI59L,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGkuL,QAAQ,CAACvvL,MAA9B,EAAsCqB,CAAC,EAAvC,EAA6C;AAE5C,YAAKkuL,QAAQ,CAAEluL,CAAF,CAAR,CAAc22B,GAAnB,EAAyBgzJ,IAAI,IAAIuE,QAAQ,CAAEluL,CAAF,CAAR,CAAc22B,GAAd,GAAoB,IAA5B;AAEzB;;AAED,aAAOgzJ,IAAP;AAEA,KAjBD;AAmBA,GA3BgB,EApiBM;AAikBvB6D,EAAAA,wBAAwB,EAAE,UAAW7vJ,GAAX,EAAiB;AAE1C,WAAOq8J,YAAY,CAAEr8J,GAAG,GAAG,CAAR,CAAnB;AAEA,GArkBsB;AAukBvB62J,EAAAA,YAAY,EAAE,UAAW58J,MAAX,EAAoB;AAEjC,WAAO,KAAKp2B,IAAL,CAAWo2B,MAAX,CAAP;AAEA,GA3kBsB;AA6kBvB0yJ,EAAAA,aAAa,EAAE,UAAWngL,IAAX,EAAkB;AAEhC,QAAKA,IAAI,KAAK,GAAd,EAAoB,OAAO,CAAP;AAEpB,WAAOzI,QAAQ,CAAE,KAAKg8L,aAAL,CAAoBvzL,IAApB,EAA2BmrH,MAA3B,CAAmC,CAAnC,CAAF,CAAf;AAEA,GAnlBsB;AAqlBvBuoE,EAAAA,iBAAiB,EAAE,UAAWlgK,GAAX,EAAiB;AAEnC,QAAKA,GAAG,KAAK,CAAb,EAAiB,OAAO,GAAP;AAEjB,WAAO,MAAMA,GAAb;AAEA,GA3lBsB;AA6lBvB41G,EAAAA,QAAQ,EAAE,YAAY;AAErB,SAAM,IAAIvzI,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGV,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,EAAxC,EAA8C;AAE7C,UAAI89L,aAAa,GAAGx+L,SAAS,CAAEU,CAAF,CAA7B;;AAEA,UAAK89L,aAAa,KAAK/8L,SAAlB,IAA+B+8L,aAAa,CAAC9U,MAAlD,EAA2D;AAE1D,eAAO8U,aAAP;AAEA;AAED;AAED,GA3mBsB;AA6mBvBrrE,EAAAA,OAAO,EAAE,YAAY;AAEpB,SAAM,IAAIzyH,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGV,SAAS,CAACX,MAA/B,EAAuCqB,CAAC,EAAxC,EAA8C;AAE7C,UAAI89L,aAAa,GAAGx+L,SAAS,CAAEU,CAAF,CAA7B;;AAEA,UAAK89L,aAAa,KAAK/8L,SAAvB,EAAmC;AAElC,YAAK+8L,aAAa,CAAC9U,MAAnB,EAA4B;AAE3B,iBAAO8U,aAAP;AAEA,SAJD,MAIO,IAAKA,aAAa,CAACllK,SAAnB,EAA+B;AAErC,kBAASklK,aAAa,CAACvmK,OAAvB;AAEC,iBAAKlV,kCAAL;AACA,iBAAKC,kCAAL;AAEC,qBAAO,IAAI2xK,gCAAJ,CAAqB6J,aAArB,CAAP;AAEA;;AAED,iBAAKr7K,oCAAL;AACA,iBAAKC,oCAAL;AAEC,qBAAO,IAAIi3K,gCAAJ,CAAqB,IAAIjH,wBAAJ,CAAiBoL,aAAjB,CAArB,CAAP;AAEA;;AAED;AAEC,qBAAO,IAAIpL,wBAAJ,CAAiBoL,aAAjB,CAAP;AAlBF;AAsBA,SAxBM,MAwBA,IAAKA,aAAa,CAAClvK,SAAnB,EAA+B;AAErC,iBAAO,IAAIqhK,wBAAJ,CAAiB6N,aAAjB,CAAP;AAEA,SAJM,MAIA,IAAKA,aAAa,CAACr9J,SAAnB,EAA+B;AAErC,iBAAO,IAAIyvJ,wBAAJ,CAAiB4N,aAAjB,CAAP;AAEA,SAJM,MAIA,IAAKA,aAAa,CAACnkK,SAAnB,EAA+B;AAErC,iBAAO,IAAIw2J,wBAAJ,CAAiB2N,aAAjB,CAAP;AAEA;AAED;AAED;AAED,GAnqBsB;AAqqBvBlmK,EAAAA,MAAM,EAAE,UAAW+xJ,IAAX,EAAiB9jE,IAAjB,EAAuBC,EAAvB,EAA4B;AAEnC,QAAIi4E,UAAU,GAAG,KAAKL,aAAL,CAAoB53E,EAAE,GAAG,MAAL,GAAcD,IAAlC,CAAjB;;AAEA,YAASk4E,UAAT;AAEC,WAAK,SAAL;AAAiB,eAAOpU,IAAI,GAAG,IAAd;;AACjB,WAAK,SAAL;AAAiB,eAAOA,IAAI,GAAG,IAAd;;AACjB,WAAK,SAAL;AAAiB,eAAOA,IAAI,GAAG,IAAd;;AACjB,WAAK,QAAL;AACA,WAAK,QAAL;AAAgB,eAAO,YAAYA,IAAZ,GAAmB,IAA1B;;AAEhB,WAAK,SAAL;AAAiB,eAAO,WAAWA,IAAX,GAAkB,IAAzB;;AACjB,WAAK,UAAL;AAAiB,eAAOA,IAAI,GAAG,KAAd;;AACjB,WAAK,UAAL;AAAiB,eAAOA,IAAI,GAAG,KAAd;;AACjB,WAAK,SAAL;AACA,WAAK,SAAL;AAAiB,eAAO,kBAAkBA,IAAlB,GAAyB,MAAhC;;AAEjB,WAAK,SAAL;AAAiB,eAAO,WAAWA,IAAX,GAAkB,IAAzB;;AACjB,WAAK,UAAL;AAAiB,eAAO,WAAWA,IAAX,GAAkB,SAAzB;;AACjB,WAAK,UAAL;AAAiB,eAAOA,IAAI,GAAG,MAAd;;AACjB,WAAK,SAAL;AACA,WAAK,SAAL;AAAiB,eAAO,kBAAkBA,IAAlB,GAAyB,MAAhC;;AAEjB,WAAK,SAAL;AAAiB,eAAO,WAAWA,IAAX,GAAkB,IAAzB;;AACjB,WAAK,UAAL;AAAiB,eAAO,WAAWA,IAAX,GAAkB,cAAzB;;AACjB,WAAK,UAAL;AAAiB,eAAO,WAAWA,IAAX,GAAkB,SAAzB;;AACjB,WAAK,SAAL;AACA,WAAK,SAAL;AAAiB,eAAO,kBAAkBA,IAAlB,GAAyB,MAAhC;;AAEjB,WAAK,QAAL;AACA,WAAK,QAAL;AAAgB,eAAO,UAAUA,IAAV,GAAiB,IAAxB;;AAChB,WAAK,SAAL;AAAiB,eAAO,UAAUA,IAAV,GAAiB,MAAxB;;AACjB,WAAK,SAAL;AAAiB,eAAO,UAAUA,IAAV,GAAiB,MAAxB;;AACjB,WAAK,SAAL;AAAiB,eAAO,UAAUA,IAAV,GAAiB,MAAxB;;AAEjB,WAAK,QAAL;AAAgB,eAAO,OAAOA,IAAP,GAAc,WAArB;;AAChB,WAAK,SAAL;AAAiB,eAAO,OAAOA,IAAP,GAAc,mBAArB;;AACjB,WAAK,SAAL;AAAiB,eAAO,OAAOA,IAAP,GAAc,mBAArB;;AACjB,WAAK,SAAL;AAAiB,eAAO,OAAOA,IAAP,GAAc,mBAArB;;AACjB,WAAK,QAAL;AAAgB,eAAO,OAAOA,IAAP,GAAc,SAArB;AApCjB;;AAwCA,WAAOA,IAAP;AAEA,GAntBsB;AAqtBvBkD,EAAAA,eAAe,EAAE,UAAWj1J,MAAX,EAAoB;AAEpC,WAAOqiK,mBAAmB,CAAEriK,MAAF,CAAnB,IAAiCA,MAAxC;AAEA,GAztBsB;AA2tBvBylK,EAAAA,eAAe,EAAE,UAAWlzL,IAAX,EAAkB;AAElC,WAAOqwL,mBAAmB,CAAErwL,IAAF,CAAnB,IAA+BA,IAAtC;AAEA,GA/tBsB;AAiuBvBghL,EAAAA,OAAO,EAAE,UAAWp/J,IAAX,EAAiBq9E,QAAjB,EAA4B;AAEpCA,IAAAA,QAAQ,GAAGA,QAAQ,KAAKroG,SAAb,GAAyBqoG,QAAzB,GAAoC,IAA/C;AAEA,QAAKA,QAAQ,IAAI,KAAKn6D,KAAtB,EAA8BljB,IAAI,GAAG,KAAKkjB,KAAL,GAAa,GAAb,GAAmBljB,IAA1B;AAE9B,WAAOA,IAAP;AAEA,GAzuBsB;AA2uBvBiyK,EAAAA,iBAAiB,EAAE,UAAWz0L,KAAX,EAAmB;AAErC,WAAOymB,QAAQ,CAAEzmB,KAAF,CAAf;AAEA,GA/uBsB;AAivBvB00L,EAAAA,iBAAiB,EAAE,UAAWC,GAAX,EAAiB;AAEnC,WAAOluK,QAAQ,CAAC9mB,OAAT,CAAkBg1L,GAAlB,CAAP;AAEA,GArvBsB;AAuvBvBhS,EAAAA,QAAQ,EAAE,UAAWxyH,MAAX,EAAoB;AAE7B,WAAO,KAAKA,MAAL,KAAgBA,MAAvB;AAEA,GA3vBsB;AA6vBvBmiI,EAAAA,SAAS,EAAE,UAAWniI,MAAX,EAAoB;AAE9B,SAAKA,MAAL,GAAcA,MAAd;AAEA,WAAO,IAAP;AAEA,GAnwBsB;AAqwBvBoiI,EAAAA,YAAY,EAAE,UAAWnmI,OAAX,EAAqB;AAElC,SAAM,IAAIrgD,IAAV,IAAkBqgD,OAAlB,EAA4B;AAE3B,WAAKA,OAAL,CAAcrgD,IAAd,IAAuBqgD,OAAO,CAAErgD,IAAF,CAA9B;AAEA;;AAED,WAAO,KAAKqgD,OAAZ;AAEA,GA/wBsB;AAixBvBwoI,EAAAA,YAAY,EAAE,UAAW9oI,QAAX,EAAsB;AAEnC,SAAM,IAAI//C,IAAV,IAAkB+/C,QAAlB,EAA6B;AAE5B,WAAKA,QAAL,CAAe//C,IAAf,IAAwB+/C,QAAQ,CAAE//C,IAAF,CAAhC;AAEA;;AAED,WAAO,KAAK+/C,QAAZ;AAEA,GA3xBsB;AA6xBvByvB,EAAAA,yBAAyB,EAAE,UAAW55E,GAAX,EAAiB;AAE3C,QAAI4sB,QAAJ;;AAEA,QAAK,CAAE5sB,GAAP,EAAa;AAEZ4sB,MAAAA,QAAQ,GAAGtP,2BAAX;AAEA,KAJD,MAIO,IAAKtd,GAAG,CAAC0tB,SAAT,EAAqB;AAE3Bd,MAAAA,QAAQ,GAAG5sB,GAAG,CAAC4sB,QAAf;AAEA,KAJM,MAIA,IAAK5sB,GAAG,CAAC2wB,mBAAT,EAA+B;AAErCpN,MAAAA,OAAO,CAACC,IAAR,CAAc,2HAAd;AACAoJ,MAAAA,QAAQ,GAAG5sB,GAAG,CAACuwB,OAAJ,CAAY3D,QAAvB;AAEA;;AAED,QAAKA,QAAQ,KAAKtP,2BAAb,IAA+B,KAAKuO,OAAL,CAAa43I,KAAjD,EAAyD;AAExD72I,MAAAA,QAAQ,GAAGpP,0BAAX;AAEA;;AAED,WAAOoP,QAAP;AAEA;AAxzBsB,CAAxB;;;;;;;;;ACzJA;;AAJA;;;AAMA,SAASsmK,QAAT,CAAmBh7L,KAAnB,EAA2B;AAE1ByoL,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,GAAtB;;AAEA,OAAK+D,KAAL,GAAai7L,OAAO,CAAEj7L,KAAF,CAApB;AAEA;;AAEDg7L,QAAQ,CAACt/L,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAArB;AACAs/L,QAAQ,CAACt/L,SAAT,CAAmBoC,WAAnB,GAAiCk9L,QAAjC;AACAA,QAAQ,CAACt/L,SAAT,CAAmB8rL,QAAnB,GAA8B,MAA9B;;AAEAwT,QAAQ,CAACt/L,SAAT,CAAmBmtL,gBAAnB,GAAsC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA+D;AAEpG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,KAAKx0B,KAArB,EAA4B+G,IAA5B,EAAkC4T,MAAlC,CAAP;AAEA,CAJD;;AAMAqgL,QAAQ,CAACt/L,SAAT,CAAmBswB,IAAnB,GAA0B,UAAWpR,MAAX,EAAoB;AAE7C6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAg7L,QAAQ,CAACt/L,SAAT,CAAmBg6B,MAAnB,GAA4B,UAAWC,IAAX,EAAkB;AAE7C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAlB;AAEA,QAAK,KAAK0oL,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAhBD;;;;;;;;;AC9BA;;AAJA;;;AAMA,SAASmvJ,OAAT,CAAkBl7L,KAAlB,EAA0B;AAEzByoL,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,GAAtB;;AAEA,OAAK+D,KAAL,GAAapF,IAAI,CAACwE,KAAL,CAAYY,KAAK,IAAI,CAArB,CAAb;AAEA;;AAEDk7L,OAAO,CAACx/L,SAAR,GAAoBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAApB;AACAw/L,OAAO,CAACx/L,SAAR,CAAkBoC,WAAlB,GAAgCo9L,OAAhC;AACAA,OAAO,CAACx/L,SAAR,CAAkB8rL,QAAlB,GAA6B,KAA7B;;AAEA0T,OAAO,CAACx/L,SAAR,CAAkBmtL,gBAAlB,GAAqC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA+D;AAEnG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,KAAKx0B,KAArB,EAA4B+G,IAA5B,EAAkC4T,MAAlC,CAAP;AAEA,CAJD;;AAMAugL,OAAO,CAACx/L,SAAR,CAAkBswB,IAAlB,GAAyB,UAAWpR,MAAX,EAAoB;AAE5C6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAk7L,OAAO,CAACx/L,SAAR,CAAkBg6B,MAAlB,GAA2B,UAAWC,IAAX,EAAkB;AAE5C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAlB;AAEA,QAAK,KAAK0oL,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAhBD;;;;;;;;;AC9BA;;AAEA;;AACA;;AAPA;;;AASA,SAASovJ,SAAT,CAAoB9gM,KAApB,EAA2BS,CAA3B,EAA8BC,CAA9B,EAAkC;AAEjC0tL,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,GAAtB;;AAEA,OAAK+D,KAAL,GAAa3F,KAAK,YAAY4F,kBAAjB,GAAyB5F,KAAzB,GAAiC,IAAI4F,kBAAJ,CAAW5F,KAAK,IAAI,CAApB,EAAuBS,CAAvB,EAA0BC,CAA1B,CAA9C;AAEA;;AAEDogM,SAAS,CAACz/L,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAtB;AACAy/L,SAAS,CAACz/L,SAAV,CAAoBoC,WAApB,GAAkCq9L,SAAlC;AACAA,SAAS,CAACz/L,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEAuE,qBAAUC,YAAV,CAAwBmP,SAAS,CAACz/L,SAAlC,EAA6C,OAA7C,EAAsD,CAAE,GAAF,EAAO,GAAP,EAAY,GAAZ,CAAtD;;AAEAy/L,SAAS,CAACz/L,SAAV,CAAoBmtL,gBAApB,GAAuC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA+D;AAErG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,WAAW,KAAK75B,CAAhB,GAAoB,IAApB,GAA2B,KAAKG,CAAhC,GAAoC,IAApC,GAA2C,KAAKC,CAAhD,GAAoD,IAApE,EAA0EgM,IAA1E,EAAgF4T,MAAhF,CAAP;AAEA,CAJD;;AAMAwgL,SAAS,CAACz/L,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,CAAWgsB,IAAX,CAAiBpR,MAAjB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAugL,SAAS,CAACz/L,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACpxC,CAAL,GAAS,KAAKA,CAAd;AACAoxC,IAAAA,IAAI,CAACjxC,CAAL,GAAS,KAAKA,CAAd;AACAixC,IAAAA,IAAI,CAAChxC,CAAL,GAAS,KAAKA,CAAd;AAEA,QAAK,KAAK2tL,QAAL,KAAkB,IAAvB,EAA8B38I,IAAI,CAAC28I,QAAL,GAAgB,IAAhB;AAE9B;;AAED,SAAO38I,IAAP;AAEA,CAlBD;;;;;;;;;ACnCA;;AAEA;;AANA;;;AAQA,SAASqvJ,WAAT,CAAsBzpK,MAAtB,EAA+B;AAE9B82J,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB;;AAEA,OAAK+D,KAAL,GAAa2xB,MAAM,IAAI,IAAI9C,oBAAJ,EAAvB;AAEA;;AAEDusK,WAAW,CAAC1/L,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAxB;AACA0/L,WAAW,CAAC1/L,SAAZ,CAAsBoC,WAAtB,GAAoCs9L,WAApC;AACAA,WAAW,CAAC1/L,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;AAEAlrL,MAAM,CAACwV,gBAAP,CAAyBspL,WAAW,CAAC1/L,SAArC,EAAgD;AAE/CkxB,EAAAA,QAAQ,EAAE;AAETxB,IAAAA,GAAG,EAAE,UAAW9oB,GAAX,EAAiB;AAErB,WAAKtC,KAAL,CAAW4sB,QAAX,GAAsBtqB,GAAtB;AAEA,KANQ;AAQTkY,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKxa,KAAL,CAAW4sB,QAAlB;AAEA;AAZQ;AAFqC,CAAhD;;AAoBAwuK,WAAW,CAAC1/L,SAAZ,CAAsBmtL,gBAAtB,GAAyC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAI;AAAtC,EAA+D;AAEvG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,WAAW,KAAKx0B,KAAL,CAAW4sB,QAAX,CAAoB5mB,IAApB,CAA0B,IAA1B,CAAX,GAA8C,IAA9D,EAAoEe,IAApE,EAA0E4T,MAA1E,CAAP;AAEA,CAJD;;AAOAygL,WAAW,CAAC1/L,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK5a,KAAL,CAAWsuB,SAAX,CAAsB1T,MAAM,CAACgS,QAA7B;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAwuK,WAAW,CAAC1/L,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACnf,QAAL,GAAgB,KAAK5sB,KAAL,CAAW4sB,QAAX,CAAoBjV,MAApB,EAAhB;AAEA;;AAED,SAAOo0B,IAAP;AAEA,CAdD;;;;;;;;;ACrDA;;AAEA;;AANA;;;AAQA,SAASsvJ,WAAT,CAAsB1pK,MAAtB,EAA+B;AAE9B82J,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB,IAAtB;;AAEA,OAAK+D,KAAL,GAAa2xB,MAAM,IAAI,IAAI2O,oBAAJ,EAAvB;AAEA;;AAED+6J,WAAW,CAAC3/L,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAxB;AACA2/L,WAAW,CAAC3/L,SAAZ,CAAsBoC,WAAtB,GAAoCu9L,WAApC;AACAA,WAAW,CAAC3/L,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;AAEAlrL,MAAM,CAACwV,gBAAP,CAAyBupL,WAAW,CAAC3/L,SAArC,EAAgD;AAE/CkxB,EAAAA,QAAQ,EAAE;AAETxB,IAAAA,GAAG,EAAE,UAAW9oB,GAAX,EAAiB;AAErB,WAAKtC,KAAL,CAAW4sB,QAAX,GAAsBtqB,GAAtB;AAEA,KANQ;AAQTkY,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKxa,KAAL,CAAW4sB,QAAlB;AAEA;AAZQ;AAFqC,CAAhD;;AAoBAyuK,WAAW,CAAC3/L,SAAZ,CAAsBmtL,gBAAtB,GAAyC,UAAW/C,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAkC5hB;AAAK;AAAvC,EAAgE;AAExG,SAAO++K,OAAO,CAACtxJ,MAAR,CAAgB,WAAW,KAAKx0B,KAAL,CAAW4sB,QAAX,CAAoB5mB,IAApB,CAA0B,IAA1B,CAAX,GAA8C,IAA9D,EAAoEe,IAApE,EAA0E4T,MAA1E,CAAP;AAEA,CAJD;;AAMA0gL,WAAW,CAAC3/L,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK7d,KAAL,CAAWiD,KAAX,CAAiBsuB,SAAjB,CAA4B1T,MAAM,CAACgS,QAAnC;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAyuK,WAAW,CAAC3/L,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACnf,QAAL,GAAgB,KAAK5sB,KAAL,CAAW4sB,QAAX,CAAoBjV,MAApB,EAAhB;AAEA;;AAED,SAAOo0B,IAAP;AAEA,CAdD;;;;;;;;;ACpDA;;AACA;;AALA;;;AAOA,SAASuvJ,UAAT,CAAqBllK,EAArB,EAA0B;AAEzBk5J,2BAAYrzL,IAAZ,CAAkB,IAAlB,EAAwB0B,SAAxB,EAAmCy4B,EAAnC;AAEA;;AAEDklK,UAAU,CAAC5/L,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAe+5J,yBAAY5zL,SAA3B,CAAvB;AACA4/L,UAAU,CAAC5/L,SAAX,CAAqBoC,WAArB,GAAmCw9L,UAAnC;AACAA,UAAU,CAAC5/L,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEA8T,UAAU,CAAC5/L,SAAX,CAAqBosL,SAArB,GAAiC,YAAY;AAE5C,SAAO,IAAP;AAEA,CAJD;;AAMAwT,UAAU,CAAC5/L,SAAX,CAAqB+gI,UAArB,GAAkC,UAAWqpD,OAAX,EAAoBnrK,MAApB,EAA6B;AAE9D,SAAO8tK,qBAAU/sL,SAAV,CAAoBswK,QAApB,CAA6B/vK,IAA7B,CAAmC,IAAnC,EAAyC6pL,OAAzC,EAAkDnrK,MAAlD,EAA0D,KAAKotK,OAAL,EAA1D,EAA0E,GAA1E,EAA+E,eAA/E,CAAP;AAEA,CAJD;;;;;;;;;ACnBA;;AACA;;AACA;;AACA;;AACA;;AACA;;AATA;;;AAWA,SAASwT,aAAT,CAAwBC,MAAxB,EAAiC;AAEhC/T,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,MAAKu/L,MAAL,EAAc,KAAKC,SAAL,CAAgBD,MAAhB;AAEd;;AAEDD,aAAa,CAAC7/L,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA1B;AACA6/L,aAAa,CAAC7/L,SAAd,CAAwBoC,WAAxB,GAAsCy9L,aAAtC;AACAA,aAAa,CAAC7/L,SAAd,CAAwB8rL,QAAxB,GAAmC,WAAnC;;AAEA+T,aAAa,CAAC7/L,SAAd,CAAwB+/L,SAAxB,GAAoC,UAAWD,MAAX,EAAoB;AAEvD,OAAKA,MAAL,GAAcA,MAAd;AAEA,OAAKE,aAAL,GAAqB,IAAIL,wBAAJ,CAAiB,KAAKG,MAAL,CAAY9vJ,QAAZ,CAAqBumB,QAArB,CAA8BypI,aAA9B,CAA4C17L,KAA7D,CAArB;AAEA,OAAK27L,aAAL,GAAqB,IAAIhM,0BAAJ,CAAkBA,2BAAaC,KAA/B,CAArB;AAEA,OAAKx5J,EAAL,GAAU,IAAI26J,0BAAJ,CAAkB,KAAK2K,aAAvB,EAAsC,KAAKC,aAA3C,EAA0D5K,2BAAaG,GAAvE,CAAV;AACA,OAAK0K,QAAL,GAAgB,IAAI7K,0BAAJ,CAAkB,IAAlB,EAAwB,KAAK36J,EAA7B,EAAiC26J,2BAAatwB,GAA9C,CAAhB;AAEA,OAAKpoI,OAAL,GAAe,IAAIi3J,wBAAJ,CAAiB,KAAKkM,MAAL,CAAY9vJ,QAAZ,CAAqBumB,QAArB,CAA8B4pI,QAA9B,CAAuC77L,KAAxD,EAA+D,KAAKo2B,EAApE,EAAwE,IAAxE,EAA8E,IAA9E,CAAf;AAEA,CAbD;;AAeAmlK,aAAa,CAAC7/L,SAAd,CAAwBswK,QAAxB,GAAmC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE/D,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,SAAK8S,QAAL,CAAc5gM,CAAd,GAAkB,KAAK0L,MAAvB;AACA,SAAK2xB,OAAL,CAAajC,EAAb,GAAkB,KAAK1vB,MAAL,GAAc,KAAKk1L,QAAnB,GAA8B,KAAKxlK,EAArD;;AAEA,QAAKzb,MAAM,KAAK,WAAhB,EAA8B;AAE7B,aAAO,KAAK0d,OAAL,CAAa2tJ,KAAb,CAAoBF,OAApB,EAA6BnrK,MAA7B,CAAP;AAEA;;AAED,WAAOmrK,OAAO,CAACtxJ,MAAR,CAAgB,KAAK6D,OAAL,CAAa2tJ,KAAb,CAAoBF,OAApB,EAA6B,KAAK/+K,IAAlC,CAAhB,EAA0D,KAAKA,IAA/D,EAAqE4T,MAArE,CAAP;AAEA,GAbD,MAaO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,gDAAgDw6J,OAAO,CAACxvH,MAAxD,GAAiE,UAA/E;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKztB,IAApC,EAA0C4T,MAA1C,CAAP;AAEA;AAED,CAvBD;;AAyBA4gL,aAAa,CAAC7/L,SAAd,CAAwBswB,IAAxB,GAA+B,UAAWpR,MAAX,EAAoB;AAElD6tK,uBAAU/sL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK7d,KAAL,CAAWy+L,MAAX,GAAoB5gL,MAAM,CAAC4gL,MAA3B;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAD,aAAa,CAAC7/L,SAAd,CAAwBg6B,MAAxB,GAAiC,UAAWC,IAAX,EAAkB;AAElD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACyvJ,MAAL,GAAc,KAAKA,MAAL,CAAY7yK,IAA1B;AAEA,QAAK,KAAKjiB,MAAV,EAAmBqlC,IAAI,CAACrlC,MAAL,GAAc,KAAKA,MAAL,CAAYgvB,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEnB;;AAED,SAAOojB,IAAP;AAEA,CAhBD;;;;;;;;;ACrEA;;AAJA;;;AAMA,SAAS+vJ,YAAT,CAAuBz6L,MAAvB,EAA+BC,QAA/B,EAAyCyF,IAAzC,EAAgD;AAE/C0hL,uBAAUxsL,IAAV,CAAgB,IAAhB,EAAsB8K,IAAtB;;AAEA,OAAK1F,MAAL,GAAcA,MAAd;AACA,OAAKC,QAAL,GAAgBA,QAAhB;AAEA;;AAEDw6L,YAAY,CAACpgM,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAekzJ,qBAAU/sL,SAAzB,CAAzB;AACAogM,YAAY,CAACpgM,SAAb,CAAuBoC,WAAvB,GAAqCg+L,YAArC;AACAA,YAAY,CAACpgM,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;AAEAlrL,MAAM,CAACwV,gBAAP,CAAyBgqL,YAAY,CAACpgM,SAAtC,EAAiD;AAEhDsE,EAAAA,KAAK,EAAE;AAENwa,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKnZ,MAAL,CAAa,KAAKC,QAAlB,CAAP;AAEA,KANK;AAQN8pB,IAAAA,GAAG,EAAE,UAAW9oB,GAAX,EAAiB;AAErB,WAAKjB,MAAL,CAAa,KAAKC,QAAlB,IAA+BgB,GAA/B;AAEA;AAZK;AAFyC,CAAjD;;AAoBAw5L,YAAY,CAACpgM,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAlB;AACA+rC,IAAAA,IAAI,CAACzqC,QAAL,GAAgB,KAAKA,QAArB;AAEA;;AAED,SAAOyqC,IAAP;AAEA,CAfD;;;;;;;;;ACnCA;;AAJA;;;AAMA,SAASgwJ,OAAT,CAAkB/7L,KAAlB,EAA0B;AAEzB23G,aAAK17G,IAAL,CAAW,IAAX,EAAiB,IAAjB;;AAEA,OAAK+D,KAAL,GAAaA,KAAb;AAEA;;AAED+7L,OAAO,CAACrgM,SAAR,GAAoBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAApB;AACAqgM,OAAO,CAACrgM,SAAR,CAAkBoC,WAAlB,GAAgCi+L,OAAhC;AACAA,OAAO,CAACrgM,SAAR,CAAkB8rL,QAAlB,GAA6B,KAA7B;;AAEAuU,OAAO,CAACrgM,SAAR,CAAkBswK,QAAlB,GAA6B,UAAW8Z,OAAX,EAAqB;AAEjD,MAAI/5I,IAAI,GAAG,KAAK/rC,KAAL,CAAWqmL,cAAX,CAA2BP,OAA3B,EAAoC,KAAK/+K,IAAzC,CAAX;AAAA,MACCw/K,IAAI,GAAGx6I,IAAI,CAACw6I,IAAL,GAAY,IADpB;;AAGA,MAAKT,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnCvC,IAAAA,IAAI,IAAI,mBAAmBx6I,IAAI,CAACttC,MAAxB,GAAiC,GAAzC;AAEA,GAJD,MAIO;AAEN8nL,IAAAA,IAAI,IAAI,oBAAoBx6I,IAAI,CAACttC,MAAzB,GAAkC,GAA1C;AAEA;;AAED,SAAO8nL,IAAP;AAEA,CAjBD;;AAmBAwV,OAAO,CAACrgM,SAAR,CAAkBswB,IAAlB,GAAyB,UAAWpR,MAAX,EAAoB;AAE5C+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUA+7L,OAAO,CAACrgM,SAAR,CAAkBg6B,MAAlB,GAA2B,UAAWC,IAAX,EAAkB;AAE5C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;AC3CA;;AAQA;;AACA;;AACA;;AACA;;AAfA;;;AAiBA,SAASiwJ,YAAT,CAAuBtvI,MAAvB,EAA+Bs8H,QAA/B,EAA0C;AAEzC12H,8BAAer2D,IAAf,CAAqB,IAArB;;AAEA,MAAIc,KAAK,GAAG,IAAZ;AAEA,OAAK2vD,MAAL,GAAcA,MAAM,IAAI,IAAIqvI,gBAAJ,CAAa,IAAIpM,0BAAJ,CAAkBA,2BAAaI,UAA/B,CAAb,CAAxB;AACA,OAAK/G,QAAL,GAAgBA,QAAQ,IAAI,IAAI+S,gBAAJ,CAAa,IAAIZ,oBAAJ,CAAe,QAAf,CAAb,CAA5B;AAEA,OAAKpU,QAAL,GAAgB,EAAhB,CATyC,CAWzC;;AAEA,OAAK1pI,eAAL,GAAuB,UAAWiZ,MAAX,EAAmBb,QAAnB,EAA8B;AAEpD,QAAI6vC,kBAAkB,GAAG7vC,QAAQ,CAACqE,UAAT,CAAoBt/C,GAApB,CAAyB,IAAzB,CAAzB;;AAEA,QAAK,KAAK6a,OAAL,KAAiBiwE,kBAAkB,CAACjS,SAAzC,EAAqD;AAEpD,WAAK2yF,KAAL,CAAY;AAAEvwH,QAAAA,QAAQ,EAAEA;AAAZ,OAAZ;AAEAa,MAAAA,MAAM,CAACrE,QAAP,GAAkB,KAAKA,QAAvB;AACAqE,MAAAA,MAAM,CAAC9D,YAAP,GAAsB,KAAKA,YAA3B;AACA8D,MAAAA,MAAM,CAAC7D,cAAP,GAAwB,KAAKA,cAA7B;AAEA;AAED,GAdD,CAbyC,CA6BzC;;;AAEA,OAAKpV,eAAL,CAAqB3iD,QAArB,GAAgC,YAAY;AAE3C,WAAOqC,KAAK,CAACk/L,YAAb;AAEA,GAJD;AAMA;;AAEDD,YAAY,CAACtgM,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAe+8B,4BAAe52D,SAA9B,CAAzB;AACAsgM,YAAY,CAACtgM,SAAb,CAAuBoC,WAAvB,GAAqCk+L,YAArC;AACAA,YAAY,CAACtgM,SAAb,CAAuBqL,IAAvB,GAA8B,cAA9B;AAEAi1L,YAAY,CAACtgM,SAAb,CAAuBwgM,cAAvB,GAAwC,IAAxC;AAEA5/L,MAAM,CAACwV,gBAAP,CAAyBkqL,YAAY,CAACtgM,SAAtC,EAAiD;AAEhDo+D,EAAAA,UAAU,EAAE;AAEXt/C,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKwuK,QAAL,CAAclvH,UAArB;AAEA;AANU,GAFoC;AAYhDnT,EAAAA,WAAW,EAAE;AAEZv7B,IAAAA,GAAG,EAAE,UAAWprB,KAAX,EAAmB;AAEvB,UAAKA,KAAK,KAAK,IAAf,EAAsB,KAAKq1B,OAAL;AACtB,WAAK4mK,YAAL,GAAoBj8L,KAApB;AAEA,KAPW;AASZwa,IAAAA,GAAG,EAAE,YAAY;AAEhB,aAAO,KAAKyhL,YAAZ;AAEA;AAbW;AAZmC,CAAjD;;AA+BAD,YAAY,CAACtgM,SAAb,CAAuBorL,WAAvB,GAAqC,UAAWjrH,KAAX,EAAmB;AAEvD,OAAM,IAAIj/D,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAG,KAAKmqL,QAAL,CAAcxrL,MAAnC,EAA2C,EAAGqB,CAA9C,EAAkD;AAEjDi/D,IAAAA,KAAK,CAAC6wH,UAAN,CAAkB,KAAK3F,QAAL,CAAenqL,CAAf,CAAlB;AAEA;AAED,CARD;;AAUAo/L,YAAY,CAACtgM,SAAb,CAAuBsqL,KAAvB,GAA+B,UAAWpiL,MAAX,EAAoB;AAElDA,EAAAA,MAAM,GAAGA,MAAM,IAAI,EAAnB;AAEA,MAAIkiL,OAAO,GAAGliL,MAAM,CAACkiL,OAAP,IAAkB,IAAIyR,wBAAJ,EAAhC;AAEAzR,EAAAA,OAAO,CAACz2F,WAAR,CAAqB,IAArB,EAA2BzrF,MAAM,CAAC6xD,QAAlC;AACAqwH,EAAAA,OAAO,CAACE,KAAR,CAAe,KAAKt5H,MAApB,EAA4B,KAAKs8H,QAAjC;AAEA,OAAKx2H,YAAL,GAAoBszH,OAAO,CAAC8T,OAAR,CAAiB,QAAjB,CAApB;AACA,OAAKnnI,cAAL,GAAsBqzH,OAAO,CAAC8T,OAAR,CAAiB,UAAjB,CAAtB;AAEA,OAAKrnI,OAAL,GAAeuzH,OAAO,CAACvzH,OAAvB;AACA,OAAKN,QAAL,GAAgB6zH,OAAO,CAAC7zH,QAAxB;AACA,OAAKW,UAAL,GAAkBkzH,OAAO,CAAClzH,UAA1B;AACA,OAAKm0H,QAAL,GAAgBjB,OAAO,CAACiB,QAAxB;AAEA,OAAK56I,GAAL,GAAW25I,OAAO,CAACmH,QAAR,CAAiB9gJ,GAA5B;AACA,OAAKumB,MAAL,GAAcozH,OAAO,CAACmH,QAAR,CAAiBv6H,MAA/B;AAEA,OAAKrX,WAAL,GAAmByqI,OAAO,CAACmH,QAAR,CAAiB5xI,WAAjB,IAAgC,KAAKH,QAAL,GAAgBx+B,2BAAnE;AAEA,SAAO,IAAP;AAEA,CAxBD;;AA0BAs/K,YAAY,CAACtgM,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD,MAAI+N,IAAI,GAAG,KAAKA,IAAhB;;AAEA,OAAM,IAAIzW,IAAV,IAAkB0I,MAAlB,EAA2B;AAE1B,SAAM1I,IAAN,IAAe0I,MAAM,CAAE1I,IAAF,CAArB;AAEA;;AAED,OAAKyW,IAAL,GAAYA,IAAZ;;AAEA,MAAK/N,MAAM,CAACstB,QAAP,KAAoBvqC,SAAzB,EAAqC;AAEpC,SAAKuqC,QAAL,GAAgBt1B,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgBiH,MAAM,CAACstB,QAAvB,CAAZ,CAAhB;AAEA;;AAED,SAAO,IAAP;AAEA,CApBD;;AAsBA8zJ,YAAY,CAACtgM,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIC,YAAY,GAAKD,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAA3D;;AAEA,MAAKC,YAAL,EAAoB;AAEnBD,IAAAA,IAAI,GAAG;AACNkxJ,MAAAA,KAAK,EAAE;AADD,KAAP;AAIA;;AAED,MAAKlxJ,IAAI,IAAI,CAAEA,IAAI,CAACkV,SAApB,EAAgClV,IAAI,CAACkV,SAAL,GAAiB,EAAjB;;AAEhC,MAAK,CAAElV,IAAI,CAACkV,SAAL,CAAgB,KAAKliB,IAArB,CAAP,EAAqC;AAEpC,QAAIojB,IAAI,GAAG,EAAX;AAEAA,IAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,IAAAA,IAAI,CAAChlC,IAAL,GAAY,KAAKA,IAAjB;AAEA4uB,IAAAA,IAAI,CAACkV,SAAL,CAAgBkB,IAAI,CAACpjB,IAArB,IAA8BojB,IAA9B;AAEA,QAAK,KAAK75B,IAAL,KAAc,EAAnB,EAAwB65B,IAAI,CAAC75B,IAAL,GAAY,KAAKA,IAAjB;AAExB,QAAK,KAAKs8B,IAAL,KAAc7wC,SAAnB,EAA+BouC,IAAI,CAACyC,IAAL,GAAY,KAAKA,IAAjB;AAC/B,QAAK,KAAKsR,eAAL,KAAyBniD,SAA9B,EAA0CouC,IAAI,CAAC+T,eAAL,GAAuB,KAAKA,eAA5B;AAE1C,QAAK,KAAK5E,QAAL,KAAkBx+B,2BAAvB,EAAwCqvB,IAAI,CAACmP,QAAL,GAAgB,KAAKA,QAArB;AACxC,QAAK,KAAKE,WAAL,KAAqB,IAA1B,EAAiCrP,IAAI,CAACqP,WAAL,GAAmB,KAAKA,WAAxB;AACjC,QAAK,KAAKD,IAAL,KAAc/+B,sBAAnB,EAA+B2vB,IAAI,CAACoP,IAAL,GAAY,KAAKA,IAAjB;AAC/B,QAAK,KAAKJ,YAAL,KAAsB0tG,qBAA3B,EAAsC18G,IAAI,CAACgP,YAAL,GAAoB,KAAKA,YAAzB;AAEtC,QAAK,KAAKa,SAAL,KAAmB19B,2BAAxB,EAAyC6tB,IAAI,CAAC6P,SAAL,GAAiB,KAAKA,SAAtB;AACzC,QAAK,KAAKC,SAAL,KAAmB,KAAxB,EAAgC9P,IAAI,CAAC8P,SAAL,GAAiB,KAAKA,SAAtB;AAChC,QAAK,KAAKC,UAAL,KAAoB,KAAzB,EAAiC/P,IAAI,CAAC+P,UAAL,GAAkB,KAAKA,UAAvB;AAEjC,QAAK,KAAKiE,SAAL,KAAmB,CAAxB,EAA4BhU,IAAI,CAACgU,SAAL,GAAiB,KAAKA,SAAtB;AAC5B,QAAK,KAAKC,QAAL,KAAkBriD,SAAvB,EAAmCouC,IAAI,CAACiU,QAAL,GAAgB,KAAKA,QAArB;AACnC,QAAK,KAAKC,OAAL,KAAiBtiD,SAAtB,EAAkCouC,IAAI,CAACkU,OAAL,GAAe,KAAKA,OAApB;AAClC,QAAK,KAAKltB,KAAL,KAAep1B,SAApB,EAAgCouC,IAAI,CAAChZ,KAAL,GAAa,KAAKA,KAAlB;AAEhC,QAAK,KAAKiqB,SAAL,KAAmB,IAAxB,EAA+BjR,IAAI,CAACiR,SAAL,GAAiB,IAAjB;AAE/B,QAAK,KAAKkD,SAAL,KAAmB,IAAxB,EAA+BnU,IAAI,CAACmU,SAAL,GAAiB,KAAKA,SAAtB;AAC/B,QAAK,KAAKC,kBAAL,GAA0B,CAA/B,EAAmCpU,IAAI,CAACoU,kBAAL,GAA0B,KAAKA,kBAA/B;AACnC,QAAK,KAAKC,gBAAL,KAA0B,OAA/B,EAAyCrU,IAAI,CAACqU,gBAAL,GAAwB,KAAKA,gBAA7B;AACzC,QAAK,KAAKC,iBAAL,KAA2B,OAAhC,EAA0CtU,IAAI,CAACsU,iBAAL,GAAyB,KAAKA,iBAA9B;AAE1C,QAAK,KAAKpD,SAAL,GAAiB,CAAtB,EAA0BlR,IAAI,CAACkR,SAAL,GAAiB,KAAKA,SAAtB;AAC1B,QAAK,KAAKC,kBAAL,KAA4B,IAAjC,EAAwCnR,IAAI,CAACmR,kBAAL,GAA0B,KAAKA,kBAA/B;AAExC,QAAK,KAAKoD,YAAL,KAAsB,IAA3B,EAAkCvU,IAAI,CAACuU,YAAL,GAAoB,IAApB;AAClC,QAAK,KAAKE,QAAL,KAAkB,IAAvB,EAA8BzU,IAAI,CAACyU,QAAL,GAAgB,IAAhB;AAE9B,QAAK,KAAK3Y,OAAL,KAAiB,KAAtB,EAA8BkE,IAAI,CAAClE,OAAL,GAAe,KAAf;AAC9B,QAAKj1B,IAAI,CAACe,SAAL,CAAgB,KAAKu0B,QAArB,MAAoC,IAAzC,EAAgD6D,IAAI,CAAC7D,QAAL,GAAgB,KAAKA,QAArB;AAEhD6D,IAAAA,IAAI,CAACI,GAAL,GAAW,KAAKA,GAAhB;AACAJ,IAAAA,IAAI,CAAC2mB,MAAL,GAAc,KAAKA,MAAnB;AAEA3mB,IAAAA,IAAI,CAAC2gB,MAAL,GAAc,KAAKA,MAAL,CAAYh3B,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AACAojB,IAAAA,IAAI,CAACi9I,QAAL,GAAgB,KAAKA,QAAL,CAActzJ,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AAEA;;AAEDgN,EAAAA,IAAI,CAAC+V,QAAL,GAAgB,KAAK/iB,IAArB;AAEA,SAAOgN,IAAP;AAEA,CAtED;;;;;;;;;ACnJA;;AAQA;;AACA;;AACA;;AAdA;;;AAgBA,SAASwmK,OAAT,CAAkB51L,KAAlB,EAAyBC,MAAzB,EAAiCw/J,KAAjC,EAAwCp+J,OAAxC,EAAkD;AAEjDA,EAAAA,OAAO,GAAGA,OAAO,IAAI,EAArB;AAEA,OAAKo+J,KAAL,GAAaA,KAAb;AAEA,OAAK/vG,KAAL,GAAaruD,OAAO,CAACquD,KAAR,KAAkBt4D,SAAlB,GAA8BiK,OAAO,CAACquD,KAAtC,GAA8C,IAA3D;AAEA,OAAKhB,YAAL,GAAoB,IAAIh9B,8BAAJ,CAAuB1xB,KAAvB,EAA8BC,MAA9B,EAAsCoB,OAAtC,CAApB;AAEA,OAAK8jC,QAAL,GAAgB,IAAIswJ,0BAAJ,EAAhB;AAEA,OAAK59J,MAAL,GAAc,IAAIk9F,+BAAJ,CAAwB,CAAE,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAE,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAAd;AACA,OAAK5lE,KAAL,GAAa,IAAIzpB,kBAAJ,EAAb;AAEA,OAAKmwJ,IAAL,GAAY,IAAIxxI,iBAAJ,CAAU,IAAI0S,gCAAJ,CAAyB,CAAzB,EAA4B,CAA5B,CAAV,EAA2C,KAAK5xB,QAAhD,CAAZ;AACA,OAAK0wJ,IAAL,CAAUp0J,aAAV,GAA0B,KAA1B,CAhBiD,CAgBhB;;AACjC,OAAK0tB,KAAL,CAAWnhD,GAAX,CAAgB,KAAK6nL,IAArB;AAEA,OAAKpmI,MAAL,GAAc,IAAd;;AAEAs5H,2BAAYrzL,IAAZ,CAAkB,IAAlB,EAAwB,KAAKg5D,YAAL,CAAkB58B,OAA1C;AAEA;;AAED8jK,OAAO,CAACzgM,SAAR,GAAoBY,MAAM,CAACi5B,MAAP,CAAe+5J,yBAAY5zL,SAA3B,CAApB;AACAygM,OAAO,CAACzgM,SAAR,CAAkBoC,WAAlB,GAAgCq+L,OAAhC;AACAA,OAAO,CAACzgM,SAAR,CAAkB8rL,QAAlB,GAA6B,KAA7B;;AAEA2U,OAAO,CAACzgM,SAAR,CAAkBsqL,KAAlB,GAA0B,UAAWF,OAAX,EAAoBnrK,MAApB,EAA4BgO,IAA5B,EAAmC;AAE5D,MAAI0zK,UAAU,GAAG,IAAI9E,wBAAJ,EAAjB;AACA8E,EAAAA,UAAU,CAACxV,KAAX,GAAmBf,OAAO,CAACe,KAA3B;AACAwV,EAAAA,UAAU,CAACtV,QAAX,GAAsBjB,OAAO,CAACiB,QAA9B;AAEA,OAAKr7I,QAAL,CAAcs9I,QAAd,CAAuBhpL,KAAvB,GAA+B,KAAKgmK,KAApC;AACA,OAAKt6H,QAAL,CAAcs6I,KAAd,CAAqB;AAAEF,IAAAA,OAAO,EAAEuW;AAAX,GAArB;AAEA,SAAO/M,yBAAY5zL,SAAZ,CAAsBsqL,KAAtB,CAA4B/pL,IAA5B,CAAkC,IAAlC,EAAwC6pL,OAAxC,EAAiDnrK,MAAjD,EAAyDgO,IAAzD,CAAP;AAEA,CAXD;;AAaAwzK,OAAO,CAACzgM,SAAR,CAAkB4gM,iBAAlB,GAAsC,UAAWzgI,KAAX,EAAmB;AAExD,OAAK0gI,MAAL,CAAYvmI,MAAZ,GAAqB,KAArB;;AAEA,MAAK,KAAKumI,MAAL,KAAgB,KAAKC,aAA1B,EAA0C;AAEzC,QAAK,KAAKC,cAAV,EAA2B,KAAKA,cAAL,CAAoBvmK,OAApB;AAE3B,QAAIwV,QAAQ,GAAG,IAAIswJ,0BAAJ,EAAf;AACAtwJ,IAAAA,QAAQ,CAACs9I,QAAT,CAAkBhpL,KAAlB,GAA0B,IAA1B;AACA0rC,IAAAA,QAAQ,CAACs6I,KAAT;AAEA,QAAItwH,KAAK,GAAG,IAAIzpB,kBAAJ,EAAZ;AAEA,QAAImwJ,IAAI,GAAG,IAAIxxI,iBAAJ,CAAU,IAAI0S,gCAAJ,CAAyB,CAAzB,EAA4B,CAA5B,CAAV,EAA2C5xB,QAA3C,CAAX;AACA0wJ,IAAAA,IAAI,CAACp0J,aAAL,GAAqB,KAArB,CAXyC,CAWb;;AAC5B0tB,IAAAA,KAAK,CAACnhD,GAAN,CAAW6nL,IAAX;AAEA,SAAKM,WAAL,GAAmBhnI,KAAnB;AACA,SAAK+mI,cAAL,GAAsB/wJ,QAAtB;AAEA;;AAED,OAAK8wJ,aAAL,GAAqB,KAAKD,MAA1B;AAEA1gI,EAAAA,KAAK,CAACpG,QAAN,CAAeM,eAAf,CAAgC,KAAKwmI,MAAL,CAAYtnI,YAA5C;AACA,MAAK,KAAKsnI,MAAL,CAAYtmI,KAAjB,EAAyB4F,KAAK,CAACpG,QAAN,CAAeQ,KAAf;AACzB4F,EAAAA,KAAK,CAACpG,QAAN,CAAeO,MAAf,CAAuB,KAAK0mI,WAA5B,EAAyC,KAAKt+J,MAA9C;AAEA,CA7BD;;AA+BA+9J,OAAO,CAACzgM,SAAR,CAAkBorL,WAAlB,GAAgC,UAAWjrH,KAAX,EAAmB;AAElD,MAAKA,KAAK,CAACpG,QAAX,EAAsB;AAErB;AAEA,QAAK,KAAK8mI,MAAL,IAAe,KAAKA,MAAL,CAAYvmI,MAAZ,KAAuB,KAA3C,EAAmD;AAElD,WAAKsmI,iBAAL,CAAwBzgI,KAAxB;AAEA;;AAED,QAAK,KAAK7F,MAAV,EAAmB;AAElB,UAAK,KAAKtqB,QAAL,CAAcumB,QAAd,CAAuBw6H,aAA5B,EAA4C;AAE3C,aAAK/gJ,QAAL,CAAcumB,QAAd,CAAuBw6H,aAAvB,CAAqCzsL,KAArC,GAA6C67D,KAAK,CAAC4wH,aAAnD;AAEA;;AAED5wH,MAAAA,KAAK,CAACpG,QAAN,CAAeM,eAAf,CAAgC,KAAKd,YAArC;AACA,UAAK,KAAKgB,KAAV,EAAkB4F,KAAK,CAACpG,QAAN,CAAeQ,KAAf;AAClB4F,MAAAA,KAAK,CAACpG,QAAN,CAAeO,MAAf,CAAuB,KAAKN,KAA5B,EAAmC,KAAKt3B,MAAxC;AAEA,KAtBoB,CAwBrB;;;AAEA,QAAK,KAAKm+J,MAAL,IAAe,KAAKA,MAAL,CAAYvmI,MAAZ,KAAuB,IAA3C,EAAkD;AAEjD,WAAKsmI,iBAAL,CAAwBzgI,KAAxB;AAEA;AAED,GAhCD,MAgCO;AAENxwC,IAAAA,OAAO,CAACC,IAAR,CAAc,sCAAd;AAEA;AAED,CAxCD;;AA0CA6wK,OAAO,CAACzgM,SAAR,CAAkBswB,IAAlB,GAAyB,UAAWpR,MAAX,EAAoB;AAE5C00K,2BAAY5zL,SAAZ,CAAsBswB,IAAtB,CAA2B/vB,IAA3B,CAAiC,IAAjC,EAAuC2e,MAAvC;;AAEA,OAAK2hL,MAAL,GAAc3hL,MAAM,CAAC2hL,MAArB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAJ,OAAO,CAACzgM,SAAR,CAAkBg6B,MAAlB,GAA2B,UAAWC,IAAX,EAAkB;AAE5C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAGujJ,yBAAY5zL,SAAZ,CAAsBg6B,MAAtB,CAA6Bz5B,IAA7B,CAAmC,IAAnC,EAAyC05B,IAAzC,CAAP;AAEA,QAAK,KAAK4mK,MAAV,EAAmBxwJ,IAAI,CAACwwJ,MAAL,GAAc,KAAKA,MAAL,CAAY7mK,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEnB;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;ACzIA;;AAJA;;;AAMA,IAAI4wJ,UAAU,GAAG,CAAE,OAAF,EAAW,QAAX,CAAjB;AAAA,IACCC,YAAY,GAAG,CAAE,QAAF,EAAY,SAAZ,CADhB;;AAGA,SAASC,UAAT,CAAqB12L,KAArB,EAA6B;AAE5BshL,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB,EAA2B;AAAEyrL,IAAAA,MAAM,EAAE;AAAV,GAA3B;;AAEA,OAAKvhL,KAAL,GAAaA,KAAK,IAAI,CAAtB;AAEA;;AAED02L,UAAU,CAACnhM,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAvB;AACAmhM,UAAU,CAACnhM,SAAX,CAAqBoC,WAArB,GAAmC++L,UAAnC;AACAA,UAAU,CAACnhM,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEAqV,UAAU,CAACnhM,SAAX,CAAqBswK,QAArB,GAAgC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5DmrK,EAAAA,OAAO,CAACmH,QAAR,CAAiB5yL,KAAjB,CAAwB,KAAK8L,KAA7B,IAAuC,IAAvC;AAEA,MAAI1H,MAAM,GAAGqnL,OAAO,CAACgD,QAAR,CAAkB,QAAlB,IAA+B6T,UAAU,CAAE,KAAKx2L,KAAP,CAAzC,GAA0Dy2L,YAAY,CAAE,KAAKz2L,KAAP,CAAnF;AAEA,SAAO2/K,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,CARD;;AAUAkiL,UAAU,CAACnhM,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKzU,KAAL,GAAayU,MAAM,CAACzU,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUA02L,UAAU,CAACnhM,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC5lC,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAO4lC,IAAP;AAEA,CAdD;;;;;;;;;ACrCA;;AACA;;AACA;;AACA;;AAPA;;;AASA,SAAS+wJ,UAAT,CAAqB//L,KAArB,EAA4BqhC,MAA5B,EAAqC;AAEpCqpJ,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK8gM,QAAL,CAAehgM,KAAK,IAAI+/L,UAAU,CAACE,QAAnC;AACA,OAAKC,SAAL,CAAgB7+J,MAAhB;AAEA;;AAED0+J,UAAU,CAACxP,KAAX,GAAqB,YAAY;AAEhC,MAAI4P,UAAU,GAAG,IAAIrS,0BAAJ,CAAkB,CAClC,+CADkC,EAGlC,6BAHkC,EAKlC,mDALkC,EAOlC,QAPkC,EASlC,kDATkC,EAWlC,SAXkC,EAalC,iDAbkC,EAelC,GAfkC,EAgBjC7kL,IAhBiC,CAgB3B,IAhB2B,CAAlB,CAAjB;AAkBA,SAAO;AACNk3L,IAAAA,UAAU,EAAEA;AADN,GAAP;AAIA,CAxBkB,EAAnB;;AA0BAJ,UAAU,CAACE,QAAX,GAAsB,UAAtB;AACAF,UAAU,CAACtlC,KAAX,GAAmB,OAAnB;AACAslC,UAAU,CAACK,SAAX,GAAuB,UAAvB;AAEAL,UAAU,CAACphM,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAvB;AACAohM,UAAU,CAACphM,SAAX,CAAqBoC,WAArB,GAAmCg/L,UAAnC;AACAA,UAAU,CAACphM,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEAsV,UAAU,CAACphM,SAAX,CAAqBuhM,SAArB,GAAiC,UAAW7+J,MAAX,EAAoB;AAEpD,OAAKA,MAAL,GAAcA,MAAd;AACA,OAAK0oJ,WAAL,GAAmB1oJ,MAAM,KAAKzgC,SAAX,GAAuB,KAAKy/L,aAA5B,GAA4Cz/L,SAA/D;AAEA,CALD;;AAOAm/L,UAAU,CAACphM,SAAX,CAAqBqhM,QAArB,GAAgC,UAAWhgM,KAAX,EAAmB;AAElD,UAAS,KAAKA,KAAd;AAEC,SAAK+/L,UAAU,CAACtlC,KAAhB;AAEC,aAAO,KAAK5yH,IAAZ;AACA,aAAO,KAAKC,GAAZ;AAEA;AAPF;;AAWA,OAAK9nC,KAAL,GAAaA,KAAb;;AAEA,UAASA,KAAT;AAEC,SAAK+/L,UAAU,CAACtlC,KAAhB;AAEC,UAAIp5H,MAAM,GAAG,KAAKA,MAAlB;AAEA,WAAKwG,IAAL,GAAY,IAAIuoJ,oBAAJ,CAAe/uJ,MAAM,GAAGA,MAAM,CAACwG,IAAV,GAAiB,CAAtC,CAAZ;AACA,WAAKC,GAAL,GAAW,IAAIsoJ,oBAAJ,CAAe/uJ,MAAM,GAAGA,MAAM,CAACyG,GAAV,GAAgB,IAArC,CAAX;AAEA;AATF;AAaA,CA5BD;;AA8BAi4J,UAAU,CAACphM,SAAX,CAAqBgrL,OAArB,GAA+B;AAAW;AAAgB;AAEzD,UAAS,KAAK3pL,KAAd;AAEC,SAAK+/L,UAAU,CAACtlC,KAAhB;AAEC,aAAO,GAAP;AAJF;;AAQA,SAAO,KAAKzwJ,IAAZ;AAEA,CAZD;;AAcA+1L,UAAU,CAACphM,SAAX,CAAqBosL,SAArB,GAAiC;AAAW;AAAgB;AAE3D,UAAS,KAAK/qL,KAAd;AAEC,SAAK+/L,UAAU,CAACtlC,KAAhB;AACA,SAAKslC,UAAU,CAACK,SAAhB;AAEC,aAAO,IAAP;AALF;;AASA,SAAO,KAAP;AAEA,CAbD;;AAeAL,UAAU,CAACphM,SAAX,CAAqBksL,SAArB,GAAiC;AAAW;AAAgB;AAE3D,UAAS,KAAK7qL,KAAd;AAEC,SAAK+/L,UAAU,CAACE,QAAhB;AAEC,aAAO,KAAP;AAJF;;AAQA,SAAO,IAAP;AAEA,CAZD;;AAcAF,UAAU,CAACphM,SAAX,CAAqBswK,QAArB,GAAgC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5D,MAAIlc,MAAJ;;AAEA,UAAS,KAAK1B,KAAd;AAEC,SAAK+/L,UAAU,CAACE,QAAhB;AAECv+L,MAAAA,MAAM,GAAG,gBAAT;AAEA;;AAED,SAAKq+L,UAAU,CAACtlC,KAAhB;AAEC,UAAI0lC,UAAU,GAAGpX,OAAO,CAACxqG,OAAR,CAAiBwhH,UAAU,CAACxP,KAAX,CAAiB4P,UAAlC,CAAjB;AAEAz+L,MAAAA,MAAM,GAAGy+L,UAAU,GAAG,IAAb,GAAoB,KAAKt4J,IAAL,CAAUohJ,KAAV,CAAiBF,OAAjB,EAA0B,GAA1B,CAApB,GAAsD,IAAtD,GAA6D,KAAKjhJ,GAAL,CAASmhJ,KAAT,CAAgBF,OAAhB,EAAyB,GAAzB,CAA7D,GAA8F,IAAvG;AAEA;;AAED,SAAKgX,UAAU,CAACK,SAAhB;AAEC1+L,MAAAA,MAAM,GAAG,gBAAgB,IAAIkxL,0BAAJ,CAAkBA,2BAAaE,KAA/B,EAAuC7J,KAAvC,CAA8CF,OAA9C,EAAuD,IAAvD,CAAhB,GAAgF,qBAAzF;AAEA;AApBF;;AAwBA,SAAOA,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,CA9BD;;AAgCAmiL,UAAU,CAACphM,SAAX,CAAqB0hM,aAArB,GAAqC;AAAW;AAAc;AAE7D,UAAS,KAAKrgM,KAAd;AAEC,SAAK+/L,UAAU,CAACtlC,KAAhB;AAEC,UAAIp5H,MAAM,GAAG,KAAKA,MAAlB;AAEA,WAAKwG,IAAL,CAAU5kC,KAAV,GAAkBo+B,MAAM,CAACwG,IAAzB;AACA,WAAKC,GAAL,CAAS7kC,KAAT,GAAiBo+B,MAAM,CAACyG,GAAxB;AAEA;AATF;AAaA,CAfD;;AAiBAi4J,UAAU,CAACphM,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKmiL,QAAL,CAAeniL,MAAM,CAAC7d,KAAtB;;AAEA,MAAK6d,MAAM,CAACwjB,MAAZ,EAAqB;AAEpB,SAAK6+J,SAAL,CAAgBriL,MAAM,CAACwjB,MAAvB;AAEA;;AAED,UAASxjB,MAAM,CAAC7d,KAAhB;AAEC,SAAK+/L,UAAU,CAACtlC,KAAhB;AAEC,WAAK5yH,IAAL,CAAUy4J,MAAV,GAAmBziL,MAAM,CAACgqB,IAA1B;AACA,WAAKC,GAAL,CAASw4J,MAAT,GAAkBziL,MAAM,CAACiqB,GAAzB;AAEA;AAPF;;AAWA,SAAO,IAAP;AAEA,CAzBD;;AA2BAi4J,UAAU,CAACphM,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChvC,KAAL,GAAa,KAAKA,KAAlB;AAEA,QAAK,KAAKqhC,MAAV,EAAmB2N,IAAI,CAAC3N,MAAL,GAAc,KAAKA,MAAL,CAAYzV,IAA1B;;AAEnB,YAAS,KAAK5rB,KAAd;AAEC,WAAK+/L,UAAU,CAACtlC,KAAhB;AAECzrH,QAAAA,IAAI,CAACnH,IAAL,GAAY,KAAKA,IAAL,CAAU5kC,KAAtB;AACA+rC,QAAAA,IAAI,CAAClH,GAAL,GAAW,KAAKA,GAAL,CAAS7kC,KAApB;AAEA;AAPF;AAWA;;AAED,SAAO+rC,IAAP;AAEA,CA3BD;;;;;;;;;AC5MA;;AAJA;;;AAMA,SAASuxJ,SAAT,CAAoBvgM,KAApB,EAA4B;AAE3B0qL,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB,EAA2B;AAAEyrL,IAAAA,MAAM,EAAE;AAAV,GAA3B;;AAEA,OAAK3qL,KAAL,GAAaA,KAAK,IAAIugM,SAAS,CAACC,KAAhC;AAEA;;AAEDD,SAAS,CAACC,KAAV,GAAkB,OAAlB;AAEAD,SAAS,CAAC5hM,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAtB;AACA4hM,SAAS,CAAC5hM,SAAV,CAAoBoC,WAApB,GAAkCw/L,SAAlC;AACAA,SAAS,CAAC5hM,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEA8V,SAAS,CAAC5hM,SAAV,CAAoBswK,QAApB,GAA+B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE3D,MAAKmrK,OAAO,CAAC0T,OAAR,CAAiB,OAAjB,CAAL,EAAkC;AAEjC,WAAO1T,OAAO,CAACtxJ,MAAR,CAAgB,8BAAhB,EAAgD,KAAKztB,IAArD,EAA2D4T,MAA3D,CAAP;AAEA,GAJD,MAIO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,0DAAd;AAEA,WAAOw6J,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKztB,IAApC,EAA0C4T,MAA1C,CAAP;AAEA;AAED,CAdD;;AAgBA2iL,SAAS,CAAC5hM,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK7d,KAAL,GAAa6d,MAAM,CAAC7d,KAApB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAugM,SAAS,CAAC5hM,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChvC,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAOgvC,IAAP;AAEA,CAdD;;;;;;;;;AC1CA;;AAEA;;AANA;;;AAQA,SAASyxJ,cAAT,GAA0B;AAEzB3Q,2BAAY5wL,IAAZ,CAAkB,IAAlB;;AAEA,OAAKuyC,IAAL,GAAY,IAAIjjB,oBAAJ,EAAZ;AAEA;;AAEDiyK,cAAc,CAAC9hM,SAAf,GAA2BY,MAAM,CAACi5B,MAAP,CAAes3J,yBAAYnxL,SAA3B,CAA3B;AACA8hM,cAAc,CAAC9hM,SAAf,CAAyBoC,WAAzB,GAAuC0/L,cAAvC;AACAA,cAAc,CAAC9hM,SAAf,CAAyB8rL,QAAzB,GAAoC,YAApC;;AAEAgW,cAAc,CAAC9hM,SAAf,CAAyBorL,WAAzB,GAAuC,UAAWjrH,KAAX,EAAmB;AAEzD,MAAKA,KAAK,CAACpG,QAAX,EAAsB;AAErBoG,IAAAA,KAAK,CAACpG,QAAN,CAAe3mB,OAAf,CAAwB,KAAKN,IAA7B;AAEA,QAAImuD,UAAU,GAAG9gC,KAAK,CAACpG,QAAN,CAAe2sC,aAAf,EAAjB;AAEA,SAAKn+F,CAAL,GAAS,KAAKuqC,IAAL,CAAUjoC,KAAV,GAAkBo2F,UAA3B;AACA,SAAKx4F,CAAL,GAAS,KAAKqqC,IAAL,CAAUhoC,MAAV,GAAmBm2F,UAA5B;AAEA,GATD,MASO;AAENtxE,IAAAA,OAAO,CAACC,IAAR,CAAc,6CAAd;AAEA;AAED,CAjBD;;AAmBAkyK,cAAc,CAAC9hM,SAAf,CAAyBswB,IAAzB,GAAgC,UAAWpR,MAAX,EAAoB;AAEnDiyK,2BAAYnxL,SAAZ,CAAsBswB,IAAtB,CAA2B/vB,IAA3B,CAAiC,IAAjC,EAAuC2e,MAAvC;;AAEA,OAAK66C,QAAL,GAAgB76C,MAAM,CAAC66C,QAAvB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUA+nI,cAAc,CAAC9hM,SAAf,CAAyBg6B,MAAzB,GAAkC,UAAWC,IAAX,EAAkB;AAEnD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC0pB,QAAL,GAAgB,KAAKA,QAAL,CAAc9sC,IAA9B;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;AC7CA;;AACA;;AALA;;;AAOA,SAAS0xJ,YAAT,CAAuBl1G,UAAvB,EAAoC;AAEnCk/F,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAKssF,UAAL,GAAkBA,UAAU,IAAI,IAAIi1G,8BAAJ,EAAhC;AAEA;;AAEDC,YAAY,CAAC/hM,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAzB;AACA+hM,YAAY,CAAC/hM,SAAb,CAAuBoC,WAAvB,GAAqC2/L,YAArC;AACAA,YAAY,CAAC/hM,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;;AAEAiW,YAAY,CAAC/hM,SAAb,CAAuBswK,QAAvB,GAAkC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE9D,MAAIlc,MAAJ;;AAEA,MAAKqnL,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErCrqL,IAAAA,MAAM,GAAG,yBAAyB,KAAK8pF,UAAL,CAAgBy9F,KAAhB,CAAuBF,OAAvB,EAAgC,IAAhC,CAAzB,GAAkE,GAA3E;AAEA,GAJD,MAIO;AAENz6J,IAAAA,OAAO,CAACC,IAAR,CAAc,+CAA+Cw6J,OAAO,CAACxvH,MAAvD,GAAgE,UAA9E;AAEA73D,IAAAA,MAAM,GAAG,aAAT;AAEA;;AAED,SAAOqnL,OAAO,CAACtxJ,MAAR,CAAgB/1B,MAAhB,EAAwB,KAAKioL,OAAL,CAAcZ,OAAd,CAAxB,EAAiDnrK,MAAjD,CAAP;AAEA,CAlBD;;AAoBA8iL,YAAY,CAAC/hM,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK2tE,UAAL,GAAkB3tE,MAAM,CAAC2tE,UAAzB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAk1G,YAAY,CAAC/hM,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACw8C,UAAL,GAAkB,KAAKA,UAAL,CAAgB7yD,MAAhB,CAAwBC,IAAxB,EAA+BhN,IAAjD;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;AC7CA;;AAJA;;;AAMA,SAAS2xJ,QAAT,CAAmB1iM,CAAnB,EAAsBD,CAAtB,EAAyBi2L,EAAzB,EAA6B2M,MAA7B,EAAqCC,QAArC,EAAgD;AAE/CnW,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAKjB,CAAL,GAASA,CAAT;AACA,OAAKD,CAAL,GAASA,CAAT;AAEA,OAAKi2L,EAAL,GAAUA,EAAV;AAEA,OAAK2M,MAAL,GAAcA,MAAd;AACA,OAAKC,QAAL,GAAgBA,QAAhB;AAEA;;AAEDF,QAAQ,CAACh4B,KAAT,GAAiB,IAAjB;AACAg4B,QAAQ,CAACG,SAAT,GAAqB,IAArB;AACAH,QAAQ,CAACI,OAAT,GAAmB,GAAnB;AACAJ,QAAQ,CAACK,aAAT,GAAyB,IAAzB;AACAL,QAAQ,CAACM,IAAT,GAAgB,GAAhB;AACAN,QAAQ,CAACO,UAAT,GAAsB,IAAtB;AAEAP,QAAQ,CAAChiM,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAArB;AACAgiM,QAAQ,CAAChiM,SAAT,CAAmBoC,WAAnB,GAAiC4/L,QAAjC;AACAA,QAAQ,CAAChiM,SAAT,CAAmB8rL,QAAnB,GAA8B,MAA9B;;AAEAkW,QAAQ,CAAChiM,SAAT,CAAmBgrL,OAAnB,GAA6B,UAAWZ,OAAX,EAAqB;AAEjD,MAAK,KAAK6X,MAAV,EAAmB;AAElB,QAAIO,MAAM,GAAG,KAAKP,MAAL,CAAYjX,OAAZ,CAAqBZ,OAArB,CAAb;AACA,QAAIqY,QAAQ,GAAG,KAAKP,QAAL,CAAclX,OAAd,CAAuBZ,OAAvB,CAAf;;AAEA,QAAKA,OAAO,CAACoB,aAAR,CAAuBiX,QAAvB,IAAoCrY,OAAO,CAACoB,aAAR,CAAuBgX,MAAvB,CAAzC,EAA2E;AAE1E,aAAOC,QAAP;AAEA;;AAED,WAAOD,MAAP;AAEA;;AAED,SAAO,GAAP;AAEA,CAnBD;;AAqBAR,QAAQ,CAAChiM,SAAT,CAAmB0iM,WAAnB,GAAiC,UAAWtY,OAAX,EAAqB;AAErD,MAAKA,OAAO,CAACoB,aAAR,CAAuB,KAAKnsL,CAAL,CAAO2rL,OAAP,CAAgBZ,OAAhB,CAAvB,IAAqDA,OAAO,CAACoB,aAAR,CAAuB,KAAKlsL,CAAL,CAAO0rL,OAAP,CAAgBZ,OAAhB,CAAvB,CAA1D,EAA+G;AAE9G,WAAO,KAAK/qL,CAAL,CAAO2rL,OAAP,CAAgBZ,OAAhB,CAAP;AAEA;;AAED,SAAO,KAAK9qL,CAAL,CAAO0rL,OAAP,CAAgBZ,OAAhB,CAAP;AAEA,CAVD;;AAYA4X,QAAQ,CAAChiM,SAAT,CAAmBswK,QAAnB,GAA8B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE1D,MAAI5T,IAAI,GAAG,KAAK2/K,OAAL,CAAcZ,OAAd,CAAX;AAAA,MACCuY,QAAQ,GAAG,KAAKD,WAAL,CAAkBtY,OAAlB,CADZ;AAAA,MAEC9qL,CAAC,GAAG,KAAKA,CAAL,CAAOgrL,KAAP,CAAcF,OAAd,EAAuBuY,QAAvB,CAFL;AAAA,MAGCtjM,CAAC,GAAG,KAAKA,CAAL,CAAOirL,KAAP,CAAcF,OAAd,EAAuBuY,QAAvB,CAHL;AAAA,MAIC9X,IAJD;;AAMA,MAAK,KAAKoX,MAAV,EAAmB;AAElB,QAAIW,MAAM,GAAG,KAAKX,MAAL,CAAY3X,KAAZ,CAAmBF,OAAnB,EAA4B/+K,IAA5B,CAAb;AAAA,QACCw3L,QAAQ,GAAG,KAAKX,QAAL,CAAc5X,KAAd,CAAqBF,OAArB,EAA8B/+K,IAA9B,CADZ;AAGAw/K,IAAAA,IAAI,GAAG,OAAO,CAAEvrL,CAAF,EAAK,KAAKg2L,EAAV,EAAcj2L,CAAd,EAAiB,GAAjB,EAAsBujM,MAAtB,EAA8B,GAA9B,EAAmCC,QAAnC,EAA8Cv4L,IAA9C,CAAoD,GAApD,CAAP,GAAmE,IAA1E;AAEA,GAPD,MAOO;AAENugL,IAAAA,IAAI,GAAG,OAAOvrL,CAAP,GAAW,GAAX,GAAiB,KAAKg2L,EAAtB,GAA2B,GAA3B,GAAiCj2L,CAAjC,GAAqC,IAA5C;AAEA;;AAED,SAAO+qL,OAAO,CAACtxJ,MAAR,CAAgB+xJ,IAAhB,EAAsB,KAAKG,OAAL,CAAcZ,OAAd,CAAtB,EAA+CnrK,MAA/C,CAAP;AAEA,CAvBD;;AAyBA+iL,QAAQ,CAAChiM,SAAT,CAAmBswB,IAAnB,GAA0B,UAAWpR,MAAX,EAAoB;AAE7C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5f,CAAL,GAAS4f,MAAM,CAAC5f,CAAhB;AACA,OAAKD,CAAL,GAAS6f,MAAM,CAAC7f,CAAhB;AAEA,OAAKi2L,EAAL,GAAUp2K,MAAM,CAACo2K,EAAjB;AAEA,OAAK2M,MAAL,GAAc/iL,MAAM,CAAC+iL,MAArB;AACA,OAAKC,QAAL,GAAgBhjL,MAAM,CAACgjL,QAAvB;AAEA,SAAO,IAAP;AAEA,CAdD;;AAgBAF,QAAQ,CAAChiM,SAAT,CAAmBg6B,MAAnB,GAA4B,UAAWC,IAAX,EAAkB;AAE7C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/wC,CAAL,GAAS,KAAKA,CAAL,CAAO06B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AACAojB,IAAAA,IAAI,CAAChxC,CAAL,GAAS,KAAKA,CAAL,CAAO26B,MAAP,CAAeC,IAAf,EAAsBhN,IAA/B;AAEAojB,IAAAA,IAAI,CAACilJ,EAAL,GAAU,KAAKA,EAAf;AAEA,QAAKjlJ,IAAI,CAAC4xJ,MAAV,EAAmB5xJ,IAAI,CAAC4xJ,MAAL,GAAc,KAAKA,MAAL,CAAYjoK,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AACnB,QAAKojB,IAAI,CAAC6xJ,QAAV,EAAqB7xJ,IAAI,CAAC6xJ,QAAL,GAAgB,KAAKA,QAAL,CAAcloK,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AAErB;;AAED,SAAOojB,IAAP;AAEA,CApBD;;;;;;;;;ACrGA;;AACA;;AACA;;AANA;;;AAQA,SAASyyJ,SAAT,CAAoBpoK,EAApB,EAAyB;AAExBqxJ,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,GAArB;;AAEA,OAAKm6B,EAAL,GAAUA,EAAE,IAAI,IAAI42J,cAAJ,EAAhB;AAEA;;AAEDwR,SAAS,CAAC9iM,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAtB;AACA8iM,SAAS,CAAC9iM,SAAV,CAAoBoC,WAApB,GAAkC0gM,SAAlC;AACAA,SAAS,CAAC9iM,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEAgX,SAAS,CAAClR,KAAV,GAAoB,YAAY;AAE/B,MAAImR,MAAM,GAAG,IAAI5T,0BAAJ,CAAkB,CAC9B,yBAD8B,EAG9B,6EAH8B,EAK9B,GAL8B,EAM7B7kL,IAN6B,CAMvB,IANuB,CAAlB,CAAb;AAQA,SAAO;AACNy4L,IAAAA,MAAM,EAAEA;AADF,GAAP;AAIA,CAdiB,EAAlB;;AAgBAD,SAAS,CAAC9iM,SAAV,CAAoBswK,QAApB,GAA+B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE3D,MAAI8jL,MAAM,GAAG3Y,OAAO,CAACxqG,OAAR,CAAiBkjH,SAAS,CAAClR,KAAV,CAAgBmR,MAAjC,CAAb;AAEA,SAAO3Y,OAAO,CAACtxJ,MAAR,CAAgBiqK,MAAM,GAAG,IAAT,GAAgB,KAAKroK,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,IAAxB,CAAhB,GAAiD,IAAjE,EAAuE,KAAKY,OAAL,CAAcZ,OAAd,CAAvE,EAAgGnrK,MAAhG,CAAP;AAEA,CAND;;AAQA6jL,SAAS,CAAC9iM,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKwb,EAAL,GAAUxb,MAAM,CAACwb,EAAjB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAooK,SAAS,CAAC9iM,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;AClDA;;AACA;;AACA;;AANA;;;AAQA,SAAS2yJ,WAAT,CAAsBtoK,EAAtB,EAA2B;AAE1BqxJ,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,GAArB;;AAEA,OAAKm6B,EAAL,GAAUA,EAAE,IAAI,IAAI42J,cAAJ,EAAhB;AAEA;;AAED0R,WAAW,CAAChjM,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAxB;AACAgjM,WAAW,CAAChjM,SAAZ,CAAsBoC,WAAtB,GAAoC4gM,WAApC;AACAA,WAAW,CAAChjM,SAAZ,CAAsB8rL,QAAtB,GAAiC,OAAjC;;AAEAkX,WAAW,CAACpR,KAAZ,GAAsB,YAAY;AAEjC;AAEA,MAAIqR,OAAO,GAAG,IAAI9T,0BAAJ,CAAkB,CAC/B,4BAD+B,EAG/B,4BAH+B,EAI/B,6BAJ+B,EAK/B,sCAL+B,EAO/B,yBAP+B,EAS/B,GAT+B,EAU9B7kL,IAV8B,CAUxB,IAVwB,CAAlB,CAAd;AAYA,SAAO;AACN24L,IAAAA,OAAO,EAAEA;AADH,GAAP;AAIA,CApBmB,EAApB;;AAsBAD,WAAW,CAAChjM,SAAZ,CAAsBswK,QAAtB,GAAiC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE7D,MAAI8jL,MAAM,GAAG3Y,OAAO,CAACxqG,OAAR,CAAiBojH,WAAW,CAACpR,KAAZ,CAAkBqR,OAAnC,CAAb;AAEA,SAAO7Y,OAAO,CAACtxJ,MAAR,CAAgBiqK,MAAM,GAAG,IAAT,GAAgB,KAAKroK,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,IAAxB,CAAhB,GAAiD,IAAjE,EAAuE,KAAKY,OAAL,CAAcZ,OAAd,CAAvE,EAAgGnrK,MAAhG,CAAP;AAEA,CAND;;AAQA+jL,WAAW,CAAChjM,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKwb,EAAL,GAAUxb,MAAM,CAACwb,EAAjB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAsoK,WAAW,CAAChjM,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;ACxDA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAbA;;;AAeA,SAAS6yJ,aAAT,CAAwB5+L,KAAxB,EAA+B+yB,KAA/B,EAAuC;AAEtC00J,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK+D,KAAL,GAAaA,KAAb;AACA,OAAK+yB,KAAL,GAAaA,KAAK,IAAI,IAAI85J,wBAAJ,CAAiB,CAAjB,EAAoB,CAApB,CAAtB;AAEA;;AAED+R,aAAa,CAACtR,KAAd,GAAwB,YAAY;AAEnC,MAAIuR,iBAAiB,GAAG,IAAIhU,0BAAJ,EAEvB;AACA;AAEC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GALsB,EAuCpB,IAvCoB,EAuCd;AAAEh4H,IAAAA,WAAW,EAAE;AAAf,GAvCc,CAAxB;AAyCA,SAAO;AACNgsI,IAAAA,iBAAiB,EAAEA;AADb,GAAP;AAIA,CA/CqB,EAAtB;;AAiDAD,aAAa,CAACljM,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA1B;AACAkjM,aAAa,CAACljM,SAAd,CAAwBoC,WAAxB,GAAsC8gM,aAAtC;AACAA,aAAa,CAACljM,SAAd,CAAwB8rL,QAAxB,GAAmC,WAAnC;;AAEAoX,aAAa,CAACljM,SAAd,CAAwBswK,QAAxB,GAAmC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE/D,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,QAAI+V,iBAAiB,GAAG/Y,OAAO,CAACxqG,OAAR,CAAiBsjH,aAAa,CAACtR,KAAd,CAAoBuR,iBAArC,CAAxB;AAEA,SAAKt/J,MAAL,GAAc,KAAKA,MAAL,IAAe,IAAI0wJ,sBAAJ,EAA7B;AACA,SAAK7sL,QAAL,GAAgB,KAAKA,QAAL,IAAiB,IAAIusL,0BAAJ,CAAkBA,2BAAaG,IAA/B,CAAjC;AACA,SAAK15J,EAAL,GAAU,KAAKA,EAAL,IAAW,IAAI42J,cAAJ,EAArB;AAEA,QAAIj6J,KAAK,GAAG,KAAKA,KAAL,CAAWizJ,KAAX,CAAkBF,OAAlB,EAA2B,IAA3B,CAAZ;;AAEA,QAAKA,OAAO,CAACp6I,QAAR,CAAiByP,IAAjB,KAA0B9+B,qBAA/B,EAA0C;AAEzC0W,MAAAA,KAAK,GAAG,MAAMA,KAAd;AAEA;;AAED,WAAO+yJ,OAAO,CAACtxJ,MAAR,CAAgBqqK,iBAAiB,GAAG,KAApB,GAA4B,KAAKz7L,QAAL,CAAc4iL,KAAd,CAAqBF,OAArB,EAA8B,IAA9B,CAA5B,GAAmE,IAAnE,GACtB,KAAKvmJ,MAAL,CAAYymJ,KAAZ,CAAmBF,OAAnB,EAA4B,IAA5B,CADsB,GACe,IADf,GAEtB,KAAK9lL,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2B,IAA3B,CAFsB,GAEc,IAFd,GAGtB,KAAK1vJ,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,IAAxB,CAHsB,GAGW,IAHX,GAItB/yJ,KAJsB,GAId,IAJF,EAIQ,KAAK2zJ,OAAL,CAAcZ,OAAd,CAJR,EAIiCnrK,MAJjC,CAAP;AAMA,GAtBD,MAsBO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,gDAAgDw6J,OAAO,CAACxvH,MAAxD,GAAiE,UAA/E;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKkyJ,OAAL,CAAcZ,OAAd,CAA/B,EAAwDnrK,MAAxD,CAAP;AAEA;AAED,CAhCD;;AAkCAikL,aAAa,CAACljM,SAAd,CAAwBswB,IAAxB,GAA+B,UAAWpR,MAAX,EAAoB;AAElD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AACA,OAAK+yB,KAAL,GAAanY,MAAM,CAACmY,KAApB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA6rK,aAAa,CAACljM,SAAd,CAAwBg6B,MAAxB,GAAiC,UAAWC,IAAX,EAAkB;AAElD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAAChZ,KAAL,GAAa,KAAKA,KAAL,CAAW2C,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAfD;;;;;;;;;ACtHA;;AACA;;AACA;;AACA;;AACA;;AARA;;;AAUA,SAAS+yJ,WAAT,CAAsB9+L,KAAtB,EAA6B+yB,KAA7B,EAAqC;AAEpC00J,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK+D,KAAL,GAAaA,KAAb;AACA,OAAK+yB,KAAL,GAAaA,KAAK,IAAI,IAAIo6J,oBAAJ,CAAe,CAAf,CAAtB;AAEA,OAAK4R,WAAL,GAAmB,KAAnB;AAEA;;AAEDD,WAAW,CAACxR,KAAZ,GAAsB,YAAY;AAEjC,MAAI0R,SAAS,GAAG,IAAInU,0BAAJ,CAAkB,CAEjC;AACA;AAEA;AAEA,oEAPiC,EASjC;AAEA,8BAXiC,EAYjC,4BAZiC,EAcjC,uDAdiC,EAejC,qEAfiC,EAgBjC,qEAhBiC,EAkBjC,2BAlBiC,EAoBjC,GApBiC,EAsBhC7kL,IAtBgC,CAsB1B,IAtB0B,CAAlB,EAsBA,IAtBA,EAsBM;AAAE6sD,IAAAA,WAAW,EAAE;AAAf,GAtBN,CAAhB;AAwBA,MAAIosI,gBAAgB,GAAG,IAAIpU,0BAAJ,CAAkB,CAExC,sEAFwC,EAIxC;AAEA,uFANwC,EAOxC,qFAPwC,EAQxC,uBARwC,EAQf;AAEzB,oCAVwC,EAWxC,kCAXwC,EAaxC,mCAbwC,EAexC,mDAfwC,EAiBxC,+DAjBwC,EAmBxC,uDAnBwC,EAqBxC,GArBwC,EAuBvC7kL,IAvBuC,CAuBjC,IAvBiC,CAAlB,EAuBP,CAAEg5L,SAAF,CAvBO,EAuBQ;AAAEnsI,IAAAA,WAAW,EAAE;AAAf,GAvBR,CAAvB;AAyBA,MAAIqsI,YAAY,GAAG,IAAIrU,0BAAJ,CAAkB,CACpC,gEADoC,EAGpC,2BAHoC,EAIpC,2BAJoC,EAMpC,0CANoC,EAOpC,wDAPoC,EAQpC,wDARoC,EAUpC,kEAVoC,EAYpC,GAZoC,EAanC7kL,IAbmC,CAa7B,IAb6B,CAAlB,EAaH,IAbG,EAaG;AAAE6sD,IAAAA,WAAW,EAAE;AAAf,GAbH,CAAnB;AAeA,SAAO;AACNmsI,IAAAA,SAAS,EAAEA,SADL;AAENC,IAAAA,gBAAgB,EAAEA,gBAFZ;AAGNC,IAAAA,YAAY,EAAEA;AAHR,GAAP;AAMA,CAxEmB,EAApB;;AA0EAJ,WAAW,CAACpjM,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAxB;AACAojM,WAAW,CAACpjM,SAAZ,CAAsBoC,WAAtB,GAAoCghM,WAApC;AACAA,WAAW,CAACpjM,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEAsX,WAAW,CAACpjM,SAAZ,CAAsBswK,QAAtB,GAAiC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE7D,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,QAAK,KAAKiW,WAAV,EAAwB;AAEvB,UAAIG,YAAY,GAAGpZ,OAAO,CAACxqG,OAAR,CAAiBwjH,WAAW,CAACxR,KAAZ,CAAkB4R,YAAnC,CAAnB;AAEA,aAAOpZ,OAAO,CAACtxJ,MAAR,CAAgB0qK,YAAY,GAAG,IAAf,GAAsB,KAAKl/L,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2B,WAA3B,CAAtB,GAAiE,IAAjE,GACtB,KAAK9lL,KAAL,CAAWo2B,EAAX,CAAc4vJ,KAAd,CAAqBF,OAArB,EAA8B,IAA9B,CADsB,GACiB,IADjB,GAEtB,KAAK/yJ,KAAL,CAAWizJ,KAAX,CAAkBF,OAAlB,EAA2B,GAA3B,CAFsB,GAEa,IAF7B,EAEmC,KAAKY,OAAL,CAAcZ,OAAd,CAFnC,EAE4DnrK,MAF5D,CAAP;AAIA,KARD,MAQO;AAEN,UAAIwkL,gBAAgB,GAAGrZ,OAAO,CAACxqG,OAAR,CAAiBwjH,WAAW,CAACxR,KAAZ,CAAkB0R,SAAnC,CAAvB;AAAA,UACCC,gBAAgB,GAAGnZ,OAAO,CAACxqG,OAAR,CAAiBwjH,WAAW,CAACxR,KAAZ,CAAkB2R,gBAAnC,CADpB;AAGA,WAAK1/J,MAAL,GAAc,KAAKA,MAAL,IAAe,IAAI0wJ,sBAAJ,EAA7B;AACA,WAAK7sL,QAAL,GAAgB,KAAKA,QAAL,IAAiB,IAAIusL,0BAAJ,CAAkBA,2BAAaG,IAA/B,CAAjC;AAEA,UAAIsP,oBAAoB,GAAGD,gBAAgB,GAAG,IAAnB,GAA0B,KAAKn/L,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2B,WAA3B,CAA1B,GAAqE,IAArE,GAC1B,KAAK9lL,KAAL,CAAWo2B,EAAX,CAAc4vJ,KAAd,CAAqBF,OAArB,EAA8B,IAA9B,CAD0B,GACa,IADb,GAE1B,KAAK/yJ,KAAL,CAAWizJ,KAAX,CAAkBF,OAAlB,EAA2B,GAA3B,CAF0B,GAES,IAFpC;AAIA,aAAOA,OAAO,CAACtxJ,MAAR,CAAgByqK,gBAAgB,GAAG,KAAnB,GAA2B,KAAK77L,QAAL,CAAc4iL,KAAd,CAAqBF,OAArB,EAA8B,IAA9B,CAA3B,GAAkE,IAAlE,GACtB,KAAKvmJ,MAAL,CAAYymJ,KAAZ,CAAmBF,OAAnB,EAA4B,IAA5B,CADsB,GACe,IADf,GAEtBsZ,oBAFsB,GAEC,IAFjB,EAEuB,KAAK1Y,OAAL,CAAcZ,OAAd,CAFvB,EAEgDnrK,MAFhD,CAAP;AAIA;AAED,GA5BD,MA4BO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,8CAA8Cw6J,OAAO,CAACxvH,MAAtD,GAA+D,UAA7E;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKkyJ,OAAL,CAAcZ,OAAd,CAA/B,EAAwDnrK,MAAxD,CAAP;AAEA;AAED,CAtCD;;AAwCAmkL,WAAW,CAACpjM,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AACA,OAAK+yB,KAAL,GAAanY,MAAM,CAACmY,KAApB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWA+rK,WAAW,CAACpjM,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAAChZ,KAAL,GAAa,KAAKA,KAAL,CAAW2C,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAfD;;;;;;;;;AClJA;;AAJA;;;AAMA,SAASszJ,UAAT,CAAqB9Y,IAArB,EAA2BvmL,KAA3B,EAAmC;AAElC23G,aAAK17G,IAAL,CAAW,IAAX;;AAEA,OAAKsqL,IAAL,GAAYA,IAAZ;AACA,OAAKvmL,KAAL,GAAaA,KAAb;AAEA;;AAEDq/L,UAAU,CAAC3jM,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAAvB;AACA2jM,UAAU,CAAC3jM,SAAX,CAAqBoC,WAArB,GAAmCuhM,UAAnC;AACAA,UAAU,CAAC3jM,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEA6X,UAAU,CAAC3jM,SAAX,CAAqBgrL,OAArB,GAA+B,UAAWZ,OAAX,EAAqB;AAEnD,MAAK,KAAK9lL,KAAV,EAAkB;AAEjB,WAAO,KAAKA,KAAL,CAAW0mL,OAAX,CAAoBZ,OAApB,CAAP;AAEA,GAJD,MAIO,IAAKA,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAE5C,WAAO,GAAP;AAEA;;AAED,SAAO,MAAP;AAEA,CAdD;;AAgBAuW,UAAU,CAAC3jM,SAAX,CAAqBswK,QAArB,GAAgC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5D,MAAI4rK,IAAI,GAAG,KAAKA,IAAL,CAAUP,KAAV,CAAiBF,OAAjB,EAA0BnrK,MAA1B,IAAqC,GAAhD;AAEAmrK,EAAAA,OAAO,CAACqC,WAAR,CAAqB5B,IAArB;;AAEA,MAAKT,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnC,QAAK,KAAK9oL,KAAV,EAAkB;AAEjB,aAAO,KAAKA,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2BnrK,MAA3B,CAAP;AAEA;AAED,GARD,MAQO;AAEN,WAAO,KAAK3a,KAAL,GAAa,KAAKA,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2BnrK,MAA3B,CAAb,GAAmDmrK,OAAO,CAACtxJ,MAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4B7Z,MAA5B,CAA1D;AAEA;AAED,CApBD;;AAsBA0kL,UAAU,CAAC3jM,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;;AAEA,OAAK2rK,IAAL,GAAY3rK,MAAM,CAAC2rK,IAAnB;AACA,OAAKvmL,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWAq/L,UAAU,CAAC3jM,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACw6I,IAAL,GAAY,KAAKA,IAAL,CAAU7wJ,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEA,QAAK,KAAK3oB,KAAV,EAAkB+rC,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB;;AAED,SAAOojB,IAAP;AAEA,CAhBD;;;;;;;;;AChEA;;AACA;;AALA;;;AAOA,IAAIi+I,MAAM,GAAG+B,qBAAUn/J,QAAvB;;AAEA,SAAS0yK,QAAT,CAAmBr7L,CAAnB,EAAsBE,CAAtB,EAAyBmyB,CAAzB,EAA4B5c,CAA5B,EAAgC;AAE/B+tK,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,GAArB;;AAEA,OAAKgI,CAAL,GAASA,CAAT;AACA,OAAKE,CAAL,GAASA,CAAT;AACA,OAAKmyB,CAAL,GAASA,CAAT;AACA,OAAK5c,CAAL,GAASA,CAAT;AAEA;;AAED4lL,QAAQ,CAAC5jM,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAArB;AACA4jM,QAAQ,CAAC5jM,SAAT,CAAmBoC,WAAnB,GAAiCwhM,QAAjC;AACAA,QAAQ,CAAC5jM,SAAT,CAAmB8rL,QAAnB,GAA8B,MAA9B;;AAEA8X,QAAQ,CAAC5jM,SAAT,CAAmB6jM,cAAnB,GAAoC,YAAY;AAE/C,MAAI3iM,CAAC,GAAGotL,MAAM,CAACzuL,MAAf;;AAEA,SAAQqB,CAAC,EAAT,EAAe;AAEd,QAAK,KAAMotL,MAAM,CAAEptL,CAAF,CAAZ,MAAwBe,SAA7B,EAAyC;AAExC,QAAGf,CAAH;AAEA;AAEA;AAED;;AAED,SAAOhC,IAAI,CAAC+E,GAAL,CAAU/C,CAAV,EAAa,CAAb,CAAP;AAEA,CAlBD;;AAoBA0iM,QAAQ,CAAC5jM,SAAT,CAAmBgrL,OAAnB,GAA6B,UAAWZ,OAAX,EAAqB;AAEjD,SAAOA,OAAO,CAAC2U,iBAAR,CAA2B,KAAK8E,cAAL,EAA3B,CAAP;AAEA,CAJD;;AAMAD,QAAQ,CAAC5jM,SAAT,CAAmBswK,QAAnB,GAA8B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE1D,MAAI5T,IAAI,GAAG,KAAK2/K,OAAL,CAAcZ,OAAd,CAAX;AAAA,MACCvqL,MAAM,GAAG,KAAKgkM,cAAL,EADV;AAAA,MAECC,OAAO,GAAG,EAFX;;AAIA,OAAM,IAAI5iM,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGrB,MAArB,EAA6BqB,CAAC,EAA9B,EAAoC;AAEnC,QAAIk+L,GAAG,GAAG,KAAM9Q,MAAM,CAAEptL,CAAF,CAAZ,CAAV;AAEA4iM,IAAAA,OAAO,CAACz5L,IAAR,CAAc+0L,GAAG,GAAGA,GAAG,CAAC9U,KAAJ,CAAWF,OAAX,EAAoB,GAApB,CAAH,GAA+B,KAAhD;AAEA;;AAED,MAAIS,IAAI,GAAG,CAAEhrL,MAAM,GAAG,CAAT,GAAauqL,OAAO,CAACsE,wBAAR,CAAkC7uL,MAAlC,CAAb,GAA0D,EAA5D,IAAmE,IAAnE,GAA0EikM,OAAO,CAACx5L,IAAR,CAAc,IAAd,CAA1E,GAAiG,IAA5G;AAEA,SAAO8/K,OAAO,CAACtxJ,MAAR,CAAgB+xJ,IAAhB,EAAsBx/K,IAAtB,EAA4B4T,MAA5B,CAAP;AAEA,CAlBD;;AAoBA2kL,QAAQ,CAAC5jM,SAAT,CAAmBswB,IAAnB,GAA0B,UAAWpR,MAAX,EAAoB;AAE7C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAM,IAAIwwK,IAAV,IAAkBxwK,MAAM,CAACovK,MAAzB,EAAkC;AAEjC,SAAMoB,IAAN,IAAexwK,MAAM,CAACovK,MAAP,CAAeoB,IAAf,CAAf;AAEA;;AAED,SAAO,IAAP;AAEA,CAZD;;AAcAkU,QAAQ,CAAC5jM,SAAT,CAAmBg6B,MAAnB,GAA4B,UAAWC,IAAX,EAAkB;AAE7C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACi+I,MAAL,GAAc,EAAd;AAEA,QAAIzuL,MAAM,GAAG,KAAKgkM,cAAL,EAAb;;AAEA,SAAM,IAAI3iM,CAAC,GAAG,CAAd,EAAiBA,CAAC,GAAGrB,MAArB,EAA6BqB,CAAC,EAA9B,EAAoC;AAEnC,UAAIk+L,GAAG,GAAG,KAAM9Q,MAAM,CAAEptL,CAAF,CAAZ,CAAV;;AAEA,UAAKk+L,GAAL,EAAW;AAEV/uJ,QAAAA,IAAI,CAACi+I,MAAL,CAAaA,MAAM,CAAEptL,CAAF,CAAnB,IAA6Bk+L,GAAG,CAACplK,MAAJ,CAAYC,IAAZ,EAAmBhN,IAAhD;AAEA;AAED;AAGD;;AAED,SAAOojB,IAAP;AAEA,CA7BD;;;;;;;;;AChFA;;AAJA;;;AAMA,SAAS0zJ,UAAT,CAAqBtqL,IAArB,EAA2B8jC,UAA3B,EAAwC;AAEvC0+D,aAAK17G,IAAL,CAAW,IAAX;;AAEA,OAAKkZ,IAAL,GAAYA,IAAZ;AACA,OAAK8jC,UAAL,GAAkBA,UAAU,IAAI,GAAhC;AAEA;;AAEDwmJ,UAAU,CAAC/jM,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAAvB;AACA+jM,UAAU,CAAC/jM,SAAX,CAAqBoC,WAArB,GAAmC2hM,UAAnC;AACAA,UAAU,CAAC/jM,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEAiY,UAAU,CAAC/jM,SAAX,CAAqBgrL,OAArB,GAA+B,UAAWZ,OAAX,EAAqB;AAEnD,SAAOA,OAAO,CAAC2U,iBAAR,CAA2B,KAAKxhJ,UAAL,CAAgB19C,MAA3C,CAAP;AAEA,CAJD;;AAMAkkM,UAAU,CAAC/jM,SAAX,CAAqBswK,QAArB,GAAgC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5D,MAAI5T,IAAI,GAAG,KAAKoO,IAAL,CAAUuxK,OAAV,CAAmBZ,OAAnB,CAAX;AAAA,MACC3wK,IAAI,GAAG,KAAKA,IAAL,CAAU6wK,KAAV,CAAiBF,OAAjB,EAA0B/+K,IAA1B,CADR;AAAA,MAEC24L,WAAW,GAAG5Z,OAAO,CAACoB,aAAR,CAAuBngL,IAAvB,IAAgC,CAF/C;;AAIA,MAAK24L,WAAW,GAAG,CAAnB,EAAuB;AAEtB;AAEA,QAAIC,YAAY,GAAG,CAAnB;AAAA,QACC1mJ,UAAU,GAAG6sI,OAAO,CAACuU,uBAAR,CAAiC,KAAKphJ,UAAtC,CADd;AAGA,QAAIr8C,CAAJ;AAAA,QAAO29B,GAAG,GAAG0e,UAAU,CAAC19C,MAAxB;;AAEA,SAAMqB,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAG29B,GAAjB,EAAsB39B,CAAC,EAAvB,EAA6B;AAE5B+iM,MAAAA,YAAY,GAAG/kM,IAAI,CAAC+E,GAAL,CAAUggM,YAAV,EAAwB7Z,OAAO,CAAC+U,iBAAR,CAA2B5hJ,UAAU,CAACC,MAAX,CAAmBt8C,CAAnB,CAA3B,CAAxB,CAAf;AAEA;;AAED,QAAK+iM,YAAY,GAAGD,WAApB,EAAkCC,YAAY,GAAGD,WAAf,CAfZ,CAiBtB;;AAEAvqL,IAAAA,IAAI,IAAI,GAAR;;AAEA,SAAMvY,CAAC,GAAG,CAAV,EAAaA,CAAC,GAAG29B,GAAjB,EAAsB39B,CAAC,EAAvB,EAA6B;AAE5B,UAAImyD,GAAG,GAAG+2H,OAAO,CAAC+U,iBAAR,CAA2B5hJ,UAAU,CAACC,MAAX,CAAmBt8C,CAAnB,CAA3B,CAAV;AAEA,UAAKmyD,GAAG,GAAG4wI,YAAX,EAA0B5wI,GAAG,GAAG4wI,YAAN;AAE1BxqL,MAAAA,IAAI,IAAI2wK,OAAO,CAAC8U,iBAAR,CAA2B7rI,GAA3B,CAAR;AAEA;;AAED,WAAO+2H,OAAO,CAACtxJ,MAAR,CAAgBrf,IAAhB,EAAsB,KAAKuxK,OAAL,CAAcZ,OAAd,CAAtB,EAA+CnrK,MAA/C,CAAP;AAEA,GAjCD,MAiCO;AAEN;AAEA,WAAOmrK,OAAO,CAACtxJ,MAAR,CAAgBrf,IAAhB,EAAsBpO,IAAtB,EAA4B4T,MAA5B,CAAP;AAEA;AAED,CA/CD;;AAiDA8kL,UAAU,CAAC/jM,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC;;AAEA,OAAKzF,IAAL,GAAYyF,MAAM,CAACzF,IAAnB;AACA,OAAK8jC,UAAL,GAAkBr+B,MAAM,CAACq+B,UAAzB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWAwmJ,UAAU,CAAC/jM,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC52B,IAAL,GAAY,KAAKA,IAAL,CAAUugB,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AACAojB,IAAAA,IAAI,CAACkN,UAAL,GAAkB,KAAKA,UAAvB;AAEA;;AAED,SAAOlN,IAAP;AAEA,CAfD;;;;;;;;;ACjFA;;AACA;;AALA;;;AAOA,SAAS6zJ,SAAT,CAAoB7sK,KAApB,EAA2Bh2B,KAA3B,EAAkCysH,SAAlC,EAA8C;AAE7C2jE,uBAAUlxL,IAAV,CAAgB,IAAhB;;AAEA,OAAK82B,KAAL,GAAaA,KAAK,KAAKp1B,SAAV,GAAsBo1B,KAAtB,GAA8B,CAA3C;AACA,OAAKh2B,KAAL,GAAaA,KAAK,IAAI6iM,SAAS,CAACC,MAAhC;AAEA,OAAKr2E,SAAL,GAAiBA,SAAS,KAAK7rH,SAAd,GAA0B6rH,SAA1B,GAAsCz2F,KAAK,KAAKp1B,SAAjE;AAEA;;AAEDiiM,SAAS,CAACC,MAAV,GAAmB,QAAnB;AACAD,SAAS,CAAChQ,KAAV,GAAkB,OAAlB;AACAgQ,SAAS,CAACE,KAAV,GAAkB,OAAlB;AAEAF,SAAS,CAAClkM,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAe43J,qBAAUzxL,SAAzB,CAAtB;AACAkkM,SAAS,CAAClkM,SAAV,CAAoBoC,WAApB,GAAkC8hM,SAAlC;AACAA,SAAS,CAAClkM,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEAoY,SAAS,CAAClkM,SAAV,CAAoBktL,WAApB,GAAkC,YAAY;AAE7C;AAEA,SAAO,KAAP;AAEA,CAND;;AAQAgX,SAAS,CAAClkM,SAAV,CAAoBosL,SAApB,GAAgC,YAAY;AAE3C;AAEA,SAAO,KAAKt+D,SAAL,KAAoB,KAAKzsH,KAAL,KAAe6iM,SAAS,CAACC,MAAzB,IAAmC,KAAK9iM,KAAL,KAAe6iM,SAAS,CAACE,KAAhF,CAAP;AAEA,CAND;;AAQAF,SAAS,CAAClkM,SAAV,CAAoBorL,WAApB,GAAkC,UAAWjrH,KAAX,EAAmB;AAEpD,MAAI9oC,KAAK,GAAG,KAAKy2F,SAAL,GAAiB,KAAKz2F,KAAtB,GAA8B,CAA1C;;AAEA,UAAS,KAAKh2B,KAAd;AAEC,SAAK6iM,SAAS,CAAChQ,KAAf;AAEC,WAAK5vL,KAAL,IAAc67D,KAAK,CAACj8D,KAAN,GAAcmzB,KAA5B;AAEA;;AAED,SAAK6sK,SAAS,CAACE,KAAf;AAEC,WAAK9/L,KAAL,GAAa67D,KAAK,CAACj8D,KAAN,GAAcmzB,KAA3B;AAEA;;AAED;AAEC,WAAK/yB,KAAL,GAAa67D,KAAK,CAACD,IAAN,GAAa7oC,KAA1B;AAhBF;AAoBA,CAxBD;;AA0BA6sK,SAAS,CAAClkM,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9CuyK,uBAAUzxL,SAAV,CAAoBswB,IAApB,CAAyB/vB,IAAzB,CAA+B,IAA/B,EAAqC2e,MAArC;;AAEA,OAAK7d,KAAL,GAAa6d,MAAM,CAAC7d,KAApB;AACA,OAAKg2B,KAAL,GAAanY,MAAM,CAACmY,KAApB;AAEA,OAAKy2F,SAAL,GAAiB5uG,MAAM,CAAC4uG,SAAxB;AAEA,SAAO,IAAP;AAEA,CAXD;;AAaAo2E,SAAS,CAAClkM,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAChvC,KAAL,GAAa,KAAKA,KAAlB;AACAgvC,IAAAA,IAAI,CAAChZ,KAAL,GAAa,KAAKA,KAAlB;AAEAgZ,IAAAA,IAAI,CAACy9E,SAAL,GAAiB,KAAKA,SAAtB;AAEA;;AAED,SAAOz9E,IAAP;AAEA,CAjBD;;AAmBAs+I,iBAAQE,UAAR,CAAoB,MAApB,EAA4B,YAAY;AAEvC,SAAO,IAAIqV,SAAJ,EAAP;AAEA,CAJD;;;;;;;;;AChGA;;AAEA;;AANA;;;AAQA,SAASG,YAAT,CAAuBhkM,MAAvB,EAA+B6H,MAA/B,EAAwC;AAEvCkpL,2BAAY7wL,IAAZ,CAAkB,IAAlB;;AAEA,OAAK2H,MAAL,GAAc,EAAd;AAEA,OAAKo8L,QAAL,GAAgB,IAAI7iK,oBAAJ,EAAhB;AAEA,OAAK8iK,SAAL,CAAgBlkM,MAAhB;AACA,OAAKmkM,SAAL,CAAgBt8L,MAAhB;AAEA;;AAEDm8L,YAAY,CAACrkM,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAeu3J,yBAAYpxL,SAA3B,CAAzB;AACAqkM,YAAY,CAACrkM,SAAb,CAAuBoC,WAAvB,GAAqCiiM,YAArC;AACAA,YAAY,CAACrkM,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;;AAEAuY,YAAY,CAACrkM,SAAb,CAAuBktL,WAAvB,GAAqC;AAAW;AAAc;AAE7D,SAAO,KAAP;AAEA,CAJD;;AAMAmX,YAAY,CAACrkM,SAAb,CAAuBwkM,SAAvB,GAAmC,UAAWt8L,MAAX,EAAoB;AAEtD,UAAS,KAAKA,MAAL,CAAYmD,IAArB;AAEC,SAAK,SAAL;AAEC,aAAO,KAAKo5L,MAAZ;AAEA,aAAO,KAAKtqB,KAAZ;AACA,aAAO,KAAKuqB,cAAZ;AAEA,aAAO,KAAKC,YAAZ;AAEA;AAXF;;AAeA,OAAKz8L,MAAL,GAAcA,MAAM,IAAI,EAAxB;;AAEA,UAAS,KAAKA,MAAL,CAAYmD,IAArB;AAEC,SAAK,SAAL;AAEC,WAAKo5L,MAAL,GAAc,IAAIhjK,oBAAJ,EAAd;AAEA,WAAK04I,KAAL,GAAa,IAAI14I,oBAAJ,EAAb;AACA,WAAKijK,cAAL,GAAsB,IAAIjjK,oBAAJ,EAAtB;AAEA,WAAKkjK,YAAL,GAAoB,IAAIljK,oBAAJ,EAApB;AAEA;AAXF;AAeA,CAlCD;;AAoCA4iK,YAAY,CAACrkM,SAAb,CAAuBukM,SAAvB,GAAmC,UAAWlkM,MAAX,EAAoB;AAEtD,MAAK,KAAKA,MAAV,EAAmB;AAElB,WAAO,KAAKqH,QAAZ;AACA,WAAO,KAAKk9L,WAAZ;AAEA;;AAED,OAAKvkM,MAAL,GAAcA,MAAd;;AAEA,MAAKA,MAAL,EAAc;AAEb,SAAKqH,QAAL,GAAgBrH,MAAM,CAACiuC,gBAAP,CAAyB,KAAK5mC,QAAL,IAAiB,IAAI+5B,oBAAJ,EAA1C,CAAhB;AACA,SAAKmjK,WAAL,GAAmB,KAAKl9L,QAAL,CAAc2oB,KAAd,EAAnB;AAEA;AAED,CAlBD;;AAoBAg0K,YAAY,CAACrkM,SAAb,CAAuB6kM,mBAAvB,GAA6C;AAAW;AAAY;AAEnE,MAAK,KAAKxkM,MAAV,EAAmB;AAElB,SAAKqH,QAAL,GAAgB,KAAKrH,MAAL,CAAYiuC,gBAAZ,CAA8B,KAAK5mC,QAAL,IAAiB,IAAI+5B,oBAAJ,EAA/C,CAAhB;AACA,SAAK6iK,QAAL,CAAc3zK,UAAd,CAA0B,KAAKjpB,QAA/B,EAAyC,KAAKk9L,WAA9C;AACA,SAAKA,WAAL,CAAiBt0K,IAAjB,CAAuB,KAAK5oB,QAA5B;AAEA;AAED,CAVD;;AAYA28L,YAAY,CAACrkM,SAAb,CAAuBorL,WAAvB,GAAqC,UAAWjrH,KAAX,EAAmB;AAEvD,OAAK0kI,mBAAL,CAA0B1kI,KAA1B;;AAEA,UAAS,KAAKj4D,MAAL,CAAYmD,IAArB;AAEC,SAAK,SAAL;AAEC;AACA,UAAIy5L,QAAQ,GAAG3kI,KAAK,CAACj8D,KAAN,IAAgB,KAAKgE,MAAL,CAAYkgH,GAAZ,IAAmB,EAAnC,CAAf;AAEA,UAAI28E,MAAM,GAAG7lM,IAAI,CAACsO,GAAL,CAAU,KAAKtF,MAAL,CAAY68L,MAAtB,EAA8BD,QAA9B,CAAb;AAAA,UACCE,OAAO,GAAG9lM,IAAI,CAACsO,GAAL,CAAU,KAAKtF,MAAL,CAAY88L,OAAtB,EAA+BF,QAA/B,CADX,CALD,CAQC;;AACA,WAAKR,QAAL,CAAcxzK,cAAd,CAA8B5xB,IAAI,CAAC4sJ,GAAL,CAAU,CAAE,KAAK5jJ,MAAL,CAAY88L,OAAd,GAAwBF,QAAlC,CAA9B,EATD,CAWC;;AACA,WAAKR,QAAL,CAAczrL,GAAd,CAAmB,KAAK6rL,cAAxB;AACA,WAAKJ,QAAL,CAAczrL,GAAd,CAAmB,KAAKshK,KAAL,CAAWrpJ,cAAX,CAA2Bk0K,OAA3B,EAAqCl0K,cAArC,CAAqD,IAAIi0K,MAAzD,CAAnB,EAbD,CAeC;;AACA,WAAK5qB,KAAL,CAAWxpJ,UAAX,CAAuB,KAAK2zK,QAA5B,EAAsC,KAAKK,YAA3C,EAhBD,CAkBC;;AACA,WAAKD,cAAL,CAAoB7rL,GAApB,CAAyB,KAAKshK,KAA9B;AACA,WAAKuqB,cAAL,CAAoB5zK,cAApB,CAAoCi0K,MAApC,EApBD,CAsBC;;AACA,WAAKN,MAAL,CAAY5rL,GAAZ,CAAiB,KAAK6rL,cAAtB,EAvBD,CAyBC;;AACA,WAAKD,MAAL,CAAY3zK,cAAZ,CAA4Bk0K,OAA5B;AAEA,WAAKL,YAAL,CAAkBr0K,IAAlB,CAAwB,KAAKg0K,QAA7B;AACA,WAAKhgM,KAAL,CAAWgsB,IAAX,CAAiB,KAAKm0K,MAAtB;AAEA;;AAED;AAEC,WAAKngM,KAAL,CAAWgsB,IAAX,CAAiB,KAAKg0K,QAAtB;AArCF;AAyCA,CA7CD;;AA+CAD,YAAY,CAACrkM,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjDkyK,2BAAYpxL,SAAZ,CAAsBswB,IAAtB,CAA2B/vB,IAA3B,CAAiC,IAAjC,EAAuC2e,MAAvC;;AAEA,MAAKA,MAAM,CAAC7e,MAAZ,EAAqB,KAAKkkM,SAAL,CAAgBrlL,MAAM,CAAC7e,MAAvB;AAErB,OAAKmkM,SAAL,CAAgBtlL,MAAM,CAAChX,MAAvB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYAm8L,YAAY,CAACrkM,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEA,QAAK,KAAK55B,MAAV,EAAmBgwC,IAAI,CAAChwC,MAAL,GAAc,KAAKA,MAAL,CAAY4sB,IAA1B,CAJN,CAMb;;AACAojB,IAAAA,IAAI,CAACnoC,MAAL,GAAcgP,IAAI,CAACC,KAAL,CAAYD,IAAI,CAACe,SAAL,CAAgB,KAAK/P,MAArB,CAAZ,CAAd;AAEA;;AAED,SAAOmoC,IAAP;AAEA,CAjBD;;;;;;;;;AC1JA;;AACA;;AACA;;AANA;;;AAQA,SAAS40J,eAAT,CAA0BvqK,EAA1B,EAA8BhzB,QAA9B,EAAyC;AAExCqoL,iCAAexvL,IAAf,CAAqB,IAArB,EAA2B,wCAA3B,EAAqE,MAArE;;AAEA,OAAKm6B,EAAL,GAAUA,EAAE,IAAI,IAAI42J,cAAJ,EAAhB;AACA,OAAK5pL,QAAL,GAAgBA,QAAQ,IAAI,IAAIg4L,wBAAJ,EAA5B;AAEA;;AAEDuF,eAAe,CAACjlM,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAek2J,+BAAe/vL,SAA9B,CAA5B;AACAilM,eAAe,CAACjlM,SAAhB,CAA0BoC,WAA1B,GAAwC6iM,eAAxC;AACAA,eAAe,CAACjlM,SAAhB,CAA0B8rL,QAA1B,GAAqC,aAArC;;AAEAmZ,eAAe,CAACjlM,SAAhB,CAA0BswK,QAA1B,GAAqC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEjE,OAAK2vK,QAAL,CAAe,QAAf,IAA4B,KAAKl0J,EAAjC;AACA,OAAKk0J,QAAL,CAAe,aAAf,IAAiC,KAAKlnL,QAAtC;AAEA,SAAOqoL,+BAAe/vL,SAAf,CAAyBswK,QAAzB,CAAkC/vK,IAAlC,CAAwC,IAAxC,EAA8C6pL,OAA9C,EAAuDnrK,MAAvD,CAAP;AAEA,CAPD;;AASAgmL,eAAe,CAACjlM,SAAhB,CAA0B62B,cAA1B,GAA2C,UAAWC,EAAX,EAAeC,EAAf,EAAmBC,EAAnB,EAAuBC,EAAvB,EAA2BC,QAA3B,EAAqCC,EAArC,EAAyCC,EAAzC,EAA8C;AAExFD,EAAAA,EAAE,GAAGA,EAAE,KAAKl1B,SAAP,GAAmBk1B,EAAnB,GAAwB,EAA7B;AACAC,EAAAA,EAAE,GAAGA,EAAE,KAAKn1B,SAAP,GAAmBm1B,EAAnB,GAAwB,EAA7B;AAEA,OAAK1vB,QAAL,CAAcpD,KAAd,CAAoBuyB,cAApB,CAAoCC,EAApC,EAAwCC,EAAxC,EAA4CC,EAA5C,EAAgDC,EAAhD,EAAoDC,QAApD,EAA8DC,EAA9D,EAAkEC,EAAlE;AAEA,CAPD;;AASA6tK,eAAe,CAACjlM,SAAhB,CAA0BswB,IAA1B,GAAiC,UAAWpR,MAAX,EAAoB;AAEpD6wK,iCAAe/vL,SAAf,CAAyBswB,IAAzB,CAA8B/vB,IAA9B,CAAoC,IAApC,EAA0C2e,MAA1C;;AAEA,OAAKwb,EAAL,GAAUxb,MAAM,CAACwb,EAAjB;AACA,OAAKhzB,QAAL,GAAgBwX,MAAM,CAACxX,QAAvB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWAu9L,eAAe,CAACjlM,SAAhB,CAA0Bg6B,MAA1B,GAAmC,UAAWC,IAAX,EAAkB;AAEpD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AACAojB,IAAAA,IAAI,CAAC3oC,QAAL,GAAgB,KAAKA,QAAL,CAAcsyB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAfD;;;;;;;;;AC9CA;;AAJA;;;AAMA,SAAS60J,eAAT,CAA0BvoK,OAA1B,EAAoC;AAEnC80J,uBAAUlxL,IAAV,CAAgB,IAAhB;;AAEA,OAAKo8B,OAAL,GAAeA,OAAf;AAEA,OAAKwoK,WAAL,GAAmB,CAAnB;AAEA;;AAEDD,eAAe,CAACllM,SAAhB,GAA4BY,MAAM,CAACi5B,MAAP,CAAe43J,qBAAUzxL,SAAzB,CAA5B;AACAklM,eAAe,CAACllM,SAAhB,CAA0BoC,WAA1B,GAAwC8iM,eAAxC;AACAA,eAAe,CAACllM,SAAhB,CAA0B8rL,QAA1B,GAAqC,aAArC;AAEAlrL,MAAM,CAACwV,gBAAP,CAAyB8uL,eAAe,CAACllM,SAAzC,EAAoD;AAEnDsE,EAAAA,KAAK,EAAE;AAENwa,IAAAA,GAAG,EAAE,YAAY;AAEhB,UAAK,KAAKqmL,WAAL,KAAqB,CAA1B,EAA8B;AAE7B,YAAIvtK,KAAK,GAAG,KAAK+E,OAAL,CAAar4B,KAAb,CAAmBszB,KAA/B;AAEA,YAAK73B,KAAK,CAACoC,OAAN,CAAey1B,KAAf,CAAL,EAA8BA,KAAK,GAAGA,KAAK,CAAE,CAAF,CAAb;AAE9B,aAAKutK,WAAL,GAAmBvtK,KAAK,KAAK31B,SAAV,GAAsB/C,IAAI,CAACuO,GAAL,CAAUvO,IAAI,CAAC+E,GAAL,CAAU2zB,KAAK,CAAC/sB,KAAhB,EAAuB+sB,KAAK,CAAC9sB,MAA7B,CAAV,IAAoD5L,IAAI,CAAC62F,KAA/E,GAAuF,CAA1G;AAEA;;AAED,aAAO,KAAKovG,WAAZ;AAEA,KAhBK;AAkBNz1K,IAAAA,GAAG,EAAE,YAAY,CAAG;AAlBd;AAF4C,CAApD;;AA0BAw1K,eAAe,CAACllM,SAAhB,CAA0Bg6B,MAA1B,GAAmC,UAAWC,IAAX,EAAkB;AAEpD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC1T,OAAL,GAAe,KAAKA,OAAL,CAAa1P,IAA5B;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;AC1CA;;AACA;;AACA;;AANA;;;AAQA,SAAS+0J,oBAAT,CAA+BpjJ,SAA/B,EAA0CrlB,OAA1C,EAAoD;AAEnDovJ,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,GAArB;;AAEA,OAAKyhD,SAAL,GAAiBA,SAAjB;AACA,OAAKrlB,OAAL,GAAeA,OAAf;AAEA,OAAKwoK,WAAL,GAAmBljM,SAAnB;AAEA;;AAEDmjM,oBAAoB,CAACxT,KAArB,GAA+B,YAAY;AAE1C,MAAIyT,mBAAmB,GAAG,IAAIlW,0BAAJ,CAAkB,CAC3C;AACA,6FAF2C,EAI3C,kEAJ2C,EAK3C,6DAL2C,EAO3C;AACA,6DAR2C,EAU3C,GAV2C,EAW1C7kL,IAX0C,CAWpC,IAXoC,CAAlB,CAA1B;AAaA,SAAO;AACN+6L,IAAAA,mBAAmB,EAAEA;AADf,GAAP;AAIA,CAnB4B,EAA7B;;AAqBAD,oBAAoB,CAACplM,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAjC;AACAolM,oBAAoB,CAACplM,SAArB,CAA+BoC,WAA/B,GAA6CgjM,oBAA7C;AACAA,oBAAoB,CAACplM,SAArB,CAA+B8rL,QAA/B,GAA0C,kBAA1C;;AAEAsZ,oBAAoB,CAACplM,SAArB,CAA+Bo1J,UAA/B,GAA4C,UAAWz4H,OAAX,EAAqB;AAEhE,OAAKA,OAAL,GAAeA,OAAf;AAEA,SAAO,IAAP;AAEA,CAND;;AAQAyoK,oBAAoB,CAACplM,SAArB,CAA+BswK,QAA/B,GAA0C,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAEtE,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,SAAK+X,WAAL,GAAmB,KAAKA,WAAL,IAAoB,IAAID,gCAAJ,EAAvC;AACA,SAAKC,WAAL,CAAiBxoK,OAAjB,GAA2B,KAAKA,OAAhC;AAEA,QAAI0oK,mBAAmB,GAAGjb,OAAO,CAACxqG,OAAR,CAAiBwlH,oBAAoB,CAACxT,KAArB,CAA2ByT,mBAA5C,CAA1B;AAEA,WAAOjb,OAAO,CAACtxJ,MAAR,CAAgBusK,mBAAmB,GAAG,IAAtB,GAA6B,KAAKrjJ,SAAL,CAAesoI,KAAf,CAAsBF,OAAtB,EAA+B,GAA/B,CAA7B,GAAoE,IAApE,GAA2E,KAAK+a,WAAL,CAAiB7a,KAAjB,CAAwBF,OAAxB,EAAiC,GAAjC,CAA3E,GAAoH,IAApI,EAA0I,KAAK/+K,IAA/I,EAAqJ4T,MAArJ,CAAP;AAEA,GATD,MASO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,uDAAuDw6J,OAAO,CAACxvH,MAA/D,GAAwE,UAAtF;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,KAAhB,EAAuB,KAAKztB,IAA5B,EAAkC4T,MAAlC,CAAP;AAEA;AAED,CAnBD;;AAqBAmmL,oBAAoB,CAACplM,SAArB,CAA+BswB,IAA/B,GAAsC,UAAWpR,MAAX,EAAoB;AAEzD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAKyd,OAAL,GAAezd,MAAM,CAACyd,OAAtB;AACA,OAAKqlB,SAAL,GAAiB9iC,MAAM,CAAC8iC,SAAxB;AAEA,SAAO,IAAP;AAEA,CATD;;AAWAojJ,oBAAoB,CAACplM,SAArB,CAA+Bg6B,MAA/B,GAAwC,UAAWC,IAAX,EAAkB;AAEzD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC1T,OAAL,GAAe,KAAKA,OAApB;AACA0T,IAAAA,IAAI,CAAC2R,SAAL,GAAiB,KAAKA,SAAtB;AAEA;;AAED,SAAO3R,IAAP;AAEA,CAfD;;;;;;;;;AChFA;;AAJA;;;AAMA,SAASi1J,WAAT,CAAsBxJ,KAAtB,EAA8B;AAE7B/P,qBAASxrL,IAAT,CAAe,IAAf;;AAEA,OAAKu7L,KAAL,GAAaA,KAAK,IAAI,EAAtB;AAEA;;AAEDwJ,WAAW,CAACtlM,SAAZ,GAAwBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAxB;AACAslM,WAAW,CAACtlM,SAAZ,CAAsBoC,WAAtB,GAAoCkjM,WAApC;AACAA,WAAW,CAACtlM,SAAZ,CAAsB8rL,QAAtB,GAAiC,SAAjC;;AAEAwZ,WAAW,CAACtlM,SAAZ,CAAsBgrL,OAAtB,GAAgC,UAAWZ,OAAX,EAAoBnrK,MAApB,EAA6B;AAE5D,SAAOA,MAAP;AAEA,CAJD;;AAMAqmL,WAAW,CAACtlM,SAAZ,CAAsBswK,QAAtB,GAAiC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE7D,MAAK,KAAK68K,KAAL,CAAY1R,OAAO,CAAC3yF,IAApB,CAAL,EAAkC;AAEjC,WAAO,KAAKqkG,KAAL,CAAY1R,OAAO,CAAC3yF,IAApB,EAA2B6yF,KAA3B,CAAkCF,OAAlC,EAA2CnrK,MAA3C,CAAP;AAEA;;AAED,SAAOmrK,OAAO,CAACtxJ,MAAR,CAAgB,KAAhB,EAAuB,GAAvB,EAA4B7Z,MAA5B,CAAP;AAEA,CAVD;;AAYAqmL,WAAW,CAACtlM,SAAZ,CAAsBswB,IAAtB,GAA6B,UAAWpR,MAAX,EAAoB;AAEhD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAM,IAAIwwK,IAAV,IAAkBxwK,MAAM,CAAC48K,KAAzB,EAAiC;AAEhC,SAAKA,KAAL,CAAYpM,IAAZ,IAAqBxwK,MAAM,CAAC48K,KAAP,CAAcpM,IAAd,CAArB;AAEA;;AAED,SAAO,IAAP;AAEA,CAZD;;AAcA4V,WAAW,CAACtlM,SAAZ,CAAsBg6B,MAAtB,GAA+B,UAAWC,IAAX,EAAkB;AAEhD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACyrJ,KAAL,GAAa,EAAb;;AAEA,SAAM,IAAIpM,IAAV,IAAkB,KAAKoM,KAAvB,EAA+B;AAE9B,UAAIrkG,IAAI,GAAG,KAAKqkG,KAAL,CAAYpM,IAAZ,CAAX;;AAEA,UAAKj4F,IAAL,EAAY;AAEXpnD,QAAAA,IAAI,CAACyrJ,KAAL,CAAYpM,IAAZ,IAAqBj4F,IAAI,CAACz9D,MAAL,CAAaC,IAAb,EAAoBhN,IAAzC;AAEA;AAED;AAED;;AAED,SAAOojB,IAAP;AAEA,CA1BD;;;;;;;;;AC9CA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AAVA;;;AAYA,SAASk1J,QAAT,CAAmBjhM,KAAnB,EAA0Bo2B,EAA1B,EAA8BuJ,MAA9B,EAAsC6O,IAAtC,EAA6C;AAE5Ci5I,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAK+D,KAAL,GAAaA,KAAb;AACA,OAAKo2B,EAAL,GAAUA,EAAE,IAAI,IAAI42J,cAAJ,EAAhB;AACA,OAAKrtJ,MAAL,GAAcA,MAAM,IAAI,IAAIktJ,wBAAJ,CAAiB,CAAjB,EAAoB,CAApB,CAAxB;AAEA,OAAKr+I,IAAL,GAAYA,IAAZ;AAEA,OAAK0yJ,KAAL,GAAa,IAAb;AACA,OAAKC,KAAL,GAAa,IAAb;AAEA,OAAKh+L,UAAL,GAAkB,IAAIgqL,oBAAJ,CAAe,IAAI,EAAnB,CAAlB;AACA,OAAKjqL,QAAL,GAAgB,IAAIiqL,oBAAJ,CAAe,IAAI,EAAnB,CAAhB;AAEA;;AAED8T,QAAQ,CAAC3T,KAAT,GAAmB,YAAY;AAE9B,MAAI4T,KAAK,GAAG,IAAIrW,0BAAJ,CAAkB,CAC7B,iDAD6B,EAE7B,0BAF6B,EAG7B,iEAH6B,EAI7B,kEAJ6B,EAK7B,mEAL6B,EAM7B,kEAN6B,EAO7B,wDAP6B,EAQ7B,kEAR6B,EAS7B,mEAT6B,EAU7B,kEAV6B,EAW7B,iEAX6B,EAY7B,qBAZ6B,EAa7B,GAb6B,EAc5B7kL,IAd4B,CActB,IAdsB,CAAlB,CAAZ;AAgBA,MAAIm7L,KAAK,GAAG,IAAItW,0BAAJ,CAAkB,CAC7B,iDAD6B,EAE7B,0BAF6B,EAG7B,iEAH6B,EAI7B,kEAJ6B,EAK7B,mEAL6B,EAM7B,kEAN6B,EAO7B,wDAP6B,EAQ7B,kEAR6B,EAS7B,mEAT6B,EAU7B,kEAV6B,EAW7B,iEAX6B,EAY7B,qBAZ6B,EAa7B,GAb6B,EAc5B7kL,IAd4B,CActB,IAdsB,CAAlB,CAAZ;AAgBA,SAAO;AACNk7L,IAAAA,KAAK,EAAEA,KADD;AAENC,IAAAA,KAAK,EAAEA;AAFD,GAAP;AAKA,CAvCgB,EAAjB;;AA0CAF,QAAQ,CAACvlM,SAAT,GAAqBY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAArB;AACAulM,QAAQ,CAACvlM,SAAT,CAAmBoC,WAAnB,GAAiCmjM,QAAjC;AACAA,QAAQ,CAACvlM,SAAT,CAAmB8rL,QAAnB,GAA8B,MAA9B;;AAEAyZ,QAAQ,CAACvlM,SAAT,CAAmBorL,WAAnB,GAAiC;AAAW;AAAc;AAEzD,MAAK,KAAKt4I,IAAV,EAAiB;AAEhB,SAAKrrC,UAAL,CAAgBnD,KAAhB,GAAwB,KAAK2/B,MAAL,CAAY17B,CAAZ,GAAgB,KAAKuqC,IAAL,CAAUvqC,CAAlD;AACA,SAAKf,QAAL,CAAclD,KAAd,GAAsB,KAAK2/B,MAAL,CAAYx7B,CAAZ,GAAgB,KAAKqqC,IAAL,CAAUrqC,CAAhD;AAEA,GALD,MAKO,IAAK,KAAKnE,KAAL,CAAWA,KAAX,IAAoB,KAAKA,KAAL,CAAWA,KAAX,CAAiBszB,KAA1C,EAAkD;AAExD,QAAIA,KAAK,GAAG,KAAKtzB,KAAL,CAAWA,KAAX,CAAiBszB,KAA7B;AAEA,SAAKnwB,UAAL,CAAgBnD,KAAhB,GAAwB,KAAK2/B,MAAL,CAAY17B,CAAZ,GAAgBqvB,KAAK,CAAC/sB,KAA9C;AACA,SAAKrD,QAAL,CAAclD,KAAd,GAAsB,KAAK2/B,MAAL,CAAYx7B,CAAZ,GAAgBmvB,KAAK,CAAC9sB,MAA5C;AAEA;AAED,CAhBD;;AAkBAy6L,QAAQ,CAACvlM,SAAT,CAAmBswK,QAAnB,GAA8B,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE1D,MAAKmrK,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC,QAAIsY,QAAQ,GAAG,EAAf;AAAA,QAAmB7a,IAAnB;AAEA,QAAI2a,KAAK,GAAGpb,OAAO,CAACxqG,OAAR,CAAiB2lH,QAAQ,CAAC3T,KAAT,CAAe4T,KAAhC,CAAZ;AAAA,QACCC,KAAK,GAAGrb,OAAO,CAACxqG,OAAR,CAAiB2lH,QAAQ,CAAC3T,KAAT,CAAe6T,KAAhC,CADT;;AAGA,QAAK,KAAKD,KAAV,EAAkB;AAEjBE,MAAAA,QAAQ,CAACr7L,IAAT,CAAem7L,KAAK,GAAG,IAAR,GAAe,KAAKlhM,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2B,WAA3B,CAAf,GAA0D,IAA1D,GAAiE,KAAK1vJ,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,IAAxB,CAAjE,GAAkG,IAAlG,GAAyG,KAAK3iL,UAAL,CAAgB6iL,KAAhB,CAAuBF,OAAvB,EAAgC,GAAhC,CAAzG,GAAiJ,IAAhK;AAEA;;AAED,QAAK,KAAKqb,KAAV,EAAkB;AAEjBC,MAAAA,QAAQ,CAACr7L,IAAT,CAAeo7L,KAAK,GAAG,IAAR,GAAe,KAAKnhM,KAAL,CAAWgmL,KAAX,CAAkBF,OAAlB,EAA2B,WAA3B,CAAf,GAA0D,IAA1D,GAAiE,KAAK1vJ,EAAL,CAAQ4vJ,KAAR,CAAeF,OAAf,EAAwB,IAAxB,CAAjE,GAAkG,IAAlG,GAAyG,KAAK5iL,QAAL,CAAc8iL,KAAd,CAAqBF,OAArB,EAA8B,GAA9B,CAAzG,GAA+I,IAA9J;AAEA;;AAED,QAAKsb,QAAQ,CAAC7lM,MAAT,IAAmB,CAAxB,EAA4BgrL,IAAI,GAAG,OAAO6a,QAAQ,CAACp7L,IAAT,CAAe,KAAf,CAAP,GAAgC,UAAvC,CAA5B,KACK,IAAKo7L,QAAQ,CAAC7lM,MAAd,EAAuBgrL,IAAI,GAAG,OAAO6a,QAAQ,CAAE,CAAF,CAAf,GAAuB,IAA9B,CAAvB,KACA7a,IAAI,GAAG,aAAP;AAEL,WAAOT,OAAO,CAACtxJ,MAAR,CAAgB+xJ,IAAhB,EAAsB,KAAKG,OAAL,CAAcZ,OAAd,CAAtB,EAA+CnrK,MAA/C,CAAP;AAEA,GAzBD,MAyBO;AAEN0Q,IAAAA,OAAO,CAACC,IAAR,CAAc,2CAA2Cw6J,OAAO,CAACxvH,MAAnD,GAA4D,UAA1E;AAEA,WAAOwvH,OAAO,CAACtxJ,MAAR,CAAgB,aAAhB,EAA+B,KAAKkyJ,OAAL,CAAcZ,OAAd,CAA/B,EAAwDnrK,MAAxD,CAAP;AAEA;AAED,CAnCD;;AAqCAsmL,QAAQ,CAACvlM,SAAT,CAAmBswB,IAAnB,GAA0B,UAAWpR,MAAX,EAAoB;AAE7C6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK5a,KAAL,GAAa4a,MAAM,CAAC5a,KAApB;AACA,OAAKo2B,EAAL,GAAUxb,MAAM,CAACwb,EAAjB;AACA,OAAKuJ,MAAL,GAAc/kB,MAAM,CAAC+kB,MAArB;AAEA,MAAK/kB,MAAM,CAAC4zB,IAAP,KAAgB7wC,SAArB,EAAiC,KAAK6wC,IAAL,GAAY,IAAIjjB,oBAAJ,CAAa3Q,MAAM,CAAC4zB,IAAP,CAAYvqC,CAAzB,EAA4B2W,MAAM,CAAC4zB,IAAP,CAAYrqC,CAAxC,CAAZ;AAEjC,OAAK+8L,KAAL,GAAatmL,MAAM,CAACsmL,KAApB;AACA,OAAKC,KAAL,GAAavmL,MAAM,CAACumL,KAApB;AAEA,SAAO,IAAP;AAEA,CAfD;;AAiBAF,QAAQ,CAACvlM,SAAT,CAAmBg6B,MAAnB,GAA4B,UAAWC,IAAX,EAAkB;AAE7C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAAC/rC,KAAL,GAAa,KAAKA,KAAL,CAAW01B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAAC3V,EAAL,GAAU,KAAKA,EAAL,CAAQV,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AACAojB,IAAAA,IAAI,CAACpM,MAAL,GAAc,KAAKA,MAAL,CAAYjK,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEA,QAAK,KAAK6lB,IAAV,EAAiBzC,IAAI,CAACyC,IAAL,GAAY;AAAEvqC,MAAAA,CAAC,EAAE,KAAKuqC,IAAL,CAAUvqC,CAAf;AAAkBE,MAAAA,CAAC,EAAE,KAAKqqC,IAAL,CAAUrqC;AAA/B,KAAZ;AAEjB4nC,IAAAA,IAAI,CAACm1J,KAAL,GAAa,KAAKA,KAAlB;AACAn1J,IAAAA,IAAI,CAACo1J,KAAL,GAAa,KAAKA,KAAlB;AAEA;;AAED,SAAOp1J,IAAP;AAEA,CArBD;;;;;;;;;AChJA;;AACA;;AACA;;AANA;;;AAQA,SAASs1J,aAAT,CAAwBC,GAAxB,EAA8B;AAE7B7Z,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,GAArB;;AAEA,OAAKqlM,GAAL,GAAWA,GAAX;AAEA;;AAEDD,aAAa,CAAC/T,KAAd,GAAwB,YAAY;AAEnC,MAAI71B,IAAI,GAAG,IAAI0xB,oBAAJ,CAAe,0CAAf,CAAX;AAEA,MAAIoY,SAAS,GAAG,IAAI1W,0BAAJ,CAAkB,CACjC;AACA,iCAFiC,EAIjC,2BAJiC,EAMjC,GANiC,EAOhC7kL,IAPgC,CAO1B,IAP0B,CAAlB,EAOA,CAAEyxJ,IAAF,CAPA,CAAhB;AASA,SAAO;AACNA,IAAAA,IAAI,EAAEA,IADA;AAEN8pC,IAAAA,SAAS,EAAEA;AAFL,GAAP;AAKA,CAlBqB,EAAtB;;AAoBAF,aAAa,CAAC3lM,SAAd,GAA0BY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAA1B;AACA2lM,aAAa,CAAC3lM,SAAd,CAAwBoC,WAAxB,GAAsCujM,aAAtC;AACAA,aAAa,CAAC3lM,SAAd,CAAwB8rL,QAAxB,GAAmC,WAAnC;;AAEA6Z,aAAa,CAAC3lM,SAAd,CAAwBswK,QAAxB,GAAmC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAE/D,MAAI4mL,SAAS,GAAGzb,OAAO,CAACxqG,OAAR,CAAiB+lH,aAAa,CAAC/T,KAAd,CAAoBiU,SAArC,CAAhB;AAEA,SAAOzb,OAAO,CAACtxJ,MAAR,CAAgB+sK,SAAS,GAAG,IAAZ,GAAmB,KAAKD,GAAL,CAAStb,KAAT,CAAgBF,OAAhB,EAAyB,IAAzB,CAAnB,GAAqD,IAArE,EAA2E,KAAKY,OAAL,CAAcZ,OAAd,CAA3E,EAAoGnrK,MAApG,CAAP;AAEA,CAND;;AAQA0mL,aAAa,CAAC3lM,SAAd,CAAwBswB,IAAxB,GAA+B,UAAWpR,MAAX,EAAoB;AAElD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK0mL,GAAL,GAAW1mL,MAAM,CAAC0mL,GAAlB;AAEA,SAAO,IAAP;AAEA,CARD;;AAUAD,aAAa,CAAC3lM,SAAd,CAAwBg6B,MAAxB,GAAiC,UAAWC,IAAX,EAAkB;AAElD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACu1J,GAAL,GAAW,KAAKA,GAAL,CAAS5rK,MAAT,CAAiBC,IAAjB,EAAwBhN,IAAnC;AAEA;;AAED,SAAOojB,IAAP;AAEA,CAdD;;;;;;;;;ACtDA;;AACA;;AACA;;AANA;;;AAQA,SAASy1J,mBAAT,CAA8BF,GAA9B,EAAmCG,UAAnC,EAA+C/qL,MAA/C,EAAwD;AAEvD+wK,qBAASxrL,IAAT,CAAe,IAAf,EAAqB,IAArB;;AAEA,OAAKqlM,GAAL,GAAWA,GAAX;AACA,OAAKG,UAAL,GAAkBA,UAAlB;AAEA,OAAK/qL,MAAL,GAAcA,MAAM,IAAI8qL,mBAAmB,CAACE,UAA5C;AAEA;;AAEDF,mBAAmB,CAAClU,KAApB,GAA8B,YAAY;AAEzC,MAAIrzI,GAAG,GAAG,IAAI4wI,0BAAJ,CAAkB,CAC3B,wCAD2B,EAG3B,kHAH2B,EAI3B,+FAJ2B,EAM3B,6BAN2B,EAQ3B,+CAR2B,EAS3B,sDAT2B,EAW3B,uEAX2B,EAa3B,GAb2B,EAc1B7kL,IAd0B,CAcpB,IAdoB,CAAlB,CAAV;AAgBA,MAAIk0C,UAAU,GAAG,IAAI2wI,0BAAJ,CAAkB,CAClC;AACA,iDAFkC,EAIlC,6CAJkC,EAMlC,4CANkC,EAQlC,GARkC,EASjC7kL,IATiC,CAS3B,IAT2B,CAAlB,EASD,CAAEq7L,6BAAc/T,KAAd,CAAoBiU,SAAtB,CATC,CAAjB,CAlByC,CA2BY;;AAErD,MAAII,QAAQ,GAAG,IAAI9W,0BAAJ,CAAkB,CAChC;AACA,+CAFgC,EAIhC,iDAJgC,EAMhC,4CANgC,EAOhC,oDAPgC,EAShC,sCATgC,EAWhC,GAXgC,EAY/B7kL,IAZ+B,CAYzB,IAZyB,CAAlB,CAAf;AAcA,SAAO;AACNi0C,IAAAA,GAAG,EAAEA,GADC;AAENC,IAAAA,UAAU,EAAEA,UAFN;AAGNynJ,IAAAA,QAAQ,EAAEA;AAHJ,GAAP;AAMA,CAjD2B,EAA5B;;AAmDAH,mBAAmB,CAACE,UAApB,GAAiC,YAAjC;AACAF,mBAAmB,CAACI,GAApB,GAA0B,KAA1B;AACAJ,mBAAmB,CAACK,QAApB,GAA+B,UAA/B;AACAL,mBAAmB,CAACM,UAApB,GAAiC,YAAjC;AACAN,mBAAmB,CAACO,QAApB,GAA+B,UAA/B;AAEAP,mBAAmB,CAAC9lM,SAApB,GAAgCY,MAAM,CAACi5B,MAAP,CAAekyJ,mBAAS/rL,SAAxB,CAAhC;AACA8lM,mBAAmB,CAAC9lM,SAApB,CAA8BoC,WAA9B,GAA4C0jM,mBAA5C;AACAA,mBAAmB,CAAC9lM,SAApB,CAA8B8rL,QAA9B,GAAyC,iBAAzC;;AAEAga,mBAAmB,CAAC9lM,SAApB,CAA8BswK,QAA9B,GAAyC,UAAW8Z,OAAX,EAAoBnrK,MAApB,EAA6B;AAErE,MAAI2mL,GAAG,GAAG,KAAKA,GAAL,CAAStb,KAAT,CAAgBF,OAAhB,EAAyB,IAAzB,CAAV;AAAA,MACC2b,UAAU,GAAG,KAAKA,UAAL,CAAgBzb,KAAhB,CAAuBF,OAAvB,EAAgC,GAAhC,CADd;;AAGA,UAAS,KAAKpvK,MAAd;AAEC,SAAK8qL,mBAAmB,CAACM,UAAzB;AAEC,aAAOhc,OAAO,CAACtxJ,MAAR,CAAgB,OAAO8sK,GAAP,GAAa,KAAb,GAAqBG,UAArB,GAAkC,IAAlD,EAAwD,KAAK/a,OAAL,CAAcZ,OAAd,CAAxD,EAAiFnrK,MAAjF,CAAP;AAEA;;AAED,SAAK6mL,mBAAmB,CAACO,QAAzB;AAEC,aAAOjc,OAAO,CAACtxJ,MAAR,CAAgB,OAAO8sK,GAAP,GAAa,KAAb,GAAqBG,UAArB,GAAkC,IAAlD,EAAwD,KAAK/a,OAAL,CAAcZ,OAAd,CAAxD,EAAiFnrK,MAAjF,CAAP;AAEA;AAZF;;AAgBA,MAAIjE,MAAM,GAAGovK,OAAO,CAACxqG,OAAR,CAAiBkmH,mBAAmB,CAAClU,KAApB,CAA2B,KAAK52K,MAAhC,CAAjB,CAAb;AAEA,SAAOovK,OAAO,CAACtxJ,MAAR,CAAgB9d,MAAM,GAAG,IAAT,GAAgB4qL,GAAhB,GAAsB,IAAtB,GAA6BG,UAA7B,GAA0C,IAA1D,EAAgE,KAAK/a,OAAL,CAAcZ,OAAd,CAAhE,EAAyFnrK,MAAzF,CAAP;AAEA,CAzBD;;AA2BA6mL,mBAAmB,CAAC9lM,SAApB,CAA8BswB,IAA9B,GAAqC,UAAWpR,MAAX,EAAoB;AAExD6sK,qBAAS/rL,SAAT,CAAmBswB,IAAnB,CAAwB/vB,IAAxB,CAA8B,IAA9B,EAAoC2e,MAApC;;AAEA,OAAK0mL,GAAL,GAAW1mL,MAAM,CAAC0mL,GAAlB;AACA,OAAKG,UAAL,GAAkB7mL,MAAM,CAAC6mL,UAAzB;AACA,OAAK/qL,MAAL,GAAckE,MAAM,CAAClE,MAArB;AAEA,SAAO,IAAP;AAEA,CAVD;;AAYA8qL,mBAAmB,CAAC9lM,SAApB,CAA8Bg6B,MAA9B,GAAuC,UAAWC,IAAX,EAAkB;AAExD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAoW,IAAAA,IAAI,CAACu1J,GAAL,GAAW,KAAKA,GAAL,CAAS5rK,MAAT,CAAiBC,IAAjB,EAAwBhN,IAAnC;AACAojB,IAAAA,IAAI,CAAC01J,UAAL,GAAkB,KAAKA,UAAL,CAAgB/rK,MAAhB,CAAwBC,IAAxB,EAA+BhN,IAAjD;AACAojB,IAAAA,IAAI,CAACr1B,MAAL,GAAc,KAAKA,MAAnB;AAEA;;AAED,SAAOq1B,IAAP;AAEA,CAhBD;;;;;;;;;ACnHA;;AAKA;;AACA;;AAVA;;;AAYA,SAASi2J,UAAT,GAAsB;AAErBrqF,aAAK17G,IAAL,CAAW,IAAX;;AAEA,OAAK5B,KAAL,GAAa,IAAI8gM,oBAAJ,CAAe,QAAf,CAAb;AACA,OAAKja,SAAL,GAAiB,IAAjB;AAEA;;AAED8gB,UAAU,CAACtmM,SAAX,GAAuBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAAvB;AACAsmM,UAAU,CAACtmM,SAAX,CAAqBoC,WAArB,GAAmCkkM,UAAnC;AACAA,UAAU,CAACtmM,SAAX,CAAqB8rL,QAArB,GAAgC,QAAhC;;AAEAwa,UAAU,CAACtmM,SAAX,CAAqBsqL,KAArB,GAA6B,UAAWF,OAAX,EAAqB;AAEjD,MAAInrK,MAAJ;AAEAmrK,EAAAA,OAAO,CAAC4T,MAAR,CAAgB,QAAhB;AAEA5T,EAAAA,OAAO,CAACmH,QAAR,CAAiBv6H,MAAjB,GAA0B,KAA1B;AACAozH,EAAAA,OAAO,CAACmH,QAAR,CAAiB5xI,WAAjB,GAA+B,KAAKptB,KAAL,KAAetwB,SAA9C;;AAEA,MAAKmoL,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnC,QAAI1lL,QAAQ,GAAG,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcijL,cAAd,CAA8BP,OAA9B,EAAuC,IAAvC,EAA6C;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAA7C,CAAhB,GAAuFluC,SAAtG;AAEAmoL,IAAAA,OAAO,CAACiV,YAAR,CAAsB5oI,2BAAcxJ,KAAd,CAAqB,CAC1C2P,yBAAYnsB,GAD8B,CAArB,CAAtB;AAIA25I,IAAAA,OAAO,CAACwT,WAAR,CAAqB,CACpB,4BADoB,EAEpB,oCAFoB,EAGpB,wCAHoB,EAInBtzL,IAJmB,CAIb,IAJa,CAArB;AAMA2U,IAAAA,MAAM,GAAG,CACR,qCADQ,EAER,yBAFQ,CAAT;;AAKA,QAAKvX,QAAL,EAAgB;AAEfuX,MAAAA,MAAM,CAAC5U,IAAP,CACC3C,QAAQ,CAACmjL,IADV,EAECnjL,QAAQ,CAAC3E,MAAT,GAAkB,mBAAmB2E,QAAQ,CAAC3E,MAA5B,GAAqC,GAAvD,GAA6D,EAF9D;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC,2BADD,EAEC,uBAFD,EAIC,sCAJD,EAKC,8BALD,EAOC;AACA,2BARD,EASC,uBATD,EAUC,uBAVD;;AAaA,QAAK,CAAE,KAAKm7K,SAAZ,EAAwB;AAEvBvmK,MAAAA,MAAM,CAAC5U,IAAP,CACC,uBADD;AAIA;;AAED4U,IAAAA,MAAM,CAAC5U,IAAP,EACC;AACA;AACA,+BAHD,EAIC,2BAJD,EAKC,2BALD;;AAQA,QAAK,KAAKm7K,SAAV,EAAsB;AAErBvmK,MAAAA,MAAM,CAAC5U,IAAP,EACC;AACA,iCAFD,EAGC,2BAHD,EAIC,2BAJD;AAOA;;AAED4U,IAAAA,MAAM,CAAC5U,IAAP,EACC;AACA,+BAFD,EAGC,2BAHD,EAIC,2BAJD,EAMC,sFAND,EAQC,+BARD,EASC,mCATD,EAUC,uBAVD;AAaA,GAjFD,MAiFO;AAEN+/K,IAAAA,OAAO,CAACwT,WAAR,CAAqB,CACpB,8BADoB,EAEpB,sCAFoB,EAGpB,0CAHoB,EAInBtzL,IAJmB,CAIb,IAJa,CAArB;AAMA8/K,IAAAA,OAAO,CAACkT,OAAR,CAAiB,CAChB,qCADgB,EAEhB,iCAFgB,EAGfhzL,IAHe,CAGT,IAHS,CAAjB,EARM,CAaN;;AAEA,QAAK,KAAK6/B,IAAV,EAAiB,KAAKA,IAAL,CAAUggJ,OAAV,CAAmBC,OAAnB;AAEjB,QAAK,KAAK73J,KAAV,EAAkB,KAAKA,KAAL,CAAW43J,OAAX,CAAoBC,OAApB;AAElB,SAAKzrL,KAAL,CAAWwrL,OAAX,CAAoBC,OAApB,EAA6B;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAA7B,EAnBM,CAqBN;;AAEA,QAAIttD,IAAI,GAAG,KAAKA,IAAL,GAAY,KAAKA,IAAL,CAAUygJ,IAAV,CAAgBR,OAAhB,EAAyB,GAAzB,CAAZ,GAA6CnoL,SAAxD;AAAA,QACCswB,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAWq4J,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,CAAb,GAA+CnoL,SADxD;AAAA,QAECtD,KAAK,GAAG,KAAKA,KAAL,CAAWisL,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,EAA+B;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAA/B,CAFT;AAAA,QAGCx4E,MAAM,GAAG,EAHV;;AAKA,QAAKkrB,IAAL,EAAY;AAEXlrB,MAAAA,MAAM,CAAC5U,IAAP,CACC8/B,IAAI,CAAC0gJ,IADN,EAEC,YAAY1gJ,IAAI,CAACpnC,MAAjB,GAA0B,aAF3B;AAKA;;AAED,QAAKwvB,KAAL,EAAa;AAEZtT,MAAAA,MAAM,CAAC5U,IAAP,CACCkoB,KAAK,CAACs4J,IADP,EAEC,kBAFD,EAIC,UAAUt4J,KAAK,CAACxvB,MAAhB,GAAyB,0BAJ1B,EAMC,QAND,EAOCpE,KAAK,CAACksL,IAPP,EAQC,0BAA0BlsL,KAAK,CAACoE,MAAhC,GAAyC,IAAzC,GAAgDwvB,KAAK,CAACxvB,MAAtD,GAA+D,KARhE;AAWA,KAbD,MAaO;AAENkc,MAAAA,MAAM,CAAC5U,IAAP,CACC1L,KAAK,CAACksL,IADP,EAEC,0BAA0BlsL,KAAK,CAACoE,MAAhC,GAAyC,UAF1C;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC,iCADD,EAEC,+BAFD,EAGC,yBAHD;AAMA;;AAED,SAAO4U,MAAM,CAAC3U,IAAP,CAAa,IAAb,CAAP;AAEA,CA/JD;;AAiKAg8L,UAAU,CAACtmM,SAAX,CAAqBswB,IAArB,GAA4B,UAAWpR,MAAX,EAAoB;AAE/C+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC,EAF+C,CAI/C;;;AAEA,MAAKA,MAAM,CAACxX,QAAZ,EAAuB,KAAKA,QAAL,GAAgBwX,MAAM,CAACxX,QAAvB,CANwB,CAQ/C;;AAEA,OAAK/I,KAAL,GAAaugB,MAAM,CAACvgB,KAApB;AAEA,MAAKugB,MAAM,CAACsmK,SAAP,KAAqBvjL,SAA1B,EAAsC,KAAKujL,SAAL,GAAiBtmK,MAAM,CAACsmK,SAAxB;AAEtC,MAAKtmK,MAAM,CAACirB,IAAZ,EAAmB,KAAKA,IAAL,GAAYjrB,MAAM,CAACirB,IAAnB;AAEnB,MAAKjrB,MAAM,CAACqT,KAAZ,EAAoB,KAAKA,KAAL,GAAarT,MAAM,CAACqT,KAApB;AAEpB,SAAO,IAAP;AAEA,CApBD;;AAsBA+zK,UAAU,CAACtmM,SAAX,CAAqBg6B,MAArB,GAA8B,UAAWC,IAAX,EAAkB;AAE/C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP,CAFa,CAIb;;AAEA,QAAK,KAAKvyB,QAAV,EAAqB2oC,IAAI,CAAC3oC,QAAL,GAAgB,KAAKA,QAAL,CAAcsyB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C,CANR,CAQb;;AAEAojB,IAAAA,IAAI,CAAC1xC,KAAL,GAAa,KAAKA,KAAL,CAAWq7B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAEA,QAAK,KAAKu4J,SAAL,KAAmB,KAAxB,EAAgCn1I,IAAI,CAACm1I,SAAL,GAAiB,KAAjB;AAEhC,QAAK,KAAKr7I,IAAV,EAAiBkG,IAAI,CAAClG,IAAL,GAAY,KAAKA,IAAL,CAAUnQ,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEjB,QAAK,KAAKsF,KAAV,EAAkB8d,IAAI,CAAC9d,KAAL,GAAa,KAAKA,KAAL,CAAWyH,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB;;AAED,SAAOojB,IAAP;AAEA,CA1BD;;;;;;;;;AC5MA;;AAKA;;AACA;;AACA;;AAXA;;;AAaA,SAASk2J,SAAT,GAAqB;AAEpBtqF,aAAK17G,IAAL,CAAW,IAAX;;AAEA,OAAK5B,KAAL,GAAa,IAAI8gM,oBAAJ,CAAe,QAAf,CAAb;AACA,OAAKp9I,QAAL,GAAgB,IAAIo9I,oBAAJ,CAAe,QAAf,CAAhB;AACA,OAAKn9I,SAAL,GAAiB,IAAImvI,oBAAJ,CAAe,EAAf,CAAjB;AAEA;;AAED8U,SAAS,CAACvmM,SAAV,GAAsBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAAtB;AACAumM,SAAS,CAACvmM,SAAV,CAAoBoC,WAApB,GAAkCmkM,SAAlC;AACAA,SAAS,CAACvmM,SAAV,CAAoB8rL,QAApB,GAA+B,OAA/B;;AAEAya,SAAS,CAACvmM,SAAV,CAAoBsqL,KAApB,GAA4B,UAAWF,OAAX,EAAqB;AAEhD,MAAIS,IAAJ;AAEAT,EAAAA,OAAO,CAAC4T,MAAR,CAAgB,OAAhB;AAEA5T,EAAAA,OAAO,CAACmH,QAAR,CAAiBv6H,MAAjB,GAA0B,IAA1B;;AAEA,MAAKozH,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnC,QAAI1lL,QAAQ,GAAG,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcijL,cAAd,CAA8BP,OAA9B,EAAuC,IAAvC,EAA6C;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAA7C,CAAhB,GAAuFluC,SAAtG;AAEAmoL,IAAAA,OAAO,CAACiV,YAAR,CAAsB5oI,2BAAcxJ,KAAd,CAAqB,CAE1C2P,yBAAYnsB,GAF8B,EAG1CmsB,yBAAY5F,MAH8B,CAArB,CAAtB;AAOAozH,IAAAA,OAAO,CAACwT,WAAR,CAAqB,CACpB,6BADoB,EAGpB,qBAHoB,EAKpB,wBALoB,EAOpB,QAPoB,EASpB;AACA,gCAVoB,EAWpB,oCAXoB,EAYpB,iCAZoB,EAapB,kCAboB,EAcpB,oCAdoB,EAepB,wCAfoB,EAgBnBtzL,IAhBmB,CAgBb,IAhBa,CAArB;AAkBA,QAAI2U,MAAM,GAAG,CACZ,+BADY,EAEZ,+BAFY,EAGZ,4BAHY,EAIZ,8BAJY,EAKZ,iCALY,EAOZ,qBAPY,EAOW;AAEvB,gDATY,EAWZ,QAXY,EAaZ,yBAbY,CAAb;;AAgBA,QAAKvX,QAAL,EAAgB;AAEfuX,MAAAA,MAAM,CAAC5U,IAAP,CACC3C,QAAQ,CAACmjL,IADV,EAECnjL,QAAQ,CAAC3E,MAAT,GAAkB,mBAAmB2E,QAAQ,CAAC3E,MAA5B,GAAqC,GAAvD,GAA6D,EAF9D;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC,gCADD,EAEC,6BAFD,EAGC,4BAHD,EAIC,wBAJD,EAKC,gCALD,EAMC,oCAND,EAQC,oCARD,EAUC,6BAVD,EAWC,8BAXD,EAYC,wBAZD;AAeAwgL,IAAAA,IAAI,GAAG5rK,MAAM,CAAC3U,IAAP,CAAa,IAAb,CAAP;AAEA,GAvED,MAuEO;AAEN;AAEA,QAAK,KAAK6/B,IAAV,EAAiB,KAAKA,IAAL,CAAUggJ,OAAV,CAAmBC,OAAnB;AAEjB,SAAKzrL,KAAL,CAAWwrL,OAAX,CAAoBC,OAApB,EAA6B;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAA7B;AACA,SAAKp1C,QAAL,CAAc8nI,OAAd,CAAuBC,OAAvB;AACA,SAAK9nI,SAAL,CAAe6nI,OAAf,CAAwBC,OAAxB;AAEA,QAAK,KAAK73J,KAAV,EAAkB,KAAKA,KAAL,CAAW43J,OAAX,CAAoBC,OAApB;AAElB,QAAK,KAAKvmJ,MAAV,EAAmB,KAAKA,MAAL,CAAYsmJ,OAAZ,CAAqBC,OAArB;AAEnB,QAAK,KAAK5hG,KAAV,EAAkB,KAAKA,KAAL,CAAW2hG,OAAX,CAAoBC,OAApB,EAA6B;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAA7B;AAElB,QAAK,KAAKq2J,EAAV,EAAe,KAAKA,EAAL,CAAQrc,OAAR,CAAiBC,OAAjB;AACf,QAAK,KAAK1gG,OAAV,EAAoB,KAAKA,OAAL,CAAaygG,OAAb,CAAsBC,OAAtB;AACpB,QAAK,KAAKr/G,MAAV,EAAmB,KAAKA,MAAL,CAAYo/G,OAAZ,CAAqBC,OAArB;AACnB,QAAK,KAAKjoI,QAAV,EAAqB,KAAKA,QAAL,CAAcgoI,OAAd,CAAuBC,OAAvB,EAAgC;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAAhC;AAErB,QAAK,KAAKjnD,WAAV,EAAwB,KAAKA,WAAL,CAAiB25I,OAAjB,CAA0BC,OAA1B,EAAmC;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAAnC;AACxB,QAAK,KAAKgvG,gBAAL,IAAyB,KAAKj2J,WAAnC,EAAiD,KAAKi2J,gBAAL,CAAsBtc,OAAtB,CAA+BC,OAA/B,EAtB3C,CAwBN;;AAEA,QAAIjgJ,IAAI,GAAG,KAAKA,IAAL,GAAY,KAAKA,IAAL,CAAUygJ,IAAV,CAAgBR,OAAhB,EAAyB,GAAzB,CAAZ,GAA6CnoL,SAAxD;AAEA,QAAItD,KAAK,GAAG,KAAKA,KAAL,CAAWisL,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,EAA+B;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAA/B,CAAZ;AACA,QAAIp1C,QAAQ,GAAG,KAAKA,QAAL,CAAcuoI,IAAd,CAAoBR,OAApB,EAA6B,GAA7B,CAAf;AACA,QAAI9nI,SAAS,GAAG,KAAKA,SAAL,CAAesoI,IAAf,CAAqBR,OAArB,EAA8B,GAA9B,CAAhB;AAEA,QAAI73J,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAWq4J,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,CAAb,GAA+CnoL,SAA3D;AAEA,QAAI4hC,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY+mJ,IAAZ,CAAkBR,OAAlB,EAA2B,IAA3B,CAAd,GAAkDnoL,SAA/D;AAEA,QAAIumF,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAWoiG,IAAX,CAAiBR,OAAjB,EAA0B,IAA1B,EAAgC;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAAhC,CAAb,GAAoEluC,SAAhF;AAEA,QAAIukM,EAAE,GAAG,KAAKA,EAAL,GAAU,KAAKA,EAAL,CAAQ5b,IAAR,CAAcR,OAAd,EAAuB,GAAvB,CAAV,GAAyCnoL,SAAlD;AACA,QAAIynF,OAAO,GAAG,KAAKA,OAAL,GAAe,KAAKA,OAAL,CAAakhG,IAAb,CAAmBR,OAAnB,EAA4B,GAA5B,CAAf,GAAmDnoL,SAAjE;AACA,QAAI8oE,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY6/G,IAAZ,CAAkBR,OAAlB,EAA2B,GAA3B,CAAd,GAAiDnoL,SAA9D;AACA,QAAIkgD,QAAQ,GAAG,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcyoI,IAAd,CAAoBR,OAApB,EAA6B,GAA7B,EAAkC;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAAlC,CAAhB,GAA2Ex1F,SAA1F;AAEA,QAAIuuC,WAAW,GAAG,KAAKA,WAAL,GAAmB,KAAKA,WAAL,CAAiBo6I,IAAjB,CAAuBR,OAAvB,EAAgC,GAAhC,EAAqC;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAArC,CAAnB,GAAoFx1F,SAAtG;AACA,QAAIwkM,gBAAgB,GAAG,KAAKA,gBAAL,IAAyB,KAAKj2J,WAA9B,GAA4C,KAAKi2J,gBAAL,CAAsB7b,IAAtB,CAA4BR,OAA5B,EAAqC,GAArC,CAA5C,GAAyFnoL,SAAhH;AAEAmoL,IAAAA,OAAO,CAACmH,QAAR,CAAiB5xI,WAAjB,GAA+BptB,KAAK,KAAKtwB,SAAzC;AAEAmoL,IAAAA,OAAO,CAACwT,WAAR,CAAqB,CACpB,8BADoB,EAEpB,kBAFoB,EAGpB,8BAHoB,EAIpB,uCAJoB,EAKpB,oCALoB,EAMpB,sCANoB,EAOnBtzL,IAPmB,CAOb,IAPa,CAArB;AASA,QAAI2U,MAAM,GAAG,CACZ;AACA,sCAFY,EAIZ;AACA,mCALY,CAAb;;AAQA,QAAKkrB,IAAL,EAAY;AAEXlrB,MAAAA,MAAM,CAAC5U,IAAP,CACC8/B,IAAI,CAAC0gJ,IADN,EAEC,YAAY1gJ,IAAI,CAACpnC,MAAjB,GAA0B,aAF3B;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC1L,KAAK,CAACksL,IADP,EAEC,0BAA0BlsL,KAAK,CAACoE,MAAhC,GAAyC,GAF1C,EAGC,wGAHD,EAKC,iCALD,EAOCs/C,QAAQ,CAACwoI,IAPV,EAQC,sBAAsBxoI,QAAQ,CAACt/C,MAA/B,GAAwC,GARzC,EAUCu/C,SAAS,CAACuoI,IAVX,EAWC,qCAAqCvoI,SAAS,CAACv/C,MAA/C,GAAwD,KAXzD,EAaC,gCAbD,CAakC;AAblC;;AAgBA,QAAKwvB,KAAL,EAAa;AAEZtT,MAAAA,MAAM,CAAC5U,IAAP,CACCkoB,KAAK,CAACs4J,IADP,EAEC,kBAFD,EAIC,UAAUt4J,KAAK,CAACxvB,MAAhB,GAAyB,0BAJ1B,EAMC,QAND;AASA;;AAED,QAAK8gC,MAAL,EAAc;AAEb5kB,MAAAA,MAAM,CAAC5U,IAAP,CACCw5B,MAAM,CAACgnJ,IADR,EAEC,cAAchnJ,MAAM,CAAC9gC,MAArB,GAA8B,GAF/B;AAKA,KA9GK,CAgHN;;;AAEAkc,IAAAA,MAAM,CAAC5U,IAAP,CAAa,8BAA+Bm+E,KAAK,GAAG,aAAH,GAAmB,cAAvD,IAA0E,GAAvF;AAEAvpE,IAAAA,MAAM,CAAC5U,IAAP,EACC;AACA,wCAFD,EAGC,yCAHD,EAIC,+CAJD,EAMC,kCAND,EAOC,gCAPD;;AAUA,QAAKm+E,KAAL,EAAa;AAEZvpE,MAAAA,MAAM,CAAC5U,IAAP,CACCm+E,KAAK,CAACqiG,IADP,EAEC,oCAAoCriG,KAAK,CAACzlF,MAA1C,GAAmD,GAFpD,EAFY,CAOZ;;AAEAkc,MAAAA,MAAM,CAAC5U,IAAP,CACC,+CADD,EAEC,iDAFD;AAKA;;AAED,QAAKm8L,EAAL,EAAU;AAETvnL,MAAAA,MAAM,CAAC5U,IAAP,CACCm8L,EAAE,CAAC3b,IADJ,EAEC,uCAAuC2b,EAAE,CAACzjM,MAA1C,GAAmD,GAFpD;AAKA;;AAED,QAAK2mF,OAAL,EAAe;AAEdzqE,MAAAA,MAAM,CAAC5U,IAAP,CACCq/E,OAAO,CAACmhG,IADT,EAEC,uCAAuCnhG,OAAO,CAAC3mF,MAA/C,GAAwD,GAFzD;AAKA;;AAED,QAAKgoE,MAAL,EAAc;AAEb9rD,MAAAA,MAAM,CAAC5U,IAAP,CACC0gE,MAAM,CAAC8/G,IADR,EAEC,qCAAqC9/G,MAAM,CAAChoE,MAA5C,GAAqD,GAFtD,EAGC,sCAAsCgoE,MAAM,CAAChoE,MAA7C,GAAsD,GAHvD;AAMA;;AAED,QAAKo/C,QAAL,EAAgB;AAEfljC,MAAAA,MAAM,CAAC5U,IAAP,CACC83C,QAAQ,CAAC0oI,IADV,EAEC,qCAAqC1oI,QAAQ,CAACp/C,MAA9C,GAAuD,GAFxD;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CAAa,qHAAb;;AAEA,QAAKmmC,WAAL,EAAmB;AAElBvxB,MAAAA,MAAM,CAAC5U,IAAP,CAAammC,WAAW,CAACq6I,IAAzB;;AAEA,UAAK4b,gBAAL,EAAwB;AAEvBxnL,QAAAA,MAAM,CAAC5U,IAAP,CACCo8L,gBAAgB,CAAC5b,IADlB,EAEC,yCAAyCr6I,WAAW,CAACztC,MAArD,GAA8D,IAA9D,GAAqE0jM,gBAAgB,CAAC1jM,MAAtF,GAA+F,KAFhG;AAKA,OAPD,MAOO;AAENkc,QAAAA,MAAM,CAAC5U,IAAP,CAAa,qBAAqBmmC,WAAW,CAACztC,MAAjC,GAA0C,GAAvD;AAEA;AAED;AACD;;;;;;;;;;AAcA,QAAKwvB,KAAL,EAAa;AAEZtT,MAAAA,MAAM,CAAC5U,IAAP,CAAa,yCAAyCkoB,KAAK,CAACxvB,MAA/C,GAAwD,KAArE;AAEA,KAJD,MAIO;AAENkc,MAAAA,MAAM,CAAC5U,IAAP,CAAa,4CAAb;AAEA;;AAED4U,IAAAA,MAAM,CAAC5U,IAAP,CACC,iCADD,EAEC,+BAFD,EAGC,yBAHD,EAIC,yCAJD;AAOAwgL,IAAAA,IAAI,GAAG5rK,MAAM,CAAC3U,IAAP,CAAa,IAAb,CAAP;AAEA;;AAED,SAAOugL,IAAP;AAEA,CA3TD;;AA6TA0b,SAAS,CAACvmM,SAAV,CAAoBswB,IAApB,GAA2B,UAAWpR,MAAX,EAAoB;AAE9C+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC,EAF8C,CAI9C;;;AAEA,MAAKA,MAAM,CAACxX,QAAZ,EAAuB,KAAKA,QAAL,GAAgBwX,MAAM,CAACxX,QAAvB,CANuB,CAQ9C;;AAEA,OAAK/I,KAAL,GAAaugB,MAAM,CAACvgB,KAApB;AACA,OAAK0jD,QAAL,GAAgBnjC,MAAM,CAACmjC,QAAvB;AACA,OAAKC,SAAL,GAAiBpjC,MAAM,CAACojC,SAAxB;AAEA,MAAKpjC,MAAM,CAACirB,IAAZ,EAAmB,KAAKA,IAAL,GAAYjrB,MAAM,CAACirB,IAAnB;AAEnB,MAAKjrB,MAAM,CAACqT,KAAZ,EAAoB,KAAKA,KAAL,GAAarT,MAAM,CAACqT,KAApB;AAEpB,MAAKrT,MAAM,CAAC2kB,MAAZ,EAAqB,KAAKA,MAAL,GAAc3kB,MAAM,CAAC2kB,MAArB;AAErB,MAAK3kB,MAAM,CAACspE,KAAZ,EAAoB,KAAKA,KAAL,GAAatpE,MAAM,CAACspE,KAApB;AACpB,MAAKtpE,MAAM,CAAC6rD,MAAZ,EAAqB,KAAKA,MAAL,GAAc7rD,MAAM,CAAC6rD,MAArB;AAErB,MAAK7rD,MAAM,CAACsnL,EAAZ,EAAiB,KAAKA,EAAL,GAAUtnL,MAAM,CAACsnL,EAAjB;AAEjB,MAAKtnL,MAAM,CAACijC,QAAZ,EAAuB,KAAKA,QAAL,GAAgBjjC,MAAM,CAACijC,QAAvB;AACvB,MAAKjjC,MAAM,CAACwqE,OAAZ,EAAsB,KAAKA,OAAL,GAAexqE,MAAM,CAACwqE,OAAtB;AAEtB,MAAKxqE,MAAM,CAACsxB,WAAZ,EAA0B,KAAKA,WAAL,GAAmBtxB,MAAM,CAACsxB,WAA1B;AAC1B,MAAKtxB,MAAM,CAACunL,gBAAZ,EAA+B,KAAKA,gBAAL,GAAwBvnL,MAAM,CAACunL,gBAA/B;AAE/B,SAAO,IAAP;AAEA,CAjCD;;AAmCAF,SAAS,CAACvmM,SAAV,CAAoBg6B,MAApB,GAA6B,UAAWC,IAAX,EAAkB;AAE9C,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP,CAFa,CAIb;;AAEA,QAAK,KAAKvyB,QAAV,EAAqB2oC,IAAI,CAAC3oC,QAAL,GAAgB,KAAKA,QAAL,CAAcsyB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C,CANR,CAQb;;AAEAojB,IAAAA,IAAI,CAAC1xC,KAAL,GAAa,KAAKA,KAAL,CAAWq7B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAACgS,QAAL,GAAgB,KAAKA,QAAL,CAAcroB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AACAojB,IAAAA,IAAI,CAACiS,SAAL,GAAiB,KAAKA,SAAL,CAAetoB,MAAf,CAAuBC,IAAvB,EAA8BhN,IAA/C;AAEA,QAAK,KAAKkd,IAAV,EAAiBkG,IAAI,CAAClG,IAAL,GAAY,KAAKA,IAAL,CAAUnQ,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEjB,QAAK,KAAKsF,KAAV,EAAkB8d,IAAI,CAAC9d,KAAL,GAAa,KAAKA,KAAL,CAAWyH,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB,QAAK,KAAK4W,MAAV,EAAmBwM,IAAI,CAACxM,MAAL,GAAc,KAAKA,MAAL,CAAY7J,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEnB,QAAK,KAAKu7D,KAAV,EAAkBn4C,IAAI,CAACm4C,KAAL,GAAa,KAAKA,KAAL,CAAWxuD,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB,QAAK,KAAKu5K,EAAV,EAAen2J,IAAI,CAACm2J,EAAL,GAAU,KAAKA,EAAL,CAAQxsK,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AACf,QAAK,KAAKy8D,OAAV,EAAoBr5C,IAAI,CAACq5C,OAAL,GAAe,KAAKA,OAAL,CAAa1vD,MAAb,CAAqBC,IAArB,EAA4BhN,IAA3C;AACpB,QAAK,KAAK89C,MAAV,EAAmB16B,IAAI,CAAC06B,MAAL,GAAc,KAAKA,MAAL,CAAY/wC,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AACnB,QAAK,KAAKk1B,QAAV,EAAqB9R,IAAI,CAAC8R,QAAL,GAAgB,KAAKA,QAAL,CAAcnoB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AAErB,QAAK,KAAKujB,WAAV,EAAwBH,IAAI,CAACG,WAAL,GAAmB,KAAKA,WAAL,CAAiBxW,MAAjB,CAAyBC,IAAzB,EAAgChN,IAAnD;AACxB,QAAK,KAAKw5K,gBAAV,EAA6Bp2J,IAAI,CAACo2J,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBzsK,MAAtB,CAA8BC,IAA9B,EAAqChN,IAA7D;AAE7B;;AAED,SAAOojB,IAAP;AAEA,CAtCD;;;;;;;;;ACvXA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AAbA;;;AAeA,SAASq2J,YAAT,GAAwB;AAEvBzqF,aAAK17G,IAAL,CAAW,IAAX;;AAEA,OAAK5B,KAAL,GAAa,IAAI8gM,oBAAJ,CAAe,QAAf,CAAb;AACA,OAAKz9I,SAAL,GAAiB,IAAIyvI,oBAAJ,CAAe,CAAf,CAAjB;AACA,OAAKxvI,SAAL,GAAiB,IAAIwvI,oBAAJ,CAAe,CAAf,CAAjB;AAEA;;AAEDiV,YAAY,CAAC1mM,SAAb,GAAyBY,MAAM,CAACi5B,MAAP,CAAeoiF,WAAKj8G,SAApB,CAAzB;AACA0mM,YAAY,CAAC1mM,SAAb,CAAuBoC,WAAvB,GAAqCskM,YAArC;AACAA,YAAY,CAAC1mM,SAAb,CAAuB8rL,QAAvB,GAAkC,UAAlC;;AAEA4a,YAAY,CAAC1mM,SAAb,CAAuBsqL,KAAvB,GAA+B,UAAWF,OAAX,EAAqB;AAEnD,MAAIS,IAAJ;AAEAT,EAAAA,OAAO,CAAC4T,MAAR,CAAgB,UAAhB;AAEA,MAAI2I,YAAY,GAAG,KAAKpkJ,SAAL,IAAkB,KAAKC,kBAAvB,IAA6C,KAAKokJ,eAArE;;AAEA,MAAKD,YAAL,EAAoB;AAEnBvc,IAAAA,OAAO,CAAC4T,MAAR,CAAgB,WAAhB;AAEA;;AAED5T,EAAAA,OAAO,CAACmH,QAAR,CAAiBv6H,MAAjB,GAA0B,IAA1B;AAEAozH,EAAAA,OAAO,CAAClzH,UAAR,CAAmBC,WAAnB,GAAiC,IAAjC;AACAizH,EAAAA,OAAO,CAAClzH,UAAR,CAAmBI,gBAAnB,GAAsC,IAAtC;;AAEA,MAAK8yH,OAAO,CAACgD,QAAR,CAAkB,QAAlB,CAAL,EAAoC;AAEnC,QAAI1lL,QAAQ,GAAG,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcijL,cAAd,CAA8BP,OAA9B,EAAuC,IAAvC,EAA6C;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAA7C,CAAhB,GAAuFluC,SAAtG;AAEAmoL,IAAAA,OAAO,CAACiV,YAAR,CAAsB5oI,2BAAcxJ,KAAd,CAAqB,CAE1C2P,yBAAYnsB,GAF8B,EAG1CmsB,yBAAY5F,MAH8B,CAArB,CAAtB;;AAOA,QAAK4F,yBAAYwuC,KAAjB,EAAyB;AAExB;AAEAg/E,MAAAA,OAAO,CAAC7zH,QAAR,CAAiB40C,KAAjB,GAAyB;AAAE7mG,QAAAA,KAAK,EAAErC;AAAT,OAAzB;AACAmoL,MAAAA,OAAO,CAAC7zH,QAAR,CAAiB80C,KAAjB,GAAyB;AAAE/mG,QAAAA,KAAK,EAAErC;AAAT,OAAzB;AAEA;;AAEDmoL,IAAAA,OAAO,CAACwT,WAAR,CAAqB,CACpB,6BADoB,EAGpB,qBAHoB,EAKpB,wBALoB,EAOpB,QAPoB,EASpB;AACA,gCAVoB,EAWpB,oCAXoB,EAYpB,iCAZoB,EAapB,kCAboB,EAcpB,oCAdoB,EAepB,wCAfoB,EAiBnBtzL,IAjBmB,CAiBb,IAjBa,CAArB;AAmBA,QAAI2U,MAAM,GAAG,CACZ,+BADY,EAEZ,+BAFY,EAGZ,4BAHY,EAIZ,8BAJY,EAKZ,iCALY,EAOZ,qBAPY,EAOW;AAEvB,gDATY,EAWZ,QAXY,EAaZ,yBAbY,CAAb;;AAgBA,QAAKvX,QAAL,EAAgB;AAEfuX,MAAAA,MAAM,CAAC5U,IAAP,CACC3C,QAAQ,CAACmjL,IADV,EAECnjL,QAAQ,CAAC3E,MAAT,GAAkB,mBAAmB2E,QAAQ,CAAC3E,MAA5B,GAAqC,GAAvD,GAA6D,EAF9D;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC,+BADD,EAEC,4BAFD,EAGC,2BAHD,EAIC,uBAJD,EAKC,+BALD,EAMC,mCAND,EAQC,oCARD,EAUC,4BAVD,EAWC,6BAXD;AAcAwgL,IAAAA,IAAI,GAAG5rK,MAAM,CAAC3U,IAAP,CAAa,IAAb,CAAP;AAEA,GAhFD,MAgFO;AAEN,QAAIu8L,iBAAiB,GAAG,IAAI9W,8BAAJ,CAAoB,4BAApB,EAAkD,GAAlD,CAAxB;AACA,QAAIvtI,kBAAkB,GAAG,IAAIutI,8BAAJ,CAAoB,6BAApB,EAAmD,GAAnD,CAAzB;AAEA,QAAI+W,kBAAkB,GAAG;AACxB9kJ,MAAAA,SAAS,EAAE6kJ,iBADa;AAExBr8G,MAAAA,IAAI,EAAE,IAAI46G,0CAAJ,CAA0ByB,iBAA1B,CAFkB;AAGxB/R,MAAAA,UAAU,EAAE,IAAI/E,8BAAJ,CAAoB,QAApB,EAA8B,IAA9B,CAHY;AAIxB0E,MAAAA,WAAW,EAAE,IAAI1E,8BAAJ,CAAoB,0DAApB,EAAgF,IAAhF,CAJW;AAKxBlgB,MAAAA,KAAK,EAAE;AALiB,KAAzB;AAQA,QAAIk3B,gBAAgB,GAAG;AACtBl3B,MAAAA,KAAK,EAAE;AADe,KAAvB;AAIA,QAAIm3B,2BAA2B,GAAG;AACjChlJ,MAAAA,SAAS,EAAEQ,kBADsB;AAEjCgoC,MAAAA,IAAI,EAAE,IAAI46G,0CAAJ,CAA0B5iJ,kBAA1B,CAF2B;AAGjCsyI,MAAAA,UAAU,EAAE,IAAI/E,8BAAJ,CAAoB,iBAApB,EAAuC,IAAvC,CAHqB;AAIjC0E,MAAAA,WAAW,EAAE,IAAI1E,8BAAJ,CAAoB,mEAApB,EAAyF,IAAzF,CAJoB;AAKjClgB,MAAAA,KAAK,EAAE;AAL0B,KAAlC,CAjBM,CAyBN;;AAEA,QAAK,KAAK1lI,IAAV,EAAiB,KAAKA,IAAL,CAAUggJ,OAAV,CAAmBC,OAAnB;AAEjB,SAAKzrL,KAAL,CAAWwrL,OAAX,CAAoBC,OAApB,EAA6B;AAAE3yF,MAAAA,IAAI,EAAE,OAAR;AAAiBx/D,MAAAA,OAAO,EAAE8uK;AAA1B,KAA7B;AACA,SAAK/kJ,SAAL,CAAemoI,OAAf,CAAwBC,OAAxB;AACA,SAAKnoI,SAAL,CAAekoI,OAAf,CAAwBC,OAAxB;AAEA,QAAK,KAAK73J,KAAV,EAAkB,KAAKA,KAAL,CAAW43J,OAAX,CAAoBC,OAApB;AAElB,QAAK,KAAKvmJ,MAAV,EAAmB,KAAKA,MAAL,CAAYsmJ,OAAZ,CAAqBC,OAArB;AAEnB,QAAK,KAAK7nI,SAAV,EAAsB,KAAKA,SAAL,CAAe4nI,OAAf,CAAwBC,OAAxB;AACtB,QAAK,KAAK5nI,kBAAV,EAA+B,KAAKA,kBAAL,CAAwB2nI,OAAxB,CAAiCC,OAAjC;AAC/B,QAAK,KAAK6c,eAAV,EAA4B,KAAKA,eAAL,CAAqB9c,OAArB,CAA8BC,OAA9B;AAE5B,QAAK,KAAKrmI,YAAV,EAAyB,KAAKA,YAAL,CAAkBomI,OAAlB,CAA2BC,OAA3B;AAEzB,QAAK,KAAK5hG,KAAV,EAAkB,KAAKA,KAAL,CAAW2hG,OAAX,CAAoBC,OAApB,EAA6B;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAA7B;AAElB,QAAK,KAAKq2J,EAAV,EAAe,KAAKA,EAAL,CAAQrc,OAAR,CAAiBC,OAAjB;AACf,QAAK,KAAK1gG,OAAV,EAAoB,KAAKA,OAAL,CAAaygG,OAAb,CAAsBC,OAAtB;AACpB,QAAK,KAAKr/G,MAAV,EAAmB,KAAKA,MAAL,CAAYo/G,OAAZ,CAAqBC,OAArB;AACnB,QAAK,KAAKjoI,QAAV,EAAqB,KAAKA,QAAL,CAAcgoI,OAAd,CAAuBC,OAAvB,EAAgC;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAAhC;;AAErB,QAAK,KAAKjnD,WAAV,EAAwB;AAEvB;AACA;AAEA,WAAKA,WAAL,CAAiB25I,OAAjB,CAA0BC,OAA1B,EAAmC;AAAEj6I,QAAAA,KAAK,EAAE,UAAT;AAAqBlY,QAAAA,OAAO,EAAE6uK,kBAA9B;AAAkDrvG,QAAAA,IAAI,EAAE;AAAxD,OAAnC;;AAEA,UAAK2yF,OAAO,CAACmH,QAAR,CAAiB2V,UAAtB,EAAmC;AAElC,aAAK12J,WAAL,CAAiB25I,OAAjB,CAA0BC,OAA1B,EAAmC;AAAEj6I,UAAAA,KAAK,EAAE,YAAT;AAAuBlY,UAAAA,OAAO,EAAE6uK,kBAAhC;AAAoDrvG,UAAAA,IAAI,EAAE;AAA1D,SAAnC;AAEA;AAED;;AAED,QAAK,KAAKv1C,KAAV,EAAkB,KAAKA,KAAL,CAAWioI,OAAX,CAAoBC,OAApB,EAjEZ,CAmEN;;AAEA,QAAIjgJ,IAAI,GAAG,KAAKA,IAAL,GAAY,KAAKA,IAAL,CAAUygJ,IAAV,CAAgBR,OAAhB,EAAyB,GAAzB,CAAZ,GAA6CnoL,SAAxD;AAEA,QAAItD,KAAK,GAAG,KAAKA,KAAL,CAAWisL,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,EAA+B;AAAE3yF,MAAAA,IAAI,EAAE,OAAR;AAAiBx/D,MAAAA,OAAO,EAAE8uK;AAA1B,KAA/B,CAAZ;AACA,QAAI/kJ,SAAS,GAAG,KAAKA,SAAL,CAAe4oI,IAAf,CAAqBR,OAArB,EAA8B,GAA9B,CAAhB;AACA,QAAInoI,SAAS,GAAG,KAAKA,SAAL,CAAe2oI,IAAf,CAAqBR,OAArB,EAA8B,GAA9B,CAAhB;AAEA,QAAI73J,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAWq4J,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,CAAb,GAA+CnoL,SAA3D;AAEA,QAAI4hC,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY+mJ,IAAZ,CAAkBR,OAAlB,EAA2B,IAA3B,CAAd,GAAkDnoL,SAA/D;AAEA,QAAIsgD,SAAS,GAAG,KAAKA,SAAL,GAAiB,KAAKA,SAAL,CAAeqoI,IAAf,CAAqBR,OAArB,EAA8B,GAA9B,CAAjB,GAAuDnoL,SAAvE;AACA,QAAIugD,kBAAkB,GAAG,KAAKA,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBooI,IAAxB,CAA8BR,OAA9B,EAAuC,GAAvC,CAA1B,GAAyEnoL,SAAlG;AACA,QAAIglM,eAAe,GAAG,KAAKA,eAAL,GAAuB,KAAKA,eAAL,CAAqBrc,IAArB,CAA2BR,OAA3B,EAAoC,IAApC,CAAvB,GAAoEnoL,SAA1F;AAEA,QAAI8hD,YAAY,GAAG,KAAKA,YAAL,GAAoB,KAAKA,YAAL,CAAkB6mI,IAAlB,CAAwBR,OAAxB,EAAiC,GAAjC,CAApB,GAA6DnoL,SAAhF;AAEA,QAAIumF,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAWoiG,IAAX,CAAiBR,OAAjB,EAA0B,IAA1B,EAAgC;AAAEj6I,MAAAA,KAAK,EAAE;AAAT,KAAhC,CAAb,GAAoEluC,SAAhF;AAEA,QAAIukM,EAAE,GAAG,KAAKA,EAAL,GAAU,KAAKA,EAAL,CAAQ5b,IAAR,CAAcR,OAAd,EAAuB,GAAvB,CAAV,GAAyCnoL,SAAlD;AACA,QAAIynF,OAAO,GAAG,KAAKA,OAAL,GAAe,KAAKA,OAAL,CAAakhG,IAAb,CAAmBR,OAAnB,EAA4B,GAA5B,CAAf,GAAmDnoL,SAAjE;AACA,QAAI8oE,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKA,MAAL,CAAY6/G,IAAZ,CAAkBR,OAAlB,EAA2B,GAA3B,CAAd,GAAiDnoL,SAA9D;AACA,QAAIkgD,QAAQ,GAAG,KAAKA,QAAL,GAAgB,KAAKA,QAAL,CAAcyoI,IAAd,CAAoBR,OAApB,EAA6B,GAA7B,EAAkC;AAAE3yF,MAAAA,IAAI,EAAE;AAAR,KAAlC,CAAhB,GAA2Ex1F,SAA1F;AAEA,QAAIuuC,WAAJ;;AAEA,QAAK,KAAKA,WAAV,EAAwB;AAEvBA,MAAAA,WAAW,GAAG;AACb22J,QAAAA,QAAQ,EAAE,KAAK32J,WAAL,CAAiBo6I,IAAjB,CAAuBR,OAAvB,EAAgC,GAAhC,EAAqC;AAAEj6I,UAAAA,KAAK,EAAE,UAAT;AAAqBlY,UAAAA,OAAO,EAAE6uK,kBAA9B;AAAkDrvG,UAAAA,IAAI,EAAE;AAAxD,SAArC;AADG,OAAd;;AAIA,UAAK2yF,OAAO,CAACmH,QAAR,CAAiB2V,UAAtB,EAAmC;AAElC12J,QAAAA,WAAW,CAAC02J,UAAZ,GAAyB,KAAK12J,WAAL,CAAiBo6I,IAAjB,CAAuBR,OAAvB,EAAgC,GAAhC,EAAqC;AAAEj6I,UAAAA,KAAK,EAAE,YAAT;AAAuBlY,UAAAA,OAAO,EAAE6uK,kBAAhC;AAAoDrvG,UAAAA,IAAI,EAAE;AAA1D,SAArC,CAAzB;AAEA;AAED;;AAED,QAAI2vG,YAAY,GAAGT,YAAY,IAAIn2J,WAAhB,GAA8B,KAAKA,WAAL,CAAiBo6I,IAAjB,CAAuBR,OAAvB,EAAgC,GAAhC,EAAqC;AAAEj6I,MAAAA,KAAK,EAAE,WAAT;AAAsBlY,MAAAA,OAAO,EAAE+uK,2BAA/B;AAA4DvvG,MAAAA,IAAI,EAAE;AAAlE,KAArC,CAA9B,GAAyJx1F,SAA5K;AAEA,QAAIigD,KAAK,GAAG,KAAKA,KAAL,GAAa,KAAKA,KAAL,CAAW0oI,IAAX,CAAiBR,OAAjB,EAA0B,GAA1B,CAAb,GAA+CnoL,SAA3D;AAEAmoL,IAAAA,OAAO,CAACmH,QAAR,CAAiB5xI,WAAjB,GAA+BptB,KAAK,KAAKtwB,SAAzC;AAEAmoL,IAAAA,OAAO,CAACwT,WAAR,CAAqB,CACpB,6BADoB,EAGpB,qBAHoB,EAKpB,wBALoB,EAOpB,QAPoB,EASpB,oCAToB,EAUpB,8BAVoB,EAWpB,kBAXoB,EAYpB,8BAZoB,EAapB,0CAboB,EAcpB,oCAdoB,EAepB,sCAfoB,EAgBnBtzL,IAhBmB,CAgBb,IAhBa,CAArB;AAkBA,QAAI2U,MAAM,GAAG,CACZ,qCADY,EAGZ;AACA,uCAJY,EAKZ,6CALY,EAOZ;AACA,iCARY,EASZ,uCATY,CAAb;;AAYA,QAAKkrB,IAAL,EAAY;AAEXlrB,MAAAA,MAAM,CAAC5U,IAAP,CACC8/B,IAAI,CAAC0gJ,IADN,EAEC,YAAY1gJ,IAAI,CAACpnC,MAAjB,GAA0B,aAF3B;AAKA;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC1L,KAAK,CAACksL,IADP,EAEC,0BAA0BlsL,KAAK,CAACoE,MAAhC,GAAyC,GAF1C,EAGC,wGAHD,EAKC,iCALD,EAOCi/C,SAAS,CAAC6oI,IAPX,EAQC,8BAA8B7oI,SAAS,CAACj/C,MAAxC,GAAiD,GARlD,EAUCk/C,SAAS,CAAC4oI,IAVX,EAWC,8BAA8B5oI,SAAS,CAACl/C,MAAxC,GAAiD,GAXlD;;AAcA,QAAKwvB,KAAL,EAAa;AAEZtT,MAAAA,MAAM,CAAC5U,IAAP,CACCkoB,KAAK,CAACs4J,IADP,EAEC,kBAFD,EAIC,WAAWt4J,KAAK,CAACxvB,MAAjB,GAA0B,0BAJ3B,EAMC,QAND;AASA;;AAED,QAAK8gC,MAAL,EAAc;AAEb5kB,MAAAA,MAAM,CAAC5U,IAAP,CACCw5B,MAAM,CAACgnJ,IADR,EAEC,cAAchnJ,MAAM,CAAC9gC,MAArB,GAA8B,GAF/B;AAKA;;AAED,QAAKkkM,eAAL,EAAuB;AAEtBhoL,MAAAA,MAAM,CAAC5U,IAAP,CACC48L,eAAe,CAACpc,IADjB,EAEC,uBAAuBoc,eAAe,CAAClkM,MAAvC,GAAgD,GAFjD;AAKA,KApMK,CAsMN;;;AAEAkc,IAAAA,MAAM,CAAC5U,IAAP,CACC,iFADD,EAEC,8DAFD,EAxMM,CA6MN;;AAEA4U,IAAAA,MAAM,CAAC5U,IAAP,CACC,8BAA+Bm+E,KAAK,GAAG,aAAH,GAAmB,0CAAvD,IAAsG,GADvG,EAGC,8DAHD,EAIC,kDAJD,EAKC,sEALD,EAOC,mEAPD;;AAUA,QAAKjmC,SAAL,EAAiB;AAEhBtjC,MAAAA,MAAM,CAAC5U,IAAP,CACCk4C,SAAS,CAACsoI,IADX,EAEC,oCAAoCtoI,SAAS,CAACx/C,MAA9C,GAAuD,KAFxD,CAE8D;AAF9D;AAKA,KAPD,MAOO,IAAK4jM,YAAL,EAAoB;AAE1B1nL,MAAAA,MAAM,CAAC5U,IAAP,CAAa,2BAAb;AAEA;;AAED,QAAKm4C,kBAAL,EAA0B;AAEzBvjC,MAAAA,MAAM,CAAC5U,IAAP,CACCm4C,kBAAkB,CAACqoI,IADpB,EAEC,wCAAwCroI,kBAAkB,CAACz/C,MAA3D,GAAoE,aAFrE,EAGC,mDAHD,EAIC,wEAJD;AAOA,KATD,MASO,IAAK4jM,YAAL,EAAoB;AAE1B1nL,MAAAA,MAAM,CAAC5U,IAAP,CAAa,oCAAb;AAEA;;AAED,QAAK63C,KAAL,EAAa;AAEZjjC,MAAAA,MAAM,CAAC5U,IAAP,CAAa,2BAA2B63C,KAAK,CAACn/C,MAAjC,GAA0C,GAAvD;AAEA;;AAED,QAAKghD,YAAL,EAAoB;AAEnB9kC,MAAAA,MAAM,CAAC5U,IAAP,CACC05C,YAAY,CAAC8mI,IADd,EAEC,8EAA8E9mI,YAAY,CAAChhD,MAA3F,GAAoG,wCAFrG;AAKA,KAPD,MAOO;AAENkc,MAAAA,MAAM,CAAC5U,IAAP,CACC,sGADD;AAIA;;AAED4U,IAAAA,MAAM,CAAC5U,IAAP,CACC,kCADD;;AAIA,QAAKm+E,KAAL,EAAa;AAEZvpE,MAAAA,MAAM,CAAC5U,IAAP,CACCm+E,KAAK,CAACqiG,IADP,EAEC,oCAAoCriG,KAAK,CAACzlF,MAA1C,GAAmD,GAFpD,EAFY,CAOZ;;AAEAkc,MAAAA,MAAM,CAAC5U,IAAP,CACC,wCADD,EAGC,+CAHD,EAIC,iDAJD;AAOA;;AAED,QAAKm8L,EAAL,EAAU;AAETvnL,MAAAA,MAAM,CAAC5U,IAAP,CACCm8L,EAAE,CAAC3b,IADJ,EAEC,uCAAuC2b,EAAE,CAACzjM,MAA1C,GAAmD,GAFpD,EAGC,qEAHD,EAIC,yEAAyEyjM,EAAE,CAACzjM,MAA5E,GAAqF,iCAJtF;AAOA;;AAED,QAAK2mF,OAAL,EAAe;AAEdzqE,MAAAA,MAAM,CAAC5U,IAAP,CACCq/E,OAAO,CAACmhG,IADT,EAEC,uCAAuCnhG,OAAO,CAAC3mF,MAA/C,GAAwD,GAFzD;AAKA;;AAED,QAAKgoE,MAAL,EAAc;AAEb9rD,MAAAA,MAAM,CAAC5U,IAAP,CACC0gE,MAAM,CAAC8/G,IADR,EAEC,qCAAqC9/G,MAAM,CAAChoE,MAA5C,GAAqD,GAFtD,EAGC,sCAAsCgoE,MAAM,CAAChoE,MAA7C,GAAsD,GAHvD;AAMA;;AAED,QAAKo/C,QAAL,EAAgB;AAEfljC,MAAAA,MAAM,CAAC5U,IAAP,CACC83C,QAAQ,CAAC0oI,IADV,EAEC,qCAAqC1oI,QAAQ,CAACp/C,MAA9C,GAAuD,GAFxD;AAKA;;AAED,QAAKytC,WAAL,EAAmB;AAElBvxB,MAAAA,MAAM,CAAC5U,IAAP,CAAammC,WAAW,CAAC22J,QAAZ,CAAqBtc,IAAlC;;AAEA,UAAKT,OAAO,CAACmH,QAAR,CAAiB2V,UAAtB,EAAmC;AAElCjoL,QAAAA,MAAM,CAAC5U,IAAP,CAAammC,WAAW,CAAC02J,UAAZ,CAAuBrc,IAApC;AAEA;;AAED,UAAKuc,YAAL,EAAoB;AAEnBnoL,QAAAA,MAAM,CAAC5U,IAAP,CACC+8L,YAAY,CAACvc,IADd,EAEC,0BAA0Buc,YAAY,CAACrkM,MAAvC,GAAgD,GAFjD;AAKA;;AAEDkc,MAAAA,MAAM,CAAC5U,IAAP,CAAa,iBAAiBmmC,WAAW,CAAC22J,QAAZ,CAAqBpkM,MAAtC,GAA+C,GAA5D;;AAEA,UAAKqnL,OAAO,CAACmH,QAAR,CAAiB2V,UAAtB,EAAmC;AAElCjoL,QAAAA,MAAM,CAAC5U,IAAP,CAAa,2BAA2BmmC,WAAW,CAAC02J,UAAZ,CAAuBnkM,MAAlD,GAA2D,GAAxE;AAEA;AAED;;AAEDkc,IAAAA,MAAM,CAAC5U,IAAP,CACC,gCADD;AAIA4U,IAAAA,MAAM,CAAC5U,IAAP,CAAa,uJAAb;;AAEA,QAAKkoB,KAAL,EAAa;AAEZtT,MAAAA,MAAM,CAAC5U,IAAP,CAAa,yCAAyCkoB,KAAK,CAACxvB,MAA/C,GAAwD,KAArE;AAEA,KAJD,MAIO;AAENkc,MAAAA,MAAM,CAAC5U,IAAP,CAAa,4CAAb;AAEA;;AAED4U,IAAAA,MAAM,CAAC5U,IAAP,CACC,iCADD,EAEC,+BAFD,EAGC,yBAHD,EAIC,yCAJD,EAKC,+BALD;AAQAwgL,IAAAA,IAAI,GAAG5rK,MAAM,CAAC3U,IAAP,CAAa,IAAb,CAAP;AAEA;;AAED,SAAOugL,IAAP;AAEA,CAreD;;AAueA6b,YAAY,CAAC1mM,SAAb,CAAuBswB,IAAvB,GAA8B,UAAWpR,MAAX,EAAoB;AAEjD+8F,aAAKj8G,SAAL,CAAeswB,IAAf,CAAoB/vB,IAApB,CAA0B,IAA1B,EAAgC2e,MAAhC,EAFiD,CAIjD;;;AAEA,MAAKA,MAAM,CAACxX,QAAZ,EAAuB,KAAKA,QAAL,GAAgBwX,MAAM,CAACxX,QAAvB,CAN0B,CAQjD;;AAEA,OAAK/I,KAAL,GAAaugB,MAAM,CAACvgB,KAApB;AACA,OAAKqjD,SAAL,GAAiB9iC,MAAM,CAAC8iC,SAAxB;AACA,OAAKC,SAAL,GAAiB/iC,MAAM,CAAC+iC,SAAxB;AAEA,MAAK/iC,MAAM,CAACirB,IAAZ,EAAmB,KAAKA,IAAL,GAAYjrB,MAAM,CAACirB,IAAnB;AAEnB,MAAKjrB,MAAM,CAACqT,KAAZ,EAAoB,KAAKA,KAAL,GAAarT,MAAM,CAACqT,KAApB;AAEpB,MAAKrT,MAAM,CAAC2kB,MAAZ,EAAqB,KAAKA,MAAL,GAAc3kB,MAAM,CAAC2kB,MAArB;AAErB,MAAK3kB,MAAM,CAACqjC,SAAZ,EAAwB,KAAKA,SAAL,GAAiBrjC,MAAM,CAACqjC,SAAxB;AACxB,MAAKrjC,MAAM,CAACsjC,kBAAZ,EAAiC,KAAKA,kBAAL,GAA0BtjC,MAAM,CAACsjC,kBAAjC;AACjC,MAAKtjC,MAAM,CAAC+nL,eAAZ,EAA8B,KAAKA,eAAL,GAAuB/nL,MAAM,CAAC+nL,eAA9B;AAE9B,MAAK/nL,MAAM,CAAC6kC,YAAZ,EAA2B,KAAKA,YAAL,GAAoB7kC,MAAM,CAAC6kC,YAA3B;AAE3B,MAAK7kC,MAAM,CAACspE,KAAZ,EAAoB,KAAKA,KAAL,GAAatpE,MAAM,CAACspE,KAApB;AACpB,MAAKtpE,MAAM,CAAC6rD,MAAZ,EAAqB,KAAKA,MAAL,GAAc7rD,MAAM,CAAC6rD,MAArB;AAErB,MAAK7rD,MAAM,CAACsnL,EAAZ,EAAiB,KAAKA,EAAL,GAAUtnL,MAAM,CAACsnL,EAAjB;AAEjB,MAAKtnL,MAAM,CAACijC,QAAZ,EAAuB,KAAKA,QAAL,GAAgBjjC,MAAM,CAACijC,QAAvB;AACvB,MAAKjjC,MAAM,CAACwqE,OAAZ,EAAsB,KAAKA,OAAL,GAAexqE,MAAM,CAACwqE,OAAtB;AAEtB,MAAKxqE,MAAM,CAACsxB,WAAZ,EAA0B,KAAKA,WAAL,GAAmBtxB,MAAM,CAACsxB,WAA1B;AAE1B,MAAKtxB,MAAM,CAACgjC,KAAZ,EAAoB,KAAKA,KAAL,GAAahjC,MAAM,CAACgjC,KAApB;AAEpB,SAAO,IAAP;AAEA,CAxCD;;AA0CAwkJ,YAAY,CAAC1mM,SAAb,CAAuBg6B,MAAvB,GAAgC,UAAWC,IAAX,EAAkB;AAEjD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP,CAFa,CAIb;;AAEA,QAAK,KAAKvyB,QAAV,EAAqB2oC,IAAI,CAAC3oC,QAAL,GAAgB,KAAKA,QAAL,CAAcsyB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C,CANR,CAQb;;AAEAojB,IAAAA,IAAI,CAAC1xC,KAAL,GAAa,KAAKA,KAAL,CAAWq7B,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AACAojB,IAAAA,IAAI,CAAC2R,SAAL,GAAiB,KAAKA,SAAL,CAAehoB,MAAf,CAAuBC,IAAvB,EAA8BhN,IAA/C;AACAojB,IAAAA,IAAI,CAAC4R,SAAL,GAAiB,KAAKA,SAAL,CAAejoB,MAAf,CAAuBC,IAAvB,EAA8BhN,IAA/C;AAEA,QAAK,KAAKkd,IAAV,EAAiBkG,IAAI,CAAClG,IAAL,GAAY,KAAKA,IAAL,CAAUnQ,MAAV,CAAkBC,IAAlB,EAAyBhN,IAArC;AAEjB,QAAK,KAAKsF,KAAV,EAAkB8d,IAAI,CAAC9d,KAAL,GAAa,KAAKA,KAAL,CAAWyH,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB,QAAK,KAAK4W,MAAV,EAAmBwM,IAAI,CAACxM,MAAL,GAAc,KAAKA,MAAL,CAAY7J,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEnB,QAAK,KAAKs1B,SAAV,EAAsBlS,IAAI,CAACkS,SAAL,GAAiB,KAAKA,SAAL,CAAevoB,MAAf,CAAuBC,IAAvB,EAA8BhN,IAA/C;AACtB,QAAK,KAAKu1B,kBAAV,EAA+BnS,IAAI,CAACmS,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBxoB,MAAxB,CAAgCC,IAAhC,EAAuChN,IAAjE;AAC/B,QAAK,KAAKg6K,eAAV,EAA4B52J,IAAI,CAAC42J,eAAL,GAAuB,KAAKA,eAAL,CAAqBjtK,MAArB,CAA6BC,IAA7B,EAAoChN,IAA3D;AAE5B,QAAK,KAAK82B,YAAV,EAAyB1T,IAAI,CAAC0T,YAAL,GAAoB,KAAKA,YAAL,CAAkB/pB,MAAlB,CAA0BC,IAA1B,EAAiChN,IAArD;AAEzB,QAAK,KAAKu7D,KAAV,EAAkBn4C,IAAI,CAACm4C,KAAL,GAAa,KAAKA,KAAL,CAAWxuD,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAClB,QAAK,KAAK89C,MAAV,EAAmB16B,IAAI,CAAC06B,MAAL,GAAc,KAAKA,MAAL,CAAY/wC,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEnB,QAAK,KAAKu5K,EAAV,EAAen2J,IAAI,CAACm2J,EAAL,GAAU,KAAKA,EAAL,CAAQxsK,MAAR,CAAgBC,IAAhB,EAAuBhN,IAAjC;AAEf,QAAK,KAAKk1B,QAAV,EAAqB9R,IAAI,CAAC8R,QAAL,GAAgB,KAAKA,QAAL,CAAcnoB,MAAd,CAAsBC,IAAtB,EAA6BhN,IAA7C;AACrB,QAAK,KAAKy8D,OAAV,EAAoBr5C,IAAI,CAACq5C,OAAL,GAAe,KAAKA,OAAL,CAAa1vD,MAAb,CAAqBC,IAArB,EAA4BhN,IAA3C;AAEpB,QAAK,KAAKujB,WAAV,EAAwBH,IAAI,CAACG,WAAL,GAAmB,KAAKA,WAAL,CAAiBxW,MAAjB,CAAyBC,IAAzB,EAAgChN,IAAnD;AAExB,QAAK,KAAKi1B,KAAV,EAAkB7R,IAAI,CAAC6R,KAAL,GAAa,KAAKA,KAAL,CAAWloB,MAAX,CAAmBC,IAAnB,EAA0BhN,IAAvC;AAElB;;AAED,SAAOojB,IAAP;AAEA,CA9CD;;;;;;;;;AC1iBA;;AAKA;;AACA;;AACA;;AACA;;AACA;;AAbA;;;AAeA,SAASg3J,gBAAT,GAA4B;AAE3BX,6BAAanmM,IAAb,CAAmB,IAAnB;;AAEA,OAAK69D,UAAL,GAAkB;AACjBz/D,IAAAA,KAAK,EAAE,IAAI4F,kBAAJ,CAAW,QAAX,CADU;AAEjBy9C,IAAAA,SAAS,EAAE,GAFM;AAGjBC,IAAAA,SAAS,EAAE,GAHM;AAIjBqB,IAAAA,WAAW,EAAE,IAAIzzB,oBAAJ,CAAa,CAAb,EAAgB,CAAhB;AAJI,GAAlB;AAOA,OAAKy+J,MAAL,GAAc;AACb3vL,IAAAA,KAAK,EAAE,IAAIyhM,0BAAJ,CAAkB,KAAKhiI,UAAvB,EAAmC,OAAnC,EAA4C,GAA5C,CADM;AAEbpc,IAAAA,SAAS,EAAE,IAAIo+I,0BAAJ,CAAkB,KAAKhiI,UAAvB,EAAmC,WAAnC,EAAgD,GAAhD,CAFE;AAGbnc,IAAAA,SAAS,EAAE,IAAIm+I,0BAAJ,CAAkB,KAAKhiI,UAAvB,EAAmC,WAAnC,EAAgD,GAAhD,CAHE;AAIb9a,IAAAA,WAAW,EAAE,IAAI88I,0BAAJ,CAAkB,KAAKhiI,UAAvB,EAAmC,aAAnC,EAAkD,IAAlD;AAJA,GAAd;AAOA;;AAEDipI,gBAAgB,CAACrnM,SAAjB,GAA6BY,MAAM,CAACi5B,MAAP,CAAe6sK,2BAAa1mM,SAA5B,CAA7B;AACAqnM,gBAAgB,CAACrnM,SAAjB,CAA2BoC,WAA3B,GAAyCilM,gBAAzC;AACAA,gBAAgB,CAACrnM,SAAjB,CAA2B8rL,QAA3B,GAAsC,cAAtC;;AAEAub,gBAAgB,CAACrnM,SAAjB,CAA2BsqL,KAA3B,GAAmC,UAAWF,OAAX,EAAqB;AAEvD,MAAIkd,KAAK,GAAG,KAAKlpI,UAAjB;AAAA,MACCkwH,MAAM,GAAG,KAAKA,MADf;;AAGA,MAAKlE,OAAO,CAACgD,QAAR,CAAkB,UAAlB,CAAL,EAAsC;AAErC;AACA;AACA;AAEA,QAAIzuL,KAAK,GAAGyrL,OAAO,CAAC31C,QAAR,CAAkB6yD,KAAK,CAAC3oM,KAAxB,EAA+B2vL,MAAM,CAAC3vL,KAAtC,CAAZ;AAAA,QACCyN,GAAG,GAAGg+K,OAAO,CAACz2D,OAAR,CAAiB2zE,KAAK,CAACl7L,GAAvB,CADP;AAGA,SAAKzN,KAAL,GAAayN,GAAG,GAAG,IAAIipL,0BAAJ,CAAkB12L,KAAlB,EAAyByN,GAAzB,EAA8BipL,2BAAaG,GAA3C,CAAH,GAAsD72L,KAAtE,CATqC,CAWrC;AACA;AACA;;AAEA,QAAIqjD,SAAS,GAAGooI,OAAO,CAAC31C,QAAR,CAAkB6yD,KAAK,CAACtlJ,SAAxB,EAAmCssI,MAAM,CAACtsI,SAA1C,CAAhB;AAAA,QACC0B,YAAY,GAAG0mI,OAAO,CAACz2D,OAAR,CAAiB2zE,KAAK,CAAC5jJ,YAAvB,CADhB;AAGA,SAAK1B,SAAL,GAAiB0B,YAAY,GAAG,IAAI2xI,0BAAJ,CAAkBrzI,SAAlB,EAA6B,IAAI+hJ,sBAAJ,CAAgBrgJ,YAAhB,EAA8B,GAA9B,CAA7B,EAAkE2xI,2BAAaG,GAA/E,CAAH,GAA0FxzI,SAAvH,CAlBqC,CAoBrC;AACA;AACA;;AAEA,QAAIC,SAAS,GAAGmoI,OAAO,CAAC31C,QAAR,CAAkB6yD,KAAK,CAACrlJ,SAAxB,EAAmCqsI,MAAM,CAACrsI,SAA1C,CAAhB;AAAA,QACC0B,YAAY,GAAGymI,OAAO,CAACz2D,OAAR,CAAiB2zE,KAAK,CAAC3jJ,YAAvB,CADhB;AAGA,SAAK1B,SAAL,GAAiB0B,YAAY,GAAG,IAAI0xI,0BAAJ,CAAkBpzI,SAAlB,EAA6B,IAAI8hJ,sBAAJ,CAAgBpgJ,YAAhB,EAA8B,GAA9B,CAA7B,EAAkE0xI,2BAAaG,GAA/E,CAAH,GAA0FvzI,SAAvH,CA3BqC,CA6BrC;AACA;AACA;;AAEA,QAAKqlJ,KAAK,CAAClkJ,SAAX,EAAuB;AAEtB,WAAKvf,MAAL,GAAc,IAAIq/J,4BAAJ,CAAmB9Y,OAAO,CAACz2D,OAAR,CAAiB2zE,KAAK,CAAClkJ,SAAvB,CAAnB,CAAd;AACA,WAAKvf,MAAL,CAAYxM,KAAZ,GAAoB+yJ,OAAO,CAAC31C,QAAR,CAAkB6yD,KAAK,CAAChkJ,WAAxB,EAAqCgrI,MAAM,CAAChrI,WAA5C,CAApB;AAEA,KALD,MAKO;AAEN,WAAKzf,MAAL,GAAc5hC,SAAd;AAEA,KA1CoC,CA4CrC;AACA;;;AAEA,SAAKuuC,WAAL,GAAmB45I,OAAO,CAACz2D,OAAR,CAAiB2zE,KAAK,CAACxjJ,MAAvB,CAAnB;AAEA,GAtDsD,CAwDvD;;;AAEA,SAAO4iJ,2BAAa1mM,SAAb,CAAuBsqL,KAAvB,CAA6B/pL,IAA7B,CAAmC,IAAnC,EAAyC6pL,OAAzC,CAAP;AAEA,CA5DD;;AA8DAid,gBAAgB,CAACrnM,SAAjB,CAA2Bg6B,MAA3B,GAAoC,UAAWC,IAAX,EAAkB;AAErD,MAAIoW,IAAI,GAAG,KAAKu7I,WAAL,CAAkB3xJ,IAAlB,CAAX;;AAEA,MAAK,CAAEoW,IAAP,EAAc;AAEbA,IAAAA,IAAI,GAAG,KAAKw7I,cAAL,CAAqB5xJ,IAArB,CAAP;AAEAtK,IAAAA,OAAO,CAACC,IAAR,CAAc,4BAAd,EAA4C,IAA5C;AAEA;;AAED,SAAOygB,IAAP;AAEA,CAdD;;;;;;;;;ACjGA;;AACA;;AACA;;AANA;;;AAQA,SAASk3J,kBAAT,GAA8B;AAE7B,MAAI9tL,IAAI,GAAG,IAAI6sL,sBAAJ,EAAX;;AAEAhG,6BAAa//L,IAAb,CAAmB,IAAnB,EAAyBkZ,IAAzB,EAA+BA,IAA/B;;AAEA,OAAKpO,IAAL,GAAY,oBAAZ;AAEA;;AAEDk8L,kBAAkB,CAACvnM,SAAnB,GAA+BY,MAAM,CAACi5B,MAAP,CAAeymK,2BAAatgM,SAA5B,CAA/B;AACAunM,kBAAkB,CAACvnM,SAAnB,CAA6BoC,WAA7B,GAA2CmlM,kBAA3C;;AAEAlX,qBAAUC,YAAV,CAAwBiX,kBAAkB,CAACvnM,SAA3C,EAAsD,UAAtD,EAAkE,CACjE,OADiE,EAEjE,OAFiE,EAGjE,MAHiE,EAIjE,UAJiE,EAKjE,WALiE,CAAlE;;;;;;;;;ACjBA;;AACA;;AACA;;AANA;;;AAQA,SAASwnM,iBAAT,GAA6B;AAE5B,MAAI/tL,IAAI,GAAG,IAAI8sL,oBAAJ,EAAX;;AAEAjG,6BAAa//L,IAAb,CAAmB,IAAnB,EAAyBkZ,IAAzB,EAA+BA,IAA/B;;AAEA,OAAKpO,IAAL,GAAY,mBAAZ;AAEA;;AAEDm8L,iBAAiB,CAACxnM,SAAlB,GAA8BY,MAAM,CAACi5B,MAAP,CAAeymK,2BAAatgM,SAA5B,CAA9B;AACAwnM,iBAAiB,CAACxnM,SAAlB,CAA4BoC,WAA5B,GAA0ColM,iBAA1C;;AAEAnX,qBAAUC,YAAV,CAAwBkX,iBAAiB,CAACxnM,SAA1C,EAAqD,UAArD,EAAiE,CAChE,OADgE,EAEhE,OAFgE,EAGhE,UAHgE,EAIhE,WAJgE,EAKhE,QALgE,EAMhE,UANgE,EAOhE,SAPgE,EAQhE,OARgE,EAShE,QATgE,EAUhE,IAVgE,EAWhE,aAXgE,EAYhE,kBAZgE,EAahE,MAbgE,EAchE,UAdgE,CAAjE;;;;;;;;;ACjBA;;AACA;;AACA;;AANA;;;AAQA,SAASynM,oBAAT,GAAgC;AAE/B,MAAIhuL,IAAI,GAAG,IAAIitL,0BAAJ,EAAX;;AAEApG,6BAAa//L,IAAb,CAAmB,IAAnB,EAAyBkZ,IAAzB,EAA+BA,IAA/B;;AAEA,OAAKpO,IAAL,GAAY,sBAAZ;AAEA;;AAEDo8L,oBAAoB,CAACznM,SAArB,GAAiCY,MAAM,CAACi5B,MAAP,CAAeymK,2BAAatgM,SAA5B,CAAjC;AACAynM,oBAAoB,CAACznM,SAArB,CAA+BoC,WAA/B,GAA6CqlM,oBAA7C;;AAEApX,qBAAUC,YAAV,CAAwBmX,oBAAoB,CAACznM,SAA7C,EAAwD,UAAxD,EAAoE,CACnE,OADmE,EAEnE,OAFmE,EAGnE,WAHmE,EAInE,WAJmE,EAKnE,cALmE,EAMnE,WANmE,EAOnE,oBAPmE,EAQnE,iBARmE,EASnE,QATmE,EAUnE,UAVmE,EAWnE,SAXmE,EAYnE,OAZmE,EAanE,QAbmE,EAcnE,IAdmE,EAenE,aAfmE,EAgBnE,MAhBmE,EAiBnE,UAjBmE,EAkBnE,OAlBmE,CAApE;;;;;;;;;ACjBA;;AACA;;AACA;;AANA;;;AAQA,SAAS0nM,wBAAT,GAAoC;AAEnC,MAAIjuL,IAAI,GAAG,IAAI4tL,kCAAJ,EAAX;;AAEA/G,6BAAa//L,IAAb,CAAmB,IAAnB,EAAyBkZ,IAAzB,EAA+BA,IAA/B;;AAEA,OAAKpO,IAAL,GAAY,0BAAZ;AAEA;;AAEDq8L,wBAAwB,CAAC1nM,SAAzB,GAAqCY,MAAM,CAACi5B,MAAP,CAAeymK,2BAAatgM,SAA5B,CAArC;AACA0nM,wBAAwB,CAAC1nM,SAAzB,CAAmCoC,WAAnC,GAAiDslM,wBAAjD;;AAEArX,qBAAUC,YAAV,CAAwBoX,wBAAwB,CAAC1nM,SAAjD,EAA4D,YAA5D,EAA0E,CACzE,OADyE,EAEzE,WAFyE,EAGzE,WAHyE,EAIzE,KAJyE,EAKzE,WALyE,EAMzE,aANyE,EAOzE,cAPyE,EAQzE,cARyE,EASzE,QATyE,CAA1E;;;;;;;;;ACjBA;;AAWA;;AACA;;AAhBA;;;AAkBA,SAAS2nM,kBAAT,CAA6B5tI,QAA7B,EAAuCR,YAAvC,EAAsD;AAErD,MAAKA,YAAY,KAAKt3D,SAAtB,EAAkC;AAEjC,QAAI6tC,UAAU,GAAG;AAChBjX,MAAAA,SAAS,EAAExU,yBADK;AAEhBuU,MAAAA,SAAS,EAAEvU,yBAFK;AAGhByU,MAAAA,MAAM,EAAEtT,uBAHQ;AAIhBqX,MAAAA,aAAa,EAAE;AAJC,KAAjB;AAOA,QAAIiW,IAAI,GAAGinB,QAAQ,CAAC+sC,oBAAT,CAA+B,IAAIj3E,oBAAJ,EAA/B,CAAX;AACA0pC,IAAAA,YAAY,GAAG,IAAIh9B,8BAAJ,CAAuBuW,IAAI,CAACjoC,KAA5B,EAAmCioC,IAAI,CAAChoC,MAAxC,EAAgDglC,UAAhD,CAAf;AAEA;;AAED,OAAKiqB,QAAL,GAAgBA,QAAhB;AACA,OAAKR,YAAL,GAAoBA,YAApB;AAEA,OAAKt6C,MAAL,GAAc,IAAI2gL,sBAAJ,EAAd;AACA,OAAK5vJ,QAAL,GAAgB,IAAIswJ,0BAAJ,EAAhB;AAEA,OAAK59J,MAAL,GAAc,IAAIk9F,+BAAJ,CAAwB,CAAE,CAA1B,EAA6B,CAA7B,EAAgC,CAAhC,EAAmC,CAAE,CAArC,EAAwC,CAAxC,EAA2C,CAA3C,CAAd;AACA,OAAK5lE,KAAL,GAAa,IAAIzpB,kBAAJ,EAAb;AAEA,OAAKmwJ,IAAL,GAAY,IAAIxxI,iBAAJ,CAAU,IAAI0S,gCAAJ,CAAyB,CAAzB,EAA4B,CAA5B,CAAV,EAA2C,KAAK5xB,QAAhD,CAAZ;AACA,OAAK0wJ,IAAL,CAAUp0J,aAAV,GAA0B,KAA1B,CA1BqD,CA0BpB;;AACjC,OAAK0tB,KAAL,CAAWnhD,GAAX,CAAgB,KAAK6nL,IAArB;AAEA,OAAKz1I,WAAL,GAAmB,IAAnB;AAEA;;AAED08I,kBAAkB,CAAC3nM,SAAnB,GAA+B;AAE9BoC,EAAAA,WAAW,EAAEulM,kBAFiB;AAI9BrtI,EAAAA,MAAM,EAAE,UAAWN,KAAX,EAAkBt3B,MAAlB,EAA0By9B,KAA1B,EAAkC;AAEzC,QAAK,KAAKlV,WAAV,EAAwB;AAEvB,WAAKjb,QAAL,CAAcxV,OAAd;AAEA,WAAKwV,QAAL,CAAcs9I,QAAd,CAAuBhpL,KAAvB,GAA+B,KAAK2a,MAApC;AACA,WAAK+wB,QAAL,CAAcs6I,KAAd;;AAEA,UAAK,KAAKt6I,QAAL,CAAcumB,QAAd,CAAuBw6H,aAA5B,EAA4C;AAE3C,aAAK/gJ,QAAL,CAAcumB,QAAd,CAAuBw6H,aAAvB,CAAqCzsL,KAArC,GAA6C,KAAKi1D,YAAL,CAAkB58B,OAA/D;AAEA;;AAED,WAAKsuB,WAAL,GAAmB,KAAnB;AAEA;;AAEDkV,IAAAA,KAAK,CAAC0wH,WAAN,CAAmB,KAAK92H,QAAxB,EACE+2H,gBADF,CACoB,KAAKv3H,YAAL,CAAkB58B,OADtC;AAGA,SAAKo9B,QAAL,CAAcM,eAAd,CAA+B,KAAKd,YAApC;AACA,SAAKQ,QAAL,CAAcO,MAAd,CAAsBN,KAAtB,EAA6Bt3B,MAA7B;AAEAy9B,IAAAA,KAAK,CAAC6wH,UAAN,CAAkB,KAAKhhJ,QAAvB;AAEA,SAAK+pB,QAAL,CAAcM,eAAd,CAA+B,IAA/B;AACA,SAAKN,QAAL,CAAcO,MAAd,CAAsB,KAAKN,KAA3B,EAAkC,KAAKt3B,MAAvC;AAEA,GAlC6B;AAoC9BikE,EAAAA,aAAa,EAAE,UAAWriG,KAAX,EAAmB;AAEjC,SAAKy1D,QAAL,CAAc4sC,aAAd,CAA6BriG,KAA7B;AAEA,QAAIwuC,IAAI,GAAG,KAAKinB,QAAL,CAAc3mB,OAAd,CAAuB,IAAIvjB,oBAAJ,EAAvB,CAAX;AAEA,SAAKmN,OAAL,CAAc8V,IAAI,CAACjoC,KAAnB,EAA0BioC,IAAI,CAAChoC,MAA/B;AAEA,GA5C6B;AA8C9BkyB,EAAAA,OAAO,EAAE,UAAWnyB,KAAX,EAAkBC,MAAlB,EAA2B;AAEnC,QAAIm2F,UAAU,GAAG,KAAKlnC,QAAL,CAAc2sC,aAAd,EAAjB;AAEA,SAAKntC,YAAL,CAAkBv8B,OAAlB,CAA2BnyB,KAAK,GAAGo2F,UAAnC,EAA+Cn2F,MAAM,GAAGm2F,UAAxD;AAEA,SAAKlnC,QAAL,CAAc/8B,OAAd,CAAuBnyB,KAAvB,EAA8BC,MAA9B;AAEA,GAtD6B;AAwD9BwlB,EAAAA,IAAI,EAAE,UAAWpR,MAAX,EAAoB;AAEzB,SAAKD,MAAL,GAAcC,MAAM,CAACD,MAArB;AAEA,WAAO,IAAP;AAEA,GA9D6B;AAgE9B+a,EAAAA,MAAM,EAAE,UAAWC,IAAX,EAAkB;AAEzB,QAAIC,YAAY,GAAKD,IAAI,KAAKh4B,SAAT,IAAsB,OAAOg4B,IAAP,KAAgB,QAA3D;;AAEA,QAAKC,YAAL,EAAoB;AAEnBD,MAAAA,IAAI,GAAG;AACNkxJ,QAAAA,KAAK,EAAE;AADD,OAAP;AAIA;;AAED,QAAKlxJ,IAAI,IAAI,CAAEA,IAAI,CAAC2tK,IAApB,EAA2B3tK,IAAI,CAAC2tK,IAAL,GAAY,EAAZ;;AAE3B,QAAK,CAAE3tK,IAAI,CAAC2tK,IAAL,CAAW,KAAK36K,IAAhB,CAAP,EAAgC;AAE/B,UAAIojB,IAAI,GAAG,EAAX;AAEAA,MAAAA,IAAI,CAACpjB,IAAL,GAAY,KAAKA,IAAjB;AACAojB,MAAAA,IAAI,CAAChlC,IAAL,GAAY,oBAAZ;AAEA4uB,MAAAA,IAAI,CAAC2tK,IAAL,CAAW,KAAK36K,IAAhB,IAAyBojB,IAAzB;AAEA,UAAK,KAAK75B,IAAL,KAAc,EAAnB,EAAwB65B,IAAI,CAAC75B,IAAL,GAAY,KAAKA,IAAjB;AAExB,UAAKU,IAAI,CAACe,SAAL,CAAgB,KAAKu0B,QAArB,MAAoC,IAAzC,EAAgD6D,IAAI,CAAC7D,QAAL,GAAgB,KAAKA,QAArB;AAEhD6D,MAAAA,IAAI,CAACpxB,MAAL,GAAc,KAAKA,MAAL,CAAY+a,MAAZ,CAAoBC,IAApB,EAA2BhN,IAAzC;AAEA;;AAEDgN,IAAAA,IAAI,CAAC2tK,IAAL,GAAY,KAAK36K,IAAjB;AAEA,WAAOgN,IAAP;AAEA;AAnG6B,CAA/B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/CA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AAIA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AAIA;;;;ACzGA;;AAGA;;AAIA;;AACA;;AACA;;AACA;;AACA;;AAGA;;;;;;AAbA,IAAM1hB,GAAG,GAAG,IAAI8pK,GAAG,CAACrtK,GAAR,EAAZ;AAGAnM,MAAM,CAACo2K,KAAP,GAAeqE,KAAf;AAaA,IAAIukB,WAAW,GAAG,IAAIvkB,KAAK,CAAC7oH,qBAAV,CAAgC,IAAhC,EAAsC;AACpDzhC,EAAAA,QAAQ,EAAEsqJ,KAAK,CAAC35J,YADoC;AAEpDte,EAAAA,IAAI,EAAEi4K,KAAK,CAACr+J;AAFwC,CAAtC,CAAlB;AAIA,IAAI6iL,KAAK,GAAG,IAAI7oB,KAAK,CAACx1C,KAAV,EAAZ;AACA,IAAIzvE,KAAK,GAAG,IAAIilH,KAAK,CAAC1uI,KAAV,EAAZ;AACA,IAAIwpB,QAAQ,GAAG,IAAIklH,KAAK,CAACp8E,aAAV,CAAwB;AACnCU,EAAAA,eAAe,EAAE,kBADkB;AAEtC/E,EAAAA,SAAS,EAAE,KAF2B;AAGtChkC,EAAAA,OAAO,EAAE,KAH6B;AAItCxF,EAAAA,KAAK,EAAE;AAJ+B,CAAxB,CAAf;AAMA,IAAItyB,MAAM,GAAG,IAAI4gJ,KAAK,CAACzrH,iBAAV,CAA4B,EAA5B,EAAgChvD,MAAM,CAACmL,UAAP,GAAoBnL,MAAM,CAACqL,WAA3D,EAAwE,GAAxE,EAA6E,IAA7E,CAAb;AACA,IAAI6zL,QAAQ,GAAG,IAAIzkB,KAAK,CAAChqH,UAAV,CAAqB,GAArB,EAA0B,IAA1B,EAAgCuuI,WAAhC,CAAf;AACAnlK,MAAM,CAACh7B,QAAP,CAAgBkzB,CAAhB,GAAoB,EAApB;AACAotK,MAAM,CAACnmB,uBAAP,CAA+B9nH,QAA/B,GAA0C;;AAC1CiuI,MAAM,CAAChmB,mBAAP,CAA2BjoH,QAA3B,GAAsC;;AACtCiuI,MAAM,CAACrlB,qBAAP,CAA6B5oH,QAA7B,EAAuCC,KAAvC,EAA8C;AAAE;AAC5CqpH,EAAAA,aAAa,EAAE;AAD2B,CAA9C,EAEG9qK,GAAG,CAAC+pK,SAAJ,CAAc,sBAAd,CAFH;AAGA0lB,MAAM,CAACrmB,6BAAP,CAAqC5nH,QAArC;AAGA,IAAIo5C,CAAC,GAAG,IAAIuwE,4BAAJ,CAAkBhhJ,MAAlB,EAA0Bq3B,QAAQ,CAACj0D,UAAnC,CAAR;AACAC,QAAQ,CAAC0N,IAAT,CAAc3H,WAAd,CAA0BiuD,QAAQ,CAACj0D,UAAnC;AAIA,IAAImiM,GAAG,GAAG,IAAI3kB,KAAK,CAAC3nF,KAAV,EAAV;AACA,IAAIusG,IAAI,GAAG,IAAI5kB,KAAK,CAAC3nF,KAAV,EAAX;;AAGA,KAAK,IAAIz6F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzB,MAAI2uC,QAAQ,GAAG,IAAIovI,KAAK,CAACl8D,cAAV,CAAyB,IAAzB,EAA+B,EAA/B,EAAmC,EAAnC,CAAf;AACA,MAAI/yE,QAAQ,GAAG,IAAIivI,KAAK,CAACh6F,oBAAV,CAA+B;AAAEtmF,IAAAA,KAAK,EAAE,QAAT;AAAmBsjD,IAAAA,SAAS,EAAE,CAA9B;AAAiCD,IAAAA,SAAS,EAAE,CAA5C;AAA+CI,IAAAA,iBAAiB,EAAEljD,IAAI,CAAC2tB,MAAL,KAAgB,EAAlF;AAAsFs1B,IAAAA,QAAQ,EAAE;AAAhG,GAA/B,CAAf;AACA,MAAIsoB,IAAI,GAAG,IAAIw0G,KAAK,CAAC/vH,IAAV,CAAerf,QAAf,EAAyBG,QAAzB,CAAX;AACAy6B,EAAAA,IAAI,CAACp+B,aAAL,GAAqB,IAArB;AACAo+B,EAAAA,IAAI,CAACr+B,UAAL,GAAkB,IAAlB;AACAq+B,EAAAA,IAAI,CAAC/iE,QAAL,CAAcgoB,GAAd,CAAkBxwB,IAAI,CAACC,KAAL,CAAW,CAACD,IAAI,CAAC2tB,MAAL,KAAgB,GAAjB,IAAwB,EAAnC,CAAlB,EAA0D,CAA1D,EAA6D3tB,IAAI,CAACC,KAAL,CAAW,CAACD,IAAI,CAAC2tB,MAAL,KAAgB,GAAjB,IAAwB,EAAnC,CAA7D;AACAo7K,EAAAA,GAAG,CAACpvL,GAAJ,CAAQ4xD,IAAR;AACH;;AAED,KAAK,IAAIvpE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AACxB,MAAI2uC,QAAQ,GAAG,IAAIovI,KAAK,CAACl8D,cAAV,CAAyB,GAAzB,EAA8B,EAA9B,EAAkC,EAAlC,CAAf;AACA,MAAI/yE,QAAQ,GAAG,IAAIivI,KAAK,CAACh6F,oBAAV,CAA+B;AAAEtmF,IAAAA,KAAK,EAAE,QAAT;AAAmBsjD,IAAAA,SAAS,EAAE,CAA9B;AAAiCD,IAAAA,SAAS,EAAE,CAA5C;AAA+CI,IAAAA,iBAAiB,EAAE,EAAlE;AAAsED,IAAAA,QAAQ,EAAE;AAAhF,GAA/B,CAAf;AACA,MAAIsoB,IAAI,GAAG,IAAIw0G,KAAK,CAAC/vH,IAAV,CAAerf,QAAf,EAAyBG,QAAzB,CAAX;AACAy6B,EAAAA,IAAI,CAACp+B,aAAL,GAAqB,IAArB;AACAo+B,EAAAA,IAAI,CAACr+B,UAAL,GAAkB,IAAlB;AACAq+B,EAAAA,IAAI,CAAC/iE,QAAL,CAAcgoB,GAAd,CAAkBxwB,IAAI,CAACC,KAAL,CAAW,CAACD,IAAI,CAAC2tB,MAAL,KAAgB,GAAjB,IAAwB,EAAnC,CAAlB,EAA0D,CAA1D,EAA6D3tB,IAAI,CAACC,KAAL,CAAW,CAACD,IAAI,CAAC2tB,MAAL,KAAgB,GAAjB,IAAwB,EAAnC,CAA7D;AACAo7K,EAAAA,GAAG,CAACpvL,GAAJ,CAAQ4xD,IAAR;AACH;;AAED,IAAI09H,EAAE,GAAG,IAAIlpB,KAAK,CAACh/C,gBAAV,CAA2B,QAA3B,EAAqC,GAArC,CAAT;AACAkoE,EAAE,CAACzgM,QAAH,CAAYgoB,GAAZ,CAAgB,CAAhB,EAAmB,EAAnB,EAAuB,EAAvB;AACA,IAAI04K,QAAQ,GAAGD,EAAf;AACAC,QAAQ,CAACr9H,MAAT,CAAgBroC,MAAhB,CAAuBwG,IAAvB,GAA8B,GAA9B;AACAk/J,QAAQ,CAACr9H,MAAT,CAAgBroC,MAAhB,CAAuByG,GAAvB,GAA6B,GAA7B;AACAi/J,QAAQ,CAACr9H,MAAT,CAAgBroC,MAAhB,CAAuB96B,KAAvB,GAA+B,EAA/B;AACAwgM,QAAQ,CAACr9H,MAAT,CAAgBroC,MAAhB,CAAuB/6B,IAAvB,GAA8B,CAAE,EAAhC;AACAygM,QAAQ,CAACr9H,MAAT,CAAgBroC,MAAhB,CAAuB76B,GAAvB,GAA6B,EAA7B;AACAugM,QAAQ,CAACr9H,MAAT,CAAgBroC,MAAhB,CAAuB56B,MAAvB,GAAgC,CAAE,EAAlC;AACAsgM,QAAQ,CAACr9H,MAAT,CAAgB2f,OAAhB,CAAwB7/E,KAAxB,GAAgC,IAAhC;AACAu9L,QAAQ,CAACr9H,MAAT,CAAgB2f,OAAhB,CAAwB5/E,MAAxB,GAAiC,IAAjC;AACAs9L,QAAQ,CAACr9H,MAAT,CAAgB9mC,MAAhB,GAAyB,CAAzB;AACAmkK,QAAQ,CAACr9H,MAAT,CAAgByf,IAAhB,GAAuB,CAAC,MAAxB;AACA29G,EAAE,CAAC1hK,MAAH,CAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB;AACA0hK,EAAE,CAAC/7J,UAAH,GAAgB,IAAhB;AACA+7J,EAAE,CAAC97J,aAAH,GAAmB,IAAnB,EACA;;AAGA2tB,KAAK,CAACnhD,GAAN,CAAU,IAAIomK,KAAK,CAAC/+C,YAAV,CAAuB,QAAvB,EAAiC,CAAjC,CAAV;AAEAlmE,KAAK,CAACvpB,GAAN,GAAY,IAAIwuI,KAAK,CAAC1yE,OAAV,CAAkB,CAAlB,EAAqB,IAArB,CAAZ;AACAvyC,KAAK,CAACnhD,GAAN,CAAUovL,GAAV;AACAjuI,KAAK,CAACnhD,GAAN,CAAUqvL,IAAV;AAGA,IAAIG,QAAQ,GAAG,IAAIppB,KAAK,CAACt9G,aAAV,CAAwB,EAAxB,EAA4B,EAA5B,CAAf;AACA,IAAI2mI,QAAQ,GAAG,IAAIrpB,KAAK,CAACh6F,oBAAV,CAA+B;AAAEtmF,EAAAA,KAAK,EAAE,QAAT;AAAmBsjD,EAAAA,SAAS,EAAE;AAA9B,CAA/B,CAAf;AACA,IAAIv+C,KAAK,GAAG,IAAIu7K,KAAK,CAAC/vH,IAAV,CAAem5I,QAAf,EAAyBC,QAAzB,CAAZ;AACA5kM,KAAK,CAACwzB,QAAN,CAAe3uB,CAAf,GAAmB,CAACrJ,IAAI,CAACutB,EAAN,GAAW,CAA9B;AACA/oB,KAAK,CAACgE,QAAN,CAAee,CAAf,GAAmB,CAAC,GAApB;AACA/E,KAAK,CAAC2oC,aAAN,GAAsB,IAAtB;AACA3oC,KAAK,CAAC0oC,UAAN,GAAmB,IAAnB;AAEA67J,GAAG,CAACpvL,GAAJ,CAAQnV,KAAR;AAIA,IAAI6kM,KAAK,GAAG,IAAItpB,KAAK,CAACh6H,iBAAV,CAA4B;AACpCnB,EAAAA,MAAM,EAAE+jJ,WAD4B;AACf;AACrBpoJ,EAAAA,IAAI,EAAE6jI,KAAK,CAAC3iK;AAFwB,CAA5B,CAAZ,EAKA;;AACA,IAAI6nL,MAAM,GAAG,IAAIvpB,KAAK,CAAC5pE,yBAAV,CAAoC,CAApC,EAAuC,CAAvC,CAAb;AACA,IAAIozF,MAAM,GAAG,IAAIxpB,KAAK,CAAC/vH,IAAV,CAAes5I,MAAf,EAAuBD,KAAvB,CAAb;AACAL,IAAI,CAACrvL,GAAL,CAAS4vL,MAAT;AAEA,IAAIC,MAAM,GAAG,IAAIzpB,KAAK,CAACh6H,iBAAV,CAA4B;AACrCT,EAAAA,SAAS,EAAE,IAD0B;AAErC7lD,EAAAA,KAAK,EAAE,QAF8B;AAGrCmlD,EAAAA,MAAM,EAAE+jJ,WAH6B;AAIrCpoJ,EAAAA,IAAI,EAAE6jI,KAAK,CAAC5iK,SAJyB,CAIf;;AAJe,CAA5B,CAAb;AAOA,IAAI+nL,MAAM,GAAG,IAAIxpB,KAAK,CAAC/vH,IAAV,CAAes5I,MAAf,EAAuBE,MAAvB,CAAb;AACAR,IAAI,CAACrvL,GAAL,CAAS4vL,MAAT;AAGA5/L,MAAM,CAAC8/L,UAAP,GAAoB,EAApB;AAGA,IAAMC,QAAQ,GAAG,IAAIp+B,8BAAJ,CAAmBzwG,QAAnB,EAA6B;AAC1C8oG,EAAAA,eAAe,EAAEoc,KAAK,CAACh6J;AADmB,CAA7B,CAAjB;AAIA,IAAM4jL,UAAU,GAAG,IAAI7pB,wCAAJ,CAAoB,IAAIsE,KAAK,CAACzzJ,OAAV,CAAkB,GAAlB,EAAuB,GAAvB,CAApB,CAAnB;AACAg5K,UAAU,CAACnnM,SAAX,GAAuB,GAAvB;AACAmnM,UAAU,CAACvqC,QAAX,GAAsB,GAAtB;AACAuqC,UAAU,CAAC5kK,MAAX,GAAoB,GAApB;AAEA,IAAM6kK,WAAW,GAAG,IAAI9pB,wCAAJ,CAAoB,IAAIsE,KAAK,CAACzzJ,OAAV,CAAkB,GAAlB,EAAuB,GAAvB,CAApB,CAApB;AACAi5K,WAAW,CAACpnM,SAAZ,GAAwB,GAAxB;AACAonM,WAAW,CAACxqC,QAAZ,GAAuB,GAAvB;AACAwqC,WAAW,CAAC7kK,MAAZ,GAAqB,CAArB;AAEA,IAAM8kK,IAAI,GAAG,IAAI5nB,kBAAJ,CAAa,GAAb,EAAkB,CAAlB,EAAqB,CAArB,EAAwB,KAAxB,CAAb;AAEAynB,QAAQ,CAACt9B,OAAT,CAAiB,IAAIjH,0BAAJ,CAAerqG,KAAf,EAAsBt3B,MAAtB,CAAjB;AACAkmK,QAAQ,CAACt9B,OAAT,CAAiBu9B,UAAjB;AACAD,QAAQ,CAACt9B,OAAT,CAAiBw9B,WAAjB;AACAF,QAAQ,CAACt9B,OAAT,CAAiBy9B,IAAjB;AAEA,IAAMC,iBAAiB,GAAG,IAAInrB,iCAAJ,CAAsB;AAC5C1W,EAAAA,aAAa,EAAEtC,8BAAcY,MADe;AAE5CqY,EAAAA,QAAQ,EAAE,IAFkC;AAG5CjxF,EAAAA,UAAU,EAAE,GAHgC;AAI5CkxF,EAAAA,UAAU,EAAE,GAJgC;AAK5CC,EAAAA,YAAY,EAAE,IAL8B;AAM5CC,EAAAA,gBAAgB,EAAE,GAN0B;AAO5CC,EAAAA,cAAc,EAAE;AAP4B,CAAtB,CAA1B;AAUA,IAAI+qB,MAAM,GAAG,IAAIhgC,0BAAJ,CAAevmI,MAAf,EAAuBsmK,iBAAvB,CAAb;AACAC,MAAM,CAAC3mC,cAAP,GAAwB,IAAxB;AACAsmC,QAAQ,CAACt9B,OAAT,CAAiB29B,MAAjB;;AAEA,IAAI90C,OAAO,GAAG,SAAVA,OAAU,GAAY;AACtBnhJ,EAAAA,qBAAqB,CAACmhJ,OAAD,CAArB;AAEAp6F,EAAAA,QAAQ,CAACmS,SAAT,GAAqB,IAArB,CAHsB,CAItB;;AACAnS,EAAAA,QAAQ,CAAC2S,aAAT,CAAuB,QAAvB,EALsB,CAOtB;;AACAymC,EAAAA,CAAC,CAAC9zE,MAAF;AACA6oK,EAAAA,IAAI,CAAC/7J,OAAL,GAAe,IAAf;AACA87J,EAAAA,GAAG,CAAC97J,OAAJ,GAAc,KAAd;AACA4tB,EAAAA,QAAQ,CAACQ,KAAT,CAAe,IAAf,EAAqB,IAArB,EAA2B,IAA3B;AACAquI,EAAAA,QAAQ,CAACtuI,MAAT,CAAgBwtI,KAAK,CAAC59D,QAAN,EAAhB;AAEAnwE,EAAAA,QAAQ,CAAC2S,aAAT,CAAuB,QAAvB;AAEAq7H,EAAAA,QAAQ,CAACrgM,QAAT,CAAkB4oB,IAAlB,CAAuBoS,MAAM,CAACh7B,QAA9B;AACAwgM,EAAAA,IAAI,CAAC/7J,OAAL,GAAe,KAAf;AACA87J,EAAAA,GAAG,CAAC97J,OAAJ,GAAc,IAAd;AACA47J,EAAAA,QAAQ,CAAC1oK,MAAT,CAAgB06B,QAAhB,EAA0BC,KAA1B;AAEH,CArBD;;AAuBAm6F,OAAO","file":"proto-planet.d23ff206.js","sourceRoot":"..","sourcesContent":["/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nexport default function(color, forceCSSHex) {\n  const colorFormat = color.__state.conversionName.toString();\n\n  const r = Math.round(color.r);\n  const g = Math.round(color.g);\n  const b = Math.round(color.b);\n  const a = color.a;\n  const h = Math.round(color.h);\n  const s = color.s.toFixed(1);\n  const v = color.v.toFixed(1);\n\n  if (forceCSSHex || (colorFormat === 'THREE_CHAR_HEX') || (colorFormat === 'SIX_CHAR_HEX')) {\n    let str = color.hex.toString(16);\n    while (str.length < 6) {\n      str = '0' + str;\n    }\n    return '#' + str;\n  } else if (colorFormat === 'CSS_RGB') {\n    return 'rgb(' + r + ',' + g + ',' + b + ')';\n  } else if (colorFormat === 'CSS_RGBA') {\n    return 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\n  } else if (colorFormat === 'HEX') {\n    return '0x' + color.hex.toString(16);\n  } else if (colorFormat === 'RGB_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ']';\n  } else if (colorFormat === 'RGBA_ARRAY') {\n    return '[' + r + ',' + g + ',' + b + ',' + a + ']';\n  } else if (colorFormat === 'RGB_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + '}';\n  } else if (colorFormat === 'RGBA_OBJ') {\n    return '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\n  } else if (colorFormat === 'HSV_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + '}';\n  } else if (colorFormat === 'HSVA_OBJ') {\n    return '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\n  }\n\n  return 'unknown format';\n}\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst ARR_EACH = Array.prototype.forEach;\nconst ARR_SLICE = Array.prototype.slice;\n\n/**\n * Band-aid methods for things that should be a lot easier in JavaScript.\n * Implementation and structure inspired by underscore.js\n * http://documentcloud.github.com/underscore/\n */\n\nconst Common = {\n  BREAK: {},\n\n  extend: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (!this.isUndefined(obj[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  defaults: function(target) {\n    this.each(ARR_SLICE.call(arguments, 1), function(obj) {\n      const keys = this.isObject(obj) ? Object.keys(obj) : [];\n      keys.forEach(function(key) {\n        if (this.isUndefined(target[key])) {\n          target[key] = obj[key];\n        }\n      }.bind(this));\n    }, this);\n\n    return target;\n  },\n\n  compose: function() {\n    const toCall = ARR_SLICE.call(arguments);\n    return function() {\n      let args = ARR_SLICE.call(arguments);\n      for (let i = toCall.length - 1; i >= 0; i--) {\n        args = [toCall[i].apply(this, args)];\n      }\n      return args[0];\n    };\n  },\n\n  each: function(obj, itr, scope) {\n    if (!obj) {\n      return;\n    }\n\n    if (ARR_EACH && obj.forEach && obj.forEach === ARR_EACH) {\n      obj.forEach(itr, scope);\n    } else if (obj.length === obj.length + 0) { // Is number but not NaN\n      let key;\n      let l;\n      for (key = 0, l = obj.length; key < l; key++) {\n        if (key in obj && itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    } else {\n      for (const key in obj) {\n        if (itr.call(scope, obj[key], key) === this.BREAK) {\n          return;\n        }\n      }\n    }\n  },\n\n  defer: function(fnc) {\n    setTimeout(fnc, 0);\n  },\n\n  // if the function is called repeatedly, wait until threshold passes until we execute the function\n  debounce: function(func, threshold, callImmediately) {\n    let timeout;\n\n    return function() {\n      const obj = this;\n      const args = arguments;\n      function delayed() {\n        timeout = null;\n        if (!callImmediately) func.apply(obj, args);\n      }\n\n      const callNow = callImmediately || !timeout;\n\n      clearTimeout(timeout);\n      timeout = setTimeout(delayed, threshold);\n\n      if (callNow) {\n        func.apply(obj, args);\n      }\n    };\n  },\n\n  toArray: function(obj) {\n    if (obj.toArray) return obj.toArray();\n    return ARR_SLICE.call(obj);\n  },\n\n  isUndefined: function(obj) {\n    return obj === undefined;\n  },\n\n  isNull: function(obj) {\n    return obj === null;\n  },\n\n  isNaN: function(obj) {\n    return isNaN(obj);\n  },\n\n  isArray: Array.isArray || function(obj) {\n    return obj.constructor === Array;\n  },\n\n  isObject: function(obj) {\n    return obj === Object(obj);\n  },\n\n  isNumber: function(obj) {\n    return obj === obj + 0;\n  },\n\n  isString: function(obj) {\n    return obj === obj + '';\n  },\n\n  isBoolean: function(obj) {\n    return obj === false || obj === true;\n  },\n\n  isFunction: function(obj) {\n    return obj instanceof Function;\n  }\n\n};\n\nexport default Common;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport toString from './toString';\nimport common from '../utils/common';\n\nconst INTERPRETATIONS = [\n  // Strings\n  {\n    litmus: common.isString,\n    conversions: {\n      THREE_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt(\n              '0x' +\n              test[1].toString() + test[1].toString() +\n              test[2].toString() + test[2].toString() +\n              test[3].toString() + test[3].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      SIX_CHAR_HEX: {\n        read: function(original) {\n          const test = original.match(/^#([A-F0-9]{6})$/i);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'HEX',\n            hex: parseInt('0x' + test[1].toString(), 0)\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGB: {\n        read: function(original) {\n          const test = original.match(/^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3])\n          };\n        },\n\n        write: toString\n      },\n\n      CSS_RGBA: {\n        read: function(original) {\n          const test = original.match(/^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/);\n          if (test === null) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: parseFloat(test[1]),\n            g: parseFloat(test[2]),\n            b: parseFloat(test[3]),\n            a: parseFloat(test[4])\n          };\n        },\n\n        write: toString\n      }\n    }\n  },\n\n  // Numbers\n  {\n    litmus: common.isNumber,\n\n    conversions: {\n\n      HEX: {\n        read: function(original) {\n          return {\n            space: 'HEX',\n            hex: original,\n            conversionName: 'HEX'\n          };\n        },\n\n        write: function(color) {\n          return color.hex;\n        }\n      }\n\n    }\n\n  },\n\n  // Arrays\n  {\n    litmus: common.isArray,\n    conversions: {\n      RGB_ARRAY: {\n        read: function(original) {\n          if (original.length !== 3) {\n            return false;\n          }\n\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b];\n        }\n      },\n\n      RGBA_ARRAY: {\n        read: function(original) {\n          if (original.length !== 4) return false;\n          return {\n            space: 'RGB',\n            r: original[0],\n            g: original[1],\n            b: original[2],\n            a: original[3]\n          };\n        },\n\n        write: function(color) {\n          return [color.r, color.g, color.b, color.a];\n        }\n      }\n    }\n  },\n\n  // Objects\n  {\n    litmus: common.isObject,\n    conversions: {\n\n      RGBA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b,\n            a: color.a\n          };\n        }\n      },\n\n      RGB_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.r) &&\n            common.isNumber(original.g) &&\n            common.isNumber(original.b)) {\n            return {\n              space: 'RGB',\n              r: original.r,\n              g: original.g,\n              b: original.b\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            r: color.r,\n            g: color.g,\n            b: color.b\n          };\n        }\n      },\n\n      HSVA_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v) &&\n            common.isNumber(original.a)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v,\n              a: original.a\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v,\n            a: color.a\n          };\n        }\n      },\n\n      HSV_OBJ: {\n        read: function(original) {\n          if (common.isNumber(original.h) &&\n            common.isNumber(original.s) &&\n            common.isNumber(original.v)) {\n            return {\n              space: 'HSV',\n              h: original.h,\n              s: original.s,\n              v: original.v\n            };\n          }\n          return false;\n        },\n\n        write: function(color) {\n          return {\n            h: color.h,\n            s: color.s,\n            v: color.v\n          };\n        }\n      }\n    }\n  }\n];\n\nlet result;\nlet toReturn;\n\nconst interpret = function() {\n  toReturn = false;\n\n  const original = arguments.length > 1 ? common.toArray(arguments) : arguments[0];\n  common.each(INTERPRETATIONS, function(family) {\n    if (family.litmus(original)) {\n      common.each(family.conversions, function(conversion, conversionName) {\n        result = conversion.read(original);\n\n        if (toReturn === false && result !== false) {\n          toReturn = result;\n          result.conversionName = conversionName;\n          result.conversion = conversion;\n          return common.BREAK;\n        }\n      });\n\n      return common.BREAK;\n    }\n  });\n\n  return toReturn;\n};\n\nexport default interpret;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nlet tmpComponent;\n\nconst ColorMath = {\n  hsv_to_rgb: function(h, s, v) {\n    const hi = Math.floor(h / 60) % 6;\n\n    const f = h / 60 - Math.floor(h / 60);\n    const p = v * (1.0 - s);\n    const q = v * (1.0 - (f * s));\n    const t = v * (1.0 - ((1.0 - f) * s));\n\n    const c = [\n      [v, t, p],\n      [q, v, p],\n      [p, v, t],\n      [p, q, v],\n      [t, p, v],\n      [v, p, q]\n    ][hi];\n\n    return {\n      r: c[0] * 255,\n      g: c[1] * 255,\n      b: c[2] * 255\n    };\n  },\n\n  rgb_to_hsv: function(r, g, b) {\n    const min = Math.min(r, g, b);\n    const max = Math.max(r, g, b);\n    const delta = max - min;\n    let h;\n    let s;\n\n    if (max !== 0) {\n      s = delta / max;\n    } else {\n      return {\n        h: NaN,\n        s: 0,\n        v: 0\n      };\n    }\n\n    if (r === max) {\n      h = (g - b) / delta;\n    } else if (g === max) {\n      h = 2 + (b - r) / delta;\n    } else {\n      h = 4 + (r - g) / delta;\n    }\n    h /= 6;\n    if (h < 0) {\n      h += 1;\n    }\n\n    return {\n      h: h * 360,\n      s: s,\n      v: max / 255\n    };\n  },\n\n  rgb_to_hex: function(r, g, b) {\n    let hex = this.hex_with_component(0, 2, r);\n    hex = this.hex_with_component(hex, 1, g);\n    hex = this.hex_with_component(hex, 0, b);\n    return hex;\n  },\n\n  component_from_hex: function(hex, componentIndex) {\n    return (hex >> (componentIndex * 8)) & 0xFF;\n  },\n\n  hex_with_component: function(hex, componentIndex, value) {\n    return value << (tmpComponent = componentIndex * 8) | (hex & ~(0xFF << tmpComponent));\n  }\n};\n\nexport default ColorMath;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport interpret from './interpret';\nimport math from './math';\nimport colorToString from './toString';\nimport common from '../utils/common';\n\nclass Color {\n  constructor() {\n    this.__state = interpret.apply(this, arguments);\n\n    if (this.__state === false) {\n      throw new Error('Failed to interpret color arguments');\n    }\n\n    this.__state.a = this.__state.a || 1;\n  }\n\n  toString() {\n    return colorToString(this);\n  }\n\n  toHexString() {\n    return colorToString(this, true);\n  }\n\n  toOriginal() {\n    return this.__state.conversion.write(this);\n  }\n}\n\nfunction defineRGBComponent(target, component, componentHexIndex) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'RGB') {\n        return this.__state[component];\n      }\n\n      Color.recalculateRGB(this, component, componentHexIndex);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'RGB') {\n        Color.recalculateRGB(this, component, componentHexIndex);\n        this.__state.space = 'RGB';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\nfunction defineHSVComponent(target, component) {\n  Object.defineProperty(target, component, {\n    get: function() {\n      if (this.__state.space === 'HSV') {\n        return this.__state[component];\n      }\n\n      Color.recalculateHSV(this);\n\n      return this.__state[component];\n    },\n\n    set: function(v) {\n      if (this.__state.space !== 'HSV') {\n        Color.recalculateHSV(this);\n        this.__state.space = 'HSV';\n      }\n\n      this.__state[component] = v;\n    }\n  });\n}\n\n\nColor.recalculateRGB = function(color, component, componentHexIndex) {\n  if (color.__state.space === 'HEX') {\n    color.__state[component] = math.component_from_hex(color.__state.hex, componentHexIndex);\n  } else if (color.__state.space === 'HSV') {\n    common.extend(color.__state, math.hsv_to_rgb(color.__state.h, color.__state.s, color.__state.v));\n  } else {\n    throw new Error('Corrupted color state');\n  }\n};\n\nColor.recalculateHSV = function(color) {\n  const result = math.rgb_to_hsv(color.r, color.g, color.b);\n\n  common.extend(color.__state,\n    {\n      s: result.s,\n      v: result.v\n    }\n  );\n\n  if (!common.isNaN(result.h)) {\n    color.__state.h = result.h;\n  } else if (common.isUndefined(color.__state.h)) {\n    color.__state.h = 0;\n  }\n};\n\nColor.COMPONENTS = ['r', 'g', 'b', 'h', 's', 'v', 'hex', 'a'];\n\ndefineRGBComponent(Color.prototype, 'r', 2);\ndefineRGBComponent(Color.prototype, 'g', 1);\ndefineRGBComponent(Color.prototype, 'b', 0);\n\ndefineHSVComponent(Color.prototype, 'h');\ndefineHSVComponent(Color.prototype, 's');\ndefineHSVComponent(Color.prototype, 'v');\n\nObject.defineProperty(Color.prototype, 'a', {\n  get: function() {\n    return this.__state.a;\n  },\n\n  set: function(v) {\n    this.__state.a = v;\n  }\n});\n\nObject.defineProperty(Color.prototype, 'hex', {\n  get: function() {\n    if (this.__state.space !== 'HEX') {\n      this.__state.hex = math.rgb_to_hex(this.r, this.g, this.b);\n      this.__state.space = 'HEX';\n    }\n\n    return this.__state.hex;\n  },\n\n  set: function(v) {\n    this.__state.space = 'HEX';\n    this.__state.hex = v;\n  }\n});\n\nexport default Color;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n/**\n * @class An \"abstract\" class that represents a given property of an object.\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass Controller {\n  constructor(object, property) {\n    this.initialValue = object[property];\n\n    /**\n     * Those who extend this class will put their DOM elements in here.\n     * @type {DOMElement}\n     */\n    this.domElement = document.createElement('div');\n\n    /**\n     * The object to manipulate\n     * @type {Object}\n     */\n    this.object = object;\n\n    /**\n     * The name of the property to manipulate\n     * @type {String}\n     */\n    this.property = property;\n\n    /**\n     * The function to be called on change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onChange = undefined;\n\n    /**\n     * The function to be called on finishing change.\n     * @type {Function}\n     * @ignore\n     */\n    this.__onFinishChange = undefined;\n  }\n\n  /**\n   * Specify that a function fire every time someone changes the value with\n   * this Controller.\n   *\n   * @param {Function} fnc This function will be called whenever the value\n   * is modified via this Controller.\n   * @returns {Controller} this\n   */\n  onChange(fnc) {\n    this.__onChange = fnc;\n    return this;\n  }\n\n  /**\n   * Specify that a function fire every time someone \"finishes\" changing\n   * the value wih this Controller. Useful for values that change\n   * incrementally like numbers or strings.\n   *\n   * @param {Function} fnc This function will be called whenever\n   * someone \"finishes\" changing the value via this Controller.\n   * @returns {Controller} this\n   */\n  onFinishChange(fnc) {\n    this.__onFinishChange = fnc;\n    return this;\n  }\n\n  /**\n   * Change the value of <code>object[property]</code>\n   *\n   * @param {Object} newValue The new value of <code>object[property]</code>\n   */\n  setValue(newValue) {\n    this.object[this.property] = newValue;\n    if (this.__onChange) {\n      this.__onChange.call(this, newValue);\n    }\n\n    this.updateDisplay();\n    return this;\n  }\n\n  /**\n   * Gets the value of <code>object[property]</code>\n   *\n   * @returns {Object} The current value of <code>object[property]</code>\n   */\n  getValue() {\n    return this.object[this.property];\n  }\n\n  /**\n   * Refreshes the visual display of a Controller in order to keep sync\n   * with the object's current value.\n   * @returns {Controller} this\n   */\n  updateDisplay() {\n    return this;\n  }\n\n  /**\n   * @returns {Boolean} true if the value has deviated from initialValue\n   */\n  isModified() {\n    return this.initialValue !== this.getValue();\n  }\n}\n\nexport default Controller;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport common from '../utils/common';\n\nconst EVENT_MAP = {\n  HTMLEvents: ['change'],\n  MouseEvents: ['click', 'mousemove', 'mousedown', 'mouseup', 'mouseover'],\n  KeyboardEvents: ['keydown']\n};\n\nconst EVENT_MAP_INV = {};\ncommon.each(EVENT_MAP, function(v, k) {\n  common.each(v, function(e) {\n    EVENT_MAP_INV[e] = k;\n  });\n});\n\nconst CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\n\nfunction cssValueToPixels(val) {\n  if (val === '0' || common.isUndefined(val)) {\n    return 0;\n  }\n\n  const match = val.match(CSS_VALUE_PIXELS);\n\n  if (!common.isNull(match)) {\n    return parseFloat(match[1]);\n  }\n\n  // TODO ...ems? %?\n\n  return 0;\n}\n\n/**\n * @namespace\n * @member dat.dom\n */\nconst dom = {\n\n  /**\n   *\n   * @param elem\n   * @param selectable\n   */\n  makeSelectable: function(elem, selectable) {\n    if (elem === undefined || elem.style === undefined) return;\n\n    elem.onselectstart = selectable ? function() {\n      return false;\n    } : function() {\n    };\n\n    elem.style.MozUserSelect = selectable ? 'auto' : 'none';\n    elem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\n    elem.unselectable = selectable ? 'on' : 'off';\n  },\n\n  /**\n   *\n   * @param elem\n   * @param horizontal\n   * @param vert\n   */\n  makeFullscreen: function(elem, hor, vert) {\n    let vertical = vert;\n    let horizontal = hor;\n\n    if (common.isUndefined(horizontal)) {\n      horizontal = true;\n    }\n\n    if (common.isUndefined(vertical)) {\n      vertical = true;\n    }\n\n    elem.style.position = 'absolute';\n\n    if (horizontal) {\n      elem.style.left = 0;\n      elem.style.right = 0;\n    }\n    if (vertical) {\n      elem.style.top = 0;\n      elem.style.bottom = 0;\n    }\n  },\n\n  /**\n   *\n   * @param elem\n   * @param eventType\n   * @param params\n   */\n  fakeEvent: function(elem, eventType, pars, aux) {\n    const params = pars || {};\n    const className = EVENT_MAP_INV[eventType];\n    if (!className) {\n      throw new Error('Event type ' + eventType + ' not supported.');\n    }\n    const evt = document.createEvent(className);\n    switch (className) {\n      case 'MouseEvents':\n        {\n          const clientX = params.x || params.clientX || 0;\n          const clientY = params.y || params.clientY || 0;\n          evt.initMouseEvent(eventType, params.bubbles || false,\n            params.cancelable || true, window, params.clickCount || 1,\n            0, // screen X\n            0, // screen Y\n            clientX, // client X\n            clientY, // client Y\n            false, false, false, false, 0, null);\n          break;\n        }\n      case 'KeyboardEvents':\n        {\n          const init = evt.initKeyboardEvent || evt.initKeyEvent; // webkit || moz\n          common.defaults(params, {\n            cancelable: true,\n            ctrlKey: false,\n            altKey: false,\n            shiftKey: false,\n            metaKey: false,\n            keyCode: undefined,\n            charCode: undefined\n          });\n          init(eventType, params.bubbles || false,\n            params.cancelable, window,\n            params.ctrlKey, params.altKey,\n            params.shiftKey, params.metaKey,\n            params.keyCode, params.charCode);\n          break;\n        }\n      default:\n        {\n          evt.initEvent(eventType, params.bubbles || false, params.cancelable || true);\n          break;\n        }\n    }\n    common.defaults(evt, aux);\n    elem.dispatchEvent(evt);\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  bind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.addEventListener) {\n      elem.addEventListener(event, func, bool);\n    } else if (elem.attachEvent) {\n      elem.attachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param event\n   * @param func\n   * @param bool\n   */\n  unbind: function(elem, event, func, newBool) {\n    const bool = newBool || false;\n    if (elem.removeEventListener) {\n      elem.removeEventListener(event, func, bool);\n    } else if (elem.detachEvent) {\n      elem.detachEvent('on' + event, func);\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  addClass: function(elem, className) {\n    if (elem.className === undefined) {\n      elem.className = className;\n    } else if (elem.className !== className) {\n      const classes = elem.className.split(/ +/);\n      if (classes.indexOf(className) === -1) {\n        classes.push(className);\n        elem.className = classes.join(' ').replace(/^\\s+/, '').replace(/\\s+$/, '');\n      }\n    }\n    return dom;\n  },\n\n  /**\n   *\n   * @param elem\n   * @param className\n   */\n  removeClass: function(elem, className) {\n    if (className) {\n      if (elem.className === className) {\n        elem.removeAttribute('class');\n      } else {\n        const classes = elem.className.split(/ +/);\n        const index = classes.indexOf(className);\n        if (index !== -1) {\n          classes.splice(index, 1);\n          elem.className = classes.join(' ');\n        }\n      }\n    } else {\n      elem.className = undefined;\n    }\n    return dom;\n  },\n\n  hasClass: function(elem, className) {\n    return new RegExp('(?:^|\\\\s+)' + className + '(?:\\\\s+|$)').test(elem.className) || false;\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getWidth: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-left-width']) +\n      cssValueToPixels(style['border-right-width']) +\n      cssValueToPixels(style['padding-left']) +\n      cssValueToPixels(style['padding-right']) +\n      cssValueToPixels(style.width);\n  },\n\n  /**\n   *\n   * @param elem\n   */\n  getHeight: function(elem) {\n    const style = getComputedStyle(elem);\n\n    return cssValueToPixels(style['border-top-width']) +\n      cssValueToPixels(style['border-bottom-width']) +\n      cssValueToPixels(style['padding-top']) +\n      cssValueToPixels(style['padding-bottom']) +\n      cssValueToPixels(style.height);\n  },\n\n  /**\n   *\n   * @param el\n   */\n  getOffset: function(el) {\n    let elem = el;\n    const offset = { left: 0, top: 0 };\n    if (elem.offsetParent) {\n      do {\n        offset.left += elem.offsetLeft;\n        offset.top += elem.offsetTop;\n        elem = elem.offsetParent;\n      } while (elem);\n    }\n    return offset;\n  },\n\n  // http://stackoverflow.com/posts/2684561/revisions\n  /**\n   *\n   * @param elem\n   */\n  isActive: function(elem) {\n    return elem === document.activeElement && (elem.type || elem.href);\n  }\n\n};\n\nexport default dom;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a checkbox input to alter the boolean property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass BooleanController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n    this.__prev = this.getValue();\n\n    this.__checkbox = document.createElement('input');\n    this.__checkbox.setAttribute('type', 'checkbox');\n\n    function onChange() {\n      _this.setValue(!_this.__prev);\n    }\n\n    dom.bind(this.__checkbox, 'change', onChange, false);\n\n    this.domElement.appendChild(this.__checkbox);\n\n    // Match original value\n    this.updateDisplay();\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    this.__prev = this.getValue();\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (this.getValue() === true) {\n      this.__checkbox.setAttribute('checked', 'checked');\n      this.__checkbox.checked = true;\n      this.__prev = true;\n    } else {\n      this.__checkbox.checked = false;\n      this.__prev = false;\n    }\n\n    return super.updateDisplay();\n  }\n}\n\nexport default BooleanController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\n/**\n * @class Provides a select input to alter the property of an object, using a\n * list of accepted values.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object|string[]} options A map of labels to acceptable values, or\n * a list of acceptable string values.\n */\nclass OptionController extends Controller {\n  constructor(object, property, opts) {\n    super(object, property);\n\n    let options = opts;\n\n    const _this = this;\n\n    /**\n     * The drop down menu\n     * @ignore\n     */\n    this.__select = document.createElement('select');\n\n    if (common.isArray(options)) {\n      const map = {};\n      common.each(options, function(element) {\n        map[element] = element;\n      });\n      options = map;\n    }\n\n    common.each(options, function(value, key) {\n      const opt = document.createElement('option');\n      opt.innerHTML = key;\n      opt.setAttribute('value', value);\n      _this.__select.appendChild(opt);\n    });\n\n    // Acknowledge original value\n    this.updateDisplay();\n\n    dom.bind(this.__select, 'change', function() {\n      const desiredValue = this.options[this.selectedIndex].value;\n      _this.setValue(desiredValue);\n    });\n\n    this.domElement.appendChild(this.__select);\n  }\n\n  setValue(v) {\n    const toReturn = super.setValue(v);\n\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n    return toReturn;\n  }\n\n  updateDisplay() {\n    if (dom.isActive(this.__select)) return this; // prevent number from updating if user is trying to manually update\n    this.__select.value = this.getValue();\n    return super.updateDisplay();\n  }\n}\n\nexport default OptionController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a text input to alter the string property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass StringController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    const _this = this;\n\n    function onChange() {\n      _this.setValue(_this.__input.value);\n    }\n\n    function onBlur() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    dom.bind(this.__input, 'keyup', onChange);\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) {\n        this.blur();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    // Stops the caret from moving on account of:\n    // keyup -> setValue -> updateDisplay\n    if (!dom.isActive(this.__input)) {\n      this.__input.value = this.getValue();\n    }\n    return super.updateDisplay();\n  }\n}\n\nexport default StringController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport common from '../utils/common';\n\nfunction numDecimals(x) {\n  const _x = x.toString();\n  if (_x.indexOf('.') > -1) {\n    return _x.length - _x.indexOf('.') - 1;\n  }\n\n  return 0;\n}\n\n/**\n * @class Represents a given property of an object that is a number.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberController extends Controller {\n  constructor(object, property, params) {\n    super(object, property);\n\n    const _params = params || {};\n\n    this.__min = _params.min;\n    this.__max = _params.max;\n    this.__step = _params.step;\n\n    if (common.isUndefined(this.__step)) {\n      if (this.initialValue === 0) {\n        this.__impliedStep = 1; // What are we, psychics?\n      } else {\n        // Hey Doug, check this out.\n        this.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(this.initialValue)) / Math.LN10)) / 10;\n      }\n    } else {\n      this.__impliedStep = this.__step;\n    }\n\n    this.__precision = numDecimals(this.__impliedStep);\n  }\n\n  setValue(v) {\n    let _v = v;\n\n    if (this.__min !== undefined && _v < this.__min) {\n      _v = this.__min;\n    } else if (this.__max !== undefined && _v > this.__max) {\n      _v = this.__max;\n    }\n\n    if (this.__step !== undefined && _v % this.__step !== 0) {\n      _v = Math.round(_v / this.__step) * this.__step;\n    }\n\n    return super.setValue(_v);\n  }\n\n  /**\n   * Specify a minimum value for <code>object[property]</code>.\n   *\n   * @param {Number} minValue The minimum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  min(minValue) {\n    this.__min = minValue;\n    return this;\n  }\n\n  /**\n   * Specify a maximum value for <code>object[property]</code>.\n   *\n   * @param {Number} maxValue The maximum value for\n   * <code>object[property]</code>\n   * @returns {dat.controllers.NumberController} this\n   */\n  max(maxValue) {\n    this.__max = maxValue;\n    return this;\n  }\n\n  /**\n   * Specify a step value that dat.controllers.NumberController\n   * increments by.\n   *\n   * @param {Number} stepValue The step value for\n   * dat.controllers.NumberController\n   * @default if minimum and maximum specified increment is 1% of the\n   * difference otherwise stepValue is 1\n   * @returns {dat.controllers.NumberController} this\n   */\n  step(stepValue) {\n    this.__step = stepValue;\n    this.__impliedStep = stepValue;\n    this.__precision = numDecimals(stepValue);\n    return this;\n  }\n}\n\nexport default NumberController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nfunction roundToDecimal(value, decimals) {\n  const tenTo = Math.pow(10, decimals);\n  return Math.round(value * tenTo) / tenTo;\n}\n\n/**\n * @class Represents a given property of an object that is a number and\n * provides an input element with which to manipulate it.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Object} [params] Optional parameters\n * @param {Number} [params.min] Minimum allowed value\n * @param {Number} [params.max] Maximum allowed value\n * @param {Number} [params.step] Increment by which to change value\n */\nclass NumberControllerBox extends NumberController {\n  constructor(object, property, params) {\n    super(object, property, params);\n\n    this.__truncationSuspended = false;\n\n    const _this = this;\n\n    /**\n     * {Number} Previous mouse y position\n     * @ignore\n     */\n    let prevY;\n\n    function onChange() {\n      const attempted = parseFloat(_this.__input.value);\n      if (!common.isNaN(attempted)) {\n        _this.setValue(attempted);\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onBlur() {\n      onFinish();\n    }\n\n    function onMouseDrag(e) {\n      const diff = prevY - e.clientY;\n      _this.setValue(_this.getValue() + diff * _this.__impliedStep);\n\n      prevY = e.clientY;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      onFinish();\n    }\n\n    function onMouseDown(e) {\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n      prevY = e.clientY;\n    }\n\n    this.__input = document.createElement('input');\n    this.__input.setAttribute('type', 'text');\n\n    // Makes it so manually specified values are not truncated.\n\n    dom.bind(this.__input, 'change', onChange);\n    dom.bind(this.__input, 'blur', onBlur);\n    dom.bind(this.__input, 'mousedown', onMouseDown);\n    dom.bind(this.__input, 'keydown', function(e) {\n      // When pressing enter, you can be as precise as you want.\n      if (e.keyCode === 13) {\n        _this.__truncationSuspended = true;\n        this.blur();\n        _this.__truncationSuspended = false;\n        onFinish();\n      }\n    });\n\n    this.updateDisplay();\n\n    this.domElement.appendChild(this.__input);\n  }\n\n  updateDisplay() {\n    this.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal(this.getValue(), this.__precision);\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerBox;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport NumberController from './NumberController';\nimport dom from '../dom/dom';\n\nfunction map(v, i1, i2, o1, o2) {\n  return o1 + (o2 - o1) * ((v - i1) / (i2 - i1));\n}\n\n/**\n * @class Represents a given property of an object that is a number, contains\n * a minimum and maximum, and provides a slider element with which to\n * manipulate it. It should be noted that the slider element is made up of\n * <code>&lt;div&gt;</code> tags, <strong>not</strong> the html5\n * <code>&lt;slider&gt;</code> element.\n *\n * @extends dat.controllers.Controller\n * @extends dat.controllers.NumberController\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n * @param {Number} minValue Minimum allowed value\n * @param {Number} maxValue Maximum allowed value\n * @param {Number} stepValue Increment by which to change value\n */\nclass NumberControllerSlider extends NumberController {\n  constructor(object, property, min, max, step) {\n    super(object, property, { min: min, max: max, step: step });\n\n    const _this = this;\n\n    this.__background = document.createElement('div');\n    this.__foreground = document.createElement('div');\n\n    dom.bind(this.__background, 'mousedown', onMouseDown);\n    dom.bind(this.__background, 'touchstart', onTouchStart);\n\n    dom.addClass(this.__background, 'slider');\n    dom.addClass(this.__foreground, 'slider-fg');\n\n    function onMouseDown(e) {\n      document.activeElement.blur();\n\n      dom.bind(window, 'mousemove', onMouseDrag);\n      dom.bind(window, 'mouseup', onMouseUp);\n\n      onMouseDrag(e);\n    }\n\n    function onMouseDrag(e) {\n      e.preventDefault();\n\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n\n      return false;\n    }\n\n    function onMouseUp() {\n      dom.unbind(window, 'mousemove', onMouseDrag);\n      dom.unbind(window, 'mouseup', onMouseUp);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    function onTouchStart(e) {\n      if (e.touches.length !== 1) { return; }\n      dom.bind(window, 'touchmove', onTouchMove);\n      dom.bind(window, 'touchend', onTouchEnd);\n      onTouchMove(e);\n    }\n\n    function onTouchMove(e) {\n      const clientX = e.touches[0].clientX;\n      const bgRect = _this.__background.getBoundingClientRect();\n\n      _this.setValue(\n        map(clientX, bgRect.left, bgRect.right, _this.__min, _this.__max)\n      );\n    }\n\n    function onTouchEnd() {\n      dom.unbind(window, 'touchmove', onTouchMove);\n      dom.unbind(window, 'touchend', onTouchEnd);\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.getValue());\n      }\n    }\n\n    this.updateDisplay();\n\n    this.__background.appendChild(this.__foreground);\n    this.domElement.appendChild(this.__background);\n  }\n\n  updateDisplay() {\n    const pct = (this.getValue() - this.__min) / (this.__max - this.__min);\n    this.__foreground.style.width = pct * 100 + '%';\n    return super.updateDisplay();\n  }\n}\n\nexport default NumberControllerSlider;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\n\n/**\n * @class Provides a GUI interface to fire a specified method, a property of an object.\n *\n * @extends dat.controllers.Controller\n *\n * @param {Object} object The object to be manipulated\n * @param {string} property The name of the property to be manipulated\n */\nclass FunctionController extends Controller {\n  constructor(object, property, text) {\n    super(object, property);\n\n    const _this = this;\n\n    this.__button = document.createElement('div');\n    this.__button.innerHTML = text === undefined ? 'Fire' : text;\n\n    dom.bind(this.__button, 'click', function(e) {\n      e.preventDefault();\n      _this.fire();\n      return false;\n    });\n\n    dom.addClass(this.__button, 'button');\n\n    this.domElement.appendChild(this.__button);\n  }\n\n  fire() {\n    if (this.__onChange) {\n      this.__onChange.call(this);\n    }\n    this.getValue().call(this.object);\n    if (this.__onFinishChange) {\n      this.__onFinishChange.call(this, this.getValue());\n    }\n  }\n}\n\nexport default FunctionController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Controller from './Controller';\nimport dom from '../dom/dom';\nimport Color from '../color/Color';\nimport interpret from '../color/interpret';\nimport common from '../utils/common';\n\n/**\n * @class Represents a given property of an object that is a color.\n * @param {Object} object\n * @param {string} property\n */\nclass ColorController extends Controller {\n  constructor(object, property) {\n    super(object, property);\n\n    this.__color = new Color(this.getValue());\n    this.__temp = new Color(0);\n\n    const _this = this;\n\n    this.domElement = document.createElement('div');\n\n    dom.makeSelectable(this.domElement, false);\n\n    this.__selector = document.createElement('div');\n    this.__selector.className = 'selector';\n\n    this.__saturation_field = document.createElement('div');\n    this.__saturation_field.className = 'saturation-field';\n\n    this.__field_knob = document.createElement('div');\n    this.__field_knob.className = 'field-knob';\n    this.__field_knob_border = '2px solid ';\n\n    this.__hue_knob = document.createElement('div');\n    this.__hue_knob.className = 'hue-knob';\n\n    this.__hue_field = document.createElement('div');\n    this.__hue_field.className = 'hue-field';\n\n    this.__input = document.createElement('input');\n    this.__input.type = 'text';\n    this.__input_textShadow = '0 1px 1px ';\n\n    dom.bind(this.__input, 'keydown', function(e) {\n      if (e.keyCode === 13) { // on enter\n        onBlur.call(this);\n      }\n    });\n\n    dom.bind(this.__input, 'blur', onBlur);\n\n    dom.bind(this.__selector, 'mousedown', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'mouseup', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    dom.bind(this.__selector, 'touchstart', function(/* e */) {\n      dom\n        .addClass(this, 'drag')\n        .bind(window, 'touchend', function(/* e */) {\n          dom.removeClass(_this.__selector, 'drag');\n        });\n    });\n\n    const valueField = document.createElement('div');\n\n    common.extend(this.__selector.style, {\n      width: '122px',\n      height: '102px',\n      padding: '3px',\n      backgroundColor: '#222',\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\n    });\n\n    common.extend(this.__field_knob.style, {\n      position: 'absolute',\n      width: '12px',\n      height: '12px',\n      border: this.__field_knob_border + (this.__color.v < 0.5 ? '#fff' : '#000'),\n      boxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\n      borderRadius: '12px',\n      zIndex: 1\n    });\n\n    common.extend(this.__hue_knob.style, {\n      position: 'absolute',\n      width: '15px',\n      height: '2px',\n      borderRight: '4px solid #fff',\n      zIndex: 1\n    });\n\n    common.extend(this.__saturation_field.style, {\n      width: '100px',\n      height: '100px',\n      border: '1px solid #555',\n      marginRight: '3px',\n      display: 'inline-block',\n      cursor: 'pointer'\n    });\n\n    common.extend(valueField.style, {\n      width: '100%',\n      height: '100%',\n      background: 'none'\n    });\n\n    linearGradient(valueField, 'top', 'rgba(0,0,0,0)', '#000');\n\n    common.extend(this.__hue_field.style, {\n      width: '15px',\n      height: '100px',\n      border: '1px solid #555',\n      cursor: 'ns-resize',\n      position: 'absolute',\n      top: '3px',\n      right: '3px'\n    });\n\n    hueGradient(this.__hue_field);\n\n    common.extend(this.__input.style, {\n      outline: 'none',\n//      width: '120px',\n      textAlign: 'center',\n//      padding: '4px',\n//      marginBottom: '6px',\n      color: '#fff',\n      border: 0,\n      fontWeight: 'bold',\n      textShadow: this.__input_textShadow + 'rgba(0,0,0,0.7)'\n    });\n\n    dom.bind(this.__saturation_field, 'mousedown', fieldDown);\n    dom.bind(this.__saturation_field, 'touchstart', fieldDown);\n\n    dom.bind(this.__field_knob, 'mousedown', fieldDown);\n    dom.bind(this.__field_knob, 'touchstart', fieldDown);\n\n    dom.bind(this.__hue_field, 'mousedown', fieldDownH);\n    dom.bind(this.__hue_field, 'touchstart', fieldDownH);\n\n    function fieldDown(e) {\n      setSV(e);\n      dom.bind(window, 'mousemove', setSV);\n      dom.bind(window, 'touchmove', setSV);\n      dom.bind(window, 'mouseup', fieldUpSV);\n      dom.bind(window, 'touchend', fieldUpSV);\n    }\n\n    function fieldDownH(e) {\n      setH(e);\n      dom.bind(window, 'mousemove', setH);\n      dom.bind(window, 'touchmove', setH);\n      dom.bind(window, 'mouseup', fieldUpH);\n      dom.bind(window, 'touchend', fieldUpH);\n    }\n\n    function fieldUpSV() {\n      dom.unbind(window, 'mousemove', setSV);\n      dom.unbind(window, 'touchmove', setSV);\n      dom.unbind(window, 'mouseup', fieldUpSV);\n      dom.unbind(window, 'touchend', fieldUpSV);\n      onFinish();\n    }\n\n    function fieldUpH() {\n      dom.unbind(window, 'mousemove', setH);\n      dom.unbind(window, 'touchmove', setH);\n      dom.unbind(window, 'mouseup', fieldUpH);\n      dom.unbind(window, 'touchend', fieldUpH);\n      onFinish();\n    }\n\n    function onBlur() {\n      const i = interpret(this.value);\n      if (i !== false) {\n        _this.__color.__state = i;\n        _this.setValue(_this.__color.toOriginal());\n      } else {\n        this.value = _this.__color.toString();\n      }\n    }\n\n    function onFinish() {\n      if (_this.__onFinishChange) {\n        _this.__onFinishChange.call(_this, _this.__color.toOriginal());\n      }\n    }\n\n    this.__saturation_field.appendChild(valueField);\n    this.__selector.appendChild(this.__field_knob);\n    this.__selector.appendChild(this.__saturation_field);\n    this.__selector.appendChild(this.__hue_field);\n    this.__hue_field.appendChild(this.__hue_knob);\n\n    this.domElement.appendChild(this.__input);\n    this.domElement.appendChild(this.__selector);\n\n    this.updateDisplay();\n\n    function setSV(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__saturation_field.getBoundingClientRect();\n      const { clientX, clientY } = (e.touches && e.touches[0]) || e;\n      let s = (clientX - fieldRect.left) / (fieldRect.right - fieldRect.left);\n      let v = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (v > 1) {\n        v = 1;\n      } else if (v < 0) {\n        v = 0;\n      }\n\n      if (s > 1) {\n        s = 1;\n      } else if (s < 0) {\n        s = 0;\n      }\n\n      _this.__color.v = v;\n      _this.__color.s = s;\n\n      _this.setValue(_this.__color.toOriginal());\n\n\n      return false;\n    }\n\n    function setH(e) {\n      if (e.type.indexOf('touch') === -1) { e.preventDefault(); }\n\n      const fieldRect = _this.__hue_field.getBoundingClientRect();\n      const { clientY } = (e.touches && e.touches[0]) || e;\n      let h = 1 - (clientY - fieldRect.top) / (fieldRect.bottom - fieldRect.top);\n\n      if (h > 1) {\n        h = 1;\n      } else if (h < 0) {\n        h = 0;\n      }\n\n      _this.__color.h = h * 360;\n\n      _this.setValue(_this.__color.toOriginal());\n\n      return false;\n    }\n  }\n\n  updateDisplay() {\n    const i = interpret(this.getValue());\n\n    if (i !== false) {\n      let mismatch = false;\n\n      // Check for mismatch on the interpreted value.\n\n      common.each(Color.COMPONENTS, function(component) {\n        if (!common.isUndefined(i[component]) && !common.isUndefined(this.__color.__state[component]) &&\n          i[component] !== this.__color.__state[component]) {\n          mismatch = true;\n          return {}; // break\n        }\n      }, this);\n\n      // If nothing diverges, we keep our previous values\n      // for statefulness, otherwise we recalculate fresh\n      if (mismatch) {\n        common.extend(this.__color.__state, i);\n      }\n    }\n\n    common.extend(this.__temp.__state, this.__color.__state);\n\n    this.__temp.a = 1;\n\n    const flip = (this.__color.v < 0.5 || this.__color.s > 0.5) ? 255 : 0;\n    const _flip = 255 - flip;\n\n    common.extend(this.__field_knob.style, {\n      marginLeft: 100 * this.__color.s - 7 + 'px',\n      marginTop: 100 * (1 - this.__color.v) - 7 + 'px',\n      backgroundColor: this.__temp.toHexString(),\n      border: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\n    });\n\n    this.__hue_knob.style.marginTop = (1 - this.__color.h / 360) * 100 + 'px';\n\n    this.__temp.s = 1;\n    this.__temp.v = 1;\n\n    linearGradient(this.__saturation_field, 'left', '#fff', this.__temp.toHexString());\n\n    this.__input.value = this.__color.toString();\n\n    common.extend(this.__input.style, {\n      backgroundColor: this.__color.toHexString(),\n      color: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\n      textShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\n    });\n  }\n}\n\nconst vendors = ['-moz-', '-o-', '-webkit-', '-ms-', ''];\n\nfunction linearGradient(elem, x, a, b) {\n  elem.style.background = '';\n  common.each(vendors, function(vendor) {\n    elem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\n  });\n}\n\nfunction hueGradient(elem) {\n  elem.style.background = '';\n  elem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\n  elem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n  elem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\n}\n\nexport default ColorController;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nconst css = {\n  load: function(url, indoc) {\n    const doc = indoc || document;\n    const link = doc.createElement('link');\n    link.type = 'text/css';\n    link.rel = 'stylesheet';\n    link.href = url;\n    doc.getElementsByTagName('head')[0].appendChild(link);\n  },\n\n  inject: function(cssContent, indoc) {\n    const doc = indoc || document;\n    const injected = document.createElement('style');\n    injected.type = 'text/css';\n    injected.innerHTML = cssContent;\n    const head = doc.getElementsByTagName('head')[0];\n    try {\n      head.appendChild(injected);\n    } catch (e) { // Unable to inject CSS, probably because of a Content Security Policy\n    }\n  }\n};\n\nexport default css;\n","const saveDialogContents = `<div id=\"dg-save\" class=\"dg dialogue\">\n\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\n\n  <textarea id=\"dg-new-constructor\"></textarea>\n\n  <div id=\"dg-save-locally\">\n\n    <input id=\"dg-local-storage\" type=\"checkbox\"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id=\"dg-local-explain\">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>`;\n\nexport default saveDialogContents;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport OptionController from './OptionController';\nimport NumberControllerBox from './NumberControllerBox';\nimport NumberControllerSlider from './NumberControllerSlider';\nimport StringController from './StringController';\nimport FunctionController from './FunctionController';\nimport BooleanController from './BooleanController';\nimport common from '../utils/common';\n\nconst ControllerFactory = function(object, property) {\n  const initialValue = object[property];\n\n  // Providing options?\n  if (common.isArray(arguments[2]) || common.isObject(arguments[2])) {\n    return new OptionController(object, property, arguments[2]);\n  }\n\n  // Providing a map?\n  if (common.isNumber(initialValue)) {\n    // Has min and max? (slider)\n    if (common.isNumber(arguments[2]) && common.isNumber(arguments[3])) {\n      // has step?\n      if (common.isNumber(arguments[4])) {\n        return new NumberControllerSlider(object, property,\n                        arguments[2], arguments[3], arguments[4]);\n      }\n\n      return new NumberControllerSlider(object, property, arguments[2], arguments[3]);\n    }\n\n    // number box\n    if (common.isNumber(arguments[4])) { // has step\n      return new NumberControllerBox(object, property,\n                        { min: arguments[2], max: arguments[3], step: arguments[4] });\n    }\n    return new NumberControllerBox(object, property, { min: arguments[2], max: arguments[3] });\n  }\n\n  if (common.isString(initialValue)) {\n    return new StringController(object, property);\n  }\n\n  if (common.isFunction(initialValue)) {\n    return new FunctionController(object, property, '');\n  }\n\n  if (common.isBoolean(initialValue)) {\n    return new BooleanController(object, property);\n  }\n\n  return null;\n};\n\nexport default ControllerFactory;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nfunction requestAnimationFrame(callback) {\n  setTimeout(callback, 1000 / 60);\n}\n\nexport default window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    requestAnimationFrame;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nclass CenteredDiv {\n  constructor() {\n    this.backgroundElement = document.createElement('div');\n    common.extend(this.backgroundElement.style, {\n      backgroundColor: 'rgba(0,0,0,0.8)',\n      top: 0,\n      left: 0,\n      display: 'none',\n      zIndex: '1000',\n      opacity: 0,\n      WebkitTransition: 'opacity 0.2s linear',\n      transition: 'opacity 0.2s linear'\n    });\n\n    dom.makeFullscreen(this.backgroundElement);\n    this.backgroundElement.style.position = 'fixed';\n\n    this.domElement = document.createElement('div');\n    common.extend(this.domElement.style, {\n      position: 'fixed',\n      display: 'none',\n      zIndex: '1001',\n      opacity: 0,\n      WebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\n      transition: 'transform 0.2s ease-out, opacity 0.2s linear'\n    });\n\n\n    document.body.appendChild(this.backgroundElement);\n    document.body.appendChild(this.domElement);\n\n    const _this = this;\n    dom.bind(this.backgroundElement, 'click', function() {\n      _this.hide();\n    });\n  }\n\n  show() {\n    const _this = this;\n\n    this.backgroundElement.style.display = 'block';\n\n    this.domElement.style.display = 'block';\n    this.domElement.style.opacity = 0;\n//    this.domElement.style.top = '52%';\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n\n    this.layout();\n\n    common.defer(function() {\n      _this.backgroundElement.style.opacity = 1;\n      _this.domElement.style.opacity = 1;\n      _this.domElement.style.webkitTransform = 'scale(1)';\n    });\n  }\n\n  /**\n   * Hide centered div\n   */\n  hide() {\n    const _this = this;\n\n    const hide = function() {\n      _this.domElement.style.display = 'none';\n      _this.backgroundElement.style.display = 'none';\n\n      dom.unbind(_this.domElement, 'webkitTransitionEnd', hide);\n      dom.unbind(_this.domElement, 'transitionend', hide);\n      dom.unbind(_this.domElement, 'oTransitionEnd', hide);\n    };\n\n    dom.bind(this.domElement, 'webkitTransitionEnd', hide);\n    dom.bind(this.domElement, 'transitionend', hide);\n    dom.bind(this.domElement, 'oTransitionEnd', hide);\n\n    this.backgroundElement.style.opacity = 0;\n//    this.domElement.style.top = '48%';\n    this.domElement.style.opacity = 0;\n    this.domElement.style.webkitTransform = 'scale(1.1)';\n  }\n\n  layout() {\n    this.domElement.style.left = window.innerWidth / 2 - dom.getWidth(this.domElement) / 2 + 'px';\n    this.domElement.style.top = window.innerHeight / 2 - dom.getHeight(this.domElement) / 2 + 'px';\n  }\n}\n\nexport default CenteredDiv;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport css from '../utils/css';\nimport saveDialogueContents from './saveDialogue.html';\nimport ControllerFactory from '../controllers/ControllerFactory';\nimport Controller from '../controllers/Controller';\nimport BooleanController from '../controllers/BooleanController';\nimport FunctionController from '../controllers/FunctionController';\nimport NumberControllerBox from '../controllers/NumberControllerBox';\nimport NumberControllerSlider from '../controllers/NumberControllerSlider';\nimport ColorController from '../controllers/ColorController';\nimport requestAnimationFrame from '../utils/requestAnimationFrame';\nimport CenteredDiv from '../dom/CenteredDiv';\nimport dom from '../dom/dom';\nimport common from '../utils/common';\n\nimport styleSheet from './style.scss'; // CSS to embed in build\n\ncss.inject(styleSheet);\n\n/** @ignore Outer-most className for GUI's */\nconst CSS_NAMESPACE = 'dg';\n\nconst HIDE_KEY_CODE = 72;\n\n/** @ignore The only value shared between the JS and SCSS. Use caution. */\nconst CLOSE_BUTTON_HEIGHT = 20;\n\nconst DEFAULT_DEFAULT_PRESET_NAME = 'Default';\n\nconst SUPPORTS_LOCAL_STORAGE = (function() {\n  try {\n    return !!window.localStorage;\n  } catch (e) {\n    return false;\n  }\n}());\n\nlet SAVE_DIALOGUE;\n\n/** @ignore Have we yet to create an autoPlace GUI? */\nlet autoPlaceVirgin = true;\n\n/** @ignore Fixed position div that auto place GUI's go inside */\nlet autoPlaceContainer;\n\n/** @ignore Are we hiding the GUI's ? */\nlet hide = false;\n\n/** @private GUI's which should be hidden */\nconst hideableGuis = [];\n\n/**\n * @class A lightweight controller library for JavaScript. It allows you to easily\n * manipulate variables and fire functions on the fly.\n *\n * @typicalname gui\n *\n * @example\n * // Creating a GUI with options.\n * var gui = new dat.GUI({name: 'My GUI'});\n *\n * @example\n * // Creating a GUI and a subfolder.\n * var gui = new dat.GUI();\n * var folder1 = gui.addFolder('Flow Field');\n *\n * @param {Object} [params]\n * @param {String} [params.name] The name of this GUI.\n * @param {Object} [params.load] JSON object representing the saved state of\n * this GUI.\n * @param {dat.gui.GUI} [params.parent] The GUI I'm nested in.\n * @param {Boolean} [params.autoPlace=true]\n * @param {Boolean} [params.hideable=true] If true, GUI is shown/hidden by <kbd>h</kbd> keypress.\n * @param {Boolean} [params.closed=false] If true, starts closed\n * @param {Boolean} [params.closeOnTop=false] If true, close/open button shows on top of the GUI\n */\nconst GUI = function(pars) {\n  const _this = this;\n\n  let params = pars || {};\n\n  /**\n   * Outermost DOM Element\n   * @type {DOMElement}\n   */\n  this.domElement = document.createElement('div');\n  this.__ul = document.createElement('ul');\n  this.domElement.appendChild(this.__ul);\n\n  dom.addClass(this.domElement, CSS_NAMESPACE);\n\n  /**\n   * Nested GUI's by name\n   * @ignore\n   */\n  this.__folders = {};\n\n  this.__controllers = [];\n\n  /**\n   * List of objects I'm remembering for save, only used in top level GUI\n   * @ignore\n   */\n  this.__rememberedObjects = [];\n\n  /**\n   * Maps the index of remembered objects to a map of controllers, only used\n   * in top level GUI.\n   *\n   * @private\n   * @ignore\n   *\n   * @example\n   * [\n   *  {\n     *    propertyName: Controller,\n     *    anotherPropertyName: Controller\n     *  },\n   *  {\n     *    propertyName: Controller\n     *  }\n   * ]\n   */\n  this.__rememberedObjectIndecesToControllers = [];\n\n  this.__listening = [];\n\n  // Default parameters\n  params = common.defaults(params, {\n    closeOnTop: false,\n    autoPlace: true,\n    width: GUI.DEFAULT_WIDTH\n  });\n\n  params = common.defaults(params, {\n    resizable: params.autoPlace,\n    hideable: params.autoPlace\n  });\n\n  if (!common.isUndefined(params.load)) {\n    // Explicit preset\n    if (params.preset) {\n      params.load.preset = params.preset;\n    }\n  } else {\n    params.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\n  }\n\n  if (common.isUndefined(params.parent) && params.hideable) {\n    hideableGuis.push(this);\n  }\n\n  // Only root level GUI's are resizable.\n  params.resizable = common.isUndefined(params.parent) && params.resizable;\n\n  if (params.autoPlace && common.isUndefined(params.scrollable)) {\n    params.scrollable = true;\n  }\n//    params.scrollable = common.isUndefined(params.parent) && params.scrollable === true;\n\n  // Not part of params because I don't want people passing this in via\n  // constructor. Should be a 'remembered' value.\n  let useLocalStorage =\n    SUPPORTS_LOCAL_STORAGE &&\n    localStorage.getItem(getLocalStorageHash(this, 'isLocal')) === 'true';\n\n  let saveToLocalStorage;\n  let titleRow;\n\n  Object.defineProperties(this,\n    /** @lends GUI.prototype */\n    {\n      /**\n       * The parent <code>GUI</code>\n       * @type dat.gui.GUI\n       */\n      parent: {\n        get: function() {\n          return params.parent;\n        }\n      },\n\n      scrollable: {\n        get: function() {\n          return params.scrollable;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s element placement for you\n       * @type Boolean\n       */\n      autoPlace: {\n        get: function() {\n          return params.autoPlace;\n        }\n      },\n\n      /**\n       * Handles <code>GUI</code>'s position of open/close button\n       * @type Boolean\n       */\n      closeOnTop: {\n        get: function() {\n          return params.closeOnTop;\n        }\n      },\n\n      /**\n       * The identifier for a set of saved values\n       * @type String\n       */\n      preset: {\n        get: function() {\n          if (_this.parent) {\n            return _this.getRoot().preset;\n          }\n\n          return params.load.preset;\n        },\n\n        set: function(v) {\n          if (_this.parent) {\n            _this.getRoot().preset = v;\n          } else {\n            params.load.preset = v;\n          }\n          setPresetSelectIndex(this);\n          _this.revert();\n        }\n      },\n\n      /**\n       * The width of <code>GUI</code> element\n       * @type Number\n       */\n      width: {\n        get: function() {\n          return params.width;\n        },\n        set: function(v) {\n          params.width = v;\n          setWidth(_this, v);\n        }\n      },\n\n      /**\n       * The name of <code>GUI</code>. Used for folders. i.e\n       * a folder's name\n       * @type String\n       */\n      name: {\n        get: function() {\n          return params.name;\n        },\n        set: function(v) {\n          // TODO Check for collisions among sibling folders\n          params.name = v;\n          if (titleRow) {\n            titleRow.innerHTML = params.name;\n          }\n        }\n      },\n\n      /**\n       * Whether the <code>GUI</code> is collapsed or not\n       * @type Boolean\n       */\n      closed: {\n        get: function() {\n          return params.closed;\n        },\n        set: function(v) {\n          params.closed = v;\n          if (params.closed) {\n            dom.addClass(_this.__ul, GUI.CLASS_CLOSED);\n          } else {\n            dom.removeClass(_this.__ul, GUI.CLASS_CLOSED);\n          }\n          // For browsers that aren't going to respect the CSS transition,\n          // Lets just check our height against the window height right off\n          // the bat.\n          this.onResize();\n\n          if (_this.__closeButton) {\n            _this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\n          }\n        }\n      },\n\n      /**\n       * Contains all presets\n       * @type Object\n       */\n      load: {\n        get: function() {\n          return params.load;\n        }\n      },\n\n      /**\n       * Determines whether or not to use <a href=\"https://developer.mozilla.org/en/DOM/Storage#localStorage\">localStorage</a> as the means for\n       * <code>remember</code>ing\n       * @type Boolean\n       */\n      useLocalStorage: {\n\n        get: function() {\n          return useLocalStorage;\n        },\n        set: function(bool) {\n          if (SUPPORTS_LOCAL_STORAGE) {\n            useLocalStorage = bool;\n            if (bool) {\n              dom.bind(window, 'unload', saveToLocalStorage);\n            } else {\n              dom.unbind(window, 'unload', saveToLocalStorage);\n            }\n            localStorage.setItem(getLocalStorageHash(_this, 'isLocal'), bool);\n          }\n        }\n      }\n    });\n\n  // Are we a root level GUI?\n  if (common.isUndefined(params.parent)) {\n    this.closed = params.closed || false;\n\n    dom.addClass(this.domElement, GUI.CLASS_MAIN);\n    dom.makeSelectable(this.domElement, false);\n\n    // Are we supposed to be loading locally?\n    if (SUPPORTS_LOCAL_STORAGE) {\n      if (useLocalStorage) {\n        _this.useLocalStorage = true;\n\n        const savedGui = localStorage.getItem(getLocalStorageHash(this, 'gui'));\n\n        if (savedGui) {\n          params.load = JSON.parse(savedGui);\n        }\n      }\n    }\n\n    this.__closeButton = document.createElement('div');\n    this.__closeButton.innerHTML = GUI.TEXT_CLOSED;\n    dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BUTTON);\n    if (params.closeOnTop) {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_TOP);\n      this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0]);\n    } else {\n      dom.addClass(this.__closeButton, GUI.CLASS_CLOSE_BOTTOM);\n      this.domElement.appendChild(this.__closeButton);\n    }\n\n    dom.bind(this.__closeButton, 'click', function() {\n      _this.closed = !_this.closed;\n    });\n    // Oh, you're a nested GUI!\n  } else {\n    if (params.closed === undefined) {\n      params.closed = true;\n    }\n\n    const titleRowName = document.createTextNode(params.name);\n    dom.addClass(titleRowName, 'controller-name');\n\n    titleRow = addRow(_this, titleRowName);\n\n    const onClickTitle = function(e) {\n      e.preventDefault();\n      _this.closed = !_this.closed;\n      return false;\n    };\n\n    dom.addClass(this.__ul, GUI.CLASS_CLOSED);\n\n    dom.addClass(titleRow, 'title');\n    dom.bind(titleRow, 'click', onClickTitle);\n\n    if (!params.closed) {\n      this.closed = false;\n    }\n  }\n\n  if (params.autoPlace) {\n    if (common.isUndefined(params.parent)) {\n      if (autoPlaceVirgin) {\n        autoPlaceContainer = document.createElement('div');\n        dom.addClass(autoPlaceContainer, CSS_NAMESPACE);\n        dom.addClass(autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER);\n        document.body.appendChild(autoPlaceContainer);\n        autoPlaceVirgin = false;\n      }\n\n      // Put it in the dom for you.\n      autoPlaceContainer.appendChild(this.domElement);\n\n      // Apply the auto styles\n      dom.addClass(this.domElement, GUI.CLASS_AUTO_PLACE);\n    }\n\n\n    // Make it not elastic.\n    if (!this.parent) {\n      setWidth(_this, params.width);\n    }\n  }\n\n  this.__resizeHandler = function() {\n    _this.onResizeDebounced();\n  };\n\n  dom.bind(window, 'resize', this.__resizeHandler);\n  dom.bind(this.__ul, 'webkitTransitionEnd', this.__resizeHandler);\n  dom.bind(this.__ul, 'transitionend', this.__resizeHandler);\n  dom.bind(this.__ul, 'oTransitionEnd', this.__resizeHandler);\n  this.onResize();\n\n  if (params.resizable) {\n    addResizeHandle(this);\n  }\n\n  saveToLocalStorage = function() {\n    if (SUPPORTS_LOCAL_STORAGE && localStorage.getItem(getLocalStorageHash(_this, 'isLocal')) === 'true') {\n      localStorage.setItem(getLocalStorageHash(_this, 'gui'), JSON.stringify(_this.getSaveObject()));\n    }\n  };\n\n  // expose this method publicly\n  this.saveToLocalStorageIfPossible = saveToLocalStorage;\n\n  function resetWidth() {\n    const root = _this.getRoot();\n    root.width += 1;\n    common.defer(function() {\n      root.width -= 1;\n    });\n  }\n\n  if (!params.parent) {\n    resetWidth();\n  }\n};\n\nGUI.toggleHide = function() {\n  hide = !hide;\n  common.each(hideableGuis, function(gui) {\n    gui.domElement.style.display = hide ? 'none' : '';\n  });\n};\n\nGUI.CLASS_AUTO_PLACE = 'a';\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\nGUI.CLASS_MAIN = 'main';\nGUI.CLASS_CONTROLLER_ROW = 'cr';\nGUI.CLASS_TOO_TALL = 'taller-than-window';\nGUI.CLASS_CLOSED = 'closed';\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\nGUI.CLASS_CLOSE_TOP = 'close-top';\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\nGUI.CLASS_DRAG = 'drag';\n\nGUI.DEFAULT_WIDTH = 245;\nGUI.TEXT_CLOSED = 'Close Controls';\nGUI.TEXT_OPEN = 'Open Controls';\n\nGUI._keydownHandler = function(e) {\n  if (document.activeElement.type !== 'text' &&\n    (e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE)) {\n    GUI.toggleHide();\n  }\n};\ndom.bind(window, 'keydown', GUI._keydownHandler, false);\n\ncommon.extend(\n  GUI.prototype,\n\n  /** @lends GUI.prototype */\n  {\n\n    /**\n     * Adds a new {@link Controller} to the GUI. The type of controller created\n     * is inferred from the initial value of <code>object[property]</code>. For\n     * color properties, see {@link addColor}.\n     *\n     * @param {Object} object The object to be manipulated\n     * @param {String} property The name of the property to be manipulated\n     * @param {Number} [min] Minimum allowed value\n     * @param {Number} [max] Maximum allowed value\n     * @param {Number} [step] Increment by which to change value\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * // Add a string controller.\n     * var person = {name: 'Sam'};\n     * gui.add(person, 'name');\n     *\n     * @example\n     * // Add a number controller slider.\n     * var person = {age: 45};\n     * gui.add(person, 'age', 0, 100);\n     */\n    add: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          factoryArgs: Array.prototype.slice.call(arguments, 2)\n        }\n      );\n    },\n\n    /**\n     * Adds a new color controller to the GUI.\n     *\n     * @param object\n     * @param property\n     * @returns {Controller} The controller that was added to the GUI.\n     * @instance\n     *\n     * @example\n     * var palette = {\n     *   color1: '#FF0000', // CSS string\n     *   color2: [ 0, 128, 255 ], // RGB array\n     *   color3: [ 0, 128, 255, 0.3 ], // RGB with alpha\n     *   color4: { h: 350, s: 0.9, v: 0.3 } // Hue, saturation, value\n     * };\n     * gui.addColor(palette, 'color1');\n     * gui.addColor(palette, 'color2');\n     * gui.addColor(palette, 'color3');\n     * gui.addColor(palette, 'color4');\n     */\n    addColor: function(object, property) {\n      return add(\n        this,\n        object,\n        property,\n        {\n          color: true\n        }\n      );\n    },\n\n    /**\n     * Removes the given controller from the GUI.\n     * @param {Controller} controller\n     * @instance\n     */\n    remove: function(controller) {\n      // TODO listening?\n      this.__ul.removeChild(controller.__li);\n      this.__controllers.splice(this.__controllers.indexOf(controller), 1);\n      const _this = this;\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Removes the root GUI from the document and unbinds all event listeners.\n     * For subfolders, use `gui.removeFolder(folder)` instead.\n     * @instance\n     */\n    destroy: function() {\n      if (this.parent) {\n        throw new Error(\n          'Only the root GUI should be removed with .destroy(). ' +\n          'For subfolders, use gui.removeFolder(folder) instead.'\n        );\n      }\n\n      if (this.autoPlace) {\n        autoPlaceContainer.removeChild(this.domElement);\n      }\n\n      const _this = this;\n      common.each(this.__folders, function(subfolder) {\n        _this.removeFolder(subfolder);\n      });\n\n      dom.unbind(window, 'keydown', GUI._keydownHandler, false);\n\n      removeListeners(this);\n    },\n\n    /**\n     * Creates a new subfolder GUI instance.\n     * @param name\n     * @returns {dat.gui.GUI} The new folder.\n     * @throws {Error} if this GUI already has a folder by the specified\n     * name\n     * @instance\n     */\n    addFolder: function(name) {\n      // We have to prevent collisions on names in order to have a key\n      // by which to remember saved values\n      if (this.__folders[name] !== undefined) {\n        throw new Error('You already have a folder in this GUI by the' +\n          ' name \"' + name + '\"');\n      }\n\n      const newGuiParams = { name: name, parent: this };\n\n      // We need to pass down the autoPlace trait so that we can\n      // attach event listeners to open/close folder actions to\n      // ensure that a scrollbar appears if the window is too short.\n      newGuiParams.autoPlace = this.autoPlace;\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[name]) { // Did daddy remember me?\n        // Start me closed if I was closed\n        newGuiParams.closed = this.load.folders[name].closed;\n\n        // Pass down the loaded data\n        newGuiParams.load = this.load.folders[name];\n      }\n\n      const gui = new GUI(newGuiParams);\n      this.__folders[name] = gui;\n\n      const li = addRow(this, gui.domElement);\n      dom.addClass(li, 'folder');\n      return gui;\n    },\n\n    /**\n     * Removes a subfolder GUI instance.\n     * @param {dat.gui.GUI} folder The folder to remove.\n     * @instance\n     */\n    removeFolder: function(folder) {\n      this.__ul.removeChild(folder.domElement.parentElement);\n\n      delete this.__folders[folder.name];\n\n      // Do we have saved appearance data for this folder?\n      if (this.load && // Anything loaded?\n        this.load.folders && // Was my parent a dead-end?\n        this.load.folders[folder.name]) {\n        delete this.load.folders[folder.name];\n      }\n\n      removeListeners(folder);\n\n      const _this = this;\n\n      common.each(folder.__folders, function(subfolder) {\n        folder.removeFolder(subfolder);\n      });\n\n      common.defer(function() {\n        _this.onResize();\n      });\n    },\n\n    /**\n     * Opens the GUI.\n     */\n    open: function() {\n      this.closed = false;\n    },\n\n    /**\n     * Closes the GUI.\n     */\n    close: function() {\n      this.closed = true;\n    },\n\n    /**\n    * Hides the GUI.\n    */\n    hide: function() {\n      this.domElement.style.display = 'none';\n    },\n\n    /**\n    * Shows the GUI.\n    */\n    show: function() {\n      this.domElement.style.display = '';\n    },\n\n\n    onResize: function() {\n      // we debounce this function to prevent performance issues when rotating on tablet/mobile\n      const root = this.getRoot();\n      if (root.scrollable) {\n        const top = dom.getOffset(root.__ul).top;\n        let h = 0;\n\n        common.each(root.__ul.childNodes, function(node) {\n          if (!(root.autoPlace && node === root.__save_row)) {\n            h += dom.getHeight(node);\n          }\n        });\n\n        if (window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h) {\n          dom.addClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\n        } else {\n          dom.removeClass(root.domElement, GUI.CLASS_TOO_TALL);\n          root.__ul.style.height = 'auto';\n        }\n      }\n\n      if (root.__resize_handle) {\n        common.defer(function() {\n          root.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\n        });\n      }\n\n      if (root.__closeButton) {\n        root.__closeButton.style.width = root.width + 'px';\n      }\n    },\n\n    onResizeDebounced: common.debounce(function() { this.onResize(); }, 50),\n\n    /**\n     * Mark objects for saving. The order of these objects cannot change as\n     * the GUI grows. When remembering new objects, append them to the end\n     * of the list.\n     *\n     * @param {...Object} objects\n     * @throws {Error} if not called on a top level GUI.\n     * @instance\n     * @ignore\n     */\n    remember: function() {\n      if (common.isUndefined(SAVE_DIALOGUE)) {\n        SAVE_DIALOGUE = new CenteredDiv();\n        SAVE_DIALOGUE.domElement.innerHTML = saveDialogueContents;\n      }\n\n      if (this.parent) {\n        throw new Error('You can only call remember on a top level GUI.');\n      }\n\n      const _this = this;\n\n      common.each(Array.prototype.slice.call(arguments), function(object) {\n        if (_this.__rememberedObjects.length === 0) {\n          addSaveMenu(_this);\n        }\n        if (_this.__rememberedObjects.indexOf(object) === -1) {\n          _this.__rememberedObjects.push(object);\n        }\n      });\n\n      if (this.autoPlace) {\n        // Set save row width\n        setWidth(this, this.width);\n      }\n    },\n\n    /**\n     * @returns {dat.gui.GUI} the topmost parent GUI of a nested GUI.\n     * @instance\n     */\n    getRoot: function() {\n      let gui = this;\n      while (gui.parent) {\n        gui = gui.parent;\n      }\n      return gui;\n    },\n\n    /**\n     * @returns {Object} a JSON object representing the current state of\n     * this GUI as well as its remembered properties.\n     * @instance\n     */\n    getSaveObject: function() {\n      const toReturn = this.load;\n      toReturn.closed = this.closed;\n\n      // Am I remembering any values?\n      if (this.__rememberedObjects.length > 0) {\n        toReturn.preset = this.preset;\n\n        if (!toReturn.remembered) {\n          toReturn.remembered = {};\n        }\n\n        toReturn.remembered[this.preset] = getCurrentPreset(this);\n      }\n\n      toReturn.folders = {};\n      common.each(this.__folders, function(element, key) {\n        toReturn.folders[key] = element.getSaveObject();\n      });\n\n      return toReturn;\n    },\n\n    save: function() {\n      if (!this.load.remembered) {\n        this.load.remembered = {};\n      }\n\n      this.load.remembered[this.preset] = getCurrentPreset(this);\n      markPresetModified(this, false);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    saveAs: function(presetName) {\n      if (!this.load.remembered) {\n        // Retain default values upon first save\n        this.load.remembered = {};\n        this.load.remembered[DEFAULT_DEFAULT_PRESET_NAME] = getCurrentPreset(this, true);\n      }\n\n      this.load.remembered[presetName] = getCurrentPreset(this);\n      this.preset = presetName;\n      addPresetOption(this, presetName, true);\n      this.saveToLocalStorageIfPossible();\n    },\n\n    revert: function(gui) {\n      common.each(this.__controllers, function(controller) {\n        // Make revert work on Default.\n        if (!this.getRoot().load.remembered) {\n          controller.setValue(controller.initialValue);\n        } else {\n          recallSavedValue(gui || this.getRoot(), controller);\n        }\n\n        // fire onFinishChange callback\n        if (controller.__onFinishChange) {\n          controller.__onFinishChange.call(controller, controller.getValue());\n        }\n      }, this);\n\n      common.each(this.__folders, function(folder) {\n        folder.revert(folder);\n      });\n\n      if (!gui) {\n        markPresetModified(this.getRoot(), false);\n      }\n    },\n\n    listen: function(controller) {\n      const init = this.__listening.length === 0;\n      this.__listening.push(controller);\n      if (init) {\n        updateDisplays(this.__listening);\n      }\n    },\n\n    updateDisplay: function() {\n      common.each(this.__controllers, function(controller) {\n        controller.updateDisplay();\n      });\n      common.each(this.__folders, function(folder) {\n        folder.updateDisplay();\n      });\n    }\n  }\n);\n\n/**\n * Add a row to the end of the GUI or before another row.\n *\n * @param gui\n * @param [newDom] If specified, inserts the dom content in the new row\n * @param [liBefore] If specified, places the new row before another row\n *\n * @ignore\n */\nfunction addRow(gui, newDom, liBefore) {\n  const li = document.createElement('li');\n  if (newDom) {\n    li.appendChild(newDom);\n  }\n\n  if (liBefore) {\n    gui.__ul.insertBefore(li, liBefore);\n  } else {\n    gui.__ul.appendChild(li);\n  }\n  gui.onResize();\n  return li;\n}\n\nfunction removeListeners(gui) {\n  dom.unbind(window, 'resize', gui.__resizeHandler);\n\n  if (gui.saveToLocalStorageIfPossible) {\n    dom.unbind(window, 'unload', gui.saveToLocalStorageIfPossible);\n  }\n}\n\nfunction markPresetModified(gui, modified) {\n  const opt = gui.__preset_select[gui.__preset_select.selectedIndex];\n\n  if (modified) {\n    opt.innerHTML = opt.value + '*';\n  } else {\n    opt.innerHTML = opt.value;\n  }\n}\n\nfunction augmentController(gui, li, controller) {\n  controller.__li = li;\n  controller.__gui = gui;\n\n  common.extend(controller, /** @lends Controller.prototype */ {\n    /**\n     * @param  {Array|Object} options\n     * @return {Controller}\n     */\n    options: function(options) {\n      if (arguments.length > 1) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [common.toArray(arguments)]\n          }\n        );\n      }\n\n      if (common.isArray(options) || common.isObject(options)) {\n        const nextSibling = controller.__li.nextElementSibling;\n        controller.remove();\n\n        return add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: nextSibling,\n            factoryArgs: [options]\n          }\n        );\n      }\n    },\n\n    /**\n     * Sets the name of the controller.\n     * @param  {string} name\n     * @return {Controller}\n     */\n    name: function(name) {\n      controller.__li.firstElementChild.firstElementChild.innerHTML = name;\n      return controller;\n    },\n\n    /**\n     * Sets controller to listen for changes on its underlying object.\n     * @return {Controller}\n     */\n    listen: function() {\n      controller.__gui.listen(controller);\n      return controller;\n    },\n\n    /**\n     * Removes the controller from its parent GUI.\n     * @return {Controller}\n     */\n    remove: function() {\n      controller.__gui.remove(controller);\n      return controller;\n    }\n  });\n\n  // All sliders should be accompanied by a box.\n  if (controller instanceof NumberControllerSlider) {\n    const box = new NumberControllerBox(controller.object, controller.property,\n      { min: controller.__min, max: controller.__max, step: controller.__step });\n\n    common.each(['updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max'], function(method) {\n      const pc = controller[method];\n      const pb = box[method];\n      controller[method] = box[method] = function() {\n        const args = Array.prototype.slice.call(arguments);\n        pb.apply(box, args);\n        return pc.apply(controller, args);\n      };\n    });\n\n    dom.addClass(li, 'has-slider');\n    controller.domElement.insertBefore(box.domElement, controller.domElement.firstElementChild);\n  } else if (controller instanceof NumberControllerBox) {\n    const r = function(returned) {\n      // Have we defined both boundaries?\n      if (common.isNumber(controller.__min) && common.isNumber(controller.__max)) {\n        // Well, then lets just replace this with a slider.\n\n        // lets remember if the old controller had a specific name or was listening\n        const oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\n        const wasListening = controller.__gui.__listening.indexOf(controller) > -1;\n\n        controller.remove();\n        const newController = add(\n          gui,\n          controller.object,\n          controller.property,\n          {\n            before: controller.__li.nextElementSibling,\n            factoryArgs: [controller.__min, controller.__max, controller.__step]\n          });\n\n        newController.name(oldName);\n        if (wasListening) newController.listen();\n\n        return newController;\n      }\n\n      return returned;\n    };\n\n    controller.min = common.compose(r, controller.min);\n    controller.max = common.compose(r, controller.max);\n  } else if (controller instanceof BooleanController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__checkbox, 'click');\n    });\n\n    dom.bind(controller.__checkbox, 'click', function(e) {\n      e.stopPropagation(); // Prevents double-toggle\n    });\n  } else if (controller instanceof FunctionController) {\n    dom.bind(li, 'click', function() {\n      dom.fakeEvent(controller.__button, 'click');\n    });\n\n    dom.bind(li, 'mouseover', function() {\n      dom.addClass(controller.__button, 'hover');\n    });\n\n    dom.bind(li, 'mouseout', function() {\n      dom.removeClass(controller.__button, 'hover');\n    });\n  } else if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n    controller.updateDisplay = common.compose(function(val) {\n      li.style.borderLeftColor = controller.__color.toString();\n      return val;\n    }, controller.updateDisplay);\n\n    controller.updateDisplay();\n  }\n\n  controller.setValue = common.compose(function(val) {\n    if (gui.getRoot().__preset_select && controller.isModified()) {\n      markPresetModified(gui.getRoot(), true);\n    }\n\n    return val;\n  }, controller.setValue);\n}\n\nfunction recallSavedValue(gui, controller) {\n  // Find the topmost GUI, that's where remembered objects live.\n  const root = gui.getRoot();\n\n  // Does the object we're controlling match anything we've been told to\n  // remember?\n  const matchedIndex = root.__rememberedObjects.indexOf(controller.object);\n\n  // Why yes, it does!\n  if (matchedIndex !== -1) {\n    // Let me fetch a map of controllers for thcommon.isObject.\n    let controllerMap = root.__rememberedObjectIndecesToControllers[matchedIndex];\n\n    // Ohp, I believe this is the first controller we've created for this\n    // object. Lets make the map fresh.\n    if (controllerMap === undefined) {\n      controllerMap = {};\n      root.__rememberedObjectIndecesToControllers[matchedIndex] =\n        controllerMap;\n    }\n\n    // Keep track of this controller\n    controllerMap[controller.property] = controller;\n\n    // Okay, now have we saved any values for this controller?\n    if (root.load && root.load.remembered) {\n      const presetMap = root.load.remembered;\n\n      // Which preset are we trying to load?\n      let preset;\n\n      if (presetMap[gui.preset]) {\n        preset = presetMap[gui.preset];\n      } else if (presetMap[DEFAULT_DEFAULT_PRESET_NAME]) {\n        // Uhh, you can have the default instead?\n        preset = presetMap[DEFAULT_DEFAULT_PRESET_NAME];\n      } else {\n        // Nada.\n        return;\n      }\n\n      // Did the loaded object remember thcommon.isObject? &&  Did we remember this particular property?\n      if (preset[matchedIndex] && preset[matchedIndex][controller.property] !== undefined) {\n        // We did remember something for this guy ...\n        const value = preset[matchedIndex][controller.property];\n\n        // And that's what it is.\n        controller.initialValue = value;\n        controller.setValue(value);\n      }\n    }\n  }\n}\n\nfunction add(gui, object, property, params) {\n  if (object[property] === undefined) {\n    throw new Error(`Object \"${object}\" has no property \"${property}\"`);\n  }\n\n  let controller;\n\n  if (params.color) {\n    controller = new ColorController(object, property);\n  } else {\n    const factoryArgs = [object, property].concat(params.factoryArgs);\n    controller = ControllerFactory.apply(gui, factoryArgs);\n  }\n\n  if (params.before instanceof Controller) {\n    params.before = params.before.__li;\n  }\n\n  recallSavedValue(gui, controller);\n\n  dom.addClass(controller.domElement, 'c');\n\n  const name = document.createElement('span');\n  dom.addClass(name, 'property-name');\n  name.innerHTML = controller.property;\n\n  const container = document.createElement('div');\n  container.appendChild(name);\n  container.appendChild(controller.domElement);\n\n  const li = addRow(gui, container, params.before);\n\n  dom.addClass(li, GUI.CLASS_CONTROLLER_ROW);\n  if (controller instanceof ColorController) {\n    dom.addClass(li, 'color');\n  } else {\n    dom.addClass(li, typeof controller.getValue());\n  }\n\n  augmentController(gui, li, controller);\n\n  gui.__controllers.push(controller);\n\n  return controller;\n}\n\nfunction getLocalStorageHash(gui, key) {\n  // TODO how does this deal with multiple GUI's?\n  return document.location.href + '.' + key;\n}\n\nfunction addPresetOption(gui, name, setSelected) {\n  const opt = document.createElement('option');\n  opt.innerHTML = name;\n  opt.value = name;\n  gui.__preset_select.appendChild(opt);\n  if (setSelected) {\n    gui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\n  }\n}\n\nfunction showHideExplain(gui, explain) {\n  explain.style.display = gui.useLocalStorage ? 'block' : 'none';\n}\n\nfunction addSaveMenu(gui) {\n  const div = gui.__save_row = document.createElement('li');\n\n  dom.addClass(gui.domElement, 'has-save');\n\n  gui.__ul.insertBefore(div, gui.__ul.firstChild);\n\n  dom.addClass(div, 'save-row');\n\n  const gears = document.createElement('span');\n  gears.innerHTML = '&nbsp;';\n  dom.addClass(gears, 'button gears');\n\n  // TODO replace with FunctionController\n  const button = document.createElement('span');\n  button.innerHTML = 'Save';\n  dom.addClass(button, 'button');\n  dom.addClass(button, 'save');\n\n  const button2 = document.createElement('span');\n  button2.innerHTML = 'New';\n  dom.addClass(button2, 'button');\n  dom.addClass(button2, 'save-as');\n\n  const button3 = document.createElement('span');\n  button3.innerHTML = 'Revert';\n  dom.addClass(button3, 'button');\n  dom.addClass(button3, 'revert');\n\n  const select = gui.__preset_select = document.createElement('select');\n\n  if (gui.load && gui.load.remembered) {\n    common.each(gui.load.remembered, function(value, key) {\n      addPresetOption(gui, key, key === gui.preset);\n    });\n  } else {\n    addPresetOption(gui, DEFAULT_DEFAULT_PRESET_NAME, false);\n  }\n\n  dom.bind(select, 'change', function() {\n    for (let index = 0; index < gui.__preset_select.length; index++) {\n      gui.__preset_select[index].innerHTML = gui.__preset_select[index].value;\n    }\n\n    gui.preset = this.value;\n  });\n\n  div.appendChild(select);\n  div.appendChild(gears);\n  div.appendChild(button);\n  div.appendChild(button2);\n  div.appendChild(button3);\n\n  if (SUPPORTS_LOCAL_STORAGE) {\n    const explain = document.getElementById('dg-local-explain');\n    const localStorageCheckBox = document.getElementById('dg-local-storage');\n    const saveLocally = document.getElementById('dg-save-locally');\n\n    saveLocally.style.display = 'block';\n\n    if (localStorage.getItem(getLocalStorageHash(gui, 'isLocal')) === 'true') {\n      localStorageCheckBox.setAttribute('checked', 'checked');\n    }\n\n    showHideExplain(gui, explain);\n\n    // TODO: Use a boolean controller, fool!\n    dom.bind(localStorageCheckBox, 'change', function() {\n      gui.useLocalStorage = !gui.useLocalStorage;\n      showHideExplain(gui, explain);\n    });\n  }\n\n  const newConstructorTextArea = document.getElementById('dg-new-constructor');\n\n  dom.bind(newConstructorTextArea, 'keydown', function(e) {\n    if (e.metaKey && (e.which === 67 || e.keyCode === 67)) {\n      SAVE_DIALOGUE.hide();\n    }\n  });\n\n  dom.bind(gears, 'click', function() {\n    newConstructorTextArea.innerHTML = JSON.stringify(gui.getSaveObject(), undefined, 2);\n    SAVE_DIALOGUE.show();\n    newConstructorTextArea.focus();\n    newConstructorTextArea.select();\n  });\n\n  dom.bind(button, 'click', function() {\n    gui.save();\n  });\n\n  dom.bind(button2, 'click', function() {\n    const presetName = prompt('Enter a new preset name.');\n    if (presetName) {\n      gui.saveAs(presetName);\n    }\n  });\n\n  dom.bind(button3, 'click', function() {\n    gui.revert();\n  });\n\n  // div.appendChild(button2);\n}\n\nfunction addResizeHandle(gui) {\n  let pmouseX;\n\n  gui.__resize_handle = document.createElement('div');\n\n  common.extend(gui.__resize_handle.style, {\n\n    width: '6px',\n    marginLeft: '-3px',\n    height: '200px',\n    cursor: 'ew-resize',\n    position: 'absolute'\n    // border: '1px solid blue'\n\n  });\n\n  function drag(e) {\n    e.preventDefault();\n\n    gui.width += pmouseX - e.clientX;\n    gui.onResize();\n    pmouseX = e.clientX;\n\n    return false;\n  }\n\n  function dragStop() {\n    dom.removeClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.unbind(window, 'mousemove', drag);\n    dom.unbind(window, 'mouseup', dragStop);\n  }\n\n  function dragStart(e) {\n    e.preventDefault();\n\n    pmouseX = e.clientX;\n\n    dom.addClass(gui.__closeButton, GUI.CLASS_DRAG);\n    dom.bind(window, 'mousemove', drag);\n    dom.bind(window, 'mouseup', dragStop);\n\n    return false;\n  }\n\n  dom.bind(gui.__resize_handle, 'mousedown', dragStart);\n  dom.bind(gui.__closeButton, 'mousedown', dragStart);\n\n  gui.domElement.insertBefore(gui.__resize_handle, gui.domElement.firstElementChild);\n}\n\nfunction setWidth(gui, w) {\n  gui.domElement.style.width = w + 'px';\n  // Auto placed save-rows are position fixed, so we have to\n  // set the width manually if we want it to bleed to the edge\n  if (gui.__save_row && gui.autoPlace) {\n    gui.__save_row.style.width = w + 'px';\n  }\n  if (gui.__closeButton) {\n    gui.__closeButton.style.width = w + 'px';\n  }\n}\n\nfunction getCurrentPreset(gui, useInitialValues) {\n  const toReturn = {};\n\n  // For each object I'm remembering\n  common.each(gui.__rememberedObjects, function(val, index) {\n    const savedValues = {};\n\n    // The controllers I've made for thcommon.isObject by property\n    const controllerMap =\n      gui.__rememberedObjectIndecesToControllers[index];\n\n    // Remember each value for each property\n    common.each(controllerMap, function(controller, property) {\n      savedValues[property] = useInitialValues ? controller.initialValue : controller.getValue();\n    });\n\n    // Save the values for thcommon.isObject\n    toReturn[index] = savedValues;\n  });\n\n  return toReturn;\n}\n\nfunction setPresetSelectIndex(gui) {\n  for (let index = 0; index < gui.__preset_select.length; index++) {\n    if (gui.__preset_select[index].value === gui.preset) {\n      gui.__preset_select.selectedIndex = index;\n    }\n  }\n}\n\nfunction updateDisplays(controllerArray) {\n  if (controllerArray.length !== 0) {\n    requestAnimationFrame.call(window, function() {\n      updateDisplays(controllerArray);\n    });\n  }\n\n  common.each(controllerArray, function(c) {\n    c.updateDisplay();\n  });\n}\n\nexport default GUI;\n","/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\nimport Color from './color/Color';\nimport math from './color/math';\nimport interpret from './color/interpret';\n\nimport Controller from './controllers/Controller';\nimport BooleanController from './controllers/BooleanController';\nimport OptionController from './controllers/OptionController';\nimport StringController from './controllers/StringController';\nimport NumberController from './controllers/NumberController';\nimport NumberControllerBox from './controllers/NumberControllerBox';\nimport NumberControllerSlider from './controllers/NumberControllerSlider';\nimport FunctionController from './controllers/FunctionController';\nimport ColorController from './controllers/ColorController';\n\nimport domImport from './dom/dom';\nimport GUIImport from './gui/GUI';\n\nexport const color = {\n  Color: Color,\n  math: math,\n  interpret: interpret\n};\n\nexport const controllers = {\n  Controller: Controller,\n  BooleanController: BooleanController,\n  OptionController: OptionController,\n  StringController: StringController,\n  NumberController: NumberController,\n  NumberControllerBox: NumberControllerBox,\n  NumberControllerSlider: NumberControllerSlider,\n  FunctionController: FunctionController,\n  ColorController: ColorController\n};\n\nexport const dom = { dom: domImport };\n\nexport const gui = { GUI: GUIImport };\n\nexport const GUI = GUIImport;\n\nexport default {\n  color,\n  controllers,\n  dom,\n  gui,\n  GUI\n};\n","// Polyfills\n\nif ( Number.EPSILON === undefined ) {\n\n\tNumber.EPSILON = Math.pow( 2, - 52 );\n\n}\n\nif ( Number.isInteger === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger\n\n\tNumber.isInteger = function ( value ) {\n\n\t\treturn typeof value === 'number' && isFinite( value ) && Math.floor( value ) === value;\n\n\t};\n\n}\n\n//\n\nif ( Math.sign === undefined ) {\n\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n\n\tMath.sign = function ( x ) {\n\n\t\treturn ( x < 0 ) ? - 1 : ( x > 0 ) ? 1 : + x;\n\n\t};\n\n}\n\nif ( 'name' in Function.prototype === false ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/name\n\n\tObject.defineProperty( Function.prototype, 'name', {\n\n\t\tget: function () {\n\n\t\t\treturn this.toString().match( /^\\s*function\\s*([^\\(\\s]*)/ )[ 1 ];\n\n\t\t}\n\n\t} );\n\n}\n\nif ( Object.assign === undefined ) {\n\n\t// Missing in IE\n\t// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n\n\tObject.assign = function ( target ) {\n\n\t\tif ( target === undefined || target === null ) {\n\n\t\t\tthrow new TypeError( 'Cannot convert undefined or null to object' );\n\n\t\t}\n\n\t\tconst output = Object( target );\n\n\t\tfor ( let index = 1; index < arguments.length; index ++ ) {\n\n\t\t\tconst source = arguments[ index ];\n\n\t\t\tif ( source !== undefined && source !== null ) {\n\n\t\t\t\tfor ( const nextKey in source ) {\n\n\t\t\t\t\tif ( Object.prototype.hasOwnProperty.call( source, nextKey ) ) {\n\n\t\t\t\t\t\toutput[ nextKey ] = source[ nextKey ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn output;\n\n\t};\n\n}\n\nconst REVISION = '118';\nconst MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nconst TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nconst CullFaceNone = 0;\nconst CullFaceBack = 1;\nconst CullFaceFront = 2;\nconst CullFaceFrontBack = 3;\nconst FrontFaceDirectionCW = 0;\nconst FrontFaceDirectionCCW = 1;\nconst BasicShadowMap = 0;\nconst PCFShadowMap = 1;\nconst PCFSoftShadowMap = 2;\nconst VSMShadowMap = 3;\nconst FrontSide = 0;\nconst BackSide = 1;\nconst DoubleSide = 2;\nconst FlatShading = 1;\nconst SmoothShading = 2;\nconst NoBlending = 0;\nconst NormalBlending = 1;\nconst AdditiveBlending = 2;\nconst SubtractiveBlending = 3;\nconst MultiplyBlending = 4;\nconst CustomBlending = 5;\nconst AddEquation = 100;\nconst SubtractEquation = 101;\nconst ReverseSubtractEquation = 102;\nconst MinEquation = 103;\nconst MaxEquation = 104;\nconst ZeroFactor = 200;\nconst OneFactor = 201;\nconst SrcColorFactor = 202;\nconst OneMinusSrcColorFactor = 203;\nconst SrcAlphaFactor = 204;\nconst OneMinusSrcAlphaFactor = 205;\nconst DstAlphaFactor = 206;\nconst OneMinusDstAlphaFactor = 207;\nconst DstColorFactor = 208;\nconst OneMinusDstColorFactor = 209;\nconst SrcAlphaSaturateFactor = 210;\nconst NeverDepth = 0;\nconst AlwaysDepth = 1;\nconst LessDepth = 2;\nconst LessEqualDepth = 3;\nconst EqualDepth = 4;\nconst GreaterEqualDepth = 5;\nconst GreaterDepth = 6;\nconst NotEqualDepth = 7;\nconst MultiplyOperation = 0;\nconst MixOperation = 1;\nconst AddOperation = 2;\nconst NoToneMapping = 0;\nconst LinearToneMapping = 1;\nconst ReinhardToneMapping = 2;\nconst CineonToneMapping = 3;\nconst ACESFilmicToneMapping = 4;\nconst CustomToneMapping = 5;\n\nconst UVMapping = 300;\nconst CubeReflectionMapping = 301;\nconst CubeRefractionMapping = 302;\nconst EquirectangularReflectionMapping = 303;\nconst EquirectangularRefractionMapping = 304;\nconst CubeUVReflectionMapping = 306;\nconst CubeUVRefractionMapping = 307;\nconst RepeatWrapping = 1000;\nconst ClampToEdgeWrapping = 1001;\nconst MirroredRepeatWrapping = 1002;\nconst NearestFilter = 1003;\nconst NearestMipmapNearestFilter = 1004;\nconst NearestMipMapNearestFilter = 1004;\nconst NearestMipmapLinearFilter = 1005;\nconst NearestMipMapLinearFilter = 1005;\nconst LinearFilter = 1006;\nconst LinearMipmapNearestFilter = 1007;\nconst LinearMipMapNearestFilter = 1007;\nconst LinearMipmapLinearFilter = 1008;\nconst LinearMipMapLinearFilter = 1008;\nconst UnsignedByteType = 1009;\nconst ByteType = 1010;\nconst ShortType = 1011;\nconst UnsignedShortType = 1012;\nconst IntType = 1013;\nconst UnsignedIntType = 1014;\nconst FloatType = 1015;\nconst HalfFloatType = 1016;\nconst UnsignedShort4444Type = 1017;\nconst UnsignedShort5551Type = 1018;\nconst UnsignedShort565Type = 1019;\nconst UnsignedInt248Type = 1020;\nconst AlphaFormat = 1021;\nconst RGBFormat = 1022;\nconst RGBAFormat = 1023;\nconst LuminanceFormat = 1024;\nconst LuminanceAlphaFormat = 1025;\nconst RGBEFormat = RGBAFormat;\nconst DepthFormat = 1026;\nconst DepthStencilFormat = 1027;\nconst RedFormat = 1028;\nconst RedIntegerFormat = 1029;\nconst RGFormat = 1030;\nconst RGIntegerFormat = 1031;\nconst RGBIntegerFormat = 1032;\nconst RGBAIntegerFormat = 1033;\n\nconst RGB_S3TC_DXT1_Format = 33776;\nconst RGBA_S3TC_DXT1_Format = 33777;\nconst RGBA_S3TC_DXT3_Format = 33778;\nconst RGBA_S3TC_DXT5_Format = 33779;\nconst RGB_PVRTC_4BPPV1_Format = 35840;\nconst RGB_PVRTC_2BPPV1_Format = 35841;\nconst RGBA_PVRTC_4BPPV1_Format = 35842;\nconst RGBA_PVRTC_2BPPV1_Format = 35843;\nconst RGB_ETC1_Format = 36196;\nconst RGB_ETC2_Format = 37492;\nconst RGBA_ETC2_EAC_Format = 37496;\nconst RGBA_ASTC_4x4_Format = 37808;\nconst RGBA_ASTC_5x4_Format = 37809;\nconst RGBA_ASTC_5x5_Format = 37810;\nconst RGBA_ASTC_6x5_Format = 37811;\nconst RGBA_ASTC_6x6_Format = 37812;\nconst RGBA_ASTC_8x5_Format = 37813;\nconst RGBA_ASTC_8x6_Format = 37814;\nconst RGBA_ASTC_8x8_Format = 37815;\nconst RGBA_ASTC_10x5_Format = 37816;\nconst RGBA_ASTC_10x6_Format = 37817;\nconst RGBA_ASTC_10x8_Format = 37818;\nconst RGBA_ASTC_10x10_Format = 37819;\nconst RGBA_ASTC_12x10_Format = 37820;\nconst RGBA_ASTC_12x12_Format = 37821;\nconst RGBA_BPTC_Format = 36492;\nconst SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nconst SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nconst SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nconst SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nconst SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nconst SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nconst SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nconst SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nconst SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nconst SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nconst SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nconst SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nconst SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nconst SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nconst LoopOnce = 2200;\nconst LoopRepeat = 2201;\nconst LoopPingPong = 2202;\nconst InterpolateDiscrete = 2300;\nconst InterpolateLinear = 2301;\nconst InterpolateSmooth = 2302;\nconst ZeroCurvatureEnding = 2400;\nconst ZeroSlopeEnding = 2401;\nconst WrapAroundEnding = 2402;\nconst NormalAnimationBlendMode = 2500;\nconst AdditiveAnimationBlendMode = 2501;\nconst TrianglesDrawMode = 0;\nconst TriangleStripDrawMode = 1;\nconst TriangleFanDrawMode = 2;\nconst LinearEncoding = 3000;\nconst sRGBEncoding = 3001;\nconst GammaEncoding = 3007;\nconst RGBEEncoding = 3002;\nconst LogLuvEncoding = 3003;\nconst RGBM7Encoding = 3004;\nconst RGBM16Encoding = 3005;\nconst RGBDEncoding = 3006;\nconst BasicDepthPacking = 3200;\nconst RGBADepthPacking = 3201;\nconst TangentSpaceNormalMap = 0;\nconst ObjectSpaceNormalMap = 1;\n\nconst ZeroStencilOp = 0;\nconst KeepStencilOp = 7680;\nconst ReplaceStencilOp = 7681;\nconst IncrementStencilOp = 7682;\nconst DecrementStencilOp = 7683;\nconst IncrementWrapStencilOp = 34055;\nconst DecrementWrapStencilOp = 34056;\nconst InvertStencilOp = 5386;\n\nconst NeverStencilFunc = 512;\nconst LessStencilFunc = 513;\nconst EqualStencilFunc = 514;\nconst LessEqualStencilFunc = 515;\nconst GreaterStencilFunc = 516;\nconst NotEqualStencilFunc = 517;\nconst GreaterEqualStencilFunc = 518;\nconst AlwaysStencilFunc = 519;\n\nconst StaticDrawUsage = 35044;\nconst DynamicDrawUsage = 35048;\nconst StreamDrawUsage = 35040;\nconst StaticReadUsage = 35045;\nconst DynamicReadUsage = 35049;\nconst StreamReadUsage = 35041;\nconst StaticCopyUsage = 35046;\nconst DynamicCopyUsage = 35050;\nconst StreamCopyUsage = 35042;\n\n/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tconst listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tconst listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tconst index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tconst listeners = this._listeners;\n\t\tconst listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tconst array = listenerArray.slice( 0 );\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author thezwap\n */\n\nconst _lut = [];\n\nfor ( let i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nconst MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tconst d0 = Math.random() * 0xffffffff | 0;\n\t\tconst d1 = Math.random() * 0xffffffff | 0;\n\t\tconst d2 = Math.random() * 0xffffffff | 0;\n\t\tconst d3 = Math.random() * 0xffffffff | 0;\n\t\tconst uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c2 = cos( b / 2 );\n\t\tconst s2 = sin( b / 2 );\n\n\t\tconst c13 = cos( ( a + c ) / 2 );\n\t\tconst s13 = sin( ( a + c ) / 2 );\n\n\t\tconst c1_3 = cos( ( a - c ) / 2 );\n\t\tconst s1_3 = sin( ( a - c ) / 2 );\n\n\t\tconst c3_1 = cos( ( c - a ) / 2 );\n\t\tconst s3_1 = sin( ( c - a ) / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYX':\n\t\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZY':\n\t\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXZ':\n\t\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZX':\n\t\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXY':\n\t\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYZ':\n\t\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x = 0, y = 0 ) {\n\n\tthis.x = x;\n\tthis.y = y;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tconst x = this.x, y = this.y;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tcross: function ( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tconst angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tconst c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tconst x = this.x - center.x;\n\t\tconst y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t},\n\n\trandom: function () {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tconst me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tconst te = this.elements;\n\n\t\tconst a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\tconst me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tlet tmp;\n\t\tconst m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tconst m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tconst c = Math.cos( rotation );\n\t\tconst s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tconst c = Math.cos( theta );\n\t\tconst s = Math.sin( theta );\n\n\t\tconst te = this.elements;\n\n\t\tconst a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tconst a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nlet _canvas;\n\nconst ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tif ( /^data:/i.test( image.src ) ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t}\n\n\t\tlet canvas;\n\n\t\tif ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tconst context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nlet textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tconst output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tconst image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tlet url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( let i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x = 0, y = 0, z = 0, w = 1 ) {\n\n\tthis.x = x;\n\tthis.y = y;\n\tthis.z = z;\n\tthis.w = w;\n\n}\n\nObject.defineProperties( Vector4.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.z = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.w = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tconst s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tlet angle, x, y, z; // variables for result\n\t\tconst epsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tconst xx = ( m11 + 1 ) / 2;\n\t\t\tconst yy = ( m22 + 1 ) / 2;\n\t\t\tconst zz = ( m33 + 1 ) / 2;\n\t\t\tconst xy = ( m12 + m21 ) / 4;\n\t\t\tconst xz = ( m13 + m31 ) / 4;\n\t\t\tconst yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tlet s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t\t( m13 - m31 ) * ( m13 - m31 ) +\n\t\t\t( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\t\tthis.w = v1.w + ( v2.w - v1.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t},\n\n\trandom: function () {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\t\tthis.w = Math.random();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n * @author Matt DesLauriers / @mattdesl\n */\n\nfunction WebGLMultisampleRenderTarget( width, height, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.samples = 4;\n\n}\n\nWebGLMultisampleRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\n\n\tconstructor: WebGLMultisampleRenderTarget,\n\n\tisWebGLMultisampleRenderTarget: true,\n\n\tcopy: function ( source ) {\n\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\n\n\t\tthis.samples = source.samples;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nfunction Quaternion( x = 0, y = 0, z = 0, w = 1 ) {\n\n\tthis._x = x;\n\tthis._y = y;\n\tthis._z = z;\n\tthis._w = w;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tlet x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tlet s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tconst sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tconst tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tconst f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t},\n\n\tmultiplyQuaternionsFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1 ) {\n\n\t\tconst x0 = src0[ srcOffset0 ];\n\t\tconst y0 = src0[ srcOffset0 + 1 ];\n\t\tconst z0 = src0[ srcOffset0 + 2 ];\n\t\tconst w0 = src0[ srcOffset0 + 3 ];\n\n\t\tconst x1 = src1[ srcOffset1 ];\n\t\tconst y1 = src1[ srcOffset1 + 1 ];\n\t\tconst z1 = src1[ srcOffset1 + 2 ];\n\t\tconst w1 = src1[ srcOffset1 + 3 ];\n\n\t\tdst[ dstOffset ] = x0 * w1 + w0 * x1 + y0 * z1 - z0 * y1;\n\t\tdst[ dstOffset + 1 ] = y0 * w1 + w0 * y1 + z0 * x1 - x0 * z1;\n\t\tdst[ dstOffset + 2 ] = z0 * w1 + w0 * z1 + x0 * y1 - y0 * x1;\n\t\tdst[ dstOffset + 3 ] = w0 * w1 - x0 * x1 - y0 * y1 - z0 * z1;\n\n\t\treturn dst;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tconst cos = Math.cos;\n\t\tconst sin = Math.sin;\n\n\t\tconst c1 = cos( x / 2 );\n\t\tconst c2 = cos( y / 2 );\n\t\tconst c3 = cos( z / 2 );\n\n\t\tconst s1 = sin( x / 2 );\n\t\tconst s2 = sin( y / 2 );\n\t\tconst s3 = sin( z / 2 );\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\t\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\t\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.warn( 'THREE.Quaternion: .setFromEuler() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tconst halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\tconst s = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\tconst s = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tconst EPS = 0.000001;\n\n\t\tlet r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t},\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tconst angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tconst t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tlet l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tconst qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tconst qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tconst x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tlet cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tconst s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tconst halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tconst ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nconst _vector = new Vector3();\nconst _quaternion = new Quaternion();\n\nfunction Vector3( x = 0, y = 0, z = 0 ) {\n\n\tthis.x = x;\n\tthis.y = y;\n\tthis.z = z;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t},\n\n\tapplyAxisAngle: function ( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tconst w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tconst ix = qw * x + qy * z - qz * y;\n\t\tconst iy = qw * y + qz * x - qx * z;\n\t\tconst iz = qw * z + qx * y - qy * x;\n\t\tconst iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tconst x = this.x, y = this.y, z = this.z;\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tconst length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\tthis.x = v1.x + ( v2.x - v1.x ) * alpha;\n\t\tthis.y = v1.y + ( v2.y - v1.y ) * alpha;\n\t\tthis.z = v1.z + ( v2.z - v1.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tconst ax = a.x, ay = a.y, az = a.z;\n\t\tconst bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( v ) {\n\n\t\tconst denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tconst scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function ( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t},\n\n\treflect: function ( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t},\n\n\tangleTo: function ( v ) {\n\n\t\tconst denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tconst theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tconst dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tconst sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tconst e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tconst sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tconst sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tconst sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tsetFromMatrix3Column: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t},\n\n\trandom: function () {\n\n\t\tthis.x = Math.random();\n\t\tthis.y = Math.random();\n\t\tthis.z = Math.random();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nconst _v1 = new Vector3();\nconst _m1 = new Matrix4();\nconst _zero = new Vector3( 0, 0, 0 );\nconst _one = new Vector3( 1, 1, 1 );\nconst _x = new Vector3();\nconst _y = new Vector3();\nconst _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tconst te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tconst te = this.elements;\n\t\tconst me = m.elements;\n\n\t\tconst scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tconst scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tconst scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\n\t\tconst x = euler.x, y = euler.y, z = euler.z;\n\t\tconst a = Math.cos( x ), b = Math.sin( x );\n\t\tconst c = Math.cos( y ), d = Math.sin( y );\n\t\tconst e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tconst ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tconst ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tconst ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tconst te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tconst ae = a.elements;\n\t\tconst be = b.elements;\n\t\tconst te = this.elements;\n\n\t\tconst a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tconst a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tconst a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tconst a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tconst b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tconst b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tconst b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tconst b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tconst te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tconst te = this.elements;\n\n\t\tconst n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tconst n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tconst n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tconst n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tconst te = this.elements;\n\t\tlet tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tconst te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tconst te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tconst det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tconst detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tconst te = this.elements;\n\t\tconst x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tconst te = this.elements;\n\n\t\tconst scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tconst scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tconst scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tconst c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tconst c = Math.cos( angle );\n\t\tconst s = Math.sin( angle );\n\t\tconst t = 1 - c;\n\t\tconst x = axis.x, y = axis.y, z = axis.z;\n\t\tconst tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tconst x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tconst x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tconst xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tconst yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tconst wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tconst sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tconst te = this.elements;\n\n\t\tlet sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tlet sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tlet sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tconst det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tconst invSX = 1 / sx;\n\t\tconst invSY = 1 / sy;\n\t\tconst invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tconst te = this.elements;\n\t\tconst x = 2 * near / ( right - left );\n\t\tconst y = 2 * near / ( top - bottom );\n\n\t\tconst a = ( right + left ) / ( right - left );\n\t\tconst b = ( top + bottom ) / ( top - bottom );\n\t\tconst c = - ( far + near ) / ( far - near );\n\t\tconst d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tconst te = this.elements;\n\t\tconst w = 1.0 / ( right - left );\n\t\tconst h = 1.0 / ( top - bottom );\n\t\tconst p = 1.0 / ( far - near );\n\n\t\tconst x = ( right + left ) * w;\n\t\tconst y = ( top + bottom ) * h;\n\t\tconst z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tconst te = this.elements;\n\t\tconst me = matrix.elements;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( let i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nconst _matrix = new Matrix4();\nconst _quaternion$1 = new Quaternion();\n\nfunction Euler( x = 0, y = 0, z = 0, order = Euler.DefaultOrder ) {\n\n\tthis._x = x;\n\tthis._y = y;\n\tthis._z = z;\n\tthis._order = order;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tconst clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tconst te = m.elements;\n\t\tconst m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tconst m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tconst m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tswitch ( order ) {\n\n\t\t\tcase 'XYZ':\n\n\t\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YXZ':\n\n\t\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\t\tthis._z = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZXY':\n\n\t\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._y = 0;\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'ZYX':\n\n\t\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'YZX':\n\n\t\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = 0;\n\t\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'XZY':\n\n\t\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\t\tthis._y = 0;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() encountered an unknown order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t},\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function ( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion$1.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion$1, newOrder );\n\n\t},\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\tenableAll: function () {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\tdisableAll: function () {\n\n\t\tthis.mask = 0;\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\nlet _object3DId = 0;\n\nconst _v1$1 = new Vector3();\nconst _q1 = new Quaternion();\nconst _m1$1 = new Matrix4();\nconst _target = new Vector3();\n\nconst _position = new Vector3();\nconst _scale = new Vector3();\nconst _quaternion$2 = new Quaternion();\n\nconst _xAxis = new Vector3( 1, 0, 0 );\nconst _yAxis = new Vector3( 0, 1, 0 );\nconst _zAxis = new Vector3( 0, 0, 1 );\n\nconst _addedEvent = { type: 'added' };\nconst _removedEvent = { type: 'removed' };\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tconst position = new Vector3();\n\tconst rotation = new Euler();\n\tconst quaternion = new Quaternion();\n\tconst scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1$1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1$1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1$1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tconst parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1$1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1$1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1$1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1$1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1$1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( let i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1$1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1$1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1$1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( let i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tconst child = this.children[ i ];\n\t\t\tconst object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion$2, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tconst children = this.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tconst parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tconst children = this.children;\n\n\t\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tconst isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tconst output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tconst object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tconst parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tconst shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tconst shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tconst uuids = [];\n\n\t\t\t\tfor ( let i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( let i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tconst geometries = extractFromCache( meta.geometries );\n\t\t\tconst materials = extractFromCache( meta.materials );\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\t\t\tconst shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( let i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tconst child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.environment = null;\n\tthis.fog = null;\n\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tisScene: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nconst _points = [\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3()\n];\n\nconst _vector$1 = new Vector3();\n\nconst _box = new Box3();\n\n// triangle centered vertices\n\nconst _v0 = new Vector3();\nconst _v1$2 = new Vector3();\nconst _v2 = new Vector3();\n\n// triangle edge vectors\n\nconst _f0 = new Vector3();\nconst _f1 = new Vector3();\nconst _f2 = new Vector3();\n\nconst _center = new Vector3();\nconst _extents = new Vector3();\nconst _triangleNormal = new Vector3();\nconst _testAxis = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tconst x = array[ i ];\n\t\t\tconst y = array[ i + 1 ];\n\t\t\tconst z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tlet minX = + Infinity;\n\t\tlet minY = + Infinity;\n\t\tlet minZ = + Infinity;\n\n\t\tlet maxX = - Infinity;\n\t\tlet maxY = - Infinity;\n\t\tlet maxZ = - Infinity;\n\n\t\tfor ( let i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tconst x = attribute.getX( i );\n\t\t\tconst y = attribute.getY( i );\n\t\t\tconst z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tconst halfSize = _vector$1.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function ( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector$1 );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector$1.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tlet min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t},\n\n\tintersectsTriangle: function ( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1$2.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1$2, _v0 );\n\t\t_f1.subVectors( _v2, _v1$2 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tlet axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1$2, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1$2, _v2, _extents );\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tconst clampedPoint = _vector$1.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tgetBoundingSphere: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector$1 ).length() * 0.5;\n\n\t\treturn target;\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tfor ( let i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tconst r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tconst p0 = v0.dot( _testAxis );\n\t\tconst p1 = v1.dot( _testAxis );\n\t\tconst p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nconst _box$1 = new Box3();\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : - 1;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points, optionalCenter ) {\n\n\t\tconst center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box$1.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tlet maxRadiusSq = 0;\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\treturn ( this.radius < 0 );\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.center.set( 0, 0, 0 );\n\t\tthis.radius = - 1;\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tconst radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tconst deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\t// Empty sphere produces empty bounding box\n\t\t\ttarget.makeEmpty();\n\t\t\treturn target;\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\nconst _vector$2 = new Vector3();\nconst _segCenter = new Vector3();\nconst _segDir = new Vector3();\nconst _diff = new Vector3();\n\nconst _edge1 = new Vector3();\nconst _edge2 = new Vector3();\nconst _normal = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function ( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector$2 ) );\n\n\t\treturn this;\n\n\t},\n\n\tclosestPointToPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tconst directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function ( point ) {\n\n\t\tconst directionDistance = _vector$2.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector$2.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector$2.distanceToSquared( point );\n\n\t},\n\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tconst segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tconst a01 = - this.direction.dot( _segDir );\n\t\tconst b0 = _diff.dot( this.direction );\n\t\tconst b1 = - _diff.dot( _segDir );\n\t\tconst c = _diff.lengthSq();\n\t\tconst det = Math.abs( 1 - a01 * a01 );\n\t\tlet s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tconst invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t},\n\n\tintersectSphere: function ( sphere, target ) {\n\n\t\t_vector$2.subVectors( sphere.center, this.origin );\n\t\tconst tca = _vector$2.dot( this.direction );\n\t\tconst d2 = _vector$2.dot( _vector$2 ) - tca * tca;\n\t\tconst radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tconst thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tconst t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tconst t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, target ) {\n\n\t\tconst t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tconst distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tconst denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, target ) {\n\n\t\tlet tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tconst invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tconst origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn this.intersectBox( box, _vector$2 ) !== null;\n\n\t},\n\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tlet DdN = this.direction.dot( _normal );\n\t\tlet sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tconst DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tconst QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t},\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n */\n\nconst _vector1 = new Vector3();\nconst _vector2 = new Vector3();\nconst _normalMatrix = new Matrix3();\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tisPlane: true,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function ( a, b, c ) {\n\n\t\tconst normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tconst inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function ( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst direction = line.delta( _vector1 );\n\n\t\tconst denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tconst t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t},\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tconst startSign = this.distanceToPoint( line.start );\n\t\tconst endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\n\n\t\tconst normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tconst referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tconst normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _v0$1 = new Vector3();\nconst _v1$3 = new Vector3();\nconst _v2$1 = new Vector3();\nconst _v3 = new Vector3();\n\nconst _vab = new Vector3();\nconst _vac = new Vector3();\nconst _vbc = new Vector3();\nconst _vap = new Vector3();\nconst _vbp = new Vector3();\nconst _vcp = new Vector3();\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function ( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0$1.subVectors( a, b );\n\t\ttarget.cross( _v0$1 );\n\n\t\tconst targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t},\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function ( point, a, b, c, target ) {\n\n\t\t_v0$1.subVectors( c, a );\n\t\t_v1$3.subVectors( b, a );\n\t\t_v2$1.subVectors( point, a );\n\n\t\tconst dot00 = _v0$1.dot( _v0$1 );\n\t\tconst dot01 = _v0$1.dot( _v1$3 );\n\t\tconst dot02 = _v0$1.dot( _v2$1 );\n\t\tconst dot11 = _v1$3.dot( _v1$3 );\n\t\tconst dot12 = _v1$3.dot( _v2$1 );\n\n\t\tconst denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tconst invDenom = 1 / denom;\n\t\tconst u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tconst v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t},\n\n\tcontainsPoint: function ( point, a, b, c ) {\n\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t},\n\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t},\n\n\tisFrontFacing: function ( a, b, c, direction ) {\n\n\t\t_v0$1.subVectors( c, b );\n\t\t_v1$3.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0$1.cross( _v1$3 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\t_v0$1.subVectors( this.c, this.b );\n\t\t_v1$3.subVectors( this.a, this.b );\n\n\t\treturn _v0$1.cross( _v1$3 ).length() * 0.5;\n\n\t},\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tisFrontFacing: function ( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function ( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tconst a = this.a, b = this.b, c = this.c;\n\t\tlet v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tconst d1 = _vab.dot( _vap );\n\t\tconst d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tconst d3 = _vab.dot( _vbp );\n\t\tconst d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tconst vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tconst d5 = _vab.dot( _vcp );\n\t\tconst d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tconst vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tconst va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tconst denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nconst _hslA = { h: 0, s: 0, l: 0 };\nconst _hslB = { h: 0, s: 0, l: 0 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tconst p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tconst q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tlet m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tlet color;\n\t\t\tconst name = m[ 1 ];\n\t\t\tconst components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tconst h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tconst s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tconst l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tconst hex = m[ 1 ];\n\t\t\tconst size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetColorName: function ( style ) {\n\n\t\t// color keywords\n\t\tconst hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tconst safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function ( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function ( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopySRGBToLinear: function ( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToSRGB: function ( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertSRGBToLinear: function () {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToSRGB: function () {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tconst r = this.r, g = this.g, b = this.b;\n\n\t\tconst max = Math.max( r, g, b );\n\t\tconst min = Math.min( r, g, b );\n\n\t\tlet hue, saturation;\n\t\tconst lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tconst delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpHSL: function ( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tconst h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tconst s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tconst l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index ) {\n\n\t\tthis.r = attribute.getX( index );\n\t\tthis.g = attribute.getY( index );\n\t\tthis.b = attribute.getZ( index );\n\n\t\tif ( attribute.normalized === true ) {\n\n\t\t\t// assuming Uint8Array\n\n\t\t\tthis.r /= 255;\n\t\t\tthis.g /= 255;\n\t\t\tthis.b /= 255;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\nColor.NAMES = _colorKeywords;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( let i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( let i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nlet materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function ( /* shaderobject, renderer */ ) {},\n\n\tcustomProgramCacheKey: function () {\n\n\t\treturn this.onBeforeCompile.toString();\n\n\t},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( const key in values ) {\n\n\t\t\tconst newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tconst currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tconst values = [];\n\n\t\t\tfor ( const key in cache ) {\n\n\t\t\t\tconst data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tconst textures = extractFromCache( meta.textures );\n\t\t\tconst images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tconst srcPlanes = source.clippingPlanes;\n\t\tlet dstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tconst n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _vector$3 = new Vector3();\nconst _vector2$1 = new Vector2();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( let i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tlet color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tconst array = this.array;\n\t\tlet offset = 0;\n\n\t\tfor ( let i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tlet vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tif ( this.itemSize === 2 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector2$1.fromBufferAttribute( this, i );\n\t\t\t\t_vector2$1.applyMatrix3( m );\n\n\t\t\t\tthis.setXY( i, _vector2$1.x, _vector2$1.y, );\n\n\t\t\t}\n\n\t\t} else if ( this.itemSize === 3 ) {\n\n\t\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t\t_vector$3.fromBufferAttribute( this, i );\n\t\t\t\t_vector$3.applyMatrix3( m );\n\n\t\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector$3.x = this.getX( i );\n\t\t\t_vector$3.y = this.getY( i );\n\t\t\t_vector$3.z = this.getZ( i );\n\n\t\t\t_vector$3.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector$3.x, _vector$3.y, _vector$3.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectGeometry() {\n\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tconst groups = [];\n\n\t\tlet group, i;\n\t\tlet materialIndex = undefined;\n\n\t\tconst faces = geometry.faces;\n\n\t\tfor ( i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tconst faces = geometry.faces;\n\t\tconst vertices = geometry.vertices;\n\t\tconst faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tconst hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tconst hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tconst morphTargets = geometry.morphTargets;\n\t\tconst morphTargetsLength = morphTargets.length;\n\n\t\tlet morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( let i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tconst morphNormals = geometry.morphNormals;\n\t\tconst morphNormalsLength = morphNormals.length;\n\n\t\tlet morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( let i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tconst skinIndices = geometry.skinIndices;\n\t\tconst skinWeights = geometry.skinWeights;\n\n\t\tconst hasSkinIndices = skinIndices.length === vertices.length;\n\t\tconst hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < faces.length; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tconst color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tconst vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( let j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tconst morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tlet max = array[ 0 ];\n\n\tfor ( let i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nlet _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nconst _m1$2 = new Matrix4();\nconst _obj = new Object3D();\nconst _offset = new Vector3();\nconst _box$2 = new Box3();\nconst _boxMorphTargets = new Box3();\nconst _vector$4 = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tconst normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tconst tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$2.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$2.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$2.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$2.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$2.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$2 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tconst positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tconst colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tconst lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tconst position = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tlet geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tlet direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tconst attribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tconst attribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tconst attribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tconst positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tconst normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tconst colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tconst uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tconst uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( const name in geometry.morphTargets ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( let i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tconst morphTarget = morphTargets[ i ];\n\n\t\t\t\tconst attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tconst skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tconst skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box$2.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.min, _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( this.boundingBox.max, _box$2.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box$2.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tconst position = this.attributes.position;\n\t\tconst morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tconst center = this.boundingSphere.center;\n\n\t\t\t_box$2.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t\t_vector$4.addVectors( _box$2.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box$2.expandByPoint( _vector$4 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box$2.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box$2.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tlet maxRadiusSq = 0;\n\n\t\t\tfor ( let i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector$4.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( let i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tconst morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( let j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector$4.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector$4.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector$4 ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tconst index = this.index;\n\t\tconst positionAttribute = this.getAttribute( 'position' );\n\n\t\tif ( positionAttribute !== undefined ) {\n\n\t\t\tlet normalAttribute = this.getAttribute( 'normal' );\n\n\t\t\tif ( normalAttribute === undefined ) {\n\n\t\t\t\tnormalAttribute = new BufferAttribute( new Float32Array( positionAttribute.count * 3 ), 3 );\n\t\t\t\tthis.setAttribute( 'normal', normalAttribute );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tfor ( let i = 0, il = normalAttribute.count; i < il; i ++ ) {\n\n\t\t\t\t\tnormalAttribute.setXYZ( i, 0, 0, 0 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tconst nA = new Vector3(), nB = new Vector3(), nC = new Vector3();\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tfor ( let i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tconst vA = index.getX( i + 0 );\n\t\t\t\t\tconst vB = index.getX( i + 1 );\n\t\t\t\t\tconst vC = index.getX( i + 2 );\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, vA );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, vB );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnA.fromBufferAttribute( normalAttribute, vA );\n\t\t\t\t\tnB.fromBufferAttribute( normalAttribute, vB );\n\t\t\t\t\tnC.fromBufferAttribute( normalAttribute, vC );\n\n\t\t\t\t\tnA.add( cb );\n\t\t\t\t\tnB.add( cb );\n\t\t\t\t\tnC.add( cb );\n\n\t\t\t\t\tnormalAttribute.setXYZ( vA, nA.x, nA.y, nA.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vB, nB.x, nB.y, nB.z );\n\t\t\t\t\tnormalAttribute.setXYZ( vC, nC.x, nC.y, nC.z );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( let i = 0, il = positionAttribute.count; i < il; i += 3 ) {\n\n\t\t\t\t\tpA.fromBufferAttribute( positionAttribute, i + 0 );\n\t\t\t\t\tpB.fromBufferAttribute( positionAttribute, i + 1 );\n\t\t\t\t\tpC.fromBufferAttribute( positionAttribute, i + 2 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormalAttribute.setXYZ( i + 0, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 1, cb.x, cb.y, cb.z );\n\t\t\t\t\tnormalAttribute.setXYZ( i + 2, cb.x, cb.y, cb.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tnormalAttribute.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tconst attribute1 = attributes[ key ];\n\t\t\tconst attributeArray1 = attribute1.array;\n\n\t\t\tconst attribute2 = geometry.attributes[ key ];\n\t\t\tconst attributeArray2 = attribute2.array;\n\n\t\t\tconst attributeOffset = attribute2.itemSize * offset;\n\t\t\tconst length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( let i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tconst normals = this.attributes.normal;\n\n\t\tfor ( let i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector$4.fromBufferAttribute( normals, i );\n\n\t\t\t_vector$4.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector$4.x, _vector$4.y, _vector$4.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tconst array = attribute.array;\n\t\t\tconst itemSize = attribute.itemSize;\n\t\t\tconst normalized = attribute.normalized;\n\n\t\t\tconst array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tlet index = 0, index2 = 0;\n\n\t\t\tfor ( let i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( let j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize, normalized );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst geometry2 = new BufferGeometry();\n\n\t\tconst indices = this.index.array;\n\t\tconst attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\n\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = this.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst morphArray = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = morphAttribute[ i ];\n\n\t\t\t\tconst newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = this.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tconst index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tconst attributes = this.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tconst morphAttributes = {};\n\t\tlet hasMorphAttributes = false;\n\n\t\tfor ( const key in this.morphAttributes ) {\n\n\t\t\tconst attributeArray = this.morphAttributes[ key ];\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tconst attribute = attributeArray[ i ];\n\n\t\t\t\tconst attributeData = attribute.toJSON( data.data );\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tconst groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tconst boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// used for storing cloned, shared data\n\n\t\tconst data = {};\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tconst index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone( data ) );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tconst attributes = source.attributes;\n\n\t\tfor ( const name in attributes ) {\n\n\t\t\tconst attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone( data ) );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tconst morphAttributes = source.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = [];\n\t\t\tconst morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( let i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone( data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tconst groups = source.groups;\n\n\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tconst group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nconst _inverseMatrix = new Matrix4();\nconst _ray = new Ray();\nconst _sphere = new Sphere();\n\nconst _vA = new Vector3();\nconst _vB = new Vector3();\nconst _vC = new Vector3();\n\nconst _tempA = new Vector3();\nconst _tempB = new Vector3();\nconst _tempC = new Vector3();\n\nconst _morphA = new Vector3();\nconst _morphB = new Vector3();\nconst _morphC = new Vector3();\n\nconst _uvA = new Vector2();\nconst _uvB = new Vector2();\nconst _uvC = new Vector2();\n\nconst _intersectionPoint = new Vector3();\nconst _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst material = this.material;\n\t\tconst matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tlet intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst morphPosition = geometry.morphAttributes.position;\n\t\t\tconst morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tconst uv = geometry.attributes.uv;\n\t\t\tconst uv2 = geometry.attributes.uv2;\n\t\t\tconst groups = geometry.groups;\n\t\t\tconst drawRange = geometry.drawRange;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = index.getX( j );\n\t\t\t\t\t\t\tconst b = index.getX( j + 1 );\n\t\t\t\t\t\t\tconst c = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = index.getX( i );\n\t\t\t\t\t\tconst b = index.getX( i + 1 );\n\t\t\t\t\t\tconst c = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tconst start = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tconst end = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( let j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\tconst a = j;\n\t\t\t\t\t\t\tconst b = j + 1;\n\t\t\t\t\t\t\tconst c = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconst start = Math.max( 0, drawRange.start );\n\t\t\t\t\tconst end = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( let i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\tconst a = i;\n\t\t\t\t\t\tconst b = i + 1;\n\t\t\t\t\t\tconst c = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst isMultiMaterial = Array.isArray( material );\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst faces = geometry.faces;\n\t\t\tlet uvs;\n\n\t\t\tconst faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( let f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = faces[ f ];\n\t\t\t\tconst faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tconst fvA = vertices[ face.a ];\n\t\t\t\tconst fvB = vertices[ face.b ];\n\t\t\t\tconst fvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tconst uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tlet intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tconst distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tconst morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( let i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tconst influence = morphInfluences[ i ];\n\t\t\tconst morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tif ( object.isSkinnedMesh ) {\n\n\t\tobject.boneTransform( a, _vA );\n\t\tobject.boneTransform( b, _vB );\n\t\tobject.boneTransform( c, _vC );\n\n\t}\n\n\tconst intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tconst face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nlet _geometryId = 0; // Geometry uses even numbers as Id\nconst _m1$3 = new Matrix4();\nconst _obj$1 = new Object3D();\nconst _offset$1 = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tconst normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( let j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1$3.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1$3.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1$3.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1$3.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1$3.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1$3 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj$1.lookAt( vector );\n\n\t\t_obj$1.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj$1.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tconst scope = this;\n\n\t\tconst index = geometry.index !== null ? geometry.index : undefined;\n\t\tconst attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tconst position = attributes.position;\n\t\tconst normal = attributes.normal;\n\t\tconst color = attributes.color;\n\t\tconst uv = attributes.uv;\n\t\tconst uv2 = attributes.uv2;\n\n\t\tif ( uv2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( let i = 0; i < position.count; i ++ ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromBufferAttribute( position, i ) );\n\n\t\t\tif ( color !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromBufferAttribute( color, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tconst vertexColors = ( color === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone()\n\t\t\t];\n\n\t\t\tconst vertexNormals = ( normal === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, a ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, b ),\n\t\t\t\tnew Vector3().fromBufferAttribute( normal, c )\n\t\t\t];\n\n\t\t\tconst face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uv !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uv2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, a ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, b ),\n\t\t\t\t\tnew Vector2().fromBufferAttribute( uv2, c )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( let i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( index !== undefined ) {\n\n\t\t\t\t\t\taddFace( index.getX( j ), index.getX( j + 1 ), index.getX( j + 2 ), group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tfor ( let i = 0; i < index.count; i += 3 ) {\n\n\t\t\t\t\taddFace( index.getX( i ), index.getX( i + 1 ), index.getX( i + 2 ) );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0; i < position.count; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset$1 ).negate();\n\n\t\tthis.translate( _offset$1.x, _offset$1.y, _offset$1.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tconst center = this.boundingSphere.center;\n\t\tconst radius = this.boundingSphere.radius;\n\n\t\tconst s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tconst matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tconst vertices = new Array( this.vertices.length );\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tconst cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst vA = this.vertices[ face.a ];\n\t\t\t\tconst vB = this.vertices[ face.b ];\n\t\t\t\tconst vC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( let i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tconst tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( let i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tconst dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tconst dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tconst faceNormal = new Vector3();\n\t\t\t\t\tconst vertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tconst face = this.faces[ f ];\n\n\t\t\t\tconst faceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tconst vertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( let f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tconst face = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( let i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tconst vertex = vertices2[ i ];\n\n\t\t\tconst vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( let i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( let i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tlet face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( let j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( let i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tconst verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tconst unique = [], changes = [];\n\n\t\tconst precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tconst precision = Math.pow( 10, precisionPoints );\n\n\t\tfor ( let i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tconst v = this.vertices[ i ];\n\t\t\tconst key = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tconst faceIndicesToRemove = [];\n\n\t\tfor ( let i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tconst indices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( let n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tconst idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( let j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tconst diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tconst faces = this.faces;\n\t\tconst length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tconst uvs1 = this.faceVertexUvs[ 0 ];\n\t\tconst uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tlet newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tconst parameters = this.parameters;\n\n\t\t\tfor ( const key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tconst vertices = [];\n\n\t\tfor ( let i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tconst vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tconst faces = [];\n\t\tconst normals = [];\n\t\tconst normalsHash = {};\n\t\tconst colors = [];\n\t\tconst colorsHash = {};\n\t\tconst uvs = [];\n\t\tconst uvsHash = {};\n\n\t\tfor ( let i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tconst face = this.faces[ i ];\n\n\t\t\tconst hasMaterial = true;\n\t\t\tconst hasFaceUv = false; // deprecated\n\t\t\tconst hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tconst hasFaceNormal = face.normal.length() > 0;\n\t\t\tconst hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tconst hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tconst hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tlet faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tconst faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tconst vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tconst vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tconst hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tconst hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tconst hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t const parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t const values = [];\n\n\t\t for ( const key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t const geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tconst vertices = source.vertices;\n\n\t\tfor ( let i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tconst colors = source.colors;\n\n\t\tfor ( let i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tconst faces = source.faces;\n\n\t\tfor ( let i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( let i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tconst faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tconst uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( let k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tconst uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphTargets = source.morphTargets;\n\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tconst morphNormals = source.morphNormals;\n\n\t\tfor ( let i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tconst morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tconst destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( let j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tconst skinWeights = source.skinWeights;\n\n\t\tfor ( let i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tconst skinIndices = source.skinIndices;\n\n\t\tfor ( let i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tconst lineDistances = source.lineDistances;\n\n\t\tfor ( let i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tconst boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tconst boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tconst scope = this;\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\t\tdepth = depth || 1;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments ) || 1;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\t\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t\t// buffers\n\n\t\tconst indices = [];\n\t\tconst vertices = [];\n\t\tconst normals = [];\n\t\tconst uvs = [];\n\n\t\t// helper variables\n\n\t\tlet numberOfVertices = 0;\n\t\tlet groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tconst segmentWidth = width / gridX;\n\t\t\tconst segmentHeight = height / gridY;\n\n\t\t\tconst widthHalf = width / 2;\n\t\t\tconst heightHalf = height / 2;\n\t\t\tconst depthHalf = depth / 2;\n\n\t\t\tconst gridX1 = gridX + 1;\n\t\t\tconst gridY1 = gridY + 1;\n\n\t\t\tlet vertexCounter = 0;\n\t\t\tlet groupCount = 0;\n\n\t\t\tconst vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tconst y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tconst x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tconst a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tconst b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tconst d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * Uniform Utilities\n */\n\nfunction cloneUniforms( src ) {\n\n\tconst dst = {};\n\n\tfor ( const u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( const p in src[ u ] ) {\n\n\t\t\tconst property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nfunction mergeUniforms( uniforms ) {\n\n\tconst merged = {};\n\n\tfor ( let u = 0; u < uniforms.length; u ++ ) {\n\n\t\tconst tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( const p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nconst UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nvar default_vertex = \"void main() {\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n}\";\n\nvar default_fragment = \"void main() {\\n\\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\\n}\";\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = Object.assign( {}, source.extensions );\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tconst data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = {};\n\n\tfor ( const name in this.uniforms ) {\n\n\t\tconst uniform = this.uniforms[ name ];\n\t\tconst value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tconst extensions = {};\n\n\tfor ( const key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tconst e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tconst vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tconst vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   const w = 1920;\n\t *   const h = 1080;\n\t *   const fullWidth = w * 3;\n\t *   const fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tlet near = this.near,\n\t\t\ttop = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tconst skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * Camera for rendering cube maps\n *\t- renders scene into axis-aligned cube\n *\n * @author alteredq / http://alteredqualia.com/\n */\n\nconst fov = 90, aspect = 1;\n\nfunction CubeCamera( near, far, renderTarget ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'CubeCamera';\n\n\tif ( renderTarget.isWebGLCubeRenderTarget !== true ) {\n\n\t\tconsole.error( 'THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.' );\n\t\treturn;\n\n\t}\n\n\tthis.renderTarget = renderTarget;\n\n\tconst cameraPX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPX.layers = this.layers;\n\tcameraPX.up.set( 0, - 1, 0 );\n\tcameraPX.lookAt( new Vector3( 1, 0, 0 ) );\n\tthis.add( cameraPX );\n\n\tconst cameraNX = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNX.layers = this.layers;\n\tcameraNX.up.set( 0, - 1, 0 );\n\tcameraNX.lookAt( new Vector3( - 1, 0, 0 ) );\n\tthis.add( cameraNX );\n\n\tconst cameraPY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPY.layers = this.layers;\n\tcameraPY.up.set( 0, 0, 1 );\n\tcameraPY.lookAt( new Vector3( 0, 1, 0 ) );\n\tthis.add( cameraPY );\n\n\tconst cameraNY = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNY.layers = this.layers;\n\tcameraNY.up.set( 0, 0, - 1 );\n\tcameraNY.lookAt( new Vector3( 0, - 1, 0 ) );\n\tthis.add( cameraNY );\n\n\tconst cameraPZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraPZ.layers = this.layers;\n\tcameraPZ.up.set( 0, - 1, 0 );\n\tcameraPZ.lookAt( new Vector3( 0, 0, 1 ) );\n\tthis.add( cameraPZ );\n\n\tconst cameraNZ = new PerspectiveCamera( fov, aspect, near, far );\n\tcameraNZ.layers = this.layers;\n\tcameraNZ.up.set( 0, - 1, 0 );\n\tcameraNZ.lookAt( new Vector3( 0, 0, - 1 ) );\n\tthis.add( cameraNZ );\n\n\tthis.update = function ( renderer, scene ) {\n\n\t\tif ( this.parent === null ) this.updateMatrixWorld();\n\n\t\tconst currentXrEnabled = renderer.xr.enabled;\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\trenderer.xr.enabled = false;\n\n\t\tconst generateMipmaps = renderTarget.texture.generateMipmaps;\n\n\t\trenderTarget.texture.generateMipmaps = false;\n\n\t\trenderer.setRenderTarget( renderTarget, 0 );\n\t\trenderer.render( scene, cameraPX );\n\n\t\trenderer.setRenderTarget( renderTarget, 1 );\n\t\trenderer.render( scene, cameraNX );\n\n\t\trenderer.setRenderTarget( renderTarget, 2 );\n\t\trenderer.render( scene, cameraPY );\n\n\t\trenderer.setRenderTarget( renderTarget, 3 );\n\t\trenderer.render( scene, cameraNY );\n\n\t\trenderer.setRenderTarget( renderTarget, 4 );\n\t\trenderer.render( scene, cameraPZ );\n\n\t\trenderTarget.texture.generateMipmaps = generateMipmaps;\n\n\t\trenderer.setRenderTarget( renderTarget, 5 );\n\t\trenderer.render( scene, cameraNZ );\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\trenderer.xr.enabled = currentXrEnabled;\n\n\t};\n\n\tthis.clear = function ( renderer, color, depth, stencil ) {\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\trenderer.setRenderTarget( renderTarget, i );\n\n\t\t\trenderer.clear( color, depth, stencil );\n\n\t\t}\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t};\n\n}\n\nCubeCamera.prototype = Object.create( Object3D.prototype );\nCubeCamera.prototype.constructor = CubeCamera;\n\n/**\n * @author alteredq / http://alteredqualia.com\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction WebGLCubeRenderTarget( size, options, dummy ) {\n\n\tif ( Number.isInteger( options ) ) {\n\n\t\tconsole.warn( 'THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )' );\n\n\t\toptions = dummy;\n\n\t}\n\n\tWebGLRenderTarget.call( this, size, size, options );\n\n}\n\nWebGLCubeRenderTarget.prototype = Object.create( WebGLRenderTarget.prototype );\nWebGLCubeRenderTarget.prototype.constructor = WebGLCubeRenderTarget;\n\nWebGLCubeRenderTarget.prototype.isWebGLCubeRenderTarget = true;\n\nWebGLCubeRenderTarget.prototype.fromEquirectangularTexture = function ( renderer, texture ) {\n\n\tthis.texture.type = texture.type;\n\tthis.texture.format = texture.format;\n\tthis.texture.encoding = texture.encoding;\n\n\tconst scene = new Scene();\n\n\tconst shader = {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: [\n\n\t\t\t\"varying vec3 vWorldDirection;\",\n\n\t\t\t\"vec3 transformDirection( in vec3 dir, in mat4 matrix ) {\",\n\n\t\t\t\"\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\",\n\n\t\t\t\"}\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvWorldDirection = transformDirection( position, modelMatrix );\",\n\n\t\t\t\"\t#include <begin_vertex>\",\n\t\t\t\"\t#include <project_vertex>\",\n\n\t\t\t\"}\"\n\n\t\t].join( '\\n' ),\n\n\t\tfragmentShader: [\n\n\t\t\t\"uniform sampler2D tEquirect;\",\n\n\t\t\t\"varying vec3 vWorldDirection;\",\n\n\t\t\t\"#include <common>\",\n\n\t\t\t\"void main() {\",\n\n\t\t\t\"\tvec3 direction = normalize( vWorldDirection );\",\n\n\t\t\t\"\tvec2 sampleUV = equirectUv( direction );\",\n\n\t\t\t\"\tgl_FragColor = texture2D( tEquirect, sampleUV );\",\n\n\t\t\t\"}\"\n\n\t\t].join( '\\n' ),\n\t};\n\n\tconst material = new ShaderMaterial( {\n\n\t\tname: 'CubemapFromEquirect',\n\n\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader,\n\t\tside: BackSide,\n\t\tblending: NoBlending\n\n\t} );\n\n\tmaterial.uniforms.tEquirect.value = texture;\n\n\tconst mesh = new Mesh( new BoxBufferGeometry( 5, 5, 5 ), material );\n\n\tscene.add( mesh );\n\n\tconst camera = new CubeCamera( 1, 10, this );\n\tcamera.update( renderer, scene );\n\n\tmesh.geometry.dispose();\n\tmesh.material.dispose();\n\n\treturn this;\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nconst _sphere$1 = new Sphere();\nconst _vector$5 = new Vector3();\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tconst planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromProjectionMatrix: function ( m ) {\n\n\t\tconst planes = this.planes;\n\t\tconst me = m.elements;\n\t\tconst me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tconst me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tconst me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tconst me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function ( object ) {\n\n\t\tconst geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$1.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t},\n\n\tintersectsSprite: function ( sprite ) {\n\n\t\t_sphere$1.center.set( 0, 0, 0 );\n\t\t_sphere$1.radius = 0.7071067811865476;\n\t\t_sphere$1.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere$1 );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tconst planes = this.planes;\n\t\tconst center = sphere.center;\n\t\tconst negRadius = - sphere.radius;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector$5.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector$5.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector$5.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector$5 ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tconst planes = this.planes;\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nconst UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowNormalBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAnimation() {\n\n\tlet context = null;\n\tlet isAnimating = false;\n\tlet animationLoop = null;\n\tlet requestId = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tanimationLoop( time, frame );\n\n\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\trequestId = context.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tcontext.cancelAnimationFrame( requestId );\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tconst buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst usage = attribute.usage;\n\n\t\tconst buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tlet type = 5126;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = 5126;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = 5123;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = 5122;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = 5125;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = 5124;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = 5120;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = 5121;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tconst array = attribute.array;\n\t\tconst updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tconst data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tconst width_half = width / 2;\n\tconst height_half = height / 2;\n\n\tconst gridX = Math.floor( widthSegments ) || 1;\n\tconst gridY = Math.floor( heightSegments ) || 1;\n\n\tconst gridX1 = gridX + 1;\n\tconst gridY1 = gridY + 1;\n\n\tconst segment_width = width / gridX;\n\tconst segment_height = height / gridY;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( let iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tconst y = iy * segment_height - height_half;\n\n\t\tfor ( let ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tconst x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( let iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( let ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tconst a = ix + gridX1 * iy;\n\t\t\tconst b = ix + gridX1 * ( iy + 1 );\n\t\t\tconst c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tconst d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\nvar alphamap_fragment = \"#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\\n#endif\";\n\nvar alphamap_pars_fragment = \"#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar alphatest_fragment = \"#ifdef ALPHATEST\\n\\tif ( diffuseColor.a < ALPHATEST ) discard;\\n#endif\";\n\nvar aomap_fragment = \"#ifdef USE_AOMAP\\n\\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\\n\\treflectedLight.indirectDiffuse *= ambientOcclusion;\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD )\\n\\t\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\\n\\t#endif\\n#endif\";\n\nvar aomap_pars_fragment = \"#ifdef USE_AOMAP\\n\\tuniform sampler2D aoMap;\\n\\tuniform float aoMapIntensity;\\n#endif\";\n\nvar begin_vertex = \"vec3 transformed = vec3( position );\";\n\nvar beginnormal_vertex = \"vec3 objectNormal = vec3( normal );\\n#ifdef USE_TANGENT\\n\\tvec3 objectTangent = vec3( tangent.xyz );\\n#endif\";\n\nvar bsdfs = \"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\\n\\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\\n\\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\\n\\tvec4 r = roughness * c0 + c1;\\n\\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\\n\\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\\n}\\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\\n\\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\\n\\tif( cutoffDistance > 0.0 ) {\\n\\t\\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\\n\\t}\\n\\treturn distanceFalloff;\\n#else\\n\\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\\n\\t\\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\\n\\t}\\n\\treturn 1.0;\\n#endif\\n}\\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\\n\\treturn RECIPROCAL_PI * diffuseColor;\\n}\\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\\n\\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\\n}\\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\\n\\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\\n\\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\\n\\treturn Fr * fresnel + F0;\\n}\\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\treturn 1.0 / ( gl * gv );\\n}\\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\\n\\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\\n\\treturn 0.5 / max( gv + gl, EPSILON );\\n}\\nfloat D_GGX( const in float alpha, const in float dotNH ) {\\n\\tfloat a2 = pow2( alpha );\\n\\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\\n\\treturn RECIPROCAL_PI * a2 / pow2( denom );\\n}\\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat alpha = pow2( roughness );\\n\\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\\n\\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tfloat dotNH = saturate( dot( normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\\n\\tfloat D = D_GGX( alpha, dotNH );\\n\\treturn F * ( G * D );\\n}\\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\\n\\tconst float LUT_SIZE  = 64.0;\\n\\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\\n\\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\\n\\tfloat dotNV = saturate( dot( N, V ) );\\n\\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\\n\\tuv = uv * LUT_SCALE + LUT_BIAS;\\n\\treturn uv;\\n}\\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\\n\\tfloat l = length( f );\\n\\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\\n}\\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\\n\\tfloat x = dot( v1, v2 );\\n\\tfloat y = abs( x );\\n\\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\\n\\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\\n\\tfloat v = a / b;\\n\\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\\n\\treturn cross( v1, v2 ) * theta_sintheta;\\n}\\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\\n\\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\\n\\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\\n\\tvec3 lightNormal = cross( v1, v2 );\\n\\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\\n\\tvec3 T1, T2;\\n\\tT1 = normalize( V - N * dot( V, N ) );\\n\\tT2 = - cross( N, T1 );\\n\\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\\n\\tvec3 coords[ 4 ];\\n\\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\\n\\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\\n\\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\\n\\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\\n\\tcoords[ 0 ] = normalize( coords[ 0 ] );\\n\\tcoords[ 1 ] = normalize( coords[ 1 ] );\\n\\tcoords[ 2 ] = normalize( coords[ 2 ] );\\n\\tcoords[ 3 ] = normalize( coords[ 3 ] );\\n\\tvec3 vectorFormFactor = vec3( 0.0 );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\\n\\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\\n\\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\\n\\treturn vec3( result );\\n}\\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\\n\\tfloat dotNV = saturate( dot( normal, viewDir ) );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\treturn specularColor * brdf.x + brdf.y;\\n}\\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\\n\\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\\n\\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\\n\\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\\n\\tvec3 FssEss = F * brdf.x + brdf.y;\\n\\tfloat Ess = brdf.x + brdf.y;\\n\\tfloat Ems = 1.0 - Ess;\\n\\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\\n\\tsingleScatter += FssEss;\\n\\tmultiScatter += Fms * Ems;\\n}\\nfloat G_BlinnPhong_Implicit( ) {\\n\\treturn 0.25;\\n}\\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\\n\\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\\n}\\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\\n\\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\\n\\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\\n\\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\\n\\tvec3 F = F_Schlick( specularColor, dotLH );\\n\\tfloat G = G_BlinnPhong_Implicit( );\\n\\tfloat D = D_BlinnPhong( shininess, dotNH );\\n\\treturn F * ( G * D );\\n}\\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\\n\\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\\n}\\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\\n\\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\\n}\\n#if defined( USE_SHEEN )\\nfloat D_Charlie(float roughness, float NoH) {\\n\\tfloat invAlpha  = 1.0 / roughness;\\n\\tfloat cos2h = NoH * NoH;\\n\\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\\n}\\nfloat V_Neubelt(float NoV, float NoL) {\\n\\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\\n}\\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\\n\\tvec3 N = geometry.normal;\\n\\tvec3 V = geometry.viewDir;\\n\\tvec3 H = normalize( V + L );\\n\\tfloat dotNH = saturate( dot( N, H ) );\\n\\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\\n}\\n#endif\";\n\nvar bumpmap_pars_fragment = \"#ifdef USE_BUMPMAP\\n\\tuniform sampler2D bumpMap;\\n\\tuniform float bumpScale;\\n\\tvec2 dHdxy_fwd() {\\n\\t\\tvec2 dSTdx = dFdx( vUv );\\n\\t\\tvec2 dSTdy = dFdy( vUv );\\n\\t\\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\\n\\t\\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\\n\\t\\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\\n\\t\\treturn vec2( dBx, dBy );\\n\\t}\\n\\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\\n\\t\\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\\n\\t\\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\\n\\t\\tvec3 vN = surf_norm;\\n\\t\\tvec3 R1 = cross( vSigmaY, vN );\\n\\t\\tvec3 R2 = cross( vN, vSigmaX );\\n\\t\\tfloat fDet = dot( vSigmaX, R1 );\\n\\t\\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\\n\\t\\treturn normalize( abs( fDet ) * surf_norm - vGrad );\\n\\t}\\n#endif\";\n\nvar clipping_planes_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvec4 plane;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\\n\\t\\tplane = clippingPlanes[ i ];\\n\\t\\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\\n\\t\\tbool clipped = true;\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\\n\\t\\t\\tplane = clippingPlanes[ i ];\\n\\t\\t\\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t\\tif ( clipped ) discard;\\n\\t#endif\\n#endif\";\n\nvar clipping_planes_pars_fragment = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n\\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\\n#endif\";\n\nvar clipping_planes_pars_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvarying vec3 vClipPosition;\\n#endif\";\n\nvar clipping_planes_vertex = \"#if NUM_CLIPPING_PLANES > 0\\n\\tvClipPosition = - mvPosition.xyz;\\n#endif\";\n\nvar color_fragment = \"#ifdef USE_COLOR\\n\\tdiffuseColor.rgb *= vColor;\\n#endif\";\n\nvar color_pars_fragment = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_pars_vertex = \"#ifdef USE_COLOR\\n\\tvarying vec3 vColor;\\n#endif\";\n\nvar color_vertex = \"#ifdef USE_COLOR\\n\\tvColor.xyz = color.xyz;\\n#endif\";\n\nvar common = \"#define PI 3.141592653589793\\n#define PI2 6.283185307179586\\n#define PI_HALF 1.5707963267948966\\n#define RECIPROCAL_PI 0.3183098861837907\\n#define RECIPROCAL_PI2 0.15915494309189535\\n#define EPSILON 1e-6\\n#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\\nfloat pow2( const in float x ) { return x*x; }\\nfloat pow3( const in float x ) { return x*x*x; }\\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\\nhighp float rand( const in vec2 uv ) {\\n\\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\\n\\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\\n\\treturn fract(sin(sn) * c);\\n}\\n#ifdef HIGH_PRECISION\\n\\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\\n#else\\n\\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\\n\\tfloat precisionSafeLength( vec3 v ) {\\n\\t\\tfloat maxComponent = max3( abs( v ) );\\n\\t\\treturn length( v / maxComponent ) * maxComponent;\\n\\t}\\n#endif\\nstruct IncidentLight {\\n\\tvec3 color;\\n\\tvec3 direction;\\n\\tbool visible;\\n};\\nstruct ReflectedLight {\\n\\tvec3 directDiffuse;\\n\\tvec3 directSpecular;\\n\\tvec3 indirectDiffuse;\\n\\tvec3 indirectSpecular;\\n};\\nstruct GeometricContext {\\n\\tvec3 position;\\n\\tvec3 normal;\\n\\tvec3 viewDir;\\n#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal;\\n#endif\\n};\\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\\n}\\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\\n\\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\\n}\\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\tfloat distance = dot( planeNormal, point - pointOnPlane );\\n\\treturn - distance * planeNormal + point;\\n}\\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn sign( dot( point - pointOnPlane, planeNormal ) );\\n}\\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\\n\\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\\n}\\nmat3 transposeMat3( const in mat3 m ) {\\n\\tmat3 tmp;\\n\\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\\n\\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\\n\\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\\n\\treturn tmp;\\n}\\nfloat linearToRelativeLuminance( const in vec3 color ) {\\n\\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\\n\\treturn dot( weights, color.rgb );\\n}\\nbool isPerspectiveMatrix( mat4 m ) {\\n  return m[ 2 ][ 3 ] == - 1.0;\\n}\\nvec2 equirectUv( in vec3 dir ) {\\n\\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\\n\\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\\n\\treturn vec2( u, v );\\n}\";\n\nvar cube_uv_reflection_fragment = \"#ifdef ENVMAP_TYPE_CUBE_UV\\n#define cubeUV_maxMipLevel 8.0\\n#define cubeUV_minMipLevel 4.0\\n#define cubeUV_maxTileSize 256.0\\n#define cubeUV_minTileSize 16.0\\nfloat getFace(vec3 direction) {\\n    vec3 absDirection = abs(direction);\\n    float face = -1.0;\\n    if (absDirection.x > absDirection.z) {\\n      if (absDirection.x > absDirection.y)\\n        face = direction.x > 0.0 ? 0.0 : 3.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    } else {\\n      if (absDirection.z > absDirection.y)\\n        face = direction.z > 0.0 ? 2.0 : 5.0;\\n      else\\n        face = direction.y > 0.0 ? 1.0 : 4.0;\\n    }\\n    return face;\\n}\\nvec2 getUV(vec3 direction, float face) {\\n    vec2 uv;\\n    if (face == 0.0) {\\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\\n    return 0.5 * (uv + 1.0);\\n}\\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\\n  float face = getFace(direction);\\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\\n  mipInt = max(mipInt, cubeUV_minMipLevel);\\n  float faceSize = exp2(mipInt);\\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\\n  vec2 f = fract(uv);\\n  uv += 0.5 - f;\\n  if (face > 2.0) {\\n    uv.y += faceSize;\\n    face -= 3.0;\\n  }\\n  uv.x += face * faceSize;\\n  if(mipInt < cubeUV_maxMipLevel){\\n    uv.y += 2.0 * cubeUV_maxTileSize;\\n  }\\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\\n  uv *= texelSize;\\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x += texelSize;\\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.y += texelSize;\\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  uv.x -= texelSize;\\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\\n  vec3 tm = mix(tl, tr, f.x);\\n  vec3 bm = mix(bl, br, f.x);\\n  return mix(tm, bm, f.y);\\n}\\n#define r0 1.0\\n#define v0 0.339\\n#define m0 -2.0\\n#define r1 0.8\\n#define v1 0.276\\n#define m1 -1.0\\n#define r4 0.4\\n#define v4 0.046\\n#define m4 2.0\\n#define r5 0.305\\n#define v5 0.016\\n#define m5 3.0\\n#define r6 0.21\\n#define v6 0.0038\\n#define m6 4.0\\nfloat roughnessToMip(float roughness) {\\n  float mip = 0.0;\\n  if (roughness >= r1) {\\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\\n  } else if (roughness >= r4) {\\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\\n  } else if (roughness >= r5) {\\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\\n  } else if (roughness >= r6) {\\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\\n  } else {\\n    mip = -2.0 * log2(1.16 * roughness);  }\\n  return mip;\\n}\\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\\n  float mipF = fract(mip);\\n  float mipInt = floor(mip);\\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\\n  if (mipF == 0.0) {\\n    return vec4(color0, 1.0);\\n  } else {\\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\\n    return vec4(mix(color0, color1, mipF), 1.0);\\n  }\\n}\\n#endif\";\n\nvar defaultnormal_vertex = \"vec3 transformedNormal = objectNormal;\\n#ifdef USE_INSTANCING\\n\\tmat3 m = mat3( instanceMatrix );\\n\\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\\n\\ttransformedNormal = m * transformedNormal;\\n#endif\\ntransformedNormal = normalMatrix * transformedNormal;\\n#ifdef FLIP_SIDED\\n\\ttransformedNormal = - transformedNormal;\\n#endif\\n#ifdef USE_TANGENT\\n\\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#ifdef FLIP_SIDED\\n\\t\\ttransformedTangent = - transformedTangent;\\n\\t#endif\\n#endif\";\n\nvar displacementmap_pars_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\tuniform sampler2D displacementMap;\\n\\tuniform float displacementScale;\\n\\tuniform float displacementBias;\\n#endif\";\n\nvar displacementmap_vertex = \"#ifdef USE_DISPLACEMENTMAP\\n\\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\\n#endif\";\n\nvar emissivemap_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\\n\\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\\n\\ttotalEmissiveRadiance *= emissiveColor.rgb;\\n#endif\";\n\nvar emissivemap_pars_fragment = \"#ifdef USE_EMISSIVEMAP\\n\\tuniform sampler2D emissiveMap;\\n#endif\";\n\nvar encodings_fragment = \"gl_FragColor = linearToOutputTexel( gl_FragColor );\";\n\nvar encodings_pars_fragment = \"\\nvec4 LinearToLinear( in vec4 value ) {\\n\\treturn value;\\n}\\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\\n}\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n\\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\nvec4 sRGBToLinear( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\\n}\\nvec4 LinearTosRGB( in vec4 value ) {\\n\\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\\n}\\nvec4 RGBEToLinear( in vec4 value ) {\\n\\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\\n}\\nvec4 LinearToRGBE( in vec4 value ) {\\n\\tfloat maxComponent = max( max( value.r, value.g ), value.b );\\n\\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\\n\\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\\n}\\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\\n}\\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\\n\\tM = ceil( M * 255.0 ) / 255.0;\\n\\treturn vec4( value.rgb / ( M * maxRange ), M );\\n}\\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\\n\\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\\n}\\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\\n\\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\\n\\tfloat D = max( maxRange / maxRGB, 1.0 );\\n\\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\\n\\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\\n}\\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\\nvec4 LinearToLogLuv( in vec4 value )  {\\n\\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\\n\\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\\n\\tvec4 vResult;\\n\\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\\n\\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\\n\\tvResult.w = fract( Le );\\n\\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\\n\\treturn vResult;\\n}\\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\\nvec4 LogLuvToLinear( in vec4 value ) {\\n\\tfloat Le = value.z * 255.0 + value.w;\\n\\tvec3 Xp_Y_XYZp;\\n\\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\\n\\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\\n\\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\\n\\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\\n\\treturn vec4( max( vRGB, 0.0 ), 1.0 );\\n}\";\n\nvar envmap_fragment = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvec3 cameraToFrag;\\n\\t\\t\\n\\t\\tif ( isOrthographic ) {\\n\\t\\t\\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t}  else {\\n\\t\\t\\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#else\\n\\t\\tvec3 reflectVec = vReflect;\\n\\t#endif\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\\n\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\\n\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\treflectVec = normalize( reflectVec );\\n\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\tvec4 envColor = texture2D( envMap, sampleUV );\\n\\t#else\\n\\t\\tvec4 envColor = vec4( 0.0 );\\n\\t#endif\\n\\t#ifndef ENVMAP_TYPE_CUBE_UV\\n\\t\\tenvColor = envMapTexelToLinear( envColor );\\n\\t#endif\\n\\t#ifdef ENVMAP_BLENDING_MULTIPLY\\n\\t\\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_MIX )\\n\\t\\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\\n\\t#elif defined( ENVMAP_BLENDING_ADD )\\n\\t\\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\\n\\t#endif\\n#endif\";\n\nvar envmap_common_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float envMapIntensity;\\n\\tuniform float flipEnvMap;\\n\\tuniform int maxMipLevel;\\n\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\tuniform samplerCube envMap;\\n\\t#else\\n\\t\\tuniform sampler2D envMap;\\n\\t#endif\\n\\t\\n#endif\";\n\nvar envmap_pars_fragment = \"#ifdef USE_ENVMAP\\n\\tuniform float reflectivity;\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t\\tuniform float refractionRatio;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t#endif\\n#endif\";\n\nvar envmap_pars_vertex = \"#ifdef USE_ENVMAP\\n\\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\\n\\t\\t#define ENV_WORLDPOS\\n\\t#endif\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\t\\n\\t\\tvarying vec3 vWorldPosition;\\n\\t#else\\n\\t\\tvarying vec3 vReflect;\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n#endif\";\n\nvar envmap_vertex = \"#ifdef USE_ENVMAP\\n\\t#ifdef ENV_WORLDPOS\\n\\t\\tvWorldPosition = worldPosition.xyz;\\n\\t#else\\n\\t\\tvec3 cameraToVertex;\\n\\t\\tif ( isOrthographic ) { \\n\\t\\t\\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\\n\\t\\t} else {\\n\\t\\t\\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\\n\\t\\t}\\n\\t\\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t\\tvReflect = reflect( cameraToVertex, worldNormal );\\n\\t\\t#else\\n\\t\\t\\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\\n\\t\\t#endif\\n\\t#endif\\n#endif\";\n\nvar fog_vertex = \"#ifdef USE_FOG\\n\\tfogDepth = -mvPosition.z;\\n#endif\";\n\nvar fog_pars_vertex = \"#ifdef USE_FOG\\n\\tvarying float fogDepth;\\n#endif\";\n\nvar fog_fragment = \"#ifdef USE_FOG\\n\\t#ifdef FOG_EXP2\\n\\t\\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n\\t#else\\n\\t\\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n\\t#endif\\n\\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\\n#endif\";\n\nvar fog_pars_fragment = \"#ifdef USE_FOG\\n\\tuniform vec3 fogColor;\\n\\tvarying float fogDepth;\\n\\t#ifdef FOG_EXP2\\n\\t\\tuniform float fogDensity;\\n\\t#else\\n\\t\\tuniform float fogNear;\\n\\t\\tuniform float fogFar;\\n\\t#endif\\n#endif\";\n\nvar gradientmap_pars_fragment = \"#ifdef USE_GRADIENTMAP\\n\\tuniform sampler2D gradientMap;\\n#endif\\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\\n\\tfloat dotNL = dot( normal, lightDirection );\\n\\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\\n\\t#ifdef USE_GRADIENTMAP\\n\\t\\treturn texture2D( gradientMap, coord ).rgb;\\n\\t#else\\n\\t\\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\\n\\t#endif\\n}\";\n\nvar lightmap_fragment = \"#ifdef USE_LIGHTMAP\\n\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n#endif\";\n\nvar lightmap_pars_fragment = \"#ifdef USE_LIGHTMAP\\n\\tuniform sampler2D lightMap;\\n\\tuniform float lightMapIntensity;\\n#endif\";\n\nvar lights_lambert_vertex = \"vec3 diffuse = vec3( 1.0 );\\nGeometricContext geometry;\\ngeometry.position = mvPosition.xyz;\\ngeometry.normal = normalize( transformedNormal );\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\\nGeometricContext backGeometry;\\nbackGeometry.position = geometry.position;\\nbackGeometry.normal = -geometry.normal;\\nbackGeometry.viewDir = geometry.viewDir;\\nvLightFront = vec3( 0.0 );\\nvIndirectFront = vec3( 0.0 );\\n#ifdef DOUBLE_SIDED\\n\\tvLightBack = vec3( 0.0 );\\n\\tvIndirectBack = vec3( 0.0 );\\n#endif\\nIncidentLight directLight;\\nfloat dotNL;\\nvec3 directLightColor_Diffuse;\\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\\n#ifdef DOUBLE_SIDED\\n\\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\\n\\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_DIR_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\\n\\t\\tdotNL = dot( geometry.normal, directLight.direction );\\n\\t\\tdirectLightColor_Diffuse = PI * directLight.color;\\n\\t\\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\\n\\t\\t#endif\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\";\n\nvar lights_pars_begin = \"uniform bool receiveShadow;\\nuniform vec3 ambientLightColor;\\nuniform vec3 lightProbe[ 9 ];\\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\\n\\tfloat x = normal.x, y = normal.y, z = normal.z;\\n\\tvec3 result = shCoefficients[ 0 ] * 0.886227;\\n\\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\\n\\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\\n\\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\\n\\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\\n\\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\\n\\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\\n\\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\\n\\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\\n\\treturn result;\\n}\\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\\n\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\\n\\treturn irradiance;\\n}\\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\\n\\tvec3 irradiance = ambientLightColor;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treturn irradiance;\\n}\\n#if NUM_DIR_LIGHTS > 0\\n\\tstruct DirectionalLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t};\\n\\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\\n\\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tdirectLight.color = directionalLight.color;\\n\\t\\tdirectLight.direction = directionalLight.direction;\\n\\t\\tdirectLight.visible = true;\\n\\t}\\n#endif\\n#if NUM_POINT_LIGHTS > 0\\n\\tstruct PointLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t};\\n\\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\\n\\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\\n\\t\\tvec3 lVector = pointLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tdirectLight.color = pointLight.color;\\n\\t\\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\\n\\t\\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\\n\\t}\\n#endif\\n#if NUM_SPOT_LIGHTS > 0\\n\\tstruct SpotLight {\\n\\t\\tvec3 position;\\n\\t\\tvec3 direction;\\n\\t\\tvec3 color;\\n\\t\\tfloat distance;\\n\\t\\tfloat decay;\\n\\t\\tfloat coneCos;\\n\\t\\tfloat penumbraCos;\\n\\t};\\n\\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\\n\\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\\n\\t\\tvec3 lVector = spotLight.position - geometry.position;\\n\\t\\tdirectLight.direction = normalize( lVector );\\n\\t\\tfloat lightDistance = length( lVector );\\n\\t\\tfloat angleCos = dot( directLight.direction, spotLight.direction );\\n\\t\\tif ( angleCos > spotLight.coneCos ) {\\n\\t\\t\\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\\n\\t\\t\\tdirectLight.color = spotLight.color;\\n\\t\\t\\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\\n\\t\\t\\tdirectLight.visible = true;\\n\\t\\t} else {\\n\\t\\t\\tdirectLight.color = vec3( 0.0 );\\n\\t\\t\\tdirectLight.visible = false;\\n\\t\\t}\\n\\t}\\n#endif\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tstruct RectAreaLight {\\n\\t\\tvec3 color;\\n\\t\\tvec3 position;\\n\\t\\tvec3 halfWidth;\\n\\t\\tvec3 halfHeight;\\n\\t};\\n\\tuniform sampler2D ltc_1;\\tuniform sampler2D ltc_2;\\n\\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\\n#endif\\n#if NUM_HEMI_LIGHTS > 0\\n\\tstruct HemisphereLight {\\n\\t\\tvec3 direction;\\n\\t\\tvec3 skyColor;\\n\\t\\tvec3 groundColor;\\n\\t};\\n\\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\\n\\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\\n\\t\\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\\n\\t\\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\\n\\t\\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tirradiance *= PI;\\n\\t\\t#endif\\n\\t\\treturn irradiance;\\n\\t}\\n#endif\";\n\nvar envmap_physical_pars_fragment = \"#if defined( USE_ENVMAP )\\n\\t#ifdef ENVMAP_MODE_REFRACTION\\n\\t\\tuniform float refractionRatio;\\n\\t#endif\\n\\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\\n\\t\\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\\n\\t\\t#else\\n\\t\\t\\tvec4 envMapColor = vec4( 0.0 );\\n\\t\\t#endif\\n\\t\\treturn PI * envMapColor.rgb * envMapIntensity;\\n\\t}\\n\\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\\n\\t\\tfloat maxMIPLevelScalar = float( maxMIPLevel );\\n\\t\\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\\n\\t\\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\\n\\t\\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\\n\\t}\\n\\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\\n\\t\\t#ifdef ENVMAP_MODE_REFLECTION\\n\\t\\t  vec3 reflectVec = reflect( -viewDir, normal );\\n\\t\\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\\n\\t\\t#else\\n\\t\\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\\n\\t\\t#endif\\n\\t\\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\\n\\t\\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\\n\\t\\t#ifdef ENVMAP_TYPE_CUBE\\n\\t\\t\\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#elif defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\t\\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\\n\\t\\t#elif defined( ENVMAP_TYPE_EQUIREC )\\n\\t\\t\\tvec2 sampleUV = equirectUv( reflectVec );\\n\\t\\t\\t#ifdef TEXTURE_LOD_EXT\\n\\t\\t\\t\\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#else\\n\\t\\t\\t\\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\\n\\t\\t\\t#endif\\n\\t\\t\\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\\n\\t\\t#endif\\n\\t\\treturn envMapColor.rgb * envMapIntensity;\\n\\t}\\n#endif\";\n\nvar lights_toon_fragment = \"ToonMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\";\n\nvar lights_toon_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct ToonMaterial {\\n\\tvec3\\tdiffuseColor;\\n};\\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Toon\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Toon\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_phong_fragment = \"BlinnPhongMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb;\\nmaterial.specularColor = specular;\\nmaterial.specularShininess = shininess;\\nmaterial.specularStrength = specularStrength;\";\n\nvar lights_phong_pars_fragment = \"varying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\nstruct BlinnPhongMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tvec3\\tspecularColor;\\n\\tfloat\\tspecularShininess;\\n\\tfloat\\tspecularStrength;\\n};\\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n\\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\\n}\\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_BlinnPhong\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_BlinnPhong\\n#define Material_LightProbeLOD( material )\\t(0)\";\n\nvar lights_physical_fragment = \"PhysicalMaterial material;\\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\\n#ifdef REFLECTIVITY\\n\\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\\n#else\\n\\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\\n#endif\\n#ifdef CLEARCOAT\\n\\tmaterial.clearcoat = clearcoat;\\n\\tmaterial.clearcoatRoughness = clearcoatRoughness;\\n\\t#ifdef USE_CLEARCOATMAP\\n\\t\\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\\n\\t#endif\\n\\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\t\\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\\n\\t#endif\\n\\tmaterial.clearcoat = saturate( material.clearcoat );\\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\\n\\tmaterial.clearcoatRoughness += geometryRoughness;\\n\\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\\n#endif\\n#ifdef USE_SHEEN\\n\\tmaterial.sheenColor = sheen;\\n#endif\";\n\nvar lights_physical_pars_fragment = \"struct PhysicalMaterial {\\n\\tvec3\\tdiffuseColor;\\n\\tfloat\\tspecularRoughness;\\n\\tvec3\\tspecularColor;\\n#ifdef CLEARCOAT\\n\\tfloat clearcoat;\\n\\tfloat clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tvec3 sheenColor;\\n#endif\\n};\\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\\n\\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\\n}\\n#if NUM_RECT_AREA_LIGHTS > 0\\n\\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\t\\tvec3 normal = geometry.normal;\\n\\t\\tvec3 viewDir = geometry.viewDir;\\n\\t\\tvec3 position = geometry.position;\\n\\t\\tvec3 lightPos = rectAreaLight.position;\\n\\t\\tvec3 halfWidth = rectAreaLight.halfWidth;\\n\\t\\tvec3 halfHeight = rectAreaLight.halfHeight;\\n\\t\\tvec3 lightColor = rectAreaLight.color;\\n\\t\\tfloat roughness = material.specularRoughness;\\n\\t\\tvec3 rectCoords[ 4 ];\\n\\t\\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\\t\\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\\n\\t\\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\\n\\t\\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\\n\\t\\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\\n\\t\\tvec4 t1 = texture2D( ltc_1, uv );\\n\\t\\tvec4 t2 = texture2D( ltc_2, uv );\\n\\t\\tmat3 mInv = mat3(\\n\\t\\t\\tvec3( t1.x, 0, t1.y ),\\n\\t\\t\\tvec3(    0, 1,    0 ),\\n\\t\\t\\tvec3( t1.z, 0, t1.w )\\n\\t\\t);\\n\\t\\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\\n\\t\\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\\n\\t\\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\\n\\t}\\n#endif\\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\\n\\tvec3 irradiance = dotNL * directLight.color;\\n\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\tirradiance *= PI;\\n\\t#endif\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\\n\\t\\tvec3 ccIrradiance = ccDotNL * directLight.color;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tccIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t\\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\t#ifdef USE_SHEEN\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\\n\\t\\t\\tmaterial.specularRoughness,\\n\\t\\t\\tdirectLight.direction,\\n\\t\\t\\tgeometry,\\n\\t\\t\\tmaterial.sheenColor\\n\\t\\t);\\n\\t#else\\n\\t\\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\\n\\t#endif\\n\\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\\n\\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\\n}\\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\\n\\t#ifdef CLEARCOAT\\n\\t\\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\\n\\t\\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\\n\\t\\tfloat ccDotNL = ccDotNV;\\n\\t\\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\\n\\t#else\\n\\t\\tfloat clearcoatDHR = 0.0;\\n\\t#endif\\n\\tfloat clearcoatInv = 1.0 - clearcoatDHR;\\n\\tvec3 singleScattering = vec3( 0.0 );\\n\\tvec3 multiScattering = vec3( 0.0 );\\n\\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\\n\\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\\n\\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\\n\\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\\n\\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\\n\\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\\n}\\n#define RE_Direct\\t\\t\\t\\tRE_Direct_Physical\\n#define RE_Direct_RectArea\\t\\tRE_Direct_RectArea_Physical\\n#define RE_IndirectDiffuse\\t\\tRE_IndirectDiffuse_Physical\\n#define RE_IndirectSpecular\\t\\tRE_IndirectSpecular_Physical\\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\\n\\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\\n}\";\n\nvar lights_fragment_begin = \"\\nGeometricContext geometry;\\ngeometry.position = - vViewPosition;\\ngeometry.normal = normal;\\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\\n#ifdef CLEARCOAT\\n\\tgeometry.clearcoatNormal = clearcoatNormal;\\n#endif\\nIncidentLight directLight;\\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tPointLight pointLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\\n\\t\\tpointLight = pointLights[ i ];\\n\\t\\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\\n\\t\\tpointLightShadow = pointLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tSpotLight spotLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\\n\\t\\tspotLight = spotLights[ i ];\\n\\t\\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\\n\\t\\tspotLightShadow = spotLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\\n\\tDirectionalLight directionalLight;\\n\\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLightShadow;\\n\\t#endif\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLights[ i ];\\n\\t\\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\\n\\t\\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\\n\\t\\tdirectionalLightShadow = directionalLightShadows[ i ];\\n\\t\\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t\\t#endif\\n\\t\\tRE_Direct( directLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\\n\\tRectAreaLight rectAreaLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\\n\\t\\trectAreaLight = rectAreaLights[ i ];\\n\\t\\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\\n\\t}\\n\\t#pragma unroll_loop_end\\n#endif\\n#if defined( RE_IndirectDiffuse )\\n\\tvec3 iblIrradiance = vec3( 0.0 );\\n\\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\\n\\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\\n\\t#if ( NUM_HEMI_LIGHTS > 0 )\\n\\t\\t#pragma unroll_loop_start\\n\\t\\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\\n\\t\\t\\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\\n\\t\\t}\\n\\t\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tvec3 radiance = vec3( 0.0 );\\n\\tvec3 clearcoatRadiance = vec3( 0.0 );\\n#endif\";\n\nvar lights_fragment_maps = \"#if defined( RE_IndirectDiffuse )\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t\\t#ifndef PHYSICALLY_CORRECT_LIGHTS\\n\\t\\t\\tlightMapIrradiance *= PI;\\n\\t\\t#endif\\n\\t\\tirradiance += lightMapIrradiance;\\n\\t#endif\\n\\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\\n\\t\\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\\n\\t#endif\\n#endif\\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\\n\\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\\n\\t#ifdef CLEARCOAT\\n\\t\\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\\n\\t#endif\\n#endif\";\n\nvar lights_fragment_end = \"#if defined( RE_IndirectDiffuse )\\n\\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\\n#endif\\n#if defined( RE_IndirectSpecular )\\n\\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\\n#endif\";\n\nvar logdepthbuf_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\\n#endif\";\n\nvar logdepthbuf_pars_fragment = \"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\\n\\tuniform float logDepthBufFC;\\n\\tvarying float vFragDepth;\\n\\tvarying float vIsPerspective;\\n#endif\";\n\nvar logdepthbuf_pars_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvarying float vFragDepth;\\n\\t\\tvarying float vIsPerspective;\\n\\t#else\\n\\t\\tuniform float logDepthBufFC;\\n\\t#endif\\n#endif\";\n\nvar logdepthbuf_vertex = \"#ifdef USE_LOGDEPTHBUF\\n\\t#ifdef USE_LOGDEPTHBUF_EXT\\n\\t\\tvFragDepth = 1.0 + gl_Position.w;\\n\\t\\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\\n\\t#else\\n\\t\\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\\n\\t\\t\\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\\n\\t\\t\\tgl_Position.z *= gl_Position.w;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar map_fragment = \"#ifdef USE_MAP\\n\\tvec4 texelColor = texture2D( map, vUv );\\n\\ttexelColor = mapTexelToLinear( texelColor );\\n\\tdiffuseColor *= texelColor;\\n#endif\";\n\nvar map_pars_fragment = \"#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\";\n\nvar map_particle_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\\n#endif\\n#ifdef USE_MAP\\n\\tvec4 mapTexel = texture2D( map, uv );\\n\\tdiffuseColor *= mapTexelToLinear( mapTexel );\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\\n#endif\";\n\nvar map_particle_pars_fragment = \"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\\n\\tuniform mat3 uvTransform;\\n#endif\\n#ifdef USE_MAP\\n\\tuniform sampler2D map;\\n#endif\\n#ifdef USE_ALPHAMAP\\n\\tuniform sampler2D alphaMap;\\n#endif\";\n\nvar metalnessmap_fragment = \"float metalnessFactor = metalness;\\n#ifdef USE_METALNESSMAP\\n\\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\\n\\tmetalnessFactor *= texelMetalness.b;\\n#endif\";\n\nvar metalnessmap_pars_fragment = \"#ifdef USE_METALNESSMAP\\n\\tuniform sampler2D metalnessMap;\\n#endif\";\n\nvar morphnormal_vertex = \"#ifdef USE_MORPHNORMALS\\n\\tobjectNormal *= morphTargetBaseInfluence;\\n\\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\\n\\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\\n\\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\\n\\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\\n#endif\";\n\nvar morphtarget_pars_vertex = \"#ifdef USE_MORPHTARGETS\\n\\tuniform float morphTargetBaseInfluence;\\n\\t#ifndef USE_MORPHNORMALS\\n\\tuniform float morphTargetInfluences[ 8 ];\\n\\t#else\\n\\tuniform float morphTargetInfluences[ 4 ];\\n\\t#endif\\n#endif\";\n\nvar morphtarget_vertex = \"#ifdef USE_MORPHTARGETS\\n\\ttransformed *= morphTargetBaseInfluence;\\n\\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\\n\\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\\n\\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\\n\\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\\n\\t#ifndef USE_MORPHNORMALS\\n\\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\\n\\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\\n\\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\\n\\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\\n\\t#endif\\n#endif\";\n\nvar normal_fragment_begin = \"#ifdef FLAT_SHADED\\n\\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\\n\\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\\n\\tvec3 normal = normalize( cross( fdx, fdy ) );\\n#else\\n\\tvec3 normal = normalize( vNormal );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\t#ifdef USE_TANGENT\\n\\t\\tvec3 tangent = normalize( vTangent );\\n\\t\\tvec3 bitangent = normalize( vBitangent );\\n\\t\\t#ifdef DOUBLE_SIDED\\n\\t\\t\\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t\\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\t#endif\\n\\t\\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\\n\\t\\t\\tmat3 vTBN = mat3( tangent, bitangent, normal );\\n\\t\\t#endif\\n\\t#endif\\n#endif\\nvec3 geometryNormal = normal;\";\n\nvar normal_fragment_maps = \"#ifdef OBJECTSPACE_NORMALMAP\\n\\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\t#ifdef FLIP_SIDED\\n\\t\\tnormal = - normal;\\n\\t#endif\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t#endif\\n\\tnormal = normalize( normalMatrix * normal );\\n#elif defined( TANGENTSPACE_NORMALMAP )\\n\\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tmapN.xy *= normalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tnormal = normalize( vTBN * mapN );\\n\\t#else\\n\\t\\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\\n\\t#endif\\n#elif defined( USE_BUMPMAP )\\n\\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\\n#endif\";\n\nvar normalmap_pars_fragment = \"#ifdef USE_NORMALMAP\\n\\tuniform sampler2D normalMap;\\n\\tuniform vec2 normalScale;\\n#endif\\n#ifdef OBJECTSPACE_NORMALMAP\\n\\tuniform mat3 normalMatrix;\\n#endif\\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\\n\\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\\n\\t\\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\\n\\t\\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\\n\\t\\tvec2 st0 = dFdx( vUv.st );\\n\\t\\tvec2 st1 = dFdy( vUv.st );\\n\\t\\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\\n\\t\\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\\n\\t\\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\\n\\t\\tvec3 N = normalize( surf_norm );\\n\\t\\tmat3 tsn = mat3( S, T, N );\\n\\t\\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\\n\\t\\treturn normalize( tsn * mapN );\\n\\t}\\n#endif\";\n\nvar clearcoat_normal_fragment_begin = \"#ifdef CLEARCOAT\\n\\tvec3 clearcoatNormal = geometryNormal;\\n#endif\";\n\nvar clearcoat_normal_fragment_maps = \"#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\\n\\tclearcoatMapN.xy *= clearcoatNormalScale;\\n\\t#ifdef USE_TANGENT\\n\\t\\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\\n\\t#else\\n\\t\\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\\n\\t#endif\\n#endif\";\n\nvar clearcoat_pars_fragment = \"#ifdef USE_CLEARCOATMAP\\n\\tuniform sampler2D clearcoatMap;\\n#endif\\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\\n\\tuniform sampler2D clearcoatRoughnessMap;\\n#endif\\n#ifdef USE_CLEARCOAT_NORMALMAP\\n\\tuniform sampler2D clearcoatNormalMap;\\n\\tuniform vec2 clearcoatNormalScale;\\n#endif\";\n\nvar packing = \"vec3 packNormalToRGB( const in vec3 normal ) {\\n\\treturn normalize( normal ) * 0.5 + 0.5;\\n}\\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\\n\\treturn 2.0 * rgb.xyz - 1.0;\\n}\\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\\nconst float ShiftRight8 = 1. / 256.;\\nvec4 packDepthToRGBA( const in float v ) {\\n\\tvec4 r = vec4( fract( v * PackFactors ), v );\\n\\tr.yzw -= r.xyz * ShiftRight8;\\treturn r * PackUpscale;\\n}\\nfloat unpackRGBAToDepth( const in vec4 v ) {\\n\\treturn dot( v, UnpackFactors );\\n}\\nvec4 pack2HalfToRGBA( vec2 v ) {\\n\\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\\n\\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\\n}\\nvec2 unpackRGBATo2Half( vec4 v ) {\\n\\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\\n}\\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn ( viewZ + near ) / ( near - far );\\n}\\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\\n\\treturn linearClipZ * ( near - far ) - near;\\n}\\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\\n\\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\\n}\\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\\n\\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\\n}\";\n\nvar premultiplied_alpha_fragment = \"#ifdef PREMULTIPLIED_ALPHA\\n\\tgl_FragColor.rgb *= gl_FragColor.a;\\n#endif\";\n\nvar project_vertex = \"vec4 mvPosition = vec4( transformed, 1.0 );\\n#ifdef USE_INSTANCING\\n\\tmvPosition = instanceMatrix * mvPosition;\\n#endif\\nmvPosition = modelViewMatrix * mvPosition;\\ngl_Position = projectionMatrix * mvPosition;\";\n\nvar dithering_fragment = \"#ifdef DITHERING\\n\\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\\n#endif\";\n\nvar dithering_pars_fragment = \"#ifdef DITHERING\\n\\tvec3 dithering( vec3 color ) {\\n\\t\\tfloat grid_position = rand( gl_FragCoord.xy );\\n\\t\\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\\n\\t\\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\\n\\t\\treturn color + dither_shift_RGB;\\n\\t}\\n#endif\";\n\nvar roughnessmap_fragment = \"float roughnessFactor = roughness;\\n#ifdef USE_ROUGHNESSMAP\\n\\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\\n\\troughnessFactor *= texelRoughness.g;\\n#endif\";\n\nvar roughnessmap_pars_fragment = \"#ifdef USE_ROUGHNESSMAP\\n\\tuniform sampler2D roughnessMap;\\n#endif\";\n\nvar shadowmap_pars_fragment = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\\n\\t\\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\\n\\t}\\n\\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\\n\\t\\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\\n\\t}\\n\\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\\n\\t\\tfloat occlusion = 1.0;\\n\\t\\tvec2 distribution = texture2DDistribution( shadow, uv );\\n\\t\\tfloat hard_shadow = step( compare , distribution.x );\\n\\t\\tif (hard_shadow != 1.0 ) {\\n\\t\\t\\tfloat distance = compare - distribution.x ;\\n\\t\\t\\tfloat variance = max( 0.00000, distribution.y * distribution.y );\\n\\t\\t\\tfloat softness_probability = variance / (variance + distance * distance );\\t\\t\\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\\t\\t\\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\\n\\t\\t}\\n\\t\\treturn occlusion;\\n\\t}\\n\\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\\n\\t\\tfloat shadow = 1.0;\\n\\t\\tshadowCoord.xyz /= shadowCoord.w;\\n\\t\\tshadowCoord.z += shadowBias;\\n\\t\\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\\n\\t\\tbool inFrustum = all( inFrustumVec );\\n\\t\\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\\n\\t\\tbool frustumTest = all( frustumTestVec );\\n\\t\\tif ( frustumTest ) {\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx0 = - texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy0 = - texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx1 = + texelSize.x * shadowRadius;\\n\\t\\t\\tfloat dy1 = + texelSize.y * shadowRadius;\\n\\t\\t\\tfloat dx2 = dx0 / 2.0;\\n\\t\\t\\tfloat dy2 = dy0 / 2.0;\\n\\t\\t\\tfloat dx3 = dx1 / 2.0;\\n\\t\\t\\tfloat dy3 = dy1 / 2.0;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\\n\\t\\t\\t) * ( 1.0 / 17.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\\n\\t\\t\\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\\n\\t\\t\\tfloat dx = texelSize.x;\\n\\t\\t\\tfloat dy = texelSize.y;\\n\\t\\t\\tvec2 uv = shadowCoord.xy;\\n\\t\\t\\tvec2 f = fract( uv * shadowMapSize + 0.5 );\\n\\t\\t\\tuv -= f * texelSize;\\n\\t\\t\\tshadow = (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.x ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t f.y ) +\\n\\t\\t\\t\\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \\n\\t\\t\\t\\t\\t\\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\\n\\t\\t\\t\\t\\t\\t  f.x ),\\n\\t\\t\\t\\t\\t f.y )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#elif defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#else\\n\\t\\t\\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\\n\\t\\t#endif\\n\\t\\t}\\n\\t\\treturn shadow;\\n\\t}\\n\\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\\n\\t\\tvec3 absV = abs( v );\\n\\t\\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\\n\\t\\tabsV *= scaleToCube;\\n\\t\\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\\n\\t\\tvec2 planar = v.xy;\\n\\t\\tfloat almostATexel = 1.5 * texelSizeY;\\n\\t\\tfloat almostOne = 1.0 - almostATexel;\\n\\t\\tif ( absV.z >= almostOne ) {\\n\\t\\t\\tif ( v.z > 0.0 )\\n\\t\\t\\t\\tplanar.x = 4.0 - v.x;\\n\\t\\t} else if ( absV.x >= almostOne ) {\\n\\t\\t\\tfloat signX = sign( v.x );\\n\\t\\t\\tplanar.x = v.z * signX + 2.0 * signX;\\n\\t\\t} else if ( absV.y >= almostOne ) {\\n\\t\\t\\tfloat signY = sign( v.y );\\n\\t\\t\\tplanar.x = v.x + 2.0 * signY + 2.0;\\n\\t\\t\\tplanar.y = v.z * signY - 2.0;\\n\\t\\t}\\n\\t\\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\\n\\t}\\n\\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\\n\\t\\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\\n\\t\\tvec3 lightToPosition = shadowCoord.xyz;\\n\\t\\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\\t\\tdp += shadowBias;\\n\\t\\tvec3 bd3D = normalize( lightToPosition );\\n\\t\\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\\n\\t\\t\\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\\n\\t\\t\\treturn (\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\\n\\t\\t\\t\\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\\n\\t\\t\\t) * ( 1.0 / 9.0 );\\n\\t\\t#else\\n\\t\\t\\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\\n\\t\\t#endif\\n\\t}\\n#endif\";\n\nvar shadowmap_pars_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t\\tstruct DirectionalLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t\\tstruct SpotLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t};\\n\\t\\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t\\tstruct PointLightShadow {\\n\\t\\t\\tfloat shadowBias;\\n\\t\\t\\tfloat shadowNormalBias;\\n\\t\\t\\tfloat shadowRadius;\\n\\t\\t\\tvec2 shadowMapSize;\\n\\t\\t\\tfloat shadowCameraNear;\\n\\t\\t\\tfloat shadowCameraFar;\\n\\t\\t};\\n\\t\\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\\n\\t#endif\\n#endif\";\n\nvar shadowmap_vertex = \"#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\\n\\t\\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\\n\\t\\tvec4 shadowWorldPosition;\\n\\t#endif\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\\n\\t\\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n#endif\";\n\nvar shadowmask_pars_fragment = \"float getShadowMask() {\\n\\tfloat shadow = 1.0;\\n\\t#ifdef USE_SHADOWMAP\\n\\t#if NUM_DIR_LIGHT_SHADOWS > 0\\n\\tDirectionalLightShadow directionalLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tdirectionalLight = directionalLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_SPOT_LIGHT_SHADOWS > 0\\n\\tSpotLightShadow spotLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tspotLight = spotLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#if NUM_POINT_LIGHT_SHADOWS > 0\\n\\tPointLightShadow pointLight;\\n\\t#pragma unroll_loop_start\\n\\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\\n\\t\\tpointLight = pointLightShadows[ i ];\\n\\t\\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\\n\\t}\\n\\t#pragma unroll_loop_end\\n\\t#endif\\n\\t#endif\\n\\treturn shadow;\\n}\";\n\nvar skinbase_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\\n\\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\\n\\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\\n\\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\\n#endif\";\n\nvar skinning_pars_vertex = \"#ifdef USE_SKINNING\\n\\tuniform mat4 bindMatrix;\\n\\tuniform mat4 bindMatrixInverse;\\n\\t#ifdef BONE_TEXTURE\\n\\t\\tuniform highp sampler2D boneTexture;\\n\\t\\tuniform int boneTextureSize;\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tfloat j = i * 4.0;\\n\\t\\t\\tfloat x = mod( j, float( boneTextureSize ) );\\n\\t\\t\\tfloat y = floor( j / float( boneTextureSize ) );\\n\\t\\t\\tfloat dx = 1.0 / float( boneTextureSize );\\n\\t\\t\\tfloat dy = 1.0 / float( boneTextureSize );\\n\\t\\t\\ty = dy * ( y + 0.5 );\\n\\t\\t\\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\\n\\t\\t\\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\\n\\t\\t\\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\\n\\t\\t\\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\\n\\t\\t\\tmat4 bone = mat4( v1, v2, v3, v4 );\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#else\\n\\t\\tuniform mat4 boneMatrices[ MAX_BONES ];\\n\\t\\tmat4 getBoneMatrix( const in float i ) {\\n\\t\\t\\tmat4 bone = boneMatrices[ int(i) ];\\n\\t\\t\\treturn bone;\\n\\t\\t}\\n\\t#endif\\n#endif\";\n\nvar skinning_vertex = \"#ifdef USE_SKINNING\\n\\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\\n\\tvec4 skinned = vec4( 0.0 );\\n\\tskinned += boneMatX * skinVertex * skinWeight.x;\\n\\tskinned += boneMatY * skinVertex * skinWeight.y;\\n\\tskinned += boneMatZ * skinVertex * skinWeight.z;\\n\\tskinned += boneMatW * skinVertex * skinWeight.w;\\n\\ttransformed = ( bindMatrixInverse * skinned ).xyz;\\n#endif\";\n\nvar skinnormal_vertex = \"#ifdef USE_SKINNING\\n\\tmat4 skinMatrix = mat4( 0.0 );\\n\\tskinMatrix += skinWeight.x * boneMatX;\\n\\tskinMatrix += skinWeight.y * boneMatY;\\n\\tskinMatrix += skinWeight.z * boneMatZ;\\n\\tskinMatrix += skinWeight.w * boneMatW;\\n\\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\\n\\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\\n\\t#ifdef USE_TANGENT\\n\\t\\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\\n\\t#endif\\n#endif\";\n\nvar specularmap_fragment = \"float specularStrength;\\n#ifdef USE_SPECULARMAP\\n\\tvec4 texelSpecular = texture2D( specularMap, vUv );\\n\\tspecularStrength = texelSpecular.r;\\n#else\\n\\tspecularStrength = 1.0;\\n#endif\";\n\nvar specularmap_pars_fragment = \"#ifdef USE_SPECULARMAP\\n\\tuniform sampler2D specularMap;\\n#endif\";\n\nvar tonemapping_fragment = \"#if defined( TONE_MAPPING )\\n\\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\\n#endif\";\n\nvar tonemapping_pars_fragment = \"#ifndef saturate\\n#define saturate(a) clamp( a, 0.0, 1.0 )\\n#endif\\nuniform float toneMappingExposure;\\nvec3 LinearToneMapping( vec3 color ) {\\n\\treturn toneMappingExposure * color;\\n}\\nvec3 ReinhardToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\treturn saturate( color / ( vec3( 1.0 ) + color ) );\\n}\\nvec3 OptimizedCineonToneMapping( vec3 color ) {\\n\\tcolor *= toneMappingExposure;\\n\\tcolor = max( vec3( 0.0 ), color - 0.004 );\\n\\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\\n}\\nvec3 RRTAndODTFit( vec3 v ) {\\n\\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\\n\\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\\n\\treturn a / b;\\n}\\nvec3 ACESFilmicToneMapping( vec3 color ) {\\n\\tconst mat3 ACESInputMat = mat3(\\n\\t\\tvec3( 0.59719, 0.07600, 0.02840 ),\\t\\tvec3( 0.35458, 0.90834, 0.13383 ),\\n\\t\\tvec3( 0.04823, 0.01566, 0.83777 )\\n\\t);\\n\\tconst mat3 ACESOutputMat = mat3(\\n\\t\\tvec3(  1.60475, -0.10208, -0.00327 ),\\t\\tvec3( -0.53108,  1.10813, -0.07276 ),\\n\\t\\tvec3( -0.07367, -0.00605,  1.07602 )\\n\\t);\\n\\tcolor *= toneMappingExposure / 0.6;\\n\\tcolor = ACESInputMat * color;\\n\\tcolor = RRTAndODTFit( color );\\n\\tcolor = ACESOutputMat * color;\\n\\treturn saturate( color );\\n}\\nvec3 CustomToneMapping( vec3 color ) { return color; }\";\n\nvar uv_pars_fragment = \"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\\n\\tvarying vec2 vUv;\\n#endif\";\n\nvar uv_pars_vertex = \"#ifdef USE_UV\\n\\t#ifdef UVS_VERTEX_ONLY\\n\\t\\tvec2 vUv;\\n\\t#else\\n\\t\\tvarying vec2 vUv;\\n\\t#endif\\n\\tuniform mat3 uvTransform;\\n#endif\";\n\nvar uv_vertex = \"#ifdef USE_UV\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n#endif\";\n\nvar uv2_pars_fragment = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvarying vec2 vUv2;\\n#endif\";\n\nvar uv2_pars_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tattribute vec2 uv2;\\n\\tvarying vec2 vUv2;\\n\\tuniform mat3 uv2Transform;\\n#endif\";\n\nvar uv2_vertex = \"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\\n\\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\\n#endif\";\n\nvar worldpos_vertex = \"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\\n\\tvec4 worldPosition = vec4( transformed, 1.0 );\\n\\t#ifdef USE_INSTANCING\\n\\t\\tworldPosition = instanceMatrix * worldPosition;\\n\\t#endif\\n\\tworldPosition = modelMatrix * worldPosition;\\n#endif\";\n\nvar background_frag = \"uniform sampler2D t2D;\\nvarying vec2 vUv;\\nvoid main() {\\n\\tvec4 texColor = texture2D( t2D, vUv );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar background_vert = \"varying vec2 vUv;\\nuniform mat3 uvTransform;\\nvoid main() {\\n\\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\\n\\tgl_Position = vec4( position.xy, 1.0, 1.0 );\\n}\";\n\nvar cube_frag = \"#include <envmap_common_pars_fragment>\\nuniform float opacity;\\nvarying vec3 vWorldDirection;\\n#include <cube_uv_reflection_fragment>\\nvoid main() {\\n\\tvec3 vReflect = vWorldDirection;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = envColor;\\n\\tgl_FragColor.a *= opacity;\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar cube_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\tgl_Position.z = gl_Position.w;\\n}\";\n\nvar depth_frag = \"#if DEPTH_PACKING == 3200\\n\\tuniform float opacity;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tdiffuseColor.a = opacity;\\n\\t#endif\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\\n\\t#if DEPTH_PACKING == 3200\\n\\t\\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\\n\\t#elif DEPTH_PACKING == 3201\\n\\t\\tgl_FragColor = packDepthToRGBA( fragCoordZ );\\n\\t#endif\\n}\";\n\nvar depth_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying vec2 vHighPrecisionZW;\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvHighPrecisionZW = gl_Position.zw;\\n}\";\n\nvar distanceRGBA_frag = \"#define DISTANCE\\nuniform vec3 referencePosition;\\nuniform float nearDistance;\\nuniform float farDistance;\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main () {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( 1.0 );\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\tfloat dist = length( vWorldPosition - referencePosition );\\n\\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\\n\\tdist = saturate( dist );\\n\\tgl_FragColor = packDepthToRGBA( dist );\\n}\";\n\nvar distanceRGBA_vert = \"#define DISTANCE\\nvarying vec3 vWorldPosition;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_DISPLACEMENTMAP\\n\\t\\t#include <beginnormal_vertex>\\n\\t\\t#include <morphnormal_vertex>\\n\\t\\t#include <skinnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvWorldPosition = worldPosition.xyz;\\n}\";\n\nvar equirect_frag = \"uniform sampler2D tEquirect;\\nvarying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvec3 direction = normalize( vWorldDirection );\\n\\tvec2 sampleUV = equirectUv( direction );\\n\\tvec4 texColor = texture2D( tEquirect, sampleUV );\\n\\tgl_FragColor = mapTexelToLinear( texColor );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n}\";\n\nvar equirect_vert = \"varying vec3 vWorldDirection;\\n#include <common>\\nvoid main() {\\n\\tvWorldDirection = transformDirection( position, modelMatrix );\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n}\";\n\nvar linedashed_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\nuniform float dashSize;\\nuniform float totalSize;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\\n\\t\\tdiscard;\\n\\t}\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <color_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar linedashed_vert = \"uniform float scale;\\nattribute float lineDistance;\\nvarying float vLineDistance;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\tvLineDistance = scale * lineDistance;\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshbasic_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\t#ifdef USE_LIGHTMAP\\n\\t\\n\\t\\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\\n\\t\\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vec3( 1.0 );\\n\\t#endif\\n\\t#include <aomap_fragment>\\n\\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\\n\\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshbasic_vert = \"#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#ifdef USE_ENVMAP\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshlambert_frag = \"uniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <fog_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <emissivemap_fragment>\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\\n\\t#else\\n\\t\\treflectedLight.indirectDiffuse += vIndirectFront;\\n\\t#endif\\n\\t#include <lightmap_fragment>\\n\\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\\n\\t#ifdef DOUBLE_SIDED\\n\\t\\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\\n\\t#else\\n\\t\\treflectedLight.directDiffuse = vLightFront;\\n\\t#endif\\n\\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshlambert_vert = \"#define LAMBERT\\nvarying vec3 vLightFront;\\nvarying vec3 vIndirectFront;\\n#ifdef DOUBLE_SIDED\\n\\tvarying vec3 vLightBack;\\n\\tvarying vec3 vIndirectBack;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <lights_lambert_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshmatcap_frag = \"#define MATCAP\\nuniform vec3 diffuse;\\nuniform float opacity;\\nuniform sampler2D matcap;\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tvec3 viewDir = normalize( vViewPosition );\\n\\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\\n\\tvec3 y = cross( viewDir, x );\\n\\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\\n\\t#ifdef USE_MATCAP\\n\\t\\tvec4 matcapColor = texture2D( matcap, uv );\\n\\t\\tmatcapColor = matcapTexelToLinear( matcapColor );\\n\\t#else\\n\\t\\tvec4 matcapColor = vec4( 1.0 );\\n\\t#endif\\n\\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshmatcap_vert = \"#define MATCAP\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <color_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#ifndef FLAT_SHADED\\n\\t\\tvNormal = normalize( transformedNormal );\\n\\t#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n}\";\n\nvar meshtoon_frag = \"#define TOON\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <gradientmap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_toon_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_toon_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshtoon_vert = \"#define TOON\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphong_frag = \"#define PHONG\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform vec3 specular;\\nuniform float shininess;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_pars_fragment>\\n#include <cube_uv_reflection_fragment>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <lights_phong_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <specularmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <specularmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_phong_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#include <envmap_fragment>\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphong_vert = \"#define PHONG\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <envmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <envmap_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar meshphysical_frag = \"#define STANDARD\\n#ifdef PHYSICAL\\n\\t#define REFLECTIVITY\\n\\t#define CLEARCOAT\\n\\t#define TRANSPARENCY\\n#endif\\nuniform vec3 diffuse;\\nuniform vec3 emissive;\\nuniform float roughness;\\nuniform float metalness;\\nuniform float opacity;\\n#ifdef TRANSPARENCY\\n\\tuniform float transparency;\\n#endif\\n#ifdef REFLECTIVITY\\n\\tuniform float reflectivity;\\n#endif\\n#ifdef CLEARCOAT\\n\\tuniform float clearcoat;\\n\\tuniform float clearcoatRoughness;\\n#endif\\n#ifdef USE_SHEEN\\n\\tuniform vec3 sheen;\\n#endif\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n#include <color_pars_fragment>\\n#include <uv_pars_fragment>\\n#include <uv2_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <aomap_pars_fragment>\\n#include <lightmap_pars_fragment>\\n#include <emissivemap_pars_fragment>\\n#include <bsdfs>\\n#include <cube_uv_reflection_fragment>\\n#include <envmap_common_pars_fragment>\\n#include <envmap_physical_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <lights_pars_begin>\\n#include <lights_physical_pars_fragment>\\n#include <shadowmap_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <clearcoat_pars_fragment>\\n#include <roughnessmap_pars_fragment>\\n#include <metalnessmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\\n\\tvec3 totalEmissiveRadiance = emissive;\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\t#include <roughnessmap_fragment>\\n\\t#include <metalnessmap_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\t#include <clearcoat_normal_fragment_begin>\\n\\t#include <clearcoat_normal_fragment_maps>\\n\\t#include <emissivemap_fragment>\\n\\t#include <lights_physical_fragment>\\n\\t#include <lights_fragment_begin>\\n\\t#include <lights_fragment_maps>\\n\\t#include <lights_fragment_end>\\n\\t#include <aomap_fragment>\\n\\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\\n\\t#ifdef TRANSPARENCY\\n\\t\\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\\n\\t#endif\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n\\t#include <dithering_fragment>\\n}\";\n\nvar meshphysical_vert = \"#define STANDARD\\nvarying vec3 vViewPosition;\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <uv2_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <shadowmap_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <uv2_vertex>\\n\\t#include <color_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\tvViewPosition = - mvPosition.xyz;\\n\\t#include <worldpos_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar normal_frag = \"#define NORMAL\\nuniform float opacity;\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <packing>\\n#include <uv_pars_fragment>\\n#include <bumpmap_pars_fragment>\\n#include <normalmap_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <normal_fragment_begin>\\n\\t#include <normal_fragment_maps>\\n\\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\\n}\";\n\nvar normal_vert = \"#define NORMAL\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvarying vec3 vViewPosition;\\n#endif\\n#ifndef FLAT_SHADED\\n\\tvarying vec3 vNormal;\\n\\t#ifdef USE_TANGENT\\n\\t\\tvarying vec3 vTangent;\\n\\t\\tvarying vec3 vBitangent;\\n\\t#endif\\n#endif\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <displacementmap_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n#ifndef FLAT_SHADED\\n\\tvNormal = normalize( transformedNormal );\\n\\t#ifdef USE_TANGENT\\n\\t\\tvTangent = normalize( transformedTangent );\\n\\t\\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\\n\\t#endif\\n#endif\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <skinning_vertex>\\n\\t#include <displacementmap_vertex>\\n\\t#include <project_vertex>\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\\n\\tvViewPosition = - mvPosition.xyz;\\n#endif\\n}\";\n\nvar points_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <color_pars_fragment>\\n#include <map_particle_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_particle_fragment>\\n\\t#include <color_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n\\t#include <premultiplied_alpha_fragment>\\n}\";\n\nvar points_vert = \"uniform float size;\\nuniform float scale;\\n#include <common>\\n#include <color_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <morphtarget_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <color_vertex>\\n\\t#include <begin_vertex>\\n\\t#include <morphtarget_vertex>\\n\\t#include <project_vertex>\\n\\tgl_PointSize = size;\\n\\t#ifdef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\\n\\t#endif\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar shadow_frag = \"uniform vec3 color;\\nuniform float opacity;\\n#include <common>\\n#include <packing>\\n#include <fog_pars_fragment>\\n#include <bsdfs>\\n#include <lights_pars_begin>\\n#include <shadowmap_pars_fragment>\\n#include <shadowmask_pars_fragment>\\nvoid main() {\\n\\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar shadow_vert = \"#include <common>\\n#include <fog_pars_vertex>\\n#include <shadowmap_pars_vertex>\\nvoid main() {\\n\\t#include <begin_vertex>\\n\\t#include <project_vertex>\\n\\t#include <worldpos_vertex>\\n\\t#include <beginnormal_vertex>\\n\\t#include <morphnormal_vertex>\\n\\t#include <skinbase_vertex>\\n\\t#include <skinnormal_vertex>\\n\\t#include <defaultnormal_vertex>\\n\\t#include <shadowmap_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nvar sprite_frag = \"uniform vec3 diffuse;\\nuniform float opacity;\\n#include <common>\\n#include <uv_pars_fragment>\\n#include <map_pars_fragment>\\n#include <alphamap_pars_fragment>\\n#include <fog_pars_fragment>\\n#include <logdepthbuf_pars_fragment>\\n#include <clipping_planes_pars_fragment>\\nvoid main() {\\n\\t#include <clipping_planes_fragment>\\n\\tvec3 outgoingLight = vec3( 0.0 );\\n\\tvec4 diffuseColor = vec4( diffuse, opacity );\\n\\t#include <logdepthbuf_fragment>\\n\\t#include <map_fragment>\\n\\t#include <alphamap_fragment>\\n\\t#include <alphatest_fragment>\\n\\toutgoingLight = diffuseColor.rgb;\\n\\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\\n\\t#include <tonemapping_fragment>\\n\\t#include <encodings_fragment>\\n\\t#include <fog_fragment>\\n}\";\n\nvar sprite_vert = \"uniform float rotation;\\nuniform vec2 center;\\n#include <common>\\n#include <uv_pars_vertex>\\n#include <fog_pars_vertex>\\n#include <logdepthbuf_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvoid main() {\\n\\t#include <uv_vertex>\\n\\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\\n\\tvec2 scale;\\n\\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\\n\\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\\n\\t#ifndef USE_SIZEATTENUATION\\n\\t\\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\\n\\t\\tif ( isPerspective ) scale *= - mvPosition.z;\\n\\t#endif\\n\\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\\n\\tvec2 rotatedPosition;\\n\\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\\n\\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\\n\\tmvPosition.xy += rotatedPosition;\\n\\tgl_Position = projectionMatrix * mvPosition;\\n\\t#include <logdepthbuf_vertex>\\n\\t#include <clipping_planes_vertex>\\n\\t#include <fog_vertex>\\n}\";\n\nconst ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nconst ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 1.0 },\n\t\t\t\tmetalness: { value: 0.0 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransparency: { value: 0 },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\n\n\tconst clearColor = new Color( 0x000000 );\n\tlet clearAlpha = 0;\n\n\tlet planeMesh;\n\tlet boxMesh;\n\n\tlet currentBackground = null;\n\tlet currentBackgroundVersion = 0;\n\tlet currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tlet background = scene.isScene === true ? scene.background : null;\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tconst xr = renderer.xr;\n\t\tconst session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tconst texture = background.isWebGLCubeRenderTarget ? background.texture : background;\n\n\t\t\tboxMesh.material.uniforms.envMap.value = texture;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = texture.isCubeTexture ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== texture.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = texture.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\tname: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n * @author Takahiro / https://github.com/takahirox\n */\n\nfunction WebGLBindingStates( gl, extensions, attributes, capabilities ) {\n\n\tconst maxVertexAttributes = gl.getParameter( 34921 );\n\n\tconst extension = capabilities.isWebGL2 ? null : extensions.get( 'OES_vertex_array_object' );\n\tconst vaoAvailable = capabilities.isWebGL2 || extension !== null;\n\n\tconst bindingStates = {};\n\n\tconst defaultState = createBindingState( null );\n\tlet currentState = defaultState;\n\n\tfunction setup( object, material, program, geometry, index ) {\n\n\t\tlet updateBuffers = false;\n\n\t\tif ( vaoAvailable ) {\n\n\t\t\tconst state = getBindingState( geometry, program, material );\n\n\t\t\tif ( currentState !== state ) {\n\n\t\t\t\tcurrentState = state;\n\t\t\t\tbindVertexArrayObject( currentState.object );\n\n\t\t\t}\n\n\t\t\tupdateBuffers = needsUpdate( geometry );\n\n\t\t\tif ( updateBuffers ) saveCache( geometry );\n\n\t\t} else {\n\n\t\t\tconst wireframe = ( material.wireframe === true );\n\n\t\t\tif ( currentState.geometry !== geometry.id ||\n\t\t\t\tcurrentState.program !== program.id ||\n\t\t\t\tcurrentState.wireframe !== wireframe ) {\n\n\t\t\t\tcurrentState.geometry = geometry.id;\n\t\t\t\tcurrentState.program = program.id;\n\t\t\t\tcurrentState.wireframe = wireframe;\n\n\t\t\t\tupdateBuffers = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh === true ) {\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, 34963 );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, material, program, geometry );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tgl.bindBuffer( 34963, attributes.get( index ).buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction createVertexArrayObject() {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.createVertexArray();\n\n\t\treturn extension.createVertexArrayOES();\n\n\t}\n\n\tfunction bindVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.bindVertexArray( vao );\n\n\t\treturn extension.bindVertexArrayOES( vao );\n\n\t}\n\n\tfunction deleteVertexArrayObject( vao ) {\n\n\t\tif ( capabilities.isWebGL2 ) return gl.deleteVertexArray( vao );\n\n\t\treturn extension.deleteVertexArrayOES( vao );\n\n\t}\n\n\tfunction getBindingState( geometry, program, material ) {\n\n\t\tconst wireframe = ( material.wireframe === true );\n\n\t\tlet programMap = bindingStates[ geometry.id ];\n\n\t\tif ( programMap === undefined ) {\n\n\t\t\tprogramMap = {};\n\t\t\tbindingStates[ geometry.id ] = programMap;\n\n\t\t}\n\n\t\tlet stateMap = programMap[ program.id ];\n\n\t\tif ( stateMap === undefined ) {\n\n\t\t\tstateMap = {};\n\t\t\tprogramMap[ program.id ] = stateMap;\n\n\t\t}\n\n\t\tlet state = stateMap[ wireframe ];\n\n\t\tif ( state === undefined ) {\n\n\t\t\tstate = createBindingState( createVertexArrayObject() );\n\t\t\tstateMap[ wireframe ] = state;\n\n\t\t}\n\n\t\treturn state;\n\n\t}\n\n\tfunction createBindingState( vao ) {\n\n\t\tconst newAttributes = [];\n\t\tconst enabledAttributes = [];\n\t\tconst attributeDivisors = [];\n\n\t\tfor ( let i = 0; i < maxVertexAttributes; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\t\t\tenabledAttributes[ i ] = 0;\n\t\t\tattributeDivisors[ i ] = 0;\n\n\t\t}\n\n\t\treturn {\n\n\t\t\t// for backward compatibility on non-VAO support browser\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false,\n\n\t\t\tnewAttributes: newAttributes,\n\t\t\tenabledAttributes: enabledAttributes,\n\t\t\tattributeDivisors: attributeDivisors,\n\t\t\tobject: vao,\n\t\t\tattributes: {}\n\n\t\t};\n\n\t}\n\n\tfunction needsUpdate( geometry ) {\n\n\t\tconst cachedAttributes = currentState.attributes;\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tif ( Object.keys( cachedAttributes ).length !== Object.keys( geometryAttributes ).length ) return true;\n\n\t\tfor ( const key in geometryAttributes ) {\n\n\t\t\tconst cachedAttribute = cachedAttributes[ key ];\n\t\t\tconst geometryAttribute = geometryAttributes[ key ];\n\n\t\t\tif ( cachedAttribute.attribute !== geometryAttribute ) return true;\n\n\t\t\tif ( cachedAttribute.data !== geometryAttribute.data ) return true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tfunction saveCache( geometry ) {\n\n\t\tconst cache = {};\n\t\tconst attributes = geometry.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\n\t\t\tconst data = {};\n\t\t\tdata.attribute = attribute;\n\n\t\t\tif ( attribute.data ) {\n\n\t\t\t\tdata.data = attribute.data;\n\n\t\t\t}\n\n\t\t\tcache[ key ] = data;\n\n\t\t}\n\n\t\tcurrentState.attributes = cache;\n\n\t}\n\n\tfunction initAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\n\t\tfor ( let i = 0, il = newAttributes.length; i < il; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\t\tconst attributeDivisors = currentState.attributeDivisors;\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tconst extension = capabilities.isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ capabilities.isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tconst newAttributes = currentState.newAttributes;\n\t\tconst enabledAttributes = currentState.enabledAttributes;\n\n\t\tfor ( let i = 0, il = enabledAttributes.length; i < il; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction vertexAttribPointer( index, size, type, normalized, stride, offset ) {\n\n\t\tif ( capabilities.isWebGL2 === true && ( type === 5124 || type === 5125 ) ) {\n\n\t\t\tgl.vertexAttribIPointer( index, size, type, normalized, stride, offset );\n\n\t\t} else {\n\n\t\t\tgl.vertexAttribPointer( index, size, type, normalized, stride, offset );\n\n\t\t}\n\n\t}\n\n\tfunction setupVertexAttributes( object, material, program, geometry ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tinitAttributes();\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tconst materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( const name in programAttributes ) {\n\n\t\t\tconst programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tconst geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tconst normalized = geometryAttribute.normalized;\n\t\t\t\t\tconst size = geometryAttribute.itemSize;\n\n\t\t\t\t\tconst attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\t\t\t\t\tconst bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst data = geometryAttribute.data;\n\t\t\t\t\t\tconst stride = data.stride;\n\t\t\t\t\t\tconst offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tenableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry._maxInstanceCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry._maxInstanceCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tenableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\t\t\t\t\t\tvertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tconst attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tconst buffer = attribute.buffer;\n\t\t\t\t\tconst type = attribute.type;\n\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tenableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\tgl.bindBuffer( 34962, buffer );\n\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\tgl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tconst value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tgl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tgl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tgl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\tgl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tdisableUnusedAttributes();\n\n\t}\n\n\tfunction dispose() {\n\n\t\treset();\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tfor ( const programId in programMap ) {\n\n\t\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t\t}\n\n\t\t\t\tdelete programMap[ programId ];\n\n\t\t\t}\n\n\t\t\tdelete bindingStates[ geometryId ];\n\n\t\t}\n\n\t}\n\n\tfunction releaseStatesOfGeometry( geometry ) {\n\n\t\tif ( bindingStates[ geometry.id ] === undefined ) return;\n\n\t\tconst programMap = bindingStates[ geometry.id ];\n\n\t\tfor ( const programId in programMap ) {\n\n\t\t\tconst stateMap = programMap[ programId ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ programId ];\n\n\t\t}\n\n\t\tdelete bindingStates[ geometry.id ];\n\n\t}\n\n\tfunction releaseStatesOfProgram( program ) {\n\n\t\tfor ( const geometryId in bindingStates ) {\n\n\t\t\tconst programMap = bindingStates[ geometryId ];\n\n\t\t\tif ( programMap[ program.id ] === undefined ) continue;\n\n\t\t\tconst stateMap = programMap[ program.id ];\n\n\t\t\tfor ( const wireframe in stateMap ) {\n\n\t\t\t\tdeleteVertexArrayObject( stateMap[ wireframe ].object );\n\n\t\t\t\tdelete stateMap[ wireframe ];\n\n\t\t\t}\n\n\t\t\tdelete programMap[ program.id ];\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\tresetDefaultState();\n\n\t\tif ( currentState === defaultState ) return;\n\n\t\tcurrentState = defaultState;\n\t\tbindVertexArrayObject( currentState.object );\n\n\t}\n\n\t// for backward-compatilibity\n\n\tfunction resetDefaultState() {\n\n\t\tdefaultState.geometry = null;\n\t\tdefaultState.program = null;\n\t\tdefaultState.wireframe = false;\n\n\t}\n\n\treturn {\n\n\t\tsetup: setup,\n\t\treset: reset,\n\t\tresetDefaultState: resetDefaultState,\n\t\tdispose: dispose,\n\t\treleaseStatesOfGeometry: releaseStatesOfGeometry,\n\t\treleaseStatesOfProgram: releaseStatesOfProgram,\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tdisableUnusedAttributes: disableUnusedAttributes\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tlet maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36338 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36338 ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( 35633, 36337 ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( 35632, 36337 ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tconst isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tlet precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tconst maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tconst logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tconst maxTextures = gl.getParameter( 34930 );\n\tconst maxVertexTextures = gl.getParameter( 35660 );\n\tconst maxTextureSize = gl.getParameter( 3379 );\n\tconst maxCubemapSize = gl.getParameter( 34076 );\n\n\tconst maxAttributes = gl.getParameter( 34921 );\n\tconst maxVertexUniforms = gl.getParameter( 36347 );\n\tconst maxVaryings = gl.getParameter( 36348 );\n\tconst maxFragmentUniforms = gl.getParameter( 36349 );\n\n\tconst vertexTextures = maxVertexTextures > 0;\n\tconst floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tconst floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tconst maxSamples = isWebGL2 ? gl.getParameter( 36183 ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n/**\n * @author tschw\n */\n\nfunction WebGLClipping() {\n\n\tconst scope = this;\n\n\tlet globalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false;\n\n\tconst plane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tconst enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4;\n\n\t\t\tlet dstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( let i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tlet nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tconst flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( let i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tconst extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tlet extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLGeometries( gl, attributes, info, bindingStates ) {\n\n\tconst geometries = new WeakMap();\n\tconst wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tconst geometry = event.target;\n\t\tconst buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( const name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tconst attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\tbindingStates.releaseStatesOfGeometry( geometry );\n\n\t\tif ( geometry.isInstancedBufferGeometry === true ) {\n\n\t\t\tdelete geometry._maxInstanceCount;\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tlet buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tconst geometryAttributes = geometry.attributes;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates.\n\n\t\tfor ( const name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], 34962 );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tconst morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( const name in morphAttributes ) {\n\n\t\t\tconst array = morphAttributes[ name ];\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], 34962 );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tconst indices = [];\n\n\t\tconst geometryIndex = geometry.index;\n\t\tconst geometryPosition = geometry.attributes.position;\n\t\tlet version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tconst array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( let i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tconst a = array[ i + 0 ];\n\t\t\t\tconst b = array[ i + 1 ];\n\t\t\t\tconst c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( let i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tconst a = i + 0;\n\t\t\t\tconst b = i + 1;\n\t\t\t\tconst c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\t// Updating index buffer in VAO now. See WebGLBindingStates\n\n\t\t//\n\n\t\tconst previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tconst currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tconst geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tlet mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tlet type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tlet extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tconst memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tconst render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase 4:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase 3:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase 0:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction numericalSort( a, b ) {\n\n\treturn a[ 0 ] - b[ 0 ];\n\n}\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tconst influencesList = {};\n\tconst morphInfluences = new Float32Array( 8 );\n\n\tconst workInfluences = [];\n\n\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\tworkInfluences[ i ] = [ i, 0 ];\n\n\t}\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tconst objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tconst length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tlet influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( let i = 0; i < length; i ++ ) {\n\n\t\t\tconst influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tif ( i < length && influences[ i ][ 1 ] ) {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = influences[ i ][ 0 ];\n\t\t\t\tworkInfluences[ i ][ 1 ] = influences[ i ][ 1 ];\n\n\t\t\t} else {\n\n\t\t\t\tworkInfluences[ i ][ 0 ] = Number.MAX_SAFE_INTEGER;\n\t\t\t\tworkInfluences[ i ][ 1 ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tworkInfluences.sort( numericalSort );\n\n\t\tconst morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tconst morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\tlet morphInfluencesSum = 0;\n\n\t\tfor ( let i = 0; i < 8; i ++ ) {\n\n\t\t\tconst influence = workInfluences[ i ];\n\t\t\tconst index = influence[ 0 ];\n\t\t\tconst value = influence[ 1 ];\n\n\t\t\tif ( index !== Number.MAX_SAFE_INTEGER && value ) {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== morphTargets[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== morphNormals[ index ] ) {\n\n\t\t\t\t\tgeometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\tmorphInfluencesSum += value;\n\n\t\t\t} else {\n\n\t\t\t\tif ( morphTargets && geometry.getAttribute( 'morphTarget' + i ) !== undefined ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphTarget' + i );\n\n\t\t\t\t}\n\n\t\t\t\tif ( morphNormals && geometry.getAttribute( 'morphNormal' + i ) !== undefined ) {\n\n\t\t\t\t\tgeometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t\t}\n\n\t\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tconst morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tlet updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\tconst geometry = object.geometry;\n\t\tconst buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, 34962 );\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n/**\n * @author Takahiro https://github.com/takahirox\n */\n\nfunction DataTexture2DArray( data, width, height, depth ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\n/**\n * @author Artur Trzesiok\n */\n\nfunction DataTexture3D( data, width, height, depth ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tconst texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\n/**\n * @author tschw\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nconst emptyTexture = new Texture();\nconst emptyTexture2dArray = new DataTexture2DArray();\nconst emptyTexture3d = new DataTexture3D();\nconst emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nconst arrayCacheF32 = [];\nconst arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nconst mat4array = new Float32Array( 16 );\nconst mat3array = new Float32Array( 9 );\nconst mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tconst firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tlet n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( let i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( let i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( let i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tlet r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\t}\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tconst cache = this.cache;\n\tconst elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tconst cache = this.cache;\n\tconst unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tconst cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tconst data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tconst n = v.length;\n\n\tconst units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( let i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tlet cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tconst seq = this.seq;\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nconst RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tconst path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tconst match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex;\n\n\t\tlet id = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tconst map = container.map;\n\t\t\tlet next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tconst n = gl.getProgramParameter( program, 35718 );\n\n\tfor ( let i = 0; i < n; ++ i ) {\n\n\t\tconst info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tconst u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tconst v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tconst r = [];\n\n\tfor ( let i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tconst u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShader( gl, type, string ) {\n\n\tconst shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nlet programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tconst lines = string.split( '\\n' );\n\n\tfor ( let i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported encoding:', encoding );\n\t\t\treturn [ 'Linear', '( value )' ];\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tconst status = gl.getShaderParameter( shader, 35713 );\n\tconst log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tconst source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tconst components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tlet toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tcase CustomToneMapping:\n\t\t\ttoneMappingName = 'Custom';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tconsole.warn( 'THREE.WebGLProgram: Unsupported toneMapping:', toneMapping );\n\t\t\ttoneMappingName = 'Linear';\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tconst chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tconst chunks = [];\n\n\tfor ( const name in defines ) {\n\n\t\tconst value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tconst attributes = {};\n\n\tconst n = gl.getProgramParameter( program, 35721 );\n\n\tfor ( let i = 0; i < n; i ++ ) {\n\n\t\tconst info = gl.getActiveAttrib( program, i );\n\t\tconst name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nconst includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tconst string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nconst deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nconst unrollLoopPattern = /#pragma unroll_loop_start[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}[\\s]+?#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tlet string = '';\n\n\tfor ( let i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tlet precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif ( parameters.precision === \"highp\" ) {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if ( parameters.precision === \"mediump\" ) {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if ( parameters.precision === \"lowp\" ) {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tlet shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tlet envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tlet envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tlet envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters, bindingStates ) {\n\n\tconst gl = renderer.getContext();\n\n\tconst defines = parameters.defines;\n\n\tlet vertexShader = parameters.vertexShader;\n\tlet fragmentShader = parameters.fragmentShader;\n\n\tconst shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tconst envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tconst envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tconst envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tconst gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tconst customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tconst customDefines = generateDefines( defines );\n\n\tconst program = gl.createProgram();\n\n\tlet prefixVertex, prefixFragment;\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t' attribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\tShaderChunk[ 'encodings_pars_fragment' ], // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.map ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcap ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMap ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMap ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMap ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tgetTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ),\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && ! parameters.isRawShaderMaterial ) {\n\n\t\tlet isGLSL3ShaderMaterial = false;\n\n\t\tconst versionRegex = /^\\s*#version\\s+300\\s+es\\s*\\n/;\n\n\t\tif ( parameters.isShaderMaterial &&\n\t\t\tvertexShader.match( versionRegex ) !== null &&\n\t\t\tfragmentShader.match( versionRegex ) !== null ) {\n\n\t\t\tisGLSL3ShaderMaterial = true;\n\n\t\t\tvertexShader = vertexShader.replace( versionRegex, '' );\n\t\t\tfragmentShader = fragmentShader.replace( versionRegex, '' );\n\n\t\t}\n\n\t\t// GLSL 3.0 conversion\n\n\t\tprefixVertex = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define varying in',\n\t\t\tisGLSL3ShaderMaterial ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\tisGLSL3ShaderMaterial ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tconst vertexGlsl = prefixVertex + vertexShader;\n\tconst fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tconst glVertexShader = WebGLShader( gl, 35633, vertexGlsl );\n\tconst glFragmentShader = WebGLShader( gl, 35632, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tconst programLog = gl.getProgramInfoLog( program ).trim();\n\t\tconst vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tconst fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tlet runnable = true;\n\t\tlet haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, 35714 ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tconst vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tconst fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), '35715', gl.getProgramParameter( program, 35715 ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// Clean up\n\n\t// Crashes in iOS9 and iOS10. #18402\n\t// gl.detachShader( program, glVertexShader );\n\t// gl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tlet cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tlet cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tbindingStates.releaseStatesOfProgram( this );\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLPrograms( renderer, extensions, capabilities, bindingStates ) {\n\n\tconst programs = [];\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tconst floatVertexTextures = capabilities.floatVertexTextures;\n\tconst maxVertexUniforms = capabilities.maxVertexUniforms;\n\tconst vertexTextures = capabilities.vertexTextures;\n\n\tlet precision = capabilities.precision;\n\n\tconst shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tconst parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\"\n\t];\n\n\tfunction getShaderObject( material, shaderID ) {\n\n\t\tlet shaderobject;\n\n\t\tif ( shaderID ) {\n\n\t\t\tconst shader = ShaderLib[ shaderID ];\n\n\t\t\tshaderobject = {\n\t\t\t\tname: material.name || material.type,\n\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tshaderobject = {\n\t\t\t\tname: material.name || material.type,\n\t\t\t\tuniforms: material.uniforms,\n\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t};\n\n\t\t}\n\n\t\treturn shaderobject;\n\n\t}\n\n\tfunction allocateBones( object ) {\n\n\t\tconst skeleton = object.skeleton;\n\t\tconst bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tconst nVertexUniforms = maxVertexUniforms;\n\t\t\tconst nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tconst maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tlet encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tfunction getParameters( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tconst envMap = material.envMap || environment;\n\n\t\tconst shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tconst maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst shaderobject = getShaderObject( material, shaderID );\n\t\tmaterial.onBeforeCompile( shaderobject, renderer );\n\n\t\tconst currentRenderTarget = renderer.getRenderTarget();\n\n\t\tconst parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: shaderobject.name,\n\n\t\t\tuniforms: shaderobject.uniforms,\n\t\t\tvertexShader: shaderobject.vertexShader,\n\t\t\tfragmentShader: shaderobject.fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial,\n\t\t\tisShaderMaterial: material.isShaderMaterial,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.get( 'EXT_frag_depth' ) !== null,\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.get( 'WEBGL_draw_buffers' ) !== null,\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) !== null,\n\n\t\t\tcustomProgramCacheKey: material.customProgramCacheKey()\n\n\t\t};\n\n\t\treturn parameters;\n\n\t}\n\n\tfunction getProgramCacheKey( parameters ) {\n\n\t\tconst array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( const name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === undefined ) {\n\n\t\t\tfor ( let i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.customProgramCacheKey );\n\n\t\treturn array.join();\n\n\t}\n\n\tfunction acquireProgram( parameters, cacheKey ) {\n\n\t\tlet program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( let p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tconst preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters, bindingStates );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t}\n\n\tfunction releaseProgram( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tconst i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tgetParameters: getParameters,\n\t\tgetProgramCacheKey: getProgramCacheKey,\n\t\tacquireProgram: acquireProgram,\n\t\treleaseProgram: releaseProgram,\n\t\t// Exposed for resource monitoring & error feedback via renderer.info:\n\t\tprograms: programs\n\t};\n\n}\n\n/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tlet properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tlet map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tconst renderItems = [];\n\tlet renderItemsIndex = 0;\n\n\tconst opaque = [];\n\tconst transparent = [];\n\n\tconst defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tlet renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tconst renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( let i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tconst renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tlet lists = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tconst scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\tlists.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tconst cameras = lists.get( scene );\n\t\tlet list;\n\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction UniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tconst lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tlet uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowNormalBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nlet nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tconst cache = new UniformsCache();\n\n\tconst shadowCache = ShadowUniformsCache();\n\n\tconst state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( let i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tconst vector3 = new Vector3();\n\tconst matrix4 = new Matrix4();\n\tconst matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tlet r = 0, g = 0, b = 0;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tlet directionalLength = 0;\n\t\tlet pointLength = 0;\n\t\tlet spotLength = 0;\n\t\tlet rectAreaLength = 0;\n\t\tlet hemiLength = 0;\n\n\t\tlet numDirectionalShadows = 0;\n\t\tlet numPointShadows = 0;\n\t\tlet numSpotShadows = 0;\n\n\t\tconst viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( let i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\n\t\t\tconst color = light.color;\n\t\t\tconst intensity = light.intensity;\n\t\t\tconst distance = light.distance;\n\n\t\t\tconst shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( let j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tconst shadow = light.shadow;\n\n\t\t\t\t\tconst shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowNormalBias = shadow.normalBias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tconst uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tconst hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLRenderState() {\n\n\tconst lights = new WebGLLights();\n\n\tconst lightsArray = [];\n\tconst shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tconst state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tlet renderStates = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tconst scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\trenderStates.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tlet renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\nvar vsm_frag = \"uniform sampler2D shadow_pass;\\nuniform vec2 resolution;\\nuniform float radius;\\n#include <packing>\\nvoid main() {\\n  float mean = 0.0;\\n  float squared_mean = 0.0;\\n\\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\\n    #ifdef HORIZONAL_PASS\\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\\n      mean += distribution.x;\\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\\n    #else\\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\\n      mean += depth;\\n      squared_mean += depth * depth;\\n    #endif\\n  }\\n  mean = mean * HALF_SAMPLE_RATE;\\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\\n  float std_dev = sqrt( squared_mean - mean * mean );\\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\\n}\";\n\nvar vsm_vert = \"void main() {\\n\\tgl_Position = vec4( position, 1.0 );\\n}\";\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tlet _frustum = new Frustum();\n\n\tconst _shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tconst shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tconst shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tconst shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\n\tconst fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tconst fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tconst scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tconst currentRenderTarget = _renderer.getRenderTarget();\n\t\tconst activeCubeFace = _renderer.getActiveCubeFace();\n\t\tconst activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tconst _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( let i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tconst light = lights[ i ];\n\t\t\tconst shadow = light.shadow;\n\n\t\t\tif ( shadow.autoUpdate === false && shadow.needsUpdate === false ) continue;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tconst shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tconst pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tconst pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tconst viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( let vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tconst viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t\tshadow.needsUpdate = false;\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tconst geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tconst index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tlet material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, geometry, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tlet result = null;\n\n\t\tlet getMaterialVariant = getDepthMaterialVariant;\n\t\tlet customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tlet useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t}\n\n\t\t\tlet useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tconst keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tlet materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tlet cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tconst geometry = _objects.update( object );\n\t\t\t\tconst material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\tfor ( let k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tconst group = groups[ k ];\n\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tconst depthMaterial = getDepthMaterial( object, geometry, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tlet locked = false;\n\n\t\tconst color = new Vector4();\n\t\tlet currentColorMask = null;\n\t\tconst currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentDepthMask = null;\n\t\tlet currentDepthFunc = null;\n\t\tlet currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( 2929 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( 2929 );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 512 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 519 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 513 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 514 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 518 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 516 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 517 );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( 515 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tlet locked = false;\n\n\t\tlet currentStencilMask = null;\n\t\tlet currentStencilFunc = null;\n\t\tlet currentStencilRef = null;\n\t\tlet currentStencilFuncMask = null;\n\t\tlet currentStencilFail = null;\n\t\tlet currentStencilZFail = null;\n\t\tlet currentStencilZPass = null;\n\t\tlet currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( 2960 );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( 2960 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tconst colorBuffer = new ColorBuffer();\n\tconst depthBuffer = new DepthBuffer();\n\tconst stencilBuffer = new StencilBuffer();\n\n\tlet enabledCapabilities = {};\n\n\tlet currentProgram = null;\n\n\tlet currentBlendingEnabled = null;\n\tlet currentBlending = null;\n\tlet currentBlendEquation = null;\n\tlet currentBlendSrc = null;\n\tlet currentBlendDst = null;\n\tlet currentBlendEquationAlpha = null;\n\tlet currentBlendSrcAlpha = null;\n\tlet currentBlendDstAlpha = null;\n\tlet currentPremultipledAlpha = false;\n\n\tlet currentFlipSided = null;\n\tlet currentCullFace = null;\n\n\tlet currentLineWidth = null;\n\n\tlet currentPolygonOffsetFactor = null;\n\tlet currentPolygonOffsetUnits = null;\n\n\tconst maxTextures = gl.getParameter( 35661 );\n\n\tlet lineWidthAvailable = false;\n\tlet version = 0;\n\tconst glVersion = gl.getParameter( 7938 );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tlet currentTextureSlot = null;\n\tlet currentBoundTextures = {};\n\n\tconst currentScissor = new Vector4();\n\tconst currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tconst data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tconst texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, 10241, 9728 );\n\t\tgl.texParameteri( type, 10240, 9728 );\n\n\t\tfor ( let i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, 6408, 1, 1, 0, 6408, 5121, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tconst emptyTextures = {};\n\temptyTextures[ 3553 ] = createTexture( 3553, 3553, 1 );\n\temptyTextures[ 34067 ] = createTexture( 34067, 34069, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( 2929 );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( 2884 );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tconst equationToGL = {\n\t\t[ AddEquation ]: 32774,\n\t\t[ SubtractEquation ]: 32778,\n\t\t[ ReverseSubtractEquation ]: 32779\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = 32775;\n\t\tequationToGL[ MaxEquation ] = 32776;\n\n\t} else {\n\n\t\tconst extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tconst factorToGL = {\n\t\t[ ZeroFactor ]: 0,\n\t\t[ OneFactor ]: 1,\n\t\t[ SrcColorFactor ]: 768,\n\t\t[ SrcAlphaFactor ]: 770,\n\t\t[ SrcAlphaSaturateFactor ]: 776,\n\t\t[ DstColorFactor ]: 774,\n\t\t[ DstAlphaFactor ]: 772,\n\t\t[ OneMinusSrcColorFactor ]: 769,\n\t\t[ OneMinusSrcAlphaFactor ]: 771,\n\t\t[ OneMinusDstColorFactor ]: 775,\n\t\t[ OneMinusDstAlphaFactor ]: 773\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( 3042 );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( 3042 );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( 32774 );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 1, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 1, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 0, 769, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 0, 768, 0, 770 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( 770, 771, 1, 771 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 770, 1 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 769 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( 0, 768 );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( 2884 )\n\t\t\t: enable( 2884 );\n\n\t\tlet flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tconst stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( 2304 );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( 2305 );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( 2884 );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( 1029 );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( 1028 );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( 1032 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 2884 );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( 32823 );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( 32823 );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( 3089 );\n\n\t\t} else {\n\n\t\t\tdisable( 3089 );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = 33984 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tlet boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tconst boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\tconst maxTextures = capabilities.maxTextures;\n\tconst maxCubemapSize = capabilities.maxCubemapSize;\n\tconst maxTextureSize = capabilities.maxTextureSize;\n\tconst maxSamples = capabilities.maxSamples;\n\n\tconst _videoTextures = new WeakMap();\n\tlet _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tlet useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tlet scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tconst floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tconst width = floor( scale * image.width );\n\t\t\t\tconst height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tconst canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tconst context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tlet internalFormat = glFormat;\n\n\t\tif ( glFormat === 6403 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 33326;\n\t\t\tif ( glType === 5131 ) internalFormat = 33325;\n\t\t\tif ( glType === 5121 ) internalFormat = 33321;\n\n\t\t}\n\n\t\tif ( glFormat === 6407 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34837;\n\t\t\tif ( glType === 5131 ) internalFormat = 34843;\n\t\t\tif ( glType === 5121 ) internalFormat = 32849;\n\n\t\t}\n\n\t\tif ( glFormat === 6408 ) {\n\n\t\t\tif ( glType === 5126 ) internalFormat = 34836;\n\t\t\tif ( glType === 5131 ) internalFormat = 34842;\n\t\t\tif ( glType === 5121 ) internalFormat = 32856;\n\n\t\t}\n\n\t\tif ( internalFormat === 33325 || internalFormat === 33326 ||\n\t\t\tinternalFormat === 34842 || internalFormat === 34836 ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn 9728;\n\n\t\t}\n\n\t\treturn 9729;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tconst texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tconst renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tlet textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tconst textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tconst image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 35866, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 32879, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tconst textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tinitTexture( textureProperties, texture );\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\t\t_gl.pixelStorei( 37440, texture.flipY );\n\n\t\t\tconst isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\t\tconst isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tconst cubeImage = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconst image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\t\tsetTextureParameters( 34067, texture, supportsMips );\n\n\t\t\tlet mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tconst mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( 34069 + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\tfor ( let j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tconst mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tstate.texImage2D( 34069 + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( 34067, texture, image.width, image.height );\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t} else {\n\n\t\t\tstate.activeTexture( 33984 + slot );\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( 34067, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tconst wrappingToGL = {\n\t\t[ RepeatWrapping ]: 10497,\n\t\t[ ClampToEdgeWrapping ]: 33071,\n\t\t[ MirroredRepeatWrapping ]: 33648\n\t};\n\n\tconst filterToGL = {\n\t\t[ NearestFilter ]: 9728,\n\t\t[ NearestMipmapNearestFilter ]: 9984,\n\t\t[ NearestMipmapLinearFilter ]: 9986,\n\n\t\t[ LinearFilter ]: 9729,\n\t\t[ LinearMipmapNearestFilter ]: 9985,\n\t\t[ LinearMipmapLinearFilter ]: 9987\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, 10242, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, 10243, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, 10241, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, 10242, 33071 );\n\t\t\t_gl.texParameteri( textureType, 10243, 33071 );\n\n\t\t\tif ( textureType === 32879 || textureType === 35866 ) {\n\n\t\t\t\t_gl.texParameteri( textureType, 32882, 33071 );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, 10240, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, 10241, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tlet textureType = 3553;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = 35866;\n\t\tif ( texture.isDataTexture3D ) textureType = 32879;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( 33984 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( 37440, texture.flipY );\n\t\t_gl.pixelStorei( 37441, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, texture.unpackAlignment );\n\n\t\tconst needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tconst image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tconst supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format );\n\n\t\tlet glType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tlet mipmap;\n\t\tconst mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = 6402;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = 35056;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = 33189; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === 6402 ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = 34041;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( 35866, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( 32879, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( let i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( 3553, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( 3553, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t_gl.framebufferTexture2D( 36160, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( 36161, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tlet glInternalFormat = 33189;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = 36012;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = 33190;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 36096, 36161, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, 35056, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, 34041, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( 36160, 33306, 36161, renderbuffer );\n\n\t\t} else {\n\n\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( 36161, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tconst isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tconst webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 36096, 3553, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( 36160, 33306, 3553, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( 36160, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tconst renderTargetProperties = properties.get( renderTarget );\n\t\tconst textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tconst isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tconst isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\n\n\t\t\trenderTarget.texture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tconst glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tconst glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tconst glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tconst samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( 36161, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( 36160, 36064, 36161, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( 36161, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( 34067, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 34067, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, 36064, 34069 + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 34067, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 34067, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( 3553, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( 3553, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, 36064, 3553 );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( 3553, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( 3553, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tconst texture = renderTarget.texture;\n\t\tconst supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tconst target = renderTarget.isWebGLCubeRenderTarget ? 34067 : 3553;\n\t\t\tconst webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tconst renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( 36008, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( 36009, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tconst width = renderTarget.width;\n\t\t\t\tconst height = renderTarget.height;\n\t\t\t\tlet mask = 16384;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= 256;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= 1024;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, 9728 );\n\n\t\t\t\t_gl.bindFramebuffer( 36160, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tconst frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tlet warnedTexture2D = false;\n\tlet warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\n\t\t// TODO: unify these code paths\n\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t// this function alone should take care of cube textures\n\t\t\tsetTextureCube( texture, slot );\n\n\t\t} else {\n\n\t\t\t// assumed: texture property of THREE.WebGLCubeRenderTarget\n\t\t\tsetTextureCubeDynamic( texture, slot );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\n/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tconst isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tlet extension;\n\n\t\tif ( p === UnsignedByteType ) return 5121;\n\t\tif ( p === UnsignedShort4444Type ) return 32819;\n\t\tif ( p === UnsignedShort5551Type ) return 32820;\n\t\tif ( p === UnsignedShort565Type ) return 33635;\n\n\t\tif ( p === ByteType ) return 5120;\n\t\tif ( p === ShortType ) return 5122;\n\t\tif ( p === UnsignedShortType ) return 5123;\n\t\tif ( p === IntType ) return 5124;\n\t\tif ( p === UnsignedIntType ) return 5125;\n\t\tif ( p === FloatType ) return 5126;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return 5131;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return 6406;\n\t\tif ( p === RGBFormat ) return 6407;\n\t\tif ( p === RGBAFormat ) return 6408;\n\t\tif ( p === LuminanceFormat ) return 6409;\n\t\tif ( p === LuminanceAlphaFormat ) return 6410;\n\t\tif ( p === DepthFormat ) return 6402;\n\t\tif ( p === DepthStencilFormat ) return 34041;\n\t\tif ( p === RedFormat ) return 6403;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return 36244;\n\t\tif ( p === RGFormat ) return 33319;\n\t\tif ( p === RGIntegerFormat ) return 33320;\n\t\tif ( p === RGBIntegerFormat ) return 36248;\n\t\tif ( p === RGBAIntegerFormat ) return 36249;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return 34042;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebXRController() {\n\n\tthis._targetRay = null;\n\tthis._grip = null;\n\n}\n\nObject.assign( WebXRController.prototype, {\n\n\tconstructor: WebXRController,\n\n\tgetTargetRaySpace: function () {\n\n\t\tif ( this._targetRay === null ) {\n\n\t\t\tthis._targetRay = new Group();\n\t\t\tthis._targetRay.matrixAutoUpdate = false;\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\treturn this._targetRay;\n\n\t},\n\n\tgetGripSpace: function () {\n\n\t\tif ( this._grip === null ) {\n\n\t\t\tthis._grip = new Group();\n\t\t\tthis._grip.matrixAutoUpdate = false;\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this._grip;\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.dispatchEvent( event );\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.dispatchEvent( event );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function ( inputSource ) {\n\n\t\tthis.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\tif ( this._targetRay !== null ) {\n\n\t\t\tthis._targetRay.visible = false;\n\n\t\t}\n\n\t\tif ( this._grip !== null ) {\n\n\t\t\tthis._grip.visible = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdate: function ( inputSource, frame, referenceSpace ) {\n\n\t\tlet inputPose = null;\n\t\tlet gripPose = null;\n\n\t\tconst targetRay = this._targetRay;\n\t\tconst grip = this._grip;\n\n\t\tif ( inputSource ) {\n\n\t\t\tif ( targetRay !== null ) {\n\n\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\ttargetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\ttargetRay.matrix.decompose( targetRay.position, targetRay.rotation, targetRay.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( grip !== null && inputSource.gripSpace ) {\n\n\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\tgrip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\tgrip.matrix.decompose( grip.position, grip.rotation, grip.scale );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( targetRay !== null ) {\n\n\t\t\ttargetRay.visible = ( inputPose !== null );\n\n\t\t}\n\n\t\tif ( grip !== null ) {\n\n\t\t\tgrip.visible = ( gripPose !== null );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebXRManager( renderer, gl ) {\n\n\tconst scope = this;\n\n\tlet session = null;\n\n\tlet framebufferScaleFactor = 1.0;\n\n\tlet referenceSpace = null;\n\tlet referenceSpaceType = 'local-floor';\n\n\tlet pose = null;\n\n\tconst controllers = [];\n\tconst inputSourcesMap = new Map();\n\n\t//\n\n\tconst cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tconst cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tconst cameras = [ cameraL, cameraR ];\n\n\tconst cameraVR = new ArrayCamera();\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tlet _currentDepthNear = null;\n\tlet _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getTargetRaySpace();\n\n\t};\n\n\tthis.getControllerGrip = function ( index ) {\n\n\t\tlet controller = controllers[ index ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new WebXRController();\n\t\t\tcontrollers[ index ] = controller;\n\n\t\t}\n\n\t\treturn controller.getGripSpace();\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tconst controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.disconnect( inputSource );\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tfunction onRequestReferenceSpace( value ) {\n\n\t\treferenceSpace = value;\n\n\t\tanimation.setContext( session );\n\t\tanimation.start();\n\n\t\tscope.isPresenting = true;\n\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change framebuffer scale while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t\tif ( scope.isPresenting === true ) {\n\n\t\t\tconsole.warn( 'THREE.WebXRManager: Cannot change reference space type while presenting.' );\n\n\t\t}\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\n\t\t\tconst attributes = gl.getContextAttributes();\n\n\t\t\tif ( attributes.xrCompatible !== true ) {\n\n\t\t\t\tgl.makeXRCompatible();\n\n\t\t\t}\n\n\t\t\tconst layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tconst baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\n\n\t\t\t//\n\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\n\n\t\t}\n\n\t};\n\n\tfunction updateInputSources( event ) {\n\n\t\tconst inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( let i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tconst inputSource = event.removed[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( let i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tconst inputSource = event.added[ i ];\n\t\t\tconst controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tconst cameraLPos = new Vector3();\n\tconst cameraRPos = new Vector3();\n\n\t/**\n\t * @author jsantell / https://www.jsantell.com/\n\t *\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tconst ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tconst projL = cameraL.projectionMatrix.elements;\n\t\tconst projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tconst near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tconst far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tconst topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tconst bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tconst leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tconst rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tconst left = near * leftFov;\n\t\tconst right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tconst zOffset = ipd / ( - leftFov + rightFov );\n\t\tconst xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tconst near2 = near + zOffset;\n\t\tconst far2 = far + zOffset;\n\t\tconst left2 = left - xOffset;\n\t\tconst right2 = right + ( ipd - xOffset );\n\t\tconst top2 = topFov * far / far2 * near2;\n\t\tconst bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tconst parent = camera.parent;\n\t\tconst cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( let i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\tconst children = camera.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\t// update projection matrix for proper view frustum culling\n\n\t\tif ( cameras.length === 2 ) {\n\n\t\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\t} else {\n\n\t\t\t// assume single camera setup (AR)\n\n\t\t\tcameraVR.projectionMatrix.copy( cameraL.projectionMatrix );\n\n\t\t}\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tconst views = pose.views;\n\t\t\tconst baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tlet cameraVRNeedsUpdate = false;\n\n\t\t\t// check if it's necessary to rebuild cameraVR's camera list\n\n\t\t\tif ( views.length !== cameraVR.cameras.length ) {\n\n\t\t\t\tcameraVR.cameras.length = 0;\n\t\t\t\tcameraVRNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tconst view = views[ i ];\n\t\t\t\tconst viewport = baseLayer.getViewport( view );\n\n\t\t\t\tconst camera = cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t\tif ( cameraVRNeedsUpdate === true ) {\n\n\t\t\t\t\tcameraVR.cameras.push( camera );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tconst inputSources = session.inputSources;\n\n\t\tfor ( let i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tconst controller = controllers[ i ];\n\t\t\tconst inputSource = inputSources[ i ];\n\n\t\t\tcontroller.update( inputSource, frame, referenceSpace );\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLMaterials( properties ) {\n\n\tfunction refreshFogUniforms( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshMaterialUniforms( uniforms, material, environment, pixelRatio, height ) {\n\n\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\n\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsLambert( uniforms, material );\n\n\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsToon( uniforms, material );\n\n\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsPhong( uniforms, material );\n\n\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material, environment );\n\n\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\trefreshUniformsPhysical( uniforms, material, environment );\n\n\t\t\t} else {\n\n\t\t\t\trefreshUniformsStandard( uniforms, material, environment );\n\n\t\t\t}\n\n\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsMatcap( uniforms, material );\n\n\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDepth( uniforms, material );\n\n\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsDistance( uniforms, material );\n\n\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\trefreshUniformsCommon( uniforms, material );\n\t\t\trefreshUniformsNormal( uniforms, material );\n\n\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\trefreshUniformsLine( uniforms, material );\n\n\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\trefreshUniformsDash( uniforms, material );\n\n\t\t\t}\n\n\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\trefreshUniformsPoints( uniforms, material, pixelRatio, height );\n\n\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\trefreshUniformsSprites( uniforms, material );\n\n\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\tuniforms.color.value.copy( material.color );\n\t\t\tuniforms.opacity.value = material.opacity;\n\n\t\t} else if ( material.isShaderMaterial ) {\n\n\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tconst envMap = material.envMap || environment;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tlet uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material, pixelRatio, height ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * pixelRatio;\n\t\tuniforms.scale.value = height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tlet uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material, environment ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap || environment ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, environment ) {\n\n\t\trefreshUniformsStandard( uniforms, material, environment );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transparency.value = material.transparency;\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\trefreshFogUniforms: refreshFogUniforms,\n\t\trefreshMaterialUniforms: refreshMaterialUniforms\n\t};\n\n}\n\n/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tlet currentRenderList = null;\n\tlet currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = NoToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tconst _this = this;\n\n\tlet _isContextLost = false;\n\n\t// internal state cache\n\n\tlet _framebuffer = null;\n\n\tlet _currentActiveCubeFace = 0;\n\tlet _currentActiveMipmapLevel = 0;\n\tlet _currentRenderTarget = null;\n\tlet _currentFramebuffer = null;\n\tlet _currentMaterialId = - 1;\n\n\tlet _currentCamera = null;\n\tlet _currentArrayCamera = null;\n\n\tconst _currentViewport = new Vector4();\n\tconst _currentScissor = new Vector4();\n\tlet _currentScissorTest = null;\n\n\t//\n\n\tlet _width = _canvas.width;\n\tlet _height = _canvas.height;\n\n\tlet _pixelRatio = 1;\n\tlet _opaqueSort = null;\n\tlet _transparentSort = null;\n\n\tconst _viewport = new Vector4( 0, 0, _width, _height );\n\tconst _scissor = new Vector4( 0, 0, _width, _height );\n\tlet _scissorTest = false;\n\n\t// frustum\n\n\tconst _frustum = new Frustum();\n\n\t// clipping\n\n\tconst _clipping = new WebGLClipping();\n\tlet _clippingEnabled = false;\n\tlet _localClippingEnabled = false;\n\n\t// camera matrices cache\n\n\tconst _projScreenMatrix = new Matrix4();\n\n\tconst _vector3 = new Vector3();\n\n\tconst _emptyScene = { background: null, fog: null, environment: null, overrideMaterial: null, isScene: true };\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tlet _gl = _context;\n\n\tfunction getContext( contextNames, contextAttributes ) {\n\n\t\tfor ( let i = 0; i < contextNames.length; i ++ ) {\n\n\t\t\tconst contextName = contextNames[ i ];\n\t\t\tconst context = _canvas.getContext( contextName, contextAttributes );\n\t\t\tif ( context !== null ) return context;\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\ttry {\n\n\t\tconst contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tconst contextNames = [ 'webgl2', 'webgl', 'experimental-webgl' ];\n\n\t\t\tif ( _this.isWebGL1Renderer === true ) {\n\n\t\t\t\tcontextNames.shift();\n\n\t\t\t}\n\n\t\t\t_gl = getContext( contextNames, contextAttributes );\n\n\t\t\tif ( _gl === null ) {\n\n\t\t\t\tif ( getContext( contextNames ) ) {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tlet extensions, capabilities, state, info;\n\tlet properties, textures, attributes, geometries, objects;\n\tlet programCache, materials, renderLists, renderStates;\n\n\tlet background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tlet utils, bindingStates;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'OES_vertex_array_object' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tbindingStates = new WebGLBindingStates( _gl, extensions, attributes, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info, bindingStates );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities, bindingStates );\n\t\tmaterials = new WebGLMaterials( properties );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tconst xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tconst shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tconst extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tlet bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= 16384;\n\t\tif ( depth === undefined || depth ) bits |= 256;\n\t\tif ( stencil === undefined || stencil ) bits |= 1024;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\t\tbindingStates.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tconst material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tconst programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tbindingStates.initAttributes();\n\n\t\tconst buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.position );\n\t\t\t_gl.bufferData( 34962, object.positionArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.normal );\n\t\t\t_gl.bufferData( 34962, object.normalArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.uv );\n\t\t\t_gl.bufferData( 34962, object.uvArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( 34962, buffers.color );\n\t\t\t_gl.bufferData( 34962, object.colorArray, 35048 );\n\n\t\t\tbindingStates.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, 5126, false, 0, 0 );\n\n\t\t}\n\n\t\tbindingStates.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( 4, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = _emptyScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tconst frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\t//\n\n\t\tlet index = geometry.index;\n\t\tconst position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tlet rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t}\n\n\t\tbindingStates.setup( object, material, program, geometry, index );\n\n\t\tlet attribute;\n\t\tlet renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\t//\n\n\t\tconst dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tconst rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tconst rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tconst groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tconst groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tconst drawStart = Math.max( rangeStart, groupStart );\n\t\tconst drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tconst drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 4 );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tlet lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( 1 );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( 2 );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( 3 );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( 0 );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( 4 );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\tconst instanceCount = Math.min( geometry.instanceCount, geometry._maxInstanceCount );\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, instanceCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tconst compiled = new WeakMap();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tlet material = object.material;\n\n\t\t\tif ( material ) {\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( let i = 0; i < material.length; i ++ ) {\n\n\t\t\t\t\t\tlet material2 = material[ i ];\n\n\t\t\t\t\t\tif ( compiled.has( material2 ) === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( material2, scene, object );\n\t\t\t\t\t\t\tcompiled.set( material2 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( compiled.has( material ) === false ) {\n\n\t\t\t\t\tinitMaterial( material, scene, object );\n\t\t\t\t\tcompiled.set( material );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tlet onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tconst animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\t( callback === null ) ? animation.stop() : animation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tlet renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( camera !== undefined && camera.isCamera !== true ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost === true ) return;\n\n\t\t// reset caching for this frame\n\n\t\tbindingStates.resetDefaultState();\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled === true && xr.isPresenting === true ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\t\tif ( scene.isScene === true ) scene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled === true ) _clipping.beginShadows();\n\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled === true ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset === true ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tconst opaqueObjects = currentRenderList.opaque;\n\t\tconst transparentObjects = currentRenderList.transparent;\n\n\t\tif ( opaqueObjects.length > 0 ) renderObjects( opaqueObjects, scene, camera );\n\t\tif ( transparentObjects.length > 0 ) renderObjects( transparentObjects, scene, camera );\n\n\t\t//\n\n\t\tif ( scene.isScene === true ) scene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tconst visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst geometry = objects.update( object );\n\t\t\t\t\tconst material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tconst groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( let i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tconst group = groups[ i ];\n\t\t\t\t\t\t\tconst groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera ) {\n\n\t\tconst overrideMaterial = scene.isScene === true ? scene.overrideMaterial : null;\n\n\t\tfor ( let i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tconst renderItem = renderList[ i ];\n\n\t\t\tconst object = renderItem.object;\n\t\t\tconst geometry = renderItem.geometry;\n\t\t\tconst material = overrideMaterial === null ? renderItem.material : overrideMaterial;\n\t\t\tconst group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tconst cameras = camera.cameras;\n\n\t\t\t\tfor ( let j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tconst camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tconst program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\tbindingStates.reset();\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\tconst materialProperties = properties.get( material );\n\n\t\tconst lights = currentRenderState.state.lights;\n\t\tconst shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tconst lightsStateVersion = lights.state.version;\n\n\t\tconst parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\n\t\tconst programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tlet program = materialProperties.program;\n\t\tlet programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.outputEncoding = parameters.outputEncoding;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tconst programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( let i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( let i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tmaterialProperties.fog = scene.fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tconst progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\tif ( scene.isScene !== true ) scene = _emptyScene; // scene could be a Mesh, Line, Points, ...\n\n\t\ttextures.resetTextureUnits();\n\n\t\tconst fog = scene.fog;\n\t\tconst environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\tconst encoding = ( _currentRenderTarget === null ) ? _this.outputEncoding : _currentRenderTarget.texture.encoding;\n\n\t\tconst materialProperties = properties.get( material );\n\t\tconst lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled === true ) {\n\n\t\t\tif ( _localClippingEnabled === true || camera !== _currentCamera ) {\n\n\t\t\t\tconst useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== encoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tlet refreshProgram = false;\n\t\tlet refreshMaterial = false;\n\t\tlet refreshLights = false;\n\n\t\tconst program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tconst uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.isShadowMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tconst skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tconst bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tlet size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tconst boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tconst boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\tmaterials.refreshFogUniforms( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tmaterials.refreshMaterialUniforms( m_uniforms, material, environment, _pixelRatio, _height );\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( 36160, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tlet framebuffer = _framebuffer;\n\t\tlet isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tconst __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tconst textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( 36160, 36064, 34069 + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tlet framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tlet restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( 36160, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tconst texture = renderTarget.texture;\n\t\t\t\tconst textureFormat = texture.format;\n\t\t\t\tconst textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( 35739 ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( 35738 ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( 36160 ) === 36053 ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( 36160, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tconst levelScale = Math.pow( 2, - level );\n\t\tconst width = Math.floor( texture.image.width * levelScale );\n\t\tconst height = Math.floor( texture.image.height * levelScale );\n\t\tconst glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( 3553, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tconst width = srcTexture.image.width;\n\t\tconst height = srcTexture.image.height;\n\t\tconst glFormat = utils.convert( dstTexture.format );\n\t\tconst glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\t// As another texture upload may have changed pixelStorei\n\t\t// parameters, make sure they are correct for the dstTexture\n\t\t_gl.pixelStorei( 37440, dstTexture.flipY );\n\t\t_gl.pixelStorei( 37441, dstTexture.premultiplyAlpha );\n\t\t_gl.pixelStorei( 3317, dstTexture.unpackAlignment );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\tif ( srcTexture.isCompressedTexture ) {\n\n\t\t\t\t_gl.compressedTexSubImage2D( 3553, level, position.x, position.y, srcTexture.mipmaps[ 0 ].width, srcTexture.mipmaps[ 0 ].height, glFormat, srcTexture.mipmaps[ 0 ].data );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.texSubImage2D( 3553, level, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Generate mipmaps only when copying level 0\n\t\tif ( level === 0 && dstTexture.generateMipmaps ) _gl.generateMipmap( 3553 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGL1Renderer( parameters ) {\n\n\tWebGLRenderer.call( this, parameters );\n\n}\n\nWebGL1Renderer.prototype = Object.assign( Object.create( WebGLRenderer.prototype ), {\n\n\tconstructor: WebGL1Renderer,\n\n\tisWebGL1Renderer: true\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction FogExp2( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n}\n\nObject.assign( FogExp2.prototype, {\n\n\tisFogExp2: true,\n\n\tclone: function () {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t},\n\n\ttoJSON: function ( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Fog( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n}\n\nObject.assign( Fog.prototype, {\n\n\tisFog: true,\n\n\tclone: function () {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n} );\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( let i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = this.array.slice( 0 ).buffer;\n\n\t\t}\n\n\t\tconst array = new this.array.constructor( data.arrayBuffers[ this.array.buffer._uuid ] );\n\n\t\tconst ib = new InterleavedBuffer( array, this.stride );\n\t\tib.setUsage( this.usage );\n\n\t\treturn ib;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data.arrayBuffers === undefined ) {\n\n\t\t\tdata.arrayBuffers = {};\n\n\t\t}\n\n\t\t// generate UUID for array buffer if necessary\n\n\t\tif ( this.array.buffer._uuid === undefined ) {\n\n\t\t\tthis.array.buffer._uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tif ( data.arrayBuffers[ this.array.buffer._uuid ] === undefined ) {\n\n\t\t\tdata.arrayBuffers[ this.array.buffer._uuid ] = Array.prototype.slice.call( new Uint32Array( this.array.buffer ) );\n\n\t\t}\n\n\t\t//\n\n\t\treturn {\n\t\t\tuuid: this.uuid,\n\t\t\tbuffer: this.array.buffer._uuid,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tstride: this.stride\n\t\t};\n\n\t}\n\n} );\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nconst _vector$6 = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.name = '';\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( let i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector$6.x = this.getX( i );\n\t\t\t_vector$6.y = this.getY( i );\n\t\t\t_vector$6.z = this.getZ( i );\n\n\t\t\t_vector$6.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector$6.x, _vector$6.y, _vector$6.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( new this.array.constructor( array ), this.itemSize, this.normalized );\n\n\t\t} else {\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.clone( data );\n\n\t\t\t}\n\n\t\t\treturn new InterleavedBufferAttribute( data.interleavedBuffers[ this.data.uuid ], this.itemSize, this.offset, this.normalized );\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tif ( data === undefined ) {\n\n\t\t\tconsole.log( 'THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.' );\n\n\t\t\tconst array = [];\n\n\t\t\tfor ( let i = 0; i < this.count; i ++ ) {\n\n\t\t\t\tconst index = i * this.data.stride + this.offset;\n\n\t\t\t\tfor ( let j = 0; j < this.itemSize; j ++ ) {\n\n\t\t\t\t\tarray.push( this.data.array[ index + j ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// deinterleave data and save it as an ordinary buffer attribute for now\n\n\t\t\treturn {\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\ttype: this.array.constructor.name,\n\t\t\t\tarray: array,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t} else {\n\n\t\t\t// save as true interlaved attribtue\n\n\t\t\tif ( data.interleavedBuffers === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers = {};\n\n\t\t\t}\n\n\t\t\tif ( data.interleavedBuffers[ this.data.uuid ] === undefined ) {\n\n\t\t\t\tdata.interleavedBuffers[ this.data.uuid ] = this.data.toJSON( data );\n\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tisInterleavedBufferAttribute: true,\n\t\t\t\titemSize: this.itemSize,\n\t\t\t\tdata: this.data.uuid,\n\t\t\t\toffset: this.offset,\n\t\t\t\tnormalized: this.normalized\n\t\t\t};\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.rotation = 0;\n\n\tthis.sizeAttenuation = true;\n\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.rotation = source.rotation;\n\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nlet _geometry;\n\nconst _intersectPoint = new Vector3();\nconst _worldScale = new Vector3();\nconst _mvPosition = new Vector3();\n\nconst _alignedPosition = new Vector2();\nconst _rotatedPosition = new Vector2();\nconst _viewWorldMatrix = new Matrix4();\n\nconst _vA$1 = new Vector3();\nconst _vB$1 = new Vector3();\nconst _vC$1 = new Vector3();\n\nconst _uvA$1 = new Vector2();\nconst _uvB$1 = new Vector2();\nconst _uvC$1 = new Vector2();\n\nfunction Sprite( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tif ( _geometry === undefined ) {\n\n\t\t_geometry = new BufferGeometry();\n\n\t\tconst float32Array = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t] );\n\n\t\tconst interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t}\n\n\tthis.geometry = _geometry;\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\tthis.center = new Vector2( 0.5, 0.5 );\n\n}\n\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite,\n\n\tisSprite: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tconst rotation = this.material.rotation;\n\t\tlet sin, cos;\n\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tconst center = this.center;\n\n\t\ttransformVertex( _vA$1.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB$1.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC$1.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA$1.set( 0, 0 );\n\t\t_uvB$1.set( 1, 0 );\n\t\t_uvC$1.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tlet intersect = raycaster.ray.intersectTriangle( _vA$1, _vB$1, _vC$1, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB$1.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB$1.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA$1, _vC$1, _vB$1, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA$1, _vB$1, _vC$1, _uvA$1, _uvB$1, _uvC$1, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\tthis.material = source.material;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _v1$4 = new Vector3();\nconst _v2$2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis._currentLevel = 0;\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tconst levels = source.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tconst levels = this.levels;\n\n\t\tlet l;\n\n\t\tfor ( l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetCurrentLevel: function () {\n\n\t\treturn this._currentLevel;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = raycaster.ray.origin.distanceTo( _v1$4 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tconst levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1$4.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2$2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tconst distance = _v1$4.distanceTo( _v2$2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tlet i, l;\n\n\t\t\tfor ( i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tconst levels = this.levels;\n\n\t\tfor ( let i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tconst level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t}\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.bindMode = source.bindMode;\n\t\tthis.bindMatrix.copy( source.bindMatrix );\n\t\tthis.bindMatrixInverse.copy( source.bindMatrixInverse );\n\n\t\tthis.skeleton = source.skeleton;\n\n\t\treturn this;\n\n\t},\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tconst vector = new Vector4();\n\n\t\tconst skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( let i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tconst scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tboneTransform: ( function () {\n\n\t\tconst basePosition = new Vector3();\n\n\t\tconst skinIndex = new Vector4();\n\t\tconst skinWeight = new Vector4();\n\n\t\tconst vector = new Vector3();\n\t\tconst matrix = new Matrix4();\n\n\t\treturn function ( index, target ) {\n\n\t\t\tconst skeleton = this.skeleton;\n\t\t\tconst geometry = this.geometry;\n\n\t\t\tskinIndex.fromBufferAttribute( geometry.attributes.skinIndex, index );\n\t\t\tskinWeight.fromBufferAttribute( geometry.attributes.skinWeight, index );\n\n\t\t\tbasePosition.fromBufferAttribute( geometry.attributes.position, index ).applyMatrix4( this.bindMatrix );\n\n\t\t\ttarget.set( 0, 0, 0 );\n\n\t\t\tfor ( let i = 0; i < 4; i ++ ) {\n\n\t\t\t\tconst weight = skinWeight.getComponent( i );\n\n\t\t\t\tif ( weight !== 0 ) {\n\n\t\t\t\t\tconst boneIndex = skinIndex.getComponent( i );\n\n\t\t\t\t\tmatrix.multiplyMatrices( skeleton.bones[ boneIndex ].matrixWorld, skeleton.boneInverses[ boneIndex ] );\n\n\t\t\t\t\ttarget.addScaledVector( vector.copy( basePosition ).applyMatrix4( matrix ), weight );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn target.applyMatrix4( this.bindMatrixInverse );\n\n\t\t};\n\n\t}() )\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nconst _offsetMatrix = new Matrix4();\nconst _identityMatrix = new Matrix4();\n\nfunction Skeleton( bones, boneInverses ) {\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\n\n\tthis.frame = - 1;\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function () {\n\n\t\tconst bones = this.bones;\n\t\tconst boneInverses = this.boneInverses;\n\t\tconst boneMatrices = this.boneMatrices;\n\t\tconst boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( let i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tconst matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== undefined ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t},\n\n\tgetBoneByName: function ( name ) {\n\n\t\tfor ( let i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tdispose: function ( ) {\n\n\t\tif ( this.boneTexture ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = undefined;\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _instanceLocalMatrix = new Matrix4();\nconst _instanceWorldMatrix = new Matrix4();\n\nconst _instanceIntersects = [];\n\nconst _mesh = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\n\tthis.count = count;\n\n\tthis.frustumCulled = false;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tMesh.prototype.copy.call( this, source );\n\n\t\tthis.instanceMatrix.copy( source.instanceMatrix );\n\t\tthis.count = source.count;\n\n\t\treturn this;\n\n\t},\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( let instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tfor ( let i = 0, l = _instanceIntersects.length; i < l; i ++ ) {\n\n\t\t\t\tconst intersect = _instanceIntersects[ i ];\n\t\t\t\tintersect.instanceId = instanceId;\n\t\t\t\tintersect.object = this;\n\t\t\t\tintersects.push( intersect );\n\n\t\t\t}\n\n\t\t\t_instanceIntersects.length = 0;\n\n\t\t}\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _start = new Vector3();\nconst _end = new Vector3();\nconst _inverseMatrix$1 = new Matrix4();\nconst _ray$1 = new Ray();\nconst _sphere$2 = new Sphere();\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [ 0 ];\n\n\t\t\t\tfor ( let i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst lineDistances = geometry.lineDistances;\n\n\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\tfor ( let i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Line.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$2.copy( geometry.boundingSphere );\n\t\t_sphere$2.applyMatrix4( matrixWorld );\n\t\t_sphere$2.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$2 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$1.getInverse( matrixWorld );\n\t\t_ray$1.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$1 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tconst vStart = new Vector3();\n\t\tconst vEnd = new Vector3();\n\t\tconst interSegment = new Vector3();\n\t\tconst interRay = new Vector3();\n\t\tconst step = ( this && this.isLineSegments ) ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\t\t\t\t\tconst b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst nbVertices = vertices.length;\n\n\t\t\tfor ( let i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tconst distSq = _ray$1.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tconst distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _start$1 = new Vector3();\nconst _end$1 = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tconst positionAttribute = geometry.attributes.position;\n\t\t\t\tconst lineDistances = [];\n\n\t\t\t\tfor ( let i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start$1.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end$1.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tconst vertices = geometry.vertices;\n\t\t\tconst lineDistances = geometry.lineDistances;\n\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t_start$1.copy( vertices[ i ] );\n\t\t\t\t_end$1.copy( vertices[ i + 1 ] );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start$1.distanceTo( _end$1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mgreter / http://github.com/mgreter\n */\n\nfunction LineLoop( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineLoop';\n\n}\n\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineLoop,\n\n\tisLineLoop: true,\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nconst _inverseMatrix$2 = new Matrix4();\nconst _ray$2 = new Ray();\nconst _sphere$3 = new Sphere();\nconst _position$1 = new Vector3();\n\nfunction Points( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new PointsMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.material = source.material;\n\t\tthis.geometry = source.geometry;\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tconst geometry = this.geometry;\n\t\tconst matrixWorld = this.matrixWorld;\n\t\tconst threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere$3.copy( geometry.boundingSphere );\n\t\t_sphere$3.applyMatrix4( matrixWorld );\n\t\t_sphere$3.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere$3 ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix$2.getInverse( matrixWorld );\n\t\t_ray$2.copy( raycaster.ray ).applyMatrix4( _inverseMatrix$2 );\n\n\t\tconst localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tconst localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst index = geometry.index;\n\t\t\tconst attributes = geometry.attributes;\n\t\t\tconst positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tconst indices = index.array;\n\n\t\t\t\tfor ( let i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst a = indices[ i ];\n\n\t\t\t\t\t_position$1.fromArray( positions, a * 3 );\n\n\t\t\t\t\ttestPoint( _position$1, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( let i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t_position$1.fromArray( positions, i * 3 );\n\n\t\t\t\t\ttestPoint( _position$1, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst vertices = geometry.vertices;\n\n\t\t\tfor ( let i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tconst geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tconst morphAttributes = geometry.morphAttributes;\n\t\t\tconst keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tconst morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( let m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tconst name = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconst morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tconst rayPointDistanceSq = _ray$2.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tconst intersectPoint = new Vector3();\n\n\t\t_ray$2.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tconst distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.format = format !== undefined ? format : RGBFormat;\n\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\tthis.generateMipmaps = false;\n\n}\n\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\n\n\tconstructor: VideoTexture,\n\n\tisVideoTexture: true,\n\n\tupdate: function () {\n\n\t\tconst video = this.image;\n\n\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction CanvasTexture( canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, canvas, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.needsUpdate = true;\n\n}\n\nCanvasTexture.prototype = Object.create( Texture.prototype );\nCanvasTexture.prototype.constructor = CanvasTexture;\nCanvasTexture.prototype.isCanvasTexture = true;\n\n/**\n * @author Matt DesLauriers / @mattdesl\n * @author atix / arthursilber.de\n */\n\nfunction DepthTexture( width, height, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, format ) {\n\n\tformat = format !== undefined ? format : DepthFormat;\n\n\tif ( format !== DepthFormat && format !== DepthStencilFormat ) {\n\n\t\tthrow new Error( 'DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat' );\n\n\t}\n\n\tif ( type === undefined && format === DepthFormat ) type = UnsignedShortType;\n\tif ( type === undefined && format === DepthStencilFormat ) type = UnsignedInt248Type;\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.image = { width: width, height: height };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.flipY = false;\n\tthis.generateMipmaps\t= false;\n\n}\n\nDepthTexture.prototype = Object.create( Texture.prototype );\nDepthTexture.prototype.constructor = DepthTexture;\nDepthTexture.prototype.isDepthTexture = true;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WireframeGeometry( geometry ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'WireframeGeometry';\n\n\t// buffer\n\n\tconst vertices = [];\n\n\t// helper variables\n\n\tconst edge = [ 0, 0 ], edges = {};\n\tconst keys = [ 'a', 'b', 'c' ];\n\n\t// different logic for Geometry and BufferGeometry\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\t// create a data structure that contains all edges without duplicates\n\n\t\tconst faces = geometry.faces;\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\tconst edge1 = face[ keys[ j ] ];\n\t\t\t\tconst edge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices\n\n\t\tfor ( const key in edges ) {\n\n\t\t\tconst e = edges[ key ];\n\n\t\t\tlet vertex = geometry.vertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = geometry.vertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t} else if ( geometry && geometry.isBufferGeometry ) {\n\n\t\tlet vertex = new Vector3();\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\t// indexed BufferGeometry\n\n\t\t\tconst position = geometry.attributes.position;\n\t\t\tconst indices = geometry.index;\n\t\t\tlet groups = geometry.groups;\n\n\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t}\n\n\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\tfor ( let o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\tconst group = groups[ o ];\n\n\t\t\t\tconst start = group.start;\n\t\t\t\tconst count = group.count;\n\n\t\t\t\tfor ( let i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tconst edge1 = indices.getX( i + j );\n\t\t\t\t\t\tconst edge2 = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\t\tconst key = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( const key in edges ) {\n\n\t\t\t\tconst e = edges[ key ];\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// non-indexed BufferGeometry\n\n\t\t\tconst position = geometry.attributes.position;\n\n\t\t\tfor ( let i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\tconst index1 = 3 * i + j;\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tconst index2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n}\n\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\nWireframeGeometry.prototype.constructor = WireframeGeometry;\n\n/**\n * @author zz85 / https://github.com/zz85\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\n// ParametricGeometry\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\tthis.mergeVertices();\n\n}\n\nParametricGeometry.prototype = Object.create( Geometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n// ParametricBufferGeometry\n\nfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricBufferGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\tconst EPS = 0.00001;\n\n\tconst normal = new Vector3();\n\n\tconst p0 = new Vector3(), p1 = new Vector3();\n\tconst pu = new Vector3(), pv = new Vector3();\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tconst sliceCount = slices + 1;\n\n\tfor ( let i = 0; i <= stacks; i ++ ) {\n\n\t\tconst v = i / stacks;\n\n\t\tfor ( let j = 0; j <= slices; j ++ ) {\n\n\t\t\tconst u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( let j = 0; j < slices; j ++ ) {\n\n\t\t\tconst a = i * sliceCount + j;\n\t\t\tconst b = i * sliceCount + j + 1;\n\t\t\tconst c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tconst d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// PolyhedronGeometry\n\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\n\n// PolyhedronBufferGeometry\n\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PolyhedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\t// default buffer data\n\n\tconst vertexBuffer = [];\n\tconst uvBuffer = [];\n\n\t// the subdivision creates the vertex buffer data\n\n\tsubdivide( detail );\n\n\t// all vertices should lie on a conceptual sphere with a given radius\n\n\tapplyRadius( radius );\n\n\t// finally, create the uv data\n\n\tgenerateUVs();\n\n\t// build non-indexed geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\tif ( detail === 0 ) {\n\n\t\tthis.computeVertexNormals(); // flat normals\n\n\t} else {\n\n\t\tthis.normalizeNormals(); // smooth normals\n\n\t}\n\n\t// helper functions\n\n\tfunction subdivide( detail ) {\n\n\t\tconst a = new Vector3();\n\t\tconst b = new Vector3();\n\t\tconst c = new Vector3();\n\n\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\tfor ( let i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t// get the vertices of the face\n\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t// perform subdivision\n\n\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t}\n\n\t}\n\n\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\tconst cols = Math.pow( 2, detail );\n\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\tconst v = [];\n\n\t\t// construct all of the vertices for this subdivision\n\n\t\tfor ( let i = 0; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tconst aj = a.clone().lerp( c, i / cols );\n\t\t\tconst bj = b.clone().lerp( c, i / cols );\n\n\t\t\tconst rows = cols - i;\n\n\t\t\tfor ( let j = 0; j <= rows; j ++ ) {\n\n\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// construct all of the faces\n\n\t\tfor ( let i = 0; i < cols; i ++ ) {\n\n\t\t\tfor ( let j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\tconst k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction applyRadius( radius ) {\n\n\t\tconst vertex = new Vector3();\n\n\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tconst vertex = new Vector3();\n\n\t\tfor ( let i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tconst u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\tconst v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t}\n\n\t\tcorrectUVs();\n\n\t\tcorrectSeam();\n\n\t}\n\n\tfunction correctSeam() {\n\n\t\t// handle case when face straddles the seam, see #3269\n\n\t\tfor ( let i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t// uv data of a single face\n\n\t\t\tconst x0 = uvBuffer[ i + 0 ];\n\t\t\tconst x1 = uvBuffer[ i + 2 ];\n\t\t\tconst x2 = uvBuffer[ i + 4 ];\n\n\t\t\tconst max = Math.max( x0, x1, x2 );\n\t\t\tconst min = Math.min( x0, x1, x2 );\n\n\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction pushVertex( vertex ) {\n\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t}\n\n\tfunction getVertexByIndex( index, vertex ) {\n\n\t\tconst stride = index * 3;\n\n\t\tvertex.x = vertices[ stride + 0 ];\n\t\tvertex.y = vertices[ stride + 1 ];\n\t\tvertex.z = vertices[ stride + 2 ];\n\n\t}\n\n\tfunction correctUVs() {\n\n\t\tconst a = new Vector3();\n\t\tconst b = new Vector3();\n\t\tconst c = new Vector3();\n\n\t\tconst centroid = new Vector3();\n\n\t\tconst uvA = new Vector2();\n\t\tconst uvB = new Vector2();\n\t\tconst uvC = new Vector2();\n\n\t\tfor ( let i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\tconst azi = azimuth( centroid );\n\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t}\n\n\t}\n\n\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t}\n\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t}\n\n\t}\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n}\n\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// TetrahedronGeometry\n\nfunction TetrahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\n\n// TetrahedronBufferGeometry\n\nfunction TetrahedronBufferGeometry( radius, detail ) {\n\n\tconst vertices = [\n\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t];\n\n\tconst indices = [\n\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// OctahedronGeometry\n\nfunction OctahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\n\n// OctahedronBufferGeometry\n\nfunction OctahedronBufferGeometry( radius, detail ) {\n\n\tconst vertices = [\n\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t];\n\n\tconst indices = [\n\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t1, 3, 4,\t1, 4, 2\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\n\n/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// IcosahedronGeometry\n\nfunction IcosahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\n\n// IcosahedronBufferGeometry\n\nfunction IcosahedronBufferGeometry( radius, detail ) {\n\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tconst vertices = [\n\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t 0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t];\n\n\tconst indices = [\n\t\t 0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t 1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t 3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t 4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\n\n/**\n * @author Abe Pazos / https://hamoid.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// DodecahedronGeometry\n\nfunction DodecahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'DodecahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\n\n// DodecahedronBufferGeometry\n\nfunction DodecahedronBufferGeometry( radius, detail ) {\n\n\tconst t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tconst r = 1 / t;\n\n\tconst vertices = [\n\n\t\t// (1, 1, 1)\n\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t// (0, 1/, )\n\t\t 0, - r, - t, 0, - r, t,\n\t\t 0, r, - t, 0, r, t,\n\n\t\t// (1/, , 0)\n\t\t- r, - t, 0, - r, t, 0,\n\t\t r, - t, 0, r, t, 0,\n\n\t\t// (, 0, 1/)\n\t\t- t, 0, - r, t, 0, - r,\n\t\t- t, 0, r, t, 0, r\n\t];\n\n\tconst indices = [\n\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'DodecahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\n\n/**\n * @author oosmoxiecode / https://github.com/oosmoxiecode\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n * @author Mugen87 / https://github.com/Mugen87\n *\n */\n\n// TubeGeometry\n\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\n\n\tconst bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = bufferGeometry.tangents;\n\tthis.normals = bufferGeometry.normals;\n\tthis.binormals = bufferGeometry.binormals;\n\n\t// create geometry\n\n\tthis.fromBufferGeometry( bufferGeometry );\n\tthis.mergeVertices();\n\n}\n\nTubeGeometry.prototype = Object.create( Geometry.prototype );\nTubeGeometry.prototype.constructor = TubeGeometry;\n\n// TubeBufferGeometry\n\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TubeBufferGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\ttubularSegments = tubularSegments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\n\tconst frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = frames.tangents;\n\tthis.normals = frames.normals;\n\tthis.binormals = frames.binormals;\n\n\t// helper variables\n\n\tconst vertex = new Vector3();\n\tconst normal = new Vector3();\n\tconst uv = new Vector2();\n\tlet P = new Vector3();\n\n\t// buffer\n\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\tconst indices = [];\n\n\t// create buffer data\n\n\tgenerateBufferData();\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// functions\n\n\tfunction generateBufferData() {\n\n\t\tfor ( let i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\tgenerateSegment( i );\n\n\t\t}\n\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t// at the regular position on the given path\n\t\t//\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t// uvs are generated in a separate function.\n\t\t// this makes it easy compute correct values for closed geometries\n\n\t\tgenerateUVs();\n\n\t\t// finally create faces\n\n\t\tgenerateIndices();\n\n\t}\n\n\tfunction generateSegment( i ) {\n\n\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t// retrieve corresponding normal and binormal\n\n\t\tconst N = frames.normals[ i ];\n\t\tconst B = frames.binormals[ i ];\n\n\t\t// generate normals and vertices for the current segment\n\n\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\tconst sin = Math.sin( v );\n\t\t\tconst cos = - Math.cos( v );\n\n\t\t\t// normal\n\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\tnormal.normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\tfunction generateIndices() {\n\n\t\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\nTubeBufferGeometry.prototype.toJSON = function () {\n\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\tdata.path = this.parameters.path.toJSON();\n\n\treturn data;\n\n};\n\n/**\n * @author oosmoxiecode\n * @author Mugen87 / https://github.com/Mugen87\n *\n * based on http://www.blackpawn.com/texts/pqtorus/\n */\n\n// TorusKnotGeometry\n\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\tthis.mergeVertices();\n\n}\n\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\n\n// TorusKnotBufferGeometry\n\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusKnotBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tradius = radius || 1;\n\ttube = tube || 0.4;\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\tp = p || 2;\n\tq = q || 3;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// helper variables\n\n\tconst vertex = new Vector3();\n\tconst normal = new Vector3();\n\n\tconst P1 = new Vector3();\n\tconst P2 = new Vector3();\n\n\tconst B = new Vector3();\n\tconst T = new Vector3();\n\tconst N = new Vector3();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( let i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\tconst u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t// calculate orthonormal basis\n\n\t\tT.subVectors( P2, P1 );\n\t\tN.addVectors( P2, P1 );\n\t\tB.crossVectors( T, N );\n\t\tN.crossVectors( B, T );\n\n\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\tB.normalize();\n\t\tN.normalize();\n\n\t\tfor ( let j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\t\t\tconst cx = - tube * Math.cos( v );\n\t\t\tconst cy = tube * Math.sin( v );\n\n\t\t\t// now calculate the final vertex position.\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let j = 1; j <= tubularSegments; j ++ ) {\n\n\t\tfor ( let i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tconst a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\tconst b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\tconst c = ( radialSegments + 1 ) * j + i;\n\t\t\tconst d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// this function calculates the current position on the torus curve\n\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\tconst cu = Math.cos( u );\n\t\tconst su = Math.sin( u );\n\t\tconst quOverP = q / p * u;\n\t\tconst cs = Math.cos( quOverP );\n\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t}\n\n}\n\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\n\n/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// TorusGeometry\n\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\tthis.mergeVertices();\n\n}\n\nTorusGeometry.prototype = Object.create( Geometry.prototype );\nTorusGeometry.prototype.constructor = TorusGeometry;\n\n// TorusBufferGeometry\n\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 1;\n\ttube = tube || 0.4;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\tarc = arc || Math.PI * 2;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// helper variables\n\n\tconst center = new Vector3();\n\tconst vertex = new Vector3();\n\tconst normal = new Vector3();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( let j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( let i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tconst u = i / tubularSegments * arc;\n\t\t\tconst v = j / radialSegments * Math.PI * 2;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( let j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( let i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tconst a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tconst b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tconst c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tconst d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.2.2)\n */\n\nconst Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tlet hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tlet minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( let i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tlet i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tlet p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tlet stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( filterPoints( ear ), triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tlet a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tlet p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tlet a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tlet minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tlet minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tlet p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tlet a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn filterPoints( p );\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tlet a = start;\n\tdo {\n\n\t\tlet b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tlet c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tlet queue = [],\n\t\ti, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tconst b = splitPolygon( outerNode, hole );\n\n\t\t// filter collinear points around the cuts\n\t\tfilterPoints( outerNode, outerNode.next );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tlet p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tlet x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m; // hole touches outer segment; pick leftmost endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tlet stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m;\n\n\tdo {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( locallyInside( p, hole ) && ( tan < tanMin || ( tan === tanMin && ( p.x > m.x || ( p.x === m.x && sectorContainsSector( m, p ) ) ) ) ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== stop );\n\n\treturn m;\n\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector( m, p ) {\n\n\treturn area( m.prev, m, p.prev ) < 0 && area( p.next, m, m.next ) < 0;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tlet p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tlet i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tlet p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t\t( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t\t( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) && // dones't intersect other edges\n\t\t( locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b ) && // locally visible\n\t\t( area( a.prev, a, b.prev ) || area( a, b.prev, b ) ) || // does not create opposite-facing sectors\n\t\tequals( a, b ) && area( a.prev, a, a.next ) > 0 && area( b.prev, b, b.next ) > 0 ); // special zero-length case\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tconst o1 = sign( area( p1, q1, p2 ) );\n\tconst o2 = sign( area( p1, q1, q2 ) );\n\tconst o3 = sign( area( p2, q2, p1 ) );\n\tconst o4 = sign( area( p2, q2, q1 ) );\n\n\tif ( o1 !== o2 && o3 !== o4 ) return true; // general case\n\n\tif ( o1 === 0 && onSegment( p1, p2, q1 ) ) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n\tif ( o2 === 0 && onSegment( p1, q2, q1 ) ) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n\tif ( o3 === 0 && onSegment( p2, p1, q2 ) ) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n\tif ( o4 === 0 && onSegment( p2, q1, q2 ) ) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n\treturn false;\n\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment( p, q, r ) {\n\n\treturn q.x <= Math.max( p.x, r.x ) && q.x >= Math.min( p.x, r.x ) && q.y <= Math.max( p.y, r.y ) && q.y >= Math.min( p.y, r.y );\n\n}\n\nfunction sign( num ) {\n\n\treturn num > 0 ? 1 : num < 0 ? - 1 : 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tlet p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tlet p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tlet a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tconst p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tlet sum = 0;\n\tfor ( let i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nconst ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tconst n = contour.length;\n\t\tlet a = 0.0;\n\n\t\tfor ( let p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tconst vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tconst holeIndices = []; // array of hole indices\n\t\tconst faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tlet holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( let i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tconst triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( let i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tconst l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( let i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\n// ExtrudeGeometry\n\nfunction ExtrudeGeometry( shapes, options ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\tthis.mergeVertices();\n\n}\n\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\nExtrudeGeometry.prototype.toJSON = function () {\n\n\tconst data = Geometry.prototype.toJSON.call( this );\n\n\tconst shapes = this.parameters.shapes;\n\tconst options = this.parameters.options;\n\n\treturn toJSON( shapes, options, data );\n\n};\n\n// ExtrudeBufferGeometry\n\nfunction ExtrudeBufferGeometry( shapes, options ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ExtrudeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tconst scope = this;\n\n\tconst verticesArray = [];\n\tconst uvArray = [];\n\n\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tconst shape = shapes[ i ];\n\t\taddShape( shape );\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\tthis.computeVertexNormals();\n\n\t// functions\n\n\tfunction addShape( shape ) {\n\n\t\tconst placeholder = [];\n\n\t\t// options\n\n\t\tconst curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\tconst steps = options.steps !== undefined ? options.steps : 1;\n\t\tlet depth = options.depth !== undefined ? options.depth : 100;\n\n\t\tlet bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\tlet bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\tlet bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\tlet bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\tlet bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\tconst extrudePath = options.extrudePath;\n\n\t\tconst uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t// deprecated options\n\n\t\tif ( options.amount !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\n\t\t\tdepth = options.amount;\n\n\t\t}\n\n\t\t//\n\n\t\tlet extrudePts, extrudeByPath = false;\n\t\tlet splineTube, binormal, normal, position2;\n\n\t\tif ( extrudePath ) {\n\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\textrudeByPath = true;\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t// SETUP TNB variables\n\n\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\tbinormal = new Vector3();\n\t\t\tnormal = new Vector3();\n\t\t\tposition2 = new Vector3();\n\n\t\t}\n\n\t\t// Safeguards if bevels are not enabled\n\n\t\tif ( ! bevelEnabled ) {\n\n\t\t\tbevelSegments = 0;\n\t\t\tbevelThickness = 0;\n\t\t\tbevelSize = 0;\n\t\t\tbevelOffset = 0;\n\n\t\t}\n\n\t\t// Variables initialization\n\n\t\tconst shapePoints = shape.extractPoints( curveSegments );\n\n\t\tlet vertices = shapePoints.shape;\n\t\tconst holes = shapePoints.holes;\n\n\t\tconst reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\tif ( reverse ) {\n\n\t\t\tvertices = vertices.reverse();\n\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tconst faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t/* Vertices */\n\n\t\tconst contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tconst ahole = holes[ h ];\n\n\t\t\tvertices = vertices.concat( ahole );\n\n\t\t}\n\n\n\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t}\n\n\t\tconst vlen = vertices.length, flen = faces.length;\n\n\n\t\t// Find directions for point movement\n\n\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t//\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\tlet v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\tconst v_prev_x = inPt.x - inPrev.x,\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\tconst v_next_x = inNext.x - inPt.x,\n\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\tconst v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t// check for collinear edges\n\t\t\tconst collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t// not collinear\n\n\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\tconst v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\tconst v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\tconst ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\tconst ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\tconst ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\tconst ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\tconst sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t//  but prevent crazy spikes\n\t\t\t\tconst v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\tlet direction_eq = false; // assumes: opposite\n\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t}\n\n\n\t\tconst contourMovements = [];\n\n\t\tfor ( let i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t}\n\n\t\tconst holesMovements = [];\n\t\tlet oneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tconst ahole = holes[ h ];\n\n\t\t\toneHoleMovements = [];\n\n\t\t\tfor ( let i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t}\n\n\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t}\n\n\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\tfor ( let b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\tconst t = b / bevelSegments;\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t// contract shape\n\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bs = bevelSize + bevelOffset;\n\n\t\t// Back facing vertices\n\n\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add stepped vertices...\n\t\t// Including front facing vertices\n\n\t\tfor ( let s = 1; s <= steps; s ++ ) {\n\n\t\t\tfor ( let i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tconst vert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Add bevel segments planes\n\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\tfor ( let b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\tconst t = b / bevelSegments;\n\t\t\tconst z = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tconst bs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t// contract shape\n\n\t\t\tfor ( let i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tconst vert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( let i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst vert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/* Faces */\n\n\t\t// Top and bottom faces\n\n\t\tbuildLidFaces();\n\n\t\t// Sides faces\n\n\t\tbuildSideFaces();\n\n\n\t\t/////  Internal functions\n\n\t\tfunction buildLidFaces() {\n\n\t\t\tconst start = verticesArray.length / 3;\n\n\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\tlet layer = 0; // steps + 1\n\t\t\t\tlet offset = vlen * layer;\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( let i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tconst face = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t}\n\n\t\t// Create faces for the z-sides of the shape\n\n\t\tfunction buildSideFaces() {\n\n\t\t\tconst start = verticesArray.length / 3;\n\t\t\tlet layeroffset = 0;\n\t\t\tsidewalls( contour, layeroffset );\n\t\t\tlayeroffset += contour.length;\n\n\t\t\tfor ( let h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tconst ahole = holes[ h ];\n\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t//, true\n\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t}\n\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t}\n\n\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\tlet i = contour.length;\n\n\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\tconst j = i;\n\t\t\t\tlet k = i - 1;\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\tfor ( let s = 0, sl = ( steps + bevelSegments * 2 ); s < sl; s ++ ) {\n\n\t\t\t\t\tconst slen1 = vlen * s;\n\t\t\t\t\tconst slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\tconst a = layeroffset + j + slen1,\n\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction v( x, y, z ) {\n\n\t\t\tplaceholder.push( x );\n\t\t\tplaceholder.push( y );\n\t\t\tplaceholder.push( z );\n\n\t\t}\n\n\n\t\tfunction f3( a, b, c ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\n\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\tconst uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\n\t\t}\n\n\t\tfunction f4( a, b, c, d ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( d );\n\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\t\t\taddVertex( d );\n\n\n\t\t\tconst nextIndex = verticesArray.length / 3;\n\t\t\tconst uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t}\n\n\t\tfunction addVertex( index ) {\n\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t}\n\n\n\t\tfunction addUV( vector2 ) {\n\n\t\t\tuvArray.push( vector2.x );\n\t\t\tuvArray.push( vector2.y );\n\n\t\t}\n\n\t}\n\n}\n\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\n\nExtrudeBufferGeometry.prototype.toJSON = function () {\n\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\tconst shapes = this.parameters.shapes;\n\tconst options = this.parameters.options;\n\n\treturn toJSON( shapes, options, data );\n\n};\n\n//\n\nconst WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tconst a_x = vertices[ indexA * 3 ];\n\t\tconst a_y = vertices[ indexA * 3 + 1 ];\n\t\tconst a_z = vertices[ indexA * 3 + 2 ];\n\t\tconst b_x = vertices[ indexB * 3 ];\n\t\tconst b_y = vertices[ indexB * 3 + 1 ];\n\t\tconst b_z = vertices[ indexB * 3 + 2 ];\n\t\tconst c_x = vertices[ indexC * 3 ];\n\t\tconst c_y = vertices[ indexC * 3 + 1 ];\n\t\tconst c_z = vertices[ indexC * 3 + 2 ];\n\t\tconst d_x = vertices[ indexD * 3 ];\n\t\tconst d_y = vertices[ indexD * 3 + 1 ];\n\t\tconst d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\nfunction toJSON( shapes, options, data ) {\n\n\t//\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\t//\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\n *  bevelOffset: <float> // how far from text outline does bevel start\n * }\n */\n\n// TextGeometry\n\nfunction TextGeometry( text, parameters ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TextGeometry';\n\n\tthis.parameters = {\n\t\ttext: text,\n\t\tparameters: parameters\n\t};\n\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\tthis.mergeVertices();\n\n}\n\nTextGeometry.prototype = Object.create( Geometry.prototype );\nTextGeometry.prototype.constructor = TextGeometry;\n\n// TextBufferGeometry\n\nfunction TextBufferGeometry( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tconst font = parameters.font;\n\n\tif ( ! ( font && font.isFont ) ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new Geometry();\n\n\t}\n\n\tconst shapes = font.generateShapes( text, parameters.size );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextBufferGeometry';\n\n}\n\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// SphereGeometry\n\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nSphereGeometry.prototype = Object.create( Geometry.prototype );\nSphereGeometry.prototype.constructor = SphereGeometry;\n\n// SphereBufferGeometry\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tconst thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\tlet index = 0;\n\tconst grid = [];\n\n\tconst vertex = new Vector3();\n\tconst normal = new Vector3();\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( let iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tconst verticesRow = [];\n\n\t\tconst v = iy / heightSegments;\n\n\t\t// special case for the poles\n\n\t\tlet uOffset = 0;\n\n\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t}\n\n\t\tfor ( let ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tconst u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.copy( vertex ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( let iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( let ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tconst a = grid[ iy ][ ix + 1 ];\n\t\t\tconst b = grid[ iy ][ ix ];\n\t\t\tconst c = grid[ iy + 1 ][ ix ];\n\t\t\tconst d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n/**\n * @author Kaleb Murphy\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// RingGeometry\n\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nRingGeometry.prototype = Object.create( Geometry.prototype );\nRingGeometry.prototype.constructor = RingGeometry;\n\n// RingBufferGeometry\n\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'RingBufferGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 0.5;\n\touterRadius = outerRadius || 1;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// some helper variables\n\n\tlet radius = innerRadius;\n\tconst radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\tconst vertex = new Vector3();\n\tconst uv = new Vector2();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( let j = 0; j <= phiSegments; j ++ ) {\n\n\t\tfor ( let i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\tconst segment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// increase the radius for next row of vertices\n\n\t\tradius += radiusStep;\n\n\t}\n\n\t// indices\n\n\tfor ( let j = 0; j < phiSegments; j ++ ) {\n\n\t\tconst thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\tfor ( let i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\tconst segment = i + thetaSegmentLevel;\n\n\t\t\tconst a = segment;\n\t\t\tconst b = segment + thetaSegments + 1;\n\t\t\tconst c = segment + thetaSegments + 2;\n\t\t\tconst d = segment + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\n\n/**\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://clara.io\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// LatheGeometry\n\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\tthis.mergeVertices();\n\n}\n\nLatheGeometry.prototype = Object.create( Geometry.prototype );\nLatheGeometry.prototype.constructor = LatheGeometry;\n\n// LatheBufferGeometry\n\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'LatheBufferGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = Math.floor( segments ) || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || Math.PI * 2;\n\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\tphiLength = MathUtils.clamp( phiLength, 0, Math.PI * 2 );\n\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst uvs = [];\n\n\t// helper variables\n\n\tconst inverseSegments = 1.0 / segments;\n\tconst vertex = new Vector3();\n\tconst uv = new Vector2();\n\n\t// generate vertices and uvs\n\n\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\tconst phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tconst sin = Math.sin( phi );\n\t\tconst cos = Math.cos( phi );\n\n\t\tfor ( let j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\tvertex.y = points[ j ].y;\n\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// uv\n\n\t\t\tuv.x = i / segments;\n\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( let i = 0; i < segments; i ++ ) {\n\n\t\tfor ( let j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\tconst base = j + i * points.length;\n\n\t\t\tconst a = base;\n\t\t\tconst b = base + points.length;\n\t\t\tconst c = base + points.length + 1;\n\t\t\tconst d = base + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// generate normals\n\n\tthis.computeVertexNormals();\n\n\t// if the geometry is closed, we need to average the normals along the seam.\n\t// because the corresponding vertices are identical (but still have different UVs).\n\n\tif ( phiLength === Math.PI * 2 ) {\n\n\t\tconst normals = this.attributes.normal.array;\n\t\tconst n1 = new Vector3();\n\t\tconst n2 = new Vector3();\n\t\tconst n = new Vector3();\n\n\t\t// this is the buffer offset for the last line of vertices\n\n\t\tconst base = segments * points.length * 3;\n\n\t\tfor ( let i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t// select the normal of the vertex in the first line\n\n\t\t\tn1.x = normals[ j + 0 ];\n\t\t\tn1.y = normals[ j + 1 ];\n\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t// select the normal of the vertex in the last line\n\n\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t// average normals\n\n\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t// assign the new values to both normals\n\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t}\n\n\t}\n\n}\n\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\n\n/**\n * @author jonobr1 / http://jonobr1.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// ShapeGeometry\n\nfunction ShapeGeometry( shapes, curveSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( typeof curveSegments === 'object' ) {\n\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\tcurveSegments = curveSegments.curveSegments;\n\n\t}\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\tthis.mergeVertices();\n\n}\n\nShapeGeometry.prototype = Object.create( Geometry.prototype );\nShapeGeometry.prototype.constructor = ShapeGeometry;\n\nShapeGeometry.prototype.toJSON = function () {\n\n\tconst data = Geometry.prototype.toJSON.call( this );\n\n\tconst shapes = this.parameters.shapes;\n\n\treturn toJSON$1( shapes, data );\n\n};\n\n// ShapeBufferGeometry\n\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ShapeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tcurveSegments = curveSegments || 12;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// helper variables\n\n\tlet groupStart = 0;\n\tlet groupCount = 0;\n\n\t// allow single and array values for \"shapes\" parameter\n\n\tif ( Array.isArray( shapes ) === false ) {\n\n\t\taddShape( shapes );\n\n\t} else {\n\n\t\tfor ( let i = 0; i < shapes.length; i ++ ) {\n\n\t\t\taddShape( shapes[ i ] );\n\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\tgroupStart += groupCount;\n\t\t\tgroupCount = 0;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t// helper functions\n\n\tfunction addShape( shape ) {\n\n\t\tconst indexOffset = vertices.length / 3;\n\t\tconst points = shape.extractPoints( curveSegments );\n\n\t\tlet shapeVertices = points.shape;\n\t\tconst shapeHoles = points.holes;\n\n\t\t// check direction of vertices\n\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t}\n\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tconst shapeHole = shapeHoles[ i ];\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t// join vertices of inner and outer paths to a single array\n\n\t\tfor ( let i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tconst shapeHole = shapeHoles[ i ];\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t}\n\n\t\t// vertices, normals, uvs\n\n\t\tfor ( let i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\tconst vertex = shapeVertices[ i ];\n\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\tnormals.push( 0, 0, 1 );\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t}\n\n\t\t// incides\n\n\t\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tconst face = faces[ i ];\n\n\t\t\tconst a = face[ 0 ] + indexOffset;\n\t\t\tconst b = face[ 1 ] + indexOffset;\n\t\t\tconst c = face[ 2 ] + indexOffset;\n\n\t\t\tindices.push( a, b, c );\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t}\n\n}\n\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\n\nShapeBufferGeometry.prototype.toJSON = function () {\n\n\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\tconst shapes = this.parameters.shapes;\n\n\treturn toJSON$1( shapes, data );\n\n};\n\n//\n\nfunction toJSON$1( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( let i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tconst shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction EdgesGeometry( geometry, thresholdAngle ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'EdgesGeometry';\n\n\tthis.parameters = {\n\t\tthresholdAngle: thresholdAngle\n\t};\n\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t// buffer\n\n\tconst vertices = [];\n\n\t// helper variables\n\n\tconst thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\n\tconst edge = [ 0, 0 ], edges = {};\n\tlet edge1, edge2, key;\n\tconst keys = [ 'a', 'b', 'c' ];\n\n\t// prepare source geometry\n\n\tlet geometry2;\n\n\tif ( geometry.isBufferGeometry ) {\n\n\t\tgeometry2 = new Geometry();\n\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t} else {\n\n\t\tgeometry2 = geometry.clone();\n\n\t}\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tconst sourceVertices = geometry2.vertices;\n\tconst faces = geometry2.faces;\n\n\t// now create a data structure where each entry represents an edge with its adjoining faces\n\n\tfor ( let i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tconst face = faces[ i ];\n\n\t\tfor ( let j = 0; j < 3; j ++ ) {\n\n\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\n\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t} else {\n\n\t\t\t\tedges[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// generate vertices\n\n\tfor ( key in edges ) {\n\n\t\tconst e = edges[ key ];\n\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\tlet vertex = sourceVertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = sourceVertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n}\n\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\nEdgesGeometry.prototype.constructor = EdgesGeometry;\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\n// CylinderGeometry\n\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\nCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n// CylinderBufferGeometry\n\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tconst scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\n\theight = height || 1;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// helper variables\n\n\tlet index = 0;\n\tconst indexArray = [];\n\tconst halfHeight = height / 2;\n\tlet groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction generateTorso() {\n\n\t\tconst normal = new Vector3();\n\t\tconst vertex = new Vector3();\n\n\t\tlet groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tconst slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( let y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tconst indexRow = [];\n\n\t\t\tconst v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\n\t\t\tconst radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tconst u = x / radialSegments;\n\n\t\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\t\tconst sinTheta = Math.sin( theta );\n\t\t\t\tconst cosTheta = Math.cos( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( let y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\tconst a = indexArray[ y ][ x ];\n\t\t\t\tconst b = indexArray[ y + 1 ][ x ];\n\t\t\t\tconst c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tconst d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// update group counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tlet centerIndexStart, centerIndexEnd;\n\n\t\tconst uv = new Vector2();\n\t\tconst vertex = new Vector3();\n\n\t\tlet groupCount = 0;\n\n\t\tconst radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tconst sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( let x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( let x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tconst u = x / radialSegments;\n\t\t\tconst theta = u * thetaLength + thetaStart;\n\n\t\t\tconst cosTheta = Math.cos( theta );\n\t\t\tconst sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( let x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tconst c = centerIndexStart + x;\n\t\t\tconst i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\n\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\n\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t}\n\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n}\n\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\n// ConeGeometry\n\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\nConeGeometry.prototype.constructor = ConeGeometry;\n\n// ConeBufferGeometry\n\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n * @author hughes\n */\n\n// CircleGeometry\n\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCircleGeometry.prototype = Object.create( Geometry.prototype );\nCircleGeometry.prototype.constructor = CircleGeometry;\n\n// CircleBufferGeometry\n\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CircleBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tconst indices = [];\n\tconst vertices = [];\n\tconst normals = [];\n\tconst uvs = [];\n\n\t// helper variables\n\n\tconst vertex = new Vector3();\n\tconst uv = new Vector2();\n\n\t// center point\n\n\tvertices.push( 0, 0, 0 );\n\tnormals.push( 0, 0, 1 );\n\tuvs.push( 0.5, 0.5 );\n\n\tfor ( let s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\tconst segment = thetaStart + s / segments * thetaLength;\n\n\t\t// vertex\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t// normal\n\n\t\tnormals.push( 0, 0, 1 );\n\n\t\t// uvs\n\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\tuvs.push( uv.x, uv.y );\n\n\t}\n\n\t// indices\n\n\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\tindices.push( i, i + 1, 0 );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\n\nvar Geometries = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tWireframeGeometry: WireframeGeometry,\n\tParametricGeometry: ParametricGeometry,\n\tParametricBufferGeometry: ParametricBufferGeometry,\n\tTetrahedronGeometry: TetrahedronGeometry,\n\tTetrahedronBufferGeometry: TetrahedronBufferGeometry,\n\tOctahedronGeometry: OctahedronGeometry,\n\tOctahedronBufferGeometry: OctahedronBufferGeometry,\n\tIcosahedronGeometry: IcosahedronGeometry,\n\tIcosahedronBufferGeometry: IcosahedronBufferGeometry,\n\tDodecahedronGeometry: DodecahedronGeometry,\n\tDodecahedronBufferGeometry: DodecahedronBufferGeometry,\n\tPolyhedronGeometry: PolyhedronGeometry,\n\tPolyhedronBufferGeometry: PolyhedronBufferGeometry,\n\tTubeGeometry: TubeGeometry,\n\tTubeBufferGeometry: TubeBufferGeometry,\n\tTorusKnotGeometry: TorusKnotGeometry,\n\tTorusKnotBufferGeometry: TorusKnotBufferGeometry,\n\tTorusGeometry: TorusGeometry,\n\tTorusBufferGeometry: TorusBufferGeometry,\n\tTextGeometry: TextGeometry,\n\tTextBufferGeometry: TextBufferGeometry,\n\tSphereGeometry: SphereGeometry,\n\tSphereBufferGeometry: SphereBufferGeometry,\n\tRingGeometry: RingGeometry,\n\tRingBufferGeometry: RingBufferGeometry,\n\tPlaneGeometry: PlaneGeometry,\n\tPlaneBufferGeometry: PlaneBufferGeometry,\n\tLatheGeometry: LatheGeometry,\n\tLatheBufferGeometry: LatheBufferGeometry,\n\tShapeGeometry: ShapeGeometry,\n\tShapeBufferGeometry: ShapeBufferGeometry,\n\tExtrudeGeometry: ExtrudeGeometry,\n\tExtrudeBufferGeometry: ExtrudeBufferGeometry,\n\tEdgesGeometry: EdgesGeometry,\n\tConeGeometry: ConeGeometry,\n\tConeBufferGeometry: ConeBufferGeometry,\n\tCylinderGeometry: CylinderGeometry,\n\tCylinderBufferGeometry: CylinderBufferGeometry,\n\tCircleGeometry: CircleGeometry,\n\tCircleBufferGeometry: CircleBufferGeometry,\n\tBoxGeometry: BoxGeometry,\n\tBoxBufferGeometry: BoxBufferGeometry\n});\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.vertexTangents = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.vertexTangents = source.vertexTangents;\n\n\treturn this;\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *\n *  sheen: <Color>,\n *\n *  transparency: <float>\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatMap = null;\n\tthis.clearcoatRoughness = 0.0;\n\tthis.clearcoatRoughnessMap = null;\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.transparency = 0.0;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatMap = source.clearcoatMap;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tif ( source.sheen ) {\n\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\n\t} else {\n\n\t\tthis.sheen = null;\n\n\t}\n\n\tthis.transparency = source.transparency;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author takahirox / http://github.com/takahirox\n *\n * parameters = {\n *  color: <hex>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\tthis.gradientMap = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( Material.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\tthis.gradientMap = source.gradientMap;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\nvar Materials = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tShadowMaterial: ShadowMaterial,\n\tSpriteMaterial: SpriteMaterial,\n\tRawShaderMaterial: RawShaderMaterial,\n\tShaderMaterial: ShaderMaterial,\n\tPointsMaterial: PointsMaterial,\n\tMeshPhysicalMaterial: MeshPhysicalMaterial,\n\tMeshStandardMaterial: MeshStandardMaterial,\n\tMeshPhongMaterial: MeshPhongMaterial,\n\tMeshToonMaterial: MeshToonMaterial,\n\tMeshNormalMaterial: MeshNormalMaterial,\n\tMeshLambertMaterial: MeshLambertMaterial,\n\tMeshDepthMaterial: MeshDepthMaterial,\n\tMeshDistanceMaterial: MeshDistanceMaterial,\n\tMeshBasicMaterial: MeshBasicMaterial,\n\tMeshMatcapMaterial: MeshMatcapMaterial,\n\tLineDashedMaterial: LineDashedMaterial,\n\tLineBasicMaterial: LineBasicMaterial,\n\tMaterial: Material\n});\n\n/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nconst AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tconst n = times.length;\n\t\tconst result = new Array( n );\n\t\tfor ( let i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tconst nValues = values.length;\n\t\tconst result = new values.constructor( nValues );\n\n\t\tfor ( let i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tconst srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tlet i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tlet value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\n\n\t\tfps = fps || 30;\n\n\t\tconst clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tconst track = clip.tracks[ i ];\n\t\t\tconst valueSize = track.getValueSize();\n\n\t\t\tconst times = [];\n\t\t\tconst values = [];\n\n\t\t\tfor ( let j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tconst frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tlet minStartTime = Infinity;\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( let i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t},\n\n\tmakeClipAdditive: function ( targetClip, referenceFrame, referenceClip, fps ) {\n\n\t\tif ( referenceFrame === undefined ) referenceFrame = 0;\n\t\tif ( referenceClip === undefined ) referenceClip = targetClip;\n\t\tif ( fps === undefined || fps <= 0 ) fps = 30;\n\n\t\tconst numTracks = targetClip.tracks.length;\n\t\tconst referenceTime = referenceFrame / fps;\n\n\t\t// Make each track's values relative to the values at the reference frame\n\t\tfor ( let i = 0; i < numTracks; ++ i ) {\n\n\t\t\tconst referenceTrack = referenceClip.tracks[ i ];\n\t\t\tconst referenceTrackType = referenceTrack.ValueTypeName;\n\n\t\t\t// Skip this track if it's non-numeric\n\t\t\tif ( referenceTrackType === 'bool' || referenceTrackType === 'string' ) continue;\n\n\t\t\t// Find the track in the target clip whose name and type matches the reference track\n\t\t\tconst targetTrack = targetClip.tracks.find( function ( track ) {\n\n\t\t\t\treturn track.name === referenceTrack.name\n\t\t\t\t&& track.ValueTypeName === referenceTrackType;\n\n\t\t\t} );\n\n\t\t\tif ( targetTrack === undefined ) continue;\n\n\t\t\tconst valueSize = referenceTrack.getValueSize();\n\t\t\tconst lastIndex = referenceTrack.times.length - 1;\n\t\t\tlet referenceValue;\n\n\t\t\t// Find the value to subtract out of the track\n\t\t\tif ( referenceTime <= referenceTrack.times[ 0 ] ) {\n\n\t\t\t\t// Reference frame is earlier than the first keyframe, so just use the first keyframe\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, 0, referenceTrack.valueSize );\n\n\t\t\t} else if ( referenceTime >= referenceTrack.times[ lastIndex ] ) {\n\n\t\t\t\t// Reference frame is after the last keyframe, so just use the last keyframe\n\t\t\t\tconst startIndex = lastIndex * valueSize;\n\t\t\t\treferenceValue = AnimationUtils.arraySlice( referenceTrack.values, startIndex );\n\n\t\t\t} else {\n\n\t\t\t\t// Interpolate to the reference value\n\t\t\t\tconst interpolant = referenceTrack.createInterpolant();\n\t\t\t\tinterpolant.evaluate( referenceTime );\n\t\t\t\treferenceValue = interpolant.resultBuffer;\n\n\t\t\t}\n\n\t\t\t// Conjugate the quaternion\n\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\tconst referenceQuat = new Quaternion(\n\t\t\t\t\treferenceValue[ 0 ],\n\t\t\t\t\treferenceValue[ 1 ],\n\t\t\t\t\treferenceValue[ 2 ],\n\t\t\t\t\treferenceValue[ 3 ]\n\t\t\t\t).normalize().conjugate();\n\t\t\t\treferenceQuat.toArray( referenceValue );\n\n\t\t\t}\n\n\t\t\t// Subtract the reference value from all of the track values\n\n\t\t\tconst numTimes = targetTrack.times.length;\n\t\t\tfor ( let j = 0; j < numTimes; ++ j ) {\n\n\t\t\t\tconst valueStart = j * valueSize;\n\n\t\t\t\tif ( referenceTrackType === 'quaternion' ) {\n\n\t\t\t\t\t// Multiply the conjugate for quaternion track types\n\t\t\t\t\tQuaternion.multiplyQuaternionsFlat(\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart,\n\t\t\t\t\t\treferenceValue,\n\t\t\t\t\t\t0,\n\t\t\t\t\t\ttargetTrack.values,\n\t\t\t\t\t\tvalueStart\n\t\t\t\t\t);\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// Subtract each value for all other numeric track types\n\t\t\t\t\tfor ( let k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\t\ttargetTrack.values[ valueStart + k ] -= referenceValue[ k ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\ttargetClip.blendMode = AdditiveAnimationBlendMode;\n\n\t\treturn targetClip;\n\n\t}\n\n};\n\n/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tlet pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tlet right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tconst t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( let giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tconst mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tlet pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tconst sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tconst s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tconst s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tconst sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n}\n\n// Static methods\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\ttoJSON: function ( track ) {\n\n\t\tconst trackType = track.constructor;\n\n\t\tlet json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tconst interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tlet factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tconst message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tconst times = this.times;\n\n\t\t\tfor ( let i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tconst times = this.times,\n\t\t\tnKeys = times.length;\n\n\t\tlet from = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tconst stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tconst valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tconst times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tlet prevTime = null;\n\n\t\tfor ( let i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tconst currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( let i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tconst value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tconst times = AnimationUtils.arraySlice( this.times ),\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\tlastIndex = times.length - 1;\n\n\t\tlet writeIndex = 1;\n\n\t\tfor ( let i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tlet keep = false;\n\n\t\t\tconst time = times[ i ];\n\t\t\tconst timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tconst offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tconst value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tconst readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( let j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( let readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tconst values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tconst TypedKeyframeTrack = this.constructor;\n\t\tconst track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n} );\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tconst result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tlet offset = i1 * stride;\n\n\t\tfor ( let end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\n/**\n *\n * A Track of vectored keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\n/**\n *\n * Reusable set of Tracks that represent an animation.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nfunction AnimationClip( name, duration, tracks, blendMode ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\tthis.blendMode = ( blendMode !== undefined ) ? blendMode : NormalAnimationBlendMode;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tconst trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tconst times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tconst tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( let i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks, json.blendMode );\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tconst tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tconst json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid,\n\t\t\t'blendMode': clip.blendMode\n\n\t\t};\n\n\t\tfor ( let i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tconst numMorphTargets = morphTargetSequence.length;\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tlet times = [];\n\t\t\tlet values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tconst order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tlet clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tconst o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tconst animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tconst pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( let i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tconst morphTarget = morphTargets[ i ];\n\t\t\tconst parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tconst name = parts[ 1 ];\n\n\t\t\t\tlet animationMorphTargets = animationToMorphTargets[ name ];\n\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst clips = [];\n\n\t\tfor ( const name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tconst times = [];\n\t\t\t\tconst values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tconst tracks = [];\n\n\t\tconst clipName = animation.name || 'default';\n\t\tconst fps = animation.fps || 30;\n\t\tconst blendMode = animation.blendMode;\n\n\t\t// automatic length determination in AnimationClip.\n\t\tlet duration = animation.length || - 1;\n\n\t\tconst hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( let h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tconst animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tconst morphTargetNames = {};\n\n\t\t\t\tlet k;\n\n\t\t\t\tfor ( k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( let m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( const morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tconst times = [];\n\t\t\t\t\tconst values = [];\n\n\t\t\t\t\tfor ( let m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tconst animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tconst boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tconst clip = new AnimationClip( clipName, duration, tracks, blendMode );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tconst tracks = this.tracks;\n\t\tlet duration = 0;\n\n\t\tfor ( let i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tconst track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tvalidate: function () {\n\n\t\tlet valid = true;\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tconst tracks = [];\n\n\t\tfor ( let i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new AnimationClip( this.name, this.duration, tracks, this.blendMode );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tconst scope = this;\n\n\tlet isLoading = false;\n\tlet itemsLoaded = 0;\n\tlet itemsTotal = 0;\n\tlet urlModifier = undefined;\n\tconst handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tconst index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( let i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tconst regex = handlers[ i ];\n\t\t\tconst loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nconst DefaultLoadingManager = new LoadingManager();\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.path = '';\n\tthis.resourcePath = '';\n\tthis.requestHeader = {};\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tloadAsync: function ( url, onProgress ) {\n\n\t\tconst scope = this;\n\n\t\treturn new Promise( function ( resolve, reject ) {\n\n\t\t\tscope.load( url, resolve, onProgress, reject );\n\n\t\t} );\n\n\t},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( requestHeader ) {\n\n\t\tthis.requestHeader = requestHeader;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tconst dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tconst dataUriRegexResult = url.match( dataUriRegex );\n\t\tlet request;\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tconst mimeType = dataUriRegexResult[ 1 ];\n\t\t\tconst isBase64 = !! dataUriRegexResult[ 2 ];\n\n\t\t\tlet data = dataUriRegexResult[ 3 ];\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tlet response;\n\t\t\t\tconst responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tconst view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tconst parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\trequest = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tconst response = this.response;\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tconst callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( let i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( const header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io/\n */\n\nfunction AnimationLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAnimationLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AnimationLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst clip = AnimationClip.parse( json[ i ] );\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n *\n * Abstract Base class to block based textures loader (dds, pvr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction CompressedTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCompressedTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CompressedTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst images = [];\n\n\t\tconst texture = new CompressedTexture();\n\t\ttexture.image = images;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.setResponseType( 'arraybuffer' );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( url[ i ], function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\timages[ i ] = {\n\t\t\t\t\twidth: texDatas.width,\n\t\t\t\t\theight: texDatas.height,\n\t\t\t\t\tformat: texDatas.format,\n\t\t\t\t\tmipmaps: texDatas.mipmaps\n\t\t\t\t};\n\n\t\t\t\tloaded += 1;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\tif ( texDatas.mipmapCount === 1 )\n\t\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\tif ( Array.isArray( url ) ) {\n\n\t\t\tfor ( let i = 0, il = url.length; i < il; ++ i ) {\n\n\t\t\t\tloadTexture( i );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// compressed cubemap texture stored in a single DDS file\n\n\t\t\tloader.load( url, function ( buffer ) {\n\n\t\t\t\tconst texDatas = scope.parse( buffer, true );\n\n\t\t\t\tif ( texDatas.isCubemap ) {\n\n\t\t\t\t\tconst faces = texDatas.mipmaps.length / texDatas.mipmapCount;\n\n\t\t\t\t\tfor ( let f = 0; f < faces; f ++ ) {\n\n\t\t\t\t\t\timages[ f ] = { mipmaps: [] };\n\n\t\t\t\t\t\tfor ( let i = 0; i < texDatas.mipmapCount; i ++ ) {\n\n\t\t\t\t\t\t\timages[ f ].mipmaps.push( texDatas.mipmaps[ f * texDatas.mipmapCount + i ] );\n\t\t\t\t\t\t\timages[ f ].format = texDatas.format;\n\t\t\t\t\t\t\timages[ f ].width = texDatas.width;\n\t\t\t\t\t\t\timages[ f ].height = texDatas.height;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture.image.width = texDatas.width;\n\t\t\t\t\ttexture.image.height = texDatas.height;\n\t\t\t\t\ttexture.mipmaps = texDatas.mipmaps;\n\n\t\t\t\t}\n\n\t\t\t\tif ( texDatas.mipmapCount === 1 ) {\n\n\t\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t\t}\n\n\t\t\t\ttexture.format = texDatas.format;\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t}, onProgress, onError );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst texture = new DataTexture();\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tconst texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tconst image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction CubeTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nCubeTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: CubeTextureLoader,\n\n\tload: function ( urls, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new CubeTexture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tlet loaded = 0;\n\n\t\tfunction loadTexture( i ) {\n\n\t\t\tloader.load( urls[ i ], function ( image ) {\n\n\t\t\t\ttexture.images[ i ] = image;\n\n\t\t\t\tloaded ++;\n\n\t\t\t\tif ( loaded === 6 ) {\n\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t\tif ( onLoad ) onLoad( texture );\n\n\t\t\t\t}\n\n\t\t\t}, undefined, onError );\n\n\t\t}\n\n\t\tfor ( let i = 0; i < urls.length; ++ i ) {\n\n\t\t\tloadTexture( i );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst texture = new Texture();\n\n\t\tconst loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tconst isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t, optionalTarget )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u, optionalTarget )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tconst points = [];\n\n\t\tfor ( let d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tconst lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tconst cache = [];\n\t\tlet current, last = this.getPoint( 0 );\n\t\tlet sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( let p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tconst arcLengths = this.getLengths();\n\n\t\tlet i = 0, il = arcLengths.length;\n\n\t\tlet targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tlet low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tconst lengthBefore = arcLengths[ i ];\n\t\tconst lengthAfter = arcLengths[ i + 1 ];\n\n\t\tconst segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tconst segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tconst t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t, optionalTarget ) {\n\n\t\tconst delta = 0.0001;\n\t\tlet t1 = t - delta;\n\t\tlet t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tconst pt1 = this.getPoint( t1 );\n\t\tconst pt2 = this.getPoint( t2 );\n\n\t\tconst tangent = optionalTarget || ( ( pt1.isVector2 ) ? new Vector2() : new Vector3() );\n\n\t\ttangent.copy( pt2 ).sub( pt1 ).normalize();\n\n\t\treturn tangent;\n\n\t},\n\n\tgetTangentAt: function ( u, optionalTarget ) {\n\n\t\tconst t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t, optionalTarget );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tconst normal = new Vector3();\n\n\t\tconst tangents = [];\n\t\tconst normals = [];\n\t\tconst binormals = [];\n\n\t\tconst vec = new Vector3();\n\t\tconst mat = new Matrix4();\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( let i = 0; i <= segments; i ++ ) {\n\n\t\t\tconst u = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u, new Vector3() );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tlet min = Number.MAX_VALUE;\n\t\tconst tx = Math.abs( tangents[ 0 ].x );\n\t\tconst ty = Math.abs( tangents[ 0 ].y );\n\t\tconst tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\tconst theta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\tlet theta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( let i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst twoPi = Math.PI * 2;\n\tlet deltaAngle = this.aEndAngle - this.aStartAngle;\n\tconst samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tconst angle = this.aStartAngle + t * deltaAngle;\n\tlet x = this.aX + this.xRadius * Math.cos( angle );\n\tlet y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tconst cos = Math.cos( this.aRotation );\n\t\tconst sin = Math.sin( this.aRotation );\n\n\t\tconst tx = x - this.aX;\n\t\tconst ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tlet c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tlet t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tlet t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tconst t2 = t * t;\n\t\t\tconst t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nconst tmp = new Vector3();\nconst px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = tension || 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst points = this.points;\n\tconst l = points.length;\n\n\tconst p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tlet intPoint = Math.floor( p );\n\tlet weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tlet p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tconst pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tlet dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tlet dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tlet dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bzier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tconst v0 = ( p2 - p0 ) * 0.5;\n\tconst v1 = ( p3 - p1 ) * 0.5;\n\tconst t2 = t * t;\n\tconst t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tconst k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tconst k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( t, optionalTarget ) {\n\n\tconst tangent = optionalTarget || new Vector2();\n\n\ttangent.copy( this.v2 ).sub( this.v1 ).normalize();\n\n\treturn tangent;\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector3();\n\n\tconst v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tconst point = optionalTarget || new Vector2();\n\n\tconst points = this.points;\n\tconst p = ( points.length - 1 ) * t;\n\n\tconst intPoint = Math.floor( p );\n\tconst weight = p - intPoint;\n\n\tconst p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tconst p1 = points[ intPoint ];\n\tconst p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tconst p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tconst point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tconst data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( let i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tconst point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( let i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tconst point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\nvar Curves = /*#__PURE__*/Object.freeze({\n\t__proto__: null,\n\tArcCurve: ArcCurve,\n\tCatmullRomCurve3: CatmullRomCurve3,\n\tCubicBezierCurve: CubicBezierCurve,\n\tCubicBezierCurve3: CubicBezierCurve3,\n\tEllipseCurve: EllipseCurve,\n\tLineCurve: LineCurve,\n\tLineCurve3: LineCurve3,\n\tQuadraticBezierCurve: QuadraticBezierCurve,\n\tQuadraticBezierCurve3: QuadraticBezierCurve3,\n\tSplineCurve: SplineCurve\n});\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tconst startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tconst endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new LineCurve( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tconst d = t * this.getLength();\n\t\tconst curveLengths = this.getCurveLengths();\n\t\tlet i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tconst diff = curveLengths[ i ] - d;\n\t\t\t\tconst curve = this.curves[ i ];\n\n\t\t\t\tconst segmentLength = curve.getLength();\n\t\t\t\tconst u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tconst lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tconst lengths = [];\n\t\tlet sums = 0;\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tconst points = [];\n\n\t\tfor ( let i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tconst points = [];\n\t\tlet last;\n\n\t\tfor ( let i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tconst curve = curves[ i ];\n\t\t\tconst resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tconst pts = curve.getPoints( resolution );\n\n\t\t\tfor ( let j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tconst point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( let i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( let i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tconst curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( let i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tconst curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tconst curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tconst curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tconst npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tconst curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst x0 = this.currentPoint.x;\n\t\tconst y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tconst curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tconst firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tconst lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tconst holesPts = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( let i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( let i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tconst hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.normalBias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.normalBias !== 0 ) object.normalBias = this.normalBias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tconst camera = this.camera;\n\n\t\tconst fov = MathUtils.RAD2DEG * 2 * light.angle;\n\t\tconst aspect = this.mapSize.width / this.mapSize.height;\n\t\tconst far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\nfunction PointLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\tthis._frameExtents = new Vector2( 4, 2 );\n\n\tthis._viewportCount = 6;\n\n\tthis._viewports = [\n\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t// following orientation:\n\t\t//\n\t\t//  xzXZ\n\t\t//   y Y\n\t\t//\n\t\t// X - Positive x direction\n\t\t// x - Negative x direction\n\t\t// Y - Positive y direction\n\t\t// y - Negative y direction\n\t\t// Z - Positive z direction\n\t\t// z - Negative z direction\n\n\t\t// positive X\n\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t// negative X\n\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t// positive Z\n\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t// negative Z\n\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t// positive Y\n\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t// negative Y\n\t\tnew Vector4( 1, 0, 1, 1 )\n\t];\n\n\tthis._cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tthis._cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n}\n\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: PointLightShadow,\n\n\tisPointLightShadow: true,\n\n\tupdateMatrices: function ( light, viewportIndex ) {\n\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\n\n\t\tconst camera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tlightPositionWorld = this._lightPositionWorld,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.copy( camera.position );\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\n\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new PointLightShadow();\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tconst dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tconst dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tconst cx = ( this.right + this.left ) / 2;\n\t\tconst cy = ( this.top + this.bottom ) / 2;\n\n\t\tlet left = cx - dx;\n\t\tlet right = cx + dx;\n\t\tlet top = cy + dy;\n\t\tlet bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tconst scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tconst scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Primary reference:\n *   https://graphics.stanford.edu/papers/envmap/envmap.pdf\n *\n * Secondary reference:\n *   https://www.ppsloan.org/publications/StupidSH36.pdf\n */\n\n// 3-band SH defined by 9 coefficients\n\nfunction SphericalHarmonics3() {\n\n\tthis.coefficients = [];\n\n\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\tthis.coefficients.push( new Vector3() );\n\n\t}\n\n}\n\nObject.assign( SphericalHarmonics3.prototype, {\n\n\tisSphericalHarmonics3: true,\n\n\tset: function ( coefficients ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].copy( coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tzero: function () {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].set( 0, 0, 0 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// get the radiance in the direction of the normal\n\t// target is a Vector3\n\tgetAt: function ( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.282095 );\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 0.488603 * y );\n\t\ttarget.addScaledVector( coeff[ 2 ], 0.488603 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 0.488603 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 1.092548 * ( x * y ) );\n\t\ttarget.addScaledVector( coeff[ 5 ], 1.092548 * ( y * z ) );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.315392 * ( 3.0 * z * z - 1.0 ) );\n\t\ttarget.addScaledVector( coeff[ 7 ], 1.092548 * ( x * z ) );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.546274 * ( x * x - y * y ) );\n\n\t\treturn target;\n\n\t},\n\n\t// get the irradiance (radiance convolved with cosine lobe) in the direction of the normal\n\t// target is a Vector3\n\t// https://graphics.stanford.edu/papers/envmap/envmap.pdf\n\tgetIrradianceAt: function ( normal, target ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\tconst coeff = this.coefficients;\n\n\t\t// band 0\n\t\ttarget.copy( coeff[ 0 ] ).multiplyScalar( 0.886227 ); //  * 0.282095\n\n\t\t// band 1\n\t\ttarget.addScaledVector( coeff[ 1 ], 2.0 * 0.511664 * y ); // ( 2 *  / 3 ) * 0.488603\n\t\ttarget.addScaledVector( coeff[ 2 ], 2.0 * 0.511664 * z );\n\t\ttarget.addScaledVector( coeff[ 3 ], 2.0 * 0.511664 * x );\n\n\t\t// band 2\n\t\ttarget.addScaledVector( coeff[ 4 ], 2.0 * 0.429043 * x * y ); // (  / 4 ) * 1.092548\n\t\ttarget.addScaledVector( coeff[ 5 ], 2.0 * 0.429043 * y * z );\n\t\ttarget.addScaledVector( coeff[ 6 ], 0.743125 * z * z - 0.247708 ); // (  / 4 ) * 0.315392 * 3\n\t\ttarget.addScaledVector( coeff[ 7 ], 2.0 * 0.429043 * x * z );\n\t\ttarget.addScaledVector( coeff[ 8 ], 0.429043 * ( x * x - y * y ) ); // (  / 4 ) * 0.546274\n\n\t\treturn target;\n\n\t},\n\n\tadd: function ( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].add( sh.coefficients[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\taddScaledSH: function ( sh, s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].addScaledVector( sh.coefficients[ i ], s );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( s ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].multiplyScalar( s );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( sh, alpha ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.coefficients[ i ].lerp( sh.coefficients[ i ], alpha );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sh ) {\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( ! this.coefficients[ i ].equals( sh.coefficients[ i ] ) ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcopy: function ( sh ) {\n\n\t\treturn this.set( sh.coefficients );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].fromArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tconst coefficients = this.coefficients;\n\n\t\tfor ( let i = 0; i < 9; i ++ ) {\n\n\t\t\tcoefficients[ i ].toArray( array, offset + ( i * 3 ) );\n\n\t\t}\n\n\t\treturn array;\n\n\t}\n\n} );\n\nObject.assign( SphericalHarmonics3, {\n\n\t// evaluate the basis functions\n\t// shBasis is an Array[ 9 ]\n\tgetBasisAt: function ( normal, shBasis ) {\n\n\t\t// normal is assumed to be unit length\n\n\t\tconst x = normal.x, y = normal.y, z = normal.z;\n\n\t\t// band 0\n\t\tshBasis[ 0 ] = 0.282095;\n\n\t\t// band 1\n\t\tshBasis[ 1 ] = 0.488603 * y;\n\t\tshBasis[ 2 ] = 0.488603 * z;\n\t\tshBasis[ 3 ] = 0.488603 * x;\n\n\t\t// band 2\n\t\tshBasis[ 4 ] = 1.092548 * x * y;\n\t\tshBasis[ 5 ] = 1.092548 * y * z;\n\t\tshBasis[ 6 ] = 0.315392 * ( 3 * z * z - 1 );\n\t\tshBasis[ 7 ] = 1.092548 * x * z;\n\t\tshBasis[ 8 ] = 0.546274 * ( x * x - y * y );\n\n\t}\n\n} );\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * A LightProbe is a source of indirect-diffuse light\n */\n\nfunction LightProbe( sh, intensity ) {\n\n\tLight.call( this, undefined, intensity );\n\n\tthis.type = 'LightProbe';\n\n\tthis.sh = ( sh !== undefined ) ? sh : new SphericalHarmonics3();\n\n}\n\nLightProbe.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: LightProbe,\n\n\tisLightProbe: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.sh.copy( source.sh );\n\n\t\treturn this;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.intensity = json.intensity; // TODO: Move this bit to Light.fromJSON();\n\t\tthis.sh.fromArray( json.sh );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.sh = this.sh.toArray();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MaterialLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.textures = {};\n\n}\n\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tconst material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( const name in json.uniforms ) {\n\n\t\t\t\tconst uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( const key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tlet normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\treturn material;\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nconst LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tlet s = '';\n\n\t\tfor ( let i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tconst index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.instanceCount = Infinity;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.instanceCount = source.instanceCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tconst data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.instanceCount = this.instanceCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tconst data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferGeometryLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\ttry {\n\n\t\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tconst interleavedBufferMap = {};\n\t\tconst arrayBufferMap = {};\n\n\t\tfunction getInterleavedBuffer( json, uuid ) {\n\n\t\t\tif ( interleavedBufferMap[ uuid ] !== undefined ) return interleavedBufferMap[ uuid ];\n\n\t\t\tconst interleavedBuffers = json.interleavedBuffers;\n\t\t\tconst interleavedBuffer = interleavedBuffers[ uuid ];\n\n\t\t\tconst buffer = getArrayBuffer( json, interleavedBuffer.buffer );\n\n\t\t\tconst array = new TYPED_ARRAYS[ interleavedBuffer.type ]( buffer );\n\t\t\tconst ib = new InterleavedBuffer( array, interleavedBuffer.stride );\n\t\t\tib.uuid = interleavedBuffer.uuid;\n\n\t\t\tinterleavedBufferMap[ uuid ] = ib;\n\n\t\t\treturn ib;\n\n\t\t}\n\n\t\tfunction getArrayBuffer( json, uuid ) {\n\n\t\t\tif ( arrayBufferMap[ uuid ] !== undefined ) return arrayBufferMap[ uuid ];\n\n\t\t\tconst arrayBuffers = json.arrayBuffers;\n\t\t\tconst arrayBuffer = arrayBuffers[ uuid ];\n\n\t\t\tconst ab = new Uint32Array( arrayBuffer ).buffer;\n\n\t\t\tarrayBufferMap[ uuid ] = ab;\n\n\t\t\treturn ab;\n\n\t\t}\n\n\t\tconst geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tconst index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tconst attributes = json.data.attributes;\n\n\t\tfor ( const key in attributes ) {\n\n\t\t\tconst attribute = attributes[ key ];\n\t\t\tlet bufferAttribute;\n\n\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t} else {\n\n\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\t\tconst bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\t\tbufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t}\n\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tconst morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( const key in morphAttributes ) {\n\n\t\t\t\tconst attributeArray = morphAttributes[ key ];\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tconst attribute = attributeArray[ i ];\n\t\t\t\t\tlet bufferAttribute;\n\n\t\t\t\t\tif ( attribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tconst interleavedBuffer = getInterleavedBuffer( json.data, attribute.data );\n\t\t\t\t\t\tbufferAttribute = new InterleavedBufferAttribute( interleavedBuffer, attribute.itemSize, attribute.offset, attribute.normalized );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\t\t\t\tbufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tconst groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( let i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tconst group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tconst center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nconst TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\t// Workaround for IE11 pre KB2929437. See #11440\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ObjectLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tconst metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json, onLoad ) {\n\n\t\tconst shapes = this.parseShape( json.shapes );\n\t\tconst geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tconst images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tconst textures = this.parseTextures( json.textures, images );\n\t\tconst materials = this.parseMaterials( json.materials, textures );\n\n\t\tconst object = this.parseObject( json.object, geometries, materials );\n\n\t\tif ( json.animations ) {\n\n\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t}\n\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t},\n\n\tparseShape: function ( json ) {\n\n\t\tconst shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t},\n\n\tparseGeometries: function ( json, shapes ) {\n\n\t\tconst geometries = {};\n\t\tlet geometryShapes;\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tlet geometry;\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\n\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\n\t\t\t\t\tcase 'TetrahedronGeometry':\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TubeGeometry':\n\t\t\t\t\tcase 'TubeBufferGeometry':\n\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.closed\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PolyhedronGeometry':\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.vertices,\n\t\t\t\t\t\t\tdata.indices,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.details\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ShapeGeometry':\n\t\t\t\t\tcase 'ShapeBufferGeometry':\n\n\t\t\t\t\t\tgeometryShapes = [];\n\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.curveSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'ExtrudeGeometry':\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\n\n\t\t\t\t\t\tgeometryShapes = [];\n\n\t\t\t\t\t\tfor ( let j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tconst shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst extrudePath = data.options.extrudePath;\n\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\n\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.options\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.' );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json, textures ) {\n\n\t\tconst cache = {}; // MultiMaterial\n\t\tconst materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tconst loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\n\n\t\t\t\t\t// Deprecated\n\n\t\t\t\t\tconst array = [];\n\n\t\t\t\t\tfor ( let j = 0; j < data.materials.length; j ++ ) {\n\n\t\t\t\t\t\tconst material = data.materials[ j ];\n\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\n\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = array;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseAnimations: function ( json ) {\n\n\t\tconst animations = [];\n\n\t\tfor ( let i = 0; i < json.length; i ++ ) {\n\n\t\t\tconst data = json[ i ];\n\n\t\t\tconst clip = AnimationClip.parse( data );\n\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t},\n\n\tparseImages: function ( json, onLoad ) {\n\n\t\tconst scope = this;\n\t\tconst images = {};\n\n\t\tlet loader;\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tconst manager = new LoadingManager( onLoad );\n\n\t\t\tloader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( let i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tconst image = json[ i ];\n\t\t\t\tconst url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\timages[ image.uuid ] = [];\n\n\t\t\t\t\tfor ( let j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tconst currentUrl = url[ j ];\n\n\t\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\n\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tconst path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\n\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t},\n\n\tparseTextures: function ( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tconst textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( let i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tconst data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tlet texture;\n\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t},\n\n\tparseObject: function ( data, geometries, materials ) {\n\n\t\tlet object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tconst array = [];\n\n\t\t\t\tfor ( let i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tconst uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tlet geometry, material;\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LightProbe':\n\n\t\t\t\tobject = new LightProbe().fromJSON( data );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tgeometry = getGeometry( data.geometry );\n\t\t\t\tmaterial = getMaterial( data.material );\n\t\t\t\tconst count = data.count;\n\t\t\t\tconst instanceMatrix = data.instanceMatrix;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.normalBias !== undefined ) object.shadow.normalBias = data.shadow.normalBias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tconst children = data.children;\n\n\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tconst levels = data.levels;\n\n\t\t\tfor ( let l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tconst level = levels[ l ];\n\t\t\t\tconst child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n} );\n\nconst TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\n};\n\nconst TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nconst TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\n/**\n * @author thespite / http://clicktorelease.com/\n */\n\n\nfunction ImageBitmapLoader( manager ) {\n\n\tif ( typeof createImageBitmap === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: createImageBitmap() not supported.' );\n\n\t}\n\n\tif ( typeof fetch === 'undefined' ) {\n\n\t\tconsole.warn( 'THREE.ImageBitmapLoader: fetch() not supported.' );\n\n\t}\n\n\tLoader.call( this, manager );\n\n\tthis.options = { premultiplyAlpha: 'none' };\n\n}\n\nImageBitmapLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageBitmapLoader,\n\n\tisImageBitmapLoader: true,\n\n\tsetOptions: function setOptions( options ) {\n\n\t\tthis.options = options;\n\n\t\treturn this;\n\n\t},\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tconst scope = this;\n\n\t\tconst cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tfetch( url ).then( function ( res ) {\n\n\t\t\treturn res.blob();\n\n\t\t} ).then( function ( blob ) {\n\n\t\t\treturn createImageBitmap( blob, scope.options );\n\n\t\t} ).then( function ( imageBitmap ) {\n\n\t\t\tCache.add( url, imageBitmap );\n\n\t\t\tif ( onLoad ) onLoad( imageBitmap );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} ).catch( function ( e ) {\n\n\t\t\tif ( onError ) onError( e );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t} );\n\n\t\tscope.manager.itemStart( url );\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tconst shapes = [];\n\n\t\t\tfor ( let i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tconst tmpPath = inSubpaths[ i ];\n\n\t\t\t\tconst tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tconst polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tlet inside = false;\n\t\t\tfor ( let p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tlet edgeLowPt = inPolygon[ p ];\n\t\t\t\tlet edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tlet edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tlet edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconst perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tconst isClockWise = ShapeUtils.isClockWise;\n\n\t\tconst subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tlet solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tlet holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tconst betterShapeHoles = [];\n\t\tconst newShapes = [];\n\t\tlet newShapeHoles = [];\n\t\tlet mainIdx = 0;\n\t\tlet tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( let i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tlet ambiguous = false;\n\t\t\tconst toChange = [];\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( let sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tconst sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( let hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tconst ho = sho[ hIdx ];\n\t\t\t\t\tlet hole_unassigned = true;\n\n\t\t\t\t\tfor ( let s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlet tmpHoles;\n\n\t\tfor ( let i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( let j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size ) {\n\n\t\tif ( size === undefined ) size = 100;\n\n\t\tconst shapes = [];\n\t\tconst paths = createPaths( text, size, this.data );\n\n\t\tfor ( let p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, data ) {\n\n\tconst chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\n\tconst scale = size / data.resolution;\n\tconst line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tconst paths = [];\n\n\tlet offsetX = 0, offsetY = 0;\n\n\tfor ( let i = 0; i < chars.length; i ++ ) {\n\n\t\tconst char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tconst ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tconst glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tconst path = new ShapePath();\n\n\tlet x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tconst outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( let i = 0, l = outline.length; i < l; ) {\n\n\t\t\tconst action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FontLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FontLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tlet json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tconst font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nlet _context;\n\nconst AudioContext = {\n\n\tgetContext: function () {\n\n\t\tif ( _context === undefined ) {\n\n\t\t\t_context = new ( window.AudioContext || window.webkitAudioContext )();\n\n\t\t}\n\n\t\treturn _context;\n\n\t},\n\n\tsetContext: function ( value ) {\n\n\t\t_context = value;\n\n\t}\n\n};\n\n/**\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nfunction AudioLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nAudioLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: AudioLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tconst scope = this;\n\n\t\tconst loader = new FileLoader( scope.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\ttry {\n\n\t\t\t\t// Create a copy of the buffer. The `decodeAudioData` method\n\t\t\t\t// detaches the buffer when complete, preventing reuse.\n\t\t\t\tconst bufferCopy = buffer.slice( 0 );\n\n\t\t\t\tconst context = AudioContext.getContext();\n\t\t\t\tcontext.decodeAudioData( bufferCopy, function ( audioBuffer ) {\n\n\t\t\t\t\tonLoad( audioBuffer );\n\n\t\t\t\t} );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tif ( onError ) {\n\n\t\t\t\t\tonError( e );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( e );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t}\n\n} );\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction HemisphereLightProbe( skyColor, groundColor, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( skyColor );\n\tconst color2 = new Color().set( groundColor );\n\n\tconst sky = new Vector3( color1.r, color1.g, color1.b );\n\tconst ground = new Vector3( color2.r, color2.g, color2.b );\n\n\t// without extra factor of PI in the shader, should = 1 / Math.sqrt( Math.PI );\n\tconst c0 = Math.sqrt( Math.PI );\n\tconst c1 = c0 * Math.sqrt( 0.75 );\n\n\tthis.sh.coefficients[ 0 ].copy( sky ).add( ground ).multiplyScalar( c0 );\n\tthis.sh.coefficients[ 1 ].copy( sky ).sub( ground ).multiplyScalar( c1 );\n\n}\n\nHemisphereLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: HemisphereLightProbe,\n\n\tisHemisphereLightProbe: true,\n\n\tcopy: function ( source ) { // modifying colors not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction AmbientLightProbe( color, intensity ) {\n\n\tLightProbe.call( this, undefined, intensity );\n\n\tconst color1 = new Color().set( color );\n\n\t// without extra factor of PI in the shader, would be 2 / Math.sqrt( Math.PI );\n\tthis.sh.coefficients[ 0 ].set( color1.r, color1.g, color1.b ).multiplyScalar( 2 * Math.sqrt( Math.PI ) );\n\n}\n\nAmbientLightProbe.prototype = Object.assign( Object.create( LightProbe.prototype ), {\n\n\tconstructor: AmbientLightProbe,\n\n\tisAmbientLightProbe: true,\n\n\tcopy: function ( source ) { // modifying color not currently supported\n\n\t\tLightProbe.prototype.copy.call( this, source );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tconst data = LightProbe.prototype.toJSON.call( this, meta );\n\n\t\t// data.sh = this.sh.toArray(); // todo\n\n\t\treturn data;\n\n\t}\n\n} );\n\nconst _eyeRight = new Matrix4();\nconst _eyeLeft = new Matrix4();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction StereoCamera() {\n\n\tthis.type = 'StereoCamera';\n\n\tthis.aspect = 1;\n\n\tthis.eyeSep = 0.064;\n\n\tthis.cameraL = new PerspectiveCamera();\n\tthis.cameraL.layers.enable( 1 );\n\tthis.cameraL.matrixAutoUpdate = false;\n\n\tthis.cameraR = new PerspectiveCamera();\n\tthis.cameraR.layers.enable( 2 );\n\tthis.cameraR.matrixAutoUpdate = false;\n\n\tthis._cache = {\n\t\tfocus: null,\n\t\tfov: null,\n\t\taspect: null,\n\t\tnear: null,\n\t\tfar: null,\n\t\tzoom: null,\n\t\teyeSep: null\n\t};\n\n}\n\nObject.assign( StereoCamera.prototype, {\n\n\tupdate: function ( camera ) {\n\n\t\tconst cache = this._cache;\n\n\t\tconst needsUpdate = cache.focus !== camera.focus || cache.fov !== camera.fov ||\n\t\t\tcache.aspect !== camera.aspect * this.aspect || cache.near !== camera.near ||\n\t\t\tcache.far !== camera.far || cache.zoom !== camera.zoom || cache.eyeSep !== this.eyeSep;\n\n\t\tif ( needsUpdate ) {\n\n\t\t\tcache.focus = camera.focus;\n\t\t\tcache.fov = camera.fov;\n\t\t\tcache.aspect = camera.aspect * this.aspect;\n\t\t\tcache.near = camera.near;\n\t\t\tcache.far = camera.far;\n\t\t\tcache.zoom = camera.zoom;\n\t\t\tcache.eyeSep = this.eyeSep;\n\n\t\t\t// Off-axis stereoscopic effect based on\n\t\t\t// http://paulbourke.net/stereographics/stereorender/\n\n\t\t\tconst projectionMatrix = camera.projectionMatrix.clone();\n\t\t\tconst eyeSepHalf = cache.eyeSep / 2;\n\t\t\tconst eyeSepOnProjection = eyeSepHalf * cache.near / cache.focus;\n\t\t\tconst ymax = ( cache.near * Math.tan( MathUtils.DEG2RAD * cache.fov * 0.5 ) ) / cache.zoom;\n\t\t\tlet xmin, xmax;\n\n\t\t\t// translate xOffset\n\n\t\t\t_eyeLeft.elements[ 12 ] = - eyeSepHalf;\n\t\t\t_eyeRight.elements[ 12 ] = eyeSepHalf;\n\n\t\t\t// for left eye\n\n\t\t\txmin = - ymax * cache.aspect + eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect + eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraL.projectionMatrix.copy( projectionMatrix );\n\n\t\t\t// for right eye\n\n\t\t\txmin = - ymax * cache.aspect - eyeSepOnProjection;\n\t\t\txmax = ymax * cache.aspect - eyeSepOnProjection;\n\n\t\t\tprojectionMatrix.elements[ 0 ] = 2 * cache.near / ( xmax - xmin );\n\t\t\tprojectionMatrix.elements[ 8 ] = ( xmax + xmin ) / ( xmax - xmin );\n\n\t\t\tthis.cameraR.projectionMatrix.copy( projectionMatrix );\n\n\t\t}\n\n\t\tthis.cameraL.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeLeft );\n\t\tthis.cameraR.matrixWorld.copy( camera.matrixWorld ).multiply( _eyeRight );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tlet diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tconst newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _position$2 = new Vector3();\nconst _quaternion$3 = new Quaternion();\nconst _scale$1 = new Vector3();\nconst _orientation = new Vector3();\n\nfunction AudioListener() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'AudioListener';\n\n\tthis.context = AudioContext.getContext();\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( this.context.destination );\n\n\tthis.filter = null;\n\n\tthis.timeDelta = 0;\n\n\t// private\n\n\tthis._clock = new Clock();\n\n}\n\nAudioListener.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: AudioListener,\n\n\tgetInput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tremoveFilter: function ( ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\t\t\tthis.gain.connect( this.context.destination );\n\t\t\tthis.filter = null;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.filter;\n\n\t},\n\n\tsetFilter: function ( value ) {\n\n\t\tif ( this.filter !== null ) {\n\n\t\t\tthis.gain.disconnect( this.filter );\n\t\t\tthis.filter.disconnect( this.context.destination );\n\n\t\t} else {\n\n\t\t\tthis.gain.disconnect( this.context.destination );\n\n\t\t}\n\n\t\tthis.filter = value;\n\t\tthis.gain.connect( this.filter );\n\t\tthis.filter.connect( this.context.destination );\n\n\t\treturn this;\n\n\t},\n\n\tgetMasterVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetMasterVolume: function ( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tconst listener = this.context.listener;\n\t\tconst up = this.up;\n\n\t\tthis.timeDelta = this._clock.getDelta();\n\n\t\tthis.matrixWorld.decompose( _position$2, _quaternion$3, _scale$1 );\n\n\t\t_orientation.set( 0, 0, - 1 ).applyQuaternion( _quaternion$3 );\n\n\t\tif ( listener.positionX ) {\n\n\t\t\t// code path for Chrome (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.timeDelta;\n\n\t\t\tlistener.positionX.linearRampToValueAtTime( _position$2.x, endTime );\n\t\t\tlistener.positionY.linearRampToValueAtTime( _position$2.y, endTime );\n\t\t\tlistener.positionZ.linearRampToValueAtTime( _position$2.z, endTime );\n\t\t\tlistener.forwardX.linearRampToValueAtTime( _orientation.x, endTime );\n\t\t\tlistener.forwardY.linearRampToValueAtTime( _orientation.y, endTime );\n\t\t\tlistener.forwardZ.linearRampToValueAtTime( _orientation.z, endTime );\n\t\t\tlistener.upX.linearRampToValueAtTime( up.x, endTime );\n\t\t\tlistener.upY.linearRampToValueAtTime( up.y, endTime );\n\t\t\tlistener.upZ.linearRampToValueAtTime( up.z, endTime );\n\n\t\t} else {\n\n\t\t\tlistener.setPosition( _position$2.x, _position$2.y, _position$2.z );\n\t\t\tlistener.setOrientation( _orientation.x, _orientation.y, _orientation.z, up.x, up.y, up.z );\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Reece Aaron Lecrivain / http://reecenotes.com/\n */\n\nfunction Audio( listener ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Audio';\n\n\tthis.listener = listener;\n\tthis.context = listener.context;\n\n\tthis.gain = this.context.createGain();\n\tthis.gain.connect( listener.getInput() );\n\n\tthis.autoplay = false;\n\n\tthis.buffer = null;\n\tthis.detune = 0;\n\tthis.loop = false;\n\tthis.loopStart = 0;\n\tthis.loopEnd = 0;\n\tthis.offset = 0;\n\tthis.duration = undefined;\n\tthis.playbackRate = 1;\n\tthis.isPlaying = false;\n\tthis.hasPlaybackControl = true;\n\tthis.sourceType = 'empty';\n\n\tthis._startedAt = 0;\n\tthis._progress = 0;\n\n\tthis.filters = [];\n\n}\n\nAudio.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Audio,\n\n\tgetOutput: function () {\n\n\t\treturn this.gain;\n\n\t},\n\n\tsetNodeSource: function ( audioNode ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'audioNode';\n\t\tthis.source = audioNode;\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetMediaElementSource: function ( mediaElement ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaNode';\n\t\tthis.source = this.context.createMediaElementSource( mediaElement );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetMediaStreamSource: function ( mediaStream ) {\n\n\t\tthis.hasPlaybackControl = false;\n\t\tthis.sourceType = 'mediaStreamNode';\n\t\tthis.source = this.context.createMediaStreamSource( mediaStream );\n\t\tthis.connect();\n\n\t\treturn this;\n\n\t},\n\n\tsetBuffer: function ( audioBuffer ) {\n\n\t\tthis.buffer = audioBuffer;\n\t\tthis.sourceType = 'buffer';\n\n\t\tif ( this.autoplay ) this.play();\n\n\t\treturn this;\n\n\t},\n\n\tplay: function ( delay ) {\n\n\t\tif ( delay === undefined ) delay = 0;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: Audio is already playing.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._startedAt = this.context.currentTime + delay;\n\n\t\tconst source = this.context.createBufferSource();\n\t\tsource.buffer = this.buffer;\n\t\tsource.loop = this.loop;\n\t\tsource.loopStart = this.loopStart;\n\t\tsource.loopEnd = this.loopEnd;\n\t\tsource.onended = this.onEnded.bind( this );\n\t\tsource.start( this._startedAt, this._progress + this.offset, this.duration );\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.source = source;\n\n\t\tthis.setDetune( this.detune );\n\t\tthis.setPlaybackRate( this.playbackRate );\n\n\t\treturn this.connect();\n\n\t},\n\n\tpause: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\t// update current progress\n\n\t\t\tthis._progress += Math.max( this.context.currentTime - this._startedAt, 0 ) * this.playbackRate;\n\n\t\t\tif ( this.loop === true ) {\n\n\t\t\t\t// ensure _progress does not exceed duration with looped audios\n\n\t\t\t\tthis._progress = this._progress % ( this.duration || this.buffer.duration );\n\n\t\t\t}\n\n\t\t\tthis.source.stop();\n\t\t\tthis.source.onended = null;\n\n\t\t\tthis.isPlaying = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis._progress = 0;\n\n\t\tthis.source.stop();\n\t\tthis.source.onended = null;\n\t\tthis.isPlaying = false;\n\n\t\treturn this;\n\n\t},\n\n\tconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.connect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].connect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].connect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.connect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tdisconnect: function () {\n\n\t\tif ( this.filters.length > 0 ) {\n\n\t\t\tthis.source.disconnect( this.filters[ 0 ] );\n\n\t\t\tfor ( let i = 1, l = this.filters.length; i < l; i ++ ) {\n\n\t\t\t\tthis.filters[ i - 1 ].disconnect( this.filters[ i ] );\n\n\t\t\t}\n\n\t\t\tthis.filters[ this.filters.length - 1 ].disconnect( this.getOutput() );\n\n\t\t} else {\n\n\t\t\tthis.source.disconnect( this.getOutput() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetFilters: function () {\n\n\t\treturn this.filters;\n\n\t},\n\n\tsetFilters: function ( value ) {\n\n\t\tif ( ! value ) value = [];\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.disconnect();\n\t\t\tthis.filters = value;\n\t\t\tthis.connect();\n\n\t\t} else {\n\n\t\t\tthis.filters = value;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetDetune: function ( value ) {\n\n\t\tthis.detune = value;\n\n\t\tif ( this.source.detune === undefined ) return; // only set detune when available\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.detune.setTargetAtTime( this.detune, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetDetune: function () {\n\n\t\treturn this.detune;\n\n\t},\n\n\tgetFilter: function () {\n\n\t\treturn this.getFilters()[ 0 ];\n\n\t},\n\n\tsetFilter: function ( filter ) {\n\n\t\treturn this.setFilters( filter ? [ filter ] : [] );\n\n\t},\n\n\tsetPlaybackRate: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.playbackRate = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.playbackRate.setTargetAtTime( this.playbackRate, this.context.currentTime, 0.01 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetPlaybackRate: function () {\n\n\t\treturn this.playbackRate;\n\n\t},\n\n\tonEnded: function () {\n\n\t\tthis.isPlaying = false;\n\n\t},\n\n\tgetLoop: function () {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn false;\n\n\t\t}\n\n\t\treturn this.loop;\n\n\t},\n\n\tsetLoop: function ( value ) {\n\n\t\tif ( this.hasPlaybackControl === false ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: this Audio has no playback control.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tthis.loop = value;\n\n\t\tif ( this.isPlaying === true ) {\n\n\t\t\tthis.source.loop = this.loop;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetLoopStart: function ( value ) {\n\n\t\tthis.loopStart = value;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoopEnd: function ( value ) {\n\n\t\tthis.loopEnd = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetVolume: function () {\n\n\t\treturn this.gain.gain.value;\n\n\t},\n\n\tsetVolume: function ( value ) {\n\n\t\tthis.gain.gain.setTargetAtTime( value, this.context.currentTime, 0.01 );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nconst _position$3 = new Vector3();\nconst _quaternion$4 = new Quaternion();\nconst _scale$2 = new Vector3();\nconst _orientation$1 = new Vector3();\n\nfunction PositionalAudio( listener ) {\n\n\tAudio.call( this, listener );\n\n\tthis.panner = this.context.createPanner();\n\tthis.panner.panningModel = 'HRTF';\n\tthis.panner.connect( this.gain );\n\n}\n\nPositionalAudio.prototype = Object.assign( Object.create( Audio.prototype ), {\n\n\tconstructor: PositionalAudio,\n\n\tgetOutput: function () {\n\n\t\treturn this.panner;\n\n\t},\n\n\tgetRefDistance: function () {\n\n\t\treturn this.panner.refDistance;\n\n\t},\n\n\tsetRefDistance: function ( value ) {\n\n\t\tthis.panner.refDistance = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetRolloffFactor: function () {\n\n\t\treturn this.panner.rolloffFactor;\n\n\t},\n\n\tsetRolloffFactor: function ( value ) {\n\n\t\tthis.panner.rolloffFactor = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetDistanceModel: function () {\n\n\t\treturn this.panner.distanceModel;\n\n\t},\n\n\tsetDistanceModel: function ( value ) {\n\n\t\tthis.panner.distanceModel = value;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxDistance: function () {\n\n\t\treturn this.panner.maxDistance;\n\n\t},\n\n\tsetMaxDistance: function ( value ) {\n\n\t\tthis.panner.maxDistance = value;\n\n\t\treturn this;\n\n\t},\n\n\tsetDirectionalCone: function ( coneInnerAngle, coneOuterAngle, coneOuterGain ) {\n\n\t\tthis.panner.coneInnerAngle = coneInnerAngle;\n\t\tthis.panner.coneOuterAngle = coneOuterAngle;\n\t\tthis.panner.coneOuterGain = coneOuterGain;\n\n\t\treturn this;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.hasPlaybackControl === true && this.isPlaying === false ) return;\n\n\t\tthis.matrixWorld.decompose( _position$3, _quaternion$4, _scale$2 );\n\n\t\t_orientation$1.set( 0, 0, 1 ).applyQuaternion( _quaternion$4 );\n\n\t\tconst panner = this.panner;\n\n\t\tif ( panner.positionX ) {\n\n\t\t\t// code path for Chrome and Firefox (see #14393)\n\n\t\t\tconst endTime = this.context.currentTime + this.listener.timeDelta;\n\n\t\t\tpanner.positionX.linearRampToValueAtTime( _position$3.x, endTime );\n\t\t\tpanner.positionY.linearRampToValueAtTime( _position$3.y, endTime );\n\t\t\tpanner.positionZ.linearRampToValueAtTime( _position$3.z, endTime );\n\t\t\tpanner.orientationX.linearRampToValueAtTime( _orientation$1.x, endTime );\n\t\t\tpanner.orientationY.linearRampToValueAtTime( _orientation$1.y, endTime );\n\t\t\tpanner.orientationZ.linearRampToValueAtTime( _orientation$1.z, endTime );\n\n\t\t} else {\n\n\t\t\tpanner.setPosition( _position$3.x, _position$3.y, _position$3.z );\n\t\t\tpanner.setOrientation( _orientation$1.x, _orientation$1.y, _orientation$1.z );\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AudioAnalyser( audio, fftSize ) {\n\n\tthis.analyser = audio.context.createAnalyser();\n\tthis.analyser.fftSize = fftSize !== undefined ? fftSize : 2048;\n\n\tthis.data = new Uint8Array( this.analyser.frequencyBinCount );\n\n\taudio.getOutput().connect( this.analyser );\n\n}\n\nObject.assign( AudioAnalyser.prototype, {\n\n\tgetFrequencyData: function () {\n\n\t\tthis.analyser.getByteFrequencyData( this.data );\n\n\t\treturn this.data;\n\n\t},\n\n\tgetAverageFrequency: function () {\n\n\t\tlet value = 0;\n\t\tconst data = this.getFrequencyData();\n\n\t\tfor ( let i = 0; i < data.length; i ++ ) {\n\n\t\t\tvalue += data[ i ];\n\n\t\t}\n\n\t\treturn value / data.length;\n\n\t}\n\n} );\n\n/**\n *\n * Buffered scene graph property that allows weighted accumulation.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tlet mixFunction,\n\t\tmixFunctionAdditive,\n\t\tsetIdentity;\n\n\t// buffer layout: [ incoming | accu0 | accu1 | orig | addAccu | (optional work) ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\t//\n\t// 'add' is used for additive cumulative results\n\t//\n\t// 'work' is optional and is only present for quaternion types. It is used\n\t// to store intermediate quaternion multiplication results\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tmixFunctionAdditive = this._slerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityQuaternion;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 6 );\n\t\t\tthis._workIndex = 5;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tmixFunction = this._select;\n\n\t\t\t// Use the regular mix function and for additive on these types,\n\t\t\t// additive is not relevant for non-numeric types\n\t\t\tmixFunctionAdditive = this._select;\n\n\t\t\tsetIdentity = this._setAdditiveIdentityOther;\n\n\t\t\tthis.buffer = new Array( valueSize * 5 );\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\t\t\tmixFunctionAdditive = this._lerpAdditive;\n\t\t\tsetIdentity = this._setAdditiveIdentityNumeric;\n\n\t\t\tthis.buffer = new Float64Array( valueSize * 5 );\n\n\t}\n\n\tthis._mixBufferRegion = mixFunction;\n\tthis._mixBufferRegionAdditive = mixFunctionAdditive;\n\tthis._setIdentity = setIdentity;\n\tthis._origIndex = 3;\n\tthis._addIndex = 4;\n\n\tthis.cumulativeWeight = 0;\n\tthis.cumulativeWeightAdditive = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nObject.assign( PropertyMixer.prototype, {\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function ( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride;\n\n\t\tlet currentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tconst mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// accumulate data in the 'incoming' region into 'add'\n\taccumulateAdditive: function ( weight ) {\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = stride * this._addIndex;\n\n\t\tif ( this.cumulativeWeightAdditive === 0 ) {\n\n\t\t\t// add = identity\n\n\t\t\tthis._setIdentity();\n\n\t\t}\n\n\t\t// add := add + incoming * weight\n\n\t\tthis._mixBufferRegionAdditive( buffer, offset, 0, weight, stride );\n\t\tthis.cumulativeWeightAdditive += weight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function ( accuIndex ) {\n\n\t\tconst stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\t\t\tweightAdditive = this.cumulativeWeightAdditive,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tconst originalValueOffset = stride * this._origIndex;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tif ( weightAdditive > 0 ) {\n\n\t\t\t// accuN := accuN + additive accuN\n\n\t\t\tthis._mixBufferRegionAdditive( buffer, offset, this._addIndex * stride, 1, stride );\n\n\t\t}\n\n\t\tfor ( let i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function () {\n\n\t\tconst binding = this.binding;\n\n\t\tconst buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * this._origIndex;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( let i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\t// Add to identity for additive\n\t\tthis._setIdentity();\n\n\t\tthis.cumulativeWeight = 0;\n\t\tthis.cumulativeWeightAdditive = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function () {\n\n\t\tconst originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\t_setAdditiveIdentityNumeric: function () {\n\n\t\tconst startIndex = this._addIndex * this.valueSize;\n\t\tconst endIndex = startIndex + this.valueSize;\n\n\t\tfor ( let i = startIndex; i < endIndex; i ++ ) {\n\n\t\t\tthis.buffer[ i ] = 0;\n\n\t\t}\n\n\t},\n\n\t_setAdditiveIdentityQuaternion: function () {\n\n\t\tthis._setAdditiveIdentityNumeric();\n\t\tthis.buffer[ this._addIndex * 4 + 3 ] = 1;\n\n\t},\n\n\t_setAdditiveIdentityOther: function () {\n\n\t\tconst startIndex = this._origIndex * this.valueSize;\n\t\tconst targetIndex = this._addIndex * this.valueSize;\n\n\t\tfor ( let i = 0; i < this.valueSize; i ++ ) {\n\n\t\t\tthis.buffer[ targetIndex + i ] = this.buffer[ startIndex + i ];\n\n\t\t}\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_slerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst workOffset = this._workIndex * stride;\n\n\t\t// Store result in intermediate buffer offset\n\t\tQuaternion.multiplyQuaternionsFlat( buffer, workOffset, buffer, dstOffset, buffer, srcOffset );\n\n\t\t// Slerp to the intermediate result\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, workOffset, t );\n\n\t},\n\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tconst s = 1 - t;\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t},\n\n\t_lerpAdditive: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tfor ( let i = 0; i !== stride; ++ i ) {\n\n\t\t\tconst j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\n// Characters [].:/ are reserved for track binding syntax.\nconst _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nconst _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nconst _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nconst _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nconst _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nconst _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nconst _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nconst _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nconst _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nconst _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tconst parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tconst firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tconst bindings = this._bindings;\n\n\t\tfor ( let i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tconst matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tconst results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tconst lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tconst objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against an allowlist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tconst bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tconst searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( let i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tconst childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tconst subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tconst source = this.resolvedProperty;\n\n\t\t\tfor ( let i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tconst dest = this.resolvedProperty;\n\n\t\t\t\tfor ( let i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tlet targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tlet objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( let i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tconst nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tconst nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tlet versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tlet bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( targetObject.morphTargetDictionary[ propertyIndex ] !== undefined ) {\n\n\t\t\t\t\t\tpropertyIndex = targetObject.morphTargetDictionary[ propertyIndex ];\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\n/**\n *\n * A group of objects that receives a shared animation state.\n *\n * Usage:\n *\n *  - Add objects you would otherwise pass as 'root' to the\n *    constructor or the .clipAction method of AnimationMixer.\n *\n *  - Instead pass this object as 'root'.\n *\n *  - You can also add and remove objects later when the mixer\n *    is running.\n *\n * Note:\n *\n *    Objects of this class appear as one object to the mixer,\n *    so cache control of the individual objects must be done\n *    on the group.\n *\n * Limitation:\n *\n *  - The animated properties must be compatible among the\n *    all objects in the group.\n *\n *  - A single property can either be controlled through a\n *    target group or directly, but not both.\n *\n * @author tschw\n */\n\nfunction AnimationObjectGroup() {\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// cached objects followed by the active ones\n\tthis._objects = Array.prototype.slice.call( arguments );\n\n\tthis.nCachedObjects_ = 0; // threshold\n\t// note: read by PropertyBinding.Composite\n\n\tconst indices = {};\n\tthis._indicesByUUID = indices; // for bookkeeping\n\n\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\tindices[ arguments[ i ].uuid ] = i;\n\n\t}\n\n\tthis._paths = []; // inside: string\n\tthis._parsedPaths = []; // inside: { we don't care, here }\n\tthis._bindings = []; // inside: Array< PropertyBinding >\n\tthis._bindingsIndicesByPath = {}; // inside: indices in these arrays\n\n\tconst scope = this;\n\n\tthis.stats = {\n\n\t\tobjects: {\n\t\t\tget total() {\n\n\t\t\t\treturn scope._objects.length;\n\n\t\t\t},\n\t\t\tget inUse() {\n\n\t\t\t\treturn this.total - scope.nCachedObjects_;\n\n\t\t\t}\n\t\t},\n\t\tget bindingsPerObject() {\n\n\t\t\treturn scope._bindings.length;\n\n\t\t}\n\n\t};\n\n}\n\nObject.assign( AnimationObjectGroup.prototype, {\n\n\tisAnimationObjectGroup: true,\n\n\tadd: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tpaths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet knownObject = undefined,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid;\n\t\t\tlet index = indicesByUUID[ uuid ];\n\n\t\t\tif ( index === undefined ) {\n\n\t\t\t\t// unknown object -> add it to the ACTIVE region\n\n\t\t\t\tindex = nObjects ++;\n\t\t\t\tindicesByUUID[ uuid ] = index;\n\t\t\t\tobjects.push( object );\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tbindings[ j ].push( new PropertyBinding( object, paths[ j ], parsedPaths[ j ] ) );\n\n\t\t\t\t}\n\n\t\t\t} else if ( index < nCachedObjects ) {\n\n\t\t\t\tknownObject = objects[ index ];\n\n\t\t\t\t// move existing object to the ACTIVE region\n\n\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ];\n\n\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = firstActiveIndex;\n\t\t\t\tobjects[ firstActiveIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ];\n\n\t\t\t\t\tlet binding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\n\t\t\t\t\tif ( binding === undefined ) {\n\n\t\t\t\t\t\t// since we do not bother to create new bindings\n\t\t\t\t\t\t// for objects that are cached, the binding may\n\t\t\t\t\t\t// or may not exist\n\n\t\t\t\t\t\tbinding = new PropertyBinding( object, paths[ j ], parsedPaths[ j ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t} else if ( objects[ index ] !== knownObject ) {\n\n\t\t\t\tconsole.error( 'THREE.AnimationObjectGroup: Different objects with the same UUID ' +\n\t\t\t\t\t'detected. Clean the caches or recreate your infrastructure when reloading scenes.' );\n\n\t\t\t} // else the object is already where we want it to be\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\tremove: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined && index >= nCachedObjects ) {\n\n\t\t\t\t// move existing object into the CACHED region\n\n\t\t\t\tconst lastCachedIndex = nCachedObjects ++,\n\t\t\t\t\tfirstActiveObject = objects[ lastCachedIndex ];\n\n\t\t\t\tindicesByUUID[ firstActiveObject.uuid ] = index;\n\t\t\t\tobjects[ index ] = firstActiveObject;\n\n\t\t\t\tindicesByUUID[ uuid ] = lastCachedIndex;\n\t\t\t\tobjects[ lastCachedIndex ] = object;\n\n\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\tfirstActive = bindingsForPath[ lastCachedIndex ],\n\t\t\t\t\t\tbinding = bindingsForPath[ index ];\n\n\t\t\t\t\tbindingsForPath[ index ] = firstActive;\n\t\t\t\t\tbindingsForPath[ lastCachedIndex ] = binding;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// remove & forget\n\tuncache: function () {\n\n\t\tconst objects = this._objects,\n\t\t\tindicesByUUID = this._indicesByUUID,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = bindings.length;\n\n\t\tlet nCachedObjects = this.nCachedObjects_,\n\t\t\tnObjects = objects.length;\n\n\t\tfor ( let i = 0, n = arguments.length; i !== n; ++ i ) {\n\n\t\t\tconst object = arguments[ i ],\n\t\t\t\tuuid = object.uuid,\n\t\t\t\tindex = indicesByUUID[ uuid ];\n\n\t\t\tif ( index !== undefined ) {\n\n\t\t\t\tdelete indicesByUUID[ uuid ];\n\n\t\t\t\tif ( index < nCachedObjects ) {\n\n\t\t\t\t\t// object is cached, shrink the CACHED region\n\n\t\t\t\t\tconst firstActiveIndex = -- nCachedObjects,\n\t\t\t\t\t\tlastCachedObject = objects[ firstActiveIndex ],\n\t\t\t\t\t\tlastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\t// last cached object takes this object's place\n\t\t\t\t\tindicesByUUID[ lastCachedObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastCachedObject;\n\n\t\t\t\t\t// last object goes to the activated slot and pop\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = firstActiveIndex;\n\t\t\t\t\tobjects[ firstActiveIndex ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ],\n\t\t\t\t\t\t\tlastCached = bindingsForPath[ firstActiveIndex ],\n\t\t\t\t\t\t\tlast = bindingsForPath[ lastIndex ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = lastCached;\n\t\t\t\t\t\tbindingsForPath[ firstActiveIndex ] = last;\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// object is active, just swap with the last and pop\n\n\t\t\t\t\tconst lastIndex = -- nObjects,\n\t\t\t\t\t\tlastObject = objects[ lastIndex ];\n\n\t\t\t\t\tindicesByUUID[ lastObject.uuid ] = index;\n\t\t\t\t\tobjects[ index ] = lastObject;\n\t\t\t\t\tobjects.pop();\n\n\t\t\t\t\t// accounting is done, now do the same for all bindings\n\n\t\t\t\t\tfor ( let j = 0, m = nBindings; j !== m; ++ j ) {\n\n\t\t\t\t\t\tconst bindingsForPath = bindings[ j ];\n\n\t\t\t\t\t\tbindingsForPath[ index ] = bindingsForPath[ lastIndex ];\n\t\t\t\t\t\tbindingsForPath.pop();\n\n\t\t\t\t\t}\n\n\t\t\t\t} // cached or active\n\n\t\t\t} // if object is known\n\n\t\t} // for arguments\n\n\t\tthis.nCachedObjects_ = nCachedObjects;\n\n\t},\n\n\t// Internal interface used by befriended PropertyBinding.Composite:\n\n\tsubscribe_: function ( path, parsedPath ) {\n\n\t\t// returns an array of bindings for the given path that is changed\n\t\t// according to the contained objects in the group\n\n\t\tlet indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ],\n\t\t\tbindings = this._bindings;\n\n\t\tif ( index !== undefined ) return bindings[ index ];\n\n\t\tconst paths = this._paths,\n\t\t\tparsedPaths = this._parsedPaths,\n\t\t\tobjects = this._objects,\n\t\t\tnObjects = objects.length,\n\t\t\tnCachedObjects = this.nCachedObjects_,\n\t\t\tbindingsForPath = new Array( nObjects );\n\n\t\tindex = bindings.length;\n\n\t\tindicesByPath[ path ] = index;\n\n\t\tpaths.push( path );\n\t\tparsedPaths.push( parsedPath );\n\t\tbindings.push( bindingsForPath );\n\n\t\tfor ( let i = nCachedObjects, n = objects.length; i !== n; ++ i ) {\n\n\t\t\tconst object = objects[ i ];\n\t\t\tbindingsForPath[ i ] = new PropertyBinding( object, path, parsedPath );\n\n\t\t}\n\n\t\treturn bindingsForPath;\n\n\t},\n\n\tunsubscribe_: function ( path ) {\n\n\t\t// tells the group to forget about a property path and no longer\n\t\t// update the array previously obtained with 'subscribe_'\n\n\t\tconst indicesByPath = this._bindingsIndicesByPath,\n\t\t\tindex = indicesByPath[ path ];\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tconst paths = this._paths,\n\t\t\t\tparsedPaths = this._parsedPaths,\n\t\t\t\tbindings = this._bindings,\n\t\t\t\tlastBindingsIndex = bindings.length - 1,\n\t\t\t\tlastBindings = bindings[ lastBindingsIndex ],\n\t\t\t\tlastBindingsPath = path[ lastBindingsIndex ];\n\n\t\t\tindicesByPath[ lastBindingsPath ] = index;\n\n\t\t\tbindings[ index ] = lastBindings;\n\t\t\tbindings.pop();\n\n\t\t\tparsedPaths[ index ] = parsedPaths[ lastBindingsIndex ];\n\t\t\tparsedPaths.pop();\n\n\t\t\tpaths[ index ] = paths[ lastBindingsIndex ];\n\t\t\tpaths.pop();\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n *\n * Action provided by AnimationMixer for scheduling clip playback on specific\n * objects.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n *\n */\n\nfunction AnimationAction( mixer, clip, localRoot, blendMode ) {\n\n\tthis._mixer = mixer;\n\tthis._clip = clip;\n\tthis._localRoot = localRoot || null;\n\tthis.blendMode = blendMode || clip.blendMode;\n\n\tconst tracks = clip.tracks,\n\t\tnTracks = tracks.length,\n\t\tinterpolants = new Array( nTracks );\n\n\tconst interpolantSettings = {\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\t};\n\n\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\tconst interpolant = tracks[ i ].createInterpolant( null );\n\t\tinterpolants[ i ] = interpolant;\n\t\tinterpolant.settings = interpolantSettings;\n\n\t}\n\n\tthis._interpolantSettings = interpolantSettings;\n\n\tthis._interpolants = interpolants; // bound by the mixer\n\n\t// inside: PropertyMixer (managed by the mixer)\n\tthis._propertyBindings = new Array( nTracks );\n\n\tthis._cacheIndex = null; // for the memory manager\n\tthis._byClipCacheIndex = null; // for the memory manager\n\n\tthis._timeScaleInterpolant = null;\n\tthis._weightInterpolant = null;\n\n\tthis.loop = LoopRepeat;\n\tthis._loopCount = - 1;\n\n\t// global mixer time when the action is to be started\n\t// it's set back to 'null' upon start of the action\n\tthis._startTime = null;\n\n\t// scaled local time of the action\n\t// gets clamped or wrapped to 0..clip.duration according to loop\n\tthis.time = 0;\n\n\tthis.timeScale = 1;\n\tthis._effectiveTimeScale = 1;\n\n\tthis.weight = 1;\n\tthis._effectiveWeight = 1;\n\n\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\tthis.paused = false; // true -> zero effective time scale\n\tthis.enabled = true; // false -> zero effective weight\n\n\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n}\n\nObject.assign( AnimationAction.prototype, {\n\n\t// State & Scheduling\n\n\tplay: function () {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t},\n\n\treset: function () {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t},\n\n\tisRunning: function () {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t},\n\n\t// return true when play has been called\n\tisScheduled: function () {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t},\n\n\tstartAt: function ( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoop: function ( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t},\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight: function ( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t},\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight: function () {\n\n\t\treturn this._effectiveWeight;\n\n\t},\n\n\tfadeIn: function ( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t},\n\n\tfadeOut: function ( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t},\n\n\tcrossFadeFrom: function ( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tconst fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcrossFadeTo: function ( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t},\n\n\tstopFading: function () {\n\n\t\tlet weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale: function ( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale: function () {\n\n\t\treturn this._effectiveTimeScale;\n\n\t},\n\n\tsetDuration: function ( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\tsyncWith: function ( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\thalt: function ( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t},\n\n\twarp: function ( startTimeScale, endTimeScale, duration ) {\n\n\t\tconst mixer = this._mixer,\n\t\t\tnow = mixer.time,\n\t\t\ttimeScale = this.timeScale;\n\n\t\tlet interpolant = this._timeScaleInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t},\n\n\tstopWarping: function () {\n\n\t\tlet timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Object Accessors\n\n\tgetMixer: function () {\n\n\t\treturn this._mixer;\n\n\t},\n\n\tgetClip: function () {\n\n\t\treturn this._clip;\n\n\t},\n\n\tgetRoot: function () {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t},\n\n\t// Interna\n\n\t_update: function ( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tconst startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tconst timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tconst clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tconst weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tconst interpolants = this._interpolants;\n\t\t\tconst propertyMixers = this._propertyBindings;\n\n\t\t\tswitch ( this.blendMode ) {\n\n\t\t\t\tcase AdditiveAnimationBlendMode:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulateAdditive( weight );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase NormalAnimationBlendMode:\n\t\t\t\tdefault:\n\n\t\t\t\t\tfor ( let j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_updateWeight: function ( time ) {\n\n\t\tlet weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tconst interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t},\n\n\t_updateTimeScale: function ( time ) {\n\n\t\tlet timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tconst interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tconst interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t},\n\n\t_updateTime: function ( deltaTime ) {\n\n\t\tconst duration = this._clip.duration;\n\t\tconst loop = this.loop;\n\n\t\tlet time = this.time + deltaTime;\n\t\tlet loopCount = this._loopCount;\n\n\t\tconst pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tconst loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tconst pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tconst atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t},\n\n\t_setEndings: function ( atStart, atEnd, pingPong ) {\n\n\t\tconst settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_scheduleFading: function ( duration, weightNow, weightThen ) {\n\n\t\tconst mixer = this._mixer, now = mixer.time;\n\t\tlet interpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tconst times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n *\n * Player for AnimationClips.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: AnimationMixer,\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tconst root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName;\n\n\t\tlet bindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( let i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tconst track = tracks[ i ],\n\t\t\t\ttrackName = track.name;\n\n\t\t\tlet binding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tconst path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tconst rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tconst bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tconst binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tconst scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tconst index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tconst actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tlet actionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tconst knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tconst actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tconst clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tconst actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tconst bindings = action._propertyBindings;\n\n\t\tfor ( let i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tconst binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tconst actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindings = this._bindings;\n\n\t\tlet bindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tconst bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++;\n\n\t\tlet interpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tconst interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot, blendMode ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid;\n\n\t\tlet clipObject = typeof clip === 'string' ? AnimationClip.findByName( root, clip ) : clip;\n\n\t\tconst clipUuid = clipObject !== null ? clipObject.uuid : clip;\n\n\t\tlet actionsForClip = this._actionsByClip[ clipUuid ],\n\t\t\tprototypeAction = null;\n\n\t\tif ( blendMode === undefined ) {\n\n\t\t\tif ( clipObject !== null ) {\n\n\t\t\t\tblendMode = clipObject.blendMode;\n\n\t\t\t} else {\n\n\t\t\t\tblendMode = NormalAnimationBlendMode;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tconst existingAction = actionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined && existingAction.blendMode === blendMode ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tconst newAction = new AnimationAction( this, clipObject, optionalRoot, blendMode );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tconst root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions;\n\n\t\tfor ( let i = nActions - 1; i >= 0; -- i ) {\n\n\t\t\tactions[ i ].stop();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tconst actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( let i = 0; i !== nActions; ++ i ) {\n\n\t\t\tconst action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tconst bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( let i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime: function ( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( let i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tconst actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tconst actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( let i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tconst action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tconst cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tconst rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( const clipUuid in actionsByClip ) {\n\n\t\t\tconst actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( const trackName in bindingByName ) {\n\n\t\t\t\tconst binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tconst action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Uniform( value ) {\n\n\tif ( typeof value === 'string' ) {\n\n\t\tconsole.warn( 'THREE.Uniform: Type parameter is no longer needed.' );\n\t\tvalue = arguments[ 1 ];\n\n\t}\n\n\tthis.value = value;\n\n}\n\nUniform.prototype.clone = function () {\n\n\treturn new Uniform( this.value.clone === undefined ? this.value : this.value.clone() );\n\n};\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedInterleavedBuffer( array, stride, meshPerAttribute ) {\n\n\tInterleavedBuffer.call( this, array, stride );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedInterleavedBuffer.prototype = Object.assign( Object.create( InterleavedBuffer.prototype ), {\n\n\tconstructor: InstancedInterleavedBuffer,\n\n\tisInstancedInterleavedBuffer: true,\n\n\tcopy: function ( source ) {\n\n\t\tInterleavedBuffer.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function ( data ) {\n\n\t\tconst ib = InterleavedBuffer.prototype.clone.call( this, data );\n\n\t\tib.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn ib;\n\n\t},\n\n\ttoJSON: function ( data ) {\n\n\t\tconst json = InterleavedBuffer.prototype.toJSON.call( this, data );\n\n\t\tjson.isInstancedInterleavedBuffer = true;\n\t\tjson.meshPerAttribute = this.meshPerAttribute;\n\n\t\treturn json;\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\tthis.camera = null;\n\tthis.layers = new Layers();\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: { threshold: 1 },\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tconst children = object.children;\n\n\t\tfor ( let i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tconst intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( let i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nfunction Spherical( radius, phi, theta ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // polar angle\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // azimuthal angle\n\n\treturn this;\n\n}\n\nObject.assign( Spherical.prototype, {\n\n\tset: function ( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t},\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe: function () {\n\n\t\tconst EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function ( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t},\n\n\tsetFromCartesianCoords: function ( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Ref: https://en.wikipedia.org/wiki/Cylindrical_coordinate_system\n *\n */\n\nfunction Cylindrical( radius, theta, y ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0; // distance from the origin to a point in the x-z plane\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // counterclockwise angle in the x-z plane measured in radians from the positive z-axis\n\tthis.y = ( y !== undefined ) ? y : 0; // height above the x-z plane\n\n\treturn this;\n\n}\n\nObject.assign( Cylindrical.prototype, {\n\n\tset: function ( radius, theta, y ) {\n\n\t\tthis.radius = radius;\n\t\tthis.theta = theta;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.theta = other.theta;\n\t\tthis.y = other.y;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function ( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t},\n\n\tsetFromCartesianCoords: function ( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + z * z );\n\t\tthis.theta = Math.atan2( x, z );\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n */\n\nconst _vector$7 = new Vector2();\n\nfunction Box2( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n}\n\nObject.assign( Box2.prototype, {\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( let i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tconst halfSize = _vector$7.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tconst clampedPoint = _vector$7.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n/**\n * @author bhouston / http://clara.io\n */\n\nconst _startP = new Vector3();\nconst _startEnd = new Vector3();\n\nfunction Line3( start, end ) {\n\n\tthis.start = ( start !== undefined ) ? start : new Vector3();\n\tthis.end = ( end !== undefined ) ? end : new Vector3();\n\n}\n\nObject.assign( Line3.prototype, {\n\n\tset: function ( start, end ) {\n\n\t\tthis.start.copy( start );\n\t\tthis.end.copy( end );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( line ) {\n\n\t\tthis.start.copy( line.start );\n\t\tthis.end.copy( line.end );\n\n\t\treturn this;\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.start, this.end ).multiplyScalar( 0.5 );\n\n\t},\n\n\tdelta: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .delta() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.subVectors( this.end, this.start );\n\n\t},\n\n\tdistanceSq: function () {\n\n\t\treturn this.start.distanceToSquared( this.end );\n\n\t},\n\n\tdistance: function () {\n\n\t\treturn this.start.distanceTo( this.end );\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tclosestPointToPointParameter: function ( point, clampToLine ) {\n\n\t\t_startP.subVectors( point, this.start );\n\t\t_startEnd.subVectors( this.end, this.start );\n\n\t\tconst startEnd2 = _startEnd.dot( _startEnd );\n\t\tconst startEnd_startP = _startEnd.dot( _startP );\n\n\t\tlet t = startEnd_startP / startEnd2;\n\n\t\tif ( clampToLine ) {\n\n\t\t\tt = MathUtils.clamp( t, 0, 1 );\n\n\t\t}\n\n\t\treturn t;\n\n\t},\n\n\tclosestPointToPoint: function ( point, clampToLine, target ) {\n\n\t\tconst t = this.closestPointToPointParameter( point, clampToLine );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Line3: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.delta( target ).multiplyScalar( t ).add( this.start );\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.start.applyMatrix4( matrix );\n\t\tthis.end.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( line ) {\n\n\t\treturn line.start.equals( this.start ) && line.end.equals( this.end );\n\n\t}\n\n} );\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction ImmediateRenderObject( material ) {\n\n\tObject3D.call( this );\n\n\tthis.material = material;\n\tthis.render = function ( /* renderCallback */ ) {};\n\n\tthis.hasPositions = false;\n\tthis.hasNormals = false;\n\tthis.hasColors = false;\n\tthis.hasUvs = false;\n\n\tthis.positionArray = null;\n\tthis.normalArray = null;\n\tthis.colorArray = null;\n\tthis.uvArray = null;\n\n\tthis.count = 0;\n\n}\n\nImmediateRenderObject.prototype = Object.create( Object3D.prototype );\nImmediateRenderObject.prototype.constructor = ImmediateRenderObject;\n\nImmediateRenderObject.prototype.isImmediateRenderObject = true;\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nconst _vector$8 = new Vector3();\n\nfunction SpotLightHelper( light, color ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.color = color;\n\n\tconst geometry = new BufferGeometry();\n\n\tconst positions = [\n\t\t0, 0, 0, \t0, 0, 1,\n\t\t0, 0, 0, \t1, 0, 1,\n\t\t0, 0, 0,\t- 1, 0, 1,\n\t\t0, 0, 0, \t0, 1, 1,\n\t\t0, 0, 0, \t0, - 1, 1\n\t];\n\n\tfor ( let i = 0, j = 1, l = 32; i < l; i ++, j ++ ) {\n\n\t\tconst p1 = ( i / l ) * Math.PI * 2;\n\t\tconst p2 = ( j / l ) * Math.PI * 2;\n\n\t\tpositions.push(\n\t\t\tMath.cos( p1 ), Math.sin( p1 ), 1,\n\t\t\tMath.cos( p2 ), Math.sin( p2 ), 1\n\t\t);\n\n\t}\n\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\tthis.cone = new LineSegments( geometry, material );\n\tthis.add( this.cone );\n\n\tthis.update();\n\n}\n\nSpotLightHelper.prototype = Object.create( Object3D.prototype );\nSpotLightHelper.prototype.constructor = SpotLightHelper;\n\nSpotLightHelper.prototype.dispose = function () {\n\n\tthis.cone.geometry.dispose();\n\tthis.cone.material.dispose();\n\n};\n\nSpotLightHelper.prototype.update = function () {\n\n\tthis.light.updateMatrixWorld();\n\n\tconst coneLength = this.light.distance ? this.light.distance : 1000;\n\tconst coneWidth = coneLength * Math.tan( this.light.angle );\n\n\tthis.cone.scale.set( coneWidth, coneWidth, coneLength );\n\n\t_vector$8.setFromMatrixPosition( this.light.target.matrixWorld );\n\n\tthis.cone.lookAt( _vector$8 );\n\n\tif ( this.color !== undefined ) {\n\n\t\tthis.cone.material.color.set( this.color );\n\n\t} else {\n\n\t\tthis.cone.material.color.copy( this.light.color );\n\n\t}\n\n};\n\n/**\n * @author Sean Griffin / http://twitter.com/sgrif\n * @author Michael Guerrero / http://realitymeltdown.com\n * @author mrdoob / http://mrdoob.com/\n * @author ikerr / http://verold.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nconst _vector$9 = new Vector3();\nconst _boneMatrix = new Matrix4();\nconst _matrixWorldInv = new Matrix4();\n\nfunction getBoneList( object ) {\n\n\tconst boneList = [];\n\n\tif ( object && object.isBone ) {\n\n\t\tboneList.push( object );\n\n\t}\n\n\tfor ( let i = 0; i < object.children.length; i ++ ) {\n\n\t\tboneList.push.apply( boneList, getBoneList( object.children[ i ] ) );\n\n\t}\n\n\treturn boneList;\n\n}\n\nfunction SkeletonHelper( object ) {\n\n\tconst bones = getBoneList( object );\n\n\tconst geometry = new BufferGeometry();\n\n\tconst vertices = [];\n\tconst colors = [];\n\n\tconst color1 = new Color( 0, 0, 1 );\n\tconst color2 = new Color( 0, 1, 0 );\n\n\tfor ( let i = 0; i < bones.length; i ++ ) {\n\n\t\tconst bone = bones[ i ];\n\n\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tvertices.push( 0, 0, 0 );\n\t\t\tcolors.push( color1.r, color1.g, color1.b );\n\t\t\tcolors.push( color2.r, color2.g, color2.b );\n\n\t\t}\n\n\t}\n\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tconst material = new LineBasicMaterial( { vertexColors: true, depthTest: false, depthWrite: false, toneMapped: false, transparent: true } );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.type = 'SkeletonHelper';\n\n\tthis.root = object;\n\tthis.bones = bones;\n\n\tthis.matrix = object.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n}\n\nSkeletonHelper.prototype = Object.create( LineSegments.prototype );\nSkeletonHelper.prototype.constructor = SkeletonHelper;\n\nSkeletonHelper.prototype.isSkeletonHelper = true;\n\nSkeletonHelper.prototype.updateMatrixWorld = function ( force ) {\n\n\tconst bones = this.bones;\n\n\tconst geometry = this.geometry;\n\tconst position = geometry.getAttribute( 'position' );\n\n\t_matrixWorldInv.getInverse( this.root.matrixWorld );\n\n\tfor ( let i = 0, j = 0; i < bones.length; i ++ ) {\n\n\t\tconst bone = bones[ i ];\n\n\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.matrixWorld );\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\n\t\t\tposition.setXYZ( j, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\t_boneMatrix.multiplyMatrices( _matrixWorldInv, bone.parent.matrixWorld );\n\t\t\t_vector$9.setFromMatrixPosition( _boneMatrix );\n\t\t\tposition.setXYZ( j + 1, _vector$9.x, _vector$9.y, _vector$9.z );\n\n\t\t\tj += 2;\n\n\t\t}\n\n\t}\n\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction PointLightHelper( light, sphereSize, color ) {\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.color = color;\n\n\tconst geometry = new SphereBufferGeometry( sphereSize, 4, 2 );\n\tconst material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'PointLightHelper';\n\n\tthis.matrix = this.light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n\n\t/*\n\tconst distanceGeometry = new THREE.IcosahedronBufferGeometry( 1, 2 );\n\tconst distanceMaterial = new THREE.MeshBasicMaterial( { color: hexColor, fog: false, wireframe: true, opacity: 0.1, transparent: true } );\n\n\tthis.lightSphere = new THREE.Mesh( bulbGeometry, bulbMaterial );\n\tthis.lightDistance = new THREE.Mesh( distanceGeometry, distanceMaterial );\n\n\tconst d = light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\n\tthis.add( this.lightDistance );\n\t*/\n\n}\n\nPointLightHelper.prototype = Object.create( Mesh.prototype );\nPointLightHelper.prototype.constructor = PointLightHelper;\n\nPointLightHelper.prototype.dispose = function () {\n\n\tthis.geometry.dispose();\n\tthis.material.dispose();\n\n};\n\nPointLightHelper.prototype.update = function () {\n\n\tif ( this.color !== undefined ) {\n\n\t\tthis.material.color.set( this.color );\n\n\t} else {\n\n\t\tthis.material.color.copy( this.light.color );\n\n\t}\n\n\t/*\n\tconst d = this.light.distance;\n\n\tif ( d === 0.0 ) {\n\n\t\tthis.lightDistance.visible = false;\n\n\t} else {\n\n\t\tthis.lightDistance.visible = true;\n\t\tthis.lightDistance.scale.set( d, d, d );\n\n\t}\n\t*/\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nconst _vector$a = new Vector3();\nconst _color1 = new Color();\nconst _color2 = new Color();\n\nfunction HemisphereLightHelper( light, size, color ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.color = color;\n\n\tconst geometry = new OctahedronBufferGeometry( size );\n\tgeometry.rotateY( Math.PI * 0.5 );\n\n\tthis.material = new MeshBasicMaterial( { wireframe: true, fog: false, toneMapped: false } );\n\tif ( this.color === undefined ) this.material.vertexColors = true;\n\n\tconst position = geometry.getAttribute( 'position' );\n\tconst colors = new Float32Array( position.count * 3 );\n\n\tgeometry.setAttribute( 'color', new BufferAttribute( colors, 3 ) );\n\n\tthis.add( new Mesh( geometry, this.material ) );\n\n\tthis.update();\n\n}\n\nHemisphereLightHelper.prototype = Object.create( Object3D.prototype );\nHemisphereLightHelper.prototype.constructor = HemisphereLightHelper;\n\nHemisphereLightHelper.prototype.dispose = function () {\n\n\tthis.children[ 0 ].geometry.dispose();\n\tthis.children[ 0 ].material.dispose();\n\n};\n\nHemisphereLightHelper.prototype.update = function () {\n\n\tconst mesh = this.children[ 0 ];\n\n\tif ( this.color !== undefined ) {\n\n\t\tthis.material.color.set( this.color );\n\n\t} else {\n\n\t\tconst colors = mesh.geometry.getAttribute( 'color' );\n\n\t\t_color1.copy( this.light.color );\n\t\t_color2.copy( this.light.groundColor );\n\n\t\tfor ( let i = 0, l = colors.count; i < l; i ++ ) {\n\n\t\t\tconst color = ( i < ( l / 2 ) ) ? _color1 : _color2;\n\n\t\t\tcolors.setXYZ( i, color.r, color.g, color.b );\n\n\t\t}\n\n\t\tcolors.needsUpdate = true;\n\n\t}\n\n\tmesh.lookAt( _vector$a.setFromMatrixPosition( this.light.matrixWorld ).negate() );\n\n};\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction GridHelper( size, divisions, color1, color2 ) {\n\n\tsize = size || 10;\n\tdivisions = divisions || 10;\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\n\n\tconst center = divisions / 2;\n\tconst step = size / divisions;\n\tconst halfSize = size / 2;\n\n\tconst vertices = [], colors = [];\n\n\tfor ( let i = 0, j = 0, k = - halfSize; i <= divisions; i ++, k += step ) {\n\n\t\tvertices.push( - halfSize, 0, k, halfSize, 0, k );\n\t\tvertices.push( k, 0, - halfSize, k, 0, halfSize );\n\n\t\tconst color = i === center ? color1 : color2;\n\n\t\tcolor.toArray( colors, j ); j += 3;\n\t\tcolor.toArray( colors, j ); j += 3;\n\t\tcolor.toArray( colors, j ); j += 3;\n\t\tcolor.toArray( colors, j ); j += 3;\n\n\t}\n\n\tconst geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.type = 'GridHelper';\n\n}\n\nGridHelper.prototype = Object.assign( Object.create( LineSegments.prototype ), {\n\n\tconstructor: GridHelper,\n\n\tcopy: function ( source ) {\n\n\t\tLineSegments.prototype.copy.call( this, source );\n\n\t\tthis.geometry.copy( source.geometry );\n\t\tthis.material.copy( source.material );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / http://github.com/Mugen87\n * @author Hectate / http://www.github.com/Hectate\n */\n\nfunction PolarGridHelper( radius, radials, circles, divisions, color1, color2 ) {\n\n\tradius = radius || 10;\n\tradials = radials || 16;\n\tcircles = circles || 8;\n\tdivisions = divisions || 64;\n\tcolor1 = new Color( color1 !== undefined ? color1 : 0x444444 );\n\tcolor2 = new Color( color2 !== undefined ? color2 : 0x888888 );\n\n\tconst vertices = [];\n\tconst colors = [];\n\n\t// create the radials\n\n\tfor ( let i = 0; i <= radials; i ++ ) {\n\n\t\tconst v = ( i / radials ) * ( Math.PI * 2 );\n\n\t\tconst x = Math.sin( v ) * radius;\n\t\tconst z = Math.cos( v ) * radius;\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tvertices.push( x, 0, z );\n\n\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\tcolors.push( color.r, color.g, color.b );\n\t\tcolors.push( color.r, color.g, color.b );\n\n\t}\n\n\t// create the circles\n\n\tfor ( let i = 0; i <= circles; i ++ ) {\n\n\t\tconst color = ( i & 1 ) ? color1 : color2;\n\n\t\tconst r = radius - ( radius / circles * i );\n\n\t\tfor ( let j = 0; j < divisions; j ++ ) {\n\n\t\t\t// first vertex\n\n\t\t\tlet v = ( j / divisions ) * ( Math.PI * 2 );\n\n\t\t\tlet x = Math.sin( v ) * r;\n\t\t\tlet z = Math.cos( v ) * r;\n\n\t\t\tvertices.push( x, 0, z );\n\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t\t// second vertex\n\n\t\t\tv = ( ( j + 1 ) / divisions ) * ( Math.PI * 2 );\n\n\t\t\tx = Math.sin( v ) * r;\n\t\t\tz = Math.cos( v ) * r;\n\n\t\t\tvertices.push( x, 0, z );\n\t\t\tcolors.push( color.r, color.g, color.b );\n\n\t\t}\n\n\t}\n\n\tconst geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.type = 'PolarGridHelper';\n\n}\n\nPolarGridHelper.prototype = Object.create( LineSegments.prototype );\nPolarGridHelper.prototype.constructor = PolarGridHelper;\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nconst _v1$5 = new Vector3();\nconst _v2$3 = new Vector3();\nconst _v3$1 = new Vector3();\n\nfunction DirectionalLightHelper( light, size, color ) {\n\n\tObject3D.call( this );\n\n\tthis.light = light;\n\tthis.light.updateMatrixWorld();\n\n\tthis.matrix = light.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.color = color;\n\n\tif ( size === undefined ) size = 1;\n\n\tlet geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [\n\t\t- size, size, 0,\n\t\tsize, size, 0,\n\t\tsize, - size, 0,\n\t\t- size, - size, 0,\n\t\t- size, size, 0\n\t], 3 ) );\n\n\tconst material = new LineBasicMaterial( { fog: false, toneMapped: false } );\n\n\tthis.lightPlane = new Line( geometry, material );\n\tthis.add( this.lightPlane );\n\n\tgeometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 0, 1 ], 3 ) );\n\n\tthis.targetLine = new Line( geometry, material );\n\tthis.add( this.targetLine );\n\n\tthis.update();\n\n}\n\nDirectionalLightHelper.prototype = Object.create( Object3D.prototype );\nDirectionalLightHelper.prototype.constructor = DirectionalLightHelper;\n\nDirectionalLightHelper.prototype.dispose = function () {\n\n\tthis.lightPlane.geometry.dispose();\n\tthis.lightPlane.material.dispose();\n\tthis.targetLine.geometry.dispose();\n\tthis.targetLine.material.dispose();\n\n};\n\nDirectionalLightHelper.prototype.update = function () {\n\n\t_v1$5.setFromMatrixPosition( this.light.matrixWorld );\n\t_v2$3.setFromMatrixPosition( this.light.target.matrixWorld );\n\t_v3$1.subVectors( _v2$3, _v1$5 );\n\n\tthis.lightPlane.lookAt( _v2$3 );\n\n\tif ( this.color !== undefined ) {\n\n\t\tthis.lightPlane.material.color.set( this.color );\n\t\tthis.targetLine.material.color.set( this.color );\n\n\t} else {\n\n\t\tthis.lightPlane.material.color.copy( this.light.color );\n\t\tthis.targetLine.material.color.copy( this.light.color );\n\n\t}\n\n\tthis.targetLine.lookAt( _v2$3 );\n\tthis.targetLine.scale.z = _v3$1.length();\n\n};\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author Mugen87 / https://github.com/Mugen87\n *\n *\t- shows frustum, line of sight and up of the camera\n *\t- suitable for fast updates\n * \t- based on frustum visualization in lightgl.js shadowmap example\n *\t\thttp://evanw.github.com/lightgl.js/tests/shadowmap.html\n */\n\nconst _vector$b = new Vector3();\nconst _camera = new Camera();\n\nfunction CameraHelper( camera ) {\n\n\tconst geometry = new BufferGeometry();\n\tconst material = new LineBasicMaterial( { color: 0xffffff, vertexColors: true, toneMapped: false } );\n\n\tconst vertices = [];\n\tconst colors = [];\n\n\tconst pointMap = {};\n\n\t// colors\n\n\tconst colorFrustum = new Color( 0xffaa00 );\n\tconst colorCone = new Color( 0xff0000 );\n\tconst colorUp = new Color( 0x00aaff );\n\tconst colorTarget = new Color( 0xffffff );\n\tconst colorCross = new Color( 0x333333 );\n\n\t// near\n\n\taddLine( 'n1', 'n2', colorFrustum );\n\taddLine( 'n2', 'n4', colorFrustum );\n\taddLine( 'n4', 'n3', colorFrustum );\n\taddLine( 'n3', 'n1', colorFrustum );\n\n\t// far\n\n\taddLine( 'f1', 'f2', colorFrustum );\n\taddLine( 'f2', 'f4', colorFrustum );\n\taddLine( 'f4', 'f3', colorFrustum );\n\taddLine( 'f3', 'f1', colorFrustum );\n\n\t// sides\n\n\taddLine( 'n1', 'f1', colorFrustum );\n\taddLine( 'n2', 'f2', colorFrustum );\n\taddLine( 'n3', 'f3', colorFrustum );\n\taddLine( 'n4', 'f4', colorFrustum );\n\n\t// cone\n\n\taddLine( 'p', 'n1', colorCone );\n\taddLine( 'p', 'n2', colorCone );\n\taddLine( 'p', 'n3', colorCone );\n\taddLine( 'p', 'n4', colorCone );\n\n\t// up\n\n\taddLine( 'u1', 'u2', colorUp );\n\taddLine( 'u2', 'u3', colorUp );\n\taddLine( 'u3', 'u1', colorUp );\n\n\t// target\n\n\taddLine( 'c', 't', colorTarget );\n\taddLine( 'p', 'c', colorCross );\n\n\t// cross\n\n\taddLine( 'cn1', 'cn2', colorCross );\n\taddLine( 'cn3', 'cn4', colorCross );\n\n\taddLine( 'cf1', 'cf2', colorCross );\n\taddLine( 'cf3', 'cf4', colorCross );\n\n\tfunction addLine( a, b, color ) {\n\n\t\taddPoint( a, color );\n\t\taddPoint( b, color );\n\n\t}\n\n\tfunction addPoint( id, color ) {\n\n\t\tvertices.push( 0, 0, 0 );\n\t\tcolors.push( color.r, color.g, color.b );\n\n\t\tif ( pointMap[ id ] === undefined ) {\n\n\t\t\tpointMap[ id ] = [];\n\n\t\t}\n\n\t\tpointMap[ id ].push( ( vertices.length / 3 ) - 1 );\n\n\t}\n\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.type = 'CameraHelper';\n\n\tthis.camera = camera;\n\tif ( this.camera.updateProjectionMatrix ) this.camera.updateProjectionMatrix();\n\n\tthis.matrix = camera.matrixWorld;\n\tthis.matrixAutoUpdate = false;\n\n\tthis.pointMap = pointMap;\n\n\tthis.update();\n\n}\n\nCameraHelper.prototype = Object.create( LineSegments.prototype );\nCameraHelper.prototype.constructor = CameraHelper;\n\nCameraHelper.prototype.update = function () {\n\n\tconst geometry = this.geometry;\n\tconst pointMap = this.pointMap;\n\n\tconst w = 1, h = 1;\n\n\t// we need just camera projection matrix inverse\n\t// world matrix must be identity\n\n\t_camera.projectionMatrixInverse.copy( this.camera.projectionMatrixInverse );\n\n\t// center / target\n\n\tsetPoint( 'c', pointMap, geometry, _camera, 0, 0, - 1 );\n\tsetPoint( 't', pointMap, geometry, _camera, 0, 0, 1 );\n\n\t// near\n\n\tsetPoint( 'n1', pointMap, geometry, _camera, - w, - h, - 1 );\n\tsetPoint( 'n2', pointMap, geometry, _camera, w, - h, - 1 );\n\tsetPoint( 'n3', pointMap, geometry, _camera, - w, h, - 1 );\n\tsetPoint( 'n4', pointMap, geometry, _camera, w, h, - 1 );\n\n\t// far\n\n\tsetPoint( 'f1', pointMap, geometry, _camera, - w, - h, 1 );\n\tsetPoint( 'f2', pointMap, geometry, _camera, w, - h, 1 );\n\tsetPoint( 'f3', pointMap, geometry, _camera, - w, h, 1 );\n\tsetPoint( 'f4', pointMap, geometry, _camera, w, h, 1 );\n\n\t// up\n\n\tsetPoint( 'u1', pointMap, geometry, _camera, w * 0.7, h * 1.1, - 1 );\n\tsetPoint( 'u2', pointMap, geometry, _camera, - w * 0.7, h * 1.1, - 1 );\n\tsetPoint( 'u3', pointMap, geometry, _camera, 0, h * 2, - 1 );\n\n\t// cross\n\n\tsetPoint( 'cf1', pointMap, geometry, _camera, - w, 0, 1 );\n\tsetPoint( 'cf2', pointMap, geometry, _camera, w, 0, 1 );\n\tsetPoint( 'cf3', pointMap, geometry, _camera, 0, - h, 1 );\n\tsetPoint( 'cf4', pointMap, geometry, _camera, 0, h, 1 );\n\n\tsetPoint( 'cn1', pointMap, geometry, _camera, - w, 0, - 1 );\n\tsetPoint( 'cn2', pointMap, geometry, _camera, w, 0, - 1 );\n\tsetPoint( 'cn3', pointMap, geometry, _camera, 0, - h, - 1 );\n\tsetPoint( 'cn4', pointMap, geometry, _camera, 0, h, - 1 );\n\n\tgeometry.getAttribute( 'position' ).needsUpdate = true;\n\n};\n\nfunction setPoint( point, pointMap, geometry, camera, x, y, z ) {\n\n\t_vector$b.set( x, y, z ).unproject( camera );\n\n\tconst points = pointMap[ point ];\n\n\tif ( points !== undefined ) {\n\n\t\tconst position = geometry.getAttribute( 'position' );\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tposition.setXYZ( points[ i ], _vector$b.x, _vector$b.y, _vector$b.z );\n\n\t\t}\n\n\t}\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / http://github.com/Mugen87\n */\n\nconst _box$3 = new Box3();\n\nfunction BoxHelper( object, color ) {\n\n\tthis.object = object;\n\n\tif ( color === undefined ) color = 0xffff00;\n\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\tconst positions = new Float32Array( 8 * 3 );\n\n\tconst geometry = new BufferGeometry();\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\tgeometry.setAttribute( 'position', new BufferAttribute( positions, 3 ) );\n\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\tthis.type = 'BoxHelper';\n\n\tthis.matrixAutoUpdate = false;\n\n\tthis.update();\n\n}\n\nBoxHelper.prototype = Object.create( LineSegments.prototype );\nBoxHelper.prototype.constructor = BoxHelper;\n\nBoxHelper.prototype.update = function ( object ) {\n\n\tif ( object !== undefined ) {\n\n\t\tconsole.warn( 'THREE.BoxHelper: .update() has no longer arguments.' );\n\n\t}\n\n\tif ( this.object !== undefined ) {\n\n\t\t_box$3.setFromObject( this.object );\n\n\t}\n\n\tif ( _box$3.isEmpty() ) return;\n\n\tconst min = _box$3.min;\n\tconst max = _box$3.max;\n\n\t/*\n\t  5____4\n\t1/___0/|\n\t| 6__|_7\n\t2/___3/\n\n\t0: max.x, max.y, max.z\n\t1: min.x, max.y, max.z\n\t2: min.x, min.y, max.z\n\t3: max.x, min.y, max.z\n\t4: max.x, max.y, min.z\n\t5: min.x, max.y, min.z\n\t6: min.x, min.y, min.z\n\t7: max.x, min.y, min.z\n\t*/\n\n\tconst position = this.geometry.attributes.position;\n\tconst array = position.array;\n\n\tarray[ 0 ] = max.x; array[ 1 ] = max.y; array[ 2 ] = max.z;\n\tarray[ 3 ] = min.x; array[ 4 ] = max.y; array[ 5 ] = max.z;\n\tarray[ 6 ] = min.x; array[ 7 ] = min.y; array[ 8 ] = max.z;\n\tarray[ 9 ] = max.x; array[ 10 ] = min.y; array[ 11 ] = max.z;\n\tarray[ 12 ] = max.x; array[ 13 ] = max.y; array[ 14 ] = min.z;\n\tarray[ 15 ] = min.x; array[ 16 ] = max.y; array[ 17 ] = min.z;\n\tarray[ 18 ] = min.x; array[ 19 ] = min.y; array[ 20 ] = min.z;\n\tarray[ 21 ] = max.x; array[ 22 ] = min.y; array[ 23 ] = min.z;\n\n\tposition.needsUpdate = true;\n\n\tthis.geometry.computeBoundingSphere();\n\n\n};\n\nBoxHelper.prototype.setFromObject = function ( object ) {\n\n\tthis.object = object;\n\tthis.update();\n\n\treturn this;\n\n};\n\nBoxHelper.prototype.copy = function ( source ) {\n\n\tLineSegments.prototype.copy.call( this, source );\n\n\tthis.object = source.object;\n\n\treturn this;\n\n};\n\nBoxHelper.prototype.clone = function () {\n\n\treturn new this.constructor().copy( this );\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3Helper( box, color ) {\n\n\tthis.type = 'Box3Helper';\n\n\tthis.box = box;\n\n\tcolor = color || 0xffff00;\n\n\tconst indices = new Uint16Array( [ 0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7 ] );\n\n\tconst positions = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, - 1, - 1, 1, - 1, - 1, - 1, - 1, 1, - 1, - 1 ];\n\n\tconst geometry = new BufferGeometry();\n\n\tgeometry.setIndex( new BufferAttribute( indices, 1 ) );\n\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\n\tLineSegments.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\tthis.type = 'Box3Helper';\n\n\tthis.geometry.computeBoundingSphere();\n\n}\n\nBox3Helper.prototype = Object.create( LineSegments.prototype );\nBox3Helper.prototype.constructor = Box3Helper;\n\nBox3Helper.prototype.updateMatrixWorld = function ( force ) {\n\n\tconst box = this.box;\n\n\tif ( box.isEmpty() ) return;\n\n\tbox.getCenter( this.position );\n\n\tbox.getSize( this.scale );\n\n\tthis.scale.multiplyScalar( 0.5 );\n\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction PlaneHelper( plane, size, hex ) {\n\n\tthis.plane = plane;\n\n\tthis.size = ( size === undefined ) ? 1 : size;\n\n\tconst color = ( hex !== undefined ) ? hex : 0xffff00;\n\n\tconst positions = [ 1, - 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, - 1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0 ];\n\n\tconst geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( positions, 3 ) );\n\tgeometry.computeBoundingSphere();\n\n\tLine.call( this, geometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\n\tthis.type = 'PlaneHelper';\n\n\t//\n\n\tconst positions2 = [ 1, 1, 1, - 1, 1, 1, - 1, - 1, 1, 1, 1, 1, - 1, - 1, 1, 1, - 1, 1 ];\n\n\tconst geometry2 = new BufferGeometry();\n\tgeometry2.setAttribute( 'position', new Float32BufferAttribute( positions2, 3 ) );\n\tgeometry2.computeBoundingSphere();\n\n\tthis.add( new Mesh( geometry2, new MeshBasicMaterial( { color: color, opacity: 0.2, transparent: true, depthWrite: false, toneMapped: false } ) ) );\n\n}\n\nPlaneHelper.prototype = Object.create( Line.prototype );\nPlaneHelper.prototype.constructor = PlaneHelper;\n\nPlaneHelper.prototype.updateMatrixWorld = function ( force ) {\n\n\tlet scale = - this.plane.constant;\n\n\tif ( Math.abs( scale ) < 1e-8 ) scale = 1e-8; // sign does not matter\n\n\tthis.scale.set( 0.5 * this.size, 0.5 * this.size, scale );\n\n\tthis.children[ 0 ].material.side = ( scale < 0 ) ? BackSide : FrontSide; // renderer flips side when determinant < 0; flipping not wanted here\n\n\tthis.lookAt( this.plane.normal );\n\n\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n};\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n * @author zz85 / http://github.com/zz85\n * @author bhouston / http://clara.io\n *\n * Creates an arrow for visualizing directions\n *\n * Parameters:\n *  dir - Vector3\n *  origin - Vector3\n *  length - Number\n *  color - color in hex value\n *  headLength - Number\n *  headWidth - Number\n */\n\nconst _axis = new Vector3();\nlet _lineGeometry, _coneGeometry;\n\nfunction ArrowHelper( dir, origin, length, color, headLength, headWidth ) {\n\n\t// dir is assumed to be normalized\n\n\tObject3D.call( this );\n\n\tthis.type = 'ArrowHelper';\n\n\tif ( dir === undefined ) dir = new Vector3( 0, 0, 1 );\n\tif ( origin === undefined ) origin = new Vector3( 0, 0, 0 );\n\tif ( length === undefined ) length = 1;\n\tif ( color === undefined ) color = 0xffff00;\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tif ( _lineGeometry === undefined ) {\n\n\t\t_lineGeometry = new BufferGeometry();\n\t\t_lineGeometry.setAttribute( 'position', new Float32BufferAttribute( [ 0, 0, 0, 0, 1, 0 ], 3 ) );\n\n\t\t_coneGeometry = new CylinderBufferGeometry( 0, 0.5, 1, 5, 1 );\n\t\t_coneGeometry.translate( 0, - 0.5, 0 );\n\n\t}\n\n\tthis.position.copy( origin );\n\n\tthis.line = new Line( _lineGeometry, new LineBasicMaterial( { color: color, toneMapped: false } ) );\n\tthis.line.matrixAutoUpdate = false;\n\tthis.add( this.line );\n\n\tthis.cone = new Mesh( _coneGeometry, new MeshBasicMaterial( { color: color, toneMapped: false } ) );\n\tthis.cone.matrixAutoUpdate = false;\n\tthis.add( this.cone );\n\n\tthis.setDirection( dir );\n\tthis.setLength( length, headLength, headWidth );\n\n}\n\nArrowHelper.prototype = Object.create( Object3D.prototype );\nArrowHelper.prototype.constructor = ArrowHelper;\n\nArrowHelper.prototype.setDirection = function ( dir ) {\n\n\t// dir is assumed to be normalized\n\n\tif ( dir.y > 0.99999 ) {\n\n\t\tthis.quaternion.set( 0, 0, 0, 1 );\n\n\t} else if ( dir.y < - 0.99999 ) {\n\n\t\tthis.quaternion.set( 1, 0, 0, 0 );\n\n\t} else {\n\n\t\t_axis.set( dir.z, 0, - dir.x ).normalize();\n\n\t\tconst radians = Math.acos( dir.y );\n\n\t\tthis.quaternion.setFromAxisAngle( _axis, radians );\n\n\t}\n\n};\n\nArrowHelper.prototype.setLength = function ( length, headLength, headWidth ) {\n\n\tif ( headLength === undefined ) headLength = 0.2 * length;\n\tif ( headWidth === undefined ) headWidth = 0.2 * headLength;\n\n\tthis.line.scale.set( 1, Math.max( 0.0001, length - headLength ), 1 ); // see #17458\n\tthis.line.updateMatrix();\n\n\tthis.cone.scale.set( headWidth, headLength, headWidth );\n\tthis.cone.position.y = length;\n\tthis.cone.updateMatrix();\n\n};\n\nArrowHelper.prototype.setColor = function ( color ) {\n\n\tthis.line.material.color.set( color );\n\tthis.cone.material.color.set( color );\n\n};\n\nArrowHelper.prototype.copy = function ( source ) {\n\n\tObject3D.prototype.copy.call( this, source, false );\n\n\tthis.line.copy( source.line );\n\tthis.cone.copy( source.cone );\n\n\treturn this;\n\n};\n\nArrowHelper.prototype.clone = function () {\n\n\treturn new this.constructor().copy( this );\n\n};\n\n/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AxesHelper( size ) {\n\n\tsize = size || 1;\n\n\tconst vertices = [\n\t\t0, 0, 0,\tsize, 0, 0,\n\t\t0, 0, 0,\t0, size, 0,\n\t\t0, 0, 0,\t0, 0, size\n\t];\n\n\tconst colors = [\n\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t0, 0, 1,\t0, 0.6, 1\n\t];\n\n\tconst geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tconst material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\tLineSegments.call( this, geometry, material );\n\n\tthis.type = 'AxesHelper';\n\n}\n\nAxesHelper.prototype = Object.create( LineSegments.prototype );\nAxesHelper.prototype.constructor = AxesHelper;\n\n/**\n * @author Emmett Lalish / elalish\n *\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nconst LOD_MIN = 4;\nconst LOD_MAX = 8;\nconst SIZE_MAX = Math.pow( 2, LOD_MAX );\n\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nconst EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\n\nconst TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nconst MAX_SAMPLES = 20;\n\nconst ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nconst _flatCamera = new OrthographicCamera();\nconst { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\nlet _oldTarget = null;\n\n// Golden Ratio\nconst PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nconst INV_PHI = 1 / PHI;\n\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nconst _axisDirections = [\n\tnew Vector3( 1, 1, 1 ),\n\tnew Vector3( - 1, 1, 1 ),\n\tnew Vector3( 1, 1, - 1 ),\n\tnew Vector3( - 1, 1, - 1 ),\n\tnew Vector3( 0, PHI, INV_PHI ),\n\tnew Vector3( 0, PHI, - INV_PHI ),\n\tnew Vector3( INV_PHI, 0, PHI ),\n\tnew Vector3( - INV_PHI, 0, PHI ),\n\tnew Vector3( PHI, INV_PHI, 0 ),\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\n\nfunction PMREMGenerator( renderer ) {\n\n\tthis._renderer = renderer;\n\tthis._pingPongRenderTarget = null;\n\n\tthis._blurMaterial = _getBlurShader( MAX_SAMPLES );\n\tthis._equirectShader = null;\n\tthis._cubemapShader = null;\n\n\tthis._compileMaterial( this._blurMaterial );\n\n}\n\nPMREMGenerator.prototype = {\n\n\tconstructor: PMREMGenerator,\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene: function ( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets();\n\n\t\tthis._sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\tthis._blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular: function ( equirectangular ) {\n\n\t\treturn this._fromTexture( equirectangular );\n\n\t},\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap: function ( cubemap ) {\n\n\t\treturn this._fromTexture( cubemap );\n\n\t},\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader: function () {\n\n\t\tif ( this._cubemapShader === null ) {\n\n\t\t\tthis._cubemapShader = _getCubemapShader();\n\t\t\tthis._compileMaterial( this._cubemapShader );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader: function () {\n\n\t\tif ( this._equirectShader === null ) {\n\n\t\t\tthis._equirectShader = _getEquirectShader();\n\t\t\tthis._compileMaterial( this._equirectShader );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose: function () {\n\n\t\tthis._blurMaterial.dispose();\n\n\t\tif ( this._cubemapShader !== null ) this._cubemapShader.dispose();\n\t\tif ( this._equirectShader !== null ) this._equirectShader.dispose();\n\n\t\tfor ( let i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t},\n\n\t// private interface\n\n\t_cleanup: function ( outputTarget ) {\n\n\t\tthis._pingPongRenderTarget.dispose();\n\t\tthis._renderer.setRenderTarget( _oldTarget );\n\t\toutputTarget.scissorTest = false;\n\t\t_setViewport( outputTarget, 0, 0, outputTarget.width, outputTarget.height );\n\n\t},\n\n\t_fromTexture: function ( texture ) {\n\n\t\t_oldTarget = this._renderer.getRenderTarget();\n\t\tconst cubeUVRenderTarget = this._allocateTargets( texture );\n\t\tthis._textureToCubeUV( texture, cubeUVRenderTarget );\n\t\tthis._applyPMREM( cubeUVRenderTarget );\n\t\tthis._cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t_allocateTargets: function ( texture ) { // warning: null texture is valid\n\n\t\tconst params = {\n\t\t\tmagFilter: NearestFilter,\n\t\t\tminFilter: NearestFilter,\n\t\t\tgenerateMipmaps: false,\n\t\t\ttype: UnsignedByteType,\n\t\t\tformat: RGBEFormat,\n\t\t\tencoding: _isLDR( texture ) ? texture.encoding : RGBEEncoding,\n\t\t\tdepthBuffer: false,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tconst cubeUVRenderTarget = _createRenderTarget( params );\n\t\tcubeUVRenderTarget.depthBuffer = texture ? false : true;\n\t\tthis._pingPongRenderTarget = _createRenderTarget( params );\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t_compileMaterial: function ( material ) {\n\n\t\tconst tmpMesh = new Mesh( _lodPlanes[ 0 ], material );\n\t\tthis._renderer.compile( tmpMesh, _flatCamera );\n\n\t},\n\n\t_sceneToCubeUV: function ( scene, near, far, cubeUVRenderTarget ) {\n\n\t\tconst fov = 90;\n\t\tconst aspect = 1;\n\t\tconst cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\t\tconst upSign = [ 1, - 1, 1, 1, 1, 1 ];\n\t\tconst forwardSign = [ 1, 1, 1, - 1, - 1, - 1 ];\n\t\tconst renderer = this._renderer;\n\n\t\tconst outputEncoding = renderer.outputEncoding;\n\t\tconst toneMapping = renderer.toneMapping;\n\t\tconst clearColor = renderer.getClearColor();\n\t\tconst clearAlpha = renderer.getClearAlpha();\n\n\t\trenderer.toneMapping = NoToneMapping;\n\t\trenderer.outputEncoding = LinearEncoding;\n\n\t\tlet background = scene.background;\n\t\tif ( background && background.isColor ) {\n\n\t\t\tbackground.convertSRGBToLinear();\n\t\t\t// Convert linear to RGBE\n\t\t\tconst maxComponent = Math.max( background.r, background.g, background.b );\n\t\t\tconst fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\t\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\t\t\tconst alpha = ( fExp + 128.0 ) / 255.0;\n\t\t\trenderer.setClearColor( background, alpha );\n\t\t\tscene.background = null;\n\n\t\t}\n\n\t\tfor ( let i = 0; i < 6; i ++ ) {\n\n\t\t\tconst col = i % 3;\n\t\t\tif ( col == 0 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t\t} else if ( col == 1 ) {\n\n\t\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t\t}\n\n\t\t\t_setViewport( cubeUVRenderTarget,\n\t\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\t\trenderer.render( scene, cubeCamera );\n\n\t\t}\n\n\t\trenderer.toneMapping = toneMapping;\n\t\trenderer.outputEncoding = outputEncoding;\n\t\trenderer.setClearColor( clearColor, clearAlpha );\n\n\t},\n\n\t_textureToCubeUV: function ( texture, cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\n\t\tif ( texture.isCubeTexture ) {\n\n\t\t\tif ( this._cubemapShader == null ) {\n\n\t\t\t\tthis._cubemapShader = _getCubemapShader();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( this._equirectShader == null ) {\n\n\t\t\t\tthis._equirectShader = _getEquirectShader();\n\n\t\t\t}\n\n\t\t}\n\n\t\tconst material = texture.isCubeTexture ? this._cubemapShader : this._equirectShader;\n\t\tconst mesh = new Mesh( _lodPlanes[ 0 ], material );\n\n\t\tconst uniforms = material.uniforms;\n\n\t\tuniforms[ 'envMap' ].value = texture;\n\n\t\tif ( ! texture.isCubeTexture ) {\n\n\t\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t\t}\n\n\t\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\t\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ cubeUVRenderTarget.texture.encoding ];\n\n\t\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\n\t\trenderer.setRenderTarget( cubeUVRenderTarget );\n\t\trenderer.render( mesh, _flatCamera );\n\n\t},\n\n\t_applyPMREM: function ( cubeUVRenderTarget ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst autoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\tfor ( let i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\t\tconst sigma = Math.sqrt( _sigmas[ i ] * _sigmas[ i ] - _sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\n\t\t\tconst poleAxis = _axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\n\t\t\tthis._blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t\t}\n\n\t\trenderer.autoClear = autoClear;\n\n\t},\n\n\t/**\n\t * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n\t * vertically and horizontally, but this breaks down on a cube. Here we apply\n\t * the blur latitudinally (around the poles), and then longitudinally (towards\n\t * the poles) to approximate the orthogonally-separable blur. It is least\n\t * accurate at the poles, but still does a decent job.\n\t */\n\t_blur: function ( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t\tconst pingPongRenderTarget = this._pingPongRenderTarget;\n\n\t\tthis._halfBlur(\n\t\t\tcubeUVRenderTarget,\n\t\t\tpingPongRenderTarget,\n\t\t\tlodIn,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'latitudinal',\n\t\t\tpoleAxis );\n\n\t\tthis._halfBlur(\n\t\t\tpingPongRenderTarget,\n\t\t\tcubeUVRenderTarget,\n\t\t\tlodOut,\n\t\t\tlodOut,\n\t\t\tsigma,\n\t\t\t'longitudinal',\n\t\t\tpoleAxis );\n\n\t},\n\n\t_halfBlur: function ( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\t\tconst renderer = this._renderer;\n\t\tconst blurMaterial = this._blurMaterial;\n\n\t\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\t\tconsole.error(\n\t\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t\t}\n\n\t\t// Number of standard deviations at which to cut off the discrete approximation.\n\t\tconst STANDARD_DEVIATIONS = 3;\n\n\t\tconst blurMesh = new Mesh( _lodPlanes[ lodOut ], blurMaterial );\n\t\tconst blurUniforms = blurMaterial.uniforms;\n\n\t\tconst pixels = _sizeLods[ lodIn ] - 1;\n\t\tconst radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\t\tconst sigmaPixels = sigmaRadians / radiansPerPixel;\n\t\tconst samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\t\tif ( samples > MAX_SAMPLES ) {\n\n\t\t\tconsole.warn( `sigmaRadians, ${\n\t\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t\t}\n\n\t\tconst weights = [];\n\t\tlet sum = 0;\n\n\t\tfor ( let i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\t\tconst x = i / sigmaPixels;\n\t\t\tconst weight = Math.exp( - x * x / 2 );\n\t\t\tweights.push( weight );\n\n\t\t\tif ( i == 0 ) {\n\n\t\t\t\tsum += weight;\n\n\t\t\t} else if ( i < samples ) {\n\n\t\t\t\tsum += 2 * weight;\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( let i = 0; i < weights.length; i ++ ) {\n\n\t\t\tweights[ i ] = weights[ i ] / sum;\n\n\t\t}\n\n\t\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\t\tblurUniforms[ 'samples' ].value = samples;\n\t\tblurUniforms[ 'weights' ].value = weights;\n\t\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\n\t\tif ( poleAxis ) {\n\n\t\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t\t}\n\n\t\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\t\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\t\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\t\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\t\tconst outputSize = _sizeLods[ lodOut ];\n\t\tconst x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\t\tconst y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) + 2 * outputSize * ( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t\trenderer.setRenderTarget( targetOut );\n\t\trenderer.render( blurMesh, _flatCamera );\n\n\t}\n\n};\n\nfunction _isLDR( texture ) {\n\n\tif ( texture === undefined || texture.type !== UnsignedByteType ) return false;\n\n\treturn texture.encoding === LinearEncoding || texture.encoding === sRGBEncoding || texture.encoding === GammaEncoding;\n\n}\n\nfunction _createPlanes() {\n\n\tconst _lodPlanes = [];\n\tconst _sizeLods = [];\n\tconst _sigmas = [];\n\n\tlet lod = LOD_MAX;\n\n\tfor ( let i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tconst sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tlet sigma = 1.0 / sizeLod;\n\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\n\t\t_sigmas.push( sigma );\n\n\t\tconst texelSize = 1.0 / ( sizeLod - 1 );\n\t\tconst min = - texelSize / 2;\n\t\tconst max = 1 + texelSize / 2;\n\t\tconst uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tconst cubeFaces = 6;\n\t\tconst vertices = 6;\n\t\tconst positionSize = 3;\n\t\tconst uvSize = 2;\n\t\tconst faceIndexSize = 1;\n\n\t\tconst position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tconst uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tconst faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( let face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tconst x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tconst y = face > 2 ? 0 : - 1;\n\t\t\tconst coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tconst fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\n\t\tconst planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tconst cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tconst weights = new Float32Array( maxSamples );\n\tconst poleAxis = new Vector3( 0, 1, 0 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'SphericalGaussianBlur',\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${_getEncodings()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tconst texelSize = new Vector2( 1, 1 );\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'EquirectangularToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${_getEncodings()}\n\n#include <common>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv = equirectUv( outputDirection );\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tconst shaderMaterial = new RawShaderMaterial( {\n\n\t\tname: 'CubemapToCubeUV',\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${_getEncodings()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn `\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\n\n// RH coordinate system; PMREM face-indexing convention\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\t} else if (face == 2.0) {\n\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\t} else if (face == 5.0) {\n\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\t}\n\treturn direction;\n}\n\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn `\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t`;\n\n}\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Face4( a, b, c, d, normal, color, materialIndex ) {\n\n\tconsole.warn( 'THREE.Face4 has been removed. A THREE.Face3 will be created instead.' );\n\treturn new Face3( a, b, c, normal, color, materialIndex );\n\n}\n\nconst LineStrip = 0;\nconst LinePieces = 1;\nconst NoColors = 0;\nconst FaceColors = 1;\nconst VertexColors = 2;\n\nfunction MeshFaceMaterial( materials ) {\n\n\tconsole.warn( 'THREE.MeshFaceMaterial has been removed. Use an Array instead.' );\n\treturn materials;\n\n}\n\nfunction MultiMaterial( materials ) {\n\n\tif ( materials === undefined ) materials = [];\n\n\tconsole.warn( 'THREE.MultiMaterial has been removed. Use an Array instead.' );\n\tmaterials.isMultiMaterial = true;\n\tmaterials.materials = materials;\n\tmaterials.clone = function () {\n\n\t\treturn materials.slice();\n\n\t};\n\n\treturn materials;\n\n}\n\nfunction PointCloud( geometry, material ) {\n\n\tconsole.warn( 'THREE.PointCloud has been renamed to THREE.Points.' );\n\treturn new Points( geometry, material );\n\n}\n\nfunction Particle( material ) {\n\n\tconsole.warn( 'THREE.Particle has been renamed to THREE.Sprite.' );\n\treturn new Sprite( material );\n\n}\n\nfunction ParticleSystem( geometry, material ) {\n\n\tconsole.warn( 'THREE.ParticleSystem has been renamed to THREE.Points.' );\n\treturn new Points( geometry, material );\n\n}\n\nfunction PointCloudMaterial( parameters ) {\n\n\tconsole.warn( 'THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial.' );\n\treturn new PointsMaterial( parameters );\n\n}\n\nfunction ParticleBasicMaterial( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial.' );\n\treturn new PointsMaterial( parameters );\n\n}\n\nfunction ParticleSystemMaterial( parameters ) {\n\n\tconsole.warn( 'THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial.' );\n\treturn new PointsMaterial( parameters );\n\n}\n\nfunction Vertex( x, y, z ) {\n\n\tconsole.warn( 'THREE.Vertex has been removed. Use THREE.Vector3 instead.' );\n\treturn new Vector3( x, y, z );\n\n}\n\n//\n\nfunction DynamicBufferAttribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead.' );\n\treturn new BufferAttribute( array, itemSize ).setUsage( DynamicDrawUsage );\n\n}\n\nfunction Int8Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead.' );\n\treturn new Int8BufferAttribute( array, itemSize );\n\n}\n\nfunction Uint8Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead.' );\n\treturn new Uint8BufferAttribute( array, itemSize );\n\n}\n\nfunction Uint8ClampedAttribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead.' );\n\treturn new Uint8ClampedBufferAttribute( array, itemSize );\n\n}\n\nfunction Int16Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead.' );\n\treturn new Int16BufferAttribute( array, itemSize );\n\n}\n\nfunction Uint16Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead.' );\n\treturn new Uint16BufferAttribute( array, itemSize );\n\n}\n\nfunction Int32Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead.' );\n\treturn new Int32BufferAttribute( array, itemSize );\n\n}\n\nfunction Uint32Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead.' );\n\treturn new Uint32BufferAttribute( array, itemSize );\n\n}\n\nfunction Float32Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead.' );\n\treturn new Float32BufferAttribute( array, itemSize );\n\n}\n\nfunction Float64Attribute( array, itemSize ) {\n\n\tconsole.warn( 'THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead.' );\n\treturn new Float64BufferAttribute( array, itemSize );\n\n}\n\n//\n\nCurve.create = function ( construct, getPoint ) {\n\n\tconsole.log( 'THREE.Curve.create() has been deprecated' );\n\n\tconstruct.prototype = Object.create( Curve.prototype );\n\tconstruct.prototype.constructor = construct;\n\tconstruct.prototype.getPoint = getPoint;\n\n\treturn construct;\n\n};\n\n//\n\nObject.assign( CurvePath.prototype, {\n\n\tcreatePointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from path points (for Line or Points objects)\n\n\t\tconst pts = this.getPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateSpacedPointsGeometry: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\t// generate geometry from equidistant sampling along the path\n\n\t\tconst pts = this.getSpacedPoints( divisions );\n\t\treturn this.createGeometry( pts );\n\n\t},\n\n\tcreateGeometry: function ( points ) {\n\n\t\tconsole.warn( 'THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.' );\n\n\t\tconst geometry = new Geometry();\n\n\t\tfor ( let i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tconst point = points[ i ];\n\t\t\tgeometry.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\n//\n\nObject.assign( Path.prototype, {\n\n\tfromPoints: function ( points ) {\n\n\t\tconsole.warn( 'THREE.Path: .fromPoints() has been renamed to .setFromPoints().' );\n\t\treturn this.setFromPoints( points );\n\n\t}\n\n} );\n\n//\n\nfunction ClosedSplineCurve3( points ) {\n\n\tconsole.warn( 'THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\tthis.closed = true;\n\n}\n\nClosedSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n//\n\nfunction SplineCurve3( points ) {\n\n\tconsole.warn( 'THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSplineCurve3.prototype = Object.create( CatmullRomCurve3.prototype );\n\n//\n\nfunction Spline( points ) {\n\n\tconsole.warn( 'THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead.' );\n\n\tCatmullRomCurve3.call( this, points );\n\tthis.type = 'catmullrom';\n\n}\n\nSpline.prototype = Object.create( CatmullRomCurve3.prototype );\n\nObject.assign( Spline.prototype, {\n\n\tinitFromArray: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .initFromArray() has been removed.' );\n\n\t},\n\tgetControlPointsArray: function ( /* optionalTarget */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .getControlPointsArray() has been removed.' );\n\n\t},\n\treparametrizeByArcLength: function ( /* samplingCoef */ ) {\n\n\t\tconsole.error( 'THREE.Spline: .reparametrizeByArcLength() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nfunction AxisHelper( size ) {\n\n\tconsole.warn( 'THREE.AxisHelper has been renamed to THREE.AxesHelper.' );\n\treturn new AxesHelper( size );\n\n}\n\nfunction BoundingBoxHelper( object, color ) {\n\n\tconsole.warn( 'THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead.' );\n\treturn new BoxHelper( object, color );\n\n}\n\nfunction EdgesHelper( object, hex ) {\n\n\tconsole.warn( 'THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead.' );\n\treturn new LineSegments( new EdgesGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\n\n}\n\nGridHelper.prototype.setColors = function () {\n\n\tconsole.error( 'THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.' );\n\n};\n\nSkeletonHelper.prototype.update = function () {\n\n\tconsole.error( 'THREE.SkeletonHelper: update() no longer needs to be called.' );\n\n};\n\nfunction WireframeHelper( object, hex ) {\n\n\tconsole.warn( 'THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead.' );\n\treturn new LineSegments( new WireframeGeometry( object.geometry ), new LineBasicMaterial( { color: hex !== undefined ? hex : 0xffffff } ) );\n\n}\n\n//\n\nObject.assign( Loader.prototype, {\n\n\textractUrlBase: function ( url ) {\n\n\t\tconsole.warn( 'THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead.' );\n\t\treturn LoaderUtils.extractUrlBase( url );\n\n\t}\n\n} );\n\nLoader.Handlers = {\n\n\tadd: function ( /* regex, loader */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.' );\n\n\t},\n\n\tget: function ( /* file */ ) {\n\n\t\tconsole.error( 'THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.' );\n\n\t}\n\n};\n\nfunction XHRLoader( manager ) {\n\n\tconsole.warn( 'THREE.XHRLoader has been renamed to THREE.FileLoader.' );\n\treturn new FileLoader( manager );\n\n}\n\nfunction BinaryTextureLoader( manager ) {\n\n\tconsole.warn( 'THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader.' );\n\treturn new DataTextureLoader( manager );\n\n}\n\nObject.assign( ObjectLoader.prototype, {\n\n\tsetTexturePath: function ( value ) {\n\n\t\tconsole.warn( 'THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath().' );\n\t\treturn this.setResourcePath( value );\n\n\t}\n\n} );\n\n//\n\nObject.assign( Box2.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box2: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box2: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Box3.prototype, {\n\n\tcenter: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .center() has been renamed to .getCenter().' );\n\t\treturn this.getCenter( optionalTarget );\n\n\t},\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Box3: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t},\n\tsize: function ( optionalTarget ) {\n\n\t\tconsole.warn( 'THREE.Box3: .size() has been renamed to .getSize().' );\n\t\treturn this.getSize( optionalTarget );\n\n\t}\n} );\n\nObject.assign( Sphere.prototype, {\n\n\tempty: function () {\n\n\t\tconsole.warn( 'THREE.Sphere: .empty() has been renamed to .isEmpty().' );\n\t\treturn this.isEmpty();\n\n\t},\n\n} );\n\nFrustum.prototype.setFromMatrix = function ( m ) {\n\n\tconsole.warn( 'THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix().' );\n\treturn this.setFromProjectionMatrix( m );\n\n};\n\nLine3.prototype.center = function ( optionalTarget ) {\n\n\tconsole.warn( 'THREE.Line3: .center() has been renamed to .getCenter().' );\n\treturn this.getCenter( optionalTarget );\n\n};\n\nObject.assign( MathUtils, {\n\n\trandom16: function () {\n\n\t\tconsole.warn( 'THREE.Math: .random16() has been deprecated. Use Math.random() instead.' );\n\t\treturn Math.random();\n\n\t},\n\n\tnearestPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo().' );\n\t\treturn MathUtils.floorPowerOfTwo( value );\n\n\t},\n\n\tnextPowerOfTwo: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo().' );\n\t\treturn MathUtils.ceilPowerOfTwo( value );\n\n\t}\n\n} );\n\nObject.assign( Matrix3.prototype, {\n\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.' );\n\t\treturn vector.applyMatrix3( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .multiplyVector3Array() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead.' );\n\t\treturn attribute.applyMatrix3( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix3: .applyToVector3Array() has been removed.' );\n\n\t}\n\n} );\n\nObject.assign( Matrix4.prototype, {\n\n\textractPosition: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .extractPosition() has been renamed to .copyPosition().' );\n\t\treturn this.copyPosition( m );\n\n\t},\n\tflattenToArrayOffset: function ( array, offset ) {\n\n\t\tconsole.warn( \"THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead.\" );\n\t\treturn this.toArray( array, offset );\n\n\t},\n\tgetPosition: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.' );\n\t\treturn new Vector3().setFromMatrixColumn( this, 3 );\n\n\t},\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().' );\n\t\treturn this.makeRotationFromQuaternion( q );\n\n\t},\n\tmultiplyToArray: function () {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyToArray() has been removed.' );\n\n\t},\n\tmultiplyVector3: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector4: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\tmultiplyVector3Array: function ( /* a */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .multiplyVector3Array() has been removed.' );\n\n\t},\n\trotateAxis: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.' );\n\t\tv.transformDirection( this );\n\n\t},\n\tcrossVector: function ( vector ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.' );\n\t\treturn vector.applyMatrix4( this );\n\n\t},\n\ttranslate: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .translate() has been removed.' );\n\n\t},\n\trotateX: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateX() has been removed.' );\n\n\t},\n\trotateY: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateY() has been removed.' );\n\n\t},\n\trotateZ: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateZ() has been removed.' );\n\n\t},\n\trotateByAxis: function () {\n\n\t\tconsole.error( 'THREE.Matrix4: .rotateByAxis() has been removed.' );\n\n\t},\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead.' );\n\t\treturn attribute.applyMatrix4( this );\n\n\t},\n\tapplyToVector3Array: function ( /* array, offset, length */ ) {\n\n\t\tconsole.error( 'THREE.Matrix4: .applyToVector3Array() has been removed.' );\n\n\t},\n\tmakeFrustum: function ( left, right, bottom, top, near, far ) {\n\n\t\tconsole.warn( 'THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead.' );\n\t\treturn this.makePerspective( left, right, top, bottom, near, far );\n\n\t}\n\n} );\n\nPlane.prototype.isIntersectionLine = function ( line ) {\n\n\tconsole.warn( 'THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine().' );\n\treturn this.intersectsLine( line );\n\n};\n\nQuaternion.prototype.multiplyVector3 = function ( vector ) {\n\n\tconsole.warn( 'THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.' );\n\treturn vector.applyQuaternion( this );\n\n};\n\nObject.assign( Ray.prototype, {\n\n\tisIntersectionBox: function ( box ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox().' );\n\t\treturn this.intersectsBox( box );\n\n\t},\n\tisIntersectionPlane: function ( plane ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane().' );\n\t\treturn this.intersectsPlane( plane );\n\n\t},\n\tisIntersectionSphere: function ( sphere ) {\n\n\t\tconsole.warn( 'THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere().' );\n\t\treturn this.intersectsSphere( sphere );\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tarea: function () {\n\n\t\tconsole.warn( 'THREE.Triangle: .area() has been renamed to .getArea().' );\n\t\treturn this.getArea();\n\n\t},\n\tbarycoordFromPoint: function ( point, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn this.getBarycoord( point, target );\n\n\t},\n\tmidpoint: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .midpoint() has been renamed to .getMidpoint().' );\n\t\treturn this.getMidpoint( target );\n\n\t},\n\tnormal: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn this.getNormal( target );\n\n\t},\n\tplane: function ( target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .plane() has been renamed to .getPlane().' );\n\t\treturn this.getPlane( target );\n\n\t}\n\n} );\n\nObject.assign( Triangle, {\n\n\tbarycoordFromPoint: function ( point, a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord().' );\n\t\treturn Triangle.getBarycoord( point, a, b, c, target );\n\n\t},\n\tnormal: function ( a, b, c, target ) {\n\n\t\tconsole.warn( 'THREE.Triangle: .normal() has been renamed to .getNormal().' );\n\t\treturn Triangle.getNormal( a, b, c, target );\n\n\t}\n\n} );\n\nObject.assign( Shape.prototype, {\n\n\textractAllPoints: function ( divisions ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead.' );\n\t\treturn this.extractPoints( divisions );\n\n\t},\n\textrude: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead.' );\n\t\treturn new ExtrudeGeometry( this, options );\n\n\t},\n\tmakeGeometry: function ( options ) {\n\n\t\tconsole.warn( 'THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead.' );\n\t\treturn new ShapeGeometry( this, options );\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector3.prototype, {\n\n\tsetEulerFromRotationMatrix: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.' );\n\n\t},\n\tsetEulerFromQuaternion: function () {\n\n\t\tconsole.error( 'THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.' );\n\n\t},\n\tgetPositionFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().' );\n\t\treturn this.setFromMatrixPosition( m );\n\n\t},\n\tgetScaleFromMatrix: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().' );\n\t\treturn this.setFromMatrixScale( m );\n\n\t},\n\tgetColumnFromMatrix: function ( index, matrix ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().' );\n\t\treturn this.setFromMatrixColumn( matrix, index );\n\n\t},\n\tapplyProjection: function ( m ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead.' );\n\t\treturn this.applyMatrix4( m );\n\n\t},\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tdistanceToManhattan: function ( v ) {\n\n\t\tconsole.warn( 'THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo().' );\n\t\treturn this.manhattanDistanceTo( v );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tfromAttribute: function ( attribute, index, offset ) {\n\n\t\tconsole.warn( 'THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute().' );\n\t\treturn this.fromBufferAttribute( attribute, index, offset );\n\n\t},\n\tlengthManhattan: function () {\n\n\t\tconsole.warn( 'THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength().' );\n\t\treturn this.manhattanLength();\n\n\t}\n\n} );\n\n//\n\nObject.assign( Geometry.prototype, {\n\n\tcomputeTangents: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeLineDistances: function () {\n\n\t\tconsole.error( 'THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.assign( Object3D.prototype, {\n\n\tgetChildByName: function ( name ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .getChildByName() has been renamed to .getObjectByName().' );\n\t\treturn this.getObjectByName( name );\n\n\t},\n\trenderDepth: function () {\n\n\t\tconsole.warn( 'THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.' );\n\n\t},\n\ttranslate: function ( distance, axis ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead.' );\n\t\treturn this.translateOnAxis( axis, distance );\n\n\t},\n\tgetWorldRotation: function () {\n\n\t\tconsole.error( 'THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.' );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( Object3D.prototype, {\n\n\teulerOrder: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\treturn this.rotation.order;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .eulerOrder is now .rotation.order.' );\n\t\t\tthis.rotation.order = value;\n\n\t\t}\n\t},\n\tuseQuaternion: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( Mesh.prototype, {\n\n\tsetDrawMode: function () {\n\n\t\tconsole.error( 'THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t},\n\n} );\n\nObject.defineProperties( Mesh.prototype, {\n\n\tdrawMode: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode.' );\n\t\t\treturn TrianglesDrawMode;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.error( 'THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( LOD.prototype, {\n\n\tobjects: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.LOD: .objects has been renamed to .levels.' );\n\t\t\treturn this.levels;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperty( Skeleton.prototype, 'useVertexTexture', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t},\n\tset: function () {\n\n\t\tconsole.warn( 'THREE.Skeleton: useVertexTexture has been removed.' );\n\n\t}\n\n} );\n\nSkinnedMesh.prototype.initBones = function () {\n\n\tconsole.error( 'THREE.SkinnedMesh: initBones() has been removed.' );\n\n};\n\nObject.defineProperty( Curve.prototype, '__arcLengthDivisions', {\n\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\treturn this.arcLengthDivisions;\n\n\t},\n\tset: function ( value ) {\n\n\t\tconsole.warn( 'THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions.' );\n\t\tthis.arcLengthDivisions = value;\n\n\t}\n\n} );\n\n//\n\nPerspectiveCamera.prototype.setLens = function ( focalLength, filmGauge ) {\n\n\tconsole.warn( \"THREE.PerspectiveCamera.setLens is deprecated. \" +\n\t\t\t\"Use .setFocalLength and .filmGauge for a photographic setup.\" );\n\n\tif ( filmGauge !== undefined ) this.filmGauge = filmGauge;\n\tthis.setFocalLength( focalLength );\n\n};\n\n//\n\nObject.defineProperties( Light.prototype, {\n\tonlyShadow: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .onlyShadow has been removed.' );\n\n\t\t}\n\t},\n\tshadowCameraFov: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFov is now .shadow.camera.fov.' );\n\t\t\tthis.shadow.camera.fov = value;\n\n\t\t}\n\t},\n\tshadowCameraLeft: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraLeft is now .shadow.camera.left.' );\n\t\t\tthis.shadow.camera.left = value;\n\n\t\t}\n\t},\n\tshadowCameraRight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraRight is now .shadow.camera.right.' );\n\t\t\tthis.shadow.camera.right = value;\n\n\t\t}\n\t},\n\tshadowCameraTop: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraTop is now .shadow.camera.top.' );\n\t\t\tthis.shadow.camera.top = value;\n\n\t\t}\n\t},\n\tshadowCameraBottom: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom.' );\n\t\t\tthis.shadow.camera.bottom = value;\n\n\t\t}\n\t},\n\tshadowCameraNear: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraNear is now .shadow.camera.near.' );\n\t\t\tthis.shadow.camera.near = value;\n\n\t\t}\n\t},\n\tshadowCameraFar: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraFar is now .shadow.camera.far.' );\n\t\t\tthis.shadow.camera.far = value;\n\n\t\t}\n\t},\n\tshadowCameraVisible: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.' );\n\n\t\t}\n\t},\n\tshadowBias: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowBias is now .shadow.bias.' );\n\t\t\tthis.shadow.bias = value;\n\n\t\t}\n\t},\n\tshadowDarkness: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowDarkness has been removed.' );\n\n\t\t}\n\t},\n\tshadowMapWidth: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapWidth is now .shadow.mapSize.width.' );\n\t\t\tthis.shadow.mapSize.width = value;\n\n\t\t}\n\t},\n\tshadowMapHeight: {\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Light: .shadowMapHeight is now .shadow.mapSize.height.' );\n\t\t\tthis.shadow.mapSize.height = value;\n\n\t\t}\n\t}\n} );\n\n//\n\nObject.defineProperties( BufferAttribute.prototype, {\n\n\tlength: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .length has been deprecated. Use .count instead.' );\n\t\t\treturn this.array.length;\n\n\t\t}\n\t},\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( DynamicDrawUsage );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tcopyIndicesArray: function ( /* indices */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .copyIndicesArray() has been removed.' );\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\nObject.assign( BufferGeometry.prototype, {\n\n\taddIndex: function ( index ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addIndex() has been renamed to .setIndex().' );\n\t\tthis.setIndex( index );\n\n\t},\n\taddAttribute: function ( name, attribute ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute().' );\n\n\t\tif ( ! ( attribute && attribute.isBufferAttribute ) && ! ( attribute && attribute.isInterleavedBufferAttribute ) ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addAttribute() now expects ( name, attribute ).' );\n\n\t\t\treturn this.setAttribute( name, new BufferAttribute( arguments[ 1 ], arguments[ 2 ] ) );\n\n\t\t}\n\n\t\tif ( name === 'index' ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute.' );\n\t\t\tthis.setIndex( attribute );\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\treturn this.setAttribute( name, attribute );\n\n\t},\n\taddDrawCall: function ( start, count, indexOffset ) {\n\n\t\tif ( indexOffset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset.' );\n\n\t\t}\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .addDrawCall() is now .addGroup().' );\n\t\tthis.addGroup( start, count );\n\n\t},\n\tclearDrawCalls: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups().' );\n\t\tthis.clearGroups();\n\n\t},\n\tcomputeTangents: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeTangents() has been removed.' );\n\n\t},\n\tcomputeOffsets: function () {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .computeOffsets() has been removed.' );\n\n\t},\n\tremoveAttribute: function ( name ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute().' );\n\n\t\treturn this.deleteAttribute( name );\n\n\t},\n\tapplyMatrix: function ( matrix ) {\n\n\t\tconsole.warn( 'THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4().' );\n\t\treturn this.applyMatrix4( matrix );\n\n\t}\n\n} );\n\nObject.defineProperties( BufferGeometry.prototype, {\n\n\tdrawcalls: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry: .drawcalls has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t},\n\toffsets: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry: .offsets has been renamed to .groups.' );\n\t\t\treturn this.groups;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InstancedBufferGeometry.prototype, {\n\n\tmaxInstancedCount: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\treturn this.instanceCount;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount.' );\n\t\t\tthis.instanceCount = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( Raycaster.prototype, {\n\n\tlinePrecision: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\treturn this.params.Line.threshold;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead.' );\n\t\t\tthis.params.Line.threshold = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( InterleavedBuffer.prototype, {\n\n\tdynamic: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\treturn this.usage === DynamicDrawUsage;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead.' );\n\t\t\tthis.setUsage( value );\n\n\t\t}\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\tsetDynamic: function ( value ) {\n\n\t\tconsole.warn( 'THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead.' );\n\t\tthis.setUsage( value === true ? DynamicDrawUsage : StaticDrawUsage );\n\t\treturn this;\n\n\t},\n\tsetArray: function ( /* array */ ) {\n\n\t\tconsole.error( 'THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers' );\n\n\t}\n} );\n\n//\n\nObject.assign( ExtrudeBufferGeometry.prototype, {\n\n\tgetArrays: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .getArrays() has been removed.' );\n\n\t},\n\n\taddShapeList: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.' );\n\n\t},\n\n\taddShape: function () {\n\n\t\tconsole.error( 'THREE.ExtrudeBufferGeometry: .addShape() has been removed.' );\n\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Uniform.prototype, {\n\n\tdynamic: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.' );\n\n\t\t}\n\t},\n\tonUpdate: {\n\t\tvalue: function () {\n\n\t\t\tconsole.warn( 'THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead.' );\n\t\t\treturn this;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Material.prototype, {\n\n\twrapAround: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapAround has been removed.' );\n\n\t\t}\n\t},\n\n\toverdraw: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .overdraw has been removed.' );\n\n\t\t}\n\t},\n\n\twrapRGB: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.Material: .wrapRGB has been removed.' );\n\t\t\treturn new Color();\n\n\t\t}\n\t},\n\n\tshading: {\n\t\tget: function () {\n\n\t\t\tconsole.error( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\tthis.flatShading = ( value === FlatShading );\n\n\t\t}\n\t},\n\n\tstencilMask: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\treturn this.stencilFuncMask;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.' + this.type + ': .stencilMask has been removed. Use .stencilFuncMask instead.' );\n\t\t\tthis.stencilFuncMask = value;\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( MeshPhongMaterial.prototype, {\n\n\tmetal: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead' );\n\n\t\t}\n\t}\n\n} );\n\nObject.defineProperties( ShaderMaterial.prototype, {\n\n\tderivatives: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\treturn this.extensions.derivatives;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives.' );\n\t\t\tthis.extensions.derivatives = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.assign( WebGLRenderer.prototype, {\n\n\tclearTarget: function ( renderTarget, color, depth, stencil ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead.' );\n\t\tthis.setRenderTarget( renderTarget );\n\t\tthis.clear( color, depth, stencil );\n\n\t},\n\tanimate: function ( callback ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .animate() is now .setAnimationLoop().' );\n\t\tthis.setAnimationLoop( callback );\n\n\t},\n\tgetCurrentRenderTarget: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget().' );\n\t\treturn this.getRenderTarget();\n\n\t},\n\tgetMaxAnisotropy: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy().' );\n\t\treturn this.capabilities.getMaxAnisotropy();\n\n\t},\n\tgetPrecision: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision.' );\n\t\treturn this.capabilities.precision;\n\n\t},\n\tresetGLState: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .resetGLState() is now .state.reset().' );\n\t\treturn this.state.reset();\n\n\t},\n\tsupportsFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( \\'OES_texture_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_float' );\n\n\t},\n\tsupportsHalfFloatTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( \\'OES_texture_half_float\\' ).' );\n\t\treturn this.extensions.get( 'OES_texture_half_float' );\n\n\t},\n\tsupportsStandardDerivatives: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( \\'OES_standard_derivatives\\' ).' );\n\t\treturn this.extensions.get( 'OES_standard_derivatives' );\n\n\t},\n\tsupportsCompressedTextureS3TC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( \\'WEBGL_compressed_texture_s3tc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t},\n\tsupportsCompressedTexturePVRTC: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( \\'WEBGL_compressed_texture_pvrtc\\' ).' );\n\t\treturn this.extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t},\n\tsupportsBlendMinMax: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( \\'EXT_blend_minmax\\' ).' );\n\t\treturn this.extensions.get( 'EXT_blend_minmax' );\n\n\t},\n\tsupportsVertexTextures: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures.' );\n\t\treturn this.capabilities.vertexTextures;\n\n\t},\n\tsupportsInstancedArrays: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( \\'ANGLE_instanced_arrays\\' ).' );\n\t\treturn this.extensions.get( 'ANGLE_instanced_arrays' );\n\n\t},\n\tenableScissorTest: function ( boolean ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest().' );\n\t\tthis.setScissorTest( boolean );\n\n\t},\n\tinitMaterial: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .initMaterial() has been removed.' );\n\n\t},\n\taddPrePlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPrePlugin() has been removed.' );\n\n\t},\n\taddPostPlugin: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .addPostPlugin() has been removed.' );\n\n\t},\n\tupdateShadowMap: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .updateShadowMap() has been removed.' );\n\n\t},\n\tsetFaceCulling: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setFaceCulling() has been removed.' );\n\n\t},\n\tallocTextureUnit: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .allocTextureUnit() has been removed.' );\n\n\t},\n\tsetTexture: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture() has been removed.' );\n\n\t},\n\tsetTexture2D: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTexture2D() has been removed.' );\n\n\t},\n\tsetTextureCube: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .setTextureCube() has been removed.' );\n\n\t},\n\tgetActiveMipMapLevel: function () {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel().' );\n\t\treturn this.getActiveMipmapLevel();\n\n\t}\n\n} );\n\nObject.defineProperties( WebGLRenderer.prototype, {\n\n\tshadowMapEnabled: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.enabled;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled.' );\n\t\t\tthis.shadowMap.enabled = value;\n\n\t\t}\n\t},\n\tshadowMapType: {\n\t\tget: function () {\n\n\t\t\treturn this.shadowMap.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type.' );\n\t\t\tthis.shadowMap.type = value;\n\n\t\t}\n\t},\n\tshadowMapCullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* value */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\tcontext: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .context has been removed. Use .getContext() instead.' );\n\t\t\treturn this.getContext();\n\n\t\t}\n\t},\n\tvr: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .vr has been renamed to .xr' );\n\t\t\treturn this.xr;\n\n\t\t}\n\t},\n\tgammaInput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.' );\n\n\t\t}\n\t},\n\tgammaOutput: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\treturn false;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead.' );\n\t\t\tthis.outputEncoding = ( value === true ) ? sRGBEncoding : LinearEncoding;\n\n\t\t}\n\t},\n\ttoneMappingWhitePoint: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\t\t\treturn 1.0;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.' );\n\n\t\t}\n\t},\n\n} );\n\nObject.defineProperties( WebGLShadowMap.prototype, {\n\n\tcullFace: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function ( /* cullFace */ ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderReverseSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t},\n\trenderSingleSided: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\t\t\treturn undefined;\n\n\t\t},\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.' );\n\n\t\t}\n\t}\n\n} );\n\nfunction WebGLRenderTargetCube( width, height, options ) {\n\n\tconsole.warn( 'THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options ).' );\n\treturn new WebGLCubeRenderTarget( width, options );\n\n}\n\n//\n\nObject.defineProperties( WebGLRenderTarget.prototype, {\n\n\twrapS: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\treturn this.texture.wrapS;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS.' );\n\t\t\tthis.texture.wrapS = value;\n\n\t\t}\n\t},\n\twrapT: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\treturn this.texture.wrapT;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT.' );\n\t\t\tthis.texture.wrapT = value;\n\n\t\t}\n\t},\n\tmagFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\treturn this.texture.magFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter.' );\n\t\t\tthis.texture.magFilter = value;\n\n\t\t}\n\t},\n\tminFilter: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\treturn this.texture.minFilter;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter.' );\n\t\t\tthis.texture.minFilter = value;\n\n\t\t}\n\t},\n\tanisotropy: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\treturn this.texture.anisotropy;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy.' );\n\t\t\tthis.texture.anisotropy = value;\n\n\t\t}\n\t},\n\toffset: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\treturn this.texture.offset;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .offset is now .texture.offset.' );\n\t\t\tthis.texture.offset = value;\n\n\t\t}\n\t},\n\trepeat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\treturn this.texture.repeat;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .repeat is now .texture.repeat.' );\n\t\t\tthis.texture.repeat = value;\n\n\t\t}\n\t},\n\tformat: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\treturn this.texture.format;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .format is now .texture.format.' );\n\t\t\tthis.texture.format = value;\n\n\t\t}\n\t},\n\ttype: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\treturn this.texture.type;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .type is now .texture.type.' );\n\t\t\tthis.texture.type = value;\n\n\t\t}\n\t},\n\tgenerateMipmaps: {\n\t\tget: function () {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\treturn this.texture.generateMipmaps;\n\n\t\t},\n\t\tset: function ( value ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps.' );\n\t\t\tthis.texture.generateMipmaps = value;\n\n\t\t}\n\t}\n\n} );\n\n//\n\nObject.defineProperties( Audio.prototype, {\n\n\tload: {\n\t\tvalue: function ( file ) {\n\n\t\t\tconsole.warn( 'THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.' );\n\t\t\tconst scope = this;\n\t\t\tconst audioLoader = new AudioLoader();\n\t\t\taudioLoader.load( file, function ( buffer ) {\n\n\t\t\t\tscope.setBuffer( buffer );\n\n\t\t\t} );\n\t\t\treturn this;\n\n\t\t}\n\t},\n\tstartTime: {\n\t\tset: function () {\n\n\t\t\tconsole.warn( 'THREE.Audio: .startTime is now .play( delay ).' );\n\n\t\t}\n\t}\n\n} );\n\nAudioAnalyser.prototype.getData = function () {\n\n\tconsole.warn( 'THREE.AudioAnalyser: .getData() is now .getFrequencyData().' );\n\treturn this.getFrequencyData();\n\n};\n\n//\n\nCubeCamera.prototype.updateCubeMap = function ( renderer, scene ) {\n\n\tconsole.warn( 'THREE.CubeCamera: .updateCubeMap() is now .update().' );\n\treturn this.update( renderer, scene );\n\n};\n\n//\n\nconst GeometryUtils = {\n\n\tmerge: function ( geometry1, geometry2, materialIndexOffset ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.' );\n\t\tlet matrix;\n\n\t\tif ( geometry2.isMesh ) {\n\n\t\t\tgeometry2.matrixAutoUpdate && geometry2.updateMatrix();\n\n\t\t\tmatrix = geometry2.matrix;\n\t\t\tgeometry2 = geometry2.geometry;\n\n\t\t}\n\n\t\tgeometry1.merge( geometry2, matrix, materialIndexOffset );\n\n\t},\n\n\tcenter: function ( geometry ) {\n\n\t\tconsole.warn( 'THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead.' );\n\t\treturn geometry.center();\n\n\t}\n\n};\n\nImageUtils.crossOrigin = undefined;\n\nImageUtils.loadTexture = function ( url, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.' );\n\n\tconst loader = new TextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( url, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadTextureCube = function ( urls, mapping, onLoad, onError ) {\n\n\tconsole.warn( 'THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.' );\n\n\tconst loader = new CubeTextureLoader();\n\tloader.setCrossOrigin( this.crossOrigin );\n\n\tconst texture = loader.load( urls, onLoad, undefined, onError );\n\n\tif ( mapping ) texture.mapping = mapping;\n\n\treturn texture;\n\n};\n\nImageUtils.loadCompressedTexture = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\nImageUtils.loadCompressedTextureCube = function () {\n\n\tconsole.error( 'THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.' );\n\n};\n\n//\n\nfunction CanvasRenderer() {\n\n\tconsole.error( 'THREE.CanvasRenderer has been removed' );\n\n}\n\n//\n\nfunction JSONLoader() {\n\n\tconsole.error( 'THREE.JSONLoader has been removed.' );\n\n}\n\n//\n\nconst SceneUtils = {\n\n\tcreateMultiMaterialObject: function ( /* geometry, materials */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t},\n\n\tdetach: function ( /* child, parent, scene */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t},\n\n\tattach: function ( /* child, scene, parent */ ) {\n\n\t\tconsole.error( 'THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js' );\n\n\t}\n\n};\n\n//\n\nfunction LensFlare() {\n\n\tconsole.error( 'THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js' );\n\n}\n\nif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t/* eslint-disable no-undef */\n\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'register', { detail: {\n\t\trevision: REVISION,\n\t} } ) );\n\t/* eslint-enable no-undef */\n\n}\n\nexport { ACESFilmicToneMapping, AddEquation, AddOperation, AdditiveAnimationBlendMode, AdditiveBlending, AlphaFormat, AlwaysDepth, AlwaysStencilFunc, AmbientLight, AmbientLightProbe, AnimationClip, AnimationLoader, AnimationMixer, AnimationObjectGroup, AnimationUtils, ArcCurve, ArrayCamera, ArrowHelper, Audio, AudioAnalyser, AudioContext, AudioListener, AudioLoader, AxesHelper, AxisHelper, BackSide, BasicDepthPacking, BasicShadowMap, BinaryTextureLoader, Bone, BooleanKeyframeTrack, BoundingBoxHelper, Box2, Box3, Box3Helper, BoxBufferGeometry, BoxGeometry, BoxHelper, BufferAttribute, BufferGeometry, BufferGeometryLoader, ByteType, Cache, Camera, CameraHelper, CanvasRenderer, CanvasTexture, CatmullRomCurve3, CineonToneMapping, CircleBufferGeometry, CircleGeometry, ClampToEdgeWrapping, Clock, ClosedSplineCurve3, Color, ColorKeyframeTrack, CompressedTexture, CompressedTextureLoader, ConeBufferGeometry, ConeGeometry, CubeCamera, BoxGeometry as CubeGeometry, CubeReflectionMapping, CubeRefractionMapping, CubeTexture, CubeTextureLoader, CubeUVReflectionMapping, CubeUVRefractionMapping, CubicBezierCurve, CubicBezierCurve3, CubicInterpolant, CullFaceBack, CullFaceFront, CullFaceFrontBack, CullFaceNone, Curve, CurvePath, CustomBlending, CustomToneMapping, CylinderBufferGeometry, CylinderGeometry, Cylindrical, DataTexture, DataTexture2DArray, DataTexture3D, DataTextureLoader, DecrementStencilOp, DecrementWrapStencilOp, DefaultLoadingManager, DepthFormat, DepthStencilFormat, DepthTexture, DirectionalLight, DirectionalLightHelper, DirectionalLightShadow, DiscreteInterpolant, DodecahedronBufferGeometry, DodecahedronGeometry, DoubleSide, DstAlphaFactor, DstColorFactor, DynamicBufferAttribute, DynamicCopyUsage, DynamicDrawUsage, DynamicReadUsage, EdgesGeometry, EdgesHelper, EllipseCurve, EqualDepth, EqualStencilFunc, EquirectangularReflectionMapping, EquirectangularRefractionMapping, Euler, EventDispatcher, ExtrudeBufferGeometry, ExtrudeGeometry, Face3, Face4, FaceColors, FileLoader, FlatShading, Float32Attribute, Float32BufferAttribute, Float64Attribute, Float64BufferAttribute, FloatType, Fog, FogExp2, Font, FontLoader, FrontFaceDirectionCCW, FrontFaceDirectionCW, FrontSide, Frustum, GammaEncoding, Geometry, GeometryUtils, GreaterDepth, GreaterEqualDepth, GreaterEqualStencilFunc, GreaterStencilFunc, GridHelper, Group, HalfFloatType, HemisphereLight, HemisphereLightHelper, HemisphereLightProbe, IcosahedronBufferGeometry, IcosahedronGeometry, ImageBitmapLoader, ImageLoader, ImageUtils, ImmediateRenderObject, IncrementStencilOp, IncrementWrapStencilOp, InstancedBufferAttribute, InstancedBufferGeometry, InstancedInterleavedBuffer, InstancedMesh, Int16Attribute, Int16BufferAttribute, Int32Attribute, Int32BufferAttribute, Int8Attribute, Int8BufferAttribute, IntType, InterleavedBuffer, InterleavedBufferAttribute, Interpolant, InterpolateDiscrete, InterpolateLinear, InterpolateSmooth, InvertStencilOp, JSONLoader, KeepStencilOp, KeyframeTrack, LOD, LatheBufferGeometry, LatheGeometry, Layers, LensFlare, LessDepth, LessEqualDepth, LessEqualStencilFunc, LessStencilFunc, Light, LightProbe, LightShadow, Line, Line3, LineBasicMaterial, LineCurve, LineCurve3, LineDashedMaterial, LineLoop, LinePieces, LineSegments, LineStrip, LinearEncoding, LinearFilter, LinearInterpolant, LinearMipMapLinearFilter, LinearMipMapNearestFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, LinearToneMapping, Loader, LoaderUtils, LoadingManager, LogLuvEncoding, LoopOnce, LoopPingPong, LoopRepeat, LuminanceAlphaFormat, LuminanceFormat, MOUSE, Material, MaterialLoader, MathUtils as Math, MathUtils, Matrix3, Matrix4, MaxEquation, Mesh, MeshBasicMaterial, MeshDepthMaterial, MeshDistanceMaterial, MeshFaceMaterial, MeshLambertMaterial, MeshMatcapMaterial, MeshNormalMaterial, MeshPhongMaterial, MeshPhysicalMaterial, MeshStandardMaterial, MeshToonMaterial, MinEquation, MirroredRepeatWrapping, MixOperation, MultiMaterial, MultiplyBlending, MultiplyOperation, NearestFilter, NearestMipMapLinearFilter, NearestMipMapNearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, NeverDepth, NeverStencilFunc, NoBlending, NoColors, NoToneMapping, NormalAnimationBlendMode, NormalBlending, NotEqualDepth, NotEqualStencilFunc, NumberKeyframeTrack, Object3D, ObjectLoader, ObjectSpaceNormalMap, OctahedronBufferGeometry, OctahedronGeometry, OneFactor, OneMinusDstAlphaFactor, OneMinusDstColorFactor, OneMinusSrcAlphaFactor, OneMinusSrcColorFactor, OrthographicCamera, PCFShadowMap, PCFSoftShadowMap, PMREMGenerator, ParametricBufferGeometry, ParametricGeometry, Particle, ParticleBasicMaterial, ParticleSystem, ParticleSystemMaterial, Path, PerspectiveCamera, Plane, PlaneBufferGeometry, PlaneGeometry, PlaneHelper, PointCloud, PointCloudMaterial, PointLight, PointLightHelper, Points, PointsMaterial, PolarGridHelper, PolyhedronBufferGeometry, PolyhedronGeometry, PositionalAudio, PropertyBinding, PropertyMixer, QuadraticBezierCurve, QuadraticBezierCurve3, Quaternion, QuaternionKeyframeTrack, QuaternionLinearInterpolant, REVISION, RGBADepthPacking, RGBAFormat, RGBAIntegerFormat, RGBA_ASTC_10x10_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_BPTC_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT1_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT5_Format, RGBDEncoding, RGBEEncoding, RGBEFormat, RGBFormat, RGBIntegerFormat, RGBM16Encoding, RGBM7Encoding, RGB_ETC1_Format, RGB_ETC2_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGB_S3TC_DXT1_Format, RGFormat, RGIntegerFormat, RawShaderMaterial, Ray, Raycaster, RectAreaLight, RedFormat, RedIntegerFormat, ReinhardToneMapping, RepeatWrapping, ReplaceStencilOp, ReverseSubtractEquation, RingBufferGeometry, RingGeometry, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, Scene, SceneUtils, ShaderChunk, ShaderLib, ShaderMaterial, ShadowMaterial, Shape, ShapeBufferGeometry, ShapeGeometry, ShapePath, ShapeUtils, ShortType, Skeleton, SkeletonHelper, SkinnedMesh, SmoothShading, Sphere, SphereBufferGeometry, SphereGeometry, Spherical, SphericalHarmonics3, Spline, SplineCurve, SplineCurve3, SpotLight, SpotLightHelper, SpotLightShadow, Sprite, SpriteMaterial, SrcAlphaFactor, SrcAlphaSaturateFactor, SrcColorFactor, StaticCopyUsage, StaticDrawUsage, StaticReadUsage, StereoCamera, StreamCopyUsage, StreamDrawUsage, StreamReadUsage, StringKeyframeTrack, SubtractEquation, SubtractiveBlending, TOUCH, TangentSpaceNormalMap, TetrahedronBufferGeometry, TetrahedronGeometry, TextBufferGeometry, TextGeometry, Texture, TextureLoader, TorusBufferGeometry, TorusGeometry, TorusKnotBufferGeometry, TorusKnotGeometry, Triangle, TriangleFanDrawMode, TriangleStripDrawMode, TrianglesDrawMode, TubeBufferGeometry, TubeGeometry, UVMapping, Uint16Attribute, Uint16BufferAttribute, Uint32Attribute, Uint32BufferAttribute, Uint8Attribute, Uint8BufferAttribute, Uint8ClampedAttribute, Uint8ClampedBufferAttribute, Uniform, UniformsLib, UniformsUtils, UnsignedByteType, UnsignedInt248Type, UnsignedIntType, UnsignedShort4444Type, UnsignedShort5551Type, UnsignedShort565Type, UnsignedShortType, VSMShadowMap, Vector2, Vector3, Vector4, VectorKeyframeTrack, Vertex, VertexColors, VideoTexture, WebGL1Renderer, WebGLCubeRenderTarget, WebGLMultisampleRenderTarget, WebGLRenderTarget, WebGLRenderTargetCube, WebGLRenderer, WebGLUtils, WireframeGeometry, WireframeHelper, WrapAroundEnding, XHRLoader, ZeroCurvatureEnding, ZeroFactor, ZeroSlopeEnding, ZeroStencilOp, sRGBEncoding };\n","/**\n * postprocessing v6.15.1 build Mon Jun 29 2020\n * https://github.com/vanruesc/postprocessing\n * Copyright 2020 Raoul van Rschen\n * @license Zlib\n */\nimport { ShaderMaterial, Uniform, Vector2 as Vector2$1, PerspectiveCamera, Matrix4, Camera, Scene, Mesh, BufferGeometry, BufferAttribute, WebGLRenderTarget, LinearFilter, UnsignedByteType, RGBFormat, Color, MeshDepthMaterial, RGBADepthPacking, NearestFilter, FloatType, MeshNormalMaterial, WebGLMultisampleRenderTarget, DepthTexture, DepthStencilFormat, UnsignedInt248Type, UnsignedIntType, RGBAFormat, DataTexture, LuminanceFormat, RedFormat, RGFormat, Loader, LoadingManager, RepeatWrapping, Vector3, Vector4, MeshBasicMaterial, Texture, sRGBEncoding, LinearEncoding, Matrix3, LinearMipmapLinearFilter, LinearMipMapLinearFilter } from 'three';\n\n/**\r\n * A color channel enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} RED - Red.\r\n * @property {Number} GREEN - Green.\r\n * @property {Number} BLUE - Blue.\r\n * @property {Number} ALPHA - Alpha.\r\n */\r\n\r\nconst ColorChannel = {\r\n\r\n\tRED: 0,\r\n\tGREEN: 1,\r\n\tBLUE: 2,\r\n\tALPHA: 3\r\n\r\n};\n\n/**\r\n * The Disposable contract.\r\n *\r\n * Implemented by objects that can free internal resources.\r\n *\r\n * @interface\r\n */\r\n\r\nclass Disposable {\r\n\r\n\t/**\r\n\t * Frees internal resources.\r\n\t */\r\n\r\n\tdispose() {}\r\n\r\n}\n\nvar fragmentShader = \"uniform sampler2D previousLuminanceBuffer;uniform sampler2D currentLuminanceBuffer;uniform float minLuminance;uniform float deltaTime;uniform float tau;varying vec2 vUv;void main(){float previousLuminance=texture2D(previousLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;float currentLuminance=texture2D(currentLuminanceBuffer,vUv,MIP_LEVEL_1X1).r;previousLuminance=max(minLuminance,previousLuminance);currentLuminance=max(minLuminance,currentLuminance);float adaptedLum=previousLuminance+(currentLuminance-previousLuminance)*(1.0-exp(-deltaTime*tau));gl_FragColor.r=adaptedLum;}\";\n\nvar vertexShader = \"varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * An adaptive luminance shader material.\r\n */\r\n\r\nclass AdaptiveLuminanceMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new adaptive luminance material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"AdaptiveLuminanceMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tMIP_LEVEL_1X1: \"0.0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tpreviousLuminanceBuffer: new Uniform(null),\r\n\t\t\t\tcurrentLuminanceBuffer: new Uniform(null),\r\n\t\t\t\tminLuminance: new Uniform(0.01),\r\n\t\t\t\tdeltaTime: new Uniform(0.0),\r\n\t\t\t\ttau: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$1 = \"uniform sampler2D inputBuffer;uniform sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\\n#if PASS == 1\\nuniform float kernel64[128];\\n#else\\nuniform float kernel16[32];\\n#endif\\nvarying vec2 vUv;void main(){\\n#ifdef FOREGROUND\\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\\n#else\\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\\n#endif\\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\\n#ifdef FOREGROUND\\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\\n#else\\nvec2 step=texelSize*CoC;\\n#endif\\n#if PASS == 1\\nvec4 acc=vec4(0.0);for(int i=0;i<128;i+=2){vec2 uv=step*vec2(kernel64[i],kernel64[i+1])+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\\n#else\\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<32;i+=2){vec2 uv=step*vec2(kernel16[i],kernel16[i+1])+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\\n#endif\\n}}\";\n\n/**\r\n * A bokeh blur material.\r\n *\r\n * This material should be applied twice in a row, with `fill` mode enabled for\r\n * the second pass.\r\n *\r\n * Enabling the `foreground` option causes the shader to combine the near and\r\n * far CoC values around foreground objects.\r\n */\r\n\r\nclass BokehMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh material.\r\n\t *\r\n\t * @param {Boolean} [fill=false] - Enables or disables the bokeh highlight fill mode.\r\n\t * @param {Boolean} [foreground=false] - Determines whether this material will be applied to foreground colors.\r\n\t */\r\n\r\n\tconstructor(fill = false, foreground = false) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"BokehMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tPASS: fill ? \"2\" : \"1\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tkernel64: new Uniform(new Float32Array(128)),\r\n\t\t\t\tkernel16: new Uniform(new Float32Array(32)),\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tcocBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tscale: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$1,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tif(foreground) {\r\n\r\n\t\t\tthis.defines.FOREGROUND = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.generateKernel();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Generates the blur kernels; one big one and a small one for highlights.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tgenerateKernel() {\r\n\r\n\t\tconst GOLDEN_ANGLE = 2.39996323;\r\n\t\tconst points64 = this.uniforms.kernel64.value;\r\n\t\tconst points16 = this.uniforms.kernel16.value;\r\n\r\n\t\tlet i64 = 0, i16 = 0;\r\n\r\n\t\tfor(let i = 0; i < 80; ++i) {\r\n\r\n\t\t\tconst theta = i * GOLDEN_ANGLE;\r\n\t\t\tconst r = Math.sqrt(i) / Math.sqrt(80);\r\n\t\t\tconst u = r * Math.cos(theta), v = r * Math.sin(theta);\r\n\r\n\t\t\tif(i % 5 === 0) {\r\n\r\n\t\t\t\tpoints16[i16++] = u;\r\n\t\t\t\tpoints16[i16++] = v;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tpoints64[i64++] = u;\r\n\t\t\t\tpoints64[i64++] = v;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$2 = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float focusDistance;uniform float focalLength;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}void main(){float depth=readDepth(vUv);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focalLength,abs(signedDistance));gl_FragColor.rg=vec2(step(signedDistance,0.0)*magnitude,step(0.0,signedDistance)*magnitude);}\";\n\n/**\r\n * A CoC shader material.\r\n */\r\n\r\nclass CircleOfConfusionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new CoC material.\r\n\t *\r\n\t * @param {Camera} camera - A camera.\r\n\t */\r\n\r\n\tconstructor(camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"CircleOfConfusionMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\tfocusDistance: new Uniform(0.0),\r\n\t\t\t\tfocalLength: new Uniform(0.0),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$2,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShaderColor = \"uniform sampler2D inputBuffer;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;void main(){const vec2 threshold=vec2(EDGE_THRESHOLD);vec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);}\";\n\nvar vertexShader$1 = \"uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\\n#if EDGE_DETECTION_MODE != 0\\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\\n#endif\\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\\n#if EDGE_DETECTION_MODE != 0\\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\\n#endif\\ngl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * A material that detects edges in a color texture.\r\n *\r\n * @deprecated Use EdgeDetectionMaterial instead.\r\n */\r\n\r\nclass ColorEdgesMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new color edges material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ColorEdgesMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tLOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\r\n\t\t\t\tEDGE_THRESHOLD: \"0.1\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShaderColor,\r\n\t\t\tvertexShader: vertexShader$1,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the local contrast adaptation factor.\r\n\t *\r\n\t * If there is a neighbor edge that has _factor_ times bigger contrast than\r\n\t * the current edge, the edge will be discarded.\r\n\t *\r\n\t * This allows to eliminate spurious crossing edges and is based on the fact\r\n\t * that if there is too much contrast in a direction, the perceptual contrast\r\n\t * in the other neighbors will be hidden.\r\n\t *\r\n\t * @param {Number} factor - The local contrast adaptation factor. Default is 2.0.\r\n\t */\r\n\r\n\tsetLocalContrastAdaptationFactor(factor) {\r\n\r\n\t\tthis.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = factor.toFixed(\"2\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection sensitivity.\r\n\t *\r\n\t * A lower value results in more edges being detected at the expense of\r\n\t * performance.\r\n\t *\r\n\t * 0.1 is a reasonable value, and allows to catch most visible edges.\r\n\t * 0.05 is a rather overkill value, that allows to catch 'em all.\r\n\t *\r\n\t * If temporal supersampling is used, 0.2 could be a reasonable value, as low\r\n\t * contrast edges are properly filtered by just 2x.\r\n\t *\r\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\r\n\t */\r\n\r\n\tsetEdgeDetectionThreshold(threshold) {\r\n\r\n\t\tconst t = Math.min(Math.max(threshold, 0.05), 0.5);\r\n\t\tthis.defines.EDGE_THRESHOLD = t.toFixed(\"2\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$3 = \"#include <common>\\n#include <dithering_pars_fragment>\\nuniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\\n#include <dithering_fragment>\\n}\";\n\nvar vertexShader$2 = \"uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;/*Packing multiple texture coordinates into one varying and using a swizzle toextract them in the fragment shader still causes a dependent texture read.*/varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * An optimised convolution shader material.\r\n *\r\n * This material supports dithering.\r\n *\r\n * Based on the GDC2003 Presentation by Masaki Kawase, Bunkasha Games:\r\n *  Frame Buffer Postprocessing Effects in DOUBLE-S.T.E.A.L (Wreckless)\r\n * and an article by Filip Strugar, Intel:\r\n *  An investigation of fast real-time GPU-based image blur algorithms\r\n *\r\n * Further modified according to Apple's\r\n * [Best Practices for Shaders](https://goo.gl/lmRoM5).\r\n *\r\n * @todo Remove dithering code from fragment shader.\r\n */\r\n\r\nclass ConvolutionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new convolution material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"ConvolutionMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\thalfTexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tkernel: new Uniform(0.0),\r\n\t\t\t\tscale: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$3,\r\n\t\t\tvertexShader: vertexShader$2,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\r\n\r\n\t\t/**\r\n\t\t * The current kernel size.\r\n\t\t *\r\n\t\t * @type {KernelSize}\r\n\t\t */\r\n\r\n\t\tthis.kernelSize = KernelSize.LARGE;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the kernel.\r\n\t *\r\n\t * @return {Float32Array} The kernel.\r\n\t */\r\n\r\n\tgetKernel() {\r\n\r\n\t\treturn kernelPresets[this.kernelSize];\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\t\tthis.uniforms.halfTexelSize.value.set(x, y).multiplyScalar(0.5);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * The Kawase blur kernel presets.\r\n *\r\n * @type {Float32Array[]}\r\n * @private\r\n */\r\n\r\nconst kernelPresets = [\r\n\tnew Float32Array([0.0, 0.0]),\r\n\tnew Float32Array([0.0, 1.0, 1.0]),\r\n\tnew Float32Array([0.0, 1.0, 1.0, 2.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 2.0, 3.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 4.0, 5.0]),\r\n\tnew Float32Array([0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 7.0, 8.0, 9.0, 10.0])\r\n];\r\n\r\n/**\r\n * A kernel size enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} VERY_SMALL - A very small kernel that matches a 7x7 Gauss blur kernel.\r\n * @property {Number} SMALL - A small kernel that matches a 15x15 Gauss blur kernel.\r\n * @property {Number} MEDIUM - A medium sized kernel that matches a 23x23 Gauss blur kernel.\r\n * @property {Number} LARGE - A large kernel that matches a 35x35 Gauss blur kernel.\r\n * @property {Number} VERY_LARGE - A very large kernel that matches a 63x63 Gauss blur kernel.\r\n * @property {Number} HUGE - A huge kernel that matches a 127x127 Gauss blur kernel.\r\n */\r\n\r\nconst KernelSize = {\r\n\r\n\tVERY_SMALL: 0,\r\n\tSMALL: 1,\r\n\tMEDIUM: 2,\r\n\tLARGE: 3,\r\n\tVERY_LARGE: 4,\r\n\tHUGE: 5\r\n\r\n};\n\nvar fragmentShader$4 = \"uniform sampler2D inputBuffer;uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\\n#include <encodings_fragment>\\n}\";\n\n/**\r\n * A simple copy shader material.\r\n */\r\n\r\nclass CopyMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new copy material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"CopyMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\topacity: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$4,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$5 = \"#include <packing>\\n#include <clipping_planes_pars_fragment>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform float cameraNear;uniform float cameraFar;varying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <clipping_planes_fragment>\\nvec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#else\\nfloat viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);\\n#endif\\nfloat depthTest=(-vViewZ>-viewZ)? 1.0 : 0.0;gl_FragColor.rg=vec2(0.0,depthTest);}\";\n\nvar vertexShader$3 = \"#include <common>\\n#include <morphtarget_pars_vertex>\\n#include <skinning_pars_vertex>\\n#include <clipping_planes_pars_vertex>\\nvarying float vViewZ;varying vec4 vProjTexCoord;void main(){\\n#include <skinbase_vertex>\\n#include <begin_vertex>\\n#include <morphtarget_vertex>\\n#include <skinning_vertex>\\n#include <project_vertex>\\nvViewZ=mvPosition.z;vProjTexCoord=gl_Position;\\n#include <clipping_planes_vertex>\\n}\";\n\n/**\r\n * A depth comparison shader material.\r\n */\r\n\r\nclass DepthComparisonMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth comparison material.\r\n\t *\r\n\t * @param {Texture} [depthTexture=null] - A depth texture.\r\n\t * @param {PerspectiveCamera} [camera] - A camera.\r\n\t */\r\n\r\n\tconstructor(depthTexture = null, camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthComparisonMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer: new Uniform(depthTexture),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$5,\r\n\t\t\tvertexShader: vertexShader$3,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false,\r\n\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$6 = \"#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\n#ifdef DOWNSAMPLE_NORMALS\\nuniform sampler2D normalBuffer;\\n#endif\\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}/***Returns the index of the most representative depth in the 2x2 neighborhood.*/int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])/4.0;float distances[4]=float[](abs(c-samples[0]),abs(c-samples[1]),abs(c-samples[2]),abs(c-samples[3]));float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4]=float[](readDepth(vUv0),readDepth(vUv1),readDepth(vUv2),readDepth(vUv3));int index=findBestDepth(d);\\n#ifdef DOWNSAMPLE_NORMALS\\nvec2 uvs[4]=vec2[](vUv0,vUv1,vUv2,vUv3);vec3 n=texture2D(normalBuffer,uvs[index]).rgb;\\n#else\\nvec3 n=vec3(0.0);\\n#endif\\ngl_FragColor=vec4(n,d[index]);}\";\n\nvar vertexShader$4 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * A depth downsampling shader material.\r\n *\r\n * Based on an article by Eleni Maria Stea:\r\n * https://eleni.mutantstargoat.com/hikiko/depth-aware-upsampling-6\r\n */\r\n\r\nclass DepthDownsamplingMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth downsampling material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthDownsamplingMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\tnormalBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1())\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$6,\r\n\t\t\tvertexShader: vertexShader$4,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth packing of the source depth buffer.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$7 = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;\\n#else\\nuniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;\\n#endif\\nuniform sampler2D inputBuffer;varying vec2 vUv;void main(){\\n#if DEPTH_PACKING_0 == 3201\\nfloat d0=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));\\n#else\\nfloat d0=texture2D(depthBuffer0,vUv).r;\\n#endif\\n#if DEPTH_PACKING_1 == 3201\\nfloat d1=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));\\n#else\\nfloat d1=texture2D(depthBuffer1,vUv).r;\\n#endif\\nif(d0<d1){discard;}gl_FragColor=texture2D(inputBuffer,vUv);}\";\n\n/**\r\n * A depth mask shader material.\r\n *\r\n * This material masks a color buffer by comparing two depth textures.\r\n */\r\n\r\nclass DepthMaskMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new depth mask material.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"DepthMaskMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING_0: \"0\",\r\n\t\t\t\tDEPTH_PACKING_1: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tdepthBuffer0: new Uniform(null),\r\n\t\t\t\tdepthBuffer1: new Uniform(null),\r\n\t\t\t\tinputBuffer: new Uniform(null)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$7,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShaderDepth = \"#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nvarying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}/***Gathers the current texel,and the top-left neighbors.*/vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}void main(){const vec2 threshold=vec2(DEPTH_THRESHOLD);vec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);}\";\n\nvar fragmentShaderLuma = \"#include <common>\\nuniform sampler2D inputBuffer;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;void main(){const vec2 threshold=vec2(EDGE_THRESHOLD);float l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);}\";\n\n/**\r\n * An edge detection material.\r\n *\r\n * Mainly used for Subpixel Morphological Antialiasing.\r\n */\r\n\r\nclass EdgeDetectionMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new edge detection material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The screen texel size.\r\n\t * @param {EdgeDetectionMode} [mode=EdgeDetectionMode.COLOR] - The edge detection mode.\r\n\t * @todo Remove texelSize parameter.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1(), mode = EdgeDetectionMode.COLOR) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"EdgeDetectionMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tLOCAL_CONTRAST_ADAPTATION_FACTOR: \"2.0\",\r\n\t\t\t\tEDGE_THRESHOLD: \"0.1\",\r\n\t\t\t\tDEPTH_THRESHOLD: \"0.01\",\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize)\r\n\t\t\t},\r\n\r\n\t\t\tvertexShader: vertexShader$1,\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.setEdgeDetectionMode(mode);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection mode.\r\n\t *\r\n\t * Warning: If you intend to change the edge detection mode at runtime, make\r\n\t * sure that {@link EffectPass.needsDepthTexture} is set to `true` _before_\r\n\t * the EffectPass is added to the composer.\r\n\t *\r\n\t * @param {EdgeDetectionMode} mode - The edge detection mode.\r\n\t */\r\n\r\n\tsetEdgeDetectionMode(mode) {\r\n\r\n\t\tswitch(mode) {\r\n\r\n\t\t\tcase EdgeDetectionMode.DEPTH:\r\n\t\t\t\tthis.fragmentShader = fragmentShaderDepth;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EdgeDetectionMode.LUMA:\r\n\t\t\t\tthis.fragmentShader = fragmentShaderLuma;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase EdgeDetectionMode.COLOR:\r\n\t\t\tdefault:\r\n\t\t\t\tthis.fragmentShader = fragmentShaderColor;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tthis.defines.EDGE_DETECTION_MODE = mode.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the local contrast adaptation factor. Has no effect if the edge\r\n\t * detection mode is set to DEPTH.\r\n\t *\r\n\t * If there is a neighbor edge that has _factor_ times bigger contrast than\r\n\t * the current edge, the edge will be discarded.\r\n\t *\r\n\t * This allows to eliminate spurious crossing edges and is based on the fact\r\n\t * that if there is too much contrast in a direction, the perceptual contrast\r\n\t * in the other neighbors will be hidden.\r\n\t *\r\n\t * @param {Number} factor - The local contrast adaptation factor. Default is 2.0.\r\n\t */\r\n\r\n\tsetLocalContrastAdaptationFactor(factor) {\r\n\r\n\t\tthis.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR = factor.toFixed(\"2\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection sensitivity.\r\n\t *\r\n\t * A lower value results in more edges being detected at the expense of\r\n\t * performance.\r\n\t *\r\n\t * 0.1 is a reasonable value, and allows to catch most visible edges.\r\n\t * 0.05 is a rather overkill value, that allows to catch 'em all.\r\n\t *\r\n\t * If temporal supersampling is used, 0.2 could be a reasonable value, as low\r\n\t * contrast edges are properly filtered by just 2x.\r\n\t *\r\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\r\n\t */\r\n\r\n\tsetEdgeDetectionThreshold(threshold) {\r\n\r\n\t\tconst t = Math.min(Math.max(threshold, 0.05), 0.5);\r\n\r\n\t\tthis.defines.EDGE_THRESHOLD = t.toFixed(\"2\");\r\n\t\tthis.defines.DEPTH_THRESHOLD = (t * 0.1).toFixed(\"3\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of edge detection modes.\r\n *\r\n * @type {Object}\r\n * @property {Number} DEPTH - Depth-based edge detection.\r\n * @property {Number} LUMA - Luminance-based edge detection.\r\n * @property {Number} COLOR - Chroma-based edge detection.\r\n */\r\n\r\nconst EdgeDetectionMode = {\r\n\r\n\tDEPTH: 0,\r\n\tLUMA: 1,\r\n\tCOLOR: 2\r\n\r\n};\n\nvar fragmentTemplate = \"#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\nuniform sampler2D inputBuffer;\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D depthBuffer;\\n#else\\nuniform mediump sampler2D depthBuffer;\\n#endif\\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\\n#else\\nreturn texture2D(depthBuffer,uv).r;\\n#endif\\n}float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\\n#endif\\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\\n#ifdef ENCODE_OUTPUT\\n#include <encodings_fragment>\\n#endif\\n#include <dithering_fragment>\\n}\";\n\nvar vertexTemplate = \"uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * An effect material for compound shaders.\r\n *\r\n * This material supports dithering.\r\n *\r\n * @implements {Resizable}\r\n */\r\n\r\nclass EffectMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new effect material.\r\n\t *\r\n\t * @param {Map<String, String>} [shaderParts=null] - A collection of shader snippets. See {@link Section}.\r\n\t * @param {Map<String, String>} [defines=null] - A collection of preprocessor macro definitions.\r\n\t * @param {Map<String, Uniform>} [uniforms=null] - A collection of uniforms.\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t * @param {Boolean} [dithering=false] - Whether dithering should be enabled.\r\n\t */\r\n\r\n\tconstructor(shaderParts = null, defines = null, uniforms = null, camera = null, dithering = false) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"EffectMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tDEPTH_PACKING: \"0\",\r\n\t\t\t\tENCODE_OUTPUT: \"1\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tdepthBuffer: new Uniform(null),\r\n\t\t\t\tresolution: new Uniform(new Vector2$1()),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tcameraNear: new Uniform(0.3),\r\n\t\t\t\tcameraFar: new Uniform(1000.0),\r\n\t\t\t\taspect: new Uniform(1.0),\r\n\t\t\t\ttime: new Uniform(0.0)\r\n\t\t\t},\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false,\r\n\t\t\tdithering\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tif(shaderParts !== null) {\r\n\r\n\t\t\tthis.setShaderParts(shaderParts);\r\n\r\n\t\t}\r\n\r\n\t\tif(defines !== null) {\r\n\r\n\t\t\tthis.setDefines(defines);\r\n\r\n\t\t}\r\n\r\n\t\tif(uniforms !== null) {\r\n\r\n\t\t\tthis.setUniforms(uniforms);\r\n\r\n\t\t}\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * Use `BasicDepthPacking` or `RGBADepthPacking` if your depth texture\r\n\t * contains packed depth.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the shader parts.\r\n\t *\r\n\t * @param {Map<String, String>} shaderParts - A collection of shader snippets. See {@link Section}.\r\n\t * @return {EffectMaterial} This material.\r\n\t */\r\n\r\n\tsetShaderParts(shaderParts) {\r\n\r\n\t\tthis.fragmentShader = fragmentTemplate\r\n\t\t\t.replace(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD))\r\n\t\t\t.replace(Section.FRAGMENT_MAIN_UV, shaderParts.get(Section.FRAGMENT_MAIN_UV))\r\n\t\t\t.replace(Section.FRAGMENT_MAIN_IMAGE, shaderParts.get(Section.FRAGMENT_MAIN_IMAGE));\r\n\r\n\t\tthis.vertexShader = vertexTemplate\r\n\t\t\t.replace(Section.VERTEX_HEAD, shaderParts.get(Section.VERTEX_HEAD))\r\n\t\t\t.replace(Section.VERTEX_MAIN_SUPPORT, shaderParts.get(Section.VERTEX_MAIN_SUPPORT));\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the shader macros.\r\n\t *\r\n\t * @param {Map<String, String>} defines - A collection of preprocessor macro definitions.\r\n\t * @return {EffectMaterial} This material.\r\n\t */\r\n\r\n\tsetDefines(defines) {\r\n\r\n\t\tfor(const entry of defines.entries()) {\r\n\r\n\t\t\tthis.defines[entry[0]] = entry[1];\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the shader uniforms.\r\n\t *\r\n\t * @param {Map<String, Uniform>} uniforms - A collection of uniforms.\r\n\t * @return {EffectMaterial} This material.\r\n\t */\r\n\r\n\tsetUniforms(uniforms) {\r\n\r\n\t\tfor(const entry of uniforms.entries()) {\r\n\r\n\t\t\tthis.uniforms[entry[0]] = entry[1];\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tthis.uniforms.cameraNear.value = camera.near;\r\n\t\t\tthis.uniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst w = Math.max(width, 1);\r\n\t\tconst h = Math.max(height, 1);\r\n\r\n\t\tthis.uniforms.resolution.value.set(w, h);\r\n\t\tthis.uniforms.texelSize.value.set(1.0 / w, 1.0 / h);\r\n\t\tthis.uniforms.aspect.value = w / h;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of shader code placeholders used by the {@link EffectPass}.\r\n *\r\n * @type {Object}\r\n * @property {String} FRAGMENT_HEAD - A placeholder for function and variable declarations inside the fragment shader.\r\n * @property {String} FRAGMENT_MAIN_UV - A placeholder for UV transformations inside the fragment shader.\r\n * @property {String} FRAGMENT_MAIN_IMAGE - A placeholder for color calculations inside the fragment shader.\r\n * @property {String} VERTEX_HEAD - A placeholder for function and variable declarations inside the vertex shader.\r\n * @property {String} VERTEX_MAIN_SUPPORT - A placeholder for supporting calculations inside the vertex shader.\r\n */\r\n\r\nconst Section = {\r\n\r\n\tFRAGMENT_HEAD: \"FRAGMENT_HEAD\",\r\n\tFRAGMENT_MAIN_UV: \"FRAGMENT_MAIN_UV\",\r\n\tFRAGMENT_MAIN_IMAGE: \"FRAGMENT_MAIN_IMAGE\",\r\n\tVERTEX_HEAD: \"VERTEX_HEAD\",\r\n\tVERTEX_MAIN_SUPPORT: \"VERTEX_MAIN_SUPPORT\"\r\n\r\n};\n\nvar fragmentShader$8 = \"#include <common>\\n#include <dithering_pars_fragment>\\nuniform sampler2D inputBuffer;uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);/*Estimate the probability of occlusion at each pixel by summing samplesalong a ray to the light position.*/for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);\\n#include <dithering_fragment>\\n}\";\n\n/**\r\n * A crepuscular rays shader material.\r\n *\r\n * This material supports dithering.\r\n *\r\n * References:\r\n *\r\n * Thibaut Despoulain, 2012:\r\n *  [(WebGL) Volumetric Light Approximation in Three.js](\r\n *  http://bkcore.com/blog/3d/webgl-three-js-volumetric-light-godrays.html)\r\n *\r\n * Nvidia, GPU Gems 3, 2008:\r\n *  [Chapter 13. Volumetric Light Scattering as a Post-Process](\r\n *  https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch13.html)\r\n *\r\n * @todo Remove dithering code from fragment shader.\r\n */\r\n\r\nclass GodRaysMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new god rays material.\r\n\t *\r\n\t * @param {Vector2} lightPosition - The light position in screen space.\r\n\t */\r\n\r\n\tconstructor(lightPosition) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"GodRaysMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tSAMPLES_INT: \"60\",\r\n\t\t\t\tSAMPLES_FLOAT: \"60.0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tlightPosition: new Uniform(lightPosition),\r\n\t\t\t\tdensity: new Uniform(1.0),\r\n\t\t\t\tdecay: new Uniform(1.0),\r\n\t\t\t\tweight: new Uniform(1.0),\r\n\t\t\t\texposure: new Uniform(1.0),\r\n\t\t\t\tclampMax: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$8,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn Number(this.defines.SAMPLES_INT);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tconst s = Math.floor(value);\r\n\r\n\t\tthis.defines.SAMPLES_INT = s.toFixed(0);\r\n\t\tthis.defines.SAMPLES_FLOAT = s.toFixed(1);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$9 = \"#include <common>\\nuniform sampler2D inputBuffer;\\n#ifdef RANGE\\nuniform vec2 range;\\n#elif defined(THRESHOLD)\\nuniform float threshold;uniform float smoothing;\\n#endif\\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\\n#ifdef RANGE\\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\\n#elif defined(THRESHOLD)\\nl=smoothstep(threshold,threshold+smoothing,l);\\n#endif\\n#ifdef COLOR\\ngl_FragColor=vec4(texel.rgb*l,l);\\n#else\\ngl_FragColor=vec4(l);\\n#endif\\n}\";\n\n/**\r\n * A luminance shader material.\r\n *\r\n * This shader produces a greyscale luminance map that describes the absolute\r\n * amount of light emitted by a scene. It can also be configured to output\r\n * colours that are scaled with their respective luminance value. Additionally,\r\n * a range may be provided to mask out undesired texels.\r\n *\r\n * The alpha channel always contains the luminance value.\r\n *\r\n * On luminance coefficients:\r\n *  http://www.poynton.com/notes/colour_and_gamma/ColorFAQ.html#RTFToC9\r\n *\r\n * Coefficients for different colour spaces:\r\n *  https://hsto.org/getpro/habr/post_images/2ab/69d/084/2ab69d084f9a597e032624bcd74d57a7.png\r\n *\r\n * Luminance range reference:\r\n *  https://cycling74.com/2007/05/23/your-first-shader/#.Vty9FfkrL4Z\r\n */\r\n\r\nclass LuminanceMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new luminance material.\r\n\t *\r\n\t * @param {Boolean} [colorOutput=false] - Defines whether the shader should output colors scaled with their luminance value.\r\n\t * @param {Vector2} [luminanceRange] - If provided, the shader will mask out texels that aren't in the specified luminance range.\r\n\t */\r\n\r\n\tconstructor(colorOutput = false, luminanceRange = null) {\r\n\r\n\t\tconst useRange = (luminanceRange !== null);\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"LuminanceMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tthreshold: new Uniform(0.0),\r\n\t\t\t\tsmoothing: new Uniform(1.0),\r\n\t\t\t\trange: new Uniform(useRange ? luminanceRange : new Vector2$1())\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$9,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.colorOutput = colorOutput;\r\n\t\tthis.useThreshold = true;\r\n\t\tthis.useRange = useRange;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance threshold.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget threshold() {\r\n\r\n\t\treturn this.uniforms.threshold.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the luminance threshold.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset threshold(value) {\r\n\r\n\t\tthis.uniforms.threshold.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance threshold smoothing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget smoothing() {\r\n\r\n\t\treturn this.uniforms.smoothing.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the luminance threshold smoothing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset smoothing(value) {\r\n\r\n\t\tthis.uniforms.smoothing.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the luminance threshold is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget useThreshold() {\r\n\r\n\t\treturn (this.defines.THRESHOLD !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables the luminance threshold.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset useThreshold(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.THRESHOLD = \"1\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.defines.THRESHOLD;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether color output is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget colorOutput() {\r\n\r\n\t\treturn (this.defines.COLOR !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables color output.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset colorOutput(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.COLOR = \"1\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.defines.COLOR;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables color output.\r\n\t *\r\n\t * @deprecated Use colorOutput instead.\r\n\t * @param {Boolean} enabled - Whether color output should be enabled.\r\n\t */\r\n\r\n\tsetColorOutputEnabled(enabled) {\r\n\r\n\t\tthis.colorOutput = enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether luminance masking is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget useRange() {\r\n\r\n\t\treturn (this.defines.RANGE !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables luminance masking.\r\n\t *\r\n\t * If enabled, the threshold will be ignored.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset useRange(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.RANGE = \"1\";\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdelete this.defines.RANGE;\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether luminance masking is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Use useRange instead.\r\n\t */\r\n\r\n\tget luminanceRange() {\r\n\r\n\t\treturn this.useRange;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables luminance masking.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Use useRange instead.\r\n\t */\r\n\r\n\tset luminanceRange(value) {\r\n\r\n\t\tthis.useRange = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables the luminance mask.\r\n\t *\r\n\t * @deprecated Use luminanceRange instead.\r\n\t * @param {Boolean} enabled - Whether the luminance mask should be enabled.\r\n\t */\r\n\r\n\tsetLuminanceRangeEnabled(enabled) {\r\n\r\n\t\tthis.useRange = enabled;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$a = \"uniform sampler2D maskTexture;uniform sampler2D inputBuffer;\\n#if MASK_FUNCTION != 0\\nuniform float strength;\\n#endif\\nvarying vec2 vUv;void main(){\\n#if COLOR_CHANNEL == 0\\nfloat mask=texture2D(maskTexture,vUv).r;\\n#elif COLOR_CHANNEL == 1\\nfloat mask=texture2D(maskTexture,vUv).g;\\n#elif COLOR_CHANNEL == 2\\nfloat mask=texture2D(maskTexture,vUv).b;\\n#else\\nfloat mask=texture2D(maskTexture,vUv).a;\\n#endif\\n#if MASK_FUNCTION == 0\\n#ifdef INVERTED\\nif(mask>0.0){discard;}\\n#else\\nif(mask==0.0){discard;}\\n#endif\\n#else\\nmask=clamp(mask*strength,0.0,1.0);\\n#ifdef INVERTED\\nmask=(1.0-mask);\\n#endif\\n#if MASK_FUNCTION == 1\\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\\n#else\\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\\n#endif\\n#endif\\n}\";\n\n/**\r\n * A mask shader material.\r\n *\r\n * This material applies a mask texture to a buffer.\r\n */\r\n\r\nclass MaskMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new mask material.\r\n\t *\r\n\t * @param {Texture} [maskTexture] - The mask texture.\r\n\t */\r\n\r\n\tconstructor(maskTexture = null) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"MaskMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tmaskTexture: new Uniform(maskTexture),\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tstrength: new Uniform(1.0)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$a,\r\n\t\t\tvertexShader,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.colorChannel = ColorChannel.RED;\r\n\t\tthis.maskFunction = MaskFunction.DISCARD;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the mask texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tset maskTexture(value) {\r\n\r\n\t\tthis.uniforms.maskTexture.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the color channel to use for masking.\r\n\t *\r\n\t * The default channel is `RED`.\r\n\t *\r\n\t * @type {ColorChannel}\r\n\t */\r\n\r\n\tset colorChannel(value) {\r\n\r\n\t\tthis.defines.COLOR_CHANNEL = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the masking technique.\r\n\t *\r\n\t * The default function is `DISCARD`.\r\n\t *\r\n\t * @type {MaskFunction}\r\n\t */\r\n\r\n\tset maskFunction(value) {\r\n\r\n\t\tthis.defines.MASK_FUNCTION = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the masking is inverted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget inverted() {\r\n\r\n\t\treturn (this.defines.INVERTED !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Determines whether the masking should be inverted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset inverted(value) {\r\n\r\n\t\tif(this.inverted && !value) {\r\n\r\n\t\t\tdelete this.defines.INVERTED;\r\n\r\n\t\t} else if(value) {\r\n\r\n\t\t\tthis.defines.INVERTED = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current mask strength.\r\n\t *\r\n\t * Individual mask values will be clamped to [0.0, 1.0].\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget strength() {\r\n\r\n\t\treturn this.uniforms.strength.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the strength of the mask.\r\n\t *\r\n\t * Has no effect when the mask function is set to `DISCARD`.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset strength(value) {\r\n\r\n\t\tthis.uniforms.strength.value = value;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A mask function enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} DISCARD - Discards elements when the respective mask value is zero.\r\n * @property {Number} MULTIPLY - Multiplies the input buffer with the mask texture.\r\n * @property {Number} MULTIPLY_RGB_SET_ALPHA - Multiplies the input RGB values with the mask and sets alpha to the mask value.\r\n */\r\n\r\nconst MaskFunction = {\r\n\r\n\tDISCARD: 0,\r\n\tMULTIPLY: 1,\r\n\tMULTIPLY_RGB_SET_ALPHA: 2\r\n\r\n};\n\nvar fragmentShader$b = \"uniform sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)? vec2(d,0.0): vec2(0.0,d);}\";\n\nvar vertexShader$5 = \"uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * An outline shader material.\r\n */\r\n\r\nclass OutlineMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new outline material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The screen texel size.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"OutlineMaterial\",\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1())\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$b,\r\n\t\t\tvertexShader: vertexShader$5,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.setTexelSize(texelSize.x, texelSize.y);\r\n\r\n\t\t// @todo Added for backward compatibility.\r\n\t\tthis.uniforms.maskTexture = this.uniforms.inputBuffer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An outline shader material.\r\n *\r\n * @deprecated Use OutlineMaterial instead.\r\n */\r\n\r\nconst OutlineEdgesMaterial = OutlineMaterial;\n\nvar fragmentShader$c = \"#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\\n#if __VERSION__ < 300\\n#define round(v) floor(v + 0.5)\\n#endif\\nuniform sampler2D inputBuffer;uniform sampler2D areaTexture;uniform sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}/***Allows to decode two binary values from a bilinear-filtered access.**Bilinear access for fetching 'e' have a 0.25 offset,and we are interested*in the R and G edges:**+---G---+-------+*|x o R   x|*+-------+-------+**Then,if one of these edge is enabled:*Red:(0.75*X+0.25*1)=>0.25 or 1.0*Green:(0.75*1+0.25*X)=>0.75 or 1.0**This function will unpack the values(mad+mul+round):*wolframalpha.com: round(x*abs(5*x-5*0.75))plot 0 to 1*/vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}/***Diagonal pattern searches.*/vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}/***Calculates the area corresponding to a certain diagonal distance and crossing*edges 'e'.*/vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}/***Searches for diagonal patterns and returns the corresponding weights.*/vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}/***Determines how much length should be added in the last step of the searches.**Takes the bilinearly interpolated edge(see @PSEUDO_GATHER4),and adds 0,1*or 2 depending on which edges and crossing edges are active.*/float searchLength(const in vec2 e,const in float offset){/*The texture is flipped vertically,with left and right cases taking halfof the space horizontally.*/vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}/***Horizontal search for the second pass.*/float searchXLeft(in vec2 texCoord,const in float end){/*@PSEUDO_GATHER4This texCoord has been offset by(-0.25,-0.125)in the vertex shader tosample between edges,thus fetching four edges in a row.Sampling with different offsets in each direction allows to disambiguatewhich edges are active from the four fetched ones.*/vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}/***Vertical search for the second pass.*/float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}/***Determines the areas at each side of the current edge.*/vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}/***Corner detection.*/void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\\n#if !defined(DISABLE_CORNER_DETECTION)\\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\\n#endif\\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\\n#if !defined(DISABLE_DIAG_DETECTION)\\n/*Diagonals have both north and west edges,so searching for them in one ofthe boundaries is enough.*/weights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\\n#endif\\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;/*Now fetch the left crossing edges,two at a time using bilinearfiltering. Sampling at-0.25(see @CROSSING_OFFSET)enables to discern whatvalue each edge has.*/float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;/*Translate distances to pixel units for better interleave arithmetic andmemory accesses.*/d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\\n#if !defined(DISABLE_DIAG_DETECTION)\\n}else{e.r=0.0;}\\n#endif\\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}\";\n\nvar vertexShader$6 = \"uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * Subpixel Morphological Antialiasing.\r\n *\r\n * This material computes weights for detected edges.\r\n */\r\n\r\nclass SMAAWeightsMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA weights material.\r\n\t *\r\n\t * @param {Vector2} [texelSize] - The absolute screen texel size.\r\n\t * @param {Vector2} [resolution] - The resolution.\r\n\t */\r\n\r\n\tconstructor(texelSize = new Vector2$1(), resolution = new Vector2$1()) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SMAAWeightsMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\r\n\t\t\t\t// Configurable settings:\r\n\t\t\t\tMAX_SEARCH_STEPS_INT: \"16\",\r\n\t\t\t\tMAX_SEARCH_STEPS_FLOAT: \"16.0\",\r\n\t\t\t\tMAX_SEARCH_STEPS_DIAG_INT: \"8\",\r\n\t\t\t\tMAX_SEARCH_STEPS_DIAG_FLOAT: \"8.0\",\r\n\t\t\t\tCORNER_ROUNDING: \"25\",\r\n\t\t\t\tCORNER_ROUNDING_NORM: \"0.25\",\r\n\r\n\t\t\t\t// Non-configurable settings:\r\n\t\t\t\tAREATEX_MAX_DISTANCE: \"16.0\",\r\n\t\t\t\tAREATEX_MAX_DISTANCE_DIAG: \"20.0\",\r\n\t\t\t\tAREATEX_PIXEL_SIZE: \"(1.0 / vec2(160.0, 560.0))\",\r\n\t\t\t\tAREATEX_SUBTEX_SIZE: \"(1.0 / 7.0)\",\r\n\t\t\t\tSEARCHTEX_SIZE: \"vec2(66.0, 33.0)\",\r\n\t\t\t\tSEARCHTEX_PACKED_SIZE: \"vec2(64.0, 16.0)\"\r\n\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\t\t\t\tinputBuffer: new Uniform(null),\r\n\t\t\t\tareaTexture: new Uniform(null),\r\n\t\t\t\tsearchTexture: new Uniform(null),\r\n\t\t\t\ttexelSize: new Uniform(texelSize),\r\n\t\t\t\tresolution: new Uniform(resolution)\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$c,\r\n\t\t\tvertexShader: vertexShader$6,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the maximum amount of steps performed in the horizontal/vertical\r\n\t * pattern searches, at each side of the pixel.\r\n\t *\r\n\t * In number of pixels, it's actually the double. So the maximum line length\r\n\t * perfectly handled by, for example 16, is 64 (perfectly means that longer\r\n\t * lines won't look as good, but are still antialiased).\r\n\t *\r\n\t * @param {Number} steps - The search steps. Range: [0, 112].\r\n\t */\r\n\r\n\tsetOrthogonalSearchSteps(steps) {\r\n\r\n\t\tconst s = Math.min(Math.max(steps, 0), 112);\r\n\r\n\t\tthis.defines.MAX_SEARCH_STEPS_INT = s.toFixed(\"0\");\r\n\t\tthis.defines.MAX_SEARCH_STEPS_FLOAT = s.toFixed(\"1\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies the maximum steps performed in the diagonal pattern searches, at\r\n\t * each side of the pixel. This search jumps one pixel at time.\r\n\t *\r\n\t * On high-end machines this search is cheap (between 0.8x and 0.9x slower for\r\n\t * 16 steps), but it can have a significant impact on older machines.\r\n\t *\r\n\t * @param {Number} steps - The search steps. Range: [0, 20].\r\n\t */\r\n\r\n\tsetDiagonalSearchSteps(steps) {\r\n\r\n\t\tconst s = Math.min(Math.max(steps, 0), 20);\r\n\r\n\t\tthis.defines.MAX_SEARCH_STEPS_DIAG_INT = s.toFixed(\"0\");\r\n\t\tthis.defines.MAX_SEARCH_STEPS_DIAG_FLOAT = s.toFixed(\"1\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Specifies how much sharp corners will be rounded.\r\n\t *\r\n\t * @param {Number} rounding - The corner rounding amount. Range: [0, 100].\r\n\t */\r\n\r\n\tsetCornerRounding(rounding) {\r\n\r\n\t\tconst r = Math.min(Math.max(rounding, 0), 100);\r\n\r\n\t\tthis.defines.CORNER_ROUNDING = r.toFixed(\"4\");\r\n\t\tthis.defines.CORNER_ROUNDING_NORM = (r / 100.0).toFixed(\"4\");\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether diagonal pattern detection is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget diagonalDetection() {\r\n\r\n\t\treturn (this.defines.DISABLE_DIAG_DETECTION === undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables diagonal pattern detection.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset diagonalDetection(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tdelete this.defines.DISABLE_DIAG_DETECTION;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.DISABLE_DIAG_DETECTION = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether corner rounding is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget cornerRounding() {\r\n\r\n\t\treturn (this.defines.DISABLE_CORNER_DETECTION === undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables corner rounding.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset cornerRounding(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tdelete this.defines.DISABLE_CORNER_DETECTION;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.DISABLE_CORNER_DETECTION = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$d = \"#include <common>\\n#include <packing>\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#ifndef NORMAL_DEPTH\\nuniform sampler2D normalBuffer;float readDepth(const in vec2 uv){\\n#if DEPTH_PACKING == 3201\\nreturn unpackRGBAToDepth(texture2D(normalDepthBuffer,uv));\\n#else\\nreturn texture2D(normalDepthBuffer,uv).r;\\n#endif\\n}\\n#endif\\nuniform sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float minRadiusScale;uniform float intensity;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){\\n#ifdef PERSPECTIVE_CAMERA\\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\\n#else\\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\\n#endif\\n}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(screenPosition,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){\\n#ifdef DISTANCE_SCALING\\nfloat radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;\\n#else\\nfloat radius=RADIUS;\\n#endif\\nfloat noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float inv_samples=1.0/SAMPLES_FLOAT;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*inv_samples;float angle=alpha*rings+baseAngle;vec2 coord=alpha*radius*vec2(cos(angle),sin(angle))*texelSize+uv;if(coord.s<0.0||coord.s>1.0||coord.t<0.0||coord.t>1.0){continue;}\\n#ifdef NORMAL_DEPTH\\nfloat sampleDepth=texture2D(normalDepthBuffer,coord).a;\\n#else\\nfloat sampleDepth=readDepth(coord);\\n#endif\\nfloat viewZ=getViewZ(sampleDepth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearSampleDepth=sampleDepth;\\n#endif\\nfloat proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coord,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){\\n#ifdef NORMAL_DEPTH\\nvec4 normalDepth=texture2D(normalDepthBuffer,vUv);\\n#else\\nvec4 normalDepth=vec4(texture2D(normalBuffer,vUv).rgb,readDepth(vUv));\\n#endif\\nfloat ao=1.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nif(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao-=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,1.0,d);ao=clamp(pow(ao,abs(intensity)),0.0,1.0);}gl_FragColor.r=ao;}\";\n\nvar vertexShader$7 = \"uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}\";\n\n/**\r\n * A Screen Space Ambient Occlusion (SSAO) shader material.\r\n */\r\n\r\nclass SSAOMaterial extends ShaderMaterial {\r\n\r\n\t/**\r\n\t * Constructs a new SSAO material.\r\n\t *\r\n\t * @param {Camera} camera - A camera.\r\n\t */\r\n\r\n\tconstructor(camera) {\r\n\r\n\t\tsuper({\r\n\r\n\t\t\ttype: \"SSAOMaterial\",\r\n\r\n\t\t\tdefines: {\r\n\t\t\t\tSAMPLES_INT: \"0\",\r\n\t\t\t\tSAMPLES_FLOAT: \"0.0\",\r\n\t\t\t\tSPIRAL_TURNS: \"0.0\",\r\n\t\t\t\tRADIUS: \"1.0\",\r\n\t\t\t\tRADIUS_SQ: \"1.0\",\r\n\t\t\t\tDISTANCE_SCALING: \"1\",\r\n\t\t\t\tDEPTH_PACKING: \"0\"\r\n\t\t\t},\r\n\r\n\t\t\tuniforms: {\r\n\r\n\t\t\t\tnormalBuffer: new Uniform(null),\r\n\t\t\t\tnormalDepthBuffer: new Uniform(null),\r\n\t\t\t\tnoiseTexture: new Uniform(null),\r\n\r\n\t\t\t\tinverseProjectionMatrix: new Uniform(new Matrix4()),\r\n\t\t\t\tprojectionMatrix: new Uniform(new Matrix4()),\r\n\t\t\t\ttexelSize: new Uniform(new Vector2$1()),\r\n\t\t\t\tcameraNear: new Uniform(0.0),\r\n\t\t\t\tcameraFar: new Uniform(0.0),\r\n\r\n\t\t\t\tdistanceCutoff: new Uniform(new Vector2$1()),\r\n\t\t\t\tproximityCutoff: new Uniform(new Vector2$1()),\r\n\t\t\t\tnoiseScale: new Uniform(new Vector2$1()),\r\n\t\t\t\tminRadiusScale: new Uniform(0.33),\r\n\t\t\t\tintensity: new Uniform(1.0),\r\n\t\t\t\tfade: new Uniform(0.01),\r\n\t\t\t\tbias: new Uniform(0.0)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tfragmentShader: fragmentShader$d,\r\n\t\t\tvertexShader: vertexShader$7,\r\n\r\n\t\t\tdepthWrite: false,\r\n\t\t\tdepthTest: false\r\n\r\n\t\t});\r\n\r\n\t\t/** @ignore */\r\n\t\tthis.toneMapped = false;\r\n\r\n\t\tthis.adoptCameraSettings(camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth packing of the source depth buffer.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget depthPacking() {\r\n\r\n\t\treturn Number(this.defines.DEPTH_PACKING);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth packing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset depthPacking(value) {\r\n\r\n\t\tthis.defines.DEPTH_PACKING = value.toFixed(0);\r\n\t\tthis.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texel size.\r\n\t *\r\n\t * @param {Number} x - The texel width.\r\n\t * @param {Number} y - The texel height.\r\n\t */\r\n\r\n\tsetTexelSize(x, y) {\r\n\r\n\t\tthis.uniforms.texelSize.value.set(x, y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adopts the settings of the given camera.\r\n\t *\r\n\t * @param {Camera} [camera=null] - A camera.\r\n\t */\r\n\r\n\tadoptCameraSettings(camera = null) {\r\n\r\n\t\tif(camera !== null) {\r\n\r\n\t\t\tconst uniforms = this.uniforms;\r\n\r\n\t\t\tuniforms.cameraNear.value = camera.near;\r\n\t\t\tuniforms.cameraFar.value = camera.far;\r\n\r\n\t\t\tif(camera instanceof PerspectiveCamera) {\r\n\r\n\t\t\t\tthis.defines.PERSPECTIVE_CAMERA = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete this.defines.PERSPECTIVE_CAMERA;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * An auto sizing constant.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst AUTO_SIZE = -1;\r\n\r\n/**\r\n * A resizer that can be used to store a base and a target resolution.\r\n *\r\n * The attached resizeable will be updated with the base resolution when the\r\n * target resolution changes. The new calculated resolution can then be\r\n * retrieved via {@link Resizer.width} and {@link Resizer.height}.\r\n */\r\n\r\nclass Resizer {\r\n\r\n\t/**\r\n\t * Constructs a new resizer.\r\n\t *\r\n\t * @param {Resizable} resizeable - A resizable object.\r\n\t * @param {Number} [width=Resizer.AUTO_SIZE] - The width.\r\n\t * @param {Number} [height=Resizer.AUTO_SIZE] - The height.\r\n\t * @param {Number} [scale=1.0] - An alternative resolution scale.\r\n\t */\r\n\r\n\tconstructor(resizable, width = AUTO_SIZE, height = AUTO_SIZE, scale = 1.0) {\r\n\r\n\t\t/**\r\n\t\t * A resizable object.\r\n\t\t *\r\n\t\t * @type {Resizable}\r\n\t\t */\r\n\r\n\t\tthis.resizable = resizable;\r\n\r\n\t\t/**\r\n\t\t * The base size.\r\n\t\t *\r\n\t\t * This size will be passed to the resizable object every time the target\r\n\t\t * width, height or scale is changed.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.base = new Vector2$1(1, 1);\r\n\r\n\t\t/**\r\n\t\t * The target size.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.target = new Vector2$1(width, height);\r\n\r\n\t\t/**\r\n\t\t * A scale.\r\n\t\t *\r\n\t\t * If both the width and the height are set to {@link Resizer.AUTO_SIZE},\r\n\t\t * they will be scaled uniformly using this scalar.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.s = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current resolution scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget scale() {\r\n\r\n\t\treturn this.s;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * Also sets the width and height to {@link Resizer.AUTO_SIZE}.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset scale(value) {\r\n\r\n\t\tthis.s = value;\r\n\r\n\t\tthis.target.x = AUTO_SIZE;\r\n\t\tthis.target.y = AUTO_SIZE;\r\n\r\n\t\tthis.resizable.setSize(this.base.x, this.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The calculated width.\r\n\t *\r\n\t * If both the width and the height are set to {@link Resizer.AUTO_SIZE}, the\r\n\t * base width will be returned.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\tconst base = this.base;\r\n\t\tconst target = this.target;\r\n\r\n\t\tlet result;\r\n\r\n\t\tif(target.x !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = target.x;\r\n\r\n\t\t} else if(target.y !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = Math.round(target.y * (base.x / base.y));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = Math.round(base.x * this.s);\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the target width.\r\n\t *\r\n\t * Use {@link Resizer.AUTO_SIZE} to automatically calculate the width based\r\n\t * on the height and the original aspect ratio.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.target.x = value;\r\n\t\tthis.resizable.setSize(this.base.x, this.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The calculated height.\r\n\t *\r\n\t * If both the width and the height are set to {@link Resizer.AUTO_SIZE}, the\r\n\t * base height will be returned.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\tconst base = this.base;\r\n\t\tconst target = this.target;\r\n\r\n\t\tlet result;\r\n\r\n\t\tif(target.y !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = target.y;\r\n\r\n\t\t} else if(target.x !== AUTO_SIZE) {\r\n\r\n\t\t\tresult = Math.round(target.x / (base.x / base.y));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tresult = Math.round(base.y * this.s);\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the target height.\r\n\t *\r\n\t * Use {@link Resizer.AUTO_SIZE} to automatically calculate the height based\r\n\t * on the width and the original aspect ratio.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.target.y = value;\r\n\t\tthis.resizable.setSize(this.base.x, this.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An auto sizing constant.\r\n\t *\r\n\t * Can be used to automatically calculate the width or height based on the\r\n\t * original aspect ratio.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tstatic get AUTO_SIZE() {\r\n\r\n\t\treturn AUTO_SIZE;\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A dummy camera\r\n *\r\n * @type {Camera}\r\n * @private\r\n */\r\n\r\nconst dummyCamera = new Camera();\r\n\r\n/**\r\n * Shared fullscreen geometry.\r\n *\r\n * @type {BufferGeometry}\r\n * @private\r\n */\r\n\r\nlet geometry = null;\r\n\r\n/**\r\n * Returns a shared fullscreen triangle.\r\n *\r\n * The size of the screen is 2x2 units (NDC). A triangle that fills the screen\r\n * needs to be 4 units wide and 4 units tall.\r\n *\r\n * @private\r\n * @return {BufferGeometry} The fullscreen geometry.\r\n */\r\n\r\nfunction getFullscreenTriangle() {\r\n\r\n\tif(geometry === null) {\r\n\r\n\t\tconst vertices = new Float32Array([-1, -1, 0, 3, -1, 0, -1, 3, 0]);\r\n\t\tconst uvs = new Float32Array([0, 0, 2, 0, 0, 2]);\r\n\t\tgeometry = new BufferGeometry();\r\n\r\n\t\t// Added for backward compatibility (setAttribute was added in three r110).\r\n\t\tif(geometry.setAttribute !== undefined) {\r\n\r\n\t\t\tgeometry.setAttribute(\"position\", new BufferAttribute(vertices, 3));\r\n\t\t\tgeometry.setAttribute(\"uv\", new BufferAttribute(uvs, 2));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tgeometry.addAttribute(\"position\", new BufferAttribute(vertices, 3));\r\n\t\t\tgeometry.addAttribute(\"uv\", new BufferAttribute(uvs, 2));\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn geometry;\r\n\r\n}\r\n\r\n/**\r\n * An abstract pass.\r\n *\r\n * Passes that do not rely on the depth buffer should explicitly disable the\r\n * depth test and depth write flags of their fullscreen shader material.\r\n *\r\n * Fullscreen passes use a shared fullscreen triangle:\r\n * https://michaldrobot.com/2014/04/01/gcn-execution-patterns-in-full-screen-passes/\r\n *\r\n * @implements {Initializable}\r\n * @implements {Resizable}\r\n * @implements {Disposable}\r\n */\r\n\r\nclass Pass {\r\n\r\n\t/**\r\n\t * Constructs a new pass.\r\n\t *\r\n\t * @param {String} [name] - The name of this pass. Does not have to be unique.\r\n\t * @param {Scene} [scene] - The scene to render. The default scene contains a single mesh that fills the screen.\r\n\t * @param {Camera} [camera] - A camera. Fullscreen effect passes don't require a camera.\r\n\t */\r\n\r\n\tconstructor(name = \"Pass\", scene = new Scene(), camera = dummyCamera) {\r\n\r\n\t\t/**\r\n\t\t * The name of this pass.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.name = name;\r\n\r\n\t\t/**\r\n\t\t * The scene to render.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @protected\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @protected\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A mesh that fills the screen.\r\n\t\t *\r\n\t\t * @type {Mesh}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screen = null;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this pass should render to texture.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.rtt = true;\r\n\r\n\t\t/**\r\n\t\t * Only relevant for subclassing.\r\n\t\t *\r\n\t\t * Indicates whether the {@link EffectComposer} should swap the frame\r\n\t\t * buffers after this pass has finished rendering.\r\n\t\t *\r\n\t\t * Set this to `false` if this pass doesn't render to the output buffer or\r\n\t\t * the screen. Otherwise, the contents of the input buffer will be lost.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.needsSwap = true;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the {@link EffectComposer} should prepare a depth\r\n\t\t * texture for this pass.\r\n\t\t *\r\n\t\t * Set this to `true` if this pass relies on depth information from a\r\n\t\t * preceding {@link RenderPass}.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.needsDepthTexture = false;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this pass should be executed.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.enabled = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass should render to screen.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget renderToScreen() {\r\n\r\n\t\treturn !this.rtt;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render to screen flag.\r\n\t *\r\n\t * If the flag is changed to a different value, the fullscreen material will\r\n\t * be updated as well.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset renderToScreen(value) {\r\n\r\n\t\tif(this.rtt === value) {\r\n\r\n\t\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\t\tif(material !== null) {\r\n\r\n\t\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.rtt = !value;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current fullscreen material.\r\n\t *\r\n\t * @return {Material} The current fullscreen material, or null if there is none.\r\n\t */\r\n\r\n\tgetFullscreenMaterial() {\r\n\r\n\t\treturn (this.screen !== null) ? this.screen.material : null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the fullscreen material.\r\n\t *\r\n\t * The material will be assigned to a mesh that fills the screen. The mesh\r\n\t * will be created once a material is assigned via this method.\r\n\t *\r\n\t * @protected\r\n\t * @param {Material} material - A fullscreen material.\r\n\t */\r\n\r\n\tsetFullscreenMaterial(material) {\r\n\r\n\t\tlet screen = this.screen;\r\n\r\n\t\tif(screen !== null) {\r\n\r\n\t\t\tscreen.material = material;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tscreen = new Mesh(getFullscreenTriangle(), material);\r\n\t\t\tscreen.frustumCulled = false;\r\n\r\n\t\t\tif(this.scene === null) {\r\n\r\n\t\t\t\tthis.scene = new Scene();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.scene.add(screen);\r\n\t\t\tthis.screen = screen;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current depth texture.\r\n\t *\r\n\t * @return {Texture} The current depth texture, or null if there is none.\r\n\t */\r\n\r\n\tgetDepthTexture() {\r\n\r\n\t\treturn null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * This method will be called automatically by the {@link EffectComposer}.\r\n\t *\r\n\t * You may override this method if your pass relies on the depth information\r\n\t * of a preceding {@link RenderPass}.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * This is an abstract method that must be overridden.\r\n\t *\r\n\t * @abstract\r\n\t * @throws {Error} An error is thrown if the method is not overridden.\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tthrow new Error(\"Render method not implemented!\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this pass with the renderer's size.\r\n\t *\r\n\t * You may override this method in case you want to be informed about the size\r\n\t * of the main frame buffer.\r\n\t *\r\n\t * The {@link EffectComposer} calls this method before this pass is\r\n\t * initialized and every time its own size is updated.\r\n\t *\r\n\t * @param {Number} width - The renderer's width.\r\n\t * @param {Number} height - The renderer's height.\r\n\t * @example this.myRenderTarget.setSize(width, height);\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * By overriding this method you gain access to the renderer. You'll also be\r\n\t * able to configure your custom render targets to use the appropriate format\r\n\t * (RGB or RGBA).\r\n\t *\r\n\t * The provided renderer can be used to warm up special off-screen render\r\n\t * targets by performing a preliminary render operation.\r\n\t *\r\n\t * The {@link EffectComposer} calls this method when this pass is added to its\r\n\t * queue, but not before its size has been set.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t * @example if(!alpha && frameBufferType === UnsignedByteType) { this.myRenderTarget.texture.format = RGBFormat; }\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {}\r\n\r\n\t/**\r\n\t * Performs a shallow search for disposable properties and deletes them. The\r\n\t * pass will be inoperative after this method was called!\r\n\t *\r\n\t * Disposable objects:\r\n\t *  - WebGLRenderTarget\r\n\t *  - Material\r\n\t *  - Texture\r\n\t *\r\n\t * The {@link EffectComposer} calls this method when it is being destroyed.\r\n\t * You may, however, use it independently to free memory when you are certain\r\n\t * that you don't need this pass anymore.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\tif(material !== null) {\r\n\r\n\t\t\tmaterial.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tfor(const key of Object.keys(this)) {\r\n\r\n\t\t\tif(this[key] !== null && typeof this[key].dispose === \"function\") {\r\n\r\n\t\t\t\t/** @ignore */\r\n\t\t\t\tthis[key].dispose();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * An efficient, incremental blur pass.\r\n */\r\n\r\nclass BlurPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new blur pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Adjust the height or width instead for consistent results.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The blur render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The blur render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.LARGE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"BlurPass\");\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetA.texture.name = \"Blur.Target.A\";\r\n\r\n\t\t/**\r\n\t\t * A second render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetB = this.renderTargetA.clone();\r\n\t\tthis.renderTargetB.texture.name = \"Blur.Target.B\";\r\n\r\n\t\t/**\r\n\t\t * The render resolution.\r\n\t\t *\r\n\t\t * It's recommended to set the height or the width to an absolute value for\r\n\t\t * consistent results across different devices and resolutions.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t\t/**\r\n\t\t * A convolution shader material.\r\n\t\t *\r\n\t\t * @type {ConvolutionMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.convolutionMaterial = new ConvolutionMaterial();\r\n\r\n\t\t/**\r\n\t\t * A convolution shader material that uses dithering.\r\n\t\t *\r\n\t\t * @type {ConvolutionMaterial}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.ditheredConvolutionMaterial = new ConvolutionMaterial();\r\n\t\tthis.ditheredConvolutionMaterial.dithering = true;\r\n\r\n\t\t/**\r\n\t\t * Whether the blurred result should also be dithered using noise.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t\t */\r\n\r\n\t\tthis.dithering = false;\r\n\r\n\t\tthis.kernelSize = kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current blur scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget scale() {\r\n\r\n\t\treturn this.convolutionMaterial.uniforms.scale.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the blur scale.\r\n\t *\r\n\t * This value influences the overall blur strength and should not be greater\r\n\t * than 1. For larger blurs please increase the {@link kernelSize}!\r\n\t *\r\n\t * Note that the blur strength is closely tied to the resolution. For a smooth\r\n\t * transition from no blur to full blur, set the width or the height to a high\r\n\t * enough value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset scale(value) {\r\n\r\n\t\tthis.convolutionMaterial.uniforms.scale.value = value;\r\n\t\tthis.ditheredConvolutionMaterial.uniforms.scale.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.convolutionMaterial.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the kernel size.\r\n\t *\r\n\t * Larger kernels require more processing power but scale well with larger\r\n\t * render resolutions.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.convolutionMaterial.kernelSize = value;\r\n\t\tthis.ditheredConvolutionMaterial.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Blurs the input buffer and writes the result to the output buffer. The\r\n\t * input buffer remains intact, unless it's also the output buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\r\n\t\tconst renderTargetA = this.renderTargetA;\r\n\t\tconst renderTargetB = this.renderTargetB;\r\n\r\n\t\tlet material = this.convolutionMaterial;\r\n\t\tlet uniforms = material.uniforms;\r\n\t\tconst kernel = material.getKernel();\r\n\r\n\t\tlet lastRT = inputBuffer;\r\n\t\tlet destRT;\r\n\t\tlet i, l;\r\n\r\n\t\tthis.setFullscreenMaterial(material);\r\n\r\n\t\t// Apply the multi-pass blur.\r\n\t\tfor(i = 0, l = kernel.length - 1; i < l; ++i) {\r\n\r\n\t\t\t// Alternate between targets.\r\n\t\t\tdestRT = ((i & 1) === 0) ? renderTargetA : renderTargetB;\r\n\r\n\t\t\tuniforms.kernel.value = kernel[i];\r\n\t\t\tuniforms.inputBuffer.value = lastRT.texture;\r\n\t\t\trenderer.setRenderTarget(destRT);\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t\tlastRT = destRT;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.dithering) {\r\n\r\n\t\t\tmaterial = this.ditheredConvolutionMaterial;\r\n\t\t\tuniforms = material.uniforms;\r\n\t\t\tthis.setFullscreenMaterial(material);\r\n\r\n\t\t}\r\n\r\n\t\tuniforms.kernel.value = kernel[i];\r\n\t\tuniforms.inputBuffer.value = lastRT.texture;\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\r\n\t\trenderer.render(scene, camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tconst w = resolution.width;\r\n\t\tconst h = resolution.height;\r\n\r\n\t\tthis.renderTargetA.setSize(w, h);\r\n\t\tthis.renderTargetB.setSize(w, h);\r\n\r\n\t\tthis.convolutionMaterial.setTexelSize(1.0 / w, 1.0 / h);\r\n\t\tthis.ditheredConvolutionMaterial.setTexelSize(1.0 / w, 1.0 / h);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetA.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetB.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An auto sizing flag.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use {@link Resizer.AUTO_SIZE} instead.\r\n\t */\r\n\r\n\tstatic get AUTO_SIZE() {\r\n\r\n\t\treturn Resizer.AUTO_SIZE;\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A pass that disables the stencil test.\r\n */\r\n\r\nclass ClearMaskPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new clear mask pass.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tsuper(\"ClearMaskPass\", null, null);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Disables the global stencil test.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst stencil = renderer.state.buffers.stencil;\r\n\r\n\t\tstencil.setLocked(false);\r\n\t\tstencil.setTest(false);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * Stores the original clear color of the renderer.\r\n *\r\n * @type {Color}\r\n * @private\r\n */\r\n\r\nconst color = new Color();\r\n\r\n/**\r\n * A pass that clears the input buffer or the screen.\r\n */\r\n\r\nclass ClearPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new clear pass.\r\n\t *\r\n\t * @param {Boolean} [color=true] - Determines whether the color buffer should be cleared.\r\n\t * @param {Boolean} [depth=true] - Determines whether the depth buffer should be cleared.\r\n\t * @param {Boolean} [stencil=false] - Determines whether the stencil buffer should be cleared.\r\n\t */\r\n\r\n\tconstructor(color = true, depth = true, stencil = false) {\r\n\r\n\t\tsuper(\"ClearPass\", null, null);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the color buffer should be cleared.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.color = color;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the depth buffer should be cleared.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.depth = depth;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the stencil buffer should be cleared.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.stencil = stencil;\r\n\r\n\t\t/**\r\n\t\t * An override clear color.\r\n\t\t *\r\n\t\t * The default value is null.\r\n\t\t *\r\n\t\t * @type {Color}\r\n\t\t */\r\n\r\n\t\tthis.overrideClearColor = null;\r\n\r\n\t\t/**\r\n\t\t * An override clear alpha.\r\n\t\t *\r\n\t\t * The default value is -1.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.overrideClearAlpha = -1.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the input buffer or the screen.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst overrideClearColor = this.overrideClearColor;\r\n\t\tconst overrideClearAlpha = this.overrideClearAlpha;\r\n\t\tconst clearAlpha = renderer.getClearAlpha();\r\n\r\n\t\tconst hasOverrideClearColor = (overrideClearColor !== null);\r\n\t\tconst hasOverrideClearAlpha = (overrideClearAlpha >= 0.0);\r\n\r\n\t\tif(hasOverrideClearColor) {\r\n\r\n\t\t\tcolor.copy(renderer.getClearColor());\r\n\t\t\trenderer.setClearColor(overrideClearColor, hasOverrideClearAlpha ?\r\n\t\t\t\toverrideClearAlpha : clearAlpha);\r\n\r\n\t\t} else if(hasOverrideClearAlpha) {\r\n\r\n\t\t\trenderer.setClearAlpha(overrideClearAlpha);\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : inputBuffer);\r\n\t\trenderer.clear(this.color, this.depth, this.stencil);\r\n\r\n\t\tif(hasOverrideClearColor) {\r\n\r\n\t\t\trenderer.setClearColor(color, clearAlpha);\r\n\r\n\t\t} else if(hasOverrideClearAlpha) {\r\n\r\n\t\t\trenderer.setClearAlpha(clearAlpha);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A flag that indicates whether the override material workaround is enabled.\r\n *\r\n * @type {Boolean}\r\n * @private\r\n */\r\n\r\nlet workaroundEnabled = false;\r\n\r\n/**\r\n * An override material manager.\r\n *\r\n * Includes a workaround that fixes override materials for skinned meshes and\r\n * instancing. Doesn't fix uniforms such as normal maps and displacement maps.\r\n * Using the workaround may have a negative impact on performance if the scene\r\n * contains a lot of meshes.\r\n *\r\n * @implements {Disposable}\r\n */\r\n\r\nclass OverrideMaterialManager {\r\n\r\n\t/**\r\n\t * Constructs a new override material manager.\r\n\t *\r\n\t * @param {Material} [material=null] - An override material.\r\n\t */\r\n\r\n\tconstructor(material = null) {\r\n\r\n\t\t/**\r\n\t\t * Keeps track of original materials.\r\n\t\t *\r\n\t\t * @type {Map<Object3D, Material>}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.originalMaterials = new Map();\r\n\r\n\t\t/**\r\n\t\t * The override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.material = null;\r\n\r\n\t\t/**\r\n\t\t * A clone of the override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.materialInstanced = null;\r\n\r\n\t\t/**\r\n\t\t * A clone of the override material.\r\n\t\t *\r\n\t\t * @type {Material}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.materialSkinning = null;\r\n\r\n\t\tthis.setMaterial(material);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the override material.\r\n\t *\r\n\t * @param {Material} material - The material.\r\n\t */\r\n\r\n\tsetMaterial(material) {\r\n\r\n\t\tthis.disposeMaterials();\r\n\r\n\t\tif(material !== null) {\r\n\r\n\t\t\tthis.material = material;\r\n\r\n\t\t\tthis.materialInstanced = material.clone();\r\n\t\t\tthis.materialInstanced.uniforms = Object.assign({}, material.uniforms);\r\n\r\n\t\t\tthis.materialSkinning = material.clone();\r\n\t\t\tthis.materialSkinning.uniforms = Object.assign({}, material.uniforms);\r\n\t\t\tthis.materialSkinning.skinning = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene with the override material.\r\n\t *\r\n\t * @private\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Scene} scene - A scene.\r\n\t * @param {Camera} camera - A camera.\r\n\t */\r\n\r\n\trender(renderer, scene, camera) {\r\n\r\n\t\tconst material = this.material;\r\n\t\tconst materialSkinning = this.materialSkinning;\r\n\t\tconst materialInstanced = this.materialInstanced;\r\n\t\tconst originalMaterials = this.originalMaterials;\r\n\r\n\t\tconst shadowMapEnabled = renderer.shadowMap.enabled;\r\n\t\tconst sortObjects = renderer.sortObjects;\r\n\r\n\t\t// Ignore shadows and transparency.\r\n\t\trenderer.shadowMap.enabled = false;\r\n\t\trenderer.sortObjects = false;\r\n\r\n\t\tif(workaroundEnabled) {\r\n\r\n\t\t\tlet meshCount = 0;\r\n\r\n\t\t\t// Replace materials of all meshes with the correct override materials.\r\n\t\t\tscene.traverse((node) => {\r\n\r\n\t\t\t\tif(node.isMesh) {\r\n\r\n\t\t\t\t\toriginalMaterials.set(node, node.material);\r\n\r\n\t\t\t\t\tif(node.isInstancedMesh) {\r\n\r\n\t\t\t\t\t\tnode.material = materialInstanced;\r\n\r\n\t\t\t\t\t} else if(node.isSkinnedMesh) {\r\n\r\n\t\t\t\t\t\tnode.material = materialSkinning;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tnode.material = material;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t++meshCount;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t});\r\n\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t\tfor(const entry of originalMaterials) {\r\n\r\n\t\t\t\tentry[0].material = entry[1];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(meshCount !== originalMaterials.size) {\r\n\r\n\t\t\t\toriginalMaterials.clear();\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconst overrideMaterial = scene.overrideMaterial;\r\n\t\t\tscene.overrideMaterial = material;\r\n\t\t\trenderer.render(scene, camera);\r\n\t\t\tscene.overrideMaterial = overrideMaterial;\r\n\r\n\t\t}\r\n\r\n\t\trenderer.shadowMap.enabled = shadowMapEnabled;\r\n\t\trenderer.sortObjects = sortObjects;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes cloned override materials.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tdisposeMaterials() {\r\n\r\n\t\tif(this.materialInstanced !== null) {\r\n\r\n\t\t\tthis.materialInstanced.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tif(this.materialSkinning !== null) {\r\n\r\n\t\t\tthis.materialSkinning.dispose();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs cleanup tasks.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tthis.originalMaterials.clear();\r\n\t\tthis.disposeMaterials();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the override material workaround is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tstatic get workaroundEnabled() {\r\n\r\n\t\treturn workaroundEnabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables the override material workaround globally.\r\n\t *\r\n\t * This only affects post processing passes and effects.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tstatic set workaroundEnabled(value) {\r\n\r\n\t\tworkaroundEnabled = value;\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A pass that renders a given scene into the input buffer or to screen.\r\n *\r\n * This pass uses a {@link ClearPass} to clear the target buffer.\r\n */\r\n\r\nclass RenderPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new render pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Material} [overrideMaterial=null] - An override material.\r\n\t */\r\n\r\n\tconstructor(scene, camera, overrideMaterial = null) {\r\n\r\n\t\tsuper(\"RenderPass\", scene, camera);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass();\r\n\r\n\t\t/**\r\n\t\t * A depth texture.\r\n\t\t *\r\n\t\t * @type {DepthTexture}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthTexture = null;\r\n\r\n\t\t/**\r\n\t\t * An override material manager.\r\n\t\t *\r\n\t\t * @type {OverrideMaterialManager}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.overrideMaterialManager = (overrideMaterial === null) ? null :\r\n\t\t\tnew OverrideMaterialManager(overrideMaterial);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass should render to screen.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget renderToScreen() {\r\n\r\n\t\treturn super.renderToScreen;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render to screen flag.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset renderToScreen(value) {\r\n\r\n\t\tsuper.renderToScreen = value;\r\n\t\tthis.clearPass.renderToScreen = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current override material.\r\n\t *\r\n\t * @type {Material}\r\n\t */\r\n\r\n\tget overrideMaterial() {\r\n\r\n\t\tconst manager = this.overrideMaterialManager;\r\n\r\n\t\treturn (manager !== null) ? manager.material : null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the override material.\r\n\t *\r\n\t * @type {Material}\r\n\t */\r\n\r\n\tset overrideMaterial(value) {\r\n\r\n\t\tconst manager = this.overrideMaterialManager;\r\n\r\n\t\tif(value !== null && manager !== null) {\r\n\r\n\t\t\tmanager.setMaterial(value);\r\n\r\n\t\t} else if(value === null) {\r\n\r\n\t\t\tmanager.dispose();\r\n\t\t\tthis.overrideMaterialManager = null;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.overrideMaterialManager = new OverrideMaterialManager(value);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the target buffer should be cleared before rendering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget clear() {\r\n\r\n\t\treturn this.clearPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables auto clear.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset clear(value) {\r\n\r\n\t\tthis.clearPass.enabled = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the clear pass.\r\n\t *\r\n\t * @return {ClearPass} The clear pass.\r\n\t */\r\n\r\n\tgetClearPass() {\r\n\r\n\t\treturn this.clearPass;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current depth texture.\r\n\t *\r\n\t * @return {Texture} The current depth texture, or null if there is none.\r\n\t */\r\n\r\n\tgetDepthTexture() {\r\n\r\n\t\treturn this.depthTexture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * The provided texture will be attached to the input buffer unless this pass\r\n\t * renders to screen.\r\n\t *\r\n\t * @param {DepthTexture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tthis.depthTexture = depthTexture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst renderTarget = this.renderToScreen ? null : inputBuffer;\r\n\r\n\t\tif(this.depthTexture !== null && !this.renderToScreen) {\r\n\r\n\t\t\tinputBuffer.depthTexture = this.depthTexture;\r\n\t\t\toutputBuffer.depthTexture = null;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.clear) {\r\n\r\n\t\t\tthis.clearPass.render(renderer, inputBuffer);\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(renderTarget);\r\n\r\n\t\tif(this.overrideMaterialManager !== null) {\r\n\r\n\t\t\tthis.overrideMaterialManager.render(renderer, scene, camera);\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A pass that renders the depth of a given scene into a color buffer.\r\n */\r\n\r\nclass DepthPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new depth pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=1.0] - Deprecated. Adjust the height or width instead for consistent results.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\r\n\t */\r\n\r\n\tconstructor(scene, camera, {\r\n\t\tresolutionScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\trenderTarget\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"DepthPass\");\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPass = new RenderPass(scene, camera, new MeshDepthMaterial({\r\n\t\t\tdepthPacking: RGBADepthPacking,\r\n\t\t\tmorphTargets: true,\r\n\t\t\tskinning: true\r\n\t\t}));\r\n\r\n\t\tconst clearPass = this.renderPass.getClearPass();\r\n\t\tclearPass.overrideClearColor = new Color(0xffffff);\r\n\t\tclearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A render target that contains the scene depth.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = renderTarget;\r\n\r\n\t\tif(this.renderTarget === undefined) {\r\n\r\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\t\tminFilter: NearestFilter,\r\n\t\t\t\tmagFilter: NearestFilter,\r\n\t\t\t\tstencilBuffer: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.renderTarget.texture.name = \"DepthPass.Target\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The desired render resolution.\r\n\t\t *\r\n\t\t * Use {@link Resizer.AUTO_SIZE} for the width or height to automatically\r\n\t\t * calculate it based on its counterpart and the original aspect ratio.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The depth texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolutionScale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolutionScale = scale;\r\n\t\tthis.setSize(this.resolution.base.x, this.resolution.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene depth.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst renderTarget = this.renderToScreen ? null : this.renderTarget;\r\n\t\tthis.renderPass.render(renderer, renderTarget);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A pass that downsamples the scene depth by picking the most representative\r\n * depth in 2x2 texel neighborhoods. If a normal buffer is provided, the\r\n * corresponding normals will be stored as well.\r\n *\r\n * Attention: This pass requires WebGL 2.\r\n */\r\n\r\nclass DepthDownsamplingPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new depth downsampling pass.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Texture} [options.normalBuffer=null] - A texture that contains view space normals. See {@link NormalPass}.\r\n\t * @param {Number} [options.resolutionScale=0.5] - The resolution scale.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tnormalBuffer = null,\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"DepthDownsamplingPass\");\r\n\r\n\t\tthis.setFullscreenMaterial(new DepthDownsamplingMaterial());\r\n\t\tthis.needsDepthTexture = true;\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\tif(normalBuffer !== null) {\r\n\r\n\t\t\tconst material = this.getFullscreenMaterial();\r\n\t\t\tmaterial.uniforms.normalBuffer.value = normalBuffer;\r\n\t\t\tmaterial.defines.DOWNSAMPLE_NORMALS = \"1\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * A render target that contains the downsampled normals and depth.\r\n\t\t *\r\n\t\t * Normals are stored as RGB and depth is stored as alpha.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: NearestFilter,\r\n\t\t\tmagFilter: NearestFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\ttype: FloatType\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"DepthDownsamplingPass.Target\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * The resolution of this effect.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height);\r\n\t\tthis.resolution.scale = resolutionScale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The normal(RGB) + depth(A) texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Downsamples depth and scene normals.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\r\n\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\t// Use the full resolution to calculate the depth/normal buffer texel size.\r\n\t\tthis.getFullscreenMaterial().setTexelSize(1.0 / width, 1.0 / height);\r\n\r\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(!renderer.capabilities.isWebGL2) {\r\n\r\n\t\t\trenderer.getContext().getExtension(\"OES_texture_float\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A blend function enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} SKIP - No blending. The effect will not be included in the final shader.\r\n * @property {Number} ADD - Additive blending. Fast, but may produce washed out results.\r\n * @property {Number} ALPHA - Alpha blending. Blends based on the alpha value of the new color.\r\n * @property {Number} AVERAGE - Average blending.\r\n * @property {Number} COLOR_BURN - Color burn.\r\n * @property {Number} COLOR_DODGE - Color dodge.\r\n * @property {Number} DARKEN - Prioritize darker colors.\r\n * @property {Number} DIFFERENCE - Color difference.\r\n * @property {Number} EXCLUSION - Color exclusion.\r\n * @property {Number} LIGHTEN - Prioritize lighter colors.\r\n * @property {Number} MULTIPLY - Color multiplication.\r\n * @property {Number} DIVIDE - Color division.\r\n * @property {Number} NEGATION - Color negation.\r\n * @property {Number} NORMAL - Normal blending. The new color overwrites the old one.\r\n * @property {Number} OVERLAY - Color overlay.\r\n * @property {Number} REFLECT - Color reflection.\r\n * @property {Number} SCREEN - Screen blending. The two colors are effectively projected on a white screen simultaneously.\r\n * @property {Number} SOFT_LIGHT - Soft light blending.\r\n * @property {Number} SUBTRACT - Color subtraction.\r\n */\r\n\r\nconst BlendFunction = {\r\n\r\n\tSKIP: 0,\r\n\tADD: 1,\r\n\tALPHA: 2,\r\n\tAVERAGE: 3,\r\n\tCOLOR_BURN: 4,\r\n\tCOLOR_DODGE: 5,\r\n\tDARKEN: 6,\r\n\tDIFFERENCE: 7,\r\n\tEXCLUSION: 8,\r\n\tLIGHTEN: 9,\r\n\tMULTIPLY: 10,\r\n\tDIVIDE: 11,\r\n\tNEGATION: 12,\r\n\tNORMAL: 13,\r\n\tOVERLAY: 14,\r\n\tREFLECT: 15,\r\n\tSCREEN: 16,\r\n\tSOFT_LIGHT: 17,\r\n\tSUBTRACT: 18\r\n\r\n};\n\nvar addBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}\";\n\nvar alphaBlendFunction = \"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}\";\n\nvar averageBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}\";\n\nvar colorBurnBlendFunction = \"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\n\nvar colorDodgeBlendFunction = \"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\n\nvar darkenBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}\";\n\nvar differenceBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}\";\n\nvar exclusionBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}\";\n\nvar lightenBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}\";\n\nvar multiplyBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}\";\n\nvar divideBlendFunction = \"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\n\nvar negationBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}\";\n\nvar normalBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}\";\n\nvar overlayBlendFunction = \"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\n\nvar reflectBlendFunction = \"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\n\nvar screenBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}\";\n\nvar softLightBlendFunction = \"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}\";\n\nvar subtractBlendFunction = \"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}\";\n\n/**\r\n * A blend function shader code catalogue.\r\n *\r\n * @type {Map<BlendFunction, String>}\r\n * @private\r\n */\r\n\r\nconst blendFunctions = new Map([\r\n\t[BlendFunction.SKIP, null],\r\n\t[BlendFunction.ADD, addBlendFunction],\r\n\t[BlendFunction.ALPHA, alphaBlendFunction],\r\n\t[BlendFunction.AVERAGE, averageBlendFunction],\r\n\t[BlendFunction.COLOR_BURN, colorBurnBlendFunction],\r\n\t[BlendFunction.COLOR_DODGE, colorDodgeBlendFunction],\r\n\t[BlendFunction.DARKEN, darkenBlendFunction],\r\n\t[BlendFunction.DIFFERENCE, differenceBlendFunction],\r\n\t[BlendFunction.EXCLUSION, exclusionBlendFunction],\r\n\t[BlendFunction.LIGHTEN, lightenBlendFunction],\r\n\t[BlendFunction.MULTIPLY, multiplyBlendFunction],\r\n\t[BlendFunction.DIVIDE, divideBlendFunction],\r\n\t[BlendFunction.NEGATION, negationBlendFunction],\r\n\t[BlendFunction.NORMAL, normalBlendFunction],\r\n\t[BlendFunction.OVERLAY, overlayBlendFunction],\r\n\t[BlendFunction.REFLECT, reflectBlendFunction],\r\n\t[BlendFunction.SCREEN, screenBlendFunction],\r\n\t[BlendFunction.SOFT_LIGHT, softLightBlendFunction],\r\n\t[BlendFunction.SUBTRACT, subtractBlendFunction]\r\n]);\r\n\r\n/**\r\n * A blend mode.\r\n */\r\n\r\nclass BlendMode {\r\n\r\n\t/**\r\n\t * Constructs a new blend mode.\r\n\t *\r\n\t * @param {BlendFunction} blendFunction - The blend function to use.\r\n\t * @param {Number} opacity - The opacity of the color that will be blended with the base color.\r\n\t */\r\n\r\n\tconstructor(blendFunction, opacity = 1.0) {\r\n\r\n\t\t/**\r\n\t\t * The blend function.\r\n\t\t *\r\n\t\t * @type {BlendFunction}\r\n\t\t */\r\n\r\n\t\tthis.blendFunction = blendFunction;\r\n\r\n\t\t/**\r\n\t\t * The opacity of the color that will be blended with the base color.\r\n\t\t *\r\n\t\t * @type {Uniform}\r\n\t\t */\r\n\r\n\t\tthis.opacity = new Uniform(opacity);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the blend function shader code.\r\n\t *\r\n\t * @return {String} The blend function shader code.\r\n\t */\r\n\r\n\tgetShaderCode() {\r\n\r\n\t\treturn blendFunctions.get(this.blendFunction);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * An abstract effect.\r\n *\r\n * Effects can be combined using the {@link EffectPass}.\r\n *\r\n * @implements {Initializable}\r\n * @implements {Resizable}\r\n * @implements {Disposable}\r\n */\r\n\r\nclass Effect {\r\n\r\n\t/**\r\n\t * Constructs a new effect.\r\n\t *\r\n\t * @param {String} name - The name of this effect. Doesn't have to be unique.\r\n\t * @param {String} fragmentShader - The fragment shader. This shader is required.\r\n\t * @param {Object} [options] - Additional options.\r\n\t * @param {EffectAttribute} [options.attributes=EffectAttribute.NONE] - The effect attributes that determine the execution priority and resource requirements.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Map<String, String>} [options.defines] - Custom preprocessor macro definitions. Keys are names and values are code.\r\n\t * @param {Map<String, Uniform>} [options.uniforms] - Custom shader uniforms. Keys are names and values are uniforms.\r\n\t * @param {Set<WebGLExtension>} [options.extensions] - WebGL extensions.\r\n\t * @param {String} [options.vertexShader=null] - The vertex shader. Most effects don't need one.\r\n\t */\r\n\r\n\tconstructor(name, fragmentShader, {\r\n\t\tattributes = EffectAttribute.NONE,\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tdefines = new Map(),\r\n\t\tuniforms = new Map(),\r\n\t\textensions = null,\r\n\t\tvertexShader = null\r\n\t} = {}) {\r\n\r\n\t\t/**\r\n\t\t * The name of this effect.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.name = name;\r\n\r\n\t\t/**\r\n\t\t * The effect attributes.\r\n\t\t *\r\n\t\t * Effects that have the same attributes will be executed in the order in\r\n\t\t * which they were registered. Some attributes imply a higher priority.\r\n\t\t *\r\n\t\t * @type {EffectAttribute}\r\n\t\t */\r\n\r\n\t\tthis.attributes = attributes;\r\n\r\n\t\t/**\r\n\t\t * The fragment shader.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.fragmentShader = fragmentShader;\r\n\r\n\t\t/**\r\n\t\t * The vertex shader.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t */\r\n\r\n\t\tthis.vertexShader = vertexShader;\r\n\r\n\t\t/**\r\n\t\t * Preprocessor macro definitions.\r\n\t\t *\r\n\t\t * You'll need to call {@link EffectPass#recompile} after changing a macro.\r\n\t\t *\r\n\t\t * @type {Map<String, String>}\r\n\t\t */\r\n\r\n\t\tthis.defines = defines;\r\n\r\n\t\t/**\r\n\t\t * Shader uniforms.\r\n\t\t *\r\n\t\t * You may freely modify the values of these uniforms at runtime. However,\r\n\t\t * uniforms must not be removed or added after the effect was created.\r\n\t\t *\r\n\t\t * @type {Map<String, Uniform>}\r\n\t\t */\r\n\r\n\t\tthis.uniforms = uniforms;\r\n\r\n\t\t/**\r\n\t\t * WebGL extensions that are required by this effect.\r\n\t\t *\r\n\t\t * You'll need to call {@link EffectPass#recompile} after adding or removing\r\n\t\t * an extension.\r\n\t\t *\r\n\t\t * @type {Set<WebGLExtension>}\r\n\t\t */\r\n\r\n\t\tthis.extensions = extensions;\r\n\r\n\t\t/**\r\n\t\t * The blend mode of this effect.\r\n\t\t *\r\n\t\t * The result of this effect will be blended with the result of the previous\r\n\t\t * effect using this blend mode.\r\n\t\t *\r\n\t\t * Feel free to adjust the opacity of the blend mode at runtime. However,\r\n\t\t * you'll need to call {@link EffectPass#recompile} if you change the blend\r\n\t\t * function.\r\n\t\t *\r\n\t\t * @type {BlendMode}\r\n\t\t */\r\n\r\n\t\tthis.blendMode = new BlendMode(blendFunction);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * You may override this method if your effect requires direct access to the\r\n\t * depth texture that is bound to the associated {@link EffectPass}.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {}\r\n\r\n\t/**\r\n\t * Updates the effect by performing supporting operations.\r\n\t *\r\n\t * This method is called by the {@link EffectPass} right before the main\r\n\t * fullscreen render operation, even if the blend function is set to `SKIP`.\r\n\t *\r\n\t * You may override this method if you need to render additional off-screen\r\n\t * textures or update custom uniforms.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {}\r\n\r\n\t/**\r\n\t * Updates the size of this effect.\r\n\t *\r\n\t * You may override this method in case you want to be informed about the main\r\n\t * render size.\r\n\t *\r\n\t * The {@link EffectPass} calls this method before this effect is initialized\r\n\t * and every time its own size is updated.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t * @example this.myRenderTarget.setSize(width, height);\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * By overriding this method you gain access to the renderer. You'll also be\r\n\t * able to configure your custom render targets to use the appropriate format\r\n\t * (RGB or RGBA).\r\n\t *\r\n\t * The provided renderer can be used to warm up special off-screen render\r\n\t * targets by performing a preliminary render operation.\r\n\t *\r\n\t * The {@link EffectPass} calls this method during its own initialization\r\n\t * which happens after the size has been set.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t * @example if(!alpha && frameBufferType === UnsignedByteType) { this.myRenderTarget.texture.format = RGBFormat; }\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {}\r\n\r\n\t/**\r\n\t * Performs a shallow search for properties that define a dispose method and\r\n\t * deletes them. The effect will be inoperative after this method was called!\r\n\t *\r\n\t * Disposable objects:\r\n\t *  - render targets\r\n\t *  - materials\r\n\t *  - textures\r\n\t *\r\n\t * The {@link EffectPass} calls this method when it is being destroyed. Do not\r\n\t * call this method directly.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tfor(const key of Object.keys(this)) {\r\n\r\n\t\t\tif(this[key] !== null && typeof this[key].dispose === \"function\") {\r\n\r\n\t\t\t\t/** @ignore */\r\n\t\t\t\tthis[key].dispose();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of effect attributes.\r\n *\r\n * Attributes can be concatenated using the bitwise OR operator.\r\n *\r\n * @type {Object}\r\n * @property {Number} CONVOLUTION - Describes effects that fetch additional samples from the input buffer. There cannot be more than one effect with this attribute per {@link EffectPass}.\r\n * @property {Number} DEPTH - Describes effects that require a depth texture.\r\n * @property {Number} NONE - No attributes. Most effects don't need to specify any attributes.\r\n * @example const attributes = EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH;\r\n */\r\n\r\nconst EffectAttribute = {\r\n\r\n\tCONVOLUTION: 2,\r\n\tDEPTH: 1,\r\n\tNONE: 0\r\n\r\n};\r\n\r\n/**\r\n * An enumeration of WebGL extensions.\r\n *\r\n * @type {Object}\r\n * @property {String} DERIVATIVES - Enables derivatives by adding the functions dFdx, dFdy and fwidth.\r\n * @property {String} FRAG_DEPTH - Enables gl_FragDepthEXT to set a depth value of a fragment from within the fragment shader.\r\n * @property {String} DRAW_BUFFERS - Enables multiple render targets (MRT) support.\r\n * @property {String} SHADER_TEXTURE_LOD - Enables explicit control of texture LOD.\r\n */\r\n\r\nconst WebGLExtension = {\r\n\r\n\tDERIVATIVES: \"derivatives\",\r\n\tFRAG_DEPTH: \"fragDepth\",\r\n\tDRAW_BUFFERS: \"drawBuffers\",\r\n\tSHADER_TEXTURE_LOD: \"shaderTextureLOD\"\r\n\r\n};\n\n/**\r\n * Finds and collects substrings that match the given regular expression.\r\n *\r\n * @private\r\n * @param {RegExp} regExp - A regular expression.\r\n * @param {String} string - A string.\r\n * @return {String[]} The matching substrings.\r\n */\r\n\r\nfunction findSubstrings(regExp, string) {\r\n\r\n\tconst substrings = [];\r\n\tlet result;\r\n\r\n\twhile((result = regExp.exec(string)) !== null) {\r\n\r\n\t\tsubstrings.push(result[1]);\r\n\r\n\t}\r\n\r\n\treturn substrings;\r\n\r\n}\r\n\r\n/**\r\n * Prefixes substrings within the given strings.\r\n *\r\n * @private\r\n * @param {String} prefix - A prefix.\r\n * @param {String[]} substrings - The substrings.\r\n * @param {Map<String, String>} strings - A collection of named strings.\r\n */\r\n\r\nfunction prefixSubstrings(prefix, substrings, strings) {\r\n\r\n\tlet prefixed, regExp;\r\n\r\n\tfor(const substring of substrings) {\r\n\r\n\t\tprefixed = \"$1\" + prefix + substring.charAt(0).toUpperCase() + substring.slice(1);\r\n\t\tregExp = new RegExp(\"([^\\\\.])(\\\\b\" + substring + \"\\\\b)\", \"g\");\r\n\r\n\t\tfor(const entry of strings.entries()) {\r\n\r\n\t\t\tif(entry[1] !== null) {\r\n\r\n\t\t\t\tstrings.set(entry[0], entry[1].replace(regExp, prefixed));\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Integrates the given effect.\r\n *\r\n * @private\r\n * @param {String} prefix - A prefix.\r\n * @param {Effect} effect - An effect.\r\n * @param {Map<String, String>} shaderParts - The shader parts.\r\n * @param {Map<BlendFunction, BlendMode>} blendModes - The blend modes.\r\n * @param {Map<String, String>} defines - The macro definitions.\r\n * @param {Map<String, Uniform>} uniforms - The uniforms.\r\n * @param {EffectAttribute} attributes - The global, collective attributes.\r\n * @return {Object} The results.\r\n * @property {String[]} varyings - The varyings used by the given effect.\r\n * @property {Boolean} transformedUv - Indicates whether the effect transforms UV coordinates in the fragment shader.\r\n * @property {Boolean} readDepth - Indicates whether the effect actually uses depth in the fragment shader.\r\n */\r\n\r\nfunction integrateEffect(prefix, effect, shaderParts, blendModes, defines, uniforms, attributes) {\r\n\r\n\tconst functionRegExp = /(?:\\w+\\s+(\\w+)\\([\\w\\s,]*\\)\\s*{[^}]+})/g;\r\n\tconst varyingRegExp = /(?:varying\\s+\\w+\\s+(\\w*))/g;\r\n\r\n\tconst blendMode = effect.blendMode;\r\n\tconst shaders = new Map([\r\n\t\t[\"fragment\", effect.fragmentShader],\r\n\t\t[\"vertex\", effect.vertexShader]\r\n\t]);\r\n\r\n\tconst mainImageExists = (shaders.get(\"fragment\") !== undefined && shaders.get(\"fragment\").indexOf(\"mainImage\") >= 0);\r\n\tconst mainUvExists = (shaders.get(\"fragment\") !== undefined && shaders.get(\"fragment\").indexOf(\"mainUv\") >= 0);\r\n\r\n\tlet varyings = [], names = [];\r\n\tlet transformedUv = false;\r\n\tlet readDepth = false;\r\n\r\n\tif(shaders.get(\"fragment\") === undefined) {\r\n\r\n\t\tconsole.error(\"Missing fragment shader\", effect);\r\n\r\n\t} else if(mainUvExists && (attributes & EffectAttribute.CONVOLUTION) !== 0) {\r\n\r\n\t\tconsole.error(\"Effects that transform UV coordinates are incompatible with convolution effects\", effect);\r\n\r\n\t} else if(!mainImageExists && !mainUvExists) {\r\n\r\n\t\tconsole.error(\"The fragment shader contains neither a mainImage nor a mainUv function\", effect);\r\n\r\n\t} else {\r\n\r\n\t\tif(mainUvExists) {\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_UV, shaderParts.get(Section.FRAGMENT_MAIN_UV) +\r\n\t\t\t\t\"\\t\" + prefix + \"MainUv(UV);\\n\");\r\n\r\n\t\t\ttransformedUv = true;\r\n\r\n\t\t}\r\n\r\n\t\tif(shaders.get(\"vertex\") !== null && shaders.get(\"vertex\").indexOf(\"mainSupport\") >= 0) {\r\n\r\n\t\t\tlet string = \"\\t\" + prefix + \"MainSupport(\";\r\n\r\n\t\t\t// Check if the vertex shader expects uv coordinates.\r\n\t\t\tif(shaders.get(\"vertex\").indexOf(\"uv\") >= 0) {\r\n\r\n\t\t\t\tstring += \"vUv\";\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstring += \");\\n\";\r\n\r\n\t\t\tshaderParts.set(Section.VERTEX_MAIN_SUPPORT,\r\n\t\t\t\tshaderParts.get(Section.VERTEX_MAIN_SUPPORT) + string);\r\n\r\n\t\t\tvaryings = varyings.concat(findSubstrings(varyingRegExp, shaders.get(\"vertex\")));\r\n\t\t\tnames = names.concat(varyings).concat(findSubstrings(functionRegExp, shaders.get(\"vertex\")));\r\n\r\n\t\t}\r\n\r\n\t\t// Assemble all names while ignoring parameters of function-like macros.\r\n\t\tnames = names.concat(findSubstrings(functionRegExp, shaders.get(\"fragment\")))\r\n\t\t\t.concat(Array.from(effect.defines.keys()).map((s) => s.replace(/\\([\\w\\s,]*\\)/g, \"\")))\r\n\t\t\t.concat(Array.from(effect.uniforms.keys()));\r\n\r\n\t\t// Store prefixed uniforms and macros.\r\n\t\teffect.uniforms.forEach((value, key) => uniforms.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), value));\r\n\t\teffect.defines.forEach((value, key) => defines.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), value));\r\n\r\n\t\t// Prefix varyings, functions, uniforms and macros.\r\n\t\tprefixSubstrings(prefix, names, defines);\r\n\t\tprefixSubstrings(prefix, names, shaders);\r\n\r\n\t\t// Collect unique blend modes.\r\n\t\tblendModes.set(blendMode.blendFunction, blendMode);\r\n\r\n\t\tif(mainImageExists) {\r\n\r\n\t\t\tlet string = prefix + \"MainImage(color0, UV, \";\r\n\r\n\t\t\t// The effect may sample depth in a different shader.\r\n\t\t\tif((attributes & EffectAttribute.DEPTH) !== 0 && shaders.get(\"fragment\").indexOf(\"depth\") >= 0) {\r\n\r\n\t\t\t\tstring += \"depth, \";\r\n\t\t\t\treadDepth = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tstring += \"color1);\\n\\t\";\r\n\r\n\t\t\t// Include the blend opacity uniform of this effect.\r\n\t\t\tconst blendOpacity = prefix + \"BlendOpacity\";\r\n\t\t\tuniforms.set(blendOpacity, blendMode.opacity);\r\n\r\n\t\t\t// Blend the result of this effect with the input color.\r\n\t\t\tstring += \"color0 = blend\" + blendMode.blendFunction +\r\n\t\t\t\t\"(color0, color1, \" + blendOpacity + \");\\n\\n\\t\";\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_IMAGE,\r\n\t\t\t\tshaderParts.get(Section.FRAGMENT_MAIN_IMAGE) + string);\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) +\r\n\t\t\t\t\"uniform float \" + blendOpacity + \";\\n\\n\");\r\n\r\n\t\t}\r\n\r\n\t\t// Include the modified code in the final shader.\r\n\t\tshaderParts.set(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) +\r\n\t\t\tshaders.get(\"fragment\") + \"\\n\");\r\n\r\n\t\tif(shaders.get(\"vertex\") !== null) {\r\n\r\n\t\t\tshaderParts.set(Section.VERTEX_HEAD, shaderParts.get(Section.VERTEX_HEAD) +\r\n\t\t\t\tshaders.get(\"vertex\") + \"\\n\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn { varyings, transformedUv, readDepth };\r\n\r\n}\r\n\r\n/**\r\n * An effect pass.\r\n *\r\n * Use this pass to combine {@link Effect} instances.\r\n */\r\n\r\nclass EffectPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new effect pass.\r\n\t *\r\n\t * The provided effects will be organized and merged for optimal performance.\r\n\t *\r\n\t * @param {Camera} camera - The main camera. The camera's type and settings will be available to all effects.\r\n\t * @param {...Effect} effects - The effects that will be rendered by this pass.\r\n\t */\r\n\r\n\tconstructor(camera, ...effects) {\r\n\r\n\t\tsuper(\"EffectPass\");\r\n\r\n\t\tthis.setFullscreenMaterial(new EffectMaterial(null, null, null, camera));\r\n\r\n\t\t/**\r\n\t\t * The effects, sorted by attribute priority, DESC.\r\n\t\t *\r\n\t\t * @type {Effect[]}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.effects = effects.sort((a, b) => (b.attributes - a.attributes));\r\n\r\n\t\t/**\r\n\t\t * Indicates whether this pass should skip rendering.\r\n\t\t *\r\n\t\t * Effects will still be updated, even if this flag is true.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.skipRendering = false;\r\n\r\n\t\t/**\r\n\t\t * The amount of shader uniforms that this pass uses.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.uniforms = 0;\r\n\r\n\t\t/**\r\n\t\t * The amount of shader varyings that this pass uses.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.varyings = 0;\r\n\r\n\t\t/**\r\n\t\t * A time offset.\r\n\t\t *\r\n\t\t * Elapsed time will start at this value.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.minTime = 1.0;\r\n\r\n\t\t/**\r\n\t\t * The maximum time.\r\n\t\t *\r\n\t\t * If the elapsed time exceeds this value, it will be reset.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.maxTime = 1e3;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass encodes its output when rendering to screen.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget encodeOutput() {\r\n\r\n\t\treturn (this.getFullscreenMaterial().defines.ENCODE_OUTPUT !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables output encoding.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset encodeOutput(value) {\r\n\r\n\t\tif(this.encodeOutput !== value) {\r\n\r\n\t\t\tconst material = this.getFullscreenMaterial();\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tmaterial.defines.ENCODE_OUTPUT = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete material.defines.ENCODE_OUTPUT;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * Color quantization reduces banding artifacts but degrades performance.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.getFullscreenMaterial().dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\tif(material.dithering !== value) {\r\n\r\n\t\t\tmaterial.dithering = value;\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the compound shader material.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tupdateMaterial() {\r\n\r\n\t\tconst blendRegExp = /\\bblend\\b/g;\r\n\r\n\t\tconst shaderParts = new Map([\r\n\t\t\t[Section.FRAGMENT_HEAD, \"\"],\r\n\t\t\t[Section.FRAGMENT_MAIN_UV, \"\"],\r\n\t\t\t[Section.FRAGMENT_MAIN_IMAGE, \"\"],\r\n\t\t\t[Section.VERTEX_HEAD, \"\"],\r\n\t\t\t[Section.VERTEX_MAIN_SUPPORT, \"\"]\r\n\t\t]);\r\n\r\n\t\tconst blendModes = new Map();\r\n\t\tconst defines = new Map();\r\n\t\tconst uniforms = new Map();\r\n\t\tconst extensions = new Set();\r\n\r\n\t\tlet id = 0, varyings = 0, attributes = 0;\r\n\t\tlet transformedUv = false;\r\n\t\tlet readDepth = false;\r\n\t\tlet result;\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\tif(effect.blendMode.blendFunction === BlendFunction.SKIP) {\r\n\r\n\t\t\t\t// Check if this effect relies on depth and then continue.\r\n\t\t\t\tattributes |= (effect.attributes & EffectAttribute.DEPTH);\r\n\r\n\t\t\t} else if((attributes & EffectAttribute.CONVOLUTION) !== 0 && (effect.attributes & EffectAttribute.CONVOLUTION) !== 0) {\r\n\r\n\t\t\t\tconsole.error(\"Convolution effects cannot be merged\", effect);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tattributes |= effect.attributes;\r\n\r\n\t\t\t\tresult = integrateEffect((\"e\" + id++), effect, shaderParts, blendModes, defines, uniforms, attributes);\r\n\r\n\t\t\t\tvaryings += result.varyings.length;\r\n\t\t\t\ttransformedUv = transformedUv || result.transformedUv;\r\n\t\t\t\treadDepth = readDepth || result.readDepth;\r\n\r\n\t\t\t\tif(effect.extensions !== null) {\r\n\r\n\t\t\t\t\t// Collect the WebGL extensions that are required by this effect.\r\n\t\t\t\t\tfor(const extension of effect.extensions) {\r\n\r\n\t\t\t\t\t\textensions.add(extension);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Integrate the relevant blend functions.\r\n\t\tfor(const blendMode of blendModes.values()) {\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_HEAD, shaderParts.get(Section.FRAGMENT_HEAD) +\r\n\t\t\t\tblendMode.getShaderCode().replace(blendRegExp, \"blend\" + blendMode.blendFunction) + \"\\n\");\r\n\r\n\t\t}\r\n\r\n\t\t// Check if any effect relies on depth.\r\n\t\tif((attributes & EffectAttribute.DEPTH) !== 0) {\r\n\r\n\t\t\t// Only read depth if any effect actually uses this information.\r\n\t\t\tif(readDepth) {\r\n\r\n\t\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_IMAGE, \"float depth = readDepth(UV);\\n\\n\\t\" +\r\n\t\t\t\t\tshaderParts.get(Section.FRAGMENT_MAIN_IMAGE));\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Only request a depth texture if none has been provided yet.\r\n\t\t\tthis.needsDepthTexture = (this.getDepthTexture() === null);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.needsDepthTexture = false;\r\n\r\n\t\t}\r\n\r\n\t\t// Check if any effect transforms UVs in the fragment shader.\r\n\t\tif(transformedUv) {\r\n\r\n\t\t\tshaderParts.set(Section.FRAGMENT_MAIN_UV, \"vec2 transformedUv = vUv;\\n\" +\r\n\t\t\t\tshaderParts.get(Section.FRAGMENT_MAIN_UV));\r\n\r\n\t\t\tdefines.set(\"UV\", \"transformedUv\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdefines.set(\"UV\", \"vUv\");\r\n\r\n\t\t}\r\n\r\n\t\t// Ensure that leading preprocessor directives start at a new line.\r\n\t\tshaderParts.forEach((value, key, map) => map.set(key, value.trim().replace(/^#/, \"\\n#\")));\r\n\r\n\t\tthis.uniforms = uniforms.size;\r\n\t\tthis.varyings = varyings;\r\n\r\n\t\tthis.skipRendering = (id === 0);\r\n\t\tthis.needsSwap = !this.skipRendering;\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tmaterial.setShaderParts(shaderParts).setDefines(defines).setUniforms(uniforms);\r\n\t\tmaterial.extensions = {};\r\n\r\n\t\tif(extensions.size > 0) {\r\n\r\n\t\t\t// Enable required WebGL extensions.\r\n\t\t\tfor(const extension of extensions) {\r\n\r\n\t\t\t\tmaterial.extensions[extension] = true;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the shader material.\r\n\t *\r\n\t * Warning: This method triggers a relatively expensive shader recompilation.\r\n\t */\r\n\r\n\trecompile() {\r\n\r\n\t\tthis.updateMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current depth texture.\r\n\t *\r\n\t * @return {Texture} The current depth texture, or null if there is none.\r\n\t */\r\n\r\n\tgetDepthTexture() {\r\n\r\n\t\treturn this.getFullscreenMaterial().uniforms.depthBuffer.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.setDepthTexture(depthTexture, depthPacking);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\t\tconst time = material.uniforms.time.value + deltaTime;\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.update(renderer, inputBuffer, deltaTime);\r\n\r\n\t\t}\r\n\r\n\t\tif(!this.skipRendering || this.renderToScreen) {\r\n\r\n\t\t\tmaterial.uniforms.inputBuffer.value = inputBuffer.texture;\r\n\t\t\tmaterial.uniforms.time.value = (time <= this.maxTime) ? time : this.minTime;\r\n\t\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\r\n\t\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.getFullscreenMaterial().setSize(width, height);\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.setSize(width, height);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\t// Initialize effects before building the final shader.\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\t}\r\n\r\n\t\t// Initialize the fullscreen material.\r\n\t\tthis.updateMaterial();\r\n\r\n\t\t// Compare required resources with capabilities.\r\n\t\tconst capabilities = renderer.capabilities;\r\n\t\tlet max = Math.min(capabilities.maxFragmentUniforms, capabilities.maxVertexUniforms);\r\n\r\n\t\tif(this.uniforms > max) {\r\n\r\n\t\t\tconsole.warn(\"The current rendering context doesn't support more than \" + max + \" uniforms, but \" + this.uniforms + \" were defined\");\r\n\r\n\t\t}\r\n\r\n\t\tmax = capabilities.maxVaryings;\r\n\r\n\t\tif(this.varyings > max) {\r\n\r\n\t\t\tconsole.warn(\"The current rendering context doesn't support more than \" + max + \" varyings, but \" + this.varyings + \" were defined\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes disposable objects.\r\n\t *\r\n\t * This pass will be inoperative after this method was called!\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tsuper.dispose();\r\n\r\n\t\tfor(const effect of this.effects) {\r\n\r\n\t\t\teffect.dispose();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A stencil mask pass.\r\n *\r\n * This pass requires that the input and output buffers have a stencil buffer.\r\n * You can enable the stencil buffer via the {@link EffectComposer} constructor.\r\n */\r\n\r\nclass MaskPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new mask pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use.\r\n\t */\r\n\r\n\tconstructor(scene, camera) {\r\n\r\n\t\tsuper(\"MaskPass\", scene, camera);\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(false, false, true);\r\n\r\n\t\t/**\r\n\t\t * Inverse flag.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.inverse = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass should clear the stencil buffer.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget clear() {\r\n\r\n\t\treturn this.clearPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables auto clear.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset clear(value) {\r\n\r\n\t\tthis.clearPass.enabled = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst context = renderer.getContext();\r\n\t\tconst buffers = renderer.state.buffers;\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst clearPass = this.clearPass;\r\n\r\n\t\tconst writeValue = this.inverse ? 0 : 1;\r\n\t\tconst clearValue = 1 - writeValue;\r\n\r\n\t\t// Don't update color or depth.\r\n\t\tbuffers.color.setMask(false);\r\n\t\tbuffers.depth.setMask(false);\r\n\r\n\t\t// Lock the buffers.\r\n\t\tbuffers.color.setLocked(true);\r\n\t\tbuffers.depth.setLocked(true);\r\n\r\n\t\t// Configure the stencil.\r\n\t\tbuffers.stencil.setTest(true);\r\n\t\tbuffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\r\n\t\tbuffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\r\n\t\tbuffers.stencil.setClear(clearValue);\r\n\t\tbuffers.stencil.setLocked(true);\r\n\r\n\t\t// Clear the stencil.\r\n\t\tif(this.clear) {\r\n\r\n\t\t\tif(this.renderToScreen) {\r\n\r\n\t\t\t\tclearPass.render(renderer, null);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tclearPass.render(renderer, inputBuffer);\r\n\t\t\t\tclearPass.render(renderer, outputBuffer);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Draw the mask.\r\n\t\tif(this.renderToScreen) {\r\n\r\n\t\t\trenderer.setRenderTarget(null);\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t} else {\r\n\r\n\t\t\trenderer.setRenderTarget(inputBuffer);\r\n\t\t\trenderer.render(scene, camera);\r\n\t\t\trenderer.setRenderTarget(outputBuffer);\r\n\t\t\trenderer.render(scene, camera);\r\n\r\n\t\t}\r\n\r\n\t\t// Unlock the buffers.\r\n\t\tbuffers.color.setLocked(false);\r\n\t\tbuffers.depth.setLocked(false);\r\n\r\n\t\t// Only render where the stencil is set to 1.\r\n\t\tbuffers.stencil.setLocked(false);\r\n\t\tbuffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff);\r\n\t\tbuffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\r\n\t\tbuffers.stencil.setLocked(true);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A pass that renders the normals of a given scene.\r\n */\r\n\r\nclass NormalPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new normal pass.\r\n\t *\r\n\t * @param {Scene} scene - The scene to render.\r\n\t * @param {Camera} camera - The camera to use to render the scene.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.resolutionScale=1.0] - Deprecated. Adjust the height or width instead for consistent results.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {WebGLRenderTarget} [options.renderTarget] - A custom render target.\r\n\t */\r\n\r\n\tconstructor(scene, camera, {\r\n\t\tresolutionScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\trenderTarget\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"NormalPass\");\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPass = new RenderPass(scene, camera, new MeshNormalMaterial({\r\n\t\t\tmorphTargets: true,\r\n\t\t\tmorphNormals: true,\r\n\t\t\tskinning: true\r\n\t\t}));\r\n\r\n\t\tconst clearPass = this.renderPass.getClearPass();\r\n\t\tclearPass.overrideClearColor = new Color(0x7777ff);\r\n\t\tclearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A render target that contains the scene normals.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = renderTarget;\r\n\r\n\t\tif(this.renderTarget === undefined) {\r\n\r\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\t\tminFilter: NearestFilter,\r\n\t\t\t\tmagFilter: NearestFilter,\r\n\t\t\t\tformat: RGBFormat,\r\n\t\t\t\tstencilBuffer: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.renderTarget.texture.name = \"NormalPass.Target\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * The desired render resolution.\r\n\t\t *\r\n\t\t * Use {@link Resizer.AUTO_SIZE} for the width or height to automatically\r\n\t\t * calculate it based on its counterpart and the original aspect ratio.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The normal texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolutionScale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolutionScale = scale;\r\n\t\tthis.setSize(this.resolution.base.x, this.resolution.base.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the scene normals.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tconst renderTarget = this.renderToScreen ? null : this.renderTarget;\r\n\t\tthis.renderPass.render(renderer, renderTarget, renderTarget);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tthis.renderTarget.setSize(resolution.width, resolution.height);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A pass that renders the result from a previous pass to another render target.\r\n */\r\n\r\nclass SavePass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new save pass.\r\n\t *\r\n\t * @param {WebGLRenderTarget} [renderTarget] - A render target.\r\n\t * @param {Boolean} [resize=true] - Whether the render target should adjust to the size of the input buffer.\r\n\t */\r\n\r\n\tconstructor(renderTarget, resize = true) {\r\n\r\n\t\tsuper(\"SavePass\");\r\n\r\n\t\tthis.setFullscreenMaterial(new CopyMaterial());\r\n\r\n\t\tthis.needsSwap = false;\r\n\r\n\t\t/**\r\n\t\t * The render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = renderTarget;\r\n\r\n\t\tif(renderTarget === undefined) {\r\n\r\n\t\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\t\tminFilter: LinearFilter,\r\n\t\t\t\tmagFilter: LinearFilter,\r\n\t\t\t\tstencilBuffer: false,\r\n\t\t\t\tdepthBuffer: false\r\n\t\t\t});\r\n\r\n\t\t\tthis.renderTarget.texture.name = \"SavePass.Target\";\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the render target should be resized automatically.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.resize = resize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Saves the input buffer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tthis.getFullscreenMaterial().uniforms.inputBuffer.value = inputBuffer.texture;\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : this.renderTarget);\r\n\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tif(this.resize) {\r\n\r\n\t\t\tconst w = Math.max(width, 1);\r\n\t\t\tconst h = Math.max(height, 1);\r\n\r\n\t\t\tthis.renderTarget.setSize(w, h);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - A renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTarget.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A shader pass.\r\n *\r\n * Renders any shader material as a fullscreen effect.\r\n *\r\n * This pass should not be used to create multiple chained effects. For a more\r\n * efficient solution, please refer to the {@link EffectPass}.\r\n */\r\n\r\nclass ShaderPass extends Pass {\r\n\r\n\t/**\r\n\t * Constructs a new shader pass.\r\n\t *\r\n\t * @param {ShaderMaterial} material - A shader material.\r\n\t * @param {String} [input=\"inputBuffer\"] - The name of the input buffer uniform.\r\n\t */\r\n\r\n\tconstructor(material, input = \"inputBuffer\") {\r\n\r\n\t\tsuper(\"ShaderPass\");\r\n\r\n\t\tthis.setFullscreenMaterial(material);\r\n\r\n\t\t/**\r\n\t\t * The input buffer uniform.\r\n\t\t *\r\n\t\t * @type {String}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.uniform = null;\r\n\t\tthis.setInput(input);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the name of the input buffer uniform.\r\n\t *\r\n\t * Most fullscreen materials modify texels from an input texture. This pass\r\n\t * automatically assigns the main input buffer to the uniform identified by\r\n\t * the given name.\r\n\t *\r\n\t * @param {String} input - The name of the input buffer uniform.\r\n\t */\r\n\r\n\tsetInput(input) {\r\n\r\n\t\tconst material = this.getFullscreenMaterial();\r\n\r\n\t\tthis.uniform = null;\r\n\r\n\t\tif(material !== null) {\r\n\r\n\t\t\tconst uniforms = material.uniforms;\r\n\r\n\t\t\tif(uniforms !== undefined && uniforms[input] !== undefined) {\r\n\r\n\t\t\t\tthis.uniform = uniforms[input];\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders the effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {WebGLRenderTarget} outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t * @param {Boolean} [stencilTest] - Indicates whether a stencil mask is active.\r\n\t */\r\n\r\n\trender(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest) {\r\n\r\n\t\tif(this.uniform !== null && inputBuffer !== null) {\r\n\r\n\t\t\tthis.uniform.value = inputBuffer.texture;\r\n\r\n\t\t}\r\n\r\n\t\trenderer.setRenderTarget(this.renderToScreen ? null : outputBuffer);\r\n\t\trenderer.render(this.scene, this.camera);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * The EffectComposer may be used in place of a normal WebGLRenderer.\r\n *\r\n * The auto clear behaviour of the provided renderer will be disabled to prevent\r\n * unnecessary clear operations.\r\n *\r\n * It is common practice to use a {@link RenderPass} as the first pass to\r\n * automatically clear the buffers and render a scene for further processing.\r\n *\r\n * @implements {Resizable}\r\n * @implements {Disposable}\r\n */\r\n\r\nclass EffectComposer {\r\n\r\n\t/**\r\n\t * Constructs a new effect composer.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer that should be used.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Boolean} [options.depthBuffer=true] - Whether the main render targets should have a depth buffer.\r\n\t * @param {Boolean} [options.stencilBuffer=false] - Whether the main render targets should have a stencil buffer.\r\n\t * @param {Number} [options.multisampling=0] - The number of samples used for multisample antialiasing. Requires WebGL 2.\r\n\t * @param {Boolean} [options.frameBufferType] - The type of the internal frame buffers. It's recommended to use HalfFloatType if possible.\r\n\t */\r\n\r\n\tconstructor(renderer = null, {\r\n\t\tdepthBuffer = true,\r\n\t\tstencilBuffer = false,\r\n\t\tmultisampling = 0,\r\n\t\tframeBufferType\r\n\t} = {}) {\r\n\r\n\t\t/**\r\n\t\t * The renderer.\r\n\t\t *\r\n\t\t * @type {WebGLRenderer}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderer = renderer;\r\n\r\n\t\t/**\r\n\t\t * The input buffer.\r\n\t\t *\r\n\t\t * Reading from and writing to the same render target should be avoided.\r\n\t\t * Therefore, two seperate yet identical buffers are used.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.inputBuffer = null;\r\n\r\n\t\t/**\r\n\t\t * The output buffer.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.outputBuffer = null;\r\n\r\n\t\tif(this.renderer !== null) {\r\n\r\n\t\t\tthis.renderer.autoClear = false;\r\n\t\t\tthis.inputBuffer = this.createBuffer(depthBuffer, stencilBuffer, frameBufferType, multisampling);\r\n\t\t\tthis.outputBuffer = this.inputBuffer.clone();\r\n\t\t\tthis.enableExtensions();\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * A copy pass used for copying masked scenes.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.copyPass = new ShaderPass(new CopyMaterial());\r\n\r\n\t\t/**\r\n\t\t * A depth texture.\r\n\t\t *\r\n\t\t * @type {DepthTexture}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthTexture = null;\r\n\r\n\t\t/**\r\n\t\t * The passes.\r\n\t\t *\r\n\t\t * @type {Pass[]}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.passes = [];\r\n\r\n\t\t/**\r\n\t\t * Determines whether the last pass automatically renders to screen.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.autoRenderToScreen = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current amount of samples used for multisample antialiasing.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget multisampling() {\r\n\r\n\t\treturn (this.inputBuffer instanceof WebGLMultisampleRenderTarget) ?\r\n\t\t\tthis.inputBuffer.samples : 0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of MSAA samples.\r\n\t *\r\n\t * Requires WebGL 2. Set to zero to disable multisampling.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset multisampling(value) {\r\n\r\n\t\tconst buffer = this.inputBuffer;\r\n\t\tconst multisampling = this.multisampling;\r\n\r\n\t\tif(multisampling > 0 && value > 0) {\r\n\r\n\t\t\tthis.inputBuffer.samples = value;\r\n\t\t\tthis.outputBuffer.samples = value;\r\n\r\n\t\t} else if(multisampling !== value) {\r\n\r\n\t\t\tthis.inputBuffer.dispose();\r\n\t\t\tthis.outputBuffer.dispose();\r\n\r\n\t\t\t// Enable or disable MSAA.\r\n\t\t\tthis.inputBuffer = this.createBuffer(\r\n\t\t\t\tbuffer.depthBuffer,\r\n\t\t\t\tbuffer.stencilBuffer,\r\n\t\t\t\tbuffer.texture.type,\r\n\t\t\t\tvalue\r\n\t\t\t);\r\n\r\n\t\t\tthis.outputBuffer = this.inputBuffer.clone();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the WebGL renderer.\r\n\t *\r\n\t * You may replace the renderer at any time by using\r\n\t * {@link EffectComposer#replaceRenderer}.\r\n\t *\r\n\t * @return {WebGLRenderer} The renderer.\r\n\t */\r\n\r\n\tgetRenderer() {\r\n\r\n\t\treturn this.renderer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Explicitly enables required WebGL extensions.\r\n\t *\r\n\t * @private\r\n\t */\r\n\r\n\tenableExtensions() {\r\n\r\n\t\tconst frameBufferType = this.inputBuffer.texture.type;\r\n\t\tconst capabilities = this.renderer.capabilities;\r\n\t\tconst context = this.renderer.getContext();\r\n\r\n\t\tif(frameBufferType !== UnsignedByteType) {\r\n\r\n\t\t\tif(capabilities.isWebGL2) {\r\n\r\n\t\t\t\tcontext.getExtension(\"EXT_color_buffer_float\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcontext.getExtension(\"EXT_color_buffer_half_float\");\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces the current renderer with the given one.\r\n\t *\r\n\t * The auto clear mechanism of the provided renderer will be disabled. If the\r\n\t * new render size differs from the previous one, all passes will be updated.\r\n\t *\r\n\t * By default, the DOM element of the current renderer will automatically be\r\n\t * removed from its parent node and the DOM element of the new renderer will\r\n\t * take its place.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The new renderer.\r\n\t * @param {Boolean} updateDOM - Indicates whether the old canvas should be replaced by the new one in the DOM.\r\n\t * @return {WebGLRenderer} The old renderer.\r\n\t */\r\n\r\n\treplaceRenderer(renderer, updateDOM = true) {\r\n\r\n\t\tconst oldRenderer = this.renderer;\r\n\r\n\t\tif(oldRenderer !== null && oldRenderer !== renderer) {\r\n\r\n\t\t\tconst oldSize = oldRenderer.getSize(new Vector2$1());\r\n\t\t\tconst newSize = renderer.getSize(new Vector2$1());\r\n\t\t\tconst parent = oldRenderer.domElement.parentNode;\r\n\r\n\t\t\tthis.renderer = renderer;\r\n\t\t\tthis.renderer.autoClear = false;\r\n\r\n\t\t\tif(!oldSize.equals(newSize)) {\r\n\r\n\t\t\t\tthis.setSize();\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(updateDOM && parent !== null) {\r\n\r\n\t\t\t\tparent.removeChild(oldRenderer.domElement);\r\n\t\t\t\tparent.appendChild(renderer.domElement);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.enableExtensions();\r\n\r\n\t\t}\r\n\r\n\t\treturn oldRenderer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a depth texture attachment that will be provided to all passes.\r\n\t *\r\n\t * Note: When a shader reads from a depth texture and writes to a render\r\n\t * target that uses the same depth texture attachment, the depth information\r\n\t * will be lost. This happens even if `depthWrite` is disabled.\r\n\t *\r\n\t * @private\r\n\t * @return {DepthTexture} The depth texture.\r\n\t */\r\n\r\n\tcreateDepthTexture() {\r\n\r\n\t\tconst depthTexture = this.depthTexture = new DepthTexture();\r\n\r\n\t\tif(this.inputBuffer.stencilBuffer) {\r\n\r\n\t\t\tdepthTexture.format = DepthStencilFormat;\r\n\t\t\tdepthTexture.type = UnsignedInt248Type;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdepthTexture.type = UnsignedIntType;\r\n\r\n\t\t}\r\n\r\n\t\treturn depthTexture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new render target by replicating the renderer's canvas.\r\n\t *\r\n\t * The created render target uses a linear filter for texel minification and\r\n\t * magnification. Its render texture format depends on whether the renderer\r\n\t * uses the alpha channel. Mipmaps are disabled.\r\n\t *\r\n\t * Note: The buffer format will also be set to RGBA if the frame buffer type\r\n\t * is HalfFloatType because RGB16F buffers are not renderable.\r\n\t *\r\n\t * @param {Boolean} depthBuffer - Whether the render target should have a depth buffer.\r\n\t * @param {Boolean} stencilBuffer - Whether the render target should have a stencil buffer.\r\n\t * @param {Number} type - The frame buffer type.\r\n\t * @param {Number} multisampling - The number of samples to use for antialiasing.\r\n\t * @return {WebGLRenderTarget} A new render target that equals the renderer's canvas.\r\n\t */\r\n\r\n\tcreateBuffer(depthBuffer, stencilBuffer, type, multisampling) {\r\n\r\n\t\tconst size = this.renderer.getDrawingBufferSize(new Vector2$1());\r\n\t\tconst alpha = this.renderer.getContext().getContextAttributes().alpha;\r\n\r\n\t\tconst options = {\r\n\t\t\tformat: (!alpha && type === UnsignedByteType) ? RGBFormat : RGBAFormat,\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer,\r\n\t\t\tdepthBuffer,\r\n\t\t\ttype\r\n\t\t};\r\n\r\n\t\tconst renderTarget = (multisampling > 0) ?\r\n\t\t\tnew WebGLMultisampleRenderTarget(size.width, size.height, options) :\r\n\t\t\tnew WebGLRenderTarget(size.width, size.height, options);\r\n\r\n\t\tif(multisampling > 0) {\r\n\r\n\t\t\trenderTarget.samples = multisampling;\r\n\r\n\t\t}\r\n\r\n\t\trenderTarget.texture.name = \"EffectComposer.Buffer\";\r\n\t\trenderTarget.texture.generateMipmaps = false;\r\n\r\n\t\treturn renderTarget;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds a pass, optionally at a specific index.\r\n\t *\r\n\t * @param {Pass} pass - A new pass.\r\n\t * @param {Number} [index] - An index at which the pass should be inserted.\r\n\t */\r\n\r\n\taddPass(pass, index) {\r\n\r\n\t\tconst passes = this.passes;\r\n\t\tconst renderer = this.renderer;\r\n\t\tconst alpha = renderer.getContext().getContextAttributes().alpha;\r\n\t\tconst frameBufferType = this.inputBuffer.texture.type;\r\n\t\tconst drawingBufferSize = renderer.getDrawingBufferSize(new Vector2$1());\r\n\r\n\t\tpass.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\t\tpass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(this.autoRenderToScreen) {\r\n\r\n\t\t\tif(passes.length > 0) {\r\n\r\n\t\t\t\tpasses[passes.length - 1].renderToScreen = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(pass.renderToScreen) {\r\n\r\n\t\t\t\tthis.autoRenderToScreen = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif(index !== undefined) {\r\n\r\n\t\t\tpasses.splice(index, 0, pass);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tpasses.push(pass);\r\n\r\n\t\t}\r\n\r\n\t\tif(this.autoRenderToScreen) {\r\n\r\n\t\t\tpasses[passes.length - 1].renderToScreen = true;\r\n\r\n\t\t}\r\n\r\n\t\tif(pass.needsDepthTexture || this.depthTexture !== null) {\r\n\r\n\t\t\tif(this.depthTexture === null) {\r\n\r\n\t\t\t\tconst depthTexture = this.createDepthTexture();\r\n\r\n\t\t\t\tfor(pass of passes) {\r\n\r\n\t\t\t\t\tpass.setDepthTexture(depthTexture);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tpass.setDepthTexture(this.depthTexture);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes a pass.\r\n\t *\r\n\t * @param {Pass} pass - The pass.\r\n\t */\r\n\r\n\tremovePass(pass) {\r\n\r\n\t\tconst passes = this.passes;\r\n\t\tconst index = passes.indexOf(pass);\r\n\t\tconst removed = (passes.splice(index, 1).length > 0);\r\n\r\n\t\tif(removed) {\r\n\r\n\t\t\tif(this.depthTexture !== null) {\r\n\r\n\t\t\t\t// Check if the depth texture is still required.\r\n\t\t\t\tconst reducer = (a, b) => (a || b.needsDepthTexture);\r\n\t\t\t\tconst depthTextureRequired = passes.reduce(reducer, false);\r\n\r\n\t\t\t\tif(!depthTextureRequired) {\r\n\r\n\t\t\t\t\tthis.depthTexture.dispose();\r\n\t\t\t\t\tthis.depthTexture = null;\r\n\r\n\t\t\t\t\tthis.inputBuffer.depthTexture = null;\r\n\t\t\t\t\tthis.outputBuffer.depthTexture = null;\r\n\r\n\t\t\t\t\tpass.setDepthTexture(null);\r\n\r\n\t\t\t\t\tfor(pass of passes) {\r\n\r\n\t\t\t\t\t\tpass.setDepthTexture(null);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif(this.autoRenderToScreen && passes.length > 0) {\r\n\r\n\t\t\t\t// Check if the removed pass was the last one in the chain.\r\n\t\t\t\tif(index === passes.length) {\r\n\r\n\t\t\t\t\tpasses[passes.length - 1].renderToScreen = true;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Renders all enabled passes in the order in which they were added.\r\n\t *\r\n\t * @param {Number} deltaTime - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\trender(deltaTime) {\r\n\r\n\t\tconst renderer = this.renderer;\r\n\t\tconst copyPass = this.copyPass;\r\n\r\n\t\tlet inputBuffer = this.inputBuffer;\r\n\t\tlet outputBuffer = this.outputBuffer;\r\n\r\n\t\tlet stencilTest = false;\r\n\t\tlet context, stencil, buffer;\r\n\r\n\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\tif(pass.enabled) {\r\n\r\n\t\t\t\tpass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\r\n\r\n\t\t\t\tif(pass.needsSwap) {\r\n\r\n\t\t\t\t\tif(stencilTest) {\r\n\r\n\t\t\t\t\t\tcopyPass.renderToScreen = pass.renderToScreen;\r\n\t\t\t\t\t\tcontext = renderer.getContext();\r\n\t\t\t\t\t\tstencil = renderer.state.buffers.stencil;\r\n\r\n\t\t\t\t\t\t// Preserve the unaffected pixels.\r\n\t\t\t\t\t\tstencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\r\n\t\t\t\t\t\tcopyPass.render(renderer, inputBuffer, outputBuffer, deltaTime, stencilTest);\r\n\t\t\t\t\t\tstencil.setFunc(context.EQUAL, 1, 0xffffffff);\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbuffer = inputBuffer;\r\n\t\t\t\t\tinputBuffer = outputBuffer;\r\n\t\t\t\t\toutputBuffer = buffer;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(pass instanceof MaskPass) {\r\n\r\n\t\t\t\t\tstencilTest = true;\r\n\r\n\t\t\t\t} else if(pass instanceof ClearMaskPass) {\r\n\r\n\t\t\t\t\tstencilTest = false;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the size of the buffers and the renderer's output canvas.\r\n\t *\r\n\t * Every pass will be informed of the new size. It's up to each pass how that\r\n\t * information is used.\r\n\t *\r\n\t * If no width or height is specified, the render targets and passes will be\r\n\t * updated with the current size of the renderer.\r\n\t *\r\n\t * @param {Number} [width] - The width.\r\n\t * @param {Number} [height] - The height.\r\n\t * @param {Boolean} [updateStyle] - Determines whether the style of the canvas should be updated.\r\n\t */\r\n\r\n\tsetSize(width, height, updateStyle) {\r\n\r\n\t\tconst renderer = this.renderer;\r\n\r\n\t\tif(width === undefined || height === undefined) {\r\n\r\n\t\t\tconst size = renderer.getSize(new Vector2$1());\r\n\t\t\twidth = size.width; height = size.height;\r\n\r\n\t\t}\r\n\r\n\t\t// Update the logical render size.\r\n\t\trenderer.setSize(width, height, updateStyle);\r\n\r\n\t\t// The drawing buffer size takes the device pixel ratio into account.\r\n\t\tconst drawingBufferSize = renderer.getDrawingBufferSize(new Vector2$1());\r\n\r\n\t\tthis.inputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\t\tthis.outputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\r\n\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\tpass.setSize(drawingBufferSize.width, drawingBufferSize.height);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Resets this composer by deleting all passes and creating new buffers.\r\n\t */\r\n\r\n\treset() {\r\n\r\n\t\tconst renderTarget = this.inputBuffer.clone();\r\n\r\n\t\tthis.dispose();\r\n\r\n\t\t// Reanimate.\r\n\t\tthis.inputBuffer = renderTarget;\r\n\t\tthis.outputBuffer = renderTarget.clone();\r\n\t\tthis.depthTexture = null;\r\n\t\tthis.copyPass = new ShaderPass(new CopyMaterial());\r\n\t\tthis.autoRenderToScreen = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Destroys this composer and all passes.\r\n\t *\r\n\t * This method deallocates all disposable objects created by the passes. It\r\n\t * also deletes the main frame buffers of this composer.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tfor(const pass of this.passes) {\r\n\r\n\t\t\tpass.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.passes = [];\r\n\r\n\t\tif(this.inputBuffer !== null) {\r\n\r\n\t\t\tthis.inputBuffer.dispose();\r\n\t\t\tthis.inputBuffer = null;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.outputBuffer !== null) {\r\n\r\n\t\t\tthis.outputBuffer.dispose();\r\n\t\t\tthis.outputBuffer = null;\r\n\r\n\t\t}\r\n\r\n\t\tif(this.depthTexture !== null) {\r\n\r\n\t\t\tthis.depthTexture.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tthis.copyPass.dispose();\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * The initializable contract.\r\n *\r\n * Implemented by objects that can be initialized.\r\n *\r\n * @interface\r\n */\r\n\r\nclass Initializable {\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - A renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {}\r\n\r\n}\n\n/**\r\n * The Resizable contract.\r\n *\r\n * Implemented by objects that can be resized.\r\n *\r\n * @interface\r\n */\r\n\r\nclass Resizable {\r\n\r\n\t/**\r\n\t * Sets the size of this object.\r\n\t *\r\n\t * @param {Number} width - The new width.\r\n\t * @param {Number} height - The new height.\r\n\t */\r\n\r\n\tsetSize(width, height) {}\r\n\r\n}\n\n/**\r\n * An object selection.\r\n *\r\n * Object selections use render layers to facilitate quick and efficient\r\n * visibility changes.\r\n */\r\n\r\nclass Selection extends Set {\r\n\r\n\t/**\r\n\t * Constructs a new selection.\r\n\t *\r\n\t * @param {Iterable<Object3D>} [iterable] - A collection of objects that should be added to this selection.\r\n\t * @param {Number} [layer=10] - A dedicated render layer for selected objects.\r\n\t */\r\n\r\n\tconstructor(iterable, layer = 10) {\r\n\r\n\t\tsuper();\r\n\r\n\t\t/**\r\n\t\t * The current render layer for selected objects.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.currentLayer = layer;\r\n\r\n\t\tif(iterable !== undefined) {\r\n\r\n\t\t\tthis.set(iterable);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A dedicated render layer for selected objects.\r\n\t *\r\n\t * This layer is set to 10 by default. If this collides with your own custom\r\n\t * layers, please change it to a free layer before rendering!\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget layer() {\r\n\r\n\t\treturn this.currentLayer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render layer of selected objects.\r\n\t *\r\n\t * The current selection will be updated accordingly.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset layer(value) {\r\n\r\n\t\tconst currentLayer = this.currentLayer;\r\n\r\n\t\tfor(const object of this) {\r\n\r\n\t\t\tobject.layers.disable(currentLayer);\r\n\t\t\tobject.layers.enable(value);\r\n\r\n\t\t}\r\n\r\n\t\tthis.currentLayer = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears this selection.\r\n\t *\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tclear() {\r\n\r\n\t\tconst layer = this.layer;\r\n\r\n\t\tfor(const object of this) {\r\n\r\n\t\t\tobject.layers.disable(layer);\r\n\r\n\t\t}\r\n\r\n\t\treturn super.clear();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears this selection and adds the given objects.\r\n\t *\r\n\t * @param {Iterable<Object3D>} objects - The objects that should be selected. This array will be copied.\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tset(objects) {\r\n\r\n\t\tthis.clear();\r\n\r\n\t\tfor(const object of objects) {\r\n\r\n\t\t\tthis.add(object);\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * An alias for {@link has}.\r\n\t *\r\n\t * @param {Object3D} object - An object.\r\n\t * @return {Number} Returns 0 if the given object is currently selected, or -1 otherwise.\r\n\t * @deprecated Added for backward compatibility. Use has instead.\r\n\t */\r\n\r\n\tindexOf(object) {\r\n\r\n\t\treturn this.has(object) ? 0 : -1;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Adds an object to this selection.\r\n\t *\r\n\t * @param {Object3D} object - The object that should be selected.\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tadd(object) {\r\n\r\n\t\tobject.layers.enable(this.layer);\r\n\t\tsuper.add(object);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Removes an object from this selection.\r\n\t *\r\n\t * @param {Object3D} object - The object that should be deselected.\r\n\t * @return {Boolean} Returns true if an object has successfully been removed from this selection; otherwise false.\r\n\t */\r\n\r\n\tdelete(object) {\r\n\r\n\t\tif(this.has(object)) {\r\n\r\n\t\t\tobject.layers.disable(this.layer);\r\n\r\n\t\t}\r\n\r\n\t\treturn super.delete(object);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the visibility of all selected objects.\r\n\t *\r\n\t * This method enables or disables render layer 0 of all selected objects.\r\n\t *\r\n\t * @param {Boolean} visible - Whether the selected objects should be visible.\r\n\t * @return {Selection} This selection.\r\n\t */\r\n\r\n\tsetVisible(visible) {\r\n\r\n\t\tfor(const object of this) {\r\n\r\n\t\t\tif(visible) {\r\n\r\n\t\t\t\tobject.layers.enable(0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tobject.layers.disable(0);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$e = \"uniform sampler2D texture;uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(texture,uv)*intensity,0.0,1.0);}\";\n\n/**\r\n * A bloom effect.\r\n *\r\n * This effect uses the fast Kawase convolution technique and a luminance filter\r\n * to blur bright highlights.\r\n */\r\n\r\nclass BloomEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new bloom effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Number} [options.luminanceThreshold=0.9] - The luminance threshold. Raise this value to mask out darker elements in the scene. Range is [0, 1].\r\n\t * @param {Number} [options.luminanceSmoothing=0.025] - Controls the smoothness of the luminance threshold. Range is [0, 1].\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use height or width instead.\r\n\t * @param {Number} [options.intensity=1.0] - The intensity.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.LARGE] - The blur kernel size.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tluminanceThreshold = 0.9,\r\n\t\tluminanceSmoothing = 0.025,\r\n\t\tresolutionScale = 0.5,\r\n\t\tintensity = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.LARGE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"BloomEffect\", fragmentShader$e, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"texture\", new Uniform(null)],\r\n\t\t\t\t[\"intensity\", new Uniform(intensity)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"Bloom.Target\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\tthis.uniforms.get(\"texture\").value = this.renderTarget.texture;\r\n\r\n\t\t/**\r\n\t\t * A blur pass.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ resolutionScale, width, height, kernelSize });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\r\n\t\t/**\r\n\t\t * A luminance shader pass.\r\n\t\t *\r\n\t\t * You may disable this pass to deactivate luminance filtering.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t */\r\n\r\n\t\tthis.luminancePass = new ShaderPass(new LuminanceMaterial(true));\r\n\r\n\t\tthis.luminanceMaterial.threshold = luminanceThreshold;\r\n\t\tthis.luminanceMaterial.smoothing = luminanceSmoothing;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A texture that contains the intermediate result of this effect.\r\n\t *\r\n\t * This texture will be applied to the scene colors unless the blend function\r\n\t * is set to `SKIP`.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTarget.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance material.\r\n\t *\r\n\t * @type {LuminanceMaterial}\r\n\t */\r\n\r\n\tget luminanceMaterial() {\r\n\r\n\t\treturn this.luminancePass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.blurPass.dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tthis.blurPass.dithering = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.blurPass.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.blurPass.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\r\n\t */\r\n\r\n\tget distinction() {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\");\r\n\r\n\t\treturn 1.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\r\n\t */\r\n\r\n\tset distinction(value) {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed, use luminanceMaterial.threshold and luminanceMaterial.smoothing instead.\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The bloom intensity.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget intensity() {\r\n\r\n\t\treturn this.uniforms.get(\"intensity\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the bloom intensity.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset intensity(value) {\r\n\r\n\t\tthis.uniforms.get(\"intensity\").value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst renderTarget = this.renderTarget;\r\n\r\n\t\tif(this.luminancePass.enabled) {\r\n\r\n\t\t\tthis.luminancePass.render(renderer, inputBuffer, renderTarget);\r\n\t\t\tthis.blurPass.render(renderer, renderTarget, renderTarget);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.blurPass.render(renderer, inputBuffer, renderTarget);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\t\tthis.renderTarget.setSize(this.resolution.width, this.resolution.height);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tthis.blurPass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTarget.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$f = \"uniform float focus;uniform float dof;uniform float aperture;uniform float maxBlur;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec2 aspectCorrection=vec2(1.0,aspect);\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\nfloat focusNear=clamp(focus-dof,0.0,1.0);float focusFar=clamp(focus+dof,0.0,1.0);float low=step(linearDepth,focusNear);float high=step(focusFar,linearDepth);float factor=(linearDepth-focusNear)*low+(linearDepth-focusFar)*high;vec2 dofBlur=vec2(clamp(factor*aperture,-maxBlur,maxBlur));vec2 dofblur9=dofBlur*0.9;vec2 dofblur7=dofBlur*0.7;vec2 dofblur4=dofBlur*0.4;vec4 color=inputColor;color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofBlur);color+=texture2D(inputBuffer,uv+(vec2(0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.15,0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.37,0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(-0.37,-0.15)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.15,-0.37)*aspectCorrection)*dofblur9);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.40,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur7);color+=texture2D(inputBuffer,uv+(vec2(0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,-0.4)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.4,0.0)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(-0.29,-0.29)*aspectCorrection)*dofblur4);color+=texture2D(inputBuffer,uv+(vec2(0.0,0.4)*aspectCorrection)*dofblur4);outputColor=color/41.0;}\";\n\n/**\r\n * A depth of field (bokeh) effect.\r\n *\r\n * Original shader code by Martins Upitis:\r\n *  http://artmartinsh.blogspot.com/2010/02/glsl-lens-blur-filter-with-bokeh.html\r\n *\r\n * @deprecated Use DepthOfFieldEffect instead.\r\n */\r\n\r\nclass BokehEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.focus=0.5] - The focus distance ratio, ranging from 0.0 to 1.0.\r\n\t * @param {Number} [options.dof=0.02] - Depth of field. An area in front of and behind the focal point that still appears sharp.\r\n\t * @param {Number} [options.aperture=0.015] - Camera aperture scale. Bigger values for stronger blur and shallower depth of field.\r\n\t * @param {Number} [options.maxBlur=1.0] - The maximum blur strength.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, focus = 0.5, dof = 0.02, aperture = 0.015, maxBlur = 1.0 } = {}) {\r\n\r\n\t\tsuper(\"BokehEffect\", fragmentShader$f, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"focus\", new Uniform(focus)],\r\n\t\t\t\t[\"dof\", new Uniform(dof)],\r\n\t\t\t\t[\"aperture\", new Uniform(aperture)],\r\n\t\t\t\t[\"maxBlur\", new Uniform(maxBlur)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$g = \"uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}\";\n\n/**\r\n * A brightness/contrast effect.\r\n *\r\n * Reference: https://github.com/evanw/glfx.js\r\n */\r\n\r\nclass BrightnessContrastEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new brightness/contrast effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.brightness=0.0] - The brightness factor, ranging from -1 to 1, where 0 means no change.\r\n\t * @param {Number} [options.contrast=0.0] - The contrast factor, ranging from -1 to 1, where 0 means no change.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, brightness = 0.0, contrast = 0.0 } = {}) {\r\n\r\n\t\tsuper(\"BrightnessContrastEffect\", fragmentShader$g, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"brightness\", new Uniform(brightness)],\r\n\t\t\t\t[\"contrast\", new Uniform(contrast)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$h = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float sum=inputColor.r+inputColor.g+inputColor.b;outputColor=vec4(vec3(sum/3.0),inputColor.a);}\";\n\n/**\r\n * A color average effect.\r\n */\r\n\r\nclass ColorAverageEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new color average effect.\r\n\t *\r\n\t * @param {BlendFunction} [blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t */\r\n\r\n\tconstructor(blendFunction = BlendFunction.NORMAL) {\r\n\r\n\t\tsuper(\"ColorAverageEffect\", fragmentShader$h, { blendFunction });\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$i = \"uniform float factor;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(floor(inputColor.rgb*factor+0.5)/factor,inputColor.a);}\";\n\n/**\r\n * A color depth effect.\r\n *\r\n * Simulates a hardware limitation to achieve a retro feel.\r\n */\r\n\r\nclass ColorDepthEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new color depth effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.bits=16] - The color bit depth.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, bits = 16 } = {}) {\r\n\r\n\t\tsuper(\"ColorDepthEffect\", fragmentShader$i, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"factor\", new Uniform(1.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The current amount of bits.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bits = 0;\r\n\r\n\t\tthis.setBitDepth(bits);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current color bit depth.\r\n\t *\r\n\t * @return {Number} The color bit depth.\r\n\t */\r\n\r\n\tgetBitDepth() {\r\n\r\n\t\treturn this.bits;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the virtual amount of color bits.\r\n\t *\r\n\t * Each color channel will use a third of the available bits. The alpha\r\n\t * channel remains unaffected.\r\n\t *\r\n\t * Note that the real color depth will not be altered by this effect.\r\n\t *\r\n\t * @param {Number} bits - The new color bit depth.\r\n\t */\r\n\r\n\tsetBitDepth(bits) {\r\n\r\n\t\tthis.bits = bits;\r\n\t\tthis.uniforms.get(\"factor\").value = Math.pow(2.0, bits / 3.0);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$j = \"varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 color=inputColor;\\n#ifdef ALPHA\\nvec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;color.r=ra.x;color.b=ba.x;color.a=max(max(ra.y,ba.y),inputColor.a);\\n#else\\ncolor.r=texture2D(inputBuffer,vUvR).r;color.b=texture2D(inputBuffer,vUvB).b;\\n#endif\\noutputColor=color;}\";\n\nvar vertexShader$8 = \"uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vUvR=uv+offset;vUvB=uv-offset;}\";\n\n/**\r\n * A chromatic aberration effect.\r\n */\r\n\r\nclass ChromaticAberrationEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new chromatic aberration effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Vector2} [options.offset] - The color offset.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, offset = new Vector2$1(0.001, 0.0005) } = {}) {\r\n\r\n\t\tsuper(\"ChromaticAberrationEffect\", fragmentShader$j, {\r\n\r\n\t\t\tvertexShader: vertexShader$8,\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"offset\", new Uniform(offset)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The color offset.\r\n\t *\r\n\t * @type {Vector2}\r\n\t */\r\n\r\n\tget offset() {\r\n\r\n\t\treturn this.uniforms.get(\"offset\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Vector2}\r\n\t */\r\n\r\n\tset offset(value) {\r\n\r\n\t\tthis.uniforms.get(\"offset\").value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tif(alpha) {\r\n\r\n\t\t\tthis.defines.set(\"ALPHA\", \"1\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"ALPHA\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$k = \"void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef INVERTED\\nvec3 color=vec3(1.0-depth);\\n#else\\nvec3 color=vec3(depth);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n/**\r\n * A depth visualization effect.\r\n *\r\n * Useful for debugging.\r\n */\r\n\r\nclass DepthEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new depth effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Boolean} [options.inverted=false] - Whether the depth values should be inverted.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, inverted = false } = {}) {\r\n\r\n\t\tsuper(\"DepthEffect\", fragmentShader$k, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH\r\n\r\n\t\t});\r\n\r\n\t\tthis.inverted = inverted;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether depth will be inverted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget inverted() {\r\n\r\n\t\treturn this.defines.has(\"INVERTED\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables depth inversion.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset inverted(value) {\r\n\r\n\t\tvalue ? this.defines.set(\"INVERTED\", \"1\") : this.defines.delete(\"INVERTED\");\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$l = \"uniform sampler2D nearColorBuffer;uniform sampler2D farColorBuffer;uniform sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}\";\n\n/**\r\n * A depth of field effect.\r\n *\r\n * Based on a graphics study by Adrian Courrges and an article by Steve Avery:\r\n *  https://www.adriancourreges.com/blog/2016/09/09/doom-2016-graphics-study/\r\n *  https://pixelmischiefblog.wordpress.com/2016/11/25/bokeh-depth-of-field/\r\n */\r\n\r\nclass DepthOfFieldEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new depth of field effect.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.focusDistance=0.0] - The normalized focus distance. Range is [0.0, 1.0].\r\n\t * @param {Number} [options.focalLength=0.05] - The focal length. Range is [0.0, 1.0].\r\n\t * @param {Number} [options.bokehScale=1.0] - The scale of the bokeh blur.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t */\r\n\r\n\tconstructor(camera, {\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tfocusDistance = 0.0,\r\n\t\tfocalLength = 0.1,\r\n\t\tbokehScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"DepthOfFieldEffect\", fragmentShader$l, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"nearColorBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"farColorBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"nearCoCBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"scale\", new Uniform(1.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A render target for intermediate results.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTarget = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTarget.texture.name = \"DoF.Intermediate\";\r\n\t\tthis.renderTarget.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A render target for masked background colors (premultiplied with CoC).\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetMasked = this.renderTarget.clone();\r\n\t\tthis.renderTargetMasked.texture.name = \"DoF.Masked.Far\";\r\n\r\n\t\t/**\r\n\t\t * A render target for the blurred foreground colors.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetNear = this.renderTarget.clone();\r\n\t\tthis.renderTargetNear.texture.name = \"DoF.Bokeh.Near\";\r\n\r\n\t\tthis.uniforms.get(\"nearColorBuffer\").value = this.renderTargetNear.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the blurred background colors.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetFar = this.renderTarget.clone();\r\n\t\tthis.renderTargetFar.texture.name = \"DoF.Bokeh.Far\";\r\n\r\n\t\tthis.uniforms.get(\"farColorBuffer\").value = this.renderTargetFar.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the circle of confusion.\r\n\t\t *\r\n\t\t * - Negative values are stored in the `RED` channel (foreground).\r\n\t\t * - Positive values are stored in the `GREEN` channel (background).\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetCoC = this.renderTarget.clone();\r\n\t\tthis.renderTargetCoC.texture.format = RGBFormat;\r\n\t\tthis.renderTargetCoC.texture.name = \"DoF.CoC\";\r\n\r\n\t\t/**\r\n\t\t * A render target that stores a blurred copy of the circle of confusion.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetCoCBlurred = this.renderTargetCoC.clone();\r\n\t\tthis.renderTargetCoCBlurred.texture.name = \"DoF.CoC.Blurred\";\r\n\r\n\t\tthis.uniforms.get(\"nearCoCBuffer\").value = this.renderTargetCoCBlurred.texture;\r\n\r\n\t\t/**\r\n\t\t * A circle of confusion pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.cocPass = new ShaderPass(new CircleOfConfusionMaterial(camera));\r\n\t\tconst cocMaterial = this.circleOfConfusionMaterial;\r\n\t\tcocMaterial.uniforms.focusDistance.value = focusDistance;\r\n\t\tcocMaterial.uniforms.focalLength.value = focalLength;\r\n\r\n\t\t/**\r\n\t\t * This pass blurs the foreground CoC buffer to soften edges.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ width, height, kernelSize: KernelSize.MEDIUM });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\r\n\t\t/**\r\n\t\t * A mask pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.maskPass = new ShaderPass(new MaskMaterial(this.renderTargetCoC.texture));\r\n\t\tconst maskMaterial = this.maskPass.getFullscreenMaterial();\r\n\t\tmaskMaterial.maskFunction = MaskFunction.MULTIPLY_RGB_SET_ALPHA;\r\n\t\tmaskMaterial.colorChannel = ColorChannel.GREEN;\r\n\r\n\t\t/**\r\n\t\t * A bokeh blur pass for the foreground colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehNearBasePass = new ShaderPass(new BokehMaterial(false, true));\r\n\r\n\t\t/**\r\n\t\t * A bokeh fill pass for the foreground colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehNearFillPass = new ShaderPass(new BokehMaterial(true, true));\r\n\r\n\t\t/**\r\n\t\t * A bokeh blur pass for the background colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehFarBasePass = new ShaderPass(new BokehMaterial(false, false));\r\n\r\n\t\t/**\r\n\t\t * A bokeh fill pass for the background colors.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.bokehFarFillPass = new ShaderPass(new BokehMaterial(true, false));\r\n\r\n\t\tthis.bokehScale = bokehScale;\r\n\r\n\t\t/**\r\n\t\t * A target position that should be kept in focus.\r\n\t\t *\r\n\t\t * Set this to `null` to disable auto focus.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t */\r\n\r\n\t\tthis.target = null;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The circle of confusion material.\r\n\t *\r\n\t * @type {CircleOfConfusionMaterial}\r\n\t */\r\n\r\n\tget circleOfConfusionMaterial() {\r\n\r\n\t\treturn this.cocPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current bokeh scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget bokehScale() {\r\n\r\n\t\treturn this.uniforms.get(\"scale\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the bokeh scale.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset bokehScale(value) {\r\n\r\n\t\tconst passes = [\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\tpasses.map((p) => p.getFullscreenMaterial().uniforms.scale).forEach((u) => {\r\n\r\n\t\t\tu.value = value;\r\n\r\n\t\t});\r\n\r\n\t\tthis.maskPass.getFullscreenMaterial().uniforms.strength.value = value;\r\n\t\tthis.uniforms.get(\"scale\").value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Calculates the focus distance from the camera to the given position.\r\n\t *\r\n\t * @param {Vector3} target - The target.\r\n\t * @return {Number} The normalized focus distance.\r\n\t */\r\n\r\n\tcalculateFocusDistance(target) {\r\n\r\n\t\tconst camera = this.camera;\r\n\t\tconst viewDistance = camera.far - camera.near;\r\n\t\tconst distance = camera.position.distanceTo(target);\r\n\r\n\t\treturn Math.min(Math.max((distance / viewDistance), 0.0), 1.0);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.circleOfConfusionMaterial;\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst renderTarget = this.renderTarget;\r\n\t\tconst renderTargetCoC = this.renderTargetCoC;\r\n\t\tconst renderTargetCoCBlurred = this.renderTargetCoCBlurred;\r\n\t\tconst renderTargetMasked = this.renderTargetMasked;\r\n\r\n\t\tconst bokehFarBasePass = this.bokehFarBasePass;\r\n\t\tconst bokehFarFillPass = this.bokehFarFillPass;\r\n\t\tconst farBaseUniforms = bokehFarBasePass.getFullscreenMaterial().uniforms;\r\n\t\tconst farFillUniforms = bokehFarFillPass.getFullscreenMaterial().uniforms;\r\n\r\n\t\tconst bokehNearBasePass = this.bokehNearBasePass;\r\n\t\tconst bokehNearFillPass = this.bokehNearFillPass;\r\n\t\tconst nearBaseUniforms = bokehNearBasePass.getFullscreenMaterial().uniforms;\r\n\t\tconst nearFillUniforms = bokehNearFillPass.getFullscreenMaterial().uniforms;\r\n\r\n\t\t// Auto focus.\r\n\t\tif(this.target !== null) {\r\n\r\n\t\t\tconst distance = this.calculateFocusDistance(this.target);\r\n\t\t\tthis.circleOfConfusionMaterial.uniforms.focusDistance.value = distance;\r\n\r\n\t\t}\r\n\r\n\t\t// Render the CoC and create a blurred version for soft near field blending.\r\n\t\tthis.cocPass.render(renderer, null, renderTargetCoC);\r\n\t\tthis.blurPass.render(renderer, renderTargetCoC, renderTargetCoCBlurred);\r\n\r\n\t\t// Prevent sharp colors from bleeding onto the background.\r\n\t\tthis.maskPass.render(renderer, inputBuffer, renderTargetMasked);\r\n\r\n\t\t// Use the sharp CoC buffer and render the background bokeh.\r\n\t\tfarBaseUniforms.cocBuffer.value = farFillUniforms.cocBuffer.value = renderTargetCoC.texture;\r\n\t\tbokehFarBasePass.render(renderer, renderTargetMasked, renderTarget);\r\n\t\tbokehFarFillPass.render(renderer, renderTarget, this.renderTargetFar);\r\n\r\n\t\t// Use the blurred CoC buffer and render the foreground bokeh.\r\n\t\tnearBaseUniforms.cocBuffer.value = nearFillUniforms.cocBuffer.value = renderTargetCoCBlurred.texture;\r\n\t\tbokehNearBasePass.render(renderer, inputBuffer, renderTarget);\r\n\t\tbokehNearFillPass.render(renderer, renderTarget, this.renderTargetNear);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\r\n\t\tlet resizables = [\r\n\t\t\tthis.cocPass,\r\n\t\t\tthis.blurPass,\r\n\t\t\tthis.maskPass,\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\t// These buffers require full resolution to prevent bleeding artifacts.\r\n\t\tresizables.push(this.renderTargetCoC, this.renderTargetMasked);\r\n\t\tresizables.forEach((r) => r.setSize(width, height));\r\n\r\n\t\tconst w = resolution.width;\r\n\t\tconst h = resolution.height;\r\n\r\n\t\tresizables = [\r\n\t\t\tthis.renderTarget,\r\n\t\t\tthis.renderTargetNear,\r\n\t\t\tthis.renderTargetFar,\r\n\t\t\tthis.renderTargetCoCBlurred\r\n\t\t];\r\n\r\n\t\tresizables.forEach((r) => r.setSize(w, h));\r\n\r\n\t\t// The bokeh blur passes operate on the low resolution buffers.\r\n\t\tconst passes = [\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\tpasses.forEach((p) => p.getFullscreenMaterial().setTexelSize(1.0 / w, 1.0 / h));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tconst initializables = [\r\n\t\t\tthis.cocPass,\r\n\t\t\tthis.maskPass,\r\n\t\t\tthis.bokehNearBasePass,\r\n\t\t\tthis.bokehNearFillPass,\r\n\t\t\tthis.bokehFarBasePass,\r\n\t\t\tthis.bokehFarFillPass\r\n\t\t];\r\n\r\n\t\tinitializables.forEach((i) => i.initialize(renderer, alpha, frameBufferType));\r\n\r\n\t\t// The blur pass operates on the CoC buffer.\r\n\t\tthis.blurPass.initialize(renderer, alpha, UnsignedByteType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetNear.texture.type = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTarget.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetNear.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetFar.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetMasked.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$m = \"uniform vec2 angle;uniform float scale;float pattern(const in vec2 uv){vec2 point=scale*vec2(dot(angle.yx,vec2(uv.x,-uv.y)),dot(angle,uv));return(sin(point.x)*sin(point.y))*4.0;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(inputColor.rgb*10.0-5.0+pattern(uv*resolution));outputColor=vec4(color,inputColor.a);}\";\n\n/**\r\n * A dot screen effect.\r\n */\r\n\r\nclass DotScreenEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new dot screen effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.angle=1.57] - The angle of the dot pattern.\r\n\t * @param {Number} [options.scale=1.0] - The scale of the dot pattern.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, angle = Math.PI * 0.5, scale = 1.0 } = {}) {\r\n\r\n\t\tsuper(\"DotScreenEffect\", fragmentShader$m, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"angle\", new Uniform(new Vector2$1())],\r\n\t\t\t\t[\"scale\", new Uniform(scale)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.setAngle(angle);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the pattern angle.\r\n\t *\r\n\t * @param {Number} [angle] - The angle of the dot pattern.\r\n\t */\r\n\r\n\tsetAngle(angle) {\r\n\r\n\t\tthis.uniforms.get(\"angle\").value.set(Math.sin(angle), Math.cos(angle));\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$n = \"uniform float gamma;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=LinearToGamma(max(inputColor,0.0),gamma);}\";\n\n/**\r\n * A gamma correction effect.\r\n *\r\n * @deprecated Set WebGLRenderer.outputEncoding to sRGBEncoding or GammaEncoding instead.\r\n */\r\n\r\nclass GammaCorrectionEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new gamma correction effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.gamma=2.0] - The gamma factor.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, gamma = 2.0 } = {}) {\r\n\r\n\t\tsuper(\"GammaCorrectionEffect\", fragmentShader$n, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"gamma\", new Uniform(gamma)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * Generates noise.\r\n *\r\n * @private\r\n * @param {Number} size - The linear texture size.\r\n * @param {Number} format - The texture format.\r\n * @param {Number} type - The texture type.\r\n * @return {TypedArray} The noise data.\r\n */\r\n\r\nfunction getNoise(size, format, type) {\r\n\r\n\tconst channels = new Map([\r\n\t\t[LuminanceFormat, 1],\r\n\t\t[RedFormat, 1],\r\n\t\t[RGFormat, 2],\r\n\t\t[RGBFormat, 3],\r\n\t\t[RGBAFormat, 4]\r\n\t]);\r\n\r\n\tlet data;\r\n\r\n\tif(!channels.has(format)) {\r\n\r\n\t\tconsole.error(\"Invalid noise texture format\");\r\n\r\n\t}\r\n\r\n\tif(type === UnsignedByteType) {\r\n\r\n\t\tdata = new Uint8Array(size * channels.get(format));\r\n\r\n\t\tfor(let i = 0, l = data.length; i < l; ++i) {\r\n\r\n\t\t\tdata[i] = Math.random() * 255;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tdata = new Float32Array(size * channels.get(format));\r\n\r\n\t\tfor(let i = 0, l = data.length; i < l; ++i) {\r\n\r\n\t\t\tdata[i] = Math.random();\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn data;\r\n\r\n}\r\n\r\n/**\r\n * A simple noise texture.\r\n */\r\n\r\nclass NoiseTexture extends DataTexture {\r\n\r\n\t/**\r\n\t * Constructs a new noise texture.\r\n\t *\r\n\t * The texture format can be either `LuminanceFormat`, `RGBFormat` or\r\n\t * `RGBAFormat`. Additionally, the formats `RedFormat` and `RGFormat` can be\r\n\t * used in a WebGL 2 context.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t * @param {Number} [format=LuminanceFormat] - The texture format.\r\n\t * @param {Number} [type=UnsignedByteType] - The texture type.\r\n\t */\r\n\r\n\tconstructor(width, height, format = LuminanceFormat, type = UnsignedByteType) {\r\n\r\n\t\tsuper(getNoise(width * height, format, type), width, height, format, type);\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * Creates a new canvas from raw image data.\r\n *\r\n * @private\r\n * @param {Number} width - The image width.\r\n * @param {Number} height - The image height.\r\n * @param {Uint8ClampedArray} data - The image data.\r\n * @return {Canvas} The canvas.\r\n */\r\n\r\nfunction createCanvas(width, height, data) {\r\n\r\n\tconst canvas = document.createElementNS(\"http://www.w3.org/1999/xhtml\", \"canvas\");\r\n\tconst context = canvas.getContext(\"2d\");\r\n\r\n\tconst imageData = context.createImageData(width, height);\r\n\timageData.data.set(data);\r\n\r\n\tcanvas.width = width;\r\n\tcanvas.height = height;\r\n\r\n\tcontext.putImageData(imageData, 0, 0);\r\n\r\n\treturn canvas;\r\n\r\n}\r\n\r\n/**\r\n * A container for raw image data.\r\n */\r\n\r\nclass RawImageData {\r\n\r\n\t/**\r\n\t * Constructs a new image data container.\r\n\t *\r\n\t * @param {Number} [width=0] - The width of the image.\r\n\t * @param {Number} [height=0] - The height of the image.\r\n\t * @param {Uint8ClampedArray} [data=null] - The image data.\r\n\t */\r\n\r\n\tconstructor(width = 0, height = 0, data = null) {\r\n\r\n\t\t/**\r\n\t\t * The width of the image.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.width = width;\r\n\r\n\t\t/**\r\n\t\t * The height of the image.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.height = height;\r\n\r\n\t\t/**\r\n\t\t * The image data.\r\n\t\t *\r\n\t\t * @type {Uint8ClampedArray}\r\n\t\t */\r\n\r\n\t\tthis.data = data;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a canvas from this image data.\r\n\t *\r\n\t * @return {Canvas} The canvas or null if it couldn't be created.\r\n\t */\r\n\r\n\ttoCanvas() {\r\n\r\n\t\treturn (typeof document === \"undefined\") ? null : createCanvas(\r\n\t\t\tthis.width,\r\n\t\t\tthis.height,\r\n\t\t\tthis.data\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a new image data container.\r\n\t *\r\n\t * @param {Object} data - Raw image data.\r\n\t * @return {RawImageData} The image data.\r\n\t */\r\n\r\n\tstatic from(data) {\r\n\r\n\t\treturn new RawImageData(data.width, data.height, data.data);\r\n\r\n\t}\r\n\r\n}\n\nvar workerProgram = \"!function(){\\\"use strict\\\";function e(e,t){if(!(e instanceof t))throw new TypeError(\\\"Cannot call a class as a function\\\")}function t(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,\\\"value\\\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}var n=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e(this,t),this.width=a,this.height=n,this.data=s}return a(t,[{key:\\\"toCanvas\\\",value:function(){return\\\"undefined\\\"==typeof document?null:(e=this.width,t=this.height,a=this.data,n=document.createElementNS(\\\"http://www.w3.org/1999/xhtml\\\",\\\"canvas\\\"),s=n.getContext(\\\"2d\\\"),(r=s.createImageData(e,t)).data.set(a),n.width=e,n.height=t,s.putImageData(r,0,0),n);var e,t,a,n,s,r}}],[{key:\\\"from\\\",value:function(e){return new t(e.width,e.height,e.data)}}]),t}(),s=function(){function t(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e(this,t),this.x=a,this.y=n}return a(t,[{key:\\\"set\\\",value:function(e,t){return this.x=e,this.y=t,this}},{key:\\\"equals\\\",value:function(e){return this===e||this.x===e.x&&this.y===e.y}}]),t}(),r=function t(){e(this,t),this.min=new s,this.max=new s},i=new r,y=new r,c=new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),u=[new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125])],h=[new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4])],o=[new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3])];function w(e,t,a){return e+(t-e)*a}function x(e,t){var a,n=t.min,s=t.max,r=.5*Math.sqrt(2*n.x),i=.5*Math.sqrt(2*n.y),y=.5*Math.sqrt(2*s.x),c=.5*Math.sqrt(2*s.y),u=(a=e/32,Math.min(Math.max(a,0),1));return n.set(w(r,n.x,u),w(i,n.y,u)),s.set(w(y,s.x,u),w(c,s.y,u)),t}function f(e,t,a,n){var s,r,i,y,c=t.x-e.x,u=t.y-e.y,h=a,o=a+1,w=e.y+u*(h-e.x)/c,x=e.y+u*(o-e.x)/c;return h>=e.x&&h<t.x||o>e.x&&o<=t.x?Math.sign(w)===Math.sign(x)||Math.abs(w)<1e-4||Math.abs(x)<1e-4?(s=(w+x)/2)<0?n.set(Math.abs(s),0):n.set(0,Math.abs(s)):(r=(y=-e.y*c/u+e.x)>e.x?w*(y-Math.trunc(y))/2:0,i=y<t.x?x*(1-(y-Math.trunc(y)))/2:0,(s=Math.abs(r)>Math.abs(i)?r:-i)<0?n.set(Math.abs(r),Math.abs(i)):n.set(Math.abs(i),Math.abs(r))):n.set(0,0),n}function l(e,t,a,n,s){var r=i.min,c=i.max,u=y.min,h=y.max,o=y,w=.5+n,l=.5+n-1,b=t+a+1;switch(e){case 0:s.set(0,0);break;case 1:t<=a?f(r.set(0,l),c.set(b/2,0),t,s):s.set(0,0);break;case 2:t>=a?f(r.set(b/2,0),c.set(b,l),t,s):s.set(0,0);break;case 3:f(r.set(0,l),c.set(b/2,0),t,u),f(r.set(b/2,0),c.set(b,l),t,h),x(b,o),s.set(u.x+h.x,u.y+h.y);break;case 4:t<=a?f(r.set(0,w),c.set(b/2,0),t,s):s.set(0,0);break;case 5:s.set(0,0);break;case 6:Math.abs(n)>0?(f(r.set(0,w),c.set(b,l),t,u),f(r.set(0,w),c.set(b/2,0),t,h),f(r.set(b/2,0),c.set(b,l),t,s),h.set(h.x+s.x,h.y+s.y),s.set((u.x+h.x)/2,(u.y+h.y)/2)):f(r.set(0,w),c.set(b,l),t,s);break;case 7:f(r.set(0,w),c.set(b,l),t,s);break;case 8:t>=a?f(r.set(b/2,0),c.set(b,w),t,s):s.set(0,0);break;case 9:Math.abs(n)>0?(f(r.set(0,l),c.set(b,w),t,u),f(r.set(0,l),c.set(b/2,0),t,h),f(r.set(b/2,0),c.set(b,w),t,s),h.set(h.x+s.x,h.y+s.y),s.set((u.x+h.x)/2,(u.y+h.y)/2)):f(r.set(0,l),c.set(b,w),t,s);break;case 10:s.set(0,0);break;case 11:f(r.set(0,l),c.set(b,w),t,s);break;case 12:f(r.set(0,w),c.set(b/2,0),t,u),f(r.set(b/2,0),c.set(b,w),t,h),x(b,o),s.set(u.x+h.x,u.y+h.y);break;case 13:f(r.set(0,l),c.set(b,w),t,s);break;case 14:f(r.set(0,w),c.set(b,l),t,s);break;case 15:s.set(0,0)}return s}function b(e,t,a,n){var s=e.equals(t);if(!s){var r=(e.x+t.x)/2,i=(e.y+t.y)/2;s=(t.y-e.y)*(a-r)+(e.x-t.x)*(n-i)>0}return s}function A(e,t,a,n){var s,r,i;for(s=0,i=0;i<30;++i)for(r=0;r<30;++r)b(e,t,a+r/29,n+i/29)&&++s;return s/900}function v(e,t,a,n,s,r){var i=o[e],y=i[0],c=i[1];return y>0&&(t.x+=s[0],t.y+=s[1]),c>0&&(a.x+=s[0],a.y+=s[1]),r.set(1-A(t,a,1+n,0+n),A(t,a,1+n,1+n))}function k(e,t,a,n,s){var r=i.min,c=i.max,u=y.min,h=y.max,o=t+a+1;switch(e){case 0:v(e,r.set(1,1),c.set(1+o,1+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 1:v(e,r.set(1,0),c.set(0+o,0+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 2:v(e,r.set(0,0),c.set(1+o,0+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 3:v(e,r.set(1,0),c.set(1+o,0+o),t,n,s);break;case 4:v(e,r.set(1,1),c.set(0+o,0+o),t,n,u),v(e,r.set(1,1),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 5:v(e,r.set(1,1),c.set(0+o,0+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 6:v(e,r.set(1,1),c.set(1+o,0+o),t,n,s);break;case 7:v(e,r.set(1,1),c.set(1+o,0+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 8:v(e,r.set(0,0),c.set(1+o,1+o),t,n,u),v(e,r.set(1,0),c.set(1+o,1+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 9:v(e,r.set(1,0),c.set(1+o,1+o),t,n,s);break;case 10:v(e,r.set(0,0),c.set(1+o,1+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 11:v(e,r.set(1,0),c.set(1+o,1+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 12:v(e,r.set(1,1),c.set(1+o,1+o),t,n,s);break;case 13:v(e,r.set(1,1),c.set(1+o,1+o),t,n,u),v(e,r.set(1,0),c.set(1+o,1+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 14:v(e,r.set(1,1),c.set(1+o,1+o),t,n,u),v(e,r.set(1,1),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2);break;case 15:v(e,r.set(1,1),c.set(1+o,1+o),t,n,u),v(e,r.set(1,0),c.set(1+o,0+o),t,n,h),s.set((u.x+h.x)/2,(u.y+h.y)/2)}return s}function U(e,t,a){var n,r,i,y,c,u,h,o,w=new s;for(n=0,r=e.length;n<r;++n)for(h=(u=e[n]).data,o=u.width,y=0;y<o;++y)for(i=0;i<o;++i)a?l(n,i,y,t,w):k(n,i,y,t,w),h[c=2*(y*o+i)]=255*w.x,h[c+1]=255*w.y}function d(e,t,a,n,r,i){var y,c,u,h,o,w,x,f,l,b,A=new s,v=i.data,k=i.width;for(y=0,c=t.length;y<c;++y)for(x=a[y],l=(f=t[y]).data,b=f.width,h=0;h<n;++h)for(u=0;u<n;++u)A.set(x[0]*n+e.x+u,x[1]*n+e.y+h),w=r?2*(h*h*b+u*u):2*(h*b+u),v[o=4*(A.y*k+A.x)]=l[w],v[o+1]=l[w+1],v[o+2]=0,v[o+3]=255}var g=function(){function t(){e(this,t)}return a(t,null,[{key:\\\"generate\\\",value:function(){var e,t,a=5*c.length*16,r=new Uint8ClampedArray(160*a*4),i=new n(160,a,r),y=Math.pow(15,2)+1,w=[],x=[],f=new s;for(e=0;e<16;++e)w.push(new n(y,y,new Uint8ClampedArray(y*y*2),2)),x.push(new n(20,20,new Uint8ClampedArray(800),2));for(e=0,t=c.length;e<t;++e)U(w,c[e],!0),f.set(0,80*e),d(f,w,h,16,!0,i);for(e=0,t=u.length;e<t;++e)U(x,u[e],!1),f.set(80,80*e),d(f,x,o,20,!1,i);return i}}]),t}(),m=new Map([[p([0,0,0,0]),[0,0,0,0]],[p([0,0,0,1]),[0,0,0,1]],[p([0,0,1,0]),[0,0,1,0]],[p([0,0,1,1]),[0,0,1,1]],[p([0,1,0,0]),[0,1,0,0]],[p([0,1,0,1]),[0,1,0,1]],[p([0,1,1,0]),[0,1,1,0]],[p([0,1,1,1]),[0,1,1,1]],[p([1,0,0,0]),[1,0,0,0]],[p([1,0,0,1]),[1,0,0,1]],[p([1,0,1,0]),[1,0,1,0]],[p([1,0,1,1]),[1,0,1,1]],[p([1,1,0,0]),[1,1,0,0]],[p([1,1,0,1]),[1,1,0,1]],[p([1,1,1,0]),[1,1,1,0]],[p([1,1,1,1]),[1,1,1,1]]]);function M(e,t,a){return e+(t-e)*a}function p(e){var t=M(e[0],e[1],.75),a=M(e[2],e[3],.75);return M(t,a,.875)}function C(e,t){var a=0;return 1===t[3]&&1!==e[1]&&1!==e[3]&&(a+=1),1===a&&1===t[2]&&1!==e[0]&&1!==e[2]&&(a+=1),a}var q=function(){function t(){e(this,t)}return a(t,null,[{key:\\\"generate\\\",value:function(){var e,t,a,s,r,i,y,c,u,h,o=new Uint8ClampedArray(2178),w=new Uint8ClampedArray(4096);for(t=0;t<33;++t)for(e=0;e<66;++e)a=.03125*e,s=.03125*t,m.has(a)&&m.has(s)&&(i=m.get(a),y=m.get(s),o[r=66*t+e]=127*(c=i,h=void 0,h=0,1===(u=y)[3]&&(h+=1),1===h&&1===u[2]&&1!==c[1]&&1!==c[3]&&(h+=1),h),o[r+33]=127*C(i,y));for(r=0,t=17;t<33;++t)for(e=0;e<64;++e,r+=4)w[r]=o[66*t+e],w[r+3]=255;return new n(64,16,w)}}]),t}();self.addEventListener(\\\"message\\\",(function(e){var t=g.generate(),a=q.generate();postMessage({areaImageData:t,searchImageData:a},[t.data.buffer,a.data.buffer]),close()}))}();\\n\";\n\n/**\r\n * Generates the SMAA data images.\r\n *\r\n * @private\r\n * @param {Boolean} [disableCache=false] - Determines whether the generated image data should be cached.\r\n * @return {Promise} A promise that returns the search image and area image as a data URL pair.\r\n */\r\n\r\nfunction generate(disableCache = false) {\r\n\r\n\tconst workerURL = URL.createObjectURL(new Blob([workerProgram], { type: \"text/javascript\" }));\r\n\tconst worker = new Worker(workerURL);\r\n\r\n\treturn new Promise((resolve, reject) => {\r\n\r\n\t\tworker.addEventListener(\"error\", (event) => reject(event.error));\r\n\t\tworker.addEventListener(\"message\", (event) => {\r\n\r\n\t\t\tconst searchImageData = RawImageData.from(event.data.searchImageData);\r\n\t\t\tconst areaImageData = RawImageData.from(event.data.areaImageData);\r\n\r\n\t\t\tconst urls = [\r\n\t\t\t\tsearchImageData.toCanvas().toDataURL(),\r\n\t\t\t\tareaImageData.toCanvas().toDataURL()\r\n\t\t\t];\r\n\r\n\t\t\tif(!disableCache && window.localStorage !== undefined) {\r\n\r\n\t\t\t\tlocalStorage.setItem(\"smaa-search\", urls[0]);\r\n\t\t\t\tlocalStorage.setItem(\"smaa-area\", urls[1]);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tURL.revokeObjectURL(workerURL);\r\n\t\t\tresolve(urls);\r\n\r\n\t\t});\r\n\r\n\t\tworker.postMessage(null);\r\n\r\n\t});\r\n\r\n}\r\n\r\n/**\r\n * An SMAA image loader.\r\n *\r\n * This loader uses a worker thread to generate the search and area images. The\r\n * Generated data URLs will be cached using localStorage, if available. To\r\n * disable caching, please refer to {@link SMAAImageLoader.disableCache}.\r\n *\r\n * @experimental Added for testing, API might change in patch or minor releases. Requires three >= r108.\r\n */\r\n\r\nclass SMAAImageLoader extends Loader {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA image loader.\r\n\t *\r\n\t * @param {LoadingManager} [manager] - A loading manager.\r\n\t */\r\n\r\n\tconstructor(manager) {\r\n\r\n\t\tsuper(manager);\r\n\r\n\t\t/**\r\n\t\t * Indicates whether data image caching is disabled.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.disableCache = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Loads the SMAA data images.\r\n\t *\r\n\t * @param {Function} [onLoad] - A function to call when the loading process is done.\r\n\t * @param {Function} [onError] - A function to call when an error occurs.\r\n\t * @return {Promise} A promise that returns the search image and area image as a pair.\r\n\t */\r\n\r\n\tload(onLoad = () => {}, onError = () => {}) {\r\n\r\n\t\t// Conform to the signature (url, onLoad, onProgress, onError).\r\n\t\tif(arguments.length === 4) {\r\n\r\n\t\t\tonLoad = arguments[1];\r\n\t\t\tonError = arguments[3];\r\n\r\n\t\t} else if(arguments.length === 3 || typeof arguments[0] !== \"function\") {\r\n\r\n\t\t\tonLoad = arguments[1];\r\n\t\t\tonError = () => {};\r\n\r\n\t\t}\r\n\r\n\t\tconst externalManager = this.manager;\r\n\t\tconst internalManager = new LoadingManager();\r\n\r\n\t\texternalManager.itemStart(\"smaa-search\");\r\n\t\texternalManager.itemStart(\"smaa-area\");\r\n\t\tinternalManager.itemStart(\"smaa-search\");\r\n\t\tinternalManager.itemStart(\"smaa-area\");\r\n\r\n\t\treturn new Promise((resolve, reject) => {\r\n\r\n\t\t\tconst cachedURLs = (!this.disableCache && window.localStorage !== undefined) ? [\r\n\t\t\t\tlocalStorage.getItem(\"smaa-search\"),\r\n\t\t\t\tlocalStorage.getItem(\"smaa-area\")\r\n\t\t\t] : [null, null];\r\n\r\n\t\t\tconst promise = (cachedURLs[0] !== null && cachedURLs[1] !== null) ?\r\n\t\t\t\tPromise.resolve(cachedURLs) : generate(this.disableCache);\r\n\r\n\t\t\tpromise.then((urls) => {\r\n\r\n\t\t\t\tconst result = [new Image(), new Image()];\r\n\r\n\t\t\t\tinternalManager.onLoad = () => {\r\n\r\n\t\t\t\t\tonLoad(result);\r\n\t\t\t\t\tresolve(result);\r\n\r\n\t\t\t\t};\r\n\r\n\t\t\t\tresult[0].addEventListener(\"load\", () => {\r\n\r\n\t\t\t\t\texternalManager.itemEnd(\"smaa-search\");\r\n\t\t\t\t\tinternalManager.itemEnd(\"smaa-search\");\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresult[1].addEventListener(\"load\", () => {\r\n\r\n\t\t\t\t\texternalManager.itemEnd(\"smaa-area\");\r\n\t\t\t\t\tinternalManager.itemEnd(\"smaa-area\");\r\n\r\n\t\t\t\t});\r\n\r\n\t\t\t\tresult[0].src = urls[0];\r\n\t\t\t\tresult[1].src = urls[1];\r\n\r\n\t\t\t}).catch((error) => {\r\n\r\n\t\t\t\texternalManager.itemError(\"smaa-search\");\r\n\t\t\t\texternalManager.itemError(\"smaa-area\");\r\n\r\n\t\t\t\tonError(error);\r\n\t\t\t\treject(error);\r\n\r\n\t\t\t});\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A 2D vector.\r\n *\r\n * @private\r\n */\r\n\r\nclass Vector2 {\r\n\r\n\t/**\r\n\t * Constructs a new vector.\r\n\t *\r\n\t * @param {Number} [x=0] - The initial x value.\r\n\t * @param {Number} [y=0] - The initial y value.\r\n\t */\r\n\r\n\tconstructor(x = 0, y = 0) {\r\n\r\n\t\t/**\r\n\t\t * The X component.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.x = x;\r\n\r\n\t\t/**\r\n\t\t * The Y component.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.y = y;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the components of this vector.\r\n\t *\r\n\t * @param {Number} x - The new x value.\r\n\t * @param {Number} y - The new y value.\r\n\t * @return {Vector2} This vector.\r\n\t */\r\n\r\n\tset(x, y) {\r\n\r\n\t\tthis.x = x;\r\n\t\tthis.y = y;\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Checks if the given vector equals this vector.\r\n\t *\r\n\t * @param {Vector2} v - A vector.\r\n\t * @return {Boolean} Whether this vector equals the given one.\r\n\t */\r\n\r\n\tequals(v) {\r\n\r\n\t\treturn (this === v || (this.x === v.x && this.y === v.y));\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A 2D box.\r\n *\r\n * @private\r\n */\r\n\r\nclass Box2 {\r\n\r\n\t/**\r\n\t * Constructs a new box.\r\n\t */\r\n\r\n\tconstructor() {\r\n\r\n\t\tthis.min = new Vector2();\r\n\t\tthis.max = new Vector2();\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A box.\r\n *\r\n * @type {Box2}\r\n * @private\r\n */\r\n\r\nconst b0 = new Box2();\r\n\r\n/**\r\n * A box.\r\n *\r\n * @type {Box2}\r\n * @private\r\n */\r\n\r\nconst b1 = new Box2();\r\n\r\n/**\r\n * The orthogonal texture size.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst ORTHOGONAL_SIZE = 16;\r\n\r\n/**\r\n * The diagonal texture size.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst DIAGONAL_SIZE = 20;\r\n\r\n/**\r\n * The number of samples for calculating areas in the diagonal textures.\r\n * Diagonal areas are calculated using brute force sampling.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst DIAGONAL_SAMPLES = 30;\r\n\r\n/**\r\n * The maximum distance for smoothing U-shapes.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst SMOOTH_MAX_DISTANCE = 32;\r\n\r\n/**\r\n * Subsampling offsets for orthogonal areas.\r\n *\r\n * @type {Float32Array}\r\n * @private\r\n */\r\n\r\nconst orthogonalSubsamplingOffsets = new Float32Array([\r\n\t0.0, -0.25, 0.25, -0.125, 0.125, -0.375, 0.375\r\n]);\r\n\r\n/**\r\n * Subsampling offset pairs for diagonal areas.\r\n *\r\n * @type {Float32Array[]}\r\n * @private\r\n */\r\n\r\nconst diagonalSubsamplingOffsets = [\r\n\r\n\tnew Float32Array([0.0, 0.0]),\r\n\tnew Float32Array([0.25, -0.25]),\r\n\tnew Float32Array([-0.25, 0.25]),\r\n\tnew Float32Array([0.125, -0.125]),\r\n\tnew Float32Array([-0.125, 0.125])\r\n\r\n];\r\n\r\n/**\r\n * Orthogonal pattern positioning coordinates.\r\n *\r\n * Used for placing each pattern subtexture into a specific spot.\r\n *\r\n * @type {Uint8Array[]}\r\n * @private\r\n */\r\n\r\nconst orthogonalEdges = [\r\n\r\n\tnew Uint8Array([0, 0]),\r\n\tnew Uint8Array([3, 0]),\r\n\tnew Uint8Array([0, 3]),\r\n\tnew Uint8Array([3, 3]),\r\n\r\n\tnew Uint8Array([1, 0]),\r\n\tnew Uint8Array([4, 0]),\r\n\tnew Uint8Array([1, 3]),\r\n\tnew Uint8Array([4, 3]),\r\n\r\n\tnew Uint8Array([0, 1]),\r\n\tnew Uint8Array([3, 1]),\r\n\tnew Uint8Array([0, 4]),\r\n\tnew Uint8Array([3, 4]),\r\n\r\n\tnew Uint8Array([1, 1]),\r\n\tnew Uint8Array([4, 1]),\r\n\tnew Uint8Array([1, 4]),\r\n\tnew Uint8Array([4, 4])\r\n\r\n];\r\n\r\n/**\r\n * Diagonal pattern positioning coordinates.\r\n *\r\n * Used for placing each pattern subtexture into a specific spot.\r\n *\r\n * @type {Uint8Array[]}\r\n * @private\r\n */\r\n\r\nconst diagonalEdges = [\r\n\r\n\tnew Uint8Array([0, 0]),\r\n\tnew Uint8Array([1, 0]),\r\n\tnew Uint8Array([0, 2]),\r\n\tnew Uint8Array([1, 2]),\r\n\r\n\tnew Uint8Array([2, 0]),\r\n\tnew Uint8Array([3, 0]),\r\n\tnew Uint8Array([2, 2]),\r\n\tnew Uint8Array([3, 2]),\r\n\r\n\tnew Uint8Array([0, 1]),\r\n\tnew Uint8Array([1, 1]),\r\n\tnew Uint8Array([0, 3]),\r\n\tnew Uint8Array([1, 3]),\r\n\r\n\tnew Uint8Array([2, 1]),\r\n\tnew Uint8Array([3, 1]),\r\n\tnew Uint8Array([2, 3]),\r\n\tnew Uint8Array([3, 3])\r\n\r\n];\r\n\r\n/**\r\n * Linearly interpolates between two values.\r\n *\r\n * @private\r\n * @param {Number} a - The initial value.\r\n * @param {Number} b - The target value.\r\n * @param {Number} p - The interpolation value.\r\n * @return {Number} The interpolated value.\r\n */\r\n\r\nfunction lerp(a, b, p) {\r\n\r\n\treturn a + (b - a) * p;\r\n\r\n}\r\n\r\n/**\r\n * Clamps a value to the range [0, 1].\r\n *\r\n * @private\r\n * @param {Number} a - The value.\r\n * @return {Number} The saturated value.\r\n */\r\n\r\nfunction saturate(a) {\r\n\r\n\treturn Math.min(Math.max(a, 0.0), 1.0);\r\n\r\n}\r\n\r\n/**\r\n * A smoothing function for small U-patterns.\r\n *\r\n * @private\r\n * @param {Number} d - A smoothing factor.\r\n * @param {Box2} b - The area that should be smoothed.\r\n * @return {Box2} The smoothed area.\r\n */\r\n\r\nfunction smoothArea(d, b) {\r\n\r\n\tconst a1 = b.min;\r\n\tconst a2 = b.max;\r\n\r\n\tconst b1X = Math.sqrt(a1.x * 2.0) * 0.5;\r\n\tconst b1Y = Math.sqrt(a1.y * 2.0) * 0.5;\r\n\tconst b2X = Math.sqrt(a2.x * 2.0) * 0.5;\r\n\tconst b2Y = Math.sqrt(a2.y * 2.0) * 0.5;\r\n\r\n\tconst p = saturate(d / SMOOTH_MAX_DISTANCE);\r\n\r\n\ta1.set(lerp(b1X, a1.x, p), lerp(b1Y, a1.y, p));\r\n\ta2.set(lerp(b2X, a2.x, p), lerp(b2Y, a2.y, p));\r\n\r\n\treturn b;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area under the line p1 -> p2, for the pixels (x, x + 1).\r\n *\r\n * @private\r\n * @param {Vector2} p1 - The starting point of the line.\r\n * @param {Vector2} p2 - The ending point of the line.\r\n * @param {Number} x - The pixel index.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The area.\r\n */\r\n\r\nfunction calculateOrthogonalArea(p1, p2, x, result) {\r\n\r\n\tconst dX = p2.x - p1.x;\r\n\tconst dY = p2.y - p1.y;\r\n\r\n\tconst x1 = x;\r\n\tconst x2 = x + 1.0;\r\n\r\n\tconst y1 = p1.y + dY * (x1 - p1.x) / dX;\r\n\tconst y2 = p1.y + dY * (x2 - p1.x) / dX;\r\n\r\n\tlet a, a1, a2, t;\r\n\r\n\t// Check if x is inside the area.\r\n\tif((x1 >= p1.x && x1 < p2.x) || (x2 > p1.x && x2 <= p2.x)) {\r\n\r\n\t\t// Check if this is a trapezoid.\r\n\t\tif(Math.sign(y1) === Math.sign(y2) || Math.abs(y1) < 1e-4 || Math.abs(y2) < 1e-4) {\r\n\r\n\t\t\ta = (y1 + y2) / 2.0;\r\n\r\n\t\t\tif(a < 0.0) {\r\n\r\n\t\t\t\tresult.set(Math.abs(a), 0.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0.0, Math.abs(a));\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t// Two triangles.\r\n\t\t\tt = -p1.y * dX / dY + p1.x;\r\n\r\n\t\t\ta1 = (t > p1.x) ? y1 * (t - Math.trunc(t)) / 2.0 : 0.0;\r\n\t\t\ta2 = (t < p2.x) ? y2 * (1.0 - (t - Math.trunc(t))) / 2.0 : 0.0;\r\n\r\n\t\t\ta = (Math.abs(a1) > Math.abs(a2)) ? a1 : -a2;\r\n\r\n\t\t\tif(a < 0.0) {\r\n\r\n\t\t\t\tresult.set(Math.abs(a1), Math.abs(a2));\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(Math.abs(a2), Math.abs(a1));\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tresult.set(0, 0);\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area for a given pattern and distances to the left and to the\r\n * right, biased by an offset.\r\n *\r\n * @private\r\n * @param {Number} pattern - A pattern index.\r\n * @param {Number} left - The left distance.\r\n * @param {Number} right - The right distance.\r\n * @param {Number} offset - An offset.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The orthogonal area.\r\n */\r\n\r\nfunction calculateOrthogonalAreaForPattern(pattern, left, right, offset, result) {\r\n\r\n\tconst p1 = b0.min;\r\n\tconst p2 = b0.max;\r\n\tconst a1 = b1.min;\r\n\tconst a2 = b1.max;\r\n\tconst a = b1;\r\n\r\n\t/* o1           |\r\n\t *      .-------\r\n\t * o2   |\r\n\t *\r\n\t *      <---d--->\r\n\t */\r\n\r\n\tconst o1 = 0.5 + offset;\r\n\tconst o2 = 0.5 + offset - 1.0;\r\n\tconst d = left + right + 1;\r\n\r\n\tswitch(pattern) {\r\n\r\n\t\tcase 0: {\r\n\r\n\t\t\t//    ------\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 1: {\r\n\r\n\t\t\t/*   .------\r\n\t\t\t *   |\r\n\t\t\t *\r\n\t\t\t * The offset is only applied to L patterns in the crossing edge side to\r\n\t\t\t * make it converge with the unfiltered pattern 0.\r\n\t\t\t * The pattern 0 must not be filtered to avoid artifacts.\r\n\t\t\t */\r\n\r\n\t\t\tif(left <= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d / 2.0, 0.0), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 2: {\r\n\r\n\t\t\t/*    ------.\r\n\t\t\t *          |\r\n\t\t\t */\r\n\r\n\t\t\tif(left >= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o2), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 3: {\r\n\r\n\t\t\t/*   .------.\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d / 2.0, 0.0), left, a1);\r\n\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o2), left, a2);\r\n\r\n\t\t\tsmoothArea(d, a);\r\n\r\n\t\t\tresult.set(a1.x + a2.x, a1.y + a2.y);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 4: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   `------\r\n\t\t\t */\r\n\r\n\t\t\tif(left <= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d / 2.0, 0.0), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 5: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   +------\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 6: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   `------.\r\n\t\t\t *          |\r\n\t\t\t *\r\n\t\t\t * A problem of not offseting L patterns (see above) is that for certain\r\n\t\t\t * max search distances, the pixels in the center of a Z pattern will\r\n\t\t\t * detect the full Z pattern, while the pixels in the sides will detect an\r\n\t\t\t * L pattern. To avoid discontinuities, the full offsetted Z\r\n\t\t\t * revectorization is blended with partially offsetted L patterns.\r\n\t\t\t */\r\n\r\n\t\t\tif(Math.abs(offset) > 0.0) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, a1);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d / 2.0, 0.0), left, a2);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o2), left, result);\r\n\t\t\t\ta2.set(a2.x + result.x, a2.y + result.y);\r\n\r\n\t\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, result);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 7: {\r\n\r\n\t\t\t/*   |\r\n\t\t\t *   +------.\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 8: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *    ------\r\n\t\t\t */\r\n\r\n\t\t\tif(left >= right) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o1), left, result);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tresult.set(0, 0);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 9: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *   .------\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tif(Math.abs(offset) > 0.0) {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, a1);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d / 2.0, 0.0), left, a2);\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o1), left, result);\r\n\t\t\t\ta2.set(a2.x + result.x, a2.y + result.y);\r\n\r\n\t\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, result);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 10: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *    ------+\r\n\t\t\t *          |\r\n\t\t\t */\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 11: {\r\n\r\n\t\t\t/*          |\r\n\t\t\t *   .------+\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 12: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   `------\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d / 2.0, 0.0), left, a1);\r\n\t\t\tcalculateOrthogonalArea(p1.set(d / 2.0, 0.0), p2.set(d, o1), left, a2);\r\n\r\n\t\t\tsmoothArea(d, a);\r\n\r\n\t\t\tresult.set(a1.x + a2.x, a1.y + a2.y);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 13: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   +------\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o2), p2.set(d, o1), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 14: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   `------+\r\n\t\t\t *          |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateOrthogonalArea(p1.set(0.0, o1), p2.set(d, o2), left, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 15: {\r\n\r\n\t\t\t/*   |      |\r\n\t\t\t *   +------+\r\n\t\t\t *   |      |\r\n\t\t\t */\r\n\r\n\t\t\tresult.set(0, 0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Determines whether the given pixel is inside the specified area.\r\n *\r\n * @private\r\n * @param {Vector2} p1 - The lower bounds of the area.\r\n * @param {Vector2} p2 - The upper bounds of the area.\r\n * @param {Vector2} x - The X-coordinates.\r\n * @param {Vector2} y - The Y-coordinates.\r\n * @return {Vector2} Whether the pixel lies inside the area.\r\n */\r\n\r\nfunction isInsideArea(p1, p2, x, y) {\r\n\r\n\tlet result = p1.equals(p2);\r\n\r\n\tif(!result) {\r\n\r\n\t\tlet xm = (p1.x + p2.x) / 2.0;\r\n\t\tlet ym = (p1.y + p2.y) / 2.0;\r\n\r\n\t\tlet a = p2.y - p1.y;\r\n\t\tlet b = p1.x - p2.x;\r\n\r\n\t\tlet c = a * (x - xm) + b * (y - ym);\r\n\r\n\t\tresult = (c > 0.0);\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area under the line p1 -> p2 for the pixel p using brute force\r\n * sampling.\r\n *\r\n * @private\r\n * @param {Vector2} p1 - The lower bounds of the area.\r\n * @param {Vector2} p2 - The upper bounds of the area.\r\n * @param {Number} pX - The X-coordinates.\r\n * @param {Number} pY - The Y-coordinates.\r\n * @return {Number} The amount of pixels inside the area relative to the total amount of sampled pixels.\r\n */\r\n\r\nfunction calculateDiagonalAreaForPixel(p1, p2, pX, pY) {\r\n\r\n\tlet a;\r\n\tlet x, y;\r\n\tlet offsetX, offsetY;\r\n\r\n\tfor(a = 0, y = 0; y < DIAGONAL_SAMPLES; ++y) {\r\n\r\n\t\tfor(x = 0; x < DIAGONAL_SAMPLES; ++x) {\r\n\r\n\t\t\toffsetX = x / (DIAGONAL_SAMPLES - 1.0);\r\n\t\t\toffsetY = y / (DIAGONAL_SAMPLES - 1.0);\r\n\r\n\t\t\tif(isInsideArea(p1, p2, pX + offsetX, pY + offsetY)) {\r\n\r\n\t\t\t\t++a;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn a / (DIAGONAL_SAMPLES * DIAGONAL_SAMPLES);\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area under the line p1 -> p2. This includes the pixel and its\r\n * opposite.\r\n *\r\n * @private\r\n * @param {Number} pattern - A pattern index.\r\n * @param {Vector2} p1 - The lower bounds of the area.\r\n * @param {Vector2} p2 - The upper bounds of the area.\r\n * @param {Number} left - The left distance.\r\n * @param {Float32Array} offset - An offset.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The area.\r\n */\r\n\r\nfunction calculateDiagonalArea(pattern, p1, p2, left, offset, result) {\r\n\r\n\tconst e = diagonalEdges[pattern];\r\n\tconst e1 = e[0];\r\n\tconst e2 = e[1];\r\n\r\n\tif(e1 > 0) {\r\n\r\n\t\tp1.x += offset[0];\r\n\t\tp1.y += offset[1];\r\n\r\n\t}\r\n\r\n\tif(e2 > 0) {\r\n\r\n\t\tp2.x += offset[0];\r\n\t\tp2.y += offset[1];\r\n\r\n\t}\r\n\r\n\treturn result.set(\r\n\t\t1.0 - calculateDiagonalAreaForPixel(p1, p2, 1.0 + left, 0.0 + left),\r\n\t\tcalculateDiagonalAreaForPixel(p1, p2, 1.0 + left, 1.0 + left)\r\n\t);\r\n\r\n}\r\n\r\n/**\r\n * Calculates the area for a given pattern and distances to the left and to the\r\n * right, biased by an offset.\r\n *\r\n * @private\r\n * @param {Number} pattern - A pattern index.\r\n * @param {Number} left - The left distance.\r\n * @param {Number} right - The right distance.\r\n * @param {Float32Array} offset - An offset.\r\n * @param {Vector2} result - A target vector to store the area in.\r\n * @return {Vector2} The orthogonal area.\r\n */\r\n\r\nfunction calculateDiagonalAreaForPattern(pattern, left, right, offset, result) {\r\n\r\n\tconst p1 = b0.min;\r\n\tconst p2 = b0.max;\r\n\tconst a1 = b1.min;\r\n\tconst a2 = b1.max;\r\n\r\n\tconst d = left + right + 1;\r\n\r\n\t/* There is some Black Magic involved in the diagonal area calculations.\r\n\t *\r\n\t * Unlike orthogonal patterns, the \"null\" pattern (one without crossing edges)\r\n\t * must be filtered, and the ends of both the \"null\" and L patterns are not\r\n\t * known: L and U patterns have different endings, and the adjacent pattern is\r\n\t * unknown. Therefore, a blend of both possibilities is computed.\r\n\t */\r\n\r\n\tswitch(pattern) {\r\n\r\n\t\tcase 0: {\r\n\r\n\t\t\t/*         .-\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   \r\n\t\t\t */\r\n\r\n\t\t\t// First possibility.\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\r\n\t\t\t// Second possibility.\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\t// Blend both possibilities together.\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 1: {\r\n\r\n\t\t\t/*         .-\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(0.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 2: {\r\n\r\n\t\t\t/*         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   \r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(0.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 3: {\r\n\r\n\t\t\t/*\r\n\t\t\t *         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 4: {\r\n\r\n\t\t\t/*         .-\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * ----\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(0.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 5: {\r\n\r\n\t\t\t/*         .-\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * --.-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(0.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 6: {\r\n\r\n\t\t\t/*         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * ----\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 7: {\r\n\r\n\t\t\t/*         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * --.-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 8: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   \r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(0.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 9: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 10: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   \r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(0.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 11: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t *   .-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 12: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * ----\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, result);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 13: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         |\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * --.-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 1.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 14: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * ----\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tcase 15: {\r\n\r\n\t\t\t/*         |\r\n\t\t\t *         .----\r\n\t\t\t *       .-\r\n\t\t\t *     .-\r\n\t\t\t * --.-\r\n\t\t\t *   |\r\n\t\t\t *   |\r\n\t\t\t */\r\n\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 1.0), p2.set(1.0 + d, 1.0 + d), left, offset, a1);\r\n\t\t\tcalculateDiagonalArea(pattern, p1.set(1.0, 0.0), p2.set(1.0 + d, 0.0 + d), left, offset, a2);\r\n\r\n\t\t\tresult.set((a1.x + a2.x) / 2.0, (a1.y + a2.y) / 2.0);\r\n\r\n\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn result;\r\n\r\n}\r\n\r\n/**\r\n * Calculates orthogonal or diagonal patterns for a given offset.\r\n *\r\n * @private\r\n * @param {RawImageData[]} patterns - The patterns to assemble.\r\n * @param {Number|Float32Array} offset - A pattern offset. Diagonal offsets are pairs.\r\n * @param {Boolean} orthogonal - Whether the patterns are orthogonal or diagonal.\r\n */\r\n\r\nfunction generatePatterns(patterns, offset, orthogonal) {\r\n\r\n\tconst result = new Vector2();\r\n\r\n\tlet i, l;\r\n\tlet x, y;\r\n\tlet c;\r\n\r\n\tlet pattern;\r\n\tlet data, size;\r\n\r\n\tfor(i = 0, l = patterns.length; i < l; ++i) {\r\n\r\n\t\tpattern = patterns[i];\r\n\r\n\t\tdata = pattern.data;\r\n\t\tsize = pattern.width;\r\n\r\n\t\tfor(y = 0; y < size; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < size; ++x) {\r\n\r\n\t\t\t\tif(orthogonal) {\r\n\r\n\t\t\t\t\tcalculateOrthogonalAreaForPattern(i, x, y, offset, result);\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tcalculateDiagonalAreaForPattern(i, x, y, offset, result);\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tc = (y * size + x) * 2;\r\n\r\n\t\t\t\tdata[c] = result.x * 255;\r\n\t\t\t\tdata[c + 1] = result.y * 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Assembles orthogonal or diagonal patterns into the final area image.\r\n *\r\n * @private\r\n * @param {Vector2} base - A base position.\r\n * @param {RawImageData[]} patterns - The patterns to assemble.\r\n * @param {Uint8Array[]} edges - Edge coordinate pairs, used for positioning.\r\n * @param {Number} size - The pattern size.\r\n * @param {Boolean} orthogonal - Whether the patterns are orthogonal or diagonal.\r\n * @param {RawImageData} target - The target image data.\r\n */\r\n\r\nfunction assemble(base, patterns, edges, size, orthogonal, target) {\r\n\r\n\tconst p = new Vector2();\r\n\r\n\tconst dstData = target.data;\r\n\tconst dstWidth = target.width;\r\n\r\n\tlet i, l;\r\n\tlet x, y;\r\n\tlet c, d;\r\n\r\n\tlet edge;\r\n\tlet pattern;\r\n\tlet srcData, srcWidth;\r\n\r\n\tfor(i = 0, l = patterns.length; i < l; ++i) {\r\n\r\n\t\tedge = edges[i];\r\n\t\tpattern = patterns[i];\r\n\r\n\t\tsrcData = pattern.data;\r\n\t\tsrcWidth = pattern.width;\r\n\r\n\t\tfor(y = 0; y < size; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < size; ++x) {\r\n\r\n\t\t\t\tp.set(\r\n\t\t\t\t\tedge[0] * size + base.x + x,\r\n\t\t\t\t\tedge[1] * size + base.y + y\r\n\t\t\t\t);\r\n\r\n\t\t\t\tc = (p.y * dstWidth + p.x) * 4;\r\n\r\n\t\t\t\t/* The texture coordinates of orthogonal patterns are compressed\r\n\t\t\t\tquadratically to reach longer distances for a given texture size. */\r\n\t\t\t\td = orthogonal ? ((y * y * srcWidth + x * x) * 2) :\r\n\t\t\t\t\t((y * srcWidth + x) * 2);\r\n\r\n\t\t\t\tdstData[c] = srcData[d];\r\n\t\t\t\tdstData[c + 1] = srcData[d + 1];\r\n\t\t\t\tdstData[c + 2] = 0;\r\n\t\t\t\tdstData[c + 3] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * SMAA area image data.\r\n *\r\n * This texture allows to obtain the area for a certain pattern and distances\r\n * to the left and to the right of the identified line.\r\n *\r\n * Based on the official python scripts:\r\n *  https://github.com/iryoku/smaa/tree/master/Scripts\r\n */\r\n\r\nclass SMAAAreaImageData {\r\n\r\n\t/**\r\n\t * Creates a new area image.\r\n\t *\r\n\t * @return {RawImageData} The generated image data.\r\n\t */\r\n\r\n\tstatic generate() {\r\n\r\n\t\tconst width = 2 * 5 * ORTHOGONAL_SIZE;\r\n\t\tconst height = orthogonalSubsamplingOffsets.length * 5 * ORTHOGONAL_SIZE;\r\n\r\n\t\tconst data = new Uint8ClampedArray(width * height * 4);\r\n\t\tconst result = new RawImageData(width, height, data);\r\n\r\n\t\tconst orthogonalPatternSize = Math.pow(ORTHOGONAL_SIZE - 1, 2) + 1;\r\n\t\tconst diagonalPatternSize = DIAGONAL_SIZE;\r\n\r\n\t\tconst orthogonalPatterns = [];\r\n\t\tconst diagonalPatterns = [];\r\n\r\n\t\tconst base = new Vector2();\r\n\r\n\t\tlet i, l;\r\n\r\n\t\t// Prepare 16 image data sets for the orthogonal and diagonal subtextures.\r\n\t\tfor(i = 0; i < 16; ++i) {\r\n\r\n\t\t\torthogonalPatterns.push(new RawImageData(orthogonalPatternSize, orthogonalPatternSize,\r\n\t\t\t\tnew Uint8ClampedArray(orthogonalPatternSize * orthogonalPatternSize * 2), 2));\r\n\r\n\t\t\tdiagonalPatterns.push(new RawImageData(diagonalPatternSize, diagonalPatternSize,\r\n\t\t\t\tnew Uint8ClampedArray(diagonalPatternSize * diagonalPatternSize * 2), 2));\r\n\r\n\t\t}\r\n\r\n\t\tfor(i = 0, l = orthogonalSubsamplingOffsets.length; i < l; ++i) {\r\n\r\n\t\t\t// Generate 16 orthogonal patterns for each offset.\r\n\t\t\tgeneratePatterns(orthogonalPatterns, orthogonalSubsamplingOffsets[i], true);\r\n\r\n\t\t\t// Assemble the orthogonal patterns and place them on the left side.\r\n\t\t\tbase.set(0, 5 * ORTHOGONAL_SIZE * i);\r\n\t\t\tassemble(base, orthogonalPatterns, orthogonalEdges, ORTHOGONAL_SIZE, true, result);\r\n\r\n\t\t}\r\n\r\n\t\tfor(i = 0, l = diagonalSubsamplingOffsets.length; i < l; ++i) {\r\n\r\n\t\t\t// Generate 16 diagonal patterns for each offset.\r\n\t\t\tgeneratePatterns(diagonalPatterns, diagonalSubsamplingOffsets[i], false);\r\n\r\n\t\t\t// Assemble the diagonal patterns and place them on the right side.\r\n\t\t\tbase.set(5 * ORTHOGONAL_SIZE, 4 * DIAGONAL_SIZE * i);\r\n\t\t\tassemble(base, diagonalPatterns, diagonalEdges, DIAGONAL_SIZE, false, result);\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * This dictionary returns which edges are active for a certain bilinear fetch:\r\n * it's the reverse lookup of the bilinear function.\r\n *\r\n * @type {Map}\r\n * @private\r\n */\r\n\r\nconst edges = new Map([\r\n\r\n\t[bilinear([0, 0, 0, 0]), [0, 0, 0, 0]],\r\n\t[bilinear([0, 0, 0, 1]), [0, 0, 0, 1]],\r\n\t[bilinear([0, 0, 1, 0]), [0, 0, 1, 0]],\r\n\t[bilinear([0, 0, 1, 1]), [0, 0, 1, 1]],\r\n\r\n\t[bilinear([0, 1, 0, 0]), [0, 1, 0, 0]],\r\n\t[bilinear([0, 1, 0, 1]), [0, 1, 0, 1]],\r\n\t[bilinear([0, 1, 1, 0]), [0, 1, 1, 0]],\r\n\t[bilinear([0, 1, 1, 1]), [0, 1, 1, 1]],\r\n\r\n\t[bilinear([1, 0, 0, 0]), [1, 0, 0, 0]],\r\n\t[bilinear([1, 0, 0, 1]), [1, 0, 0, 1]],\r\n\t[bilinear([1, 0, 1, 0]), [1, 0, 1, 0]],\r\n\t[bilinear([1, 0, 1, 1]), [1, 0, 1, 1]],\r\n\r\n\t[bilinear([1, 1, 0, 0]), [1, 1, 0, 0]],\r\n\t[bilinear([1, 1, 0, 1]), [1, 1, 0, 1]],\r\n\t[bilinear([1, 1, 1, 0]), [1, 1, 1, 0]],\r\n\t[bilinear([1, 1, 1, 1]), [1, 1, 1, 1]]\r\n\r\n]);\r\n\r\n/**\r\n * Linearly interpolates between two values.\r\n *\r\n * @private\r\n * @param {Number} a - The initial value.\r\n * @param {Number} b - The target value.\r\n * @param {Number} p - The interpolation value.\r\n * @return {Number} The interpolated value.\r\n */\r\n\r\nfunction lerp$1(a, b, p) {\r\n\r\n\treturn a + (b - a) * p;\r\n\r\n}\r\n\r\n/**\r\n * Calculates the bilinear fetch for a certain edge combination.\r\n *\r\n *     e[0]       e[1]\r\n *\r\n *              x <-------- Sample Position: (-0.25, -0.125)\r\n *     e[2]       e[3] <--- Current Pixel [3]: (0.0, 0.0)\r\n *\r\n * @private\r\n * @param {Number[]} e - The edge combination.\r\n * @return {Number} The interpolated value.\r\n */\r\n\r\nfunction bilinear(e) {\r\n\r\n\tconst a = lerp$1(e[0], e[1], 1.0 - 0.25);\r\n\tconst b = lerp$1(e[2], e[3], 1.0 - 0.25);\r\n\r\n\treturn lerp$1(a, b, 1.0 - 0.125);\r\n\r\n}\r\n\r\n/**\r\n * Computes the delta distance to add in the last step of searches to the left.\r\n *\r\n * @private\r\n * @param {Number[]} left - The left edge combination.\r\n * @param {Number[]} top - The top edge combination.\r\n * @return {Number} The left delta distance.\r\n */\r\n\r\nfunction deltaLeft(left, top) {\r\n\r\n\tlet d = 0;\r\n\r\n\t// If there is an edge, continue.\r\n\tif(top[3] === 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\t/* If an edge was previously found, there is another edge and there are no\r\n\tcrossing edges, continue. */\r\n\tif(d === 1 && top[2] === 1 && left[1] !== 1 && left[3] !== 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\treturn d;\r\n\r\n}\r\n\r\n/**\r\n * Computes the delta distance to add in the last step of searches to the right.\r\n *\r\n * @private\r\n * @param {Number[]} left - The left edge combination.\r\n * @param {Number[]} top - The top edge combination.\r\n * @return {Number} The right delta distance.\r\n */\r\n\r\nfunction deltaRight(left, top) {\r\n\r\n\tlet d = 0;\r\n\r\n\t// If there is an edge, and no crossing edges, continue.\r\n\tif(top[3] === 1 && left[1] !== 1 && left[3] !== 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\t/* If an edge was previously found, there is another edge and there are no\r\n\tcrossing edges, continue. */\r\n\tif(d === 1 && top[2] === 1 && left[0] !== 1 && left[2] !== 1) {\r\n\r\n\t\td += 1;\r\n\r\n\t}\r\n\r\n\treturn d;\r\n\r\n}\r\n\r\n/**\r\n * SMAA search image data.\r\n *\r\n * This image stores information about how many pixels the line search\r\n * algorithm must advance in the last step.\r\n *\r\n * Based on the official python scripts:\r\n *  https://github.com/iryoku/smaa/tree/master/Scripts\r\n */\r\n\r\nclass SMAASearchImageData {\r\n\r\n\t/**\r\n\t * Creates a new search image.\r\n\t *\r\n\t * @return {RawImageData} The generated image data.\r\n\t */\r\n\r\n\tstatic generate() {\r\n\r\n\t\tconst width = 66;\r\n\t\tconst height = 33;\r\n\t\tconst halfWidth = width / 2;\r\n\r\n\t\tconst croppedWidth = 64;\r\n\t\tconst croppedHeight = 16;\r\n\r\n\t\tconst data = new Uint8ClampedArray(width * height);\r\n\t\tconst croppedData = new Uint8ClampedArray(croppedWidth * croppedHeight * 4);\r\n\r\n\t\tlet x, y;\r\n\t\tlet s, t, i;\r\n\t\tlet e1, e2;\r\n\r\n\t\t// Calculate delta distances.\r\n\t\tfor(y = 0; y < height; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < width; ++x) {\r\n\r\n\t\t\t\ts = 0.03125 * x;\r\n\t\t\t\tt = 0.03125 * y;\r\n\r\n\t\t\t\tif(edges.has(s) && edges.has(t)) {\r\n\r\n\t\t\t\t\te1 = edges.get(s);\r\n\t\t\t\t\te2 = edges.get(t);\r\n\r\n\t\t\t\t\ti = y * width + x;\r\n\r\n\t\t\t\t\t// Maximize the dynamic range to help the compression.\r\n\t\t\t\t\tdata[i] = (127 * deltaLeft(e1, e2));\r\n\t\t\t\t\tdata[i + halfWidth] = (127 * deltaRight(e1, e2));\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// Crop the result to powers-of-two to make it BC4-friendly.\r\n\t\tfor(i = 0, y = height - croppedHeight; y < height; ++y) {\r\n\r\n\t\t\tfor(x = 0; x < croppedWidth; ++x, i += 4) {\r\n\r\n\t\t\t\tcroppedData[i] = data[y * width + x];\r\n\t\t\t\tcroppedData[i + 3] = 255;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn new RawImageData(croppedWidth, croppedHeight, croppedData);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$o = \"uniform sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seed;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seed.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seed.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seed*(random*0.2);}}\";\n\n/**\r\n * A label for generated data textures.\r\n *\r\n * @type {String}\r\n * @private\r\n */\r\n\r\nconst tag = \"Glitch.Generated\";\r\n\r\n/**\r\n * Returns a random float in the specified range.\r\n *\r\n * @private\r\n * @param {Number} low - The lowest possible value.\r\n * @param {Number} high - The highest possible value.\r\n * @return {Number} The random value.\r\n */\r\n\r\nfunction randomFloat(low, high) {\r\n\r\n\treturn low + Math.random() * (high - low);\r\n\r\n}\r\n\r\n/**\r\n * A glitch effect.\r\n *\r\n * This effect can influence the {@link ChromaticAberrationEffect}.\r\n *\r\n * Reference: https://github.com/staffantan/unityglitch\r\n *\r\n * Warning: This effect cannot be merged with convolution effects.\r\n */\r\n\r\nclass GlitchEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new glitch effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Vector2} [options.chromaticAberrationOffset] - A chromatic aberration offset. If provided, the glitch effect will influence this offset.\r\n\t * @param {Vector2} [options.delay] - The minimum and maximum delay between glitch activations in seconds.\r\n\t * @param {Vector2} [options.duration] - The minimum and maximum duration of a glitch in seconds.\r\n\t * @param {Vector2} [options.strength] - The strength of weak and strong glitches.\r\n\t * @param {Texture} [options.perturbationMap] - A perturbation map. If none is provided, a noise texture will be created.\r\n\t * @param {Number} [options.dtSize=64] - The size of the generated noise map. Will be ignored if a perturbation map is provided.\r\n\t * @param {Number} [options.columns=0.05] - The scale of the blocky glitch columns.\r\n\t * @param {Number} [options.ratio=0.85] - The threshold for strong glitches.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tchromaticAberrationOffset = null,\r\n\t\tdelay = new Vector2$1(1.5, 3.5),\r\n\t\tduration = new Vector2$1(0.6, 1.0),\r\n\t\tstrength = new Vector2$1(0.3, 1.0),\r\n\t\tcolumns = 0.05,\r\n\t\tratio = 0.85,\r\n\t\tperturbationMap = null,\r\n\t\tdtSize = 64\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"GlitchEffect\", fragmentShader$o, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"perturbationMap\", new Uniform(null)],\r\n\t\t\t\t[\"columns\", new Uniform(columns)],\r\n\t\t\t\t[\"active\", new Uniform(false)],\r\n\t\t\t\t[\"random\", new Uniform(1.0)],\r\n\t\t\t\t[\"seed\", new Uniform(new Vector2$1())],\r\n\t\t\t\t[\"distortion\", new Uniform(new Vector2$1())]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.setPerturbationMap((perturbationMap === null) ?\r\n\t\t\tthis.generatePerturbationMap(dtSize) :\r\n\t\t\tperturbationMap\r\n\t\t);\r\n\r\n\t\t/**\r\n\t\t * The minimum and maximum delay between glitch activations in seconds.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.delay = delay;\r\n\r\n\t\t/**\r\n\t\t * The minimum and maximum duration of a glitch in seconds.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.duration = duration;\r\n\r\n\t\t/**\r\n\t\t * A random glitch break point.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.breakPoint = new Vector2$1(\r\n\t\t\trandomFloat(this.delay.x, this.delay.y),\r\n\t\t\trandomFloat(this.duration.x, this.duration.y)\r\n\t\t);\r\n\r\n\t\t/**\r\n\t\t * A time accumulator.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0;\r\n\r\n\t\t/**\r\n\t\t * Random seeds.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.seed = this.uniforms.get(\"seed\").value;\r\n\r\n\t\t/**\r\n\t\t * A distortion vector.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.distortion = this.uniforms.get(\"distortion\").value;\r\n\r\n\t\t/**\r\n\t\t * The effect mode.\r\n\t\t *\r\n\t\t * @type {GlitchMode}\r\n\t\t */\r\n\r\n\t\tthis.mode = GlitchMode.SPORADIC;\r\n\r\n\t\t/**\r\n\t\t * The strength of weak and strong glitches.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.strength = strength;\r\n\r\n\t\t/**\r\n\t\t * The threshold for strong glitches, ranging from 0 to 1 where 0 means no\r\n\t\t * weak glitches and 1 means no strong ones. The default ratio of 0.85\r\n\t\t * offers a decent balance.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.ratio = ratio;\r\n\r\n\t\t/**\r\n\t\t * The chromatic aberration offset.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t */\r\n\r\n\t\tthis.chromaticAberrationOffset = chromaticAberrationOffset;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the glitch effect is currently active.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget active() {\r\n\r\n\t\treturn this.uniforms.get(\"active\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current perturbation map.\r\n\t *\r\n\t * @return {Texture} The current perturbation map.\r\n\t */\r\n\r\n\tgetPerturbationMap() {\r\n\r\n\t\treturn this.uniforms.get(\"perturbationMap\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Replaces the current perturbation map with the given one.\r\n\t *\r\n\t * The current map will be disposed if it was generated by this effect.\r\n\t *\r\n\t * @param {Texture} map - The new perturbation map.\r\n\t */\r\n\r\n\tsetPerturbationMap(map) {\r\n\r\n\t\tconst currentMap = this.getPerturbationMap();\r\n\r\n\t\tif(currentMap !== null && currentMap.name === tag) {\r\n\r\n\t\t\tcurrentMap.dispose();\r\n\r\n\t\t}\r\n\r\n\t\tmap.minFilter = map.magFilter = NearestFilter;\r\n\t\tmap.wrapS = map.wrapT = RepeatWrapping;\r\n\t\tmap.generateMipmaps = false;\r\n\r\n\t\tthis.uniforms.get(\"perturbationMap\").value = map;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Generates a perturbation map.\r\n\t *\r\n\t * @param {Number} [size=64] - The texture size.\r\n\t * @return {DataTexture} The perturbation map.\r\n\t */\r\n\r\n\tgeneratePerturbationMap(size = 64) {\r\n\r\n\t\tconst map = new NoiseTexture(size, size, RGBFormat);\r\n\t\tmap.name = tag;\r\n\r\n\t\treturn map;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst mode = this.mode;\r\n\t\tconst breakPoint = this.breakPoint;\r\n\t\tconst offset = this.chromaticAberrationOffset;\r\n\t\tconst s = this.strength;\r\n\r\n\t\tlet time = this.time;\r\n\t\tlet active = false;\r\n\t\tlet r = 0.0, a = 0.0;\r\n\t\tlet trigger;\r\n\r\n\t\tif(mode !== GlitchMode.DISABLED) {\r\n\r\n\t\t\tif(mode === GlitchMode.SPORADIC) {\r\n\r\n\t\t\t\ttime += deltaTime;\r\n\t\t\t\ttrigger = (time > breakPoint.x);\r\n\r\n\t\t\t\tif(time >= (breakPoint.x + breakPoint.y)) {\r\n\r\n\t\t\t\t\tbreakPoint.set(\r\n\t\t\t\t\t\trandomFloat(this.delay.x, this.delay.y),\r\n\t\t\t\t\t\trandomFloat(this.duration.x, this.duration.y)\r\n\t\t\t\t\t);\r\n\r\n\t\t\t\t\ttime = 0;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tr = Math.random();\r\n\t\t\tthis.uniforms.get(\"random\").value = r;\r\n\r\n\t\t\tif((trigger && r > this.ratio) || mode === GlitchMode.CONSTANT_WILD) {\r\n\r\n\t\t\t\tactive = true;\r\n\r\n\t\t\t\tr *= s.y * 0.03;\r\n\t\t\t\ta = randomFloat(-Math.PI, Math.PI);\r\n\r\n\t\t\t\tthis.seed.set(randomFloat(-s.y, s.y), randomFloat(-s.y, s.y));\r\n\t\t\t\tthis.distortion.set(randomFloat(0.0, 1.0), randomFloat(0.0, 1.0));\r\n\r\n\t\t\t} else if(trigger || mode === GlitchMode.CONSTANT_MILD) {\r\n\r\n\t\t\t\tactive = true;\r\n\r\n\t\t\t\tr *= s.x * 0.03;\r\n\t\t\t\ta = randomFloat(-Math.PI, Math.PI);\r\n\r\n\t\t\t\tthis.seed.set(randomFloat(-s.x, s.x), randomFloat(-s.x, s.x));\r\n\t\t\t\tthis.distortion.set(randomFloat(0.0, 1.0), randomFloat(0.0, 1.0));\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.time = time;\r\n\r\n\t\t}\r\n\r\n\t\tif(offset !== null) {\r\n\r\n\t\t\tif(active) {\r\n\r\n\t\t\t\toffset.set(Math.cos(a), Math.sin(a)).multiplyScalar(r);\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\toffset.set(0.0, 0.0);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.uniforms.get(\"active\").value = active;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * A glitch mode enumeration.\r\n *\r\n * @type {Object}\r\n * @property {Number} DISABLED - No glitches.\r\n * @property {Number} SPORADIC - Sporadic glitches.\r\n * @property {Number} CONSTANT_MILD - Constant mild glitches.\r\n * @property {Number} CONSTANT_WILD - Constant wild glitches.\r\n */\r\n\r\nconst GlitchMode = {\r\n\r\n\tDISABLED: 0,\r\n\tSPORADIC: 1,\r\n\tCONSTANT_MILD: 2,\r\n\tCONSTANT_WILD: 3\r\n\r\n};\n\nvar fragmentShader$p = \"uniform sampler2D texture;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(texture,uv);}\";\n\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n */\r\n\r\nconst v = new Vector3();\r\n\r\n/**\r\n * A matrix.\r\n *\r\n * @type {Matrix4}\r\n * @private\r\n */\r\n\r\nconst m = new Matrix4();\r\n\r\n/**\r\n * A god rays effect.\r\n */\r\n\r\nclass GodRaysEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new god rays effect.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Mesh|Points} lightSource - The light source. Must not write depth and has to be flagged as transparent.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Number} [options.samples=60.0] - The number of samples per pixel.\r\n\t * @param {Number} [options.density=0.96] - The density of the light rays.\r\n\t * @param {Number} [options.decay=0.9] - An illumination decay factor.\r\n\t * @param {Number} [options.weight=0.4] - A light ray weight factor.\r\n\t * @param {Number} [options.exposure=0.6] - A constant attenuation coefficient.\r\n\t * @param {Number} [options.clampMax=1.0] - An upper bound for the saturation of the overall effect.\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use height or width instead.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.SMALL] - The blur kernel size. Has no effect if blur is disabled.\r\n\t * @param {Number} [options.blur=true] - Whether the god rays should be blurred to reduce artifacts.\r\n\t */\r\n\r\n\tconstructor(camera, lightSource, {\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tsamples = 60.0,\r\n\t\tdensity = 0.96,\r\n\t\tdecay = 0.9,\r\n\t\tweight = 0.4,\r\n\t\texposure = 0.6,\r\n\t\tclampMax = 1.0,\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.SMALL,\r\n\t\tblur = true\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"GodRaysEffect\", fragmentShader$p, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"texture\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * The light source.\r\n\t\t *\r\n\t\t * @type {Mesh|Points}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lightSource = lightSource;\r\n\t\tthis.lightSource.material.depthWrite = false;\r\n\t\tthis.lightSource.material.transparent = true;\r\n\r\n\t\t/**\r\n\t\t * A scene that only contains the light source.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lightScene = new Scene();\r\n\r\n\t\t/**\r\n\t\t * The light position in screen space.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screenPosition = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetA = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false\r\n\t\t});\r\n\r\n\t\tthis.renderTargetA.texture.name = \"GodRays.Target.A\";\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetB = this.renderTargetA.clone();\r\n\t\tthis.renderTargetB.texture.name = \"GodRays.Target.B\";\r\n\t\tthis.uniforms.get(\"texture\").value = this.renderTargetB.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the light scene.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetLight = this.renderTargetA.clone();\r\n\t\tthis.renderTargetLight.texture.name = \"GodRays.Light\";\r\n\t\tthis.renderTargetLight.depthBuffer = true;\r\n\t\tthis.renderTargetLight.depthTexture = new DepthTexture();\r\n\r\n\t\t/**\r\n\t\t * A pass that only renders the light source.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPassLight = new RenderPass(this.lightScene, camera);\r\n\t\tthis.renderPassLight.getClearPass().overrideClearColor = new Color(0x000000);\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(true, false, false);\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\r\n\t\t/**\r\n\t\t * A blur pass that reduces aliasing artifacts and makes the light softer.\r\n\t\t *\r\n\t\t * Disable this pass to improve performance.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ resolutionScale, width, height, kernelSize });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\r\n\t\t/**\r\n\t\t * A depth mask pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthMaskPass = new ShaderPass(((depthTexture) => {\r\n\r\n\t\t\tconst material = new DepthMaskMaterial();\r\n\t\t\tmaterial.uniforms.depthBuffer1.value = depthTexture;\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t})(this.renderTargetLight.depthTexture));\r\n\r\n\t\t/**\r\n\t\t * A god rays blur pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.godRaysPass = new ShaderPass((() => {\r\n\r\n\t\t\tconst material = new GodRaysMaterial(this.screenPosition);\r\n\t\t\tmaterial.uniforms.density.value = density;\r\n\t\t\tmaterial.uniforms.decay.value = decay;\r\n\t\t\tmaterial.uniforms.weight.value = weight;\r\n\t\t\tmaterial.uniforms.exposure.value = exposure;\r\n\t\t\tmaterial.uniforms.clampMax.value = clampMax;\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t})());\r\n\r\n\t\tthis.samples = samples;\r\n\t\tthis.blur = blur;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A texture that contains the intermediate result of this effect.\r\n\t *\r\n\t * This texture will be applied to the scene colors unless the blend function\r\n\t * is set to `SKIP`.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.renderTargetB.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal god rays material.\r\n\t *\r\n\t * @type {GodRaysMaterial}\r\n\t */\r\n\r\n\tget godRaysMaterial() {\r\n\r\n\t\treturn this.godRaysPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.godRaysMaterial.dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tconst material = this.godRaysMaterial;\r\n\r\n\t\tmaterial.dithering = value;\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the god rays should be blurred to reduce artifacts.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget blur() {\r\n\r\n\t\treturn this.blurPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset blur(value) {\r\n\r\n\t\tthis.blurPass.enabled = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.blurPass.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.blurPass.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The number of samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn this.godRaysMaterial.samples;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * A higher sample count improves quality at the cost of performance.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tthis.godRaysMaterial.samples = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.depthMaskPass.getFullscreenMaterial();\r\n\t\tmaterial.uniforms.depthBuffer0.value = depthTexture;\r\n\t\tmaterial.defines.DEPTH_PACKING_0 = depthPacking.toFixed(0);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst lightSource = this.lightSource;\r\n\t\tconst parent = lightSource.parent;\r\n\t\tconst matrixAutoUpdate = lightSource.matrixAutoUpdate;\r\n\r\n\t\tconst renderTargetA = this.renderTargetA;\r\n\t\tconst renderTargetLight = this.renderTargetLight;\r\n\r\n\t\t// Enable depth write for the light scene render pass.\r\n\t\tlightSource.material.depthWrite = true;\r\n\r\n\t\t// Update the world matrix.\r\n\t\tlightSource.matrixAutoUpdate = false;\r\n\t\tlightSource.updateWorldMatrix(true, false);\r\n\r\n\t\tif(parent !== null) {\r\n\r\n\t\t\tif(!matrixAutoUpdate) {\r\n\r\n\t\t\t\t// Remember the local transformation to restore it later.\r\n\t\t\t\tm.copy(lightSource.matrix);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Apply parent transformations.\r\n\t\t\tlightSource.matrix.copy(lightSource.matrixWorld);\r\n\r\n\t\t}\r\n\r\n\t\t// Render the light source and mask it based on depth.\r\n\t\tthis.lightScene.add(lightSource);\r\n\t\tthis.renderPassLight.render(renderer, renderTargetLight);\r\n\t\tthis.clearPass.render(renderer, renderTargetA);\r\n\t\tthis.depthMaskPass.render(renderer, renderTargetLight, renderTargetA);\r\n\r\n\t\t// Restore the original values.\r\n\t\tlightSource.material.depthWrite = false;\r\n\t\tlightSource.matrixAutoUpdate = matrixAutoUpdate;\r\n\r\n\t\tif(parent !== null) {\r\n\r\n\t\t\tif(!matrixAutoUpdate) {\r\n\r\n\t\t\t\tlightSource.matrix.copy(m);\r\n\r\n\t\t\t}\r\n\r\n\t\t\tparent.add(lightSource);\r\n\r\n\t\t}\r\n\r\n\t\t// Calculate the screen light position.\r\n\t\tv.setFromMatrixPosition(lightSource.matrixWorld).project(this.camera);\r\n\r\n\t\t// Translate to [0.0, 1.0] and clamp to screen with a bias of 1.0.\r\n\t\tthis.screenPosition.set(\r\n\t\t\tMath.min(Math.max((v.x + 1.0) * 0.5, -1.0), 2.0),\r\n\t\t\tMath.min(Math.max((v.y + 1.0) * 0.5, -1.0), 2.0)\r\n\t\t);\r\n\r\n\t\tif(this.blur) {\r\n\r\n\t\t\t// Blur the masked scene to reduce artifacts.\r\n\t\t\tthis.blurPass.render(renderer, renderTargetA, renderTargetA);\r\n\r\n\t\t}\r\n\r\n\t\t// Blur the masked scene along radial lines towards the light source.\r\n\t\tthis.godRaysPass.render(renderer, renderTargetA, this.renderTargetB);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\t\tthis.renderPassLight.setSize(width, height);\r\n\t\tthis.depthMaskPass.setSize(width, height);\r\n\t\tthis.godRaysPass.setSize(width, height);\r\n\r\n\t\tconst w = this.resolution.width;\r\n\t\tconst h = this.resolution.height;\r\n\r\n\t\tthis.renderTargetA.setSize(w, h);\r\n\t\tthis.renderTargetB.setSize(w, h);\r\n\t\tthis.renderTargetLight.setSize(w, h);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tthis.blurPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.renderPassLight.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.depthMaskPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.godRaysPass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetA.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetB.texture.format = RGBFormat;\r\n\t\t\tthis.renderTargetLight.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTargetA.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetB.texture.type = frameBufferType;\r\n\t\t\tthis.renderTargetLight.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$q = \"uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}\";\n\n/**\r\n * A grid effect.\r\n */\r\n\r\nclass GridEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new grid effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.OVERLAY] - The blend function of this effect.\r\n\t * @param {Number} [options.scale=1.0] - The scale of the grid pattern.\r\n\t * @param {Number} [options.lineWidth=0.0] - The line width of the grid pattern.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.OVERLAY, scale = 1.0, lineWidth = 0.0 } = {}) {\r\n\r\n\t\tsuper(\"GridEffect\", fragmentShader$q, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"scale\", new Uniform(new Vector2$1())],\r\n\t\t\t\t[\"lineWidth\", new Uniform(lineWidth)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The original resolution.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * The grid scale, relative to the screen height.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.scale = Math.max(scale, 1e-6);\r\n\r\n\t\t/**\r\n\t\t * The grid line width.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.lineWidth = Math.max(lineWidth, 0.0);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current grid scale.\r\n\t *\r\n\t * @return {Number} The grid scale.\r\n\t */\r\n\r\n\tgetScale() {\r\n\r\n\t\treturn this.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the grid scale.\r\n\t *\r\n\t * @param {Number} scale - The new grid scale.\r\n\t */\r\n\r\n\tsetScale(scale) {\r\n\r\n\t\tthis.scale = scale;\r\n\t\tthis.setSize(this.resolution.x, this.resolution.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current grid line width.\r\n\t *\r\n\t * @return {Number} The grid line width.\r\n\t */\r\n\r\n\tgetLineWidth() {\r\n\r\n\t\treturn this.lineWidth;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the grid line width.\r\n\t *\r\n\t * @param {Number} lineWidth - The new grid line width.\r\n\t */\r\n\r\n\tsetLineWidth(lineWidth) {\r\n\r\n\t\tthis.lineWidth = lineWidth;\r\n\t\tthis.setSize(this.resolution.x, this.resolution.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.resolution.set(width, height);\r\n\r\n\t\tconst aspect = width / height;\r\n\t\tconst scale = this.scale * (height * 0.125);\r\n\r\n\t\tthis.uniforms.get(\"scale\").value.set(aspect * scale, scale);\r\n\t\tthis.uniforms.get(\"lineWidth\").value = (scale / height) + this.lineWidth;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$r = \"uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}\";\n\n/**\r\n * A hue/saturation effect.\r\n *\r\n * Reference: https://github.com/evanw/glfx.js\r\n */\r\n\r\nclass HueSaturationEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new hue/saturation effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.hue=0.0] - The hue in radians.\r\n\t * @param {Number} [options.saturation=0.0] - The saturation factor, ranging from -1 to 1, where 0 means no change.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, hue = 0.0, saturation = 0.0 } = {}) {\r\n\r\n\t\tsuper(\"HueSaturationEffect\", fragmentShader$r, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"hue\", new Uniform(new Vector3())],\r\n\t\t\t\t[\"saturation\", new Uniform(saturation)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.setHue(hue);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the hue.\r\n\t *\r\n\t * @param {Number} hue - The hue in radians.\r\n\t */\r\n\r\n\tsetHue(hue) {\r\n\r\n\t\tconst s = Math.sin(hue), c = Math.cos(hue);\r\n\r\n\t\tthis.uniforms.get(\"hue\").value.set(\r\n\t\t\t2.0 * c, -Math.sqrt(3.0) * s - c, Math.sqrt(3.0) * s - c\r\n\t\t).addScalar(1.0).divideScalar(3.0);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$s = \"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\\n#ifdef PREMULTIPLY\\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\\n#else\\noutputColor=vec4(noise,inputColor.a);\\n#endif\\n}\";\n\n/**\r\n * A noise effect.\r\n */\r\n\r\nclass NoiseEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new noise effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function of this effect.\r\n\t * @param {Boolean} [options.premultiply=false] - Whether the noise should be multiplied with the input color.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.SCREEN, premultiply = false } = {}) {\r\n\r\n\t\tsuper(\"NoiseEffect\", fragmentShader$s, { blendFunction });\r\n\r\n\t\tthis.premultiply = premultiply;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the noise should be multiplied with the input color.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget premultiply() {\r\n\r\n\t\treturn this.defines.has(\"PREMULTIPLY\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables noise premultiplication.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset premultiply(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.set(\"PREMULTIPLY\", \"1\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"PREMULTIPLY\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$t = \"uniform sampler2D edgeTexture;uniform sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;\\n#ifdef USE_PATTERN\\nuniform sampler2D patternTexture;varying vec2 vUvPattern;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;\\n#ifndef X_RAY\\nedge.y=0.0;\\n#endif\\nedge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;\\n#ifdef USE_PATTERN\\nvec4 patternColor=texture2D(patternTexture,vUvPattern);\\n#ifdef X_RAY\\nfloat hiddenFactor=0.5;\\n#else\\nfloat hiddenFactor=0.0;\\n#endif\\nvisibilityFactor=(1.0-mask.y>0.0)? 1.0 : hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;\\n#endif\\nfloat alpha=max(max(edge.x,edge.y),visibilityFactor);\\n#ifdef ALPHA\\noutputColor=vec4(color,alpha);\\n#else\\noutputColor=vec4(color,max(alpha,inputColor.a));\\n#endif\\n}\";\n\nvar vertexShader$9 = \"uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}\";\n\n/**\r\n * An outline effect.\r\n */\r\n\r\nclass OutlineEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new outline effect.\r\n\t *\r\n\t * If you want dark outlines, remember to use an appropriate blend function.\r\n\t *\r\n\t * @param {Scene} scene - The main scene.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.SCREEN] - The blend function.  Set this to `BlendFunction.ALPHA` for dark outlines.\r\n\t * @param {Number} [options.patternTexture=null] - A pattern texture.\r\n\t * @param {Number} [options.edgeStrength=1.0] - The edge strength.\r\n\t * @param {Number} [options.pulseSpeed=0.0] - The pulse speed. A value of zero disables the pulse effect.\r\n\t * @param {Number} [options.visibleEdgeColor=0xffffff] - The color of visible edges.\r\n\t * @param {Number} [options.hiddenEdgeColor=0x22090a] - The color of hidden edges.\r\n\t * @param {Number} [options.resolutionScale=0.5] - Deprecated. Use height or width instead.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t * @param {KernelSize} [options.kernelSize=KernelSize.VERY_SMALL] - The blur kernel size.\r\n\t * @param {Boolean} [options.blur=false] - Whether the outline should be blurred.\r\n\t * @param {Boolean} [options.xRay=true] - Whether occluded parts of selected objects should be visible.\r\n\t */\r\n\r\n\tconstructor(scene, camera, {\r\n\t\tblendFunction = BlendFunction.SCREEN,\r\n\t\tpatternTexture = null,\r\n\t\tedgeStrength = 1.0,\r\n\t\tpulseSpeed = 0.0,\r\n\t\tvisibleEdgeColor = 0xffffff,\r\n\t\thiddenEdgeColor = 0x22090a,\r\n\t\tresolutionScale = 0.5,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE,\r\n\t\tkernelSize = KernelSize.VERY_SMALL,\r\n\t\tblur = false,\r\n\t\txRay = true\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"OutlineEffect\", fragmentShader$t, {\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"maskTexture\", new Uniform(null)],\r\n\t\t\t\t[\"edgeTexture\", new Uniform(null)],\r\n\t\t\t\t[\"edgeStrength\", new Uniform(edgeStrength)],\r\n\t\t\t\t[\"visibleEdgeColor\", new Uniform(new Color(visibleEdgeColor))],\r\n\t\t\t\t[\"hiddenEdgeColor\", new Uniform(new Color(hiddenEdgeColor))],\r\n\t\t\t\t[\"pulse\", new Uniform(1.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t// Intercept blend function changes.\r\n\t\tthis.blendMode = ((defines) => (new Proxy(this.blendMode, {\r\n\r\n\t\t\tset(target, name, value) {\r\n\r\n\t\t\t\tif(value === BlendFunction.ALPHA) {\r\n\r\n\t\t\t\t\tdefines.set(\"ALPHA\", \"1\");\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdefines.delete(\"ALPHA\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttarget[name] = value;\r\n\r\n\t\t\t\treturn true;\r\n\r\n\t\t\t}\r\n\r\n\t\t})))(this.defines);\r\n\r\n\t\tthis.blendMode.blendFunction = blendFunction;\r\n\t\tthis.setPatternTexture(patternTexture);\r\n\t\tthis.xRay = xRay;\r\n\r\n\t\t/**\r\n\t\t * The main scene.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A render target for the outline mask.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetMask = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetMask.texture.name = \"Outline.Mask\";\r\n\r\n\t\tthis.uniforms.get(\"maskTexture\").value = this.renderTargetMask.texture;\r\n\r\n\t\t/**\r\n\t\t * A render target for the edge detection.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetOutline = this.renderTargetMask.clone();\r\n\t\tthis.renderTargetOutline.texture.name = \"Outline.Edges\";\r\n\t\tthis.renderTargetOutline.depthBuffer = false;\r\n\r\n\t\t/**\r\n\t\t * A render target for the blurred outline overlay.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetBlurredOutline = this.renderTargetOutline.clone();\r\n\t\tthis.renderTargetBlurredOutline.texture.name = \"Outline.BlurredEdges\";\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass();\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\t\tthis.clearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A depth pass.\r\n\t\t *\r\n\t\t * @type {DepthPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.depthPass = new DepthPass(scene, camera);\r\n\r\n\t\t/**\r\n\t\t * A depth comparison mask pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.maskPass = new RenderPass(scene, camera,\r\n\t\t\tnew DepthComparisonMaterial(this.depthPass.texture, camera));\r\n\r\n\t\tconst clearPass = this.maskPass.getClearPass();\r\n\t\tclearPass.overrideClearColor = new Color(0xffffff);\r\n\t\tclearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * A blur pass.\r\n\t\t *\r\n\t\t * @type {BlurPass}\r\n\t\t */\r\n\r\n\t\tthis.blurPass = new BlurPass({ resolutionScale, width, height, kernelSize });\r\n\t\tthis.blurPass.resolution.resizable = this;\r\n\t\tthis.blur = blur;\r\n\r\n\t\t/**\r\n\t\t * An outline detection pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.outlinePass = new ShaderPass(new OutlineMaterial());\r\n\t\tthis.outlinePass.getFullscreenMaterial().uniforms.inputBuffer.value = this.renderTargetMask.texture;\r\n\r\n\t\t/**\r\n\t\t * The current animation time.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0.0;\r\n\r\n\t\t/**\r\n\t\t * A selection of objects that will be outlined.\r\n\t\t *\r\n\t\t * @type {Selection}\r\n\t\t */\r\n\r\n\t\tthis.selection = new Selection();\r\n\r\n\t\t/**\r\n\t\t * The pulse speed. A value of zero disables the pulse effect.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.pulseSpeed = pulseSpeed;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of this effect.\r\n\t *\r\n\t * @type {Resizer}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.blurPass.resolution;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current width of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tget width() {\r\n\r\n\t\treturn this.resolution.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render width.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.width instead.\r\n\t */\r\n\r\n\tset width(value) {\r\n\r\n\t\tthis.resolution.width = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The current height of the internal render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tget height() {\r\n\r\n\t\treturn this.resolution.height;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the render height.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use resolution.height instead.\r\n\t */\r\n\r\n\tset height(value) {\r\n\r\n\t\tthis.resolution.height = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use selection.layer instead.\r\n\t */\r\n\r\n\tget selectionLayer() {\r\n\r\n\t\treturn this.selection.layer;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated Use selection.layer instead.\r\n\t */\r\n\r\n\tset selectionLayer(value) {\r\n\r\n\t\tthis.selection.layer = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether dithering is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tget dithering() {\r\n\r\n\t\treturn this.blurPass.dithering;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables dithering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t * @deprecated Set the frameBufferType of the EffectComposer to HalfFloatType instead.\r\n\t */\r\n\r\n\tset dithering(value) {\r\n\r\n\t\tthis.blurPass.dithering = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The blur kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tget kernelSize() {\r\n\r\n\t\treturn this.blurPass.kernelSize;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the kernel size.\r\n\t *\r\n\t * @type {KernelSize}\r\n\t * @deprecated Use blurPass.kernelSize instead.\r\n\t */\r\n\r\n\tset kernelSize(value) {\r\n\r\n\t\tthis.blurPass.kernelSize = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the outlines should be blurred.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget blur() {\r\n\r\n\t\treturn this.blurPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset blur(value) {\r\n\r\n\t\tthis.blurPass.enabled = value;\r\n\r\n\t\tthis.uniforms.get(\"edgeTexture\").value = value ?\r\n\t\t\tthis.renderTargetBlurredOutline.texture :\r\n\t\t\tthis.renderTargetOutline.texture;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether X-Ray outlines are enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget xRay() {\r\n\r\n\t\treturn this.defines.has(\"X_RAY\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables X-Ray outlines.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset xRay(value) {\r\n\r\n\t\tvalue ? this.defines.set(\"X_RAY\", \"1\") : this.defines.delete(\"X_RAY\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the pattern texture.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing the\r\n\t * texture.\r\n\t *\r\n\t * @param {Texture} texture - The new texture.\r\n\t */\r\n\r\n\tsetPatternTexture(texture) {\r\n\r\n\t\tif(texture !== null) {\r\n\r\n\t\t\ttexture.wrapS = texture.wrapT = RepeatWrapping;\r\n\r\n\t\t\tthis.defines.set(\"USE_PATTERN\", \"1\");\r\n\t\t\tthis.uniforms.set(\"patternScale\", new Uniform(1.0));\r\n\t\t\tthis.uniforms.set(\"patternTexture\", new Uniform(texture));\r\n\t\t\tthis.vertexShader = vertexShader$9;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"USE_PATTERN\");\r\n\t\t\tthis.uniforms.delete(\"patternScale\");\r\n\t\t\tthis.uniforms.delete(\"patternTexture\");\r\n\t\t\tthis.vertexShader = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current resolution scale.\r\n\t *\r\n\t * @return {Number} The resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tgetResolutionScale() {\r\n\r\n\t\treturn this.resolution.scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution scale.\r\n\t *\r\n\t * @param {Number} scale - The new resolution scale.\r\n\t * @deprecated Adjust the fixed resolution width or height instead.\r\n\t */\r\n\r\n\tsetResolutionScale(scale) {\r\n\r\n\t\tthis.resolution.scale = scale;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the current selection and selects a list of objects.\r\n\t *\r\n\t * @param {Object3D[]} objects - The objects that should be outlined. This array will be copied.\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.set instead.\r\n\t */\r\n\r\n\tsetSelection(objects) {\r\n\r\n\t\tthis.selection.set(objects);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Clears the list of selected objects.\r\n\t *\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.clear instead.\r\n\t */\r\n\r\n\tclearSelection() {\r\n\r\n\t\tthis.selection.clear();\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Selects an object.\r\n\t *\r\n\t * @param {Object3D} object - The object that should be outlined.\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.add instead.\r\n\t */\r\n\r\n\tselectObject(object) {\r\n\r\n\t\tthis.selection.add(object);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deselects an object.\r\n\t *\r\n\t * @param {Object3D} object - The object that should no longer be outlined.\r\n\t * @return {OutlinePass} This pass.\r\n\t * @deprecated Use selection.delete instead.\r\n\t */\r\n\r\n\tdeselectObject(object) {\r\n\r\n\t\tthis.selection.delete(object);\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst selection = this.selection;\r\n\t\tconst pulse = this.uniforms.get(\"pulse\");\r\n\r\n\t\tconst background = scene.background;\r\n\t\tconst mask = camera.layers.mask;\r\n\r\n\t\tif(selection.size > 0) {\r\n\r\n\t\t\tscene.background = null;\r\n\t\t\tpulse.value = 1.0;\r\n\r\n\t\t\tif(this.pulseSpeed > 0.0) {\r\n\r\n\t\t\t\tpulse.value = 0.625 + Math.cos(this.time * this.pulseSpeed * 10.0) * 0.375;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.time += deltaTime;\r\n\r\n\t\t\t// Render a custom depth texture and ignore selected objects.\r\n\t\t\tselection.setVisible(false);\r\n\t\t\tthis.depthPass.render(renderer);\r\n\t\t\tselection.setVisible(true);\r\n\r\n\t\t\t// Compare the depth of the selected objects with the depth texture.\r\n\t\t\tcamera.layers.set(selection.layer);\r\n\t\t\tthis.maskPass.render(renderer, this.renderTargetMask);\r\n\r\n\t\t\t// Restore the camera layer mask and the scene background.\r\n\t\t\tcamera.layers.mask = mask;\r\n\t\t\tscene.background = background;\r\n\r\n\t\t\t// Detect the outline.\r\n\t\t\tthis.outlinePass.render(renderer, null, this.renderTargetOutline);\r\n\r\n\t\t\tif(this.blur) {\r\n\r\n\t\t\t\tthis.blurPass.render(renderer, this.renderTargetOutline, this.renderTargetBlurredOutline);\r\n\r\n\t\t\t}\r\n\r\n\t\t} else if(this.time > 0.0) {\r\n\r\n\t\t\tthis.clearPass.render(renderer, this.renderTargetMask);\r\n\t\t\tthis.time = 0.0;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.blurPass.setSize(width, height);\r\n\t\tthis.renderTargetMask.setSize(width, height);\r\n\r\n\t\tconst w = this.resolution.width;\r\n\t\tconst h = this.resolution.height;\r\n\r\n\t\tthis.depthPass.setSize(w, h);\r\n\t\tthis.renderTargetOutline.setSize(w, h);\r\n\t\tthis.renderTargetBlurredOutline.setSize(w, h);\r\n\t\tthis.outlinePass.getFullscreenMaterial().setTexelSize(1.0 / w, 1.0 / h);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\t// No need for high precision: the blur pass operates on a mask texture.\r\n\t\tthis.blurPass.initialize(renderer, alpha, UnsignedByteType);\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\t// These passes ignore the buffer type.\r\n\t\t\tthis.depthPass.initialize(renderer, alpha, frameBufferType);\r\n\t\t\tthis.maskPass.initialize(renderer, alpha, frameBufferType);\r\n\t\t\tthis.outlinePass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$u = \"uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}\";\n\n/**\r\n * A pixelation effect.\r\n *\r\n * Warning: This effect cannot be merged with convolution effects.\r\n */\r\n\r\nclass PixelationEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new pixelation effect.\r\n\t *\r\n\t * @param {Object} [granularity=30.0] - The pixel granularity.\r\n\t */\r\n\r\n\tconstructor(granularity = 30.0) {\r\n\r\n\t\tsuper(\"PixelationEffect\", fragmentShader$u, {\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"active\", new Uniform(false)],\r\n\t\t\t\t[\"d\", new Uniform(new Vector2$1())]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The original resolution.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * The pixel granularity.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.granularity = granularity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the pixel granularity.\r\n\t *\r\n\t * @return {Number} The granularity.\r\n\t */\r\n\r\n\tgetGranularity() {\r\n\r\n\t\treturn this.granularity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the pixel granularity.\r\n\t *\r\n\t * A higher value yields coarser visuals.\r\n\t *\r\n\t * @param {Number} granularity - The new granularity.\r\n\t */\r\n\r\n\tsetGranularity(granularity) {\r\n\r\n\t\tgranularity = Math.floor(granularity);\r\n\r\n\t\tif(granularity % 2 > 0) {\r\n\r\n\t\t\tgranularity += 1;\r\n\r\n\t\t}\r\n\r\n\t\tconst uniforms = this.uniforms;\r\n\t\tuniforms.get(\"active\").value = (granularity > 0.0);\r\n\t\tuniforms.get(\"d\").value.set(granularity, granularity).divide(this.resolution);\r\n\r\n\t\tthis.granularity = granularity;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the granularity.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.resolution.set(width, height);\r\n\t\tthis.setGranularity(this.granularity);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$v = \"uniform float focus;uniform float focalLength;uniform float fStop;uniform float maxBlur;uniform float luminanceThreshold;uniform float luminanceGain;uniform float bias;uniform float fringe;\\n#ifdef MANUAL_DOF\\nuniform vec4 dof;\\n#endif\\n#ifdef PENTAGON\\nfloat pentagon(const in vec2 coords){const vec4 HS0=vec4(1.0,0.0,0.0,1.0);const vec4 HS1=vec4(0.309016994,0.951056516,0.0,1.0);const vec4 HS2=vec4(-0.809016994,0.587785252,0.0,1.0);const vec4 HS3=vec4(-0.809016994,-0.587785252,0.0,1.0);const vec4 HS4=vec4(0.309016994,-0.951056516,0.0,1.0);const vec4 HS5=vec4(0.0,0.0,1.0,1.0);const vec4 ONE=vec4(1.0);const float P_FEATHER=0.4;const float N_FEATHER=-P_FEATHER;float inOrOut=-4.0;vec4 P=vec4(coords,vec2(RINGS_FLOAT-1.3));vec4 dist=vec4(dot(P,HS0),dot(P,HS1),dot(P,HS2),dot(P,HS3));dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dot(dist,ONE);dist.x=dot(P,HS4);dist.y=HS5.w-abs(P.z);dist=smoothstep(N_FEATHER,P_FEATHER,dist);inOrOut+=dist.x;return clamp(inOrOut,0.0,1.0);}\\n#endif\\nvec3 processTexel(const in vec2 coords,const in float blur){vec2 scale=texelSize*fringe*blur;vec3 c=vec3(texture2D(inputBuffer,coords+vec2(0.0,1.0)*scale).r,texture2D(inputBuffer,coords+vec2(-0.866,-0.5)*scale).g,texture2D(inputBuffer,coords+vec2(0.866,-0.5)*scale).b);float luminance=linearToRelativeLuminance(c);float threshold=max((luminance-luminanceThreshold)*luminanceGain,0.0);return c+mix(vec3(0.0),c,threshold*blur);}float gather(const in float i,const in float j,const in float ringSamples,const in vec2 uv,const in vec2 blurFactor,const in float blur,inout vec3 color){float step=PI2/ringSamples;vec2 wh=vec2(cos(j*step)*i,sin(j*step)*i);\\n#ifdef PENTAGON\\nfloat p=pentagon(wh);\\n#else\\nfloat p=1.0;\\n#endif\\ncolor+=processTexel(wh*blurFactor+uv,blur)*mix(1.0,i/RINGS_FLOAT,bias)*p;return mix(1.0,i/RINGS_FLOAT,bias)*p;}void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){\\n#ifdef PERSPECTIVE_CAMERA\\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\\n#else\\nfloat linearDepth=depth;\\n#endif\\n#ifdef MANUAL_DOF\\nfloat focalPlane=linearDepth-focus;float farDoF=(focalPlane-dof.z)/dof.w;float nearDoF=(-focalPlane-dof.x)/dof.y;float blur=(focalPlane>0.0)? farDoF : nearDoF;\\n#else\\nconst float CIRCLE_OF_CONFUSION=0.03;float focalPlaneMM=focus*1000.0;float depthMM=linearDepth*1000.0;float focalPlane=(depthMM*focalLength)/(depthMM-focalLength);float farDoF=(focalPlaneMM*focalLength)/(focalPlaneMM-focalLength);float nearDoF=(focalPlaneMM-focalLength)/(focalPlaneMM*fStop*CIRCLE_OF_CONFUSION);float blur=abs(focalPlane-farDoF)*nearDoF;\\n#endif\\nconst int MAX_RING_SAMPLES=RINGS_INT*SAMPLES_INT;blur=clamp(blur,0.0,1.0);vec3 color=inputColor.rgb;if(blur>=0.05){vec2 blurFactor=blur*maxBlur*texelSize;float s=1.0;int ringSamples;for(int i=1;i<=RINGS_INT;i++){ringSamples=i*SAMPLES_INT;for(int j=0;j<MAX_RING_SAMPLES;j++){if(j>=ringSamples){break;}s+=gather(float(i),float(j),float(ringSamples),uv,blurFactor,blur,color);}}color/=s;}\\n#ifdef SHOW_FOCUS\\nfloat edge=0.002*linearDepth;float m=clamp(smoothstep(0.0,edge,blur),0.0,1.0);float e=clamp(smoothstep(1.0-edge,1.0,blur),0.0,1.0);color=mix(color,vec3(1.0,0.5,0.0),(1.0-m)*0.6);color=mix(color,vec3(0.0,0.5,1.0),((1.0-e)-(1.0-m))*0.2);\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n/**\r\n * Depth of Field shader v2.4.\r\n *\r\n * Yields more realistic results but is also more demanding.\r\n *\r\n * Original shader code by Martins Upitis:\r\n *  http://blenderartists.org/forum/showthread.php?237488-GLSL-depth-of-field-with-bokeh-v2-4-(update)\r\n *\r\n * @deprecated Use DepthOfFieldEffect instead.\r\n */\r\n\r\nclass RealisticBokehEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new bokeh effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.focus=1.0] - The focus distance in world units.\r\n\t * @param {Number} [options.focalLength=24.0] - The focal length of the main camera.\r\n\t * @param {Number} [options.fStop=0.9] - The ratio of the lens focal length to the diameter of the entrance pupil (aperture).\r\n\t * @param {Number} [options.luminanceThreshold=0.5] - A luminance threshold.\r\n\t * @param {Number} [options.luminanceGain=2.0] - A luminance gain factor.\r\n\t * @param {Number} [options.bias=0.5] - A blur bias.\r\n\t * @param {Number} [options.fringe=0.7] - A blur offset.\r\n\t * @param {Number} [options.maxBlur=1.0] - The maximum blur strength.\r\n\t * @param {Boolean} [options.rings=3] - The number of blur iterations.\r\n\t * @param {Boolean} [options.samples=2] - The amount of samples taken per ring.\r\n\t * @param {Boolean} [options.showFocus=false] - Whether the focal point should be highlighted. Useful for debugging.\r\n\t * @param {Boolean} [options.manualDoF=false] - Enables manual control over the depth of field.\r\n\t * @param {Boolean} [options.pentagon=false] - Enables pentagonal blur shapes. Requires a high number of rings and samples.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tfocus = 1.0,\r\n\t\tfocalLength = 24.0,\r\n\t\tfStop = 0.9,\r\n\t\tluminanceThreshold = 0.5,\r\n\t\tluminanceGain = 2.0,\r\n\t\tbias = 0.5,\r\n\t\tfringe = 0.7,\r\n\t\tmaxBlur = 1.0,\r\n\t\trings = 3,\r\n\t\tsamples = 2,\r\n\t\tshowFocus = false,\r\n\t\tmanualDoF = false,\r\n\t\tpentagon = false\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"RealisticBokehEffect\", fragmentShader$v, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"focus\", new Uniform(focus)],\r\n\t\t\t\t[\"focalLength\", new Uniform(focalLength)],\r\n\t\t\t\t[\"fStop\", new Uniform(fStop)],\r\n\t\t\t\t[\"luminanceThreshold\", new Uniform(luminanceThreshold)],\r\n\t\t\t\t[\"luminanceGain\", new Uniform(luminanceGain)],\r\n\t\t\t\t[\"bias\", new Uniform(bias)],\r\n\t\t\t\t[\"fringe\", new Uniform(fringe)],\r\n\t\t\t\t[\"maxBlur\", new Uniform(maxBlur)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.rings = rings;\r\n\t\tthis.samples = samples;\r\n\t\tthis.showFocus = showFocus;\r\n\t\tthis.manualDoF = manualDoF;\r\n\t\tthis.pentagon = pentagon;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of blur iterations.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget rings() {\r\n\r\n\t\treturn Number.parseInt(this.defines.get(\"RINGS_INT\"));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of blur iterations.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset rings(value) {\r\n\r\n\t\tvalue = Math.floor(value);\r\n\r\n\t\tthis.defines.set(\"RINGS_INT\", value.toFixed(0));\r\n\t\tthis.defines.set(\"RINGS_FLOAT\", value.toFixed(1));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of blur samples per ring.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn Number.parseInt(this.defines.get(\"SAMPLES_INT\"));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of blur samples per ring.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tvalue = Math.floor(value);\r\n\r\n\t\tthis.defines.set(\"SAMPLES_INT\", value.toFixed(0));\r\n\t\tthis.defines.set(\"SAMPLES_FLOAT\", value.toFixed(1));\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the focal point will be highlighted.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget showFocus() {\r\n\r\n\t\treturn this.defines.has(\"SHOW_FOCUS\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables focal point highlighting.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset showFocus(value) {\r\n\r\n\t\tvalue ? this.defines.set(\"SHOW_FOCUS\", \"1\") : this.defines.delete(\"SHOW_FOCUS\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the Depth of Field should be calculated manually.\r\n\t *\r\n\t * If enabled, the Depth of Field can be adjusted via the `dof` uniform.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget manualDoF() {\r\n\r\n\t\treturn this.defines.has(\"MANUAL_DOF\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables manual Depth of Field.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset manualDoF(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.set(\"MANUAL_DOF\", \"1\");\r\n\t\t\tthis.uniforms.set(\"dof\", new Uniform(new Vector4(0.2, 1.0, 0.2, 2.0)));\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"MANUAL_DOF\");\r\n\t\t\tthis.uniforms.delete(\"dof\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the blur shape should be pentagonal.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget pentagon() {\r\n\r\n\t\treturn this.defines.has(\"PENTAGON\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables pentagonal blur.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset pentagon(value) {\r\n\r\n\t\tvalue ? this.defines.set(\"PENTAGON\", \"1\") : this.defines.delete(\"PENTAGON\");\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$w = \"uniform float count;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 sl=vec2(sin(uv.y*count),cos(uv.y*count));vec3 scanlines=vec3(sl.x,sl.y,sl.x);outputColor=vec4(scanlines,inputColor.a);}\";\n\n/**\r\n * A scanline effect.\r\n */\r\n\r\nclass ScanlineEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new scanline effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.OVERLAY] - The blend function of this effect.\r\n\t * @param {Number} [options.density=1.25] - The scanline density.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.OVERLAY, density = 1.25 } = {}) {\r\n\r\n\t\tsuper(\"ScanlineEffect\", fragmentShader$w, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"count\", new Uniform(0.0)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The original resolution.\r\n\t\t *\r\n\t\t * @type {Vector2}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Vector2$1();\r\n\r\n\t\t/**\r\n\t\t * The amount of scanlines, relative to the screen height.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.density = density;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Returns the current scanline density.\r\n\t *\r\n\t * @return {Number} The scanline density.\r\n\t */\r\n\r\n\tgetDensity() {\r\n\r\n\t\treturn this.density;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the scanline density.\r\n\t *\r\n\t * @param {Number} density - The new scanline density.\r\n\t */\r\n\r\n\tsetDensity(density) {\r\n\r\n\t\tthis.density = density;\r\n\t\tthis.setSize(this.resolution.x, this.resolution.y);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of this pass.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.resolution.set(width, height);\r\n\t\tthis.uniforms.get(\"count\").value = Math.round(height * this.density);\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$x = \"uniform bool active;uniform vec2 center;uniform float waveSize;uniform float radius;uniform float maxRadius;uniform float amplitude;varying float vSize;void mainUv(inout vec2 uv){if(active){vec2 aspectCorrection=vec2(aspect,1.0);vec2 difference=uv*aspectCorrection-center*aspectCorrection;float distance=sqrt(dot(difference,difference))*vSize;if(distance>radius){if(distance<radius+waveSize){float angle=(distance-radius)*PI2/waveSize;float cosSin=(1.0-cos(angle))*0.5;float extent=maxRadius+waveSize;float decay=max(extent-distance*distance,0.0)/extent;uv-=((cosSin*amplitude*difference)/distance)*decay;}}}}\";\n\nvar vertexShader$a = \"uniform float size;uniform float cameraDistance;varying float vSize;void mainSupport(){vSize=(0.1*cameraDistance)/size;}\";\n\n/**\r\n * Half PI.\r\n *\r\n * @type {Number}\r\n * @private\r\n */\r\n\r\nconst HALF_PI = Math.PI * 0.5;\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n */\r\n\r\nconst v$1 = new Vector3();\r\n\r\n/**\r\n * A vector.\r\n *\r\n * @type {Vector3}\r\n * @private\r\n */\r\n\r\nconst ab = new Vector3();\r\n\r\n/**\r\n * A shock wave effect.\r\n *\r\n * Based on a Gist by Jean-Philippe Sarda:\r\n *  https://gist.github.com/jpsarda/33cea67a9f2ecb0a0eda\r\n *\r\n * Warning: This effect cannot be merged with convolution effects.\r\n */\r\n\r\nclass ShockWaveEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new shock wave effect.\r\n\t *\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Vector3} [epicenter] - The world position of the shock wave epicenter.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {Number} [options.speed=2.0] - The animation speed.\r\n\t * @param {Number} [options.maxRadius=1.0] - The extent of the shock wave.\r\n\t * @param {Number} [options.waveSize=0.2] - The wave size.\r\n\t * @param {Number} [options.amplitude=0.05] - The distortion amplitude.\r\n\t */\r\n\r\n\tconstructor(camera, epicenter = new Vector3(), {\r\n\t\tspeed = 2.0,\r\n\t\tmaxRadius = 1.0,\r\n\t\twaveSize = 0.2,\r\n\t\tamplitude = 0.05\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"ShockWaveEffect\", fragmentShader$x, {\r\n\r\n\t\t\tvertexShader: vertexShader$a,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"active\", new Uniform(false)],\r\n\t\t\t\t[\"center\", new Uniform(new Vector2$1(0.5, 0.5))],\r\n\t\t\t\t[\"cameraDistance\", new Uniform(1.0)],\r\n\t\t\t\t[\"size\", new Uniform(1.0)],\r\n\t\t\t\t[\"radius\", new Uniform(-waveSize)],\r\n\t\t\t\t[\"maxRadius\", new Uniform(maxRadius)],\r\n\t\t\t\t[\"waveSize\", new Uniform(waveSize)],\r\n\t\t\t\t[\"amplitude\", new Uniform(amplitude)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * The epicenter.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @example shockWavePass.epicenter = myMesh.position;\r\n\t\t */\r\n\r\n\t\tthis.epicenter = epicenter;\r\n\r\n\t\t/**\r\n\t\t * The object position in screen space.\r\n\t\t *\r\n\t\t * @type {Vector3}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.screenPosition = this.uniforms.get(\"center\").value;\r\n\r\n\t\t/**\r\n\t\t * The speed of the shock wave animation.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t */\r\n\r\n\t\tthis.speed = speed;\r\n\r\n\t\t/**\r\n\t\t * A time accumulator.\r\n\t\t *\r\n\t\t * @type {Number}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.time = 0.0;\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the shock wave animation is active.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.active = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Emits the shock wave.\r\n\t */\r\n\r\n\texplode() {\r\n\r\n\t\tthis.time = 0.0;\r\n\t\tthis.active = true;\r\n\t\tthis.uniforms.get(\"active\").value = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [delta] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, delta) {\r\n\r\n\t\tconst epicenter = this.epicenter;\r\n\t\tconst camera = this.camera;\r\n\t\tconst uniforms = this.uniforms;\r\n\t\tconst uniformActive = uniforms.get(\"active\");\r\n\r\n\t\tif(this.active) {\r\n\r\n\t\t\tconst waveSize = uniforms.get(\"waveSize\").value;\r\n\r\n\t\t\t// Calculate direction vectors.\r\n\t\t\tcamera.getWorldDirection(v$1);\r\n\t\t\tab.copy(camera.position).sub(epicenter);\r\n\r\n\t\t\t// Don't render the effect if the object is behind the camera.\r\n\t\t\tuniformActive.value = (v$1.angleTo(ab) > HALF_PI);\r\n\r\n\t\t\tif(uniformActive.value) {\r\n\r\n\t\t\t\t// Scale the effect based on distance to the object.\r\n\t\t\t\tuniforms.get(\"cameraDistance\").value = camera.position.distanceTo(epicenter);\r\n\r\n\t\t\t\t// Calculate the screen position of the epicenter.\r\n\t\t\t\tv$1.copy(epicenter).project(camera);\r\n\t\t\t\tthis.screenPosition.set((v$1.x + 1.0) * 0.5, (v$1.y + 1.0) * 0.5);\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// Update the shock wave radius based on time.\r\n\t\t\tthis.time += delta * this.speed;\r\n\t\t\tconst radius = this.time - waveSize;\r\n\t\t\tuniforms.get(\"radius\").value = radius;\r\n\r\n\t\t\tif(radius >= (uniforms.get(\"maxRadius\").value + waveSize) * 2.0) {\r\n\r\n\t\t\t\tthis.active = false;\r\n\t\t\t\tuniformActive.value = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\n/**\r\n * A selective bloom effect.\r\n *\r\n * This effect applies bloom only to selected objects by using layers. Make sure\r\n * to enable the selection layer for all relevant lights:\r\n *\r\n * `lights.forEach((l) => l.layers.enable(bloomEffect.selection.layer));`\r\n *\r\n * Attention: If you don't need to limit bloom to a subset of objects, consider\r\n * using the {@link BloomEffect} instead for better performance.\r\n */\r\n\r\nclass SelectiveBloomEffect extends BloomEffect {\r\n\r\n\t/**\r\n\t * Constructs a new selective bloom effect.\r\n\t *\r\n\t * @param {Scene} scene - The main scene.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Object} [options] - The options. See {@link BloomEffect} for details.\r\n\t */\r\n\r\n\tconstructor(scene, camera, options) {\r\n\r\n\t\tsuper(options);\r\n\r\n\t\t/**\r\n\t\t * The main scene.\r\n\t\t *\r\n\t\t * @type {Scene}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.scene = scene;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * A clear pass.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(true, true, false);\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\r\n\t\t/**\r\n\t\t * A render pass.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderPass = new RenderPass(scene, camera);\r\n\t\tthis.renderPass.clear = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass that renders all objects solid black.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.blackoutPass = new RenderPass(scene, camera, new MeshBasicMaterial({ color: 0x000000 }));\r\n\t\tthis.blackoutPass.clear = false;\r\n\r\n\t\t/**\r\n\t\t * A render pass that only renders the background of the main scene.\r\n\t\t *\r\n\t\t * @type {RenderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.backgroundPass = (() => {\r\n\r\n\t\t\tconst backgroundScene = new Scene();\r\n\t\t\tconst pass = new RenderPass(backgroundScene, camera);\r\n\r\n\t\t\tbackgroundScene.background = scene.background;\r\n\t\t\tpass.clear = false;\r\n\r\n\t\t\treturn pass;\r\n\r\n\t\t})();\r\n\r\n\t\t/**\r\n\t\t * A render target.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetSelection = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: true\r\n\t\t});\r\n\r\n\t\tthis.renderTargetSelection.texture.name = \"Bloom.Selection\";\r\n\t\tthis.renderTargetSelection.texture.generateMipmaps = false;\r\n\r\n\t\t/**\r\n\t\t * A selection of objects.\r\n\t\t *\r\n\t\t * @type {Selection}\r\n\t\t */\r\n\r\n\t\tthis.selection = new Selection();\r\n\r\n\t\t/**\r\n\t\t * Indicates whether the selection should be considered inverted.\r\n\t\t *\r\n\t\t * @type {Boolean}\r\n\t\t */\r\n\r\n\t\tthis.inverted = false;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the scene background should be ignored.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget ignoreBackground() {\r\n\r\n\t\treturn !this.backgroundPass.enabled;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables background rendering.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset ignoreBackground(value) {\r\n\r\n\t\tthis.backgroundPass.enabled = !value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst scene = this.scene;\r\n\t\tconst camera = this.camera;\r\n\t\tconst selection = this.selection;\r\n\t\tconst renderTarget = this.renderTargetSelection;\r\n\r\n\t\tconst background = scene.background;\r\n\t\tconst mask = camera.layers.mask;\r\n\r\n\t\tthis.clearPass.render(renderer, renderTarget);\r\n\r\n\t\tif(!this.ignoreBackground) {\r\n\r\n\t\t\tthis.backgroundPass.render(renderer, renderTarget);\r\n\r\n\t\t}\r\n\r\n\t\tscene.background = null;\r\n\r\n\t\tif(this.inverted) {\r\n\r\n\t\t\tcamera.layers.set(selection.layer);\r\n\t\t\tthis.blackoutPass.render(renderer, renderTarget);\r\n\t\t\tcamera.layers.mask = mask;\r\n\r\n\t\t\tselection.setVisible(false);\r\n\t\t\tthis.renderPass.render(renderer, renderTarget);\r\n\t\t\tselection.setVisible(true);\r\n\r\n\t\t} else {\r\n\r\n\t\t\tselection.setVisible(false);\r\n\t\t\tthis.blackoutPass.render(renderer, renderTarget);\r\n\t\t\tselection.setVisible(true);\r\n\r\n\t\t\tcamera.layers.set(selection.layer);\r\n\t\t\tthis.renderPass.render(renderer, renderTarget);\r\n\t\t\tcamera.layers.mask = mask;\r\n\r\n\t\t}\r\n\r\n\t\tscene.background = background;\r\n\t\tsuper.update(renderer, renderTarget, deltaTime);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tsuper.setSize(width, height);\r\n\r\n\t\tthis.backgroundPass.setSize(width, height);\r\n\t\tthis.blackoutPass.setSize(width, height);\r\n\t\tthis.renderPass.setSize(width, height);\r\n\r\n\t\tthis.renderTargetSelection.setSize(\r\n\t\t\tthis.resolution.width,\r\n\t\t\tthis.resolution.height\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tsuper.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tthis.backgroundPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.blackoutPass.initialize(renderer, alpha, frameBufferType);\r\n\t\tthis.renderPass.initialize(renderer, alpha, frameBufferType);\r\n\r\n\t\tif(!alpha && frameBufferType === UnsignedByteType) {\r\n\r\n\t\t\tthis.renderTargetSelection.texture.format = RGBFormat;\r\n\r\n\t\t}\r\n\r\n\t\tif(frameBufferType !== undefined) {\r\n\r\n\t\t\tthis.renderTargetSelection.texture.type = frameBufferType;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$y = \"uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,vec3(1.0-0.607*intensity,0.769*intensity,0.189*intensity)),dot(inputColor.rgb,vec3(0.349*intensity,1.0-0.314*intensity,0.168*intensity)),dot(inputColor.rgb,vec3(0.272*intensity,0.534*intensity,1.0-0.869*intensity)));outputColor=vec4(color,inputColor.a);}\";\n\n/**\r\n * A sepia effect.\r\n */\r\n\r\nclass SepiaEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new sepia effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Number} [options.intensity=1.0] - The intensity of the effect.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, intensity = 1.0 } = {}) {\r\n\r\n\t\tsuper(\"SepiaEffect\", fragmentShader$y, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"intensity\", new Uniform(intensity)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t}\r\n\r\n}\n\n// Generated with SMAASearchImageData.generate().toCanvas().toDataURL(), cropped, high dynamic range.\r\nvar searchImageDataURL = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC\";\n\n// Generated with SMAAAreaImageData.generate().toCanvas().toDataURL().\r\nvar areaImageDataURL = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC\";\n\nvar fragmentShader$z = \"uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;/***Moves values to a target vector based on a given conditional vector.*/void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}\";\n\nvar vertexShader$b = \"varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}\";\n\n/**\r\n * Subpixel Morphological Antialiasing (SMAA).\r\n *\r\n * https://github.com/iryoku/smaa/releases/tag/v2.8\r\n */\r\n\r\nclass SMAAEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new SMAA effect.\r\n\t *\r\n\t * @param {Image} searchImage - The SMAA search image. Preload this image using the {@link SMAAImageLoader}.\r\n\t * @param {Image} areaImage - The SMAA area image. Preload this image using the {@link SMAAImageLoader}.\r\n\t * @param {SMAAPreset} [preset=SMAAPreset.HIGH] - An SMAA quality preset.\r\n\t * @param {EdgeDetectionMode} [edgeDetectionMode=EdgeDetectionMode.COLOR] - The edge detection mode.\r\n\t */\r\n\r\n\tconstructor(searchImage, areaImage, preset = SMAAPreset.HIGH, edgeDetectionMode = EdgeDetectionMode.COLOR) {\r\n\r\n\t\tsuper(\"SMAAEffect\", fragmentShader$z, {\r\n\r\n\t\t\tvertexShader: vertexShader$b,\r\n\t\t\tblendFunction: BlendFunction.NORMAL,\r\n\t\t\tattributes: EffectAttribute.CONVOLUTION,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"weightMap\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * A render target for the edge detection.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetEdges = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetEdges.texture.name = \"SMAA.Edges\";\r\n\r\n\t\t/**\r\n\t\t * A render target for the edge weights.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetWeights = this.renderTargetEdges.clone();\r\n\r\n\t\tthis.renderTargetWeights.texture.name = \"SMAA.Weights\";\r\n\t\tthis.renderTargetWeights.texture.format = RGBAFormat;\r\n\r\n\t\tthis.uniforms.get(\"weightMap\").value = this.renderTargetWeights.texture;\r\n\r\n\t\t/**\r\n\t\t * A clear pass for the edges buffer.\r\n\t\t *\r\n\t\t * @type {ClearPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.clearPass = new ClearPass(true, false, false);\r\n\t\tthis.clearPass.overrideClearColor = new Color(0x000000);\r\n\t\tthis.clearPass.overrideClearAlpha = 1.0;\r\n\r\n\t\t/**\r\n\t\t * An edge detection pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.edgeDetectionPass = new ShaderPass(\r\n\t\t\tnew EdgeDetectionMaterial(new Vector2$1(), edgeDetectionMode)\r\n\t\t);\r\n\r\n\t\tif(edgeDetectionMode === EdgeDetectionMode.DEPTH) {\r\n\r\n\t\t\tthis.attributes |= EffectAttribute.DEPTH;\r\n\r\n\t\t}\r\n\r\n\t\t/**\r\n\t\t * An SMAA weights pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.weightsPass = new ShaderPass(new SMAAWeightsMaterial());\r\n\r\n\t\tthis.weightsPass.getFullscreenMaterial().uniforms.searchTexture.value = (() => {\r\n\r\n\t\t\tconst searchTexture = new Texture(searchImage);\r\n\t\t\tsearchTexture.name = \"SMAA.Search\";\r\n\t\t\tsearchTexture.magFilter = NearestFilter;\r\n\t\t\tsearchTexture.minFilter = NearestFilter;\r\n\t\t\tsearchTexture.format = RGBAFormat;\r\n\t\t\tsearchTexture.generateMipmaps = false;\r\n\t\t\tsearchTexture.needsUpdate = true;\r\n\t\t\tsearchTexture.flipY = true;\r\n\r\n\t\t\treturn searchTexture;\r\n\r\n\t\t})();\r\n\r\n\t\tthis.weightsPass.getFullscreenMaterial().uniforms.areaTexture.value = (() => {\r\n\r\n\t\t\tconst areaTexture = new Texture(areaImage);\r\n\t\t\tareaTexture.name = \"SMAA.Area\";\r\n\t\t\tareaTexture.minFilter = LinearFilter;\r\n\t\t\tareaTexture.format = RGBAFormat;\r\n\t\t\tareaTexture.generateMipmaps = false;\r\n\t\t\tareaTexture.needsUpdate = true;\r\n\t\t\tareaTexture.flipY = false;\r\n\r\n\t\t\treturn areaTexture;\r\n\r\n\t\t})();\r\n\r\n\t\tthis.applyPreset(preset);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal edge detection material.\r\n\t *\r\n\t * @type {EdgeDetectionMaterial}\r\n\t */\r\n\r\n\tget edgeDetectionMaterial() {\r\n\r\n\t\treturn this.edgeDetectionPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal edge detection material.\r\n\t *\r\n\t * @type {EdgeDetectionMaterial}\r\n\t * @deprecated Use edgeDetectionMaterial instead.\r\n\t */\r\n\r\n\tget colorEdgesMaterial() {\r\n\r\n\t\treturn this.edgeDetectionMaterial;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The internal edge weights material.\r\n\t *\r\n\t * @type {SMAAWeightsMaterial}\r\n\t */\r\n\r\n\tget weightsMaterial() {\r\n\r\n\t\treturn this.weightsPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the edge detection sensitivity.\r\n\t *\r\n\t * See {@link EdgeDetectionMaterial#setEdgeDetectionThreshold} for more details.\r\n\t *\r\n\t * @deprecated Use applyPreset or edgeDetectionMaterial instead.\r\n\t * @param {Number} threshold - The edge detection sensitivity. Range: [0.05, 0.5].\r\n\t */\r\n\r\n\tsetEdgeDetectionThreshold(threshold) {\r\n\r\n\t\tthis.edgeDetectionPass.getFullscreenMaterial().setEdgeDetectionThreshold(threshold);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the maximum amount of horizontal/vertical search steps.\r\n\t *\r\n\t * See {@link SMAAWeightsMaterial#setOrthogonalSearchSteps} for more details.\r\n\t *\r\n\t * @deprecated Use applyPreset or weightsMaterial instead.\r\n\t * @param {Number} steps - The search steps. Range: [0, 112].\r\n\t */\r\n\r\n\tsetOrthogonalSearchSteps(steps) {\r\n\r\n\t\tthis.weightsPass.getFullscreenMaterial().setOrthogonalSearchSteps(steps);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Applies the given quality preset.\r\n\t *\r\n\t * @param {SMAAPreset} preset - The preset.\r\n\t */\r\n\r\n\tapplyPreset(preset) {\r\n\r\n\t\tconst edgeDetectionMaterial = this.edgeDetectionMaterial;\r\n\t\tconst weightsMaterial = this.weightsMaterial;\r\n\r\n\t\tswitch(preset) {\r\n\r\n\t\t\tcase SMAAPreset.LOW:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.15);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(4);\r\n\t\t\t\tweightsMaterial.diagonalDetection = false;\r\n\t\t\t\tweightsMaterial.cornerRounding = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase SMAAPreset.MEDIUM:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.1);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(8);\r\n\t\t\t\tweightsMaterial.diagonalDetection = false;\r\n\t\t\t\tweightsMaterial.cornerRounding = false;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase SMAAPreset.HIGH:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.1);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(16);\r\n\t\t\t\tweightsMaterial.setDiagonalSearchSteps(8);\r\n\t\t\t\tweightsMaterial.setCornerRounding(25);\r\n\t\t\t\tweightsMaterial.diagonalDetection = true;\r\n\t\t\t\tweightsMaterial.cornerRounding = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase SMAAPreset.ULTRA:\r\n\t\t\t\tedgeDetectionMaterial.setEdgeDetectionThreshold(0.05);\r\n\t\t\t\tweightsMaterial.setOrthogonalSearchSteps(32);\r\n\t\t\t\tweightsMaterial.setDiagonalSearchSteps(16);\r\n\t\t\t\tweightsMaterial.setCornerRounding(25);\r\n\t\t\t\tweightsMaterial.diagonalDetection = true;\r\n\t\t\t\tweightsMaterial.cornerRounding = true;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.edgeDetectionMaterial;\r\n\t\tmaterial.uniforms.depthBuffer.value = depthTexture;\r\n\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tthis.clearPass.render(renderer, this.renderTargetEdges);\r\n\t\tthis.edgeDetectionPass.render(renderer, inputBuffer, this.renderTargetEdges);\r\n\t\tthis.weightsPass.render(renderer, this.renderTargetEdges, this.renderTargetWeights);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst edgeDetectionMaterial = this.edgeDetectionPass.getFullscreenMaterial();\r\n\t\tconst weightsMaterial = this.weightsPass.getFullscreenMaterial();\r\n\r\n\t\tthis.renderTargetEdges.setSize(width, height);\r\n\t\tthis.renderTargetWeights.setSize(width, height);\r\n\r\n\t\tweightsMaterial.uniforms.resolution.value.set(width, height);\r\n\t\tweightsMaterial.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\r\n\t\tedgeDetectionMaterial.uniforms.texelSize.value.copy(weightsMaterial.uniforms.texelSize.value);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Deletes internal render targets and textures.\r\n\t */\r\n\r\n\tdispose() {\r\n\r\n\t\tconst uniforms = this.weightsPass.getFullscreenMaterial().uniforms;\r\n\t\tuniforms.searchTexture.value.dispose();\r\n\t\tuniforms.areaTexture.value.dispose();\r\n\r\n\t\tsuper.dispose();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The SMAA search image, encoded as a base64 data URL.\r\n\t *\r\n\t * Use this image data to create an Image instance and use it together with\r\n\t * the area image to create an {@link SMAAEffect}.\r\n\t *\r\n\t * @type {String}\r\n\t * @deprecated Use SMAAImageLoader instead.\r\n\t * @example\r\n\t * const searchImage = new Image();\r\n\t * searchImage.addEventListener(\"load\", progress);\r\n\t * searchImage.src = SMAAEffect.searchImageDataURL;\r\n\t */\r\n\r\n\tstatic get searchImageDataURL() {\r\n\r\n\t\treturn searchImageDataURL;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The SMAA area image, encoded as a base64 data URL.\r\n\t *\r\n\t * Use this image data to create an Image instance and use it together with\r\n\t * the search image to create an {@link SMAAEffect}.\r\n\t *\r\n\t * @type {String}\r\n\t * @deprecated Use SMAAImageLoader instead.\r\n\t * @example\r\n\t * const areaImage = new Image();\r\n\t * areaImage.addEventListener(\"load\", progress);\r\n\t * areaImage.src = SMAAEffect.areaImageDataURL;\r\n\t */\r\n\r\n\tstatic get areaImageDataURL() {\r\n\r\n\t\treturn areaImageDataURL;\r\n\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * An enumeration of SMAA presets.\r\n *\r\n * @type {Object}\r\n * @property {Number} LOW - Results in around 60% of the maximum quality.\r\n * @property {Number} MEDIUM - Results in around 80% of the maximum quality.\r\n * @property {Number} HIGH - Results in around 95% of the maximum quality.\r\n * @property {Number} ULTRA - Results in around 99% of the maximum quality.\r\n */\r\n\r\nconst SMAAPreset = {\r\n\r\n\tLOW: 0,\r\n\tMEDIUM: 1,\r\n\tHIGH: 2,\r\n\tULTRA: 3\r\n\r\n};\n\nvar fragmentShader$A = \"uniform sampler2D aoBuffer;uniform float luminanceInfluence;\\n#ifdef DEPTH_AWARE_UPSAMPLING\\n#ifdef GL_FRAGMENT_PRECISION_HIGH\\nuniform highp sampler2D normalDepthBuffer;\\n#else\\nuniform mediump sampler2D normalDepthBuffer;\\n#endif\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;\\n#if defined(DEPTH_AWARE_UPSAMPLING) && __VERSION__ == 300\\nvec4 normalDepth[4]=vec4[](textureOffset(normalDepthBuffer,uv,ivec2(0,0)),textureOffset(normalDepthBuffer,uv,ivec2(0,1)),textureOffset(normalDepthBuffer,uv,ivec2(1,0)),textureOffset(normalDepthBuffer,uv,ivec2(1,1)));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4]=ivec2[](ivec2(0,0),ivec2(0,1),ivec2(1,0),ivec2(1,1));ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);\\n#else\\nfloat ao=aoLinear;\\n#endif\\nfloat l=linearToRelativeLuminance(inputColor.rgb);ao=mix(ao,1.0,l*luminanceInfluence);outputColor=vec4(vec3(ao),inputColor.a);}\";\n\n/**\r\n * A Screen Space Ambient Occlusion (SSAO) effect.\r\n *\r\n * For high quality visuals use two SSAO effect instances in a row with\r\n * different radii, one for rough AO and one for fine details.\r\n *\r\n * This effect supports depth-aware upsampling and should be rendered at a lower\r\n * resolution. The resolution should match that of the downsampled normals and\r\n * depth. If you intend to render SSAO at full resolution, do not provide a\r\n * downsampled `normalDepthBuffer` and make sure to disable\r\n * `depthAwareUpsampling`.\r\n *\r\n * It's recommended to specify a relative render resolution using the\r\n * `resolutionScale` constructor parameter to avoid undesired sampling patterns.\r\n *\r\n * Based on \"Scalable Ambient Obscurance\" by Morgan McGuire et al. and\r\n * \"Depth-aware upsampling experiments\" by Eleni Maria Stea:\r\n * https://research.nvidia.com/publication/scalable-ambient-obscurance\r\n * https://eleni.mutantstargoat.com/hikiko/on-depth-aware-upsampling\r\n */\r\n\r\nclass SSAOEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new SSAO effect.\r\n\t *\r\n\t * @todo Move normalBuffer to options.\r\n\t * @param {Camera} camera - The main camera.\r\n\t * @param {Texture} normalBuffer - A texture that contains the scene normals. May be null if a normalDepthBuffer is provided. See {@link NormalPass}.\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.MULTIPLY] - The blend function of this effect.\r\n\t * @param {Number} [options.distanceScaling=true] - Enables or disables distance-based radius scaling.\r\n\t * @param {Number} [options.depthAwareUpsampling=true] - Enables or disables depth-aware upsampling. Has no effect if WebGL 2 is not supported.\r\n\t * @param {Number} [options.normalDepthBuffer=null] - A texture that contains downsampled scene normals and depth. See {@link DepthDownsamplingPass}.\r\n\t * @param {Number} [options.samples=9] - The amount of samples per pixel. Should not be a multiple of the ring count.\r\n\t * @param {Number} [options.rings=7] - The amount of spiral turns in the occlusion sampling pattern. Should be a prime number.\r\n\t * @param {Number} [options.distanceThreshold=0.97] - A global distance threshold at which the occlusion effect starts to fade out. Range [0.0, 1.0].\r\n\t * @param {Number} [options.distanceFalloff=0.03] - The distance falloff. Influences the smoothness of the overall occlusion cutoff. Range [0.0, 1.0].\r\n\t * @param {Number} [options.rangeThreshold=0.0005] - A local occlusion range threshold at which the occlusion starts to fade out. Range [0.0, 1.0].\r\n\t * @param {Number} [options.rangeFalloff=0.001] - The occlusion range falloff. Influences the smoothness of the proximity cutoff. Range [0.0, 1.0].\r\n\t * @param {Number} [options.minRadiusScale=0.33] - The minimum radius scale. Has no effect if distance scaling is disabled.\r\n\t * @param {Number} [options.luminanceInfluence=0.7] - Determines how much the luminance of the scene influences the ambient occlusion.\r\n\t * @param {Number} [options.radius=0.1825] - The occlusion sampling radius, expressed as a resolution independent scale. Range [1e-6, 1.0].\r\n\t * @param {Number} [options.intensity=1.0] - The intensity of the ambient occlusion.\r\n\t * @param {Number} [options.bias=0.025] - An occlusion bias. Eliminates artifacts caused by depth discontinuities.\r\n\t * @param {Number} [options.fade=0.01] - Influences the smoothness of the shadows. A lower value results in higher contrast.\r\n\t * @param {Number} [options.resolutionScale=1.0] - The resolution scale.\r\n\t * @param {Number} [options.width=Resizer.AUTO_SIZE] - The render width.\r\n\t * @param {Number} [options.height=Resizer.AUTO_SIZE] - The render height.\r\n\t */\r\n\r\n\tconstructor(camera, normalBuffer, {\r\n\t\tblendFunction = BlendFunction.MULTIPLY,\r\n\t\tdistanceScaling = true,\r\n\t\tdepthAwareUpsampling = true,\r\n\t\tnormalDepthBuffer = null,\r\n\t\tsamples = 9,\r\n\t\trings = 7,\r\n\t\tdistanceThreshold = 0.97,\r\n\t\tdistanceFalloff = 0.03,\r\n\t\trangeThreshold = 0.0005,\r\n\t\trangeFalloff = 0.001,\r\n\t\tminRadiusScale = 0.33,\r\n\t\tluminanceInfluence = 0.7,\r\n\t\tradius = 0.1825,\r\n\t\tintensity = 1.0,\r\n\t\tbias = 0.025,\r\n\t\tfade = 0.01,\r\n\t\tresolutionScale = 1.0,\r\n\t\twidth = Resizer.AUTO_SIZE,\r\n\t\theight = Resizer.AUTO_SIZE\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"SSAOEffect\", fragmentShader$A, {\r\n\r\n\t\t\tblendFunction,\r\n\t\t\tattributes: EffectAttribute.DEPTH,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"aoBuffer\", new Uniform(null)],\r\n\t\t\t\t[\"luminanceInfluence\", new Uniform(luminanceInfluence)],\r\n\t\t\t\t[\"scale\", new Uniform(0.0)] // Unused.\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * A render target for the ambient occlusion shadows.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetAO = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: LinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetAO.texture.name = \"AO.Target\";\r\n\t\tthis.renderTargetAO.texture.generateMipmaps = false;\r\n\r\n\t\tthis.uniforms.get(\"aoBuffer\").value = this.renderTargetAO.texture;\r\n\r\n\t\t/**\r\n\t\t * The resolution of this effect.\r\n\t\t *\r\n\t\t * @type {Resizer}\r\n\t\t */\r\n\r\n\t\tthis.resolution = new Resizer(this, width, height, resolutionScale);\r\n\r\n\t\t/**\r\n\t\t * The current radius relative to the render height.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.r = 1.0;\r\n\r\n\t\t/**\r\n\t\t * The main camera.\r\n\t\t *\r\n\t\t * @type {Camera}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.camera = camera;\r\n\r\n\t\t/**\r\n\t\t * An SSAO pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.ssaoPass = new ShaderPass((() => {\r\n\r\n\t\t\tconst noiseTexture = new NoiseTexture(64, 64);\r\n\t\t\tnoiseTexture.wrapS = noiseTexture.wrapT = RepeatWrapping;\r\n\r\n\t\t\tconst material = new SSAOMaterial(camera);\r\n\t\t\tmaterial.uniforms.noiseTexture.value = noiseTexture;\r\n\t\t\tmaterial.uniforms.intensity.value = intensity;\r\n\t\t\tmaterial.uniforms.minRadiusScale.value = minRadiusScale;\r\n\t\t\tmaterial.uniforms.fade.value = fade;\r\n\t\t\tmaterial.uniforms.bias.value = bias;\r\n\r\n\t\t\tif(normalDepthBuffer !== null) {\r\n\r\n\t\t\t\tmaterial.uniforms.normalDepthBuffer.value = normalDepthBuffer;\r\n\t\t\t\tmaterial.defines.NORMAL_DEPTH = \"1\";\r\n\r\n\t\t\t\tif(depthAwareUpsampling) {\r\n\r\n\t\t\t\t\tthis.uniforms.set(\"normalDepthBuffer\", new Uniform(normalDepthBuffer));\r\n\t\t\t\t\tthis.defines.set(\"DEPTH_AWARE_UPSAMPLING\", \"1\");\r\n\t\t\t\t\tthis.defines.set(\"THRESHOLD\", \"0.997\");\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tmaterial.uniforms.normalBuffer.value = normalBuffer;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn material;\r\n\r\n\t\t})());\r\n\r\n\t\tthis.distanceScaling = distanceScaling;\r\n\t\tthis.samples = samples;\r\n\t\tthis.rings = rings;\r\n\r\n\t\t// @todo Special case treatment added for backwards-compatibility.\r\n\t\tthis.radius = (radius > 1.0) ? (radius / 100.0) : radius;\r\n\r\n\t\tthis.setDistanceCutoff(distanceThreshold, distanceFalloff);\r\n\t\tthis.setProximityCutoff(rangeThreshold, rangeFalloff);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The SSAO material.\r\n\t *\r\n\t * @type {SSAOMaterial}\r\n\t */\r\n\r\n\tget ssaoMaterial() {\r\n\r\n\t\treturn this.ssaoPass.getFullscreenMaterial();\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of occlusion samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget samples() {\r\n\r\n\t\treturn Number(this.ssaoMaterial.defines.SAMPLES_INT);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of occlusion samples per pixel.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset samples(value) {\r\n\r\n\t\tconst material = this.ssaoMaterial;\r\n\t\tmaterial.defines.SAMPLES_INT = value.toFixed(0);\r\n\t\tmaterial.defines.SAMPLES_FLOAT = value.toFixed(1);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The amount of spiral turns in the occlusion sampling pattern.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget rings() {\r\n\r\n\t\treturn Number(this.ssaoMaterial.defines.SPIRAL_TURNS);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the amount of spiral turns in the occlusion sampling pattern.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset rings(value) {\r\n\r\n\t\tconst material = this.ssaoMaterial;\r\n\t\tmaterial.defines.SPIRAL_TURNS = value.toFixed(1);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The occlusion sampling radius.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget radius() {\r\n\r\n\t\treturn this.r;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the occlusion sampling radius. Range [1e-6, 1.0].\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset radius(value) {\r\n\r\n\t\tthis.r = Math.min(Math.max(value, 1e-6), 1.0);\r\n\r\n\t\tconst radius = this.r * this.resolution.height;\r\n\t\tconst material = this.ssaoMaterial;\r\n\t\tmaterial.defines.RADIUS = radius.toFixed(11);\r\n\t\tmaterial.defines.RADIUS_SQ = (radius * radius).toFixed(11);\r\n\t\tmaterial.needsUpdate = true;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether distance-based radius scaling is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget distanceScaling() {\r\n\r\n\t\treturn (this.ssaoMaterial.defines.DISTANCE_SCALING !== undefined);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables distance-based radius scaling.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset distanceScaling(value) {\r\n\r\n\t\tif(this.distanceScaling !== value) {\r\n\r\n\t\t\tconst material = this.ssaoMaterial;\r\n\r\n\t\t\tif(value) {\r\n\r\n\t\t\t\tmaterial.defines.DISTANCE_SCALING = \"1\";\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tdelete material.defines.DISTANCE_SCALING;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tmaterial.needsUpdate = true;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the occlusion distance cutoff.\r\n\t *\r\n\t * @param {Number} threshold - The distance threshold. Range [0.0, 1.0].\r\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\r\n\t */\r\n\r\n\tsetDistanceCutoff(threshold, falloff) {\r\n\r\n\t\tthis.ssaoMaterial.uniforms.distanceCutoff.value.set(\r\n\t\t\tMath.min(Math.max(threshold, 0.0), 1.0),\r\n\t\t\tMath.min(Math.max(threshold + falloff, 0.0), 1.0)\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the occlusion proximity cutoff.\r\n\t *\r\n\t * @param {Number} threshold - The range threshold. Range [0.0, 1.0].\r\n\t * @param {Number} falloff - The falloff. Range [0.0, 1.0].\r\n\t */\r\n\r\n\tsetProximityCutoff(threshold, falloff) {\r\n\r\n\t\tthis.ssaoMaterial.uniforms.proximityCutoff.value.set(\r\n\t\t\tMath.min(Math.max(threshold, 0.0), 1.0),\r\n\t\t\tMath.min(Math.max(threshold + falloff, 0.0), 1.0)\r\n\t\t);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the depth texture.\r\n\t *\r\n\t * @param {Texture} depthTexture - A depth texture.\r\n\t * @param {Number} [depthPacking=0] - The depth packing.\r\n\t */\r\n\r\n\tsetDepthTexture(depthTexture, depthPacking = 0) {\r\n\r\n\t\tconst material = this.ssaoMaterial;\r\n\r\n\t\tif(material.defines.NORMAL_DEPTH === undefined) {\r\n\r\n\t\t\tmaterial.uniforms.normalDepthBuffer.value = depthTexture;\r\n\t\t\tmaterial.depthPacking = depthPacking;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tthis.ssaoPass.render(renderer, null, this.renderTargetAO);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the camera projection matrix uniforms and the size of internal\r\n\t * render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tconst resolution = this.resolution;\r\n\t\tresolution.base.set(width, height);\r\n\r\n\t\tconst w = resolution.width;\r\n\t\tconst h = resolution.height;\r\n\r\n\t\tthis.renderTargetAO.setSize(w, h);\r\n\t\tthis.ssaoMaterial.setTexelSize(1.0 / w, 1.0 / h);\r\n\r\n\t\tconst camera = this.camera;\r\n\t\tconst uniforms = this.ssaoMaterial.uniforms;\r\n\t\tuniforms.noiseScale.value.set(w, h).divideScalar(64.0);\r\n\t\tuniforms.inverseProjectionMatrix.value.getInverse(camera.projectionMatrix);\r\n\t\tuniforms.projectionMatrix.value.copy(camera.projectionMatrix);\r\n\r\n\t\t// Update the absolute radius.\r\n\t\tthis.radius = this.r;\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$B = \"uniform sampler2D texture;\\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\\nvarying vec2 vUv2;\\n#endif\\nvoid mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){\\n#if defined(ASPECT_CORRECTION) || defined(UV_TRANSFORM)\\nvec4 texel=texelToLinear(texture2D(texture,vUv2));\\n#else\\nvec4 texel=texelToLinear(texture2D(texture,uv));\\n#endif\\noutputColor=TEXEL;}\";\n\nvar vertexShader$c = \"#ifdef ASPECT_CORRECTION\\nuniform float scale;\\n#else\\nuniform mat3 uvTransform;\\n#endif\\nvarying vec2 vUv2;void mainSupport(const in vec2 uv){\\n#ifdef ASPECT_CORRECTION\\nvUv2=uv*vec2(aspect,1.0)*scale;\\n#else\\nvUv2=(uvTransform*vec3(uv,1.0)).xy;\\n#endif\\n}\";\n\n/**\r\n * A texture effect.\r\n */\r\n\r\nclass TextureEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new texture effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Texture} [options.texture] - A texture.\r\n\t * @param {Boolean} [options.aspectCorrection=false] - Deprecated. Enable uvTransform instead and adjust the texture's offset, repeat and center.\r\n\t */\r\n\r\n\tconstructor({ blendFunction = BlendFunction.NORMAL, texture = null, aspectCorrection = false } = {}) {\r\n\r\n\t\tsuper(\"TextureEffect\", fragmentShader$B, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tdefines: new Map([\r\n\t\t\t\t[\"TEXEL\", \"texel\"]\r\n\t\t\t]),\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"texture\", new Uniform(null)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.texture = texture;\r\n\t\tthis.aspectCorrection = aspectCorrection;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The texture.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tget texture() {\r\n\r\n\t\treturn this.uniforms.get(\"texture\").value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the texture.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} if you switch to a texture\r\n\t * that uses a different encoding.\r\n\t *\r\n\t * @type {Texture}\r\n\t */\r\n\r\n\tset texture(value) {\r\n\r\n\t\tthis.uniforms.get(\"texture\").value = value;\r\n\r\n\t\tif(value !== null) {\r\n\r\n\t\t\tif(value.encoding === sRGBEncoding) {\r\n\r\n\t\t\t\tthis.defines.set(\"texelToLinear(texel)\", \"sRGBToLinear(texel)\");\r\n\r\n\t\t\t} else if(value.encoding === LinearEncoding) {\r\n\r\n\t\t\t\tthis.defines.set(\"texelToLinear(texel)\", \"texel\");\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.log(\"Unsupported encoding: \" + value.encoding);\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether aspect correction is enabled.\r\n\t *\r\n\t * If enabled, the texture can be scaled using the `scale` uniform.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use uvTransform instead for full control over the texture coordinates.\r\n\t */\r\n\r\n\tget aspectCorrection() {\r\n\r\n\t\treturn this.defines.has(\"ASPECT_CORRECTION\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables aspect correction.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Number}\r\n\t * @deprecated Use uvTransform instead for full control over the texture coordinates.\r\n\t */\r\n\r\n\tset aspectCorrection(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tif(this.uvTransform) {\r\n\r\n\t\t\t\tthis.uvTransform = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.defines.set(\"ASPECT_CORRECTION\", \"1\");\r\n\t\t\tthis.uniforms.set(\"scale\", new Uniform(1.0));\r\n\t\t\tthis.vertexShader = vertexShader$c;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"ASPECT_CORRECTION\");\r\n\t\t\tthis.uniforms.delete(\"scale\");\r\n\t\t\tthis.vertexShader = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether the texture UV coordinates will be transformed using the\r\n\t * transformation matrix of the texture.\r\n\t *\r\n\t * Cannot be used if aspect correction is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget uvTransform() {\r\n\r\n\t\treturn this.defines.has(\"UV_TRANSFORM\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables texture UV transformation.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset uvTransform(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tif(this.aspectCorrection) {\r\n\r\n\t\t\t\tthis.aspectCorrection = false;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.defines.set(\"UV_TRANSFORM\", \"1\");\r\n\t\t\tthis.uniforms.set(\"uvTransform\", new Uniform(new Matrix3()));\r\n\t\t\tthis.vertexShader = vertexShader$c;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"UV_TRANSFORM\");\r\n\t\t\tthis.uniforms.delete(\"uvTransform\");\r\n\t\t\tthis.vertexShader = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the swizzles that will be applied to the `r`, `g`, `b`, and `a`\r\n\t * components of a texel before it is written to the output color.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing the\r\n\t * texture swizzles.\r\n\t *\r\n\t * @param {ColorChannel} r - The swizzle for the `r` component.\r\n\t * @param {ColorChannel} [g=r] - The swizzle for the `g` component.\r\n\t * @param {ColorChannel} [b=r] - The swizzle for the `b` component.\r\n\t * @param {ColorChannel} [a=r] - The swizzle for the `a` component.\r\n\t */\r\n\r\n\tsetTextureSwizzleRGBA(r, g = r, b = r, a = r) {\r\n\r\n\t\tconst rgba = \"rgba\";\r\n\t\tlet swizzle = \"\";\r\n\r\n\t\tif(r !== ColorChannel.RED || g !== ColorChannel.GREEN ||\r\n\t\t\tb !== ColorChannel.BLUE || a !== ColorChannel.ALPHA) {\r\n\r\n\t\t\tswizzle = [\".\", rgba[r], rgba[g], rgba[b], rgba[a]].join(\"\");\r\n\r\n\t\t}\r\n\r\n\t\tthis.defines.set(\"TEXEL\", \"texel\" + swizzle);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tconst texture = this.uniforms.get(\"texture\").value;\r\n\r\n\t\tif(this.uvTransform && texture.matrixAutoUpdate) {\r\n\r\n\t\t\ttexture.updateMatrix();\r\n\t\t\tthis.uniforms.get(\"uvTransform\").value.copy(texture.matrix);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$C = \"uniform sampler2D luminanceMap;uniform float middleGrey;uniform float maxLuminance;uniform float averageLuminance;vec3 toneMap(vec3 c){\\n#ifdef ADAPTED_LUMINANCE\\nfloat lumAvg=texture2D(luminanceMap,vec2(0.5)).r;\\n#else\\nfloat lumAvg=averageLuminance;\\n#endif\\nfloat lumPixel=linearToRelativeLuminance(c);float lumScaled=(lumPixel*middleGrey)/lumAvg;float lumCompressed=(lumScaled*(1.0+(lumScaled/(maxLuminance*maxLuminance))))/(1.0+lumScaled);return lumCompressed*c;}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(toneMap(inputColor.rgb),inputColor.a);}\";\n\n/**\r\n * A tone mapping effect that supports adaptive luminosity.\r\n *\r\n * If adaptivity is enabled, this effect generates a texture that represents the\r\n * luminosity of the current scene and adjusts it over time to simulate the\r\n * optic nerve responding to the amount of light it is receiving.\r\n *\r\n * Reference:\r\n *  GDC2007 - Wolfgang Engel, Post-Processing Pipeline\r\n *  http://perso.univ-lyon1.fr/jean-claude.iehl/Public/educ/GAMA/2007/gdc07/Post-Processing_Pipeline.pdf\r\n */\r\n\r\nclass ToneMappingEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new tone mapping effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Boolean} [options.adaptive=true] - Whether the tone mapping should use an adaptive luminance map.\r\n\t * @param {Number} [options.resolution=256] - The render texture resolution of the luminance map.\r\n\t * @param {Number} [options.middleGrey=0.6] - The middle grey factor.\r\n\t * @param {Number} [options.maxLuminance=16.0] - The maximum luminance.\r\n\t * @param {Number} [options.averageLuminance=1.0] - The average luminance.\r\n\t * @param {Number} [options.adaptationRate=1.0] - The luminance adaptation rate.\r\n\t */\r\n\r\n\tconstructor({\r\n\t\tblendFunction = BlendFunction.NORMAL,\r\n\t\tadaptive = true,\r\n\t\tresolution = 256,\r\n\t\tmiddleGrey = 0.6,\r\n\t\tmaxLuminance = 16.0,\r\n\t\taverageLuminance = 1.0,\r\n\t\tadaptationRate = 2.0\r\n\t} = {}) {\r\n\r\n\t\tsuper(\"ToneMappingEffect\", fragmentShader$C, {\r\n\r\n\t\t\tblendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"luminanceMap\", new Uniform(null)],\r\n\t\t\t\t[\"middleGrey\", new Uniform(middleGrey)],\r\n\t\t\t\t[\"maxLuminance\", new Uniform(maxLuminance)],\r\n\t\t\t\t[\"averageLuminance\", new Uniform(averageLuminance)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\t/**\r\n\t\t * The render target for the current luminance.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t * @todo Remove LinearMipMapLinearFilter in next major release.\r\n\t\t */\r\n\r\n\t\tthis.renderTargetLuminance = new WebGLRenderTarget(1, 1, {\r\n\t\t\tminFilter: (LinearMipmapLinearFilter !== undefined) ? LinearMipmapLinearFilter : LinearMipMapLinearFilter,\r\n\t\t\tmagFilter: LinearFilter,\r\n\t\t\tstencilBuffer: false,\r\n\t\t\tdepthBuffer: false,\r\n\t\t\tformat: RGBFormat\r\n\t\t});\r\n\r\n\t\tthis.renderTargetLuminance.texture.name = \"ToneMapping.Luminance\";\r\n\t\tthis.renderTargetLuminance.texture.generateMipmaps = true;\r\n\r\n\t\t/**\r\n\t\t * The render target for adapted luminance.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetAdapted = this.renderTargetLuminance.clone();\r\n\t\tthis.renderTargetAdapted.texture.name = \"ToneMapping.AdaptedLuminance\";\r\n\t\tthis.renderTargetAdapted.texture.generateMipmaps = false;\r\n\t\tthis.renderTargetAdapted.texture.minFilter = LinearFilter;\r\n\r\n\t\t/**\r\n\t\t * A render target that holds a copy of the adapted luminance.\r\n\t\t *\r\n\t\t * @type {WebGLRenderTarget}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.renderTargetPrevious = this.renderTargetAdapted.clone();\r\n\t\tthis.renderTargetPrevious.texture.name = \"ToneMapping.PreviousLuminance\";\r\n\r\n\t\t/**\r\n\t\t * A save pass.\r\n\t\t *\r\n\t\t * @type {SavePass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.savePass = new SavePass(this.renderTargetPrevious, false);\r\n\r\n\t\t/**\r\n\t\t * A luminance shader pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.luminancePass = new ShaderPass(new LuminanceMaterial());\r\n\r\n\t\tconst luminanceMaterial = this.luminancePass.getFullscreenMaterial();\r\n\t\tluminanceMaterial.useThreshold = false;\r\n\r\n\t\t/**\r\n\t\t * An adaptive luminance shader pass.\r\n\t\t *\r\n\t\t * @type {ShaderPass}\r\n\t\t * @private\r\n\t\t */\r\n\r\n\t\tthis.adaptiveLuminancePass = new ShaderPass(new AdaptiveLuminanceMaterial());\r\n\r\n\t\tconst uniforms = this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;\r\n\t\tuniforms.previousLuminanceBuffer.value = this.renderTargetPrevious.texture;\r\n\t\tuniforms.currentLuminanceBuffer.value = this.renderTargetLuminance.texture;\r\n\r\n\t\tthis.adaptationRate = adaptationRate;\r\n\t\tthis.resolution = resolution;\r\n\t\tthis.adaptive = adaptive;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The resolution of the render targets.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget resolution() {\r\n\r\n\t\treturn this.renderTargetLuminance.width;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Sets the resolution of the internal render targets.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset resolution(value) {\r\n\r\n\t\t// Round the given value to the next power of two.\r\n\t\tconst exponent = Math.max(0, Math.ceil(Math.log2(value)));\r\n\t\tvalue = Math.pow(2, exponent);\r\n\r\n\t\tthis.renderTargetLuminance.setSize(value, value);\r\n\t\tthis.renderTargetPrevious.setSize(value, value);\r\n\t\tthis.renderTargetAdapted.setSize(value, value);\r\n\r\n\t\tthis.adaptiveLuminancePass.getFullscreenMaterial().defines.MIP_LEVEL_1X1 = exponent.toFixed(1);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether this pass uses adaptive luminance.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget adaptive() {\r\n\r\n\t\treturn this.defines.has(\"ADAPTED_LUMINANCE\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables adaptive luminance.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset adaptive(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.set(\"ADAPTED_LUMINANCE\", \"1\");\r\n\t\t\tthis.uniforms.get(\"luminanceMap\").value = this.renderTargetAdapted.texture;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"ADAPTED_LUMINANCE\");\r\n\t\t\tthis.uniforms.get(\"luminanceMap\").value = null;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * The luminance adaptation rate.\r\n\t *\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tget adaptationRate() {\r\n\r\n\t\treturn this.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t */\r\n\r\n\tset adaptationRate(value) {\r\n\r\n\t\tthis.adaptiveLuminancePass.getFullscreenMaterial().uniforms.tau.value = value;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated\r\n\t */\r\n\r\n\tget distinction() {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed.\");\r\n\r\n\t\treturn 1.0;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @type {Number}\r\n\t * @deprecated\r\n\t */\r\n\r\n\tset distinction(value) {\r\n\r\n\t\tconsole.warn(this.name, \"The distinction field has been removed.\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates this effect.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {WebGLRenderTarget} inputBuffer - A frame buffer that contains the result of the previous pass.\r\n\t * @param {Number} [deltaTime] - The time between the last frame and the current one in seconds.\r\n\t */\r\n\r\n\tupdate(renderer, inputBuffer, deltaTime) {\r\n\r\n\t\tif(this.adaptive) {\r\n\r\n\t\t\t// Render the luminance of the current scene into a mipmap render target.\r\n\t\t\tthis.luminancePass.render(renderer, inputBuffer, this.renderTargetLuminance);\r\n\r\n\t\t\t// Use the frame delta to adapt the luminance over time.\r\n\t\t\tconst uniforms = this.adaptiveLuminancePass.getFullscreenMaterial().uniforms;\r\n\t\t\tuniforms.deltaTime.value = deltaTime;\r\n\t\t\tthis.adaptiveLuminancePass.render(renderer, null, this.renderTargetAdapted);\r\n\r\n\t\t\t// Save the adapted luminance for the next frame.\r\n\t\t\tthis.savePass.render(renderer, this.renderTargetAdapted);\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Updates the size of internal render targets.\r\n\t *\r\n\t * @param {Number} width - The width.\r\n\t * @param {Number} height - The height.\r\n\t */\r\n\r\n\tsetSize(width, height) {\r\n\r\n\t\tthis.savePass.setSize(width, height);\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Performs initialization tasks.\r\n\t *\r\n\t * @param {WebGLRenderer} renderer - The renderer.\r\n\t * @param {Boolean} alpha - Whether the renderer uses the alpha channel or not.\r\n\t * @param {Number} frameBufferType - The type of the main frame buffers.\r\n\t */\r\n\r\n\tinitialize(renderer, alpha, frameBufferType) {\r\n\r\n\t\tconst clearPass = new ClearPass(true, false, false);\r\n\t\tclearPass.overrideClearColor = new Color(0x7fffff);\r\n\t\tclearPass.render(renderer, this.renderTargetPrevious);\r\n\t\tclearPass.dispose();\r\n\r\n\t}\r\n\r\n}\n\nvar fragmentShader$D = \"uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\\n#ifdef ESKIL\\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\\n#else\\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\\n#endif\\noutputColor=vec4(color,inputColor.a);}\";\n\n/**\r\n * A vignette effect.\r\n */\r\n\r\nclass VignetteEffect extends Effect {\r\n\r\n\t/**\r\n\t * Constructs a new vignette effect.\r\n\t *\r\n\t * @param {Object} [options] - The options.\r\n\t * @param {BlendFunction} [options.blendFunction=BlendFunction.NORMAL] - The blend function of this effect.\r\n\t * @param {Boolean} [options.eskil=false] - Enables Eskil's vignette technique.\r\n\t * @param {Number} [options.offset=0.5] - The vignette offset.\r\n\t * @param {Number} [options.darkness=0.5] - The vignette darkness.\r\n\t */\r\n\r\n\tconstructor(options = {}) {\r\n\r\n\t\tconst settings = Object.assign({\r\n\t\t\tblendFunction: BlendFunction.NORMAL,\r\n\t\t\teskil: false,\r\n\t\t\toffset: 0.5,\r\n\t\t\tdarkness: 0.5\r\n\t\t}, options);\r\n\r\n\t\tsuper(\"VignetteEffect\", fragmentShader$D, {\r\n\r\n\t\t\tblendFunction: settings.blendFunction,\r\n\r\n\t\t\tuniforms: new Map([\r\n\t\t\t\t[\"offset\", new Uniform(settings.offset)],\r\n\t\t\t\t[\"darkness\", new Uniform(settings.darkness)]\r\n\t\t\t])\r\n\r\n\t\t});\r\n\r\n\t\tthis.eskil = settings.eskil;\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Indicates whether Eskil's vignette technique is enabled.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tget eskil() {\r\n\r\n\t\treturn this.defines.has(\"ESKIL\");\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * Enables or disables Eskil's vignette technique.\r\n\t *\r\n\t * You'll need to call {@link EffectPass#recompile} after changing this value.\r\n\t *\r\n\t * @type {Boolean}\r\n\t */\r\n\r\n\tset eskil(value) {\r\n\r\n\t\tif(value) {\r\n\r\n\t\t\tthis.defines.set(\"ESKIL\", \"1\");\r\n\r\n\t\t} else {\r\n\r\n\t\t\tthis.defines.delete(\"ESKIL\");\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\n\nexport { AdaptiveLuminanceMaterial, BlendFunction, BlendMode, BloomEffect, BlurPass, BokehEffect, BokehMaterial, BrightnessContrastEffect, ChromaticAberrationEffect, CircleOfConfusionMaterial, ClearMaskPass, ClearPass, ColorAverageEffect, ColorChannel, ColorDepthEffect, ColorEdgesMaterial, ConvolutionMaterial, CopyMaterial, DepthComparisonMaterial, DepthDownsamplingMaterial, DepthDownsamplingPass, DepthEffect, DepthMaskMaterial, DepthOfFieldEffect, DepthPass, Disposable, DotScreenEffect, EdgeDetectionMaterial, EdgeDetectionMode, Effect, EffectAttribute, EffectComposer, EffectMaterial, EffectPass, GammaCorrectionEffect, GlitchEffect, GlitchMode, GodRaysEffect, GodRaysMaterial, GridEffect, HueSaturationEffect, Initializable, KernelSize, LuminanceMaterial, MaskFunction, MaskMaterial, MaskPass, NoiseEffect, NoiseTexture, NormalPass, OutlineEdgesMaterial, OutlineEffect, OutlineMaterial, OverrideMaterialManager, Pass, PixelationEffect, RawImageData, RealisticBokehEffect, RenderPass, Resizable, Resizer, SMAAAreaImageData, SMAAEffect, SMAAImageLoader, SMAAPreset, SMAASearchImageData, SMAAWeightsMaterial, SSAOEffect, SSAOMaterial, SavePass, ScanlineEffect, Section, Selection, SelectiveBloomEffect, SepiaEffect, ShaderPass, ShockWaveEffect, TextureEffect, ToneMappingEffect, VignetteEffect, WebGLExtension };\n","import {\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tMesh\n} from \"../../../build/three.module.js\";\n\nfunction Pass() {\n\n\t// if set to true, the pass is processed by the composer\n\tthis.enabled = true;\n\n\t// if set to true, the pass indicates to swap read and write buffer after rendering\n\tthis.needsSwap = true;\n\n\t// if set to true, the pass clears its buffer before rendering\n\tthis.clear = false;\n\n\t// if set to true, the result of the pass is rendered to screen. This is set automatically by EffectComposer.\n\tthis.renderToScreen = false;\n\n}\n\nObject.assign( Pass.prototype, {\n\n\tsetSize: function ( /* width, height */ ) {},\n\n\trender: function ( /* renderer, writeBuffer, readBuffer, deltaTime, maskActive */ ) {\n\n\t\tconsole.error( 'THREE.Pass: .render() must be implemented in derived pass.' );\n\n\t}\n\n} );\n\n// Helper for passes that need to fill the viewport with a single quad.\n\nPass.FullScreenQuad = ( function () {\n\n\tvar camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tvar geometry = new PlaneBufferGeometry( 2, 2 );\n\n\tvar FullScreenQuad = function ( material ) {\n\n\t\tthis._mesh = new Mesh( geometry, material );\n\n\t};\n\n\tObject.defineProperty( FullScreenQuad.prototype, 'material', {\n\n\t\tget: function () {\n\n\t\t\treturn this._mesh.material;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._mesh.material = value;\n\n\t\t}\n\n\t} );\n\n\tObject.assign( FullScreenQuad.prototype, {\n\n\t\tdispose: function () {\n\n\t\t\tthis._mesh.geometry.dispose();\n\n\t\t},\n\n\t\trender: function ( renderer ) {\n\n\t\t\trenderer.render( this._mesh, camera );\n\n\t\t}\n\n\t} );\n\n\treturn FullScreenQuad;\n\n} )();\n\nexport { Pass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Full-screen textured quad shader\n */\n\n\n\nvar CopyShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"opacity\": { value: 1.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvUv = uv;\",\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform float opacity;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvec4 texel = texture2D( tDiffuse, vUv );\",\n\t\t\"\tgl_FragColor = opacity * texel;\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nexport { CopyShader };\n","/**\n * @author bhouston / http://clara.io/\n *\n * Luminosity\n * http://en.wikipedia.org/wiki/Luminosity\n */\n\nimport {\n\tColor\n} from \"../../../build/three.module.js\";\n\nvar LuminosityHighPassShader = {\n\n\tshaderID: \"luminosityHighPass\",\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"luminosityThreshold\": { value: 1.0 },\n\t\t\"smoothWidth\": { value: 1.0 },\n\t\t\"defaultColor\": { value: new Color( 0x000000 ) },\n\t\t\"defaultOpacity\": { value: 0.0 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvUv = uv;\",\n\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\t\t\"uniform vec3 defaultColor;\",\n\t\t\"uniform float defaultOpacity;\",\n\t\t\"uniform float luminosityThreshold;\",\n\t\t\"uniform float smoothWidth;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvec4 texel = texture2D( tDiffuse, vUv );\",\n\n\t\t\"\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\",\n\n\t\t\"\tfloat v = dot( texel.xyz, luma );\",\n\n\t\t\"\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\",\n\n\t\t\"\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\",\n\n\t\t\"\tgl_FragColor = mix( outputColor, texel, alpha );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nexport { LuminosityHighPassShader };\n","/**\n * @author spidersharma / http://eduperiment.com/\n */\n\nimport {\n\tAdditiveBlending,\n\tColor,\n\tLinearFilter,\n\tMeshBasicMaterial,\n\tRGBAFormat,\n\tShaderMaterial,\n\tUniformsUtils,\n\tVector2,\n\tVector3,\n\tWebGLRenderTarget\n} from \"three/build/three.module.js\";\nimport { Pass } from \"three/examples/jsm/postprocessing/Pass.js\";\nimport { CopyShader } from \"three/examples/jsm/shaders/CopyShader.js\";\nimport { LuminosityHighPassShader } from \"three/examples/jsm/shaders/LuminosityHighPassShader.js\";\n\n/**\n * UnrealBloomPass is inspired by the bloom pass of Unreal Engine. It creates a\n * mip map chain of bloom textures and blurs them with different radii. Because\n * of the weighted combination of mips, and because larger blurs are done on\n * higher mips, this effect provides good quality and performance.\n *\n * Reference:\n * - https://docs.unrealengine.com/latest/INT/Engine/Rendering/PostProcessEffects/Bloom/\n */\nvar UnrealBloomPass = function ( resolution, strength, radius, threshold ) {\n\n\tPass.call( this );\n\n\tconsole.log(resolution);\n\tthis.strength = ( strength !== undefined ) ? strength : 1;\n\tthis.radius = radius;\n\tthis.threshold = threshold;\n\tthis.resolution = ( resolution !== undefined ) ? new Vector2( resolution.x, resolution.y ) : new Vector2( 256, 256 );\n\n\t// create color only once here, reuse it later inside the render function\n\tthis.clearColor = new Color( 0, 0, 0 );\n\n\t// render targets\n\tvar pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat, type: THREE.HalfFloatType };\n\tthis.renderTargetsHorizontal = [];\n\tthis.renderTargetsVertical = [];\n\tthis.nMips = 5;\n\tvar resx = Math.round( this.resolution.x / 2 );\n\tvar resy = Math.round( this.resolution.y / 2 );\n\n\tthis.renderTargetBright = new WebGLRenderTarget( resx, resy, pars );\n\tthis.renderTargetBright.texture.name = \"UnrealBloomPass.bright\";\n\tthis.renderTargetBright.texture.generateMipmaps = false;\n\n\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\tvar renderTargetHorizonal = new WebGLRenderTarget( resx, resy, pars );\n\n\t\trenderTargetHorizonal.texture.name = \"UnrealBloomPass.h\" + i;\n\t\trenderTargetHorizonal.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetsHorizontal.push( renderTargetHorizonal );\n\n\t\tvar renderTargetVertical = new WebGLRenderTarget( resx, resy, pars );\n\n\t\trenderTargetVertical.texture.name = \"UnrealBloomPass.v\" + i;\n\t\trenderTargetVertical.texture.generateMipmaps = false;\n\n\t\tthis.renderTargetsVertical.push( renderTargetVertical );\n\n\t\tresx = Math.round( resx / 2 );\n\n\t\tresy = Math.round( resy / 2 );\n\n\t}\n\n\t// luminosity high pass material\n\n\tif ( LuminosityHighPassShader === undefined )\n\t\tconsole.error( \"UnrealBloomPass relies on LuminosityHighPassShader\" );\n\n\tvar highPassShader = LuminosityHighPassShader;\n\tthis.highPassUniforms = UniformsUtils.clone( highPassShader.uniforms );\n\n\tthis.highPassUniforms[ \"luminosityThreshold\" ].value = threshold;\n\tthis.highPassUniforms[ \"smoothWidth\" ].value = 0.01;\n\n\tthis.materialHighPassFilter = new ShaderMaterial( {\n\t\tuniforms: this.highPassUniforms,\n\t\tvertexShader: highPassShader.vertexShader,\n\t\tfragmentShader: highPassShader.fragmentShader,\n\t\tdefines: {}\n\t} );\n\n\tthis.materialHighPassFilter.toneMapped = false;\n\t// Gaussian Blur Materials\n\tthis.separableBlurMaterials = [];\n\tvar kernelSizeArray = [ 3, 5, 7, 9, 11 ];\n\tvar resx = Math.round( this.resolution.x / 2 );\n\tvar resy = Math.round( this.resolution.y / 2 );\n\n\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\tthis.separableBlurMaterials.push( this.getSeperableBlurMaterial( kernelSizeArray[ i ] ) );\n\n\t\tthis.separableBlurMaterials[ i ].toneMapped = false;\n\t\tthis.separableBlurMaterials[ i ].uniforms[ \"texSize\" ].value = new Vector2( resx, resy );\n\n\t\tresx = Math.round( resx / 2 );\n\n\t\tresy = Math.round( resy / 2 );\n\n\t}\n\n\t// Composite material\n\tthis.compositeMaterial = this.getCompositeMaterial( this.nMips );\n\tthis.compositeMaterial.uniforms[ \"blurTexture1\" ].value = this.renderTargetsVertical[ 0 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture2\" ].value = this.renderTargetsVertical[ 1 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture3\" ].value = this.renderTargetsVertical[ 2 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture4\" ].value = this.renderTargetsVertical[ 3 ].texture;\n\tthis.compositeMaterial.uniforms[ \"blurTexture5\" ].value = this.renderTargetsVertical[ 4 ].texture;\n\tthis.compositeMaterial.uniforms[ \"bloomStrength\" ].value = strength;\n\tthis.compositeMaterial.uniforms[ \"bloomRadius\" ].value = 0.1;\n\tthis.compositeMaterial.needsUpdate = true;\n\n\tthis.compositeMaterial.toneMapped = false;\n\n\tvar bloomFactors = [ 1.0, 0.8, 0.6, 0.4, 0.2 ];\n\tthis.compositeMaterial.uniforms[ \"bloomFactors\" ].value = bloomFactors;\n\tthis.bloomTintColors = [ new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ),\n\t\t\t\t\t\t\t new Vector3( 1, 1, 1 ), new Vector3( 1, 1, 1 ) ];\n\tthis.compositeMaterial.uniforms[ \"bloomTintColors\" ].value = this.bloomTintColors;\n\n\t// copy material\n\tif ( CopyShader === undefined ) {\n\n\t\tconsole.error( \"UnrealBloomPass relies on CopyShader\" );\n\n\t}\n\n\tvar copyShader = CopyShader;\n\n\tthis.copyUniforms = UniformsUtils.clone( copyShader.uniforms );\n\tthis.copyUniforms[ \"opacity\" ].value = 1.0;\n\n\tthis.materialCopy = new ShaderMaterial( {\n\t\tuniforms: this.copyUniforms,\n\t\tvertexShader: copyShader.vertexShader,\n\t\tfragmentShader: copyShader.fragmentShader,\n\t\tblending: AdditiveBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false,\n\t\ttransparent: true\n\t} );\n\tthis.materialCopy.toneMapped = false;\n\n\tthis.enabled = true;\n\tthis.needsSwap = false;\n\n\tthis.oldClearColor = new Color();\n\tthis.oldClearAlpha = 1;\n\n\tthis.basic = new MeshBasicMaterial();\n\tthis.basic.toneMapped = false;\n\n\tthis.fsQuad = new Pass.FullScreenQuad( null );\n\n};\n\nUnrealBloomPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: UnrealBloomPass,\n\n\tdispose: function () {\n\n\t\tfor ( var i = 0; i < this.renderTargetsHorizontal.length; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].dispose();\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.renderTargetsVertical.length; i ++ ) {\n\n\t\t\tthis.renderTargetsVertical[ i ].dispose();\n\n\t\t}\n\n\t\tthis.renderTargetBright.dispose();\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tvar resx = Math.round( width / 2 );\n\t\tvar resy = Math.round( height / 2 );\n\n\t\tthis.renderTargetBright.setSize( resx, resy );\n\n\t\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.renderTargetsHorizontal[ i ].setSize( resx, resy );\n\t\t\tthis.renderTargetsVertical[ i ].setSize( resx, resy );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"texSize\" ].value = new Vector2( resx, resy );\n\n\t\t\tresx = Math.round( resx / 2 );\n\t\t\tresy = Math.round( resy / 2 );\n\n\t\t}\n\n\t},\n\n\trender: function ( renderer, writeBuffer, readBuffer, deltaTime, maskActive ) {\n\n\t\tthis.oldClearColor.copy( renderer.getClearColor() );\n\t\tthis.oldClearAlpha = renderer.getClearAlpha();\n\t\tvar oldAutoClear = renderer.autoClear;\n\t\trenderer.autoClear = false;\n\n\t\trenderer.setClearColor( this.clearColor, 0 );\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( false );\n\n\t\t// Render input to screen\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\tthis.fsQuad.material = this.basic;\n\t\t\tthis.basic.map = readBuffer.texture;\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// 1. Extract Bright Areas\n\n\t\tthis.highPassUniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.highPassUniforms[ \"luminosityThreshold\" ].value = this.threshold;\n\t\tthis.fsQuad.material = this.materialHighPassFilter;\n\n\t\trenderer.setRenderTarget( this.renderTargetBright );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// 2. Blur All the mips progressively\n\n\t\tvar inputRenderTarget = this.renderTargetBright;\n\n\t\tfor ( var i = 0; i < this.nMips; i ++ ) {\n\n\t\t\tthis.fsQuad.material = this.separableBlurMaterials[ i ];\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"colorTexture\" ].value = inputRenderTarget.texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"direction\" ].value = UnrealBloomPass.BlurDirectionX;\n\t\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"colorTexture\" ].value = this.renderTargetsHorizontal[ i ].texture;\n\t\t\tthis.separableBlurMaterials[ i ].uniforms[ \"direction\" ].value = UnrealBloomPass.BlurDirectionY;\n\t\t\trenderer.setRenderTarget( this.renderTargetsVertical[ i ] );\n\t\t\trenderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t\tinputRenderTarget = this.renderTargetsVertical[ i ];\n\n\t\t}\n\n\t\t// Composite All the mips\n\n\t\tthis.fsQuad.material = this.compositeMaterial;\n\t\tthis.compositeMaterial.uniforms[ \"bloomStrength\" ].value = this.strength;\n\t\tthis.compositeMaterial.uniforms[ \"bloomRadius\" ].value = this.radius;\n\t\tthis.compositeMaterial.uniforms[ \"bloomTintColors\" ].value = this.bloomTintColors;\n\n\t\trenderer.setRenderTarget( this.renderTargetsHorizontal[ 0 ] );\n\t\trenderer.clear();\n\t\tthis.fsQuad.render( renderer );\n\n\t\t// Blend it additively over the input texture\n\n\t\tthis.fsQuad.material = this.materialCopy;\n\t\tthis.copyUniforms[ \"tDiffuse\" ].value = this.renderTargetsHorizontal[ 0 ].texture;\n\n\t\tif ( maskActive ) renderer.state.buffers.stencil.setTest( true );\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( readBuffer );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t\t// Restore renderer settings\n\n\t\trenderer.setClearColor( this.oldClearColor, this.oldClearAlpha );\n\t\trenderer.autoClear = oldAutoClear;\n\n\t},\n\n\tgetSeperableBlurMaterial: function ( kernelRadius ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t\"KERNEL_RADIUS\": kernelRadius,\n\t\t\t\t\"SIGMA\": kernelRadius\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t\"colorTexture\": { value: null },\n\t\t\t\t\"texSize\": { value: new Vector2( 0.5, 0.5 ) },\n\t\t\t\t\"direction\": { value: new Vector2( 0.5, 0.5 ) }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"#include <common>\\\n\t\t\t\tvarying vec2 vUv;\\n\\\n\t\t\t\tuniform sampler2D colorTexture;\\n\\\n\t\t\t\tuniform vec2 texSize;\\\n\t\t\t\tuniform vec2 direction;\\\n\t\t\t\t\\\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\\\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\\\n\t\t\t\t}\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\\\n\t\t\t\t\tfloat fSigma = float(SIGMA);\\\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\\\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\\\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\\\n\t\t\t\t\t\tfloat x = float(i);\\\n\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\\\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\\\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\\\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\\\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\\\n\t\t\t\t\t\tweightSum += 2.0 * w;\\\n\t\t\t\t\t}\\\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\\n\\\n\t\t\t\t}\"\n\t\t} );\n\n\t},\n\n\tgetCompositeMaterial: function ( nMips ) {\n\n\t\treturn new ShaderMaterial( {\n\n\t\t\tdefines: {\n\t\t\t\t\"NUM_MIPS\": nMips\n\t\t\t},\n\n\t\t\tuniforms: {\n\t\t\t\t\"blurTexture1\": { value: null },\n\t\t\t\t\"blurTexture2\": { value: null },\n\t\t\t\t\"blurTexture3\": { value: null },\n\t\t\t\t\"blurTexture4\": { value: null },\n\t\t\t\t\"blurTexture5\": { value: null },\n\t\t\t\t\"dirtTexture\": { value: null },\n\t\t\t\t\"bloomStrength\": { value: 1.0 },\n\t\t\t\t\"bloomFactors\": { value: null },\n\t\t\t\t\"bloomTintColors\": { value: null },\n\t\t\t\t\"bloomRadius\": { value: 0.0 }\n\t\t\t},\n\n\t\t\tvertexShader:\n\t\t\t\t\"varying vec2 vUv;\\n\\\n\t\t\t\tvoid main() {\\n\\\n\t\t\t\t\tvUv = uv;\\n\\\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\\n\\\n\t\t\t\t}\",\n\n\t\t\tfragmentShader:\n\t\t\t\t\"varying vec2 vUv;\\\n\t\t\t\tuniform sampler2D blurTexture1;\\\n\t\t\t\tuniform sampler2D blurTexture2;\\\n\t\t\t\tuniform sampler2D blurTexture3;\\\n\t\t\t\tuniform sampler2D blurTexture4;\\\n\t\t\t\tuniform sampler2D blurTexture5;\\\n\t\t\t\tuniform sampler2D dirtTexture;\\\n\t\t\t\tuniform float bloomStrength;\\\n\t\t\t\tuniform float bloomRadius;\\\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\\\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\\\n\t\t\t\t\\\n\t\t\t\tfloat lerpBloomFactor(const in float factor) { \\\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\\\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\\\n\t\t\t\t}\\\n\t\t\t\t\\\n\t\t\t\tvoid main() {\\\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \\\n\t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\\\n\t\t\t\t}\"\n\t\t} );\n\n\t}\n\n} );\n\nUnrealBloomPass.BlurDirectionX = new Vector2( 1.0, 0.0 );\nUnrealBloomPass.BlurDirectionY = new Vector2( 0.0, 1.0 );\n\nexport { UnrealBloomPass };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * Film grain & scanlines shader\n *\n * - ported from HLSL to WebGL / GLSL\n * http://www.truevision3d.com/forums/showcase/staticnoise_colorblackwhite_scanline_shaders-t18698.0.html\n *\n * Screen Space Static Postprocessor\n *\n * Produces an analogue noise overlay similar to a film grain / TV static\n *\n * Original implementation and noise algorithm\n * Pat 'Hawthorne' Shearon\n *\n * Optimized scanlines + noise version with intensity scaling\n * Georg 'Leviathan' Steinrohder\n *\n * This version is provided under a Creative Commons Attribution 3.0 License\n * http://creativecommons.org/licenses/by/3.0/\n */\n\n\n\nvar FilmShader = {\n\n\tuniforms: {\n\n\t\t\"tDiffuse\": { value: null },\n\t\t\"time\": { value: 0.0 },\n\t\t\"nIntensity\": { value: 0.5 },\n\t\t\"sIntensity\": { value: 0.05 },\n\t\t\"sCount\": { value: 4096 },\n\t\t\"grayscale\": { value: 1 }\n\n\t},\n\n\tvertexShader: [\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t\"\tvUv = uv;\",\n\t\t\"\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ),\n\n\tfragmentShader: [\n\n\t\t\"#include <common>\",\n\n\t\t// control parameter\n\t\t\"uniform float time;\",\n\n\t\t\"uniform bool grayscale;\",\n\n\t\t// noise effect intensity value (0 = no effect, 1 = full effect)\n\t\t\"uniform float nIntensity;\",\n\n\t\t// scanlines effect intensity value (0 = no effect, 1 = full effect)\n\t\t\"uniform float sIntensity;\",\n\n\t\t// scanlines effect count value (0 = no effect, 4096 = full effect)\n\t\t\"uniform float sCount;\",\n\n\t\t\"uniform sampler2D tDiffuse;\",\n\n\t\t\"varying vec2 vUv;\",\n\n\t\t\"void main() {\",\n\n\t\t// sample the source\n\t\t\"\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );\",\n\n\t\t// make some noise\n\t\t\"\tfloat dx = rand( vUv + time );\",\n\n\t\t// add noise\n\t\t\"\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );\",\n\n\t\t// get us a sine and cosine\n\t\t\"\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );\",\n\n\t\t// add scanlines\n\t\t\"\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;\",\n\n\t\t// interpolate between source and result by intensity\n\t\t\"\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );\",\n\n\t\t// convert to grayscale if desired\n\t\t\"\tif( grayscale ) {\",\n\n\t\t\"\t\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );\",\n\n\t\t\"\t}\",\n\n\t\t\"\tgl_FragColor =  vec4( cResult, cTextureScreen.a );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" )\n\n};\n\nexport { FilmShader };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport {\n\tShaderMaterial,\n\tUniformsUtils\n} from \"../../../build/three.module.js\";\nimport { Pass } from \"../postprocessing/Pass.js\";\nimport { FilmShader } from \"../shaders/FilmShader.js\";\n\nvar FilmPass = function ( noiseIntensity, scanlinesIntensity, scanlinesCount, grayscale ) {\n\n\tPass.call( this );\n\n\tif ( FilmShader === undefined )\n\t\tconsole.error( \"FilmPass relies on FilmShader\" );\n\n\tvar shader = FilmShader;\n\n\tthis.uniforms = UniformsUtils.clone( shader.uniforms );\n\n\tthis.material = new ShaderMaterial( {\n\n\t\tuniforms: this.uniforms,\n\t\tvertexShader: shader.vertexShader,\n\t\tfragmentShader: shader.fragmentShader\n\n\t} );\n\n\tif ( grayscale !== undefined )\tthis.uniforms.grayscale.value = grayscale;\n\tif ( noiseIntensity !== undefined ) this.uniforms.nIntensity.value = noiseIntensity;\n\tif ( scanlinesIntensity !== undefined ) this.uniforms.sIntensity.value = scanlinesIntensity;\n\tif ( scanlinesCount !== undefined ) this.uniforms.sCount.value = scanlinesCount;\n\n\tthis.fsQuad = new Pass.FullScreenQuad( this.material );\n\n};\n\nFilmPass.prototype = Object.assign( Object.create( Pass.prototype ), {\n\n\tconstructor: FilmPass,\n\n\trender: function ( renderer, writeBuffer, readBuffer, deltaTime /*, maskActive */ ) {\n\n\t\tthis.uniforms[ \"tDiffuse\" ].value = readBuffer.texture;\n\t\tthis.uniforms[ \"time\" ].value += deltaTime;\n\n\t\tif ( this.renderToScreen ) {\n\n\t\t\trenderer.setRenderTarget( null );\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t} else {\n\n\t\t\trenderer.setRenderTarget( writeBuffer );\n\t\t\tif ( this.clear ) renderer.clear();\n\t\t\tthis.fsQuad.render( renderer );\n\n\t\t}\n\n\t}\n\n} );\n\nexport { FilmPass };\n","import * as dat from \"dat.gui\";\n\nimport * as three from \"three\";\nimport { BloomEffect, EffectComposer, EffectPass, RenderPass, BlendFunction, ToneMappingEffect } from \"postprocessing\";\nimport { UnrealBloomPass } from \"./patched/UnreallBloomPassPatched\";\nimport { FilmPass } from \"three/examples/jsm/postprocessing/FilmPass\";\n\n///////PATCH\nexport function renderer_patch_postprocessing(renderer) {\n    UnrealBloomPass.prototype = Object.assign(UnrealBloomPass.prototype, {\n        initialize() { },\n        originalRender: UnrealBloomPass.prototype.render,\n        render(renderer, inputBuffer, outputBuffer, delta, maskActive) {\n            this.originalRender(renderer, outputBuffer, inputBuffer, delta, maskActive);\n        }\n    });\n\n    FilmPass.prototype = Object.assign(FilmPass.prototype, {\n        initialize() { },\n        originalRender: FilmPass.prototype.render,\n        render(renderer, inputBuffer, outputBuffer, delta, maskActive) {\n            this.originalRender(renderer, outputBuffer, inputBuffer, delta, maskActive);\n        }\n    });\n}\n\nexport function renderer_fullscreen_dpi(renderer, DPI) {\n    DPI = DPI || window.devicePixelRatio;\n    renderer.setSize(window.innerWidth, window.innerHeight);\n    renderer.setPixelRatio(DPI);\n}\n\nexport function renderer_shadow_vsm(renderer) {\n    renderer.shadowMap.enabled = true;\n    renderer.shadowMap.type = THREE.VSMShadowMap;\n}\n\nfunction tweakable_obj_to_folder(obj, onchange, _root, _skip) {\n    var gui_folder = _root || new dat.GUI();\n    var _skip = _skip || {};\n    for (var i in obj) {\n        if (typeof (obj[i]) == 'object' && (_skip[i] !== true)) {\n            var r = gui_folder.addFolder(i)\n            tweakable_obj_to_folder(obj[i], onchange, r, _skip[i]);\n        }\n        if (_skip[i]) continue;\n        else {\n            if (i.toLowerCase().endsWith(\"color\") ||\n                i.toLowerCase().startsWith(\"color\")) {\n                gui_folder.addColor(obj, i).onFinishChange(onchange);\n            }\n            else {\n                gui_folder.add(obj, i).onFinishChange(onchange);\n            }\n        }\n    }\n    return gui_folder;\n}\n\n///////PATCH\nexport function renderer_tone_mapping(renderer, scene, base_config, gui_root) {\n    window.renderer = renderer;\n\n    var toneMappingOptions = {\n        None: THREE.NoToneMapping,\n        Linear: THREE.LinearToneMapping,\n        Reinhard: THREE.ReinhardToneMapping,\n        Cineon: THREE.CineonToneMapping,\n        ACESFilmic: THREE.ACESFilmicToneMapping,\n        Custom: THREE.CustomToneMapping\n    };\n\n    var config = {\n        enabled: true,\n        aces_exposure: 2,\n        toneMapping: \"ACESFilmic\",\n        gamma: 2.2,\n        toneMappingExposure: 1,\n        physicallyCorrectLights: true\n    };\n\n    for (var i in base_config) {\n        config[i] = base_config[i];\n    }\n\n    var restore = {\n        gamma: 1,\n        aces_exposure: 1,\n        toneMappingExposure: 1,\n        physicallyCorrectLights: false\n    }\n\n    console.warn(\"Enabling ACES Filmic Tone Mapping - Note, RootShader has been patched.\")\n    renderer.outputEncoding = THREE.sRGBEncoding;\n\n    //uncharted\n    three.ShaderChunk.tonemapping_pars_fragment = three.ShaderChunk.tonemapping_pars_fragment.replace(\n        'vec3 CustomToneMapping( vec3 color ) { return color; }',\n        `#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\n        float toneMappingWhitePoint = 1.0;\n        vec3 CustomToneMapping( vec3 color ) {\n            color *= toneMappingExposure;\n            return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n        }`\n    );\n\n    var unpatched = three.ShaderChunk.tonemapping_pars_fragment;\n\n    function apply_config() {\n        if (config.enabled) {\n            renderer.toneMapping = toneMappingOptions[config.toneMapping]\n            for (var i in restore) {\n                renderer[i] = config[i];\n            }\n        }\n        else {\n            renderer.toneMapping = three.NoToneMapping;\n            for (var i in restore) {\n                renderer[i] = restore[i];\n            }\n        }\n        three.ShaderChunk.tonemapping_pars_fragment = unpatched.replace(\"return saturate( color );\", \"return color * \" + (Math.round(config.aces_exposure * 10) / 10).toFixed(1) + \";\");\n        scene.traverse(object => {\n            if (object.type === 'Mesh') object.material.needsUpdate = true;\n        });\n    }\n    apply_config();\n    var tweakable = tweakable_obj_to_folder(config, apply_config, gui_root, { toneMapping: true });\n    tweakable.add(config, \"toneMapping\", Object.keys(toneMappingOptions)).onChange(apply_config);\n    return {\n        tweakable: tweakable,\n        config: config,\n        apply: apply_config\n    }\n}","/**\n * @author qiao / https://github.com/qiao\n * @author mrdoob / http://mrdoob.com\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author erich666 / http://erichaines.com\n * @author ScieCode / http://github.com/sciecode\n */\n\nimport {\n\tEventDispatcher,\n\tMOUSE,\n\tQuaternion,\n\tSpherical,\n\tTOUCH,\n\tVector2,\n\tVector3\n} from \"../../../build/three.module.js\";\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n//\n//    Orbit - left mouse / touch: one-finger move\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - right mouse, or left mouse + ctrl/meta/shiftKey, or arrow keys / touch: two-finger move\n\nvar OrbitControls = function ( object, domElement ) {\n\n\tif ( domElement === undefined ) console.warn( 'THREE.OrbitControls: The second parameter \"domElement\" is now mandatory.' );\n\tif ( domElement === document ) console.error( 'THREE.OrbitControls: \"document\" should not be used as the target \"domElement\". Please use \"renderer.domElement\" instead.' );\n\n\tthis.object = object;\n\tthis.domElement = domElement;\n\n\t// Set to false to disable this control\n\tthis.enabled = true;\n\n\t// \"target\" sets the location of focus, where the object orbits around\n\tthis.target = new Vector3();\n\n\t// How far you can dolly in and out ( PerspectiveCamera only )\n\tthis.minDistance = 0;\n\tthis.maxDistance = Infinity;\n\n\t// How far you can zoom in and out ( OrthographicCamera only )\n\tthis.minZoom = 0;\n\tthis.maxZoom = Infinity;\n\n\t// How far you can orbit vertically, upper and lower limits.\n\t// Range is 0 to Math.PI radians.\n\tthis.minPolarAngle = 0; // radians\n\tthis.maxPolarAngle = Math.PI; // radians\n\n\t// How far you can orbit horizontally, upper and lower limits.\n\t// If set, the interval [ min, max ] must be a sub-interval of [ - 2 PI, 2 PI ], with ( max - min < 2 PI )\n\tthis.minAzimuthAngle = - Infinity; // radians\n\tthis.maxAzimuthAngle = Infinity; // radians\n\n\t// Set to true to enable damping (inertia)\n\t// If damping is enabled, you must call controls.update() in your animation loop\n\tthis.enableDamping = false;\n\tthis.dampingFactor = 0.05;\n\n\t// This option actually enables dollying in and out; left as \"zoom\" for backwards compatibility.\n\t// Set to false to disable zooming\n\tthis.enableZoom = true;\n\tthis.zoomSpeed = 1.0;\n\n\t// Set to false to disable rotating\n\tthis.enableRotate = true;\n\tthis.rotateSpeed = 1.0;\n\n\t// Set to false to disable panning\n\tthis.enablePan = true;\n\tthis.panSpeed = 1.0;\n\tthis.screenSpacePanning = true; // if false, pan orthogonal to world-space direction camera.up\n\tthis.keyPanSpeed = 7.0;\t// pixels moved per arrow key push\n\n\t// Set to true to automatically rotate around the target\n\t// If auto-rotate is enabled, you must call controls.update() in your animation loop\n\tthis.autoRotate = false;\n\tthis.autoRotateSpeed = 2.0; // 30 seconds per round when fps is 60\n\n\t// Set to false to disable use of the keys\n\tthis.enableKeys = true;\n\n\t// The four arrow keys\n\tthis.keys = { LEFT: 37, UP: 38, RIGHT: 39, BOTTOM: 40 };\n\n\t// Mouse buttons\n\tthis.mouseButtons = { LEFT: MOUSE.ROTATE, MIDDLE: MOUSE.DOLLY, RIGHT: MOUSE.PAN };\n\n\t// Touch fingers\n\tthis.touches = { ONE: TOUCH.ROTATE, TWO: TOUCH.DOLLY_PAN };\n\n\t// for reset\n\tthis.target0 = this.target.clone();\n\tthis.position0 = this.object.position.clone();\n\tthis.zoom0 = this.object.zoom;\n\n\t//\n\t// public methods\n\t//\n\n\tthis.getPolarAngle = function () {\n\n\t\treturn spherical.phi;\n\n\t};\n\n\tthis.getAzimuthalAngle = function () {\n\n\t\treturn spherical.theta;\n\n\t};\n\n\tthis.saveState = function () {\n\n\t\tscope.target0.copy( scope.target );\n\t\tscope.position0.copy( scope.object.position );\n\t\tscope.zoom0 = scope.object.zoom;\n\n\t};\n\n\tthis.reset = function () {\n\n\t\tscope.target.copy( scope.target0 );\n\t\tscope.object.position.copy( scope.position0 );\n\t\tscope.object.zoom = scope.zoom0;\n\n\t\tscope.object.updateProjectionMatrix();\n\t\tscope.dispatchEvent( changeEvent );\n\n\t\tscope.update();\n\n\t\tstate = STATE.NONE;\n\n\t};\n\n\t// this method is exposed, but perhaps it would be better if we can make it private...\n\tthis.update = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\t// so camera.up is the orbit axis\n\t\tvar quat = new Quaternion().setFromUnitVectors( object.up, new Vector3( 0, 1, 0 ) );\n\t\tvar quatInverse = quat.clone().inverse();\n\n\t\tvar lastPosition = new Vector3();\n\t\tvar lastQuaternion = new Quaternion();\n\n\t\tvar twoPI = 2 * Math.PI;\n\n\t\treturn function update() {\n\n\t\t\tvar position = scope.object.position;\n\n\t\t\toffset.copy( position ).sub( scope.target );\n\n\t\t\t// rotate offset to \"y-axis-is-up\" space\n\t\t\toffset.applyQuaternion( quat );\n\n\t\t\t// angle from z-axis around y-axis\n\t\t\tspherical.setFromVector3( offset );\n\n\t\t\tif ( scope.autoRotate && state === STATE.NONE ) {\n\n\t\t\t\trotateLeft( getAutoRotationAngle() );\n\n\t\t\t}\n\n\t\t\tif ( scope.enableDamping ) {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta * scope.dampingFactor;\n\t\t\t\tspherical.phi += sphericalDelta.phi * scope.dampingFactor;\n\n\t\t\t} else {\n\n\t\t\t\tspherical.theta += sphericalDelta.theta;\n\t\t\t\tspherical.phi += sphericalDelta.phi;\n\n\t\t\t}\n\n\t\t\t// restrict theta to be between desired limits\n\n\t\t\tvar min = scope.minAzimuthAngle;\n\t\t\tvar max = scope.maxAzimuthAngle;\n\n\t\t\tif ( isFinite ( min ) && isFinite( max ) ) {\n\n\t\t\t\tif ( min < - Math.PI ) min += twoPI; else if ( min > Math.PI ) min -= twoPI;\n\n\t\t\t\tif ( max < - Math.PI ) max += twoPI; else if ( max > Math.PI ) max -= twoPI;\n\n\t\t\t\tif ( min < max ) {\n\n\t\t\t\t\tspherical.theta = Math.max( min, Math.min( max, spherical.theta ) );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tspherical.theta = ( spherical.theta > ( min + max ) / 2 ) ?\n\t\t\t\t\t\tMath.max( min, spherical.theta ) :\n\t\t\t\t\t\tMath.min( max, spherical.theta );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// restrict phi to be between desired limits\n\t\t\tspherical.phi = Math.max( scope.minPolarAngle, Math.min( scope.maxPolarAngle, spherical.phi ) );\n\n\t\t\tspherical.makeSafe();\n\n\n\t\t\tspherical.radius *= scale;\n\n\t\t\t// restrict radius to be between desired limits\n\t\t\tspherical.radius = Math.max( scope.minDistance, Math.min( scope.maxDistance, spherical.radius ) );\n\n\t\t\t// move target to panned location\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tscope.target.addScaledVector( panOffset, scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tscope.target.add( panOffset );\n\n\t\t\t}\n\n\t\t\toffset.setFromSpherical( spherical );\n\n\t\t\t// rotate offset back to \"camera-up-vector-is-up\" space\n\t\t\toffset.applyQuaternion( quatInverse );\n\n\t\t\tposition.copy( scope.target ).add( offset );\n\n\t\t\tscope.object.lookAt( scope.target );\n\n\t\t\tif ( scope.enableDamping === true ) {\n\n\t\t\t\tsphericalDelta.theta *= ( 1 - scope.dampingFactor );\n\t\t\t\tsphericalDelta.phi *= ( 1 - scope.dampingFactor );\n\n\t\t\t\tpanOffset.multiplyScalar( 1 - scope.dampingFactor );\n\n\t\t\t} else {\n\n\t\t\t\tsphericalDelta.set( 0, 0, 0 );\n\n\t\t\t\tpanOffset.set( 0, 0, 0 );\n\n\t\t\t}\n\n\t\t\tscale = 1;\n\n\t\t\t// update condition is:\n\t\t\t// min(camera displacement, camera rotation in radians)^2 > EPS\n\t\t\t// using small-angle approximation cos(x/2) = 1 - x^2 / 8\n\n\t\t\tif ( zoomChanged ||\n\t\t\t\tlastPosition.distanceToSquared( scope.object.position ) > EPS ||\n\t\t\t\t8 * ( 1 - lastQuaternion.dot( scope.object.quaternion ) ) > EPS ) {\n\n\t\t\t\tscope.dispatchEvent( changeEvent );\n\n\t\t\t\tlastPosition.copy( scope.object.position );\n\t\t\t\tlastQuaternion.copy( scope.object.quaternion );\n\t\t\t\tzoomChanged = false;\n\n\t\t\t\treturn true;\n\n\t\t\t}\n\n\t\t\treturn false;\n\n\t\t};\n\n\t}();\n\n\tthis.dispose = function () {\n\n\t\tscope.domElement.removeEventListener( 'contextmenu', onContextMenu, false );\n\t\tscope.domElement.removeEventListener( 'mousedown', onMouseDown, false );\n\t\tscope.domElement.removeEventListener( 'wheel', onMouseWheel, false );\n\n\t\tscope.domElement.removeEventListener( 'touchstart', onTouchStart, false );\n\t\tscope.domElement.removeEventListener( 'touchend', onTouchEnd, false );\n\t\tscope.domElement.removeEventListener( 'touchmove', onTouchMove, false );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.domElement.removeEventListener( 'keydown', onKeyDown, false );\n\n\t\t//scope.dispatchEvent( { type: 'dispose' } ); // should this be added here?\n\n\t};\n\n\t//\n\t// internals\n\t//\n\n\tvar scope = this;\n\n\tvar changeEvent = { type: 'change' };\n\tvar startEvent = { type: 'start' };\n\tvar endEvent = { type: 'end' };\n\n\tvar STATE = {\n\t\tNONE: - 1,\n\t\tROTATE: 0,\n\t\tDOLLY: 1,\n\t\tPAN: 2,\n\t\tTOUCH_ROTATE: 3,\n\t\tTOUCH_PAN: 4,\n\t\tTOUCH_DOLLY_PAN: 5,\n\t\tTOUCH_DOLLY_ROTATE: 6\n\t};\n\n\tvar state = STATE.NONE;\n\n\tvar EPS = 0.000001;\n\n\t// current position in spherical coordinates\n\tvar spherical = new Spherical();\n\tvar sphericalDelta = new Spherical();\n\n\tvar scale = 1;\n\tvar panOffset = new Vector3();\n\tvar zoomChanged = false;\n\n\tvar rotateStart = new Vector2();\n\tvar rotateEnd = new Vector2();\n\tvar rotateDelta = new Vector2();\n\n\tvar panStart = new Vector2();\n\tvar panEnd = new Vector2();\n\tvar panDelta = new Vector2();\n\n\tvar dollyStart = new Vector2();\n\tvar dollyEnd = new Vector2();\n\tvar dollyDelta = new Vector2();\n\n\tfunction getAutoRotationAngle() {\n\n\t\treturn 2 * Math.PI / 60 / 60 * scope.autoRotateSpeed;\n\n\t}\n\n\tfunction getZoomScale() {\n\n\t\treturn Math.pow( 0.95, scope.zoomSpeed );\n\n\t}\n\n\tfunction rotateLeft( angle ) {\n\n\t\tsphericalDelta.theta -= angle;\n\n\t}\n\n\tfunction rotateUp( angle ) {\n\n\t\tsphericalDelta.phi -= angle;\n\n\t}\n\n\tvar panLeft = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panLeft( distance, objectMatrix ) {\n\n\t\t\tv.setFromMatrixColumn( objectMatrix, 0 ); // get X column of objectMatrix\n\t\t\tv.multiplyScalar( - distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\tvar panUp = function () {\n\n\t\tvar v = new Vector3();\n\n\t\treturn function panUp( distance, objectMatrix ) {\n\n\t\t\tif ( scope.screenSpacePanning === true ) {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 1 );\n\n\t\t\t} else {\n\n\t\t\t\tv.setFromMatrixColumn( objectMatrix, 0 );\n\t\t\t\tv.crossVectors( scope.object.up, v );\n\n\t\t\t}\n\n\t\t\tv.multiplyScalar( distance );\n\n\t\t\tpanOffset.add( v );\n\n\t\t};\n\n\t}();\n\n\t// deltaX and deltaY are in pixels; right and down are positive\n\tvar pan = function () {\n\n\t\tvar offset = new Vector3();\n\n\t\treturn function pan( deltaX, deltaY ) {\n\n\t\t\tvar element = scope.domElement;\n\n\t\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\t\t// perspective\n\t\t\t\tvar position = scope.object.position;\n\t\t\t\toffset.copy( position ).sub( scope.target );\n\t\t\t\tvar targetDistance = offset.length();\n\n\t\t\t\t// half of the fov is center to top of screen\n\t\t\t\ttargetDistance *= Math.tan( ( scope.object.fov / 2 ) * Math.PI / 180.0 );\n\n\t\t\t\t// we use only clientHeight here so aspect ratio does not distort speed\n\t\t\t\tpanLeft( 2 * deltaX * targetDistance / element.clientHeight, scope.object.matrix );\n\t\t\t\tpanUp( 2 * deltaY * targetDistance / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\t\t// orthographic\n\t\t\t\tpanLeft( deltaX * ( scope.object.right - scope.object.left ) / scope.object.zoom / element.clientWidth, scope.object.matrix );\n\t\t\t\tpanUp( deltaY * ( scope.object.top - scope.object.bottom ) / scope.object.zoom / element.clientHeight, scope.object.matrix );\n\n\t\t\t} else {\n\n\t\t\t\t// camera neither orthographic nor perspective\n\t\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.' );\n\t\t\t\tscope.enablePan = false;\n\n\t\t\t}\n\n\t\t};\n\n\t}();\n\n\tfunction dollyOut( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale /= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom * dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\tfunction dollyIn( dollyScale ) {\n\n\t\tif ( scope.object.isPerspectiveCamera ) {\n\n\t\t\tscale *= dollyScale;\n\n\t\t} else if ( scope.object.isOrthographicCamera ) {\n\n\t\t\tscope.object.zoom = Math.max( scope.minZoom, Math.min( scope.maxZoom, scope.object.zoom / dollyScale ) );\n\t\t\tscope.object.updateProjectionMatrix();\n\t\t\tzoomChanged = true;\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.' );\n\t\t\tscope.enableZoom = false;\n\n\t\t}\n\n\t}\n\n\t//\n\t// event callbacks - update the object state\n\t//\n\n\tfunction handleMouseDownRotate( event ) {\n\n\t\trotateStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownDolly( event ) {\n\n\t\tdollyStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseDownPan( event ) {\n\n\t\tpanStart.set( event.clientX, event.clientY );\n\n\t}\n\n\tfunction handleMouseMoveRotate( event ) {\n\n\t\trotateEnd.set( event.clientX, event.clientY );\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMoveDolly( event ) {\n\n\t\tdollyEnd.set( event.clientX, event.clientY );\n\n\t\tdollyDelta.subVectors( dollyEnd, dollyStart );\n\n\t\tif ( dollyDelta.y > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t} else if ( dollyDelta.y < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t}\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseMovePan( event ) {\n\n\t\tpanEnd.set( event.clientX, event.clientY );\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleMouseUp( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\tfunction handleMouseWheel( event ) {\n\n\t\tif ( event.deltaY < 0 ) {\n\n\t\t\tdollyIn( getZoomScale() );\n\n\t\t} else if ( event.deltaY > 0 ) {\n\n\t\t\tdollyOut( getZoomScale() );\n\n\t\t}\n\n\t\tscope.update();\n\n\t}\n\n\tfunction handleKeyDown( event ) {\n\n\t\tvar needsUpdate = false;\n\n\t\tswitch ( event.keyCode ) {\n\n\t\t\tcase scope.keys.UP:\n\t\t\t\tpan( 0, scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.BOTTOM:\n\t\t\t\tpan( 0, - scope.keyPanSpeed );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.LEFT:\n\t\t\t\tpan( scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t\tcase scope.keys.RIGHT:\n\t\t\t\tpan( - scope.keyPanSpeed, 0 );\n\t\t\t\tneedsUpdate = true;\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( needsUpdate ) {\n\n\t\t\t// prevent the browser from scrolling on cursor keys\n\t\t\tevent.preventDefault();\n\n\t\t\tscope.update();\n\n\t\t}\n\n\n\t}\n\n\tfunction handleTouchStartRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartPan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanStart.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanStart.set( x, y );\n\n\t\t}\n\n\t}\n\n\tfunction handleTouchStartDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyStart.set( 0, distance );\n\n\t}\n\n\tfunction handleTouchStartDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchStartPan( event );\n\n\t}\n\n\tfunction handleTouchStartDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchStartDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchStartRotate( event );\n\n\t}\n\n\tfunction handleTouchMoveRotate( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\trotateEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\trotateEnd.set( x, y );\n\n\t\t}\n\n\t\trotateDelta.subVectors( rotateEnd, rotateStart ).multiplyScalar( scope.rotateSpeed );\n\n\t\tvar element = scope.domElement;\n\n\t\trotateLeft( 2 * Math.PI * rotateDelta.x / element.clientHeight ); // yes, height\n\n\t\trotateUp( 2 * Math.PI * rotateDelta.y / element.clientHeight );\n\n\t\trotateStart.copy( rotateEnd );\n\n\t}\n\n\tfunction handleTouchMovePan( event ) {\n\n\t\tif ( event.touches.length == 1 ) {\n\n\t\t\tpanEnd.set( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY );\n\n\t\t} else {\n\n\t\t\tvar x = 0.5 * ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX );\n\t\t\tvar y = 0.5 * ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY );\n\n\t\t\tpanEnd.set( x, y );\n\n\t\t}\n\n\t\tpanDelta.subVectors( panEnd, panStart ).multiplyScalar( scope.panSpeed );\n\n\t\tpan( panDelta.x, panDelta.y );\n\n\t\tpanStart.copy( panEnd );\n\n\t}\n\n\tfunction handleTouchMoveDolly( event ) {\n\n\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\n\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\n\n\t\tvar distance = Math.sqrt( dx * dx + dy * dy );\n\n\t\tdollyEnd.set( 0, distance );\n\n\t\tdollyDelta.set( 0, Math.pow( dollyEnd.y / dollyStart.y, scope.zoomSpeed ) );\n\n\t\tdollyOut( dollyDelta.y );\n\n\t\tdollyStart.copy( dollyEnd );\n\n\t}\n\n\tfunction handleTouchMoveDollyPan( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enablePan ) handleTouchMovePan( event );\n\n\t}\n\n\tfunction handleTouchMoveDollyRotate( event ) {\n\n\t\tif ( scope.enableZoom ) handleTouchMoveDolly( event );\n\n\t\tif ( scope.enableRotate ) handleTouchMoveRotate( event );\n\n\t}\n\n\tfunction handleTouchEnd( /*event*/ ) {\n\n\t\t// no-op\n\n\t}\n\n\t//\n\t// event handlers - FSM: listen for events and reset state\n\t//\n\n\tfunction onMouseDown( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\t// Prevent the browser from scrolling.\n\t\tevent.preventDefault();\n\n\t\t// Manually set the focus since calling preventDefault above\n\t\t// prevents the browser from setting it automatically.\n\n\t\tscope.domElement.focus ? scope.domElement.focus() : window.focus();\n\n\t\tvar mouseAction;\n\n\t\tswitch ( event.button ) {\n\n\t\t\tcase 0:\n\n\t\t\t\tmouseAction = scope.mouseButtons.LEFT;\n\t\t\t\tbreak;\n\n\t\t\tcase 1:\n\n\t\t\t\tmouseAction = scope.mouseButtons.MIDDLE;\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tmouseAction = scope.mouseButtons.RIGHT;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tmouseAction = - 1;\n\n\t\t}\n\n\t\tswitch ( mouseAction ) {\n\n\t\t\tcase MOUSE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseDownDolly( event );\n\n\t\t\t\tstate = STATE.DOLLY;\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.ROTATE:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase MOUSE.PAN:\n\n\t\t\t\tif ( event.ctrlKey || event.metaKey || event.shiftKey ) {\n\n\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\thandleMouseDownRotate( event );\n\n\t\t\t\t\tstate = STATE.ROTATE;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\thandleMouseDownPan( event );\n\n\t\t\t\t\tstate = STATE.PAN;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\n\t\t\tscope.domElement.ownerDocument.addEventListener( 'mouseup', onMouseUp, false );\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onMouseMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleMouseMoveRotate( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.DOLLY:\n\n\t\t\t\tif ( scope.enableZoom === false ) return;\n\n\t\t\t\thandleMouseMoveDolly( event );\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleMouseMovePan( event );\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction onMouseUp( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleMouseUp( event );\n\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mouseup', onMouseUp, false );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onMouseWheel( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableZoom === false || ( state !== STATE.NONE && state !== STATE.ROTATE ) ) return;\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tscope.dispatchEvent( startEvent );\n\n\t\thandleMouseWheel( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t}\n\n\tfunction onKeyDown( event ) {\n\n\t\tif ( scope.enabled === false || scope.enableKeys === false || scope.enablePan === false ) return;\n\n\t\thandleKeyDown( event );\n\n\t}\n\n\tfunction onTouchStart( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\n\t\tswitch ( event.touches.length ) {\n\n\t\t\tcase 1:\n\n\t\t\t\tswitch ( scope.touches.ONE ) {\n\n\t\t\t\t\tcase TOUCH.ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.PAN:\n\n\t\t\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 2:\n\n\t\t\t\tswitch ( scope.touches.TWO ) {\n\n\t\t\t\t\tcase TOUCH.DOLLY_PAN:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyPan( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_PAN;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase TOUCH.DOLLY_ROTATE:\n\n\t\t\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\t\t\thandleTouchStartDollyRotate( event );\n\n\t\t\t\t\t\tstate = STATE.TOUCH_DOLLY_ROTATE;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tstate = STATE.NONE;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t\tif ( state !== STATE.NONE ) {\n\n\t\t\tscope.dispatchEvent( startEvent );\n\n\t\t}\n\n\t}\n\n\tfunction onTouchMove( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault(); // prevent scrolling\n\t\tevent.stopPropagation();\n\n\t\tswitch ( state ) {\n\n\t\t\tcase STATE.TOUCH_ROTATE:\n\n\t\t\t\tif ( scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_PAN:\n\n\t\t\t\tif ( scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMovePan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_PAN:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enablePan === false ) return;\n\n\t\t\t\thandleTouchMoveDollyPan( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tcase STATE.TOUCH_DOLLY_ROTATE:\n\n\t\t\t\tif ( scope.enableZoom === false && scope.enableRotate === false ) return;\n\n\t\t\t\thandleTouchMoveDollyRotate( event );\n\n\t\t\t\tscope.update();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tstate = STATE.NONE;\n\n\t\t}\n\n\t}\n\n\tfunction onTouchEnd( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\thandleTouchEnd( event );\n\n\t\tscope.dispatchEvent( endEvent );\n\n\t\tstate = STATE.NONE;\n\n\t}\n\n\tfunction onContextMenu( event ) {\n\n\t\tif ( scope.enabled === false ) return;\n\n\t\tevent.preventDefault();\n\n\t}\n\n\t//\n\n\tscope.domElement.addEventListener( 'contextmenu', onContextMenu, false );\n\n\tscope.domElement.addEventListener( 'mousedown', onMouseDown, false );\n\tscope.domElement.addEventListener( 'wheel', onMouseWheel, false );\n\n\tscope.domElement.addEventListener( 'touchstart', onTouchStart, false );\n\tscope.domElement.addEventListener( 'touchend', onTouchEnd, false );\n\tscope.domElement.addEventListener( 'touchmove', onTouchMove, false );\n\n\tscope.domElement.addEventListener( 'keydown', onKeyDown, false );\n\n\t// make sure element can receive keys.\n\n\tif ( scope.domElement.tabIndex === - 1 ) {\n\n\t\tscope.domElement.tabIndex = 0;\n\n\t}\n\n\t// force an update at start\n\n\tthis.update();\n\n};\n\nOrbitControls.prototype = Object.create( EventDispatcher.prototype );\nOrbitControls.prototype.constructor = OrbitControls;\n\n\n// This set of controls performs orbiting, dollying (zooming), and panning.\n// Unlike TrackballControls, it maintains the \"up\" direction object.up (+Y by default).\n// This is very similar to OrbitControls, another set of touch behavior\n//\n//    Orbit - right mouse, or left mouse + ctrl/meta/shiftKey / touch: two-finger rotate\n//    Zoom - middle mouse, or mousewheel / touch: two-finger spread or squish\n//    Pan - left mouse, or arrow keys / touch: one-finger move\n\nvar MapControls = function ( object, domElement ) {\n\n\tOrbitControls.call( this, object, domElement );\n\n\tthis.screenSpacePanning = false; // pan orthogonal to world-space direction camera.up\n\n\tthis.mouseButtons.LEFT = MOUSE.PAN;\n\tthis.mouseButtons.RIGHT = MOUSE.ROTATE;\n\n\tthis.touches.ONE = TOUCH.PAN;\n\tthis.touches.TWO = TOUCH.DOLLY_ROTATE;\n\n};\n\nMapControls.prototype = Object.create( EventDispatcher.prototype );\nMapControls.prototype.constructor = MapControls;\n\nexport { OrbitControls, MapControls };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { MathUtils } from '../../../../build/three.module.js';\n\nfunction Node( type ) {\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = \"\";\n\n\tthis.type = type;\n\n\tthis.userData = {};\n\n}\n\nNode.prototype = {\n\n\tconstructor: Node,\n\n\tisNode: true,\n\n\tanalyze: function ( builder, settings ) {\n\n\t\tsettings = settings || {};\n\n\t\tbuilder.analyzing = true;\n\n\t\tthis.build( builder.addFlow( settings.slot, settings.cache, settings.context ), 'v4' );\n\n\t\tbuilder.clearVertexNodeCode();\n\t\tbuilder.clearFragmentNodeCode();\n\n\t\tbuilder.removeFlow();\n\n\t\tbuilder.analyzing = false;\n\n\t},\n\n\tanalyzeAndFlow: function ( builder, output, settings ) {\n\n\t\tsettings = settings || {};\n\n\t\tthis.analyze( builder, settings );\n\n\t\treturn this.flow( builder, output, settings );\n\n\t},\n\n\tflow: function ( builder, output, settings ) {\n\n\t\tsettings = settings || {};\n\n\t\tbuilder.addFlow( settings.slot, settings.cache, settings.context );\n\n\t\tvar flow = {};\n\t\tflow.result = this.build( builder, output );\n\t\tflow.code = builder.clearNodeCode();\n\t\tflow.extra = builder.context.extra;\n\n\t\tbuilder.removeFlow();\n\n\t\treturn flow;\n\n\t},\n\n\tbuild: function ( builder, output, uuid ) {\n\n\t\toutput = output || this.getType( builder, output );\n\n\t\tvar data = builder.getNodeData( uuid || this );\n\n\t\tif ( builder.analyzing ) {\n\n\t\t\tthis.appendDepsNode( builder, data, output );\n\n\t\t}\n\n\t\tif ( builder.nodes.indexOf( this ) === - 1 ) {\n\n\t\t\tbuilder.nodes.push( this );\n\n\t\t}\n\n\t\tif ( this.updateFrame !== undefined && builder.updaters.indexOf( this ) === - 1 ) {\n\n\t\t\tbuilder.updaters.push( this );\n\n\t\t}\n\n\t\treturn this.generate( builder, output, uuid );\n\n\t},\n\n\tgenerate: function ( /* builder, output, uuid, type, ns */ ) {\n\n\t\t// This method needs to be implemented in subclasses\n\n\t},\n\n\tappendDepsNode: function ( builder, data, output ) {\n\n\t\tdata.deps = ( data.deps || 0 ) + 1;\n\n\t\tvar outputLen = builder.getTypeLength( output );\n\n\t\tif ( outputLen > ( data.outputMax || 0 ) || this.getType( builder, output ) ) {\n\n\t\t\tdata.outputMax = outputLen;\n\t\t\tdata.output = output;\n\n\t\t}\n\n\t},\n\n\tsetName: function ( name ) {\n\n\t\tthis.name = name;\n\n\t\treturn this;\n\n\t},\n\n\tgetName: function ( /* builder */ ) {\n\n\t\treturn this.name;\n\n\t},\n\n\tgetType: function ( builder, output ) {\n\n\t\treturn output === 'sampler2D' || output === 'samplerCube' ? output : this.type;\n\n\t},\n\n\tgetJSONNode: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.nodes[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.nodes[ this.uuid ];\n\n\t\t}\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tif ( source.name !== undefined ) this.name = source.name;\n\n\t\tif ( source.userData !== undefined ) this.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tcreateJSONNode: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar data = {};\n\n\t\tif ( typeof this.nodeType !== \"string\" ) throw new Error( \"Node does not allow serialization.\" );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.nodeType = this.nodeType;\n\n\t\tif ( this.name !== \"\" ) data.name = this.name;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.nodes[ this.uuid ] = data;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\treturn this.getJSONNode( meta ) || this.createJSONNode( meta );\n\n\t}\n\n};\n\nexport { Node };\n","/**\n * Automatic node cache\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { MathUtils } from '../../../../build/three.module.js';\nimport { Node } from './Node.js';\n\nfunction TempNode( type, params ) {\n\n\tNode.call( this, type );\n\n\tparams = params || {};\n\n\tthis.shared = params.shared !== undefined ? params.shared : true;\n\tthis.unique = params.unique !== undefined ? params.unique : false;\n\n}\n\nTempNode.prototype = Object.create( Node.prototype );\nTempNode.prototype.constructor = TempNode;\n\nTempNode.prototype.build = function ( builder, output, uuid, ns ) {\n\n\toutput = output || this.getType( builder );\n\n\tif ( this.getShared( builder, output ) ) {\n\n\t\tvar isUnique = this.getUnique( builder, output );\n\n\t\tif ( isUnique && this.constructor.uuid === undefined ) {\n\n\t\t\tthis.constructor.uuid = MathUtils.generateUUID();\n\n\t\t}\n\n\t\tuuid = builder.getUuid( uuid || this.getUuid(), ! isUnique );\n\n\t\tvar data = builder.getNodeData( uuid ),\n\t\t\ttype = data.output || this.getType( builder );\n\n\t\tif ( builder.analyzing ) {\n\n\t\t\tif ( ( data.deps || 0 ) > 0 || this.getLabel() ) {\n\n\t\t\t\tthis.appendDepsNode( builder, data, output );\n\n\t\t\t\treturn this.generate( builder, output, uuid );\n\n\t\t\t}\n\n\t\t\treturn Node.prototype.build.call( this, builder, output, uuid );\n\n\t\t} else if ( isUnique ) {\n\n\t\t\tdata.name = data.name || Node.prototype.build.call( this, builder, output, uuid );\n\n\t\t\treturn data.name;\n\n\t\t} else if ( ! this.getLabel() && ( ! this.getShared( builder, type ) || ( builder.context.ignoreCache || data.deps === 1 ) ) ) {\n\n\t\t\treturn Node.prototype.build.call( this, builder, output, uuid );\n\n\t\t}\n\n\t\tuuid = this.getUuid( false );\n\n\t\tvar name = this.getTemp( builder, uuid );\n\n\t\tif ( name ) {\n\n\t\t\treturn builder.format( name, type, output );\n\n\t\t} else {\n\n\t\t\tname = TempNode.prototype.generate.call( this, builder, output, uuid, data.output, ns );\n\n\t\t\tvar code = this.generate( builder, type, uuid );\n\n\t\t\tbuilder.addNodeCode( name + ' = ' + code + ';' );\n\n\t\t\treturn builder.format( name, type, output );\n\n\t\t}\n\n\t}\n\n\treturn Node.prototype.build.call( this, builder, output, uuid );\n\n};\n\nTempNode.prototype.getShared = function ( builder, output ) {\n\n\treturn output !== 'sampler2D' && output !== 'samplerCube' && this.shared;\n\n};\n\nTempNode.prototype.getUnique = function ( /* builder, output */ ) {\n\n\treturn this.unique;\n\n};\n\nTempNode.prototype.setLabel = function ( name ) {\n\n\tthis.label = name;\n\n\treturn this;\n\n};\n\nTempNode.prototype.getLabel = function ( /* builder */ ) {\n\n\treturn this.label;\n\n};\n\nTempNode.prototype.getUuid = function ( unique ) {\n\n\tvar uuid = unique || unique == undefined ? this.constructor.uuid || this.uuid : this.uuid;\n\n\tif ( typeof this.scope === \"string\" ) uuid = this.scope + '-' + uuid;\n\n\treturn uuid;\n\n};\n\nTempNode.prototype.getTemp = function ( builder, uuid ) {\n\n\tuuid = uuid || this.uuid;\n\n\tvar tempVar = builder.getVars()[ uuid ];\n\n\treturn tempVar ? tempVar.name : undefined;\n\n};\n\nTempNode.prototype.generate = function ( builder, output, uuid, type, ns ) {\n\n\tif ( ! this.getShared( builder, output ) ) console.error( \"THREE.TempNode is not shared!\" );\n\n\tuuid = uuid || this.uuid;\n\n\treturn builder.getTempVar( uuid, type || this.getType( builder ), ns, this.getLabel() ).name;\n\n};\n\nexport { TempNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from './TempNode.js';\n\nfunction InputNode( type, params ) {\n\n\tparams = params || {};\n\tparams.shared = params.shared !== undefined ? params.shared : false;\n\n\tTempNode.call( this, type, params );\n\n\tthis.readonly = false;\n\n}\n\nInputNode.prototype = Object.create( TempNode.prototype );\nInputNode.prototype.constructor = InputNode;\n\nInputNode.prototype.setReadonly = function ( value ) {\n\n\tthis.readonly = value;\n\n\treturn this;\n\n};\n\nInputNode.prototype.getReadonly = function ( /* builder */ ) {\n\n\treturn this.readonly;\n\n};\n\nInputNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tif ( source.readonly !== undefined ) this.readonly = source.readonly;\n\n\treturn this;\n\n};\n\nInputNode.prototype.createJSONNode = function ( meta ) {\n\n\tvar data = TempNode.prototype.createJSONNode.call( this, meta );\n\n\tif ( this.readonly === true ) data.readonly = this.readonly;\n\n\treturn data;\n\n};\n\nInputNode.prototype.generate = function ( builder, output, uuid, type, ns, needsUpdate ) {\n\n\tuuid = builder.getUuid( uuid || this.getUuid() );\n\ttype = type || this.getType( builder );\n\n\tvar data = builder.getNodeData( uuid ),\n\t\treadonly = this.getReadonly( builder ) && this.generateReadonly !== undefined;\n\n\tif ( readonly ) {\n\n\t\treturn this.generateReadonly( builder, output, uuid, type, ns, needsUpdate );\n\n\t} else {\n\n\t\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\t\tif ( ! data.vertex ) {\n\n\t\t\t\tdata.vertex = builder.createVertexUniform( type, this, ns, needsUpdate, this.getLabel() );\n\n\t\t\t}\n\n\t\t\treturn builder.format( data.vertex.name, type, output );\n\n\t\t} else {\n\n\t\t\tif ( ! data.fragment ) {\n\n\t\t\t\tdata.fragment = builder.createFragmentUniform( type, this, ns, needsUpdate, this.getLabel() );\n\n\t\t\t}\n\n\t\t\treturn builder.format( data.fragment.name, type, output );\n\n\t\t}\n\n\t}\n\n};\n\nexport { InputNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from './TempNode.js';\n\nvar declarationRegexp = /^([a-z_0-9]+)\\s([a-z_0-9]+)\\s?\\=?\\s?(.*?)(\\;|$)/i;\n\nfunction ConstNode( src, useDefine ) {\n\n\tTempNode.call( this );\n\n\tthis.parse( src || ConstNode.PI, useDefine );\n\n}\n\nConstNode.PI = 'PI';\nConstNode.PI2 = 'PI2';\nConstNode.RECIPROCAL_PI = 'RECIPROCAL_PI';\nConstNode.RECIPROCAL_PI2 = 'RECIPROCAL_PI2';\nConstNode.LOG2 = 'LOG2';\nConstNode.EPSILON = 'EPSILON';\n\nConstNode.prototype = Object.create( TempNode.prototype );\nConstNode.prototype.constructor = ConstNode;\nConstNode.prototype.nodeType = \"Const\";\n\nConstNode.prototype.getType = function ( builder ) {\n\n\treturn builder.getTypeByFormat( this.type );\n\n};\n\nConstNode.prototype.parse = function ( src, useDefine ) {\n\n\tthis.src = src || '';\n\n\tvar name, type, value = \"\";\n\n\tvar match = this.src.match( declarationRegexp );\n\n\tthis.useDefine = useDefine || this.src.charAt( 0 ) === '#';\n\n\tif ( match && match.length > 1 ) {\n\n\t\ttype = match[ 1 ];\n\t\tname = match[ 2 ];\n\t\tvalue = match[ 3 ];\n\n\t} else {\n\n\t\tname = this.src;\n\t\ttype = 'f';\n\n\t}\n\n\tthis.name = name;\n\tthis.type = type;\n\tthis.value = value;\n\n};\n\nConstNode.prototype.build = function ( builder, output ) {\n\n\tif ( output === 'source' ) {\n\n\t\tif ( this.value ) {\n\n\t\t\tif ( this.useDefine ) {\n\n\t\t\t\treturn '#define ' + this.name + ' ' + this.value;\n\n\t\t\t}\n\n\t\t\treturn 'const ' + this.type + ' ' + this.name + ' = ' + this.value + ';';\n\n\t\t} else if ( this.useDefine ) {\n\n\t\t\treturn this.src;\n\n\t\t}\n\n\t} else {\n\n\t\tbuilder.include( this );\n\n\t\treturn builder.format( this.name, this.getType( builder ), output );\n\n\t}\n\n};\n\nConstNode.prototype.generate = function ( builder, output ) {\n\n\treturn builder.format( this.name, this.getType( builder ), output );\n\n};\n\nConstNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.parse( source.src, source.useDefine );\n\n\treturn this;\n\n};\n\nConstNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.src = this.src;\n\n\t\tif ( data.useDefine === true ) data.useDefine = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ConstNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Node } from './Node.js';\n\nfunction VarNode( type, value ) {\n\n\tNode.call( this, type );\n\n\tthis.value = value;\n\n}\n\nVarNode.prototype = Object.create( Node.prototype );\nVarNode.prototype.constructor = VarNode;\nVarNode.prototype.nodeType = \"Var\";\n\nVarNode.prototype.getType = function ( builder ) {\n\n\treturn builder.getTypeByFormat( this.type );\n\n};\n\nVarNode.prototype.generate = function ( builder, output ) {\n\n\tvar varying = builder.getVar( this.uuid, this.type );\n\n\tif ( this.value && builder.isShader( 'vertex' ) ) {\n\n\t\tbuilder.addNodeCode( varying.name + ' = ' + this.value.build( builder, this.getType( builder ) ) + ';' );\n\n\t}\n\n\treturn builder.format( varying.name, this.getType( builder ), output );\n\n};\n\nVarNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\tthis.type = source.type;\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nVarNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.type = this.type;\n\n\t\tif ( this.value ) data.value = this.value.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { VarNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from './TempNode.js';\n\nvar declarationRegexp = /^struct\\s*([a-z_0-9]+)\\s*{\\s*((.|\\n)*?)}/img,\n\tpropertiesRegexp = /\\s*(\\w*?)\\s*(\\w*?)(\\=|\\;)/img;\n\nfunction StructNode( src ) {\n\n\tTempNode.call( this );\n\n\tthis.parse( src );\n\n}\n\nStructNode.prototype = Object.create( TempNode.prototype );\nStructNode.prototype.constructor = StructNode;\nStructNode.prototype.nodeType = \"Struct\";\n\nStructNode.prototype.getType = function ( builder ) {\n\n\treturn builder.getTypeByFormat( this.name );\n\n};\n\nStructNode.prototype.getInputByName = function ( name ) {\n\n\tvar i = this.inputs.length;\n\n\twhile ( i -- ) {\n\n\t\tif ( this.inputs[ i ].name === name ) {\n\n\t\t\treturn this.inputs[ i ];\n\n\t\t}\n\n\t}\n\n};\n\nStructNode.prototype.generate = function ( builder, output ) {\n\n\tif ( output === 'source' ) {\n\n\t\treturn this.src + ';';\n\n\t} else {\n\n\t\treturn builder.format( '( ' + this.src + ' )', this.getType( builder ), output );\n\n\t}\n\n};\n\nStructNode.prototype.parse = function ( src ) {\n\n\tthis.src = src || '';\n\n\tthis.inputs = [];\n\n\tvar declaration = declarationRegexp.exec( this.src );\n\n\tif ( declaration ) {\n\n\t\tvar properties = declaration[ 2 ], match;\n\n\t\twhile ( match = propertiesRegexp.exec( properties ) ) {\n\n\t\t\tthis.inputs.push( {\n\t\t\t\ttype: match[ 1 ],\n\t\t\t\tname: match[ 2 ]\n\t\t\t} );\n\n\t\t}\n\n\t\tthis.name = declaration[ 1 ];\n\n\t} else {\n\n\t\tthis.name = '';\n\n\t}\n\n\tthis.type = this.name;\n\n};\n\nStructNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.src = this.src;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { StructNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Node } from './Node.js';\n\nfunction AttributeNode( name, type ) {\n\n\tNode.call( this, type );\n\n\tthis.name = name;\n\n}\n\nAttributeNode.prototype = Object.create( Node.prototype );\nAttributeNode.prototype.constructor = AttributeNode;\nAttributeNode.prototype.nodeType = \"Attribute\";\n\nAttributeNode.prototype.getAttributeType = function ( builder ) {\n\n\treturn typeof this.type === 'number' ? builder.getConstructorFromLength( this.type ) : this.type;\n\n};\n\nAttributeNode.prototype.getType = function ( builder ) {\n\n\tvar type = this.getAttributeType( builder );\n\n\treturn builder.getTypeByFormat( type );\n\n};\n\nAttributeNode.prototype.generate = function ( builder, output ) {\n\n\tvar type = this.getAttributeType( builder );\n\n\tvar attribute = builder.getAttribute( this.name, type ),\n\t\tname = builder.isShader( 'vertex' ) ? this.name : attribute.varying.name;\n\n\treturn builder.format( name, this.getType( builder ), output );\n\n};\n\nAttributeNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\tthis.type = source.type;\n\n\treturn this;\n\n};\n\nAttributeNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.type = this.type;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { AttributeNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nvar NodeLib = {\n\n\tnodes: {},\n\tkeywords: {},\n\n\tadd: function ( node ) {\n\n\t\tthis.nodes[ node.name ] = node;\n\n\t},\n\n\taddKeyword: function ( name, callback, cache ) {\n\n\t\tcache = cache !== undefined ? cache : true;\n\n\t\tthis.keywords[ name ] = { callback: callback, cache: cache };\n\n\t},\n\n\tremove: function ( node ) {\n\n\t\tdelete this.nodes[ node.name ];\n\n\t},\n\n\tremoveKeyword: function ( name ) {\n\n\t\tdelete this.keywords[ name ];\n\n\t},\n\n\tget: function ( name ) {\n\n\t\treturn this.nodes[ name ];\n\n\t},\n\n\tgetKeyword: function ( name, builder ) {\n\n\t\treturn this.keywords[ name ].callback.call( this, builder );\n\n\t},\n\n\tgetKeywordData: function ( name ) {\n\n\t\treturn this.keywords[ name ];\n\n\t},\n\n\tcontains: function ( name ) {\n\n\t\treturn this.nodes[ name ] !== undefined;\n\n\t},\n\n\tcontainsKeyword: function ( name ) {\n\n\t\treturn this.keywords[ name ] !== undefined;\n\n\t}\n\n};\n\nexport { NodeLib };\n","/**\n * @author sunag / http://www.sunag.com.br/\n * @thanks bhouston / https://clara.io/\n */\n\nimport { TempNode } from './TempNode.js';\nimport { NodeLib } from './NodeLib.js';\n\nvar declarationRegexp = /^\\s*([a-z_0-9]+)\\s([a-z_0-9]+)\\s*\\((.*?)\\)/i,\n\tpropertiesRegexp = /[a-z_0-9]+/ig;\n\nfunction FunctionNode( src, includes, extensions, keywords, type ) {\n\n\tthis.isMethod = type === undefined;\n\tthis.isInterface = false;\n\n\tTempNode.call( this, type );\n\n\tthis.parse( src, includes, extensions, keywords );\n\n}\n\nFunctionNode.prototype = Object.create( TempNode.prototype );\nFunctionNode.prototype.constructor = FunctionNode;\nFunctionNode.prototype.nodeType = \"Function\";\n\nFunctionNode.prototype.useKeywords = true;\n\nFunctionNode.prototype.getShared = function ( /* builder, output */ ) {\n\n\treturn ! this.isMethod;\n\n};\n\nFunctionNode.prototype.getType = function ( builder ) {\n\n\treturn builder.getTypeByFormat( this.type );\n\n};\n\nFunctionNode.prototype.getInputByName = function ( name ) {\n\n\tvar i = this.inputs.length;\n\n\twhile ( i -- ) {\n\n\t\tif ( this.inputs[ i ].name === name ) {\n\n\t\t\treturn this.inputs[ i ];\n\n\t\t}\n\n\t}\n\n};\n\nFunctionNode.prototype.getIncludeByName = function ( name ) {\n\n\tvar i = this.includes.length;\n\n\twhile ( i -- ) {\n\n\t\tif ( this.includes[ i ].name === name ) {\n\n\t\t\treturn this.includes[ i ];\n\n\t\t}\n\n\t}\n\n};\n\nFunctionNode.prototype.generate = function ( builder, output ) {\n\n\tvar match, offset = 0, src = this.src;\n\n\tfor ( var i = 0; i < this.includes.length; i ++ ) {\n\n\t\tbuilder.include( this.includes[ i ], this );\n\n\t}\n\n\tfor ( var ext in this.extensions ) {\n\n\t\tbuilder.extensions[ ext ] = true;\n\n\t}\n\n\tvar matches = [];\n\n\twhile ( match = propertiesRegexp.exec( this.src ) ) matches.push( match );\n\n\tfor ( var i = 0; i < matches.length; i ++ ) {\n\n\t\tvar match = matches[ i ];\n\n\t\tvar prop = match[ 0 ],\n\t\t\tisGlobal = this.isMethod ? ! this.getInputByName( prop ) : true,\n\t\t\treference = prop;\n\n\t\tif ( this.keywords[ prop ] || ( this.useKeywords && isGlobal && NodeLib.containsKeyword( prop ) ) ) {\n\n\t\t\tvar node = this.keywords[ prop ];\n\n\t\t\tif ( ! node ) {\n\n\t\t\t\tvar keyword = NodeLib.getKeywordData( prop );\n\n\t\t\t\tif ( keyword.cache ) node = builder.keywords[ prop ];\n\n\t\t\t\tnode = node || NodeLib.getKeyword( prop, builder );\n\n\t\t\t\tif ( keyword.cache ) builder.keywords[ prop ] = node;\n\n\t\t\t}\n\n\t\t\treference = node.build( builder );\n\n\t\t}\n\n\t\tif ( prop !== reference ) {\n\n\t\t\tsrc = src.substring( 0, match.index + offset ) + reference + src.substring( match.index + prop.length + offset );\n\n\t\t\toffset += reference.length - prop.length;\n\n\t\t}\n\n\t\tif ( this.getIncludeByName( reference ) === undefined && NodeLib.contains( reference ) ) {\n\n\t\t\tbuilder.include( NodeLib.get( reference ) );\n\n\t\t}\n\n\t}\n\n\tif ( output === 'source' ) {\n\n\t\treturn src;\n\n\t} else if ( this.isMethod ) {\n\n\t\tif ( ! this.isInterface ) {\n\n\t\t\tbuilder.include( this, false, src );\n\n\t\t}\n\n\t\treturn this.name;\n\n\t} else {\n\n\t\treturn builder.format( '( ' + src + ' )', this.getType( builder ), output );\n\n\t}\n\n};\n\nFunctionNode.prototype.parse = function ( src, includes, extensions, keywords ) {\n\n\tthis.src = src || '';\n\n\tthis.includes = includes || [];\n\tthis.extensions = extensions || {};\n\tthis.keywords = keywords || {};\n\n\tif ( this.isMethod ) {\n\n\t\tvar match = this.src.match( declarationRegexp );\n\n\t\tthis.inputs = [];\n\n\t\tif ( match && match.length == 4 ) {\n\n\t\t\tthis.type = match[ 1 ];\n\t\t\tthis.name = match[ 2 ];\n\n\t\t\tvar inputs = match[ 3 ].match( propertiesRegexp );\n\n\t\t\tif ( inputs ) {\n\n\t\t\t\tvar i = 0;\n\n\t\t\t\twhile ( i < inputs.length ) {\n\n\t\t\t\t\tvar qualifier = inputs[ i ++ ];\n\t\t\t\t\tvar type, name;\n\n\t\t\t\t\tif ( qualifier === 'in' || qualifier === 'out' || qualifier === 'inout' ) {\n\n\t\t\t\t\t\ttype = inputs[ i ++ ];\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ttype = qualifier;\n\t\t\t\t\t\tqualifier = '';\n\n\t\t\t\t\t}\n\n\t\t\t\t\tname = inputs[ i ++ ];\n\n\t\t\t\t\tthis.inputs.push( {\n\t\t\t\t\t\tname: name,\n\t\t\t\t\t\ttype: type,\n\t\t\t\t\t\tqualifier: qualifier\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.isInterface = this.src.indexOf( '{' ) === - 1;\n\n\t\t} else {\n\n\t\t\tthis.type = '';\n\t\t\tthis.name = '';\n\n\t\t}\n\n\t}\n\n};\n\nFunctionNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.isMethod = source.isMethod;\n\tthis.useKeywords = source.useKeywords;\n\n\tthis.parse( source.src, source.includes, source.extensions, source.keywords );\n\n\tif ( source.type !== undefined ) this.type = source.type;\n\n\treturn this;\n\n};\n\nFunctionNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.src = this.src;\n\t\tdata.isMethod = this.isMethod;\n\t\tdata.useKeywords = this.useKeywords;\n\n\t\tif ( ! this.isMethod ) data.type = this.type;\n\n\t\tdata.extensions = JSON.parse( JSON.stringify( this.extensions ) );\n\t\tdata.keywords = {};\n\n\t\tfor ( var keyword in this.keywords ) {\n\n\t\t\tdata.keywords[ keyword ] = this.keywords[ keyword ].toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.includes.length ) {\n\n\t\t\tdata.includes = [];\n\n\t\t\tfor ( var i = 0; i < this.includes.length; i ++ ) {\n\n\t\t\t\tdata.includes.push( this.includes[ i ].toJSON( meta ).uuid );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn data;\n\n};\n\nexport { FunctionNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { FunctionNode } from './FunctionNode.js';\n\nfunction ExpressionNode( src, type, keywords, extensions, includes ) {\n\n\tFunctionNode.call( this, src, includes, extensions, keywords, type );\n\n}\n\nExpressionNode.prototype = Object.create( FunctionNode.prototype );\nExpressionNode.prototype.constructor = ExpressionNode;\nExpressionNode.prototype.nodeType = \"Expression\";\n\nexport { ExpressionNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from './TempNode.js';\n\nfunction FunctionCallNode( func, inputs ) {\n\n\tTempNode.call( this );\n\n\tthis.setFunction( func, inputs );\n\n}\n\nFunctionCallNode.prototype = Object.create( TempNode.prototype );\nFunctionCallNode.prototype.constructor = FunctionCallNode;\nFunctionCallNode.prototype.nodeType = \"FunctionCall\";\n\nFunctionCallNode.prototype.setFunction = function ( func, inputs ) {\n\n\tthis.value = func;\n\tthis.inputs = inputs || [];\n\n};\n\nFunctionCallNode.prototype.getFunction = function () {\n\n\treturn this.value;\n\n};\n\nFunctionCallNode.prototype.getType = function ( builder ) {\n\n\treturn this.value.getType( builder );\n\n};\n\nFunctionCallNode.prototype.generate = function ( builder, output ) {\n\n\tvar type = this.getType( builder ),\n\t\tfunc = this.value;\n\n\tvar code = func.build( builder, output ) + '( ',\n\t\tparams = [];\n\n\tfor ( var i = 0; i < func.inputs.length; i ++ ) {\n\n\t\tvar inpt = func.inputs[ i ],\n\t\t\tparam = this.inputs[ i ] || this.inputs[ inpt.name ];\n\n\t\tparams.push( param.build( builder, builder.getTypeByFormat( inpt.type ) ) );\n\n\t}\n\n\tcode += params.join( ', ' ) + ' )';\n\n\treturn builder.format( code, type, output );\n\n};\n\nFunctionCallNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tfor ( var prop in source.inputs ) {\n\n\t\tthis.inputs[ prop ] = source.inputs[ prop ];\n\n\t}\n\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nFunctionCallNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tvar func = this.value;\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\n\t\tif ( func.inputs.length ) {\n\n\t\t\tdata.inputs = {};\n\n\t\t\tfor ( var i = 0; i < func.inputs.length; i ++ ) {\n\n\t\t\t\tvar inpt = func.inputs[ i ],\n\t\t\t\t\tnode = this.inputs[ i ] || this.inputs[ inpt.name ];\n\n\t\t\t\tdata.inputs[ inpt.name ] = node.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn data;\n\n};\n\nexport { FunctionCallNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nvar NodeUtils = {\n\n\telements: [ 'x', 'y', 'z', 'w' ],\n\n\taddShortcuts: function () {\n\n\t\tfunction applyShortcut( proxy, property, subProperty ) {\n\n\t\t\tif ( subProperty ) {\n\n\t\t\t\treturn {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this[ proxy ][ property ][ subProperty ];\n\n\t\t\t\t\t},\n\n\t\t\t\t\tset: function ( val ) {\n\n\t\t\t\t\t\tthis[ proxy ][ property ][ subProperty ] = val;\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\treturn {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this[ proxy ][ property ];\n\n\t\t\t\t\t},\n\n\t\t\t\t\tset: function ( val ) {\n\n\t\t\t\t\t\tthis[ proxy ][ property ] = val;\n\n\t\t\t\t\t}\n\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn function addShortcuts( proto, proxy, list ) {\n\n\t\t\tvar shortcuts = {};\n\n\t\t\tfor ( var i = 0; i < list.length; ++ i ) {\n\n\t\t\t\tvar data = list[ i ].split( \".\" ),\n\t\t\t\t\tproperty = data[ 0 ],\n\t\t\t\t\tsubProperty = data[ 1 ];\n\n\t\t\t\tshortcuts[ property ] = applyShortcut( proxy, property, subProperty );\n\n\t\t\t}\n\n\t\t\tObject.defineProperties( proto, shortcuts );\n\n\t\t};\n\n\t}()\n\n};\n\nexport { NodeUtils };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nfunction NodeFrame( time ) {\n\n\tthis.time = time !== undefined ? time : 0;\n\n\tthis.id = 0;\n\n}\n\nNodeFrame.prototype = {\n\n\tconstructor: NodeFrame,\n\n\tupdate: function ( delta ) {\n\n\t\t++ this.id;\n\n\t\tthis.time += delta;\n\t\tthis.delta = delta;\n\n\t\treturn this;\n\n\t},\n\n\tsetRenderer: function ( renderer ) {\n\n\t\tthis.renderer = renderer;\n\n\t\treturn this;\n\n\t},\n\n\tsetRenderTexture: function ( renderTexture ) {\n\n\t\tthis.renderTexture = renderTexture;\n\n\t\treturn this;\n\n\t},\n\n\tupdateNode: function ( node ) {\n\n\t\tif ( node.frameId === this.id ) return this;\n\n\t\tnode.updateFrame( this );\n\n\t\tnode.frameId = this.id;\n\n\t\treturn this;\n\n\t}\n\n};\n\nexport { NodeFrame };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nfunction NodeUniform( params ) {\n\n\tparams = params || {};\n\n\tthis.name = params.name;\n\tthis.type = params.type;\n\tthis.node = params.node;\n\tthis.needsUpdate = params.needsUpdate;\n\n}\n\nObject.defineProperties( NodeUniform.prototype, {\n\n\tvalue: {\n\n\t\tget: function () {\n\n\t\t\treturn this.node.value;\n\n\t\t},\n\n\t\tset: function ( val ) {\n\n\t\t\tthis.node.value = val;\n\n\t\t}\n\n\t}\n\n} );\n\nexport { NodeUniform };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Vector2 } from '../../../../build/three.module.js';\n\nimport { InputNode } from '../core/InputNode.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction Vector2Node( x, y ) {\n\n\tInputNode.call( this, 'v2' );\n\n\tthis.value = x instanceof Vector2 ? x : new Vector2( x, y );\n\n}\n\nVector2Node.prototype = Object.create( InputNode.prototype );\nVector2Node.prototype.constructor = Vector2Node;\nVector2Node.prototype.nodeType = \"Vector2\";\n\nNodeUtils.addShortcuts( Vector2Node.prototype, 'value', [ 'x', 'y' ] );\n\nVector2Node.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate*/ ) {\n\n\treturn builder.format( \"vec2( \" + this.x + \", \" + this.y + \" )\", type, output );\n\n};\n\nVector2Node.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value.copy( source );\n\n\treturn this;\n\n};\n\nVector2Node.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.x = this.x;\n\t\tdata.y = this.y;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { Vector2Node };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Vector3 } from '../../../../build/three.module.js';\n\nimport { InputNode } from '../core/InputNode.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction Vector3Node( x, y, z ) {\n\n\tInputNode.call( this, 'v3' );\n\n\tthis.value = x instanceof Vector3 ? x : new Vector3( x, y, z );\n\n}\n\nVector3Node.prototype = Object.create( InputNode.prototype );\nVector3Node.prototype.constructor = Vector3Node;\nVector3Node.prototype.nodeType = \"Vector3\";\n\nNodeUtils.addShortcuts( Vector3Node.prototype, 'value', [ 'x', 'y', 'z' ] );\n\nVector3Node.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate*/ ) {\n\n\treturn builder.format( \"vec3( \" + this.x + \", \" + this.y + \", \" + this.z + \" )\", type, output );\n\n};\n\nVector3Node.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value.copy( source );\n\n\treturn this;\n\n};\n\nVector3Node.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.x = this.x;\n\t\tdata.y = this.y;\n\t\tdata.z = this.z;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { Vector3Node };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Vector4 } from '../../../../build/three.module.js';\n\nimport { InputNode } from '../core/InputNode.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction Vector4Node( x, y, z, w ) {\n\n\tInputNode.call( this, 'v4' );\n\n\tthis.value = x instanceof Vector4 ? x : new Vector4( x, y, z, w );\n\n}\n\nVector4Node.prototype = Object.create( InputNode.prototype );\nVector4Node.prototype.constructor = Vector4Node;\nVector4Node.prototype.nodeType = \"Vector4\";\n\nNodeUtils.addShortcuts( Vector4Node.prototype, 'value', [ 'x', 'y', 'z', 'w' ] );\n\nVector4Node.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate*/ ) {\n\n\treturn builder.format( \"vec4( \" + this.x + \", \" + this.y + \", \" + this.z + \", \" + this.w + \" )\", type, output );\n\n};\n\nVector4Node.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value.copy( source );\n\n\treturn this;\n\n};\n\nVector4Node.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.x = this.x;\n\t\tdata.y = this.y;\n\t\tdata.z = this.z;\n\t\tdata.w = this.w;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { Vector4Node };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { NodeLib } from '../core/NodeLib.js';\n\nfunction UVNode( index ) {\n\n\tTempNode.call( this, 'v2', { shared: false } );\n\n\tthis.index = index || 0;\n\n}\n\nUVNode.prototype = Object.create( TempNode.prototype );\nUVNode.prototype.constructor = UVNode;\nUVNode.prototype.nodeType = \"UV\";\n\nUVNode.prototype.generate = function ( builder, output ) {\n\n\tbuilder.requires.uv[ this.index ] = true;\n\n\tvar uvIndex = this.index > 0 ? this.index + 1 : '';\n\tvar result = builder.isShader( 'vertex' ) ? 'uv' + uvIndex : 'vUv' + uvIndex;\n\n\treturn builder.format( result, this.getType( builder ), output );\n\n};\n\nUVNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.index = source.index;\n\n\treturn this;\n\n};\n\nUVNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.index = this.index;\n\n\t}\n\n\treturn data;\n\n};\n\nNodeLib.addKeyword( 'uv', function () {\n\n\treturn new UVNode();\n\n} );\n\nNodeLib.addKeyword( 'uv2', function () {\n\n\treturn new UVNode( 1 );\n\n} );\n\nexport { UVNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\n\nfunction FloatNode( value ) {\n\n\tInputNode.call( this, 'f' );\n\n\tthis.value = value || 0;\n\n}\n\nFloatNode.prototype = Object.create( InputNode.prototype );\nFloatNode.prototype.constructor = FloatNode;\nFloatNode.prototype.nodeType = \"Float\";\n\nFloatNode.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate */ ) {\n\n\treturn builder.format( this.value + ( this.value % 1 ? '' : '.0' ), type, output );\n\n};\n\nFloatNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nFloatNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { FloatNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tGammaEncoding,\n\tLinearEncoding,\n\tRGBEEncoding,\n\tRGBM7Encoding,\n\tRGBM16Encoding,\n\tRGBDEncoding,\n\tsRGBEncoding\n} from '../../../../build/three.module.js';\n\nimport { TempNode } from '../core/TempNode.js';\nimport { ConstNode } from '../core/ConstNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { ExpressionNode } from '../core/ExpressionNode.js';\n\nfunction ColorSpaceNode( input, method ) {\n\n\tTempNode.call( this, 'v4' );\n\n\tthis.input = input;\n\n\tthis.method = method || ColorSpaceNode.LINEAR_TO_LINEAR;\n\n}\n\nColorSpaceNode.Nodes = ( function () {\n\n\t// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\n\tvar LinearToLinear = new FunctionNode( [\n\t\t\"vec4 LinearToLinear( in vec4 value ) {\",\n\n\t\t\"\treturn value;\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar GammaToLinear = new FunctionNode( [\n\t\t\"vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\",\n\n\t\t\"\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar LinearToGamma = new FunctionNode( [\n\t\t\"vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\",\n\n\t\t\"\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar sRGBToLinear = new FunctionNode( [\n\t\t\"vec4 sRGBToLinear( in vec4 value ) {\",\n\n\t\t\"\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar LinearTosRGB = new FunctionNode( [\n\t\t\"vec4 LinearTosRGB( in vec4 value ) {\",\n\n\t\t\"\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar RGBEToLinear = new FunctionNode( [\n\t\t\"vec4 RGBEToLinear( in vec4 value ) {\",\n\n\t\t\"\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar LinearToRGBE = new FunctionNode( [\n\t\t\"vec4 LinearToRGBE( in vec4 value ) {\",\n\n\t\t\"\tfloat maxComponent = max( max( value.r, value.g ), value.b );\",\n\t\t\"\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\",\n\t\t\"\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\",\n\t\t//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\t// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\n\n\tvar RGBMToLinear = new FunctionNode( [\n\t\t\"vec3 RGBMToLinear( in vec4 value, in float maxRange ) {\",\n\n\t\t\"\treturn vec4( value.xyz * value.w * maxRange, 1.0 );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar LinearToRGBM = new FunctionNode( [\n\t\t\"vec3 LinearToRGBM( in vec4 value, in float maxRange ) {\",\n\n\t\t\"\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\",\n\t\t\"\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\",\n\t\t\"\tM            = ceil( M * 255.0 ) / 255.0;\",\n\t\t\"\treturn vec4( value.rgb / ( M * maxRange ), M );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\t// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\n\n\tvar RGBDToLinear = new FunctionNode( [\n\t\t\"vec3 RGBDToLinear( in vec4 value, in float maxRange ) {\",\n\n\t\t\"\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\n\tvar LinearToRGBD = new FunctionNode( [\n\t\t\"vec3 LinearToRGBD( in vec4 value, in float maxRange ) {\",\n\n\t\t\"\tfloat maxRGB = max( value.x, max( value.g, value.b ) );\",\n\t\t\"\tfloat D      = max( maxRange / maxRGB, 1.0 );\",\n\t\t\"\tD            = clamp( floor( D ) / 255.0, 0.0, 1.0 );\",\n\t\t\"\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\t// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n\t// M matrix, for encoding\n\n\tvar cLogLuvM = new ConstNode( \"const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\" );\n\n\tvar LinearToLogLuv = new FunctionNode( [\n\t\t\"vec4 LinearToLogLuv( in vec4 value ) {\",\n\n\t\t\"\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\",\n\t\t\"\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\",\n\t\t\"\tvec4 vResult;\",\n\t\t\"\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\",\n\t\t\"\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\",\n\t\t\"\tvResult.w = fract(Le);\",\n\t\t\"\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\",\n\t\t\"\treturn vResult;\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ), [ cLogLuvM ] );\n\n\t// Inverse M matrix, for decoding\n\n\tvar cLogLuvInverseM = new ConstNode( \"const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\" );\n\n\tvar LogLuvToLinear = new FunctionNode( [\n\t\t\"vec4 LogLuvToLinear( in vec4 value ) {\",\n\n\t\t\"\tfloat Le = value.z * 255.0 + value.w;\",\n\t\t\"\tvec3 Xp_Y_XYZp;\",\n\t\t\"\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\",\n\t\t\"\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\",\n\t\t\"\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\",\n\t\t\"\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\",\n\t\t\"\treturn vec4( max(vRGB, 0.0), 1.0 );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ), [ cLogLuvInverseM ] );\n\n\treturn {\n\t\tLinearToLinear: LinearToLinear,\n\t\tGammaToLinear: GammaToLinear,\n\t\tLinearToGamma: LinearToGamma,\n\t\tsRGBToLinear: sRGBToLinear,\n\t\tLinearTosRGB: LinearTosRGB,\n\t\tRGBEToLinear: RGBEToLinear,\n\t\tLinearToRGBE: LinearToRGBE,\n\t\tRGBMToLinear: RGBMToLinear,\n\t\tLinearToRGBM: LinearToRGBM,\n\t\tRGBDToLinear: RGBDToLinear,\n\t\tLinearToRGBD: LinearToRGBD,\n\t\tcLogLuvM: cLogLuvM,\n\t\tLinearToLogLuv: LinearToLogLuv,\n\t\tcLogLuvInverseM: cLogLuvInverseM,\n\t\tLogLuvToLinear: LogLuvToLinear\n\t};\n\n} )();\n\nColorSpaceNode.LINEAR_TO_LINEAR = 'LinearToLinear';\n\nColorSpaceNode.GAMMA_TO_LINEAR = 'GammaToLinear';\nColorSpaceNode.LINEAR_TO_GAMMA = 'LinearToGamma';\n\nColorSpaceNode.SRGB_TO_LINEAR = 'sRGBToLinear';\nColorSpaceNode.LINEAR_TO_SRGB = 'LinearTosRGB';\n\nColorSpaceNode.RGBE_TO_LINEAR = 'RGBEToLinear';\nColorSpaceNode.LINEAR_TO_RGBE = 'LinearToRGBE';\n\nColorSpaceNode.RGBM_TO_LINEAR = 'RGBMToLinear';\nColorSpaceNode.LINEAR_TO_RGBM = 'LinearToRGBM';\n\nColorSpaceNode.RGBD_TO_LINEAR = 'RGBDToLinear';\nColorSpaceNode.LINEAR_TO_RGBD = 'LinearToRGBD';\n\nColorSpaceNode.LINEAR_TO_LOG_LUV = 'LinearToLogLuv';\nColorSpaceNode.LOG_LUV_TO_LINEAR = 'LogLuvToLinear';\n\nColorSpaceNode.getEncodingComponents = function ( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', new FloatNode( 7.0 ).setReadonly( true ) ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', new FloatNode( 16.0 ).setReadonly( true ) ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', new FloatNode( 256.0 ).setReadonly( true ) ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', new ExpressionNode( 'float( GAMMA_FACTOR )', 'f' ) ];\n\n\t}\n\n};\n\nColorSpaceNode.prototype = Object.create( TempNode.prototype );\nColorSpaceNode.prototype.constructor = ColorSpaceNode;\nColorSpaceNode.prototype.nodeType = \"ColorSpace\";\n\nColorSpaceNode.prototype.generate = function ( builder, output ) {\n\n\tvar input = this.input.build( builder, 'v4' );\n\tvar outputType = this.getType( builder );\n\n\tvar methodNode = ColorSpaceNode.Nodes[ this.method ];\n\tvar method = builder.include( methodNode );\n\n\tif ( method === ColorSpaceNode.LINEAR_TO_LINEAR ) {\n\n\t\treturn builder.format( input, outputType, output );\n\n\t} else {\n\n\t\tif ( methodNode.inputs.length === 2 ) {\n\n\t\t\tvar factor = this.factor.build( builder, 'f' );\n\n\t\t\treturn builder.format( method + '( ' + input + ', ' + factor + ' )', outputType, output );\n\n\t\t} else {\n\n\t\t\treturn builder.format( method + '( ' + input + ' )', outputType, output );\n\n\t\t}\n\n\t}\n\n};\n\nColorSpaceNode.prototype.fromEncoding = function ( encoding ) {\n\n\tvar components = ColorSpaceNode.getEncodingComponents( encoding );\n\n\tthis.method = 'LinearTo' + components[ 0 ];\n\tthis.factor = components[ 1 ];\n\n};\n\nColorSpaceNode.prototype.fromDecoding = function ( encoding ) {\n\n\tvar components = ColorSpaceNode.getEncodingComponents( encoding );\n\n\tthis.method = components[ 0 ] + 'ToLinear';\n\tthis.factor = components[ 1 ];\n\n};\n\nColorSpaceNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.input = source.input;\n\tthis.method = source.method;\n\n\treturn this;\n\n};\n\nColorSpaceNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.input = this.input.toJSON( meta ).uuid;\n\t\tdata.method = this.method;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ColorSpaceNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\nimport { UVNode } from '../accessors/UVNode.js';\nimport { ColorSpaceNode } from '../utils/ColorSpaceNode.js';\nimport { ExpressionNode } from '../core/ExpressionNode.js';\n\nfunction TextureNode( value, uv, bias, project ) {\n\n\tInputNode.call( this, 'v4', { shared: true } );\n\n\tthis.value = value;\n\tthis.uv = uv || new UVNode();\n\tthis.bias = bias;\n\tthis.project = project !== undefined ? project : false;\n\n}\n\nTextureNode.prototype = Object.create( InputNode.prototype );\nTextureNode.prototype.constructor = TextureNode;\nTextureNode.prototype.nodeType = \"Texture\";\n\nTextureNode.prototype.getTexture = function ( builder, output ) {\n\n\treturn InputNode.prototype.generate.call( this, builder, output, this.value.uuid, 't' );\n\n};\n\nTextureNode.prototype.generate = function ( builder, output ) {\n\n\tif ( output === 'sampler2D' ) {\n\n\t\treturn this.getTexture( builder, output );\n\n\t}\n\n\tvar tex = this.getTexture( builder, output ),\n\t\tuv = this.uv.build( builder, this.project ? 'v4' : 'v2' ),\n\t\tbias = this.bias ? this.bias.build( builder, 'f' ) : undefined;\n\n\tif ( bias === undefined && builder.context.bias ) {\n\n\t\tbias = builder.context.bias.setTexture( this ).build( builder, 'f' );\n\n\t}\n\n\tvar method, code;\n\n\tif ( this.project ) method = 'texture2DProj';\n\telse method = bias ? 'tex2DBias' : 'tex2D';\n\n\tif ( bias ) code = method + '( ' + tex + ', ' + uv + ', ' + bias + ' )';\n\telse code = method + '( ' + tex + ', ' + uv + ' )';\n\n\t// add a custom context for fix incompatibility with the core\n\t// include ColorSpace function only for vertex shader (in fragment shader color space functions is added automatically by core)\n\t// this should be removed in the future\n\t// context.include is used to include or not functions if used FunctionNode\n\t// context.ignoreCache =: not create temp variables nodeT0..9 to optimize the code\n\tvar context = { include: builder.isShader( 'vertex' ), ignoreCache: true };\n\tvar outputType = this.getType( builder );\n\n\tbuilder.addContext( context );\n\n\tthis.colorSpace = this.colorSpace || new ColorSpaceNode( new ExpressionNode( '', outputType ) );\n\tthis.colorSpace.fromDecoding( builder.getTextureEncodingFromMap( this.value ) );\n\tthis.colorSpace.input.parse( code );\n\n\tcode = this.colorSpace.build( builder, outputType );\n\n\t// end custom context\n\n\tbuilder.removeContext();\n\n\treturn builder.format( code, outputType, output );\n\n};\n\nTextureNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tif ( source.value ) this.value = source.value;\n\n\tthis.uv = source.uv;\n\n\tif ( source.bias ) this.bias = source.bias;\n\tif ( source.project !== undefined ) this.project = source.project;\n\n\treturn this;\n\n};\n\nTextureNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tif ( this.value ) data.value = this.value.uuid;\n\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\t\tdata.project = this.project;\n\n\t\tif ( this.bias ) data.bias = this.bias.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { TextureNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { NodeLib } from '../core/NodeLib.js';\n\nfunction PositionNode( scope ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.scope = scope || PositionNode.LOCAL;\n\n}\n\nPositionNode.LOCAL = 'local';\nPositionNode.WORLD = 'world';\nPositionNode.VIEW = 'view';\nPositionNode.PROJECTION = 'projection';\n\nPositionNode.prototype = Object.create( TempNode.prototype );\nPositionNode.prototype.constructor = PositionNode;\nPositionNode.prototype.nodeType = \"Position\";\n\nPositionNode.prototype.getType = function ( ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase PositionNode.PROJECTION:\n\n\t\t\treturn 'v4';\n\n\t}\n\n\treturn this.type;\n\n};\n\nPositionNode.prototype.getShared = function ( /* builder */ ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase PositionNode.LOCAL:\n\t\tcase PositionNode.WORLD:\n\n\t\t\treturn false;\n\n\t}\n\n\treturn true;\n\n};\n\nPositionNode.prototype.generate = function ( builder, output ) {\n\n\tvar result;\n\n\tswitch ( this.scope ) {\n\n\t\tcase PositionNode.LOCAL:\n\n\t\t\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\t\t\tresult = 'transformed';\n\n\t\t\t} else {\n\n\t\t\t\tbuilder.requires.position = true;\n\n\t\t\t\tresult = 'vPosition';\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase PositionNode.WORLD:\n\n\t\t\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\t\t\treturn '( modelMatrix * vec4( transformed, 1.0 ) ).xyz';\n\n\t\t\t} else {\n\n\t\t\t\tbuilder.requires.worldPosition = true;\n\n\t\t\t\tresult = 'vWPosition';\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase PositionNode.VIEW:\n\n\t\t\tresult = builder.isShader( 'vertex' ) ? '-mvPosition.xyz' : 'vViewPosition';\n\n\t\t\tbreak;\n\n\t\tcase PositionNode.PROJECTION:\n\n\t\t\tresult = builder.isShader( 'vertex' ) ? '( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )' : 'vec4( 0.0 )';\n\n\t\t\tbreak;\n\n\t}\n\n\treturn builder.format( result, this.getType( builder ), output );\n\n};\n\nPositionNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.scope = source.scope;\n\n\treturn this;\n\n};\n\nPositionNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.scope = this.scope;\n\n\t}\n\n\treturn data;\n\n};\n\nNodeLib.addKeyword( 'position', function () {\n\n\treturn new PositionNode();\n\n} );\n\nNodeLib.addKeyword( 'worldPosition', function () {\n\n\treturn new PositionNode( PositionNode.WORLD );\n\n} );\n\nNodeLib.addKeyword( 'viewPosition', function () {\n\n\treturn new PositionNode( PositionNode.VIEW );\n\n} );\n\nexport { PositionNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { NodeLib } from '../core/NodeLib.js';\n\nfunction NormalNode( scope ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.scope = scope || NormalNode.VIEW;\n\n}\n\nNormalNode.LOCAL = 'local';\nNormalNode.WORLD = 'world';\nNormalNode.VIEW = 'view';\n\nNormalNode.prototype = Object.create( TempNode.prototype );\nNormalNode.prototype.constructor = NormalNode;\nNormalNode.prototype.nodeType = \"Normal\";\n\nNormalNode.prototype.getShared = function () {\n\n\t// if shared is false, TempNode will not create temp variable (for optimization)\n\n\treturn this.scope === NormalNode.WORLD;\n\n};\n\nNormalNode.prototype.build = function ( builder, output, uuid, ns ) {\n\n\tvar contextNormal = builder.context[ this.scope + 'Normal' ];\n\n\tif ( contextNormal ) {\n\n\t\treturn contextNormal.build( builder, output, uuid, ns );\n\n\t}\n\n\treturn TempNode.prototype.build.call( this, builder, output, uuid );\n\n};\n\nNormalNode.prototype.generate = function ( builder, output ) {\n\n\tvar result;\n\n\tswitch ( this.scope ) {\n\n\t\tcase NormalNode.VIEW:\n\n\t\t\tif ( builder.isShader( 'vertex' ) ) result = 'transformedNormal';\n\t\t\telse result = 'geometryNormal';\n\n\t\t\tbreak;\n\n\t\tcase NormalNode.LOCAL:\n\n\t\t\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\t\t\tresult = 'objectNormal';\n\n\t\t\t} else {\n\n\t\t\t\tbuilder.requires.normal = true;\n\n\t\t\t\tresult = 'vObjectNormal';\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\tcase NormalNode.WORLD:\n\n\t\t\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\t\t\tresult = 'inverseTransformDirection( transformedNormal, viewMatrix ).xyz';\n\n\t\t\t} else {\n\n\t\t\t\tbuilder.requires.worldNormal = true;\n\n\t\t\t\tresult = 'vWNormal';\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t}\n\n\treturn builder.format( result, this.getType( builder ), output );\n\n};\n\nNormalNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.scope = source.scope;\n\n\treturn this;\n\n};\n\nNormalNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.scope = this.scope;\n\n\t}\n\n\treturn data;\n\n};\n\nNodeLib.addKeyword( 'viewNormal', function () {\n\n\treturn new NormalNode( NormalNode.VIEW );\n\n} );\n\nNodeLib.addKeyword( 'localNormal', function () {\n\n\treturn new NormalNode( NormalNode.NORMAL );\n\n} );\n\nNodeLib.addKeyword( 'worldNormal', function () {\n\n\treturn new NormalNode( NormalNode.WORLD );\n\n} );\n\nexport { NormalNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { PositionNode } from './PositionNode.js';\nimport { NormalNode } from './NormalNode.js';\n\nfunction ReflectNode( scope ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.scope = scope || ReflectNode.CUBE;\n\n}\n\nReflectNode.CUBE = 'cube';\nReflectNode.SPHERE = 'sphere';\nReflectNode.VECTOR = 'vector';\n\nReflectNode.prototype = Object.create( TempNode.prototype );\nReflectNode.prototype.constructor = ReflectNode;\nReflectNode.prototype.nodeType = \"Reflect\";\n\nReflectNode.prototype.getUnique = function ( builder ) {\n\n\treturn ! builder.context.viewNormal;\n\n};\n\nReflectNode.prototype.getType = function ( /* builder */ ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase ReflectNode.SPHERE:\n\n\t\t\treturn 'v2';\n\n\t}\n\n\treturn this.type;\n\n};\n\nReflectNode.prototype.generate = function ( builder, output ) {\n\n\tvar isUnique = this.getUnique( builder );\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tvar result;\n\n\t\tswitch ( this.scope ) {\n\n\t\t\tcase ReflectNode.VECTOR:\n\n\t\t\t\tvar viewNormalNode = new NormalNode( NormalNode.VIEW );\n\t\t\t\tvar roughnessNode = builder.context.roughness;\n\n\t\t\t\tvar viewNormal = viewNormalNode.build( builder, 'v3' );\n\t\t\t\tvar viewPosition = new PositionNode( PositionNode.VIEW ).build( builder, 'v3' );\n\t\t\t\tvar roughness = roughnessNode ? roughnessNode.build( builder, 'f' ) : undefined;\n\n\t\t\t\tvar method = `reflect( -normalize( ${viewPosition} ), ${viewNormal} )`;\n\n\t\t\t\tif ( roughness ) {\n\n\t\t\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\t\t\tmethod = `normalize( mix( ${method}, ${viewNormal}, ${roughness} * ${roughness} ) )`;\n\n\t\t\t\t}\n\n\t\t\t\tvar code = `inverseTransformDirection( ${method}, viewMatrix )`;\n\n\t\t\t\tif ( isUnique ) {\n\n\t\t\t\t\tbuilder.addNodeCode( `vec3 reflectVec = ${code};` );\n\n\t\t\t\t\tresult = 'reflectVec';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresult = code;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase ReflectNode.CUBE:\n\n\t\t\t\tvar reflectVec = new ReflectNode( ReflectNode.VECTOR ).build( builder, 'v3' );\n\n\t\t\t\tvar code = 'vec3( -' + reflectVec + '.x, ' + reflectVec + '.yz )';\n\n\t\t\t\tif ( isUnique ) {\n\n\t\t\t\t\tbuilder.addNodeCode( `vec3 reflectCubeVec = ${code};` );\n\n\t\t\t\t\tresult = 'reflectCubeVec';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresult = code;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase ReflectNode.SPHERE:\n\n\t\t\t\tvar reflectVec = new ReflectNode( ReflectNode.VECTOR ).build( builder, 'v3' );\n\n\t\t\t\tvar code = 'normalize( ( viewMatrix * vec4( ' + reflectVec + ', 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5';\n\n\t\t\t\tif ( isUnique ) {\n\n\t\t\t\t\tbuilder.addNodeCode( `vec2 reflectSphereVec = ${code};` );\n\n\t\t\t\t\tresult = 'reflectSphereVec';\n\n\t\t\t\t} else {\n\n\t\t\t\t\tresult = code;\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\treturn builder.format( result, this.getType( builder ), output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.ReflectNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec3( 0.0 )', this.type, output );\n\n\t}\n\n};\n\nReflectNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.scope = this.scope;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ReflectNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\nimport { ReflectNode } from '../accessors/ReflectNode.js';\nimport { ColorSpaceNode } from '../utils/ColorSpaceNode.js';\nimport { ExpressionNode } from '../core/ExpressionNode.js';\n\nfunction CubeTextureNode( value, uv, bias ) {\n\n\tInputNode.call( this, 'v4', { shared: true } );\n\n\tthis.value = value;\n\tthis.uv = uv || new ReflectNode();\n\tthis.bias = bias;\n\n}\n\nCubeTextureNode.prototype = Object.create( InputNode.prototype );\nCubeTextureNode.prototype.constructor = CubeTextureNode;\nCubeTextureNode.prototype.nodeType = \"CubeTexture\";\n\nCubeTextureNode.prototype.getTexture = function ( builder, output ) {\n\n\treturn InputNode.prototype.generate.call( this, builder, output, this.value.uuid, 'tc' );\n\n};\n\nCubeTextureNode.prototype.generate = function ( builder, output ) {\n\n\tif ( output === 'samplerCube' ) {\n\n\t\treturn this.getTexture( builder, output );\n\n\t}\n\n\tvar cubetex = this.getTexture( builder, output );\n\tvar uv = this.uv.build( builder, 'v3' );\n\tvar bias = this.bias ? this.bias.build( builder, 'f' ) : undefined;\n\n\tif ( bias === undefined && builder.context.bias ) {\n\n\t\tbias = builder.context.bias.setTexture( this ).build( builder, 'f' );\n\n\t}\n\n\tvar code;\n\n\tif ( bias ) code = 'texCubeBias( ' + cubetex + ', ' + uv + ', ' + bias + ' )';\n\telse code = 'texCube( ' + cubetex + ', ' + uv + ' )';\n\n\t// add a custom context for fix incompatibility with the core\n\t// include ColorSpace function only for vertex shader (in fragment shader color space functions is added automatically by core)\n\t// this should be removed in the future\n\t// context.include =: is used to include or not functions if used FunctionNode\n\t// context.ignoreCache =: not create variables temp nodeT0..9 to optimize the code\n\tvar context = { include: builder.isShader( 'vertex' ), ignoreCache: true };\n\tvar outputType = this.getType( builder );\n\n\tbuilder.addContext( context );\n\n\tthis.colorSpace = this.colorSpace || new ColorSpaceNode( new ExpressionNode( '', outputType ) );\n\tthis.colorSpace.fromDecoding( builder.getTextureEncodingFromMap( this.value ) );\n\tthis.colorSpace.input.parse( code );\n\n\tcode = this.colorSpace.build( builder, outputType );\n\n\t// end custom context\n\n\tbuilder.removeContext();\n\n\treturn builder.format( code, outputType, output );\n\n};\n\nCubeTextureNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tif ( source.value ) this.value = source.value;\n\n\tthis.uv = source.uv;\n\n\tif ( source.bias ) this.bias = source.bias;\n\n\treturn this;\n\n};\n\nCubeTextureNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.uuid;\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\n\t\tif ( this.bias ) data.bias = this.bias.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { CubeTextureNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\n\nfunction OperatorNode( a, b, op ) {\n\n\tTempNode.call( this );\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.op = op;\n\n}\n\nOperatorNode.ADD = '+';\nOperatorNode.SUB = '-';\nOperatorNode.MUL = '*';\nOperatorNode.DIV = '/';\n\nOperatorNode.prototype = Object.create( TempNode.prototype );\nOperatorNode.prototype.constructor = OperatorNode;\nOperatorNode.prototype.nodeType = \"Operator\";\n\nOperatorNode.prototype.getType = function ( builder ) {\n\n\tvar a = this.a.getType( builder ),\n\t\tb = this.b.getType( builder );\n\n\tif ( builder.isTypeMatrix( a ) ) {\n\n\t\treturn 'v4';\n\n\t} else if ( builder.getTypeLength( b ) > builder.getTypeLength( a ) ) {\n\n\t\t// use the greater length vector\n\n\t\treturn b;\n\n\t}\n\n\treturn a;\n\n};\n\nOperatorNode.prototype.generate = function ( builder, output ) {\n\n\tvar type = this.getType( builder );\n\n\tvar a = this.a.build( builder, type ),\n\t\tb = this.b.build( builder, type );\n\n\treturn builder.format( '( ' + a + ' ' + this.op + ' ' + b + ' )', type, output );\n\n};\n\nOperatorNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.a = source.a;\n\tthis.b = source.b;\n\tthis.op = source.op;\n\n\treturn this;\n\n};\n\nOperatorNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.a = this.a.toJSON( meta ).uuid;\n\t\tdata.b = this.b.toJSON( meta ).uuid;\n\t\tdata.op = this.op;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { OperatorNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\n\nfunction MathNode( a, bOrMethod, cOrMethod, method ) {\n\n\tTempNode.call( this );\n\n\tthis.a = a;\n\ttypeof bOrMethod !== 'string' ? this.b = bOrMethod : method = bOrMethod;\n\ttypeof cOrMethod !== 'string' ? this.c = cOrMethod : method = cOrMethod;\n\n\tthis.method = method;\n\n}\n\n// 1 input\n\nMathNode.RAD = 'radians';\nMathNode.DEG = 'degrees';\nMathNode.EXP = 'exp';\nMathNode.EXP2 = 'exp2';\nMathNode.LOG = 'log';\nMathNode.LOG2 = 'log2';\nMathNode.SQRT = 'sqrt';\nMathNode.INV_SQRT = 'inversesqrt';\nMathNode.FLOOR = 'floor';\nMathNode.CEIL = 'ceil';\nMathNode.NORMALIZE = 'normalize';\nMathNode.FRACT = 'fract';\nMathNode.SATURATE = 'saturate';\nMathNode.SIN = 'sin';\nMathNode.COS = 'cos';\nMathNode.TAN = 'tan';\nMathNode.ASIN = 'asin';\nMathNode.ACOS = 'acos';\nMathNode.ARCTAN = 'atan';\nMathNode.ABS = 'abs';\nMathNode.SIGN = 'sign';\nMathNode.LENGTH = 'length';\nMathNode.NEGATE = 'negate';\nMathNode.INVERT = 'invert';\n\n// 2 inputs\n\nMathNode.MIN = 'min';\nMathNode.MAX = 'max';\nMathNode.MOD = 'mod';\nMathNode.STEP = 'step';\nMathNode.REFLECT = 'reflect';\nMathNode.DISTANCE = 'distance';\nMathNode.DOT = 'dot';\nMathNode.CROSS = 'cross';\nMathNode.POW = 'pow';\n\n// 3 inputs\n\nMathNode.MIX = 'mix';\nMathNode.CLAMP = 'clamp';\nMathNode.REFRACT = 'refract';\nMathNode.SMOOTHSTEP = 'smoothstep';\nMathNode.FACEFORWARD = 'faceforward';\n\nMathNode.prototype = Object.create( TempNode.prototype );\nMathNode.prototype.constructor = MathNode;\nMathNode.prototype.nodeType = \"Math\";\n\nMathNode.prototype.getNumInputs = function ( /*builder*/ ) {\n\n\tswitch ( this.method ) {\n\n\t\tcase MathNode.MIX:\n\t\tcase MathNode.CLAMP:\n\t\tcase MathNode.REFRACT:\n\t\tcase MathNode.SMOOTHSTEP:\n\t\tcase MathNode.FACEFORWARD:\n\n\t\t\treturn 3;\n\n\t\tcase MathNode.MIN:\n\t\tcase MathNode.MAX:\n\t\tcase MathNode.MOD:\n\t\tcase MathNode.STEP:\n\t\tcase MathNode.REFLECT:\n\t\tcase MathNode.DISTANCE:\n\t\tcase MathNode.DOT:\n\t\tcase MathNode.CROSS:\n\t\tcase MathNode.POW:\n\n\t\t\treturn 2;\n\n\t\tdefault:\n\n\t\t\treturn 1;\n\n\t}\n\n};\n\nMathNode.prototype.getInputType = function ( builder ) {\n\n\tvar a = builder.getTypeLength( this.a.getType( builder ) );\n\tvar b = this.b ? builder.getTypeLength( this.b.getType( builder ) ) : 0;\n\tvar c = this.c ? builder.getTypeLength( this.c.getType( builder ) ) : 0;\n\n\tif ( a > b && a > c ) {\n\n\t\treturn this.a.getType( builder );\n\n\t} else if ( b > c ) {\n\n\t\treturn this.b.getType( builder );\n\n\t}\n\n\treturn this.c.getType( builder );\n\n};\n\nMathNode.prototype.getType = function ( builder ) {\n\n\tswitch ( this.method ) {\n\n\t\tcase MathNode.LENGTH:\n\t\tcase MathNode.DISTANCE:\n\t\tcase MathNode.DOT:\n\n\t\t\treturn 'f';\n\n\t\tcase MathNode.CROSS:\n\n\t\t\treturn 'v3';\n\n\t}\n\n\treturn this.getInputType( builder );\n\n};\n\nMathNode.prototype.generate = function ( builder, output ) {\n\n\tvar a, b, c,\n\t\tal = this.a ? builder.getTypeLength( this.a.getType( builder ) ) : 0,\n\t\tbl = this.b ? builder.getTypeLength( this.b.getType( builder ) ) : 0,\n\t\tcl = this.c ? builder.getTypeLength( this.c.getType( builder ) ) : 0,\n\t\tinputType = this.getInputType( builder ),\n\t\tnodeType = this.getType( builder );\n\n\tswitch ( this.method ) {\n\n\t\t// 1 input\n\n\t\tcase MathNode.NEGATE:\n\n\t\t\treturn builder.format( '( -' + this.a.build( builder, inputType ) + ' )', inputType, output );\n\n\t\tcase MathNode.INVERT:\n\n\t\t\treturn builder.format( '( 1.0 - ' + this.a.build( builder, inputType ) + ' )', inputType, output );\n\n\t\t\t// 2 inputs\n\n\t\tcase MathNode.CROSS:\n\n\t\t\ta = this.a.build( builder, 'v3' );\n\t\t\tb = this.b.build( builder, 'v3' );\n\n\t\t\tbreak;\n\n\t\tcase MathNode.STEP:\n\n\t\t\ta = this.a.build( builder, al === 1 ? 'f' : inputType );\n\t\t\tb = this.b.build( builder, inputType );\n\n\t\t\tbreak;\n\n\t\tcase MathNode.MIN:\n\t\tcase MathNode.MAX:\n\t\tcase MathNode.MOD:\n\n\t\t\ta = this.a.build( builder, inputType );\n\t\t\tb = this.b.build( builder, bl === 1 ? 'f' : inputType );\n\n\t\t\tbreak;\n\n\t\t\t// 3 inputs\n\n\t\tcase MathNode.REFRACT:\n\n\t\t\ta = this.a.build( builder, inputType );\n\t\t\tb = this.b.build( builder, inputType );\n\t\t\tc = this.c.build( builder, 'f' );\n\n\t\t\tbreak;\n\n\t\tcase MathNode.MIX:\n\n\t\t\ta = this.a.build( builder, inputType );\n\t\t\tb = this.b.build( builder, inputType );\n\t\t\tc = this.c.build( builder, cl === 1 ? 'f' : inputType );\n\n\t\t\tbreak;\n\n\t\t\t// default\n\n\t\tdefault:\n\n\t\t\ta = this.a.build( builder, inputType );\n\t\t\tif ( this.b ) b = this.b.build( builder, inputType );\n\t\t\tif ( this.c ) c = this.c.build( builder, inputType );\n\n\t\t\tbreak;\n\n\t}\n\n\t// build function call\n\n\tvar params = [];\n\tparams.push( a );\n\tif ( b ) params.push( b );\n\tif ( c ) params.push( c );\n\n\tvar numInputs = this.getNumInputs( builder );\n\n\tif ( params.length !== numInputs ) {\n\n\t\tthrow Error( `Arguments not match used in \"${this.method}\". Require ${numInputs}, currently ${params.length}.` );\n\n\t}\n\n\treturn builder.format( this.method + '( ' + params.join( ', ' ) + ' )', nodeType, output );\n\n};\n\nMathNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.a = source.a;\n\tthis.b = source.b;\n\tthis.c = source.c;\n\tthis.method = source.method;\n\n\treturn this;\n\n};\n\nMathNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.a = this.a.toJSON( meta ).uuid;\n\t\tif ( this.b ) data.b = this.b.toJSON( meta ).uuid;\n\t\tif ( this.c ) data.c = this.c.toJSON( meta ).uuid;\n\n\t\tdata.method = this.method;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { MathNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { ConstNode } from '../core/ConstNode.js';\nimport { StructNode } from '../core/StructNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { FunctionCallNode } from '../core/FunctionCallNode.js';\nimport { ExpressionNode } from '../core/ExpressionNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { OperatorNode } from '../math/OperatorNode.js';\nimport { MathNode } from '../math/MathNode.js';\nimport { ColorSpaceNode } from '../utils/ColorSpaceNode.js';\n\nfunction TextureCubeUVNode( value, uv, bias ) {\n\n\tTempNode.call( this, 'v4' );\n\n\tthis.value = value,\n\tthis.uv = uv;\n\tthis.bias = bias;\n\n}\n\nTextureCubeUVNode.Nodes = ( function () {\n\n\tvar TextureCubeUVData = new StructNode(\n\t\t`struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}` );\n\n\tvar cubeUV_maxMipLevel = new ConstNode( `float cubeUV_maxMipLevel 8.0`, true );\n\tvar cubeUV_minMipLevel = new ConstNode( `float cubeUV_minMipLevel 4.0`, true );\n\tvar cubeUV_maxTileSize = new ConstNode( `float cubeUV_maxTileSize 256.0`, true );\n\tvar cubeUV_minTileSize = new ConstNode( `float cubeUV_minTileSize 16.0`, true );\n\n\t// These shader functions convert between the UV coordinates of a single face of\n\t// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n\t// sampling a textureCube (not generally normalized).\n\n\tvar getFace = new FunctionNode(\n\t\t`float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}` );\n\tgetFace.useKeywords = false;\n\n\tvar getUV = new FunctionNode(\n\t\t`vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}` );\n\tgetUV.useKeywords = false;\n\n\tvar bilinearCubeUV = new FunctionNode(\n\t\t`TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}`, [ TextureCubeUVData, getFace, getUV, cubeUV_maxMipLevel, cubeUV_minMipLevel, cubeUV_maxTileSize, cubeUV_minTileSize ] );\n\tbilinearCubeUV.useKeywords = false;\n\n\t// These defines must match with PMREMGenerator\n\n\tvar r0 = new ConstNode( `float r0 1.0`, true );\n\tvar v0 = new ConstNode( `float v0 0.339`, true );\n\tvar m0 = new ConstNode( `float m0 -2.0`, true );\n\tvar r1 = new ConstNode( `float r1 0.8`, true );\n\tvar v1 = new ConstNode( `float v1 0.276`, true );\n\tvar m1 = new ConstNode( `float m1 -1.0`, true );\n\tvar r4 = new ConstNode( `float r4 0.4`, true );\n\tvar v4 = new ConstNode( `float v4 0.046`, true );\n\tvar m4 = new ConstNode( `float m4 2.0`, true );\n\tvar r5 = new ConstNode( `float r5 0.305`, true );\n\tvar v5 = new ConstNode( `float v5 0.016`, true );\n\tvar m5 = new ConstNode( `float m5 3.0`, true );\n\tvar r6 = new ConstNode( `float r6 0.21`, true );\n\tvar v6 = new ConstNode( `float v6 0.0038`, true );\n\tvar m6 = new ConstNode( `float m6 4.0`, true );\n\n\tvar defines = [ r0, v0, m0, r1, v1, m1, r4, v4, m4, r5, v5, m5, r6, v6, m6 ];\n\n\tvar roughnessToMip = new FunctionNode(\n\t\t`float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}`, defines );\n\n\treturn {\n\t\tbilinearCubeUV: bilinearCubeUV,\n\t\troughnessToMip: roughnessToMip,\n\t\tm0: m0,\n\t\tcubeUV_maxMipLevel: cubeUV_maxMipLevel\n\t};\n\n} )();\n\nTextureCubeUVNode.prototype = Object.create( TempNode.prototype );\nTextureCubeUVNode.prototype.constructor = TextureCubeUVNode;\nTextureCubeUVNode.prototype.nodeType = \"TextureCubeUV\";\n\nTextureCubeUVNode.prototype.bilinearCubeUV = function ( builder, texture, uv, mipInt ) {\n\n\tvar bilinearCubeUV = new FunctionCallNode( TextureCubeUVNode.Nodes.bilinearCubeUV, [ texture, uv, mipInt ] );\n\n\tthis.colorSpaceTL = this.colorSpaceTL || new ColorSpaceNode( new ExpressionNode( '', 'v4' ) );\n\tthis.colorSpaceTL.fromDecoding( builder.getTextureEncodingFromMap( this.value.value ) );\n\tthis.colorSpaceTL.input.parse( bilinearCubeUV.build( builder ) + '.tl' );\n\n\tthis.colorSpaceTR = this.colorSpaceTR || new ColorSpaceNode( new ExpressionNode( '', 'v4' ) );\n\tthis.colorSpaceTR.fromDecoding( builder.getTextureEncodingFromMap( this.value.value ) );\n\tthis.colorSpaceTR.input.parse( bilinearCubeUV.build( builder ) + '.tr' );\n\n\tthis.colorSpaceBL = this.colorSpaceBL || new ColorSpaceNode( new ExpressionNode( '', 'v4' ) );\n\tthis.colorSpaceBL.fromDecoding( builder.getTextureEncodingFromMap( this.value.value ) );\n\tthis.colorSpaceBL.input.parse( bilinearCubeUV.build( builder ) + '.bl' );\n\n\tthis.colorSpaceBR = this.colorSpaceBR || new ColorSpaceNode( new ExpressionNode( '', 'v4' ) );\n\tthis.colorSpaceBR.fromDecoding( builder.getTextureEncodingFromMap( this.value.value ) );\n\tthis.colorSpaceBR.input.parse( bilinearCubeUV.build( builder ) + '.br' );\n\n\t// add a custom context for fix incompatibility with the core\n\t// include ColorSpace function only for vertex shader (in fragment shader color space functions is added automatically by core)\n\t// this should be removed in the future\n\t// context.include =: is used to include or not functions if used FunctionNode\n\t// context.ignoreCache =: not create temp variables nodeT0..9 to optimize the code\n\tvar context = { include: builder.isShader( 'vertex' ), ignoreCache: true };\n\n\tbuilder.addContext( context );\n\n\tthis.colorSpaceTLExp = new ExpressionNode( this.colorSpaceTL.build( builder, 'v4' ), 'v4' );\n\tthis.colorSpaceTRExp = new ExpressionNode( this.colorSpaceTR.build( builder, 'v4' ), 'v4' );\n\tthis.colorSpaceBLExp = new ExpressionNode( this.colorSpaceBL.build( builder, 'v4' ), 'v4' );\n\tthis.colorSpaceBRExp = new ExpressionNode( this.colorSpaceBR.build( builder, 'v4' ), 'v4' );\n\n\t// end custom context\n\n\tbuilder.removeContext();\n\n\t// --\n\n\tvar output = new ExpressionNode( `mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )`, 'v4' );\n\toutput.keywords[ 'cubeUV_TL' ] = this.colorSpaceTLExp;\n\toutput.keywords[ 'cubeUV_TR' ] = this.colorSpaceTRExp;\n\toutput.keywords[ 'cubeUV_BL' ] = this.colorSpaceBLExp;\n\toutput.keywords[ 'cubeUV_BR' ] = this.colorSpaceBRExp;\n\toutput.keywords[ 'cubeUV' ] = bilinearCubeUV;\n\n\treturn output;\n\n};\n\nTextureCubeUVNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tvar uv = this.uv;\n\t\tvar bias = this.bias || builder.context.roughness;\n\n\t\tvar mipV = new FunctionCallNode( TextureCubeUVNode.Nodes.roughnessToMip, [ bias ] );\n\t\tvar mip = new MathNode( mipV, TextureCubeUVNode.Nodes.m0, TextureCubeUVNode.Nodes.cubeUV_maxMipLevel, MathNode.CLAMP );\n\t\tvar mipInt\t= new MathNode( mip, MathNode.FLOOR );\n\t\tvar mipF\t= new MathNode( mip, MathNode.FRACT );\n\n\t\tvar color0 = this.bilinearCubeUV( builder, this.value, uv, mipInt );\n\t\tvar color1 = this.bilinearCubeUV( builder, this.value, uv, new OperatorNode(\n\t\t\tmipInt,\n\t\t\tnew FloatNode( 1 ).setReadonly( true ),\n\t\t\tOperatorNode.ADD\n\t\t) );\n\n\t\tvar color1Mix = new MathNode( color0, color1, mipF, MathNode.MIX );\n\n\t\t/*\n\t\t// TODO: Optimize this in the future\n\t\tvar cond = new CondNode(\n\t\t\tmipF,\n\t\t\tnew FloatNode( 0 ).setReadonly( true ),\n\t\t\tCondNode.EQUAL,\n\t\t\tcolor0, // if\n\t\t\tcolor1Mix\t// else\n\t\t);\n\t\t*/\n\n\t\treturn builder.format( color1Mix.build( builder ), 'v4', output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.TextureCubeUVNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec4( 0.0 )', this.getType( builder ), output );\n\n\t}\n\n};\n\nTextureCubeUVNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\t\tdata.bias = this.bias.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { TextureCubeUVNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { TextureCubeUVNode } from './TextureCubeUVNode.js';\nimport { ReflectNode } from '../accessors/ReflectNode.js';\nimport { NormalNode } from '../accessors/NormalNode.js';\n\nfunction TextureCubeNode( value, uv, bias ) {\n\n\tTempNode.call( this, 'v4' );\n\n\tthis.value = value;\n\n\tthis.radianceNode = new TextureCubeUVNode(\n\t\tthis.value,\n\t\tuv || new ReflectNode( ReflectNode.VECTOR ),\n\t\t// bias should be replaced in builder.context in build process\n\t\tbias\n\t);\n\n\tthis.irradianceNode = new TextureCubeUVNode(\n\t\tthis.value,\n\t\tnew NormalNode( NormalNode.WORLD ),\n\t\tnew FloatNode( 1 ).setReadonly( true )\n\t);\n\n}\n\nTextureCubeNode.prototype = Object.create( TempNode.prototype );\nTextureCubeNode.prototype.constructor = TextureCubeNode;\nTextureCubeNode.prototype.nodeType = \"TextureCube\";\n\nTextureCubeNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tbuilder.require( 'irradiance' );\n\n\t\tif ( builder.context.bias ) {\n\n\t\t\tbuilder.context.bias.setTexture( this.value );\n\n\t\t}\n\n\t\tvar scopeNode = builder.slot === 'irradiance' ? this.irradianceNode : this.radianceNode;\n\n\t\treturn scopeNode.build( builder, output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.TextureCubeNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec4( 0.0 )', this.getType( builder ), output );\n\n\t}\n\n};\n\nTextureCubeNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nTextureCubeNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { TextureCubeNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tCubeReflectionMapping,\n\tCubeRefractionMapping,\n\tCubeUVReflectionMapping,\n\tCubeUVRefractionMapping,\n\tLinearEncoding,\n\tGammaEncoding\n} from '../../../../build/three.module.js';\n\nimport { NodeUniform } from './NodeUniform.js';\nimport { NodeUtils } from './NodeUtils.js';\nimport { NodeLib } from './NodeLib.js';\nimport { FunctionNode } from './FunctionNode.js';\nimport { ConstNode } from './ConstNode.js';\nimport { StructNode } from './StructNode.js';\nimport { Vector2Node } from '../inputs/Vector2Node.js';\nimport { Vector3Node } from '../inputs/Vector3Node.js';\nimport { Vector4Node } from '../inputs/Vector4Node.js';\nimport { TextureNode } from '../inputs/TextureNode.js';\nimport { CubeTextureNode } from '../inputs/CubeTextureNode.js';\nimport { TextureCubeNode } from '../misc/TextureCubeNode.js';\n\n\nvar elements = NodeUtils.elements,\n\tconstructors = [ 'float', 'vec2', 'vec3', 'vec4' ],\n\tconvertFormatToType = {\n\t\tfloat: 'f',\n\t\tvec2: 'v2',\n\t\tvec3: 'v3',\n\t\tvec4: 'v4',\n\t\tmat4: 'v4',\n\t\tint: 'i',\n\t\tbool: 'b'\n\t},\n\tconvertTypeToFormat = {\n\t\tt: 'sampler2D',\n\t\ttc: 'samplerCube',\n\t\tb: 'bool',\n\t\ti: 'int',\n\t\tf: 'float',\n\t\tc: 'vec3',\n\t\tv2: 'vec2',\n\t\tv3: 'vec3',\n\t\tv4: 'vec4',\n\t\tm3: 'mat3',\n\t\tm4: 'mat4'\n\t};\n\nfunction NodeBuilder() {\n\n\tthis.slots = [];\n\tthis.caches = [];\n\tthis.contexts = [];\n\n\tthis.keywords = {};\n\n\tthis.nodeData = {};\n\n\tthis.requires = {\n\t\tuv: [],\n\t\tcolor: [],\n\t\tlights: false,\n\t\tfog: false\n\t};\n\n\tthis.includes = {\n\t\tconsts: [],\n\t\tfunctions: [],\n\t\tstructs: []\n\t};\n\n\tthis.attributes = {};\n\n\tthis.prefixCode = [\n\t\t\"#ifdef TEXTURE_LOD_EXT\",\n\n\t\t\"\t#define texCube(a, b) textureCube(a, b)\",\n\t\t\"\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)\",\n\n\t\t\"\t#define tex2D(a, b) texture2D(a, b)\",\n\t\t\"\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)\",\n\n\t\t\"#else\",\n\n\t\t\"\t#define texCube(a, b) textureCube(a, b)\",\n\t\t\"\t#define texCubeBias(a, b, c) textureCube(a, b, c)\",\n\n\t\t\"\t#define tex2D(a, b) texture2D(a, b)\",\n\t\t\"\t#define tex2DBias(a, b, c) texture2D(a, b, c)\",\n\n\t\t\"#endif\",\n\n\t\t\"#include <packing>\",\n\t\t\"#include <common>\"\n\n\t].join( \"\\n\" );\n\n\tthis.parsCode = {\n\t\tvertex: '',\n\t\tfragment: ''\n\t};\n\n\tthis.code = {\n\t\tvertex: '',\n\t\tfragment: ''\n\t};\n\n\tthis.nodeCode = {\n\t\tvertex: '',\n\t\tfragment: ''\n\t};\n\n\tthis.resultCode = {\n\t\tvertex: '',\n\t\tfragment: ''\n\t};\n\n\tthis.finalCode = {\n\t\tvertex: '',\n\t\tfragment: ''\n\t};\n\n\tthis.inputs = {\n\t\tuniforms: {\n\t\t\tlist: [],\n\t\t\tvertex: [],\n\t\t\tfragment: []\n\t\t},\n\t\tvars: {\n\t\t\tvarying: [],\n\t\t\tvertex: [],\n\t\t\tfragment: []\n\t\t}\n\t};\n\n\t// send to material\n\n\tthis.defines = {};\n\n\tthis.uniforms = {};\n\n\tthis.extensions = {};\n\n\tthis.updaters = [];\n\n\tthis.nodes = [];\n\n\t// --\n\n\tthis.analyzing = false;\n\n}\n\nNodeBuilder.prototype = {\n\n\tconstructor: NodeBuilder,\n\n\tbuild: function ( vertex, fragment ) {\n\n\t\tthis.buildShader( 'vertex', vertex );\n\t\tthis.buildShader( 'fragment', fragment );\n\n\t\tfor ( var i = 0; i < this.requires.uv.length; i ++ ) {\n\n\t\t\tif ( this.requires.uv[ i ] ) {\n\n\t\t\t\tvar uvIndex = i > 0 ? i + 1 : '';\n\n\t\t\t\tthis.addVaryCode( 'varying vec2 vUv' + uvIndex + ';' );\n\n\t\t\t\tif ( i > 0 ) {\n\n\t\t\t\t\tthis.addVertexParsCode( 'attribute vec2 uv' + uvIndex + ';' );\n\n\t\t\t\t}\n\n\t\t\t\tthis.addVertexFinalCode( 'vUv' + uvIndex + ' = uv' + uvIndex + ';' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.requires.color[ 0 ] ) {\n\n\t\t\tthis.addVaryCode( 'varying vec4 vColor;' );\n\t\t\tthis.addVertexParsCode( 'attribute vec4 color;' );\n\n\t\t\tthis.addVertexFinalCode( 'vColor = color;' );\n\n\t\t}\n\n\t\tif ( this.requires.color[ 1 ] ) {\n\n\t\t\tthis.addVaryCode( 'varying vec4 vColor2;' );\n\t\t\tthis.addVertexParsCode( 'attribute vec4 color2;' );\n\n\t\t\tthis.addVertexFinalCode( 'vColor2 = color2;' );\n\n\t\t}\n\n\t\tif ( this.requires.position ) {\n\n\t\t\tthis.addVaryCode( 'varying vec3 vPosition;' );\n\n\t\t\tthis.addVertexFinalCode( 'vPosition = transformed;' );\n\n\t\t}\n\n\t\tif ( this.requires.worldPosition ) {\n\n\t\t\tthis.addVaryCode( 'varying vec3 vWPosition;' );\n\n\t\t\tthis.addVertexFinalCode( 'vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;' );\n\n\t\t}\n\n\t\tif ( this.requires.normal ) {\n\n\t\t\tthis.addVaryCode( 'varying vec3 vObjectNormal;' );\n\n\t\t\tthis.addVertexFinalCode( 'vObjectNormal = normal;' );\n\n\t\t}\n\n\t\tif ( this.requires.worldNormal ) {\n\n\t\t\tthis.addVaryCode( 'varying vec3 vWNormal;' );\n\n\t\t\tthis.addVertexFinalCode( 'vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;' );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tbuildShader: function ( shader, node ) {\n\n\t\tthis.resultCode[ shader ] = node.build( this.setShader( shader ), 'v4' );\n\n\t},\n\n\tsetMaterial: function ( material, renderer ) {\n\n\t\tthis.material = material;\n\t\tthis.renderer = renderer;\n\n\t\tthis.requires.lights = material.lights;\n\t\tthis.requires.fog = material.fog;\n\n\t\tthis.mergeDefines( material.defines );\n\n\t\treturn this;\n\n\t},\n\n\taddFlow: function ( slot, cache, context ) {\n\n\t\treturn this.addSlot( slot ).addCache( cache ).addContext( context );\n\n\t},\n\n\tremoveFlow: function () {\n\n\t\treturn this.removeSlot().removeCache().removeContext();\n\n\t},\n\n\taddCache: function ( name ) {\n\n\t\tthis.cache = name || '';\n\t\tthis.caches.push( this.cache );\n\n\t\treturn this;\n\n\t},\n\n\tremoveCache: function () {\n\n\t\tthis.caches.pop();\n\t\tthis.cache = this.caches[ this.caches.length - 1 ] || '';\n\n\t\treturn this;\n\n\t},\n\n\taddContext: function ( context ) {\n\n\t\tthis.context = Object.assign( {}, this.context, context );\n\t\tthis.context.extra = this.context.extra || {};\n\n\t\tthis.contexts.push( this.context );\n\n\t\treturn this;\n\n\t},\n\n\tremoveContext: function () {\n\n\t\tthis.contexts.pop();\n\t\tthis.context = this.contexts[ this.contexts.length - 1 ] || {};\n\n\t\treturn this;\n\n\t},\n\n\taddSlot: function ( name ) {\n\n\t\tthis.slot = name || '';\n\t\tthis.slots.push( this.slot );\n\n\t\treturn this;\n\n\t},\n\n\tremoveSlot: function () {\n\n\t\tthis.slots.pop();\n\t\tthis.slot = this.slots[ this.slots.length - 1 ] || '';\n\n\t\treturn this;\n\n\t},\n\n\n\taddVertexCode: function ( code ) {\n\n\t\tthis.addCode( code, 'vertex' );\n\n\t},\n\n\taddFragmentCode: function ( code ) {\n\n\t\tthis.addCode( code, 'fragment' );\n\n\t},\n\n\taddCode: function ( code, shader ) {\n\n\t\tthis.code[ shader || this.shader ] += code + '\\n';\n\n\t},\n\n\n\taddVertexNodeCode: function ( code ) {\n\n\t\tthis.addNodeCode( code, 'vertex' );\n\n\t},\n\n\taddFragmentNodeCode: function ( code ) {\n\n\t\tthis.addNodeCode( code, 'fragment' );\n\n\t},\n\n\taddNodeCode: function ( code, shader ) {\n\n\t\tthis.nodeCode[ shader || this.shader ] += code + '\\n';\n\n\t},\n\n\tclearNodeCode: function ( shader ) {\n\n\t\tshader = shader || this.shader;\n\n\t\tvar code = this.nodeCode[ shader ];\n\n\t\tthis.nodeCode[ shader ] = '';\n\n\t\treturn code;\n\n\t},\n\n\tclearVertexNodeCode: function ( ) {\n\n\t\treturn this.clearNodeCode( 'vertex' );\n\n\t},\n\n\tclearFragmentNodeCode: function ( ) {\n\n\t\treturn this.clearNodeCode( 'fragment' );\n\n\t},\n\n\taddVertexFinalCode: function ( code ) {\n\n\t\tthis.addFinalCode( code, 'vertex' );\n\n\t},\n\n\taddFragmentFinalCode: function ( code ) {\n\n\t\tthis.addFinalCode( code, 'fragment' );\n\n\t},\n\n\taddFinalCode: function ( code, shader ) {\n\n\t\tthis.finalCode[ shader || this.shader ] += code + '\\n';\n\n\t},\n\n\n\taddVertexParsCode: function ( code ) {\n\n\t\tthis.addParsCode( code, 'vertex' );\n\n\t},\n\n\taddFragmentParsCode: function ( code ) {\n\n\t\tthis.addParsCode( code, 'fragment' );\n\n\t},\n\n\taddParsCode: function ( code, shader ) {\n\n\t\tthis.parsCode[ shader || this.shader ] += code + '\\n';\n\n\t},\n\n\n\taddVaryCode: function ( code ) {\n\n\t\tthis.addVertexParsCode( code );\n\t\tthis.addFragmentParsCode( code );\n\n\t},\n\n\n\tisCache: function ( name ) {\n\n\t\treturn this.caches.indexOf( name ) !== - 1;\n\n\t},\n\n\tisSlot: function ( name ) {\n\n\t\treturn this.slots.indexOf( name ) !== - 1;\n\n\t},\n\n\tdefine: function ( name, value ) {\n\n\t\tthis.defines[ name ] = value === undefined ? 1 : value;\n\n\t},\n\n\trequire: function ( name ) {\n\n\t\tthis.requires[ name ] = true;\n\n\t},\n\n\tisDefined: function ( name ) {\n\n\t\treturn this.defines[ name ] !== undefined;\n\n\t},\n\n\tgetVar: function ( uuid, type, ns, shader = 'varying', prefix = 'V', label = '' ) {\n\n\t\tvar vars = this.getVars( shader ),\n\t\t\tdata = vars[ uuid ];\n\n\t\tif ( ! data ) {\n\n\t\t\tvar index = vars.length,\n\t\t\t\tname = ns ? ns : 'node' + prefix + index + ( label ? '_' + label : '' );\n\n\t\t\tdata = { name: name, type: type };\n\n\t\t\tvars.push( data );\n\t\t\tvars[ uuid ] = data;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tgetTempVar: function ( uuid, type, ns, label ) {\n\n\t\treturn this.getVar( uuid, type, ns, this.shader, 'T', label );\n\n\t},\n\n\tgetAttribute: function ( name, type ) {\n\n\t\tif ( ! this.attributes[ name ] ) {\n\n\t\t\tvar varying = this.getVar( name, type );\n\n\t\t\tthis.addVertexParsCode( 'attribute ' + type + ' ' + name + ';' );\n\t\t\tthis.addVertexFinalCode( varying.name + ' = ' + name + ';' );\n\n\t\t\tthis.attributes[ name ] = { varying: varying, name: name, type: type };\n\n\t\t}\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tgetCode: function ( shader ) {\n\n\t\treturn [\n\t\t\tthis.prefixCode,\n\t\t\tthis.parsCode[ shader ],\n\t\t\tthis.getVarListCode( this.getVars( 'varying' ), 'varying' ),\n\t\t\tthis.getVarListCode( this.inputs.uniforms[ shader ], 'uniform' ),\n\t\t\tthis.getIncludesCode( 'consts', shader ),\n\t\t\tthis.getIncludesCode( 'structs', shader ),\n\t\t\tthis.getIncludesCode( 'functions', shader ),\n\t\t\t'void main() {',\n\t\t\tthis.getVarListCode( this.getVars( shader ) ),\n\t\t\tthis.code[ shader ],\n\t\t\tthis.resultCode[ shader ],\n\t\t\tthis.finalCode[ shader ],\n\t\t\t'}'\n\t\t].join( \"\\n\" );\n\n\t},\n\n\tgetVarListCode: function ( vars, prefix ) {\n\n\t\tprefix = prefix || '';\n\n\t\tvar code = '';\n\n\t\tfor ( var i = 0, l = vars.length; i < l; ++ i ) {\n\n\t\t\tvar nVar = vars[ i ],\n\t\t\t\ttype = nVar.type,\n\t\t\t\tname = nVar.name;\n\n\t\t\tvar formatType = this.getFormatByType( type );\n\n\t\t\tif ( formatType === undefined ) {\n\n\t\t\t\tthrow new Error( \"Node pars \" + formatType + \" not found.\" );\n\n\t\t\t}\n\n\t\t\tcode += prefix + ' ' + formatType + ' ' + name + ';\\n';\n\n\t\t}\n\n\t\treturn code;\n\n\t},\n\n\tgetVars: function ( shader ) {\n\n\t\treturn this.inputs.vars[ shader || this.shader ];\n\n\t},\n\n\tgetNodeData: function ( node ) {\n\n\t\tvar uuid = node.isNode ? node.uuid : node;\n\n\t\treturn this.nodeData[ uuid ] = this.nodeData[ uuid ] || {};\n\n\t},\n\n\tcreateUniform: function ( shader, type, node, ns, needsUpdate, label ) {\n\n\t\tvar uniforms = this.inputs.uniforms,\n\t\t\tindex = uniforms.list.length;\n\n\t\tvar uniform = new NodeUniform( {\n\t\t\ttype: type,\n\t\t\tname: ns ? ns : 'nodeU' + index + ( label ? '_' + label : '' ),\n\t\t\tnode: node,\n\t\t\tneedsUpdate: needsUpdate\n\t\t} );\n\n\t\tuniforms.list.push( uniform );\n\n\t\tuniforms[ shader ].push( uniform );\n\t\tuniforms[ shader ][ uniform.name ] = uniform;\n\n\t\tthis.uniforms[ uniform.name ] = uniform;\n\n\t\treturn uniform;\n\n\t},\n\n\tcreateVertexUniform: function ( type, node, ns, needsUpdate, label ) {\n\n\t\treturn this.createUniform( 'vertex', type, node, ns, needsUpdate, label );\n\n\t},\n\n\tcreateFragmentUniform: function ( type, node, ns, needsUpdate, label ) {\n\n\t\treturn this.createUniform( 'fragment', type, node, ns, needsUpdate, label );\n\n\t},\n\n\tinclude: function ( node, parent, source ) {\n\n\t\tvar includesStruct;\n\n\t\tnode = typeof node === 'string' ? NodeLib.get( node ) : node;\n\n\t\tif ( this.context.include === false ) {\n\n\t\t\treturn node.name;\n\n\t\t}\n\n\n\t\tif ( node instanceof FunctionNode ) {\n\n\t\t\tincludesStruct = this.includes.functions;\n\n\t\t} else if ( node instanceof ConstNode ) {\n\n\t\t\tincludesStruct = this.includes.consts;\n\n\t\t} else if ( node instanceof StructNode ) {\n\n\t\t\tincludesStruct = this.includes.structs;\n\n\t\t}\n\n\t\tvar includes = includesStruct[ this.shader ] = includesStruct[ this.shader ] || [];\n\n\t\tif ( node ) {\n\n\t\t\tvar included = includes[ node.name ];\n\n\t\t\tif ( ! included ) {\n\n\t\t\t\tincluded = includes[ node.name ] = {\n\t\t\t\t\tnode: node,\n\t\t\t\t\tdeps: []\n\t\t\t\t};\n\n\t\t\t\tincludes.push( included );\n\n\t\t\t\tincluded.src = node.build( this, 'source' );\n\n\t\t\t}\n\n\t\t\tif ( node instanceof FunctionNode && parent && includes[ parent.name ] && includes[ parent.name ].deps.indexOf( node ) == - 1 ) {\n\n\t\t\t\tincludes[ parent.name ].deps.push( node );\n\n\t\t\t\tif ( node.includes && node.includes.length ) {\n\n\t\t\t\t\tvar i = 0;\n\n\t\t\t\t\tdo {\n\n\t\t\t\t\t\tthis.include( node.includes[ i ++ ], parent );\n\n\t\t\t\t\t} while ( i < node.includes.length );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( source ) {\n\n\t\t\t\tincluded.src = source;\n\n\t\t\t}\n\n\t\t\treturn node.name;\n\n\t\t} else {\n\n\t\t\tthrow new Error( \"Include not found.\" );\n\n\t\t}\n\n\t},\n\n\tcolorToVectorProperties: function ( color ) {\n\n\t\treturn color.replace( 'r', 'x' ).replace( 'g', 'y' ).replace( 'b', 'z' ).replace( 'a', 'w' );\n\n\t},\n\n\tcolorToVector: function ( color ) {\n\n\t\treturn color.replace( /c/g, 'v3' );\n\n\t},\n\n\tgetIncludes: function ( type, shader ) {\n\n\t\treturn this.includes[ type ][ shader || this.shader ];\n\n\t},\n\n\tgetIncludesCode: function () {\n\n\t\tfunction sortByPosition( a, b ) {\n\n\t\t\treturn a.deps.length - b.deps.length;\n\n\t\t}\n\n\t\treturn function getIncludesCode( type, shader ) {\n\n\t\t\tvar includes = this.getIncludes( type, shader );\n\n\t\t\tif ( ! includes ) return '';\n\n\t\t\tvar code = '',\n\t\t\t\tincludes = includes.sort( sortByPosition );\n\n\t\t\tfor ( var i = 0; i < includes.length; i ++ ) {\n\n\t\t\t\tif ( includes[ i ].src ) code += includes[ i ].src + '\\n';\n\n\t\t\t}\n\n\t\t\treturn code;\n\n\t\t};\n\n\t}(),\n\n\tgetConstructorFromLength: function ( len ) {\n\n\t\treturn constructors[ len - 1 ];\n\n\t},\n\n\tisTypeMatrix: function ( format ) {\n\n\t\treturn /^m/.test( format );\n\n\t},\n\n\tgetTypeLength: function ( type ) {\n\n\t\tif ( type === 'f' ) return 1;\n\n\t\treturn parseInt( this.colorToVector( type ).substr( 1 ) );\n\n\t},\n\n\tgetTypeFromLength: function ( len ) {\n\n\t\tif ( len === 1 ) return 'f';\n\n\t\treturn 'v' + len;\n\n\t},\n\n\tfindNode: function () {\n\n\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\tvar nodeCandidate = arguments[ i ];\n\n\t\t\tif ( nodeCandidate !== undefined && nodeCandidate.isNode ) {\n\n\t\t\t\treturn nodeCandidate;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tresolve: function () {\n\n\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\tvar nodeCandidate = arguments[ i ];\n\n\t\t\tif ( nodeCandidate !== undefined ) {\n\n\t\t\t\tif ( nodeCandidate.isNode ) {\n\n\t\t\t\t\treturn nodeCandidate;\n\n\t\t\t\t} else if ( nodeCandidate.isTexture ) {\n\n\t\t\t\t\tswitch ( nodeCandidate.mapping ) {\n\n\t\t\t\t\t\tcase CubeReflectionMapping:\n\t\t\t\t\t\tcase CubeRefractionMapping:\n\n\t\t\t\t\t\t\treturn new CubeTextureNode( nodeCandidate );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase CubeUVReflectionMapping:\n\t\t\t\t\t\tcase CubeUVRefractionMapping:\n\n\t\t\t\t\t\t\treturn new TextureCubeNode( new TextureNode( nodeCandidate ) );\n\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\treturn new TextureNode( nodeCandidate );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( nodeCandidate.isVector2 ) {\n\n\t\t\t\t\treturn new Vector2Node( nodeCandidate );\n\n\t\t\t\t} else if ( nodeCandidate.isVector3 ) {\n\n\t\t\t\t\treturn new Vector3Node( nodeCandidate );\n\n\t\t\t\t} else if ( nodeCandidate.isVector4 ) {\n\n\t\t\t\t\treturn new Vector4Node( nodeCandidate );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tformat: function ( code, from, to ) {\n\n\t\tvar typeToType = this.colorToVector( to + ' <- ' + from );\n\n\t\tswitch ( typeToType ) {\n\n\t\t\tcase 'f <- v2' : return code + '.x';\n\t\t\tcase 'f <- v3' : return code + '.x';\n\t\t\tcase 'f <- v4' : return code + '.x';\n\t\t\tcase 'f <- i' :\n\t\t\tcase 'f <- b' :\treturn 'float( ' + code + ' )';\n\n\t\t\tcase 'v2 <- f' : return 'vec2( ' + code + ' )';\n\t\t\tcase 'v2 <- v3': return code + '.xy';\n\t\t\tcase 'v2 <- v4': return code + '.xy';\n\t\t\tcase 'v2 <- i' :\n\t\t\tcase 'v2 <- b' : return 'vec2( float( ' + code + ' ) )';\n\n\t\t\tcase 'v3 <- f' : return 'vec3( ' + code + ' )';\n\t\t\tcase 'v3 <- v2': return 'vec3( ' + code + ', 0.0 )';\n\t\t\tcase 'v3 <- v4': return code + '.xyz';\n\t\t\tcase 'v3 <- i' :\n\t\t\tcase 'v3 <- b' : return 'vec2( float( ' + code + ' ) )';\n\n\t\t\tcase 'v4 <- f' : return 'vec4( ' + code + ' )';\n\t\t\tcase 'v4 <- v2': return 'vec4( ' + code + ', 0.0, 1.0 )';\n\t\t\tcase 'v4 <- v3': return 'vec4( ' + code + ', 1.0 )';\n\t\t\tcase 'v4 <- i' :\n\t\t\tcase 'v4 <- b' : return 'vec4( float( ' + code + ' ) )';\n\n\t\t\tcase 'i <- f' :\n\t\t\tcase 'i <- b' : return 'int( ' + code + ' )';\n\t\t\tcase 'i <- v2' : return 'int( ' + code + '.x )';\n\t\t\tcase 'i <- v3' : return 'int( ' + code + '.x )';\n\t\t\tcase 'i <- v4' : return 'int( ' + code + '.x )';\n\n\t\t\tcase 'b <- f' : return '( ' + code + ' != 0.0 )';\n\t\t\tcase 'b <- v2' : return '( ' + code + ' != vec2( 0.0 ) )';\n\t\t\tcase 'b <- v3' : return '( ' + code + ' != vec3( 0.0 ) )';\n\t\t\tcase 'b <- v4' : return '( ' + code + ' != vec4( 0.0 ) )';\n\t\t\tcase 'b <- i' : return '( ' + code + ' != 0 )';\n\n\t\t}\n\n\t\treturn code;\n\n\t},\n\n\tgetTypeByFormat: function ( format ) {\n\n\t\treturn convertFormatToType[ format ] || format;\n\n\t},\n\n\tgetFormatByType: function ( type ) {\n\n\t\treturn convertTypeToFormat[ type ] || type;\n\n\t},\n\n\tgetUuid: function ( uuid, useCache ) {\n\n\t\tuseCache = useCache !== undefined ? useCache : true;\n\n\t\tif ( useCache && this.cache ) uuid = this.cache + '-' + uuid;\n\n\t\treturn uuid;\n\n\t},\n\n\tgetElementByIndex: function ( index ) {\n\n\t\treturn elements[ index ];\n\n\t},\n\n\tgetIndexByElement: function ( elm ) {\n\n\t\treturn elements.indexOf( elm );\n\n\t},\n\n\tisShader: function ( shader ) {\n\n\t\treturn this.shader === shader;\n\n\t},\n\n\tsetShader: function ( shader ) {\n\n\t\tthis.shader = shader;\n\n\t\treturn this;\n\n\t},\n\n\tmergeDefines: function ( defines ) {\n\n\t\tfor ( var name in defines ) {\n\n\t\t\tthis.defines[ name ] = defines[ name ];\n\n\t\t}\n\n\t\treturn this.defines;\n\n\t},\n\n\tmergeUniform: function ( uniforms ) {\n\n\t\tfor ( var name in uniforms ) {\n\n\t\t\tthis.uniforms[ name ] = uniforms[ name ];\n\n\t\t}\n\n\t\treturn this.uniforms;\n\n\t},\n\n\tgetTextureEncodingFromMap: function ( map ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\tif ( encoding === LinearEncoding && this.context.gamma ) {\n\n\t\t\tencoding = GammaEncoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n};\n\nexport { NodeBuilder };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\n\nfunction BoolNode( value ) {\n\n\tInputNode.call( this, 'b' );\n\n\tthis.value = Boolean( value );\n\n}\n\nBoolNode.prototype = Object.create( InputNode.prototype );\nBoolNode.prototype.constructor = BoolNode;\nBoolNode.prototype.nodeType = \"Bool\";\n\nBoolNode.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate */ ) {\n\n\treturn builder.format( this.value, type, output );\n\n};\n\nBoolNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nBoolNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { BoolNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\n\nfunction IntNode( value ) {\n\n\tInputNode.call( this, 'i' );\n\n\tthis.value = Math.floor( value || 0 );\n\n}\n\nIntNode.prototype = Object.create( InputNode.prototype );\nIntNode.prototype.constructor = IntNode;\nIntNode.prototype.nodeType = \"Int\";\n\nIntNode.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate */ ) {\n\n\treturn builder.format( this.value, type, output );\n\n};\n\nIntNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nIntNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { IntNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Color } from '../../../../build/three.module.js';\n\nimport { InputNode } from '../core/InputNode.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction ColorNode( color, g, b ) {\n\n\tInputNode.call( this, 'c' );\n\n\tthis.value = color instanceof Color ? color : new Color( color || 0, g, b );\n\n}\n\nColorNode.prototype = Object.create( InputNode.prototype );\nColorNode.prototype.constructor = ColorNode;\nColorNode.prototype.nodeType = \"Color\";\n\nNodeUtils.addShortcuts( ColorNode.prototype, 'value', [ 'r', 'g', 'b' ] );\n\nColorNode.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate */ ) {\n\n\treturn builder.format( \"vec3( \" + this.r + \", \" + this.g + \", \" + this.b + \" )\", type, output );\n\n};\n\nColorNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value.copy( source );\n\n\treturn this;\n\n};\n\nColorNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.r = this.r;\n\t\tdata.g = this.g;\n\t\tdata.b = this.b;\n\n\t\tif ( this.readonly === true ) data.readonly = true;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ColorNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Matrix3 } from '../../../../build/three.module.js';\n\nimport { InputNode } from '../core/InputNode.js';\n\nfunction Matrix3Node( matrix ) {\n\n\tInputNode.call( this, 'm3' );\n\n\tthis.value = matrix || new Matrix3();\n\n}\n\nMatrix3Node.prototype = Object.create( InputNode.prototype );\nMatrix3Node.prototype.constructor = Matrix3Node;\nMatrix3Node.prototype.nodeType = \"Matrix3\";\n\nObject.defineProperties( Matrix3Node.prototype, {\n\n\telements: {\n\n\t\tset: function ( val ) {\n\n\t\t\tthis.value.elements = val;\n\n\t\t},\n\n\t\tget: function () {\n\n\t\t\treturn this.value.elements;\n\n\t\t}\n\n\t}\n\n} );\n\nMatrix3Node.prototype.generateReadonly = function ( builder, output, uuid, type/*, ns, needsUpdate */ ) {\n\n\treturn builder.format( \"mat3( \" + this.value.elements.join( \", \" ) + \" )\", type, output );\n\n};\n\n\nMatrix3Node.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.value.fromArray( source.elements );\n\n\treturn this;\n\n};\n\nMatrix3Node.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.elements = this.value.elements.concat();\n\n\t}\n\n\treturn data;\n\n};\n\nexport { Matrix3Node };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Matrix4 } from '../../../../build/three.module.js';\n\nimport { InputNode } from '../core/InputNode.js';\n\nfunction Matrix4Node( matrix ) {\n\n\tInputNode.call( this, 'm4' );\n\n\tthis.value = matrix || new Matrix4();\n\n}\n\nMatrix4Node.prototype = Object.create( InputNode.prototype );\nMatrix4Node.prototype.constructor = Matrix4Node;\nMatrix4Node.prototype.nodeType = \"Matrix4\";\n\nObject.defineProperties( Matrix4Node.prototype, {\n\n\telements: {\n\n\t\tset: function ( val ) {\n\n\t\t\tthis.value.elements = val;\n\n\t\t},\n\n\t\tget: function () {\n\n\t\t\treturn this.value.elements;\n\n\t\t}\n\n\t}\n\n} );\n\nMatrix4Node.prototype.generateReadonly = function ( builder, output, uuid, type /*, ns, needsUpdate */ ) {\n\n\treturn builder.format( \"mat4( \" + this.value.elements.join( \", \" ) + \" )\", type, output );\n\n};\n\nMatrix4Node.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.scope.value.fromArray( source.elements );\n\n\treturn this;\n\n};\n\nMatrix4Node.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.elements = this.value.elements.concat();\n\n\t}\n\n\treturn data;\n\n};\n\nexport { Matrix4Node };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\nimport { TextureNode } from './TextureNode.js';\n\nfunction ScreenNode( uv ) {\n\n\tTextureNode.call( this, undefined, uv );\n\n}\n\nScreenNode.prototype = Object.create( TextureNode.prototype );\nScreenNode.prototype.constructor = ScreenNode;\nScreenNode.prototype.nodeType = \"Screen\";\n\nScreenNode.prototype.getUnique = function () {\n\n\treturn true;\n\n};\n\nScreenNode.prototype.getTexture = function ( builder, output ) {\n\n\treturn InputNode.prototype.generate.call( this, builder, output, this.getUuid(), 't', 'renderTexture' );\n\n};\n\nexport { ScreenNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { InputNode } from '../core/InputNode.js';\nimport { PositionNode } from '../accessors/PositionNode.js';\nimport { OperatorNode } from '../math/OperatorNode.js';\nimport { TextureNode } from './TextureNode.js';\nimport { Matrix4Node } from './Matrix4Node.js';\n\nfunction ReflectorNode( mirror ) {\n\n\tTempNode.call( this, 'v4' );\n\n\tif ( mirror ) this.setMirror( mirror );\n\n}\n\nReflectorNode.prototype = Object.create( TempNode.prototype );\nReflectorNode.prototype.constructor = ReflectorNode;\nReflectorNode.prototype.nodeType = \"Reflector\";\n\nReflectorNode.prototype.setMirror = function ( mirror ) {\n\n\tthis.mirror = mirror;\n\n\tthis.textureMatrix = new Matrix4Node( this.mirror.material.uniforms.textureMatrix.value );\n\n\tthis.localPosition = new PositionNode( PositionNode.LOCAL );\n\n\tthis.uv = new OperatorNode( this.textureMatrix, this.localPosition, OperatorNode.MUL );\n\tthis.uvResult = new OperatorNode( null, this.uv, OperatorNode.ADD );\n\n\tthis.texture = new TextureNode( this.mirror.material.uniforms.tDiffuse.value, this.uv, null, true );\n\n};\n\nReflectorNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tthis.uvResult.a = this.offset;\n\t\tthis.texture.uv = this.offset ? this.uvResult : this.uv;\n\n\t\tif ( output === 'sampler2D' ) {\n\n\t\t\treturn this.texture.build( builder, output );\n\n\t\t}\n\n\t\treturn builder.format( this.texture.build( builder, this.type ), this.type, output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.ReflectorNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec4( 0.0 )', this.type, output );\n\n\t}\n\n};\n\nReflectorNode.prototype.copy = function ( source ) {\n\n\tInputNode.prototype.copy.call( this, source );\n\n\tthis.scope.mirror = source.mirror;\n\n\treturn this;\n\n};\n\nReflectorNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.mirror = this.mirror.uuid;\n\n\t\tif ( this.offset ) data.offset = this.offset.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ReflectorNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { InputNode } from '../core/InputNode.js';\n\nfunction PropertyNode( object, property, type ) {\n\n\tInputNode.call( this, type );\n\n\tthis.object = object;\n\tthis.property = property;\n\n}\n\nPropertyNode.prototype = Object.create( InputNode.prototype );\nPropertyNode.prototype.constructor = PropertyNode;\nPropertyNode.prototype.nodeType = \"Property\";\n\nObject.defineProperties( PropertyNode.prototype, {\n\n\tvalue: {\n\n\t\tget: function () {\n\n\t\t\treturn this.object[ this.property ];\n\n\t\t},\n\n\t\tset: function ( val ) {\n\n\t\t\tthis.object[ this.property ] = val;\n\n\t\t}\n\n\t}\n\n} );\n\nPropertyNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value;\n\t\tdata.property = this.property;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { PropertyNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Node } from '../../core/Node.js';\n\nfunction RawNode( value ) {\n\n\tNode.call( this, 'v4' );\n\n\tthis.value = value;\n\n}\n\nRawNode.prototype = Object.create( Node.prototype );\nRawNode.prototype.constructor = RawNode;\nRawNode.prototype.nodeType = \"Raw\";\n\nRawNode.prototype.generate = function ( builder ) {\n\n\tvar data = this.value.analyzeAndFlow( builder, this.type ),\n\t\tcode = data.code + '\\n';\n\n\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\tcode += 'gl_Position = ' + data.result + ';';\n\n\t} else {\n\n\t\tcode += 'gl_FragColor = ' + data.result + ';';\n\n\t}\n\n\treturn code;\n\n};\n\nRawNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nRawNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { RawNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tFrontSide,\n\tLessEqualDepth,\n\tNoColors,\n\tNormalBlending,\n\tShaderMaterial\n} from '../../../../build/three.module.js';\n\nimport { NodeBuilder } from '../core/NodeBuilder.js';\nimport { ColorNode } from '../inputs/ColorNode.js';\nimport { PositionNode } from '../accessors/PositionNode.js';\nimport { RawNode } from './nodes/RawNode.js';\n\nfunction NodeMaterial( vertex, fragment ) {\n\n\tShaderMaterial.call( this );\n\n\tvar scope = this;\n\n\tthis.vertex = vertex || new RawNode( new PositionNode( PositionNode.PROJECTION ) );\n\tthis.fragment = fragment || new RawNode( new ColorNode( 0xFF0000 ) );\n\n\tthis.updaters = [];\n\n\t// onBeforeCompile can't be in the prototype because onBeforeCompile.toString varies per material\n\n\tthis.onBeforeCompile = function ( shader, renderer ) {\n\n\t\tvar materialProperties = renderer.properties.get( this );\n\n\t\tif ( this.version !== materialProperties.__version ) {\n\n\t\t\tthis.build( { renderer: renderer } );\n\n\t\t\tshader.uniforms = this.uniforms;\n\t\t\tshader.vertexShader = this.vertexShader;\n\t\t\tshader.fragmentShader = this.fragmentShader;\n\n\t\t}\n\n\t};\n\n\t// it fix the programCache and share the code with others materials\n\n\tthis.onBeforeCompile.toString = function () {\n\n\t\treturn scope.needsCompile;\n\n\t};\n\n}\n\nNodeMaterial.prototype = Object.create( ShaderMaterial.prototype );\nNodeMaterial.prototype.constructor = NodeMaterial;\nNodeMaterial.prototype.type = \"NodeMaterial\";\n\nNodeMaterial.prototype.isNodeMaterial = true;\n\nObject.defineProperties( NodeMaterial.prototype, {\n\n\tproperties: {\n\n\t\tget: function () {\n\n\t\t\treturn this.fragment.properties;\n\n\t\t}\n\n\t},\n\n\tneedsUpdate: {\n\n\t\tset: function ( value ) {\n\n\t\t\tif ( value === true ) this.version ++;\n\t\t\tthis.needsCompile = value;\n\n\t\t},\n\n\t\tget: function () {\n\n\t\t\treturn this.needsCompile;\n\n\t\t}\n\n\t}\n\n} );\n\nNodeMaterial.prototype.updateFrame = function ( frame ) {\n\n\tfor ( var i = 0; i < this.updaters.length; ++ i ) {\n\n\t\tframe.updateNode( this.updaters[ i ] );\n\n\t}\n\n};\n\nNodeMaterial.prototype.build = function ( params ) {\n\n\tparams = params || {};\n\n\tvar builder = params.builder || new NodeBuilder();\n\n\tbuilder.setMaterial( this, params.renderer );\n\tbuilder.build( this.vertex, this.fragment );\n\n\tthis.vertexShader = builder.getCode( 'vertex' );\n\tthis.fragmentShader = builder.getCode( 'fragment' );\n\n\tthis.defines = builder.defines;\n\tthis.uniforms = builder.uniforms;\n\tthis.extensions = builder.extensions;\n\tthis.updaters = builder.updaters;\n\n\tthis.fog = builder.requires.fog;\n\tthis.lights = builder.requires.lights;\n\n\tthis.transparent = builder.requires.transparent || this.blending > NormalBlending;\n\n\treturn this;\n\n};\n\nNodeMaterial.prototype.copy = function ( source ) {\n\n\tvar uuid = this.uuid;\n\n\tfor ( var name in source ) {\n\n\t\tthis[ name ] = source[ name ];\n\n\t}\n\n\tthis.uuid = uuid;\n\n\tif ( source.userData !== undefined ) {\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t}\n\n\treturn this;\n\n};\n\nNodeMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\tif ( isRootObject ) {\n\n\t\tmeta = {\n\t\t\tnodes: {}\n\t\t};\n\n\t}\n\n\tif ( meta && ! meta.materials ) meta.materials = {};\n\n\tif ( ! meta.materials[ this.uuid ] ) {\n\n\t\tvar data = {};\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tmeta.materials[ data.uuid ] = data;\n\n\t\tif ( this.name !== \"\" ) data.name = this.name;\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.depthFunc !== LessEqualDepth ) data.depthFunc = this.depthFunc;\n\t\tif ( this.depthTest === false ) data.depthTest = this.depthTest;\n\t\tif ( this.depthWrite === false ) data.depthWrite = this.depthWrite;\n\n\t\tif ( this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\tdata.fog = this.fog;\n\t\tdata.lights = this.lights;\n\n\t\tdata.vertex = this.vertex.toJSON( meta ).uuid;\n\t\tdata.fragment = this.fragment.toJSON( meta ).uuid;\n\n\t}\n\n\tmeta.material = this.uuid;\n\n\treturn meta;\n\n};\n\nexport { NodeMaterial };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tMesh,\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tScene,\n\tWebGLRenderTarget\n} from '../../../../build/three.module.js';\n\nimport { NodeBuilder } from '../core/NodeBuilder.js';\nimport { NodeMaterial } from '../materials/NodeMaterial.js';\nimport { TextureNode } from './TextureNode.js';\n\nfunction RTTNode( width, height, input, options ) {\n\n\toptions = options || {};\n\n\tthis.input = input;\n\n\tthis.clear = options.clear !== undefined ? options.clear : true;\n\n\tthis.renderTarget = new WebGLRenderTarget( width, height, options );\n\n\tthis.material = new NodeMaterial();\n\n\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene = new Scene();\n\n\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), this.material );\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\n\tthis.scene.add( this.quad );\n\n\tthis.render = true;\n\n\tTextureNode.call( this, this.renderTarget.texture );\n\n}\n\nRTTNode.prototype = Object.create( TextureNode.prototype );\nRTTNode.prototype.constructor = RTTNode;\nRTTNode.prototype.nodeType = \"RTT\";\n\nRTTNode.prototype.build = function ( builder, output, uuid ) {\n\n\tvar rttBuilder = new NodeBuilder();\n\trttBuilder.nodes = builder.nodes;\n\trttBuilder.updaters = builder.updaters;\n\n\tthis.material.fragment.value = this.input;\n\tthis.material.build( { builder: rttBuilder } );\n\n\treturn TextureNode.prototype.build.call( this, builder, output, uuid );\n\n};\n\nRTTNode.prototype.updateFramesaveTo = function ( frame ) {\n\n\tthis.saveTo.render = false;\n\n\tif ( this.saveTo !== this.saveToCurrent ) {\n\n\t\tif ( this.saveToMaterial ) this.saveToMaterial.dispose();\n\n\t\tvar material = new NodeMaterial();\n\t\tmaterial.fragment.value = this;\n\t\tmaterial.build();\n\n\t\tvar scene = new Scene();\n\n\t\tvar quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), material );\n\t\tquad.frustumCulled = false; // Avoid getting clipped\n\t\tscene.add( quad );\n\n\t\tthis.saveToScene = scene;\n\t\tthis.saveToMaterial = material;\n\n\t}\n\n\tthis.saveToCurrent = this.saveTo;\n\n\tframe.renderer.setRenderTarget( this.saveTo.renderTarget );\n\tif ( this.saveTo.clear ) frame.renderer.clear();\n\tframe.renderer.render( this.saveToScene, this.camera );\n\n};\n\nRTTNode.prototype.updateFrame = function ( frame ) {\n\n\tif ( frame.renderer ) {\n\n\t\t// from the second frame\n\n\t\tif ( this.saveTo && this.saveTo.render === false ) {\n\n\t\t\tthis.updateFramesaveTo( frame );\n\n\t\t}\n\n\t\tif ( this.render ) {\n\n\t\t\tif ( this.material.uniforms.renderTexture ) {\n\n\t\t\t\tthis.material.uniforms.renderTexture.value = frame.renderTexture;\n\n\t\t\t}\n\n\t\t\tframe.renderer.setRenderTarget( this.renderTarget );\n\t\t\tif ( this.clear ) frame.renderer.clear();\n\t\t\tframe.renderer.render( this.scene, this.camera );\n\n\t\t}\n\n\t\t// first frame\n\n\t\tif ( this.saveTo && this.saveTo.render === true ) {\n\n\t\t\tthis.updateFramesaveTo( frame );\n\n\t\t}\n\n\t} else {\n\n\t\tconsole.warn( \"RTTNode need a renderer in NodeFrame\" );\n\n\t}\n\n};\n\nRTTNode.prototype.copy = function ( source ) {\n\n\tTextureNode.prototype.copy.call( this, source );\n\n\tthis.saveTo = source.saveTo;\n\n\treturn this;\n\n};\n\nRTTNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = TextureNode.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.saveTo ) data.saveTo = this.saveTo.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { RTTNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\n\nvar vertexDict = [ 'color', 'color2' ],\n\tfragmentDict = [ 'vColor', 'vColor2' ];\n\nfunction ColorsNode( index ) {\n\n\tTempNode.call( this, 'v4', { shared: false } );\n\n\tthis.index = index || 0;\n\n}\n\nColorsNode.prototype = Object.create( TempNode.prototype );\nColorsNode.prototype.constructor = ColorsNode;\nColorsNode.prototype.nodeType = \"Colors\";\n\nColorsNode.prototype.generate = function ( builder, output ) {\n\n\tbuilder.requires.color[ this.index ] = true;\n\n\tvar result = builder.isShader( 'vertex' ) ? vertexDict[ this.index ] : fragmentDict[ this.index ];\n\n\treturn builder.format( result, this.getType( builder ), output );\n\n};\n\nColorsNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.index = source.index;\n\n\treturn this;\n\n};\n\nColorsNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.index = this.index;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ColorsNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { PositionNode } from '../accessors/PositionNode.js';\n\nfunction CameraNode( scope, camera ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.setScope( scope || CameraNode.POSITION );\n\tthis.setCamera( camera );\n\n}\n\nCameraNode.Nodes = ( function () {\n\n\tvar depthColor = new FunctionNode( [\n\t\t\"float depthColor( float mNear, float mFar ) {\",\n\n\t\t\"\t#ifdef USE_LOGDEPTHBUF_EXT\",\n\n\t\t\"\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;\",\n\n\t\t\"\t#else\",\n\n\t\t\"\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;\",\n\n\t\t\"\t#endif\",\n\n\t\t\"\treturn 1.0 - smoothstep( mNear, mFar, depth );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\treturn {\n\t\tdepthColor: depthColor\n\t};\n\n} )();\n\nCameraNode.POSITION = 'position';\nCameraNode.DEPTH = 'depth';\nCameraNode.TO_VERTEX = 'toVertex';\n\nCameraNode.prototype = Object.create( TempNode.prototype );\nCameraNode.prototype.constructor = CameraNode;\nCameraNode.prototype.nodeType = \"Camera\";\n\nCameraNode.prototype.setCamera = function ( camera ) {\n\n\tthis.camera = camera;\n\tthis.updateFrame = camera !== undefined ? this.onUpdateFrame : undefined;\n\n};\n\nCameraNode.prototype.setScope = function ( scope ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase CameraNode.DEPTH:\n\n\t\t\tdelete this.near;\n\t\t\tdelete this.far;\n\n\t\t\tbreak;\n\n\t}\n\n\tthis.scope = scope;\n\n\tswitch ( scope ) {\n\n\t\tcase CameraNode.DEPTH:\n\n\t\t\tvar camera = this.camera;\n\n\t\t\tthis.near = new FloatNode( camera ? camera.near : 1 );\n\t\t\tthis.far = new FloatNode( camera ? camera.far : 1200 );\n\n\t\t\tbreak;\n\n\t}\n\n};\n\nCameraNode.prototype.getType = function ( /* builder */ ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase CameraNode.DEPTH:\n\n\t\t\treturn 'f';\n\n\t}\n\n\treturn this.type;\n\n};\n\nCameraNode.prototype.getUnique = function ( /* builder */ ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase CameraNode.DEPTH:\n\t\tcase CameraNode.TO_VERTEX:\n\n\t\t\treturn true;\n\n\t}\n\n\treturn false;\n\n};\n\nCameraNode.prototype.getShared = function ( /* builder */ ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase CameraNode.POSITION:\n\n\t\t\treturn false;\n\n\t}\n\n\treturn true;\n\n};\n\nCameraNode.prototype.generate = function ( builder, output ) {\n\n\tvar result;\n\n\tswitch ( this.scope ) {\n\n\t\tcase CameraNode.POSITION:\n\n\t\t\tresult = 'cameraPosition';\n\n\t\t\tbreak;\n\n\t\tcase CameraNode.DEPTH:\n\n\t\t\tvar depthColor = builder.include( CameraNode.Nodes.depthColor );\n\n\t\t\tresult = depthColor + '( ' + this.near.build( builder, 'f' ) + ', ' + this.far.build( builder, 'f' ) + ' )';\n\n\t\t\tbreak;\n\n\t\tcase CameraNode.TO_VERTEX:\n\n\t\t\tresult = 'normalize( ' + new PositionNode( PositionNode.WORLD ).build( builder, 'v3' ) + ' - cameraPosition )';\n\n\t\t\tbreak;\n\n\t}\n\n\treturn builder.format( result, this.getType( builder ), output );\n\n};\n\nCameraNode.prototype.onUpdateFrame = function ( /* frame */ ) {\n\n\tswitch ( this.scope ) {\n\n\t\tcase CameraNode.DEPTH:\n\n\t\t\tvar camera = this.camera;\n\n\t\t\tthis.near.value = camera.near;\n\t\t\tthis.far.value = camera.far;\n\n\t\t\tbreak;\n\n\t}\n\n};\n\nCameraNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.setScope( source.scope );\n\n\tif ( source.camera ) {\n\n\t\tthis.setCamera( source.camera );\n\n\t}\n\n\tswitch ( source.scope ) {\n\n\t\tcase CameraNode.DEPTH:\n\n\t\t\tthis.near.number = source.near;\n\t\t\tthis.far.number = source.far;\n\n\t\t\tbreak;\n\n\t}\n\n\treturn this;\n\n};\n\nCameraNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.scope = this.scope;\n\n\t\tif ( this.camera ) data.camera = this.camera.uuid;\n\n\t\tswitch ( this.scope ) {\n\n\t\t\tcase CameraNode.DEPTH:\n\n\t\t\t\tdata.near = this.near.value;\n\t\t\t\tdata.far = this.far.value;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn data;\n\n};\n\nexport { CameraNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\n\nfunction LightNode( scope ) {\n\n\tTempNode.call( this, 'v3', { shared: false } );\n\n\tthis.scope = scope || LightNode.TOTAL;\n\n}\n\nLightNode.TOTAL = 'total';\n\nLightNode.prototype = Object.create( TempNode.prototype );\nLightNode.prototype.constructor = LightNode;\nLightNode.prototype.nodeType = \"Light\";\n\nLightNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isCache( 'light' ) ) {\n\n\t\treturn builder.format( 'reflectedLight.directDiffuse', this.type, output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.LightNode is only compatible in \\\"light\\\" channel.\" );\n\n\t\treturn builder.format( 'vec3( 0.0 )', this.type, output );\n\n\t}\n\n};\n\nLightNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.scope = source.scope;\n\n\treturn this;\n\n};\n\nLightNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.scope = this.scope;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { LightNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Vector2 } from '../../../../build/three.module.js';\n\nimport { Vector2Node } from '../inputs/Vector2Node.js';\n\nfunction ResolutionNode() {\n\n\tVector2Node.call( this );\n\n\tthis.size = new Vector2();\n\n}\n\nResolutionNode.prototype = Object.create( Vector2Node.prototype );\nResolutionNode.prototype.constructor = ResolutionNode;\nResolutionNode.prototype.nodeType = \"Resolution\";\n\nResolutionNode.prototype.updateFrame = function ( frame ) {\n\n\tif ( frame.renderer ) {\n\n\t\tframe.renderer.getSize( this.size );\n\n\t\tvar pixelRatio = frame.renderer.getPixelRatio();\n\n\t\tthis.x = this.size.width * pixelRatio;\n\t\tthis.y = this.size.height * pixelRatio;\n\n\t} else {\n\n\t\tconsole.warn( \"ResolutionNode need a renderer in NodeFrame\" );\n\n\t}\n\n};\n\nResolutionNode.prototype.copy = function ( source ) {\n\n\tVector2Node.prototype.copy.call( this, source );\n\n\tthis.renderer = source.renderer;\n\n\treturn this;\n\n};\n\nResolutionNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.renderer = this.renderer.uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ResolutionNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { ResolutionNode } from './ResolutionNode.js';\n\nfunction ScreenUVNode( resolution ) {\n\n\tTempNode.call( this, 'v2' );\n\n\tthis.resolution = resolution || new ResolutionNode();\n\n}\n\nScreenUVNode.prototype = Object.create( TempNode.prototype );\nScreenUVNode.prototype.constructor = ScreenUVNode;\nScreenUVNode.prototype.nodeType = \"ScreenUV\";\n\nScreenUVNode.prototype.generate = function ( builder, output ) {\n\n\tvar result;\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tresult = '( gl_FragCoord.xy / ' + this.resolution.build( builder, 'v2' ) + ')';\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.ScreenUVNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\tresult = 'vec2( 0.0 )';\n\n\t}\n\n\treturn builder.format( result, this.getType( builder ), output );\n\n};\n\nScreenUVNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.resolution = source.resolution;\n\n\treturn this;\n\n};\n\nScreenUVNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.resolution = this.resolution.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ScreenUVNode };\n\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\n\nfunction CondNode( a, b, op, ifNode, elseNode ) {\n\n\tTempNode.call( this );\n\n\tthis.a = a;\n\tthis.b = b;\n\n\tthis.op = op;\n\n\tthis.ifNode = ifNode;\n\tthis.elseNode = elseNode;\n\n}\n\nCondNode.EQUAL = '==';\nCondNode.NOT_EQUAL = '!=';\nCondNode.GREATER = '>';\nCondNode.GREATER_EQUAL = '>=';\nCondNode.LESS = '<';\nCondNode.LESS_EQUAL = '<=';\n\nCondNode.prototype = Object.create( TempNode.prototype );\nCondNode.prototype.constructor = CondNode;\nCondNode.prototype.nodeType = \"Cond\";\n\nCondNode.prototype.getType = function ( builder ) {\n\n\tif ( this.ifNode ) {\n\n\t\tvar ifType = this.ifNode.getType( builder );\n\t\tvar elseType = this.elseNode.getType( builder );\n\n\t\tif ( builder.getTypeLength( elseType ) > builder.getTypeLength( ifType ) ) {\n\n\t\t\treturn elseType;\n\n\t\t}\n\n\t\treturn ifType;\n\n\t}\n\n\treturn 'b';\n\n};\n\nCondNode.prototype.getCondType = function ( builder ) {\n\n\tif ( builder.getTypeLength( this.b.getType( builder ) ) > builder.getTypeLength( this.a.getType( builder ) ) ) {\n\n\t\treturn this.b.getType( builder );\n\n\t}\n\n\treturn this.a.getType( builder );\n\n};\n\nCondNode.prototype.generate = function ( builder, output ) {\n\n\tvar type = this.getType( builder ),\n\t\tcondType = this.getCondType( builder ),\n\t\ta = this.a.build( builder, condType ),\n\t\tb = this.b.build( builder, condType ),\n\t\tcode;\n\n\tif ( this.ifNode ) {\n\n\t\tvar ifCode = this.ifNode.build( builder, type ),\n\t\t\telseCode = this.elseNode.build( builder, type );\n\n\t\tcode = '( ' + [ a, this.op, b, '?', ifCode, ':', elseCode ].join( ' ' ) + ' )';\n\n\t} else {\n\n\t\tcode = '( ' + a + ' ' + this.op + ' ' + b + ' )';\n\n\t}\n\n\treturn builder.format( code, this.getType( builder ), output );\n\n};\n\nCondNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.a = source.a;\n\tthis.b = source.b;\n\n\tthis.op = source.op;\n\n\tthis.ifNode = source.ifNode;\n\tthis.elseNode = source.elseNode;\n\n\treturn this;\n\n};\n\nCondNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.a = this.a.toJSON( meta ).uuid;\n\t\tdata.b = this.b.toJSON( meta ).uuid;\n\n\t\tdata.op = this.op;\n\n\t\tif ( data.ifNode ) data.ifNode = this.ifNode.toJSON( meta ).uuid;\n\t\tif ( data.elseNode ) data.elseNode = this.elseNode.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { CondNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { UVNode } from '../accessors/UVNode.js';\n\nfunction NoiseNode( uv ) {\n\n\tTempNode.call( this, 'f' );\n\n\tthis.uv = uv || new UVNode();\n\n}\n\nNoiseNode.prototype = Object.create( TempNode.prototype );\nNoiseNode.prototype.constructor = NoiseNode;\nNoiseNode.prototype.nodeType = \"Noise\";\n\nNoiseNode.Nodes = ( function () {\n\n\tvar snoise = new FunctionNode( [\n\t\t\"float snoise(vec2 co) {\",\n\n\t\t\"\treturn fract( sin( dot( co.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\treturn {\n\t\tsnoise: snoise\n\t};\n\n} )();\n\nNoiseNode.prototype.generate = function ( builder, output ) {\n\n\tvar snoise = builder.include( NoiseNode.Nodes.snoise );\n\n\treturn builder.format( snoise + '( ' + this.uv.build( builder, 'v2' ) + ' )', this.getType( builder ), output );\n\n};\n\nNoiseNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.uv = source.uv;\n\n\treturn this;\n\n};\n\nNoiseNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { NoiseNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { UVNode } from '../accessors/UVNode.js';\n\nfunction CheckerNode( uv ) {\n\n\tTempNode.call( this, 'f' );\n\n\tthis.uv = uv || new UVNode();\n\n}\n\nCheckerNode.prototype = Object.create( TempNode.prototype );\nCheckerNode.prototype.constructor = CheckerNode;\nCheckerNode.prototype.nodeType = \"Noise\";\n\nCheckerNode.Nodes = ( function () {\n\n\t// https://github.com/mattdesl/glsl-checker/blob/master/index.glsl\n\n\tvar checker = new FunctionNode( [\n\t\t\"float checker( vec2 uv ) {\",\n\n\t\t\"\tfloat cx = floor( uv.x );\",\n\t\t\"\tfloat cy = floor( uv.y ); \",\n\t\t\"\tfloat result = mod( cx + cy, 2.0 );\",\n\n\t\t\"\treturn sign( result );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\treturn {\n\t\tchecker: checker\n\t};\n\n} )();\n\nCheckerNode.prototype.generate = function ( builder, output ) {\n\n\tvar snoise = builder.include( CheckerNode.Nodes.checker );\n\n\treturn builder.format( snoise + '( ' + this.uv.build( builder, 'v2' ) + ' )', this.getType( builder ), output );\n\n};\n\nCheckerNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.uv = source.uv;\n\n\treturn this;\n\n};\n\nCheckerNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { CheckerNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tBackSide\n} from '../../../../build/three.module.js';\n\nimport { TempNode } from '../core/TempNode.js';\nimport { Vector2Node } from '../inputs/Vector2Node.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { UVNode } from '../accessors/UVNode.js';\nimport { NormalNode } from '../accessors/NormalNode.js';\nimport { PositionNode } from '../accessors/PositionNode.js';\n\nfunction NormalMapNode( value, scale ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.value = value;\n\tthis.scale = scale || new Vector2Node( 1, 1 );\n\n}\n\nNormalMapNode.Nodes = ( function () {\n\n\tvar perturbNormal2Arb = new FunctionNode(\n\n\t\t// Per-Pixel Tangent Space Normal Mapping\n\t\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\t\t`vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 vUv, vec2 normalScale ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = map * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tif ( dot( cross( S, T ), N ) < 0.0 ) mapN.xy *= - 1.0;\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}`, null, { derivatives: true } );\n\n\treturn {\n\t\tperturbNormal2Arb: perturbNormal2Arb\n\t};\n\n} )();\n\nNormalMapNode.prototype = Object.create( TempNode.prototype );\nNormalMapNode.prototype.constructor = NormalMapNode;\nNormalMapNode.prototype.nodeType = \"NormalMap\";\n\nNormalMapNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tvar perturbNormal2Arb = builder.include( NormalMapNode.Nodes.perturbNormal2Arb );\n\n\t\tthis.normal = this.normal || new NormalNode();\n\t\tthis.position = this.position || new PositionNode( PositionNode.VIEW );\n\t\tthis.uv = this.uv || new UVNode();\n\n\t\tvar scale = this.scale.build( builder, 'v2' );\n\n\t\tif ( builder.material.side === BackSide ) {\n\n\t\t\tscale = '-' + scale;\n\n\t\t}\n\n\t\treturn builder.format( perturbNormal2Arb + '( -' + this.position.build( builder, 'v3' ) + ', ' +\n\t\t\tthis.normal.build( builder, 'v3' ) + ', ' +\n\t\t\tthis.value.build( builder, 'v3' ) + ', ' +\n\t\t\tthis.uv.build( builder, 'v2' ) + ', ' +\n\t\t\tscale + ' )', this.getType( builder ), output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.NormalMapNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec3( 0.0 )', this.getType( builder ), output );\n\n\t}\n\n};\n\nNormalMapNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\tthis.scale = source.scale;\n\n\treturn this;\n\n};\n\nNormalMapNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\t\tdata.scale = this.scale.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { NormalMapNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { NormalNode } from '../accessors/NormalNode.js';\nimport { PositionNode } from '../accessors/PositionNode.js';\n\nfunction BumpMapNode( value, scale ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.value = value;\n\tthis.scale = scale || new FloatNode( 1 );\n\n\tthis.toNormalMap = false;\n\n}\n\nBumpMapNode.Nodes = ( function () {\n\n\tvar dHdxy_fwd = new FunctionNode( [\n\n\t\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\t\t\"vec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {\",\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\t\"\tvec2 dSTdx = dFdx( vUv );\",\n\t\t\"\tvec2 dSTdy = dFdy( vUv );\",\n\n\t\t\"\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\",\n\t\t\"\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\",\n\t\t\"\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\",\n\n\t\t\"\treturn vec2( dBx, dBy );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ), null, { derivatives: true } );\n\n\tvar perturbNormalArb = new FunctionNode( [\n\n\t\t\"vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\",\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\t\"\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\",\n\t\t\"\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\",\n\t\t\"\tvec3 vN = surf_norm;\", // normalized\n\n\t\t\"\tvec3 R1 = cross( vSigmaY, vN );\",\n\t\t\"\tvec3 R2 = cross( vN, vSigmaX );\",\n\n\t\t\"\tfloat fDet = dot( vSigmaX, R1 );\",\n\n\t\t\"\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\",\n\n\t\t\"\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\",\n\n\t\t\"\treturn normalize( abs( fDet ) * surf_norm - vGrad );\",\n\n\t\t\"}\"\n\n\t].join( \"\\n\" ), [ dHdxy_fwd ], { derivatives: true } );\n\n\tvar bumpToNormal = new FunctionNode( [\n\t\t\"vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {\",\n\n\t\t\"\tvec2 dSTdx = dFdx( uv );\",\n\t\t\"\tvec2 dSTdy = dFdy( uv );\",\n\n\t\t\"\tfloat Hll = texture2D( bumpMap, uv ).x;\",\n\t\t\"\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;\",\n\t\t\"\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;\",\n\n\t\t\"\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ), null, { derivatives: true } );\n\n\treturn {\n\t\tdHdxy_fwd: dHdxy_fwd,\n\t\tperturbNormalArb: perturbNormalArb,\n\t\tbumpToNormal: bumpToNormal\n\t};\n\n} )();\n\nBumpMapNode.prototype = Object.create( TempNode.prototype );\nBumpMapNode.prototype.constructor = BumpMapNode;\nBumpMapNode.prototype.nodeType = \"BumpMap\";\n\nBumpMapNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tif ( this.toNormalMap ) {\n\n\t\t\tvar bumpToNormal = builder.include( BumpMapNode.Nodes.bumpToNormal );\n\n\t\t\treturn builder.format( bumpToNormal + '( ' + this.value.build( builder, 'sampler2D' ) + ', ' +\n\t\t\t\tthis.value.uv.build( builder, 'v2' ) + ', ' +\n\t\t\t\tthis.scale.build( builder, 'f' ) + ' )', this.getType( builder ), output );\n\n\t\t} else {\n\n\t\t\tvar derivativeHeight = builder.include( BumpMapNode.Nodes.dHdxy_fwd ),\n\t\t\t\tperturbNormalArb = builder.include( BumpMapNode.Nodes.perturbNormalArb );\n\n\t\t\tthis.normal = this.normal || new NormalNode();\n\t\t\tthis.position = this.position || new PositionNode( PositionNode.VIEW );\n\n\t\t\tvar derivativeHeightCode = derivativeHeight + '( ' + this.value.build( builder, 'sampler2D' ) + ', ' +\n\t\t\t\tthis.value.uv.build( builder, 'v2' ) + ', ' +\n\t\t\t\tthis.scale.build( builder, 'f' ) + ' )';\n\n\t\t\treturn builder.format( perturbNormalArb + '( -' + this.position.build( builder, 'v3' ) + ', ' +\n\t\t\t\tthis.normal.build( builder, 'v3' ) + ', ' +\n\t\t\t\tderivativeHeightCode + ' )', this.getType( builder ), output );\n\n\t\t}\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.BumpMapNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec3( 0.0 )', this.getType( builder ), output );\n\n\t}\n\n};\n\nBumpMapNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\tthis.scale = source.scale;\n\n\treturn this;\n\n};\n\nBumpMapNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\t\tdata.scale = this.scale.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { BumpMapNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Node } from '../core/Node.js';\n\nfunction BypassNode( code, value ) {\n\n\tNode.call( this );\n\n\tthis.code = code;\n\tthis.value = value;\n\n}\n\nBypassNode.prototype = Object.create( Node.prototype );\nBypassNode.prototype.constructor = BypassNode;\nBypassNode.prototype.nodeType = \"Bypass\";\n\nBypassNode.prototype.getType = function ( builder ) {\n\n\tif ( this.value ) {\n\n\t\treturn this.value.getType( builder );\n\n\t} else if ( builder.isShader( 'fragment' ) ) {\n\n\t\treturn 'f';\n\n\t}\n\n\treturn 'void';\n\n};\n\nBypassNode.prototype.generate = function ( builder, output ) {\n\n\tvar code = this.code.build( builder, output ) + ';';\n\n\tbuilder.addNodeCode( code );\n\n\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\tif ( this.value ) {\n\n\t\t\treturn this.value.build( builder, output );\n\n\t\t}\n\n\t} else {\n\n\t\treturn this.value ? this.value.build( builder, output ) : builder.format( '0.0', 'f', output );\n\n\t}\n\n};\n\nBypassNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\tthis.code = source.code;\n\tthis.value = source.value;\n\n\treturn this;\n\n};\n\nBypassNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.code = this.code.toJSON( meta ).uuid;\n\n\t\tif ( this.value ) data.value = this.value.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { BypassNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nvar inputs = NodeUtils.elements;\n\nfunction JoinNode( x, y, z, w ) {\n\n\tTempNode.call( this, 'f' );\n\n\tthis.x = x;\n\tthis.y = y;\n\tthis.z = z;\n\tthis.w = w;\n\n}\n\nJoinNode.prototype = Object.create( TempNode.prototype );\nJoinNode.prototype.constructor = JoinNode;\nJoinNode.prototype.nodeType = \"Join\";\n\nJoinNode.prototype.getNumElements = function () {\n\n\tvar i = inputs.length;\n\n\twhile ( i -- ) {\n\n\t\tif ( this[ inputs[ i ] ] !== undefined ) {\n\n\t\t\t++ i;\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn Math.max( i, 2 );\n\n};\n\nJoinNode.prototype.getType = function ( builder ) {\n\n\treturn builder.getTypeFromLength( this.getNumElements() );\n\n};\n\nJoinNode.prototype.generate = function ( builder, output ) {\n\n\tvar type = this.getType( builder ),\n\t\tlength = this.getNumElements(),\n\t\toutputs = [];\n\n\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\tvar elm = this[ inputs[ i ] ];\n\n\t\toutputs.push( elm ? elm.build( builder, 'f' ) : '0.0' );\n\n\t}\n\n\tvar code = ( length > 1 ? builder.getConstructorFromLength( length ) : '' ) + '( ' + outputs.join( ', ' ) + ' )';\n\n\treturn builder.format( code, type, output );\n\n};\n\nJoinNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tfor ( var prop in source.inputs ) {\n\n\t\tthis[ prop ] = source.inputs[ prop ];\n\n\t}\n\n\treturn this;\n\n};\n\nJoinNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.inputs = {};\n\n\t\tvar length = this.getNumElements();\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar elm = this[ inputs[ i ] ];\n\n\t\t\tif ( elm ) {\n\n\t\t\t\tdata.inputs[ inputs[ i ] ] = elm.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t}\n\n\n\t}\n\n\treturn data;\n\n};\n\nexport { JoinNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Node } from '../core/Node.js';\n\nfunction SwitchNode( node, components ) {\n\n\tNode.call( this );\n\n\tthis.node = node;\n\tthis.components = components || 'x';\n\n}\n\nSwitchNode.prototype = Object.create( Node.prototype );\nSwitchNode.prototype.constructor = SwitchNode;\nSwitchNode.prototype.nodeType = \"Switch\";\n\nSwitchNode.prototype.getType = function ( builder ) {\n\n\treturn builder.getTypeFromLength( this.components.length );\n\n};\n\nSwitchNode.prototype.generate = function ( builder, output ) {\n\n\tvar type = this.node.getType( builder ),\n\t\tnode = this.node.build( builder, type ),\n\t\tinputLength = builder.getTypeLength( type ) - 1;\n\n\tif ( inputLength > 0 ) {\n\n\t\t// get max length\n\n\t\tvar outputLength = 0,\n\t\t\tcomponents = builder.colorToVectorProperties( this.components );\n\n\t\tvar i, len = components.length;\n\n\t\tfor ( i = 0; i < len; i ++ ) {\n\n\t\t\toutputLength = Math.max( outputLength, builder.getIndexByElement( components.charAt( i ) ) );\n\n\t\t}\n\n\t\tif ( outputLength > inputLength ) outputLength = inputLength;\n\n\t\t// split\n\n\t\tnode += '.';\n\n\t\tfor ( i = 0; i < len; i ++ ) {\n\n\t\t\tvar idx = builder.getIndexByElement( components.charAt( i ) );\n\n\t\t\tif ( idx > outputLength ) idx = outputLength;\n\n\t\t\tnode += builder.getElementByIndex( idx );\n\n\t\t}\n\n\t\treturn builder.format( node, this.getType( builder ), output );\n\n\t} else {\n\n\t\t// join\n\n\t\treturn builder.format( node, type, output );\n\n\t}\n\n};\n\nSwitchNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\tthis.node = source.node;\n\tthis.components = source.components;\n\n\treturn this;\n\n};\n\nSwitchNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.node = this.node.toJSON( meta ).uuid;\n\t\tdata.components = this.components;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { SwitchNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { NodeLib } from '../core/NodeLib.js';\n\nfunction TimerNode( scale, scope, timeScale ) {\n\n\tFloatNode.call( this );\n\n\tthis.scale = scale !== undefined ? scale : 1;\n\tthis.scope = scope || TimerNode.GLOBAL;\n\n\tthis.timeScale = timeScale !== undefined ? timeScale : scale !== undefined;\n\n}\n\nTimerNode.GLOBAL = 'global';\nTimerNode.LOCAL = 'local';\nTimerNode.DELTA = 'delta';\n\nTimerNode.prototype = Object.create( FloatNode.prototype );\nTimerNode.prototype.constructor = TimerNode;\nTimerNode.prototype.nodeType = \"Timer\";\n\nTimerNode.prototype.getReadonly = function () {\n\n\t// never use TimerNode as readonly but aways as \"uniform\"\n\n\treturn false;\n\n};\n\nTimerNode.prototype.getUnique = function () {\n\n\t// share TimerNode \"uniform\" input if is used on more time with others TimerNode\n\n\treturn this.timeScale && ( this.scope === TimerNode.GLOBAL || this.scope === TimerNode.DELTA );\n\n};\n\nTimerNode.prototype.updateFrame = function ( frame ) {\n\n\tvar scale = this.timeScale ? this.scale : 1;\n\n\tswitch ( this.scope ) {\n\n\t\tcase TimerNode.LOCAL:\n\n\t\t\tthis.value += frame.delta * scale;\n\n\t\t\tbreak;\n\n\t\tcase TimerNode.DELTA:\n\n\t\t\tthis.value = frame.delta * scale;\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.value = frame.time * scale;\n\n\t}\n\n};\n\nTimerNode.prototype.copy = function ( source ) {\n\n\tFloatNode.prototype.copy.call( this, source );\n\n\tthis.scope = source.scope;\n\tthis.scale = source.scale;\n\n\tthis.timeScale = source.timeScale;\n\n\treturn this;\n\n};\n\nTimerNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.scope = this.scope;\n\t\tdata.scale = this.scale;\n\n\t\tdata.timeScale = this.timeScale;\n\n\t}\n\n\treturn data;\n\n};\n\nNodeLib.addKeyword( 'time', function () {\n\n\treturn new TimerNode();\n\n} );\n\nexport { TimerNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Vector3 } from '../../../../build/three.module.js';\n\nimport { Vector3Node } from '../inputs/Vector3Node.js';\n\nfunction VelocityNode( target, params ) {\n\n\tVector3Node.call( this );\n\n\tthis.params = {};\n\n\tthis.velocity = new Vector3();\n\n\tthis.setTarget( target );\n\tthis.setParams( params );\n\n}\n\nVelocityNode.prototype = Object.create( Vector3Node.prototype );\nVelocityNode.prototype.constructor = VelocityNode;\nVelocityNode.prototype.nodeType = \"Velocity\";\n\nVelocityNode.prototype.getReadonly = function ( /*builder*/ ) {\n\n\treturn false;\n\n};\n\nVelocityNode.prototype.setParams = function ( params ) {\n\n\tswitch ( this.params.type ) {\n\n\t\tcase \"elastic\":\n\n\t\t\tdelete this.moment;\n\n\t\t\tdelete this.speed;\n\t\t\tdelete this.springVelocity;\n\n\t\t\tdelete this.lastVelocity;\n\n\t\t\tbreak;\n\n\t}\n\n\tthis.params = params || {};\n\n\tswitch ( this.params.type ) {\n\n\t\tcase \"elastic\":\n\n\t\t\tthis.moment = new Vector3();\n\n\t\t\tthis.speed = new Vector3();\n\t\t\tthis.springVelocity = new Vector3();\n\n\t\t\tthis.lastVelocity = new Vector3();\n\n\t\t\tbreak;\n\n\t}\n\n};\n\nVelocityNode.prototype.setTarget = function ( target ) {\n\n\tif ( this.target ) {\n\n\t\tdelete this.position;\n\t\tdelete this.oldPosition;\n\n\t}\n\n\tthis.target = target;\n\n\tif ( target ) {\n\n\t\tthis.position = target.getWorldPosition( this.position || new Vector3() );\n\t\tthis.oldPosition = this.position.clone();\n\n\t}\n\n};\n\nVelocityNode.prototype.updateFrameVelocity = function ( /*frame*/ ) {\n\n\tif ( this.target ) {\n\n\t\tthis.position = this.target.getWorldPosition( this.position || new Vector3() );\n\t\tthis.velocity.subVectors( this.position, this.oldPosition );\n\t\tthis.oldPosition.copy( this.position );\n\n\t}\n\n};\n\nVelocityNode.prototype.updateFrame = function ( frame ) {\n\n\tthis.updateFrameVelocity( frame );\n\n\tswitch ( this.params.type ) {\n\n\t\tcase \"elastic\":\n\n\t\t\t// convert to real scale: 0 at 1 values\n\t\t\tvar deltaFps = frame.delta * ( this.params.fps || 60 );\n\n\t\t\tvar spring = Math.pow( this.params.spring, deltaFps ),\n\t\t\t\tdamping = Math.pow( this.params.damping, deltaFps );\n\n\t\t\t// fix relative frame-rate\n\t\t\tthis.velocity.multiplyScalar( Math.exp( - this.params.damping * deltaFps ) );\n\n\t\t\t// elastic\n\t\t\tthis.velocity.add( this.springVelocity );\n\t\t\tthis.velocity.add( this.speed.multiplyScalar( damping ).multiplyScalar( 1 - spring ) );\n\n\t\t\t// speed\n\t\t\tthis.speed.subVectors( this.velocity, this.lastVelocity );\n\n\t\t\t// spring velocity\n\t\t\tthis.springVelocity.add( this.speed );\n\t\t\tthis.springVelocity.multiplyScalar( spring );\n\n\t\t\t// moment\n\t\t\tthis.moment.add( this.springVelocity );\n\n\t\t\t// damping\n\t\t\tthis.moment.multiplyScalar( damping );\n\n\t\t\tthis.lastVelocity.copy( this.velocity );\n\t\t\tthis.value.copy( this.moment );\n\n\t\t\tbreak;\n\n\t\tdefault:\n\n\t\t\tthis.value.copy( this.velocity );\n\n\t}\n\n};\n\nVelocityNode.prototype.copy = function ( source ) {\n\n\tVector3Node.prototype.copy.call( this, source );\n\n\tif ( source.target ) this.setTarget( source.target );\n\n\tthis.setParams( source.params );\n\n\treturn this;\n\n};\n\nVelocityNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tif ( this.target ) data.target = this.target.uuid;\n\n\t\t// clone params\n\t\tdata.params = JSON.parse( JSON.stringify( this.params ) );\n\n\t}\n\n\treturn data;\n\n};\n\nexport { VelocityNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { ExpressionNode } from '../core/ExpressionNode.js';\nimport { Matrix3Node } from '../inputs/Matrix3Node.js';\nimport { UVNode } from '../accessors/UVNode.js';\n\nfunction UVTransformNode( uv, position ) {\n\n\tExpressionNode.call( this, \"( uvTransform * vec3( uvNode, 1 ) ).xy\", \"vec2\" );\n\n\tthis.uv = uv || new UVNode();\n\tthis.position = position || new Matrix3Node();\n\n}\n\nUVTransformNode.prototype = Object.create( ExpressionNode.prototype );\nUVTransformNode.prototype.constructor = UVTransformNode;\nUVTransformNode.prototype.nodeType = \"UVTransform\";\n\nUVTransformNode.prototype.generate = function ( builder, output ) {\n\n\tthis.keywords[ \"uvNode\" ] = this.uv;\n\tthis.keywords[ \"uvTransform\" ] = this.position;\n\n\treturn ExpressionNode.prototype.generate.call( this, builder, output );\n\n};\n\nUVTransformNode.prototype.setUvTransform = function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\tcx = cx !== undefined ? cx : .5;\n\tcy = cy !== undefined ? cy : .5;\n\n\tthis.position.value.setUvTransform( tx, ty, sx, sy, rotation, cx, cy );\n\n};\n\nUVTransformNode.prototype.copy = function ( source ) {\n\n\tExpressionNode.prototype.copy.call( this, source );\n\n\tthis.uv = source.uv;\n\tthis.position = source.position;\n\n\treturn this;\n\n};\n\nUVTransformNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\t\tdata.position = this.position.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { UVTransformNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { FloatNode } from '../inputs/FloatNode.js';\n\nfunction MaxMIPLevelNode( texture ) {\n\n\tFloatNode.call( this );\n\n\tthis.texture = texture;\n\n\tthis.maxMIPLevel = 0;\n\n}\n\nMaxMIPLevelNode.prototype = Object.create( FloatNode.prototype );\nMaxMIPLevelNode.prototype.constructor = MaxMIPLevelNode;\nMaxMIPLevelNode.prototype.nodeType = \"MaxMIPLevel\";\n\nObject.defineProperties( MaxMIPLevelNode.prototype, {\n\n\tvalue: {\n\n\t\tget: function () {\n\n\t\t\tif ( this.maxMIPLevel === 0 ) {\n\n\t\t\t\tvar image = this.texture.value.image;\n\n\t\t\t\tif ( Array.isArray( image ) ) image = image[ 0 ];\n\n\t\t\t\tthis.maxMIPLevel = image !== undefined ? Math.log( Math.max( image.width, image.height ) ) * Math.LOG2E : 0;\n\n\t\t\t}\n\n\t\t\treturn this.maxMIPLevel;\n\n\t\t},\n\n\t\tset: function () { }\n\n\t}\n\n} );\n\nMaxMIPLevelNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.texture = this.texture.uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { MaxMIPLevelNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { MaxMIPLevelNode } from './MaxMIPLevelNode.js';\n\nfunction SpecularMIPLevelNode( roughness, texture ) {\n\n\tTempNode.call( this, 'f' );\n\n\tthis.roughness = roughness;\n\tthis.texture = texture;\n\n\tthis.maxMIPLevel = undefined;\n\n}\n\nSpecularMIPLevelNode.Nodes = ( function () {\n\n\tvar getSpecularMIPLevel = new FunctionNode( [\n\t\t// taken from here: http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\t\t\"float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {\",\n\n\t\t\"\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\",\n\t\t\"\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\",\n\n\t\t// clamp to allowable LOD ranges.\n\t\t\"\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\treturn {\n\t\tgetSpecularMIPLevel: getSpecularMIPLevel\n\t};\n\n} )();\n\nSpecularMIPLevelNode.prototype = Object.create( TempNode.prototype );\nSpecularMIPLevelNode.prototype.constructor = SpecularMIPLevelNode;\nSpecularMIPLevelNode.prototype.nodeType = \"SpecularMIPLevel\";\n\nSpecularMIPLevelNode.prototype.setTexture = function ( texture ) {\n\n\tthis.texture = texture;\n\n\treturn this;\n\n};\n\nSpecularMIPLevelNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tthis.maxMIPLevel = this.maxMIPLevel || new MaxMIPLevelNode();\n\t\tthis.maxMIPLevel.texture = this.texture;\n\n\t\tvar getSpecularMIPLevel = builder.include( SpecularMIPLevelNode.Nodes.getSpecularMIPLevel );\n\n\t\treturn builder.format( getSpecularMIPLevel + '( ' + this.roughness.build( builder, 'f' ) + ', ' + this.maxMIPLevel.build( builder, 'f' ) + ' )', this.type, output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.SpecularMIPLevelNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( '0.0', this.type, output );\n\n\t}\n\n};\n\nSpecularMIPLevelNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.texture = source.texture;\n\tthis.roughness = source.roughness;\n\n\treturn this;\n\n};\n\nSpecularMIPLevelNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.texture = this.texture;\n\t\tdata.roughness = this.roughness;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { SpecularMIPLevelNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\n\nfunction SubSlotNode( slots ) {\n\n\tTempNode.call( this );\n\n\tthis.slots = slots || {};\n\n}\n\nSubSlotNode.prototype = Object.create( TempNode.prototype );\nSubSlotNode.prototype.constructor = SubSlotNode;\nSubSlotNode.prototype.nodeType = \"SubSlot\";\n\nSubSlotNode.prototype.getType = function ( builder, output ) {\n\n\treturn output;\n\n};\n\nSubSlotNode.prototype.generate = function ( builder, output ) {\n\n\tif ( this.slots[ builder.slot ] ) {\n\n\t\treturn this.slots[ builder.slot ].build( builder, output );\n\n\t}\n\n\treturn builder.format( '0.0', 'f', output );\n\n};\n\nSubSlotNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tfor ( var prop in source.slots ) {\n\n\t\tthis.slots[ prop ] = source.slots[ prop ];\n\n\t}\n\n\treturn this;\n\n};\n\nSubSlotNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.slots = {};\n\n\t\tfor ( var prop in this.slots ) {\n\n\t\t\tvar slot = this.slots[ prop ];\n\n\t\t\tif ( slot ) {\n\n\t\t\t\tdata.slots[ prop ] = slot.toJSON( meta ).uuid;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn data;\n\n};\n\nexport { SubSlotNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { Vector2 } from '../../../../build/three.module.js';\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { FloatNode } from '../inputs/FloatNode.js';\nimport { Vector2Node } from '../inputs/Vector2Node.js';\nimport { UVNode } from '../accessors/UVNode.js';\n\nfunction BlurNode( value, uv, radius, size ) {\n\n\tTempNode.call( this, 'v4' );\n\n\tthis.value = value;\n\tthis.uv = uv || new UVNode();\n\tthis.radius = radius || new Vector2Node( 1, 1 );\n\n\tthis.size = size;\n\n\tthis.blurX = true;\n\tthis.blurY = true;\n\n\tthis.horizontal = new FloatNode( 1 / 64 );\n\tthis.vertical = new FloatNode( 1 / 64 );\n\n}\n\nBlurNode.Nodes = ( function () {\n\n\tvar blurX = new FunctionNode( [\n\t\t\"vec4 blurX( sampler2D tex, vec2 uv, float s ) {\",\n\t\t\"\tvec4 sum = vec4( 0.0 );\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;\",\n\t\t\"\treturn sum * .667;\",\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar blurY = new FunctionNode( [\n\t\t\"vec4 blurY( sampler2D tex, vec2 uv, float s ) {\",\n\t\t\"\tvec4 sum = vec4( 0.0 );\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;\",\n\t\t\"\tsum += texture2D( tex, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;\",\n\t\t\"\treturn sum * .667;\",\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\treturn {\n\t\tblurX: blurX,\n\t\tblurY: blurY\n\t};\n\n} )();\n\n\nBlurNode.prototype = Object.create( TempNode.prototype );\nBlurNode.prototype.constructor = BlurNode;\nBlurNode.prototype.nodeType = \"Blur\";\n\nBlurNode.prototype.updateFrame = function ( /* frame */ ) {\n\n\tif ( this.size ) {\n\n\t\tthis.horizontal.value = this.radius.x / this.size.x;\n\t\tthis.vertical.value = this.radius.y / this.size.y;\n\n\t} else if ( this.value.value && this.value.value.image ) {\n\n\t\tvar image = this.value.value.image;\n\n\t\tthis.horizontal.value = this.radius.x / image.width;\n\t\tthis.vertical.value = this.radius.y / image.height;\n\n\t}\n\n};\n\nBlurNode.prototype.generate = function ( builder, output ) {\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\tvar blurCode = [], code;\n\n\t\tvar blurX = builder.include( BlurNode.Nodes.blurX ),\n\t\t\tblurY = builder.include( BlurNode.Nodes.blurY );\n\n\t\tif ( this.blurX ) {\n\n\t\t\tblurCode.push( blurX + '( ' + this.value.build( builder, 'sampler2D' ) + ', ' + this.uv.build( builder, 'v2' ) + ', ' + this.horizontal.build( builder, 'f' ) + ' )' );\n\n\t\t}\n\n\t\tif ( this.blurY ) {\n\n\t\t\tblurCode.push( blurY + '( ' + this.value.build( builder, 'sampler2D' ) + ', ' + this.uv.build( builder, 'v2' ) + ', ' + this.vertical.build( builder, 'f' ) + ' )' );\n\n\t\t}\n\n\t\tif ( blurCode.length == 2 ) code = '( ' + blurCode.join( ' + ' ) + ' / 2.0 )';\n\t\telse if ( blurCode.length ) code = '( ' + blurCode[ 0 ] + ' )';\n\t\telse code = 'vec4( 0.0 )';\n\n\t\treturn builder.format( code, this.getType( builder ), output );\n\n\t} else {\n\n\t\tconsole.warn( \"THREE.BlurNode is not compatible with \" + builder.shader + \" shader.\" );\n\n\t\treturn builder.format( 'vec4( 0.0 )', this.getType( builder ), output );\n\n\t}\n\n};\n\nBlurNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.value = source.value;\n\tthis.uv = source.uv;\n\tthis.radius = source.radius;\n\n\tif ( source.size !== undefined ) this.size = new Vector2( source.size.x, source.size.y );\n\n\tthis.blurX = source.blurX;\n\tthis.blurY = source.blurY;\n\n\treturn this;\n\n};\n\nBlurNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.value = this.value.toJSON( meta ).uuid;\n\t\tdata.uv = this.uv.toJSON( meta ).uuid;\n\t\tdata.radius = this.radius.toJSON( meta ).uuid;\n\n\t\tif ( this.size ) data.size = { x: this.size.x, y: this.size.y };\n\n\t\tdata.blurX = this.blurX;\n\t\tdata.blurY = this.blurY;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { BlurNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { ConstNode } from '../core/ConstNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\n\nfunction LuminanceNode( rgb ) {\n\n\tTempNode.call( this, 'f' );\n\n\tthis.rgb = rgb;\n\n}\n\nLuminanceNode.Nodes = ( function () {\n\n\tvar LUMA = new ConstNode( \"vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )\" );\n\n\tvar luminance = new FunctionNode( [\n\t\t// Algorithm from Chapter 10 of Graphics Shaders\n\t\t\"float luminance( vec3 rgb ) {\",\n\n\t\t\"\treturn dot( rgb, LUMA );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ), [ LUMA ] );\n\n\treturn {\n\t\tLUMA: LUMA,\n\t\tluminance: luminance\n\t};\n\n} )();\n\nLuminanceNode.prototype = Object.create( TempNode.prototype );\nLuminanceNode.prototype.constructor = LuminanceNode;\nLuminanceNode.prototype.nodeType = \"Luminance\";\n\nLuminanceNode.prototype.generate = function ( builder, output ) {\n\n\tvar luminance = builder.include( LuminanceNode.Nodes.luminance );\n\n\treturn builder.format( luminance + '( ' + this.rgb.build( builder, 'v3' ) + ' )', this.getType( builder ), output );\n\n};\n\nLuminanceNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.rgb = source.rgb;\n\n\treturn this;\n\n};\n\nLuminanceNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.rgb = this.rgb.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { LuminanceNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { TempNode } from '../core/TempNode.js';\nimport { FunctionNode } from '../core/FunctionNode.js';\nimport { LuminanceNode } from './LuminanceNode.js';\n\nfunction ColorAdjustmentNode( rgb, adjustment, method ) {\n\n\tTempNode.call( this, 'v3' );\n\n\tthis.rgb = rgb;\n\tthis.adjustment = adjustment;\n\n\tthis.method = method || ColorAdjustmentNode.SATURATION;\n\n}\n\nColorAdjustmentNode.Nodes = ( function () {\n\n\tvar hue = new FunctionNode( [\n\t\t\"vec3 hue(vec3 rgb, float adjustment) {\",\n\n\t\t\"\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);\",\n\t\t\"\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);\",\n\n\t\t\"\tvec3 yiq = RGBtoYIQ * rgb;\",\n\n\t\t\"\tfloat hue = atan(yiq.z, yiq.y) + adjustment;\",\n\t\t\"\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);\",\n\n\t\t\"\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\tvar saturation = new FunctionNode( [\n\t\t// Algorithm from Chapter 16 of OpenGL Shading Language\n\t\t\"vec3 saturation(vec3 rgb, float adjustment) {\",\n\n\t\t\"\tvec3 intensity = vec3( luminance( rgb ) );\",\n\n\t\t\"\treturn mix( intensity, rgb, adjustment );\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ), [ LuminanceNode.Nodes.luminance ] ); // include LuminanceNode function\n\n\tvar vibrance = new FunctionNode( [\n\t\t// Shader by Evan Wallace adapted by @lo-th\n\t\t\"vec3 vibrance(vec3 rgb, float adjustment) {\",\n\n\t\t\"\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;\",\n\n\t\t\"\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));\",\n\t\t\"\tfloat amt = (mx - average) * (-3.0 * adjustment);\",\n\n\t\t\"\treturn mix(rgb.rgb, vec3(mx), amt);\",\n\n\t\t\"}\"\n\t].join( \"\\n\" ) );\n\n\treturn {\n\t\thue: hue,\n\t\tsaturation: saturation,\n\t\tvibrance: vibrance\n\t};\n\n} )();\n\nColorAdjustmentNode.SATURATION = 'saturation';\nColorAdjustmentNode.HUE = 'hue';\nColorAdjustmentNode.VIBRANCE = 'vibrance';\nColorAdjustmentNode.BRIGHTNESS = 'brightness';\nColorAdjustmentNode.CONTRAST = 'contrast';\n\nColorAdjustmentNode.prototype = Object.create( TempNode.prototype );\nColorAdjustmentNode.prototype.constructor = ColorAdjustmentNode;\nColorAdjustmentNode.prototype.nodeType = \"ColorAdjustment\";\n\nColorAdjustmentNode.prototype.generate = function ( builder, output ) {\n\n\tvar rgb = this.rgb.build( builder, 'v3' ),\n\t\tadjustment = this.adjustment.build( builder, 'f' );\n\n\tswitch ( this.method ) {\n\n\t\tcase ColorAdjustmentNode.BRIGHTNESS:\n\n\t\t\treturn builder.format( '( ' + rgb + ' + ' + adjustment + ' )', this.getType( builder ), output );\n\n\t\t\tbreak;\n\n\t\tcase ColorAdjustmentNode.CONTRAST:\n\n\t\t\treturn builder.format( '( ' + rgb + ' * ' + adjustment + ' )', this.getType( builder ), output );\n\n\t\t\tbreak;\n\n\t}\n\n\tvar method = builder.include( ColorAdjustmentNode.Nodes[ this.method ] );\n\n\treturn builder.format( method + '( ' + rgb + ', ' + adjustment + ' )', this.getType( builder ), output );\n\n};\n\nColorAdjustmentNode.prototype.copy = function ( source ) {\n\n\tTempNode.prototype.copy.call( this, source );\n\n\tthis.rgb = source.rgb;\n\tthis.adjustment = source.adjustment;\n\tthis.method = source.method;\n\n\treturn this;\n\n};\n\nColorAdjustmentNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tdata.rgb = this.rgb.toJSON( meta ).uuid;\n\t\tdata.adjustment = this.adjustment.toJSON( meta ).uuid;\n\t\tdata.method = this.method;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { ColorAdjustmentNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tUniformsLib,\n\tUniformsUtils\n} from '../../../../../build/three.module.js';\n\nimport { Node } from '../../core/Node.js';\nimport { ColorNode } from '../../inputs/ColorNode.js';\n\nfunction SpriteNode() {\n\n\tNode.call( this );\n\n\tthis.color = new ColorNode( 0xEEEEEE );\n\tthis.spherical = true;\n\n}\n\nSpriteNode.prototype = Object.create( Node.prototype );\nSpriteNode.prototype.constructor = SpriteNode;\nSpriteNode.prototype.nodeType = \"Sprite\";\n\nSpriteNode.prototype.build = function ( builder ) {\n\n\tvar output;\n\n\tbuilder.define( 'SPRITE' );\n\n\tbuilder.requires.lights = false;\n\tbuilder.requires.transparent = this.alpha !== undefined;\n\n\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\tvar position = this.position ? this.position.analyzeAndFlow( builder, 'v3', { cache: 'position' } ) : undefined;\n\n\t\tbuilder.mergeUniform( UniformsUtils.merge( [\n\t\t\tUniformsLib.fog\n\t\t] ) );\n\n\t\tbuilder.addParsCode( [\n\t\t\t\"#include <fog_pars_vertex>\",\n\t\t\t\"#include <logdepthbuf_pars_vertex>\",\n\t\t\t\"#include <clipping_planes_pars_vertex>\"\n\t\t].join( \"\\n\" ) );\n\n\t\toutput = [\n\t\t\t\"#include <clipping_planes_fragment>\",\n\t\t\t\"#include <begin_vertex>\"\n\t\t];\n\n\t\tif ( position ) {\n\n\t\t\toutput.push(\n\t\t\t\tposition.code,\n\t\t\t\tposition.result ? \"transformed = \" + position.result + \";\" : ''\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <project_vertex>\",\n\t\t\t\"#include <fog_vertex>\",\n\n\t\t\t'mat4 modelViewMtx = modelViewMatrix;',\n\t\t\t'mat4 modelMtx = modelMatrix;',\n\n\t\t\t// ignore position from modelMatrix (use vary position)\n\t\t\t'modelMtx[3][0] = 0.0;',\n\t\t\t'modelMtx[3][1] = 0.0;',\n\t\t\t'modelMtx[3][2] = 0.0;'\n\t\t);\n\n\t\tif ( ! this.spherical ) {\n\n\t\t\toutput.push(\n\t\t\t\t'modelMtx[1][1] = 1.0;'\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t// http://www.geeks3d.com/20140807/billboarding-vertex-shader-glsl/\n\t\t\t// First colunm.\n\t\t\t'modelViewMtx[0][0] = 1.0;',\n\t\t\t'modelViewMtx[0][1] = 0.0;',\n\t\t\t'modelViewMtx[0][2] = 0.0;'\n\t\t);\n\n\t\tif ( this.spherical ) {\n\n\t\t\toutput.push(\n\t\t\t\t// Second colunm.\n\t\t\t\t'modelViewMtx[1][0] = 0.0;',\n\t\t\t\t'modelViewMtx[1][1] = 1.0;',\n\t\t\t\t'modelViewMtx[1][2] = 0.0;'\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t// Thrid colunm.\n\t\t\t'modelViewMtx[2][0] = 0.0;',\n\t\t\t'modelViewMtx[2][1] = 0.0;',\n\t\t\t'modelViewMtx[2][2] = 1.0;',\n\n\t\t\t\"gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );\",\n\n\t\t\t\"#include <logdepthbuf_vertex>\",\n\t\t\t\"#include <clipping_planes_vertex>\",\n\t\t\t\"#include <fog_vertex>\"\n\t\t);\n\n\t} else {\n\n\t\tbuilder.addParsCode( [\n\t\t\t\"#include <fog_pars_fragment>\",\n\t\t\t\"#include <logdepthbuf_pars_fragment>\",\n\t\t\t\"#include <clipping_planes_pars_fragment>\"\n\t\t].join( \"\\n\" ) );\n\n\t\tbuilder.addCode( [\n\t\t\t\"#include <clipping_planes_fragment>\",\n\t\t\t\"#include <logdepthbuf_fragment>\"\n\t\t].join( \"\\n\" ) );\n\n\t\t// analyze all nodes to reuse generate codes\n\n\t\tif ( this.mask ) this.mask.analyze( builder );\n\n\t\tif ( this.alpha ) this.alpha.analyze( builder );\n\n\t\tthis.color.analyze( builder, { slot: 'color' } );\n\n\t\t// build code\n\n\t\tvar mask = this.mask ? this.mask.flow( builder, 'b' ) : undefined,\n\t\t\talpha = this.alpha ? this.alpha.flow( builder, 'f' ) : undefined,\n\t\t\tcolor = this.color.flow( builder, 'c', { slot: 'color' } ),\n\t\t\toutput = [];\n\n\t\tif ( mask ) {\n\n\t\t\toutput.push(\n\t\t\t\tmask.code,\n\t\t\t\t'if ( ! ' + mask.result + ' ) discard;'\n\t\t\t);\n\n\t\t}\n\n\t\tif ( alpha ) {\n\n\t\t\toutput.push(\n\t\t\t\talpha.code,\n\t\t\t\t'#ifdef ALPHATEST',\n\n\t\t\t\t'if ( ' + alpha.result + ' <= ALPHATEST ) discard;',\n\n\t\t\t\t'#endif',\n\t\t\t\tcolor.code,\n\t\t\t\t\"gl_FragColor = vec4( \" + color.result + \", \" + alpha.result + \" );\"\n\t\t\t);\n\n\t\t} else {\n\n\t\t\toutput.push(\n\t\t\t\tcolor.code,\n\t\t\t\t\"gl_FragColor = vec4( \" + color.result + \", 1.0 );\"\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <tonemapping_fragment>\",\n\t\t\t\"#include <encodings_fragment>\",\n\t\t\t\"#include <fog_fragment>\"\n\t\t);\n\n\t}\n\n\treturn output.join( \"\\n\" );\n\n};\n\nSpriteNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\t// vertex\n\n\tif ( source.position ) this.position = source.position;\n\n\t// fragment\n\n\tthis.color = source.color;\n\n\tif ( source.spherical !== undefined ) this.spherical = source.spherical;\n\n\tif ( source.mask ) this.mask = source.mask;\n\n\tif ( source.alpha ) this.alpha = source.alpha;\n\n\treturn this;\n\n};\n\nSpriteNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\t// vertex\n\n\t\tif ( this.position ) data.position = this.position.toJSON( meta ).uuid;\n\n\t\t// fragment\n\n\t\tdata.color = this.color.toJSON( meta ).uuid;\n\n\t\tif ( this.spherical === false ) data.spherical = false;\n\n\t\tif ( this.mask ) data.mask = this.mask.toJSON( meta ).uuid;\n\n\t\tif ( this.alpha ) data.alpha = this.alpha.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { SpriteNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tUniformsLib,\n\tUniformsUtils\n} from '../../../../../build/three.module.js';\n\nimport { Node } from '../../core/Node.js';\nimport { ColorNode } from '../../inputs/ColorNode.js';\nimport { FloatNode } from '../../inputs/FloatNode.js';\n\nfunction PhongNode() {\n\n\tNode.call( this );\n\n\tthis.color = new ColorNode( 0xEEEEEE );\n\tthis.specular = new ColorNode( 0x111111 );\n\tthis.shininess = new FloatNode( 30 );\n\n}\n\nPhongNode.prototype = Object.create( Node.prototype );\nPhongNode.prototype.constructor = PhongNode;\nPhongNode.prototype.nodeType = \"Phong\";\n\nPhongNode.prototype.build = function ( builder ) {\n\n\tvar code;\n\n\tbuilder.define( 'PHONG' );\n\n\tbuilder.requires.lights = true;\n\n\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\tvar position = this.position ? this.position.analyzeAndFlow( builder, 'v3', { cache: 'position' } ) : undefined;\n\n\t\tbuilder.mergeUniform( UniformsUtils.merge( [\n\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights\n\n\t\t] ) );\n\n\t\tbuilder.addParsCode( [\n\t\t\t\"varying vec3 vViewPosition;\",\n\n\t\t\t\"#ifndef FLAT_SHADED\",\n\n\t\t\t\"\tvarying vec3 vNormal;\",\n\n\t\t\t\"#endif\",\n\n\t\t\t//\"#include <encodings_pars_fragment>\", // encoding functions\n\t\t\t\"#include <fog_pars_vertex>\",\n\t\t\t\"#include <morphtarget_pars_vertex>\",\n\t\t\t\"#include <skinning_pars_vertex>\",\n\t\t\t\"#include <shadowmap_pars_vertex>\",\n\t\t\t\"#include <logdepthbuf_pars_vertex>\",\n\t\t\t\"#include <clipping_planes_pars_vertex>\"\n\t\t].join( \"\\n\" ) );\n\n\t\tvar output = [\n\t\t\t\"#include <beginnormal_vertex>\",\n\t\t\t\"#include <morphnormal_vertex>\",\n\t\t\t\"#include <skinbase_vertex>\",\n\t\t\t\"#include <skinnormal_vertex>\",\n\t\t\t\"#include <defaultnormal_vertex>\",\n\n\t\t\t\"#ifndef FLAT_SHADED\", // normal computed with derivatives when FLAT_SHADED\n\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#include <begin_vertex>\"\n\t\t];\n\n\t\tif ( position ) {\n\n\t\t\toutput.push(\n\t\t\t\tposition.code,\n\t\t\t\tposition.result ? \"transformed = \" + position.result + \";\" : ''\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"\t#include <morphtarget_vertex>\",\n\t\t\t\"\t#include <skinning_vertex>\",\n\t\t\t\"\t#include <project_vertex>\",\n\t\t\t\"\t#include <fog_vertex>\",\n\t\t\t\"\t#include <logdepthbuf_vertex>\",\n\t\t\t\"\t#include <clipping_planes_vertex>\",\n\n\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\n\n\t\t\t\"\t#include <worldpos_vertex>\",\n\t\t\t\"\t#include <shadowmap_vertex>\",\n\t\t\t\"\t#include <fog_vertex>\"\n\t\t);\n\n\t\tcode = output.join( \"\\n\" );\n\n\t} else {\n\n\t\t// analyze all nodes to reuse generate codes\n\n\t\tif ( this.mask ) this.mask.analyze( builder );\n\n\t\tthis.color.analyze( builder, { slot: 'color' } );\n\t\tthis.specular.analyze( builder );\n\t\tthis.shininess.analyze( builder );\n\n\t\tif ( this.alpha ) this.alpha.analyze( builder );\n\n\t\tif ( this.normal ) this.normal.analyze( builder );\n\n\t\tif ( this.light ) this.light.analyze( builder, { cache: 'light' } );\n\n\t\tif ( this.ao ) this.ao.analyze( builder );\n\t\tif ( this.ambient ) this.ambient.analyze( builder );\n\t\tif ( this.shadow ) this.shadow.analyze( builder );\n\t\tif ( this.emissive ) this.emissive.analyze( builder, { slot: 'emissive' } );\n\n\t\tif ( this.environment ) this.environment.analyze( builder, { slot: 'environment' } );\n\t\tif ( this.environmentAlpha && this.environment ) this.environmentAlpha.analyze( builder );\n\n\t\t// build code\n\n\t\tvar mask = this.mask ? this.mask.flow( builder, 'b' ) : undefined;\n\n\t\tvar color = this.color.flow( builder, 'c', { slot: 'color' } );\n\t\tvar specular = this.specular.flow( builder, 'c' );\n\t\tvar shininess = this.shininess.flow( builder, 'f' );\n\n\t\tvar alpha = this.alpha ? this.alpha.flow( builder, 'f' ) : undefined;\n\n\t\tvar normal = this.normal ? this.normal.flow( builder, 'v3' ) : undefined;\n\n\t\tvar light = this.light ? this.light.flow( builder, 'v3', { cache: 'light' } ) : undefined;\n\n\t\tvar ao = this.ao ? this.ao.flow( builder, 'f' ) : undefined;\n\t\tvar ambient = this.ambient ? this.ambient.flow( builder, 'c' ) : undefined;\n\t\tvar shadow = this.shadow ? this.shadow.flow( builder, 'c' ) : undefined;\n\t\tvar emissive = this.emissive ? this.emissive.flow( builder, 'c', { slot: 'emissive' } ) : undefined;\n\n\t\tvar environment = this.environment ? this.environment.flow( builder, 'c', { slot: 'environment' } ) : undefined;\n\t\tvar environmentAlpha = this.environmentAlpha && this.environment ? this.environmentAlpha.flow( builder, 'f' ) : undefined;\n\n\t\tbuilder.requires.transparent = alpha !== undefined;\n\n\t\tbuilder.addParsCode( [\n\t\t\t\"#include <fog_pars_fragment>\",\n\t\t\t\"#include <bsdfs>\",\n\t\t\t\"#include <lights_pars_begin>\",\n\t\t\t\"#include <lights_phong_pars_fragment>\",\n\t\t\t\"#include <shadowmap_pars_fragment>\",\n\t\t\t\"#include <logdepthbuf_pars_fragment>\"\n\t\t].join( \"\\n\" ) );\n\n\t\tvar output = [\n\t\t\t// prevent undeclared normal\n\t\t\t\"#include <normal_fragment_begin>\",\n\n\t\t\t// prevent undeclared material\n\t\t\t\"\tBlinnPhongMaterial material;\"\n\t\t];\n\n\t\tif ( mask ) {\n\n\t\t\toutput.push(\n\t\t\t\tmask.code,\n\t\t\t\t'if ( ! ' + mask.result + ' ) discard;'\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\tcolor.code,\n\t\t\t\"\tvec3 diffuseColor = \" + color.result + \";\",\n\t\t\t\"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\n\n\t\t\t\"#include <logdepthbuf_fragment>\",\n\n\t\t\tspecular.code,\n\t\t\t\"\tvec3 specular = \" + specular.result + \";\",\n\n\t\t\tshininess.code,\n\t\t\t\"\tfloat shininess = max( 0.0001, \" + shininess.result + \" );\",\n\n\t\t\t\"\tfloat specularStrength = 1.0;\" // Ignored in MaterialNode ( replace to specular )\n\t\t);\n\n\t\tif ( alpha ) {\n\n\t\t\toutput.push(\n\t\t\t\talpha.code,\n\t\t\t\t'#ifdef ALPHATEST',\n\n\t\t\t\t'if ( ' + alpha.result + ' <= ALPHATEST ) discard;',\n\n\t\t\t\t'#endif'\n\t\t\t);\n\n\t\t}\n\n\t\tif ( normal ) {\n\n\t\t\toutput.push(\n\t\t\t\tnormal.code,\n\t\t\t\t'normal = ' + normal.result + ';'\n\t\t\t);\n\n\t\t}\n\n\t\t// optimization for now\n\n\t\toutput.push( 'material.diffuseColor = ' + ( light ? 'vec3( 1.0 )' : 'diffuseColor' ) + ';' );\n\n\t\toutput.push(\n\t\t\t// accumulation\n\t\t\t'material.specularColor = specular;',\n\t\t\t'material.specularShininess = shininess;',\n\t\t\t'material.specularStrength = specularStrength;',\n\n\t\t\t\"#include <lights_fragment_begin>\",\n\t\t\t\"#include <lights_fragment_end>\"\n\t\t);\n\n\t\tif ( light ) {\n\n\t\t\toutput.push(\n\t\t\t\tlight.code,\n\t\t\t\t\"reflectedLight.directDiffuse = \" + light.result + \";\"\n\t\t\t);\n\n\t\t\t// apply color\n\n\t\t\toutput.push(\n\t\t\t\t\"reflectedLight.directDiffuse *= diffuseColor;\",\n\t\t\t\t\"reflectedLight.indirectDiffuse *= diffuseColor;\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( ao ) {\n\n\t\t\toutput.push(\n\t\t\t\tao.code,\n\t\t\t\t\"reflectedLight.indirectDiffuse *= \" + ao.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( ambient ) {\n\n\t\t\toutput.push(\n\t\t\t\tambient.code,\n\t\t\t\t\"reflectedLight.indirectDiffuse += \" + ambient.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( shadow ) {\n\n\t\t\toutput.push(\n\t\t\t\tshadow.code,\n\t\t\t\t\"reflectedLight.directDiffuse *= \" + shadow.result + \";\",\n\t\t\t\t\"reflectedLight.directSpecular *= \" + shadow.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( emissive ) {\n\n\t\t\toutput.push(\n\t\t\t\temissive.code,\n\t\t\t\t\"reflectedLight.directDiffuse += \" + emissive.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push( \"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;\" );\n\n\t\tif ( environment ) {\n\n\t\t\toutput.push( environment.code );\n\n\t\t\tif ( environmentAlpha ) {\n\n\t\t\t\toutput.push(\n\t\t\t\t\tenvironmentAlpha.code,\n\t\t\t\t\t\"outgoingLight = mix( outgoingLight, \" + environment.result + \", \" + environmentAlpha.result + \" );\"\n\t\t\t\t);\n\n\t\t\t} else {\n\n\t\t\t\toutput.push( \"outgoingLight = \" + environment.result + \";\" );\n\n\t\t\t}\n\n\t\t}\n\t\t/*\n\t\tswitch( builder.material.combine ) {\n\n\t\t\tcase ENVMAP_BLENDING_MULTIPLY:\n\n\t\t\t\t//output.push( \"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;\" );\n\t\t\t\t//outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t\t\t\tbreak;\n\n\n\t\t}\n\t*/\n\n\t\tif ( alpha ) {\n\n\t\t\toutput.push( \"gl_FragColor = vec4( outgoingLight, \" + alpha.result + \" );\" );\n\n\t\t} else {\n\n\t\t\toutput.push( \"gl_FragColor = vec4( outgoingLight, 1.0 );\" );\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <tonemapping_fragment>\",\n\t\t\t\"#include <encodings_fragment>\",\n\t\t\t\"#include <fog_fragment>\",\n\t\t\t\"#include <premultiplied_alpha_fragment>\"\n\t\t);\n\n\t\tcode = output.join( \"\\n\" );\n\n\t}\n\n\treturn code;\n\n};\n\nPhongNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\t// vertex\n\n\tif ( source.position ) this.position = source.position;\n\n\t// fragment\n\n\tthis.color = source.color;\n\tthis.specular = source.specular;\n\tthis.shininess = source.shininess;\n\n\tif ( source.mask ) this.mask = source.mask;\n\n\tif ( source.alpha ) this.alpha = source.alpha;\n\n\tif ( source.normal ) this.normal = source.normal;\n\n\tif ( source.light ) this.light = source.light;\n\tif ( source.shadow ) this.shadow = source.shadow;\n\n\tif ( source.ao ) this.ao = source.ao;\n\n\tif ( source.emissive ) this.emissive = source.emissive;\n\tif ( source.ambient ) this.ambient = source.ambient;\n\n\tif ( source.environment ) this.environment = source.environment;\n\tif ( source.environmentAlpha ) this.environmentAlpha = source.environmentAlpha;\n\n\treturn this;\n\n};\n\nPhongNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\t// vertex\n\n\t\tif ( this.position ) data.position = this.position.toJSON( meta ).uuid;\n\n\t\t// fragment\n\n\t\tdata.color = this.color.toJSON( meta ).uuid;\n\t\tdata.specular = this.specular.toJSON( meta ).uuid;\n\t\tdata.shininess = this.shininess.toJSON( meta ).uuid;\n\n\t\tif ( this.mask ) data.mask = this.mask.toJSON( meta ).uuid;\n\n\t\tif ( this.alpha ) data.alpha = this.alpha.toJSON( meta ).uuid;\n\n\t\tif ( this.normal ) data.normal = this.normal.toJSON( meta ).uuid;\n\n\t\tif ( this.light ) data.light = this.light.toJSON( meta ).uuid;\n\n\t\tif ( this.ao ) data.ao = this.ao.toJSON( meta ).uuid;\n\t\tif ( this.ambient ) data.ambient = this.ambient.toJSON( meta ).uuid;\n\t\tif ( this.shadow ) data.shadow = this.shadow.toJSON( meta ).uuid;\n\t\tif ( this.emissive ) data.emissive = this.emissive.toJSON( meta ).uuid;\n\n\t\tif ( this.environment ) data.environment = this.environment.toJSON( meta ).uuid;\n\t\tif ( this.environmentAlpha ) data.environmentAlpha = this.environmentAlpha.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { PhongNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tUniformsLib,\n\tUniformsUtils\n} from '../../../../../build/three.module.js';\n\nimport { Node } from '../../core/Node.js';\nimport { ExpressionNode } from '../../core/ExpressionNode.js';\nimport { ColorNode } from '../../inputs/ColorNode.js';\nimport { FloatNode } from '../../inputs/FloatNode.js';\nimport { SpecularMIPLevelNode } from '../../utils/SpecularMIPLevelNode.js';\n\nfunction StandardNode() {\n\n\tNode.call( this );\n\n\tthis.color = new ColorNode( 0xFFFFFF );\n\tthis.roughness = new FloatNode( 1 );\n\tthis.metalness = new FloatNode( 0 );\n\n}\n\nStandardNode.prototype = Object.create( Node.prototype );\nStandardNode.prototype.constructor = StandardNode;\nStandardNode.prototype.nodeType = \"Standard\";\n\nStandardNode.prototype.build = function ( builder ) {\n\n\tvar code;\n\n\tbuilder.define( 'STANDARD' );\n\n\tvar useClearcoat = this.clearcoat || this.clearcoatRoughness || this.clearCoatNormal;\n\n\tif ( useClearcoat ) {\n\n\t\tbuilder.define( 'CLEARCOAT' );\n\n\t}\n\n\tbuilder.requires.lights = true;\n\n\tbuilder.extensions.derivatives = true;\n\tbuilder.extensions.shaderTextureLOD = true;\n\n\tif ( builder.isShader( 'vertex' ) ) {\n\n\t\tvar position = this.position ? this.position.analyzeAndFlow( builder, 'v3', { cache: 'position' } ) : undefined;\n\n\t\tbuilder.mergeUniform( UniformsUtils.merge( [\n\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights\n\n\t\t] ) );\n\n\t\tif ( UniformsLib.LTC_1 ) {\n\n\t\t\t// add ltc data textures to material uniforms\n\n\t\t\tbuilder.uniforms.ltc_1 = { value: undefined };\n\t\t\tbuilder.uniforms.ltc_2 = { value: undefined };\n\n\t\t}\n\n\t\tbuilder.addParsCode( [\n\t\t\t\"varying vec3 vViewPosition;\",\n\n\t\t\t\"#ifndef FLAT_SHADED\",\n\n\t\t\t\"\tvarying vec3 vNormal;\",\n\n\t\t\t\"#endif\",\n\n\t\t\t//\"#include <encodings_pars_fragment>\", // encoding functions\n\t\t\t\"#include <fog_pars_vertex>\",\n\t\t\t\"#include <morphtarget_pars_vertex>\",\n\t\t\t\"#include <skinning_pars_vertex>\",\n\t\t\t\"#include <shadowmap_pars_vertex>\",\n\t\t\t\"#include <logdepthbuf_pars_vertex>\",\n\t\t\t\"#include <clipping_planes_pars_vertex>\"\n\n\t\t].join( \"\\n\" ) );\n\n\t\tvar output = [\n\t\t\t\"#include <beginnormal_vertex>\",\n\t\t\t\"#include <morphnormal_vertex>\",\n\t\t\t\"#include <skinbase_vertex>\",\n\t\t\t\"#include <skinnormal_vertex>\",\n\t\t\t\"#include <defaultnormal_vertex>\",\n\n\t\t\t\"#ifndef FLAT_SHADED\", // Normal computed with derivatives when FLAT_SHADED\n\n\t\t\t\"\tvNormal = normalize( transformedNormal );\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#include <begin_vertex>\"\n\t\t];\n\n\t\tif ( position ) {\n\n\t\t\toutput.push(\n\t\t\t\tposition.code,\n\t\t\t\tposition.result ? \"transformed = \" + position.result + \";\" : ''\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <morphtarget_vertex>\",\n\t\t\t\"#include <skinning_vertex>\",\n\t\t\t\"#include <project_vertex>\",\n\t\t\t\"#include <fog_vertex>\",\n\t\t\t\"#include <logdepthbuf_vertex>\",\n\t\t\t\"#include <clipping_planes_vertex>\",\n\n\t\t\t\"\tvViewPosition = - mvPosition.xyz;\",\n\n\t\t\t\"#include <worldpos_vertex>\",\n\t\t\t\"#include <shadowmap_vertex>\"\n\t\t);\n\n\t\tcode = output.join( \"\\n\" );\n\n\t} else {\n\n\t\tvar specularRoughness = new ExpressionNode( 'material.specularRoughness', 'f' );\n\t\tvar clearcoatRoughness = new ExpressionNode( 'material.clearcoatRoughness', 'f' );\n\n\t\tvar contextEnvironment = {\n\t\t\troughness: specularRoughness,\n\t\t\tbias: new SpecularMIPLevelNode( specularRoughness ),\n\t\t\tviewNormal: new ExpressionNode( 'normal', 'v3' ),\n\t\t\tworldNormal: new ExpressionNode( 'inverseTransformDirection( geometry.normal, viewMatrix )', 'v3' ),\n\t\t\tgamma: true\n\t\t};\n\n\t\tvar contextGammaOnly = {\n\t\t\tgamma: true\n\t\t};\n\n\t\tvar contextClearcoatEnvironment = {\n\t\t\troughness: clearcoatRoughness,\n\t\t\tbias: new SpecularMIPLevelNode( clearcoatRoughness ),\n\t\t\tviewNormal: new ExpressionNode( 'clearcoatNormal', 'v3' ),\n\t\t\tworldNormal: new ExpressionNode( 'inverseTransformDirection( geometry.clearcoatNormal, viewMatrix )', 'v3' ),\n\t\t\tgamma: true\n\t\t};\n\n\t\t// analyze all nodes to reuse generate codes\n\n\t\tif ( this.mask ) this.mask.analyze( builder );\n\n\t\tthis.color.analyze( builder, { slot: 'color', context: contextGammaOnly } );\n\t\tthis.roughness.analyze( builder );\n\t\tthis.metalness.analyze( builder );\n\n\t\tif ( this.alpha ) this.alpha.analyze( builder );\n\n\t\tif ( this.normal ) this.normal.analyze( builder );\n\n\t\tif ( this.clearcoat ) this.clearcoat.analyze( builder );\n\t\tif ( this.clearcoatRoughness ) this.clearcoatRoughness.analyze( builder );\n\t\tif ( this.clearcoatNormal ) this.clearcoatNormal.analyze( builder );\n\n\t\tif ( this.reflectivity ) this.reflectivity.analyze( builder );\n\n\t\tif ( this.light ) this.light.analyze( builder, { cache: 'light' } );\n\n\t\tif ( this.ao ) this.ao.analyze( builder );\n\t\tif ( this.ambient ) this.ambient.analyze( builder );\n\t\tif ( this.shadow ) this.shadow.analyze( builder );\n\t\tif ( this.emissive ) this.emissive.analyze( builder, { slot: 'emissive' } );\n\n\t\tif ( this.environment ) {\n\n\t\t\t// isolate environment from others inputs ( see TextureNode, CubeTextureNode )\n\t\t\t// environment.analyze will detect if there is a need of calculate irradiance\n\n\t\t\tthis.environment.analyze( builder, { cache: 'radiance', context: contextEnvironment, slot: 'radiance' } );\n\n\t\t\tif ( builder.requires.irradiance ) {\n\n\t\t\t\tthis.environment.analyze( builder, { cache: 'irradiance', context: contextEnvironment, slot: 'irradiance' } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.sheen ) this.sheen.analyze( builder );\n\n\t\t// build code\n\n\t\tvar mask = this.mask ? this.mask.flow( builder, 'b' ) : undefined;\n\n\t\tvar color = this.color.flow( builder, 'c', { slot: 'color', context: contextGammaOnly } );\n\t\tvar roughness = this.roughness.flow( builder, 'f' );\n\t\tvar metalness = this.metalness.flow( builder, 'f' );\n\n\t\tvar alpha = this.alpha ? this.alpha.flow( builder, 'f' ) : undefined;\n\n\t\tvar normal = this.normal ? this.normal.flow( builder, 'v3' ) : undefined;\n\n\t\tvar clearcoat = this.clearcoat ? this.clearcoat.flow( builder, 'f' ) : undefined;\n\t\tvar clearcoatRoughness = this.clearcoatRoughness ? this.clearcoatRoughness.flow( builder, 'f' ) : undefined;\n\t\tvar clearcoatNormal = this.clearcoatNormal ? this.clearcoatNormal.flow( builder, 'v3' ) : undefined;\n\n\t\tvar reflectivity = this.reflectivity ? this.reflectivity.flow( builder, 'f' ) : undefined;\n\n\t\tvar light = this.light ? this.light.flow( builder, 'v3', { cache: 'light' } ) : undefined;\n\n\t\tvar ao = this.ao ? this.ao.flow( builder, 'f' ) : undefined;\n\t\tvar ambient = this.ambient ? this.ambient.flow( builder, 'c' ) : undefined;\n\t\tvar shadow = this.shadow ? this.shadow.flow( builder, 'c' ) : undefined;\n\t\tvar emissive = this.emissive ? this.emissive.flow( builder, 'c', { slot: 'emissive' } ) : undefined;\n\n\t\tvar environment;\n\n\t\tif ( this.environment ) {\n\n\t\t\tenvironment = {\n\t\t\t\tradiance: this.environment.flow( builder, 'c', { cache: 'radiance', context: contextEnvironment, slot: 'radiance' } )\n\t\t\t};\n\n\t\t\tif ( builder.requires.irradiance ) {\n\n\t\t\t\tenvironment.irradiance = this.environment.flow( builder, 'c', { cache: 'irradiance', context: contextEnvironment, slot: 'irradiance' } );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar clearcoatEnv = useClearcoat && environment ? this.environment.flow( builder, 'c', { cache: 'clearcoat', context: contextClearcoatEnvironment, slot: 'environment' } ) : undefined;\n\n\t\tvar sheen = this.sheen ? this.sheen.flow( builder, 'c' ) : undefined;\n\n\t\tbuilder.requires.transparent = alpha !== undefined;\n\n\t\tbuilder.addParsCode( [\n\t\t\t\"varying vec3 vViewPosition;\",\n\n\t\t\t\"#ifndef FLAT_SHADED\",\n\n\t\t\t\"\tvarying vec3 vNormal;\",\n\n\t\t\t\"#endif\",\n\n\t\t\t\"#include <dithering_pars_fragment>\",\n\t\t\t\"#include <fog_pars_fragment>\",\n\t\t\t\"#include <bsdfs>\",\n\t\t\t\"#include <lights_pars_begin>\",\n\t\t\t\"#include <lights_physical_pars_fragment>\",\n\t\t\t\"#include <shadowmap_pars_fragment>\",\n\t\t\t\"#include <logdepthbuf_pars_fragment>\"\n\t\t].join( \"\\n\" ) );\n\n\t\tvar output = [\n\t\t\t\"#include <clipping_planes_fragment>\",\n\n\t\t\t// add before: prevent undeclared normal\n\t\t\t\"\t#include <normal_fragment_begin>\",\n\t\t\t\"\t#include <clearcoat_normal_fragment_begin>\",\n\n\t\t\t// add before: prevent undeclared material\n\t\t\t\"\tPhysicalMaterial material;\",\n\t\t\t\"\tmaterial.diffuseColor = vec3( 1.0 );\"\n\t\t];\n\n\t\tif ( mask ) {\n\n\t\t\toutput.push(\n\t\t\t\tmask.code,\n\t\t\t\t'if ( ! ' + mask.result + ' ) discard;'\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\tcolor.code,\n\t\t\t\"\tvec3 diffuseColor = \" + color.result + \";\",\n\t\t\t\"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\",\n\n\t\t\t\"#include <logdepthbuf_fragment>\",\n\n\t\t\troughness.code,\n\t\t\t\"\tfloat roughnessFactor = \" + roughness.result + \";\",\n\n\t\t\tmetalness.code,\n\t\t\t\"\tfloat metalnessFactor = \" + metalness.result + \";\"\n\t\t);\n\n\t\tif ( alpha ) {\n\n\t\t\toutput.push(\n\t\t\t\talpha.code,\n\t\t\t\t'#ifdef ALPHATEST',\n\n\t\t\t\t'\tif ( ' + alpha.result + ' <= ALPHATEST ) discard;',\n\n\t\t\t\t'#endif'\n\t\t\t);\n\n\t\t}\n\n\t\tif ( normal ) {\n\n\t\t\toutput.push(\n\t\t\t\tnormal.code,\n\t\t\t\t'normal = ' + normal.result + ';'\n\t\t\t);\n\n\t\t}\n\n\t\tif ( clearcoatNormal ) {\n\n\t\t\toutput.push(\n\t\t\t\tclearcoatNormal.code,\n\t\t\t\t'clearcoatNormal = ' + clearcoatNormal.result + ';'\n\t\t\t);\n\n\t\t}\n\n\t\t// anti-aliasing code by @elalish\n\n\t\toutput.push(\n\t\t\t'vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );',\n\t\t\t'float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );',\n\t\t);\n\n\t\t// optimization for now\n\n\t\toutput.push(\n\t\t\t'material.diffuseColor = ' + ( light ? 'vec3( 1.0 )' : 'diffuseColor * ( 1.0 - metalnessFactor )' ) + ';',\n\n\t\t\t'material.specularRoughness = max( roughnessFactor, 0.0525 );',\n\t\t\t'material.specularRoughness += geometryRoughness;',\n\t\t\t'material.specularRoughness = min( material.specularRoughness, 1.0 );',\n\n\t\t\t'material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );'\n\t\t);\n\n\t\tif ( clearcoat ) {\n\n\t\t\toutput.push(\n\t\t\t\tclearcoat.code,\n\t\t\t\t'material.clearcoat = saturate( ' + clearcoat.result + ' );' // Burley clearcoat model\n\t\t\t);\n\n\t\t} else if ( useClearcoat ) {\n\n\t\t\toutput.push( 'material.clearcoat = 0.0;' );\n\n\t\t}\n\n\t\tif ( clearcoatRoughness ) {\n\n\t\t\toutput.push(\n\t\t\t\tclearcoatRoughness.code,\n\t\t\t\t'material.clearcoatRoughness = max( ' + clearcoatRoughness.result + ', 0.0525 );',\n\t\t\t\t'material.clearcoatRoughness += geometryRoughness;',\n\t\t\t\t'material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );'\n\t\t\t);\n\n\t\t} else if ( useClearcoat ) {\n\n\t\t\toutput.push( 'material.clearcoatRoughness = 0.0;' );\n\n\t\t}\n\n\t\tif ( sheen ) {\n\n\t\t\toutput.push( 'material.sheenColor = ' + sheen.result + ';' );\n\n\t\t}\n\n\t\tif ( reflectivity ) {\n\n\t\t\toutput.push(\n\t\t\t\treflectivity.code,\n\t\t\t\t'material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( ' + reflectivity.result + ' ) ), diffuseColor, metalnessFactor );'\n\t\t\t);\n\n\t\t} else {\n\n\t\t\toutput.push(\n\t\t\t\t'material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );'\n\t\t\t);\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <lights_fragment_begin>\"\n\t\t);\n\n\t\tif ( light ) {\n\n\t\t\toutput.push(\n\t\t\t\tlight.code,\n\t\t\t\t\"reflectedLight.directDiffuse = \" + light.result + \";\"\n\t\t\t);\n\n\t\t\t// apply color\n\n\t\t\toutput.push(\n\t\t\t\t\"diffuseColor *= 1.0 - metalnessFactor;\",\n\n\t\t\t\t\"reflectedLight.directDiffuse *= diffuseColor;\",\n\t\t\t\t\"reflectedLight.indirectDiffuse *= diffuseColor;\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( ao ) {\n\n\t\t\toutput.push(\n\t\t\t\tao.code,\n\t\t\t\t\"reflectedLight.indirectDiffuse *= \" + ao.result + \";\",\n\t\t\t\t\"float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\",\n\t\t\t\t\"reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, \" + ao.result + \", material.specularRoughness );\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( ambient ) {\n\n\t\t\toutput.push(\n\t\t\t\tambient.code,\n\t\t\t\t\"reflectedLight.indirectDiffuse += \" + ambient.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( shadow ) {\n\n\t\t\toutput.push(\n\t\t\t\tshadow.code,\n\t\t\t\t\"reflectedLight.directDiffuse *= \" + shadow.result + \";\",\n\t\t\t\t\"reflectedLight.directSpecular *= \" + shadow.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( emissive ) {\n\n\t\t\toutput.push(\n\t\t\t\temissive.code,\n\t\t\t\t\"reflectedLight.directDiffuse += \" + emissive.result + \";\"\n\t\t\t);\n\n\t\t}\n\n\t\tif ( environment ) {\n\n\t\t\toutput.push( environment.radiance.code );\n\n\t\t\tif ( builder.requires.irradiance ) {\n\n\t\t\t\toutput.push( environment.irradiance.code );\n\n\t\t\t}\n\n\t\t\tif ( clearcoatEnv ) {\n\n\t\t\t\toutput.push(\n\t\t\t\t\tclearcoatEnv.code,\n\t\t\t\t\t\"clearcoatRadiance += \" + clearcoatEnv.result + \";\"\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\toutput.push( \"radiance += \" + environment.radiance.result + \";\" );\n\n\t\t\tif ( builder.requires.irradiance ) {\n\n\t\t\t\toutput.push( \"iblIrradiance += PI * \" + environment.irradiance.result + \";\" );\n\n\t\t\t}\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <lights_fragment_end>\"\n\t\t);\n\n\t\toutput.push( \"vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;\" );\n\n\t\tif ( alpha ) {\n\n\t\t\toutput.push( \"gl_FragColor = vec4( outgoingLight, \" + alpha.result + \" );\" );\n\n\t\t} else {\n\n\t\t\toutput.push( \"gl_FragColor = vec4( outgoingLight, 1.0 );\" );\n\n\t\t}\n\n\t\toutput.push(\n\t\t\t\"#include <tonemapping_fragment>\",\n\t\t\t\"#include <encodings_fragment>\",\n\t\t\t\"#include <fog_fragment>\",\n\t\t\t\"#include <premultiplied_alpha_fragment>\",\n\t\t\t\"#include <dithering_fragment>\"\n\t\t);\n\n\t\tcode = output.join( \"\\n\" );\n\n\t}\n\n\treturn code;\n\n};\n\nStandardNode.prototype.copy = function ( source ) {\n\n\tNode.prototype.copy.call( this, source );\n\n\t// vertex\n\n\tif ( source.position ) this.position = source.position;\n\n\t// fragment\n\n\tthis.color = source.color;\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tif ( source.mask ) this.mask = source.mask;\n\n\tif ( source.alpha ) this.alpha = source.alpha;\n\n\tif ( source.normal ) this.normal = source.normal;\n\n\tif ( source.clearcoat ) this.clearcoat = source.clearcoat;\n\tif ( source.clearcoatRoughness ) this.clearcoatRoughness = source.clearcoatRoughness;\n\tif ( source.clearcoatNormal ) this.clearcoatNormal = source.clearcoatNormal;\n\n\tif ( source.reflectivity ) this.reflectivity = source.reflectivity;\n\n\tif ( source.light ) this.light = source.light;\n\tif ( source.shadow ) this.shadow = source.shadow;\n\n\tif ( source.ao ) this.ao = source.ao;\n\n\tif ( source.emissive ) this.emissive = source.emissive;\n\tif ( source.ambient ) this.ambient = source.ambient;\n\n\tif ( source.environment ) this.environment = source.environment;\n\n\tif ( source.sheen ) this.sheen = source.sheen;\n\n\treturn this;\n\n};\n\nStandardNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\t// vertex\n\n\t\tif ( this.position ) data.position = this.position.toJSON( meta ).uuid;\n\n\t\t// fragment\n\n\t\tdata.color = this.color.toJSON( meta ).uuid;\n\t\tdata.roughness = this.roughness.toJSON( meta ).uuid;\n\t\tdata.metalness = this.metalness.toJSON( meta ).uuid;\n\n\t\tif ( this.mask ) data.mask = this.mask.toJSON( meta ).uuid;\n\n\t\tif ( this.alpha ) data.alpha = this.alpha.toJSON( meta ).uuid;\n\n\t\tif ( this.normal ) data.normal = this.normal.toJSON( meta ).uuid;\n\n\t\tif ( this.clearcoat ) data.clearcoat = this.clearcoat.toJSON( meta ).uuid;\n\t\tif ( this.clearcoatRoughness ) data.clearcoatRoughness = this.clearcoatRoughness.toJSON( meta ).uuid;\n\t\tif ( this.clearcoatNormal ) data.clearcoatNormal = this.clearcoatNormal.toJSON( meta ).uuid;\n\n\t\tif ( this.reflectivity ) data.reflectivity = this.reflectivity.toJSON( meta ).uuid;\n\n\t\tif ( this.light ) data.light = this.light.toJSON( meta ).uuid;\n\t\tif ( this.shadow ) data.shadow = this.shadow.toJSON( meta ).uuid;\n\n\t\tif ( this.ao ) data.ao = this.ao.toJSON( meta ).uuid;\n\n\t\tif ( this.emissive ) data.emissive = this.emissive.toJSON( meta ).uuid;\n\t\tif ( this.ambient ) data.ambient = this.ambient.toJSON( meta ).uuid;\n\n\t\tif ( this.environment ) data.environment = this.environment.toJSON( meta ).uuid;\n\n\t\tif ( this.sheen ) data.sheen = this.sheen.toJSON( meta ).uuid;\n\n\t}\n\n\treturn data;\n\n};\n\nexport { StandardNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tColor,\n\tVector2\n} from '../../../../../build/three.module.js';\n\nimport { StandardNode } from './StandardNode.js';\nimport { PropertyNode } from '../../inputs/PropertyNode.js';\nimport { OperatorNode } from '../../math/OperatorNode.js';\nimport { SwitchNode } from '../../utils/SwitchNode.js';\nimport { NormalMapNode } from '../../misc/NormalMapNode.js';\n\nfunction MeshStandardNode() {\n\n\tStandardNode.call( this );\n\n\tthis.properties = {\n\t\tcolor: new Color( 0xffffff ),\n\t\troughness: 0.5,\n\t\tmetalness: 0.5,\n\t\tnormalScale: new Vector2( 1, 1 )\n\t};\n\n\tthis.inputs = {\n\t\tcolor: new PropertyNode( this.properties, 'color', 'c' ),\n\t\troughness: new PropertyNode( this.properties, 'roughness', 'f' ),\n\t\tmetalness: new PropertyNode( this.properties, 'metalness', 'f' ),\n\t\tnormalScale: new PropertyNode( this.properties, 'normalScale', 'v2' )\n\t};\n\n}\n\nMeshStandardNode.prototype = Object.create( StandardNode.prototype );\nMeshStandardNode.prototype.constructor = MeshStandardNode;\nMeshStandardNode.prototype.nodeType = \"MeshStandard\";\n\nMeshStandardNode.prototype.build = function ( builder ) {\n\n\tvar props = this.properties,\n\t\tinputs = this.inputs;\n\n\tif ( builder.isShader( 'fragment' ) ) {\n\n\t\t// slots\n\t\t// * color\n\t\t// * map\n\n\t\tvar color = builder.findNode( props.color, inputs.color ),\n\t\t\tmap = builder.resolve( props.map );\n\n\t\tthis.color = map ? new OperatorNode( color, map, OperatorNode.MUL ) : color;\n\n\t\t// slots\n\t\t// * roughness\n\t\t// * roughnessMap\n\n\t\tvar roughness = builder.findNode( props.roughness, inputs.roughness ),\n\t\t\troughnessMap = builder.resolve( props.roughnessMap );\n\n\t\tthis.roughness = roughnessMap ? new OperatorNode( roughness, new SwitchNode( roughnessMap, \"g\" ), OperatorNode.MUL ) : roughness;\n\n\t\t// slots\n\t\t// * metalness\n\t\t// * metalnessMap\n\n\t\tvar metalness = builder.findNode( props.metalness, inputs.metalness ),\n\t\t\tmetalnessMap = builder.resolve( props.metalnessMap );\n\n\t\tthis.metalness = metalnessMap ? new OperatorNode( metalness, new SwitchNode( metalnessMap, \"b\" ), OperatorNode.MUL ) : metalness;\n\n\t\t// slots\n\t\t// * normalMap\n\t\t// * normalScale\n\n\t\tif ( props.normalMap ) {\n\n\t\t\tthis.normal = new NormalMapNode( builder.resolve( props.normalMap ) );\n\t\t\tthis.normal.scale = builder.findNode( props.normalScale, inputs.normalScale );\n\n\t\t} else {\n\n\t\t\tthis.normal = undefined;\n\n\t\t}\n\n\t\t// slots\n\t\t// * envMap\n\n\t\tthis.environment = builder.resolve( props.envMap );\n\n\t}\n\n\t// build code\n\n\treturn StandardNode.prototype.build.call( this, builder );\n\n};\n\nMeshStandardNode.prototype.toJSON = function ( meta ) {\n\n\tvar data = this.getJSONNode( meta );\n\n\tif ( ! data ) {\n\n\t\tdata = this.createJSONNode( meta );\n\n\t\tconsole.warn( \".toJSON not implemented in\", this );\n\n\t}\n\n\treturn data;\n\n};\n\nexport { MeshStandardNode };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { SpriteNode } from './nodes/SpriteNode.js';\nimport { NodeMaterial } from './NodeMaterial.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction SpriteNodeMaterial() {\n\n\tvar node = new SpriteNode();\n\n\tNodeMaterial.call( this, node, node );\n\n\tthis.type = \"SpriteNodeMaterial\";\n\n}\n\nSpriteNodeMaterial.prototype = Object.create( NodeMaterial.prototype );\nSpriteNodeMaterial.prototype.constructor = SpriteNodeMaterial;\n\nNodeUtils.addShortcuts( SpriteNodeMaterial.prototype, 'fragment', [\n\t'color',\n\t'alpha',\n\t'mask',\n\t'position',\n\t'spherical'\n] );\n\nexport { SpriteNodeMaterial };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { PhongNode } from './nodes/PhongNode.js';\nimport { NodeMaterial } from './NodeMaterial.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction PhongNodeMaterial() {\n\n\tvar node = new PhongNode();\n\n\tNodeMaterial.call( this, node, node );\n\n\tthis.type = \"PhongNodeMaterial\";\n\n}\n\nPhongNodeMaterial.prototype = Object.create( NodeMaterial.prototype );\nPhongNodeMaterial.prototype.constructor = PhongNodeMaterial;\n\nNodeUtils.addShortcuts( PhongNodeMaterial.prototype, 'fragment', [\n\t'color',\n\t'alpha',\n\t'specular',\n\t'shininess',\n\t'normal',\n\t'emissive',\n\t'ambient',\n\t'light',\n\t'shadow',\n\t'ao',\n\t'environment',\n\t'environmentAlpha',\n\t'mask',\n\t'position'\n] );\n\nexport { PhongNodeMaterial };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { StandardNode } from './nodes/StandardNode.js';\nimport { NodeMaterial } from './NodeMaterial.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction StandardNodeMaterial() {\n\n\tvar node = new StandardNode();\n\n\tNodeMaterial.call( this, node, node );\n\n\tthis.type = \"StandardNodeMaterial\";\n\n}\n\nStandardNodeMaterial.prototype = Object.create( NodeMaterial.prototype );\nStandardNodeMaterial.prototype.constructor = StandardNodeMaterial;\n\nNodeUtils.addShortcuts( StandardNodeMaterial.prototype, 'fragment', [\n\t'color',\n\t'alpha',\n\t'roughness',\n\t'metalness',\n\t'reflectivity',\n\t'clearcoat',\n\t'clearcoatRoughness',\n\t'clearcoatNormal',\n\t'normal',\n\t'emissive',\n\t'ambient',\n\t'light',\n\t'shadow',\n\t'ao',\n\t'environment',\n\t'mask',\n\t'position',\n\t'sheen'\n] );\n\nexport { StandardNodeMaterial };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport { MeshStandardNode } from './nodes/MeshStandardNode.js';\nimport { NodeMaterial } from './NodeMaterial.js';\nimport { NodeUtils } from '../core/NodeUtils.js';\n\nfunction MeshStandardNodeMaterial() {\n\n\tvar node = new MeshStandardNode();\n\n\tNodeMaterial.call( this, node, node );\n\n\tthis.type = \"MeshStandardNodeMaterial\";\n\n}\n\nMeshStandardNodeMaterial.prototype = Object.create( NodeMaterial.prototype );\nMeshStandardNodeMaterial.prototype.constructor = MeshStandardNodeMaterial;\n\nNodeUtils.addShortcuts( MeshStandardNodeMaterial.prototype, 'properties', [\n\t\"color\",\n\t\"roughness\",\n\t\"metalness\",\n\t\"map\",\n\t\"normalMap\",\n\t\"normalScale\",\n\t\"metalnessMap\",\n\t\"roughnessMap\",\n\t\"envMap\"\n] );\n\nexport { MeshStandardNodeMaterial };\n","/**\n * @author sunag / http://www.sunag.com.br/\n */\n\nimport {\n\tLinearFilter,\n\tMesh,\n\tOrthographicCamera,\n\tPlaneBufferGeometry,\n\tRGBAFormat,\n\tScene,\n\tVector2,\n\tWebGLRenderTarget\n} from '../../../../build/three.module.js';\n\nimport { NodeMaterial } from '../materials/NodeMaterial.js';\nimport { ScreenNode } from '../inputs/ScreenNode.js';\n\nfunction NodePostProcessing( renderer, renderTarget ) {\n\n\tif ( renderTarget === undefined ) {\n\n\t\tvar parameters = {\n\t\t\tminFilter: LinearFilter,\n\t\t\tmagFilter: LinearFilter,\n\t\t\tformat: RGBAFormat,\n\t\t\tstencilBuffer: false\n\t\t};\n\n\t\tvar size = renderer.getDrawingBufferSize( new Vector2() );\n\t\trenderTarget = new WebGLRenderTarget( size.width, size.height, parameters );\n\n\t}\n\n\tthis.renderer = renderer;\n\tthis.renderTarget = renderTarget;\n\n\tthis.output = new ScreenNode();\n\tthis.material = new NodeMaterial();\n\n\tthis.camera = new OrthographicCamera( - 1, 1, 1, - 1, 0, 1 );\n\tthis.scene = new Scene();\n\n\tthis.quad = new Mesh( new PlaneBufferGeometry( 2, 2 ), this.material );\n\tthis.quad.frustumCulled = false; // Avoid getting clipped\n\tthis.scene.add( this.quad );\n\n\tthis.needsUpdate = true;\n\n}\n\nNodePostProcessing.prototype = {\n\n\tconstructor: NodePostProcessing,\n\n\trender: function ( scene, camera, frame ) {\n\n\t\tif ( this.needsUpdate ) {\n\n\t\t\tthis.material.dispose();\n\n\t\t\tthis.material.fragment.value = this.output;\n\t\t\tthis.material.build();\n\n\t\t\tif ( this.material.uniforms.renderTexture ) {\n\n\t\t\t\tthis.material.uniforms.renderTexture.value = this.renderTarget.texture;\n\n\t\t\t}\n\n\t\t\tthis.needsUpdate = false;\n\n\t\t}\n\n\t\tframe.setRenderer( this.renderer )\n\t\t\t.setRenderTexture( this.renderTarget.texture );\n\n\t\tthis.renderer.setRenderTarget( this.renderTarget );\n\t\tthis.renderer.render( scene, camera );\n\n\t\tframe.updateNode( this.material );\n\n\t\tthis.renderer.setRenderTarget( null );\n\t\tthis.renderer.render( this.scene, this.camera );\n\n\t},\n\n\tsetPixelRatio: function ( value ) {\n\n\t\tthis.renderer.setPixelRatio( value );\n\n\t\tvar size = this.renderer.getSize( new Vector2() );\n\n\t\tthis.setSize( size.width, size.height );\n\n\t},\n\n\tsetSize: function ( width, height ) {\n\n\t\tvar pixelRatio = this.renderer.getPixelRatio();\n\n\t\tthis.renderTarget.setSize( width * pixelRatio, height * pixelRatio );\n\n\t\tthis.renderer.setSize( width, height );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.output = source.output;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRootObject ) {\n\n\t\t\tmeta = {\n\t\t\t\tnodes: {}\n\t\t\t};\n\n\t\t}\n\n\t\tif ( meta && ! meta.post ) meta.post = {};\n\n\t\tif ( ! meta.post[ this.uuid ] ) {\n\n\t\t\tvar data = {};\n\n\t\t\tdata.uuid = this.uuid;\n\t\t\tdata.type = \"NodePostProcessing\";\n\n\t\t\tmeta.post[ this.uuid ] = data;\n\n\t\t\tif ( this.name !== \"\" ) data.name = this.name;\n\n\t\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t\tdata.output = this.output.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tmeta.post = this.uuid;\n\n\t\treturn meta;\n\n\t}\n\n};\n\nexport { NodePostProcessing };\n","// TODO: all nodes\n\n// core\n\nexport { Node } from './core/Node.js';\nexport { TempNode } from './core/TempNode.js';\nexport { InputNode } from './core/InputNode.js';\nexport { ConstNode } from './core/ConstNode.js';\nexport { VarNode } from './core/VarNode.js';\nexport { StructNode } from './core/StructNode.js';\nexport { AttributeNode } from './core/AttributeNode.js';\nexport { FunctionNode } from './core/FunctionNode.js';\nexport { ExpressionNode } from './core/ExpressionNode.js';\nexport { FunctionCallNode } from './core/FunctionCallNode.js';\nexport { NodeLib } from './core/NodeLib.js';\nexport { NodeUtils } from './core/NodeUtils.js';\nexport { NodeFrame } from './core/NodeFrame.js';\nexport { NodeUniform } from './core/NodeUniform.js';\nexport { NodeBuilder } from './core/NodeBuilder.js';\n\n// inputs\n\nexport { BoolNode } from './inputs/BoolNode.js';\nexport { IntNode } from './inputs/IntNode.js';\nexport { FloatNode } from './inputs/FloatNode.js';\nexport { Vector2Node } from './inputs/Vector2Node.js';\nexport { Vector3Node } from './inputs/Vector3Node.js';\nexport { Vector4Node } from './inputs/Vector4Node.js';\nexport { ColorNode } from './inputs/ColorNode.js';\nexport { Matrix3Node } from './inputs/Matrix3Node.js';\nexport { Matrix4Node } from './inputs/Matrix4Node.js';\nexport { TextureNode } from './inputs/TextureNode.js';\nexport { CubeTextureNode } from './inputs/CubeTextureNode.js';\nexport { ScreenNode } from './inputs/ScreenNode.js';\nexport { ReflectorNode } from './inputs/ReflectorNode.js';\nexport { PropertyNode } from './inputs/PropertyNode.js';\nexport { RTTNode } from './inputs/RTTNode.js';\n\n// accessors\n\nexport { UVNode } from './accessors/UVNode.js';\nexport { ColorsNode } from './accessors/ColorsNode.js';\nexport { PositionNode } from './accessors/PositionNode.js';\nexport { NormalNode } from './accessors/NormalNode.js';\nexport { CameraNode } from './accessors/CameraNode.js';\nexport { LightNode } from './accessors/LightNode.js';\nexport { ReflectNode } from './accessors/ReflectNode.js';\nexport { ScreenUVNode } from './accessors/ScreenUVNode.js';\nexport { ResolutionNode } from './accessors/ResolutionNode.js';\n\n// math\n\nexport { MathNode } from './math/MathNode.js';\nexport { OperatorNode } from './math/OperatorNode.js';\nexport { CondNode } from './math/CondNode.js';\n\n// procedural\n\nexport { NoiseNode } from './procedural/NoiseNode.js';\nexport { CheckerNode } from './procedural/CheckerNode.js';\n\n// misc\n\nexport { TextureCubeUVNode } from './misc/TextureCubeUVNode.js';\nexport { TextureCubeNode } from './misc/TextureCubeNode.js';\nexport { NormalMapNode } from './misc/NormalMapNode.js';\nexport { BumpMapNode } from './misc/BumpMapNode.js';\n\n// utils\n\nexport { BypassNode } from './utils/BypassNode.js';\nexport { JoinNode } from './utils/JoinNode.js';\nexport { SwitchNode } from './utils/SwitchNode.js';\nexport { TimerNode } from './utils/TimerNode.js';\nexport { VelocityNode } from './utils/VelocityNode.js';\nexport { UVTransformNode } from './utils/UVTransformNode.js';\nexport { MaxMIPLevelNode } from './utils/MaxMIPLevelNode.js';\nexport { SpecularMIPLevelNode } from './utils/SpecularMIPLevelNode.js';\nexport { ColorSpaceNode } from './utils/ColorSpaceNode.js';\nexport { SubSlotNode } from './utils/SubSlotNode.js';\n\n// effects\n\nexport { BlurNode } from './effects/BlurNode.js';\nexport { ColorAdjustmentNode } from './effects/ColorAdjustmentNode.js';\nexport { LuminanceNode } from './effects/LuminanceNode.js';\n\n// material nodes\n\nexport { RawNode } from './materials/nodes/RawNode.js';\nexport { SpriteNode } from './materials/nodes/SpriteNode.js';\nexport { PhongNode } from './materials/nodes/PhongNode.js';\nexport { StandardNode } from './materials/nodes/StandardNode.js';\nexport { MeshStandardNode } from './materials/nodes/MeshStandardNode.js';\n\n// materials\n\nexport { NodeMaterial } from './materials/NodeMaterial.js';\nexport { SpriteNodeMaterial } from './materials/SpriteNodeMaterial.js';\nexport { PhongNodeMaterial } from './materials/PhongNodeMaterial.js';\nexport { StandardNodeMaterial } from './materials/StandardNodeMaterial.js';\nexport { MeshStandardNodeMaterial } from './materials/MeshStandardNodeMaterial.js';\n\n// postprocessing\n\nexport { NodePostProcessing } from './postprocessing/NodePostProcessing.js';\n//export { NodePass } from './postprocessing/NodePass.js';\n","import * as dat from \"dat.gui\";\nconst gui = new dat.GUI();\n\nimport * as three from \"three\";\nwindow.THREE = three;\n\n\nimport * as threeB from \"./three-base\";\nimport { OrbitControls } from \"three/examples/jsm/controls/OrbitControls\"\nimport { NoiseEffect, BloomEffect, EffectComposer, EffectPass, RenderPass, KernelSize, BlendFunction, ToneMappingEffect, ClearPass } from \"postprocessing\";\nimport { UnrealBloomPass } from \"./patched/UnreallBloomPassPatched\";\nimport { FilmPass } from \"three/examples/jsm/postprocessing/FilmPass\";\n\n\nimport * as Nodes from 'three/examples/jsm/nodes/Nodes.js';\nimport { Clock, PerspectiveCamera, Scene, WebGLRenderer, FloatType, TextureLoader } from \"three\";\n\nvar cube_target = new three.WebGLCubeRenderTarget(2048, {\n    encoding: three.sRGBEncoding,\n    type: three.HalfFloatType\n})\nvar clock = new THREE.Clock();\nvar scene = new THREE.Scene();\nvar renderer = new THREE.WebGLRenderer({\n    powerPreference: \"high-performance\",\n\tantialias: false,\n\tstencil: false,\n\tdepth: false\n});\nvar camera = new three.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);\nvar cube_cam = new three.CubeCamera(0.1, 3000, cube_target);\ncamera.position.z = 10;\nthreeB.renderer_fullscreen_dpi(renderer); //\nthreeB.renderer_shadow_vsm(renderer); //VSM\nthreeB.renderer_tone_mapping(renderer, scene, { //ToneMapping sRGB\n    aces_exposure: 1.5\n}, gui.addFolder(\"renderer.toneMapping\"));\nthreeB.renderer_patch_postprocessing(renderer);\n\n\nvar o = new OrbitControls(camera, renderer.domElement);\ndocument.body.appendChild(renderer.domElement);\n\n\n\nvar grp = new three.Group();\nvar grp2 = new three.Group();\n\n\nfor (var i = 0; i < 30; i++) {\n    var geometry = new THREE.SphereGeometry(0.05, 60, 60);\n    var material = new THREE.MeshPhysicalMaterial({ color: 0xffffff, metalness: 1, roughness: 1, emissiveIntensity: Math.random() * 10, emissive: 0xffff33 });\n    var cube = new THREE.Mesh(geometry, material);\n    cube.receiveShadow = true;\n    cube.castShadow = true;\n    cube.position.set(Math.round((Math.random() - 0.5) * 20), 1, Math.round((Math.random() - 0.5) * 20));\n    grp.add(cube);\n}\n\nfor (var i = 0; i < 2; i++) {\n    var geometry = new THREE.SphereGeometry(0.3, 60, 60);\n    var material = new THREE.MeshPhysicalMaterial({ color: 0xffffff, metalness: 1, roughness: 1, emissiveIntensity: 20, emissive: 0xff11ff });\n    var cube = new THREE.Mesh(geometry, material);\n    cube.receiveShadow = true;\n    cube.castShadow = true;\n    cube.position.set(Math.round((Math.random() - 0.5) * 20), 1, Math.round((Math.random() - 0.5) * 20));\n    grp.add(cube);\n}\n\nvar dl = new THREE.DirectionalLight(0xffffff, 0.1);\ndl.position.set(5, 10, 10);\nvar dirLight = dl;\ndirLight.shadow.camera.near = 0.1;\ndirLight.shadow.camera.far = 200;\ndirLight.shadow.camera.right = 17;\ndirLight.shadow.camera.left = - 17;\ndirLight.shadow.camera.top = 17;\ndirLight.shadow.camera.bottom = - 17;\ndirLight.shadow.mapSize.width = 1024;\ndirLight.shadow.mapSize.height = 1024;\ndirLight.shadow.radius = 2;\ndirLight.shadow.bias = -0.0001;\ndl.lookAt(0, 0, 0);\ndl.castShadow = true;\ndl.receiveShadow = true;\n// scene.add(helper);\n\n\nscene.add(new THREE.AmbientLight(0xffffff, 1));\n\nscene.fog = new THREE.FogExp2(0, 0.01);\nscene.add(grp);\nscene.add(grp2);\n\n\nvar planegeo = new THREE.PlaneGeometry(30, 30);\nvar planemat = new THREE.MeshPhysicalMaterial({ color: 0xffffff, metalness: 1 });\nvar floor = new THREE.Mesh(planegeo, planemat);\nfloor.rotation.x = -Math.PI / 2;\nfloor.position.y = -0.5;\nfloor.receiveShadow = true;\nfloor.castShadow = true;\n\ngrp.add(floor);\n\n\n\nvar fxMat = new THREE.MeshBasicMaterial({\n    envMap: cube_target, //cube camera\n    side: three.BackSide\n});\n\n// var fxTest = new THREE.SphereGeometry(3, 150, 150);\nvar fxTest = new THREE.TetrahedronBufferGeometry(3, 2);\nvar fxMesh = new THREE.Mesh(fxTest, fxMat);\ngrp2.add(fxMesh);\n\nvar fxMat2 = new THREE.MeshBasicMaterial({\n    wireframe: true, \n    color: 0xff3300,\n    envMap: cube_target,\n    side: three.FrontSide // + \n});\n\nvar fxMesh = new THREE.Mesh(fxTest, fxMat2);\ngrp2.add(fxMesh);\n\n\nwindow.cam_target = 10;\n\n\nconst composer = new EffectComposer(renderer, {\n    frameBufferType: THREE.HalfFloatType,\n});\n\nconst ubloomPass = new UnrealBloomPass(new three.Vector2(512, 512));\nubloomPass.threshold = 1.7;\nubloomPass.strength = 0.8;\nubloomPass.radius = 0.8;\n\nconst ubloomPass2 = new UnrealBloomPass(new three.Vector2(512, 512));\nubloomPass2.threshold = 1.2;\nubloomPass2.strength = 0.4;\nubloomPass2.radius = 1;\n\nconst film = new FilmPass(0.6, 0, 0, false);\n\ncomposer.addPass(new RenderPass(scene, camera));\ncomposer.addPass(ubloomPass);\ncomposer.addPass(ubloomPass2);\ncomposer.addPass(film);\n\nconst toneMappingEffect = new ToneMappingEffect({\n    blendFunction: BlendFunction.NORMAL,\n    adaptive: true,\n    resolution: 256,\n    middleGrey: 0.6,\n    maxLuminance: 16.0,\n    averageLuminance: 1.0,\n    adaptationRate: 3.0\n});\n\nvar fxPass = new EffectPass(camera, toneMappingEffect);\nfxPass.renderToScreen = true;\ncomposer.addPass(fxPass);\n\nvar animate = function () {\n    requestAnimationFrame(animate);\n\n    renderer.autoClear = true;\n    // camera.position.z += (cam_target - camera.position.z) * 0.2;\n    renderer.setClearColor(0xffffff);\n\n    // earth.rotation.y += 0.002;\n    o.update();\n    grp2.visible = true;\n    grp.visible = false;\n    renderer.clear(true, true, true);\n    composer.render(clock.getDelta());\n\n    renderer.setClearColor(0x000000);\n\n    cube_cam.position.copy(camera.position);\n    grp2.visible = false;\n    grp.visible = true;\n    cube_cam.update(renderer, scene);\n\n};\n\nanimate();\n\n"]}